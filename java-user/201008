From java-user-return-46884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 01 01:21:48 2010
Return-Path: <java-user-return-46884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87473 invoked from network); 1 Aug 2010 01:21:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Aug 2010 01:21:48 -0000
Received: (qmail 54310 invoked by uid 500); 1 Aug 2010 01:21:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54244 invoked by uid 500); 1 Aug 2010 01:21:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54236 invoked by uid 99); 1 Aug 2010 01:21:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Aug 2010 01:21:45 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Aug 2010 01:21:39 +0000
Received: by qwd7 with SMTP id 7so1298102qwd.35
        for <java-user@lucene.apache.org>; Sat, 31 Jul 2010 18:21:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=xJtPaRUPU8eAhmLpfSO2FzPam/9vqRv+EyxeLA7WEmw=;
        b=gtUyys9QxSZv0eRbv07m09mdD/XM2g6e5tMeOibXSri6/INhd069L0cgihVppBGq2S
         34vlNh4JrZZu8TnUGD+E4Z4UWPbwdHGYnNR0m3+WDc08dEzQ7DlY3B4euRZeLOxmMemx
         45oP4krT/NKFcBLBYgv47crMLclRmfdzrJN3Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=HKz9sngaXN2nyestQmCBXFhq/RIfX04cieycX35fb12dLGI3NJ+P6+Xw+w+/u/CCSa
         GH0Z6IP6h/5WV4ZtevxcEShgaL5+EdORttUUWC0Gw60ZoZugqdqrip0k/kg0+MZQadZP
         Soa1mRR+NR4bQTUNpr7Y4++4t6fmn6THUFtjQ=
MIME-Version: 1.0
Received: by 10.220.62.136 with SMTP id x8mr2644550vch.175.1280625678590; Sat, 
	31 Jul 2010 18:21:18 -0700 (PDT)
Received: by 10.220.177.70 with HTTP; Sat, 31 Jul 2010 18:21:18 -0700 (PDT)
In-Reply-To: <AANLkTimeF7QYLuS0K7ca6+tj=_2DSmhdzJQEr7iCAwyF@mail.gmail.com>
References: <AANLkTimeF7QYLuS0K7ca6+tj=_2DSmhdzJQEr7iCAwyF@mail.gmail.com>
Date: Sat, 31 Jul 2010 21:21:18 -0400
Message-ID: <AANLkTin0JRJOoZ8wvGhBvknWftDhTZXy12E+vjUYk7qe@mail.gmail.com>
Subject: Re: Get fields from a Query object
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=e0cb4e887453a9a35f048cb8e63d

--e0cb4e887453a9a35f048cb8e63d
Content-Type: text/plain; charset=ISO-8859-1

Could you explain more about what you're trying to do? You're writing the
query
after all, so you probably already know what went into it.

Which shows that I don't understand what you want to do at all.

Best
Erick

On Sat, Jul 31, 2010 at 9:41 AM, Anuj Shah <anujshahwork@gmail.com> wrote:

> Hi,
>
> Is there a way to get all the fields involved in a query?
>
> Thanks
>
> Anuj
>

--e0cb4e887453a9a35f048cb8e63d--

From java-user-return-46885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 01 07:44:42 2010
Return-Path: <java-user-return-46885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81235 invoked from network); 1 Aug 2010 07:44:42 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Aug 2010 07:44:42 -0000
Received: (qmail 38331 invoked by uid 500); 1 Aug 2010 07:44:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38008 invoked by uid 500); 1 Aug 2010 07:44:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38000 invoked by uid 99); 1 Aug 2010 07:44:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Aug 2010 07:44:36 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of naamakraus@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Aug 2010 07:44:30 +0000
Received: by gwj19 with SMTP id 19so1604051gwj.35
        for <java-user@lucene.apache.org>; Sun, 01 Aug 2010 00:44:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=/CFZnv4BOnx/lR2ngTafHJCbQjs66HAY30Hb0cnPiuA=;
        b=o8nJFMpRZLcYVCtJkX7esIGsQhWcTLR2E7t37e69FL5LZ5WVO8LUNL6sjlOJ6xxXr1
         yPO1ye1+e0WrbOU2lX2z0gGiUeJpGFYyuvi33oMYoCnhXh2z/z7wHDEHf+bAAYgvqprt
         tdstdvAp0LkdgPzo5ROo0X7ZtygAyrdD8Vx2Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=CjpdHnTU+GvbXScY1vS9U7OMUTyQKqRgETcWLnT8haGRmy9emXtQH+5RyDc0pkmbfs
         gm/uzikKY/oaC0BYptZ/ZGGmblXZHjPyCh/yGM86YvFhScJcI64ra7MB/4hj3BgMNONX
         3zERGuZ52bXZLOklBSlFfZ/Pb+FMujHh1btIA=
Received: by 10.101.138.8 with SMTP id q8mr4520765ann.164.1280648649225; Sun, 
	01 Aug 2010 00:44:09 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.100.37.4 with HTTP; Sun, 1 Aug 2010 00:43:49 -0700 (PDT)
In-Reply-To: <4C53D90B.9080700@gmail.com>
References: <4C53D90B.9080700@gmail.com>
From: Naama Kraus <naamakraus@gmail.com>
Date: Sun, 1 Aug 2010 10:43:49 +0300
Message-ID: <AANLkTimmJdysCmNpu5zM0VYfYru8U=0JSLr9ArECVRWe@mail.gmail.com>
Subject: Re: Rank results only on some fields
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e68f9e34d1b721048cbe3f23

--0016e68f9e34d1b721048cbe3f23
Content-Type: text/plain; charset=ISO-8859-1

Wouldn't boosting the term AUTHOR:Manning with a boost factor of 0 do the
trick ?
Naama


On Sat, Jul 31, 2010 at 11:04 AM, Philippe <mailer.thomas@gmail.com> wrote:

> Hi,
>
> I want to rank my results only on parts of my query.  E.g my query is
> "TITLE:Lucene AND AUTHOR:Manning". After this query standard lucene ranking
> for both fields take place.
>
> However, is it possible to query the index using the full query and rank
> results only according to the "TITLE"-Field?
>
> Regards,
>    Philippe
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e68f9e34d1b721048cbe3f23--

From java-user-return-46886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 01 15:29:53 2010
Return-Path: <java-user-return-46886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9307 invoked from network); 1 Aug 2010 15:29:53 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Aug 2010 15:29:53 -0000
Received: (qmail 14134 invoked by uid 500); 1 Aug 2010 15:29:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13994 invoked by uid 500); 1 Aug 2010 15:29:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13985 invoked by uid 99); 1 Aug 2010 15:29:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Aug 2010 15:29:49 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adam.saltiel@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Aug 2010 15:29:43 +0000
Received: by iwn37 with SMTP id 37so33185iwn.35
        for <java-user@lucene.apache.org>; Sun, 01 Aug 2010 08:29:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=NzCrhkDYFR89n5g0Mv0Wc4rJZvrvnduheDj0s3vPWfw=;
        b=j6oTnt7CddH2PRh4jlgadhGBaFR1q1D163+sBo5zqlnq6epQ2OvC1IFJxwC9/CLeLk
         65DMAQwvLbD5C16HX7/j72w/aQKYYzDqdATppoTE2vjEzlAqsQJq0enCw5Lm85HnFe5/
         /mfq3aoz2wrj/ySOjM2T7vvDbi81uyQW2IH1E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=hqPLFBOLp8wqd8gdycqQi5vLyWnFztQ96VyXazYgNzvbyYgfy9zRW15vyaoWLtgEkr
         Z1b1ClNTAweLIjOxYMBNQYQMgZiMupL7AWhVGHCxZXM0iuVMW6EtK2AYO/1A9Q7aPSdS
         JPzR0rkDbrndgV8owv3W8bwwoOK1JiWdAoJ/A=
MIME-Version: 1.0
Received: by 10.231.174.5 with SMTP id r5mr5334822ibz.132.1280676563087; Sun, 
	01 Aug 2010 08:29:23 -0700 (PDT)
Received: by 10.231.158.19 with HTTP; Sun, 1 Aug 2010 08:29:23 -0700 (PDT)
Date: Sun, 1 Aug 2010 16:29:23 +0100
Message-ID: <AANLkTinJPE5pRb=65VsdXd7+bEi0VcijQrdPn33NPBDD@mail.gmail.com>
Subject: Semantic Search research?
From: adasal <adam.saltiel@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364ecf089d709a048cc4bf28

--0016364ecf089d709a048cc4bf28
Content-Type: text/plain; charset=UTF-8

Does anyone on the list know about the nature of this research or
collaboration:-
A search engine based on '25 years of cutting edge research from the Indian
Institutes of Technology, the University of Delhi, the Massachusetts
Institute of Technology, Harvard University, and the University of
California at Berkeley'?
It uses an algorithms described this way:
'... distributed electronic semantic intelligence (DESI) algorithms and our
word-sense disambiguation extraction technologies can automatically identify
the referential "meanings" embedded in various search terms.'
>From this description I can't get a handle on what the technology might be
that would be different to something obvious, that the referential meanings
in search terms would be important in disambiguating them, and using them
can form the basis for grouping search results.
This puts the emphasis on the disambiguation of the search terms which is a
different strategy to clustering on the basis of what topics returned
documents contain.

In short, my question is whether anyone knows of research in this area that
might fit the description in quotes?
I am aware of projects like SireN. Does anyone have any hints on how this
and known approaches may contrast?

Adam Saltiel

--0016364ecf089d709a048cc4bf28--

From java-user-return-46887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 01 19:01:03 2010
Return-Path: <java-user-return-46887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76243 invoked from network); 1 Aug 2010 19:01:02 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Aug 2010 19:01:02 -0000
Received: (qmail 99792 invoked by uid 500); 1 Aug 2010 19:01:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99731 invoked by uid 500); 1 Aug 2010 19:01:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99723 invoked by uid 99); 1 Aug 2010 19:00:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Aug 2010 19:00:59 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aminmc@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Aug 2010 19:00:52 +0000
Received: by wwb18 with SMTP id 18so2538603wwb.5
        for <java-user@lucene.apache.org>; Sun, 01 Aug 2010 12:00:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:content-type
         :content-transfer-encoding:subject:date:message-id:to:mime-version
         :x-mailer;
        bh=mpnJA9pWWBhDbSbXirGausdahm2q9ZcQBAjpp9G7Sjo=;
        b=LJ2quLFGIxbHFeF8Dy6NDG1g/IH5yqRvMKaFSbjY9G+olxJgR6ivaFlDpLawzb4uyI
         7VCZFWvkwMUayLcKQyyo96sSMxbVSBPWxacYuof+TEsPNCMx8sr7hHh6jIGnPKtucHQ1
         2WPWdt/Bk8s4o35ATse5IO4XmNjqrv3M2upsQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:content-type:content-transfer-encoding:subject:date:message-id
         :to:mime-version:x-mailer;
        b=AXlhfFl8DnMs/sgia6v2IdAmvKo9PaQgWaTEbpTWMC94ObbipEuy4EraT4QcyV+Djd
         SKVAheSTg+EdWvDKJYzV7Z8Yqt4xZb6aBkUEQMm/kmmN2jwkAc3iDWAfNyMfzYpqZ+Zp
         PUqRBZKiWQT/cZra5h5O3ZERiVTr3kZBcjkzE=
Received: by 10.227.147.82 with SMTP id k18mr4171180wbv.64.1280689230867;
        Sun, 01 Aug 2010 12:00:30 -0700 (PDT)
Received: from [192.168.1.80] (host86-146-89-111.range86-146.btcentralplus.com [86.146.89.111])
        by mx.google.com with ESMTPS id o84sm2363322wej.37.2010.08.01.12.00.30
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 01 Aug 2010 12:00:30 -0700 (PDT)
From: Amin Mohammed-Coleman <aminmc@gmail.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: hit exception flushing segment _0 - IndexWriter configuration
Date: Sun, 1 Aug 2010 20:00:28 +0100
Message-Id: <858BF3C0-17A2-458B-83C3-E98906EB82C0@gmail.com>
To: java-user@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1081)
X-Mailer: Apple Mail (2.1081)

Hi

I am currently building an application whereby there is a remote index =
server (yes it probably does sound like Solr :)) and users use my API to =
send documents to the indexing server for indexing.  The 2 methods =
primarily used is add and commit. So the user can send requests for =
documents to be added to the index and then can call commit.  I did a =
test where i simulated a user calling the add method 10 times and then =
in a separate method call invoked commit.   The thing I noticed when i =
turned the verbose setting for the IndexWriter was:

hit exception flushing segment _0

It may be worth mention the settings I have for my index writer:

mergeFactor =3D"100"=20
maxMergeDocs =3D "9999999"=20


When i use my api to add 102 documents and then in a separate method =
call invoke a commit I get no exception.  So I was wondering what is the =
best setting for the mergeFactor, and should i be experiencing this =
exception after requesting a commit after adding 10 documents to the =
index?=20


Any help would be appreciated.


Thanks
Amin=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 02 12:16:55 2010
Return-Path: <java-user-return-46888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8026 invoked from network); 2 Aug 2010 12:16:54 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 Aug 2010 12:16:54 -0000
Received: (qmail 92656 invoked by uid 500); 2 Aug 2010 12:16:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92276 invoked by uid 500); 2 Aug 2010 12:16:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92268 invoked by uid 99); 2 Aug 2010 12:16:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Aug 2010 12:16:48 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anujshahwork@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Aug 2010 12:16:42 +0000
Received: by wyf23 with SMTP id 23so206649wyf.35
        for <java-user@lucene.apache.org>; Mon, 02 Aug 2010 05:16:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=ae4dDP7o228v+3xmZGjlO0qRZOSUhXzlk1FkzXRh/4Q=;
        b=j2b/Gt8Vl6ED9VSBrpsETIxXqCQukBtisry5e14KNWyY7VmqF7JR3EXORkZeaqd0IR
         0/J1EA79J2oZObpla551TstzZ7YaEdxk9WlozqRHXMw7V+3433qZK0WX1tL6+AJdbrKO
         FxlGO+gE8LHGa4lZJ7ZMmEp/QzRWW4rfR2av4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=OTwvi538j/7L42anqpq2SFQh3b5qFxx+XDNyF/ZPUDvWCDYojsC78yPwoO6rDme4Ot
         fv16ndRa+KFMoEh1eKRwTL00ZEItNPFZVnUEMF0o5Zn/DJCvoVQCzwz7eY9aDkcMD2aj
         6TW8qBeZfXTIwakEBkpTB5kFa0/oKn6E5YRrc=
MIME-Version: 1.0
Received: by 10.227.156.210 with SMTP id y18mr4841265wbw.63.1280751379323; 
	Mon, 02 Aug 2010 05:16:19 -0700 (PDT)
Received: by 10.227.129.75 with HTTP; Mon, 2 Aug 2010 05:16:19 -0700 (PDT)
In-Reply-To: <AANLkTin0JRJOoZ8wvGhBvknWftDhTZXy12E+vjUYk7qe@mail.gmail.com>
References: <AANLkTimeF7QYLuS0K7ca6+tj=_2DSmhdzJQEr7iCAwyF@mail.gmail.com>
	<AANLkTin0JRJOoZ8wvGhBvknWftDhTZXy12E+vjUYk7qe@mail.gmail.com>
Date: Mon, 2 Aug 2010 13:16:19 +0100
Message-ID: <AANLkTim=rR5YMs=Wsd94z6xCLK5sKtb725TLqcbad2Mm@mail.gmail.com>
Subject: Re: Get fields from a Query object
From: Anuj Shah <anujshahwork@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e65a01f602a026048cd62bcf

--0016e65a01f602a026048cd62bcf
Content-Type: text/plain; charset=ISO-8859-1

My code has been given a query string, which we parse into the Query object
and would like to get a list of fields from.

I'm assuming there exists a method to do so, as it seems like a useful
function. If not should I be parsing the string for fields myself.

Anuj





On Sun, Aug 1, 2010 at 2:21 AM, Erick Erickson <erickerickson@gmail.com>wrote:

> Could you explain more about what you're trying to do? You're writing the
> query
> after all, so you probably already know what went into it.
>
> Which shows that I don't understand what you want to do at all.
>
> Best
> Erick
>
> On Sat, Jul 31, 2010 at 9:41 AM, Anuj Shah <anujshahwork@gmail.com> wrote:
>
> > Hi,
> >
> > Is there a way to get all the fields involved in a query?
> >
> > Thanks
> >
> > Anuj
> >
>

--0016e65a01f602a026048cd62bcf--

From java-user-return-46889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 02 13:37:05 2010
Return-Path: <java-user-return-46889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46957 invoked from network); 2 Aug 2010 13:37:05 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 Aug 2010 13:37:05 -0000
Received: (qmail 61751 invoked by uid 500); 2 Aug 2010 13:37:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61419 invoked by uid 500); 2 Aug 2010 13:37:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61411 invoked by uid 99); 2 Aug 2010 13:36:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Aug 2010 13:36:59 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.158 is neither permitted nor denied by domain of mfrickde@gmail.com)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Aug 2010 13:36:53 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <mfrickde@gmail.com>)
	id 1OfvBw-0005wq-Vl
	for java-user@lucene.apache.org; Mon, 02 Aug 2010 06:36:32 -0700
Date: Mon, 2 Aug 2010 06:36:32 -0700 (PDT)
From: ArminS <mfrickde@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1280756192980-1015955.post@n3.nabble.com>
Subject: creating tag cloud (with faceted search?) for search result
 (filter)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Hi guys,

I did some extensive research over the last days, also searched the threads
in this forum (big compliment to the users helping here!) about creating a
tag cloud of the search result(s). But I still couln't find something
satisfying me yet...

Background:

I have lots of user text comments (unstructured) stored in the database,
collected over a website as feedback.
My goal is, first to make this amount of data searchable/filterable with
good performance and then I want to create a tag cloud of the results after
searching for a single term, so that I can use the tag cloud then for
iterative search refinement by clicking on one term (for filtering again) in
the cloud! No discussion about the tag cloud decision please :) Focus is on
single terms/tags mainly, no phrases.

Lets imagine doing a search/filter with the word "performance":

- while showing the results, a tag cloud should be generated with all the
terms connected to those text comments, in which "performance" appears.
- when I click on a word in this tagcloud, it should do the same again for
this selected word etc.
=> have the "corpus" filtered in a visualized way as a tag cloud

Actually it goes in this direction ("Drill Clouds"):
http://lab.cisti-icist.nrc-cnrc.gc.ca/cistilabswiki/index.php/Ungava

Now my questions on that:

Do I need Solr (because of the faceted search feature) or is it also
possible with lucene only?
If Solr - which steps are neccessary to do a faceted search/navigation as a
tag cloud?
I know it has something to do with "term vectors", right?
If it's not possible to realise it 100%, no worries, just let me know, how
far I can go.

Please don't be too informatic in the first place, as I'm not a developer :)

Glad for any help of you guys!

Markus


Related threads to this:

http://bit.ly/94y97g
http://www.gossamer-threads.com/lists/lucene/java-user/88048
http://markmail.org/message/bjn2dhy5i4rh6cgg#query:+page:1+mid:czvpv2wt5e7gtqlu+state:results
-- 
View this message in context: http://lucene.472066.n3.nabble.com/creating-tag-cloud-with-faceted-search-for-search-result-filter-tp1015955p1015955.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 02 15:01:38 2010
Return-Path: <java-user-return-46890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80258 invoked from network); 2 Aug 2010 15:01:37 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 Aug 2010 15:01:37 -0000
Received: (qmail 70063 invoked by uid 500); 2 Aug 2010 15:01:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69875 invoked by uid 500); 2 Aug 2010 15:01:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69867 invoked by uid 99); 2 Aug 2010 15:01:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Aug 2010 15:01:34 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Aug 2010 15:01:26 +0000
Received: by qyk34 with SMTP id 34so2157323qyk.14
        for <java-user@lucene.apache.org>; Mon, 02 Aug 2010 08:01:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=f0H30ylgixzE6cIES2FJj12Q1WGxeKAtkIZkwwK3L8A=;
        b=qNckfiplRx3zw795wpefqkMmCjl3JMHhofLsGVDNfHJkPRekYiTq3rGcFATf2hEFH0
         NVD2hKc+awJpyDnsRNGoQbw5vxFzcoVxKJNGqn9ngbgq6emnd3dyrkwmnDxAGgz1Epj+
         TCXY7r6XqdR8NBJ7BOT6ufGSeTdeRKi57XM9g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=wToxp6lBaheGmJeg5p1RZGZ1FCPLXuf4GwcGohT+A8QyfoZKL4qJEniyE8dx0h4IyC
         gaP2Nv+axJYFJaRMUBNr73/nWVH2zsKp36HVL+esIfg2zicD4ZntVE+zADsHcE/PDwvJ
         c85BQxRONyv9a4sjNj59t7b26aDVSrErUbXhc=
MIME-Version: 1.0
Received: by 10.229.189.74 with SMTP id dd10mr161610qcb.73.1280761264875; Mon, 
	02 Aug 2010 08:01:04 -0700 (PDT)
Received: by 10.229.189.200 with HTTP; Mon, 2 Aug 2010 08:01:04 -0700 (PDT)
In-Reply-To: <AANLkTim=rR5YMs=Wsd94z6xCLK5sKtb725TLqcbad2Mm@mail.gmail.com>
References: <AANLkTimeF7QYLuS0K7ca6+tj=_2DSmhdzJQEr7iCAwyF@mail.gmail.com>
	<AANLkTin0JRJOoZ8wvGhBvknWftDhTZXy12E+vjUYk7qe@mail.gmail.com>
	<AANLkTim=rR5YMs=Wsd94z6xCLK5sKtb725TLqcbad2Mm@mail.gmail.com>
Date: Mon, 2 Aug 2010 11:01:04 -0400
Message-ID: <AANLkTikjOdNbynZJ7QjhyewdmNuAzoo9mzZt=eRDAEF7@mail.gmail.com>
Subject: Re: Get fields from a Query object
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364ef4703c70f0048cd8781a
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364ef4703c70f0048cd8781a
Content-Type: text/plain; charset=ISO-8859-1

Did you look at Query.extractTerms? I think that'll work for you.
Note that the query must be rewritten, and that the set of terms will
have duplicate fields. i.e. if you search field1:Erick +field1:James
I expect you'll have two terms in the set that are on field1.

Best
Erick

On Mon, Aug 2, 2010 at 8:16 AM, Anuj Shah <anujshahwork@gmail.com> wrote:

> My code has been given a query string, which we parse into the Query object
> and would like to get a list of fields from.
>
> I'm assuming there exists a method to do so, as it seems like a useful
> function. If not should I be parsing the string for fields myself.
>
> Anuj
>
>
>
>
>
> On Sun, Aug 1, 2010 at 2:21 AM, Erick Erickson <erickerickson@gmail.com
> >wrote:
>
> > Could you explain more about what you're trying to do? You're writing the
> > query
> > after all, so you probably already know what went into it.
> >
> > Which shows that I don't understand what you want to do at all.
> >
> > Best
> > Erick
> >
> > On Sat, Jul 31, 2010 at 9:41 AM, Anuj Shah <anujshahwork@gmail.com>
> wrote:
> >
> > > Hi,
> > >
> > > Is there a way to get all the fields involved in a query?
> > >
> > > Thanks
> > >
> > > Anuj
> > >
> >
>

--0016364ef4703c70f0048cd8781a--

From java-user-return-46891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 02 16:04:31 2010
Return-Path: <java-user-return-46891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11795 invoked from network); 2 Aug 2010 16:04:30 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 Aug 2010 16:04:30 -0000
Received: (qmail 86163 invoked by uid 500); 2 Aug 2010 16:04:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86104 invoked by uid 500); 2 Aug 2010 16:04:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86096 invoked by uid 99); 2 Aug 2010 16:04:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Aug 2010 16:04:27 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jdixon@omniti.com designates 8.8.38.6 as permitted sender)
Received: from [8.8.38.6] (HELO edge.omniti.com) (8.8.38.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Aug 2010 16:04:20 +0000
DKIM-Signature: v=1; a=rsa-sha256; d=omniti.com; s=s1024; c=relaxed/relaxed;
	q=dns/txt; i=@omniti.com; t=1280765034;
	h=From:Subject:Date:To;
	bh=ZBUdPoTkYjXTQ+PfVQi4OWGgYV50VdOXaTT+oMwJw5E=;
	b=aSh2wqmgCyknTMkIMMwKBD7OfE+DN8kZ33yjNQNQIqJUkpUHg8Wg8l5fWZly5eQr
	+lLU8faCpGXbrB+eey/Tt5v0I1F7ALSpahs3nCVgxsUYcUiIvAYXTQ4PhzaZscJD
	nPJYm7dBSrkfTDXd9+ZJDQG9mkSKuEyGEoWs3hMHGtM=;
Authentication-Results:  edge smtp.user=jdixon@omniti.com; auth=pass (LOGIN)
Received: from [68.55.0.29] ([68.55.0.29:58179] helo=omniti.com)
	by edge (envelope-from <jdixon@omniti.com>)
	(ecelerity 2.2.3.46 r(37468M)) with ESMTPSA (cipher=AES256-SHA) 
	id A5/E9-03560-A6CE65C4; Mon, 02 Aug 2010 12:03:54 -0400
Date: Mon, 2 Aug 2010 12:03:51 -0400
From: Jason Dixon <jdixon@omniti.com>
To: java-user@lucene.apache.org
Subject: Register now for Surge 2010
Message-ID: <20100802160350.GD4578@omniti.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.5.18 (2008-05-17)
X-Virus-Checked: Checked by ClamAV on apache.org

Registration for Surge Scalability Conference 2010 is open for all
attendees!  We have an awesome lineup of leaders from across the various
communities that support highly scalable architectures, as well as the
companies that implement them.  Here's a small sampling from our list of
speakers:

John Allspaw, Etsy
Theo Schlossnagle, OmniTI
Rasmus Lerdorf, creator of PHP
Tom Cook, Facebook
Benjamin Black, fast_ip
Artur Bergman, Wikia
Christopher Brown, Opscode
Bryan Cantrill, Joyent
Baron Schwartz, Percona
Paul Querna, Cloudkick

Surge 2010 focuses on real case studies from production environments;
the lessons learned from failure and how to re-engineer your way to a
successful, highly scalable Internet architecture.  The conference takes
place at the Tremont Grand Historic Venue on Sept 30 and Oct 1, 2010 in
Baltimore, MD.  Register now to enjoy the Early Bird discount and
guarantee your seat to this year's event!

http://omniti.com/surge/2010/register

Thanks,

-- 
Jason Dixon
OmniTI Computer Consulting, Inc.
jdixon@omniti.com
443.325.1357 x.241

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 02 19:30:11 2010
Return-Path: <java-user-return-46892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2394 invoked from network); 2 Aug 2010 19:30:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 Aug 2010 19:30:11 -0000
Received: (qmail 94931 invoked by uid 500); 2 Aug 2010 19:30:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94806 invoked by uid 500); 2 Aug 2010 19:30:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94790 invoked by uid 99); 2 Aug 2010 19:30:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Aug 2010 19:30:05 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Aug 2010 19:29:59 +0000
Received: by wyf23 with SMTP id 23so846854wyf.35
        for <multiple recipients>; Mon, 02 Aug 2010 12:29:35 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.132.129 with SMTP id b1mr5475268wbt.5.1280777375127; Mon, 
	02 Aug 2010 12:29:35 -0700 (PDT)
Received: by 10.216.52.84 with HTTP; Mon, 2 Aug 2010 12:29:35 -0700 (PDT)
Date: Mon, 2 Aug 2010 15:29:35 -0400
Message-ID: <AANLkTi=85-jBeiUYLnCCUgQvX1sJG9bdYJE725GPhJbe@mail.gmail.com>
Subject: heads up -- index corruption on Solr/Lucene trunk/3.x branch
From: Michael McCandless <lucene@mikemccandless.com>
To: Lucene Users <java-user@lucene.apache.org>, solr-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

This issue:

    https://issues.apache.org/jira/browse/LUCENE-2574

which was committed 3 days ago (Friday Jul 30) can cause index corruption.

I just committed a fix for the corruption, but if you've been using
Solr/Lucene trunk or 3x branch updated after the first commit on
Friday, and you built any indexes with it, you should rebuild them!

Sorry,

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 02 22:30:41 2010
Return-Path: <java-user-return-46893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72540 invoked from network); 2 Aug 2010 22:30:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 Aug 2010 22:30:40 -0000
Received: (qmail 25925 invoked by uid 500); 2 Aug 2010 22:30:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25845 invoked by uid 500); 2 Aug 2010 22:30:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25832 invoked by uid 99); 2 Aug 2010 22:30:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Aug 2010 22:30:38 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [206.190.38.79] (HELO web50503.mail.re2.yahoo.com) (206.190.38.79)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 02 Aug 2010 22:30:31 +0000
Received: (qmail 15035 invoked by uid 60001); 2 Aug 2010 22:30:10 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com.ar; s=s1024; t=1280788210; bh=sLpabqJJ0m4Plb2Alcr0GuHQq9JqQS9e4XEgHo+mjBc=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=1ouhWj6+h4ZSoHp3Ga5hox4WdjNMNCFZalEtslOvvySGX5Xc3pM5U9qi5i1tZ7x/Ewh7dBw83Yxs8FlQRkf+wFiZkCng8603gqfHgReafl1JvDehwXqeTlKZ4a7y8YBBSgpkwcR+Y8pTGGEJ/hw166rmtdaTnta0IcpZOhA1Z34=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com.ar;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=XjtbMAg12SuQBF56XVxLqPiawsZEBWG9FahgXkNYDsN1+uk8uWvRy8eKnITa8mDDRptZF4L8RxO6Ki3npcCvQAq0Yk8HNdwIj3uR/IxoflzekLPGJ7l2us9bPhvoAOE8z4J2Jf9AC+waj5iUu4FyVKRkqr8fjDD34SA/zqF3sKQ=;
Message-ID: <370450.12618.qm@web50503.mail.re2.yahoo.com>
X-YMail-OSG: 1IYQlSYVM1k9kwqDgXBVvkfQ7nECj6HgBnsO3AxQs6XCEzP
 Yywn_xZtcT43oNTeP2H.U74arSZNv.5lA73pO_so9x041MNPErhlNjEeM3zz
 mh_jZ_RR_Xr3X5mn1cHnUyJkS3b0I.DA5pUwBJyvxftdGXnEOAQ1h2vVxwkO
 7efE3AgpNwdzJmmcAF0aGoMFzlH5gYiF_uLYZeYi0n1ffGZVFij982p9mh57
 A4JnOl9MooV1fLDMiPahCkLKMM2mf8KjPZ4ML5qyc02jFCjQvcazAIR6hb6W
 kRZ56tu6tulGBijYY_NSe1qAMfg--
Received: from [190.188.83.219] by web50503.mail.re2.yahoo.com via HTTP; Mon, 02 Aug 2010 15:30:10 PDT
X-Mailer: YahooMailRC/420.4 YahooMailWebService/0.8.105.279950
Date: Mon, 2 Aug 2010 15:30:10 -0700 (PDT)
From: Fernando Wasylyszyn <ferwasy@yahoo.com.ar>
Subject: Modify how a field value is stored in Lucene
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-424615893-1280788210=:12618"

--0-424615893-1280788210=:12618
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi all. This is my question. Currently, I'm working in a project where I ha=
ve =0ALucene documents with one field that use payloads. For this field, I =
use =0Aorg.apache.lucene.analysis.payloads.DelimitedPayloadTokenFilter, so =
the value =0Afor that field is something like: "fieldValue\1.0" where '\' i=
s the payload =0Adelimiter and "1.0" is the field value payload. The thing =
is that the values of =0Athis field are stored in the index, so when I retr=
ieve the field value from the =0Aindex, I get "fieldValue\1.0" and manually=
 have to remove the payload from the =0Afield value in order to show it to =
the user, put it in some XML or whatever. =0AThere is any way to modify how=
 a field value is stored in the index as it can be =0Amodified how the valu=
e is indexed v=EDa TokenFilters? In this particular case, the =0Aneeded mod=
ification is remove the payload from the index stored field value, but =0At=
here are a lot of cases where something like this could be useful. Thanks i=
n =0Aadvance. Cheers.=0A=0A=0A=0A      
--0-424615893-1280788210=:12618--

From java-user-return-46894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 03 09:03:34 2010
Return-Path: <java-user-return-46894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1847 invoked from network); 3 Aug 2010 09:03:33 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Aug 2010 09:03:33 -0000
Received: (qmail 36256 invoked by uid 500); 3 Aug 2010 09:03:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35365 invoked by uid 500); 3 Aug 2010 09:03:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35357 invoked by uid 99); 3 Aug 2010 09:03:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Aug 2010 09:03:25 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anujshahwork@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Aug 2010 09:03:19 +0000
Received: by wyb35 with SMTP id 35so630586wyb.35
        for <java-user@lucene.apache.org>; Tue, 03 Aug 2010 02:02:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=yhBSuJx3a8Duvkg8h6ZTIO+R3TOUpW1S9pnB+Wd0N0s=;
        b=JNDKaIqjMLC6Q5hEmATGvVUBzEzAJagK7YroDXY6fIqRO+G17k7BrEt4qc9THz+oA/
         JOa6T7VvSyC9ATfaYLMoaSBaJmxcROmOfVkM6+YItBYjBo51vpAhOBf5BzWRS2AgjPGm
         ENLMtjsu8Wn0kraqv6saNvXaZIzd/oUwT8tps=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=fSWcVZmWcd9lDdA4drRBW/lMNzKANjJEnPZqKYGCe5qTWc53F5LeggCNDYT2+HpZZE
         1P0AY2rRS/+CpeBnEMkc6K9EkNQSf7XaJdysgX+ZqikAe+4wN8sKqO19cwQaLhEQlmev
         nXzEmtQndKOXRVF/QiN241nKpVVGzne1+im1Q=
MIME-Version: 1.0
Received: by 10.227.155.10 with SMTP id q10mr5950962wbw.92.1280826177704; Tue, 
	03 Aug 2010 02:02:57 -0700 (PDT)
Received: by 10.227.129.75 with HTTP; Tue, 3 Aug 2010 02:02:57 -0700 (PDT)
In-Reply-To: <AANLkTikjOdNbynZJ7QjhyewdmNuAzoo9mzZt=eRDAEF7@mail.gmail.com>
References: <AANLkTimeF7QYLuS0K7ca6+tj=_2DSmhdzJQEr7iCAwyF@mail.gmail.com>
	<AANLkTin0JRJOoZ8wvGhBvknWftDhTZXy12E+vjUYk7qe@mail.gmail.com>
	<AANLkTim=rR5YMs=Wsd94z6xCLK5sKtb725TLqcbad2Mm@mail.gmail.com>
	<AANLkTikjOdNbynZJ7QjhyewdmNuAzoo9mzZt=eRDAEF7@mail.gmail.com>
Date: Tue, 3 Aug 2010 10:02:57 +0100
Message-ID: <AANLkTinaypTn0u4mmcF_Uanq=1XuUpkE1Dn-u-LmwRb9@mail.gmail.com>
Subject: Re: Get fields from a Query object
From: Anuj Shah <anujshahwork@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016367fade5575452048ce795f5

--0016367fade5575452048ce795f5
Content-Type: text/plain; charset=ISO-8859-1

Thanks, that does seem good in theory. I can get the field from each of the
terms and add them to a Set to de-dupe.

However, in practice queries of the following nature seems to fail with an
UnsupportedOperationException:
field:a*
field:[a TO b]

Delving into the code a bit I see the following in the Query class
  /**
   * Expert: adds all terms occurring in this query to the terms set. Only
   * works if this query is in its {@link #rewrite rewritten} form.
   *
   * @throws UnsupportedOperationException if this query is not yet
rewritten
   */
  public void extractTerms(Set<Term> terms) {
    // needs to be implemented by query subclasses
    throw new UnsupportedOperationException();
  }

Does this imply that some concrete Query classes have not overridden this
method?





On Mon, Aug 2, 2010 at 4:01 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> Did you look at Query.extractTerms? I think that'll work for you.
> Note that the query must be rewritten, and that the set of terms will
> have duplicate fields. i.e. if you search field1:Erick +field1:James
> I expect you'll have two terms in the set that are on field1.
>
> Best
> Erick
>
> On Mon, Aug 2, 2010 at 8:16 AM, Anuj Shah <anujshahwork@gmail.com> wrote:
>
> > My code has been given a query string, which we parse into the Query
> object
> > and would like to get a list of fields from.
> >
> > I'm assuming there exists a method to do so, as it seems like a useful
> > function. If not should I be parsing the string for fields myself.
> >
> > Anuj
> >
> >
> >
> >
> >
> > On Sun, Aug 1, 2010 at 2:21 AM, Erick Erickson <erickerickson@gmail.com
> > >wrote:
> >
> > > Could you explain more about what you're trying to do? You're writing
> the
> > > query
> > > after all, so you probably already know what went into it.
> > >
> > > Which shows that I don't understand what you want to do at all.
> > >
> > > Best
> > > Erick
> > >
> > > On Sat, Jul 31, 2010 at 9:41 AM, Anuj Shah <anujshahwork@gmail.com>
> > wrote:
> > >
> > > > Hi,
> > > >
> > > > Is there a way to get all the fields involved in a query?
> > > >
> > > > Thanks
> > > >
> > > > Anuj
> > > >
> > >
> >
>

--0016367fade5575452048ce795f5--

From java-user-return-46895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 03 11:35:25 2010
Return-Path: <java-user-return-46895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61515 invoked from network); 3 Aug 2010 11:35:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Aug 2010 11:35:25 -0000
Received: (qmail 9951 invoked by uid 500); 3 Aug 2010 11:35:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9461 invoked by uid 500); 3 Aug 2010 11:35:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9451 invoked by uid 99); 3 Aug 2010 11:35:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Aug 2010 11:35:17 +0000
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dctech1000@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Aug 2010 11:35:11 +0000
Received: by iwn37 with SMTP id 37so2624537iwn.35
        for <java-user@lucene.apache.org>; Tue, 03 Aug 2010 04:34:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=1RWG0xYiP3Pq4lwk7PNy4rrDzjwq3FfSObnxCymuwus=;
        b=m2Lu6KoSYAZIadjozbVe9IdC5sM2JyKdkoSMm5qULwc3elVoscy+9Vfbaq0x/3ZbCV
         4u2Jmp1rpSFfCgpp3MSaYy6K0qX/ybkDfKH7J+I1FO5ykyqY02u9+aYvRlrGOCm8MyVZ
         OULAat+3pJMe3EuV0MGQ8UK7gAHjvxJ4u1+GI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=nH6PdLkvj63sZXAD/lONpObSdHFuJ7Uq9krOTDmwM/eSEODMwj8C0/AjuvQT0GogQR
         OROC7j98+UbiimK1Pw4S0s4m/Q+Yi1ewrIjruMsiFQQAYzlNAyBsNn0gvvgjkueD7VPc
         Z2vjcyM76zB4s23qknzt846BdmW6TjzwrwPxw=
MIME-Version: 1.0
Received: by 10.231.148.85 with SMTP id o21mr4542224ibv.26.1280835290458; Tue, 
	03 Aug 2010 04:34:50 -0700 (PDT)
Received: by 10.231.176.75 with HTTP; Tue, 3 Aug 2010 04:34:50 -0700 (PDT)
In-Reply-To: <1280756192980-1015955.post@n3.nabble.com>
References: <1280756192980-1015955.post@n3.nabble.com>
Date: Tue, 3 Aug 2010 07:34:50 -0400
Message-ID: <AANLkTimunPNoPdFO-p-aWFzFnEHjR_w_O=45WkAeeiwx@mail.gmail.com>
Subject: Re: creating tag cloud (with faceted search?) for search result 
	(filter)
From: dc tech <dctech1000@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

I assume that you are
- building your own UI
- and have some specific fields you want to show in a tag cloud?

A generic tag cloud of all terms will not be very helpful as all the
common words will dominate the tag cloud. What you want is to use some
specific fields ie metadata for generating the tag cloud.

One approach is to take all the interesting fields, get facets for
them (solr does this out of the box), combine and then generate the
tag cloud. Alternatively, you can create a megafield and use that for
faceting directly. On click, you then issue a simple filter query.






On 8/2/10, ArminS <mfrickde@gmail.com> wrote:
>
> Hi guys,
>
> I did some extensive research over the last days, also searched the threads
> in this forum (big compliment to the users helping here!) about creating a
> tag cloud of the search result(s). But I still couln't find something
> satisfying me yet...
>
> Background:
>
> I have lots of user text comments (unstructured) stored in the database,
> collected over a website as feedback.
> My goal is, first to make this amount of data searchable/filterable with
> good performance and then I want to create a tag cloud of the results after
> searching for a single term, so that I can use the tag cloud then for
> iterative search refinement by clicking on one term (for filtering again) in
> the cloud! No discussion about the tag cloud decision please :) Focus is on
> single terms/tags mainly, no phrases.
>
> Lets imagine doing a search/filter with the word "performance":
>
> - while showing the results, a tag cloud should be generated with all the
> terms connected to those text comments, in which "performance" appears.
> - when I click on a word in this tagcloud, it should do the same again for
> this selected word etc.
> => have the "corpus" filtered in a visualized way as a tag cloud
>
> Actually it goes in this direction ("Drill Clouds"):
> http://lab.cisti-icist.nrc-cnrc.gc.ca/cistilabswiki/index.php/Ungava
>
> Now my questions on that:
>
> Do I need Solr (because of the faceted search feature) or is it also
> possible with lucene only?
> If Solr - which steps are neccessary to do a faceted search/navigation as a
> tag cloud?
> I know it has something to do with "term vectors", right?
> If it's not possible to realise it 100%, no worries, just let me know, how
> far I can go.
>
> Please don't be too informatic in the first place, as I'm not a developer :)
>
> Glad for any help of you guys!
>
> Markus
>
>
> Related threads to this:
>
> http://bit.ly/94y97g
> http://www.gossamer-threads.com/lists/lucene/java-user/88048
> http://markmail.org/message/bjn2dhy5i4rh6cgg#query:+page:1+mid:czvpv2wt5e7gtqlu+state:results
> --
> View this message in context:
> http://lucene.472066.n3.nabble.com/creating-tag-cloud-with-faceted-search-for-search-result-filter-tp1015955p1015955.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

-- 
Sent from my mobile device

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 03 12:09:59 2010
Return-Path: <java-user-return-46896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72320 invoked from network); 3 Aug 2010 12:09:59 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Aug 2010 12:09:59 -0000
Received: (qmail 56408 invoked by uid 500); 3 Aug 2010 12:09:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56063 invoked by uid 500); 3 Aug 2010 12:09:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56005 invoked by uid 99); 3 Aug 2010 12:09:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Aug 2010 12:09:52 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [67.195.8.62] (HELO n5-vm0.bullet.mail.gq1.yahoo.com) (67.195.8.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 03 Aug 2010 12:09:41 +0000
Received: from [67.195.9.82] by n5.bullet.mail.gq1.yahoo.com with NNFMP; 03 Aug 2010 12:09:19 -0000
Received: from [98.137.27.211] by t2.bullet.mail.gq1.yahoo.com with NNFMP; 03 Aug 2010 12:09:19 -0000
Received: from [127.0.0.1] by omp121.mail.gq1.yahoo.com with NNFMP; 03 Aug 2010 12:09:19 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 623592.16023.bm@omp121.mail.gq1.yahoo.com
Received: (qmail 22121 invoked by uid 60001); 3 Aug 2010 12:09:19 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1280837359; bh=lrukJlFJip8rUHXLifbfYnSCJw/mTIeenPQTazoxhgY=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=3vLllOXch4FdxfeTpcUy/puESy0WHCDJSpckk4UVngvtfKnlcB2izRgBIFnrla8FbttpXIUy79BMJDOAQmTPNo3Hymplg8t/9ip+F3NxBmjdyTcjBWavuqK+RCPdS39pjdOfKdSH7hH4lvw/pi/xbtNyp1NlEFy342qO6Y5DDy4=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=jvLuG4Qod19h/tSlOvwF6bgCqV+eIc3UzBH4EqiuYq7ySHGEv10gw5NFMWmv8UH2GAS//ajJuN6SJi4Ho09fgdTOE1L9VwDBi+DelI+blvVup5r6LFVtHShsT6NY7pnl7FdT9HJZYKvddmXqnt3qGcL9uCNrbPC0ju8xB+ormlQ=;
Message-ID: <520925.21819.qm@web114420.mail.gq1.yahoo.com>
X-YMail-OSG: YdXUbp8VM1kjd30wrF8UKiuJ8ZKbMFNqO5jvhYe4zKBU5dI
 WfKrTvnAprZce2GQLPqx9qN6l2nZDxN6PJNrNlq9Tih.shf7c5PLgAHNdzUx
 sNEthumiVlt3DX6bJU9bShafsagtpU9aDRO3N20M0sxLSaUMuR.nV.SYRKHG
 RW6RQG2AwxvBKAb76uoNMWScYPRNmL.DZhKktdqenxWa9uP0IoavRPF_ii2I
 NA7im5FVVrC1lESp5_XUmorySBcfX1_Wo14xj6wd_T268EPIv7DO6DDuChSu
 Nf6PV1zduUBfQAmuahncGbsaSYiWYDn7eMVHMYxagaSfDKHek1H.x
Received: from [59.163.89.69] by web114420.mail.gq1.yahoo.com via HTTP; Tue, 03 Aug 2010 05:09:19 PDT
X-Mailer: YahooMailRC/420.4 YahooMailWebService/0.8.105.279950
References: <271FBC41306F497BA25F754A54B67F01@hp6690ej01>
Date: Tue, 3 Aug 2010 05:09:19 -0700 (PDT)
From: d' Ani <anirbande@yahoo.com>
Subject: customizable relevance engine
To: java-user@lucene.apache.org, general@lucene.apache.org,
  solr-user@lucene.apache.org, dev@lucene.apache.org
In-Reply-To: <271FBC41306F497BA25F754A54B67F01@hp6690ej01>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-2054295569-1280837359=:21819"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-2054295569-1280837359=:21819
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Hi all,=0AIs there any relevance engine that is built in lucence and which =
can =0Abe customized.  =0A =0ARegards,=0AAnirban De=0AYahoo: anirbande=0ASk=
ype: anirbande=0AGtalk : ade.sxc=0A=0A
--0-2054295569-1280837359=:21819--


From java-user-return-46897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 03 12:36:01 2010
Return-Path: <java-user-return-46897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88790 invoked from network); 3 Aug 2010 12:36:01 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Aug 2010 12:36:01 -0000
Received: (qmail 374 invoked by uid 500); 3 Aug 2010 12:35:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99907 invoked by uid 500); 3 Aug 2010 12:35:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99888 invoked by uid 99); 3 Aug 2010 12:35:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Aug 2010 12:35:55 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dctech1000@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Aug 2010 12:35:48 +0000
Received: by iwn37 with SMTP id 37so2691408iwn.35
        for <java-user@lucene.apache.org>; Tue, 03 Aug 2010 05:35:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=P5VFOqRRvTOqq3dxhf6AmABcOilFrwHASLD6/LL7Gdw=;
        b=x/AQVCjWZVYqBySPhth2rBmVTFLiUjuOtNhnpb+oF+5Lzzp3tfz9Q+AYbSe6AQ0HCw
         E7s9DDxxjQ7zS/clPhGjNaR83+S2+ipEbc3SkznfUQF8NwTfnjkM9q8LKzOMv7LmVJwo
         G4IUzhameVfsst0KBBg9BMuwIm2w1tqJuBhNM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=nhMO0dVJ6JWHlxcS7oQjnf9L2rDeXElzSg2oEMvkfy4NkDi0Mg7ijO29bevE6OmWN3
         dLjYf3AOrDECOLqHrqupVtqiT7lYvZJqjeB0gq9Cds5Nijv09hliIVzKJxuFdlQNhvEl
         zv4RqF2J2b9E64yYndsHvDYnYzVpylDeAUSeU=
MIME-Version: 1.0
Received: by 10.231.34.135 with SMTP id l7mr8644062ibd.148.1280838915143; Tue, 
	03 Aug 2010 05:35:15 -0700 (PDT)
Received: by 10.231.176.75 with HTTP; Tue, 3 Aug 2010 05:35:14 -0700 (PDT)
In-Reply-To: <520925.21819.qm@web114420.mail.gq1.yahoo.com>
References: <271FBC41306F497BA25F754A54B67F01@hp6690ej01>
	<520925.21819.qm@web114420.mail.gq1.yahoo.com>
Date: Tue, 3 Aug 2010 08:35:14 -0400
Message-ID: <AANLkTinYGPTF4UmGvG24681t4uLDOOcq2Y-LaYgQX4JC@mail.gmail.com>
Subject: Re: customizable relevance engine
From: dc tech <dctech1000@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Both Solr or Lucene allow extensive customization of relevance
calculations. Examples include boosting matched in title field vs.
Body, or boosting recent documents more than older documents.

On 8/3/10, d' Ani <anirbande@yahoo.com> wrote:
> Hi all,
> Is there any relevance engine that is built in lucence and which can
> be customized.
>
> Regards,
> Anirban De
> Yahoo: anirbande
> Skype: anirbande
> Gtalk : ade.sxc
>
>

-- 
Sent from my mobile device

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 03 14:58:53 2010
Return-Path: <java-user-return-46898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40120 invoked from network); 3 Aug 2010 14:58:53 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Aug 2010 14:58:53 -0000
Received: (qmail 28434 invoked by uid 500); 3 Aug 2010 14:58:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28329 invoked by uid 500); 3 Aug 2010 14:58:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28319 invoked by uid 99); 3 Aug 2010 14:58:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Aug 2010 14:58:49 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of arun.raj@gmail.com designates 209.85.210.48 as permitted sender)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Aug 2010 14:58:42 +0000
Received: by pzk36 with SMTP id 36so3185649pzk.35
        for <java-user@lucene.apache.org>; Tue, 03 Aug 2010 07:58:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type;
        bh=bFQ0mqEorlsOMZi7LA/rCC5wRO0uUjscEm9pZqAwAIk=;
        b=S3XFtGGMKkfb5REV1z4SvmoxQwTilbpdEZTfm6jL7qlJzp1R0sXV7WR5LSYBzHfY95
         UCKsa35ZPPcfXD6e5sy8lFjtPBZeZWW26gWSt9AtfNmmYIdH+fJ3PTSXlDq5klIPFDoR
         lSvzEXTbPiC6h99hWb/zv3bAxv73X/HOpm2GQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=JuO7HqZTsPerCecxZtirvvLNPU2ZvT51i9tjJrGjHPcJ5s6kf/dPXAx7PJ34rUgo6c
         ugiK8P0jfQ51S8dO8zWSh7GBcdWRn9pxRZYXkT47EvHRA2erqPVi94TRzV+aZqjKNIN9
         NicQ8GTyHGolEb1o+95mNDFO3l/f+M4KaT74k=
Received: by 10.114.26.16 with SMTP id 16mr9156932waz.15.1280847500701; Tue, 
	03 Aug 2010 07:58:20 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.220.203.130 with HTTP; Tue, 3 Aug 2010 07:58:00 -0700 (PDT)
From: arun r <arun.raj@gmail.com>
Date: Tue, 3 Aug 2010 10:58:00 -0400
Message-ID: <AANLkTimW1YmfTjR5E51jai28Ys5jSYjMSoQOx-2u9qCT@mail.gmail.com>
Subject: get wordno, lineno, pageno for term/phrase
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

hi all,
            I am new to Lucene. I am trying to use Lucene to generate
data for a document classifier. I need to generate wordno, lineno,
pageno for each term/phrase. I was able to use SpanQuery/SpanNearQuery
to get the wordno (span.start()) for the term/phrase. To get pageno
and lineno, a custom Analyzer needs to be written ? Can the Analyzer
be made to recognize and newline and page feed characters and keep
track of lineno and pageno for the tokens ?

Is it possible with existing Lucene Analyzer ?

Thanks,
Arun

-- 
Where there is a will, there is a way !

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 03 18:29:34 2010
Return-Path: <java-user-return-46899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61667 invoked from network); 3 Aug 2010 18:29:33 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Aug 2010 18:29:33 -0000
Received: (qmail 44738 invoked by uid 500); 3 Aug 2010 18:29:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44632 invoked by uid 500); 3 Aug 2010 18:29:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44624 invoked by uid 99); 3 Aug 2010 18:29:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Aug 2010 18:29:31 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of firtzel@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Aug 2010 18:29:24 +0000
Received: by vws2 with SMTP id 2so4781649vws.35
        for <java-user@lucene.apache.org>; Tue, 03 Aug 2010 11:29:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type;
        bh=oQ+h24IQj1mfpsubYeVQnCRmXI3+4pjDrv1j2xbCegU=;
        b=F2zXPTivWDgXtrrBvLH1v1yM6kZ5h5Tx08c/sVsTdR8XdX46rD5dKtkWWSad4H511y
         NvDGpwlsVQKPfcTIhsVIsJwWpwIVPBxBEP8Onw3vJW1xQDUeH4h7M6aw29SdIXBI1DSJ
         WkliqpQT5SdqC8bx4deXRLuZN6EboWyzGTiwM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=FYA2fN5yCZdmylAYxZu52XVHcMVcuDA77ELfF4a7aVNt7oN1IYu53F3bms8XC0tZPa
         Ocfmu+V5vEq7Lj67xNEkvIR+SHJF+pDcS7gov8GTi42AWDZjazVYYCf37sjGwQn6as7/
         yvT6GSKzUSKR4U2Z8YWYxsVqwNRAyTHHMFs04=
Received: by 10.220.98.140 with SMTP id q12mr5458752vcn.128.1280860143408; 
	Tue, 03 Aug 2010 11:29:03 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.220.98.129 with HTTP; Tue, 3 Aug 2010 11:28:43 -0700 (PDT)
From: Ophir Adiv <firtzel@gmail.com>
Date: Tue, 3 Aug 2010 21:28:43 +0300
Message-ID: <AANLkTi=hn5-paCfTK7+kvjwsU8f2FnDBTpu-=VnbqyuR@mail.gmail.com>
Subject: Migrating from Lucene 2.9.1 to Solr 1.4.0 - Performance issues under 
	heavy load
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64607c2dad78a048cef7d9c

--0016e64607c2dad78a048cef7d9c
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

Hi,



I=92m currently involved in a project of migrating from Lucene 2.9.1 to Sol=
r
1.4.0.

During stress testing, I encountered this performance problem:

While actual search times in our shards (which are now running Solr) have
not changed, the total time it takes for a query has increased dramatically=
.

During this performance test, we of course do not modify the indexes.

Our application is sending Solr select queries concurrently to the 8 shards=
,
using CommonsHttpSolrServer.

I added some timing debug messages, and found that
CommonsHttpSolrServer.java, line 416 takes about 95% of the application=92s
total search time:

int statusCode =3D _httpClient.executeMethod(method);



Just to clarify: looking at access logs of the Solr shards, TTLB for a quer=
y
might be around 5 ms. (on all shards), but httpClient.executeMethod() for
this query can be much higher =96 say, 50 ms.

On average, if under light load queries take 12 ms. on average, under heavy
load the take around 22 ms.



Another route we tried to pursue is add the =93shards=3Dshard1,shard2,=85=
=94
parameter to the query instead of doing this ourselves, but this doesn=92t
seem to work due to an NPE caused by QueryComponent.returnFields(), line
553:

if (returnScores && sdoc.score !=3D null) {



where sdoc is null. I saw there is a null check on trunk, but since we=92re
currently using Solr 1.4.0=92s ready-made WAR file, I didn=92t see an easy =
way
around this.

Note: we=92re using a custom query component which extends QueryComponent, =
but
debugging this, I saw nothing wrong with the results at this point in the
code.



Our previous code used HTTP in a different manner:

For each request, we created a new
sun.net.www.protocol.http.HttpURLConnection, and called its getInputStream(=
)
method.

Under the same load as the new application, the old application does not
encounter the delays mentioned above.



Our current code is initializing CommonsHttpSolrServer for each shard this
way:



                                MultiThreadedHttpConnectionManager
httpConnectionManager =3D new MultiThreadedHttpConnectionManager();


httpConnectionManager.getParams().setTcpNoDelay(true);


httpConnectionManager.getParams().setMaxTotalConnections(1024);


httpConnectionManager.getParams().setStaleCheckingEnabled(false);

                                HttpClient httpClient =3D new HttpClient();

                                HttpClientParams params =3D new
HttpClientParams();


params.setCookiePolicy(CookiePolicy.IGNORE_COOKIES);

                                params.setAuthenticationPreemptive(false);


params.setContentCharset(StringConstants.UTF8);

                                httpClient.setParams(params);


httpClient.setHttpConnectionManager(httpConnectionManager);



and passing the new HttpClient to the Solr Server:

solrServer =3D new CommonsHttpSolrServer(coreUrl, httpClient);



We tried two different ways =96 one with a single
MultiThreadedHttpConnectionManager and HttpClient for all the SolrServer=92=
s,
and the other with a new MultiThreadedHttpConnectionManager and HttpClient
for each SolrServer.

Both tries yielded similar performance results.

Also tried to give setMaxTotalConnections() a much higher connections numbe=
r
(1,000,000) =96 didn=92t have an effect.



Would love to hear what you think about this. TIA,

Ophir

--0016e64607c2dad78a048cef7d9c--

From java-user-return-46900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 03 20:50:16 2010
Return-Path: <java-user-return-46900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17934 invoked from network); 3 Aug 2010 20:50:16 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Aug 2010 20:50:16 -0000
Received: (qmail 17558 invoked by uid 500); 3 Aug 2010 20:50:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17462 invoked by uid 500); 3 Aug 2010 20:50:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17454 invoked by uid 99); 3 Aug 2010 20:50:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Aug 2010 20:50:13 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Aug 2010 20:50:06 +0000
Received: by qwd7 with SMTP id 7so3591595qwd.35
        for <java-user@lucene.apache.org>; Tue, 03 Aug 2010 13:49:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=z9jrRZnuBVZ1IKCTiJuNeIYXLC3qjKjqWUisdIcJId4=;
        b=FNceRd9pxW/ItaQaIjb8jKn5+sypZviFlZ1G2qs4UsLs5s4qegur8gTpKit85M2FZl
         xFLRqCdJyjrhsUoN4opXVXDn7RQMosQwF2EITQTLUa0QKUGJHvD6E3vAjgqUM60L4kr1
         fPow31m/5IyqEONAzII8OUypySGqj4cG9XqcA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Zqt64GlZJN8vArq3bJ38RtCxCHjNaoBHu5IlQrMV4YfM18lUynceLV5MY1O+PZBMrK
         zrM5WKyQZcegoPuV4QDaoDIyMHgEWmU2B8Qus2lC3LlA+LJ57mck030Kq2wqGpSxiupD
         HUT2Xpk7wrG2EIoKVegriFZtzHqOhMNhilxvA=
MIME-Version: 1.0
Received: by 10.229.246.134 with SMTP id ly6mr1638837qcb.109.1280868586002; 
	Tue, 03 Aug 2010 13:49:46 -0700 (PDT)
Received: by 10.229.221.199 with HTTP; Tue, 3 Aug 2010 13:49:45 -0700 (PDT)
In-Reply-To: <AANLkTinaypTn0u4mmcF_Uanq=1XuUpkE1Dn-u-LmwRb9@mail.gmail.com>
References: <AANLkTimeF7QYLuS0K7ca6+tj=_2DSmhdzJQEr7iCAwyF@mail.gmail.com>
	<AANLkTin0JRJOoZ8wvGhBvknWftDhTZXy12E+vjUYk7qe@mail.gmail.com>
	<AANLkTim=rR5YMs=Wsd94z6xCLK5sKtb725TLqcbad2Mm@mail.gmail.com>
	<AANLkTikjOdNbynZJ7QjhyewdmNuAzoo9mzZt=eRDAEF7@mail.gmail.com>
	<AANLkTinaypTn0u4mmcF_Uanq=1XuUpkE1Dn-u-LmwRb9@mail.gmail.com>
Date: Tue, 3 Aug 2010 16:49:45 -0400
Message-ID: <AANLkTimqbHCDm=+zAXDdr0N9UpoDOhj-B-kdL21wgBPG@mail.gmail.com>
Subject: Re: Get fields from a Query object
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016363b8ba6129925048cf175fd

--0016363b8ba6129925048cf175fd
Content-Type: text/plain; charset=ISO-8859-1

Hmmmm. Assuming you called rewrite, I'm going to have to defer
that one, I'm not familiar enough with how range queries operate.

But what version of Lucene are you using?

Sorry I can't be more help
Erick

On Tue, Aug 3, 2010 at 5:02 AM, Anuj Shah <anujshahwork@gmail.com> wrote:

> Thanks, that does seem good in theory. I can get the field from each of the
> terms and add them to a Set to de-dupe.
>
> However, in practice queries of the following nature seems to fail with an
> UnsupportedOperationException:
> field:a*
> field:[a TO b]
>
> Delving into the code a bit I see the following in the Query class
>  /**
>   * Expert: adds all terms occurring in this query to the terms set. Only
>   * works if this query is in its {@link #rewrite rewritten} form.
>   *
>   * @throws UnsupportedOperationException if this query is not yet
> rewritten
>   */
>  public void extractTerms(Set<Term> terms) {
>    // needs to be implemented by query subclasses
>    throw new UnsupportedOperationException();
>  }
>
> Does this imply that some concrete Query classes have not overridden this
> method?
>
>
>
>
>
> On Mon, Aug 2, 2010 at 4:01 PM, Erick Erickson <erickerickson@gmail.com
> >wrote:
>
> > Did you look at Query.extractTerms? I think that'll work for you.
> > Note that the query must be rewritten, and that the set of terms will
> > have duplicate fields. i.e. if you search field1:Erick +field1:James
> > I expect you'll have two terms in the set that are on field1.
> >
> > Best
> > Erick
> >
> > On Mon, Aug 2, 2010 at 8:16 AM, Anuj Shah <anujshahwork@gmail.com>
> wrote:
> >
> > > My code has been given a query string, which we parse into the Query
> > object
> > > and would like to get a list of fields from.
> > >
> > > I'm assuming there exists a method to do so, as it seems like a useful
> > > function. If not should I be parsing the string for fields myself.
> > >
> > > Anuj
> > >
> > >
> > >
> > >
> > >
> > > On Sun, Aug 1, 2010 at 2:21 AM, Erick Erickson <
> erickerickson@gmail.com
> > > >wrote:
> > >
> > > > Could you explain more about what you're trying to do? You're writing
> > the
> > > > query
> > > > after all, so you probably already know what went into it.
> > > >
> > > > Which shows that I don't understand what you want to do at all.
> > > >
> > > > Best
> > > > Erick
> > > >
> > > > On Sat, Jul 31, 2010 at 9:41 AM, Anuj Shah <anujshahwork@gmail.com>
> > > wrote:
> > > >
> > > > > Hi,
> > > > >
> > > > > Is there a way to get all the fields involved in a query?
> > > > >
> > > > > Thanks
> > > > >
> > > > > Anuj
> > > > >
> > > >
> > >
> >
>

--0016363b8ba6129925048cf175fd--

From java-user-return-46901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 03 20:55:09 2010
Return-Path: <java-user-return-46901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20795 invoked from network); 3 Aug 2010 20:55:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Aug 2010 20:55:04 -0000
Received: (qmail 30082 invoked by uid 500); 3 Aug 2010 20:55:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30024 invoked by uid 500); 3 Aug 2010 20:55:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29769 invoked by uid 99); 3 Aug 2010 20:55:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Aug 2010 20:55:01 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Aug 2010 20:54:55 +0000
Received: by qwd7 with SMTP id 7so3597354qwd.35
        for <java-user@lucene.apache.org>; Tue, 03 Aug 2010 13:54:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=yWEbBx6zdIBkIJiRtM0tu6Zrsftc/Eby/1q+hsjuX/g=;
        b=In8LRz6gkVUHvsjX3WJ1Gfq1T7GWNVHZeOWxX7Vo3oSfb8GdK8650bTVdxSUsdWDnw
         fYUpiD4Dg31K3BDpyOjMPC8rmRzc0CCXxNGE14J9MY1JWIfEk7KVvE/u2j3aD/YDzRCz
         k67z/sdzZSw+iqxTpcrotSG1c02fsQ1nN28ng=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=bsk5RH7nF/dyETcBnXM6TFuShiZzz9+zJKoV8tv0yQNkoS0SblPeOSIPwCJsPiGkFM
         mQGbYLy566+t08m189vtviIrnya/Q8ttb02ANbbsdbSghYRaWljSclEHbyEzRMZvdJg1
         DbeeZ/6cZVu2bMjXozk08XIQ66pZXv+CyOZpg=
MIME-Version: 1.0
Received: by 10.229.213.200 with SMTP id gx8mr1614507qcb.89.1280868874242; 
	Tue, 03 Aug 2010 13:54:34 -0700 (PDT)
Received: by 10.229.221.199 with HTTP; Tue, 3 Aug 2010 13:54:34 -0700 (PDT)
In-Reply-To: <AANLkTimW1YmfTjR5E51jai28Ys5jSYjMSoQOx-2u9qCT@mail.gmail.com>
References: <AANLkTimW1YmfTjR5E51jai28Ys5jSYjMSoQOx-2u9qCT@mail.gmail.com>
Date: Tue, 3 Aug 2010 16:54:34 -0400
Message-ID: <AANLkTikoQKq2veUPu7aMA7eYFFRi_Fd=GYaoBVX8ZQg7@mail.gmail.com>
Subject: Re: get wordno, lineno, pageno for term/phrase
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016361e876440cce0048cf18698

--0016361e876440cce0048cf18698
Content-Type: text/plain; charset=ISO-8859-1

No, you can't do this with any existing analyzers I know of. Part
of the problem here is that there's no good generic way to KNOW
what a page and line are.

Have you investigated payloads? I'm not sure that's a good fit for
this particular problem, but it might be worth investigating.

Best
Erick

On Tue, Aug 3, 2010 at 10:58 AM, arun r <arun.raj@gmail.com> wrote:

> hi all,
>            I am new to Lucene. I am trying to use Lucene to generate
> data for a document classifier. I need to generate wordno, lineno,
> pageno for each term/phrase. I was able to use SpanQuery/SpanNearQuery
> to get the wordno (span.start()) for the term/phrase. To get pageno
> and lineno, a custom Analyzer needs to be written ? Can the Analyzer
> be made to recognize and newline and page feed characters and keep
> track of lineno and pageno for the tokens ?
>
> Is it possible with existing Lucene Analyzer ?
>
> Thanks,
> Arun
>
> --
> Where there is a will, there is a way !
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016361e876440cce0048cf18698--

From java-user-return-46902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 03 21:27:49 2010
Return-Path: <java-user-return-46902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38408 invoked from network); 3 Aug 2010 21:27:49 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Aug 2010 21:27:49 -0000
Received: (qmail 68932 invoked by uid 500); 3 Aug 2010 21:27:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68853 invoked by uid 500); 3 Aug 2010 21:27:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68845 invoked by uid 99); 3 Aug 2010 21:27:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Aug 2010 21:27:46 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,MIME_QP_LONG_LINE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aminmc@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Aug 2010 21:27:37 +0000
Received: by wyb35 with SMTP id 35so1661124wyb.35
        for <java-user@lucene.apache.org>; Tue, 03 Aug 2010 14:27:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:references:in-reply-to
         :mime-version:content-transfer-encoding:content-type:message-id:cc
         :x-mailer:from:subject:date:to;
        bh=OAbEZ3e4jpfu+swPcOf+3vDEyIrLTFVpfCwnF/kce1A=;
        b=gj5idGyLopyLjFhwIGiagwFejq0U+Jpuo5LTREcJ3dtnDaHOsQLPUb2jLe4rC48K7w
         8MIUiO76tW1Gdj5Bno9fHGOqEsMz9+DjSRVN3kjzxBhAFuv1a5TEJ/UoyDQ600pEnIHv
         4lXZK9p912+1gTzjLJf9aryCcRSMY3m3a4aqA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=references:in-reply-to:mime-version:content-transfer-encoding
         :content-type:message-id:cc:x-mailer:from:subject:date:to;
        b=bJIBBt7KCRQPLI1AVdZ4o1p2EwEds2ZZ+4ZVuXZTrPgKBM3Jkgegz0MR72wVJnw9oP
         mtYBicEArIxBV1jALk5BYLK8DNR27yNB/GtluGqkyqPsNAIVn6M+Ehf2+OM0prbJ0WEP
         M+tmzBYNhD0W3GKm1Tde+AcEJ20Lj8nuX8T5A=
Received: by 10.227.146.147 with SMTP id h19mr6181279wbv.222.1280870836627;
        Tue, 03 Aug 2010 14:27:16 -0700 (PDT)
Received: from [192.168.1.77] (host86-146-89-111.range86-146.btcentralplus.com [86.146.89.111])
        by mx.google.com with ESMTPS id f30sm6495844wbe.6.2010.08.03.14.27.14
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 03 Aug 2010 14:27:15 -0700 (PDT)
References: <858BF3C0-17A2-458B-83C3-E98906EB82C0@gmail.com>
In-Reply-To: <858BF3C0-17A2-458B-83C3-E98906EB82C0@gmail.com>
Mime-Version: 1.0 (iPhone Mail 8A293)
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii
Message-Id: <AEE88EF7-7F7C-4E13-9362-5A329A44CC08@gmail.com>
Cc: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
X-Mailer: iPhone Mail (8A293)
From: Amin Mohammed-Coleman <aminmc@gmail.com>
Subject: Re: hit exception flushing segment _0 - IndexWriter configuration
Date: Tue, 3 Aug 2010 22:28:41 +0100
To: Amin Mohammed-Coleman <aminmc@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

Apologies for re sending this email but I was just wondering if any one migh=
t be able to advise on the below. I'm not sure if I've provided enough info.=
=20

Again any help would be appreciated.=20

Amin

Sent from my iPhone

On 1 Aug 2010, at 20:00, Amin Mohammed-Coleman <aminmc@gmail.com> wrote:

> Hi
>=20
> I am currently building an application whereby there is a remote index ser=
ver (yes it probably does sound like Solr :)) and users use my API to send d=
ocuments to the indexing server for indexing.  The 2 methods primarily used i=
s add and commit. So the user can send requests for documents to be added to=
 the index and then can call commit.  I did a test where i simulated a user c=
alling the add method 10 times and then in a separate method call invoked co=
mmit.   The thing I noticed when i turned the verbose setting for the IndexW=
riter was:
>=20
> hit exception flushing segment _0
>=20
> It may be worth mention the settings I have for my index writer:
>=20
> mergeFactor =3D"100"=20
> maxMergeDocs =3D "9999999"=20
>=20
>=20
> When i use my api to add 102 documents and then in a separate method call i=
nvoke a commit I get no exception.  So I was wondering what is the best sett=
ing for the mergeFactor, and should i be experiencing this exception after r=
equesting a commit after adding 10 documents to the index?=20
>=20
>=20
> Any help would be appreciated.
>=20
>=20
> Thanks
> Amin

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 03 21:36:14 2010
Return-Path: <java-user-return-46903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56110 invoked from network); 3 Aug 2010 21:36:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Aug 2010 21:36:14 -0000
Received: (qmail 89957 invoked by uid 500); 3 Aug 2010 21:36:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89837 invoked by uid 500); 3 Aug 2010 21:36:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89809 invoked by uid 99); 3 Aug 2010 21:36:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Aug 2010 21:36:11 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Aug 2010 21:36:04 +0000
Received: by wyb35 with SMTP id 35so1673254wyb.35
        for <java-user@lucene.apache.org>; Tue, 03 Aug 2010 14:35:43 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.234.97 with SMTP id r75mr1275277weq.27.1280871343556; Tue, 
	03 Aug 2010 14:35:43 -0700 (PDT)
Received: by 10.216.52.84 with HTTP; Tue, 3 Aug 2010 14:35:43 -0700 (PDT)
In-Reply-To: <AEE88EF7-7F7C-4E13-9362-5A329A44CC08@gmail.com>
References: <858BF3C0-17A2-458B-83C3-E98906EB82C0@gmail.com>
	<AEE88EF7-7F7C-4E13-9362-5A329A44CC08@gmail.com>
Date: Tue, 3 Aug 2010 17:35:43 -0400
Message-ID: <AANLkTimUcc=QseWk5wJ9QM3+wewRBDA3gQur+y9y6K3h@mail.gmail.com>
Subject: Re: hit exception flushing segment _0 - IndexWriter configuration
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Cc: Amin Mohammed-Coleman <aminmc@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Can you post the full exception?  And also the log output from
IndexWriter.setInfoStream.

Mike

On Tue, Aug 3, 2010 at 5:28 PM, Amin Mohammed-Coleman <aminmc@gmail.com> wr=
ote:
> Hi
>
> Apologies for re sending this email but I was just wondering if any one m=
ight be able to advise on the below. I'm not sure if I've provided enough i=
nfo.
>
> Again any help would be appreciated.
>
> Amin
>
> Sent from my iPhone
>
> On 1 Aug 2010, at 20:00, Amin Mohammed-Coleman <aminmc@gmail.com> wrote:
>
>> Hi
>>
>> I am currently building an application whereby there is a remote index s=
erver (yes it probably does sound like Solr :)) and users use my API to sen=
d documents to the indexing server for indexing. =A0The 2 methods primarily=
 used is add and commit. So the user can send requests for documents to be =
added to the index and then can call commit. =A0I did a test where i simula=
ted a user calling the add method 10 times and then in a separate method ca=
ll invoked commit. =A0 The thing I noticed when i turned the verbose settin=
g for the IndexWriter was:
>>
>> hit exception flushing segment _0
>>
>> It may be worth mention the settings I have for my index writer:
>>
>> mergeFactor =3D"100"
>> maxMergeDocs =3D "9999999"
>>
>>
>> When i use my api to add 102 documents and then in a separate method cal=
l invoke a commit I get no exception. =A0So I was wondering what is the bes=
t setting for the mergeFactor, and should i be experiencing this exception =
after requesting a commit after adding 10 documents to the index?
>>
>>
>> Any help would be appreciated.
>>
>>
>> Thanks
>> Amin
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 03 23:47:23 2010
Return-Path: <java-user-return-46904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69572 invoked from network); 3 Aug 2010 23:47:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Aug 2010 23:47:23 -0000
Received: (qmail 70410 invoked by uid 500); 3 Aug 2010 23:47:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70318 invoked by uid 500); 3 Aug 2010 23:47:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70310 invoked by uid 99); 3 Aug 2010 23:47:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Aug 2010 23:47:20 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of goksron@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Aug 2010 23:47:12 +0000
Received: by qwd7 with SMTP id 7so3776261qwd.35
        for <java-user@lucene.apache.org>; Tue, 03 Aug 2010 16:46:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=pmRBJKGjcnqYF/itVRjfNKfYbGNVBMN49s6m/248Vys=;
        b=xsI/UGwwWAV/tIw9B2e/w7N3DMP4AqNuCxTt5Yr4uhuwlRDUCcUAa5lFPhO7TGR1j/
         Fhanh19fMJjSktTz7v/jgtPKzQrwDs0f4WKic4J5VZ88QBHlHC54BV7vPSyVjQk/I6tW
         qqRPuB865RrDLkWSU4iddCGaUG0qDdIYQ24F4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=IF3T2myAb6ZXpgvHe9lnECpFGov/2Tci7URK78X0uuGt0xrYa0mVS5dxFfs2wkRd3D
         oVhGvjKblHQmViW0VAyCGoZnGwdeiwW7VtLQdVFVIKR6eU2C5jZs1mcQ8erjZDt/YYnj
         G8fQy2xtYojiI4bU7qjeJf0I+LzYAaYK/3OZg=
MIME-Version: 1.0
Received: by 10.229.48.74 with SMTP id q10mr1616471qcf.168.1280879211109; Tue, 
	03 Aug 2010 16:46:51 -0700 (PDT)
Received: by 10.229.224.5 with HTTP; Tue, 3 Aug 2010 16:46:51 -0700 (PDT)
In-Reply-To: <AANLkTi=hn5-paCfTK7+kvjwsU8f2FnDBTpu-=VnbqyuR@mail.gmail.com>
References: <AANLkTi=hn5-paCfTK7+kvjwsU8f2FnDBTpu-=VnbqyuR@mail.gmail.com>
Date: Tue, 3 Aug 2010 16:46:51 -0700
Message-ID: <AANLkTinWPXx8v3B1V2ndjdB9CH3fMXNUySYwgh0PsaEK@mail.gmail.com>
Subject: Re: Migrating from Lucene 2.9.1 to Solr 1.4.0 - Performance issues 
	under heavy load
From: Lance Norskog <goksron@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Is this an "apples to apples" comparison? That is, are you measuring
the same complete flow on both apps? Does the Lucene app return fields
via HTTP?

On Tue, Aug 3, 2010 at 11:28 AM, Ophir Adiv <firtzel@gmail.com> wrote:
> Hi,
>
>
>
> I=E2=80=99m currently involved in a project of migrating from Lucene 2.9.=
1 to Solr
> 1.4.0.
>
> During stress testing, I encountered this performance problem:
>
> While actual search times in our shards (which are now running Solr) have
> not changed, the total time it takes for a query has increased dramatical=
ly.
>
> During this performance test, we of course do not modify the indexes.
>
> Our application is sending Solr select queries concurrently to the 8 shar=
ds,
> using CommonsHttpSolrServer.
>
> I added some timing debug messages, and found that
> CommonsHttpSolrServer.java, line 416 takes about 95% of the application=
=E2=80=99s
> total search time:
>
> int statusCode =3D _httpClient.executeMethod(method);
>
>
>
> Just to clarify: looking at access logs of the Solr shards, TTLB for a qu=
ery
> might be around 5 ms. (on all shards), but httpClient.executeMethod() for
> this query can be much higher =E2=80=93 say, 50 ms.
>
> On average, if under light load queries take 12 ms. on average, under hea=
vy
> load the take around 22 ms.
>
>
>
> Another route we tried to pursue is add the =E2=80=9Cshards=3Dshard1,shar=
d2,=E2=80=A6=E2=80=9D
> parameter to the query instead of doing this ourselves, but this doesn=E2=
=80=99t
> seem to work due to an NPE caused by QueryComponent.returnFields(), line
> 553:
>
> if (returnScores && sdoc.score !=3D null) {
>
>
>
> where sdoc is null. I saw there is a null check on trunk, but since we=E2=
=80=99re
> currently using Solr 1.4.0=E2=80=99s ready-made WAR file, I didn=E2=80=99=
t see an easy way
> around this.
>
> Note: we=E2=80=99re using a custom query component which extends QueryCom=
ponent, but
> debugging this, I saw nothing wrong with the results at this point in the
> code.
>
>
>
> Our previous code used HTTP in a different manner:
>
> For each request, we created a new
> sun.net.www.protocol.http.HttpURLConnection, and called its getInputStrea=
m()
> method.
>
> Under the same load as the new application, the old application does not
> encounter the delays mentioned above.
>
>
>
> Our current code is initializing CommonsHttpSolrServer for each shard thi=
s
> way:
>
>
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0MultiThreadedHttpConnectionManager
> httpConnectionManager =3D new MultiThreadedHttpConnectionManager();
>
>
> httpConnectionManager.getParams().setTcpNoDelay(true);
>
>
> httpConnectionManager.getParams().setMaxTotalConnections(1024);
>
>
> httpConnectionManager.getParams().setStaleCheckingEnabled(false);
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0HttpClient httpClient =3D new HttpCli=
ent();
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0HttpClientParams params =3D new
> HttpClientParams();
>
>
> params.setCookiePolicy(CookiePolicy.IGNORE_COOKIES);
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0params.setAuthenticationPreemptive(fa=
lse);
>
>
> params.setContentCharset(StringConstants.UTF8);
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0httpClient.setParams(params);
>
>
> httpClient.setHttpConnectionManager(httpConnectionManager);
>
>
>
> and passing the new HttpClient to the Solr Server:
>
> solrServer =3D new CommonsHttpSolrServer(coreUrl, httpClient);
>
>
>
> We tried two different ways =E2=80=93 one with a single
> MultiThreadedHttpConnectionManager and HttpClient for all the SolrServer=
=E2=80=99s,
> and the other with a new MultiThreadedHttpConnectionManager and HttpClien=
t
> for each SolrServer.
>
> Both tries yielded similar performance results.
>
> Also tried to give setMaxTotalConnections() a much higher connections num=
ber
> (1,000,000) =E2=80=93 didn=E2=80=99t have an effect.
>
>
>
> Would love to hear what you think about this. TIA,
>
> Ophir
>



--=20
Lance Norskog
goksron@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 04 03:07:18 2010
Return-Path: <java-user-return-46905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49893 invoked from network); 4 Aug 2010 03:07:17 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Aug 2010 03:07:17 -0000
Received: (qmail 4665 invoked by uid 500); 4 Aug 2010 03:07:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4259 invoked by uid 500); 4 Aug 2010 03:07:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4250 invoked by uid 99); 4 Aug 2010 03:07:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Aug 2010 03:07:11 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [132.249.20.114] (HELO postal.sdsc.edu) (132.249.20.114)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Aug 2010 03:07:01 +0000
Received: from mta.ad.sdsc.edu (mta.ad.sdsc.edu [132.249.69.68])
	by postal.sdsc.edu (8.11.7/8.11.7/server/80) with ESMTP id o7436da25654;
	Tue, 3 Aug 2010 20:06:39 -0700 (PDT)
Received: from MBX.ad.sdsc.edu ([fe80::85f9:e068:7dc0:4fe0]) by
 mta.ad.sdsc.edu ([132.249.69.68]) with mapi; Tue, 3 Aug 2010 20:06:34 -0700
From: Christopher Condit <condit@sdsc.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
CC: "yatirb@outbrain.com" <yatirb@outbrain.com>
Date: Tue, 3 Aug 2010 20:06:31 -0700
Subject: RE: Question to the writer of MultiPassIndexSplitter 
Thread-Topic: Question to the writer of MultiPassIndexSplitter 
Thread-Index: AcsprcAAxdQfmIBHRt28vGyPqTCY9wJ0/m6Q
Message-ID: <BAFDED91EF7D5A43A30F897D6C94B1287D01C652EE@MBX.ad.sdsc.edu>
References: <5BC8C17105C4C8428774FB93EC02F118010A376DE6A5@EXVMBX003-3.exch003intermedia.net>
In-Reply-To: <5BC8C17105C4C8428774FB93EC02F118010A376DE6A5@EXVMBX003-3.exch003intermedia.net>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

> I heard work is being done on re-writing MultiPassIndexSplitter so it wil=
l be a
> single pass and work quicker.

Because that was so slow I just wrote a utility class to create a list of N=
 IndexWriters and round robin documents to them as the index is created. Th=
en we use a ParallelMultiSearcher for retrieval. I can send you the code if=
 you're interested...

-Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 04 05:25:23 2010
Return-Path: <java-user-return-46906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9881 invoked from network); 4 Aug 2010 05:25:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Aug 2010 05:25:23 -0000
Received: (qmail 91084 invoked by uid 500); 4 Aug 2010 05:25:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90650 invoked by uid 500); 4 Aug 2010 05:25:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90642 invoked by uid 99); 4 Aug 2010 05:25:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Aug 2010 05:25:17 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aminmc@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Aug 2010 05:25:07 +0000
Received: by wwb39 with SMTP id 39so1477328wwb.5
        for <java-user@lucene.apache.org>; Tue, 03 Aug 2010 22:24:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:subject:mime-version
         :content-type:from:in-reply-to:date:cc:content-transfer-encoding
         :message-id:references:to:x-mailer;
        bh=46H56CY+WeWrbdbELpP6V+RwSKOJLW+uKjQ4m89VvPA=;
        b=rlsUQMaEJsa/VEGSq5MtPCFGcsFno/SOyMun+Y+XxSGpdy9G0RhDGjg9Sy1fNKlRof
         N0HZd5j2JfpKYYYw+Pp5hEOvQpNsbpifexjG8PGzjbSMaMsHD92eGd6J3yuPidiecIQz
         BZMkSeQm4rqxoI3UeTrzwI9emVuBfI8MshXV8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=subject:mime-version:content-type:from:in-reply-to:date:cc
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=GrKpsJaGmaZTfiqoeGqWTLOpYEhtUMdqMbRiChhRtgS/DE+lnjrXjxaQUFAnRh6KII
         MMekl5IBbyXfRYcSzwCpHlfj/E4wvn5kivAFMbe93+/ihH1isJojcH99jLPX7utpVNev
         G3/B/UN5OZZ6xl9b/w2mYLMe9+6kRDZ5DBudA=
Received: by 10.216.35.65 with SMTP id t43mr1609717wea.34.1280899487382;
        Tue, 03 Aug 2010 22:24:47 -0700 (PDT)
Received: from [192.168.1.80] (host86-146-89-111.range86-146.btcentralplus.com [86.146.89.111])
        by mx.google.com with ESMTPS id p52sm4042050weq.20.2010.08.03.22.24.42
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 03 Aug 2010 22:24:44 -0700 (PDT)
Subject: Re: hit exception flushing segment _0 - IndexWriter configuration
Mime-Version: 1.0 (Apple Message framework v1081)
Content-Type: text/plain; charset=us-ascii
From: Amin Mohammed-Coleman <aminmc@gmail.com>
In-Reply-To: <AANLkTimUcc=QseWk5wJ9QM3+wewRBDA3gQur+y9y6K3h@mail.gmail.com>
Date: Wed, 4 Aug 2010 06:24:31 +0100
Cc: java-user@lucene.apache.org
Content-Transfer-Encoding: quoted-printable
Message-Id: <DE19E793-7582-4E7E-B8F5-39853F9712CC@gmail.com>
References: <858BF3C0-17A2-458B-83C3-E98906EB82C0@gmail.com> <AEE88EF7-7F7C-4E13-9362-5A329A44CC08@gmail.com> <AANLkTimUcc=QseWk5wJ9QM3+wewRBDA3gQur+y9y6K3h@mail.gmail.com>
To: Michael McCandless <lucene@mikemccandless.com>
X-Mailer: Apple Mail (2.1081)
X-Virus-Checked: Checked by ClamAV on apache.org

Somewhat embarrassingly I can't seem to reproduce the problem anymore!  =
I've tried to reproduce it for the last hour now and no luck.  Sorry =
about that. If it happens again then I'll post back to the list.

Thanks for your time.

Amin


On 3 Aug 2010, at 22:35, Michael McCandless wrote:

> Can you post the full exception?  And also the log output from
> IndexWriter.setInfoStream.
>=20
> Mike
>=20
> On Tue, Aug 3, 2010 at 5:28 PM, Amin Mohammed-Coleman =
<aminmc@gmail.com> wrote:
>> Hi
>>=20
>> Apologies for re sending this email but I was just wondering if any =
one might be able to advise on the below. I'm not sure if I've provided =
enough info.
>>=20
>> Again any help would be appreciated.
>>=20
>> Amin
>>=20
>> Sent from my iPhone
>>=20
>> On 1 Aug 2010, at 20:00, Amin Mohammed-Coleman <aminmc@gmail.com> =
wrote:
>>=20
>>> Hi
>>>=20
>>> I am currently building an application whereby there is a remote =
index server (yes it probably does sound like Solr :)) and users use my =
API to send documents to the indexing server for indexing.  The 2 =
methods primarily used is add and commit. So the user can send requests =
for documents to be added to the index and then can call commit.  I did =
a test where i simulated a user calling the add method 10 times and then =
in a separate method call invoked commit.   The thing I noticed when i =
turned the verbose setting for the IndexWriter was:
>>>=20
>>> hit exception flushing segment _0
>>>=20
>>> It may be worth mention the settings I have for my index writer:
>>>=20
>>> mergeFactor =3D"100"
>>> maxMergeDocs =3D "9999999"
>>>=20
>>>=20
>>> When i use my api to add 102 documents and then in a separate method =
call invoke a commit I get no exception.  So I was wondering what is the =
best setting for the mergeFactor, and should i be experiencing this =
exception after requesting a commit after adding 10 documents to the =
index?
>>>=20
>>>=20
>>> Any help would be appreciated.
>>>=20
>>>=20
>>> Thanks
>>> Amin
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 04 06:19:29 2010
Return-Path: <java-user-return-46907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43857 invoked from network); 4 Aug 2010 06:19:28 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Aug 2010 06:19:28 -0000
Received: (qmail 36747 invoked by uid 500); 4 Aug 2010 06:19:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36130 invoked by uid 500); 4 Aug 2010 06:19:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36106 invoked by uid 99); 4 Aug 2010 06:19:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Aug 2010 06:19:21 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [76.13.13.238] (HELO n10.bullet.mail.ac4.yahoo.com) (76.13.13.238)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 04 Aug 2010 06:19:09 +0000
Received: from [76.13.13.26] by n10.bullet.mail.ac4.yahoo.com with NNFMP; 04 Aug 2010 06:18:47 -0000
Received: from [67.195.9.82] by t3.bullet.mail.ac4.yahoo.com with NNFMP; 04 Aug 2010 06:18:47 -0000
Received: from [98.137.27.209] by t2.bullet.mail.gq1.yahoo.com with NNFMP; 04 Aug 2010 06:18:47 -0000
Received: from [127.0.0.1] by omp119.mail.gq1.yahoo.com with NNFMP; 04 Aug 2010 06:18:47 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 683634.4506.bm@omp119.mail.gq1.yahoo.com
Received: (qmail 97734 invoked by uid 60001); 4 Aug 2010 06:18:47 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1280902727; bh=FZ6+YsXRdb+UJL0h1wXFX2lWySHqkaBfsbY2EQgZn34=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:Cc:In-Reply-To:MIME-Version:Content-Type; b=Yx1eMFY/Pr6Hf7HlvuRWfnaoOMY7Teg/Q4E5y93orU9r7VblitPBT6Jtlx93pEHdflIrfQ/+ZX8Z/s5i6GIYGxFWkBt5M6BnV1v3k66XVhkZ+ZuWMzBFgOn0NsShhwnTUkCTP4bYdygyegQxcvRG5Xh1r2jm3Qq8V8NrhIWfK58=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:Cc:In-Reply-To:MIME-Version:Content-Type;
  b=5cFTBNw9jcCVXF99rE/ltiY2BolZxZdjVmdiHyffPijFmEwHLzs5aMhG05godjeWjeBqG46ALWGbBOZsdvIDz6v37LvkbU68tsnhI+SUV6oZKaepd7HWfjMUn5Cwey6HX4x9mgFXTdrOSicOFQ74WDfDvZWoNEjJLptZrUJHpP0=;
Message-ID: <564489.96795.qm@web114408.mail.gq1.yahoo.com>
X-YMail-OSG: tXuwFl0VM1mn5s4Awn4nIlE1DtEjclGvLtVIkxmQdZmnj1o
 RDavCH.q4QPp3BCzK9OuGutkuoqRc7A2IX9kHSD8rQHUjLB9N4svtJemSfhr
 V9q7DGyNoyK0HRJrLr5WYytAol30x5iSlQdbXmY6eUhOv6thxVFqIlGMTkdd
 iyho3LPOVWfOw7XoOXePGmXnV0SG1THXZ9CDrP2yI_fOcAlT0P4U0QRV7Ywt
 2Fe.IHcDefokRW499zZ4QKYXqRC5e1v7Q.SNcoUrIAxppBjcox6v9UUccbBx
 1zduVI5uxB8O_3Y1U2VkJTq4SnSyYzdjohy69k1JQqhudK1f_RHZA0NFtiRv
 fGQ7V.3xyA53R1g--
Received: from [59.163.89.69] by web114408.mail.gq1.yahoo.com via HTTP; Tue, 03 Aug 2010 23:18:47 PDT
X-Mailer: YahooMailRC/420.4 YahooMailWebService/0.8.105.279950
References: <271FBC41306F497BA25F754A54B67F01@hp6690ej01> <520925.21819.qm@web114420.mail.gq1.yahoo.com> <AANLkTinYGPTF4UmGvG24681t4uLDOOcq2Y-LaYgQX4JC@mail.gmail.com>
Date: Tue, 3 Aug 2010 23:18:47 -0700 (PDT)
From: d' Ani <anirbande@yahoo.com>
Subject: Re: customizable relevance engine
To: dctech1000@gmail.com
Cc: java-user@lucene.apache.org, general@lucene.apache.org,
  solr-user@lucene.apache.org, dev@lucene.apache.org
In-Reply-To: <AANLkTinYGPTF4UmGvG24681t4uLDOOcq2Y-LaYgQX4JC@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1671244624-1280902727=:96795"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1671244624-1280902727=:96795
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

thanks DC for the boosting info.. can i plz have some code pointers to the =
same.=0A=0AAs far as i understand the boosting is done during harvesting of=
 the documents. =0AThats is fine but how do i achieve dynamic boosting...Fo=
r example I wish to =0Aboost documents that have been opened more in the pa=
st (i already have means to =0Atrack docs opened which is dynamic )  .. is =
it possible to sort Hits based on =0Athis list=0A=0A =0ARegards,=0AAnirban =
De=0AYahoo: anirbande=0ASkype: anirbande=0AGtalk : ade.sxc=0A=0A=0A=0A=0A__=
______________________________=0AFrom: dc tech <dctech1000@gmail.com>=0ATo:=
 java-user@lucene.apache.org=0ASent: Tue, 3 August, 2010 6:05:14 PM=0ASubje=
ct: Re: customizable relevance engine=0A=0ABoth Solr or Lucene allow extens=
ive customization of relevance=0Acalculations. Examples include boosting ma=
tched in title field vs.=0ABody, or boosting recent documents more than old=
er documents.=0A=0AOn 8/3/10, d' Ani <anirbande@yahoo.com> wrote:=0A> Hi al=
l,=0A> Is there any relevance engine that is built in lucence and which can=
=0A> be customized.=0A>=0A> Regards,=0A> Anirban De=0A> Yahoo: anirbande=0A=
> Skype: anirbande=0A> Gtalk : ade.sxc=0A>=0A>=0A=0A-- =0ASent from my mobi=
le device=0A=0A------------------------------------------------------------=
---------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=
=0AFor additional commands, e-mail: java-user-help@lucene.apache.org=0A=0A
--0-1671244624-1280902727=:96795--


From java-user-return-46908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 04 08:42:45 2010
Return-Path: <java-user-return-46908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98083 invoked from network); 4 Aug 2010 08:42:45 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Aug 2010 08:42:45 -0000
Received: (qmail 72847 invoked by uid 500); 4 Aug 2010 08:42:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72367 invoked by uid 500); 4 Aug 2010 08:42:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72358 invoked by uid 99); 4 Aug 2010 08:42:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Aug 2010 08:42:37 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [188.121.53.1] (HELO n1plout04-01.prod.ams1.secureserver.net) (188.121.53.1)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 04 Aug 2010 08:42:28 +0000
Received: (qmail 19239 invoked from network); 4 Aug 2010 08:42:05 -0000
Received: from unknown (95.35.128.248)
  by n1plout04-01.prod.ams1.secureserver.net (188.121.53.1) with ESMTP; 04 Aug 2010 08:42:05 -0000
Message-ID: <4C5927CE.7090609@code972.com>
Date: Wed, 04 Aug 2010 11:41:50 +0300
From: Itamar Syn-Hershko <itamar@code972.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.11) Gecko/20100711 Lightning/1.0b1 Thunderbird/3.0.6
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: get wordno, lineno, pageno for term/phrase
References: <AANLkTimW1YmfTjR5E51jai28Ys5jSYjMSoQOx-2u9qCT@mail.gmail.com> <AANLkTikoQKq2veUPu7aMA7eYFFRi_Fd=GYaoBVX8ZQg7@mail.gmail.com>
In-Reply-To: <AANLkTikoQKq2veUPu7aMA7eYFFRi_Fd=GYaoBVX8ZQg7@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Storing all that info per-token as payloads will bloat the index. 
Wouldn't it be wiser to use a special token to mark page feed and end of 
paragraph (numbers of which could be then stored as payloads), and scan 
the token stream per document to retrieve them back? some extra 
operations for retrieval, but much smaller index...

Itamar.

On 3/8/2010 11:54 PM, Erick Erickson wrote:
> No, you can't do this with any existing analyzers I know of. Part
> of the problem here is that there's no good generic way to KNOW
> what a page and line are.
>
> Have you investigated payloads? I'm not sure that's a good fit for
> this particular problem, but it might be worth investigating.
>
> Best
> Erick
>
> On Tue, Aug 3, 2010 at 10:58 AM, arun r<arun.raj@gmail.com>  wrote:
>
>    
>> hi all,
>>             I am new to Lucene. I am trying to use Lucene to generate
>> data for a document classifier. I need to generate wordno, lineno,
>> pageno for each term/phrase. I was able to use SpanQuery/SpanNearQuery
>> to get the wordno (span.start()) for the term/phrase. To get pageno
>> and lineno, a custom Analyzer needs to be written ? Can the Analyzer
>> be made to recognize and newline and page feed characters and keep
>> track of lineno and pageno for the tokens ?
>>
>> Is it possible with existing Lucene Analyzer ?
>>
>> Thanks,
>> Arun
>>
>> --
>> Where there is a will, there is a way !
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>      
>    

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 04 13:26:22 2010
Return-Path: <java-user-return-46909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5997 invoked from network); 4 Aug 2010 13:26:22 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Aug 2010 13:26:22 -0000
Received: (qmail 31224 invoked by uid 500); 4 Aug 2010 13:26:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30708 invoked by uid 500); 4 Aug 2010 13:26:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30700 invoked by uid 99); 4 Aug 2010 13:26:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Aug 2010 13:26:15 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Aug 2010 13:26:10 +0000
Received: by qyk12 with SMTP id 12so2421905qyk.14
        for <java-user@lucene.apache.org>; Wed, 04 Aug 2010 06:25:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=uWZ/vcfxIuSrrjXnxe+Pp0bNjEMhVAslYu7MiLvM16o=;
        b=JkIk/pQfg1wpRMRkFLF9XIr2dYh8vLEn9SQpkiTF3Nbl2T02cULB+UZtySnTzy+gU5
         VG/ZsBjYRgpTe9PUpUIzn00N7Kt5pOIB8BGHVSlpvAcSiNoO4C5OBGr7+K3yGxOwEQni
         loh8HK4WHwqjkhxqT6N/IToTiRaO+aAU7HR8s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=MAffNHxvfFvRP0QPzuqf0B0PMDAOswKa06I99m6X9imKh0JlYIj//cQ7OSwJH9sHfL
         QtZRsw1LpuRaNkxtCAfxQq9EW0AcSGXc+pfh/GR+fXAS71c1Qbt8v/WH/bmCKfGHUgre
         KikbgGujjx4d6AKJYt87xjVfMCWKW7V8JzH68=
MIME-Version: 1.0
Received: by 10.229.228.195 with SMTP id jf3mr2408908qcb.14.1280928348849; 
	Wed, 04 Aug 2010 06:25:48 -0700 (PDT)
Received: by 10.229.221.199 with HTTP; Wed, 4 Aug 2010 06:25:48 -0700 (PDT)
In-Reply-To: <4C5927CE.7090609@code972.com>
References: <AANLkTimW1YmfTjR5E51jai28Ys5jSYjMSoQOx-2u9qCT@mail.gmail.com>
	<AANLkTikoQKq2veUPu7aMA7eYFFRi_Fd=GYaoBVX8ZQg7@mail.gmail.com>
	<4C5927CE.7090609@code972.com>
Date: Wed, 4 Aug 2010 09:25:48 -0400
Message-ID: <AANLkTinJvAmJZKut-SBB1rz6eVUXF5L+pezcfu9XEgFC@mail.gmail.com>
Subject: Re: get wordno, lineno, pageno for term/phrase
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163630f6b7374580048cff5f79

--00163630f6b7374580048cff5f79
Content-Type: text/plain; charset=ISO-8859-1

It depends (TM). Yes, it would bloat the index. But nothing in the original
post indicates
that this is a concern. The index could be 10M or 100G, in one case it
matters a lot
and in the other it doesn't. It's also unclear whether query response time
matters
at all or whether this is some sort of batch process that can run overnight
(or whatever).

One could also store a very special field per document that contained all
the meta-data
one could care about. For instance, the offset of each line, page,
paragraph, etc. That,
combined with the offset data for the word, which is available via the span
queries,
could be what's needed.

re-scanning the input stream has it's own costs as well, but perhaps they
are the
preferable ones, it all depends on the use-case.

It seems like it's always a space/speed tradeoff......

Best
Erick

On Wed, Aug 4, 2010 at 4:41 AM, Itamar Syn-Hershko <itamar@code972.com>wrote:

> Storing all that info per-token as payloads will bloat the index. Wouldn't
> it be wiser to use a special token to mark page feed and end of paragraph
> (numbers of which could be then stored as payloads), and scan the token
> stream per document to retrieve them back? some extra operations for
> retrieval, but much smaller index...
>
> Itamar.
>
>
> On 3/8/2010 11:54 PM, Erick Erickson wrote:
>
>> No, you can't do this with any existing analyzers I know of. Part
>> of the problem here is that there's no good generic way to KNOW
>> what a page and line are.
>>
>> Have you investigated payloads? I'm not sure that's a good fit for
>> this particular problem, but it might be worth investigating.
>>
>> Best
>> Erick
>>
>> On Tue, Aug 3, 2010 at 10:58 AM, arun r<arun.raj@gmail.com>  wrote:
>>
>>
>>
>>> hi all,
>>>            I am new to Lucene. I am trying to use Lucene to generate
>>> data for a document classifier. I need to generate wordno, lineno,
>>> pageno for each term/phrase. I was able to use SpanQuery/SpanNearQuery
>>> to get the wordno (span.start()) for the term/phrase. To get pageno
>>> and lineno, a custom Analyzer needs to be written ? Can the Analyzer
>>> be made to recognize and newline and page feed characters and keep
>>> track of lineno and pageno for the tokens ?
>>>
>>> Is it possible with existing Lucene Analyzer ?
>>>
>>> Thanks,
>>> Arun
>>>
>>> --
>>> Where there is a will, there is a way !
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00163630f6b7374580048cff5f79--

From java-user-return-46910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 04 14:05:49 2010
Return-Path: <java-user-return-46910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22467 invoked from network); 4 Aug 2010 14:05:46 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Aug 2010 14:05:46 -0000
Received: (qmail 7613 invoked by uid 500); 4 Aug 2010 14:05:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6133 invoked by uid 500); 4 Aug 2010 14:05:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6123 invoked by uid 99); 4 Aug 2010 14:05:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Aug 2010 14:05:38 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of arun.raj@gmail.com designates 209.85.212.176 as permitted sender)
Received: from [209.85.212.176] (HELO mail-px0-f176.google.com) (209.85.212.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Aug 2010 14:05:33 +0000
Received: by pxi11 with SMTP id 11so3625279pxi.35
        for <java-user@lucene.apache.org>; Wed, 04 Aug 2010 07:05:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=kGvHlKrCfvXPzdNBmhvHDimvLd29uSOdKlo+iVBQk/M=;
        b=rNoQZW6frSxhbRYF6iFaFYBTpLVHguVvYUAgA867wp76hSKxjA1KT9tATCVYdoB1Th
         ERQsm9beoxKQdfvBzfaaCNCD/aeqKKUl/c+4m7fKOsw9gHVbhWrdqqwcaPfA4hbO6ucz
         pcAtGv+XPIPD9k/9QblcH+VQGEjx9rNdDi7iQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=i1gmAv3CZb1dFkBB/vkBp/RJtn/BT/Ylt17YKVAUdimeYB6Wmd0oDhh0QOsToT+t9T
         srPgZcVApNOW0zi4EUGoyKj1ao7KRypf/0sOcO0ODVr5NSJ2TypwMvwJBmowRoXxS3P3
         R5xJ9+vaax1Ll9+44Zk7UCk81ALc1KPVNLctI=
Received: by 10.114.161.20 with SMTP id j20mr10662602wae.167.1280930712923; 
	Wed, 04 Aug 2010 07:05:12 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.220.203.130 with HTTP; Wed, 4 Aug 2010 07:04:52 -0700 (PDT)
In-Reply-To: <AANLkTinJvAmJZKut-SBB1rz6eVUXF5L+pezcfu9XEgFC@mail.gmail.com>
References: <AANLkTimW1YmfTjR5E51jai28Ys5jSYjMSoQOx-2u9qCT@mail.gmail.com> 
	<AANLkTikoQKq2veUPu7aMA7eYFFRi_Fd=GYaoBVX8ZQg7@mail.gmail.com> 
	<4C5927CE.7090609@code972.com> <AANLkTinJvAmJZKut-SBB1rz6eVUXF5L+pezcfu9XEgFC@mail.gmail.com>
From: arun r <arun.raj@gmail.com>
Date: Wed, 4 Aug 2010 10:04:52 -0400
Message-ID: <AANLkTikNFWJ=3bzHsOPRcb32oPrH+TLAKomSRBWodQQ8@mail.gmail.com>
Subject: Re: get wordno, lineno, pageno for term/phrase
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Thanks for your responses. In this case, retrieval time will be more
important than index size. Each document will be indexed separately,
and the data (wordno, lineno, pageno) will be extracted for certain
terms/phrases for each document and stored.

I define linebreak and pagebreak and add them to the text string.

int pageBreakAscii =3D 12;
String pageBreak =3D new Character ((char) pageBreakAscii).toString();
String lineBreak =3D System.getProperty("line.separator");

Thanks,
Arun

On Wed, Aug 4, 2010 at 9:25 AM, Erick Erickson <erickerickson@gmail.com> wr=
ote:
> It depends (TM). Yes, it would bloat the index. But nothing in the origin=
al
> post indicates
> that this is a concern. The index could be 10M or 100G, in one case it
> matters a lot
> and in the other it doesn't. It's also unclear whether query response tim=
e
> matters
> at all or whether this is some sort of batch process that can run overnig=
ht
> (or whatever).
>
> One could also store a very special field per document that contained all
> the meta-data
> one could care about. For instance, the offset of each line, page,
> paragraph, etc. That,
> combined with the offset data for the word, which is available via the sp=
an
> queries,
> could be what's needed.
>
> re-scanning the input stream has it's own costs as well, but perhaps they
> are the
> preferable ones, it all depends on the use-case.
>
> It seems like it's always a space/speed tradeoff......
>
> Best
> Erick
>
> On Wed, Aug 4, 2010 at 4:41 AM, Itamar Syn-Hershko <itamar@code972.com>wr=
ote:
>
>> Storing all that info per-token as payloads will bloat the index. Wouldn=
't
>> it be wiser to use a special token to mark page feed and end of paragrap=
h
>> (numbers of which could be then stored as payloads), and scan the token
>> stream per document to retrieve them back? some extra operations for
>> retrieval, but much smaller index...
>>
>> Itamar.
>>
>>
>> On 3/8/2010 11:54 PM, Erick Erickson wrote:
>>
>>> No, you can't do this with any existing analyzers I know of. Part
>>> of the problem here is that there's no good generic way to KNOW
>>> what a page and line are.
>>>
>>> Have you investigated payloads? I'm not sure that's a good fit for
>>> this particular problem, but it might be worth investigating.
>>>
>>> Best
>>> Erick
>>>
>>> On Tue, Aug 3, 2010 at 10:58 AM, arun r<arun.raj@gmail.com> =A0wrote:
>>>
>>>
>>>
>>>> hi all,
>>>> =A0 =A0 =A0 =A0 =A0 =A0I am new to Lucene. I am trying to use Lucene t=
o generate
>>>> data for a document classifier. I need to generate wordno, lineno,
>>>> pageno for each term/phrase. I was able to use SpanQuery/SpanNearQuery
>>>> to get the wordno (span.start()) for the term/phrase. To get pageno
>>>> and lineno, a custom Analyzer needs to be written ? Can the Analyzer
>>>> be made to recognize and newline and page feed characters and keep
>>>> track of lineno and pageno for the tokens ?
>>>>
>>>> Is it possible with existing Lucene Analyzer ?
>>>>
>>>> Thanks,
>>>> Arun
>>>>
>>>> --
>>>> Where there is a will, there is a way !
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>



--=20
Where there is a will, there is a way !

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 04 14:15:14 2010
Return-Path: <java-user-return-46911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30167 invoked from network); 4 Aug 2010 14:15:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Aug 2010 14:15:14 -0000
Received: (qmail 28093 invoked by uid 500); 4 Aug 2010 14:15:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27784 invoked by uid 500); 4 Aug 2010 14:15:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27776 invoked by uid 99); 4 Aug 2010 14:15:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Aug 2010 14:15:08 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [188.121.53.2] (HELO n1plout04-02.prod.ams1.secureserver.net) (188.121.53.2)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 04 Aug 2010 14:15:02 +0000
Received: (qmail 21259 invoked from network); 4 Aug 2010 14:14:40 -0000
Received: from unknown (94.159.150.226)
  by n1plout04-02.prod.ams1.secureserver.net (188.121.53.2) with ESMTP; 04 Aug 2010 14:14:40 -0000
Message-ID: <4C5975C4.7050909@code972.com>
Date: Wed, 04 Aug 2010 17:14:28 +0300
From: Itamar Syn-Hershko <itamar@code972.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.11) Gecko/20100711 Lightning/1.0b1 Thunderbird/3.0.6
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: get wordno, lineno, pageno for term/phrase
References: <AANLkTimW1YmfTjR5E51jai28Ys5jSYjMSoQOx-2u9qCT@mail.gmail.com> 	<AANLkTikoQKq2veUPu7aMA7eYFFRi_Fd=GYaoBVX8ZQg7@mail.gmail.com> 	<4C5927CE.7090609@code972.com> <AANLkTinJvAmJZKut-SBB1rz6eVUXF5L+pezcfu9XEgFC@mail.gmail.com> <AANLkTikNFWJ=3bzHsOPRcb32oPrH+TLAKomSRBWodQQ8@mail.gmail.com>
In-Reply-To: <AANLkTikNFWJ=3bzHsOPRcb32oPrH+TLAKomSRBWodQQ8@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

I quite liked the idea Erick brought up in his last response - using a 
special field for storing this data. See if you can define its structure 
in a way that would help you do that and save both performance and index 
size. Each term in it signaling lineno and pageno (term text is "p1", 
"p2"... and "p1l20", "p1l21" and so on), and its payload data containing 
the word offsets for this entity. I think that should work just fine.

wordno you should have from your analyzer (assuming your tokenizer 
doesn't skip words you don't want it to).

 > the data (wordno, lineno, pageno) will be extracted for certain 
terms/phrases for each document and stored.

This suggests this is not going to be done for all words in your stream. 
If so, perhaps you better use the good old payloads for all.

Itamar.

On 4/8/2010 5:04 PM, arun r wrote:
> Thanks for your responses. In this case, retrieval time will be more
> important than index size. Each document will be indexed separately,
> and the data (wordno, lineno, pageno) will be extracted for certain
> terms/phrases for each document and stored.
>
> I define linebreak and pagebreak and add them to the text string.
>
> int pageBreakAscii = 12;
> String pageBreak = new Character ((char) pageBreakAscii).toString();
> String lineBreak = System.getProperty("line.separator");
>
> Thanks,
> Arun
>
> On Wed, Aug 4, 2010 at 9:25 AM, Erick Erickson<erickerickson@gmail.com>  wrote:
>    
>> It depends (TM). Yes, it would bloat the index. But nothing in the original
>> post indicates
>> that this is a concern. The index could be 10M or 100G, in one case it
>> matters a lot
>> and in the other it doesn't. It's also unclear whether query response time
>> matters
>> at all or whether this is some sort of batch process that can run overnight
>> (or whatever).
>>
>> One could also store a very special field per document that contained all
>> the meta-data
>> one could care about. For instance, the offset of each line, page,
>> paragraph, etc. That,
>> combined with the offset data for the word, which is available via the span
>> queries,
>> could be what's needed.
>>
>> re-scanning the input stream has it's own costs as well, but perhaps they
>> are the
>> preferable ones, it all depends on the use-case.
>>
>> It seems like it's always a space/speed tradeoff......
>>
>> Best
>> Erick
>>
>> On Wed, Aug 4, 2010 at 4:41 AM, Itamar Syn-Hershko<itamar@code972.com>wrote:
>>
>>      
>>> Storing all that info per-token as payloads will bloat the index. Wouldn't
>>> it be wiser to use a special token to mark page feed and end of paragraph
>>> (numbers of which could be then stored as payloads), and scan the token
>>> stream per document to retrieve them back? some extra operations for
>>> retrieval, but much smaller index...
>>>
>>> Itamar.
>>>
>>>
>>> On 3/8/2010 11:54 PM, Erick Erickson wrote:
>>>
>>>        
>>>> No, you can't do this with any existing analyzers I know of. Part
>>>> of the problem here is that there's no good generic way to KNOW
>>>> what a page and line are.
>>>>
>>>> Have you investigated payloads? I'm not sure that's a good fit for
>>>> this particular problem, but it might be worth investigating.
>>>>
>>>> Best
>>>> Erick
>>>>
>>>> On Tue, Aug 3, 2010 at 10:58 AM, arun r<arun.raj@gmail.com>    wrote:
>>>>
>>>>
>>>>
>>>>          
>>>>> hi all,
>>>>>             I am new to Lucene. I am trying to use Lucene to generate
>>>>> data for a document classifier. I need to generate wordno, lineno,
>>>>> pageno for each term/phrase. I was able to use SpanQuery/SpanNearQuery
>>>>> to get the wordno (span.start()) for the term/phrase. To get pageno
>>>>> and lineno, a custom Analyzer needs to be written ? Can the Analyzer
>>>>> be made to recognize and newline and page feed characters and keep
>>>>> track of lineno and pageno for the tokens ?
>>>>>
>>>>> Is it possible with existing Lucene Analyzer ?
>>>>>
>>>>> Thanks,
>>>>> Arun
>>>>>
>>>>> --
>>>>> Where there is a will, there is a way !
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>            
>>>>
>>>>          
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>        
>>      
>
>
>    

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 04 21:46:59 2010
Return-Path: <java-user-return-46912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59656 invoked from network); 4 Aug 2010 21:46:59 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Aug 2010 21:46:59 -0000
Received: (qmail 19338 invoked by uid 500); 4 Aug 2010 21:46:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19238 invoked by uid 500); 4 Aug 2010 21:46:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19230 invoked by uid 99); 4 Aug 2010 21:46:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Aug 2010 21:46:56 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of brian@pontarelli.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Aug 2010 21:46:47 +0000
Received: by pvc21 with SMTP id 21so3983673pvc.35
        for <java-user@lucene.apache.org>; Wed, 04 Aug 2010 14:46:26 -0700 (PDT)
Received: by 10.114.74.3 with SMTP id w3mr11459562waa.3.1280958386232;
        Wed, 04 Aug 2010 14:46:26 -0700 (PDT)
Received: from [10.1.10.46] (c-76-120-42-168.hsd1.co.comcast.net [76.120.42.168])
        by mx.google.com with ESMTPS id d35sm16697539waa.9.2010.08.04.14.46.24
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 04 Aug 2010 14:46:25 -0700 (PDT)
From: Brian Pontarelli <brian@pontarelli.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: Boost and ordering based on most recently updated
Date: Wed, 4 Aug 2010 15:46:23 -0600
Message-Id: <566F260B-5B72-42F2-A547-E12A07281B01@pontarelli.com>
To: java-user@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1081)
X-Mailer: Apple Mail (2.1081)
X-Virus-Checked: Checked by ClamAV on apache.org

I have a situation where I'm using a Boost on documents to bump them up =
in the search results when a search has multiple documents with the same =
hits in the search query. However, it looks like if two or more =
documents have the same rank after the Boost is applied, the search =
results are ordered such that the first search result is the first =
document that was added to the index and the last result is the last =
document that was added or updated.

I want to change this so that the most recently updated document is =
always at the top of the search results. This would happen after the =
Boost is applied.

Anyone know how to do this?

Thanks,
-bp



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 04 23:48:31 2010
Return-Path: <java-user-return-46913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50594 invoked from network); 4 Aug 2010 23:48:31 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Aug 2010 23:48:31 -0000
Received: (qmail 42180 invoked by uid 500); 4 Aug 2010 23:48:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42123 invoked by uid 500); 4 Aug 2010 23:48:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42115 invoked by uid 99); 4 Aug 2010 23:48:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Aug 2010 23:48:28 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jayendra.patil@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Aug 2010 23:48:23 +0000
Received: by wyb35 with SMTP id 35so3497568wyb.35
        for <java-user@lucene.apache.org>; Wed, 04 Aug 2010 16:48:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=2lX5l1iX32K5lX+5t60h9VBPrwQEAMcXD0WjFKXs1CY=;
        b=B/AkuUTPyftCeWopSuaZiyXhrjTjbmE2I4eGGr2D7NSRctQD0/NH8dPpvswMmRmoGo
         aGsKN5A+FWEoyT8xXmu+jENNJ2N7WF4GSeC5W+Ni8TQJ85n9RurOTHBhBb77Tml6BZOW
         Nh98XBan3Xh8KwungsGRwG63OHYlDidOB1Wnc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=MxytIl+hj2L8DjiBCQRfSufVVRE20lF6iWBzluCfsa4EpG/8vb+ahr1mqJeTy1ahoG
         qR+/brd4RGbwQLY1Ofq270MbA39a12IzmY9zBxdyTxpcRxRPdVw1acfpULQa/b5HCuw3
         mcVLIRXVQErI/w1jmONwFtN3j32FL4C3bhPRc=
MIME-Version: 1.0
Received: by 10.216.2.195 with SMTP id 45mr2691208wef.106.1280965681615; Wed, 
	04 Aug 2010 16:48:01 -0700 (PDT)
Received: by 10.216.204.229 with HTTP; Wed, 4 Aug 2010 16:48:01 -0700 (PDT)
In-Reply-To: <566F260B-5B72-42F2-A547-E12A07281B01@pontarelli.com>
References: <566F260B-5B72-42F2-A547-E12A07281B01@pontarelli.com>
Date: Wed, 4 Aug 2010 19:48:01 -0400
Message-ID: <AANLkTinepNq7mm4LRWO1-Bv+LgkdMBAL5rZvqpZ5VWjT@mail.gmail.com>
Subject: Re: Boost and ordering based on most recently updated
From: jayendra patil <jayendra.patil@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364c75416c1312048d0810b7

--0016364c75416c1312048d0810b7
Content-Type: text/plain; charset=ISO-8859-1

you can probably try using the sort parameter with the primary sort being on
score and the secondary sort being on the recent update date.
e.g. sort=score desc, recentUpdateDate desc

So the recent update date would take affect in the group where the document
have same score.

Regards,
Jayendra

On Wed, Aug 4, 2010 at 5:46 PM, Brian Pontarelli <brian@pontarelli.com>wrote:

> I have a situation where I'm using a Boost on documents to bump them up in
> the search results when a search has multiple documents with the same hits
> in the search query. However, it looks like if two or more documents have
> the same rank after the Boost is applied, the search results are ordered
> such that the first search result is the first document that was added to
> the index and the last result is the last document that was added or
> updated.
>
> I want to change this so that the most recently updated document is always
> at the top of the search results. This would happen after the Boost is
> applied.
>
> Anyone know how to do this?
>
> Thanks,
> -bp
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016364c75416c1312048d0810b7--

From java-user-return-46914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 05 06:17:43 2010
Return-Path: <java-user-return-46914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97825 invoked from network); 5 Aug 2010 06:17:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Aug 2010 06:17:43 -0000
Received: (qmail 49776 invoked by uid 500); 5 Aug 2010 06:17:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49271 invoked by uid 500); 5 Aug 2010 06:17:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49263 invoked by uid 99); 5 Aug 2010 06:17:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Aug 2010 06:17:36 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of fancyerii@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Aug 2010 06:17:29 +0000
Received: by wyb35 with SMTP id 35so3842937wyb.35
        for <java-user@lucene.apache.org>; Wed, 04 Aug 2010 23:17:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=SgEGzLUI6a2qtG9juRx0Nz68ow/P2MQ8ixXsQ3DqPKY=;
        b=o2gLFkm3oztbXYS8hNIs6zimbBlnaTipuOK1QxVfU8/hjTOwcMRZTgzmRL5oyOjeIq
         qkT7hCpBDVvTsE19ioGiJprmqn7IgUxYFZcPXCcKOZw7lKnzlpI6VCPohmZa2TUEstnp
         6G3I014dt5UywpWBouwNeTTeDMdnJygbJUpAU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=TMOvA0CKpvkUXFWQoZ8WtbPenI7UNy4fQ1A6t6BlhjGSeHadiigczeBlUcvuDzN29/
         GdNaLpr1mZWLdQdFPPmxOk2npdUTbZEifLfxwuaEe7g7AoMf41uxD9zfrzUtAalhFDhW
         dFeA7ACLWAj/psa+7BR7MQVQ7d7/PXju6IX+4=
MIME-Version: 1.0
Received: by 10.216.7.129 with SMTP id 1mr5744405wep.90.1280989028688; Wed, 04 
	Aug 2010 23:17:08 -0700 (PDT)
Received: by 10.216.177.198 with HTTP; Wed, 4 Aug 2010 23:17:08 -0700 (PDT)
Date: Thu, 5 Aug 2010 14:17:08 +0800
Message-ID: <AANLkTi=TUOvAcMmvoEp5TL9K8P1qQmYsrJO-C93Pi1sG@mail.gmail.com>
Subject: how to adjust buffer size of reading file?
From: Li Li <fancyerii@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

I found the system call by java when reading file, the buffer size is
always 1024. Can I modify this value to reduce system call?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 05 07:38:15 2010
Return-Path: <java-user-return-46915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27738 invoked from network); 5 Aug 2010 07:38:15 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Aug 2010 07:38:15 -0000
Received: (qmail 93026 invoked by uid 500); 5 Aug 2010 07:38:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92533 invoked by uid 500); 5 Aug 2010 07:38:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92525 invoked by uid 99); 5 Aug 2010 07:38:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Aug 2010 07:38:08 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of fancyerii@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Aug 2010 07:38:00 +0000
Received: by wwb39 with SMTP id 39so2568715wwb.5
        for <java-user@lucene.apache.org>; Thu, 05 Aug 2010 00:37:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=cm0YTrL21BgbJLuUXffDqQklFwGo3yYNHe82lUY6YlU=;
        b=KNKTSz7IRjlOWsZgBhYh4JGdNEUIxS8SA6E2AGB9FRtfBChJX59rbWrVnRQhu8yRBl
         LR5gWJI0/uQUVtjiPj9FztVw0gvFU2S8VUdeRCeTgq+Qt1F13Fb3Ys1YybVaDKJgpNh1
         TgKpgbqfETr7vFHrTkmCiTxrxVEx4NN1wWMb4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=hfennGotI7cWOD6Avpu0S7fCtFl+g96MCmO/9FWuM5xe7ZFKuk6vY9M514KkFe4QbG
         Ms4OaF1PeqOG+pMbmXPPmJwyzWI4RyjeyTPIHEqgPQJRuVAbj2QKKfDZSke8TC6vkIWY
         YZiOE0WnFxq/KiwMvhl0r2fPly160n4fqnVKE=
MIME-Version: 1.0
Received: by 10.216.72.84 with SMTP id s62mr8739347wed.107.1280993856885; Thu, 
	05 Aug 2010 00:37:36 -0700 (PDT)
Received: by 10.216.177.198 with HTTP; Thu, 5 Aug 2010 00:37:36 -0700 (PDT)
Date: Thu, 5 Aug 2010 15:37:36 +0800
Message-ID: <AANLkTi=XdUyyZ3_BmZL34LE9NTcsVyawit=F-fgor=r8@mail.gmail.com>
Subject: will load fdx into memory make search faster?
From: Li Li <fancyerii@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

hi all
    we analyze system call of lucene and find that the fdx file is
always read when we get field values. In my application the fdt is
about 50GB and fdx is about 120MB. I think it may be benifit to load
fdx into memory just like tii. Anyone else tried this ?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 05 09:43:59 2010
Return-Path: <java-user-return-46916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69255 invoked from network); 5 Aug 2010 09:43:59 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Aug 2010 09:43:59 -0000
Received: (qmail 19243 invoked by uid 500); 5 Aug 2010 09:43:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18600 invoked by uid 500); 5 Aug 2010 09:43:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18591 invoked by uid 99); 5 Aug 2010 09:43:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Aug 2010 09:43:51 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Aug 2010 09:43:43 +0000
Received: by wwb39 with SMTP id 39so2655100wwb.5
        for <java-user@lucene.apache.org>; Thu, 05 Aug 2010 02:43:22 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.132.166 with SMTP id o38mr8952662wei.16.1281001402823; 
	Thu, 05 Aug 2010 02:43:22 -0700 (PDT)
Received: by 10.216.36.79 with HTTP; Thu, 5 Aug 2010 02:43:22 -0700 (PDT)
In-Reply-To: <AANLkTi=XdUyyZ3_BmZL34LE9NTcsVyawit=F-fgor=r8@mail.gmail.com>
References: <AANLkTi=XdUyyZ3_BmZL34LE9NTcsVyawit=F-fgor=r8@mail.gmail.com>
Date: Thu, 5 Aug 2010 05:43:22 -0400
Message-ID: <AANLkTi=j9+e4yTTtFCiRW=-Qwvp+302NHOufpRRSTSv9@mail.gmail.com>
Subject: Re: will load fdx into memory make search faster?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

This seems like a good idea.

One simple way to do it is to use FileSwitchDirectory, and host *.fdx
in RAMDirectory.  You can't use compound file format though.

Though, how many docs are you "typically" retrieving per search?

Mike

On Thu, Aug 5, 2010 at 3:37 AM, Li Li <fancyerii@gmail.com> wrote:
> hi all
> =A0 =A0we analyze system call of lucene and find that the fdx file is
> always read when we get field values. In my application the fdt is
> about 50GB and fdx is about 120MB. I think it may be benifit to load
> fdx into memory just like tii. Anyone else tried this ?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 05 09:50:46 2010
Return-Path: <java-user-return-46917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70439 invoked from network); 5 Aug 2010 09:50:46 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Aug 2010 09:50:46 -0000
Received: (qmail 25509 invoked by uid 500); 5 Aug 2010 09:50:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25106 invoked by uid 500); 5 Aug 2010 09:50:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25098 invoked by uid 99); 5 Aug 2010 09:50:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Aug 2010 09:50:40 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Aug 2010 09:50:32 +0000
Received: by wyb35 with SMTP id 35so4026779wyb.35
        for <java-user@lucene.apache.org>; Thu, 05 Aug 2010 02:50:11 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.164.141 with SMTP id c13mr8911526wel.83.1281001766405; 
	Thu, 05 Aug 2010 02:49:26 -0700 (PDT)
Received: by 10.216.36.79 with HTTP; Thu, 5 Aug 2010 02:49:26 -0700 (PDT)
In-Reply-To: <AANLkTi=TUOvAcMmvoEp5TL9K8P1qQmYsrJO-C93Pi1sG@mail.gmail.com>
References: <AANLkTi=TUOvAcMmvoEp5TL9K8P1qQmYsrJO-C93Pi1sG@mail.gmail.com>
Date: Thu, 5 Aug 2010 05:49:26 -0400
Message-ID: <AANLkTi=ymOohYd+UJxsLDcBK4YEvSEmP32ZqV+N2L--4@mail.gmail.com>
Subject: Re: how to adjust buffer size of reading file?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Which Directory impl do you use now?  EG MMapDir does no buffering in
javaland when reading.

You can make your own Directory impl, subclassing the one you use now,
and calling BufferedIndexInput.setBufferSize on every (certain?),
IndexInput/s returned from openInput?

Also, the low level API for opening a single segment does allow you to
specify the buffer size, but we've never punched this through to the
top API (IndexReader.open).

If you have performance numbers on difference buffer sizes please report back!

Mike

On Thu, Aug 5, 2010 at 2:17 AM, Li Li <fancyerii@gmail.com> wrote:
> I found the system call by java when reading file, the buffer size is
> always 1024. Can I modify this value to reduce system call?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 05 09:54:13 2010
Return-Path: <java-user-return-46918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71322 invoked from network); 5 Aug 2010 09:54:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Aug 2010 09:54:12 -0000
Received: (qmail 31315 invoked by uid 500); 5 Aug 2010 09:54:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31051 invoked by uid 500); 5 Aug 2010 09:54:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30862 invoked by uid 99); 5 Aug 2010 09:54:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Aug 2010 09:54:06 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of fancyerii@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Aug 2010 09:54:00 +0000
Received: by wwb39 with SMTP id 39so2662208wwb.5
        for <java-user@lucene.apache.org>; Thu, 05 Aug 2010 02:53:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=yikSww3sJvAq6piz2GVo5+bxMwSmIUPAfA47Mn4VOak=;
        b=eT11HBmPfucjtAmPf8IUZRYbhlGpk2q6GVY753L425Z4PA7BQO5oufdEB4qotSuSgL
         hJL5XttDeXSPN3DW+U/bbOCldSY0LXyOQwxecyEtZZ+fbnKpmgb6rJ+3gNoptY+Lya9v
         bFJbz4CiPDQSG9ze4AQC2aZvafinoGaEUG6gA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=cRdRyuwmKkO28q9oEs7RkEPw5A+FDM46Po2CBSz+vwRPVd5RozJ8TY0ti8x4xpQwxq
         nDxMrL2cwF6tGJSbXf7CIpItR2/iaJEDndkvZGmbZyyxTXnYgJ4obqHpkdyozt8fha9B
         Mfy2oR7runkydQIdjvs2ut8M4+ZsX1ymSrW+w=
MIME-Version: 1.0
Received: by 10.227.145.69 with SMTP id c5mr5398402wbv.168.1281002019855; Thu, 
	05 Aug 2010 02:53:39 -0700 (PDT)
Received: by 10.216.177.198 with HTTP; Thu, 5 Aug 2010 02:53:39 -0700 (PDT)
In-Reply-To: <AANLkTi=j9+e4yTTtFCiRW=-Qwvp+302NHOufpRRSTSv9@mail.gmail.com>
References: <AANLkTi=XdUyyZ3_BmZL34LE9NTcsVyawit=F-fgor=r8@mail.gmail.com>
	<AANLkTi=j9+e4yTTtFCiRW=-Qwvp+302NHOufpRRSTSv9@mail.gmail.com>
Date: Thu, 5 Aug 2010 17:53:39 +0800
Message-ID: <AANLkTi=GG_cuEYLmo1PNbRq55FAG5gfVvJSw4t2bUBYc@mail.gmail.com>
Subject: Re: will load fdx into memory make search faster?
From: Li Li <fancyerii@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

100 docs per query. Because we want to do collapse and rerank search result=
.

2010/8/5 Michael McCandless <lucene@mikemccandless.com>:
> This seems like a good idea.
>
> One simple way to do it is to use FileSwitchDirectory, and host *.fdx
> in RAMDirectory. =A0You can't use compound file format though.
>
> Though, how many docs are you "typically" retrieving per search?
>
> Mike
>
> On Thu, Aug 5, 2010 at 3:37 AM, Li Li <fancyerii@gmail.com> wrote:
>> hi all
>> =A0 =A0we analyze system call of lucene and find that the fdx file is
>> always read when we get field values. In my application the fdt is
>> about 50GB and fdx is about 120MB. I think it may be benifit to load
>> fdx into memory just like tii. Anyone else tried this ?
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 05 10:20:31 2010
Return-Path: <java-user-return-46919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84604 invoked from network); 5 Aug 2010 10:20:31 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Aug 2010 10:20:31 -0000
Received: (qmail 62989 invoked by uid 500); 5 Aug 2010 10:20:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62811 invoked by uid 500); 5 Aug 2010 10:20:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62800 invoked by uid 99); 5 Aug 2010 10:20:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Aug 2010 10:20:24 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Aug 2010 10:20:17 +0000
Received: by wwb39 with SMTP id 39so2680581wwb.5
        for <java-user@lucene.apache.org>; Thu, 05 Aug 2010 03:19:57 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.137.101 with SMTP id x79mr8901938wei.48.1281003596772; 
	Thu, 05 Aug 2010 03:19:56 -0700 (PDT)
Received: by 10.216.36.79 with HTTP; Thu, 5 Aug 2010 03:19:56 -0700 (PDT)
In-Reply-To: <AANLkTi=GG_cuEYLmo1PNbRq55FAG5gfVvJSw4t2bUBYc@mail.gmail.com>
References: <AANLkTi=XdUyyZ3_BmZL34LE9NTcsVyawit=F-fgor=r8@mail.gmail.com>
	<AANLkTi=j9+e4yTTtFCiRW=-Qwvp+302NHOufpRRSTSv9@mail.gmail.com>
	<AANLkTi=GG_cuEYLmo1PNbRq55FAG5gfVvJSw4t2bUBYc@mail.gmail.com>
Date: Thu, 5 Aug 2010 06:19:56 -0400
Message-ID: <AANLkTinF5HH-eB2=8L+AJGBSaJcnPshFrwP=WOjneMQp@mail.gmail.com>
Subject: Re: will load fdx into memory make search faster?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I see.

If you made deeper mods to Lucene you could hold this index in a
packed ints array (trunk only) and save some RAM.

Mike

On Thu, Aug 5, 2010 at 5:53 AM, Li Li <fancyerii@gmail.com> wrote:
> 100 docs per query. Because we want to do collapse and rerank search resu=
lt.
>
> 2010/8/5 Michael McCandless <lucene@mikemccandless.com>:
>> This seems like a good idea.
>>
>> One simple way to do it is to use FileSwitchDirectory, and host *.fdx
>> in RAMDirectory. =A0You can't use compound file format though.
>>
>> Though, how many docs are you "typically" retrieving per search?
>>
>> Mike
>>
>> On Thu, Aug 5, 2010 at 3:37 AM, Li Li <fancyerii@gmail.com> wrote:
>>> hi all
>>> =A0 =A0we analyze system call of lucene and find that the fdx file is
>>> always read when we get field values. In my application the fdt is
>>> about 50GB and fdx is about 120MB. I think it may be benifit to load
>>> fdx into memory just like tii. Anyone else tried this ?
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 05 10:53:31 2010
Return-Path: <java-user-return-46920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95063 invoked from network); 5 Aug 2010 10:53:31 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Aug 2010 10:53:31 -0000
Received: (qmail 8911 invoked by uid 500); 5 Aug 2010 10:53:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8723 invoked by uid 500); 5 Aug 2010 10:53:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8715 invoked by uid 99); 5 Aug 2010 10:53:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Aug 2010 10:53:25 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anujshahwork@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Aug 2010 10:53:19 +0000
Received: by iwn37 with SMTP id 37so71597iwn.35
        for <java-user@lucene.apache.org>; Thu, 05 Aug 2010 03:52:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=IdEYrckI6gSE5CoCikmqz85NAJXlA6BN+4L1boayciw=;
        b=kFVJsD5FbYjLljYex7P8ycP5UhT//q5saqTM8Ywv+7aRklFIXlPSYJN5a7CNIS++nv
         3lGB5OQTGFTOht0Vzn41XHWFja2B5S+/qR3kCPkpXkFrN2fUr4R2KlXwXAgRozURXIr5
         fDciuRIgmWoiAX/ScAlx94+449gXSDwvJshA4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=KDP2LMYAhzX+VLn2YRl2kDHMtH8rKzG+hTeTMQa9IHZkCJnjKliO5IczFsWQtV6d7t
         puX7IheU1mtCWaWAwKwxqfDhr3isOPcQTP9e2DLQT07A463UoZQsKVXEeclpwG0+6zm4
         hqNI5YTLXU0b/Zr6XPwJYlVjmCOe54y9fZi+Y=
MIME-Version: 1.0
Received: by 10.231.144.15 with SMTP id x15mr12137364ibu.73.1281005578158; 
	Thu, 05 Aug 2010 03:52:58 -0700 (PDT)
Received: by 10.231.199.73 with HTTP; Thu, 5 Aug 2010 03:52:58 -0700 (PDT)
In-Reply-To: <AANLkTimqbHCDm=+zAXDdr0N9UpoDOhj-B-kdL21wgBPG@mail.gmail.com>
References: <AANLkTimeF7QYLuS0K7ca6+tj=_2DSmhdzJQEr7iCAwyF@mail.gmail.com>
	<AANLkTin0JRJOoZ8wvGhBvknWftDhTZXy12E+vjUYk7qe@mail.gmail.com>
	<AANLkTim=rR5YMs=Wsd94z6xCLK5sKtb725TLqcbad2Mm@mail.gmail.com>
	<AANLkTikjOdNbynZJ7QjhyewdmNuAzoo9mzZt=eRDAEF7@mail.gmail.com>
	<AANLkTinaypTn0u4mmcF_Uanq=1XuUpkE1Dn-u-LmwRb9@mail.gmail.com>
	<AANLkTimqbHCDm=+zAXDdr0N9UpoDOhj-B-kdL21wgBPG@mail.gmail.com>
Date: Thu, 5 Aug 2010 11:52:58 +0100
Message-ID: <AANLkTikyqUmJNmYTeY-+gsrbyXej1fXqf7bfGRdPq=Xx@mail.gmail.com>
Subject: Re: Get fields from a Query object
From: Anuj Shah <anujshahwork@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6469b607105a6048d115adc

--0016e6469b607105a6048d115adc
Content-Type: text/plain; charset=ISO-8859-1

Having delved a bit more into the code it looks like every MultiTermQuery
descendant fails to implement the extractTerms method. This does make sense,
as it is not possible to list every term that satisfies a wildcard query.

I also notice that most Query classes including the MultiTermQuery's, have a
getField method. But, this is not part of any common interface or base
class. It would be beneficial to have a public extractFields method which
operates in the same way as extractTerms. Perhaps a feature request can be
raised for this.

I've had a go at using a regular expression on the query string, but that is
becoming extremely convoluted due to escaping, quotations and the default
fieldname.

My only other idea is a giant recursive method which will instanceof and
casting to re-curse the entire Boolean structure of a Query object.


Does anyone else have any other ideas?

Anuj




On Tue, Aug 3, 2010 at 9:49 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> Hmmmm. Assuming you called rewrite, I'm going to have to defer
> that one, I'm not familiar enough with how range queries operate.
>
> But what version of Lucene are you using?
>
> Sorry I can't be more help
> Erick
>
> On Tue, Aug 3, 2010 at 5:02 AM, Anuj Shah <anujshahwork@gmail.com> wrote:
>
> > Thanks, that does seem good in theory. I can get the field from each of
> the
> > terms and add them to a Set to de-dupe.
> >
> > However, in practice queries of the following nature seems to fail with
> an
> > UnsupportedOperationException:
> > field:a*
> > field:[a TO b]
> >
> > Delving into the code a bit I see the following in the Query class
> >  /**
> >   * Expert: adds all terms occurring in this query to the terms set. Only
> >   * works if this query is in its {@link #rewrite rewritten} form.
> >   *
> >   * @throws UnsupportedOperationException if this query is not yet
> > rewritten
> >   */
> >  public void extractTerms(Set<Term> terms) {
> >    // needs to be implemented by query subclasses
> >    throw new UnsupportedOperationException();
> >  }
> >
> > Does this imply that some concrete Query classes have not overridden this
> > method?
> >
> >
> >
> >
> >
> > On Mon, Aug 2, 2010 at 4:01 PM, Erick Erickson <erickerickson@gmail.com
> > >wrote:
> >
> > > Did you look at Query.extractTerms? I think that'll work for you.
> > > Note that the query must be rewritten, and that the set of terms will
> > > have duplicate fields. i.e. if you search field1:Erick +field1:James
> > > I expect you'll have two terms in the set that are on field1.
> > >
> > > Best
> > > Erick
> > >
> > > On Mon, Aug 2, 2010 at 8:16 AM, Anuj Shah <anujshahwork@gmail.com>
> > wrote:
> > >
> > > > My code has been given a query string, which we parse into the Query
> > > object
> > > > and would like to get a list of fields from.
> > > >
> > > > I'm assuming there exists a method to do so, as it seems like a
> useful
> > > > function. If not should I be parsing the string for fields myself.
> > > >
> > > > Anuj
> > > >
> > > >
> > > >
> > > >
> > > >
> > > > On Sun, Aug 1, 2010 at 2:21 AM, Erick Erickson <
> > erickerickson@gmail.com
> > > > >wrote:
> > > >
> > > > > Could you explain more about what you're trying to do? You're
> writing
> > > the
> > > > > query
> > > > > after all, so you probably already know what went into it.
> > > > >
> > > > > Which shows that I don't understand what you want to do at all.
> > > > >
> > > > > Best
> > > > > Erick
> > > > >
> > > > > On Sat, Jul 31, 2010 at 9:41 AM, Anuj Shah <anujshahwork@gmail.com
> >
> > > > wrote:
> > > > >
> > > > > > Hi,
> > > > > >
> > > > > > Is there a way to get all the fields involved in a query?
> > > > > >
> > > > > > Thanks
> > > > > >
> > > > > > Anuj
> > > > > >
> > > > >
> > > >
> > >
> >
>

--0016e6469b607105a6048d115adc--

From java-user-return-46921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 05 10:54:23 2010
Return-Path: <java-user-return-46921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95258 invoked from network); 5 Aug 2010 10:54:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Aug 2010 10:54:23 -0000
Received: (qmail 11084 invoked by uid 500); 5 Aug 2010 10:54:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10986 invoked by uid 500); 5 Aug 2010 10:54:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10975 invoked by uid 99); 5 Aug 2010 10:54:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Aug 2010 10:54:17 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anujshahwork@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Aug 2010 10:54:11 +0000
Received: by mail-iw0-f176.google.com with SMTP id 37so71597iwn.35
        for <java-user@lucene.apache.org>; Thu, 05 Aug 2010 03:53:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=10Qaj5WRwFzfESA/8kt+94+fYit1Jan6Bqk1sSuhakk=;
        b=iro8UIvjPXobrc38xaICFC0XMhqhbIv7NirRzvL/YlHV7lMXecuTmFwXgLSK3eDUi/
         xmkWGx0QEm/hPcy3B+/Ob6DU8KwGx212Jps1WNCaZmF39ypOk5KmEyZVzGBawZjDmVAm
         H4NO5HhsvPiOVdh3Jy9buh99VfJ6GktMYtKBM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=CDW557XW+2ZuvTEKj22yN2cYOeJS9dDvR4IQQEtcjX42ohqFp5DEUQjm5uZcX88F4b
         rwdDXB1ZH2QupMUZeRq1CtDyehLYKWDaoTqdLqW97WQcPO1sqYmyrH0jEOLLQW/VdK1M
         ghjTQLZuoOr6y+Bp6wWLF+jfE5NdAb/3Yd/pA=
MIME-Version: 1.0
Received: by 10.231.146.135 with SMTP id h7mr11957994ibv.149.1281005631233; 
	Thu, 05 Aug 2010 03:53:51 -0700 (PDT)
Received: by 10.231.199.73 with HTTP; Thu, 5 Aug 2010 03:53:51 -0700 (PDT)
In-Reply-To: <AANLkTikyqUmJNmYTeY-+gsrbyXej1fXqf7bfGRdPq=Xx@mail.gmail.com>
References: <AANLkTimeF7QYLuS0K7ca6+tj=_2DSmhdzJQEr7iCAwyF@mail.gmail.com>
	<AANLkTin0JRJOoZ8wvGhBvknWftDhTZXy12E+vjUYk7qe@mail.gmail.com>
	<AANLkTim=rR5YMs=Wsd94z6xCLK5sKtb725TLqcbad2Mm@mail.gmail.com>
	<AANLkTikjOdNbynZJ7QjhyewdmNuAzoo9mzZt=eRDAEF7@mail.gmail.com>
	<AANLkTinaypTn0u4mmcF_Uanq=1XuUpkE1Dn-u-LmwRb9@mail.gmail.com>
	<AANLkTimqbHCDm=+zAXDdr0N9UpoDOhj-B-kdL21wgBPG@mail.gmail.com>
	<AANLkTikyqUmJNmYTeY-+gsrbyXej1fXqf7bfGRdPq=Xx@mail.gmail.com>
Date: Thu, 5 Aug 2010 11:53:51 +0100
Message-ID: <AANLkTinbm05d29MGfXK7ZGW4uMzvhvjb14ki8=QXUrmr@mail.gmail.com>
Subject: Re: Get fields from a Query object
From: Anuj Shah <anujshahwork@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485e2eb209ae146048d115dac

--001485e2eb209ae146048d115dac
Content-Type: text/plain; charset=ISO-8859-1

Apologies Erick, missed your question.

I'm on version 3.0

On Thu, Aug 5, 2010 at 11:52 AM, Anuj Shah <anujshahwork@gmail.com> wrote:

> Having delved a bit more into the code it looks like every MultiTermQuery
> descendant fails to implement the extractTerms method. This does make sense,
> as it is not possible to list every term that satisfies a wildcard query.
>
> I also notice that most Query classes including the MultiTermQuery's, have
> a getField method. But, this is not part of any common interface or base
> class. It would be beneficial to have a public extractFields method which
> operates in the same way as extractTerms. Perhaps a feature request can be
> raised for this.
>
> I've had a go at using a regular expression on the query string, but that
> is becoming extremely convoluted due to escaping, quotations and the default
> fieldname.
>
> My only other idea is a giant recursive method which will instanceof and
> casting to re-curse the entire Boolean structure of a Query object.
>
>
> Does anyone else have any other ideas?
>
> Anuj
>
>
>
>
>
> On Tue, Aug 3, 2010 at 9:49 PM, Erick Erickson <erickerickson@gmail.com>wrote:
>
>> Hmmmm. Assuming you called rewrite, I'm going to have to defer
>> that one, I'm not familiar enough with how range queries operate.
>>
>> But what version of Lucene are you using?
>>
>> Sorry I can't be more help
>> Erick
>>
>> On Tue, Aug 3, 2010 at 5:02 AM, Anuj Shah <anujshahwork@gmail.com> wrote:
>>
>> > Thanks, that does seem good in theory. I can get the field from each of
>> the
>> > terms and add them to a Set to de-dupe.
>> >
>> > However, in practice queries of the following nature seems to fail with
>> an
>> > UnsupportedOperationException:
>> > field:a*
>> > field:[a TO b]
>> >
>> > Delving into the code a bit I see the following in the Query class
>> >  /**
>> >   * Expert: adds all terms occurring in this query to the terms set.
>> Only
>> >   * works if this query is in its {@link #rewrite rewritten} form.
>> >   *
>> >   * @throws UnsupportedOperationException if this query is not yet
>> > rewritten
>> >   */
>> >  public void extractTerms(Set<Term> terms) {
>> >    // needs to be implemented by query subclasses
>> >    throw new UnsupportedOperationException();
>> >  }
>> >
>> > Does this imply that some concrete Query classes have not overridden
>> this
>> > method?
>> >
>> >
>> >
>> >
>> >
>> > On Mon, Aug 2, 2010 at 4:01 PM, Erick Erickson <erickerickson@gmail.com
>> > >wrote:
>> >
>> > > Did you look at Query.extractTerms? I think that'll work for you.
>> > > Note that the query must be rewritten, and that the set of terms will
>> > > have duplicate fields. i.e. if you search field1:Erick +field1:James
>> > > I expect you'll have two terms in the set that are on field1.
>> > >
>> > > Best
>> > > Erick
>> > >
>> > > On Mon, Aug 2, 2010 at 8:16 AM, Anuj Shah <anujshahwork@gmail.com>
>> > wrote:
>> > >
>> > > > My code has been given a query string, which we parse into the Query
>> > > object
>> > > > and would like to get a list of fields from.
>> > > >
>> > > > I'm assuming there exists a method to do so, as it seems like a
>> useful
>> > > > function. If not should I be parsing the string for fields myself.
>> > > >
>> > > > Anuj
>> > > >
>> > > >
>> > > >
>> > > >
>> > > >
>> > > > On Sun, Aug 1, 2010 at 2:21 AM, Erick Erickson <
>> > erickerickson@gmail.com
>> > > > >wrote:
>> > > >
>> > > > > Could you explain more about what you're trying to do? You're
>> writing
>> > > the
>> > > > > query
>> > > > > after all, so you probably already know what went into it.
>> > > > >
>> > > > > Which shows that I don't understand what you want to do at all.
>> > > > >
>> > > > > Best
>> > > > > Erick
>> > > > >
>> > > > > On Sat, Jul 31, 2010 at 9:41 AM, Anuj Shah <
>> anujshahwork@gmail.com>
>> > > > wrote:
>> > > > >
>> > > > > > Hi,
>> > > > > >
>> > > > > > Is there a way to get all the fields involved in a query?
>> > > > > >
>> > > > > > Thanks
>> > > > > >
>> > > > > > Anuj
>> > > > > >
>> > > > >
>> > > >
>> > >
>> >
>>
>
>

--001485e2eb209ae146048d115dac--

From java-user-return-46922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 05 14:03:46 2010
Return-Path: <java-user-return-46922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75909 invoked from network); 5 Aug 2010 14:03:46 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Aug 2010 14:03:46 -0000
Received: (qmail 97204 invoked by uid 500); 5 Aug 2010 14:03:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96820 invoked by uid 500); 5 Aug 2010 14:03:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96812 invoked by uid 99); 5 Aug 2010 14:03:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Aug 2010 14:03:39 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.213.176] (HELO mail-yx0-f176.google.com) (209.85.213.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Aug 2010 14:03:35 +0000
Received: by yxm34 with SMTP id 34so3834755yxm.35
        for <java-user@lucene.apache.org>; Thu, 05 Aug 2010 07:03:14 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.67.4 with SMTP id p4mr12517091yba.28.1281016994158; Thu, 
	05 Aug 2010 07:03:14 -0700 (PDT)
Sender: felipe@goshme.com
Received: by 10.151.60.21 with HTTP; Thu, 5 Aug 2010 07:03:14 -0700 (PDT)
In-Reply-To: <AANLkTinepNq7mm4LRWO1-Bv+LgkdMBAL5rZvqpZ5VWjT@mail.gmail.com>
References: <566F260B-5B72-42F2-A547-E12A07281B01@pontarelli.com>
	<AANLkTinepNq7mm4LRWO1-Bv+LgkdMBAL5rZvqpZ5VWjT@mail.gmail.com>
Date: Thu, 5 Aug 2010 11:03:14 -0300
X-Google-Sender-Auth: t4njopmqfTHJKZgHIBo7RKu3Ipk
Message-ID: <AANLkTim8MU+PiJbCTu=AWA2u==XD5Ae7Aaihq0y3p_V9@mail.gmail.com>
Subject: Re: Boost and ordering based on most recently updated
From: Felipe Lobo <felipe@jusbrasil.com.br>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd47afae35aae048d1402d3

--000e0cd47afae35aae048d1402d3
Content-Type: text/plain; charset=ISO-8859-1

You have to check if the lucene normalization isn't approaching diferent
boosts to the same value.


2010/8/4 jayendra patil <jayendra.patil@gmail.com>

> you can probably try using the sort parameter with the primary sort being
> on
> score and the secondary sort being on the recent update date.
> e.g. sort=score desc, recentUpdateDate desc
>
> So the recent update date would take affect in the group where the document
> have same score.
>
> Regards,
> Jayendra
>
> On Wed, Aug 4, 2010 at 5:46 PM, Brian Pontarelli <brian@pontarelli.com
> >wrote:
>
> > I have a situation where I'm using a Boost on documents to bump them up
> in
> > the search results when a search has multiple documents with the same
> hits
> > in the search query. However, it looks like if two or more documents have
> > the same rank after the Boost is applied, the search results are ordered
> > such that the first search result is the first document that was added to
> > the index and the last result is the last document that was added or
> > updated.
> >
> > I want to change this so that the most recently updated document is
> always
> > at the top of the search results. This would happen after the Boost is
> > applied.
> >
> > Anyone know how to do this?
> >
> > Thanks,
> > -bp
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>



-- 
Felipe Lobo
www.jusbrasil.com.br

--000e0cd47afae35aae048d1402d3--

From java-user-return-46923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 05 16:08:49 2010
Return-Path: <java-user-return-46923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41604 invoked from network); 5 Aug 2010 16:08:49 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Aug 2010 16:08:49 -0000
Received: (qmail 10457 invoked by uid 500); 5 Aug 2010 16:08:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10334 invoked by uid 500); 5 Aug 2010 16:08:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10326 invoked by uid 99); 5 Aug 2010 16:08:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Aug 2010 16:08:46 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [132.249.20.114] (HELO postal.sdsc.edu) (132.249.20.114)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Aug 2010 16:08:38 +0000
Received: from mta.ad.sdsc.edu (mta.ad.sdsc.edu [132.249.69.68])
	by postal.sdsc.edu (8.11.7/8.11.7/server/80) with ESMTP id o75G8Fa05483;
	Thu, 5 Aug 2010 09:08:15 -0700 (PDT)
Received: from MBX.ad.sdsc.edu ([fe80::85f9:e068:7dc0:4fe0]) by
 mta.ad.sdsc.edu ([132.249.69.68]) with mapi; Thu, 5 Aug 2010 09:08:11 -0700
From: Christopher Condit <condit@sdsc.edu>
To: Yatir Ben Shlomo <yatirb@outbrain.com>
CC: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 5 Aug 2010 09:08:07 -0700
Subject: RE: Question to the writer of MultiPassIndexSplitter 
Thread-Topic: Question to the writer of MultiPassIndexSplitter 
Thread-Index: AcsprcAAxdQfmIBHRt28vGyPqTCY9wJ0/m6QADm6AdAAEx+2MA==
Message-ID: <BAFDED91EF7D5A43A30F897D6C94B1287D01C65308@MBX.ad.sdsc.edu>
References: <5BC8C17105C4C8428774FB93EC02F118010A376DE6A5@EXVMBX003-3.exch003intermedia.net>
 <BAFDED91EF7D5A43A30F897D6C94B1287D01C652EE@MBX.ad.sdsc.edu>
 <5BC8C17105C4C8428774FB93EC02F118010B163B2848@EXVMBX003-3.exch003intermedia.net>
In-Reply-To: <5BC8C17105C4C8428774FB93EC02F118010B163B2848@EXVMBX003-3.exch003intermedia.net>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

> > > I heard work is being done on re-writing MultiPassIndexSplitter so it
> > > will be a single pass and work quicker.

> > Because that was so slow I just wrote a utility class to create a list =
of N
> > IndexWriters and round robin documents to them as the index is created.
> > Then we use a ParallelMultiSearcher for retrieval. I can send you the c=
ode if
> > you're interested...

> Yes it will be great if you can send me this code..

Here's some code: http://pastie.org/1077591
We re-index everything offline from scratch. You'll need to modify the code=
 to support reopening and updating documents if that's a requirement...
-Chris




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 05 17:15:32 2010
Return-Path: <java-user-return-46924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69951 invoked from network); 5 Aug 2010 17:15:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Aug 2010 17:15:32 -0000
Received: (qmail 79921 invoked by uid 500); 5 Aug 2010 17:15:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79772 invoked by uid 500); 5 Aug 2010 17:15:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79764 invoked by uid 99); 5 Aug 2010 17:15:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Aug 2010 17:15:29 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [141.211.3.201] (HELO itcs-ehub-01.adsroot.itcs.umich.edu) (141.211.3.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Aug 2010 17:15:22 +0000
Received: from ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu ([141.211.3.233]) by
 itcs-ehub-01.adsroot.itcs.umich.edu ([141.211.3.201]) with mapi; Thu, 5 Aug
 2010 13:14:58 -0400
From: "Burton-West, Tom" <tburtonw@umich.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 5 Aug 2010 13:14:56 -0400
Subject: RE: Question to the writer of MultiPassIndexSplitter 
Thread-Topic: Question to the writer of MultiPassIndexSplitter 
Thread-Index: AcsprcAAxdQfmIBHRt28vGyPqTCY9wJ0/m6QADm6AdAAEx+2MAAC+azA
Message-ID: <A902805D9E8F66428EACF947DDA9840C0709A4DCCF@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
References: <5BC8C17105C4C8428774FB93EC02F118010A376DE6A5@EXVMBX003-3.exch003intermedia.net>
 <BAFDED91EF7D5A43A30F897D6C94B1287D01C652EE@MBX.ad.sdsc.edu>
 <5BC8C17105C4C8428774FB93EC02F118010B163B2848@EXVMBX003-3.exch003intermedia.net>
 <BAFDED91EF7D5A43A30F897D6C94B1287D01C65308@MBX.ad.sdsc.edu>
In-Reply-To: <BAFDED91EF7D5A43A30F897D6C94B1287D01C65308@MBX.ad.sdsc.edu>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

The work on MultiPassIndexSplitter is being done by Andrzej Bialecki, the c=
reator of Luke.
See http://lucene-eurocon.org/sessions-track1-day1.html#3

http://lucene-eurocon.org/slides/Munching-&-crunching-Lucene-index-post-pro=
cessing-and-applications_Andrzej-Bialecki.pdf

The slides say  "SinglePassSplitter work started, to be contributed soon."

You might try asking him directly or posting to the java-dev list.

Tom
www.hathitrust.org/blogs

-----Original Message-----
From: Christopher Condit [mailto:condit@sdsc.edu]=20
Sent: Thursday, August 05, 2010 12:08 PM
To: Yatir Ben Shlomo
Cc: java-user@lucene.apache.org
Subject: RE: Question to the writer of MultiPassIndexSplitter=20

> > > I heard work is being done on re-writing MultiPassIndexSplitter so it
> > > will be a single pass and work quicker.

> > Because that was so slow I just wrote a utility class to create a list =
of N
> > IndexWriters and round robin documents to them as the index is created.
> > Then we use a ParallelMultiSearcher for retrieval. I can send you the c=
ode if
> > you're interested...

> Yes it will be great if you can send me this code..

Here's some code: http://pastie.org/1077591
We re-index everything offline from scratch. You'll need to modify the code=
 to support reopening and updating documents if that's a requirement...
-Chris




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 06 10:08:40 2010
Return-Path: <java-user-return-46925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92290 invoked from network); 6 Aug 2010 10:08:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Aug 2010 10:08:40 -0000
Received: (qmail 62812 invoked by uid 500); 6 Aug 2010 10:08:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62262 invoked by uid 500); 6 Aug 2010 10:08:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62254 invoked by uid 99); 6 Aug 2010 10:08:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Aug 2010 10:08:33 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [205.134.252.10] (HELO gs15.inmotionhosting.com) (205.134.252.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Aug 2010 10:08:25 +0000
Received: from lc.tovek.cz ([85.70.78.129] helo=tovek.cz)
	by gs15.inmotionhosting.com with esmtpa (Exim 4.69)
	(envelope-from <splichal@tovek.cz>)
	id 1OhJnK-0004VZ-63
	for java-user@lucene.apache.org; Fri, 06 Aug 2010 03:04:54 -0700
X-Mimeole: Produced By Microsoft Exchange V6.5
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CB354F.3FD2659D"
x-cr-hashedpuzzle: BlBE D+gC EMtk Fj3c GhPm HFjt Hqud HzYR H+hj IZJ3 I2bI JYrG Jrgm JvOo JzO5 J+Ty;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{6648F148-81D5-4B30-AF00-5E01D08705EB};cwBwAGwAaQBjAGgAYQBsAEAAdABvAHYAZQBrAC4AYwB6AA==;Fri, 06 Aug 2010 10:07:57 GMT;QwBvAG4AcwB0AGEAbgB0ACAAcwBjAG8AcgBlACAAcQB1AGUAcgBpAGUAcwA=
x-cr-puzzleid: {6648F148-81D5-4B30-AF00-5E01D08705EB}
Content-class: urn:content-classes:message
Subject: Constant score queries
Date: Fri, 6 Aug 2010 12:07:57 +0200
Message-ID: <BC925230642C9B46B220ED9C1B04EC9489959D@ex-srv.tvkd.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Constant score queries
Thread-Index: Acs1Tz5s+T4Gg/1HTH6dxDKak1Rq9w==
From: =?iso-8859-2?B?qXBs7WNoYWwgSmn47Q==?= <splichal@tovek.cz>
To: <java-user@lucene.apache.org>
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - gs15.inmotionhosting.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - tovek.cz
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01CB354F.3FD2659D
Content-Type: text/plain;
	charset="iso-8859-2"
Content-Transfer-Encoding: quoted-printable

Hello,

=20

I am working with ConstantScoreQuery and ConstantScoreRangeQuery. Both =
shoud according to the description

return the value of their boost as score for all matching documents.

However I always get the score 1.0 and also in the =
TestConstantScoreRangeQuery. testBoost() method,

the boost is set to 100, but the test checks that the score is 1.0f.

=20

So how should the constant score queries work in real?=20

Thank you

=20

--

Ji=F8=ED =A9pl=EDchal

TOVEK, spol. s r.o.

splichal@tovek.cz

+420 606671930

=20

--

Ji=F8=ED =A9pl=EDchal

TOVEK, spol. s r.o.

splichal@tovek.cz <mailto:splichal@tovek.cz>=20

+420 606671930

=20


------_=_NextPart_001_01CB354F.3FD2659D--

From java-user-return-46926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 06 10:47:32 2010
Return-Path: <java-user-return-46926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5849 invoked from network); 6 Aug 2010 10:47:31 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Aug 2010 10:47:31 -0000
Received: (qmail 98230 invoked by uid 500); 6 Aug 2010 10:47:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97827 invoked by uid 500); 6 Aug 2010 10:47:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97818 invoked by uid 99); 6 Aug 2010 10:47:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Aug 2010 10:47:25 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Aug 2010 10:47:18 +0000
Received: by wyb35 with SMTP id 35so5713590wyb.35
        for <java-user@lucene.apache.org>; Fri, 06 Aug 2010 03:46:57 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.143.198 with SMTP id w6mr10303494wbu.124.1281091614710; 
	Fri, 06 Aug 2010 03:46:54 -0700 (PDT)
Received: by 10.216.36.79 with HTTP; Fri, 6 Aug 2010 03:46:54 -0700 (PDT)
In-Reply-To: <BC925230642C9B46B220ED9C1B04EC9489959D@ex-srv.tvkd.local>
References: <BC925230642C9B46B220ED9C1B04EC9489959D@ex-srv.tvkd.local>
Date: Fri, 6 Aug 2010 06:46:54 -0400
Message-ID: <AANLkTik6Y-YvfHg5r2V1Rsiob7GN7E7zB7HBsrf0C-VH@mail.gmail.com>
Subject: Re: Constant score queries
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-2
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

The score will be 1.0 even if the boost isn't, when you use
ConstantScore*Query as the sole top-level query.

The boost only impacts how much weight is associated with this query's
matches when it's a sub-query mixed in with other sub-queries.

EG if you make a BooleanQuery, and add ConstantScoreQuery as a SHOULD
clause, and then add something else, eg TermQuery, then if you change
the boost of the ConstantScoreQuery you should see that impact which
docs/scores are returned.

Mike

2010/8/6 =A9pl=EDchal Ji=F8=ED <splichal@tovek.cz>:
> Hello,
>
>
>
> I am working with ConstantScoreQuery and ConstantScoreRangeQuery. Both sh=
oud according to the description
>
> return the value of their boost as score for all matching documents.
>
> However I always get the score 1.0 and also in the TestConstantScoreRange=
Query. testBoost() method,
>
> the boost is set to 100, but the test checks that the score is 1.0f.
>
>
>
> So how should the constant score queries work in real?
>
> Thank you
>
>
>
> --
>
> Ji=F8=ED =A9pl=EDchal
>
> TOVEK, spol. s r.o.
>
> splichal@tovek.cz
>
> +420 606671930
>
>
>
> --
>
> Ji=F8=ED =A9pl=EDchal
>
> TOVEK, spol. s r.o.
>
> splichal@tovek.cz <mailto:splichal@tovek.cz>
>
> +420 606671930
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 06 11:15:55 2010
Return-Path: <java-user-return-46927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16335 invoked from network); 6 Aug 2010 11:15:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Aug 2010 11:15:55 -0000
Received: (qmail 21246 invoked by uid 500); 6 Aug 2010 11:15:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20927 invoked by uid 500); 6 Aug 2010 11:15:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20919 invoked by uid 99); 6 Aug 2010 11:15:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Aug 2010 11:15:48 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [205.134.252.10] (HELO gs15.inmotionhosting.com) (205.134.252.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Aug 2010 11:15:42 +0000
Received: from lc.tovek.cz ([85.70.78.129] helo=tovek.cz)
	by gs15.inmotionhosting.com with esmtpa (Exim 4.69)
	(envelope-from <splichal@tovek.cz>)
	id 1OhKqP-0004uW-UA
	for java-user@lucene.apache.org; Fri, 06 Aug 2010 04:12:11 -0700
X-Mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-2"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Constant score queries
Date: Fri, 6 Aug 2010 13:15:15 +0200
Message-ID: <BC925230642C9B46B220ED9C1B04EC9489959F@ex-srv.tvkd.local>
In-Reply-To: <AANLkTik6Y-YvfHg5r2V1Rsiob7GN7E7zB7HBsrf0C-VH@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Constant score queries
Thread-Index: Acs1VMh2C2P+7pFcRFu69XgAQUPDNwAA8FJg
References: <BC925230642C9B46B220ED9C1B04EC9489959D@ex-srv.tvkd.local> <AANLkTik6Y-YvfHg5r2V1Rsiob7GN7E7zB7HBsrf0C-VH@mail.gmail.com>
From: =?iso-8859-2?B?qXBs7WNoYWwgSmn47Q==?= <splichal@tovek.cz>
To: <java-user@lucene.apache.org>
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - gs15.inmotionhosting.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - tovek.cz

I see, thank you! This explains a lot.=20
Jiri

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: Friday, August 06, 2010 12:47 PM
To: java-user@lucene.apache.org
Subject: Re: Constant score queries

The score will be 1.0 even if the boost isn't, when you use
ConstantScore*Query as the sole top-level query.

The boost only impacts how much weight is associated with this query's
matches when it's a sub-query mixed in with other sub-queries.

EG if you make a BooleanQuery, and add ConstantScoreQuery as a SHOULD
clause, and then add something else, eg TermQuery, then if you change
the boost of the ConstantScoreQuery you should see that impact which
docs/scores are returned.

Mike

2010/8/6 =A9pl=EDchal Ji=F8=ED <splichal@tovek.cz>:
> Hello,
>
>
>
> I am working with ConstantScoreQuery and ConstantScoreRangeQuery. Both =
shoud according to the description
>
> return the value of their boost as score for all matching documents.
>
> However I always get the score 1.0 and also in the =
TestConstantScoreRangeQuery. testBoost() method,
>
> the boost is set to 100, but the test checks that the score is 1.0f.
>
>
>
> So how should the constant score queries work in real?
>
> Thank you
>
>
>
> --
>
> Ji=F8=ED =A9pl=EDchal
>
> TOVEK, spol. s r.o.
>
> splichal@tovek.cz
>
> +420 606671930
>
>
>
> --
>
> Ji=F8=ED =A9pl=EDchal
>
> TOVEK, spol. s r.o.
>
> splichal@tovek.cz <mailto:splichal@tovek.cz>
>
> +420 606671930
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 06 11:40:45 2010
Return-Path: <java-user-return-46928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22871 invoked from network); 6 Aug 2010 11:40:44 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Aug 2010 11:40:44 -0000
Received: (qmail 45376 invoked by uid 500); 6 Aug 2010 11:40:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44902 invoked by uid 500); 6 Aug 2010 11:40:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44893 invoked by uid 99); 6 Aug 2010 11:40:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Aug 2010 11:40:38 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [205.134.252.10] (HELO gs15.inmotionhosting.com) (205.134.252.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Aug 2010 11:40:30 +0000
Received: from lc.tovek.cz ([85.70.78.129] helo=tovek.cz)
	by gs15.inmotionhosting.com with esmtpa (Exim 4.69)
	(envelope-from <splichal@tovek.cz>)
	id 1OhLEQ-0003Vg-Il
	for java-user@lucene.apache.org; Fri, 06 Aug 2010 04:36:58 -0700
X-Mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-2"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Constant score queries
Date: Fri, 6 Aug 2010 13:40:04 +0200
Message-ID: <BC925230642C9B46B220ED9C1B04EC948995A1@ex-srv.tvkd.local>
In-Reply-To: <BC925230642C9B46B220ED9C1B04EC9489959F@ex-srv.tvkd.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Constant score queries
Thread-Index: Acs1VMh2C2P+7pFcRFu69XgAQUPDNwAA8FJgAADWvPA=
References: <BC925230642C9B46B220ED9C1B04EC9489959D@ex-srv.tvkd.local> <AANLkTik6Y-YvfHg5r2V1Rsiob7GN7E7zB7HBsrf0C-VH@mail.gmail.com> <BC925230642C9B46B220ED9C1B04EC9489959F@ex-srv.tvkd.local>
From: =?iso-8859-2?B?qXBs7WNoYWwgSmn47Q==?= <splichal@tovek.cz>
To: <java-user@lucene.apache.org>
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - gs15.inmotionhosting.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - tovek.cz
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

just one more question in order to understand how the score is computed:
Boost factor of queries is applied only for sub-queries? So if I change =
the=20
boost factor of any TopLevel query, the score will remain unchanged?

Jiri

-----Original Message-----
From: =A9pl=EDchal Ji=F8=ED [mailto:splichal@tovek.cz]=20
Sent: Friday, August 06, 2010 1:15 PM
To: java-user@lucene.apache.org
Subject: RE: Constant score queries

I see, thank you! This explains a lot.=20
Jiri

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: Friday, August 06, 2010 12:47 PM
To: java-user@lucene.apache.org
Subject: Re: Constant score queries

The score will be 1.0 even if the boost isn't, when you use
ConstantScore*Query as the sole top-level query.

The boost only impacts how much weight is associated with this query's
matches when it's a sub-query mixed in with other sub-queries.

EG if you make a BooleanQuery, and add ConstantScoreQuery as a SHOULD
clause, and then add something else, eg TermQuery, then if you change
the boost of the ConstantScoreQuery you should see that impact which
docs/scores are returned.

Mike

2010/8/6 =A9pl=EDchal Ji=F8=ED <splichal@tovek.cz>:
> Hello,
>
>
>
> I am working with ConstantScoreQuery and ConstantScoreRangeQuery. Both =
shoud according to the description
>
> return the value of their boost as score for all matching documents.
>
> However I always get the score 1.0 and also in the =
TestConstantScoreRangeQuery. testBoost() method,
>
> the boost is set to 100, but the test checks that the score is 1.0f.
>
>
>
> So how should the constant score queries work in real?
>
> Thank you
>
>
>
> --
>
> Ji=F8=ED =A9pl=EDchal
>
> TOVEK, spol. s r.o.
>
> splichal@tovek.cz
>
> +420 606671930
>
>
>
> --
>
> Ji=F8=ED =A9pl=EDchal
>
> TOVEK, spol. s r.o.
>
> splichal@tovek.cz <mailto:splichal@tovek.cz>
>
> +420 606671930
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 06 13:20:40 2010
Return-Path: <java-user-return-46929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77230 invoked from network); 6 Aug 2010 13:20:39 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Aug 2010 13:20:39 -0000
Received: (qmail 34267 invoked by uid 500); 6 Aug 2010 13:20:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33935 invoked by uid 500); 6 Aug 2010 13:20:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33927 invoked by uid 99); 6 Aug 2010 13:20:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Aug 2010 13:20:33 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Aug 2010 13:20:28 +0000
Received: by wyb35 with SMTP id 35so5901404wyb.35
        for <java-user@lucene.apache.org>; Fri, 06 Aug 2010 06:20:06 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.187.16 with SMTP id x16mr10578991wem.104.1281100806414; 
	Fri, 06 Aug 2010 06:20:06 -0700 (PDT)
Received: by 10.216.36.79 with HTTP; Fri, 6 Aug 2010 06:20:06 -0700 (PDT)
In-Reply-To: <BC925230642C9B46B220ED9C1B04EC948995A1@ex-srv.tvkd.local>
References: <BC925230642C9B46B220ED9C1B04EC9489959D@ex-srv.tvkd.local>
	<AANLkTik6Y-YvfHg5r2V1Rsiob7GN7E7zB7HBsrf0C-VH@mail.gmail.com>
	<BC925230642C9B46B220ED9C1B04EC9489959F@ex-srv.tvkd.local>
	<BC925230642C9B46B220ED9C1B04EC948995A1@ex-srv.tvkd.local>
Date: Fri, 6 Aug 2010 09:20:06 -0400
Message-ID: <AANLkTi=WUbnFbx2a_eyUEs=6-r_SJ6MmpMuS1ctBVWmR@mail.gmail.com>
Subject: Re: Constant score queries
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-2
Content-Transfer-Encoding: quoted-printable

I believe the top scores will be unchanged.

Even if they were changed, they'd all be changed by a constant factor,
and would not alter the order of your hits even if you sort by score.

Mike

2010/8/6 =A9pl=EDchal Ji=F8=ED <splichal@tovek.cz>:
> Hello,
>
> just one more question in order to understand how the score is computed:
> Boost factor of queries is applied only for sub-queries? So if I change t=
he
> boost factor of any TopLevel query, the score will remain unchanged?
>
> Jiri
>
> -----Original Message-----
> From: =A9pl=EDchal Ji=F8=ED [mailto:splichal@tovek.cz]
> Sent: Friday, August 06, 2010 1:15 PM
> To: java-user@lucene.apache.org
> Subject: RE: Constant score queries
>
> I see, thank you! This explains a lot.
> Jiri
>
> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: Friday, August 06, 2010 12:47 PM
> To: java-user@lucene.apache.org
> Subject: Re: Constant score queries
>
> The score will be 1.0 even if the boost isn't, when you use
> ConstantScore*Query as the sole top-level query.
>
> The boost only impacts how much weight is associated with this query's
> matches when it's a sub-query mixed in with other sub-queries.
>
> EG if you make a BooleanQuery, and add ConstantScoreQuery as a SHOULD
> clause, and then add something else, eg TermQuery, then if you change
> the boost of the ConstantScoreQuery you should see that impact which
> docs/scores are returned.
>
> Mike
>
> 2010/8/6 =A9pl=EDchal Ji=F8=ED <splichal@tovek.cz>:
>> Hello,
>>
>>
>>
>> I am working with ConstantScoreQuery and ConstantScoreRangeQuery. Both s=
houd according to the description
>>
>> return the value of their boost as score for all matching documents.
>>
>> However I always get the score 1.0 and also in the TestConstantScoreRang=
eQuery. testBoost() method,
>>
>> the boost is set to 100, but the test checks that the score is 1.0f.
>>
>>
>>
>> So how should the constant score queries work in real?
>>
>> Thank you
>>
>>
>>
>> --
>>
>> Ji=F8=ED =A9pl=EDchal
>>
>> TOVEK, spol. s r.o.
>>
>> splichal@tovek.cz
>>
>> +420 606671930
>>
>>
>>
>> --
>>
>> Ji=F8=ED =A9pl=EDchal
>>
>> TOVEK, spol. s r.o.
>>
>> splichal@tovek.cz <mailto:splichal@tovek.cz>
>>
>> +420 606671930
>>
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 06 14:00:52 2010
Return-Path: <java-user-return-46930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90089 invoked from network); 6 Aug 2010 14:00:52 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Aug 2010 14:00:52 -0000
Received: (qmail 76877 invoked by uid 500); 6 Aug 2010 14:00:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76335 invoked by uid 500); 6 Aug 2010 14:00:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76325 invoked by uid 99); 6 Aug 2010 14:00:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Aug 2010 14:00:46 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of prvs=827474353=michael.rosenauer@agfa.com designates 134.54.1.77 as permitted sender)
Received: from [134.54.1.77] (HELO mornm02-out.agfa.com) (134.54.1.77)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Aug 2010 14:00:38 +0000
X-IronPort-AV: E=Sophos;i="4.55,329,1278280800"; 
   d="scan'208,217";a="98046558"
Received: from morswa037.agfa.be (HELO morswa037.be.local) ([10.232.220.21])
  by mornm02-out.agfa.com with ESMTP; 06 Aug 2010 16:00:18 +0200
Subject: =?ISO-8859-1?Q?AUTO=3A_Michael_Rosenauer_ist_au=DFer_Haus_=28R=FCckkehr?=
 =?ISO-8859-1?Q?_am_23=2E08=2E2010=29?=
Auto-Submitted: auto-generated
From: michael.rosenauer@agfa.com
To: java-user@lucene.apache.org
Message-ID: <OF4C40212B.8649C238-ONC1257777.004CEE7B-C1257777.004CEE7B@agfa.com>
Date: Fri, 6 Aug 2010 16:00:17 +0200
X-$AssistMail: 1
MIME-Version: 1.0
Content-type: multipart/alternative; 
	Boundary="0__=4EBBFDE4DFDF68EB8f9e8a93df938690918c4EBBFDE4DFDF68EB"
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

--0__=4EBBFDE4DFDF68EB8f9e8a93df938690918c4EBBFDE4DFDF68EB
Content-type: text/plain; charset=ISO-8859-1
Content-transfer-encoding: quoted-printable



Ich bin bis 23.08.2010 abwesend

Vielen Dank f=FCr Ihre E-Mail.

Ich bin zur Zeit nicht im Haus. Sie k=F6nnen mich ab dem 23.08.2010 wie=
der
erreichen.

Thank you for your e-mail.

At the moment I am not in my office. From 08-23-2010 you will be able t=
o
contact me again.

Bitte wenden Sie sich an meine Vertretung / Please contact:

Herr / Mr. Michael Baumann
Telefon / Telephone: +49 (0)651-8247-0
mailto:michael.baumann@agfa.com

Michael Rosenauer



Hinweis: Dies ist eine automatische Antwort auf Ihre Nachricht  "Consta=
nt
score queries" gesendet am 2010-08-06 12:07:57.

Diese ist die einzige Benachrichtigung, die Sie empfangen werden, w=E4h=
rend
diese Person abwesend ist.=

--0__=4EBBFDE4DFDF68EB8f9e8a93df938690918c4EBBFDE4DFDF68EB--


From java-user-return-46931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 06 14:07:05 2010
Return-Path: <java-user-return-46931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2137 invoked from network); 6 Aug 2010 14:07:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Aug 2010 14:07:04 -0000
Received: (qmail 93725 invoked by uid 500); 6 Aug 2010 14:07:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93499 invoked by uid 500); 6 Aug 2010 14:06:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93461 invoked by uid 99); 6 Aug 2010 14:06:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Aug 2010 14:06:56 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received: from [140.211.11.9] (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 06 Aug 2010 14:06:56 +0000
Received: (qmail 1254 invoked by uid 99); 6 Aug 2010 14:06:35 -0000
Received: from localhost.apache.org (HELO [10.0.0.77]) (127.0.0.1)
  (smtp-auth username gsingers, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Aug 2010 14:06:35 +0000
From: Grant Ingersoll <gsingers@apache.org>
Content-Type: multipart/alternative; boundary=Apple-Mail-154-1183110
Subject: Fwd: Please Forward - Apache Retreat in Hursley, UK - 17-19th September
Date: Fri, 6 Aug 2010 10:06:17 -0400
References: <C8807A00.1A8AE%Chris.A.Mattmann@jpl.nasa.gov>
To: solr-user@lucene.apache.org,
 java-user@lucene.apache.org,
 user@mahout.apache.org
Message-Id: <309958FB-EE76-485A-AF95-2C1EE5F806E8@apache.org>
Mime-Version: 1.0 (Apple Message framework v1081)
X-Mailer: Apple Mail (2.1081)

--Apple-Mail-154-1183110
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii

FYI

Begin forwarded message:

> From: "Mattmann, Chris A (388J)" <chris.a.mattmann@jpl.nasa.gov>
> Date: August 5, 2010 5:24:00 PM EDT
> To: "dev@tika.apache.org" <dev@tika.apache.org>
> Subject: FW: Please Forward - Apache Retreat in Hursley, UK - 17-19th =
September
> Reply-To: dev@tika.apache.org
>=20
>=20
> =3D=3D=3D=3D=3D=3D=3D
> From: Nick Burch <nick@apache.org>
> To: retreats@apache.org
> Reply-To: retreats@apache.org
> Subject: Apache Retreat in Hursley, UK - 17-19th September
>=20
> Hi All
>=20
> Just a reminder that our next Apache Retreat will be in Hursley in the =
UK,
> from the 17th - 19th September. That's a little over a month away now!
>=20
> If you're an Apache Committer, we'd like to invite you to come for the
> whole weekend. We've booked Tipis to stay in(!), catering on-site, =
we've
> conference facilities sorted for running a BarCamp both days, we'll be
> doing lightning talks, socialising, hacking etc.
>=20
> If you're a user of Apache software, we'd love for you to come along =
in
> the day on the Saturday. We're running a BarCamp in the day, and it'll =
be
> great chance to learn more about new Apache projects, how the Apache =
Way
> leads us to develop software, as well as to talk about your current
> projects.
>=20
> More details on the event, and a link to the signup site are available
> from the ApacheCon wiki:
>        http://wiki.apache.org/apachecon/
> (Signup is available now for the whole retreat, and he barcamp signup =
will
> open on Monday)
>=20
> Also, if funding would be an issue to stop you attending, then the =
Travel
> Assistance Committee are accepting applications for assistance to =
attend
> until Wednesday 11th. More details, and a link to the applications =
site
> are available from:
>        http://www.apache.org/travel/
>=20
> Nick
> (On behalf of the retreat organising committee)
>=20
>=20
>=20
> ------ End of Forwarded Message


--Apple-Mail-154-1183110--

From java-user-return-46932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 06 17:38:23 2010
Return-Path: <java-user-return-46932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5059 invoked from network); 6 Aug 2010 17:38:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Aug 2010 17:38:23 -0000
Received: (qmail 28440 invoked by uid 500); 6 Aug 2010 17:38:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28330 invoked by uid 500); 6 Aug 2010 17:38:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28321 invoked by uid 99); 6 Aug 2010 17:38:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Aug 2010 17:38:20 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of arun.raj@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Aug 2010 17:38:13 +0000
Received: by vws2 with SMTP id 2so8982372vws.35
        for <java-user@lucene.apache.org>; Fri, 06 Aug 2010 10:37:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=uJEyJ0W3XBMHpvNqE6LNvDqiXN3lbu426R4q17sLzOo=;
        b=lGva2TwbkTm2PYiDNLRRiz7ZIL77yrbXRkCkZf9DsVoFuJReQXvhE5Dpo83+z7Q2pB
         mxY5BrhBHwsWxZbgyn0Ogcu2ZxjHwC4LnSbxKIvOTRsQqbFi+cDSUYl+fFo29IVnNA+Z
         NgyA2qyY3GIwhTrXgzUxLaxznwe13vZ5zwzBE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=s/b5J/J3dUfu9xQC4nVwcDEYcfCqaZHh/Ioa8XLskXzOxIrwQ91uvyazls3jSDwBrJ
         eNutwcDBvqSe9IqFvm1sD0wVz0t5mHu++HN/h+Tkx7LHqcWcj0kc8JwbvfxwB4O3xExz
         A+cSTQn1Z6HmHYUsie1OweoDVxWByud4/y4pA=
Received: by 10.220.60.133 with SMTP id p5mr8478476vch.169.1281116267234; Fri, 
	06 Aug 2010 10:37:47 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.220.125.19 with HTTP; Fri, 6 Aug 2010 10:37:27 -0700 (PDT)
In-Reply-To: <4C5975C4.7050909@code972.com>
References: <AANLkTimW1YmfTjR5E51jai28Ys5jSYjMSoQOx-2u9qCT@mail.gmail.com> 
	<AANLkTikoQKq2veUPu7aMA7eYFFRi_Fd=GYaoBVX8ZQg7@mail.gmail.com> 
	<4C5927CE.7090609@code972.com> <AANLkTinJvAmJZKut-SBB1rz6eVUXF5L+pezcfu9XEgFC@mail.gmail.com> 
	<AANLkTikNFWJ=3bzHsOPRcb32oPrH+TLAKomSRBWodQQ8@mail.gmail.com> 
	<4C5975C4.7050909@code972.com>
From: arun r <arun.raj@gmail.com>
Date: Fri, 6 Aug 2010 13:37:27 -0400
Message-ID: <AANLkTim+KGz0ocwYvq0i96yyjuK1NivxYtvmdtQn4bX8@mail.gmail.com>
Subject: Re: get wordno, lineno, pageno for term/phrase
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

I am trying to create a custom analyzer that will check for pagebreak
and linebreak and add the payload data for each term. In the custom
filter I have this code:

public boolean incrementToken() throws IOException {
		
		if(input.incrementToken())
		{
			if(termAtt.term().equals(pageBreak)){
				System.out.println("pageBreak");
				pageCount++;
			}
			else if(termAtt.term().equals(lineBreak))
			{
				System.out.println("lineBreak");
				lineCount++;
			}
			else
				addPayload(lineCount, pageCount);
				
			return true;
		}
		else		
			return false;
	}

where pageBreak and lineBreak is defined as :
int pageBreakAscii = 12;
String pageBreak = new Character ((char) pageBreakAscii).toString();
String lineBreak = System.getProperty("line.separator");

And am using the WhitespaceAnalyzer tokenstream, which ignores the
pageBreak and lineBreak. Is there a way to create a analyzer that will
ignore the pagebreak and linebreak characters during search, but give
access to them in  incrementToken() in the filter ?
	

-- 
Where there is a will, there is a way !

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 07 15:03:31 2010
Return-Path: <java-user-return-46933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67967 invoked from network); 7 Aug 2010 15:03:30 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Aug 2010 15:03:30 -0000
Received: (qmail 8253 invoked by uid 500); 7 Aug 2010 15:03:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8091 invoked by uid 500); 7 Aug 2010 15:03:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8083 invoked by uid 99); 7 Aug 2010 15:03:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Aug 2010 15:03:27 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of soby.thomas85@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Aug 2010 15:03:19 +0000
Received: by qwd7 with SMTP id 7so8523778qwd.35
        for <java-user@lucene.apache.org>; Sat, 07 Aug 2010 08:02:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=kTXLsLoJul837bQlq5uABSqCkIPRYzZKZHndojU4jkM=;
        b=UTGGi7AMNNZjST4zxwmktbtI98ByVR5OCfuscSTOM7yn3x6S70hfNZsaz1Ah3Bw4//
         hix15F1xqTdbSz1dq2cxqlilI1lAE6rF1pU9u+hbVx2Whb5Y9LtbbenZ1GO/2X4X26KB
         cbkVSNPeY1kQarDQzryRcB5Y5TdY7Czdq8KLs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=O/aLbwPPcE+98gIcFgDM+52XgMDrd4/4EHfLVd6Z1iEOfWJkasr8mrUDlJLE+yPpsZ
         sAG80/gaXQsJDWpF7kBEPfl7Q+D45d/gb6whsYaQr+Y/UAyEU3/NgVRPvmsJrb7TetzB
         KbZBAygXsjVWqlBfQHsl4OEE0/CJyOV+PGF74=
MIME-Version: 1.0
Received: by 10.224.104.4 with SMTP id m4mr7020751qao.76.1281193378787; Sat, 
	07 Aug 2010 08:02:58 -0700 (PDT)
Received: by 10.229.250.69 with HTTP; Sat, 7 Aug 2010 08:02:58 -0700 (PDT)
Date: Sat, 7 Aug 2010 16:02:58 +0100
Message-ID: <AANLkTi=M9A1GUHRAhPeYQaXhu9gTa9fjbnr7-8-Zik+z@mail.gmail.com>
Subject: Need help in understanding output of searcher.explain() function
From: Soby Thomas <soby.thomas85@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485ea3c1e3b3851048d3d1436
X-Virus-Checked: Checked by ClamAV on apache.org

--001485ea3c1e3b3851048d3d1436
Content-Type: text/plain; charset=ISO-8859-1

Hello Guys,

I trying to understand how lucene score is calculated. So 'm using the
searcher.explain() function. But the output it gives is really confusing for
me. Below are the details of the query that I gave and o/p it gave me

Query: *It is definitely a CES deal that will be over in Sep or Oct of this
year.*

*output*:
 0.022172567 = (MATCH) product of:
  0.07760398 = (MATCH) sum of:
    0.02287053 = (MATCH) weight(payload:ces in 550), product of:
      0.32539415 = queryWeight(payload:ces), product of:
        2.2491398 = idf(docFreq=157, maxDocs=551)
        0.14467494 = queryNorm
      0.07028562 = (MATCH) fieldWeight(payload:ces in 550), product of:
        1.0 = tf(termFreq(payload:ces)=1)
        2.2491398 = idf(docFreq=157, maxDocs=551)
        0.03125 = fieldNorm(field=payload, doc=550)
    0.05473345 = (MATCH) weight(payload:deal in 550), product of:
      0.23803486 = queryWeight(payload:deal), product of:
        1.6453081 = idf(docFreq=288, maxDocs=551)
        0.14467494 = queryNorm
      0.2299388 = (MATCH) fieldWeight(payload:deal in 550), product of:
        4.472136 = tf(termFreq(payload:deal)=20)
        1.6453081 = idf(docFreq=288, maxDocs=551)
        0.03125 = fieldNorm(field=payload, doc=550)
  0.2857143 = coord(2/7)

So can someone please help me to understand the output or suggest any link
that explains this output so that I will be grateful.

Regards
Soby

--001485ea3c1e3b3851048d3d1436--

From java-user-return-46934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 07 16:35:18 2010
Return-Path: <java-user-return-46934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15503 invoked from network); 7 Aug 2010 16:35:18 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Aug 2010 16:35:18 -0000
Received: (qmail 55324 invoked by uid 500); 7 Aug 2010 16:35:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55221 invoked by uid 500); 7 Aug 2010 16:35:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55213 invoked by uid 99); 7 Aug 2010 16:35:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Aug 2010 16:35:15 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Aug 2010 16:35:08 +0000
Received: by iwn35 with SMTP id 35so672158iwn.35
        for <java-user@lucene.apache.org>; Sat, 07 Aug 2010 09:34:46 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.170.13 with SMTP id b13mr15739986ibz.62.1281198884630; 
	Sat, 07 Aug 2010 09:34:44 -0700 (PDT)
Received: by 10.231.190.68 with HTTP; Sat, 7 Aug 2010 09:34:44 -0700 (PDT)
In-Reply-To: <AANLkTinYxW4r=mnW-nvRzgu7X7kE2jmEoYqrVAJdGXSk@mail.gmail.com>
References: <AANLkTi=6DWiryDozqHUWqsVgDtsZHHSpQ6O=AcezsJL8@mail.gmail.com>
	<AANLkTinYxW4r=mnW-nvRzgu7X7kE2jmEoYqrVAJdGXSk@mail.gmail.com>
Date: Sat, 7 Aug 2010 23:34:44 +0700
Message-ID: <AANLkTimgWjV40KBahQ27iLzzUZ03qZAOMG7bws2+0WDQ@mail.gmail.com>
Subject: Re: understanding lucene
From: Yakob <jacobian@opensuse-id.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

On 7/29/10, Erick Erickson <erickerickson@gmail.com> wrote:
> that code has waaaaay too much stuff in it for your first application.
> Hibernate
> is in there and it looks, from the description, like it tries to search your
> database.
> I'd *strongly* recommend that you don't go there.
>
> Try looking at
> http://wiki.apache.org/lucene-java/LuceneFAQ#How_do_I_start_using_Lucene.3F
> and this is a good place to start too.
>
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
> Best
> Erick
>

sory for late reply,I was thinking maybe you can give me a link to a
lucene application that I can deploy easily.it's just that many lucene
sample application I find on the internet had not been able to run
successfully when I tried due to many errors that happen. I just need
a sample application. that's all.

thanks.

-- 
http://jacobian.web.id

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 07 17:08:12 2010
Return-Path: <java-user-return-46935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25804 invoked from network); 7 Aug 2010 17:08:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Aug 2010 17:08:11 -0000
Received: (qmail 70814 invoked by uid 500); 7 Aug 2010 17:08:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70783 invoked by uid 500); 7 Aug 2010 17:08:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70775 invoked by uid 99); 7 Aug 2010 17:08:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Aug 2010 17:08:08 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jayendra.patil@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Aug 2010 17:08:02 +0000
Received: by wwb39 with SMTP id 39so140710wwb.5
        for <java-user@lucene.apache.org>; Sat, 07 Aug 2010 10:07:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=1eMq3kErvoAU3dnmZivIQghigz+oeYxjXapZDPzrD/Q=;
        b=FTUadXi2S8NE0KW9Gtem16gJpq5qyctFQLdUxgjINsU9fNjNJ8kiZ9YADxlsGW9AII
         snHCyXIUVqI0se7ZadGVJRMCwlEV3Ee/A9SET6VfXXVYBvQQ7c02jkk6ANr2l3mhk5td
         6UThio50oJlHWWvtrJ6iEnpFEAok/m0l+dGyY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=JRaRjz41YTuom+fqCWsgWeJPJCokLiJHniTKQ5kr7pP3yuRS25JvDVjrwe/p6qM4fl
         1ZlqG1+C7O0wnC6BBA8htZMhBo8PIPjY7fxKhjeDu6fZQltbIkspB1q2ri1GqLuF9VTy
         nV5JHVBNhHbqHvS3oGNiWFzOXWqkMFsqwzSdY=
MIME-Version: 1.0
Received: by 10.216.235.106 with SMTP id t84mr6448326weq.46.1281200860479; 
	Sat, 07 Aug 2010 10:07:40 -0700 (PDT)
Received: by 10.216.204.229 with HTTP; Sat, 7 Aug 2010 10:07:40 -0700 (PDT)
In-Reply-To: <AANLkTi=M9A1GUHRAhPeYQaXhu9gTa9fjbnr7-8-Zik+z@mail.gmail.com>
References: <AANLkTi=M9A1GUHRAhPeYQaXhu9gTa9fjbnr7-8-Zik+z@mail.gmail.com>
Date: Sat, 7 Aug 2010 13:07:40 -0400
Message-ID: <AANLkTi=JPph3X5TLkbJ_rax5qhEx6zRcgUiuNhQBF4xu@mail.gmail.com>
Subject: Re: Need help in understanding output of searcher.explain() function
From: jayendra patil <jayendra.patil@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00151757415e2cbff6048d3ed217

--00151757415e2cbff6048d3ed217
Content-Type: text/plain; charset=ISO-8859-1

Trying to put up an explanation :-

0.022172567 = (MATCH) product of:
 0.07760398 = (MATCH) sum of:
   0.02287053 = (MATCH) weight(payload:ces in 550), product of:
     0.32539415 = queryWeight(payload:ces), product of:
       2.2491398 = *idf*(docFreq=157, maxDocs=551)
       0.14467494 = queryNorm
     0.07028562 = (MATCH) fieldWeight(payload:ces in 550), product of:
       1.0 = *tf(*termFreq(payload:ces)=1)
       2.2491398 = *idf(*docFreq=157, maxDocs=551)
       0.03125 = *fieldNorm*(field=payload, doc=550)
   0.05473345 = (MATCH) weight(payload:deal in 550), product of:
     0.23803486 = queryWeight(payload:deal), product of:
       1.6453081 = *idf(*docFreq=288, maxDocs=551)
       0.14467494 = *queryNorm*
     0.2299388 = (MATCH) fieldWeight(payload:deal in 550), product of:
       4.472136 = tf(termFreq(payload:deal)=20)
       1.6453081 = idf(docFreq=288, maxDocs=551)
       0.03125 = fieldNorm(field=payload, doc=550)
 0.2857143 = coord(2/7)


   1. tf = term frequency in document = measure of how often a term appears
   in the document
      1.

      Implementation: sqrt(freq)

      Implication: the more frequent a term occurs in a document, the
      greater its score

      Rationale: documents which contains more of a term are generally more
      relevant
      2. idf = inverse document frequency = measure of how often the term
   appears across the index
      1.

      Implementation: log(numDocs/(docFreq+1)) + 1

      Implication: the greater the occurrence of a term in different
      documents, the lower its score

      Rationale: common terms are less important than uncommon ones
      3. coord = number of terms in the query that were found in the
   document
      1.

      Implementation: overlap / maxOverlap

      Implication: of the terms in the query, a document that contains more
      terms will have a higher score

      Rationale: self-explanatory
      4. fieldNorm
      1. lengthNorm = measure of the importance of a term according to the
      total number of terms in the field
         1. Implementation: 1/sqrt(numTerms)
         2. Implication: a term matched in fields with less terms have a
         higher score
         3. Rationale: a term in a field with less terms is more important
         than one with more
      2. boost (index) = boost of the field at index-time
         1. Index time boost specified. The fieldNorm value in the score
            would include the same.
         3. boost (query) = boost of the field at query-time
   5. queryNorm = normalization factor so that queries can be compared
      1. queryNorm is not related to the relevance of the document, but
      rather tries to make scores between different queries comparable. It is
      implemented as 1/sqrt(sumOfSquaredWeights)


When you are trying to search for Query: *It is definitely a CES deal that
will be over in Sep or Oct of this year.*

1. Lucene would try to match each word in our query in each field that you
have specified to be searched on e.g. payload in your case.
2. In your example, it found match only on ces and deal, hence only the two
items are displayed.
3. The number of matches in the particular field also contributes to
the 0.2857143 = coord(*2*/7) - 2 words out of 7
4. *idf*(docFreq=157, maxDocs=551) - specified the rarity. The docfreq
specifies the number of documents which have the word in the field with the
maxdocs represents the total number of documents.
5. *tf(*termFreq(payload:ces)=1) - Specifies the number of times it occurs
e.g. 1 in this case.
6. The Score for each field match is the product of the

0.02287053 = (MATCH) weight(payload:ces in 550), product of:

               Field boost and idf

0.32539415 = queryWeight(payload:ces), product of:

*      1 = boost (**The boost if your case seems to be 1 and hence is not
included in the score.**)*

       2.2491398 = idf(docFreq=157, maxDocs=551)

       0.14467494 = queryNorm

               term frequency, idf and field norm

0.07028562 = (MATCH) fieldWeight(payload:ces in 550), product of:

       1.0 = *tf(*termFreq(payload:ces)=1)

       2.2491398 = *idf(*docFreq=157, maxDocs=551)

       0.03125 = *fieldNorm*(field=payload, doc=550)



Regards,
Jayendra

On Sat, Aug 7, 2010 at 11:02 AM, Soby Thomas <soby.thomas85@gmail.com>wrote:

> Hello Guys,
>
> I trying to understand how lucene score is calculated. So 'm using the
> searcher.explain() function. But the output it gives is really confusing
> for
> me. Below are the details of the query that I gave and o/p it gave me
>
> Query: *It is definitely a CES deal that will be over in Sep or Oct of this
> year.*
>
> *output*:
>  0.022172567 = (MATCH) product of:
>  0.07760398 = (MATCH) sum of:
>    0.02287053 = (MATCH) weight(payload:ces in 550), product of:
>      0.32539415 = queryWeight(payload:ces), product of:
>        2.2491398 = idf(docFreq=157, maxDocs=551)
>        0.14467494 = queryNorm
>      0.07028562 = (MATCH) fieldWeight(payload:ces in 550), product of:
>        1.0 = tf(termFreq(payload:ces)=1)
>        2.2491398 = idf(docFreq=157, maxDocs=551)
>        0.03125 = fieldNorm(field=payload, doc=550)
>    0.05473345 = (MATCH) weight(payload:deal in 550), product of:
>      0.23803486 = queryWeight(payload:deal), product of:
>        1.6453081 = idf(docFreq=288, maxDocs=551)
>        0.14467494 = queryNorm
>      0.2299388 = (MATCH) fieldWeight(payload:deal in 550), product of:
>        4.472136 = tf(termFreq(payload:deal)=20)
>        1.6453081 = idf(docFreq=288, maxDocs=551)
>        0.03125 = fieldNorm(field=payload, doc=550)
>  0.2857143 = coord(2/7)
>
> So can someone please help me to understand the output or suggest any link
> that explains this output so that I will be grateful.
>
> Regards
> Soby
>

--00151757415e2cbff6048d3ed217--

From java-user-return-46936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 07 18:39:11 2010
Return-Path: <java-user-return-46936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59336 invoked from network); 7 Aug 2010 18:39:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Aug 2010 18:39:11 -0000
Received: (qmail 15086 invoked by uid 500); 7 Aug 2010 18:39:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15006 invoked by uid 500); 7 Aug 2010 18:39:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14998 invoked by uid 99); 7 Aug 2010 18:39:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Aug 2010 18:39:08 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of soby.thomas85@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Aug 2010 18:39:00 +0000
Received: by qwd7 with SMTP id 7so8688614qwd.35
        for <java-user@lucene.apache.org>; Sat, 07 Aug 2010 11:38:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=49T4haeGwptKVL6r9iDLhD3B/kz7LrURuUmY7GKO/28=;
        b=vYJ9xjMbPYAU6PVfRTk2GQULvjLLRVbMK5iuuJVbvLNyr4Bnu68LzAIzM2bYEtCkHu
         sNLMVzaS+hAlzwdMyHhUt4yTvoXdVKbVT0dv3YsVYKHBXT/7911tZs5vI26XL7Vw0/nH
         Lm2+Lt5OdRu6RQ4Pi91rpmkE3a2UGP3NHa5rQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=LlcFFcGJyug3ydazjsq9TBfgUtdJCxTr9XKgBo2iUEf+CsPXY+rsm0fKN9Dldz7Yam
         4CnC0+YoSCs43NC3sOnqjUyp9Eo1kDOZsOpeU1wTDwwb+aIGVIVGK9BiICRFUS/OVaGY
         mnIfcdOKqbdwhzloNgJ5vNq69W496jyROx8qs=
MIME-Version: 1.0
Received: by 10.229.245.16 with SMTP id ls16mr5826505qcb.130.1281206314737; 
	Sat, 07 Aug 2010 11:38:34 -0700 (PDT)
Received: by 10.229.250.69 with HTTP; Sat, 7 Aug 2010 11:38:34 -0700 (PDT)
In-Reply-To: <AANLkTi=JPph3X5TLkbJ_rax5qhEx6zRcgUiuNhQBF4xu@mail.gmail.com>
References: <AANLkTi=M9A1GUHRAhPeYQaXhu9gTa9fjbnr7-8-Zik+z@mail.gmail.com>
	<AANLkTi=JPph3X5TLkbJ_rax5qhEx6zRcgUiuNhQBF4xu@mail.gmail.com>
Date: Sat, 7 Aug 2010 19:38:34 +0100
Message-ID: <AANLkTi=CkfWZJijgpn5o1U8mpDVH2aS=ZQ=h-OTF6dpj@mail.gmail.com>
Subject: Re: Need help in understanding output of searcher.explain() function
From: Soby Thomas <soby.thomas85@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f5eb10462057048d4017cd
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f5eb10462057048d4017cd
Content-Type: text/plain; charset=ISO-8859-1

thanks Jayendra...it was really helpful

On Sat, Aug 7, 2010 at 6:07 PM, jayendra patil <jayendra.patil@gmail.com>wrote:

> Trying to put up an explanation :-
>
> 0.022172567 = (MATCH) product of:
>  0.07760398 = (MATCH) sum of:
>   0.02287053 = (MATCH) weight(payload:ces in 550), product of:
>     0.32539415 = queryWeight(payload:ces), product of:
>       2.2491398 = *idf*(docFreq=157, maxDocs=551)
>       0.14467494 = queryNorm
>     0.07028562 = (MATCH) fieldWeight(payload:ces in 550), product of:
>       1.0 = *tf(*termFreq(payload:ces)=1)
>       2.2491398 = *idf(*docFreq=157, maxDocs=551)
>       0.03125 = *fieldNorm*(field=payload, doc=550)
>   0.05473345 = (MATCH) weight(payload:deal in 550), product of:
>     0.23803486 = queryWeight(payload:deal), product of:
>       1.6453081 = *idf(*docFreq=288, maxDocs=551)
>       0.14467494 = *queryNorm*
>     0.2299388 = (MATCH) fieldWeight(payload:deal in 550), product of:
>       4.472136 = tf(termFreq(payload:deal)=20)
>       1.6453081 = idf(docFreq=288, maxDocs=551)
>       0.03125 = fieldNorm(field=payload, doc=550)
>  0.2857143 = coord(2/7)
>
>
>    1. tf = term frequency in document = measure of how often a term appears
>   in the document
>      1.
>
>      Implementation: sqrt(freq)
>
>      Implication: the more frequent a term occurs in a document, the
>      greater its score
>
>      Rationale: documents which contains more of a term are generally more
>      relevant
>      2. idf = inverse document frequency = measure of how often the term
>   appears across the index
>      1.
>
>      Implementation: log(numDocs/(docFreq+1)) + 1
>
>      Implication: the greater the occurrence of a term in different
>      documents, the lower its score
>
>      Rationale: common terms are less important than uncommon ones
>      3. coord = number of terms in the query that were found in the
>   document
>      1.
>
>      Implementation: overlap / maxOverlap
>
>      Implication: of the terms in the query, a document that contains more
>      terms will have a higher score
>
>      Rationale: self-explanatory
>      4. fieldNorm
>      1. lengthNorm = measure of the importance of a term according to the
>      total number of terms in the field
>         1. Implementation: 1/sqrt(numTerms)
>         2. Implication: a term matched in fields with less terms have a
>         higher score
>         3. Rationale: a term in a field with less terms is more important
>         than one with more
>      2. boost (index) = boost of the field at index-time
>         1. Index time boost specified. The fieldNorm value in the score
>            would include the same.
>         3. boost (query) = boost of the field at query-time
>   5. queryNorm = normalization factor so that queries can be compared
>      1. queryNorm is not related to the relevance of the document, but
>      rather tries to make scores between different queries comparable. It
> is
>      implemented as 1/sqrt(sumOfSquaredWeights)
>
>
> When you are trying to search for Query: *It is definitely a CES deal that
> will be over in Sep or Oct of this year.*
>
> 1. Lucene would try to match each word in our query in each field that you
> have specified to be searched on e.g. payload in your case.
> 2. In your example, it found match only on ces and deal, hence only the two
> items are displayed.
> 3. The number of matches in the particular field also contributes to
> the 0.2857143 = coord(*2*/7) - 2 words out of 7
> 4. *idf*(docFreq=157, maxDocs=551) - specified the rarity. The docfreq
> specifies the number of documents which have the word in the field with the
> maxdocs represents the total number of documents.
> 5. *tf(*termFreq(payload:ces)=1) - Specifies the number of times it occurs
> e.g. 1 in this case.
> 6. The Score for each field match is the product of the
>
> 0.02287053 = (MATCH) weight(payload:ces in 550), product of:
>
>                Field boost and idf
>
> 0.32539415 = queryWeight(payload:ces), product of:
>
> *      1 = boost (**The boost if your case seems to be 1 and hence is not
> included in the score.**)*
>
>       2.2491398 = idf(docFreq=157, maxDocs=551)
>
>       0.14467494 = queryNorm
>
>                term frequency, idf and field norm
>
> 0.07028562 = (MATCH) fieldWeight(payload:ces in 550), product of:
>
>       1.0 = *tf(*termFreq(payload:ces)=1)
>
>       2.2491398 = *idf(*docFreq=157, maxDocs=551)
>
>       0.03125 = *fieldNorm*(field=payload, doc=550)
>
>
>
> Regards,
> Jayendra
>
> On Sat, Aug 7, 2010 at 11:02 AM, Soby Thomas <soby.thomas85@gmail.com
> >wrote:
>
> > Hello Guys,
> >
> > I trying to understand how lucene score is calculated. So 'm using the
> > searcher.explain() function. But the output it gives is really confusing
> > for
> > me. Below are the details of the query that I gave and o/p it gave me
> >
> > Query: *It is definitely a CES deal that will be over in Sep or Oct of
> this
> > year.*
> >
> > *output*:
> >  0.022172567 = (MATCH) product of:
> >  0.07760398 = (MATCH) sum of:
> >    0.02287053 = (MATCH) weight(payload:ces in 550), product of:
> >      0.32539415 = queryWeight(payload:ces), product of:
> >        2.2491398 = idf(docFreq=157, maxDocs=551)
> >        0.14467494 = queryNorm
> >      0.07028562 = (MATCH) fieldWeight(payload:ces in 550), product of:
> >        1.0 = tf(termFreq(payload:ces)=1)
> >        2.2491398 = idf(docFreq=157, maxDocs=551)
> >        0.03125 = fieldNorm(field=payload, doc=550)
> >    0.05473345 = (MATCH) weight(payload:deal in 550), product of:
> >      0.23803486 = queryWeight(payload:deal), product of:
> >        1.6453081 = idf(docFreq=288, maxDocs=551)
> >        0.14467494 = queryNorm
> >      0.2299388 = (MATCH) fieldWeight(payload:deal in 550), product of:
> >        4.472136 = tf(termFreq(payload:deal)=20)
> >        1.6453081 = idf(docFreq=288, maxDocs=551)
> >        0.03125 = fieldNorm(field=payload, doc=550)
> >  0.2857143 = coord(2/7)
> >
> > So can someone please help me to understand the output or suggest any
> link
> > that explains this output so that I will be grateful.
> >
> > Regards
> > Soby
> >
>

--001485f5eb10462057048d4017cd--

From java-user-return-46937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 08 00:00:36 2010
Return-Path: <java-user-return-46937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64342 invoked from network); 8 Aug 2010 00:00:36 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Aug 2010 00:00:36 -0000
Received: (qmail 80364 invoked by uid 500); 8 Aug 2010 00:00:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80063 invoked by uid 500); 8 Aug 2010 00:00:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80055 invoked by uid 99); 8 Aug 2010 00:00:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Aug 2010 00:00:32 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of farhang@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Aug 2010 00:00:24 +0000
Received: by wyb35 with SMTP id 35so7633834wyb.35
        for <java-user@lucene.apache.org>; Sat, 07 Aug 2010 17:00:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=Q3eA6+QfGxbZOQEBbclav+Y1Cb/+9WFQy1eyva6vAU4=;
        b=KNL2xRcAIE1Yep1HE+btcxeFY4orOWUhQFuRCQ7lmVF/xHu5gqzRKztjpz6oUp92lQ
         k94IR8zsEgshLv9tVuxMMzaM+DMuC5/cGj17Q3aGFny/6ujA2fRdWNqBqs6LHhf9IQ4C
         6Bsa4gy7DM7hYV3Eh8e+SYynO30genx0B8B+8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=RdxV74FeSGZXbAB7X1tbDMRHgCOXYe2ezq9lXSZjr3MfwWSlrW3bllNRKBMoSCD8fR
         Y//GUKWxMiubBBjSEyB6nrmuYOrg2P+IDfAYPhHulg81JxvCRvmCFcPMKDPsP9auBiQx
         foSAFXKs07y2nQDddFbKc7KqcNVwQPohc1o0U=
MIME-Version: 1.0
Received: by 10.216.155.74 with SMTP id i52mr12198318wek.26.1281225603717; 
	Sat, 07 Aug 2010 17:00:03 -0700 (PDT)
Received: by 10.216.234.196 with HTTP; Sat, 7 Aug 2010 17:00:03 -0700 (PDT)
In-Reply-To: <AANLkTim+KGz0ocwYvq0i96yyjuK1NivxYtvmdtQn4bX8@mail.gmail.com>
References: <AANLkTimW1YmfTjR5E51jai28Ys5jSYjMSoQOx-2u9qCT@mail.gmail.com>
	<AANLkTikoQKq2veUPu7aMA7eYFFRi_Fd=GYaoBVX8ZQg7@mail.gmail.com>
	<4C5927CE.7090609@code972.com>
	<AANLkTinJvAmJZKut-SBB1rz6eVUXF5L+pezcfu9XEgFC@mail.gmail.com>
	<AANLkTikNFWJ=3bzHsOPRcb32oPrH+TLAKomSRBWodQQ8@mail.gmail.com>
	<4C5975C4.7050909@code972.com>
	<AANLkTim+KGz0ocwYvq0i96yyjuK1NivxYtvmdtQn4bX8@mail.gmail.com>
Date: Sat, 7 Aug 2010 18:00:03 -0600
Message-ID: <AANLkTikd_b8cFDxThFAYLNgHVt8PpSGmgQEyPWF8pQEr@mail.gmail.com>
Subject: Re: get wordno, lineno, pageno for term/phrase
From: Babak Farhang <farhang@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

How about making each line a separate document? You'd worry about
scaling it later (e.g. the 32-bit limitation in the number of docs in
an index)..

On Fri, Aug 6, 2010 at 11:37 AM, arun r <arun.raj@gmail.com> wrote:
> I am trying to create a custom analyzer that will check for pagebreak
> and linebreak and add the payload data for each term. In the custom
> filter I have this code:
>
> public boolean incrementToken() throws IOException {
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0if(input.incrementToken())
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0{
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0if(termAtt.term().equals(p=
ageBreak)){
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0System.out=
.println("pageBreak");
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0pageCount+=
+;
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0else if(termAtt.term().equ=
als(lineBreak))
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0{
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0System.out=
.println("lineBreak");
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0lineCount+=
+;
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0else
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0addPayload=
(lineCount, pageCount);
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0return true;
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0else
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0return false;
> =A0 =A0 =A0 =A0}
>
> where pageBreak and lineBreak is defined as :
> int pageBreakAscii =3D 12;
> String pageBreak =3D new Character ((char) pageBreakAscii).toString();
> String lineBreak =3D System.getProperty("line.separator");
>
> And am using the WhitespaceAnalyzer tokenstream, which ignores the
> pageBreak and lineBreak. Is there a way to create a analyzer that will
> ignore the pagebreak and linebreak characters during search, but give
> access to them in =A0incrementToken() in the filter ?
>
>
> --
> Where there is a will, there is a way !
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 08 03:50:36 2010
Return-Path: <java-user-return-46938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32971 invoked from network); 8 Aug 2010 03:50:36 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Aug 2010 03:50:36 -0000
Received: (qmail 70901 invoked by uid 500); 8 Aug 2010 03:50:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70381 invoked by uid 500); 8 Aug 2010 03:50:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70373 invoked by uid 99); 8 Aug 2010 03:50:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Aug 2010 03:50:29 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.re2.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 08 Aug 2010 03:50:23 +0000
Received: (qmail 40331 invoked by uid 60001); 8 Aug 2010 03:50:01 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1281239401; bh=CI50PT7sQPz3WwZ/I0CujP8RNJeULBen44q8a6gISk8=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=6S+IzTmhADW9gNpW2ZmBnucNocyLBbr2th7tnTBkgib2HHD1ZF4E7tfL0zD650tFfNByF56YDbWQGdcermjQCWaGKoBslGJcplRTC0kv/qCjijih+OjVIx9I6T+nneXD8u54+jXoGIHz/JV6KljEaU413V9ynfcgxq63JZNhd18=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=t6uV/JdTc8o7gUDcN30vx/vcNnmDesj6+HVzw23TCt3nnIrF/D5DzlWhs3BTcKtCVYD34gsDQ1r+8Ke+hk6pGwP6ZgRDnsKoSTHwLQC7dvcHHoGaet2NUoedl2v9y4jou5yZHU/Tfy8s3YXVoabnsge2X6wPKv2sku5qYMrNd1M=;
Message-ID: <631372.39592.qm@web50303.mail.re2.yahoo.com>
X-YMail-OSG: dxBVJT0VM1m2S367l4_4Gi6EYcWcCXKejfWtWZ3A_NEUD5_
 uihuJzcXkPmZJZHmkxzDSMVZxgThd9Nk_y9qCDLwG9339P9WUQ.o92Mw2R4G
 H13DX1EtJgbxrznKbaF3EXor90YEgyYpvnwa1RSZxvgnVex1TYjZz3wmQY1B
 nCHsbyiyQ4pqaV2ykZR7OzBSrTM4I0wStpWJO1z1k_YXMdqEOZzVpfhE6esN
 nwOgKKalNN.Ne1cDDhjCojZw_HvlomZyQZthVzY_VuM9dSXOiVdXMMHPkLQ6
 CLviSi.xZKVv6PFaGCGVpj.P0DfIgIEqJKIEDpE60KQ7aLdmaqMZIoyqbK3P
 jfpbgjHiRvWe7M1A1y5ESnotfdxU-
Received: from [74.73.6.27] by web50303.mail.re2.yahoo.com via HTTP; Sat, 07 Aug 2010 20:50:01 PDT
X-Mailer: YahooMailRC/459 YahooMailWebService/0.8.105.279950
References: <AANLkTimszB7MNXgG+8srxHDDAna59OqLmZzB5dh906yP@mail.gmail.com>
Date: Sat, 7 Aug 2010 20:50:01 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: LUCENE-2456 (A Column-Oriented Cassandra-Based Lucene Directory)
To: java-user@lucene.apache.org
In-Reply-To: <AANLkTimszB7MNXgG+8srxHDDAna59OqLmZzB5dh906yP@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Utku, you should ask via comments on =0Ahttps://issues.apache.org/jira/brow=
se/LUCENE-2453.=0AWhat happened with Lucandra?=0A=0AOtis=0A----=0ASematext =
:: http://sematext.com/ :: Solr - Lucene - Nutch=0ALucene ecosystem search =
:: http://search-lucene.com/=0A=0A=0A=0A----- Original Message ----=0A> Fro=
m: Utku Can Top=E7u <utku@topcu.gen.tr>=0A> To: java-user@lucene.apache.org=
=0A> Sent: Fri, July 23, 2010 12:59:36 PM=0A> Subject: LUCENE-2456 (A Colum=
n-Oriented Cassandra-Based Lucene Directory)=0A> =0A> Hi All,=0A> =0A> I'm =
trying to use the patch for testing, provided in the  issue.=0A> =0A> I dow=
nloaded the patch and the dependency *LUCENE-2453=0A> <https://issues.apach=
e.org/jira/browse/LUCENE-2453>*.=0A> I tested this  contribution against th=
e r942817 revision where I assume the=0A> contributor has  been using durin=
g the time of development. The tests seemed=0A> to  fail.=0A> =0A> This tim=
e, I updated the CassandraDirectory.java to match the new  Cassandra=0A> In=
terface. It unfortunately failed again.=0A> =0A> Has anyone here  have an i=
dea on which cassandra revision and lucene revision=0A> this patch  works  =
against?=0A> =0A> Best Regards,=0A> Utku=0A> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 08 04:45:15 2010
Return-Path: <java-user-return-46939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45788 invoked from network); 8 Aug 2010 04:45:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Aug 2010 04:45:14 -0000
Received: (qmail 81475 invoked by uid 500); 8 Aug 2010 04:45:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80956 invoked by uid 500); 8 Aug 2010 04:45:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80947 invoked by uid 99); 8 Aug 2010 04:45:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Aug 2010 04:45:08 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rpm0618@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Aug 2010 04:45:00 +0000
Received: by iwn35 with SMTP id 35so1154342iwn.35
        for <java-user@lucene.apache.org>; Sat, 07 Aug 2010 21:44:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=NPxMYFk5c/lsd0QZz3nmGfdlCs4tOLTWnt0ni0SG4Lc=;
        b=q7d4QzyJi8bWOgmLKb2mf569HfDdmTmtk1O3J0oQgAFVMZKhGxtcsU7B1P5OILBpTg
         6U3PPz6lXdB0YR4nkltJEd4c7v7h+novNKfqyHDShYOCmv9WDlr0vEj7RxWxybEkGkUf
         yNsML/8kRe1n1bGuDuztyXeayPCE5dQllgbcM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=Kq/9DFhdID8ZFsBqc9pmUWEPv/CW2FdS1bVbcmHa8ruHPaIxh4ETqkxIyNPjRU1k0Y
         QpUnExbJCOlta7G7RAgdr1sdnOhcJCQ48FT3AouQ1S0BuswvV4bjwJpqaP54fsFFnvQL
         OEFAqPPBaJnI2gudTfPUIrr2Qfx2Ode0Q93s8=
MIME-Version: 1.0
Received: by 10.231.33.140 with SMTP id h12mr16507117ibd.59.1281242679083; 
	Sat, 07 Aug 2010 21:44:39 -0700 (PDT)
Received: by 10.231.11.12 with HTTP; Sat, 7 Aug 2010 21:44:39 -0700 (PDT)
Date: Sun, 8 Aug 2010 00:44:39 -0400
Message-ID: <AANLkTin-QQJxfRXF6+=OxxYEDA8wf9XF-OfSd52fWCWX@mail.gmail.com>
Subject: Query Match Count
From: Ryan McV <rpm0618@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0022152d5f05c203e5048d488ede
X-Virus-Checked: Checked by ClamAV on apache.org

--0022152d5f05c203e5048d488ede
Content-Type: text/plain; charset=ISO-8859-1

Hello All,

Is there a way to count the number of times a query matched in a particular
document?

For example, say we created a document that had the string "cheese cheese
cheese cheese" in the field that is being searched.
I would like to know that the query "cheese" matched four times in that
particular document. Is there a way to do this?

BTW, I am new to Lucene, so if I have any misconceptions that are apparent
please feel free to correct me.

Thanks,
Ryan

--0022152d5f05c203e5048d488ede--

From java-user-return-46940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 08 04:47:10 2010
Return-Path: <java-user-return-46940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45962 invoked from network); 8 Aug 2010 04:47:10 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Aug 2010 04:47:10 -0000
Received: (qmail 83599 invoked by uid 500); 8 Aug 2010 04:47:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83359 invoked by uid 500); 8 Aug 2010 04:47:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83351 invoked by uid 99); 8 Aug 2010 04:47:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Aug 2010 04:47:04 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of arun.raj@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Aug 2010 04:46:57 +0000
Received: by qwd7 with SMTP id 7so9016341qwd.35
        for <java-user@lucene.apache.org>; Sat, 07 Aug 2010 21:46:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=fBxlVfZAItmS148FaZN7PsrYjSPJPHdTw59p+XC0IoI=;
        b=Fpxqq1OxRnXx55+W5GALVXOf5GRhOGOo5S0IW3ZTSOpzpMBC5mBL5lCaJoMuc1FZlC
         nprZAxZXh4WDSP7bmcbGAvCeIUMXSLmXjOohvDyrXpyd8czsAISHuS6v0sVeS2qgAJ+b
         DDvgfHqzNDM8r/QC3Ir/LAT664DGvSlbCjGUw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=Ipcmsq7zuLj9isvVwxh1rlT3X2BznL6UAeAZy+JkWvzY2c5B8m5f8xEjc5IZ6icvnc
         iK4wFzRH7YZ0+bvrbcfbBx7fYzWU4Tz/5XvaaUxOoOTXz8th48Xv8hch+Nu6ptnuFk6O
         GMlEA4mcU4gdE5kFHDklRI2n4keH0z3o4Ngb4=
Received: by 10.220.158.9 with SMTP id d9mr9029153vcx.250.1281242797174; Sat, 
	07 Aug 2010 21:46:37 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.220.125.19 with HTTP; Sat, 7 Aug 2010 21:46:17 -0700 (PDT)
In-Reply-To: <AANLkTikd_b8cFDxThFAYLNgHVt8PpSGmgQEyPWF8pQEr@mail.gmail.com>
References: <AANLkTimW1YmfTjR5E51jai28Ys5jSYjMSoQOx-2u9qCT@mail.gmail.com> 
	<AANLkTikoQKq2veUPu7aMA7eYFFRi_Fd=GYaoBVX8ZQg7@mail.gmail.com> 
	<4C5927CE.7090609@code972.com> <AANLkTinJvAmJZKut-SBB1rz6eVUXF5L+pezcfu9XEgFC@mail.gmail.com> 
	<AANLkTikNFWJ=3bzHsOPRcb32oPrH+TLAKomSRBWodQQ8@mail.gmail.com> 
	<4C5975C4.7050909@code972.com> <AANLkTim+KGz0ocwYvq0i96yyjuK1NivxYtvmdtQn4bX8@mail.gmail.com> 
	<AANLkTikd_b8cFDxThFAYLNgHVt8PpSGmgQEyPWF8pQEr@mail.gmail.com>
From: arun r <arun.raj@gmail.com>
Date: Sun, 8 Aug 2010 00:46:17 -0400
Message-ID: <AANLkTi=XG3EfdT-hX5ENB-3AHcYnTzPDTWGvxxaJLyzJ@mail.gmail.com>
Subject: Re: get wordno, lineno, pageno for term/phrase
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

I tried putting each page as a document, if the phrase is spread
across two pages, then the span search does not capture it. Is there a
work around for this ?

On Sat, Aug 7, 2010 at 8:00 PM, Babak Farhang <farhang@gmail.com> wrote:
> How about making each line a separate document? You'd worry about
> scaling it later (e.g. the 32-bit limitation in the number of docs in
> an index)..
>

-- 
Where there is a will, there is a way !

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 08 09:11:42 2010
Return-Path: <java-user-return-46941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38382 invoked from network); 8 Aug 2010 09:11:42 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Aug 2010 09:11:42 -0000
Received: (qmail 41355 invoked by uid 500); 8 Aug 2010 09:11:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40972 invoked by uid 500); 8 Aug 2010 09:11:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40964 invoked by uid 99); 8 Aug 2010 09:11:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Aug 2010 09:11:35 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Aug 2010 09:11:29 +0000
Received: by iwn35 with SMTP id 35so1301109iwn.35
        for <java-user@lucene.apache.org>; Sun, 08 Aug 2010 02:11:08 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.149.80 with SMTP id s16mr17133444ibv.81.1281258667835; 
	Sun, 08 Aug 2010 02:11:07 -0700 (PDT)
Received: by 10.231.190.68 with HTTP; Sun, 8 Aug 2010 02:11:07 -0700 (PDT)
In-Reply-To: <AANLkTi=6DWiryDozqHUWqsVgDtsZHHSpQ6O=AcezsJL8@mail.gmail.com>
References: <AANLkTi=6DWiryDozqHUWqsVgDtsZHHSpQ6O=AcezsJL8@mail.gmail.com>
Date: Sun, 8 Aug 2010 16:11:07 +0700
Message-ID: <AANLkTi=Tt5-u4P+TfXA6=pfWeTPbGn5Di6ADi05Rg_K1@mail.gmail.com>
Subject: Re: understanding lucene
From: Yakob <jacobian@opensuse-id.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

ok I had tried to run some sample lucene application I found on the
internet such this one from

http://javatechniques.com/blog/lucene-in-memory-text-search-example/

and this is the source code, I put it in pastebin so it will be easier to edit.

http://pastebin.ca/1913109

but still when I tried to run it using --deprecated option I ran into
some errors that made me difficult to solve it. the errors is this.

C:\Users\Raden\Documents\lucene\lucenedd>javac -Xlint:deprecation InMemoryExampl
e.java
InMemoryExample.java:7: warning: [deprecation] org.apache.lucene.search.Hits in
org.apache.lucene.search has been deprecated
import org.apache.lucene.search.Hits;
                               ^
InMemoryExample.java:29: warning: [deprecation] IndexWriter(org.apache.lucene.st
ore.Directory,org.apache.lucene.analysis.Analyzer,boolean) in org.apache.lucene.
index.IndexWriter has been deprecated
                new IndexWriter(idx, new StandardAnalyzer(), true);
                ^
InMemoryExample.java:82: cannot find symbol
symbol  : method unIndexed(java.lang.String,java.lang.String)
location: class org.apache.lucene.document.Field
        doc.add(Field.UnIndexed("title", title));
                     ^
InMemoryExample.java:89: cannot find symbol
symbol  : method text(java.lang.String,java.io.StringReader)
location: class org.apache.lucene.document.Field
        doc.add(Field.Text("content", new StringReader(content)));
                     ^
InMemoryExample.java:101: parse(java.lang.String) in org.apache.lucene.queryPars
er.QueryParser cannot be applied to (java.lang.String,java.lang.String,org.apach
e.lucene.analysis.standard.StandardAnalyzer)
        Query query = QueryParser.parse(
                                 ^
InMemoryExample.java:105: warning: [deprecation] org.apache.lucene.search.Hits i
n org.apache.lucene.search has been deprecated
        Hits hits = searcher.search(query);
        ^
InMemoryExample.java:105: warning: [deprecation] search(org.apache.lucene.search
.Query) in org.apache.lucene.search.Searcher has been deprecated
        Hits hits = searcher.search(query);
                            ^
3 errors
4 warnings

I use deprecated option because there is some java class that's
already deprecated. but still there is some errors.

I was just wondering if I can get any tips of how to fix this errors
or else maybe I can get a link to other working lucene sample program.
because it's a bit hard for me to learn lucene if I don't have any
working program based on lucene.

any help would be greatly appreciated.
-- 
http://jacobian.web.id

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 08 09:22:58 2010
Return-Path: <java-user-return-46942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42735 invoked from network); 8 Aug 2010 09:22:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Aug 2010 09:22:57 -0000
Received: (qmail 48903 invoked by uid 500); 8 Aug 2010 09:22:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48656 invoked by uid 500); 8 Aug 2010 09:22:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48648 invoked by uid 99); 8 Aug 2010 09:22:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Aug 2010 09:22:52 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Aug 2010 09:22:47 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 3B3E9D36005
	for <java-user@lucene.apache.org>; Sun,  8 Aug 2010 11:22:23 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 8AUfVgFph78L for <java-user@lucene.apache.org>;
	Sun,  8 Aug 2010 11:22:06 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 49512D36003
	for <java-user@lucene.apache.org>; Sun,  8 Aug 2010 11:22:06 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTi=6DWiryDozqHUWqsVgDtsZHHSpQ6O=AcezsJL8@mail.gmail.com> <AANLkTi=Tt5-u4P+TfXA6=pfWeTPbGn5Di6ADi05Rg_K1@mail.gmail.com>
In-Reply-To: <AANLkTi=Tt5-u4P+TfXA6=pfWeTPbGn5Di6ADi05Rg_K1@mail.gmail.com>
Subject: RE: understanding lucene
Date: Sun, 8 Aug 2010 11:23:10 +0200
Message-ID: <008a01cb36db$52061860$f6124920$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQFWpAYxaWJFPkubqB1X9l4HAX/FPQKEjiSRk6xIhhA=
Content-language: de

The example code you found is very old (seems to be from the Version 1.x of
Lucene), and is not working with Version 2.x or 3.x of Lucene (previously
deprecated "Hits" class is gone in 3.0, "static" Field constructors were
gone long time ago in 2.0, so you get compilation errors).

If you want to learn Lucene, buy the Book "Lucene in Action - 2nd Edition",
there is everything explained and lots of examples for everyday use with the
newest Version 3.0.2. See http://www.manning.com/hatcher2/ for ordering the
PDF version or go to your local bookstore.

In all cases, if you are new to Lucene don't use version 2.9.x or earlier,
use 3.0.x with its clean API. This makes it easier for beginners.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Yakob [mailto:jacobian@opensuse-id.org]
> Sent: Sunday, August 08, 2010 11:11 AM
> To: java-user@lucene.apache.org
> Subject: Re: understanding lucene
> 
> ok I had tried to run some sample lucene application I found on the
internet
> such this one from
> 
> http://javatechniques.com/blog/lucene-in-memory-text-search-example/
> 
> and this is the source code, I put it in pastebin so it will be easier to
edit.
> 
> http://pastebin.ca/1913109
> 
> but still when I tried to run it using --deprecated option I ran into some
errors
> that made me difficult to solve it. the errors is this.
> 
> C:\Users\Raden\Documents\lucene\lucenedd>javac -Xlint:deprecation
> InMemoryExampl e.java
> InMemoryExample.java:7: warning: [deprecation]
> org.apache.lucene.search.Hits in org.apache.lucene.search has been
> deprecated import org.apache.lucene.search.Hits;
>                                ^
> InMemoryExample.java:29: warning: [deprecation]
> IndexWriter(org.apache.lucene.st
> ore.Directory,org.apache.lucene.analysis.Analyzer,boolean) in
> org.apache.lucene.
> index.IndexWriter has been deprecated
>                 new IndexWriter(idx, new StandardAnalyzer(), true);
>                 ^
> InMemoryExample.java:82: cannot find symbol symbol  : method
> unIndexed(java.lang.String,java.lang.String)
> location: class org.apache.lucene.document.Field
>         doc.add(Field.UnIndexed("title", title));
>                      ^
> InMemoryExample.java:89: cannot find symbol symbol  : method
> text(java.lang.String,java.io.StringReader)
> location: class org.apache.lucene.document.Field
>         doc.add(Field.Text("content", new StringReader(content)));
>                      ^
> InMemoryExample.java:101: parse(java.lang.String) in
> org.apache.lucene.queryPars er.QueryParser cannot be applied to
> (java.lang.String,java.lang.String,org.apach
> e.lucene.analysis.standard.StandardAnalyzer)
>         Query query = QueryParser.parse(
>                                  ^
> InMemoryExample.java:105: warning: [deprecation]
> org.apache.lucene.search.Hits i n org.apache.lucene.search has been
> deprecated
>         Hits hits = searcher.search(query);
>         ^
> InMemoryExample.java:105: warning: [deprecation]
> search(org.apache.lucene.search
> .Query) in org.apache.lucene.search.Searcher has been deprecated
>         Hits hits = searcher.search(query);
>                             ^
> 3 errors
> 4 warnings
> 
> I use deprecated option because there is some java class that's already
> deprecated. but still there is some errors.
> 
> I was just wondering if I can get any tips of how to fix this errors or
else maybe
> I can get a link to other working lucene sample program.
> because it's a bit hard for me to learn lucene if I don't have any working
> program based on lucene.
> 
> any help would be greatly appreciated.
> --
> http://jacobian.web.id
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 08 09:44:43 2010
Return-Path: <java-user-return-46943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48482 invoked from network); 8 Aug 2010 09:44:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Aug 2010 09:44:43 -0000
Received: (qmail 61206 invoked by uid 500); 8 Aug 2010 09:44:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60950 invoked by uid 500); 8 Aug 2010 09:44:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60942 invoked by uid 99); 8 Aug 2010 09:44:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Aug 2010 09:44:37 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Aug 2010 09:44:32 +0000
Received: by wwb39 with SMTP id 39so434157wwb.5
        for <java-user@lucene.apache.org>; Sun, 08 Aug 2010 02:44:10 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.46.147 with SMTP id r19mr1358441web.86.1281260650149; Sun,
 08 Aug 2010 02:44:10 -0700 (PDT)
Received: by 10.216.36.79 with HTTP; Sun, 8 Aug 2010 02:44:10 -0700 (PDT)
In-Reply-To: <008a01cb36db$52061860$f6124920$@thetaphi.de>
References: <AANLkTi=6DWiryDozqHUWqsVgDtsZHHSpQ6O=AcezsJL8@mail.gmail.com>
	<AANLkTi=Tt5-u4P+TfXA6=pfWeTPbGn5Di6ADi05Rg_K1@mail.gmail.com>
	<008a01cb36db$52061860$f6124920$@thetaphi.de>
Date: Sun, 8 Aug 2010 05:44:10 -0400
Message-ID: <AANLkTikUxZuFbbgRB2n0mSXB+iLb5AXqR6V4SnmVmNb_@mail.gmail.com>
Subject: Re: understanding lucene
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Small correction: the URL for the book is actually
http://www.manning.com/hatcher3 (not /hatcher2, which is the 1st
edition).

Mike

On Sun, Aug 8, 2010 at 5:23 AM, Uwe Schindler <uwe@thetaphi.de> wrote:
> The example code you found is very old (seems to be from the Version 1.x =
of
> Lucene), and is not working with Version 2.x or 3.x of Lucene (previously
> deprecated "Hits" class is gone in 3.0, "static" Field constructors were
> gone long time ago in 2.0, so you get compilation errors).
>
> If you want to learn Lucene, buy the Book "Lucene in Action - 2nd Edition=
",
> there is everything explained and lots of examples for everyday use with =
the
> newest Version 3.0.2. See http://www.manning.com/hatcher2/ for ordering t=
he
> PDF version or go to your local bookstore.
>
> In all cases, if you are new to Lucene don't use version 2.9.x or earlier=
,
> use 3.0.x with its clean API. This makes it easier for beginners.
>
> Uwe
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
>> -----Original Message-----
>> From: Yakob [mailto:jacobian@opensuse-id.org]
>> Sent: Sunday, August 08, 2010 11:11 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: understanding lucene
>>
>> ok I had tried to run some sample lucene application I found on the
> internet
>> such this one from
>>
>> http://javatechniques.com/blog/lucene-in-memory-text-search-example/
>>
>> and this is the source code, I put it in pastebin so it will be easier t=
o
> edit.
>>
>> http://pastebin.ca/1913109
>>
>> but still when I tried to run it using --deprecated option I ran into so=
me
> errors
>> that made me difficult to solve it. the errors is this.
>>
>> C:\Users\Raden\Documents\lucene\lucenedd>javac -Xlint:deprecation
>> InMemoryExampl e.java
>> InMemoryExample.java:7: warning: [deprecation]
>> org.apache.lucene.search.Hits in org.apache.lucene.search has been
>> deprecated import org.apache.lucene.search.Hits;
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0^
>> InMemoryExample.java:29: warning: [deprecation]
>> IndexWriter(org.apache.lucene.st
>> ore.Directory,org.apache.lucene.analysis.Analyzer,boolean) in
>> org.apache.lucene.
>> index.IndexWriter has been deprecated
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 new IndexWriter(idx, new StandardAnalyze=
r(), true);
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 ^
>> InMemoryExample.java:82: cannot find symbol symbol =A0: method
>> unIndexed(java.lang.String,java.lang.String)
>> location: class org.apache.lucene.document.Field
>> =A0 =A0 =A0 =A0 doc.add(Field.UnIndexed("title", title));
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0^
>> InMemoryExample.java:89: cannot find symbol symbol =A0: method
>> text(java.lang.String,java.io.StringReader)
>> location: class org.apache.lucene.document.Field
>> =A0 =A0 =A0 =A0 doc.add(Field.Text("content", new StringReader(content))=
);
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0^
>> InMemoryExample.java:101: parse(java.lang.String) in
>> org.apache.lucene.queryPars er.QueryParser cannot be applied to
>> (java.lang.String,java.lang.String,org.apach
>> e.lucene.analysis.standard.StandardAnalyzer)
>> =A0 =A0 =A0 =A0 Query query =3D QueryParser.parse(
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0^
>> InMemoryExample.java:105: warning: [deprecation]
>> org.apache.lucene.search.Hits i n org.apache.lucene.search has been
>> deprecated
>> =A0 =A0 =A0 =A0 Hits hits =3D searcher.search(query);
>> =A0 =A0 =A0 =A0 ^
>> InMemoryExample.java:105: warning: [deprecation]
>> search(org.apache.lucene.search
>> .Query) in org.apache.lucene.search.Searcher has been deprecated
>> =A0 =A0 =A0 =A0 Hits hits =3D searcher.search(query);
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 ^
>> 3 errors
>> 4 warnings
>>
>> I use deprecated option because there is some java class that's already
>> deprecated. but still there is some errors.
>>
>> I was just wondering if I can get any tips of how to fix this errors or
> else maybe
>> I can get a link to other working lucene sample program.
>> because it's a bit hard for me to learn lucene if I don't have any worki=
ng
>> program based on lucene.
>>
>> any help would be greatly appreciated.
>> --
>> http://jacobian.web.id
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 08 09:49:38 2010
Return-Path: <java-user-return-46944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49155 invoked from network); 8 Aug 2010 09:49:37 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Aug 2010 09:49:37 -0000
Received: (qmail 66311 invoked by uid 500); 8 Aug 2010 09:49:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66117 invoked by uid 500); 8 Aug 2010 09:49:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66109 invoked by uid 99); 8 Aug 2010 09:49:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Aug 2010 09:49:31 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Aug 2010 09:49:25 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id CC81BD36005
	for <java-user@lucene.apache.org>; Sun,  8 Aug 2010 11:49:04 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id DMQs-fRlJCCH for <java-user@lucene.apache.org>;
	Sun,  8 Aug 2010 11:48:52 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id CA806D36003
	for <java-user@lucene.apache.org>; Sun,  8 Aug 2010 11:48:51 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTi=6DWiryDozqHUWqsVgDtsZHHSpQ6O=AcezsJL8@mail.gmail.com>	<AANLkTi=Tt5-u4P+TfXA6=pfWeTPbGn5Di6ADi05Rg_K1@mail.gmail.com>	<008a01cb36db$52061860$f6124920$@thetaphi.de> <AANLkTikUxZuFbbgRB2n0mSXB+iLb5AXqR6V4SnmVmNb_@mail.gmail.com>
In-Reply-To: <AANLkTikUxZuFbbgRB2n0mSXB+iLb5AXqR6V4SnmVmNb_@mail.gmail.com>
Subject: RE: understanding lucene
Date: Sun, 8 Aug 2010 11:49:56 +0200
Message-ID: <008b01cb36df$0eec3880$2cc4a980$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQFWpAYxaWJFPkubqB1X9l4HAX/FPQKEjiSRAfaMkkoCIyNShZOLg8/g
Content-language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Ah, sure - I should always click on the URLs I posted. I think =
"/hatcher"
(1) was his ANT book :-)

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: Sunday, August 08, 2010 11:44 AM
> To: java-user@lucene.apache.org
> Subject: Re: understanding lucene
>=20
> Small correction: the URL for the book is actually
> http://www.manning.com/hatcher3 (not /hatcher2, which is the 1st =
edition).
>=20
> Mike
>=20
> On Sun, Aug 8, 2010 at 5:23 AM, Uwe Schindler <uwe@thetaphi.de> wrote:
> > The example code you found is very old (seems to be from the Version
> > 1.x of Lucene), and is not working with Version 2.x or 3.x of Lucene
> > (previously deprecated "Hits" class is gone in 3.0, "static" Field
> > constructors were gone long time ago in 2.0, so you get compilation
errors).
> >
> > If you want to learn Lucene, buy the Book "Lucene in Action - 2nd
> > Edition", there is everything explained and lots of examples for
> > everyday use with the newest Version 3.0.2. See
> > http://www.manning.com/hatcher2/ for ordering the PDF version or go =
to
> your local bookstore.
> >
> > In all cases, if you are new to Lucene don't use version 2.9.x or
> > earlier, use 3.0.x with its clean API. This makes it easier for
beginners.
> >
> > Uwe
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> >
> >> -----Original Message-----
> >> From: Yakob [mailto:jacobian@opensuse-id.org]
> >> Sent: Sunday, August 08, 2010 11:11 AM
> >> To: java-user@lucene.apache.org
> >> Subject: Re: understanding lucene
> >>
> >> ok I had tried to run some sample lucene application I found on the
> > internet
> >> such this one from
> >>
> >> =
http://javatechniques.com/blog/lucene-in-memory-text-search-example/
> >>
> >> and this is the source code, I put it in pastebin so it will be
> >> easier to
> > edit.
> >>
> >> http://pastebin.ca/1913109
> >>
> >> but still when I tried to run it using --deprecated option I ran =
into
> >> some
> > errors
> >> that made me difficult to solve it. the errors is this.
> >>
> >> C:\Users\Raden\Documents\lucene\lucenedd>javac -Xlint:deprecation
> >> InMemoryExampl e.java
> >> InMemoryExample.java:7: warning: [deprecation]
> >> org.apache.lucene.search.Hits in org.apache.lucene.search has been
> >> deprecated import org.apache.lucene.search.Hits;
> >> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0^
> >> InMemoryExample.java:29: warning: [deprecation]
> >> IndexWriter(org.apache.lucene.st
> >> ore.Directory,org.apache.lucene.analysis.Analyzer,boolean) in
> >> org.apache.lucene.
> >> index.IndexWriter has been deprecated
> >> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 new IndexWriter(idx, new =
StandardAnalyzer(), true);
> >> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 ^
> >> InMemoryExample.java:82: cannot find symbol symbol =A0: method
> >> unIndexed(java.lang.String,java.lang.String)
> >> location: class org.apache.lucene.document.Field
> >> =A0 =A0 =A0 =A0 doc.add(Field.UnIndexed("title", title));
> >> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0^
> >> InMemoryExample.java:89: cannot find symbol symbol =A0: method
> >> text(java.lang.String,java.io.StringReader)
> >> location: class org.apache.lucene.document.Field
> >> =A0 =A0 =A0 =A0 doc.add(Field.Text("content", new =
StringReader(content)));
> >> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0^
> >> InMemoryExample.java:101: parse(java.lang.String) in
> >> org.apache.lucene.queryPars er.QueryParser cannot be applied to
> >> (java.lang.String,java.lang.String,org.apach
> >> e.lucene.analysis.standard.StandardAnalyzer)
> >> =A0 =A0 =A0 =A0 Query query =3D QueryParser.parse(
> >> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0^
> >> InMemoryExample.java:105: warning: [deprecation]
> >> org.apache.lucene.search.Hits i n org.apache.lucene.search has been
> >> deprecated
> >> =A0 =A0 =A0 =A0 Hits hits =3D searcher.search(query);
> >> =A0 =A0 =A0 =A0 ^
> >> InMemoryExample.java:105: warning: [deprecation]
> >> search(org.apache.lucene.search
> >> .Query) in org.apache.lucene.search.Searcher has been deprecated
> >> =A0 =A0 =A0 =A0 Hits hits =3D searcher.search(query);
> >> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 ^
> >> 3 errors
> >> 4 warnings
> >>
> >> I use deprecated option because there is some java class that's
> >> already deprecated. but still there is some errors.
> >>
> >> I was just wondering if I can get any tips of how to fix this =
errors
> >> or
> > else maybe
> >> I can get a link to other working lucene sample program.
> >> because it's a bit hard for me to learn lucene if I don't have any
> >> working program based on lucene.
> >>
> >> any help would be greatly appreciated.
> >> --
> >> http://jacobian.web.id
> >>
> >> =
---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 08 09:55:12 2010
Return-Path: <java-user-return-46945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49584 invoked from network); 8 Aug 2010 09:55:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Aug 2010 09:55:11 -0000
Received: (qmail 70625 invoked by uid 500); 8 Aug 2010 09:55:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70319 invoked by uid 500); 8 Aug 2010 09:55:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70311 invoked by uid 99); 8 Aug 2010 09:55:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Aug 2010 09:55:04 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Aug 2010 09:55:00 +0000
Received: by iwn35 with SMTP id 35so1327325iwn.35
        for <java-user@lucene.apache.org>; Sun, 08 Aug 2010 02:54:39 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.59.212 with SMTP id m20mr17047690ibh.130.1281261278856; 
	Sun, 08 Aug 2010 02:54:38 -0700 (PDT)
Received: by 10.231.190.68 with HTTP; Sun, 8 Aug 2010 02:54:38 -0700 (PDT)
In-Reply-To: <008a01cb36db$52061860$f6124920$@thetaphi.de>
References: <AANLkTi=6DWiryDozqHUWqsVgDtsZHHSpQ6O=AcezsJL8@mail.gmail.com>
	<AANLkTi=Tt5-u4P+TfXA6=pfWeTPbGn5Di6ADi05Rg_K1@mail.gmail.com>
	<008a01cb36db$52061860$f6124920$@thetaphi.de>
Date: Sun, 8 Aug 2010 16:54:38 +0700
Message-ID: <AANLkTinKK2EFU4B--a4VQ8oeiYmCN__8yUU5Aqip-eqr@mail.gmail.com>
Subject: Re: understanding lucene
From: Yakob <jacobian@opensuse-id.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

On 8/8/10, Uwe Schindler <uwe@thetaphi.de> wrote:
> The example code you found is very old (seems to be from the Version 1.x of
> Lucene), and is not working with Version 2.x or 3.x of Lucene (previously
> deprecated "Hits" class is gone in 3.0, "static" Field constructors were
> gone long time ago in 2.0, so you get compilation errors).
>
> If you want to learn Lucene, buy the Book "Lucene in Action - 2nd Edition",
> there is everything explained and lots of examples for everyday use with the
> newest Version 3.0.2. See http://www.manning.com/hatcher2/ for ordering the
> PDF version or go to your local bookstore.
>
> In all cases, if you are new to Lucene don't use version 2.9.x or earlier,
> use 3.0.x with its clean API. This makes it easier for beginners.
>
> Uwe
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>

the ebook cost 30 dollars,can't I just get the free pirate version
instead?hehe... I mean if you had the ebook yourself maybe you can
email me the pdf version to my email here.so that it would not cost me
money. :-)

or maybe I can find it in rapidshare,maybe there is someone kind
enough that put the book there.
-- 
http://jacobian.web.id

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 08 10:19:06 2010
Return-Path: <java-user-return-46946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60210 invoked from network); 8 Aug 2010 10:19:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Aug 2010 10:19:06 -0000
Received: (qmail 78800 invoked by uid 500); 8 Aug 2010 10:19:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78402 invoked by uid 500); 8 Aug 2010 10:19:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78394 invoked by uid 99); 8 Aug 2010 10:19:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Aug 2010 10:19:00 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Aug 2010 10:18:55 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id B50CFD36005
	for <java-user@lucene.apache.org>; Sun,  8 Aug 2010 12:18:34 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id IWPk-mW3WM4p for <java-user@lucene.apache.org>;
	Sun,  8 Aug 2010 12:18:23 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id ACCF1D36003
	for <java-user@lucene.apache.org>; Sun,  8 Aug 2010 12:18:22 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTi=6DWiryDozqHUWqsVgDtsZHHSpQ6O=AcezsJL8@mail.gmail.com>	<AANLkTi=Tt5-u4P+TfXA6=pfWeTPbGn5Di6ADi05Rg_K1@mail.gmail.com>	<008a01cb36db$52061860$f6124920$@thetaphi.de> <AANLkTinKK2EFU4B--a4VQ8oeiYmCN__8yUU5Aqip-eqr@mail.gmail.com>
In-Reply-To: <AANLkTinKK2EFU4B--a4VQ8oeiYmCN__8yUU5Aqip-eqr@mail.gmail.com>
Subject: RE: understanding lucene
Date: Sun, 8 Aug 2010 12:19:26 +0200
Message-ID: <008c01cb36e3$2e5ffdb0$8b1ff910$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQFWpAYxaWJFPkubqB1X9l4HAX/FPQKEjiSRAfaMkkoB7OlKOZONPLXQ
Content-language: de

Hi Yakob,

In this mailing list are all the people who wrote this book, making such a
suggestion is not a good idea, especially if you need help in future. You
cannot get everything for free. If you look through the internet (e.g.
twitter, blogs of authors) you may find Coupon Codes / Promotional Codes
(e.g. 25% less). Be sure to buy the second edition, my first link was
incorrect: http://www.manning.com/hatcher3 

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Yakob [mailto:jacobian@opensuse-id.org]
> Sent: Sunday, August 08, 2010 11:55 AM
> To: java-user@lucene.apache.org
> Subject: Re: understanding lucene
> 
> On 8/8/10, Uwe Schindler <uwe@thetaphi.de> wrote:
> > The example code you found is very old (seems to be from the Version
> > 1.x of Lucene), and is not working with Version 2.x or 3.x of Lucene
> > (previously deprecated "Hits" class is gone in 3.0, "static" Field
> > constructors were gone long time ago in 2.0, so you get compilation
errors).
> >
> > If you want to learn Lucene, buy the Book "Lucene in Action - 2nd
> > Edition", there is everything explained and lots of examples for
> > everyday use with the newest Version 3.0.2. See
> > http://www.manning.com/hatcher2/ for ordering the PDF version or go to
> your local bookstore.
> >
> > In all cases, if you are new to Lucene don't use version 2.9.x or
> > earlier, use 3.0.x with its clean API. This makes it easier for
beginners.
> >
> > Uwe
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> 
> the ebook cost 30 dollars,can't I just get the free pirate version
instead?hehe... I
> mean if you had the ebook yourself maybe you can email me the pdf version
to
> my email here.so that it would not cost me money. :-)
> 
> or maybe I can find it in rapidshare,maybe there is someone kind enough
that
> put the book there.
> --
> http://jacobian.web.id
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 08 10:52:50 2010
Return-Path: <java-user-return-46947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65425 invoked from network); 8 Aug 2010 10:52:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Aug 2010 10:52:50 -0000
Received: (qmail 85124 invoked by uid 500); 8 Aug 2010 10:52:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84803 invoked by uid 500); 8 Aug 2010 10:52:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84795 invoked by uid 99); 8 Aug 2010 10:52:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Aug 2010 10:52:43 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Aug 2010 10:52:37 +0000
Received: by iwn35 with SMTP id 35so1364414iwn.35
        for <java-user@lucene.apache.org>; Sun, 08 Aug 2010 03:52:16 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.193.11 with SMTP id ds11mr16339369ibb.192.1281264734415; 
	Sun, 08 Aug 2010 03:52:14 -0700 (PDT)
Received: by 10.231.190.68 with HTTP; Sun, 8 Aug 2010 03:52:13 -0700 (PDT)
In-Reply-To: <008c01cb36e3$2e5ffdb0$8b1ff910$@thetaphi.de>
References: <AANLkTi=6DWiryDozqHUWqsVgDtsZHHSpQ6O=AcezsJL8@mail.gmail.com>
	<AANLkTi=Tt5-u4P+TfXA6=pfWeTPbGn5Di6ADi05Rg_K1@mail.gmail.com>
	<008a01cb36db$52061860$f6124920$@thetaphi.de>
	<AANLkTinKK2EFU4B--a4VQ8oeiYmCN__8yUU5Aqip-eqr@mail.gmail.com>
	<008c01cb36e3$2e5ffdb0$8b1ff910$@thetaphi.de>
Date: Sun, 8 Aug 2010 17:52:13 +0700
Message-ID: <AANLkTinRrDCx4ONGwuQLiiS3+s6Rc1Spnndb0QkfzknG@mail.gmail.com>
Subject: Re: understanding lucene
From: Yakob <jacobian@opensuse-id.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

ok I am sorry,I should not have said that.I didn't know that it was
you guys who made the book.so I will now try to activate my paypal
account to buy that book.

thanks for the suggestion. :-)

On 8/8/10, Uwe Schindler <uwe@thetaphi.de> wrote:
> Hi Yakob,
>
> In this mailing list are all the people who wrote this book, making such a
> suggestion is not a good idea, especially if you need help in future. You
> cannot get everything for free. If you look through the internet (e.g.
> twitter, blogs of authors) you may find Coupon Codes / Promotional Codes
> (e.g. 25% less). Be sure to buy the second edition, my first link was
> incorrect: http://www.manning.com/hatcher3
>
> Uwe
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
>> -----Original Message-----
>> From: Yakob [mailto:jacobian@opensuse-id.org]
>> Sent: Sunday, August 08, 2010 11:55 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: understanding lucene
>>
>> On 8/8/10, Uwe Schindler <uwe@thetaphi.de> wrote:
>> > The example code you found is very old (seems to be from the Version
>> > 1.x of Lucene), and is not working with Version 2.x or 3.x of Lucene
>> > (previously deprecated "Hits" class is gone in 3.0, "static" Field
>> > constructors were gone long time ago in 2.0, so you get compilation
> errors).
>> >
>> > If you want to learn Lucene, buy the Book "Lucene in Action - 2nd
>> > Edition", there is everything explained and lots of examples for
>> > everyday use with the newest Version 3.0.2. See
>> > http://www.manning.com/hatcher2/ for ordering the PDF version or go to
>> your local bookstore.
>> >
>> > In all cases, if you are new to Lucene don't use version 2.9.x or
>> > earlier, use 3.0.x with its clean API. This makes it easier for
> beginners.
>> >
>> > Uwe
>> >
>> > -----
>> > Uwe Schindler
>> > H.-H.-Meier-Allee 63, D-28213 Bremen
>> > http://www.thetaphi.de
>> > eMail: uwe@thetaphi.de
>> >
>>
>> the ebook cost 30 dollars,can't I just get the free pirate version
> instead?hehe... I
>> mean if you had the ebook yourself maybe you can email me the pdf version
> to
>> my email here.so that it would not cost me money. :-)
>>
>> or maybe I can find it in rapidshare,maybe there is someone kind enough
> that
>> put the book there.
>> --
>> http://jacobian.web.id
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
http://jacobian.web.id

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 08 11:41:32 2010
Return-Path: <java-user-return-46948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80288 invoked from network); 8 Aug 2010 11:41:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Aug 2010 11:41:32 -0000
Received: (qmail 8824 invoked by uid 500); 8 Aug 2010 11:41:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8266 invoked by uid 500); 8 Aug 2010 11:41:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8258 invoked by uid 99); 8 Aug 2010 11:41:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Aug 2010 11:41:25 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Aug 2010 11:41:18 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 70137D36005
	for <java-user@lucene.apache.org>; Sun,  8 Aug 2010 13:40:58 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id C9m7IMbOjh91 for <java-user@lucene.apache.org>;
	Sun,  8 Aug 2010 13:40:46 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 569E4D36003
	for <java-user@lucene.apache.org>; Sun,  8 Aug 2010 13:40:46 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTi=6DWiryDozqHUWqsVgDtsZHHSpQ6O=AcezsJL8@mail.gmail.com>	<AANLkTi=Tt5-u4P+TfXA6=pfWeTPbGn5Di6ADi05Rg_K1@mail.gmail.com>	<008a01cb36db$52061860$f6124920$@thetaphi.de>	<AANLkTinKK2EFU4B--a4VQ8oeiYmCN__8yUU5Aqip-eqr@mail.gmail.com>	<008c01cb36e3$2e5ffdb0$8b1ff910$@thetaphi.de> <AANLkTinRrDCx4ONGwuQLiiS3+s6Rc1Spnndb0QkfzknG@mail.gmail.com>
In-Reply-To: <AANLkTinRrDCx4ONGwuQLiiS3+s6Rc1Spnndb0QkfzknG@mail.gmail.com>
Subject: RE: understanding lucene
Date: Sun, 8 Aug 2010 13:41:50 +0200
Message-ID: <008d01cb36ee$b10bfba0$1323f2e0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQFWpAYxaWJFPkubqB1X9l4HAX/FPQKEjiSRAfaMkkoB7OlKOQCImVmvAuz7c7uTcahpYA==
Content-language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Finally, on the book's web page is a link to download the example source
code from the book!

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Yakob [mailto:jacobian@opensuse-id.org]
> Sent: Sunday, August 08, 2010 12:52 PM
> To: java-user@lucene.apache.org
> Subject: Re: understanding lucene
> 
> ok I am sorry,I should not have said that.I didn't know that it was you
guys who
> made the book.so I will now try to activate my paypal account to buy that
book.
> 
> thanks for the suggestion. :-)
> 
> On 8/8/10, Uwe Schindler <uwe@thetaphi.de> wrote:
> > Hi Yakob,
> >
> > In this mailing list are all the people who wrote this book, making
> > such a suggestion is not a good idea, especially if you need help in
> > future. You cannot get everything for free. If you look through the
internet
> (e.g.
> > twitter, blogs of authors) you may find Coupon Codes / Promotional
> > Codes (e.g. 25% less). Be sure to buy the second edition, my first
> > link was
> > incorrect: http://www.manning.com/hatcher3
> >
> > Uwe
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> >
> >> -----Original Message-----
> >> From: Yakob [mailto:jacobian@opensuse-id.org]
> >> Sent: Sunday, August 08, 2010 11:55 AM
> >> To: java-user@lucene.apache.org
> >> Subject: Re: understanding lucene
> >>
> >> On 8/8/10, Uwe Schindler <uwe@thetaphi.de> wrote:
> >> > The example code you found is very old (seems to be from the
> >> > Version 1.x of Lucene), and is not working with Version 2.x or 3.x
> >> > of Lucene (previously deprecated "Hits" class is gone in 3.0,
> >> > "static" Field constructors were gone long time ago in 2.0, so you
> >> > get compilation
> > errors).
> >> >
> >> > If you want to learn Lucene, buy the Book "Lucene in Action - 2nd
> >> > Edition", there is everything explained and lots of examples for
> >> > everyday use with the newest Version 3.0.2. See
> >> > http://www.manning.com/hatcher2/ for ordering the PDF version or go
> >> > to
> >> your local bookstore.
> >> >
> >> > In all cases, if you are new to Lucene don't use version 2.9.x or
> >> > earlier, use 3.0.x with its clean API. This makes it easier for
> > beginners.
> >> >
> >> > Uwe
> >> >
> >> > -----
> >> > Uwe Schindler
> >> > H.-H.-Meier-Allee 63, D-28213 Bremen http://www.thetaphi.de
> >> > eMail: uwe@thetaphi.de
> >> >
> >>
> >> the ebook cost 30 dollars,can't I just get the free pirate version
> > instead?hehe... I
> >> mean if you had the ebook yourself maybe you can email me the pdf
> >> version
> > to
> >> my email here.so that it would not cost me money. :-)
> >>
> >> or maybe I can find it in rapidshare,maybe there is someone kind
> >> enough
> > that
> >> put the book there.
> >> --
> >> http://jacobian.web.id
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> 
> --
> http://jacobian.web.id
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 08 12:38:52 2010
Return-Path: <java-user-return-46949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4201 invoked from network); 8 Aug 2010 12:38:52 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Aug 2010 12:38:52 -0000
Received: (qmail 31185 invoked by uid 500); 8 Aug 2010 12:38:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30838 invoked by uid 500); 8 Aug 2010 12:38:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30830 invoked by uid 99); 8 Aug 2010 12:38:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Aug 2010 12:38:46 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.59] (HELO web50305.mail.re2.yahoo.com) (206.190.38.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 08 Aug 2010 12:38:40 +0000
Received: (qmail 71841 invoked by uid 60001); 8 Aug 2010 12:38:10 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1281271090; bh=eoWv59qjwexjVLe7iy9ouy85jSR5PfxvcwHI9flGUgs=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=Os+O0L9zCZ5t3hsJvXitSY/RuTrKQZdvShc/EWikFK5+JTKkMGp8BKhlZgQU2c+37tgp6tmM/8fS0oc4vQQUPCF9J+KiEpu9fRhzGMzGopFciCU97yalklIXLHGCZur+5GhOa8xH2jPYzbe7S6oBJ/T55N7NoNfuXYFjQ/gm/ls=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=t3ZT9ER4mJ/XgUMqy0EvN/6U6otfw3BNu0SczvP2a9Fpkol4GV8wkKmluS4SFxpKjzhh6M6CMQC7PB+vkyb32PwQ4j4j4Twh4wfF5WqFemNfb9vTDXkQqOfjEvPYoriAKiZ/7pEtVEd+Q1G15NHMRDi25CR4Lpts9YAgf0SPesM=;
Message-ID: <78202.70469.qm@web50305.mail.re2.yahoo.com>
X-YMail-OSG: E1T6mhIVM1l_.ACyXN3nqjoVdiDJzr4nUq984Unw9aWDvuS
 06PmMYNYMlzfGIwG1lmAnqgT.TCBu5LKO6Pja3eOnUyBsmU.fsaXeOHG_pGT
 mBfiJ39sfh9XDc0KOwTdOS4n3fERoCCcqx5WXdf44bQtLvI20c06jethUnD1
 mDt1Suk8QLAvmGOw0JpDRoguVf71.n1UVMhRyhPlBzvLu32HM80ed1ZNj7Q4
 utxaYS5EynTetMwx7u4GEP2ND_Y.SFouqXS0YQEp9YsIf6kyU48fnRsJrTF_
 ebApkCy9jESR9Ff2Enpe6erfqeFeFW7RznRU69obcw6k6Wx9CSX7NToShRqQ
 itOlp5al23ggr5w--
Received: from [74.73.6.27] by web50305.mail.re2.yahoo.com via HTTP; Sun, 08 Aug 2010 05:38:09 PDT
X-Mailer: YahooMailRC/459 YahooMailWebService/0.8.105.279950
References: <AANLkTi=6DWiryDozqHUWqsVgDtsZHHSpQ6O=AcezsJL8@mail.gmail.com> <AANLkTi=Tt5-u4P+TfXA6=pfWeTPbGn5Di6ADi05Rg_K1@mail.gmail.com> <008a01cb36db$52061860$f6124920$@thetaphi.de> <AANLkTinKK2EFU4B--a4VQ8oeiYmCN__8yUU5Aqip-eqr@mail.gmail.com>
Date: Sun, 8 Aug 2010 05:38:09 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: understanding lucene
To: java-user@lucene.apache.org
In-Reply-To: <AANLkTinKK2EFU4B--a4VQ8oeiYmCN__8yUU5Aqip-eqr@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

Manning, the Lucene in Action publisher, frequently offers 30-50% off on a 
number of their books, including LIA2.

See http://twitter.com/ManningBooks

Otis
----
Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
Lucene ecosystem search :: http://search-lucene.com/



----- Original Message ----
> From: Yakob <jacobian@opensuse-id.org>
> To: java-user@lucene.apache.org
> Sent: Sun, August 8, 2010 5:54:38 AM
> Subject: Re: understanding lucene
> 
> On 8/8/10, Uwe Schindler <uwe@thetaphi.de> wrote:
> > The example  code you found is very old (seems to be from the Version 1.x of
> > Lucene),  and is not working with Version 2.x or 3.x of Lucene (previously
> >  deprecated "Hits" class is gone in 3.0, "static" Field constructors were
> >  gone long time ago in 2.0, so you get compilation errors).
> >
> > If  you want to learn Lucene, buy the Book "Lucene in Action - 2nd Edition",
> >  there is everything explained and lots of examples for everyday use with  
>the
> > newest Version 3.0.2. See http://www.manning.com/hatcher2/ for ordering the
> > PDF  version or go to your local bookstore.
> >
> > In all cases, if you are  new to Lucene don't use version 2.9.x or earlier,
> > use 3.0.x with its  clean API. This makes it easier for beginners.
> >
> >  Uwe
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63,  D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> 
> the ebook cost  30 dollars,can't I just get the free pirate version
> instead?hehe... I mean if  you had the ebook yourself maybe you can
> email me the pdf version to my email  here.so that it would not cost me
> money. :-)
> 
> or maybe I can find it in  rapidshare,maybe there is someone kind
> enough that put the book there.
> -- 
> http://jacobian.web.id
> 
> ---------------------------------------------------------------------
> To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For  additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 08 14:17:48 2010
Return-Path: <java-user-return-46950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31268 invoked from network); 8 Aug 2010 14:17:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Aug 2010 14:17:47 -0000
Received: (qmail 73978 invoked by uid 500); 8 Aug 2010 14:17:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73346 invoked by uid 500); 8 Aug 2010 14:17:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73323 invoked by uid 99); 8 Aug 2010 14:17:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Aug 2010 14:17:41 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Aug 2010 14:17:33 +0000
Received: by wyb35 with SMTP id 35so8032233wyb.35
        for <java-user@lucene.apache.org>; Sun, 08 Aug 2010 07:17:11 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.7.212 with SMTP id e20mr12115237wbe.44.1281277031088; Sun, 
	08 Aug 2010 07:17:11 -0700 (PDT)
Received: by 10.216.36.79 with HTTP; Sun, 8 Aug 2010 07:17:11 -0700 (PDT)
In-Reply-To: <AANLkTin-QQJxfRXF6+=OxxYEDA8wf9XF-OfSd52fWCWX@mail.gmail.com>
References: <AANLkTin-QQJxfRXF6+=OxxYEDA8wf9XF-OfSd52fWCWX@mail.gmail.com>
Date: Sun, 8 Aug 2010 10:17:11 -0400
Message-ID: <AANLkTim8e7PHN2U0whzLbfBc=HOZHCG+9Z2mqUXWvLw9@mail.gmail.com>
Subject: Re: Query Match Count
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Do you need this for a single document, eg for debugging?  If so,
IndexSearcher.explain can give you these details.

If you need it for all hits, then Lucene does not make that easy
today, which is somewhat frustrating because this information (freq of
occurrence of each clause matching the current hit) is being computed,
to compute the net score; it's just not accessible.

But this is requested fairly often, so... I just opened an issue to
make this possible:

  https://issues.apache.org/jira/browse/LUCENE-2590

Mike

On Sun, Aug 8, 2010 at 12:44 AM, Ryan McV <rpm0618@gmail.com> wrote:
> Hello All,
>
> Is there a way to count the number of times a query matched in a particular
> document?
>
> For example, say we created a document that had the string "cheese cheese
> cheese cheese" in the field that is being searched.
> I would like to know that the query "cheese" matched four times in that
> particular document. Is there a way to do this?
>
> BTW, I am new to Lucene, so if I have any misconceptions that are apparent
> please feel free to correct me.
>
> Thanks,
> Ryan
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 08 20:10:05 2010
Return-Path: <java-user-return-46951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66520 invoked from network); 8 Aug 2010 20:10:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Aug 2010 20:10:04 -0000
Received: (qmail 58969 invoked by uid 500); 8 Aug 2010 20:10:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58918 invoked by uid 500); 8 Aug 2010 20:10:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58910 invoked by uid 99); 8 Aug 2010 20:10:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Aug 2010 20:10:02 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rpm0618@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Aug 2010 20:09:55 +0000
Received: by mail-iw0-f176.google.com with SMTP id 35so1783906iwn.35
        for <java-user@lucene.apache.org>; Sun, 08 Aug 2010 13:09:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=37uRZEaQH5zGSZmB5Brtr9yuBSFHq4msDaPuAPyMoLA=;
        b=KHP0Irk0zkogUD/CR0JzQntrHDv3TnZlq/ucrILtbiwmFd3+9pCdttyrODrS+lotSB
         0+fQzyLdKnKYiXWxglAqC/e/RzWaTK6+TqZoVpoEwqk+oNF18OfL8Fs5HezzKZI910G6
         9TocH4R8cOYNRAZmrvTTEz8iQgLWCdvGJESSo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=ujqPY6/5NqkrHSuSQM1a+kF6LaW6gYi/2Ny71XC4Es2LnBw5/JIDgaIy9Bl/lHhVPo
         ERzuX9EZMDMjEIL5/4ar0qPrN8Cm3yzGMuMB7Yj7cQsd6fNS8DMH8UfFzCOAsxbwivMV
         dzKCGxD0ZjXOFA3io542KYPFwM85RP0FvbVX4=
MIME-Version: 1.0
Received: by 10.231.19.6 with SMTP id y6mr17337008iba.16.1281298174748; Sun, 
	08 Aug 2010 13:09:34 -0700 (PDT)
Received: by 10.231.11.12 with HTTP; Sun, 8 Aug 2010 13:09:34 -0700 (PDT)
In-Reply-To: <AANLkTim8e7PHN2U0whzLbfBc=HOZHCG+9Z2mqUXWvLw9@mail.gmail.com>
References: <AANLkTin-QQJxfRXF6+=OxxYEDA8wf9XF-OfSd52fWCWX@mail.gmail.com>
	<AANLkTim8e7PHN2U0whzLbfBc=HOZHCG+9Z2mqUXWvLw9@mail.gmail.com>
Date: Sun, 8 Aug 2010 16:09:34 -0400
Message-ID: <AANLkTi=+BSLh9u+kQn13n9V9ULfZZb1teoV23tvCJ+u9@mail.gmail.com>
Subject: Re: Query Match Count
From: Ryan McV <rpm0618@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00221532cb908ea801048d557a95
X-Virus-Checked: Checked by ClamAV on apache.org

--00221532cb908ea801048d557a95
Content-Type: text/plain; charset=ISO-8859-1

Thank you for your response.

Unfortunately, I do need the frequency for all the hits. I downloaded your
patch, and ofter applying it, It works! Thank you very much.

How ever, I could not apply the patch using the patch command (I am on
windows and using UnxUtils, could this be the problem). I had to go through
and manually apply the patch. This is the error I got while attempting to
apply it(using the --verbose option, and there was a lot of stuff in front
of it):

patch: **** malformed patch at line 207: rs) {

I am using the source downlaod of 3.0.2, although I could not get the patch
to work on the latest svn either.

Thank you again,
Ryan

On Sun, Aug 8, 2010 at 10:17 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> Do you need this for a single document, eg for debugging?  If so,
> IndexSearcher.explain can give you these details.
>
> If you need it for all hits, then Lucene does not make that easy
> today, which is somewhat frustrating because this information (freq of
> occurrence of each clause matching the current hit) is being computed,
> to compute the net score; it's just not accessible.
>
> But this is requested fairly often, so... I just opened an issue to
> make this possible:
>
>  https://issues.apache.org/jira/browse/LUCENE-2590
>
> Mike
>
> On Sun, Aug 8, 2010 at 12:44 AM, Ryan McV <rpm0618@gmail.com> wrote:
> > Hello All,
> >
> > Is there a way to count the number of times a query matched in a
> particular
> > document?
> >
> > For example, say we created a document that had the string "cheese cheese
> > cheese cheese" in the field that is being searched.
> > I would like to know that the query "cheese" matched four times in that
> > particular document. Is there a way to do this?
> >
> > BTW, I am new to Lucene, so if I have any misconceptions that are
> apparent
> > please feel free to correct me.
> >
> > Thanks,
> > Ryan
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00221532cb908ea801048d557a95--

From java-user-return-46952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 08 23:16:35 2010
Return-Path: <java-user-return-46952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51243 invoked from network); 8 Aug 2010 23:16:35 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Aug 2010 23:16:35 -0000
Received: (qmail 86223 invoked by uid 500); 8 Aug 2010 23:16:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86157 invoked by uid 500); 8 Aug 2010 23:16:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86149 invoked by uid 99); 8 Aug 2010 23:16:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Aug 2010 23:16:32 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.158 is neither permitted nor denied by domain of luan.cestari@gmail.com)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Aug 2010 23:16:25 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <luan.cestari@gmail.com>)
	id 1OiF65-0002vQ-7i
	for java-user@lucene.apache.org; Sun, 08 Aug 2010 16:16:05 -0700
Date: Sun, 8 Aug 2010 16:16:05 -0700 (PDT)
From: Luan Cestari <luan.cestari@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1281309365193-1049232.post@n3.nabble.com>
Subject: Using categories with Lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org


Lucene developers,=20

We=E2=80=99ve been working on a undergraduate project to the college about =
changing
Apache Nutch (that uses Lucene do index it=E2=80=99s web pages) to include =
a
category filter, and we are having problems about the query part. We want t=
o
develop an application with a good performance, so we thought that here
would be the best place to ask this kind of question. The idea is that the
user can search pages stored for only a category. So the number of results
found should display the number of pages that actually is classified in tha=
t
category.

The problem is about how to add to the Lucene indexes the category
information, and how filter the search on that. We tried to look on the
Nutch mailing-list (Nabble) about that and asked some help, but people from
there think that we should use some plug-in like Carrot, that get like 100
of pages and classify it in the query time. We are not very confident that
it=E2=80=99s the best solution. We thought in other two different ideas: #1=
 To
classify those pages and store that information on a DB and in the query
time filter the result that DB to filter the result. #2 Use different index
servers, one for each category and one to search without filtering by
category.

We have seen on this project http://search-lucene.com/ that there are
pre-defined categories. We think that this should be classified at indexing
time, as we wanted.

Do you have any other idea about how to do that?=20

Sincerely,

Daniel Costa Gimenes & Luan Cestari
Undergraduate students of University Center of FEI
Brazil
--=20
View this message in context: http://lucene.472066.n3.nabble.com/Using-cate=
gories-with-Lucene-tp1049232p1049232.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 09 05:04:29 2010
Return-Path: <java-user-return-46953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74484 invoked from network); 9 Aug 2010 05:04:29 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Aug 2010 05:04:29 -0000
Received: (qmail 21512 invoked by uid 500); 9 Aug 2010 05:04:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21097 invoked by uid 500); 9 Aug 2010 05:04:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21089 invoked by uid 99); 9 Aug 2010 05:04:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Aug 2010 05:04:22 +0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.58] (HELO web50304.mail.re2.yahoo.com) (206.190.38.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 09 Aug 2010 05:04:16 +0000
Received: (qmail 26628 invoked by uid 60001); 9 Aug 2010 05:03:54 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1281330234; bh=AiMyiIOoFamEwXJSESW3AoT1aO8/Xujug8OfkH2vxI8=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=l/nbtONNjALh0vCC9SW1qmuTQinhM/eZ6NctHG8Gx81XuhGbNCwBXMJvqYUYhmdR+vPXS1HdH22QH9250pasIWrXQk/h4Zxe+a5Ia7AeWpez0NQN0gwoNj+WDXqW4LYfhEYNQiOn47eB0LPp1TW6lOu2xDI8Cko7BD7LOlNSyTQ=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=xRK2bkvRKVcKE9J2m4SP+fll74E2y3uxu68voepn3Xu95secHfTIM4JkLQdEZcUV8dcLx9TJNfueTbsPI+gN9gz9ECheDBcL8koeF3grghE12l+CL6rRgLb4uq7eRZKMDC9H/tr+mIkrbIk3XysmGrfXBU+AfUfxN4NV6jLGP2g=;
Message-ID: <887402.25776.qm@web50304.mail.re2.yahoo.com>
X-YMail-OSG: rG4oy9gVM1msp84OTH7YSJoXMuIEG6cz86TB5PxI8YuFfM7
 h7rkpc6ezOo5drDdf4yTUlEQsvjn3BCO5buzcmNjuS74h7mnf0H1_2tJN5d2
 5cdmB0EQiIgQrfXRXERpxBulWZy7Cq2V0lTj2rwhXNMYCFJyPa6fkNl9ENY9
 OGlweEJCHM5t4gL8A.5m6D0T.6coqa7rwIKfiXeAQxaISKpkR4Kx23X6JCOJ
 L5pO_my9ExF6.D.QGqnE.AsF5VaQ5H8p9SrPv4TKU8XQ_lmfGl_X39sDHHvL
 WqAX1NyerP0po7QXaWSW2t0i2cDaMSfLvSSmM5bgKDNq3fQ--
Received: from [74.73.6.27] by web50304.mail.re2.yahoo.com via HTTP; Sun, 08 Aug 2010 22:03:54 PDT
X-Mailer: YahooMailRC/459 YahooMailWebService/0.8.105.279950
References: <1281309365193-1049232.post@n3.nabble.com>
Date: Sun, 8 Aug 2010 22:03:54 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Using categories with Lucene
To: java-user@lucene.apache.org
In-Reply-To: <1281309365193-1049232.post@n3.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Luan,=0A=0AI think you are looking for facets and faceted search.  In=
 short, it means =0Astoring the category for a document (web page) in the D=
ocument Field in Lucene =0Aindex .  Then, at search time, you count how man=
y matches were in which =0Acategory.  You can implement this yourself or yo=
u can use Solr, which has this =0Afunctionality built-in.  If you want to s=
tick with Lucene and don't want Solr, =0Ayou can use Bobo Browse with Lucen=
e - Lucene in Action 2 has a case study about =0ABobo Browse, where you can=
 learn how this is done.  Slick stuff.=0A=0AThanks for using http://search-=
lucene.com :)=0A=0AOtis=0A----=0ASematext :: http://sematext.com/ :: Solr -=
 Lucene - Nutch=0ALucene ecosystem search :: http://search-lucene.com/=0A=
=0A=0A=0A----- Original Message ----=0A> From: Luan Cestari <luan.cestari@g=
mail.com>=0A> To: java-user@lucene.apache.org=0A> Sent: Sun, August 8, 2010=
 7:16:05 PM=0A> Subject: Using categories with Lucene=0A> =0A> =0A> Lucene =
developers, =0A> =0A> We=E2=80=99ve been working on a undergraduate project=
 to  the college about changing=0A> Apache Nutch (that uses Lucene do index=
 it=E2=80=99s web  pages) to include a=0A> category filter, and we are havi=
ng problems about the  query part. We want to=0A> develop an application wi=
th a good performance, so we  thought that here=0A> would be the best place=
 to ask this kind of question. The  idea is that the=0A> user can search pa=
ges stored for only a category. So the  number of results=0A> found should =
display the number of pages that actually is  classified in that=0A> catego=
ry.=0A> =0A> The problem is about how to add to the  Lucene indexes the cat=
egory=0A> information, and how filter the search on that.  We tried to look=
 on the=0A> Nutch mailing-list (Nabble) about that and asked some  help, bu=
t people from=0A> there think that we should use some plug-in like  Carrot,=
 that get like 100=0A> of pages and classify it in the query time. We are  =
not very confident that=0A> it=E2=80=99s the best solution. We thought in o=
ther two  different ideas: #1 To=0A> classify those pages and store that in=
formation on a  DB and in the query=0A> time filter the result that DB to f=
ilter the result. #2  Use different index=0A> servers, one for each categor=
y and one to search without  filtering by=0A> category.=0A> =0A> We have se=
en on this project http://search-lucene.com/ that there are=0A> pre-defined=
 categories. We think that this should be  classified at indexing=0A> time,=
 as we wanted.=0A> =0A> Do you have any other idea  about how to do that? =
=0A> =0A> Sincerely,=0A> =0A> Daniel Costa Gimenes & Luan  Cestari=0A> Unde=
rgraduate students of University Center of FEI=0A> Brazil=0A> -- =0A> View =
this message in context: =0A>http://lucene.472066.n3.nabble.com/Using-categ=
ories-with-Lucene-tp1049232p1049232.html=0A>=0A> Sent  from the Lucene - Ja=
va Users mailing list archive at  Nabble.com.=0A> =0A> --------------------=
-------------------------------------------------=0A> To  unsubscribe, e-ma=
il: java-user-unsubscribe@lucene.apache.org=0A> For  additional commands, e=
-mail: java-user-help@lucene.apache.org=0A> =0A> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 09 05:13:32 2010
Return-Path: <java-user-return-46954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82378 invoked from network); 9 Aug 2010 05:13:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Aug 2010 05:13:32 -0000
Received: (qmail 25426 invoked by uid 500); 9 Aug 2010 05:13:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25074 invoked by uid 500); 9 Aug 2010 05:13:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25066 invoked by uid 99); 9 Aug 2010 05:13:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Aug 2010 05:13:26 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX,URI_OBFU_WWW
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of findbestopensource@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Aug 2010 05:13:21 +0000
Received: by pwi8 with SMTP id 8so1783446pwi.35
        for <java-user@lucene.apache.org>; Sun, 08 Aug 2010 22:13:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=Hokqb3QAmo7HgNFvqCwyhY2ymS0cCVZ6b5pkg1GDfj4=;
        b=PLAI3pJ0gxKERu6rKBam5TFDlL/TTh7l6Uk5PnH0bW5SIw6dz595E+5zpfi8cxy162
         L0LEVRzU0kETk6wo64Op/ShDclxXBx8syxseVaFlj9NOR5ttWQ//UV8iBCjFxJmOV2JX
         EGVNChOloYdbsodfu89X5JhRbabY3uTRjrgBY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=K58Wb6Q92Q3sJHLrzTGrLFL/akhzXPLQ0jNVKC9BHz2we1xh9B0BkTwRmmbzSq8hZs
         PW374ThKZUx7Gp3KcMBpVk8CH5xTUvGjRrTBtPEM27wUUg8mTndIuhgjAdYhOw7ihZWm
         nWkEgu0S+LB0OCCj93eI1zRzY2N5ceS9W0QCI=
MIME-Version: 1.0
Received: by 10.142.107.8 with SMTP id f8mr2717114wfc.200.1281330781351; Sun, 
	08 Aug 2010 22:13:01 -0700 (PDT)
Received: by 10.142.195.7 with HTTP; Sun, 8 Aug 2010 22:13:01 -0700 (PDT)
In-Reply-To: <1281309365193-1049232.post@n3.nabble.com>
References: <1281309365193-1049232.post@n3.nabble.com>
Date: Mon, 9 Aug 2010 10:43:01 +0530
Message-ID: <AANLkTimrJLnreDntLK9yua6teOkSw7Y7y3_ayz32jF+b@mail.gmail.com>
Subject: Re: Using categories with Lucene
From: findbestopensource <findbestopensource@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

Hello Daniel & Luan

1. Carrot is not required for your purpose. Carrot helps to
consolidate the results from multiple search results.

2. You need to add a category to the pages at the index time and
filter out the results during search time. If you want to use Lucene,
then you could store the category information in a separate DB or XML
and filter out the search results. If you want an automatic system to
display the category data then you could consider using Solr. You
could checkout our website, we have used Solr to display the category
/ tagged field data.

Regards
Aditya
www,findbestopensource.com




On Mon, Aug 9, 2010 at 4:46 AM, Luan Cestari <luan.cestari@gmail.com> wrote=
:
>
> Lucene developers,
>
> We=92ve been working on a undergraduate project to the college about chan=
ging
> Apache Nutch (that uses Lucene do index it=92s web pages) to include a
> category filter, and we are having problems about the query part. We want=
 to
> develop an application with a good performance, so we thought that here
> would be the best place to ask this kind of question. The idea is that th=
e
> user can search pages stored for only a category. So the number of result=
s
> found should display the number of pages that actually is classified in t=
hat
> category.
>
> The problem is about how to add to the Lucene indexes the category
> information, and how filter the search on that. We tried to look on the
> Nutch mailing-list (Nabble) about that and asked some help, but people fr=
om
> there think that we should use some plug-in like Carrot, that get like 10=
0
> of pages and classify it in the query time. We are not very confident tha=
t
> it=92s the best solution. We thought in other two different ideas: #1 To
> classify those pages and store that information on a DB and in the query
> time filter the result that DB to filter the result. #2 Use different ind=
ex
> servers, one for each category and one to search without filtering by
> category.
>
> We have seen on this project http://search-lucene.com/ that there are
> pre-defined categories. We think that this should be classified at indexi=
ng
> time, as we wanted.
>
> Do you have any other idea about how to do that?
>
> Sincerely,
>
> Daniel Costa Gimenes & Luan Cestari
> Undergraduate students of University Center of FEI
> Brazil
> --
> View this message in context: http://lucene.472066.n3.nabble.com/Using-ca=
tegories-with-Lucene-tp1049232p1049232.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 09 12:21:32 2010
Return-Path: <java-user-return-46955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51509 invoked from network); 9 Aug 2010 12:21:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Aug 2010 12:21:32 -0000
Received: (qmail 38216 invoked by uid 500); 9 Aug 2010 12:21:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37814 invoked by uid 500); 9 Aug 2010 12:21:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37806 invoked by uid 99); 9 Aug 2010 12:21:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Aug 2010 12:21:25 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erik.hatcher@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Aug 2010 12:21:19 +0000
Received: by qyk12 with SMTP id 12so2450163qyk.14
        for <java-user@lucene.apache.org>; Mon, 09 Aug 2010 05:20:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=A2kFbJdQpPLZMkdU+gc3VN0ehhqLm+a3uFdXab68AFc=;
        b=QFo0YkzwV1vzt+DZzS1B0mzqcsrca1nei17mwR8tEG3st78VZG3OmGFPio6BYu2ZVQ
         X0xAhg3QAHJwCE5tmnObzDCdX+Mip4TA2x3mzxm8bWdT/jKlzV6VZiac1F8y++vaY2dA
         tkY5xrzx+6XqvjckIIfpG2d05QDzNOtOez/2g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=gQxCB1ty/lqgz9+ZM/w4b1Avgcf9FSbl6IUDowIVzMu9APMiKCHNPmRrJ27KRS7qhY
         neb7Bbg09QBYvr4RFA51pmbOzmqSMTyDWzVjnp+lOYzU/mRDOxnp99O56UFenU0nszLE
         9f7am+5n6EUjoOuNxuB4PLp/V0cZ771C8Hbgs=
Received: by 10.229.224.85 with SMTP id in21mr7236495qcb.102.1281356453369;
        Mon, 09 Aug 2010 05:20:53 -0700 (PDT)
Received: from [192.168.1.103] (64-203-140-72.cestates.dmt.ntelos.net [64.203.140.72])
        by mx.google.com with ESMTPS id mz12sm1586293qcb.30.2010.08.09.05.20.51
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 09 Aug 2010 05:20:51 -0700 (PDT)
Message-Id: <CDCD81FF-932A-4D8F-BC62-1B5362868237@gmail.com>
From: Erik Hatcher <erik.hatcher@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <008c01cb36e3$2e5ffdb0$8b1ff910$@thetaphi.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v936)
Subject: Re: understanding lucene
Date: Mon, 9 Aug 2010 08:20:49 -0400
References: <AANLkTi=6DWiryDozqHUWqsVgDtsZHHSpQ6O=AcezsJL8@mail.gmail.com>	<AANLkTi=Tt5-u4P+TfXA6=pfWeTPbGn5Di6ADi05Rg_K1@mail.gmail.com>	<008a01cb36db$52061860$f6124920$@thetaphi.de> <AANLkTinKK2EFU4B--a4VQ8oeiYmCN__8yUU5Aqip-eqr@mail.gmail.com> <008c01cb36e3$2e5ffdb0$8b1ff910$@thetaphi.de>
X-Mailer: Apple Mail (2.936)
X-Virus-Checked: Checked by ClamAV on apache.org

An even better URL:  http://www.manning.com/lucene  :)

	Erik


On Aug 8, 2010, at 6:19 AM, Uwe Schindler wrote:

> Hi Yakob,
>
> In this mailing list are all the people who wrote this book, making  
> such a
> suggestion is not a good idea, especially if you need help in  
> future. You
> cannot get everything for free. If you look through the internet (e.g.
> twitter, blogs of authors) you may find Coupon Codes / Promotional  
> Codes
> (e.g. 25% less). Be sure to buy the second edition, my first link was
> incorrect: http://www.manning.com/hatcher3
>
> Uwe
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
>> -----Original Message-----
>> From: Yakob [mailto:jacobian@opensuse-id.org]
>> Sent: Sunday, August 08, 2010 11:55 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: understanding lucene
>>
>> On 8/8/10, Uwe Schindler <uwe@thetaphi.de> wrote:
>>> The example code you found is very old (seems to be from the Version
>>> 1.x of Lucene), and is not working with Version 2.x or 3.x of Lucene
>>> (previously deprecated "Hits" class is gone in 3.0, "static" Field
>>> constructors were gone long time ago in 2.0, so you get compilation
> errors).
>>>
>>> If you want to learn Lucene, buy the Book "Lucene in Action - 2nd
>>> Edition", there is everything explained and lots of examples for
>>> everyday use with the newest Version 3.0.2. See
>>> http://www.manning.com/hatcher2/ for ordering the PDF version or  
>>> go to
>> your local bookstore.
>>>
>>> In all cases, if you are new to Lucene don't use version 2.9.x or
>>> earlier, use 3.0.x with its clean API. This makes it easier for
> beginners.
>>>
>>> Uwe
>>>
>>> -----
>>> Uwe Schindler
>>> H.-H.-Meier-Allee 63, D-28213 Bremen
>>> http://www.thetaphi.de
>>> eMail: uwe@thetaphi.de
>>>
>>
>> the ebook cost 30 dollars,can't I just get the free pirate version
> instead?hehe... I
>> mean if you had the ebook yourself maybe you can email me the pdf  
>> version
> to
>> my email here.so that it would not cost me money. :-)
>>
>> or maybe I can find it in rapidshare,maybe there is someone kind  
>> enough
> that
>> put the book there.
>> --
>> http://jacobian.web.id
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 09 13:42:21 2010
Return-Path: <java-user-return-46956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8266 invoked from network); 9 Aug 2010 13:42:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Aug 2010 13:42:21 -0000
Received: (qmail 54983 invoked by uid 500); 9 Aug 2010 13:42:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54491 invoked by uid 500); 9 Aug 2010 13:42:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54483 invoked by uid 99); 9 Aug 2010 13:42:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Aug 2010 13:42:13 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Aug 2010 13:42:08 +0000
Received: by gwj19 with SMTP id 19so5191914gwj.35
        for <java-user@lucene.apache.org>; Mon, 09 Aug 2010 06:41:47 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.90.88.10 with SMTP id l10mr11059948agb.182.1281361307283; Mon, 
	09 Aug 2010 06:41:47 -0700 (PDT)
Received: by 10.231.190.68 with HTTP; Mon, 9 Aug 2010 06:41:47 -0700 (PDT)
In-Reply-To: <CDCD81FF-932A-4D8F-BC62-1B5362868237@gmail.com>
References: <AANLkTi=6DWiryDozqHUWqsVgDtsZHHSpQ6O=AcezsJL8@mail.gmail.com>
	<AANLkTi=Tt5-u4P+TfXA6=pfWeTPbGn5Di6ADi05Rg_K1@mail.gmail.com>
	<008a01cb36db$52061860$f6124920$@thetaphi.de>
	<AANLkTinKK2EFU4B--a4VQ8oeiYmCN__8yUU5Aqip-eqr@mail.gmail.com>
	<008c01cb36e3$2e5ffdb0$8b1ff910$@thetaphi.de>
	<CDCD81FF-932A-4D8F-BC62-1B5362868237@gmail.com>
Date: Mon, 9 Aug 2010 20:41:47 +0700
Message-ID: <AANLkTik=mf5rC2m4yWTDd+sOT+pONMc+gDb-r-OU26fe@mail.gmail.com>
Subject: Re: understanding lucene
From: Yakob <jacobian@opensuse-id.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

On 8/9/10, Erik Hatcher <erik.hatcher@gmail.com> wrote:
> An even better URL:  http://www.manning.com/lucene  :)
>
> 	Erik

so I guess you are the one who wrote this book? :-)
-- 
http://jacobian.web.id

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 09 14:19:16 2010
Return-Path: <java-user-return-46957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31461 invoked from network); 9 Aug 2010 14:19:16 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Aug 2010 14:19:16 -0000
Received: (qmail 19295 invoked by uid 500); 9 Aug 2010 14:19:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18927 invoked by uid 500); 9 Aug 2010 14:19:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18919 invoked by uid 99); 9 Aug 2010 14:19:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Aug 2010 14:19:09 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lukas.vlcek@gmail.com designates 209.85.210.48 as permitted sender)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Aug 2010 14:19:02 +0000
Received: by pzk36 with SMTP id 36so6197931pzk.35
        for <java-user@lucene.apache.org>; Mon, 09 Aug 2010 07:18:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=S7kNVtHucqHigvTY6uDaTcgq/NksmOat3M+atnn57SM=;
        b=OAcoGfrT696QeAcGLSf79NwMTtBbahmHg++oRRIcWMzIwXNx5x+OmWSe2TOrgZzj4W
         R5Uk8XIQ/B02mtl9q+v3nUR5FDGl51jI09g6pdnbkm/Q0D0DP/yz1DdIq5I9FU4KYpCm
         fqaBT/tD8HZxxxLcY258mpHnXkGiCAi0TgS1c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=yIZxK1afU6iRONCkCkWTcm5SfBnlDQ2Dlg0Sa7tUauCYUlQDgyowVZfX1zZ2BKzlqf
         LT7XO2oipxfRZ2g6zzRiuIxHgnQsXwyAtFtIOQBG2wokUqtr0nZNf3cOlHPhfYa0s90e
         IizX+m+nHi+HVs2eiMj0Fdm/BFxTwZQG1qWPM=
Received: by 10.114.152.6 with SMTP id z6mr18585256wad.151.1281363521201; Mon, 
	09 Aug 2010 07:18:41 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.220.182.13 with HTTP; Mon, 9 Aug 2010 07:18:20 -0700 (PDT)
In-Reply-To: <AANLkTik=mf5rC2m4yWTDd+sOT+pONMc+gDb-r-OU26fe@mail.gmail.com>
References: <AANLkTi=6DWiryDozqHUWqsVgDtsZHHSpQ6O=AcezsJL8@mail.gmail.com> 
	<AANLkTi=Tt5-u4P+TfXA6=pfWeTPbGn5Di6ADi05Rg_K1@mail.gmail.com> 
	<008a01cb36db$52061860$f6124920$@thetaphi.de> <AANLkTinKK2EFU4B--a4VQ8oeiYmCN__8yUU5Aqip-eqr@mail.gmail.com> 
	<008c01cb36e3$2e5ffdb0$8b1ff910$@thetaphi.de> <CDCD81FF-932A-4D8F-BC62-1B5362868237@gmail.com> 
	<AANLkTik=mf5rC2m4yWTDd+sOT+pONMc+gDb-r-OU26fe@mail.gmail.com>
From: =?UTF-8?B?THVrw6HFoSBWbMSNZWs=?= <lukas.vlcek@gmail.com>
Date: Mon, 9 Aug 2010 16:18:20 +0200
Message-ID: <AANLkTikgE3TNYWo7Vc2=_ENmjH7TO37ppdHLrsxH=XA_@mail.gmail.com>
Subject: Re: understanding lucene
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163646d5ec829b00048d64b1f7
X-Virus-Checked: Checked by ClamAV on apache.org

--00163646d5ec829b00048d64b1f7
Content-Type: text/plain; charset=UTF-8

Yakob,
I can really recommend this book.
Regards,
Lukas

On Mon, Aug 9, 2010 at 3:41 PM, Yakob <jacobian@opensuse-id.org> wrote:

> On 8/9/10, Erik Hatcher <erik.hatcher@gmail.com> wrote:
> > An even better URL:  http://www.manning.com/lucene  :)
> >
> >       Erik
>
> so I guess you are the one who wrote this book? :-)
> --
> http://jacobian.web.id
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00163646d5ec829b00048d64b1f7--

From java-user-return-46958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 09 19:17:09 2010
Return-Path: <java-user-return-46958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20165 invoked from network); 9 Aug 2010 19:17:08 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Aug 2010 19:17:08 -0000
Received: (qmail 34216 invoked by uid 500); 9 Aug 2010 19:17:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33900 invoked by uid 500); 9 Aug 2010 19:17:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33883 invoked by uid 99); 9 Aug 2010 19:17:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Aug 2010 19:17:01 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Aug 2010 19:16:54 +0000
Received: by qyk34 with SMTP id 34so10887977qyk.14
        for <multiple recipients>; Mon, 09 Aug 2010 12:16:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:content-type
         :content-transfer-encoding;
        bh=pdvXQYMyH81QEhx+bimAb5nMfUSZh5uAIfMu3eyhGkE=;
        b=ClbHle14Ol9ofqSwnpCXj657Rui0akX9i6uAyeisfFyiON7Y9xjLq5N999eX7VvhLX
         EihbNWw1j2ww7UoLH2lqnt59Kh3RKqjjwP2aGHJ1BoAdYMi8NIvpkH3omqovVkWU2jBG
         d/eZz8timBl/3BufhVgY1QRJBhflJNKKoXVwU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=HtUmpjugBanoIIMT+riPwSM/Mul8GY2eqkwsXhZd7v871zB4ALhO4syjw18afsrTMF
         5r+c2V3iZ2GTJrEb10YkVN3hbG9ZSOTnxhi9CVLgtQcsY0JqschVq9YrEYvcL1Z67b06
         G+rrE0s2YdaMUjtPhDNkxB6OeL9RN34NXWuxM=
Received: by 10.229.181.1 with SMTP id bw1mr5221439qcb.186.1281381393445;
        Mon, 09 Aug 2010 12:16:33 -0700 (PDT)
Received: from Mark-Millers-MacBook-Pro.local (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id mz12sm2042354qcb.18.2010.08.09.12.16.31
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 09 Aug 2010 12:16:32 -0700 (PDT)
Message-ID: <4C60540E.7050106@gmail.com>
Date: Mon, 09 Aug 2010 15:16:30 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.8) Gecko/20100802 Thunderbird/3.1.2
MIME-Version: 1.0
To: solr-user@lucene.apache.org, java-user@lucene.apache.org
Subject: [ANN] Free technical webinar:  Mastering the Lucene Index: Wednesday,
 August 11, 2010 11:00 AM PST / 2:00 PM EST / 20:00 CET
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hey all - apologize for the quick cross post - just to let you know,
Andrzej is giving a free webinar this wed. His presentations are always
fantastic, so check it out:

Lucid Imagination Presents a free technical webinar:  Mastering the
Lucene Index
Wednesday, August 11, 2010 11:00 AM PST / 2:00 PM EST / 20:00 CET

Sign up here:
http://www.eventsvc.com/lucidimagination/081110?trk-AP

Lucene/Solr index implementation is critical to the performance of your
search application and the quality of your results -- and not just at
indexing time. If you're developing applications in Lucene/Solr, your
index will reward care and attention -- adding power to your running
search application -- all the more so as you inevitably increase the
scope of your query traffic and the dimensions of your data.

Join Andrzej Bialecki, Lucene Committer and inventor of the Luke index
utility, for an advanced workshop on cutting edge techniques for keeping
your Lucene/Solr index at its peak potential. Andrzej will discuss and
present essential strategies for index post-processing, including:
* Single-pass index splitting -- reshaping indexes for flexible deployment
* Index pruning, filtering and multi-tiered search, or how to serve
indexes (mostly) from RAM
* Bit-wise search -- or how to find the best bit-wise matches - and
applications in text fingerprinting

About the presenter: Andrzej Bialecki is a committer of the Apache
Lucene project, a Lucene PMC member, and chairman of the Apache Nutch
project. He is also the author of Luke, the Lucene Index Toolbox.
Andrzej participates in many commercial projects that use Lucene, Solr,
Nutch and Hadoop to implement enterprise and vertical search.

Sign up here:
http://www.eventsvc.com/lucidimagination/081110?trk-AP

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 10 02:22:14 2010
Return-Path: <java-user-return-46959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68646 invoked from network); 10 Aug 2010 02:22:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Aug 2010 02:22:14 -0000
Received: (qmail 52006 invoked by uid 500); 10 Aug 2010 02:22:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51932 invoked by uid 500); 10 Aug 2010 02:22:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51924 invoked by uid 99); 10 Aug 2010 02:22:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 02:22:12 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.158 is neither permitted nor denied by domain of luan.cestari@gmail.com)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 02:22:06 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <luan.cestari@gmail.com>)
	id 1OieTK-0001t3-Bj
	for java-user@lucene.apache.org; Mon, 09 Aug 2010 19:21:46 -0700
Date: Mon, 9 Aug 2010 19:21:46 -0700 (PDT)
From: Luan Cestari <luan.cestari@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1281406906339-1066049.post@n3.nabble.com>
In-Reply-To: <AANLkTimrJLnreDntLK9yua6teOkSw7Y7y3_ayz32jF+b@mail.gmail.com>
References: <1281309365193-1049232.post@n3.nabble.com> <AANLkTimrJLnreDntLK9yua6teOkSw7Y7y3_ayz32jF+b@mail.gmail.com>
Subject: Re: Using categories with Lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


We would like to say thanks for the replies.

We found a plugin in Nutch (the Creative Commons plugin) that does like Otis
said. It adds information to the indexes, and then uses them to filter the
results during the query.

Thanks again for the help.

Best Regards,
Daniel & Luan
-- 
View this message in context: http://lucene.472066.n3.nabble.com/Using-categories-with-Lucene-tp1049232p1066049.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 10 03:03:10 2010
Return-Path: <java-user-return-46960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74620 invoked from network); 10 Aug 2010 03:03:10 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Aug 2010 03:03:10 -0000
Received: (qmail 70511 invoked by uid 500); 10 Aug 2010 03:03:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70224 invoked by uid 500); 10 Aug 2010 03:03:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70213 invoked by uid 99); 10 Aug 2010 03:03:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 03:03:04 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of farhang@gmail.com designates 74.125.82.42 as permitted sender)
Received: from [74.125.82.42] (HELO mail-ww0-f42.google.com) (74.125.82.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 03:02:58 +0000
Received: by wwf26 with SMTP id 26so3313080wwf.5
        for <java-user@lucene.apache.org>; Mon, 09 Aug 2010 20:02:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=SCg5z863e4AimTz2/W66yi2fbX+skBUOWl+TYy32hdk=;
        b=pVeoPpXCVs5sPhjtPjXwuEvH5nxL3vutlGZaVfW5UXz7oGcq2a3oXvSMl103xOtKTS
         VCEHcNZzKVAL2/RgDyNhrEFhiHLLxFYsU+52XOr3g0J5WtMlGkWCYYfOrV3CzT+rUdCF
         tnbq6IkPTFO3A8nXhN+nAcs4NSSbLTk1L4Q4c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=voB473dojJZuz92hVfFh+MxQb8EUsnXA/edXb5egtchOIDf80IQ4FuMdKWMMKbKRkw
         lVAMLoQ7omoMWxPkLk4qyTPcOmcJFB7PiNot+mZQB0oE8Zvr7rv6FkaYM34NxMoXxmYH
         TyMPXcYewYV+NOTuBsdFI3u9gT0NOk1xBIW9Q=
MIME-Version: 1.0
Received: by 10.216.70.200 with SMTP id p50mr14627469wed.54.1281409356947; 
	Mon, 09 Aug 2010 20:02:36 -0700 (PDT)
Received: by 10.216.234.196 with HTTP; Mon, 9 Aug 2010 20:02:36 -0700 (PDT)
In-Reply-To: <AANLkTi=XG3EfdT-hX5ENB-3AHcYnTzPDTWGvxxaJLyzJ@mail.gmail.com>
References: <AANLkTimW1YmfTjR5E51jai28Ys5jSYjMSoQOx-2u9qCT@mail.gmail.com>
	<AANLkTikoQKq2veUPu7aMA7eYFFRi_Fd=GYaoBVX8ZQg7@mail.gmail.com>
	<4C5927CE.7090609@code972.com>
	<AANLkTinJvAmJZKut-SBB1rz6eVUXF5L+pezcfu9XEgFC@mail.gmail.com>
	<AANLkTikNFWJ=3bzHsOPRcb32oPrH+TLAKomSRBWodQQ8@mail.gmail.com>
	<4C5975C4.7050909@code972.com>
	<AANLkTim+KGz0ocwYvq0i96yyjuK1NivxYtvmdtQn4bX8@mail.gmail.com>
	<AANLkTikd_b8cFDxThFAYLNgHVt8PpSGmgQEyPWF8pQEr@mail.gmail.com>
	<AANLkTi=XG3EfdT-hX5ENB-3AHcYnTzPDTWGvxxaJLyzJ@mail.gmail.com>
Date: Mon, 9 Aug 2010 21:02:36 -0600
Message-ID: <AANLkTikUuFTtFx9FkoW7GNQr9jOSHPqJ0Gownde9Of=3@mail.gmail.com>
Subject: Re: get wordno, lineno, pageno for term/phrase
From: Babak Farhang <farhang@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

> I tried putting each page as a document, if the phrase is spread
> across two pages, then the span search does not capture it.

Never mind. Mine was a terrible suggestion :)

On Sat, Aug 7, 2010 at 10:46 PM, arun r <arun.raj@gmail.com> wrote:
> I tried putting each page as a document, if the phrase is spread
> across two pages, then the span search does not capture it. Is there a
> work around for this ?
>
> On Sat, Aug 7, 2010 at 8:00 PM, Babak Farhang <farhang@gmail.com> wrote:
>> How about making each line a separate document? You'd worry about
>> scaling it later (e.g. the 32-bit limitation in the number of docs in
>> an index)..
>>
>
> --
> Where there is a will, there is a way !
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 10 06:05:11 2010
Return-Path: <java-user-return-46961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30615 invoked from network); 10 Aug 2010 06:05:10 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Aug 2010 06:05:10 -0000
Received: (qmail 50095 invoked by uid 500); 10 Aug 2010 06:05:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49688 invoked by uid 500); 10 Aug 2010 06:05:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49680 invoked by uid 99); 10 Aug 2010 06:05:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 06:05:03 +0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 06:04:57 +0000
Received: by wyb35 with SMTP id 35so10228692wyb.35
        for <java-user@lucene.apache.org>; Mon, 09 Aug 2010 23:04:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=4fp/CSYWjaIjidBiC6Oy0pNuYdWRsnrGMUmvJ4dYD0w=;
        b=piwr2iVWvpAr0RtcXumdgtDZ11AbrxRetS3OPutYpJza/YeLSiU06hN24U7ZvzdAvt
         wc60bdrppAdBGQWTy5AiMUFi81tS+Wdm4gIfY7x3Kf7eSmRs4FXhecHIVGr0vfaTcexI
         /GBGN+QXUBbAjTWJkqRA3kxLUfxPrBRRO35Vo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=Pf1bklL9Z3XZK1bp42UASa7HMf3j4frxnZUh7J2qbvABAFBCpqWnrlvSi81yTxQBm8
         8CvLbp868e1/w0xcDClIXsIc//5Bd55y+rkW89KBynFgr1r7GBYk/4DuodEn/7OAYHf1
         dWk5dspMyPnB5mfgNfRzPJ0+d+KehtukyvJpY=
Received: by 10.216.159.195 with SMTP id s45mr5150934wek.43.1281420276219; 
	Mon, 09 Aug 2010 23:04:36 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.133.1 with HTTP; Mon, 9 Aug 2010 23:04:16 -0700 (PDT)
In-Reply-To: <1281406906339-1066049.post@n3.nabble.com>
References: <1281309365193-1049232.post@n3.nabble.com> <AANLkTimrJLnreDntLK9yua6teOkSw7Y7y3_ayz32jF+b@mail.gmail.com> 
	<1281406906339-1066049.post@n3.nabble.com>
From: Glen Newton <glen.newton@gmail.com>
Date: Tue, 10 Aug 2010 16:04:16 +1000
Message-ID: <AANLkTimS9gtmKiu-R5rPc=+w40ytMjkjMdqBDDrA48jC@mail.gmail.com>
Subject: Re: Using categories with Lucene
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

Hi Luan,

Could you tell us the name and/or URL of this plugin so that the list
might know about it?
Thanks,
Glen


On 10 August 2010 12:21, Luan Cestari <luan.cestari@gmail.com> wrote:
>
> We would like to say thanks for the replies.
>
> We found a plugin in Nutch (the Creative Commons plugin) that does like Otis
> said. It adds information to the indexes, and then uses them to filter the
> results during the query.
>
> Thanks again for the help.
>
> Best Regards,
> Daniel & Luan
> --
> View this message in context: http://lucene.472066.n3.nabble.com/Using-categories-with-Lucene-tp1049232p1066049.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 10 06:55:22 2010
Return-Path: <java-user-return-46962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47693 invoked from network); 10 Aug 2010 06:55:22 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Aug 2010 06:55:22 -0000
Received: (qmail 86309 invoked by uid 500); 10 Aug 2010 06:55:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85884 invoked by uid 500); 10 Aug 2010 06:55:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85876 invoked by uid 99); 10 Aug 2010 06:55:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 06:55:15 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [122.98.10.31] (HELO KECGATE03.infosys.com) (122.98.10.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 06:55:10 +0000
X-TM-IMSS-Message-ID:<d345eaef000ef7c6@KECGATE03.infosys.com>
Received: from blrkechub02.ad.infosys.com ([10.66.236.42]) by KECGATE03.infosys.com ([122.98.10.31]) with ESMTP (TREND IMSS SMTP Service 7.0) id d345eaef000ef7c6 ; Tue, 10 Aug 2010 12:16:51 +0530
Received: from PUNITPHUB02.ad.infosys.com (10.76.151.42) by
 blrkechub02.ad.infosys.com (10.66.236.42) with Microsoft SMTP Server (TLS) id
 8.2.176.0; Tue, 10 Aug 2010 12:24:47 +0530
Received: from PUNITPMBX02.ad.infosys.com ([10.76.151.22]) by
 PUNITPHUB02.ad.infosys.com ([10.76.151.42]) with mapi; Tue, 10 Aug 2010
 12:24:46 +0530
From: Shelly_Singh <Shelly_Singh@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 10 Aug 2010 12:24:44 +0530
Subject: Scaling Lucene to 1bln docs
Thread-Topic: Scaling Lucene to 1bln docs
Thread-Index: Acs4WOohj3k5Hq5eQoGfYcecriXA3A==
Message-ID: <AA27F54EFDA0CE43B33EBDB7796323740CA2660945@PUNITPMBX02.ad.infosys.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_AA27F54EFDA0CE43B33EBDB7796323740CA2660945PUNITPMBX02ad_"
MIME-Version: 1.0

--_000_AA27F54EFDA0CE43B33EBDB7796323740CA2660945PUNITPMBX02ad_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

I am developing an application which uses Lucene for indexing and searching=
 1 bln documents. (the document size is very small though. Each document ha=
s a single field of 5-10 words; so I believe that my data size is within th=
e tested limits).

I am using the following configuration:
1.      1.5 gig RAM to the jvm
2.      100GB disk space.
3.      Index creation tuning factors:
a.      mergeFactor =3D 10
b.      maxFieldLength =3D 10
c.      maxMergeDocs =3D 5000000 (if I try with a larger value, I get an ou=
t-of-memory)

With these settings, I am able to create an index of 100 million docs (10 p=
ow 8)  in 15 mins consuming a disk space of 2.5gb. Which is quite satisfact=
ory for me, but nevertheless, I want to know what else can be done to tune =
it further. Please help.
Also, with these settings, can I expect the time and size to grow linearly =
for 1bln (10 pow 9) documents?

Thanks and Regards,

Shelly Singh
Center For KNowledge Driven Information Systems, Infosys
Email: shelly_singh@infosys.com<mailto:shelly_singh@infosys.com>
Phone: (M) 91 992 369 7200, (VoIP)2022978622




--_000_AA27F54EFDA0CE43B33EBDB7796323740CA2660945PUNITPMBX02ad_--

From java-user-return-46963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 10 07:25:56 2010
Return-Path: <java-user-return-46963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57010 invoked from network); 10 Aug 2010 07:25:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Aug 2010 07:25:55 -0000
Received: (qmail 7466 invoked by uid 500); 10 Aug 2010 07:25:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7165 invoked by uid 500); 10 Aug 2010 07:25:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7157 invoked by uid 99); 10 Aug 2010 07:25:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 07:25:49 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 07:25:43 +0000
Received: by wwb39 with SMTP id 39so1905664wwb.5
        for <java-user@lucene.apache.org>; Tue, 10 Aug 2010 00:25:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=UbBg5ZUT5J+v6wp2qqPTbVvZoiRqOqQenmq6z2tbFHE=;
        b=voBDXK8VnBQio931zOkl6y3FacTSSb+tw5c72HZ6FzfKtvQpCZHUbsS0GKXfPOwAsm
         aDBjKHI+5L4/SOlcD4K4PEq76xPLp+afqHe8N89YeyZoWvSD62ZybrduK/ozGGQzu1DB
         IvbRD/P108X8vzzY1551Nm0JNWccnHDfrJt5w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=RBu+JFVItbjl3wVAqLQ/HEFdI6ifV8dlwrakA4XDz+wHHeNVTYuHV92W5Is9Iexpv/
         Jr9d4i0QQXPo1Ec6ZoVDBA4tJ7JT8iSBLCpFfH0lTvw/hByBm9WlcM5MaPjKucjL5adv
         SKma9w0wVVmWetje7AQGiHVFy5M35WVWPBsY4=
Received: by 10.227.145.14 with SMTP id b14mr15024414wbv.24.1281425123145; 
	Tue, 10 Aug 2010 00:25:23 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.132.17 with HTTP; Tue, 10 Aug 2010 00:25:03 -0700 (PDT)
In-Reply-To: <AA27F54EFDA0CE43B33EBDB7796323740CA2660945@PUNITPMBX02.ad.infosys.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA2660945@PUNITPMBX02.ad.infosys.com>
From: Anshum <anshumg@gmail.com>
Date: Tue, 10 Aug 2010 12:55:03 +0530
Message-ID: <AANLkTi=4LLNLK-wk9frni=ay0qkEokgnr+sLLfWPyZ=8@mail.gmail.com>
Subject: Re: Scaling Lucene to 1bln docs
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016365eea08457732048d73090c
X-Virus-Checked: Checked by ClamAV on apache.org

--0016365eea08457732048d73090c
Content-Type: text/plain; charset=ISO-8859-1

Hi Shelly,
That seems like a reasonable data set size. I'd suggest you increase your
mergeFactor as a mergeFactor of 10 says, you are only buffering 10 docs in
memory before writing it to a file (and incurring I/O). You could actually
flush by RAM usage instead of a Doc count. Turn off using the Compound file
structure for indexing as it generally takes more time creating a cfs index.

Plus the time would not grow linearly as the larger the size of segments
get, the more time it'd take to add more docs and merge those together
intermittently.
You may also use a multithreaded approach in case reading the source takes
time in your case, though, the indexwriter would have to be shared among all
threads.

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Tue, Aug 10, 2010 at 12:24 PM, Shelly_Singh <Shelly_Singh@infosys.com>wrote:

> Hi,
>
> I am developing an application which uses Lucene for indexing and searching
> 1 bln documents. (the document size is very small though. Each document has
> a single field of 5-10 words; so I believe that my data size is within the
> tested limits).
>
> I am using the following configuration:
> 1.      1.5 gig RAM to the jvm
> 2.      100GB disk space.
> 3.      Index creation tuning factors:
> a.      mergeFactor = 10
> b.      maxFieldLength = 10
> c.      maxMergeDocs = 5000000 (if I try with a larger value, I get an
> out-of-memory)
>
> With these settings, I am able to create an index of 100 million docs (10
> pow 8)  in 15 mins consuming a disk space of 2.5gb. Which is quite
> satisfactory for me, but nevertheless, I want to know what else can be done
> to tune it further. Please help.
> Also, with these settings, can I expect the time and size to grow linearly
> for 1bln (10 pow 9) documents?
>
> Thanks and Regards,
>
> Shelly Singh
> Center For KNowledge Driven Information Systems, Infosys
> Email: shelly_singh@infosys.com<mailto:shelly_singh@infosys.com>
> Phone: (M) 91 992 369 7200, (VoIP)2022978622
>
>
>
>

--0016365eea08457732048d73090c--

From java-user-return-46964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 10 07:36:46 2010
Return-Path: <java-user-return-46964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58986 invoked from network); 10 Aug 2010 07:36:46 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Aug 2010 07:36:46 -0000
Received: (qmail 15073 invoked by uid 500); 10 Aug 2010 07:36:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14758 invoked by uid 500); 10 Aug 2010 07:36:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14750 invoked by uid 99); 10 Aug 2010 07:36:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 07:36:40 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of torindan@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 07:36:35 +0000
Received: by qwd7 with SMTP id 7so11312907qwd.35
        for <java-user@lucene.apache.org>; Tue, 10 Aug 2010 00:36:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=e+MQrMqBpeVDaJB1mSP17IR/PwlFygza2UBU6eYNMXo=;
        b=Af7YdGF+QJ56yOhQoewpNZGoSrzmQu9frl8xO+8zQydqPSX7S3ahmNBuqx12phwDzR
         LP6Vp/F8YQscOj0dpBHIcMpUzrhDqGx/x/jCt/IJrFIJz/3+n9YsF8jI+d49BGLuMtgz
         RUV2bTz3Q5BTAplcnjK+gUBU3aKp3y6AAqnqQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=M1ZuUKAXrCN9miXHipJKSHTSVCW5H8AfKFM8jynaD5KODf58Z0JkJa9rjpDRW5T8RR
         hwHYgJc3RrmQ13vJ/ngtcssG8srbOkBsQyNjORCymm0gM66Q9UXXAV7pxnqmyeMtfQ9w
         BYJmNcVrzOT5pTPhZdqgDRObioO5cXeJmLmfQ=
MIME-Version: 1.0
Received: by 10.224.67.193 with SMTP id s1mr9440369qai.28.1281425774383; Tue, 
	10 Aug 2010 00:36:14 -0700 (PDT)
Received: by 10.229.34.204 with HTTP; Tue, 10 Aug 2010 00:36:14 -0700 (PDT)
In-Reply-To: <AANLkTi=4LLNLK-wk9frni=ay0qkEokgnr+sLLfWPyZ=8@mail.gmail.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA2660945@PUNITPMBX02.ad.infosys.com>
	<AANLkTi=4LLNLK-wk9frni=ay0qkEokgnr+sLLfWPyZ=8@mail.gmail.com>
Date: Tue, 10 Aug 2010 10:36:14 +0300
Message-ID: <AANLkTinEqmbGvxDKD95BJaFodCbqjw=xaL7sf7Npux-s@mail.gmail.com>
Subject: Re: Scaling Lucene to 1bln docs
From: =?UTF-8?B?RGFuaWwgxaJPUklO?= <torindan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

The problem actually won't be the indexing part.

Searching such large dataset will require a LOT of memory.
If you'll need sorting or faceting on one of the fields, jvm will explode ;=
)

Also GC times on large jvm heap are pretty disturbing (if you care
about your search performance)

So I'd advise you to split index into shards, each in it's own jvm.
This way you'll improve both indexing and search performance.

On Tue, Aug 10, 2010 at 10:25, Anshum <anshumg@gmail.com> wrote:
> Hi Shelly,
> That seems like a reasonable data set size. I'd suggest you increase your
> mergeFactor as a mergeFactor of 10 says, you are only buffering 10 docs i=
n
> memory before writing it to a file (and incurring I/O). You could actuall=
y
> flush by RAM usage instead of a Doc count. Turn off using the Compound fi=
le
> structure for indexing as it generally takes more time creating a cfs ind=
ex.
>
> Plus the time would not grow linearly as the larger the size of segments
> get, the more time it'd take to add more docs and merge those together
> intermittently.
> You may also use a multithreaded approach in case reading the source take=
s
> time in your case, though, the indexwriter would have to be shared among =
all
> threads.
>
> --
> Anshum Gupta
> http://ai-cafe.blogspot.com
>
>
> On Tue, Aug 10, 2010 at 12:24 PM, Shelly_Singh <Shelly_Singh@infosys.com>=
wrote:
>
>> Hi,
>>
>> I am developing an application which uses Lucene for indexing and search=
ing
>> 1 bln documents. (the document size is very small though. Each document =
has
>> a single field of 5-10 words; so I believe that my data size is within t=
he
>> tested limits).
>>
>> I am using the following configuration:
>> 1. =C2=A0 =C2=A0 =C2=A01.5 gig RAM to the jvm
>> 2. =C2=A0 =C2=A0 =C2=A0100GB disk space.
>> 3. =C2=A0 =C2=A0 =C2=A0Index creation tuning factors:
>> a. =C2=A0 =C2=A0 =C2=A0mergeFactor =3D 10
>> b. =C2=A0 =C2=A0 =C2=A0maxFieldLength =3D 10
>> c. =C2=A0 =C2=A0 =C2=A0maxMergeDocs =3D 5000000 (if I try with a larger =
value, I get an
>> out-of-memory)
>>
>> With these settings, I am able to create an index of 100 million docs (1=
0
>> pow 8) =C2=A0in 15 mins consuming a disk space of 2.5gb. Which is quite
>> satisfactory for me, but nevertheless, I want to know what else can be d=
one
>> to tune it further. Please help.
>> Also, with these settings, can I expect the time and size to grow linear=
ly
>> for 1bln (10 pow 9) documents?
>>
>> Thanks and Regards,
>>
>> Shelly Singh
>> Center For KNowledge Driven Information Systems, Infosys
>> Email: shelly_singh@infosys.com<mailto:shelly_singh@infosys.com>
>> Phone: (M) 91 992 369 7200, (VoIP)2022978622
>>
>>
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 10 08:02:16 2010
Return-Path: <java-user-return-46965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63397 invoked from network); 10 Aug 2010 08:02:15 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Aug 2010 08:02:15 -0000
Received: (qmail 34213 invoked by uid 500); 10 Aug 2010 08:02:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33604 invoked by uid 500); 10 Aug 2010 08:02:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33595 invoked by uid 99); 10 Aug 2010 08:02:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 08:02:09 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [122.98.14.32] (HELO kecgate02.infosys.com) (122.98.14.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 08:02:04 +0000
X-TM-IMSS-Message-ID:<81423e5b000d7f6d@kecgate02.infosys.com>
Received: from blrkechub02.ad.infosys.com ([10.66.236.42]) by kecgate02.infosys.com ([122.98.14.32]) with ESMTP (TREND IMSS SMTP Service 7.0) id 81423e5b000d7f6d ; Tue, 10 Aug 2010 13:24:58 +0530
Received: from PUNITPCAS01.ad.infosys.com (10.76.151.51) by
 blrkechub02.ad.infosys.com (10.66.236.42) with Microsoft SMTP Server (TLS) id
 8.2.176.0; Tue, 10 Aug 2010 13:31:41 +0530
Received: from PUNITPMBX02.ad.infosys.com ([10.76.151.22]) by
 PUNITPCAS01.ad.infosys.com ([10.76.151.51]) with mapi; Tue, 10 Aug 2010
 13:31:40 +0530
From: Shelly_Singh <Shelly_Singh@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 10 Aug 2010 13:31:38 +0530
Subject: RE: Scaling Lucene to 1bln docs
Thread-Topic: Scaling Lucene to 1bln docs
Thread-Index: Acs4XUeInDRBH5rATUC+sf/n1D/glgAA9sMQ
Message-ID: <AA27F54EFDA0CE43B33EBDB7796323740CA2660988@PUNITPMBX02.ad.infosys.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA2660945@PUNITPMBX02.ad.infosys.com>
 <AANLkTi=4LLNLK-wk9frni=ay0qkEokgnr+sLLfWPyZ=8@mail.gmail.com>
In-Reply-To: <AANLkTi=4LLNLK-wk9frni=ay0qkEokgnr+sLLfWPyZ=8@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Hi Anshum,

I am already running with the 'setCompoundFile' option off.=20
And thanks for pointing out mergeFactor. I had tried a higher mergeFactor c=
ouple of days ago, but got an OOM, so I discarded it. Later I figured that =
OOM was because maxMergeDocs was unlimited and I was using MMap. U r rigt, =
I should try a higher mergeFactor.

With regards to the multithreaded approach, I was considering creating 10 d=
ifferent threads each indexing 100mln docs coupled with a Multisearcher to =
which I will feed these 10 indices. Do you think this will improve performa=
nce.

And just FYI, I have latest reading for 1 bln docs. Indexing time is 2 hrs =
and search time is 15 secs.. I can live with indexing time but the search t=
ime is highly unacceptable.

Help again.

-----Original Message-----
From: Anshum [mailto:anshumg@gmail.com]=20
Sent: Tuesday, August 10, 2010 12:55 PM
To: java-user@lucene.apache.org
Subject: Re: Scaling Lucene to 1bln docs

Hi Shelly,
That seems like a reasonable data set size. I'd suggest you increase your
mergeFactor as a mergeFactor of 10 says, you are only buffering 10 docs in
memory before writing it to a file (and incurring I/O). You could actually
flush by RAM usage instead of a Doc count. Turn off using the Compound file
structure for indexing as it generally takes more time creating a cfs index=
.

Plus the time would not grow linearly as the larger the size of segments
get, the more time it'd take to add more docs and merge those together
intermittently.
You may also use a multithreaded approach in case reading the source takes
time in your case, though, the indexwriter would have to be shared among al=
l
threads.

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Tue, Aug 10, 2010 at 12:24 PM, Shelly_Singh <Shelly_Singh@infosys.com>wr=
ote:

> Hi,
>
> I am developing an application which uses Lucene for indexing and searchi=
ng
> 1 bln documents. (the document size is very small though. Each document h=
as
> a single field of 5-10 words; so I believe that my data size is within th=
e
> tested limits).
>
> I am using the following configuration:
> 1.      1.5 gig RAM to the jvm
> 2.      100GB disk space.
> 3.      Index creation tuning factors:
> a.      mergeFactor =3D 10
> b.      maxFieldLength =3D 10
> c.      maxMergeDocs =3D 5000000 (if I try with a larger value, I get an
> out-of-memory)
>
> With these settings, I am able to create an index of 100 million docs (10
> pow 8)  in 15 mins consuming a disk space of 2.5gb. Which is quite
> satisfactory for me, but nevertheless, I want to know what else can be do=
ne
> to tune it further. Please help.
> Also, with these settings, can I expect the time and size to grow linearl=
y
> for 1bln (10 pow 9) documents?
>
> Thanks and Regards,
>
> Shelly Singh
> Center For KNowledge Driven Information Systems, Infosys
> Email: shelly_singh@infosys.com<mailto:shelly_singh@infosys.com>
> Phone: (M) 91 992 369 7200, (VoIP)2022978622
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 10 08:05:44 2010
Return-Path: <java-user-return-46966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69439 invoked from network); 10 Aug 2010 08:05:44 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Aug 2010 08:05:44 -0000
Received: (qmail 40698 invoked by uid 500); 10 Aug 2010 08:05:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40302 invoked by uid 500); 10 Aug 2010 08:05:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40294 invoked by uid 99); 10 Aug 2010 08:05:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 08:05:38 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [122.98.10.33] (HELO KECGATE08.infosys.com) (122.98.10.33)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 08:05:32 +0000
X-TM-IMSS-Message-ID:<1f93a4e8001bc115@KECGATE08.infosys.com>
Received: from blrkechub04.ad.infosys.com ([10.66.236.44]) by KECGATE08.infosys.com ([122.98.10.33]) with ESMTP (TREND IMSS SMTP Service 7.0) id 1f93a4e8001bc115 ; Tue, 10 Aug 2010 13:37:05 +0530
Received: from PUNITPCAS01.ad.infosys.com (10.76.151.51) by
 blrkechub04.ad.infosys.com (10.66.236.44) with Microsoft SMTP Server (TLS) id
 8.2.176.0; Tue, 10 Aug 2010 13:35:10 +0530
Received: from PUNITPMBX02.ad.infosys.com ([10.76.151.22]) by
 PUNITPCAS01.ad.infosys.com ([10.76.151.51]) with mapi; Tue, 10 Aug 2010
 13:35:09 +0530
From: Shelly_Singh <Shelly_Singh@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 10 Aug 2010 13:35:08 +0530
Subject: RE: Scaling Lucene to 1bln docs
Thread-Topic: Scaling Lucene to 1bln docs
Thread-Index: Acs4XsscDOmmgXJBRqiT+6XnQ410kwAA6g9A
Message-ID: <AA27F54EFDA0CE43B33EBDB7796323740CA266098F@PUNITPMBX02.ad.infosys.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA2660945@PUNITPMBX02.ad.infosys.com>
	<AANLkTi=4LLNLK-wk9frni=ay0qkEokgnr+sLLfWPyZ=8@mail.gmail.com>
 <AANLkTinEqmbGvxDKD95BJaFodCbqjw=xaL7sf7Npux-s@mail.gmail.com>
In-Reply-To: <AANLkTinEqmbGvxDKD95BJaFodCbqjw=xaL7sf7Npux-s@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgRGFuaWwsDQoNCkkgZ2V0IHVyIHBvaW50LiBJbmZhY3QsIHRoZSBsYXRlc3QgcmVhZGluZ3Mg
SSBoYXZlIGZvciAxYmxuIGRvY3MgaXMgYWxzbyBhc3NlcnRpbmcgdGhlIHNhbWUgdGhpbmcuDQpJ
bmRleCBjcmVhdGlvbiB0aW1lIGlzIDIgaG91cnMuLiB3aGljaCBpcyBmaW5lIGJ5IG1lLi4uIGJ1
dCBzZWFyY2ggdGltZSBpcyAxNSBzZWNzLi4gd2hpY2ggaXMgdG9vIGhpZ2ggZm9yIGFueSBhcHBs
aWNhdGlvbi4NCg0KSSBhbSBwbGFubmluZyB0byBkbyBhIHNoYXJkaW5nIG9mIGluZGljZXMgYW5k
IHRoZW4gdXNlIGEgbXVsdGlzZWFyY2hlciBmb3Igc2VhcmNoaW5nLiBXaWxsIHRoYXQgaGVscD8N
Cg0KLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCkZyb206IERhbmlsIMWiT1JJTiBbbWFpbHRv
OnRvcmluZGFuQGdtYWlsLmNvbV0gDQpTZW50OiBUdWVzZGF5LCBBdWd1c3QgMTAsIDIwMTAgMTow
NiBQTQ0KVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KU3ViamVjdDogUmU6IFNjYWxp
bmcgTHVjZW5lIHRvIDFibG4gZG9jcw0KDQpUaGUgcHJvYmxlbSBhY3R1YWxseSB3b24ndCBiZSB0
aGUgaW5kZXhpbmcgcGFydC4NCg0KU2VhcmNoaW5nIHN1Y2ggbGFyZ2UgZGF0YXNldCB3aWxsIHJl
cXVpcmUgYSBMT1Qgb2YgbWVtb3J5Lg0KSWYgeW91J2xsIG5lZWQgc29ydGluZyBvciBmYWNldGlu
ZyBvbiBvbmUgb2YgdGhlIGZpZWxkcywganZtIHdpbGwgZXhwbG9kZSA7KQ0KDQpBbHNvIEdDIHRp
bWVzIG9uIGxhcmdlIGp2bSBoZWFwIGFyZSBwcmV0dHkgZGlzdHVyYmluZyAoaWYgeW91IGNhcmUN
CmFib3V0IHlvdXIgc2VhcmNoIHBlcmZvcm1hbmNlKQ0KDQpTbyBJJ2QgYWR2aXNlIHlvdSB0byBz
cGxpdCBpbmRleCBpbnRvIHNoYXJkcywgZWFjaCBpbiBpdCdzIG93biBqdm0uDQpUaGlzIHdheSB5
b3UnbGwgaW1wcm92ZSBib3RoIGluZGV4aW5nIGFuZCBzZWFyY2ggcGVyZm9ybWFuY2UuDQoNCk9u
IFR1ZSwgQXVnIDEwLCAyMDEwIGF0IDEwOjI1LCBBbnNodW0gPGFuc2h1bWdAZ21haWwuY29tPiB3
cm90ZToNCj4gSGkgU2hlbGx5LA0KPiBUaGF0IHNlZW1zIGxpa2UgYSByZWFzb25hYmxlIGRhdGEg
c2V0IHNpemUuIEknZCBzdWdnZXN0IHlvdSBpbmNyZWFzZSB5b3VyDQo+IG1lcmdlRmFjdG9yIGFz
IGEgbWVyZ2VGYWN0b3Igb2YgMTAgc2F5cywgeW91IGFyZSBvbmx5IGJ1ZmZlcmluZyAxMCBkb2Nz
IGluDQo+IG1lbW9yeSBiZWZvcmUgd3JpdGluZyBpdCB0byBhIGZpbGUgKGFuZCBpbmN1cnJpbmcg
SS9PKS4gWW91IGNvdWxkIGFjdHVhbGx5DQo+IGZsdXNoIGJ5IFJBTSB1c2FnZSBpbnN0ZWFkIG9m
IGEgRG9jIGNvdW50LiBUdXJuIG9mZiB1c2luZyB0aGUgQ29tcG91bmQgZmlsZQ0KPiBzdHJ1Y3R1
cmUgZm9yIGluZGV4aW5nIGFzIGl0IGdlbmVyYWxseSB0YWtlcyBtb3JlIHRpbWUgY3JlYXRpbmcg
YSBjZnMgaW5kZXguDQo+DQo+IFBsdXMgdGhlIHRpbWUgd291bGQgbm90IGdyb3cgbGluZWFybHkg
YXMgdGhlIGxhcmdlciB0aGUgc2l6ZSBvZiBzZWdtZW50cw0KPiBnZXQsIHRoZSBtb3JlIHRpbWUg
aXQnZCB0YWtlIHRvIGFkZCBtb3JlIGRvY3MgYW5kIG1lcmdlIHRob3NlIHRvZ2V0aGVyDQo+IGlu
dGVybWl0dGVudGx5Lg0KPiBZb3UgbWF5IGFsc28gdXNlIGEgbXVsdGl0aHJlYWRlZCBhcHByb2Fj
aCBpbiBjYXNlIHJlYWRpbmcgdGhlIHNvdXJjZSB0YWtlcw0KPiB0aW1lIGluIHlvdXIgY2FzZSwg
dGhvdWdoLCB0aGUgaW5kZXh3cml0ZXIgd291bGQgaGF2ZSB0byBiZSBzaGFyZWQgYW1vbmcgYWxs
DQo+IHRocmVhZHMuDQo+DQo+IC0tDQo+IEFuc2h1bSBHdXB0YQ0KPiBodHRwOi8vYWktY2FmZS5i
bG9nc3BvdC5jb20NCj4NCj4NCj4gT24gVHVlLCBBdWcgMTAsIDIwMTAgYXQgMTI6MjQgUE0sIFNo
ZWxseV9TaW5naCA8U2hlbGx5X1NpbmdoQGluZm9zeXMuY29tPndyb3RlOg0KPg0KPj4gSGksDQo+
Pg0KPj4gSSBhbSBkZXZlbG9waW5nIGFuIGFwcGxpY2F0aW9uIHdoaWNoIHVzZXMgTHVjZW5lIGZv
ciBpbmRleGluZyBhbmQgc2VhcmNoaW5nDQo+PiAxIGJsbiBkb2N1bWVudHMuICh0aGUgZG9jdW1l
bnQgc2l6ZSBpcyB2ZXJ5IHNtYWxsIHRob3VnaC4gRWFjaCBkb2N1bWVudCBoYXMNCj4+IGEgc2lu
Z2xlIGZpZWxkIG9mIDUtMTAgd29yZHM7IHNvIEkgYmVsaWV2ZSB0aGF0IG15IGRhdGEgc2l6ZSBp
cyB3aXRoaW4gdGhlDQo+PiB0ZXN0ZWQgbGltaXRzKS4NCj4+DQo+PiBJIGFtIHVzaW5nIHRoZSBm
b2xsb3dpbmcgY29uZmlndXJhdGlvbjoNCj4+IDEuIMKgIMKgIMKgMS41IGdpZyBSQU0gdG8gdGhl
IGp2bQ0KPj4gMi4gwqAgwqAgwqAxMDBHQiBkaXNrIHNwYWNlLg0KPj4gMy4gwqAgwqAgwqBJbmRl
eCBjcmVhdGlvbiB0dW5pbmcgZmFjdG9yczoNCj4+IGEuIMKgIMKgIMKgbWVyZ2VGYWN0b3IgPSAx
MA0KPj4gYi4gwqAgwqAgwqBtYXhGaWVsZExlbmd0aCA9IDEwDQo+PiBjLiDCoCDCoCDCoG1heE1l
cmdlRG9jcyA9IDUwMDAwMDAgKGlmIEkgdHJ5IHdpdGggYSBsYXJnZXIgdmFsdWUsIEkgZ2V0IGFu
DQo+PiBvdXQtb2YtbWVtb3J5KQ0KPj4NCj4+IFdpdGggdGhlc2Ugc2V0dGluZ3MsIEkgYW0gYWJs
ZSB0byBjcmVhdGUgYW4gaW5kZXggb2YgMTAwIG1pbGxpb24gZG9jcyAoMTANCj4+IHBvdyA4KSDC
oGluIDE1IG1pbnMgY29uc3VtaW5nIGEgZGlzayBzcGFjZSBvZiAyLjVnYi4gV2hpY2ggaXMgcXVp
dGUNCj4+IHNhdGlzZmFjdG9yeSBmb3IgbWUsIGJ1dCBuZXZlcnRoZWxlc3MsIEkgd2FudCB0byBr
bm93IHdoYXQgZWxzZSBjYW4gYmUgZG9uZQ0KPj4gdG8gdHVuZSBpdCBmdXJ0aGVyLiBQbGVhc2Ug
aGVscC4NCj4+IEFsc28sIHdpdGggdGhlc2Ugc2V0dGluZ3MsIGNhbiBJIGV4cGVjdCB0aGUgdGlt
ZSBhbmQgc2l6ZSB0byBncm93IGxpbmVhcmx5DQo+PiBmb3IgMWJsbiAoMTAgcG93IDkpIGRvY3Vt
ZW50cz8NCj4+DQo+PiBUaGFua3MgYW5kIFJlZ2FyZHMsDQo+Pg0KPj4gU2hlbGx5IFNpbmdoDQo+
PiBDZW50ZXIgRm9yIEtOb3dsZWRnZSBEcml2ZW4gSW5mb3JtYXRpb24gU3lzdGVtcywgSW5mb3N5
cw0KPj4gRW1haWw6IHNoZWxseV9zaW5naEBpbmZvc3lzLmNvbTxtYWlsdG86c2hlbGx5X3Npbmdo
QGluZm9zeXMuY29tPg0KPj4gUGhvbmU6IChNKSA5MSA5OTIgMzY5IDcyMDAsIChWb0lQKTIwMjI5
Nzg2MjINCj4+DQo+Pg0KPj4NCj4+DQo+DQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KVG8gdW5zdWJzY3JpYmUs
IGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQpGb3IgYWRk
aXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9y
Zw0KDQo=


From java-user-return-46967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 10 08:24:43 2010
Return-Path: <java-user-return-46967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74388 invoked from network); 10 Aug 2010 08:24:42 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Aug 2010 08:24:42 -0000
Received: (qmail 70684 invoked by uid 500); 10 Aug 2010 08:24:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70320 invoked by uid 500); 10 Aug 2010 08:24:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70312 invoked by uid 99); 10 Aug 2010 08:24:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 08:24:36 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,MIME_BASE64_BLANKS,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 209.85.213.48 as permitted sender)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 08:24:29 +0000
Received: by ywe9 with SMTP id 9so5648982ywe.35
        for <java-user@lucene.apache.org>; Tue, 10 Aug 2010 01:24:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:x-rim-org-msg-ref-id
         :message-id:content-transfer-encoding:reply-to:x-priority:references
         :in-reply-to:sensitivity:importance:subject:to:from:date
         :content-type:mime-version;
        bh=HEHnK879Ke1TOPgx0eKW13YspXDCihbVaJK/J3gUBsA=;
        b=Q6orRKg/ecE1TfCPhM8VM3WHnLqvXbKHtvgtfb7NBeDCu76QEHUXtuvWwVJzV6cbM/
         DF3txYHXGmBS4x73BzScKrb5CvoQo661Qk/fqU2dTDQfHoY8STLHnl9RQ9Z9gqc0tZyr
         dQn1ClEQd87PlX0Ei5udALX5RWbfkmdkW/N0w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=x-rim-org-msg-ref-id:message-id:content-transfer-encoding:reply-to
         :x-priority:references:in-reply-to:sensitivity:importance:subject:to
         :from:date:content-type:mime-version;
        b=aD1W2DDjwz/DU4Qdx5UnxTams9FY6iclkYKQr9P7vVPUuvDNM6C/25fF4UuEp2EqrD
         xWDR4j+3XQnQqLgZcAHmJbdblrqgwwEOLsKY6Ahz7su+Z2T1XhT7bIyDtbBjpBsVpzv1
         zo/AzjhvEUTBB8VlgYcw2KMn3A9e3fG9GhYyk=
Received: by 10.151.77.5 with SMTP id e5mr19005078ybl.245.1281428647512;
        Tue, 10 Aug 2010 01:24:07 -0700 (PDT)
Received: from bda028.bisx.produk.on.blackberry (bda-68-171-236-185.bise.eu.blackberry.com [68.171.236.185])
        by mx.google.com with ESMTPS id e1sm3699667iba.6.2010.08.10.01.24.06
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 10 Aug 2010 01:24:06 -0700 (PDT)
X-rim-org-msg-ref-id:528709861
Message-ID:<528709861-1281428644-cardhu_decombobulator_blackberry.rim.net-283608400-@bda2121.bisx.produk.on.blackberry>
Content-Transfer-Encoding: base64
Reply-To: anshumg@gmail.com
X-Priority: Normal
References: <AA27F54EFDA0CE43B33EBDB7796323740CA2660945@PUNITPMBX02.ad.infosys.com><AANLkTi=4LLNLK-wk9frni=ay0qkEokgnr+sLLfWPyZ=8@mail.gmail.com><AA27F54EFDA0CE43B33EBDB7796323740CA2660988@PUNITPMBX02.ad.infosys.com>
In-Reply-To: <AA27F54EFDA0CE43B33EBDB7796323740CA2660988@PUNITPMBX02.ad.infosys.com>
Sensitivity: Normal
Importance: Normal
Subject: Re: Scaling Lucene to 1bln docs
To: java-user@lucene.apache.org
From: "anshum.gupta@naukri.com" <anshumg@gmail.com>
Date: Tue, 10 Aug 2010 08:24:03 +0000
Content-Type: text/plain; charset="Windows-1252"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

V291bGQgbGlrZSB0byBrbm93LCBhcmUgeW91IHVzaW5nIGEgcGFydGljdWxhciB0eXBlIG9mIHNv
cnQ/IERvIHlvdSBuZWVkIHRvIHNvcnQgb24gcmVsZXZhbmNlPyBDYW4geW91IHNoYXJkIGFuZCBy
ZXN0cmljdCB5b3VyIHNlYXJjaCB0byBhIGxpbWl0ZWQgc2V0IG9mIGluZGV4ZXMgZnVuY3Rpb25h
bGx5Pw0KDQotLQ0KQW5zaHVtDQpodHRwOi8vYmxvZy5hbnNodW1ndXB0YS5uZXQNCg0KU2VudCBm
cm9tIEJsYWNrQmVycnmuDQoNCi0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQpGcm9tOiBTaGVs
bHlfU2luZ2ggPFNoZWxseV9TaW5naEBpbmZvc3lzLmNvbT4NCkRhdGU6IFR1ZSwgMTAgQXVnIDIw
MTAgMTM6MzE6MzggDQpUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnPGphdmEtdXNlckBs
dWNlbmUuYXBhY2hlLm9yZz4NClJlcGx5LVRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcN
ClN1YmplY3Q6IFJFOiBTY2FsaW5nIEx1Y2VuZSB0byAxYmxuIGRvY3MNCg0KSGkgQW5zaHVtLA0K
DQpJIGFtIGFscmVhZHkgcnVubmluZyB3aXRoIHRoZSAnc2V0Q29tcG91bmRGaWxlJyBvcHRpb24g
b2ZmLiANCkFuZCB0aGFua3MgZm9yIHBvaW50aW5nIG91dCBtZXJnZUZhY3Rvci4gSSBoYWQgdHJp
ZWQgYSBoaWdoZXIgbWVyZ2VGYWN0b3IgY291cGxlIG9mIGRheXMgYWdvLCBidXQgZ290IGFuIE9P
TSwgc28gSSBkaXNjYXJkZWQgaXQuIExhdGVyIEkgZmlndXJlZCB0aGF0IE9PTSB3YXMgYmVjYXVz
ZSBtYXhNZXJnZURvY3Mgd2FzIHVubGltaXRlZCBhbmQgSSB3YXMgdXNpbmcgTU1hcC4gVSByIHJp
Z3QsIEkgc2hvdWxkIHRyeSBhIGhpZ2hlciBtZXJnZUZhY3Rvci4NCg0KV2l0aCByZWdhcmRzIHRv
IHRoZSBtdWx0aXRocmVhZGVkIGFwcHJvYWNoLCBJIHdhcyBjb25zaWRlcmluZyBjcmVhdGluZyAx
MCBkaWZmZXJlbnQgdGhyZWFkcyBlYWNoIGluZGV4aW5nIDEwMG1sbiBkb2NzIGNvdXBsZWQgd2l0
aCBhIE11bHRpc2VhcmNoZXIgdG8gd2hpY2ggSSB3aWxsIGZlZWQgdGhlc2UgMTAgaW5kaWNlcy4g
RG8geW91IHRoaW5rIHRoaXMgd2lsbCBpbXByb3ZlIHBlcmZvcm1hbmNlLg0KDQpBbmQganVzdCBG
WUksIEkgaGF2ZSBsYXRlc3QgcmVhZGluZyBmb3IgMSBibG4gZG9jcy4gSW5kZXhpbmcgdGltZSBp
cyAyIGhycyBhbmQgc2VhcmNoIHRpbWUgaXMgMTUgc2Vjcy4uIEkgY2FuIGxpdmUgd2l0aCBpbmRl
eGluZyB0aW1lIGJ1dCB0aGUgc2VhcmNoIHRpbWUgaXMgaGlnaGx5IHVuYWNjZXB0YWJsZS4NCg0K
SGVscCBhZ2Fpbi4NCg0KLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCkZyb206IEFuc2h1bSBb
bWFpbHRvOmFuc2h1bWdAZ21haWwuY29tXSANClNlbnQ6IFR1ZXNkYXksIEF1Z3VzdCAxMCwgMjAx
MCAxMjo1NSBQTQ0KVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KU3ViamVjdDogUmU6
IFNjYWxpbmcgTHVjZW5lIHRvIDFibG4gZG9jcw0KDQpIaSBTaGVsbHksDQpUaGF0IHNlZW1zIGxp
a2UgYSByZWFzb25hYmxlIGRhdGEgc2V0IHNpemUuIEknZCBzdWdnZXN0IHlvdSBpbmNyZWFzZSB5
b3VyDQptZXJnZUZhY3RvciBhcyBhIG1lcmdlRmFjdG9yIG9mIDEwIHNheXMsIHlvdSBhcmUgb25s
eSBidWZmZXJpbmcgMTAgZG9jcyBpbg0KbWVtb3J5IGJlZm9yZSB3cml0aW5nIGl0IHRvIGEgZmls
ZSAoYW5kIGluY3VycmluZyBJL08pLiBZb3UgY291bGQgYWN0dWFsbHkNCmZsdXNoIGJ5IFJBTSB1
c2FnZSBpbnN0ZWFkIG9mIGEgRG9jIGNvdW50LiBUdXJuIG9mZiB1c2luZyB0aGUgQ29tcG91bmQg
ZmlsZQ0Kc3RydWN0dXJlIGZvciBpbmRleGluZyBhcyBpdCBnZW5lcmFsbHkgdGFrZXMgbW9yZSB0
aW1lIGNyZWF0aW5nIGEgY2ZzIGluZGV4Lg0KDQpQbHVzIHRoZSB0aW1lIHdvdWxkIG5vdCBncm93
IGxpbmVhcmx5IGFzIHRoZSBsYXJnZXIgdGhlIHNpemUgb2Ygc2VnbWVudHMNCmdldCwgdGhlIG1v
cmUgdGltZSBpdCdkIHRha2UgdG8gYWRkIG1vcmUgZG9jcyBhbmQgbWVyZ2UgdGhvc2UgdG9nZXRo
ZXINCmludGVybWl0dGVudGx5Lg0KWW91IG1heSBhbHNvIHVzZSBhIG11bHRpdGhyZWFkZWQgYXBw
cm9hY2ggaW4gY2FzZSByZWFkaW5nIHRoZSBzb3VyY2UgdGFrZXMNCnRpbWUgaW4geW91ciBjYXNl
LCB0aG91Z2gsIHRoZSBpbmRleHdyaXRlciB3b3VsZCBoYXZlIHRvIGJlIHNoYXJlZCBhbW9uZyBh
bGwNCnRocmVhZHMuDQoNCi0tDQpBbnNodW0gR3VwdGENCmh0dHA6Ly9haS1jYWZlLmJsb2dzcG90
LmNvbQ0KDQoNCk9uIFR1ZSwgQXVnIDEwLCAyMDEwIGF0IDEyOjI0IFBNLCBTaGVsbHlfU2luZ2gg
PFNoZWxseV9TaW5naEBpbmZvc3lzLmNvbT53cm90ZToNCg0KPiBIaSwNCj4NCj4gSSBhbSBkZXZl
bG9waW5nIGFuIGFwcGxpY2F0aW9uIHdoaWNoIHVzZXMgTHVjZW5lIGZvciBpbmRleGluZyBhbmQg
c2VhcmNoaW5nDQo+IDEgYmxuIGRvY3VtZW50cy4gKHRoZSBkb2N1bWVudCBzaXplIGlzIHZlcnkg
c21hbGwgdGhvdWdoLiBFYWNoIGRvY3VtZW50IGhhcw0KPiBhIHNpbmdsZSBmaWVsZCBvZiA1LTEw
IHdvcmRzOyBzbyBJIGJlbGlldmUgdGhhdCBteSBkYXRhIHNpemUgaXMgd2l0aGluIHRoZQ0KPiB0
ZXN0ZWQgbGltaXRzKS4NCj4NCj4gSSBhbSB1c2luZyB0aGUgZm9sbG93aW5nIGNvbmZpZ3VyYXRp
b246DQo+IDEuICAgICAgMS41IGdpZyBSQU0gdG8gdGhlIGp2bQ0KPiAyLiAgICAgIDEwMEdCIGRp
c2sgc3BhY2UuDQo+IDMuICAgICAgSW5kZXggY3JlYXRpb24gdHVuaW5nIGZhY3RvcnM6DQo+IGEu
ICAgICAgbWVyZ2VGYWN0b3IgPSAxMA0KPiBiLiAgICAgIG1heEZpZWxkTGVuZ3RoID0gMTANCj4g
Yy4gICAgICBtYXhNZXJnZURvY3MgPSA1MDAwMDAwIChpZiBJIHRyeSB3aXRoIGEgbGFyZ2VyIHZh
bHVlLCBJIGdldCBhbg0KPiBvdXQtb2YtbWVtb3J5KQ0KPg0KPiBXaXRoIHRoZXNlIHNldHRpbmdz
LCBJIGFtIGFibGUgdG8gY3JlYXRlIGFuIGluZGV4IG9mIDEwMCBtaWxsaW9uIGRvY3MgKDEwDQo+
IHBvdyA4KSAgaW4gMTUgbWlucyBjb25zdW1pbmcgYSBkaXNrIHNwYWNlIG9mIDIuNWdiLiBXaGlj
aCBpcyBxdWl0ZQ0KPiBzYXRpc2ZhY3RvcnkgZm9yIG1lLCBidXQgbmV2ZXJ0aGVsZXNzLCBJIHdh
bnQgdG8ga25vdyB3aGF0IGVsc2UgY2FuIGJlIGRvbmUNCj4gdG8gdHVuZSBpdCBmdXJ0aGVyLiBQ
bGVhc2UgaGVscC4NCj4gQWxzbywgd2l0aCB0aGVzZSBzZXR0aW5ncywgY2FuIEkgZXhwZWN0IHRo
ZSB0aW1lIGFuZCBzaXplIHRvIGdyb3cgbGluZWFybHkNCj4gZm9yIDFibG4gKDEwIHBvdyA5KSBk
b2N1bWVudHM/DQo+DQo+IFRoYW5rcyBhbmQgUmVnYXJkcywNCj4NCj4gU2hlbGx5IFNpbmdoDQo+
IENlbnRlciBGb3IgS05vd2xlZGdlIERyaXZlbiBJbmZvcm1hdGlvbiBTeXN0ZW1zLCBJbmZvc3lz
DQo+IEVtYWlsOiBzaGVsbHlfc2luZ2hAaW5mb3N5cy5jb208bWFpbHRvOnNoZWxseV9zaW5naEBp
bmZvc3lzLmNvbT4NCj4gUGhvbmU6IChNKSA5MSA5OTIgMzY5IDcyMDAsIChWb0lQKTIwMjI5Nzg2
MjINCj4NCj4NCj4NCj4NCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBq
YXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCkZvciBhZGRpdGlvbmFsIGNv
bW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQoNCg==



From java-user-return-46968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 10 08:55:25 2010
Return-Path: <java-user-return-46968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81414 invoked from network); 10 Aug 2010 08:55:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Aug 2010 08:55:24 -0000
Received: (qmail 8183 invoked by uid 500); 10 Aug 2010 08:55:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7866 invoked by uid 500); 10 Aug 2010 08:55:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7858 invoked by uid 99); 10 Aug 2010 08:55:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 08:55:18 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 08:55:12 +0000
Received: by wwb39 with SMTP id 39so1959554wwb.5
        for <java-user@lucene.apache.org>; Tue, 10 Aug 2010 01:54:51 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.155.3 with SMTP id q3mr14812710wbw.130.1281430491752; Tue, 
	10 Aug 2010 01:54:51 -0700 (PDT)
Received: by 10.216.36.79 with HTTP; Tue, 10 Aug 2010 01:54:51 -0700 (PDT)
In-Reply-To: <528709861-1281428644-cardhu_decombobulator_blackberry.rim.net-283608400-@bda2121.bisx.produk.on.blackberry>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA2660945@PUNITPMBX02.ad.infosys.com>
	<AANLkTi=4LLNLK-wk9frni=ay0qkEokgnr+sLLfWPyZ=8@mail.gmail.com>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660988@PUNITPMBX02.ad.infosys.com>
	<528709861-1281428644-cardhu_decombobulator_blackberry.rim.net-283608400-@bda2121.bisx.produk.on.blackberry>
Date: Tue, 10 Aug 2010 04:54:51 -0400
Message-ID: <AANLkTin+teDpaaNXfd+XuL2XCcFvFXR9r63-uQDacQX7@mail.gmail.com>
Subject: Re: Scaling Lucene to 1bln docs
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org, anshumg@gmail.com
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Correction: mergeFactor determines how many segments are merged at once.

It's IndexWriter's ramBufferSizeMB and/or maxBufferedDocs that
determine how many docs are buffered in RAM before a new segment is
flushed.

A higher mergeFactor will require more RAM during merging, will cause
longer running but fewer merges, requires more open files, and allows
your index to have more segments given a certain number of indexed
docs.

Mike

On Tue, Aug 10, 2010 at 4:24 AM, anshum.gupta@naukri.com
<anshumg@gmail.com> wrote:
> Would like to know, are you using a particular type of sort? Do you need =
to sort on relevance? Can you shard and restrict your search to a limited s=
et of indexes functionally?
>
> --
> Anshum
> http://blog.anshumgupta.net
>
> Sent from BlackBerry=AE
>
> -----Original Message-----
> From: Shelly_Singh <Shelly_Singh@infosys.com>
> Date: Tue, 10 Aug 2010 13:31:38
> To: java-user@lucene.apache.org<java-user@lucene.apache.org>
> Reply-To: java-user@lucene.apache.org
> Subject: RE: Scaling Lucene to 1bln docs
>
> Hi Anshum,
>
> I am already running with the 'setCompoundFile' option off.
> And thanks for pointing out mergeFactor. I had tried a higher mergeFactor=
 couple of days ago, but got an OOM, so I discarded it. Later I figured tha=
t OOM was because maxMergeDocs was unlimited and I was using MMap. U r rigt=
, I should try a higher mergeFactor.
>
> With regards to the multithreaded approach, I was considering creating 10=
 different threads each indexing 100mln docs coupled with a Multisearcher t=
o which I will feed these 10 indices. Do you think this will improve perfor=
mance.
>
> And just FYI, I have latest reading for 1 bln docs. Indexing time is 2 hr=
s and search time is 15 secs.. I can live with indexing time but the search=
 time is highly unacceptable.
>
> Help again.
>
> -----Original Message-----
> From: Anshum [mailto:anshumg@gmail.com]
> Sent: Tuesday, August 10, 2010 12:55 PM
> To: java-user@lucene.apache.org
> Subject: Re: Scaling Lucene to 1bln docs
>
> Hi Shelly,
> That seems like a reasonable data set size. I'd suggest you increase your
> mergeFactor as a mergeFactor of 10 says, you are only buffering 10 docs i=
n
> memory before writing it to a file (and incurring I/O). You could actuall=
y
> flush by RAM usage instead of a Doc count. Turn off using the Compound fi=
le
> structure for indexing as it generally takes more time creating a cfs ind=
ex.
>
> Plus the time would not grow linearly as the larger the size of segments
> get, the more time it'd take to add more docs and merge those together
> intermittently.
> You may also use a multithreaded approach in case reading the source take=
s
> time in your case, though, the indexwriter would have to be shared among =
all
> threads.
>
> --
> Anshum Gupta
> http://ai-cafe.blogspot.com
>
>
> On Tue, Aug 10, 2010 at 12:24 PM, Shelly_Singh <Shelly_Singh@infosys.com>=
wrote:
>
>> Hi,
>>
>> I am developing an application which uses Lucene for indexing and search=
ing
>> 1 bln documents. (the document size is very small though. Each document =
has
>> a single field of 5-10 words; so I believe that my data size is within t=
he
>> tested limits).
>>
>> I am using the following configuration:
>> 1. =A0 =A0 =A01.5 gig RAM to the jvm
>> 2. =A0 =A0 =A0100GB disk space.
>> 3. =A0 =A0 =A0Index creation tuning factors:
>> a. =A0 =A0 =A0mergeFactor =3D 10
>> b. =A0 =A0 =A0maxFieldLength =3D 10
>> c. =A0 =A0 =A0maxMergeDocs =3D 5000000 (if I try with a larger value, I =
get an
>> out-of-memory)
>>
>> With these settings, I am able to create an index of 100 million docs (1=
0
>> pow 8) =A0in 15 mins consuming a disk space of 2.5gb. Which is quite
>> satisfactory for me, but nevertheless, I want to know what else can be d=
one
>> to tune it further. Please help.
>> Also, with these settings, can I expect the time and size to grow linear=
ly
>> for 1bln (10 pow 9) documents?
>>
>> Thanks and Regards,
>>
>> Shelly Singh
>> Center For KNowledge Driven Information Systems, Infosys
>> Email: shelly_singh@infosys.com<mailto:shelly_singh@infosys.com>
>> Phone: (M) 91 992 369 7200, (VoIP)2022978622
>>
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 10 11:47:12 2010
Return-Path: <java-user-return-46969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44867 invoked from network); 10 Aug 2010 11:47:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Aug 2010 11:47:11 -0000
Received: (qmail 91683 invoked by uid 500); 10 Aug 2010 11:47:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91248 invoked by uid 500); 10 Aug 2010 11:47:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91240 invoked by uid 99); 10 Aug 2010 11:47:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 11:47:03 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of findbestopensource@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 11:46:59 +0000
Received: by pwi8 with SMTP id 8so2621309pwi.35
        for <java-user@lucene.apache.org>; Tue, 10 Aug 2010 04:46:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=Q4nKBrMXwTt4erLiZfehu8aUzsA4TRVgnMAQf+fULvA=;
        b=vJ3j4DlkOvU1DdviZ4/hAHS9Fw4eK53C0PeL9hdLfRhPoJ4sIEFk5LR460lXIl5ggB
         UCwAd+XtIeI9i97swcgKaZdrSrJubuqZWsr4uG84/xCEr9Aedt5auHm2NNKTcby/8dZN
         yhe8bQ8nDseyXluGbptF8OHwrWZHUBHI/AQik=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=sRXryQVBwDr8JKlwbQEVfJhgzxrqO0fRCe1m5klQxAFQ0E0lDdIlf5PKke+3hKLznr
         2c27kSFbXYCefQI5iW3Bwof1JMj6YW68Z/xyPOMxMOudtwHQZQs5wirNoQ8VRuac677Z
         z4a2AIwVbiD2ON3h1XeuoFbFgLn4hMcpX9YU0=
MIME-Version: 1.0
Received: by 10.142.214.19 with SMTP id m19mr5819586wfg.240.1281440799064; 
	Tue, 10 Aug 2010 04:46:39 -0700 (PDT)
Received: by 10.142.195.7 with HTTP; Tue, 10 Aug 2010 04:46:39 -0700 (PDT)
In-Reply-To: <AA27F54EFDA0CE43B33EBDB7796323740CA2660988@PUNITPMBX02.ad.infosys.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA2660945@PUNITPMBX02.ad.infosys.com>
	<AANLkTi=4LLNLK-wk9frni=ay0qkEokgnr+sLLfWPyZ=8@mail.gmail.com>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660988@PUNITPMBX02.ad.infosys.com>
Date: Tue, 10 Aug 2010 17:16:39 +0530
Message-ID: <AANLkTimZR77a0GExsDXjxwb8pKOzAhxf9j8E3onVTFSp@mail.gmail.com>
Subject: Re: Scaling Lucene to 1bln docs
From: findbestopensource <findbestopensource@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi Shelly,

You need to reduce your maxMergeDocs. set ramBufferSizeMB to 100,
which will help you to use less RAM in indexing.

>>>search time is 15 secs..
How you are calculating this time. Just taking time difference before
and after the search method or this involves time to parse the
document object and display in the UI?

Is this your first or second search? Usefully first couple of search
takes more time as the index will be warmed. Take benchmark for first
10 -20 search and see if the time has come down.

Is your index optimized? Optimized index may take less time to search.

Regards
Aditya
www.findbestopensource.com

On Tue, Aug 10, 2010 at 1:31 PM, Shelly_Singh <Shelly_Singh@infosys.com> wr=
ote:
> Hi Anshum,
>
> I am already running with the 'setCompoundFile' option off.
> And thanks for pointing out mergeFactor. I had tried a higher mergeFactor=
 couple of days ago, but got an OOM, so I discarded it. Later I figured tha=
t OOM was because maxMergeDocs was unlimited and I was using MMap. U r rigt=
, I should try a higher mergeFactor.
>
> With regards to the multithreaded approach, I was considering creating 10=
 different threads each indexing 100mln docs coupled with a Multisearcher t=
o which I will feed these 10 indices. Do you think this will improve perfor=
mance.
>
> And just FYI, I have latest reading for 1 bln docs. Indexing time is 2 hr=
s and search time is 15 secs.. I can live with indexing time but the search=
 time is highly unacceptable.
>
> Help again.
>
> -----Original Message-----
> From: Anshum [mailto:anshumg@gmail.com]
> Sent: Tuesday, August 10, 2010 12:55 PM
> To: java-user@lucene.apache.org
> Subject: Re: Scaling Lucene to 1bln docs
>
> Hi Shelly,
> That seems like a reasonable data set size. I'd suggest you increase your
> mergeFactor as a mergeFactor of 10 says, you are only buffering 10 docs i=
n
> memory before writing it to a file (and incurring I/O). You could actuall=
y
> flush by RAM usage instead of a Doc count. Turn off using the Compound fi=
le
> structure for indexing as it generally takes more time creating a cfs ind=
ex.
>
> Plus the time would not grow linearly as the larger the size of segments
> get, the more time it'd take to add more docs and merge those together
> intermittently.
> You may also use a multithreaded approach in case reading the source take=
s
> time in your case, though, the indexwriter would have to be shared among =
all
> threads.
>
> --
> Anshum Gupta
> http://ai-cafe.blogspot.com
>
>
> On Tue, Aug 10, 2010 at 12:24 PM, Shelly_Singh <Shelly_Singh@infosys.com>=
wrote:
>
>> Hi,
>>
>> I am developing an application which uses Lucene for indexing and search=
ing
>> 1 bln documents. (the document size is very small though. Each document =
has
>> a single field of 5-10 words; so I believe that my data size is within t=
he
>> tested limits).
>>
>> I am using the following configuration:
>> 1. =A0 =A0 =A01.5 gig RAM to the jvm
>> 2. =A0 =A0 =A0100GB disk space.
>> 3. =A0 =A0 =A0Index creation tuning factors:
>> a. =A0 =A0 =A0mergeFactor =3D 10
>> b. =A0 =A0 =A0maxFieldLength =3D 10
>> c. =A0 =A0 =A0maxMergeDocs =3D 5000000 (if I try with a larger value, I =
get an
>> out-of-memory)
>>
>> With these settings, I am able to create an index of 100 million docs (1=
0
>> pow 8) =A0in 15 mins consuming a disk space of 2.5gb. Which is quite
>> satisfactory for me, but nevertheless, I want to know what else can be d=
one
>> to tune it further. Please help.
>> Also, with these settings, can I expect the time and size to grow linear=
ly
>> for 1bln (10 pow 9) documents?
>>
>> Thanks and Regards,
>>
>> Shelly Singh
>> Center For KNowledge Driven Information Systems, Infosys
>> Email: shelly_singh@infosys.com<mailto:shelly_singh@infosys.com>
>> Phone: (M) 91 992 369 7200, (VoIP)2022978622
>>
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 10 12:20:11 2010
Return-Path: <java-user-return-46970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55564 invoked from network); 10 Aug 2010 12:20:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Aug 2010 12:20:11 -0000
Received: (qmail 24917 invoked by uid 500); 10 Aug 2010 12:20:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24478 invoked by uid 500); 10 Aug 2010 12:20:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24468 invoked by uid 99); 10 Aug 2010 12:20:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 12:20:04 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [122.98.14.32] (HELO kecgate02.infosys.com) (122.98.14.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 12:20:00 +0000
X-TM-IMSS-Message-ID:<822e6475000dc205@kecgate02.infosys.com>
Received: from blrkechub01.ad.infosys.com ([10.66.236.41]) by kecgate02.infosys.com ([122.98.14.32]) with ESMTP (TREND IMSS SMTP Service 7.0) id 822e6475000dc205 ; Tue, 10 Aug 2010 17:42:54 +0530
Received: from PUNITPHCS01.ad.infosys.com (10.76.151.41) by
 blrkechub01.ad.infosys.com (10.66.236.41) with Microsoft SMTP Server (TLS) id
 8.2.176.0; Tue, 10 Aug 2010 17:49:37 +0530
Received: from PUNITPMBX02.ad.infosys.com ([10.76.151.22]) by
 PUNITPHCS01.ad.infosys.com ([10.76.151.41]) with mapi; Tue, 10 Aug 2010
 17:49:36 +0530
From: Shelly_Singh <Shelly_Singh@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 10 Aug 2010 17:49:35 +0530
Subject: RE: Scaling Lucene to 1bln docs
Thread-Topic: Scaling Lucene to 1bln docs
Thread-Index: Acs4ZX6Hd4d1EAjkQbm8P/yiV7KYAwAIKUeQ
Message-ID: <AA27F54EFDA0CE43B33EBDB7796323740CA2660B35@PUNITPMBX02.ad.infosys.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA2660945@PUNITPMBX02.ad.infosys.com><AANLkTi=4LLNLK-wk9frni=ay0qkEokgnr+sLLfWPyZ=8@mail.gmail.com><AA27F54EFDA0CE43B33EBDB7796323740CA2660988@PUNITPMBX02.ad.infosys.com>
 <528709861-1281428644-cardhu_decombobulator_blackberry.rim.net-283608400-@bda2121.bisx.produk.on.blackberry>
In-Reply-To: <528709861-1281428644-cardhu_decombobulator_blackberry.rim.net-283608400-@bda2121.bisx.produk.on.blackberry>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

No sort. I will need relevance based on TF. If I shard, I will have to sear=
ch in al indices.

-----Original Message-----
From: anshum.gupta@naukri.com [mailto:anshumg@gmail.com]=20
Sent: Tuesday, August 10, 2010 1:54 PM
To: java-user@lucene.apache.org
Subject: Re: Scaling Lucene to 1bln docs

Would like to know, are you using a particular type of sort? Do you need to=
 sort on relevance? Can you shard and restrict your search to a limited set=
 of indexes functionally?

--
Anshum
http://blog.anshumgupta.net

Sent from BlackBerry(r)

-----Original Message-----
From: Shelly_Singh <Shelly_Singh@infosys.com>
Date: Tue, 10 Aug 2010 13:31:38=20
To: java-user@lucene.apache.org<java-user@lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Subject: RE: Scaling Lucene to 1bln docs

Hi Anshum,

I am already running with the 'setCompoundFile' option off.=20
And thanks for pointing out mergeFactor. I had tried a higher mergeFactor c=
ouple of days ago, but got an OOM, so I discarded it. Later I figured that =
OOM was because maxMergeDocs was unlimited and I was using MMap. U r rigt, =
I should try a higher mergeFactor.

With regards to the multithreaded approach, I was considering creating 10 d=
ifferent threads each indexing 100mln docs coupled with a Multisearcher to =
which I will feed these 10 indices. Do you think this will improve performa=
nce.

And just FYI, I have latest reading for 1 bln docs. Indexing time is 2 hrs =
and search time is 15 secs.. I can live with indexing time but the search t=
ime is highly unacceptable.

Help again.

-----Original Message-----
From: Anshum [mailto:anshumg@gmail.com]=20
Sent: Tuesday, August 10, 2010 12:55 PM
To: java-user@lucene.apache.org
Subject: Re: Scaling Lucene to 1bln docs

Hi Shelly,
That seems like a reasonable data set size. I'd suggest you increase your
mergeFactor as a mergeFactor of 10 says, you are only buffering 10 docs in
memory before writing it to a file (and incurring I/O). You could actually
flush by RAM usage instead of a Doc count. Turn off using the Compound file
structure for indexing as it generally takes more time creating a cfs index=
.

Plus the time would not grow linearly as the larger the size of segments
get, the more time it'd take to add more docs and merge those together
intermittently.
You may also use a multithreaded approach in case reading the source takes
time in your case, though, the indexwriter would have to be shared among al=
l
threads.

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Tue, Aug 10, 2010 at 12:24 PM, Shelly_Singh <Shelly_Singh@infosys.com>wr=
ote:

> Hi,
>
> I am developing an application which uses Lucene for indexing and searchi=
ng
> 1 bln documents. (the document size is very small though. Each document h=
as
> a single field of 5-10 words; so I believe that my data size is within th=
e
> tested limits).
>
> I am using the following configuration:
> 1.      1.5 gig RAM to the jvm
> 2.      100GB disk space.
> 3.      Index creation tuning factors:
> a.      mergeFactor =3D 10
> b.      maxFieldLength =3D 10
> c.      maxMergeDocs =3D 5000000 (if I try with a larger value, I get an
> out-of-memory)
>
> With these settings, I am able to create an index of 100 million docs (10
> pow 8)  in 15 mins consuming a disk space of 2.5gb. Which is quite
> satisfactory for me, but nevertheless, I want to know what else can be do=
ne
> to tune it further. Please help.
> Also, with these settings, can I expect the time and size to grow linearl=
y
> for 1bln (10 pow 9) documents?
>
> Thanks and Regards,
>
> Shelly Singh
> Center For KNowledge Driven Information Systems, Infosys
> Email: shelly_singh@infosys.com<mailto:shelly_singh@infosys.com>
> Phone: (M) 91 992 369 7200, (VoIP)2022978622
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 10 12:29:24 2010
Return-Path: <java-user-return-46971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64766 invoked from network); 10 Aug 2010 12:29:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Aug 2010 12:29:24 -0000
Received: (qmail 35819 invoked by uid 500); 10 Aug 2010 12:29:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34661 invoked by uid 500); 10 Aug 2010 12:29:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34187 invoked by uid 99); 10 Aug 2010 12:29:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 12:29:18 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 12:29:13 +0000
Received: by wyb35 with SMTP id 35so10586130wyb.35
        for <java-user@lucene.apache.org>; Tue, 10 Aug 2010 05:28:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=urw/qfDs4ELxP9hp2RHCEyNbrpzOMWZMrxzFbir/4/g=;
        b=Tq1c75E2/pPw5HSMlRy0Pc/ODZPLDEXoWPwCjTfAen8UW7IubesHAdkKmR+7BSyhxY
         W3ISYOHbpK+2H/FvtMwNs6YSoidbqoSbDFIJcRt+SG2G2hJu1sdxc29KEX5OooBP2wfk
         QHw49nBwdePwf923l05Jl8XAZcEtt56NI/gXY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=M+CXwKxasxdbn9mz2qP2pb3I1BOCPy9iy5eToD3VuodQ77fkirtjiyQDn/ptI+RXEa
         CC+Hry4Yew1Y8aqpejf7Ab/KtvY2gILJ8P4CY3SoY4mdNyzKwmxBCcEfehwFn2DaVgmj
         G+eyoY15qFzOUZQPaGzmt0/DCPO86/zJK0c5s=
Received: by 10.227.136.136 with SMTP id r8mr15112320wbt.156.1281443331156; 
	Tue, 10 Aug 2010 05:28:51 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.132.17 with HTTP; Tue, 10 Aug 2010 05:28:31 -0700 (PDT)
In-Reply-To: <AA27F54EFDA0CE43B33EBDB7796323740CA2660B35@PUNITPMBX02.ad.infosys.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA2660945@PUNITPMBX02.ad.infosys.com> 
	<AANLkTi=4LLNLK-wk9frni=ay0qkEokgnr+sLLfWPyZ=8@mail.gmail.com> 
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660988@PUNITPMBX02.ad.infosys.com> 
	<528709861-1281428644-cardhu_decombobulator_blackberry.rim.net-283608400-@bda2121.bisx.produk.on.blackberry> 
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660B35@PUNITPMBX02.ad.infosys.com>
From: Anshum <anshumg@gmail.com>
Date: Tue, 10 Aug 2010 17:58:31 +0530
Message-ID: <AANLkTimUtwm_EHRTcO9nh8T49ycWqnuTx2HQf3J902nY@mail.gmail.com>
Subject: Re: Scaling Lucene to 1bln docs
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636457afe8db185048d77465a

--001636457afe8db185048d77465a
Content-Type: text/plain; charset=ISO-8859-1

Searching on all indices shouldn't be that bad an idea instead of searching
a single huge index, specially considering you have a constraint on the
usable memory.
You could use a ParallelMultiSearcher which spawns threads to query across
indexes and merges the results.
What I asked was, is there a way for you to leave out a few indexes each
time you want to query? something like, while designing an engine for a
timeline based search, you would shard the index on timeline, and as a query
would be associated with a particular period you would only query the
indexes containing data for that period.
This would make the data manageable and searchable within reasonable time.

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Tue, Aug 10, 2010 at 5:49 PM, Shelly_Singh <Shelly_Singh@infosys.com>wrote:

> No sort. I will need relevance based on TF. If I shard, I will have to
> search in al indices.
>
> -----Original Message-----
> From: anshum.gupta@naukri.com [mailto:anshumg@gmail.com]
> Sent: Tuesday, August 10, 2010 1:54 PM
> To: java-user@lucene.apache.org
> Subject: Re: Scaling Lucene to 1bln docs
>
> Would like to know, are you using a particular type of sort? Do you need to
> sort on relevance? Can you shard and restrict your search to a limited set
> of indexes functionally?
>
> --
> Anshum
> http://blog.anshumgupta.net
>
> Sent from BlackBerry(r)
>
> -----Original Message-----
> From: Shelly_Singh <Shelly_Singh@infosys.com>
> Date: Tue, 10 Aug 2010 13:31:38
> To: java-user@lucene.apache.org<java-user@lucene.apache.org>
> Reply-To: java-user@lucene.apache.org
> Subject: RE: Scaling Lucene to 1bln docs
>
> Hi Anshum,
>
> I am already running with the 'setCompoundFile' option off.
> And thanks for pointing out mergeFactor. I had tried a higher mergeFactor
> couple of days ago, but got an OOM, so I discarded it. Later I figured that
> OOM was because maxMergeDocs was unlimited and I was using MMap. U r rigt, I
> should try a higher mergeFactor.
>
> With regards to the multithreaded approach, I was considering creating 10
> different threads each indexing 100mln docs coupled with a Multisearcher to
> which I will feed these 10 indices. Do you think this will improve
> performance.
>
> And just FYI, I have latest reading for 1 bln docs. Indexing time is 2 hrs
> and search time is 15 secs.. I can live with indexing time but the search
> time is highly unacceptable.
>
> Help again.
>
> -----Original Message-----
> From: Anshum [mailto:anshumg@gmail.com]
> Sent: Tuesday, August 10, 2010 12:55 PM
> To: java-user@lucene.apache.org
> Subject: Re: Scaling Lucene to 1bln docs
>
> Hi Shelly,
> That seems like a reasonable data set size. I'd suggest you increase your
> mergeFactor as a mergeFactor of 10 says, you are only buffering 10 docs in
> memory before writing it to a file (and incurring I/O). You could actually
> flush by RAM usage instead of a Doc count. Turn off using the Compound file
> structure for indexing as it generally takes more time creating a cfs
> index.
>
> Plus the time would not grow linearly as the larger the size of segments
> get, the more time it'd take to add more docs and merge those together
> intermittently.
> You may also use a multithreaded approach in case reading the source takes
> time in your case, though, the indexwriter would have to be shared among
> all
> threads.
>
> --
> Anshum Gupta
> http://ai-cafe.blogspot.com
>
>
> On Tue, Aug 10, 2010 at 12:24 PM, Shelly_Singh <Shelly_Singh@infosys.com
> >wrote:
>
> > Hi,
> >
> > I am developing an application which uses Lucene for indexing and
> searching
> > 1 bln documents. (the document size is very small though. Each document
> has
> > a single field of 5-10 words; so I believe that my data size is within
> the
> > tested limits).
> >
> > I am using the following configuration:
> > 1.      1.5 gig RAM to the jvm
> > 2.      100GB disk space.
> > 3.      Index creation tuning factors:
> > a.      mergeFactor = 10
> > b.      maxFieldLength = 10
> > c.      maxMergeDocs = 5000000 (if I try with a larger value, I get an
> > out-of-memory)
> >
> > With these settings, I am able to create an index of 100 million docs (10
> > pow 8)  in 15 mins consuming a disk space of 2.5gb. Which is quite
> > satisfactory for me, but nevertheless, I want to know what else can be
> done
> > to tune it further. Please help.
> > Also, with these settings, can I expect the time and size to grow
> linearly
> > for 1bln (10 pow 9) documents?
> >
> > Thanks and Regards,
> >
> > Shelly Singh
> > Center For KNowledge Driven Information Systems, Infosys
> > Email: shelly_singh@infosys.com<mailto:shelly_singh@infosys.com>
> > Phone: (M) 91 992 369 7200, (VoIP)2022978622
> >
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636457afe8db185048d77465a--

From java-user-return-46972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 10 12:32:40 2010
Return-Path: <java-user-return-46972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65964 invoked from network); 10 Aug 2010 12:32:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Aug 2010 12:32:40 -0000
Received: (qmail 38897 invoked by uid 500); 10 Aug 2010 12:32:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38600 invoked by uid 500); 10 Aug 2010 12:32:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38592 invoked by uid 99); 10 Aug 2010 12:32:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 12:32:34 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.123.65.155] (HELO mail2.acquiremedia.com) (209.123.65.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 12:32:29 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail2.acquiremedia.com (Postfix) with ESMTP id 122005AC0B2
	for <java-user@lucene.apache.org>; Tue, 10 Aug 2010 08:32:08 -0400 (EDT)
X-Virus-Scanned: amavisd-new at acquiremedia.com
Received: from mail2.acquiremedia.com ([127.0.0.1])
	by localhost (mail.mmu.acquiremedia.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id JhVpDnedHmLJ for <java-user@lucene.apache.org>;
	Tue, 10 Aug 2010 08:32:07 -0400 (EDT)
Received: from exchange.mmu.acquiremedia.com (exchange.mmu.acquiremedia.com [10.10.40.251])
	by mail2.acquiremedia.com (Postfix) with ESMTP
	for <java-user@lucene.apache.org>; Tue, 10 Aug 2010 08:32:07 -0400 (EDT)
Received: from exchange.windows.mmu.acquiremedia.com ([10.10.40.251]) by
 exchange.windows.mmu.acquiremedia.com ([10.10.40.251]) with mapi; Tue, 10 Aug
 2010 08:32:07 -0400
From: Dan OConnor <doconnor@acquiremedia.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 10 Aug 2010 08:32:12 -0400
Subject: RE: Scaling Lucene to 1bln docs
Thread-Topic: Scaling Lucene to 1bln docs
Thread-Index: Acs4ZX6Hd4d1EAjkQbm8P/yiV7KYAwAIKUeQAABHo0A=
Message-ID: <3B4AEBB59588ED409ECE3CB6517C41750EC8C16BEC@exchange.windows.mmu.acquiremedia.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA2660945@PUNITPMBX02.ad.infosys.com><AANLkTi=4LLNLK-wk9frni=ay0qkEokgnr+sLLfWPyZ=8@mail.gmail.com><AA27F54EFDA0CE43B33EBDB7796323740CA2660988@PUNITPMBX02.ad.infosys.com>
 <528709861-1281428644-cardhu_decombobulator_blackberry.rim.net-283608400-@bda2121.bisx.produk.on.blackberry>
 <AA27F54EFDA0CE43B33EBDB7796323740CA2660B35@PUNITPMBX02.ad.infosys.com>
In-Reply-To: <AA27F54EFDA0CE43B33EBDB7796323740CA2660B35@PUNITPMBX02.ad.infosys.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Shelly:

You wouldn't necessarily have to use a multisearcher. A suggested alternati=
ve is:

- shard into 10 indices. If you need the concept of a date range search, I =
would assign the documents to the shard by date, otherwise random assignmen=
t is fine.
- have a pool of IndexSearchers for each index
- when a search comes in, allocate a Searcher from each index to the search=
.
- perform the search in parallel across all indices.
- merge the results in your own code using an efficient merging algorithm.

Regards,
Dan




-----Original Message-----
From: Shelly_Singh [mailto:Shelly_Singh@infosys.com]=20
Sent: Tuesday, August 10, 2010 8:20 AM
To: java-user@lucene.apache.org
Subject: RE: Scaling Lucene to 1bln docs

No sort. I will need relevance based on TF. If I shard, I will have to sear=
ch in al indices.

-----Original Message-----
From: anshum.gupta@naukri.com [mailto:anshumg@gmail.com]=20
Sent: Tuesday, August 10, 2010 1:54 PM
To: java-user@lucene.apache.org
Subject: Re: Scaling Lucene to 1bln docs

Would like to know, are you using a particular type of sort? Do you need to=
 sort on relevance? Can you shard and restrict your search to a limited set=
 of indexes functionally?

--
Anshum
http://blog.anshumgupta.net

Sent from BlackBerry(r)

-----Original Message-----
From: Shelly_Singh <Shelly_Singh@infosys.com>
Date: Tue, 10 Aug 2010 13:31:38=20
To: java-user@lucene.apache.org<java-user@lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Subject: RE: Scaling Lucene to 1bln docs

Hi Anshum,

I am already running with the 'setCompoundFile' option off.=20
And thanks for pointing out mergeFactor. I had tried a higher mergeFactor c=
ouple of days ago, but got an OOM, so I discarded it. Later I figured that =
OOM was because maxMergeDocs was unlimited and I was using MMap. U r rigt, =
I should try a higher mergeFactor.

With regards to the multithreaded approach, I was considering creating 10 d=
ifferent threads each indexing 100mln docs coupled with a Multisearcher to =
which I will feed these 10 indices. Do you think this will improve performa=
nce.

And just FYI, I have latest reading for 1 bln docs. Indexing time is 2 hrs =
and search time is 15 secs.. I can live with indexing time but the search t=
ime is highly unacceptable.

Help again.

-----Original Message-----
From: Anshum [mailto:anshumg@gmail.com]=20
Sent: Tuesday, August 10, 2010 12:55 PM
To: java-user@lucene.apache.org
Subject: Re: Scaling Lucene to 1bln docs

Hi Shelly,
That seems like a reasonable data set size. I'd suggest you increase your
mergeFactor as a mergeFactor of 10 says, you are only buffering 10 docs in
memory before writing it to a file (and incurring I/O). You could actually
flush by RAM usage instead of a Doc count. Turn off using the Compound file
structure for indexing as it generally takes more time creating a cfs index=
.

Plus the time would not grow linearly as the larger the size of segments
get, the more time it'd take to add more docs and merge those together
intermittently.
You may also use a multithreaded approach in case reading the source takes
time in your case, though, the indexwriter would have to be shared among al=
l
threads.

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Tue, Aug 10, 2010 at 12:24 PM, Shelly_Singh <Shelly_Singh@infosys.com>wr=
ote:

> Hi,
>
> I am developing an application which uses Lucene for indexing and searchi=
ng
> 1 bln documents. (the document size is very small though. Each document h=
as
> a single field of 5-10 words; so I believe that my data size is within th=
e
> tested limits).
>
> I am using the following configuration:
> 1.      1.5 gig RAM to the jvm
> 2.      100GB disk space.
> 3.      Index creation tuning factors:
> a.      mergeFactor =3D 10
> b.      maxFieldLength =3D 10
> c.      maxMergeDocs =3D 5000000 (if I try with a larger value, I get an
> out-of-memory)
>
> With these settings, I am able to create an index of 100 million docs (10
> pow 8)  in 15 mins consuming a disk space of 2.5gb. Which is quite
> satisfactory for me, but nevertheless, I want to know what else can be do=
ne
> to tune it further. Please help.
> Also, with these settings, can I expect the time and size to grow linearl=
y
> for 1bln (10 pow 9) documents?
>
> Thanks and Regards,
>
> Shelly Singh
> Center For KNowledge Driven Information Systems, Infosys
> Email: shelly_singh@infosys.com<mailto:shelly_singh@infosys.com>
> Phone: (M) 91 992 369 7200, (VoIP)2022978622
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 10 12:36:08 2010
Return-Path: <java-user-return-46973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66743 invoked from network); 10 Aug 2010 12:36:08 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Aug 2010 12:36:08 -0000
Received: (qmail 46514 invoked by uid 500); 10 Aug 2010 12:36:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46237 invoked by uid 500); 10 Aug 2010 12:36:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46229 invoked by uid 99); 10 Aug 2010 12:36:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 12:36:02 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [122.98.10.33] (HELO KECGATE08.infosys.com) (122.98.10.33)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 12:35:57 +0000
X-TM-IMSS-Message-ID:<208b3213001c073b@KECGATE08.infosys.com>
Received: from blrkechub03.ad.infosys.com ([10.66.236.43]) by KECGATE08.infosys.com ([122.98.10.33]) with ESMTP (TREND IMSS SMTP Service 7.0) id 208b3213001c073b ; Tue, 10 Aug 2010 18:07:28 +0530
Received: from PUNITPCAS02.ad.infosys.com (10.76.151.52) by
 blrkechub03.ad.infosys.com (10.66.236.43) with Microsoft SMTP Server (TLS) id
 8.2.176.0; Tue, 10 Aug 2010 18:05:34 +0530
Received: from PUNITPMBX02.ad.infosys.com ([10.76.151.22]) by
 PUNITPCAS02.ad.infosys.com ([10.76.151.52]) with mapi; Tue, 10 Aug 2010
 18:05:34 +0530
From: Shelly_Singh <Shelly_Singh@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 10 Aug 2010 18:05:31 +0530
Subject: RE: Scaling Lucene to 1bln docs
Thread-Topic: Scaling Lucene to 1bln docs
Thread-Index: Acs4h60PDmKTHCRiQ8iqcufTxUBPjgAAH1Vg
Message-ID: <AA27F54EFDA0CE43B33EBDB7796323740CA2660B42@PUNITPMBX02.ad.infosys.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA2660945@PUNITPMBX02.ad.infosys.com>
 	<AANLkTi=4LLNLK-wk9frni=ay0qkEokgnr+sLLfWPyZ=8@mail.gmail.com>
 	<AA27F54EFDA0CE43B33EBDB7796323740CA2660988@PUNITPMBX02.ad.infosys.com>
 	<528709861-1281428644-cardhu_decombobulator_blackberry.rim.net-283608400-@bda2121.bisx.produk.on.blackberry>
 	<AA27F54EFDA0CE43B33EBDB7796323740CA2660B35@PUNITPMBX02.ad.infosys.com>
 <AANLkTimUtwm_EHRTcO9nh8T49ycWqnuTx2HQf3J902nY@mail.gmail.com>
In-Reply-To: <AANLkTimUtwm_EHRTcO9nh8T49ycWqnuTx2HQf3J902nY@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

I do not see a way to optimally decide how to shard the data. Its very diff=
icult for my  purpose; and so the safe bet is to assume that all indices wi=
ll need to be searched.

Okay, I can try ParallelMultiSearcher in addition to MultiSearcher.

-----Original Message-----
From: Anshum [mailto:anshumg@gmail.com]=20
Sent: Tuesday, August 10, 2010 5:59 PM
To: java-user@lucene.apache.org
Subject: Re: Scaling Lucene to 1bln docs

Searching on all in dices shouldn't be that bad an idea instead of searchin=
g
a single huge index, specially considering you have a constraint on the
usable memory.
You could use a ParallelMultiSearcher which spawns threads to query across
indexes and merges the results.
What I asked was, is there a way for you to leave out a few indexes each
time you want to query? something like, while designing an engine for a
timeline based search, you would shard the index on timeline, and as a quer=
y
would be associated with a particular period you would only query the
indexes containing data for that period.
This would make the data manageable and searchable within reasonable time.

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Tue, Aug 10, 2010 at 5:49 PM, Shelly_Singh <Shelly_Singh@infosys.com>wro=
te:

> No sort. I will need relevance based on TF. If I shard, I will have to
> search in al indices.
>
> -----Original Message-----
> From: anshum.gupta@naukri.com [mailto:anshumg@gmail.com]
> Sent: Tuesday, August 10, 2010 1:54 PM
> To: java-user@lucene.apache.org
> Subject: Re: Scaling Lucene to 1bln docs
>
> Would like to know, are you using a particular type of sort? Do you need =
to
> sort on relevance? Can you shard and restrict your search to a limited se=
t
> of indexes functionally?
>
> --
> Anshum
> http://blog.anshumgupta.net
>
> Sent from BlackBerry(r)
>
> -----Original Message-----
> From: Shelly_Singh <Shelly_Singh@infosys.com>
> Date: Tue, 10 Aug 2010 13:31:38
> To: java-user@lucene.apache.org<java-user@lucene.apache.org>
> Reply-To: java-user@lucene.apache.org
> Subject: RE: Scaling Lucene to 1bln docs
>
> Hi Anshum,
>
> I am already running with the 'setCompoundFile' option off.
> And thanks for pointing out mergeFactor. I had tried a higher mergeFactor
> couple of days ago, but got an OOM, so I discarded it. Later I figured th=
at
> OOM was because maxMergeDocs was unlimited and I was using MMap. U r rigt=
, I
> should try a higher mergeFactor.
>
> With regards to the multithreaded approach, I was considering creating 10
> different threads each indexing 100mln docs coupled with a Multisearcher =
to
> which I will feed these 10 indices. Do you think this will improve
> performance.
>
> And just FYI, I have latest reading for 1 bln docs. Indexing time is 2 hr=
s
> and search time is 15 secs.. I can live with indexing time but the search
> time is highly unacceptable.
>
> Help again.
>
> -----Original Message-----
> From: Anshum [mailto:anshumg@gmail.com]
> Sent: Tuesday, August 10, 2010 12:55 PM
> To: java-user@lucene.apache.org
> Subject: Re: Scaling Lucene to 1bln docs
>
> Hi Shelly,
> That seems like a reasonable data set size. I'd suggest you increase your
> mergeFactor as a mergeFactor of 10 says, you are only buffering 10 docs i=
n
> memory before writing it to a file (and incurring I/O). You could actuall=
y
> flush by RAM usage instead of a Doc count. Turn off using the Compound fi=
le
> structure for indexing as it generally takes more time creating a cfs
> index.
>
> Plus the time would not grow linearly as the larger the size of segments
> get, the more time it'd take to add more docs and merge those together
> intermittently.
> You may also use a multithreaded approach in case reading the source take=
s
> time in your case, though, the indexwriter would have to be shared among
> all
> threads.
>
> --
> Anshum Gupta
> http://ai-cafe.blogspot.com
>
>
> On Tue, Aug 10, 2010 at 12:24 PM, Shelly_Singh <Shelly_Singh@infosys.com
> >wrote:
>
> > Hi,
> >
> > I am developing an application which uses Lucene for indexing and
> searching
> > 1 bln documents. (the document size is very small though. Each document
> has
> > a single field of 5-10 words; so I believe that my data size is within
> the
> > tested limits).
> >
> > I am using the following configuration:
> > 1.      1.5 gig RAM to the jvm
> > 2.      100GB disk space.
> > 3.      Index creation tuning factors:
> > a.      mergeFactor =3D 10
> > b.      maxFieldLength =3D 10
> > c.      maxMergeDocs =3D 5000000 (if I try with a larger value, I get a=
n
> > out-of-memory)
> >
> > With these settings, I am able to create an index of 100 million docs (=
10
> > pow 8)  in 15 mins consuming a disk space of 2.5gb. Which is quite
> > satisfactory for me, but nevertheless, I want to know what else can be
> done
> > to tune it further. Please help.
> > Also, with these settings, can I expect the time and size to grow
> linearly
> > for 1bln (10 pow 9) documents?
> >
> > Thanks and Regards,
> >
> > Shelly Singh
> > Center For KNowledge Driven Information Systems, Infosys
> > Email: shelly_singh@infosys.com<mailto:shelly_singh@infosys.com>
> > Phone: (M) 91 992 369 7200, (VoIP)2022978622
> >
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 10 12:39:01 2010
Return-Path: <java-user-return-46974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67425 invoked from network); 10 Aug 2010 12:39:01 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Aug 2010 12:39:01 -0000
Received: (qmail 52689 invoked by uid 500); 10 Aug 2010 12:38:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52230 invoked by uid 500); 10 Aug 2010 12:38:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52220 invoked by uid 99); 10 Aug 2010 12:38:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 12:38:55 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [122.98.14.33] (HELO kecgate06.infosys.com) (122.98.14.33)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 12:38:49 +0000
X-TM-IMSS-Message-ID:<d3f7204a00066275@kecgate06.infosys.com>
Received: from blrkechub03.ad.infosys.com ([10.66.236.43]) by kecgate06.infosys.com ([122.98.14.33]) with ESMTP (TREND IMSS SMTP Service 7.0) id d3f7204a00066275 ; Tue, 10 Aug 2010 18:09:27 +0530
Received: from PUNITPHCS01.ad.infosys.com (10.76.151.41) by
 blrkechub03.ad.infosys.com (10.66.236.43) with Microsoft SMTP Server (TLS) id
 8.2.176.0; Tue, 10 Aug 2010 18:08:25 +0530
Received: from PUNITPMBX02.ad.infosys.com ([10.76.151.22]) by
 PUNITPHCS01.ad.infosys.com ([10.76.151.41]) with mapi; Tue, 10 Aug 2010
 18:08:22 +0530
From: Shelly_Singh <Shelly_Singh@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 10 Aug 2010 18:08:20 +0530
Subject: RE: Scaling Lucene to 1bln docs
Thread-Topic: Scaling Lucene to 1bln docs
Thread-Index: Acs4ZX6Hd4d1EAjkQbm8P/yiV7KYAwAIKUeQAABHo0AAAFgMYA==
Message-ID: <AA27F54EFDA0CE43B33EBDB7796323740CA2660B46@PUNITPMBX02.ad.infosys.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA2660945@PUNITPMBX02.ad.infosys.com><AANLkTi=4LLNLK-wk9frni=ay0qkEokgnr+sLLfWPyZ=8@mail.gmail.com><AA27F54EFDA0CE43B33EBDB7796323740CA2660988@PUNITPMBX02.ad.infosys.com>
 <528709861-1281428644-cardhu_decombobulator_blackberry.rim.net-283608400-@bda2121.bisx.produk.on.blackberry>
 <AA27F54EFDA0CE43B33EBDB7796323740CA2660B35@PUNITPMBX02.ad.infosys.com>
 <3B4AEBB59588ED409ECE3CB6517C41750EC8C16BEC@exchange.windows.mmu.acquiremedia.com>
In-Reply-To: <3B4AEBB59588ED409ECE3CB6517C41750EC8C16BEC@exchange.windows.mmu.acquiremedia.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

-=20shard=20into=2010=20indices.=20If=20you=20need=20the=20concept=20of=
=20a=20date=20range=20search,=20I=20would=20assign=20the=20documents=20to=
=20the=20shard=20by=20date,=20otherwise=20random=20assignment=20is=20fine=
.
Shelly=20-=20Actually=20my=20documents=20are=20originally=20database=20re=
cords=20with=20each=20being=20equally=20important.

-=20have=20a=20pool=20of=20IndexSearchers=20for=20each=20index
-=20when=20a=20search=20comes=20in,=20allocate=20a=20Searcher=20from=20ea=
ch=20index=20to=20the=20search.

-=20perform=20the=20search=20in=20parallel=20across=20all=20indices.
Shelly=20-=20Is=20it=20different=20from=20MultiSearcher=20or=20ParallelMu=
ltiSearcher

-=20merge=20the=20results=20in=20your=20own=20code=20using=20an=20efficie=
nt=20merging=20algorithm.

-----Original=20Message-----
From:=20Dan=20OConnor=20[mailto:doconnor@acquiremedia.com]=20
Sent:=20Tuesday,=20August=2010,=202010=206:02=20PM
To:=20java-user@lucene.apache.org
Subject:=20RE:=20Scaling=20Lucene=20to=201bln=20docs

Shelly:

You=20wouldn't=20necessarily=20have=20to=20use=20a=20multisearcher.=20A=
=20suggested=20alternative=20is:

-=20shard=20into=2010=20indices.=20If=20you=20need=20the=20concept=20of=
=20a=20date=20range=20search,=20I=20would=20assign=20the=20documents=20to=
=20the=20shard=20by=20date,=20otherwise=20random=20assignment=20is=20fine=
.
-=20have=20a=20pool=20of=20IndexSearchers=20for=20each=20index
-=20when=20a=20search=20comes=20in,=20allocate=20a=20Searcher=20from=20ea=
ch=20index=20to=20the=20search.
-=20perform=20the=20search=20in=20parallel=20across=20all=20indices.
-=20merge=20the=20results=20in=20your=20own=20code=20using=20an=20efficie=
nt=20merging=20algorithm.

Regards,
Dan




-----Original=20Message-----
From:=20Shelly_Singh=20[mailto:Shelly_Singh@infosys.com]=20
Sent:=20Tuesday,=20August=2010,=202010=208:20=20AM
To:=20java-user@lucene.apache.org
Subject:=20RE:=20Scaling=20Lucene=20to=201bln=20docs

No=20sort.=20I=20will=20need=20relevance=20based=20on=20TF.=20If=20I=20sh=
ard,=20I=20will=20have=20to=20search=20in=20al=20indices.

-----Original=20Message-----
From:=20anshum.gupta@naukri.com=20[mailto:anshumg@gmail.com]=20
Sent:=20Tuesday,=20August=2010,=202010=201:54=20PM
To:=20java-user@lucene.apache.org
Subject:=20Re:=20Scaling=20Lucene=20to=201bln=20docs

Would=20like=20to=20know,=20are=20you=20using=20a=20particular=20type=20o=
f=20sort?=20Do=20you=20need=20to=20sort=20on=20relevance?=20Can=20you=20s=
hard=20and=20restrict=20your=20search=20to=20a=20limited=20set=20of=20ind=
exes=20functionally?

--
Anshum
http://blog.anshumgupta.net

Sent=20from=20BlackBerry(r)

-----Original=20Message-----
From:=20Shelly_Singh=20<Shelly_Singh@infosys.com>
Date:=20Tue,=2010=20Aug=202010=2013:31:38=20
To:=20java-user@lucene.apache.org<java-user@lucene.apache.org>
Reply-To:=20java-user@lucene.apache.org
Subject:=20RE:=20Scaling=20Lucene=20to=201bln=20docs

Hi=20Anshum,

I=20am=20already=20running=20with=20the=20'setCompoundFile'=20option=20of=
f.=20
And=20thanks=20for=20pointing=20out=20mergeFactor.=20I=20had=20tried=20a=
=20higher=20mergeFactor=20couple=20of=20days=20ago,=20but=20got=20an=20OO=
M,=20so=20I=20discarded=20it.=20Later=20I=20figured=20that=20OOM=20was=20=
because=20maxMergeDocs=20was=20unlimited=20and=20I=20was=20using=20MMap.=
=20U=20r=20rigt,=20I=20should=20try=20a=20higher=20mergeFactor.

With=20regards=20to=20the=20multithreaded=20approach,=20I=20was=20conside=
ring=20creating=2010=20different=20threads=20each=20indexing=20100mln=20d=
ocs=20coupled=20with=20a=20Multisearcher=20to=20which=20I=20will=20feed=
=20these=2010=20indices.=20Do=20you=20think=20this=20will=20improve=20per=
formance.

And=20just=20FYI,=20I=20have=20latest=20reading=20for=201=20bln=20docs.=
=20Indexing=20time=20is=202=20hrs=20and=20search=20time=20is=2015=20secs.=
.=20I=20can=20live=20with=20indexing=20time=20but=20the=20search=20time=
=20is=20highly=20unacceptable.

Help=20again.

-----Original=20Message-----
From:=20Anshum=20[mailto:anshumg@gmail.com]=20
Sent:=20Tuesday,=20August=2010,=202010=2012:55=20PM
To:=20java-user@lucene.apache.org
Subject:=20Re:=20Scaling=20Lucene=20to=201bln=20docs

Hi=20Shelly,
That=20seems=20like=20a=20reasonable=20data=20set=20size.=20I'd=20suggest=
=20you=20increase=20your
mergeFactor=20as=20a=20mergeFactor=20of=2010=20says,=20you=20are=20only=
=20buffering=2010=20docs=20in
memory=20before=20writing=20it=20to=20a=20file=20(and=20incurring=20I/O).=
=20You=20could=20actually
flush=20by=20RAM=20usage=20instead=20of=20a=20Doc=20count.=20Turn=20off=
=20using=20the=20Compound=20file
structure=20for=20indexing=20as=20it=20generally=20takes=20more=20time=20=
creating=20a=20cfs=20index.

Plus=20the=20time=20would=20not=20grow=20linearly=20as=20the=20larger=20t=
he=20size=20of=20segments
get,=20the=20more=20time=20it'd=20take=20to=20add=20more=20docs=20and=20m=
erge=20those=20together
intermittently.
You=20may=20also=20use=20a=20multithreaded=20approach=20in=20case=20readi=
ng=20the=20source=20takes
time=20in=20your=20case,=20though,=20the=20indexwriter=20would=20have=20t=
o=20be=20shared=20among=20all
threads.

--
Anshum=20Gupta
http://ai-cafe.blogspot.com


On=20Tue,=20Aug=2010,=202010=20at=2012:24=20PM,=20Shelly_Singh=20<Shelly_=
Singh@infosys.com>wrote:

>=20Hi,
>
>=20I=20am=20developing=20an=20application=20which=20uses=20Lucene=20for=
=20indexing=20and=20searching
>=201=20bln=20documents.=20(the=20document=20size=20is=20very=20small=20t=
hough.=20Each=20document=20has
>=20a=20single=20field=20of=205-10=20words;=20so=20I=20believe=20that=20m=
y=20data=20size=20is=20within=20the
>=20tested=20limits).
>
>=20I=20am=20using=20the=20following=20configuration:
>=201.=20=20=20=20=20=201.5=20gig=20RAM=20to=20the=20jvm
>=202.=20=20=20=20=20=20100GB=20disk=20space.
>=203.=20=20=20=20=20=20Index=20creation=20tuning=20factors:
>=20a.=20=20=20=20=20=20mergeFactor=20=3D=2010
>=20b.=20=20=20=20=20=20maxFieldLength=20=3D=2010
>=20c.=20=20=20=20=20=20maxMergeDocs=20=3D=205000000=20(if=20I=20try=20wi=
th=20a=20larger=20value,=20I=20get=20an
>=20out-of-memory)
>
>=20With=20these=20settings,=20I=20am=20able=20to=20create=20an=20index=
=20of=20100=20million=20docs=20(10
>=20pow=208)=20=20in=2015=20mins=20consuming=20a=20disk=20space=20of=202.=
5gb.=20Which=20is=20quite
>=20satisfactory=20for=20me,=20but=20nevertheless,=20I=20want=20to=20know=
=20what=20else=20can=20be=20done
>=20to=20tune=20it=20further.=20Please=20help.
>=20Also,=20with=20these=20settings,=20can=20I=20expect=20the=20time=20an=
d=20size=20to=20grow=20linearly
>=20for=201bln=20(10=20pow=209)=20documents?
>
>=20Thanks=20and=20Regards,
>
>=20Shelly=20Singh
>=20Center=20For=20KNowledge=20Driven=20Information=20Systems,=20Infosys
>=20Email:=20shelly_singh@infosys.com<mailto:shelly_singh@infosys.com>
>=20Phone:=20(M)=2091=20992=20369=207200,=20(VoIP)2022978622
>
>
>
>

---------------------------------------------------------------------
To=20unsubscribe,=20e-mail:=20java-user-unsubscribe@lucene.apache.org
For=20additional=20commands,=20e-mail:=20java-user-help@lucene.apache.org


---------------------------------------------------------------------
To=20unsubscribe,=20e-mail:=20java-user-unsubscribe@lucene.apache.org
For=20additional=20commands,=20e-mail:=20java-user-help@lucene.apache.org


---------------------------------------------------------------------
To=20unsubscribe,=20e-mail:=20java-user-unsubscribe@lucene.apache.org
For=20additional=20commands,=20e-mail:=20java-user-help@lucene.apache.org


****************=20CAUTION=20-=20Disclaimer=20*****************
This=20e-mail=20contains=20PRIVILEGED=20AND=20CONFIDENTIAL=20INFORMATION=
=20intended=20solely=20
for=20the=20use=20of=20the=20addressee(s).=20If=20you=20are=20not=20the=
=20intended=20recipient,=20please=20
notify=20the=20sender=20by=20e-mail=20and=20delete=20the=20original=20mes=
sage.=20Further,=20you=20are=20not=20
to=20copy,=20disclose,=20or=20distribute=20this=20e-mail=20or=20its=20con=
tents=20to=20any=20other=20person=20and=20
any=20such=20actions=20are=20unlawful.=20This=20e-mail=20may=20contain=20=
viruses.=20Infosys=20has=20taken=20
every=20reasonable=20precaution=20to=20minimize=20this=20risk,=20but=20is=
=20not=20liable=20for=20any=20damage=20
you=20may=20sustain=20as=20a=20result=20of=20any=20virus=20in=20this=20e-=
mail.=20You=20should=20carry=20out=20your=20
own=20virus=20checks=20before=20opening=20the=20e-mail=20or=20attachment.=
=20Infosys=20reserves=20the=20
right=20to=20monitor=20and=20review=20the=20content=20of=20all=20messages=
=20sent=20to=20or=20from=20this=20e-mail=20
address.=20Messages=20sent=20to=20or=20from=20this=20e-mail=20address=20m=
ay=20be=20stored=20on=20the=20
Infosys=20e-mail=20system.
***INFOSYS********=20End=20of=20Disclaimer=20********INFOSYS***

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 10 12:41:35 2010
Return-Path: <java-user-return-46975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67981 invoked from network); 10 Aug 2010 12:41:35 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Aug 2010 12:41:35 -0000
Received: (qmail 57027 invoked by uid 500); 10 Aug 2010 12:41:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56949 invoked by uid 500); 10 Aug 2010 12:41:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56932 invoked by uid 99); 10 Aug 2010 12:41:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 12:41:27 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of torindan@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 12:41:21 +0000
Received: by qwd7 with SMTP id 7so11548846qwd.35
        for <java-user@lucene.apache.org>; Tue, 10 Aug 2010 05:41:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=DB7FMKlu+6GVObkyfLRNpqtMqR/Bw6cSzX+EE478rQI=;
        b=rCjQOkJRTRfnpQxa0w4CGrH8mdHRz7cagyu6tLiu65eLimc5VLO0M/AImjToh9XyMo
         x7ZWG9sIlzAPZo1PkG4siScAIh7aSQy2FkYe7B2Do5aijcWAKsfK1X+QSI7FNAidqoJB
         K25tSjoV5VXwZh9VkKD+VV6pqETKUpTVCK0MY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=CSlpcpuv0EH40CkSQYlGonTzgLZr0MojMrn5CGWzJWibmJUt2hzNAU19O+LUs5UVe+
         //ee4/WjTPROyL4mqA87BT/VsXnfTKRf2CRdAUmVFRif4rJMX73A8TWnqOwGxe/UjGmP
         rmn+O6UDr8clNqzoCokus/HdvNxRouPvYyEeI=
MIME-Version: 1.0
Received: by 10.224.27.3 with SMTP id g3mr9307795qac.229.1281444060365; Tue, 
	10 Aug 2010 05:41:00 -0700 (PDT)
Received: by 10.229.34.204 with HTTP; Tue, 10 Aug 2010 05:41:00 -0700 (PDT)
In-Reply-To: <3B4AEBB59588ED409ECE3CB6517C41750EC8C16BEC@exchange.windows.mmu.acquiremedia.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA2660945@PUNITPMBX02.ad.infosys.com>
	<AANLkTi=4LLNLK-wk9frni=ay0qkEokgnr+sLLfWPyZ=8@mail.gmail.com>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660988@PUNITPMBX02.ad.infosys.com>
	<528709861-1281428644-cardhu_decombobulator_blackberry.rim.net-283608400-@bda2121.bisx.produk.on.blackberry>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660B35@PUNITPMBX02.ad.infosys.com>
	<3B4AEBB59588ED409ECE3CB6517C41750EC8C16BEC@exchange.windows.mmu.acquiremedia.com>
Date: Tue, 10 Aug 2010 15:41:00 +0300
Message-ID: <AANLkTinJ=AE=+E1iyCqQxe26PSm2PgS_r-8+WMjcT_oG@mail.gmail.com>
Subject: Re: Scaling Lucene to 1bln docs
From: =?UTF-8?B?RGFuaWwgxaJPUklO?= <torindan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I'd second that.

It doesn't have to be date for sharding. Maybe every query has some
specific field, like UserId or something, so you can redirect to
specific shard instead of hitting all 10 indices.

You have to have some kind of narrowing: searching 1bn documents with
queries that may hit all documents is useless.
An user won't look on more than let say 100 results (if presented
properly..maybe 1000)

Those fields that narrow the result set are good candidates for sharding ke=
ys.


On Tue, Aug 10, 2010 at 15:32, Dan OConnor <doconnor@acquiremedia.com> wrot=
e:
> Shelly:
>
> You wouldn't necessarily have to use a multisearcher. A suggested alterna=
tive is:
>
> - shard into 10 indices. If you need the concept of a date range search, =
I would assign the documents to the shard by date, otherwise random assignm=
ent is fine.
> - have a pool of IndexSearchers for each index
> - when a search comes in, allocate a Searcher from each index to the sear=
ch.
> - perform the search in parallel across all indices.
> - merge the results in your own code using an efficient merging algorithm=
.
>
> Regards,
> Dan
>
>
>
>
> -----Original Message-----
> From: Shelly_Singh [mailto:Shelly_Singh@infosys.com]
> Sent: Tuesday, August 10, 2010 8:20 AM
> To: java-user@lucene.apache.org
> Subject: RE: Scaling Lucene to 1bln docs
>
> No sort. I will need relevance based on TF. If I shard, I will have to se=
arch in al indices.
>
> -----Original Message-----
> From: anshum.gupta@naukri.com [mailto:anshumg@gmail.com]
> Sent: Tuesday, August 10, 2010 1:54 PM
> To: java-user@lucene.apache.org
> Subject: Re: Scaling Lucene to 1bln docs
>
> Would like to know, are you using a particular type of sort? Do you need =
to sort on relevance? Can you shard and restrict your search to a limited s=
et of indexes functionally?
>
> --
> Anshum
> http://blog.anshumgupta.net
>
> Sent from BlackBerry(r)
>
> -----Original Message-----
> From: Shelly_Singh <Shelly_Singh@infosys.com>
> Date: Tue, 10 Aug 2010 13:31:38
> To: java-user@lucene.apache.org<java-user@lucene.apache.org>
> Reply-To: java-user@lucene.apache.org
> Subject: RE: Scaling Lucene to 1bln docs
>
> Hi Anshum,
>
> I am already running with the 'setCompoundFile' option off.
> And thanks for pointing out mergeFactor. I had tried a higher mergeFactor=
 couple of days ago, but got an OOM, so I discarded it. Later I figured tha=
t OOM was because maxMergeDocs was unlimited and I was using MMap. U r rigt=
, I should try a higher mergeFactor.
>
> With regards to the multithreaded approach, I was considering creating 10=
 different threads each indexing 100mln docs coupled with a Multisearcher t=
o which I will feed these 10 indices. Do you think this will improve perfor=
mance.
>
> And just FYI, I have latest reading for 1 bln docs. Indexing time is 2 hr=
s and search time is 15 secs.. I can live with indexing time but the search=
 time is highly unacceptable.
>
> Help again.
>
> -----Original Message-----
> From: Anshum [mailto:anshumg@gmail.com]
> Sent: Tuesday, August 10, 2010 12:55 PM
> To: java-user@lucene.apache.org
> Subject: Re: Scaling Lucene to 1bln docs
>
> Hi Shelly,
> That seems like a reasonable data set size. I'd suggest you increase your
> mergeFactor as a mergeFactor of 10 says, you are only buffering 10 docs i=
n
> memory before writing it to a file (and incurring I/O). You could actuall=
y
> flush by RAM usage instead of a Doc count. Turn off using the Compound fi=
le
> structure for indexing as it generally takes more time creating a cfs ind=
ex.
>
> Plus the time would not grow linearly as the larger the size of segments
> get, the more time it'd take to add more docs and merge those together
> intermittently.
> You may also use a multithreaded approach in case reading the source take=
s
> time in your case, though, the indexwriter would have to be shared among =
all
> threads.
>
> --
> Anshum Gupta
> http://ai-cafe.blogspot.com
>
>
> On Tue, Aug 10, 2010 at 12:24 PM, Shelly_Singh <Shelly_Singh@infosys.com>=
wrote:
>
>> Hi,
>>
>> I am developing an application which uses Lucene for indexing and search=
ing
>> 1 bln documents. (the document size is very small though. Each document =
has
>> a single field of 5-10 words; so I believe that my data size is within t=
he
>> tested limits).
>>
>> I am using the following configuration:
>> 1. =C2=A0 =C2=A0 =C2=A01.5 gig RAM to the jvm
>> 2. =C2=A0 =C2=A0 =C2=A0100GB disk space.
>> 3. =C2=A0 =C2=A0 =C2=A0Index creation tuning factors:
>> a. =C2=A0 =C2=A0 =C2=A0mergeFactor =3D 10
>> b. =C2=A0 =C2=A0 =C2=A0maxFieldLength =3D 10
>> c. =C2=A0 =C2=A0 =C2=A0maxMergeDocs =3D 5000000 (if I try with a larger =
value, I get an
>> out-of-memory)
>>
>> With these settings, I am able to create an index of 100 million docs (1=
0
>> pow 8) =C2=A0in 15 mins consuming a disk space of 2.5gb. Which is quite
>> satisfactory for me, but nevertheless, I want to know what else can be d=
one
>> to tune it further. Please help.
>> Also, with these settings, can I expect the time and size to grow linear=
ly
>> for 1bln (10 pow 9) documents?
>>
>> Thanks and Regards,
>>
>> Shelly Singh
>> Center For KNowledge Driven Information Systems, Infosys
>> Email: shelly_singh@infosys.com<mailto:shelly_singh@infosys.com>
>> Phone: (M) 91 992 369 7200, (VoIP)2022978622
>>
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 10 12:44:25 2010
Return-Path: <java-user-return-46976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68937 invoked from network); 10 Aug 2010 12:44:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Aug 2010 12:44:24 -0000
Received: (qmail 62662 invoked by uid 500); 10 Aug 2010 12:44:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62349 invoked by uid 500); 10 Aug 2010 12:44:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62327 invoked by uid 99); 10 Aug 2010 12:44:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 12:44:18 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prashullegaddi@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 12:44:14 +0000
Received: by fxm17 with SMTP id 17so866832fxm.35
        for <java-user@lucene.apache.org>; Tue, 10 Aug 2010 05:43:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=MRzrev0DBpHzRJMigaqwbZVbUJb2KVhR+y41VSCdlTQ=;
        b=OwkUD52BRpD4YkGK+7r0zaomNC8PCQPtPjJ2M5qOjjeziVh8TiUPS/H9vOq7aRyl2m
         uz7Cx3+7bDviKd1G9hHe64pTcQcWZVGclF/Qj0dNmP5Vn4n35NOhoNvttFKviIVb6Myf
         FdfkowffX1T3vQ7/6bZ1yxK2VxNIjt9s0vXTw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=TUJeAMg5nTOrnZxj5HQCpv5kwvhtNBpFHyDLvQzboU50RBNDg8mFTe+2h+UrYAHo+1
         GJ642vJOKyxjlQSr1LKEhxb0enwEeHhDMAOj4A+tI6D1juYU2TN+HmQwGMaJA6JFk5Ng
         VLNqS47lO6RaPTIzkziLfCsAdEeePupOCqn/0=
Received: by 10.239.172.208 with SMTP id b16mr904506hbf.165.1281444231257; 
	Tue, 10 Aug 2010 05:43:51 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.239.185.200 with HTTP; Tue, 10 Aug 2010 05:43:21 -0700 (PDT)
In-Reply-To: <AA27F54EFDA0CE43B33EBDB7796323740CA2660B46@PUNITPMBX02.ad.infosys.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA2660945@PUNITPMBX02.ad.infosys.com> 
	<AANLkTi=4LLNLK-wk9frni=ay0qkEokgnr+sLLfWPyZ=8@mail.gmail.com> 
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660988@PUNITPMBX02.ad.infosys.com> 
	<528709861-1281428644-cardhu_decombobulator_blackberry.rim.net-283608400-@bda2121.bisx.produk.on.blackberry> 
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660B35@PUNITPMBX02.ad.infosys.com> 
	<3B4AEBB59588ED409ECE3CB6517C41750EC8C16BEC@exchange.windows.mmu.acquiremedia.com> 
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660B46@PUNITPMBX02.ad.infosys.com>
From: prashant ullegaddi <prashullegaddi@gmail.com>
Date: Tue, 10 Aug 2010 18:13:21 +0530
Message-ID: <AANLkTikqWk3PcLnD53RvjmAkt_EkxVAgsAdxaXH09Jk-@mail.gmail.com>
Subject: Re: Scaling Lucene to 1bln docs
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f7d906342063048d777c4e

--001485f7d906342063048d777c4e
Content-Type: text/plain; charset=ISO-8859-1

You might want to take a look at RemoteSearchable (
http://lucene.apache.org/java/2_9_2/api/contrib-remote/org/apache/lucene/search/RemoteSearchable.html)
-- it'll be helpful if you place shards on different servers.

On Tue, Aug 10, 2010 at 6:08 PM, Shelly_Singh <Shelly_Singh@infosys.com>wrote:

> - shard into 10 indices. If you need the concept of a date range search, I
> would assign the documents to the shard by date, otherwise random assignment
> is fine.
> Shelly - Actually my documents are originally database records with each
> being equally important.
>
> - have a pool of IndexSearchers for each index
> - when a search comes in, allocate a Searcher from each index to the
> search.
>
> - perform the search in parallel across all indices.
> Shelly - Is it different from MultiSearcher or ParallelMultiSearcher
>
> - merge the results in your own code using an efficient merging algorithm.
>
> -----Original Message-----
> From: Dan OConnor [mailto:doconnor@acquiremedia.com]
> Sent: Tuesday, August 10, 2010 6:02 PM
> To: java-user@lucene.apache.org
> Subject: RE: Scaling Lucene to 1bln docs
>
> Shelly:
>
> You wouldn't necessarily have to use a multisearcher. A suggested
> alternative is:
>
> - shard into 10 indices. If you need the concept of a date range search, I
> would assign the documents to the shard by date, otherwise random assignment
> is fine.
> - have a pool of IndexSearchers for each index
> - when a search comes in, allocate a Searcher from each index to the
> search.
> - perform the search in parallel across all indices.
> - merge the results in your own code using an efficient merging algorithm.
>
> Regards,
> Dan
>
>
>
>
> -----Original Message-----
> From: Shelly_Singh [mailto:Shelly_Singh@infosys.com]
> Sent: Tuesday, August 10, 2010 8:20 AM
> To: java-user@lucene.apache.org
> Subject: RE: Scaling Lucene to 1bln docs
>
> No sort. I will need relevance based on TF. If I shard, I will have to
> search in al indices.
>
> -----Original Message-----
> From: anshum.gupta@naukri.com [mailto:anshumg@gmail.com]
> Sent: Tuesday, August 10, 2010 1:54 PM
> To: java-user@lucene.apache.org
> Subject: Re: Scaling Lucene to 1bln docs
>
> Would like to know, are you using a particular type of sort? Do you need to
> sort on relevance? Can you shard and restrict your search to a limited set
> of indexes functionally?
>
> --
> Anshum
> http://blog.anshumgupta.net
>
> Sent from BlackBerry(r)
>
> -----Original Message-----
> From: Shelly_Singh <Shelly_Singh@infosys.com>
> Date: Tue, 10 Aug 2010 13:31:38
> To: java-user@lucene.apache.org<java-user@lucene.apache.org>
> Reply-To: java-user@lucene.apache.org
> Subject: RE: Scaling Lucene to 1bln docs
>
> Hi Anshum,
>
> I am already running with the 'setCompoundFile' option off.
> And thanks for pointing out mergeFactor. I had tried a higher mergeFactor
> couple of days ago, but got an OOM, so I discarded it. Later I figured that
> OOM was because maxMergeDocs was unlimited and I was using MMap. U r rigt, I
> should try a higher mergeFactor.
>
> With regards to the multithreaded approach, I was considering creating 10
> different threads each indexing 100mln docs coupled with a Multisearcher to
> which I will feed these 10 indices. Do you think this will improve
> performance.
>
> And just FYI, I have latest reading for 1 bln docs. Indexing time is 2 hrs
> and search time is 15 secs.. I can live with indexing time but the search
> time is highly unacceptable.
>
> Help again.
>
> -----Original Message-----
> From: Anshum [mailto:anshumg@gmail.com]
> Sent: Tuesday, August 10, 2010 12:55 PM
> To: java-user@lucene.apache.org
> Subject: Re: Scaling Lucene to 1bln docs
>
> Hi Shelly,
> That seems like a reasonable data set size. I'd suggest you increase your
> mergeFactor as a mergeFactor of 10 says, you are only buffering 10 docs in
> memory before writing it to a file (and incurring I/O). You could actually
> flush by RAM usage instead of a Doc count. Turn off using the Compound file
> structure for indexing as it generally takes more time creating a cfs
> index.
>
> Plus the time would not grow linearly as the larger the size of segments
> get, the more time it'd take to add more docs and merge those together
> intermittently.
> You may also use a multithreaded approach in case reading the source takes
> time in your case, though, the indexwriter would have to be shared among
> all
> threads.
>
> --
> Anshum Gupta
> http://ai-cafe.blogspot.com
>
>
> On Tue, Aug 10, 2010 at 12:24 PM, Shelly_Singh <Shelly_Singh@infosys.com
> >wrote:
>
> > Hi,
> >
> > I am developing an application which uses Lucene for indexing and
> searching
> > 1 bln documents. (the document size is very small though. Each document
> has
> > a single field of 5-10 words; so I believe that my data size is within
> the
> > tested limits).
> >
> > I am using the following configuration:
> > 1.      1.5 gig RAM to the jvm
> > 2.      100GB disk space.
> > 3.      Index creation tuning factors:
> > a.      mergeFactor = 10
> > b.      maxFieldLength = 10
> > c.      maxMergeDocs = 5000000 (if I try with a larger value, I get an
> > out-of-memory)
> >
> > With these settings, I am able to create an index of 100 million docs (10
> > pow 8)  in 15 mins consuming a disk space of 2.5gb. Which is quite
> > satisfactory for me, but nevertheless, I want to know what else can be
> done
> > to tune it further. Please help.
> > Also, with these settings, can I expect the time and size to grow
> linearly
> > for 1bln (10 pow 9) documents?
> >
> > Thanks and Regards,
> >
> > Shelly Singh
> > Center For KNowledge Driven Information Systems, Infosys
> > Email: shelly_singh@infosys.com<mailto:shelly_singh@infosys.com>
> > Phone: (M) 91 992 369 7200, (VoIP)2022978622
> >
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> **************** CAUTION - Disclaimer *****************
> This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended
> solely
> for the use of the addressee(s). If you are not the intended recipient,
> please
> notify the sender by e-mail and delete the original message. Further, you
> are not
> to copy, disclose, or distribute this e-mail or its contents to any other
> person and
> any such actions are unlawful. This e-mail may contain viruses. Infosys has
> taken
> every reasonable precaution to minimize this risk, but is not liable for
> any damage
> you may sustain as a result of any virus in this e-mail. You should carry
> out your
> own virus checks before opening the e-mail or attachment. Infosys reserves
> the
> right to monitor and review the content of all messages sent to or from
> this e-mail
> address. Messages sent to or from this e-mail address may be stored on the
> Infosys e-mail system.
> ***INFOSYS******** End of Disclaimer ********INFOSYS***
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Thanks and Regards,
Prashant Ullegaddi,
Search and Information Extraction Lab,
IIIT-Hyderabad, India.

--001485f7d906342063048d777c4e--

From java-user-return-46977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 10 12:56:06 2010
Return-Path: <java-user-return-46977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71975 invoked from network); 10 Aug 2010 12:56:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Aug 2010 12:56:06 -0000
Received: (qmail 90225 invoked by uid 500); 10 Aug 2010 12:56:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89641 invoked by uid 500); 10 Aug 2010 12:55:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89628 invoked by uid 99); 10 Aug 2010 12:55:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 12:55:57 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [122.98.10.33] (HELO KECGATE08.infosys.com) (122.98.10.33)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 12:55:53 +0000
X-TM-IMSS-Message-ID:<209d7166001c0b4c@KECGATE08.infosys.com>
Received: from blrkechub01.ad.infosys.com ([10.66.236.41]) by KECGATE08.infosys.com ([122.98.10.33]) with ESMTP (TREND IMSS SMTP Service 7.0) id 209d7166001c0b4c ; Tue, 10 Aug 2010 18:27:24 +0530
Received: from PUNITPHCS01.ad.infosys.com (10.76.151.41) by
 blrkechub01.ad.infosys.com (10.66.236.41) with Microsoft SMTP Server (TLS) id
 8.2.176.0; Tue, 10 Aug 2010 18:25:29 +0530
Received: from PUNITPMBX02.ad.infosys.com ([10.76.151.22]) by
 PUNITPHCS01.ad.infosys.com ([10.76.151.41]) with mapi; Tue, 10 Aug 2010
 18:25:27 +0530
From: Shelly_Singh <Shelly_Singh@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 10 Aug 2010 18:25:25 +0530
Subject: RE: Scaling Lucene to 1bln docs
Thread-Topic: Scaling Lucene to 1bln docs
Thread-Index: Acs4iWCevZWwCbjsSUyUfvqVBmEeBAAAMpDg
Message-ID: <AA27F54EFDA0CE43B33EBDB7796323740CA2660B5E@PUNITPMBX02.ad.infosys.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA2660945@PUNITPMBX02.ad.infosys.com>
	<AANLkTi=4LLNLK-wk9frni=ay0qkEokgnr+sLLfWPyZ=8@mail.gmail.com>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660988@PUNITPMBX02.ad.infosys.com>
	<528709861-1281428644-cardhu_decombobulator_blackberry.rim.net-283608400-@bda2121.bisx.produk.on.blackberry>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660B35@PUNITPMBX02.ad.infosys.com>
	<3B4AEBB59588ED409ECE3CB6517C41750EC8C16BEC@exchange.windows.mmu.acquiremedia.com>
 <AANLkTinJ=AE=+E1iyCqQxe26PSm2PgS_r-8+WMjcT_oG@mail.gmail.com>
In-Reply-To: <AANLkTinJ=AE=+E1iyCqQxe26PSm2PgS_r-8+WMjcT_oG@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0

SG1tLi5JIGdldCB0aGUgcG9pbnQuIEJ1dCwgaW4gbXkgYXBwbGljYXRpb24sIHRoZSBkb2N1bWVu
dCBpcyBiYXNpY2FsbHkgYSBkZXNjcmlwdGl2ZSBuYW1lIG9mIGEgcGFydGljdWxhciB0aGluZy4g
VGhlIHVzZXIgd2lsbCBzZWFyY2ggYnkgbmFtZSAob3IgcGFydCBvZiBuYW1lKSBhbmQgSSBuZWVk
IHRvIHB1bGwgb3V0IGFsbCBpbmZvIHBvaW50ZWQgdG8gYnkgdGhhdCBuYW1lLiBUaGlzIGluZm8g
aXMgZXh0ZXJuYWxpemVkIGluIGEgZGIuDQoNCk9uZSBvcHRpb24gSSBjYW4gdGhpbmsgb2YgaXMt
IA0KSSBjYW4gc2hhcmQgYmFzZWQgb24gc3RhcnRpbmcgYWxwaGFiZXQgb2YgYW55IG5hbWUuIFNv
LCAiQWxhbiBNYXRodXIgb2YgTmV3IERlbGhpIiBtYXkgZ28gdG8gc2hhcmQgIkEiLiBCdXQgc2lu
Y2UgdGhlIG5hbWUgd2lsbCBoYXZlICduJyB0b2tlbnMsIGFuZCB0aGUgdXNlciBtYXkgdHlwZSBh
bnkgb25lIHRva2VuLCB0aGlzIHdpbGwgbm90IHdvcmsuIEkgY2FuIGZ1cnRoZXIgdHdlYWsgdGhp
cyBzdWNoIHRoYXQgSSBpbmRleCB0aGUgc2FtZSBkb2N1bWVudCBpbnRvIG11bHRpcGxlIGluZGlj
ZXMgKG9uZSBmb3IgZWFjaCB0b2tlbikuIFNvLCB0aGUgc2FtZSBkb2N1bWVudCBtYXkgYmUgaW5k
ZXhlZCBpbnRvIFNoYXJkIkEiLCAiTSIsICJOIiBhbmQgIkQiLiANCkkgYW0gbm90IGFibGUgdG8g
dGhpbmsgb2YgYW5vdGhlciBvcHRpb24uDQoNCkNvbW1lbnRzIHdlbGNvbWUuDQoNCg0KLS0tLS1P
cmlnaW5hbCBNZXNzYWdlLS0tLS0NCkZyb206IERhbmlsIMWiT1JJTiBbbWFpbHRvOnRvcmluZGFu
QGdtYWlsLmNvbV0gDQpTZW50OiBUdWVzZGF5LCBBdWd1c3QgMTAsIDIwMTAgNjoxMSBQTQ0KVG86
IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KU3ViamVjdDogUmU6IFNjYWxpbmcgTHVjZW5l
IHRvIDFibG4gZG9jcw0KDQpJJ2Qgc2Vjb25kIHRoYXQuDQoNCkl0IGRvZXNuJ3QgaGF2ZSB0byBi
ZSBkYXRlIGZvciBzaGFyZGluZy4gTWF5YmUgZXZlcnkgcXVlcnkgaGFzIHNvbWUNCnNwZWNpZmlj
IGZpZWxkLCBsaWtlIFVzZXJJZCBvciBzb21ldGhpbmcsIHNvIHlvdSBjYW4gcmVkaXJlY3QgdG8N
CnNwZWNpZmljIHNoYXJkIGluc3RlYWQgb2YgaGl0dGluZyBhbGwgMTAgaW5kaWNlcy4NCg0KWW91
IGhhdmUgdG8gaGF2ZSBzb21lIGtpbmQgb2YgbmFycm93aW5nOiBzZWFyY2hpbmcgMWJuIGRvY3Vt
ZW50cyB3aXRoDQpxdWVyaWVzIHRoYXQgbWF5IGhpdCBhbGwgZG9jdW1lbnRzIGlzIHVzZWxlc3Mu
DQpBbiB1c2VyIHdvbid0IGxvb2sgb24gbW9yZSB0aGFuIGxldCBzYXkgMTAwIHJlc3VsdHMgKGlm
IHByZXNlbnRlZA0KcHJvcGVybHkuLm1heWJlIDEwMDApDQoNClRob3NlIGZpZWxkcyB0aGF0IG5h
cnJvdyB0aGUgcmVzdWx0IHNldCBhcmUgZ29vZCBjYW5kaWRhdGVzIGZvciBzaGFyZGluZyBrZXlz
Lg0KDQoNCk9uIFR1ZSwgQXVnIDEwLCAyMDEwIGF0IDE1OjMyLCBEYW4gT0Nvbm5vciA8ZG9jb25u
b3JAYWNxdWlyZW1lZGlhLmNvbT4gd3JvdGU6DQo+IFNoZWxseToNCj4NCj4gWW91IHdvdWxkbid0
IG5lY2Vzc2FyaWx5IGhhdmUgdG8gdXNlIGEgbXVsdGlzZWFyY2hlci4gQSBzdWdnZXN0ZWQgYWx0
ZXJuYXRpdmUgaXM6DQo+DQo+IC0gc2hhcmQgaW50byAxMCBpbmRpY2VzLiBJZiB5b3UgbmVlZCB0
aGUgY29uY2VwdCBvZiBhIGRhdGUgcmFuZ2Ugc2VhcmNoLCBJIHdvdWxkIGFzc2lnbiB0aGUgZG9j
dW1lbnRzIHRvIHRoZSBzaGFyZCBieSBkYXRlLCBvdGhlcndpc2UgcmFuZG9tIGFzc2lnbm1lbnQg
aXMgZmluZS4NCj4gLSBoYXZlIGEgcG9vbCBvZiBJbmRleFNlYXJjaGVycyBmb3IgZWFjaCBpbmRl
eA0KPiAtIHdoZW4gYSBzZWFyY2ggY29tZXMgaW4sIGFsbG9jYXRlIGEgU2VhcmNoZXIgZnJvbSBl
YWNoIGluZGV4IHRvIHRoZSBzZWFyY2guDQo+IC0gcGVyZm9ybSB0aGUgc2VhcmNoIGluIHBhcmFs
bGVsIGFjcm9zcyBhbGwgaW5kaWNlcy4NCj4gLSBtZXJnZSB0aGUgcmVzdWx0cyBpbiB5b3VyIG93
biBjb2RlIHVzaW5nIGFuIGVmZmljaWVudCBtZXJnaW5nIGFsZ29yaXRobS4NCj4NCj4gUmVnYXJk
cywNCj4gRGFuDQo+DQo+DQo+DQo+DQo+IC0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQo+IEZy
b206IFNoZWxseV9TaW5naCBbbWFpbHRvOlNoZWxseV9TaW5naEBpbmZvc3lzLmNvbV0NCj4gU2Vu
dDogVHVlc2RheSwgQXVndXN0IDEwLCAyMDEwIDg6MjAgQU0NCj4gVG86IGphdmEtdXNlckBsdWNl
bmUuYXBhY2hlLm9yZw0KPiBTdWJqZWN0OiBSRTogU2NhbGluZyBMdWNlbmUgdG8gMWJsbiBkb2Nz
DQo+DQo+IE5vIHNvcnQuIEkgd2lsbCBuZWVkIHJlbGV2YW5jZSBiYXNlZCBvbiBURi4gSWYgSSBz
aGFyZCwgSSB3aWxsIGhhdmUgdG8gc2VhcmNoIGluIGFsIGluZGljZXMuDQo+DQo+IC0tLS0tT3Jp
Z2luYWwgTWVzc2FnZS0tLS0tDQo+IEZyb206IGFuc2h1bS5ndXB0YUBuYXVrcmkuY29tIFttYWls
dG86YW5zaHVtZ0BnbWFpbC5jb21dDQo+IFNlbnQ6IFR1ZXNkYXksIEF1Z3VzdCAxMCwgMjAxMCAx
OjU0IFBNDQo+IFRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNCj4gU3ViamVjdDogUmU6
IFNjYWxpbmcgTHVjZW5lIHRvIDFibG4gZG9jcw0KPg0KPiBXb3VsZCBsaWtlIHRvIGtub3csIGFy
ZSB5b3UgdXNpbmcgYSBwYXJ0aWN1bGFyIHR5cGUgb2Ygc29ydD8gRG8geW91IG5lZWQgdG8gc29y
dCBvbiByZWxldmFuY2U/IENhbiB5b3Ugc2hhcmQgYW5kIHJlc3RyaWN0IHlvdXIgc2VhcmNoIHRv
IGEgbGltaXRlZCBzZXQgb2YgaW5kZXhlcyBmdW5jdGlvbmFsbHk/DQo+DQo+IC0tDQo+IEFuc2h1
bQ0KPiBodHRwOi8vYmxvZy5hbnNodW1ndXB0YS5uZXQNCj4NCj4gU2VudCBmcm9tIEJsYWNrQmVy
cnkocikNCj4NCj4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCj4gRnJvbTogU2hlbGx5X1Np
bmdoIDxTaGVsbHlfU2luZ2hAaW5mb3N5cy5jb20+DQo+IERhdGU6IFR1ZSwgMTAgQXVnIDIwMTAg
MTM6MzE6MzgNCj4gVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZzxqYXZhLXVzZXJAbHVj
ZW5lLmFwYWNoZS5vcmc+DQo+IFJlcGx5LVRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcN
Cj4gU3ViamVjdDogUkU6IFNjYWxpbmcgTHVjZW5lIHRvIDFibG4gZG9jcw0KPg0KPiBIaSBBbnNo
dW0sDQo+DQo+IEkgYW0gYWxyZWFkeSBydW5uaW5nIHdpdGggdGhlICdzZXRDb21wb3VuZEZpbGUn
IG9wdGlvbiBvZmYuDQo+IEFuZCB0aGFua3MgZm9yIHBvaW50aW5nIG91dCBtZXJnZUZhY3Rvci4g
SSBoYWQgdHJpZWQgYSBoaWdoZXIgbWVyZ2VGYWN0b3IgY291cGxlIG9mIGRheXMgYWdvLCBidXQg
Z290IGFuIE9PTSwgc28gSSBkaXNjYXJkZWQgaXQuIExhdGVyIEkgZmlndXJlZCB0aGF0IE9PTSB3
YXMgYmVjYXVzZSBtYXhNZXJnZURvY3Mgd2FzIHVubGltaXRlZCBhbmQgSSB3YXMgdXNpbmcgTU1h
cC4gVSByIHJpZ3QsIEkgc2hvdWxkIHRyeSBhIGhpZ2hlciBtZXJnZUZhY3Rvci4NCj4NCj4gV2l0
aCByZWdhcmRzIHRvIHRoZSBtdWx0aXRocmVhZGVkIGFwcHJvYWNoLCBJIHdhcyBjb25zaWRlcmlu
ZyBjcmVhdGluZyAxMCBkaWZmZXJlbnQgdGhyZWFkcyBlYWNoIGluZGV4aW5nIDEwMG1sbiBkb2Nz
IGNvdXBsZWQgd2l0aCBhIE11bHRpc2VhcmNoZXIgdG8gd2hpY2ggSSB3aWxsIGZlZWQgdGhlc2Ug
MTAgaW5kaWNlcy4gRG8geW91IHRoaW5rIHRoaXMgd2lsbCBpbXByb3ZlIHBlcmZvcm1hbmNlLg0K
Pg0KPiBBbmQganVzdCBGWUksIEkgaGF2ZSBsYXRlc3QgcmVhZGluZyBmb3IgMSBibG4gZG9jcy4g
SW5kZXhpbmcgdGltZSBpcyAyIGhycyBhbmQgc2VhcmNoIHRpbWUgaXMgMTUgc2Vjcy4uIEkgY2Fu
IGxpdmUgd2l0aCBpbmRleGluZyB0aW1lIGJ1dCB0aGUgc2VhcmNoIHRpbWUgaXMgaGlnaGx5IHVu
YWNjZXB0YWJsZS4NCj4NCj4gSGVscCBhZ2Fpbi4NCj4NCj4gLS0tLS1PcmlnaW5hbCBNZXNzYWdl
LS0tLS0NCj4gRnJvbTogQW5zaHVtIFttYWlsdG86YW5zaHVtZ0BnbWFpbC5jb21dDQo+IFNlbnQ6
IFR1ZXNkYXksIEF1Z3VzdCAxMCwgMjAxMCAxMjo1NSBQTQ0KPiBUbzogamF2YS11c2VyQGx1Y2Vu
ZS5hcGFjaGUub3JnDQo+IFN1YmplY3Q6IFJlOiBTY2FsaW5nIEx1Y2VuZSB0byAxYmxuIGRvY3MN
Cj4NCj4gSGkgU2hlbGx5LA0KPiBUaGF0IHNlZW1zIGxpa2UgYSByZWFzb25hYmxlIGRhdGEgc2V0
IHNpemUuIEknZCBzdWdnZXN0IHlvdSBpbmNyZWFzZSB5b3VyDQo+IG1lcmdlRmFjdG9yIGFzIGEg
bWVyZ2VGYWN0b3Igb2YgMTAgc2F5cywgeW91IGFyZSBvbmx5IGJ1ZmZlcmluZyAxMCBkb2NzIGlu
DQo+IG1lbW9yeSBiZWZvcmUgd3JpdGluZyBpdCB0byBhIGZpbGUgKGFuZCBpbmN1cnJpbmcgSS9P
KS4gWW91IGNvdWxkIGFjdHVhbGx5DQo+IGZsdXNoIGJ5IFJBTSB1c2FnZSBpbnN0ZWFkIG9mIGEg
RG9jIGNvdW50LiBUdXJuIG9mZiB1c2luZyB0aGUgQ29tcG91bmQgZmlsZQ0KPiBzdHJ1Y3R1cmUg
Zm9yIGluZGV4aW5nIGFzIGl0IGdlbmVyYWxseSB0YWtlcyBtb3JlIHRpbWUgY3JlYXRpbmcgYSBj
ZnMgaW5kZXguDQo+DQo+IFBsdXMgdGhlIHRpbWUgd291bGQgbm90IGdyb3cgbGluZWFybHkgYXMg
dGhlIGxhcmdlciB0aGUgc2l6ZSBvZiBzZWdtZW50cw0KPiBnZXQsIHRoZSBtb3JlIHRpbWUgaXQn
ZCB0YWtlIHRvIGFkZCBtb3JlIGRvY3MgYW5kIG1lcmdlIHRob3NlIHRvZ2V0aGVyDQo+IGludGVy
bWl0dGVudGx5Lg0KPiBZb3UgbWF5IGFsc28gdXNlIGEgbXVsdGl0aHJlYWRlZCBhcHByb2FjaCBp
biBjYXNlIHJlYWRpbmcgdGhlIHNvdXJjZSB0YWtlcw0KPiB0aW1lIGluIHlvdXIgY2FzZSwgdGhv
dWdoLCB0aGUgaW5kZXh3cml0ZXIgd291bGQgaGF2ZSB0byBiZSBzaGFyZWQgYW1vbmcgYWxsDQo+
IHRocmVhZHMuDQo+DQo+IC0tDQo+IEFuc2h1bSBHdXB0YQ0KPiBodHRwOi8vYWktY2FmZS5ibG9n
c3BvdC5jb20NCj4NCj4NCj4gT24gVHVlLCBBdWcgMTAsIDIwMTAgYXQgMTI6MjQgUE0sIFNoZWxs
eV9TaW5naCA8U2hlbGx5X1NpbmdoQGluZm9zeXMuY29tPndyb3RlOg0KPg0KPj4gSGksDQo+Pg0K
Pj4gSSBhbSBkZXZlbG9waW5nIGFuIGFwcGxpY2F0aW9uIHdoaWNoIHVzZXMgTHVjZW5lIGZvciBp
bmRleGluZyBhbmQgc2VhcmNoaW5nDQo+PiAxIGJsbiBkb2N1bWVudHMuICh0aGUgZG9jdW1lbnQg
c2l6ZSBpcyB2ZXJ5IHNtYWxsIHRob3VnaC4gRWFjaCBkb2N1bWVudCBoYXMNCj4+IGEgc2luZ2xl
IGZpZWxkIG9mIDUtMTAgd29yZHM7IHNvIEkgYmVsaWV2ZSB0aGF0IG15IGRhdGEgc2l6ZSBpcyB3
aXRoaW4gdGhlDQo+PiB0ZXN0ZWQgbGltaXRzKS4NCj4+DQo+PiBJIGFtIHVzaW5nIHRoZSBmb2xs
b3dpbmcgY29uZmlndXJhdGlvbjoNCj4+IDEuIMKgIMKgIMKgMS41IGdpZyBSQU0gdG8gdGhlIGp2
bQ0KPj4gMi4gwqAgwqAgwqAxMDBHQiBkaXNrIHNwYWNlLg0KPj4gMy4gwqAgwqAgwqBJbmRleCBj
cmVhdGlvbiB0dW5pbmcgZmFjdG9yczoNCj4+IGEuIMKgIMKgIMKgbWVyZ2VGYWN0b3IgPSAxMA0K
Pj4gYi4gwqAgwqAgwqBtYXhGaWVsZExlbmd0aCA9IDEwDQo+PiBjLiDCoCDCoCDCoG1heE1lcmdl
RG9jcyA9IDUwMDAwMDAgKGlmIEkgdHJ5IHdpdGggYSBsYXJnZXIgdmFsdWUsIEkgZ2V0IGFuDQo+
PiBvdXQtb2YtbWVtb3J5KQ0KPj4NCj4+IFdpdGggdGhlc2Ugc2V0dGluZ3MsIEkgYW0gYWJsZSB0
byBjcmVhdGUgYW4gaW5kZXggb2YgMTAwIG1pbGxpb24gZG9jcyAoMTANCj4+IHBvdyA4KSDCoGlu
IDE1IG1pbnMgY29uc3VtaW5nIGEgZGlzayBzcGFjZSBvZiAyLjVnYi4gV2hpY2ggaXMgcXVpdGUN
Cj4+IHNhdGlzZmFjdG9yeSBmb3IgbWUsIGJ1dCBuZXZlcnRoZWxlc3MsIEkgd2FudCB0byBrbm93
IHdoYXQgZWxzZSBjYW4gYmUgZG9uZQ0KPj4gdG8gdHVuZSBpdCBmdXJ0aGVyLiBQbGVhc2UgaGVs
cC4NCj4+IEFsc28sIHdpdGggdGhlc2Ugc2V0dGluZ3MsIGNhbiBJIGV4cGVjdCB0aGUgdGltZSBh
bmQgc2l6ZSB0byBncm93IGxpbmVhcmx5DQo+PiBmb3IgMWJsbiAoMTAgcG93IDkpIGRvY3VtZW50
cz8NCj4+DQo+PiBUaGFua3MgYW5kIFJlZ2FyZHMsDQo+Pg0KPj4gU2hlbGx5IFNpbmdoDQo+PiBD
ZW50ZXIgRm9yIEtOb3dsZWRnZSBEcml2ZW4gSW5mb3JtYXRpb24gU3lzdGVtcywgSW5mb3N5cw0K
Pj4gRW1haWw6IHNoZWxseV9zaW5naEBpbmZvc3lzLmNvbTxtYWlsdG86c2hlbGx5X3NpbmdoQGlu
Zm9zeXMuY29tPg0KPj4gUGhvbmU6IChNKSA5MSA5OTIgMzY5IDcyMDAsIChWb0lQKTIwMjI5Nzg2
MjINCj4+DQo+Pg0KPj4NCj4+DQo+DQo+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KPiBUbyB1bnN1YnNjcmliZSwg
ZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4gRm9yIGFk
ZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5v
cmcNCj4NCj4NCj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEt
dXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KPiBGb3IgYWRkaXRpb25hbCBjb21t
YW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KPg0KPg0KPiAt
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0NCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2Ny
aWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6
IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+DQo+DQoNCi0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0K
VG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFj
aGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBs
dWNlbmUuYXBhY2hlLm9yZw0KDQo=


From java-user-return-46978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 10 13:23:02 2010
Return-Path: <java-user-return-46978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86294 invoked from network); 10 Aug 2010 13:23:01 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Aug 2010 13:23:01 -0000
Received: (qmail 49600 invoked by uid 500); 10 Aug 2010 13:22:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49312 invoked by uid 500); 10 Aug 2010 13:22:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49304 invoked by uid 99); 10 Aug 2010 13:22:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 13:22:54 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of torindan@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 13:22:48 +0000
Received: by qwd7 with SMTP id 7so11599566qwd.35
        for <java-user@lucene.apache.org>; Tue, 10 Aug 2010 06:22:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=HjQWVk5kCqsWfqCCgCE6YWgKH0/t+CxgbvOyjvj/l0c=;
        b=if59bvqf+quL0CAJfgRxPvVwk2nKyGuoVhz8QKjyyf9SWpOx8PVMnCYAs2CdOzot1H
         /xKyCXSH8CzeX967pgFPtcm7uSveo3kdXNSmPRHJdl0sk5zPfWe8TyyCyKSEtAGz/3XP
         6SbnICfS9oyUnIuEr8ky6iuDAF0aRyrg3rRPE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=IC+Fj3SPsiMIPj8/l7veCUAizmYdjHoR/SWa+bJU5f+vw12RCP4rfmTq90iWbAXupX
         7+tSb88QzSqH4P6bKiogadiGJ4I1PAkFmunXlgZJlC39A7ZpGC47w1BnDxuGwa7x11kC
         Ilebfm65gYN0uAAE9rX5+3rocPaMAgzvG2HA4=
MIME-Version: 1.0
Received: by 10.224.60.131 with SMTP id p3mr9668081qah.205.1281446546890; Tue, 
	10 Aug 2010 06:22:26 -0700 (PDT)
Received: by 10.229.34.204 with HTTP; Tue, 10 Aug 2010 06:22:26 -0700 (PDT)
In-Reply-To: <AA27F54EFDA0CE43B33EBDB7796323740CA2660B5E@PUNITPMBX02.ad.infosys.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA2660945@PUNITPMBX02.ad.infosys.com>
	<AANLkTi=4LLNLK-wk9frni=ay0qkEokgnr+sLLfWPyZ=8@mail.gmail.com>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660988@PUNITPMBX02.ad.infosys.com>
	<528709861-1281428644-cardhu_decombobulator_blackberry.rim.net-283608400-@bda2121.bisx.produk.on.blackberry>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660B35@PUNITPMBX02.ad.infosys.com>
	<3B4AEBB59588ED409ECE3CB6517C41750EC8C16BEC@exchange.windows.mmu.acquiremedia.com>
	<AANLkTinJ=AE=+E1iyCqQxe26PSm2PgS_r-8+WMjcT_oG@mail.gmail.com>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660B5E@PUNITPMBX02.ad.infosys.com>
Date: Tue, 10 Aug 2010 16:22:26 +0300
Message-ID: <AANLkTi=YuvwdGjj=RoH6A1-nUhBN14xtc2LDeqiVBqmO@mail.gmail.com>
Subject: Re: Scaling Lucene to 1bln docs
From: =?UTF-8?B?RGFuaWwgxaJPUklO?= <torindan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

That won't work...if you'll have something like "A Basic Crazy
Document E-something F-something G-something....you get the point" it
will go to all shards so the whole point of shards will be
compromised...you'll have 26 billion documents index ;)

Looks like the only way is to search all shards.
Depending on available hardware (1 Azul...50 EC2), expected
traffic(1qps...1000qps), expected query time(10 msec ... 3 sec),
redundancy (it's a large dataset, I don't think you want to loose it),
and so on...you'll have to decide how many partitions do you want.

It may work with 8-10, it may need 50-64. (I usually use 2^n as it's
easier to split each shard in 2 when index grows too much)

On such large datasets it's a lot of tuning, custom code, and no
one-size-fits-all solution.
Lucene is just a tool (a fine one) but you need to use it wisely to
archive great results.

On Tue, Aug 10, 2010 at 15:55, Shelly_Singh <Shelly_Singh@infosys.com> wrot=
e:
> Hmm..I get the point. But, in my application, the document is basically a=
 descriptive name of a particular thing. The user will search by name (or p=
art of name) and I need to pull out all info pointed to by that name. This =
info is externalized in a db.
>
> One option I can think of is-
> I can shard based on starting alphabet of any name. So, "Alan Mathur of N=
ew Delhi" may go to shard "A". But since the name will have 'n' tokens, and=
 the user may type any one token, this will not work. I can further tweak t=
his such that I index the same document into multiple indices (one for each=
 token). So, the same document may be indexed into Shard"A", "M", "N" and "=
D".
> I am not able to think of another option.
>
> Comments welcome.
>
>
> -----Original Message-----
> From: Danil =C5=A2ORIN [mailto:torindan@gmail.com]
> Sent: Tuesday, August 10, 2010 6:11 PM
> To: java-user@lucene.apache.org
> Subject: Re: Scaling Lucene to 1bln docs
>
> I'd second that.
>
> It doesn't have to be date for sharding. Maybe every query has some
> specific field, like UserId or something, so you can redirect to
> specific shard instead of hitting all 10 indices.
>
> You have to have some kind of narrowing: searching 1bn documents with
> queries that may hit all documents is useless.
> An user won't look on more than let say 100 results (if presented
> properly..maybe 1000)
>
> Those fields that narrow the result set are good candidates for sharding =
keys.
>
>
> On Tue, Aug 10, 2010 at 15:32, Dan OConnor <doconnor@acquiremedia.com> wr=
ote:
>> Shelly:
>>
>> You wouldn't necessarily have to use a multisearcher. A suggested altern=
ative is:
>>
>> - shard into 10 indices. If you need the concept of a date range search,=
 I would assign the documents to the shard by date, otherwise random assign=
ment is fine.
>> - have a pool of IndexSearchers for each index
>> - when a search comes in, allocate a Searcher from each index to the sea=
rch.
>> - perform the search in parallel across all indices.
>> - merge the results in your own code using an efficient merging algorith=
m.
>>
>> Regards,
>> Dan
>>
>>
>>
>>
>> -----Original Message-----
>> From: Shelly_Singh [mailto:Shelly_Singh@infosys.com]
>> Sent: Tuesday, August 10, 2010 8:20 AM
>> To: java-user@lucene.apache.org
>> Subject: RE: Scaling Lucene to 1bln docs
>>
>> No sort. I will need relevance based on TF. If I shard, I will have to s=
earch in al indices.
>>
>> -----Original Message-----
>> From: anshum.gupta@naukri.com [mailto:anshumg@gmail.com]
>> Sent: Tuesday, August 10, 2010 1:54 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: Scaling Lucene to 1bln docs
>>
>> Would like to know, are you using a particular type of sort? Do you need=
 to sort on relevance? Can you shard and restrict your search to a limited =
set of indexes functionally?
>>
>> --
>> Anshum
>> http://blog.anshumgupta.net
>>
>> Sent from BlackBerry(r)
>>
>> -----Original Message-----
>> From: Shelly_Singh <Shelly_Singh@infosys.com>
>> Date: Tue, 10 Aug 2010 13:31:38
>> To: java-user@lucene.apache.org<java-user@lucene.apache.org>
>> Reply-To: java-user@lucene.apache.org
>> Subject: RE: Scaling Lucene to 1bln docs
>>
>> Hi Anshum,
>>
>> I am already running with the 'setCompoundFile' option off.
>> And thanks for pointing out mergeFactor. I had tried a higher mergeFacto=
r couple of days ago, but got an OOM, so I discarded it. Later I figured th=
at OOM was because maxMergeDocs was unlimited and I was using MMap. U r rig=
t, I should try a higher mergeFactor.
>>
>> With regards to the multithreaded approach, I was considering creating 1=
0 different threads each indexing 100mln docs coupled with a Multisearcher =
to which I will feed these 10 indices. Do you think this will improve perfo=
rmance.
>>
>> And just FYI, I have latest reading for 1 bln docs. Indexing time is 2 h=
rs and search time is 15 secs.. I can live with indexing time but the searc=
h time is highly unacceptable.
>>
>> Help again.
>>
>> -----Original Message-----
>> From: Anshum [mailto:anshumg@gmail.com]
>> Sent: Tuesday, August 10, 2010 12:55 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: Scaling Lucene to 1bln docs
>>
>> Hi Shelly,
>> That seems like a reasonable data set size. I'd suggest you increase you=
r
>> mergeFactor as a mergeFactor of 10 says, you are only buffering 10 docs =
in
>> memory before writing it to a file (and incurring I/O). You could actual=
ly
>> flush by RAM usage instead of a Doc count. Turn off using the Compound f=
ile
>> structure for indexing as it generally takes more time creating a cfs in=
dex.
>>
>> Plus the time would not grow linearly as the larger the size of segments
>> get, the more time it'd take to add more docs and merge those together
>> intermittently.
>> You may also use a multithreaded approach in case reading the source tak=
es
>> time in your case, though, the indexwriter would have to be shared among=
 all
>> threads.
>>
>> --
>> Anshum Gupta
>> http://ai-cafe.blogspot.com
>>
>>
>> On Tue, Aug 10, 2010 at 12:24 PM, Shelly_Singh <Shelly_Singh@infosys.com=
>wrote:
>>
>>> Hi,
>>>
>>> I am developing an application which uses Lucene for indexing and searc=
hing
>>> 1 bln documents. (the document size is very small though. Each document=
 has
>>> a single field of 5-10 words; so I believe that my data size is within =
the
>>> tested limits).
>>>
>>> I am using the following configuration:
>>> 1. =C2=A0 =C2=A0 =C2=A01.5 gig RAM to the jvm
>>> 2. =C2=A0 =C2=A0 =C2=A0100GB disk space.
>>> 3. =C2=A0 =C2=A0 =C2=A0Index creation tuning factors:
>>> a. =C2=A0 =C2=A0 =C2=A0mergeFactor =3D 10
>>> b. =C2=A0 =C2=A0 =C2=A0maxFieldLength =3D 10
>>> c. =C2=A0 =C2=A0 =C2=A0maxMergeDocs =3D 5000000 (if I try with a larger=
 value, I get an
>>> out-of-memory)
>>>
>>> With these settings, I am able to create an index of 100 million docs (=
10
>>> pow 8) =C2=A0in 15 mins consuming a disk space of 2.5gb. Which is quite
>>> satisfactory for me, but nevertheless, I want to know what else can be =
done
>>> to tune it further. Please help.
>>> Also, with these settings, can I expect the time and size to grow linea=
rly
>>> for 1bln (10 pow 9) documents?
>>>
>>> Thanks and Regards,
>>>
>>> Shelly Singh
>>> Center For KNowledge Driven Information Systems, Infosys
>>> Email: shelly_singh@infosys.com<mailto:shelly_singh@infosys.com>
>>> Phone: (M) 91 992 369 7200, (VoIP)2022978622
>>>
>>>
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 10 13:33:32 2010
Return-Path: <java-user-return-46979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91635 invoked from network); 10 Aug 2010 13:33:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Aug 2010 13:33:32 -0000
Received: (qmail 74061 invoked by uid 500); 10 Aug 2010 13:33:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73651 invoked by uid 500); 10 Aug 2010 13:33:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73632 invoked by uid 99); 10 Aug 2010 13:33:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 13:33:25 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [122.98.10.33] (HELO KECGATE08.infosys.com) (122.98.10.33)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 13:33:18 +0000
X-TM-IMSS-Message-ID:<20bfb715001c1274@KECGATE08.infosys.com>
Received: from blrkechub04.ad.infosys.com ([10.66.236.44]) by KECGATE08.infosys.com ([122.98.10.33]) with ESMTP (TREND IMSS SMTP Service 7.0) id 20bfb715001c1274 ; Tue, 10 Aug 2010 19:04:50 +0530
Received: from PUNITPCAS02.ad.infosys.com (10.76.151.52) by
 blrkechub04.ad.infosys.com (10.66.236.44) with Microsoft SMTP Server (TLS) id
 8.2.176.0; Tue, 10 Aug 2010 19:02:55 +0530
Received: from PUNITPMBX02.ad.infosys.com ([10.76.151.22]) by
 PUNITPCAS02.ad.infosys.com ([10.76.151.52]) with mapi; Tue, 10 Aug 2010
 19:02:55 +0530
From: Shelly_Singh <Shelly_Singh@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 10 Aug 2010 19:02:53 +0530
Subject: RE: Scaling Lucene to 1bln docs
Thread-Topic: Scaling Lucene to 1bln docs
Thread-Index: Acs4jyqW2AusjLpqRX+q+yXiSbg3kAAAJzeQ
Message-ID: <AA27F54EFDA0CE43B33EBDB7796323740CA2660B8D@PUNITPMBX02.ad.infosys.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA2660945@PUNITPMBX02.ad.infosys.com>
	<AANLkTi=4LLNLK-wk9frni=ay0qkEokgnr+sLLfWPyZ=8@mail.gmail.com>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660988@PUNITPMBX02.ad.infosys.com>
	<528709861-1281428644-cardhu_decombobulator_blackberry.rim.net-283608400-@bda2121.bisx.produk.on.blackberry>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660B35@PUNITPMBX02.ad.infosys.com>
	<3B4AEBB59588ED409ECE3CB6517C41750EC8C16BEC@exchange.windows.mmu.acquiremedia.com>
	<AANLkTinJ=AE=+E1iyCqQxe26PSm2PgS_r-8+WMjcT_oG@mail.gmail.com>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660B5E@PUNITPMBX02.ad.infosys.com>
 <AANLkTi=YuvwdGjj=RoH6A1-nUhBN14xtc2LDeqiVBqmO@mail.gmail.com>
In-Reply-To: <AANLkTi=YuvwdGjj=RoH6A1-nUhBN14xtc2LDeqiVBqmO@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgQWxsLA0KDQpTb21lIHZlcnkgcHJvbWlzaW5nIGZpbmRpbmdzLi4uIGZvciAxMDAgbWxuICgg
YSBmYWN0b3Igb2YgMTAgbGVzcyB0aGFuIG15IGdvYWwpLCBJIGNvdWxkIGJyaW5nIHRoZSBzZWFy
Y2ggc3BlZWQgdG8gJ3NpbmdsZS1kaWdpdCcgbWlsaSBzZWNvbmRzLiBUaGUgbWFqb3IgY2hhbmdl
IGlzIHRoYXQgSSBhbSBub3cgb3B0aW1pemluZyB0aGUgaW5kZXgsIHdoaWNoIEkgd2FzIHNoeWlu
ZyBmcm9tIGRvaW5nIGVhcmxpZXIuDQoNCkZvciBmdW4sIEkgYW0gcGxhbm5pbmcgdG8gdGFrZSBh
IHJlYWRpbmcgb2YgMSBibG4gd2l0aG91dCBzaGFyZGluZywgYW5kIHRoZW4gbG9vayBhdCBzaGFy
ZGluZy4NCg0KRGFuISBJIGdvdCB5b3VyIHBvaW50IGFib3V0IHdoeSBmaXJzdC1sZXR0ZXIgb2Yg
dG9rZW5zIGlzIG5vdCBhIGdvb2Qga2V5IGZvciBkZWNpZGluZyBzaGFyZHMsIGJ1dCBhcyBJIGZv
cmVzZWUsIG15IHdvcmQgbGVuZ3RoIHdpbGwgYmUgZ2VuZXJhbGx5IGJldHdlZW4gMiB0byA1LiBT
bywgaXQgbWF5IHN0aWxsIGJlIHdvcnRoIGEgdHJ5Lg0KDQoNCg0KLS0tLS1PcmlnaW5hbCBNZXNz
YWdlLS0tLS0NCkZyb206IERhbmlsIMWiT1JJTiBbbWFpbHRvOnRvcmluZGFuQGdtYWlsLmNvbV0g
DQpTZW50OiBUdWVzZGF5LCBBdWd1c3QgMTAsIDIwMTAgNjo1MiBQTQ0KVG86IGphdmEtdXNlckBs
dWNlbmUuYXBhY2hlLm9yZw0KU3ViamVjdDogUmU6IFNjYWxpbmcgTHVjZW5lIHRvIDFibG4gZG9j
cw0KDQpUaGF0IHdvbid0IHdvcmsuLi5pZiB5b3UnbGwgaGF2ZSBzb21ldGhpbmcgbGlrZSAiQSBC
YXNpYyBDcmF6eQ0KRG9jdW1lbnQgRS1zb21ldGhpbmcgRi1zb21ldGhpbmcgRy1zb21ldGhpbmcu
Li4ueW91IGdldCB0aGUgcG9pbnQiIGl0DQp3aWxsIGdvIHRvIGFsbCBzaGFyZHMgc28gdGhlIHdo
b2xlIHBvaW50IG9mIHNoYXJkcyB3aWxsIGJlDQpjbyBtcHJvbWlzZWQuLi55b3UnbGwgaGF2ZSAy
NiBiaWxsaW9uIGRvY3VtZW50cyBpbmRleCA7KQ0KDQpMb29rcyBsaWtlIHRoZSBvbmx5IHdheSBp
cyB0byBzZWFyY2ggYWxsIHNoYXJkcy4NCkRlcGVuZGluZyBvbiBhdmFpbGFibGUgaGFyZHdhcmUg
KDEgQXp1bC4uLjUwIEVDMiksIGV4cGVjdGVkDQp0cmFmZmljKDFxcHMuLi4xMDAwcXBzKSwgZXhw
ZWN0ZWQgcXVlcnkgdGltZSgxMCBtc2VjIC4uLiAzIHNlYyksDQpyZWR1bmRhbmN5IChpdCdzIGEg
bGFyZ2UgZGF0YXNldCwgSSBkb24ndCB0aGluayB5b3Ugd2FudCB0byBsb29zZSBpdCksDQphbmQg
c28gb24uLi55b3UnbGwgaGF2ZSB0byBkZWNpZGUgaG93IG1hbnkgcGFydGl0aW9ucyBkbyB5b3Ug
d2FudC4NCg0KSXQgbWF5IHdvcmsgd2l0aCA4LTEwLCBpdCBtYXkgbmVlZCA1MC02NC4gKEkgdXN1
YWxseSB1c2UgMl5uIGFzIGl0J3MNCmVhc2llciB0byBzcGxpdCBlYWNoIHNoYXJkIGluIDIgd2hl
biBpbmRleCBncm93cyB0b28gbXVjaCkNCnJpbmcgZG8NCk9uIHN1Y2ggbGFyZ2UgZGF0YXNldHMg
aXQncyBhIGxvdCBvZiB0dW5pbmcsIGN1c3RvbSBjb2RlLCBhbmQgbm8NCm9uZS1zaXplLWZpdHMt
YWxsIHNvbHV0aW9uLg0KTHVjZW5lIGlzIGp1c3QgYSB0b29sIChhIGZpbmUgb25lKSBidXQgeW91
IG5lZWQgdG8gdXNlIGl0IHdpc2VseSB0bw0KYXJjaGl2ZSBncmVhdCByZXN1bHRzLg0KDQpPbiBU
dWUsIEF1ZyAxMCwgMjAxMCBhdCAxNTo1NSwgU2hlbGx5X1NpbmdoIDxTaGVsbHlfU2luZ2hAaW5m
b3N5cy5jb20+IHdyb3RlOg0KPiBIbW0uLkkgZ2V0IHRoZSBwb2ludC4gQnV0LCBpbiBteSBhcHBs
aWNhdGlvbiwgdGhlIGRvY3VtZW50IGlzIGJhc2ljYWxseSBhIGRlc2NyaXB0aXZlIG5hbWUgb2Yg
YSBwYXJ0aWN1bGFyIHRoaW5nLiBUaGUgdXNlciB3aWxsIHNlYXJjaCBieSBuYW1lIChvciBwYXJ0
IG9mIG5hbWUpIGFuZCBJIG5lZWQgdG8gcHVsbCBvdXQgYWxsIGluZm8gcG9pbnRlZCB0byBieSB0
aGF0IG5hbWUuIFRoaXMgaW5mbyBpcyBleHRlcm5hbGl6ZWQgaW4gYSBkYi4NCj4NCj4gT25lIG9w
dGlvbiBJIGNhbiB0aGluayBvZiBpcy0NCj4gSSBjYW4gc2hhcmQgYmFzZWQgb24gc3RhcnRpbmcg
YWxwaGFiZXQgb2YgYW55IG5hbWUuIFNvLCAiQWxhbiBNYXRodXIgb2YgTmV3IERlbGhpIiBtYXkg
Z28gdG8gc2hhcmQgIkEiLiBCdXQgc2luY2UgdGhlIG5hbWUgd2lsbCBoYXZlICduJyB0b2tlbnMs
IGFuZCB0aGUgdXNlciBtYXkgdHlwZSBhbnkgb25lIHRva2VuLCB0aGlzIHdpbGwgbm90IHdvcmsu
IEkgY2FuIGZ1cnRoZXIgdHdlYWsgdGhpcyBzdWNoIHRoYXQgSSBpbmRleCB0aGUgc2FtZSBkb2N1
bWVudCBpbnRvIG11bHRpcGxlIGluZGljZXMgKG9uZSBmb3IgZWFjaCB0b2tlbikuIFNvLCB0aGUg
c2FtZSBkb2N1bWVudCBtYXkgYmUgaW5kZXhlZCBpbnRvIFNoYXJkIkEiLCAiTSIsICJOIiBhbmQg
IkQiLg0KPiBJIGFtIG5vdCBhYmxlIHRvIHRoaW5rIG9mIGFub3RoZXIgb3B0aW9uLg0KPg0KPiBD
b21tZW50cyB3ZWxjb21lLg0KPg0KPg0KPiAtLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KPiBG
cm9tOiBEYW5pbCDFok9SSU4gW21haWx0bzp0b3JpbmRhbkBnbWFpbC5jb21dDQo+IFNlbnQ6IFR1
ZXNkYXksIEF1Z3VzdCAxMCwgMjAxMCA2OjExIFBNDQo+IFRvOiBqYXZhLXVzZXJAbHVjZW5lLmFw
YWNoZS5vcmcNCj4gU3ViamVjdDogUmU6IFNjYWxpbmcgTHVjZW5lIHRvIDFibG4gZG9jcw0KPg0K
PiBJJ2Qgc2Vjb25kIHRoYXQuDQo+DQo+IEl0IGRvZXNuJ3QgaGF2ZSB0byBiZSBkYXRlIGZvciBz
aGFyZGluZy4gTWF5YmUgZXZlcnkgcXVlcnkgaGFzIHNvbWUNCj4gc3BlY2lmaWMgZmllbGQsIGxp
a2UgVXNlcklkIG9yIHNvbWV0aGluZywgc28geW91IGNhbiByZWRpcmVjdCB0bw0KPiBzcGVjaWZp
YyBzaGFyZCBpbnN0ZWFkIG9mIGhpdHRpbmcgYWxsIDEwIGluZGljZXMuDQo+DQo+IFlvdSBoYXZl
IHRvIGhhdmUgc29tZSBraW5kIG9mIG5hcnJvd2luZzogc2VhcmNoaW5nIDFibiBkb2N1bWVudHMg
d2l0aA0KPiBxdWVyaWVzIHRoYXQgbWF5IGhpdCBhbGwgZG9jdW1lbnRzIGlzIHVzZWxlc3MuDQo+
IEFuIHVzZXIgd29uJ3QgbG9vayBvbiBtb3JlIHRoYW4gbGV0IHNheSAxMDAgcmVzdWx0cyAoaWYg
cHJlc2VudGVkDQo+IHByb3Blcmx5Li5tYXliZSAxMDAwKQ0KPg0KPiBUaG9zZSBmaWVsZHMgdGhh
dCBuYXJyb3cgdGhlIHJlc3VsdCBzZXQgYXJlIGdvb2QgY2FuZGlkYXRlcyBmb3Igc2hhcmRpbmcg
a2V5cy4NCj4NCj4NCj4gT24gVHVlLCBBdWcgMTAsIDIwMTAgYXQgMTU6MzIsIERhbiBPQ29ubm9y
IDxkb2Nvbm5vckBhY3F1aXJlbWVkaWEuY29tPiB3cm90ZToNCj4+IFNoZWxseToNCj4+DQo+PiBZ
b3Ugd291bGRuJ3QgbmVjZXNzYXJpbHkgaGF2ZSB0byB1c2UgYSBtdWx0aXNlYXJjaGVyLiBBIHN1
Z2dlc3RlZCBhbHRlcm5hdGl2ZSBpczoNCj4+DQo+PiAtIHNoYXJkIGludG8gMTAgaW5kaWNlcy4g
SWYgeW91IG5lZWQgdGhlIGNvbmNlcHQgb2YgYSBkYXRlIHJhbmdlIHNlYXJjaCwgSSB3b3VsZCBh
c3NpZ24gdGhlIGRvY3VtZW50cyB0byB0aGUgc2hhcmQgYnkgZGF0ZSwgb3RoZXJ3aXNlIHJhbmRv
bSBhc3NpZ25tZW50IGlzIGZpbmUuDQo+PiAtIGhhdmUgYSBwb29sIG9mIEluZGV4U2VhcmNoZXJz
IGZvciBlYWNoIGluZGV4DQo+PiAtIHdoZW4gYSBzZWFyY2ggY29tZXMgaW4sIGFsbG9jYXRlIGEg
U2VhcmNoZXIgZnJvbSBlYWNoIGluZGV4IHRvIHRoZSBzZWFyY2guDQo+PiAtIHBlcmZvcm0gdGhl
IHNlYXJjaCBpbiBwYXJhbGxlbCBhY3Jvc3MgYWxsIGluZGljZXMuDQo+PiAtIG1lcmdlIHRoZSBy
ZXN1bHRzIGluIHlvdXIgb3duIGNvZGUgdXNpbmcgYW4gZWZmaWNpZW50IG1lcmdpbmcgYWxnb3Jp
dGhtLg0KPj4NCj4+IFJlZ2FyZHMsDQo+PiBEYW4NCj4+DQo+Pg0KPj4NCj4+DQo+PiAtLS0tLU9y
aWdpbmFsIE1lc3NhZ2UtLS0tLQ0KPj4gRnJvbTogU2hlbGx5X1NpbmdoIFttYWlsdG86U2hlbGx5
X1NpbmdoQGluZm9zeXMuY29tXQ0KPj4gU2VudDogVHVlc2RheSwgQXVndXN0IDEwLCAyMDEwIDg6
MjAgQU0NCj4+IFRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNCj4+IFN1YmplY3Q6IFJF
OiBTY2FsaW5nIEx1Y2VuZSB0byAxYmxuIGRvY3MNCj4+DQo+PiBObyBzb3J0LiBJIHdpbGwgbmVl
ZCByZWxldmFuY2UgYmFzZWQgb24gVEYuIElmIEkgc2hhcmQsIEkgd2lsbCBoYXZlIHRvIHNlYXJj
aCBpbiBhbCBpbmRpY2VzLg0KPj4NCj4+IC0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQo+PiBG
cm9tOiBhbnNodW0uZ3VwdGFAbmF1a3JpLmNvbSBbbWFpbHRvOmFuc2h1bWdAZ21haWwuY29tXQ0K
Pj4gU2VudDogVHVlc2RheSwgQXVndXN0IDEwLCAyMDEwIDE6NTQgUE0NCj4+IFRvOiBqYXZhLXVz
ZXJAbHVjZW5lLmFwYWNoZS5vcmcNCj4+IFN1YmplY3Q6IFJlOiBTY2FsaW5nIEx1Y2VuZSB0byAx
YmxuIGRvY3MNCj4+DQo+PiBXb3VsZCBsaWtlIHRvIGtub3csIGFyZSB5b3UgdXNpbmcgYSBwYXJ0
aWN1bGFyIHR5cGUgb2Ygc29ydD8gRG8geW91IG5lZWQgdG8gc29ydCBvbiByZWxldmFuY2U/IENh
biB5b3Ugc2hhcmQgYW5kIHJlc3RyaWN0IHlvdXIgc2VhcmNoIHRvIGEgbGltaXRlZCBzZXQgb2Yg
aW5kZXhlcyBmdW5jdGlvbmFsbHk/DQo+Pg0KPj4gLS0NCj4+IEFuc2h1bQ0KPj4gaHR0cDovL2Js
b2cuYW5zaHVtZ3VwdGEubmV0DQo+Pg0KPj4gU2VudCBmcm9tIEJsYWNrQmVycnkocikNCj4+DQo+
PiAtLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KPj4gRnJvbTogU2hlbGx5X1NpbmdoIDxTaGVs
bHlfU2luZ2hAaW5mb3N5cy5jb20+DQo+PiBEYXRlOiBUdWUsIDEwIEF1ZyAyMDEwIDEzOjMxOjM4
DQo+PiBUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnPGphdmEtdXNlckBsdWNlbmUuYXBh
Y2hlLm9yZz4NCj4+IFJlcGx5LVRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNCj4+IFN1
YmplY3Q6IFJFOiBTY2FsaW5nIEx1Y2VuZSB0byAxYmxuIGRvY3MNCj4+DQo+PiBIaSBBbnNodW0s
DQo+Pg0KPj4gSSBhbSBhbHJlYWR5IHJ1bm5pbmcgd2l0aCB0aGUgJ3NldENvbXBvdW5kRmlsZScg
b3B0aW9uIG9mZi4NCj4+IEFuZCB0aGFua3MgZm9yIHBvaW50aW5nIG91dCBtZXJnZUZhY3Rvci4g
SSBoYWQgdHJpZWQgYSBoaWdoZXIgbWVyZ2VGYWN0b3IgY291cGxlIG9mIGRheXMgYWdvLCBidXQg
Z290IGFuIE9PTSwgc28gSSBkaXNjYXJkZWQgaXQuIExhdGVyIEkgZmlndXJlZCB0aGF0IE9PTSB3
YXMgYmVjYXVzZSBtYXhNZXJnZURvY3Mgd2FzIHVubGltaXRlZCBhbmQgSSB3YXMgdXNpbmcgTU1h
cC4gVSByIHJpZ3QsIEkgc2hvdWxkIHRyeSBhIGhpZ2hlciBtZXJnZUZhY3Rvci4NCj4+DQo+PiBX
aXRoIHJlZ2FyZHMgdG8gdGhlIG11bHRpdGhyZWFkZWQgYXBwcm9hY2gsIEkgd2FzIGNvbnNpZGVy
aW5nIGNyZWF0aW5nIDEwIGRpZmZlcmVudCB0aHJlYWRzIGVhY2ggaW5kZXhpbmcgMTAwbWxuIGRv
Y3MgY291cGxlZCB3aXRoIGEgTXVsdGlzZWFyY2hlciB0byB3aGljaCBJIHdpbGwgZmVlZCB0aGVz
ZSAxMCBpbmRpY2VzLiBEbyB5b3UgdGhpbmsgdGhpcyB3aWxsIGltcHJvdmUgcGVyZm9ybWFuY2Uu
DQo+Pg0KPj4gQW5kIGp1c3QgRllJLCBJIGhhdmUgbGF0ZXN0IHJlYWRpbmcgZm9yIDEgYmxuIGRv
Y3MuIEluZGV4aW5nIHRpbWUgaXMgMiBocnMgYW5kIHNlYXJjaCB0aW1lIGlzIDE1IHNlY3MuLiBJ
IGNhbiBsaXZlIHdpdGggaW5kZXhpbmcgdGltZSBidXQgdGhlIHNlYXJjaCB0aW1lIGlzIGhpZ2hs
eSB1bmFjY2VwdGFibGUuDQo+Pg0KPj4gSGVscCBhZ2Fpbi4NCj4+DQo+PiAtLS0tLU9yaWdpbmFs
IE1lc3NhZ2UtLS0tLQ0KPj4gRnJvbTogQW5zaHVtIFttYWlsdG86YW5zaHVtZ0BnbWFpbC5jb21d
DQo+PiBTZW50OiBUdWVzZGF5LCBBdWd1c3QgMTAsIDIwMTAgMTI6NTUgUE0NCj4+IFRvOiBqYXZh
LXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNCj4+IFN1YmplY3Q6IFJlOiBTY2FsaW5nIEx1Y2VuZSB0
byAxYmxuIGRvY3MNCj4+DQo+PiBIaSBTaGVsbHksDQo+PiBUaGF0IHNlZW1zIGxpa2UgYSByZWFz
b25hYmxlIGRhdGEgc2V0IHNpemUuIEknZCBzdWdnZXN0IHlvdSBpbmNyZWFzZSB5b3VyDQo+PiBt
ZXJnZUZhY3RvciBhcyBhIG1lcmdlRmFjdG9yIG9mIDEwIHNheXMsIHlvdSBhcmUgb25seSBidWZm
ZXJpbmcgMTAgZG9jcyBpbg0KPj4gbWVtb3J5IGJlZm9yZSB3cml0aW5nIGl0IHRvIGEgZmlsZSAo
YW5kIGluY3VycmluZyBJL08pLiBZb3UgY291bGQgYWN0dWFsbHkNCj4+IGZsdXNoIGJ5IFJBTSB1
c2FnZSBpbnN0ZWFkIG9mIGEgRG9jIGNvdW50LiBUdXJuIG9mZiB1c2luZyB0aGUgQ29tcG91bmQg
ZmlsZQ0KPj4gc3RydWN0dXJlIGZvciBpbmRleGluZyBhcyBpdCBnZW5lcmFsbHkgdGFrZXMgbW9y
ZSB0aW1lIGNyZWF0aW5nIGEgY2ZzIGluZGV4Lg0KPj4NCj4+IFBsdXMgdGhlIHRpbWUgd291bGQg
bm90IGdyb3cgbGluZWFybHkgYXMgdGhlIGxhcmdlciB0aGUgc2l6ZSBvZiBzZWdtZW50cw0KPj4g
Z2V0LCB0aGUgbW9yZSB0aW1lIGl0J2QgdGFrZSB0byBhZGQgbW9yZSBkb2NzIGFuZCBtZXJnZSB0
aG9zZSB0b2dldGhlcg0KPj4gaW50ZXJtaXR0ZW50bHkuDQo+PiBZb3UgbWF5IGFsc28gdXNlIGEg
bXVsdGl0aHJlYWRlZCBhcHByb2FjaCBpbiBjYXNlIHJlYWRpbmcgdGhlIHNvdXJjZSB0YWtlcw0K
Pj4gdGltZSBpbiB5b3VyIGNhc2UsIHRob3VnaCwgdGhlIGluZGV4d3JpdGVyIHdvdWxkIGhhdmUg
dG8gYmUgc2hhcmVkIGFtb25nIGFsbA0KPj4gdGhyZWFkcy4NCj4+DQo+PiAtLQ0KPj4gQW5zaHVt
IEd1cHRhDQo+PiBodHRwOi8vYWktY2FmZS5ibG9nc3BvdC5jb20NCj4+DQo+Pg0KPj4gT24gVHVl
LCBBdWcgMTAsIDIwMTAgYXQgMTI6MjQgUE0sIFNoZWxseV9TaW5naCA8U2hlbGx5X1NpbmdoQGlu
Zm9zeXMuY29tPndyb3RlOg0KPj4NCj4+PiBIaSwNCj4+Pg0KPj4+IEkgYW0gZGV2ZWxvcGluZyBh
biBhcHBsaWNhdGlvbiB3aGljaCB1c2VzIEx1Y2VuZSBmb3IgaW5kZXhpbmcgYW5kIHNlYXJjaGlu
Zw0KPj4+IDEgYmxuIGRvY3VtZW50cy4gKHRoZSBkb2N1bWVudCBzaXplIGlzIHZlcnkgc21hbGwg
dGhvdWdoLiBFYWNoIGRvY3VtZW50IGhhcw0KPj4+IGEgc2luZ2xlIGZpZWxkIG9mIDUtMTAgd29y
ZHM7IHNvIEkgYmVsaWV2ZSB0aGF0IG15IGRhdGEgc2l6ZSBpcyB3aXRoaW4gdGhlDQo+Pj4gdGVz
dGVkIGxpbWl0cykuDQo+Pj4NCj4+PiBJIGFtIHVzaW5nIHRoZSBmb2xsb3dpbmcgY29uZmlndXJh
dGlvbjoNCj4+PiAxLiDCoCDCoCDCoDEuNSBnaWcgUkFNIHRvIHRoZSBqdm0NCj4+PiAyLiDCoCDC
oCDCoDEwMEdCIGRpc2sgc3BhY2UuDQo+Pj4gMy4gwqAgwqAgwqBJbmRleCBjcmVhdGlvbiB0dW5p
bmcgZmFjdG9yczoNCj4+PiBhLiDCoCDCoCDCoG1lcmdlRmFjdG9yID0gMTANCj4+PiBiLiDCoCDC
oCDCoG1heEZpZWxkTGVuZ3RoID0gMTANCj4+PiBjLiDCoCDCoCDCoG1heE1lcmdlRG9jcyA9IDUw
MDAwMDAgKGlmIEkgdHJ5IHdpdGggYSBsYXJnZXIgdmFsdWUsIEkgZ2V0IGFuDQo+Pj4gb3V0LW9m
LW1lbW9yeSkNCj4+Pg0KPj4+IFdpdGggdGhlc2Ugc2V0dGluZ3MsIEkgYW0gYWJsZSB0byBjcmVh
dGUgYW4gaW5kZXggb2YgMTAwIG1pbGxpb24gZG9jcyAoMTANCj4+PiBwb3cgOCkgwqBpbiAxNSBt
aW5zIGNvbnN1bWluZyBhIGRpc2sgc3BhY2Ugb2YgMi41Z2IuIFdoaWNoIGlzIHF1aXRlDQo+Pj4g
c2F0aXNmYWN0b3J5IGZvciBtZSwgYnV0IG5ldmVydGhlbGVzcywgSSB3YW50IHRvIGtub3cgd2hh
dCBlbHNlIGNhbiBiZSBkb25lDQo+Pj4gdG8gdHVuZSBpdCBmdXJ0aGVyLiBQbGVhc2UgaGVscC4N
Cj4+PiBBbHNvLCB3aXRoIHRoZXNlIHNldHRpbmdzLCBjYW4gSSBleHBlY3QgdGhlIHRpbWUgYW5k
IHNpemUgdG8gZ3JvdyBsaW5lYXJseQ0KPj4+IGZvciAxYmxuICgxMCBwb3cgOSkgZG9jdW1lbnRz
Pw0KPj4+DQo+Pj4gVGhhbmtzIGFuZCBSZWdhcmRzLA0KPj4+DQo+Pj4gU2hlbGx5IFNpbmdoDQo+
Pj4gQ2VudGVyIEZvciBLTm93bGVkZ2UgRHJpdmVuIEluZm9ybWF0aW9uIFN5c3RlbXMsIEluZm9z
eXMNCj4+PiBFbWFpbDogc2hlbGx5X3NpbmdoQGluZm9zeXMuY29tPG1haWx0bzpzaGVsbHlfc2lu
Z2hAaW5mb3N5cy5jb20+DQo+Pj4gUGhvbmU6IChNKSA5MSA5OTIgMzY5IDcyMDAsIChWb0lQKTIw
MjI5Nzg2MjINCj4+Pg0KPj4+DQo+Pj4NCj4+Pg0KPj4NCj4+IC0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KPj4gVG8g
dW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUu
b3JnDQo+PiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBs
dWNlbmUuYXBhY2hlLm9yZw0KPj4NCj4+DQo+PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4+IFRvIHVuc3Vic2Ny
aWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KPj4g
Rm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFw
YWNoZS5vcmcNCj4+DQo+Pg0KPj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+PiBUbyB1bnN1YnNjcmliZSwgZS1t
YWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4+IEZvciBhZGRp
dGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3Jn
DQo+Pg0KPj4NCj4NCj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGph
dmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KPiBGb3IgYWRkaXRpb25hbCBj
b21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KPg0KPg0K
DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNj
cmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDog
amF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCg0K


From java-user-return-46980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 10 13:41:52 2010
Return-Path: <java-user-return-46980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95703 invoked from network); 10 Aug 2010 13:41:51 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Aug 2010 13:41:51 -0000
Received: (qmail 87479 invoked by uid 500); 10 Aug 2010 13:41:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86656 invoked by uid 500); 10 Aug 2010 13:41:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86642 invoked by uid 99); 10 Aug 2010 13:41:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 13:41:42 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [122.98.14.33] (HELO kecgate06.infosys.com) (122.98.14.33)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 13:41:35 +0000
X-TM-IMSS-Message-ID:<d4309d4500066ee4@kecgate06.infosys.com>
Received: from blrkechub03.ad.infosys.com ([10.66.236.43]) by kecgate06.infosys.com ([122.98.14.33]) with ESMTP (TREND IMSS SMTP Service 7.0) id d4309d4500066ee4 ; Tue, 10 Aug 2010 19:12:15 +0530
Received: from PUNITPCAS02.ad.infosys.com (10.76.151.52) by
 blrkechub03.ad.infosys.com (10.66.236.43) with Microsoft SMTP Server (TLS) id
 8.2.176.0; Tue, 10 Aug 2010 19:11:13 +0530
Received: from PUNITPMBX02.ad.infosys.com ([10.76.151.22]) by
 PUNITPCAS02.ad.infosys.com ([10.76.151.52]) with mapi; Tue, 10 Aug 2010
 19:11:12 +0530
From: Shelly_Singh <Shelly_Singh@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 10 Aug 2010 19:11:11 +0530
Subject: RE: Scaling Lucene to 1bln docs
Thread-Topic: Scaling Lucene to 1bln docs
Thread-Index: Acs4jyqW2AusjLpqRX+q+yXiSbg3kAAAgweg
Message-ID: <AA27F54EFDA0CE43B33EBDB7796323740CA2660B93@PUNITPMBX02.ad.infosys.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA2660945@PUNITPMBX02.ad.infosys.com>
	<AANLkTi=4LLNLK-wk9frni=ay0qkEokgnr+sLLfWPyZ=8@mail.gmail.com>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660988@PUNITPMBX02.ad.infosys.com>
	<528709861-1281428644-cardhu_decombobulator_blackberry.rim.net-283608400-@bda2121.bisx.produk.on.blackberry>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660B35@PUNITPMBX02.ad.infosys.com>
	<3B4AEBB59588ED409ECE3CB6517C41750EC8C16BEC@exchange.windows.mmu.acquiremedia.com>
	<AANLkTinJ=AE=+E1iyCqQxe26PSm2PgS_r-8+WMjcT_oG@mail.gmail.com>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660B5E@PUNITPMBX02.ad.infosys.com>
 <AANLkTi=YuvwdGjj=RoH6A1-nUhBN14xtc2LDeqiVBqmO@mail.gmail.com>
In-Reply-To: <AANLkTi=YuvwdGjj=RoH6A1-nUhBN14xtc2LDeqiVBqmO@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgZm9sa3MsDQoNClRoYW5rcyBmb3IgdGhlIGV4Y2VsbGVudCBzdXBwb3J0IG4gZ3VpZGFuY2Ug
b24gbXkgdmVyeSBmaXJzdCBkYXkgb24gdGhpcyBtYWlsaW5nIGxpc3QuLi4NCkF0IGVuZCBvZiBk
YXksIEkgaGF2ZSB2ZXJ5IG9wdGltaXN0aWMgcmVzdWx0cy4gMTAwYmxuIHNlYXJjaCBpbiBsZXNz
IHRoYW4gMW1zIGFuZCB0aGUgaW5kZXggY3JlYXRpb24gdGltZSBpcyBub3QgaHVnZSBlaXRoZXIg
KCBjbG9zZSB0byAxNSBtaW51dGVzKS4NCg0KSSBhbSBub3cgaGl0dGluZyB0aGUgMWJsbiBtYXJr
IHdpdGggcm91Z2hseSB0aGUgc2FtZSBzZXR0aW5ncy4gQnV0LCBJIHdhbnQgdG8gdW5kZXJzdGFu
ZCBOb3JtcyBhbmQgVGVybUZpbHRlcnMuDQoNCkNhbiBzb21lb25lIGV4cGxhaW4sIHdoeSBvciB3
aHkgbm90IHNob3VsZCBvbmUgdXNlIGVhY2ggb2YgdGhlc2UgYW5kIHdoYXQgdHJhZGVvZmZzIGRv
ZXMgaXQgaGF2ZS4gDQoNClJlZ2FyZHMsDQpTaGVsbHkNCg0KLS0tLS1PcmlnaW5hbCBNZXNzYWdl
LS0tLS0NCkZyb206IERhbmlsIMWiT1JJTiBbbWFpbHRvOnRvcmluZGFuQGdtYWlsLmNvbV0gDQpT
ZW50OiBUdWVzZGF5LCBBdWd1c3QgMTAsIDIwMTAgNjo1MiBQTQ0KVG86IGphdmEtdXNlckBsdWNl
bmUuYXBhY2hlLm9yZw0KU3ViamVjdDogUmU6IFNjYWxpbmcgTHVjZW5lIHRvIDFibG4gZG9jcw0K
DQpUaGF0IHdvbid0IHdvcmsuLi5pZiB5b3UnbGwgaGF2ZSBzb21ldGhpbmcgbGlrZSAiQSBCYXNp
YyBDcmF6eQ0KRG9jdW1lbnQgRS1zb21ldGhpbmcgRi1zb21ldGhpbmcgRy1zb21ldGhpbmcuLi4u
eW91IGdldCB0aGUgcG9pbnQiIGl0DQp3aWxsIGdvIHRvIGFsbCBzaGFyZHMgc28gdGhlIHdob2xl
IHBvaW50IG9mIHNoYXJkcyB3aWxsIGJlDQpjb21wcm9taXNlZC4uLnlvdSdsbCBoYXZlIDI2IGJp
bGxpb24gZG9jdW1lbnRzIGluZGV4IDspDQoNCkxvb2tzIGxpa2UgdGhlIG9ubHkgd2F5IGlzIHRv
IHNlYXJjaCBhbGwgc2hhcmRzLg0KRGVwZW5kaW5nIG9uIGF2YWlsYWJsZSBoYXJkd2FyZSAoMSBB
enVsLi4uNTAgRUMyKSwgZXhwZWN0ZWQNCnRyYWZmaWMoMXFwcy4uLjEwMDBxcHMpLCBleHBlY3Rl
ZCBxdWVyeSB0aW1lKDEwIG1zZWMgLi4uIDMgc2VjKSwNCnJlZHVuZGFuY3kgKGl0J3MgYSBsYXJn
ZSBkYXRhc2V0LCBJIGRvbid0IHRoaW5rIHlvdSB3YW50IHRvIGxvb3NlIGl0KSwNCmFuZCBzbyBv
bi4uLnlvdSdsbCBoYXZlIHRvIGRlY2lkZSBob3cgbWFueSBwYXJ0aXRpb25zIGRvIHlvdSB3YW50
Lg0KDQpJdCBtYXkgd29yayB3aXRoIDgtMTAsIGl0IG1heSBuZWVkIDUwLTY0LiAoSSB1c3VhbGx5
IHVzZSAyXm4gYXMgaXQncw0KZWFzaWVyIHRvIHNwbGl0IGVhY2ggc2hhcmQgaW4gMiB3aGVuIGlu
ZGV4IGdyb3dzIHRvbyBtdWNoKQ0KDQpPbiBzdWNoIGxhcmdlIGRhdGFzZXRzIGl0J3MgYSBsb3Qg
b2YgdHVuaW5nLCBjdXN0b20gY29kZSwgYW5kIG5vDQpvbmUtc2l6ZS1maXRzLWFsbCBzb2x1dGlv
bi4NCkx1Y2VuZSBpcyBqdXN0IGEgdG9vbCAoYSBmaW5lIG9uZSkgYnV0IHlvdSBuZWVkIHRvIHVz
ZSBpdCB3aXNlbHkgdG8NCmFyY2hpdmUgZ3JlYXQgcmVzdWx0cy4NCg0KT24gVHVlLCBBdWcgMTAs
IDIwMTAgYXQgMTU6NTUsIFNoZWxseV9TaW5naCA8U2hlbGx5X1NpbmdoQGluZm9zeXMuY29tPiB3
cm90ZToNCj4gSG1tLi5JIGdldCB0aGUgcG9pbnQuIEJ1dCwgaW4gbXkgYXBwbGljYXRpb24sIHRo
ZSBkb2N1bWVudCBpcyBiYXNpY2FsbHkgYSBkZXNjcmlwdGl2ZSBuYW1lIG9mIGEgcGFydGljdWxh
ciB0aGluZy4gVGhlIHVzZXIgd2lsbCBzZWFyY2ggYnkgbmFtZSAob3IgcGFydCBvZiBuYW1lKSBh
bmQgSSBuZWVkIHRvIHB1bGwgb3V0IGFsbCBpbmZvIHBvaW50ZWQgdG8gYnkgdGhhdCBuYW1lLiBU
aGlzIGluZm8gaXMgZXh0ZXJuYWxpemVkIGluIGEgZGIuDQo+DQo+IE9uZSBvcHRpb24gSSBjYW4g
dGhpbmsgb2YgaXMtDQo+IEkgY2FuIHNoYXJkIGJhc2VkIG9uIHN0YXJ0aW5nIGFscGhhYmV0IG9m
IGFueSBuYW1lLiBTbywgIkFsYW4gTWF0aHVyIG9mIE5ldyBEZWxoaSIgbWF5IGdvIHRvIHNoYXJk
ICJBIi4gQnV0IHNpbmNlIHRoZSBuYW1lIHdpbGwgaGF2ZSAnbicgdG9rZW5zLCBhbmQgdGhlIHVz
ZXIgbWF5IHR5cGUgYW55IG9uZSB0b2tlbiwgdGhpcyB3aWxsIG5vdCB3b3JrLiBJIGNhbiBmdXJ0
aGVyIHR3ZWFrIHRoaXMgc3VjaCB0aGF0IEkgaW5kZXggdGhlIHNhbWUgZG9jdW1lbnQgaW50byBt
dWx0aXBsZSBpbmRpY2VzIChvbmUgZm9yIGVhY2ggdG9rZW4pLiBTbywgdGhlIHNhbWUgZG9jdW1l
bnQgbWF5IGJlIGluZGV4ZWQgaW50byBTaGFyZCJBIiwgIk0iLCAiTiIgYW5kICJEIi4NCj4gSSBh
bSBub3QgYWJsZSB0byB0aGluayBvZiBhbm90aGVyIG9wdGlvbi4NCj4NCj4gQ29tbWVudHMgd2Vs
Y29tZS4NCj4NCj4NCj4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCj4gRnJvbTogRGFuaWwg
xaJPUklOIFttYWlsdG86dG9yaW5kYW5AZ21haWwuY29tXQ0KPiBTZW50OiBUdWVzZGF5LCBBdWd1
c3QgMTAsIDIwMTAgNjoxMSBQTQ0KPiBUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQo+
IFN1YmplY3Q6IFJlOiBTY2FsaW5nIEx1Y2VuZSB0byAxYmxuIGRvY3MNCj4NCj4gSSdkIHNlY29u
ZCB0aGF0Lg0KPg0KPiBJdCBkb2Vzbid0IGhhdmUgdG8gYmUgZGF0ZSBmb3Igc2hhcmRpbmcuIE1h
eWJlIGV2ZXJ5IHF1ZXJ5IGhhcyBzb21lDQo+IHNwZWNpZmljIGZpZWxkLCBsaWtlIFVzZXJJZCBv
ciBzb21ldGhpbmcsIHNvIHlvdSBjYW4gcmVkaXJlY3QgdG8NCj4gc3BlY2lmaWMgc2hhcmQgaW5z
dGVhZCBvZiBoaXR0aW5nIGFsbCAxMCBpbmRpY2VzLg0KPg0KPiBZb3UgaGF2ZSB0byBoYXZlIHNv
bWUga2luZCBvZiBuYXJyb3dpbmc6IHNlYXJjaGluZyAxYm4gZG9jdW1lbnRzIHdpdGgNCj4gcXVl
cmllcyB0aGF0IG1heSBoaXQgYWxsIGRvY3VtZW50cyBpcyB1c2VsZXNzLg0KPiBBbiB1c2VyIHdv
bid0IGxvb2sgb24gbW9yZSB0aGFuIGxldCBzYXkgMTAwIHJlc3VsdHMgKGlmIHByZXNlbnRlZA0K
PiBwcm9wZXJseS4ubWF5YmUgMTAwMCkNCj4NCj4gVGhvc2UgZmllbGRzIHRoYXQgbmFycm93IHRo
ZSByZXN1bHQgc2V0IGFyZSBnb29kIGNhbmRpZGF0ZXMgZm9yIHNoYXJkaW5nIGtleXMuDQo+DQo+
DQo+IE9uIFR1ZSwgQXVnIDEwLCAyMDEwIGF0IDE1OjMyLCBEYW4gT0Nvbm5vciA8ZG9jb25ub3JA
YWNxdWlyZW1lZGlhLmNvbT4gd3JvdGU6DQo+PiBTaGVsbHk6DQo+Pg0KPj4gWW91IHdvdWxkbid0
IG5lY2Vzc2FyaWx5IGhhdmUgdG8gdXNlIGEgbXVsdGlzZWFyY2hlci4gQSBzdWdnZXN0ZWQgYWx0
ZXJuYXRpdmUgaXM6DQo+Pg0KPj4gLSBzaGFyZCBpbnRvIDEwIGluZGljZXMuIElmIHlvdSBuZWVk
IHRoZSBjb25jZXB0IG9mIGEgZGF0ZSByYW5nZSBzZWFyY2gsIEkgd291bGQgYXNzaWduIHRoZSBk
b2N1bWVudHMgdG8gdGhlIHNoYXJkIGJ5IGRhdGUsIG90aGVyd2lzZSByYW5kb20gYXNzaWdubWVu
dCBpcyBmaW5lLg0KPj4gLSBoYXZlIGEgcG9vbCBvZiBJbmRleFNlYXJjaGVycyBmb3IgZWFjaCBp
bmRleA0KPj4gLSB3aGVuIGEgc2VhcmNoIGNvbWVzIGluLCBhbGxvY2F0ZSBhIFNlYXJjaGVyIGZy
b20gZWFjaCBpbmRleCB0byB0aGUgc2VhcmNoLg0KPj4gLSBwZXJmb3JtIHRoZSBzZWFyY2ggaW4g
cGFyYWxsZWwgYWNyb3NzIGFsbCBpbmRpY2VzLg0KPj4gLSBtZXJnZSB0aGUgcmVzdWx0cyBpbiB5
b3VyIG93biBjb2RlIHVzaW5nIGFuIGVmZmljaWVudCBtZXJnaW5nIGFsZ29yaXRobS4NCj4+DQo+
PiBSZWdhcmRzLA0KPj4gRGFuDQo+Pg0KPj4NCj4+DQo+Pg0KPj4gLS0tLS1PcmlnaW5hbCBNZXNz
YWdlLS0tLS0NCj4+IEZyb206IFNoZWxseV9TaW5naCBbbWFpbHRvOlNoZWxseV9TaW5naEBpbmZv
c3lzLmNvbV0NCj4+IFNlbnQ6IFR1ZXNkYXksIEF1Z3VzdCAxMCwgMjAxMCA4OjIwIEFNDQo+PiBU
bzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQo+PiBTdWJqZWN0OiBSRTogU2NhbGluZyBM
dWNlbmUgdG8gMWJsbiBkb2NzDQo+Pg0KPj4gTm8gc29ydC4gSSB3aWxsIG5lZWQgcmVsZXZhbmNl
IGJhc2VkIG9uIFRGLiBJZiBJIHNoYXJkLCBJIHdpbGwgaGF2ZSB0byBzZWFyY2ggaW4gYWwgaW5k
aWNlcy4NCj4+DQo+PiAtLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KPj4gRnJvbTogYW5zaHVt
Lmd1cHRhQG5hdWtyaS5jb20gW21haWx0bzphbnNodW1nQGdtYWlsLmNvbV0NCj4+IFNlbnQ6IFR1
ZXNkYXksIEF1Z3VzdCAxMCwgMjAxMCAxOjU0IFBNDQo+PiBUbzogamF2YS11c2VyQGx1Y2VuZS5h
cGFjaGUub3JnDQo+PiBTdWJqZWN0OiBSZTogU2NhbGluZyBMdWNlbmUgdG8gMWJsbiBkb2NzDQo+
Pg0KPj4gV291bGQgbGlrZSB0byBrbm93LCBhcmUgeW91IHVzaW5nIGEgcGFydGljdWxhciB0eXBl
IG9mIHNvcnQ/IERvIHlvdSBuZWVkIHRvIHNvcnQgb24gcmVsZXZhbmNlPyBDYW4geW91IHNoYXJk
IGFuZCByZXN0cmljdCB5b3VyIHNlYXJjaCB0byBhIGxpbWl0ZWQgc2V0IG9mIGluZGV4ZXMgZnVu
Y3Rpb25hbGx5Pw0KPj4NCj4+IC0tDQo+PiBBbnNodW0NCj4+IGh0dHA6Ly9ibG9nLmFuc2h1bWd1
cHRhLm5ldA0KPj4NCj4+IFNlbnQgZnJvbSBCbGFja0JlcnJ5KHIpDQo+Pg0KPj4gLS0tLS1Pcmln
aW5hbCBNZXNzYWdlLS0tLS0NCj4+IEZyb206IFNoZWxseV9TaW5naCA8U2hlbGx5X1NpbmdoQGlu
Zm9zeXMuY29tPg0KPj4gRGF0ZTogVHVlLCAxMCBBdWcgMjAxMCAxMzozMTozOA0KPj4gVG86IGph
dmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZzxqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmc+DQo+
PiBSZXBseS1UbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQo+PiBTdWJqZWN0OiBSRTog
U2NhbGluZyBMdWNlbmUgdG8gMWJsbiBkb2NzDQo+Pg0KPj4gSGkgQW5zaHVtLA0KPj4NCj4+IEkg
YW0gYWxyZWFkeSBydW5uaW5nIHdpdGggdGhlICdzZXRDb21wb3VuZEZpbGUnIG9wdGlvbiBvZmYu
DQo+PiBBbmQgdGhhbmtzIGZvciBwb2ludGluZyBvdXQgbWVyZ2VGYWN0b3IuIEkgaGFkIHRyaWVk
IGEgaGlnaGVyIG1lcmdlRmFjdG9yIGNvdXBsZSBvZiBkYXlzIGFnbywgYnV0IGdvdCBhbiBPT00s
IHNvIEkgZGlzY2FyZGVkIGl0LiBMYXRlciBJIGZpZ3VyZWQgdGhhdCBPT00gd2FzIGJlY2F1c2Ug
bWF4TWVyZ2VEb2NzIHdhcyB1bmxpbWl0ZWQgYW5kIEkgd2FzIHVzaW5nIE1NYXAuIFUgciByaWd0
LCBJIHNob3VsZCB0cnkgYSBoaWdoZXIgbWVyZ2VGYWN0b3IuDQo+Pg0KPj4gV2l0aCByZWdhcmRz
IHRvIHRoZSBtdWx0aXRocmVhZGVkIGFwcHJvYWNoLCBJIHdhcyBjb25zaWRlcmluZyBjcmVhdGlu
ZyAxMCBkaWZmZXJlbnQgdGhyZWFkcyBlYWNoIGluZGV4aW5nIDEwMG1sbiBkb2NzIGNvdXBsZWQg
d2l0aCBhIE11bHRpc2VhcmNoZXIgdG8gd2hpY2ggSSB3aWxsIGZlZWQgdGhlc2UgMTAgaW5kaWNl
cy4gRG8geW91IHRoaW5rIHRoaXMgd2lsbCBpbXByb3ZlIHBlcmZvcm1hbmNlLg0KPj4NCj4+IEFu
ZCBqdXN0IEZZSSwgSSBoYXZlIGxhdGVzdCByZWFkaW5nIGZvciAxIGJsbiBkb2NzLiBJbmRleGlu
ZyB0aW1lIGlzIDIgaHJzIGFuZCBzZWFyY2ggdGltZSBpcyAxNSBzZWNzLi4gSSBjYW4gbGl2ZSB3
aXRoIGluZGV4aW5nIHRpbWUgYnV0IHRoZSBzZWFyY2ggdGltZSBpcyBoaWdobHkgdW5hY2NlcHRh
YmxlLg0KPj4NCj4+IEhlbHAgYWdhaW4uDQo+Pg0KPj4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0t
LS0NCj4+IEZyb206IEFuc2h1bSBbbWFpbHRvOmFuc2h1bWdAZ21haWwuY29tXQ0KPj4gU2VudDog
VHVlc2RheSwgQXVndXN0IDEwLCAyMDEwIDEyOjU1IFBNDQo+PiBUbzogamF2YS11c2VyQGx1Y2Vu
ZS5hcGFjaGUub3JnDQo+PiBTdWJqZWN0OiBSZTogU2NhbGluZyBMdWNlbmUgdG8gMWJsbiBkb2Nz
DQo+Pg0KPj4gSGkgU2hlbGx5LA0KPj4gVGhhdCBzZWVtcyBsaWtlIGEgcmVhc29uYWJsZSBkYXRh
IHNldCBzaXplLiBJJ2Qgc3VnZ2VzdCB5b3UgaW5jcmVhc2UgeW91cg0KPj4gbWVyZ2VGYWN0b3Ig
YXMgYSBtZXJnZUZhY3RvciBvZiAxMCBzYXlzLCB5b3UgYXJlIG9ubHkgYnVmZmVyaW5nIDEwIGRv
Y3MgaW4NCj4+IG1lbW9yeSBiZWZvcmUgd3JpdGluZyBpdCB0byBhIGZpbGUgKGFuZCBpbmN1cnJp
bmcgSS9PKS4gWW91IGNvdWxkIGFjdHVhbGx5DQo+PiBmbHVzaCBieSBSQU0gdXNhZ2UgaW5zdGVh
ZCBvZiBhIERvYyBjb3VudC4gVHVybiBvZmYgdXNpbmcgdGhlIENvbXBvdW5kIGZpbGUNCj4+IHN0
cnVjdHVyZSBmb3IgaW5kZXhpbmcgYXMgaXQgZ2VuZXJhbGx5IHRha2VzIG1vcmUgdGltZSBjcmVh
dGluZyBhIGNmcyBpbmRleC4NCj4+DQo+PiBQbHVzIHRoZSB0aW1lIHdvdWxkIG5vdCBncm93IGxp
bmVhcmx5IGFzIHRoZSBsYXJnZXIgdGhlIHNpemUgb2Ygc2VnbWVudHMNCj4+IGdldCwgdGhlIG1v
cmUgdGltZSBpdCdkIHRha2UgdG8gYWRkIG1vcmUgZG9jcyBhbmQgbWVyZ2UgdGhvc2UgdG9nZXRo
ZXINCj4+IGludGVybWl0dGVudGx5Lg0KPj4gWW91IG1heSBhbHNvIHVzZSBhIG11bHRpdGhyZWFk
ZWQgYXBwcm9hY2ggaW4gY2FzZSByZWFkaW5nIHRoZSBzb3VyY2UgdGFrZXMNCj4+IHRpbWUgaW4g
eW91ciBjYXNlLCB0aG91Z2gsIHRoZSBpbmRleHdyaXRlciB3b3VsZCBoYXZlIHRvIGJlIHNoYXJl
ZCBhbW9uZyBhbGwNCj4+IHRocmVhZHMuDQo+Pg0KPj4gLS0NCj4+IEFuc2h1bSBHdXB0YQ0KPj4g
aHR0cDovL2FpLWNhZmUuYmxvZ3Nwb3QuY29tDQo+Pg0KPj4NCj4+IE9uIFR1ZSwgQXVnIDEwLCAy
MDEwIGF0IDEyOjI0IFBNLCBTaGVsbHlfU2luZ2ggPFNoZWxseV9TaW5naEBpbmZvc3lzLmNvbT53
cm90ZToNCj4+DQo+Pj4gSGksDQo+Pj4NCj4+PiBJIGFtIGRldmVsb3BpbmcgYW4gYXBwbGljYXRp
b24gd2hpY2ggdXNlcyBMdWNlbmUgZm9yIGluZGV4aW5nIGFuZCBzZWFyY2hpbmcNCj4+PiAxIGJs
biBkb2N1bWVudHMuICh0aGUgZG9jdW1lbnQgc2l6ZSBpcyB2ZXJ5IHNtYWxsIHRob3VnaC4gRWFj
aCBkb2N1bWVudCBoYXMNCj4+PiBhIHNpbmdsZSBmaWVsZCBvZiA1LTEwIHdvcmRzOyBzbyBJIGJl
bGlldmUgdGhhdCBteSBkYXRhIHNpemUgaXMgd2l0aGluIHRoZQ0KPj4+IHRlc3RlZCBsaW1pdHMp
Lg0KPj4+DQo+Pj4gSSBhbSB1c2luZyB0aGUgZm9sbG93aW5nIGNvbmZpZ3VyYXRpb246DQo+Pj4g
MS4gwqAgwqAgwqAxLjUgZ2lnIFJBTSB0byB0aGUganZtDQo+Pj4gMi4gwqAgwqAgwqAxMDBHQiBk
aXNrIHNwYWNlLg0KPj4+IDMuIMKgIMKgIMKgSW5kZXggY3JlYXRpb24gdHVuaW5nIGZhY3RvcnM6
DQo+Pj4gYS4gwqAgwqAgwqBtZXJnZUZhY3RvciA9IDEwDQo+Pj4gYi4gwqAgwqAgwqBtYXhGaWVs
ZExlbmd0aCA9IDEwDQo+Pj4gYy4gwqAgwqAgwqBtYXhNZXJnZURvY3MgPSA1MDAwMDAwIChpZiBJ
IHRyeSB3aXRoIGEgbGFyZ2VyIHZhbHVlLCBJIGdldCBhbg0KPj4+IG91dC1vZi1tZW1vcnkpDQo+
Pj4NCj4+PiBXaXRoIHRoZXNlIHNldHRpbmdzLCBJIGFtIGFibGUgdG8gY3JlYXRlIGFuIGluZGV4
IG9mIDEwMCBtaWxsaW9uIGRvY3MgKDEwDQo+Pj4gcG93IDgpIMKgaW4gMTUgbWlucyBjb25zdW1p
bmcgYSBkaXNrIHNwYWNlIG9mIDIuNWdiLiBXaGljaCBpcyBxdWl0ZQ0KPj4+IHNhdGlzZmFjdG9y
eSBmb3IgbWUsIGJ1dCBuZXZlcnRoZWxlc3MsIEkgd2FudCB0byBrbm93IHdoYXQgZWxzZSBjYW4g
YmUgZG9uZQ0KPj4+IHRvIHR1bmUgaXQgZnVydGhlci4gUGxlYXNlIGhlbHAuDQo+Pj4gQWxzbywg
d2l0aCB0aGVzZSBzZXR0aW5ncywgY2FuIEkgZXhwZWN0IHRoZSB0aW1lIGFuZCBzaXplIHRvIGdy
b3cgbGluZWFybHkNCj4+PiBmb3IgMWJsbiAoMTAgcG93IDkpIGRvY3VtZW50cz8NCj4+Pg0KPj4+
IFRoYW5rcyBhbmQgUmVnYXJkcywNCj4+Pg0KPj4+IFNoZWxseSBTaW5naA0KPj4+IENlbnRlciBG
b3IgS05vd2xlZGdlIERyaXZlbiBJbmZvcm1hdGlvbiBTeXN0ZW1zLCBJbmZvc3lzDQo+Pj4gRW1h
aWw6IHNoZWxseV9zaW5naEBpbmZvc3lzLmNvbTxtYWlsdG86c2hlbGx5X3NpbmdoQGluZm9zeXMu
Y29tPg0KPj4+IFBob25lOiAoTSkgOTEgOTkyIDM2OSA3MjAwLCAoVm9JUCkyMDIyOTc4NjIyDQo+
Pj4NCj4+Pg0KPj4+DQo+Pj4NCj4+DQo+PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4+IFRvIHVuc3Vic2NyaWJl
LCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KPj4gRm9y
IGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNo
ZS5vcmcNCj4+DQo+Pg0KPj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+PiBUbyB1bnN1YnNjcmliZSwgZS1tYWls
OiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4+IEZvciBhZGRpdGlv
bmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+
Pg0KPj4NCj4+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KPj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11
c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+PiBGb3IgYWRkaXRpb25hbCBjb21t
YW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KPj4NCj4+DQo+
DQo+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLQ0KPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5z
dWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUt
bWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCj4NCj4NCg0KLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tDQpUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5l
LmFwYWNoZS5vcmcNCkZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1o
ZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQoNCg0KKioqKioqKioqKioqKioqKiBDQVVUSU9OIC0gRGlz
Y2xhaW1lciAqKioqKioqKioqKioqKioqKg0KVGhpcyBlLW1haWwgY29udGFpbnMgUFJJVklMRUdF
RCBBTkQgQ09ORklERU5USUFMIElORk9STUFUSU9OIGludGVuZGVkIHNvbGVseSANCmZvciB0aGUg
dXNlIG9mIHRoZSBhZGRyZXNzZWUocykuIElmIHlvdSBhcmUgbm90IHRoZSBpbnRlbmRlZCByZWNp
cGllbnQsIHBsZWFzZSANCm5vdGlmeSB0aGUgc2VuZGVyIGJ5IGUtbWFpbCBhbmQgZGVsZXRlIHRo
ZSBvcmlnaW5hbCBtZXNzYWdlLiBGdXJ0aGVyLCB5b3UgYXJlIG5vdCANCnRvIGNvcHksIGRpc2Ns
b3NlLCBvciBkaXN0cmlidXRlIHRoaXMgZS1tYWlsIG9yIGl0cyBjb250ZW50cyB0byBhbnkgb3Ro
ZXIgcGVyc29uIGFuZCANCmFueSBzdWNoIGFjdGlvbnMgYXJlIHVubGF3ZnVsLiBUaGlzIGUtbWFp
bCBtYXkgY29udGFpbiB2aXJ1c2VzLiBJbmZvc3lzIGhhcyB0YWtlbiANCmV2ZXJ5IHJlYXNvbmFi
bGUgcHJlY2F1dGlvbiB0byBtaW5pbWl6ZSB0aGlzIHJpc2ssIGJ1dCBpcyBub3QgbGlhYmxlIGZv
ciBhbnkgZGFtYWdlIA0KeW91IG1heSBzdXN0YWluIGFzIGEgcmVzdWx0IG9mIGFueSB2aXJ1cyBp
biB0aGlzIGUtbWFpbC4gWW91IHNob3VsZCBjYXJyeSBvdXQgeW91ciANCm93biB2aXJ1cyBjaGVj
a3MgYmVmb3JlIG9wZW5pbmcgdGhlIGUtbWFpbCBvciBhdHRhY2htZW50LiBJbmZvc3lzIHJlc2Vy
dmVzIHRoZSANCnJpZ2h0IHRvIG1vbml0b3IgYW5kIHJldmlldyB0aGUgY29udGVudCBvZiBhbGwg
bWVzc2FnZXMgc2VudCB0byBvciBmcm9tIHRoaXMgZS1tYWlsIA0KYWRkcmVzcy4gTWVzc2FnZXMg
c2VudCB0byBvciBmcm9tIHRoaXMgZS1tYWlsIGFkZHJlc3MgbWF5IGJlIHN0b3JlZCBvbiB0aGUg
DQpJbmZvc3lzIGUtbWFpbCBzeXN0ZW0uDQoqKipJTkZPU1lTKioqKioqKiogRW5kIG9mIERpc2Ns
YWltZXIgKioqKioqKipJTkZPU1lTKioq


From java-user-return-46981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 10 13:49:57 2010
Return-Path: <java-user-return-46981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99986 invoked from network); 10 Aug 2010 13:49:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Aug 2010 13:49:57 -0000
Received: (qmail 7167 invoked by uid 500); 10 Aug 2010 13:49:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6895 invoked by uid 500); 10 Aug 2010 13:49:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6887 invoked by uid 99); 10 Aug 2010 13:49:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 13:49:51 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,MIME_BASE64_BLANKS,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 13:49:44 +0000
Received: by qwd7 with SMTP id 7so11633247qwd.35
        for <java-user@lucene.apache.org>; Tue, 10 Aug 2010 06:49:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:x-rim-org-msg-ref-id
         :message-id:content-transfer-encoding:reply-to:x-priority:references
         :in-reply-to:sensitivity:importance:subject:to:from:date
         :content-type:mime-version;
        bh=k9LmnOTDpuWuxWYnC3iX6N23Prlr8Fek+DSp7v+Evgc=;
        b=hq0q9ETx2T5smcrNWOaif2vqMWrS2b9/ztydz/6sWZ5JHtVMSqL2ZiGRC9T+5+vyfq
         44bwTakEM8AzMmvORFyBV890/8CUo3psSZJQvdjX2pDL79d9JBKXmqMdg8UeUg4Txm9P
         94gb2SdB0Ny498H8tx225CaoNZRIUYgCF7n3o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=x-rim-org-msg-ref-id:message-id:content-transfer-encoding:reply-to
         :x-priority:references:in-reply-to:sensitivity:importance:subject:to
         :from:date:content-type:mime-version;
        b=OTae7tIx/fN9Ld33Mb6kWJC828cMVFgjtv9x6JwTwyASXoFq95iru1s0LuiUxxXoY2
         iu12wMewvYFQLZusVydAlNmgWU8h+x9TjDtzk4njEBOIbsy8OPigJ6E66N2+9nwfGwr3
         4YzCERsA2VXGFRfqvfyEPreXXR0mtr5BfNF2U=
Received: by 10.224.47.66 with SMTP id m2mr9370867qaf.392.1281448163013;
        Tue, 10 Aug 2010 06:49:23 -0700 (PDT)
Received: from bda028.bisx.produk.on.blackberry (bda-68-171-236-185.bise.eu.blackberry.com [68.171.236.185])
        by mx.google.com with ESMTPS id r1sm7895912qcq.10.2010.08.10.06.49.21
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 10 Aug 2010 06:49:21 -0700 (PDT)
X-rim-org-msg-ref-id:335122582
Message-ID:<335122582-1281448159-cardhu_decombobulator_blackberry.rim.net-1093115328-@bda2121.bisx.produk.on.blackberry>
Content-Transfer-Encoding: base64
Reply-To: anshumg@gmail.com
X-Priority: Normal
References: <AA27F54EFDA0CE43B33EBDB7796323740CA2660945@PUNITPMBX02.ad.infosys.com><AANLkTi=4LLNLK-wk9frni=ay0qkEokgnr+sLLfWPyZ=8@mail.gmail.com><AA27F54EFDA0CE43B33EBDB7796323740CA2660988@PUNITPMBX02.ad.infosys.com><528709861-1281428644-cardhu_decombobulator_blackberry.rim.net-283608400-@bda2121.bisx.produk.on.blackberry><AA27F54EFDA0CE43B33EBDB7796323740CA2660B35@PUNITPMBX02.ad.infosys.com><3B4AEBB59588ED409ECE3CB6517C41750EC8C16BEC@exchange.windows.mmu.acquiremedia.com><AANLkTinJ=AE=+E1iyCqQxe26PSm2PgS_r-8+WMjcT_oG@mail.gmail.com><AA27F54EFDA0CE43B33EBDB7796323740CA2660B5E@PUNITPMBX02.ad.infosys.com><AANLkTi=YuvwdGjj=RoH6A1-nUhBN14xtc2LDeqiVBqmO@mail.gmail.com><AA27F54EFDA0CE43B33EBDB7796323740CA2660B93@PUNITPMBX02.ad.infosys.com>
In-Reply-To: <AA27F54EFDA0CE43B33EBDB7796323740CA2660B93@PUNITPMBX02.ad.infosys.com>
Sensitivity: Normal
Importance: Normal
Subject: Re: Scaling Lucene to 1bln docs
To: java-user@lucene.apache.org
From: "anshum.gupta@naukri.com" <anshumg@gmail.com>
Date: Tue, 10 Aug 2010 13:49:17 +0000
Content-Type: text/plain; charset="utf-8"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

SGV5IFNoZWxseSwNCklmIHlvdSB3YW50IHRvIGdldCBtb3JlIGluZm8gb24gbHVjZW5lLCBJJ2Qg
cmVjb21tZW5kIHlvdSBnZXQgYSBjb3B5IG9mIGx1Y2VuZSBpbiBhY3Rpb24gMm5kIEVkLiBJdCds
bCBoZWxwIHlvdSBnZXQgYSBoYW5nIG9mIGEgbG90IG9mIHRoaW5ncyEgOikNCg0KLS0NCkFuc2h1
bQ0KaHR0cDovL2Jsb2cuYW5zaHVtZ3VwdGEubmV0DQoNClNlbnQgZnJvbSBCbGFja0JlcnJ5wq4N
Cg0KLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCkZyb206IFNoZWxseV9TaW5naCA8U2hlbGx5
X1NpbmdoQGluZm9zeXMuY29tPg0KRGF0ZTogVHVlLCAxMCBBdWcgMjAxMCAxOToxMToxMSANClRv
OiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmc8amF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3Jn
Pg0KUmVwbHktVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KU3ViamVjdDogUkU6IFNj
YWxpbmcgTHVjZW5lIHRvIDFibG4gZG9jcw0KDQpIaSBmb2xrcywNCg0KVGhhbmtzIGZvciB0aGUg
ZXhjZWxsZW50IHN1cHBvcnQgbiBndWlkYW5jZSBvbiBteSB2ZXJ5IGZpcnN0IGRheSBvbiB0aGlz
IG1haWxpbmcgbGlzdC4uLg0KQXQgZW5kIG9mIGRheSwgSSBoYXZlIHZlcnkgb3B0aW1pc3RpYyBy
ZXN1bHRzLiAxMDBibG4gc2VhcmNoIGluIGxlc3MgdGhhbiAxbXMgYW5kIHRoZSBpbmRleCBjcmVh
dGlvbiB0aW1lIGlzIG5vdCBodWdlIGVpdGhlciAoIGNsb3NlIHRvIDE1IG1pbnV0ZXMpLg0KDQpJ
IGFtIG5vdyBoaXR0aW5nIHRoZSAxYmxuIG1hcmsgd2l0aCByb3VnaGx5IHRoZSBzYW1lIHNldHRp
bmdzLiBCdXQsIEkgd2FudCB0byB1bmRlcnN0YW5kIE5vcm1zIGFuZCBUZXJtRmlsdGVycy4NCg0K
Q2FuIHNvbWVvbmUgZXhwbGFpbiwgd2h5IG9yIHdoeSBub3Qgc2hvdWxkIG9uZSB1c2UgZWFjaCBv
ZiB0aGVzZSBhbmQgd2hhdCB0cmFkZW9mZnMgZG9lcyBpdCBoYXZlLiANCg0KUmVnYXJkcywNClNo
ZWxseQ0KDQotLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KRnJvbTogRGFuaWwgxaJPUklOIFtt
YWlsdG86dG9yaW5kYW5AZ21haWwuY29tXSANClNlbnQ6IFR1ZXNkYXksIEF1Z3VzdCAxMCwgMjAx
MCA2OjUyIFBNDQpUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQpTdWJqZWN0OiBSZTog
U2NhbGluZyBMdWNlbmUgdG8gMWJsbiBkb2NzDQoNClRoYXQgd29uJ3Qgd29yay4uLmlmIHlvdSds
bCBoYXZlIHNvbWV0aGluZyBsaWtlICJBIEJhc2ljIENyYXp5DQpEb2N1bWVudCBFLXNvbWV0aGlu
ZyBGLXNvbWV0aGluZyBHLXNvbWV0aGluZy4uLi55b3UgZ2V0IHRoZSBwb2ludCIgaXQNCndpbGwg
Z28gdG8gYWxsIHNoYXJkcyBzbyB0aGUgd2hvbGUgcG9pbnQgb2Ygc2hhcmRzIHdpbGwgYmUNCmNv
bXByb21pc2VkLi4ueW91J2xsIGhhdmUgMjYgYmlsbGlvbiBkb2N1bWVudHMgaW5kZXggOykNCg0K
TG9va3MgbGlrZSB0aGUgb25seSB3YXkgaXMgdG8gc2VhcmNoIGFsbCBzaGFyZHMuDQpEZXBlbmRp
bmcgb24gYXZhaWxhYmxlIGhhcmR3YXJlICgxIEF6dWwuLi41MCBFQzIpLCBleHBlY3RlZA0KdHJh
ZmZpYygxcXBzLi4uMTAwMHFwcyksIGV4cGVjdGVkIHF1ZXJ5IHRpbWUoMTAgbXNlYyAuLi4gMyBz
ZWMpLA0KcmVkdW5kYW5jeSAoaXQncyBhIGxhcmdlIGRhdGFzZXQsIEkgZG9uJ3QgdGhpbmsgeW91
IHdhbnQgdG8gbG9vc2UgaXQpLA0KYW5kIHNvIG9uLi4ueW91J2xsIGhhdmUgdG8gZGVjaWRlIGhv
dyBtYW55IHBhcnRpdGlvbnMgZG8geW91IHdhbnQuDQoNCkl0IG1heSB3b3JrIHdpdGggOC0xMCwg
aXQgbWF5IG5lZWQgNTAtNjQuIChJIHVzdWFsbHkgdXNlIDJebiBhcyBpdCdzDQplYXNpZXIgdG8g
c3BsaXQgZWFjaCBzaGFyZCBpbiAyIHdoZW4gaW5kZXggZ3Jvd3MgdG9vIG11Y2gpDQoNCk9uIHN1
Y2ggbGFyZ2UgZGF0YXNldHMgaXQncyBhIGxvdCBvZiB0dW5pbmcsIGN1c3RvbSBjb2RlLCBhbmQg
bm8NCm9uZS1zaXplLWZpdHMtYWxsIHNvbHV0aW9uLg0KTHVjZW5lIGlzIGp1c3QgYSB0b29sIChh
IGZpbmUgb25lKSBidXQgeW91IG5lZWQgdG8gdXNlIGl0IHdpc2VseSB0bw0KYXJjaGl2ZSBncmVh
dCByZXN1bHRzLg0KDQpPbiBUdWUsIEF1ZyAxMCwgMjAxMCBhdCAxNTo1NSwgU2hlbGx5X1Npbmdo
IDxTaGVsbHlfU2luZ2hAaW5mb3N5cy5jb20+IHdyb3RlOg0KPiBIbW0uLkkgZ2V0IHRoZSBwb2lu
dC4gQnV0LCBpbiBteSBhcHBsaWNhdGlvbiwgdGhlIGRvY3VtZW50IGlzIGJhc2ljYWxseSBhIGRl
c2NyaXB0aXZlIG5hbWUgb2YgYSBwYXJ0aWN1bGFyIHRoaW5nLiBUaGUgdXNlciB3aWxsIHNlYXJj
aCBieSBuYW1lIChvciBwYXJ0IG9mIG5hbWUpIGFuZCBJIG5lZWQgdG8gcHVsbCBvdXQgYWxsIGlu
Zm8gcG9pbnRlZCB0byBieSB0aGF0IG5hbWUuIFRoaXMgaW5mbyBpcyBleHRlcm5hbGl6ZWQgaW4g
YSBkYi4NCj4NCj4gT25lIG9wdGlvbiBJIGNhbiB0aGluayBvZiBpcy0NCj4gSSBjYW4gc2hhcmQg
YmFzZWQgb24gc3RhcnRpbmcgYWxwaGFiZXQgb2YgYW55IG5hbWUuIFNvLCAiQWxhbiBNYXRodXIg
b2YgTmV3IERlbGhpIiBtYXkgZ28gdG8gc2hhcmQgIkEiLiBCdXQgc2luY2UgdGhlIG5hbWUgd2ls
bCBoYXZlICduJyB0b2tlbnMsIGFuZCB0aGUgdXNlciBtYXkgdHlwZSBhbnkgb25lIHRva2VuLCB0
aGlzIHdpbGwgbm90IHdvcmsuIEkgY2FuIGZ1cnRoZXIgdHdlYWsgdGhpcyBzdWNoIHRoYXQgSSBp
bmRleCB0aGUgc2FtZSBkb2N1bWVudCBpbnRvIG11bHRpcGxlIGluZGljZXMgKG9uZSBmb3IgZWFj
aCB0b2tlbikuIFNvLCB0aGUgc2FtZSBkb2N1bWVudCBtYXkgYmUgaW5kZXhlZCBpbnRvIFNoYXJk
IkEiLCAiTSIsICJOIiBhbmQgIkQiLg0KPiBJIGFtIG5vdCBhYmxlIHRvIHRoaW5rIG9mIGFub3Ro
ZXIgb3B0aW9uLg0KPg0KPiBDb21tZW50cyB3ZWxjb21lLg0KPg0KPg0KPiAtLS0tLU9yaWdpbmFs
IE1lc3NhZ2UtLS0tLQ0KPiBGcm9tOiBEYW5pbCDFok9SSU4gW21haWx0bzp0b3JpbmRhbkBnbWFp
bC5jb21dDQo+IFNlbnQ6IFR1ZXNkYXksIEF1Z3VzdCAxMCwgMjAxMCA2OjExIFBNDQo+IFRvOiBq
YXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNCj4gU3ViamVjdDogUmU6IFNjYWxpbmcgTHVjZW5l
IHRvIDFibG4gZG9jcw0KPg0KPiBJJ2Qgc2Vjb25kIHRoYXQuDQo+DQo+IEl0IGRvZXNuJ3QgaGF2
ZSB0byBiZSBkYXRlIGZvciBzaGFyZGluZy4gTWF5YmUgZXZlcnkgcXVlcnkgaGFzIHNvbWUNCj4g
c3BlY2lmaWMgZmllbGQsIGxpa2UgVXNlcklkIG9yIHNvbWV0aGluZywgc28geW91IGNhbiByZWRp
cmVjdCB0bw0KPiBzcGVjaWZpYyBzaGFyZCBpbnN0ZWFkIG9mIGhpdHRpbmcgYWxsIDEwIGluZGlj
ZXMuDQo+DQo+IFlvdSBoYXZlIHRvIGhhdmUgc29tZSBraW5kIG9mIG5hcnJvd2luZzogc2VhcmNo
aW5nIDFibiBkb2N1bWVudHMgd2l0aA0KPiBxdWVyaWVzIHRoYXQgbWF5IGhpdCBhbGwgZG9jdW1l
bnRzIGlzIHVzZWxlc3MuDQo+IEFuIHVzZXIgd29uJ3QgbG9vayBvbiBtb3JlIHRoYW4gbGV0IHNh
eSAxMDAgcmVzdWx0cyAoaWYgcHJlc2VudGVkDQo+IHByb3Blcmx5Li5tYXliZSAxMDAwKQ0KPg0K
PiBUaG9zZSBmaWVsZHMgdGhhdCBuYXJyb3cgdGhlIHJlc3VsdCBzZXQgYXJlIGdvb2QgY2FuZGlk
YXRlcyBmb3Igc2hhcmRpbmcga2V5cy4NCj4NCj4NCj4gT24gVHVlLCBBdWcgMTAsIDIwMTAgYXQg
MTU6MzIsIERhbiBPQ29ubm9yIDxkb2Nvbm5vckBhY3F1aXJlbWVkaWEuY29tPiB3cm90ZToNCj4+
IFNoZWxseToNCj4+DQo+PiBZb3Ugd291bGRuJ3QgbmVjZXNzYXJpbHkgaGF2ZSB0byB1c2UgYSBt
dWx0aXNlYXJjaGVyLiBBIHN1Z2dlc3RlZCBhbHRlcm5hdGl2ZSBpczoNCj4+DQo+PiAtIHNoYXJk
IGludG8gMTAgaW5kaWNlcy4gSWYgeW91IG5lZWQgdGhlIGNvbmNlcHQgb2YgYSBkYXRlIHJhbmdl
IHNlYXJjaCwgSSB3b3VsZCBhc3NpZ24gdGhlIGRvY3VtZW50cyB0byB0aGUgc2hhcmQgYnkgZGF0
ZSwgb3RoZXJ3aXNlIHJhbmRvbSBhc3NpZ25tZW50IGlzIGZpbmUuDQo+PiAtIGhhdmUgYSBwb29s
IG9mIEluZGV4U2VhcmNoZXJzIGZvciBlYWNoIGluZGV4DQo+PiAtIHdoZW4gYSBzZWFyY2ggY29t
ZXMgaW4sIGFsbG9jYXRlIGEgU2VhcmNoZXIgZnJvbSBlYWNoIGluZGV4IHRvIHRoZSBzZWFyY2gu
DQo+PiAtIHBlcmZvcm0gdGhlIHNlYXJjaCBpbiBwYXJhbGxlbCBhY3Jvc3MgYWxsIGluZGljZXMu
DQo+PiAtIG1lcmdlIHRoZSByZXN1bHRzIGluIHlvdXIgb3duIGNvZGUgdXNpbmcgYW4gZWZmaWNp
ZW50IG1lcmdpbmcgYWxnb3JpdGhtLg0KPj4NCj4+IFJlZ2FyZHMsDQo+PiBEYW4NCj4+DQo+Pg0K
Pj4NCj4+DQo+PiAtLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KPj4gRnJvbTogU2hlbGx5X1Np
bmdoIFttYWlsdG86U2hlbGx5X1NpbmdoQGluZm9zeXMuY29tXQ0KPj4gU2VudDogVHVlc2RheSwg
QXVndXN0IDEwLCAyMDEwIDg6MjAgQU0NCj4+IFRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5v
cmcNCj4+IFN1YmplY3Q6IFJFOiBTY2FsaW5nIEx1Y2VuZSB0byAxYmxuIGRvY3MNCj4+DQo+PiBO
byBzb3J0LiBJIHdpbGwgbmVlZCByZWxldmFuY2UgYmFzZWQgb24gVEYuIElmIEkgc2hhcmQsIEkg
d2lsbCBoYXZlIHRvIHNlYXJjaCBpbiBhbCBpbmRpY2VzLg0KPj4NCj4+IC0tLS0tT3JpZ2luYWwg
TWVzc2FnZS0tLS0tDQo+PiBGcm9tOiBhbnNodW0uZ3VwdGFAbmF1a3JpLmNvbSBbbWFpbHRvOmFu
c2h1bWdAZ21haWwuY29tXQ0KPj4gU2VudDogVHVlc2RheSwgQXVndXN0IDEwLCAyMDEwIDE6NTQg
UE0NCj4+IFRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNCj4+IFN1YmplY3Q6IFJlOiBT
Y2FsaW5nIEx1Y2VuZSB0byAxYmxuIGRvY3MNCj4+DQo+PiBXb3VsZCBsaWtlIHRvIGtub3csIGFy
ZSB5b3UgdXNpbmcgYSBwYXJ0aWN1bGFyIHR5cGUgb2Ygc29ydD8gRG8geW91IG5lZWQgdG8gc29y
dCBvbiByZWxldmFuY2U/IENhbiB5b3Ugc2hhcmQgYW5kIHJlc3RyaWN0IHlvdXIgc2VhcmNoIHRv
IGEgbGltaXRlZCBzZXQgb2YgaW5kZXhlcyBmdW5jdGlvbmFsbHk/DQo+Pg0KPj4gLS0NCj4+IEFu
c2h1bQ0KPj4gaHR0cDovL2Jsb2cuYW5zaHVtZ3VwdGEubmV0DQo+Pg0KPj4gU2VudCBmcm9tIEJs
YWNrQmVycnkocikNCj4+DQo+PiAtLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KPj4gRnJvbTog
U2hlbGx5X1NpbmdoIDxTaGVsbHlfU2luZ2hAaW5mb3N5cy5jb20+DQo+PiBEYXRlOiBUdWUsIDEw
IEF1ZyAyMDEwIDEzOjMxOjM4DQo+PiBUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnPGph
dmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZz4NCj4+IFJlcGx5LVRvOiBqYXZhLXVzZXJAbHVjZW5l
LmFwYWNoZS5vcmcNCj4+IFN1YmplY3Q6IFJFOiBTY2FsaW5nIEx1Y2VuZSB0byAxYmxuIGRvY3MN
Cj4+DQo+PiBIaSBBbnNodW0sDQo+Pg0KPj4gSSBhbSBhbHJlYWR5IHJ1bm5pbmcgd2l0aCB0aGUg
J3NldENvbXBvdW5kRmlsZScgb3B0aW9uIG9mZi4NCj4+IEFuZCB0aGFua3MgZm9yIHBvaW50aW5n
IG91dCBtZXJnZUZhY3Rvci4gSSBoYWQgdHJpZWQgYSBoaWdoZXIgbWVyZ2VGYWN0b3IgY291cGxl
IG9mIGRheXMgYWdvLCBidXQgZ290IGFuIE9PTSwgc28gSSBkaXNjYXJkZWQgaXQuIExhdGVyIEkg
ZmlndXJlZCB0aGF0IE9PTSB3YXMgYmVjYXVzZSBtYXhNZXJnZURvY3Mgd2FzIHVubGltaXRlZCBh
bmQgSSB3YXMgdXNpbmcgTU1hcC4gVSByIHJpZ3QsIEkgc2hvdWxkIHRyeSBhIGhpZ2hlciBtZXJn
ZUZhY3Rvci4NCj4+DQo+PiBXaXRoIHJlZ2FyZHMgdG8gdGhlIG11bHRpdGhyZWFkZWQgYXBwcm9h
Y2gsIEkgd2FzIGNvbnNpZGVyaW5nIGNyZWF0aW5nIDEwIGRpZmZlcmVudCB0aHJlYWRzIGVhY2gg
aW5kZXhpbmcgMTAwbWxuIGRvY3MgY291cGxlZCB3aXRoIGEgTXVsdGlzZWFyY2hlciB0byB3aGlj
aCBJIHdpbGwgZmVlZCB0aGVzZSAxMCBpbmRpY2VzLiBEbyB5b3UgdGhpbmsgdGhpcyB3aWxsIGlt
cHJvdmUgcGVyZm9ybWFuY2UuDQo+Pg0KPj4gQW5kIGp1c3QgRllJLCBJIGhhdmUgbGF0ZXN0IHJl
YWRpbmcgZm9yIDEgYmxuIGRvY3MuIEluZGV4aW5nIHRpbWUgaXMgMiBocnMgYW5kIHNlYXJjaCB0
aW1lIGlzIDE1IHNlY3MuLiBJIGNhbiBsaXZlIHdpdGggaW5kZXhpbmcgdGltZSBidXQgdGhlIHNl
YXJjaCB0aW1lIGlzIGhpZ2hseSB1bmFjY2VwdGFibGUuDQo+Pg0KPj4gSGVscCBhZ2Fpbi4NCj4+
DQo+PiAtLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KPj4gRnJvbTogQW5zaHVtIFttYWlsdG86
YW5zaHVtZ0BnbWFpbC5jb21dDQo+PiBTZW50OiBUdWVzZGF5LCBBdWd1c3QgMTAsIDIwMTAgMTI6
NTUgUE0NCj4+IFRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNCj4+IFN1YmplY3Q6IFJl
OiBTY2FsaW5nIEx1Y2VuZSB0byAxYmxuIGRvY3MNCj4+DQo+PiBIaSBTaGVsbHksDQo+PiBUaGF0
IHNlZW1zIGxpa2UgYSByZWFzb25hYmxlIGRhdGEgc2V0IHNpemUuIEknZCBzdWdnZXN0IHlvdSBp
bmNyZWFzZSB5b3VyDQo+PiBtZXJnZUZhY3RvciBhcyBhIG1lcmdlRmFjdG9yIG9mIDEwIHNheXMs
IHlvdSBhcmUgb25seSBidWZmZXJpbmcgMTAgZG9jcyBpbg0KPj4gbWVtb3J5IGJlZm9yZSB3cml0
aW5nIGl0IHRvIGEgZmlsZSAoYW5kIGluY3VycmluZyBJL08pLiBZb3UgY291bGQgYWN0dWFsbHkN
Cj4+IGZsdXNoIGJ5IFJBTSB1c2FnZSBpbnN0ZWFkIG9mIGEgRG9jIGNvdW50LiBUdXJuIG9mZiB1
c2luZyB0aGUgQ29tcG91bmQgZmlsZQ0KPj4gc3RydWN0dXJlIGZvciBpbmRleGluZyBhcyBpdCBn
ZW5lcmFsbHkgdGFrZXMgbW9yZSB0aW1lIGNyZWF0aW5nIGEgY2ZzIGluZGV4Lg0KPj4NCj4+IFBs
dXMgdGhlIHRpbWUgd291bGQgbm90IGdyb3cgbGluZWFybHkgYXMgdGhlIGxhcmdlciB0aGUgc2l6
ZSBvZiBzZWdtZW50cw0KPj4gZ2V0LCB0aGUgbW9yZSB0aW1lIGl0J2QgdGFrZSB0byBhZGQgbW9y
ZSBkb2NzIGFuZCBtZXJnZSB0aG9zZSB0b2dldGhlcg0KPj4gaW50ZXJtaXR0ZW50bHkuDQo+PiBZ
b3UgbWF5IGFsc28gdXNlIGEgbXVsdGl0aHJlYWRlZCBhcHByb2FjaCBpbiBjYXNlIHJlYWRpbmcg
dGhlIHNvdXJjZSB0YWtlcw0KPj4gdGltZSBpbiB5b3VyIGNhc2UsIHRob3VnaCwgdGhlIGluZGV4
d3JpdGVyIHdvdWxkIGhhdmUgdG8gYmUgc2hhcmVkIGFtb25nIGFsbA0KPj4gdGhyZWFkcy4NCj4+
DQo+PiAtLQ0KPj4gQW5zaHVtIEd1cHRhDQo+PiBodHRwOi8vYWktY2FmZS5ibG9nc3BvdC5jb20N
Cj4+DQo+Pg0KPj4gT24gVHVlLCBBdWcgMTAsIDIwMTAgYXQgMTI6MjQgUE0sIFNoZWxseV9TaW5n
aCA8U2hlbGx5X1NpbmdoQGluZm9zeXMuY29tPndyb3RlOg0KPj4NCj4+PiBIaSwNCj4+Pg0KPj4+
IEkgYW0gZGV2ZWxvcGluZyBhbiBhcHBsaWNhdGlvbiB3aGljaCB1c2VzIEx1Y2VuZSBmb3IgaW5k
ZXhpbmcgYW5kIHNlYXJjaGluZw0KPj4+IDEgYmxuIGRvY3VtZW50cy4gKHRoZSBkb2N1bWVudCBz
aXplIGlzIHZlcnkgc21hbGwgdGhvdWdoLiBFYWNoIGRvY3VtZW50IGhhcw0KPj4+IGEgc2luZ2xl
IGZpZWxkIG9mIDUtMTAgd29yZHM7IHNvIEkgYmVsaWV2ZSB0aGF0IG15IGRhdGEgc2l6ZSBpcyB3
aXRoaW4gdGhlDQo+Pj4gdGVzdGVkIGxpbWl0cykuDQo+Pj4NCj4+PiBJIGFtIHVzaW5nIHRoZSBm
b2xsb3dpbmcgY29uZmlndXJhdGlvbjoNCj4+PiAxLiDCoCDCoCDCoDEuNSBnaWcgUkFNIHRvIHRo
ZSBqdm0NCj4+PiAyLiDCoCDCoCDCoDEwMEdCIGRpc2sgc3BhY2UuDQo+Pj4gMy4gwqAgwqAgwqBJ
bmRleCBjcmVhdGlvbiB0dW5pbmcgZmFjdG9yczoNCj4+PiBhLiDCoCDCoCDCoG1lcmdlRmFjdG9y
ID0gMTANCj4+PiBiLiDCoCDCoCDCoG1heEZpZWxkTGVuZ3RoID0gMTANCj4+PiBjLiDCoCDCoCDC
oG1heE1lcmdlRG9jcyA9IDUwMDAwMDAgKGlmIEkgdHJ5IHdpdGggYSBsYXJnZXIgdmFsdWUsIEkg
Z2V0IGFuDQo+Pj4gb3V0LW9mLW1lbW9yeSkNCj4+Pg0KPj4+IFdpdGggdGhlc2Ugc2V0dGluZ3Ms
IEkgYW0gYWJsZSB0byBjcmVhdGUgYW4gaW5kZXggb2YgMTAwIG1pbGxpb24gZG9jcyAoMTANCj4+
PiBwb3cgOCkgwqBpbiAxNSBtaW5zIGNvbnN1bWluZyBhIGRpc2sgc3BhY2Ugb2YgMi41Z2IuIFdo
aWNoIGlzIHF1aXRlDQo+Pj4gc2F0aXNmYWN0b3J5IGZvciBtZSwgYnV0IG5ldmVydGhlbGVzcywg
SSB3YW50IHRvIGtub3cgd2hhdCBlbHNlIGNhbiBiZSBkb25lDQo+Pj4gdG8gdHVuZSBpdCBmdXJ0
aGVyLiBQbGVhc2UgaGVscC4NCj4+PiBBbHNvLCB3aXRoIHRoZXNlIHNldHRpbmdzLCBjYW4gSSBl
eHBlY3QgdGhlIHRpbWUgYW5kIHNpemUgdG8gZ3JvdyBsaW5lYXJseQ0KPj4+IGZvciAxYmxuICgx
MCBwb3cgOSkgZG9jdW1lbnRzPw0KPj4+DQo+Pj4gVGhhbmtzIGFuZCBSZWdhcmRzLA0KPj4+DQo+
Pj4gU2hlbGx5IFNpbmdoDQo+Pj4gQ2VudGVyIEZvciBLTm93bGVkZ2UgRHJpdmVuIEluZm9ybWF0
aW9uIFN5c3RlbXMsIEluZm9zeXMNCj4+PiBFbWFpbDogc2hlbGx5X3NpbmdoQGluZm9zeXMuY29t
PG1haWx0bzpzaGVsbHlfc2luZ2hAaW5mb3N5cy5jb20+DQo+Pj4gUGhvbmU6IChNKSA5MSA5OTIg
MzY5IDcyMDAsIChWb0lQKTIwMjI5Nzg2MjINCj4+Pg0KPj4+DQo+Pj4NCj4+Pg0KPj4NCj4+IC0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLQ0KPj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2Ny
aWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+PiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWls
OiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KPj4NCj4+DQo+PiAtLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0NCj4+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNl
bmUuYXBhY2hlLm9yZw0KPj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11
c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCj4+DQo+Pg0KPj4gLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+PiBU
byB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNo
ZS5vcmcNCj4+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxw
QGx1Y2VuZS5hcGFjaGUub3JnDQo+Pg0KPj4NCj4NCj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+IFRvIHVuc3Vi
c2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0K
PiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUu
YXBhY2hlLm9yZw0KPg0KPg0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6
IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KRm9yIGFkZGl0aW9uYWwg
Y29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCg0KDQoq
KioqKioqKioqKioqKioqIENBVVRJT04gLSBEaXNjbGFpbWVyICoqKioqKioqKioqKioqKioqDQpU
aGlzIGUtbWFpbCBjb250YWlucyBQUklWSUxFR0VEIEFORCBDT05GSURFTlRJQUwgSU5GT1JNQVRJ
T04gaW50ZW5kZWQgc29sZWx5IA0KZm9yIHRoZSB1c2Ugb2YgdGhlIGFkZHJlc3NlZShzKS4gSWYg
eW91IGFyZSBub3QgdGhlIGludGVuZGVkIHJlY2lwaWVudCwgcGxlYXNlIA0Kbm90aWZ5IHRoZSBz
ZW5kZXIgYnkgZS1tYWlsIGFuZCBkZWxldGUgdGhlIG9yaWdpbmFsIG1lc3NhZ2UuIEZ1cnRoZXIs
IHlvdSBhcmUgbm90IA0KdG8gY29weSwgZGlzY2xvc2UsIG9yIGRpc3RyaWJ1dGUgdGhpcyBlLW1h
aWwgb3IgaXRzIGNvbnRlbnRzIHRvIGFueSBvdGhlciBwZXJzb24gYW5kIA0KYW55IHN1Y2ggYWN0
aW9ucyBhcmUgdW5sYXdmdWwuIFRoaXMgZS1tYWlsIG1heSBjb250YWluIHZpcnVzZXMuIEluZm9z
eXMgaGFzIHRha2VuIA0KZXZlcnkgcmVhc29uYWJsZSBwcmVjYXV0aW9uIHRvIG1pbmltaXplIHRo
aXMgcmlzaywgYnV0IGlzIG5vdCBsaWFibGUgZm9yIGFueSBkYW1hZ2UgDQp5b3UgbWF5IHN1c3Rh
aW4gYXMgYSByZXN1bHQgb2YgYW55IHZpcnVzIGluIHRoaXMgZS1tYWlsLiBZb3Ugc2hvdWxkIGNh
cnJ5IG91dCB5b3VyIA0Kb3duIHZpcnVzIGNoZWNrcyBiZWZvcmUgb3BlbmluZyB0aGUgZS1tYWls
IG9yIGF0dGFjaG1lbnQuIEluZm9zeXMgcmVzZXJ2ZXMgdGhlIA0KcmlnaHQgdG8gbW9uaXRvciBh
bmQgcmV2aWV3IHRoZSBjb250ZW50IG9mIGFsbCBtZXNzYWdlcyBzZW50IHRvIG9yIGZyb20gdGhp
cyBlLW1haWwgDQphZGRyZXNzLiBNZXNzYWdlcyBzZW50IHRvIG9yIGZyb20gdGhpcyBlLW1haWwg
YWRkcmVzcyBtYXkgYmUgc3RvcmVkIG9uIHRoZSANCkluZm9zeXMgZS1tYWlsIHN5c3RlbS4NCioq
KklORk9TWVMqKioqKioqKiBFbmQgb2YgRGlzY2xhaW1lciAqKioqKioqKklORk9TWVMqKio=



From java-user-return-46982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 10 13:52:15 2010
Return-Path: <java-user-return-46982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 526 invoked from network); 10 Aug 2010 13:52:15 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Aug 2010 13:52:15 -0000
Received: (qmail 10694 invoked by uid 500); 10 Aug 2010 13:52:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10417 invoked by uid 500); 10 Aug 2010 13:52:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10409 invoked by uid 99); 10 Aug 2010 13:52:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 13:52:09 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pablomendes@gmail.com designates 209.85.215.48 as permitted sender)
Received: from [209.85.215.48] (HELO mail-ew0-f48.google.com) (209.85.215.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 13:52:02 +0000
Received: by ewy10 with SMTP id 10so5453866ewy.35
        for <java-user@lucene.apache.org>; Tue, 10 Aug 2010 06:51:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=uEoElYQNDJBpVpoQy+oMKvFY9pRzDQLU1SvQRQOUYfg=;
        b=hVxB+FsvAJ9cvx+IGTdxYuSSaxwqFpLk0miVOZAFctGCvs9ZIWNHLGIBPUX+DzA7wm
         0p3FZHLGcwNm39jTdUIJLACNCPtrqqv22B0bhXGfbYDXCEuLuBPm6XvIPJKTgCuQtCB+
         XXgDM9ZzOiaYuN4Gny+sPgb5uJ5euyZUkyUAE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=k9SXSlTre71pKcNv7gZKTkutgUTDwuJArrDnEFakm80JLkZ9Hz9CdaNfgIBYr/LBWk
         as2TS0dQis3hfF1lI9XQRwz0OC8MXOu4e9UCULP7avANT56ESalrNoWylg5MkfT8nzo+
         splbQXPoQY1c4i+cHdn0Z7m6S+2hjOXyFRLXk=
MIME-Version: 1.0
Received: by 10.213.47.76 with SMTP id m12mr13436413ebf.43.1281448300405; Tue, 
	10 Aug 2010 06:51:40 -0700 (PDT)
Received: by 10.14.19.196 with HTTP; Tue, 10 Aug 2010 06:51:40 -0700 (PDT)
In-Reply-To: <335122582-1281448159-cardhu_decombobulator_blackberry.rim.net-1093115328-@bda2121.bisx.produk.on.blackberry>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA2660945@PUNITPMBX02.ad.infosys.com>
	<AANLkTi=4LLNLK-wk9frni=ay0qkEokgnr+sLLfWPyZ=8@mail.gmail.com>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660988@PUNITPMBX02.ad.infosys.com>
	<528709861-1281428644-cardhu_decombobulator_blackberry.rim.net-283608400-@bda2121.bisx.produk.on.blackberry>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660B35@PUNITPMBX02.ad.infosys.com>
	<3B4AEBB59588ED409ECE3CB6517C41750EC8C16BEC@exchange.windows.mmu.acquiremedia.com>
	<AANLkTinJ=AE=+E1iyCqQxe26PSm2PgS_r-8+WMjcT_oG@mail.gmail.com>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660B5E@PUNITPMBX02.ad.infosys.com>
	<AANLkTi=YuvwdGjj=RoH6A1-nUhBN14xtc2LDeqiVBqmO@mail.gmail.com>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660B93@PUNITPMBX02.ad.infosys.com>
	<335122582-1281448159-cardhu_decombobulator_blackberry.rim.net-1093115328-@bda2121.bisx.produk.on.blackberry>
Date: Tue, 10 Aug 2010 15:51:40 +0200
Message-ID: <AANLkTimNUAsXpHUvPhFjhTn4djW38gpEmWeiBt-d0nEP@mail.gmail.com>
Subject: Re: Scaling Lucene to 1bln docs
From: Pablo Mendes <pablomendes@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485e8cbffbe9d23048d786e0a
X-Virus-Checked: Checked by ClamAV on apache.org

--001485e8cbffbe9d23048d786e0a
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Shelly,
Do you mind sharing with the list the final settings you used for your best
results?

Cheers,
Pablo

On Tue, Aug 10, 2010 at 3:49 PM, anshum.gupta@naukri.com
<anshumg@gmail.com>wrote:

> Hey Shelly,
> If you want to get more info on lucene, I'd recommend you get a copy of
> lucene in action 2nd Ed. It'll help you get a hang of a lot of things! :)
>
> --
> Anshum
> http://blog.anshumgupta.net
>
> Sent from BlackBerry=C2=AE
>
> -----Original Message-----
> From: Shelly_Singh <Shelly_Singh@infosys.com>
> Date: Tue, 10 Aug 2010 19:11:11
> To: java-user@lucene.apache.org<java-user@lucene.apache.org>
> Reply-To: java-user@lucene.apache.org
> Subject: RE: Scaling Lucene to 1bln docs
>
> Hi folks,
>
> Thanks for the excellent support n guidance on my very first day on this
> mailing list...
> At end of day, I have very optimistic results. 100bln search in less than
> 1ms and the index creation time is not huge either ( close to 15 minutes)=
.
>
> I am now hitting the 1bln mark with roughly the same settings. But, I wan=
t
> to understand Norms and TermFilters.
>
> Can someone explain, why or why not should one use each of these and what
> tradeoffs does it have.
>
> Regards,
> Shelly
>
> -----Original Message-----
> From: Danil =C5=A2ORIN [mailto:torindan@gmail.com]
> Sent: Tuesday, August 10, 2010 6:52 PM
> To: java-user@lucene.apache.org
> Subject: Re: Scaling Lucene to 1bln docs
>
> That won't work...if you'll have something like "A Basic Crazy
> Document E-something F-something G-something....you get the point" it
> will go to all shards so the whole point of shards will be
> compromised...you'll have 26 billion documents index ;)
>
> Looks like the only way is to search all shards.
> Depending on available hardware (1 Azul...50 EC2), expected
> traffic(1qps...1000qps), expected query time(10 msec ... 3 sec),
> redundancy (it's a large dataset, I don't think you want to loose it),
> and so on...you'll have to decide how many partitions do you want.
>
> It may work with 8-10, it may need 50-64. (I usually use 2^n as it's
> easier to split each shard in 2 when index grows too much)
>
> On such large datasets it's a lot of tuning, custom code, and no
> one-size-fits-all solution.
> Lucene is just a tool (a fine one) but you need to use it wisely to
> archive great results.
>
> On Tue, Aug 10, 2010 at 15:55, Shelly_Singh <Shelly_Singh@infosys.com>
> wrote:
> > Hmm..I get the point. But, in my application, the document is basically=
 a
> descriptive name of a particular thing. The user will search by name (or
> part of name) and I need to pull out all info pointed to by that name. Th=
is
> info is externalized in a db.
> >
> > One option I can think of is-
> > I can shard based on starting alphabet of any name. So, "Alan Mathur of
> New Delhi" may go to shard "A". But since the name will have 'n' tokens, =
and
> the user may type any one token, this will not work. I can further tweak
> this such that I index the same document into multiple indices (one for e=
ach
> token). So, the same document may be indexed into Shard"A", "M", "N" and
> "D".
> > I am not able to think of another option.
> >
> > Comments welcome.
> >
> >
> > -----Original Message-----
> > From: Danil =C5=A2ORIN [mailto:torindan@gmail.com]
> > Sent: Tuesday, August 10, 2010 6:11 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: Scaling Lucene to 1bln docs
> >
> > I'd second that.
> >
> > It doesn't have to be date for sharding. Maybe every query has some
> > specific field, like UserId or something, so you can redirect to
> > specific shard instead of hitting all 10 indices.
> >
> > You have to have some kind of narrowing: searching 1bn documents with
> > queries that may hit all documents is useless.
> > An user won't look on more than let say 100 results (if presented
> > properly..maybe 1000)
> >
> > Those fields that narrow the result set are good candidates for shardin=
g
> keys.
> >
> >
> > On Tue, Aug 10, 2010 at 15:32, Dan OConnor <doconnor@acquiremedia.com>
> wrote:
> >> Shelly:
> >>
> >> You wouldn't necessarily have to use a multisearcher. A suggested
> alternative is:
> >>
> >> - shard into 10 indices. If you need the concept of a date range searc=
h,
> I would assign the documents to the shard by date, otherwise random
> assignment is fine.
> >> - have a pool of IndexSearchers for each index
> >> - when a search comes in, allocate a Searcher from each index to the
> search.
> >> - perform the search in parallel across all indices.
> >> - merge the results in your own code using an efficient merging
> algorithm.
> >>
> >> Regards,
> >> Dan
> >>
> >>
> >>
> >>
> >> -----Original Message-----
> >> From: Shelly_Singh [mailto:Shelly_Singh@infosys.com]
> >> Sent: Tuesday, August 10, 2010 8:20 AM
> >> To: java-user@lucene.apache.org
> >> Subject: RE: Scaling Lucene to 1bln docs
> >>
> >> No sort. I will need relevance based on TF. If I shard, I will have to
> search in al indices.
> >>
> >> -----Original Message-----
> >> From: anshum.gupta@naukri.com [mailto:anshumg@gmail.com]
> >> Sent: Tuesday, August 10, 2010 1:54 PM
> >> To: java-user@lucene.apache.org
> >> Subject: Re: Scaling Lucene to 1bln docs
> >>
> >> Would like to know, are you using a particular type of sort? Do you ne=
ed
> to sort on relevance? Can you shard and restrict your search to a limited
> set of indexes functionally?
> >>
> >> --
> >> Anshum
> >> http://blog.anshumgupta.net
> >>
> >> Sent from BlackBerry(r)
> >>
> >> -----Original Message-----
> >> From: Shelly_Singh <Shelly_Singh@infosys.com>
> >> Date: Tue, 10 Aug 2010 13:31:38
> >> To: java-user@lucene.apache.org<java-user@lucene.apache.org>
> >> Reply-To: java-user@lucene.apache.org
> >> Subject: RE: Scaling Lucene to 1bln docs
> >>
> >> Hi Anshum,
> >>
> >> I am already running with the 'setCompoundFile' option off.
> >> And thanks for pointing out mergeFactor. I had tried a higher
> mergeFactor couple of days ago, but got an OOM, so I discarded it. Later =
I
> figured that OOM was because maxMergeDocs was unlimited and I was using
> MMap. U r rigt, I should try a higher mergeFactor.
> >>
> >> With regards to the multithreaded approach, I was considering creating
> 10 different threads each indexing 100mln docs coupled with a Multisearch=
er
> to which I will feed these 10 indices. Do you think this will improve
> performance.
> >>
> >> And just FYI, I have latest reading for 1 bln docs. Indexing time is 2
> hrs and search time is 15 secs.. I can live with indexing time but the
> search time is highly unacceptable.
> >>
> >> Help again.
> >>
> >> -----Original Message-----
> >> From: Anshum [mailto:anshumg@gmail.com]
> >> Sent: Tuesday, August 10, 2010 12:55 PM
> >> To: java-user@lucene.apache.org
> >> Subject: Re: Scaling Lucene to 1bln docs
> >>
> >> Hi Shelly,
> >> That seems like a reasonable data set size. I'd suggest you increase
> your
> >> mergeFactor as a mergeFactor of 10 says, you are only buffering 10 doc=
s
> in
> >> memory before writing it to a file (and incurring I/O). You could
> actually
> >> flush by RAM usage instead of a Doc count. Turn off using the Compound
> file
> >> structure for indexing as it generally takes more time creating a cfs
> index.
> >>
> >> Plus the time would not grow linearly as the larger the size of segmen=
ts
> >> get, the more time it'd take to add more docs and merge those together
> >> intermittently.
> >> You may also use a multithreaded approach in case reading the source
> takes
> >> time in your case, though, the indexwriter would have to be shared amo=
ng
> all
> >> threads.
> >>
> >> --
> >> Anshum Gupta
> >> http://ai-cafe.blogspot.com
> >>
> >>
> >> On Tue, Aug 10, 2010 at 12:24 PM, Shelly_Singh <
> Shelly_Singh@infosys.com>wrote:
> >>
> >>> Hi,
> >>>
> >>> I am developing an application which uses Lucene for indexing and
> searching
> >>> 1 bln documents. (the document size is very small though. Each docume=
nt
> has
> >>> a single field of 5-10 words; so I believe that my data size is withi=
n
> the
> >>> tested limits).
> >>>
> >>> I am using the following configuration:
> >>> 1.      1.5 gig RAM to the jvm
> >>> 2.      100GB disk space.
> >>> 3.      Index creation tuning factors:
> >>> a.      mergeFactor =3D 10
> >>> b.      maxFieldLength =3D 10
> >>> c.      maxMergeDocs =3D 5000000 (if I try with a larger value, I get=
 an
> >>> out-of-memory)
> >>>
> >>> With these settings, I am able to create an index of 100 million docs
> (10
> >>> pow 8)  in 15 mins consuming a disk space of 2.5gb. Which is quite
> >>> satisfactory for me, but nevertheless, I want to know what else can b=
e
> done
> >>> to tune it further. Please help.
> >>> Also, with these settings, can I expect the time and size to grow
> linearly
> >>> for 1bln (10 pow 9) documents?
> >>>
> >>> Thanks and Regards,
> >>>
> >>> Shelly Singh
> >>> Center For KNowledge Driven Information Systems, Infosys
> >>> Email: shelly_singh@infosys.com<mailto:shelly_singh@infosys.com>
> >>> Phone: (M) 91 992 369 7200, (VoIP)2022978622
> >>>
> >>>
> >>>
> >>>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> **************** CAUTION - Disclaimer *****************
> This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended
> solely
> for the use of the addressee(s). If you are not the intended recipient,
> please
> notify the sender by e-mail and delete the original message. Further, you
> are not
> to copy, disclose, or distribute this e-mail or its contents to any other
> person and
> any such actions are unlawful. This e-mail may contain viruses. Infosys h=
as
> taken
> every reasonable precaution to minimize this risk, but is not liable for
> any damage
> you may sustain as a result of any virus in this e-mail. You should carry
> out your
> own virus checks before opening the e-mail or attachment. Infosys reserve=
s
> the
> right to monitor and review the content of all messages sent to or from
> this e-mail
> address. Messages sent to or from this e-mail address may be stored on th=
e
> Infosys e-mail system.
> ***INFOSYS******** End of Disclaimer ********INFOSYS***
>

--001485e8cbffbe9d23048d786e0a--

From java-user-return-46983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 10 15:33:41 2010
Return-Path: <java-user-return-46983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45236 invoked from network); 10 Aug 2010 15:33:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Aug 2010 15:33:40 -0000
Received: (qmail 76911 invoked by uid 500); 10 Aug 2010 15:33:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76787 invoked by uid 500); 10 Aug 2010 15:33:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76779 invoked by uid 99); 10 Aug 2010 15:33:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 15:33:37 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of IKoelliker@axsone.com designates 204.142.131.82 as permitted sender)
Received: from [204.142.131.82] (HELO pubsrv03.ctronsoft.com) (204.142.131.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 15:33:26 +0000
X-TM-IMSS-Message-ID:<ba208b5800000f7f@axsone.com>
Received: from mailsrv1.ctronsoft.com ([10.0.5.50]) by axsone.com ([204.142.131.82]) with ESMTP (TREND IMSS SMTP Service 7.0) id ba208b5800000f7f ; Tue, 10 Aug 2010 11:27:37 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CB38A0.BF42EA2C"
Subject: Index merge question
Date: Tue, 10 Aug 2010 11:28:56 -0400
Message-ID: <33814FB2B9C8164294DF032B686739F99E0391@mailsrv1.ctronsoft.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Index merge question
Thread-Index: Acs4oKDRIZWED8Z3Sgmyflg4YxQGeg==
From: <IKoelliker@axsone.com>
To: <java-user@lucene.apache.org>
X-TM-AS-Product-Ver: IMSS-7.0.0.6352-6.0.0.1038-17334.004
X-TM-AS-Result: No--15.722-5.0-31-1
X-imss-scan-details: No--15.722-5.0-31-1
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01CB38A0.BF42EA2C
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hello,

Is there any point during a merge operation where the index cannot be
searched or is unstable? We want to create a bunch of smaller indexes in
parallel and then merge them into a single index that may have searches
running against it.

=20

Thanks,

Ian Koelliker


------_=_NextPart_001_01CB38A0.BF42EA2C--

From java-user-return-46984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 10 16:03:14 2010
Return-Path: <java-user-return-46984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52451 invoked from network); 10 Aug 2010 16:03:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Aug 2010 16:03:14 -0000
Received: (qmail 7779 invoked by uid 500); 10 Aug 2010 16:03:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7724 invoked by uid 500); 10 Aug 2010 16:03:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7716 invoked by uid 99); 10 Aug 2010 16:03:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 16:03:11 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 16:03:04 +0000
Received: by qwd7 with SMTP id 7so11809466qwd.35
        for <java-user@lucene.apache.org>; Tue, 10 Aug 2010 09:02:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=S4nJvQt7Zt/L0J8p/LebQKIxGBFEYC9OhkxgTjBatMQ=;
        b=MX3PcJZFsVkttfCXbdhH4Kr2d+sD2eEF2gJLJ8GEv3e0ayJXbjf9KIQg7+wi7P9Lok
         ji0JwRDoWjxaV8Igad33FoI3+WKHnZAWU2yB5kMYotyK1V96CHM2jCoEcPiuSBuDYt7d
         p8VTO7eyq+2PMddN1LX15d1Axmp3hQY4krqMI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Be+HzkyEaZro00E5AkLB9XIO8AW1Wh6yyFb+oO9teKTytRkznL3GcfhUKXGN4d3kPT
         nCDyyN7QYmOjnZwxTNj3TAC1rTEzg+MQ98LJJRukpcnYt4IJV8hcPwSqPeWLuOgwBnQD
         1FlVhLDkDth8WxlrwB7rOSOV2b92AzKK9NnyE=
MIME-Version: 1.0
Received: by 10.224.100.5 with SMTP id w5mr1704546qan.191.1281456163307; Tue, 
	10 Aug 2010 09:02:43 -0700 (PDT)
Received: by 10.229.219.11 with HTTP; Tue, 10 Aug 2010 09:02:43 -0700 (PDT)
In-Reply-To: <33814FB2B9C8164294DF032B686739F99E0391@mailsrv1.ctronsoft.com>
References: <33814FB2B9C8164294DF032B686739F99E0391@mailsrv1.ctronsoft.com>
Date: Tue, 10 Aug 2010 12:02:43 -0400
Message-ID: <AANLkTimKaZ+LLt3F1dMusfmcWUuheNv1YoUUW8su9dQZ@mail.gmail.com>
Subject: Re: Index merge question
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00c09f971fac68ca0a048d7a4345
X-Virus-Checked: Checked by ClamAV on apache.org

--00c09f971fac68ca0a048d7a4345
Content-Type: text/plain; charset=ISO-8859-1

When you open an IndexReader, Lucene effectively takes
a "snapshot" of the index and searches it until you reopen
your reader. So the timing of when the merged index gets
used is up to you, so you should be fine.

Best
Erick

On Tue, Aug 10, 2010 at 11:28 AM, <IKoelliker@axsone.com> wrote:

> Hello,
>
> Is there any point during a merge operation where the index cannot be
> searched or is unstable? We want to create a bunch of smaller indexes in
> parallel and then merge them into a single index that may have searches
> running against it.
>
>
>
> Thanks,
>
> Ian Koelliker
>
>

--00c09f971fac68ca0a048d7a4345--

From java-user-return-46985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 10 18:20:49 2010
Return-Path: <java-user-return-46985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7248 invoked from network); 10 Aug 2010 18:20:49 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Aug 2010 18:20:49 -0000
Received: (qmail 29104 invoked by uid 500); 10 Aug 2010 18:20:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28977 invoked by uid 500); 10 Aug 2010 18:20:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28969 invoked by uid 99); 10 Aug 2010 18:20:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 18:20:46 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of IKoelliker@axsone.com designates 204.142.131.82 as permitted sender)
Received: from [204.142.131.82] (HELO pubsrv03.ctronsoft.com) (204.142.131.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 18:20:40 +0000
X-TM-IMSS-Message-ID:<bab9a1c6000013a6@axsone.com>
Received: from mailsrv1.ctronsoft.com ([10.0.5.50]) by axsone.com ([204.142.131.82]) with ESMTP (TREND IMSS SMTP Service 7.0) id bab9a1c6000013a6 ; Tue, 10 Aug 2010 14:14:50 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Index merge question
Date: Tue, 10 Aug 2010 14:16:09 -0400
Message-ID: <33814FB2B9C8164294DF032B686739F99E0394@mailsrv1.ctronsoft.com>
In-Reply-To: <AANLkTimKaZ+LLt3F1dMusfmcWUuheNv1YoUUW8su9dQZ@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Index merge question
Thread-Index: Acs4pRHZ2XLCW6OxRmSzJXMaFEbb3gAEmOqA
References: <33814FB2B9C8164294DF032B686739F99E0391@mailsrv1.ctronsoft.com> <AANLkTimKaZ+LLt3F1dMusfmcWUuheNv1YoUUW8su9dQZ@mail.gmail.com>
From: <IKoelliker@axsone.com>
To: <java-user@lucene.apache.org>
X-TM-AS-Product-Ver: IMSS-7.0.0.6352-6.0.0.1038-17334.004
X-TM-AS-Result: No--8.768-5.0-31-1
X-imss-scan-details: No--8.768-5.0-31-1

Would it matter if an IndexReader was opened while an index merge is in
progress?

Thanks

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Tuesday, August 10, 2010 12:03 PM
To: java-user@lucene.apache.org
Subject: Re: Index merge question

When you open an IndexReader, Lucene effectively takes
a "snapshot" of the index and searches it until you reopen
your reader. So the timing of when the merged index gets
used is up to you, so you should be fine.

Best
Erick

On Tue, Aug 10, 2010 at 11:28 AM, <IKoelliker@axsone.com> wrote:

> Hello,
>
> Is there any point during a merge operation where the index cannot be
> searched or is unstable? We want to create a bunch of smaller indexes
in
> parallel and then merge them into a single index that may have
searches
> running against it.
>
>
>
> Thanks,
>
> Ian Koelliker
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 10 19:41:22 2010
Return-Path: <java-user-return-46986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42327 invoked from network); 10 Aug 2010 19:41:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 10 Aug 2010 19:41:21 -0000
Received: (qmail 42388 invoked by uid 500); 10 Aug 2010 19:41:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42315 invoked by uid 500); 10 Aug 2010 19:41:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42305 invoked by uid 99); 10 Aug 2010 19:41:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 19:41:19 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.12 as permitted sender)
Received: from [80.91.229.12] (HELO lo.gmane.org) (80.91.229.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Aug 2010 19:41:11 +0000
Received: from list by lo.gmane.org with local (Exim 4.69)
	(envelope-from <jak-lucene-user@m.gmane.org>)
	id 1Oiugl-0002C4-1U
	for java-user@lucene.apache.org; Tue, 10 Aug 2010 21:40:43 +0200
Received: from poste70.vl.videotron.net ([207.96.202.70])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 10 Aug 2010 21:40:43 +0200
Received: from duperval by poste70.vl.videotron.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 10 Aug 2010 21:40:43 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From: L Duperval <duperval@videotron.com>
Subject: Partial matching with spaces
Date: Tue, 10 Aug 2010 19:40:31 +0000 (UTC)
Lines: 24
Message-ID: <loom.20100810T213521-700@post.gmane.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@dough.gmane.org
X-Gmane-NNTP-Posting-Host: sea.gmane.org
User-Agent: Loom/3.14 (http://gmane.org/)
X-Loom-IP: 207.96.202.70 (Mozilla/5.0 (Windows; U; Windows NT 5.2; en-US; rv:1.9.2.8) Gecko/20100722 Firefox/3.6.8 ( .NET CLR 3.5.30729))

I am using Compass which uses Lucene 2.4.1.

We are trying to implement "find as you type" searching. So for example, if I
have documents containing the following:

Newfoundland
New Mexico
New York
New Yorkshire

If a user types "New" all four documents are returned. When the user adds a
space, only the last three are returned. After typing "Y" the last two show up,
and so on.

It works, as long as there isn't a space in the query. Once there is a space,
nothing matches until the "k" in "New York" is added. And then, only "New York"
is returned, "New Yorkshire" isn't. 

Is there a way to do this with Lucene? If so, then I can try to make it work
similarly in Compass.

Thanks,

L


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 11 04:31:26 2010
Return-Path: <java-user-return-46987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40937 invoked from network); 11 Aug 2010 04:31:26 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Aug 2010 04:31:26 -0000
Received: (qmail 78761 invoked by uid 500); 11 Aug 2010 04:31:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78321 invoked by uid 500); 11 Aug 2010 04:31:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78310 invoked by uid 99); 11 Aug 2010 04:31:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Aug 2010 04:31:18 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,MIME_QP_LONG_LINE,SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [202.86.5.92] (HELO smtp105.mail.in.yahoo.com) (202.86.5.92)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 11 Aug 2010 04:31:12 +0000
Received: (qmail 51026 invoked from network); 11 Aug 2010 04:30:50 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=DKIM-Signature:Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=a4WNoy0YbNjeWhkoJGQv+ZLgd+eedGr4UDdZB2QvHtxzcJ1F2EKzg2qV1pHNAemdTt9Gq2EjyA5PLdpTZ5n6NmzzBswglA6eE1OEEDNr902TdTcMDdBnEn/4Nm9BH2VlgiuGyM37l5yLd8KukujLYxxqDh9/ZxcYwPLPEoJNXTQ=  ;
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.in; s=s1024; t=1281501050; bh=8MI4xrua+FI7pxYI0Z5qPxdm19WaMPbqjXAF9AsuAHE=; h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE; b=WWoBZVEVbW+fAKbb9b0+1FH9m0M8TDjoLtt9c1Vl1NpCABJZ7ObzxwG9nIgRIOZBt9Qn+auj33BYQR2nsihyyUlNQW6hhEjNmVe1QlcsDC6Oje9arq+aWsDrBKq9dug9ez4ANulpqfWXzlIvTyr3UXV76kDRvRa9nTjpv0y3pSg=
Received: from GaneshM (emailgane@121.244.159.130 with login)
        by smtp105.mail.in.yahoo.com with SMTP; 11 Aug 2010 10:00:50 +0530 IST
X-Yahoo-SMTP: JObyHkuswBBrNSLZp.Ycd7Boqpr_GQ--
X-YMail-OSG: IXQzr4EVM1luYPIXsHuv9JzwyzyyctHmBhrgI.9fiSfe7Uy
 Em1abSjAIzs4C4930mmRGw_nHDW4w.m79sG6tGi3grtmmesnhG1n0OMtO82C
 s6B2Lzf25YuWbL6Nv_101WCfNo.B0ecmYCH_ujbD2civX2UUEmkoEIJirJ4c
 DfEHRJty0I0dofAH.ffJ_XhHJnUrvqqyC
X-Yahoo-Newman-Property: ymail-3
Message-ID: <D85AE610CF584C5C962E1A95E17A0A2A@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Subject: read past EOF
Date: Wed, 11 Aug 2010 10:00:41 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.5931
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5931
X-Virus-Checked: Checked by ClamAV on apache.org

Hello all,

I am getting the following exception for one of my customer. I think the =
database is corrupted but want to know the exact cause.

            Exception: read past EOF            =20
            =
org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.j=
ava:135)
            =
org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.j=
ava:92)
            =
org.apache.lucene.util.BitVector.readBits(BitVector.java:225)
            org.apache.lucene.util.BitVector.<init>(BitVector.java:214)
            =
org.apache.lucene.index.SegmentReader.loadDeletedDocs(SegmentReader.java:=
666)
            =
org.apache.lucene.index.SegmentReader.get(SegmentReader.java:642)
            =
org.apache.lucene.index.SegmentReader.get(SegmentReader.java:599)
            =
org.apache.lucene.index.DirectoryReader.<init>(DirectoryReader.java:104)
            =
org.apache.lucene.index.ReadOnlyDirectoryReader.<init>(ReadOnlyDirectoryR=
eader.java:27)
            =
org.apache.lucene.index.DirectoryReader$1.doBody(DirectoryReader.java:74)=

            =
org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.ja=
va:704)
            =
org.apache.lucene.index.DirectoryReader.open(DirectoryReader.java:69)
            =
org.apache.lucene.index.IndexReader.open(IndexReader.java:476)
            =
org.apache.lucene.index.IndexReader.open(IndexReader.java:403)
           =20
Regards
Ganesh  
Send free SMS to your Friends on Mobile from your Yahoo! Messenger. Download Now! http://messenger.yahoo.com/download.php

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 11 04:59:12 2010
Return-Path: <java-user-return-46988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45500 invoked from network); 11 Aug 2010 04:59:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Aug 2010 04:59:11 -0000
Received: (qmail 94040 invoked by uid 500); 11 Aug 2010 04:59:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93570 invoked by uid 500); 11 Aug 2010 04:59:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93561 invoked by uid 99); 11 Aug 2010 04:59:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Aug 2010 04:59:04 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [122.98.10.33] (HELO KECGATE08.infosys.com) (122.98.10.33)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Aug 2010 04:58:58 +0000
X-TM-IMSS-Message-ID:<240f311f001c66ad@KECGATE08.infosys.com>
Received: from blrkechub04.ad.infosys.com ([10.66.236.44]) by KECGATE08.infosys.com ([122.98.10.33]) with ESMTP (TREND IMSS SMTP Service 7.0) id 240f311f001c66ad ; Wed, 11 Aug 2010 10:30:30 +0530
Received: from PUNITPHUB02.ad.infosys.com (10.76.151.42) by
 blrkechub04.ad.infosys.com (10.66.236.44) with Microsoft SMTP Server (TLS) id
 8.2.176.0; Wed, 11 Aug 2010 10:28:35 +0530
Received: from PUNITPMBX02.ad.infosys.com ([10.76.151.22]) by
 PUNITPHUB02.ad.infosys.com ([10.76.151.42]) with mapi; Wed, 11 Aug 2010
 10:28:35 +0530
From: Shelly_Singh <Shelly_Singh@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 11 Aug 2010 10:28:21 +0530
Subject: RE: Scaling Lucene to 1bln docs
Thread-Topic: Scaling Lucene to 1bln docs
Thread-Index: Acs4k0AeglqNxlaCRTS3riJNs7MdtAAfdm7A
Message-ID: <AA27F54EFDA0CE43B33EBDB7796323740CA2660CE4@PUNITPMBX02.ad.infosys.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA2660945@PUNITPMBX02.ad.infosys.com>
	<AANLkTi=4LLNLK-wk9frni=ay0qkEokgnr+sLLfWPyZ=8@mail.gmail.com>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660988@PUNITPMBX02.ad.infosys.com>
	<528709861-1281428644-cardhu_decombobulator_blackberry.rim.net-283608400-@bda2121.bisx.produk.on.blackberry>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660B35@PUNITPMBX02.ad.infosys.com>
	<3B4AEBB59588ED409ECE3CB6517C41750EC8C16BEC@exchange.windows.mmu.acquiremedia.com>
	<AANLkTinJ=AE=+E1iyCqQxe26PSm2PgS_r-8+WMjcT_oG@mail.gmail.com>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660B5E@PUNITPMBX02.ad.infosys.com>
	<AANLkTi=YuvwdGjj=RoH6A1-nUhBN14xtc2LDeqiVBqmO@mail.gmail.com>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660B93@PUNITPMBX02.ad.infosys.com>
	<335122582-1281448159-cardhu_decombobulator_blackberry.rim.net-1093115328-@bda2121.bisx.produk.on.blackberry>
 <AANLkTimNUAsXpHUvPhFjhTn4djW38gpEmWeiBt-d0nEP@mail.gmail.com>
In-Reply-To: <AANLkTimNUAsXpHUvPhFjhTn4djW38gpEmWeiBt-d0nEP@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

TXkgZmluYWwgc2V0dGluZ3MgYXJlOg0KMS4gICAgICAxLjUgZ2lnIFJBTSB0byB0aGUganZtIG91
dCBvZiAyR0IgYXZhaWxhYmxlIGZvciBteSBkZXNrdG9wDQoyLiAgICAgIDEwMEdCIGRpc2sgc3Bh
Y2UuDQozLiAgICAgIEluZGV4IGNyZWF0aW9uIGFuZCBzZWFyY2hpbmcgdHVuaW5nIGZhY3RvcnM6
DQoJYS4gbWVyZ2VGYWN0b3IgPSAxMA0KCWIuIG1heEZpZWxkTGVuZ3RoID0gMTANCgljLiBtYXhN
ZXJnZURvY3MgPSA1MDAwMDAwIA0KCWQuIGZ1bGwgb3B0aW1pemUgYXQgZW5kIG9mIGluZGV4IGNy
ZWF0aW9uDQoJZS4gcmVhZENodW5rU2l6ZSA9IDEwMDAwMDANCglmLiBUZXJtSW5mb3NJbmRleERp
dmlzb3IgPSAxMA0KCWcuIE5PIHNoYXJkaW5nLiBTaW5nbGUgTWFjaGluZS4NCg0KQnV0IFBhYmxv
LCBteSBkb2N1bWVudCBpcyBhIHNpbmdsZSBmaWVsZCBkb2N1bWVudCB3aXRoIHRoZSB0aGUgZmll
bGQgbGVuZ3RoIGJlaW5nIDItNSB3b3Jkcy4gU28sIHUgY2FuIHByb2JhYmx5IHJlZHVjZSBpdCBi
eSBhIGZhY3RvciBvZiAxMDAgZGlyZWN0bHkgaWYgdSB3YW50IHRvIGNvbXBhcmUgd2l0aCByZWd1
bGFyIGRvY3MuDQoNCi0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQpGcm9tOiBQYWJsbyBNZW5k
ZXMgW21haWx0bzpwYWJsb21lbmRlc0BnbWFpbC5jb21dIA0KU2VudDogVHVlc2RheSwgQXVndXN0
IDEwLCAyMDEwIDc6MjIgUE0NClRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNClN1Ympl
Y3Q6IFJlOiBTY2FsaW5nIEx1Y2VuZSB0byAxYmxuIGRvY3MNCg0KU2hlbGx5LA0KRG8geW91IG1p
bmQgc2hhcmluZyB3aXRoIHRoZSBsaXN0IHRoZSBmaW5hbCBzZXR0aW5ncyB5b3UgdXNlZCBmb3Ig
eW91ciBiZXN0DQpyZXN1bHRzPw0KDQpDaGVlcnMsDQpQYWJsbw0KDQpPbiBUdWUsIEF1ZyAxMCwg
MjAxMCBhdCAzOjQ5IFBNLCBhbnNodW0uZ3VwdGFAbmF1a3JpLmNvbQ0KPGFuc2h1bWdAZ21haWwu
Y29tPndyb3RlOg0KDQo+IEhleSBTaGVsbHksDQo+IElmIHlvdSB3YW50IHRvIGdldCBtb3JlIGlu
Zm8gb24gbHVjZW5lLCBJJ2QgcmVjb21tZW5kIHlvdSBnZXQgYSBjb3B5IG9mDQo+IGx1Y2VuZSBp
biBhY3Rpb24gMm5kIEVkLiBJdCdsbCBoZWxwIHlvdSBnZXQgYSBoYW5nIG9mIGEgbG90IG9mIHRo
aW5ncyEgOikNCj4NCj4gLS0NCj4gQW5zaHVtDQo+IGh0dHA6Ly9ibG9nLmFuc2h1bWd1cHRhLm5l
dA0KPg0KPiBTZW50IGZyb20gQmxhY2tCZXJyecKuDQo+DQo+IC0tLS0tT3JpZ2luYWwgTWVzc2Fn
ZS0tLS0tDQo+IEZyb206IFNoZWxseV9TaW5naCA8U2hlbGx5X1NpbmdoQGluZm9zeXMuY29tPg0K
PiBEYXRlOiBUdWUsIDEwIEF1ZyAyMDEwIDE5OjExOjExDQo+IFRvOiBqYXZhLXVzZXJAbHVjZW5l
LmFwYWNoZS5vcmc8amF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnPg0KPiBSZXBseS1UbzogamF2
YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQo+IFN1YmplY3Q6IFJFOiBTY2FsaW5nIEx1Y2VuZSB0
byAxYmxuIGRvY3MNCj4NCj4gSGkgZm9sa3MsDQo+DQo+IFRoYW5rcyBmb3IgdGhlIGV4Y2VsbGVu
dCBzdXBwb3J0IG4gZ3VpZGFuY2Ugb24gbXkgdmVyeSBmaXJzdCBkYXkgb24gdGhpcw0KPiBtYWls
aW5nIGxpc3QuLi4NCj4gQXQgZW5kIG9mIGRheSwgSSBoYXZlIHZlcnkgb3B0aW1pc3RpYyByZXN1
bHRzLiAxMDBibG4gc2VhcmNoIGluIGxlc3MgdGhhbg0KPiAxbXMgYW5kIHRoZSBpbmRleCBjcmVh
dGlvbiB0aW1lIGlzIG5vdCBodWdlIGVpdGhlciAoIGNsb3NlIHRvIDE1IG1pbnV0ZXMpLg0KPg0K
PiBJIGFtIG5vdyBoaXR0aW5nIHRoZSAxYmxuIG1hcmsgd2l0aCByb3VnaGx5IHRoZSBzYW1lIHNl
dHRpbmdzLiBCdXQsIEkgd2FudA0KPiB0byB1bmRlcnN0YW5kIE5vcm1zIGFuZCBUZXJtRmlsdGVy
cy4NCj4NCj4gQ2FuIHNvbWVvbmUgZXhwbGFpbiwgd2h5IG9yIHdoeSBub3Qgc2hvdWxkIG9uZSB1
c2UgZWFjaCBvZiB0aGVzZSBhbmQgd2hhdA0KPiB0cmFkZW9mZnMgZG9lcyBpdCBoYXZlLg0KPg0K
PiBSZWdhcmRzLA0KPiBTaGVsbHkNCj4NCj4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCj4g
RnJvbTogRGFuaWwgxaJPUklOIFttYWlsdG86dG9yaW5kYW5AZ21haWwuY29tXQ0KPiBTZW50OiBU
dWVzZGF5LCBBdWd1c3QgMTAsIDIwMTAgNjo1MiBQTQ0KPiBUbzogamF2YS11c2VyQGx1Y2VuZS5h
cGFjaGUub3JnDQo+IFN1YmplY3Q6IFJlOiBTY2FsaW5nIEx1Y2VuZSB0byAxYmxuIGRvY3MNCj4N
Cj4gVGhhdCB3b24ndCB3b3JrLi4uaWYgeW91J2xsIGhhdmUgc29tZXRoaW5nIGxpa2UgIkEgQmFz
aWMgQ3JhenkNCj4gRG9jdW1lbnQgRS1zb21ldGhpbmcgRi1zb21ldGhpbmcgRy1zb21ldGhpbmcu
Li4ueW91IGdldCB0aGUgcG9pbnQiIGl0DQo+IHdpbGwgZ28gdG8gYWxsIHNoYXJkcyBzbyB0aGUg
d2hvbGUgcG9pbnQgb2Ygc2hhcmRzIHdpbGwgYmUNCj4gY29tcHJvbWlzZWQuLi55b3UnbGwgaGF2
ZSAyNiBiaWxsaW9uIGRvY3VtZW50cyBpbmRleCA7KQ0KPg0KPiBMb29rcyBsaWtlIHRoZSBvbmx5
IHdheSBpcyB0byBzZWFyY2ggYWxsIHNoYXJkcy4NCj4gRGVwZW5kaW5nIG9uIGF2YWlsYWJsZSBo
YXJkd2FyZSAoMSBBenVsLi4uNTAgRUMyKSwgZXhwZWN0ZWQNCj4gdHJhZmZpYygxcXBzLi4uMTAw
MHFwcyksIGV4cGVjdGVkIHF1ZXJ5IHRpbWUoMTAgbXNlYyAuLi4gMyBzZWMpLA0KPiByZWR1bmRh
bmN5IChpdCdzIGEgbGFyZ2UgZGF0YXNldCwgSSBkb24ndCB0aGluayB5b3Ugd2FudCB0byBsb29z
ZSBpdCksDQo+IGFuZCBzbyBvbi4uLnlvdSdsbCBoYXZlIHRvIGRlY2lkZSBob3cgbWFueSBwYXJ0
aXRpb25zIGRvIHlvdSB3YW50Lg0KPg0KPiBJdCBtYXkgd29yayB3aXRoIDgtMTAsIGl0IG1heSBu
ZWVkIDUwLTY0LiAoSSB1c3VhbGx5IHVzZSAyXm4gYXMgaXQncw0KPiBlYXNpZXIgdG8gc3BsaXQg
ZWFjaCBzaGFyZCBpbiAyIHdoZW4gaW5kZXggZ3Jvd3MgdG9vIG11Y2gpDQo+DQo+IE9uIHN1Y2gg
bGFyZ2UgZGF0YXNldHMgaXQncyBhIGxvdCBvZiB0dW5pbmcsIGN1c3RvbSBjb2RlLCBhbmQgbm8N
Cj4gb25lLXNpemUtZml0cy1hbGwgc29sdXRpb24uDQo+IEx1Y2VuZSBpcyBqdXN0IGEgdG9vbCAo
YSBmaW5lIG9uZSkgYnV0IHlvdSBuZWVkIHRvIHVzZSBpdCB3aXNlbHkgdG8NCj4gYXJjaGl2ZSBn
cmVhdCByZXN1bHRzLg0KPg0KPiBPbiBUdWUsIEF1ZyAxMCwgMjAxMCBhdCAxNTo1NSwgU2hlbGx5
X1NpbmdoIDxTaGVsbHlfU2luZ2hAaW5mb3N5cy5jb20+DQo+IHdyb3RlOg0KPiA+IEhtbS4uSSBn
ZXQgdGhlIHBvaW50LiBCdXQsIGluIG15IGFwcGxpY2F0aW9uLCB0aGUgZG9jdW1lbnQgaXMgYmFz
aWNhbGx5IGENCj4gZGVzY3JpcHRpdmUgbmFtZSBvZiBhIHBhcnRpY3VsYXIgdGhpbmcuIFRoZSB1
c2VyIHdpbGwgc2VhcmNoIGJ5IG5hbWUgKG9yDQo+IHBhcnQgb2YgbmFtZSkgYW5kIEkgbmVlZCB0
byBwdWxsIG91dCBhbGwgaW5mbyBwb2ludGVkIHRvIGJ5IHRoYXQgbmFtZS4gVGhpcw0KPiBpbmZv
IGlzIGV4dGVybmFsaXplZCBpbiBhIGRiLg0KPiA+DQo+ID4gT25lIG9wdGlvbiBJIGNhbiB0aGlu
ayBvZiBpcy0NCj4gPiBJIGNhbiBzaGFyZCBiYXNlZCBvbiBzdGFydGluZyBhbHBoYWJldCBvZiBh
bnkgbmFtZS4gU28sICJBbGFuIE1hdGh1ciBvZg0KPiBOZXcgRGVsaGkiIG1heSBnbyB0byBzaGFy
ZCAiQSIuIEJ1dCBzaW5jZSB0aGUgbmFtZSB3aWxsIGhhdmUgJ24nIHRva2VucywgYW5kDQo+IHRo
ZSB1c2VyIG1heSB0eXBlIGFueSBvbmUgdG9rZW4sIHRoaXMgd2lsbCBub3Qgd29yay4gSSBjYW4g
ZnVydGhlciB0d2Vhaw0KPiB0aGlzIHN1Y2ggdGhhdCBJIGluZGV4IHRoZSBzYW1lIGRvY3VtZW50
IGludG8gbXVsdGlwbGUgaW5kaWNlcyAob25lIGZvciBlYWNoDQo+IHRva2VuKS4gU28sIHRoZSBz
YW1lIGRvY3VtZW50IG1heSBiZSBpbmRleGVkIGludG8gU2hhcmQiQSIsICJNIiwgIk4iIGFuZA0K
PiAiRCIuDQo+ID4gSSBhbSBub3QgYWJsZSB0byB0aGluayBvZiBhbm90aGVyIG9wdGlvbi4NCj4g
Pg0KPiA+IENvbW1lbnRzIHdlbGNvbWUuDQo+ID4NCj4gPg0KPiA+IC0tLS0tT3JpZ2luYWwgTWVz
c2FnZS0tLS0tDQo+ID4gRnJvbTogRGFuaWwgxaJPUklOIFttYWlsdG86dG9yaW5kYW5AZ21haWwu
Y29tXQ0KPiA+IFNlbnQ6IFR1ZXNkYXksIEF1Z3VzdCAxMCwgMjAxMCA2OjExIFBNDQo+ID4gVG86
IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KPiA+IFN1YmplY3Q6IFJlOiBTY2FsaW5nIEx1
Y2VuZSB0byAxYmxuIGRvY3MNCj4gPg0KPiA+IEknZCBzZWNvbmQgdGhhdC4NCj4gPg0KPiA+IEl0
IGRvZXNuJ3QgaGF2ZSB0byBiZSBkYXRlIGZvciBzaGFyZGluZy4gTWF5YmUgZXZlcnkgcXVlcnkg
aGFzIHNvbWUNCj4gPiBzcGVjaWZpYyBmaWVsZCwgbGlrZSBVc2VySWQgb3Igc29tZXRoaW5nLCBz
byB5b3UgY2FuIHJlZGlyZWN0IHRvDQo+ID4gc3BlY2lmaWMgc2hhcmQgaW5zdGVhZCBvZiBoaXR0
aW5nIGFsbCAxMCBpbmRpY2VzLg0KPiA+DQo+ID4gWW91IGhhdmUgdG8gaGF2ZSBzb21lIGtpbmQg
b2YgbmFycm93aW5nOiBzZWFyY2hpbmcgMWJuIGRvY3VtZW50cyB3aXRoDQo+ID4gcXVlcmllcyB0
aGF0IG1heSBoaXQgYWxsIGRvY3VtZW50cyBpcyB1c2VsZXNzLg0KPiA+IEFuIHVzZXIgd29uJ3Qg
bG9vayBvbiBtb3JlIHRoYW4gbGV0IHNheSAxMDAgcmVzdWx0cyAoaWYgcHJlc2VudGVkDQo+ID4g
cHJvcGVybHkuLm1heWJlIDEwMDApDQo+ID4NCj4gPiBUaG9zZSBmaWVsZHMgdGhhdCBuYXJyb3cg
dGhlIHJlc3VsdCBzZXQgYXJlIGdvb2QgY2FuZGlkYXRlcyBmb3Igc2hhcmRpbmcNCj4ga2V5cy4N
Cj4gPg0KPiA+DQo+ID4gT24gVHVlLCBBdWcgMTAsIDIwMTAgYXQgMTU6MzIsIERhbiBPQ29ubm9y
IDxkb2Nvbm5vckBhY3F1aXJlbWVkaWEuY29tPg0KPiB3cm90ZToNCj4gPj4gU2hlbGx5Og0KPiA+
Pg0KPiA+PiBZb3Ugd291bGRuJ3QgbmVjZXNzYXJpbHkgaGF2ZSB0byB1c2UgYSBtdWx0aXNlYXJj
aGVyLiBBIHN1Z2dlc3RlZA0KPiBhbHRlcm5hdGl2ZSBpczoNCj4gPj4NCj4gPj4gLSBzaGFyZCBp
bnRvIDEwIGluZGljZXMuIElmIHlvdSBuZWVkIHRoZSBjb25jZXB0IG9mIGEgZGF0ZSByYW5nZSBz
ZWFyY2gsDQo+IEkgd291bGQgYXNzaWduIHRoZSBkb2N1bWVudHMgdG8gdGhlIHNoYXJkIGJ5IGRh
dGUsIG90aGVyd2lzZSByYW5kb20NCj4gYXNzaWdubWVudCBpcyBmaW5lLg0KPiA+PiAtIGhhdmUg
YSBwb29sIG9mIEluZGV4U2VhcmNoZXJzIGZvciBlYWNoIGluZGV4DQo+ID4+IC0gd2hlbiBhIHNl
YXJjaCBjb21lcyBpbiwgYWxsb2NhdGUgYSBTZWFyY2hlciBmcm9tIGVhY2ggaW5kZXggdG8gdGhl
DQo+IHNlYXJjaC4NCj4gPj4gLSBwZXJmb3JtIHRoZSBzZWFyY2ggaW4gcGFyYWxsZWwgYWNyb3Nz
IGFsbCBpbmRpY2VzLg0KPiA+PiAtIG1lcmdlIHRoZSByZXN1bHRzIGluIHlvdXIgb3duIGNvZGUg
dXNpbmcgYW4gZWZmaWNpZW50IG1lcmdpbmcNCj4gYWxnb3JpdGhtLg0KPiA+Pg0KPiA+PiBSZWdh
cmRzLA0KPiA+PiBEYW4NCj4gPj4NCj4gPj4NCj4gPj4NCj4gPj4NCj4gPj4gLS0tLS1PcmlnaW5h
bCBNZXNzYWdlLS0tLS0NCj4gPj4gRnJvbTogU2hlbGx5X1NpbmdoIFttYWlsdG86U2hlbGx5X1Np
bmdoQGluZm9zeXMuY29tXQ0KPiA+PiBTZW50OiBUdWVzZGF5LCBBdWd1c3QgMTAsIDIwMTAgODoy
MCBBTQ0KPiA+PiBUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQo+ID4+IFN1YmplY3Q6
IFJFOiBTY2FsaW5nIEx1Y2VuZSB0byAxYmxuIGRvY3MNCj4gPj4NCj4gPj4gTm8gc29ydC4gSSB3
aWxsIG5lZWQgcmVsZXZhbmNlIGJhc2VkIG9uIFRGLiBJZiBJIHNoYXJkLCBJIHdpbGwgaGF2ZSB0
bw0KPiBzZWFyY2ggaW4gYWwgaW5kaWNlcy4NCj4gPj4NCj4gPj4gLS0tLS1PcmlnaW5hbCBNZXNz
YWdlLS0tLS0NCj4gPj4gRnJvbTogYW5zaHVtLmd1cHRhQG5hdWtyaS5jb20gW21haWx0bzphbnNo
dW1nQGdtYWlsLmNvbV0NCj4gPj4gU2VudDogVHVlc2RheSwgQXVndXN0IDEwLCAyMDEwIDE6NTQg
UE0NCj4gPj4gVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KPiA+PiBTdWJqZWN0OiBS
ZTogU2NhbGluZyBMdWNlbmUgdG8gMWJsbiBkb2NzDQo+ID4+DQo+ID4+IFdvdWxkIGxpa2UgdG8g
a25vdywgYXJlIHlvdSB1c2luZyBhIHBhcnRpY3VsYXIgdHlwZSBvZiBzb3J0PyBEbyB5b3UgbmVl
ZA0KPiB0byBzb3J0IG9uIHJlbGV2YW5jZT8gQ2FuIHlvdSBzaGFyZCBhbmQgcmVzdHJpY3QgeW91
ciBzZWFyY2ggdG8gYSBsaW1pdGVkDQo+IHNldCBvZiBpbmRleGVzIGZ1bmN0aW9uYWxseT8NCj4g
Pj4NCj4gPj4gLS0NCj4gPj4gQW5zaHVtDQo+ID4+IGh0dHA6Ly9ibG9nLmFuc2h1bWd1cHRhLm5l
dA0KPiA+Pg0KPiA+PiBTZW50IGZyb20gQmxhY2tCZXJyeShyKQ0KPiA+Pg0KPiA+PiAtLS0tLU9y
aWdpbmFsIE1lc3NhZ2UtLS0tLQ0KPiA+PiBGcm9tOiBTaGVsbHlfU2luZ2ggPFNoZWxseV9TaW5n
aEBpbmZvc3lzLmNvbT4NCj4gPj4gRGF0ZTogVHVlLCAxMCBBdWcgMjAxMCAxMzozMTozOA0KPiA+
PiBUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnPGphdmEtdXNlckBsdWNlbmUuYXBhY2hl
Lm9yZz4NCj4gPj4gUmVwbHktVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KPiA+PiBT
dWJqZWN0OiBSRTogU2NhbGluZyBMdWNlbmUgdG8gMWJsbiBkb2NzDQo+ID4+DQo+ID4+IEhpIEFu
c2h1bSwNCj4gPj4NCj4gPj4gSSBhbSBhbHJlYWR5IHJ1bm5pbmcgd2l0aCB0aGUgJ3NldENvbXBv
dW5kRmlsZScgb3B0aW9uIG9mZi4NCj4gPj4gQW5kIHRoYW5rcyBmb3IgcG9pbnRpbmcgb3V0IG1l
cmdlRmFjdG9yLiBJIGhhZCB0cmllZCBhIGhpZ2hlcg0KPiBtZXJnZUZhY3RvciBjb3VwbGUgb2Yg
ZGF5cyBhZ28sIGJ1dCBnb3QgYW4gT09NLCBzbyBJIGRpc2NhcmRlZCBpdC4gTGF0ZXIgSQ0KPiBm
aWd1cmVkIHRoYXQgT09NIHdhcyBiZWNhdXNlIG1heE1lcmdlRG9jcyB3YXMgdW5saW1pdGVkIGFu
ZCBJIHdhcyB1c2luZw0KPiBNTWFwLiBVIHIgcmlndCwgSSBzaG91bGQgdHJ5IGEgaGlnaGVyIG1l
cmdlRmFjdG9yLg0KPiA+Pg0KPiA+PiBXaXRoIHJlZ2FyZHMgdG8gdGhlIG11bHRpdGhyZWFkZWQg
YXBwcm9hY2gsIEkgd2FzIGNvbnNpZGVyaW5nIGNyZWF0aW5nDQo+IDEwIGRpZmZlcmVudCB0aHJl
YWRzIGVhY2ggaW5kZXhpbmcgMTAwbWxuIGRvY3MgY291cGxlZCB3aXRoIGEgTXVsdGlzZWFyY2hl
cg0KPiB0byB3aGljaCBJIHdpbGwgZmVlZCB0aGVzZSAxMCBpbmRpY2VzLiBEbyB5b3UgdGhpbmsg
dGhpcyB3aWxsIGltcHJvdmUNCj4gcGVyZm9ybWFuY2UuDQo+ID4+DQo+ID4+IEFuZCBqdXN0IEZZ
SSwgSSBoYXZlIGxhdGVzdCByZWFkaW5nIGZvciAxIGJsbiBkb2NzLiBJbmRleGluZyB0aW1lIGlz
IDINCj4gaHJzIGFuZCBzZWFyY2ggdGltZSBpcyAxNSBzZWNzLi4gSSBjYW4gbGl2ZSB3aXRoIGlu
ZGV4aW5nIHRpbWUgYnV0IHRoZQ0KPiBzZWFyY2ggdGltZSBpcyBoaWdobHkgdW5hY2NlcHRhYmxl
Lg0KPiA+Pg0KPiA+PiBIZWxwIGFnYWluLg0KPiA+Pg0KPiA+PiAtLS0tLU9yaWdpbmFsIE1lc3Nh
Z2UtLS0tLQ0KPiA+PiBGcm9tOiBBbnNodW0gW21haWx0bzphbnNodW1nQGdtYWlsLmNvbV0NCj4g
Pj4gU2VudDogVHVlc2RheSwgQXVndXN0IDEwLCAyMDEwIDEyOjU1IFBNDQo+ID4+IFRvOiBqYXZh
LXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNCj4gPj4gU3ViamVjdDogUmU6IFNjYWxpbmcgTHVjZW5l
IHRvIDFibG4gZG9jcw0KPiA+Pg0KPiA+PiBIaSBTaGVsbHksDQo+ID4+IFRoYXQgc2VlbXMgbGlr
ZSBhIHJlYXNvbmFibGUgZGF0YSBzZXQgc2l6ZS4gSSdkIHN1Z2dlc3QgeW91IGluY3JlYXNlDQo+
IHlvdXINCj4gPj4gbWVyZ2VGYWN0b3IgYXMgYSBtZXJnZUZhY3RvciBvZiAxMCBzYXlzLCB5b3Ug
YXJlIG9ubHkgYnVmZmVyaW5nIDEwIGRvY3MNCj4gaW4NCj4gPj4gbWVtb3J5IGJlZm9yZSB3cml0
aW5nIGl0IHRvIGEgZmlsZSAoYW5kIGluY3VycmluZyBJL08pLiBZb3UgY291bGQNCj4gYWN0dWFs
bHkNCj4gPj4gZmx1c2ggYnkgUkFNIHVzYWdlIGluc3RlYWQgb2YgYSBEb2MgY291bnQuIFR1cm4g
b2ZmIHVzaW5nIHRoZSBDb21wb3VuZA0KPiBmaWxlDQo+ID4+IHN0cnVjdHVyZSBmb3IgaW5kZXhp
bmcgYXMgaXQgZ2VuZXJhbGx5IHRha2VzIG1vcmUgdGltZSBjcmVhdGluZyBhIGNmcw0KPiBpbmRl
eC4NCj4gPj4NCj4gPj4gUGx1cyB0aGUgdGltZSB3b3VsZCBub3QgZ3JvdyBsaW5lYXJseSBhcyB0
aGUgbGFyZ2VyIHRoZSBzaXplIG9mIHNlZ21lbnRzDQo+ID4+IGdldCwgdGhlIG1vcmUgdGltZSBp
dCdkIHRha2UgdG8gYWRkIG1vcmUgZG9jcyBhbmQgbWVyZ2UgdGhvc2UgdG9nZXRoZXINCj4gPj4g
aW50ZXJtaXR0ZW50bHkuDQo+ID4+IFlvdSBtYXkgYWxzbyB1c2UgYSBtdWx0aXRocmVhZGVkIGFw
cHJvYWNoIGluIGNhc2UgcmVhZGluZyB0aGUgc291cmNlDQo+IHRha2VzDQo+ID4+IHRpbWUgaW4g
eW91ciBjYXNlLCB0aG91Z2gsIHRoZSBpbmRleHdyaXRlciB3b3VsZCBoYXZlIHRvIGJlIHNoYXJl
ZCBhbW9uZw0KPiBhbGwNCj4gPj4gdGhyZWFkcy4NCj4gPj4NCj4gPj4gLS0NCj4gPj4gQW5zaHVt
IEd1cHRhDQo+ID4+IGh0dHA6Ly9haS1jYWZlLmJsb2dzcG90LmNvbQ0KPiA+Pg0KPiA+Pg0KPiA+
PiBPbiBUdWUsIEF1ZyAxMCwgMjAxMCBhdCAxMjoyNCBQTSwgU2hlbGx5X1NpbmdoIDwNCj4gU2hl
bGx5X1NpbmdoQGluZm9zeXMuY29tPndyb3RlOg0KPiA+Pg0KPiA+Pj4gSGksDQo+ID4+Pg0KPiA+
Pj4gSSBhbSBkZXZlbG9waW5nIGFuIGFwcGxpY2F0aW9uIHdoaWNoIHVzZXMgTHVjZW5lIGZvciBp
bmRleGluZyBhbmQNCj4gc2VhcmNoaW5nDQo+ID4+PiAxIGJsbiBkb2N1bWVudHMuICh0aGUgZG9j
dW1lbnQgc2l6ZSBpcyB2ZXJ5IHNtYWxsIHRob3VnaC4gRWFjaCBkb2N1bWVudA0KPiBoYXMNCj4g
Pj4+IGEgc2luZ2xlIGZpZWxkIG9mIDUtMTAgd29yZHM7IHNvIEkgYmVsaWV2ZSB0aGF0IG15IGRh
dGEgc2l6ZSBpcyB3aXRoaW4NCj4gdGhlDQo+ID4+PiB0ZXN0ZWQgbGltaXRzKS4NCj4gPj4+DQo+
ID4+PiBJIGFtIHVzaW5nIHRoZSBmb2xsb3dpbmcgY29uZmlndXJhdGlvbjoNCj4gPj4+IDEuICAg
ICAgMS41IGdpZyBSQU0gdG8gdGhlIGp2bQ0KPiA+Pj4gMi4gICAgICAxMDBHQiBkaXNrIHNwYWNl
Lg0KPiA+Pj4gMy4gICAgICBJbmRleCBjcmVhdGlvbiB0dW5pbmcgZmFjdG9yczoNCj4gPj4+IGEu
ICAgICAgbWVyZ2VGYWN0b3IgPSAxMA0KPiA+Pj4gYi4gICAgICBtYXhGaWVsZExlbmd0aCA9IDEw
DQo+ID4+PiBjLiAgICAgIG1heE1lcmdlRG9jcyA9IDUwMDAwMDAgKGlmIEkgdHJ5IHdpdGggYSBs
YXJnZXIgdmFsdWUsIEkgZ2V0IGFuDQo+ID4+PiBvdXQtb2YtbWVtb3J5KQ0KPiA+Pj4NCj4gPj4+
IFdpdGggdGhlc2Ugc2V0dGluZ3MsIEkgYW0gYWJsZSB0byBjcmVhdGUgYW4gaW5kZXggb2YgMTAw
IG1pbGxpb24gZG9jcw0KPiAoMTANCj4gPj4+IHBvdyA4KSAgaW4gMTUgbWlucyBjb25zdW1pbmcg
YSBkaXNrIHNwYWNlIG9mIDIuNWdiLiBXaGljaCBpcyBxdWl0ZQ0KPiA+Pj4gc2F0aXNmYWN0b3J5
IGZvciBtZSwgYnV0IG5ldmVydGhlbGVzcywgSSB3YW50IHRvIGtub3cgd2hhdCBlbHNlIGNhbiBi
ZQ0KPiBkb25lDQo+ID4+PiB0byB0dW5lIGl0IGZ1cnRoZXIuIFBsZWFzZSBoZWxwLg0KPiA+Pj4g
QWxzbywgd2l0aCB0aGVzZSBzZXR0aW5ncywgY2FuIEkgZXhwZWN0IHRoZSB0aW1lIGFuZCBzaXpl
IHRvIGdyb3cNCj4gbGluZWFybHkNCj4gPj4+IGZvciAxYmxuICgxMCBwb3cgOSkgZG9jdW1lbnRz
Pw0KPiA+Pj4NCj4gPj4+IFRoYW5rcyBhbmQgUmVnYXJkcywNCj4gPj4+DQo+ID4+PiBTaGVsbHkg
U2luZ2gNCj4gPj4+IENlbnRlciBGb3IgS05vd2xlZGdlIERyaXZlbiBJbmZvcm1hdGlvbiBTeXN0
ZW1zLCBJbmZvc3lzDQo+ID4+PiBFbWFpbDogc2hlbGx5X3NpbmdoQGluZm9zeXMuY29tPG1haWx0
bzpzaGVsbHlfc2luZ2hAaW5mb3N5cy5jb20+DQo+ID4+PiBQaG9uZTogKE0pIDkxIDk5MiAzNjkg
NzIwMCwgKFZvSVApMjAyMjk3ODYyMg0KPiA+Pj4NCj4gPj4+DQo+ID4+Pg0KPiA+Pj4NCj4gPj4N
Cj4gPj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tDQo+ID4+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNl
ci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KPiA+PiBGb3IgYWRkaXRpb25hbCBjb21t
YW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KPiA+Pg0KPiA+
Pg0KPiA+PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4gPj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11
c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+ID4+IEZvciBhZGRpdGlvbmFsIGNv
bW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+ID4+DQo+
ID4+DQo+ID4+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KPiA+PiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZh
LXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4gPj4gRm9yIGFkZGl0aW9uYWwg
Y29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCj4gPj4N
Cj4gPj4NCj4gPg0KPiA+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KPiA+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6
IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KPiA+IEZvciBhZGRpdGlv
bmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+
ID4NCj4gPg0KPg0KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2
YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+IEZvciBhZGRpdGlvbmFsIGNv
bW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+DQo+DQo+
ICoqKioqKioqKioqKioqKiogQ0FVVElPTiAtIERpc2NsYWltZXIgKioqKioqKioqKioqKioqKioN
Cj4gVGhpcyBlLW1haWwgY29udGFpbnMgUFJJVklMRUdFRCBBTkQgQ09ORklERU5USUFMIElORk9S
TUFUSU9OIGludGVuZGVkDQo+IHNvbGVseQ0KPiBmb3IgdGhlIHVzZSBvZiB0aGUgYWRkcmVzc2Vl
KHMpLiBJZiB5b3UgYXJlIG5vdCB0aGUgaW50ZW5kZWQgcmVjaXBpZW50LA0KPiBwbGVhc2UNCj4g
bm90aWZ5IHRoZSBzZW5kZXIgYnkgZS1tYWlsIGFuZCBkZWxldGUgdGhlIG9yaWdpbmFsIG1lc3Nh
Z2UuIEZ1cnRoZXIsIHlvdQ0KPiBhcmUgbm90DQo+IHRvIGNvcHksIGRpc2Nsb3NlLCBvciBkaXN0
cmlidXRlIHRoaXMgZS1tYWlsIG9yIGl0cyBjb250ZW50cyB0byBhbnkgb3RoZXINCj4gcGVyc29u
IGFuZA0KPiBhbnkgc3VjaCBhY3Rpb25zIGFyZSB1bmxhd2Z1bC4gVGhpcyBlLW1haWwgbWF5IGNv
bnRhaW4gdmlydXNlcy4gSW5mb3N5cyBoYXMNCj4gdGFrZW4NCj4gZXZlcnkgcmVhc29uYWJsZSBw
cmVjYXV0aW9uIHRvIG1pbmltaXplIHRoaXMgcmlzaywgYnV0IGlzIG5vdCBsaWFibGUgZm9yDQo+
IGFueSBkYW1hZ2UNCj4geW91IG1heSBzdXN0YWluIGFzIGEgcmVzdWx0IG9mIGFueSB2aXJ1cyBp
biB0aGlzIGUtbWFpbC4gWW91IHNob3VsZCBjYXJyeQ0KPiBvdXQgeW91cg0KPiBvd24gdmlydXMg
Y2hlY2tzIGJlZm9yZSBvcGVuaW5nIHRoZSBlLW1haWwgb3IgYXR0YWNobWVudC4gSW5mb3N5cyBy
ZXNlcnZlcw0KPiB0aGUNCj4gcmlnaHQgdG8gbW9uaXRvciBhbmQgcmV2aWV3IHRoZSBjb250ZW50
IG9mIGFsbCBtZXNzYWdlcyBzZW50IHRvIG9yIGZyb20NCj4gdGhpcyBlLW1haWwNCj4gYWRkcmVz
cy4gTWVzc2FnZXMgc2VudCB0byBvciBmcm9tIHRoaXMgZS1tYWlsIGFkZHJlc3MgbWF5IGJlIHN0
b3JlZCBvbiB0aGUNCj4gSW5mb3N5cyBlLW1haWwgc3lzdGVtLg0KPiAqKipJTkZPU1lTKioqKioq
KiogRW5kIG9mIERpc2NsYWltZXIgKioqKioqKipJTkZPU1lTKioqDQo+DQo=


From java-user-return-46989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 11 05:08:49 2010
Return-Path: <java-user-return-46989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51111 invoked from network); 11 Aug 2010 05:08:49 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Aug 2010 05:08:49 -0000
Received: (qmail 3721 invoked by uid 500); 11 Aug 2010 05:08:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3483 invoked by uid 500); 11 Aug 2010 05:08:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3475 invoked by uid 99); 11 Aug 2010 05:08:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Aug 2010 05:08:43 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Aug 2010 05:08:39 +0000
Received: by wyb35 with SMTP id 35so11809431wyb.35
        for <java-user@lucene.apache.org>; Tue, 10 Aug 2010 22:08:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=L8iXf7RDriwwYnP0Gx6F2GKojNskblpTRfV/L+Lawx8=;
        b=rsi2wKRP+LnD5AjGav3AtZ+KkM533ZQ2Iu0On6/2HH1Rcs6fYv4n4TwSPu5CU+Sbus
         NThyD0V2XiONIgSaQW80auRDnrhDI0PvOquWLFOY85NuHvN6v0djy9c8zmcab/tniVbx
         CFrgfYzdi4I6VIcV/uFQgiNiZlNJjqKkT1GGs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=fw2cWdVvSNI9NBooRkk1drapCKJLR7tZHNCWx4QldqKzYfndEX6t/IlHXv5lOenb0l
         G6yTCiJ30/dzFqXJFmP0WhWfyMiJKyoVbb8RFBGqIJcU4IRSPwf+A94nSl5K1RerFCVv
         FLGHMZYM0Qliynzq/g04wh1bapESAyKNXd+vs=
Received: by 10.227.134.199 with SMTP id k7mr15593778wbt.51.1281503297222; 
	Tue, 10 Aug 2010 22:08:17 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.132.17 with HTTP; Tue, 10 Aug 2010 22:07:57 -0700 (PDT)
In-Reply-To: <AA27F54EFDA0CE43B33EBDB7796323740CA2660CE4@PUNITPMBX02.ad.infosys.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA2660945@PUNITPMBX02.ad.infosys.com> 
	<AANLkTi=4LLNLK-wk9frni=ay0qkEokgnr+sLLfWPyZ=8@mail.gmail.com> 
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660988@PUNITPMBX02.ad.infosys.com> 
	<528709861-1281428644-cardhu_decombobulator_blackberry.rim.net-283608400-@bda2121.bisx.produk.on.blackberry> 
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660B35@PUNITPMBX02.ad.infosys.com> 
	<3B4AEBB59588ED409ECE3CB6517C41750EC8C16BEC@exchange.windows.mmu.acquiremedia.com> 
	<AANLkTinJ=AE=+E1iyCqQxe26PSm2PgS_r-8+WMjcT_oG@mail.gmail.com> 
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660B5E@PUNITPMBX02.ad.infosys.com> 
	<AANLkTi=YuvwdGjj=RoH6A1-nUhBN14xtc2LDeqiVBqmO@mail.gmail.com> 
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660B93@PUNITPMBX02.ad.infosys.com> 
	<335122582-1281448159-cardhu_decombobulator_blackberry.rim.net-1093115328-@bda2121.bisx.produk.on.blackberry> 
	<AANLkTimNUAsXpHUvPhFjhTn4djW38gpEmWeiBt-d0nEP@mail.gmail.com> 
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660CE4@PUNITPMBX02.ad.infosys.com>
From: Anshum <anshumg@gmail.com>
Date: Wed, 11 Aug 2010 10:37:57 +0530
Message-ID: <AANLkTinKFPMtC4OYuLKp1AYVGrmTbw4pNXpa2eiEY+mp@mail.gmail.com>
Subject: Re: Scaling Lucene to 1bln docs
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016367faeebcf3aa7048d853c10

--0016367faeebcf3aa7048d853c10
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

So, you didn't really use the setRamBuffer.. ?
Any reasons for that?

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Wed, Aug 11, 2010 at 10:28 AM, Shelly_Singh <Shelly_Singh@infosys.com>wr=
ote:

> My final settings are:
> 1.      1.5 gig RAM to the jvm out of 2GB available for my desktop
> 2.      100GB disk space.
> 3.      Index creation and searching tuning factors:
>         a. mergeFactor =3D 10
>        b. maxFieldLength =3D 10
>        c. maxMergeDocs =3D 5000000
>         d. full optimize at end of index creation
>        e. readChunkSize =3D 1000000
>        f. TermInfosIndexDivisor =3D 10
>        g. NO sharding. Single Machine.
>
> But Pablo, my document is a single field document with the the field leng=
th
> being 2-5 words. So, u can probably reduce it by a factor of 100 directly=
 if
> u want to compare with regular docs.
>
> -----Original Message-----
> From: Pablo Mendes [mailto:pablomendes@gmail.com]
> Sent: Tuesday, August 10, 2010 7:22 PM
> To: java-user@lucene.apache.org
> Subject: Re: Scaling Lucene to 1bln docs
>
> Shelly,
> Do you mind sharing with the list the final settings you used for your be=
st
> results?
>
> Cheers,
> Pablo
>
> On Tue, Aug 10, 2010 at 3:49 PM, anshum.gupta@naukri.com
> <anshumg@gmail.com>wrote:
>
> > Hey Shelly,
> > If you want to get more info on lucene, I'd recommend you get a copy of
> > lucene in action 2nd Ed. It'll help you get a hang of a lot of things! =
:)
> >
> > --
> > Anshum
> > http://blog.anshumgupta.net
> >
> > Sent from BlackBerry=C2=AE
> >
> > -----Original Message-----
> > From: Shelly_Singh <Shelly_Singh@infosys.com>
> > Date: Tue, 10 Aug 2010 19:11:11
> > To: java-user@lucene.apache.org<java-user@lucene.apache.org>
> > Reply-To: java-user@lucene.apache.org
> > Subject: RE: Scaling Lucene to 1bln docs
> >
> > Hi folks,
> >
> > Thanks for the excellent support n guidance on my very first day on thi=
s
> > mailing list...
> > At end of day, I have very optimistic results. 100bln search in less th=
an
> > 1ms and the index creation time is not huge either ( close to 15
> minutes).
> >
> > I am now hitting the 1bln mark with roughly the same settings. But, I
> want
> > to understand Norms and TermFilters.
> >
> > Can someone explain, why or why not should one use each of these and wh=
at
> > tradeoffs does it have.
> >
> > Regards,
> > Shelly
> >
> > -----Original Message-----
> > From: Danil =C5=A2ORIN [mailto:torindan@gmail.com]
> > Sent: Tuesday, August 10, 2010 6:52 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: Scaling Lucene to 1bln docs
> >
> > That won't work...if you'll have something like "A Basic Crazy
> > Document E-something F-something G-something....you get the point" it
> > will go to all shards so the whole point of shards will be
> > compromised...you'll have 26 billion documents index ;)
> >
> > Looks like the only way is to search all shards.
> > Depending on available hardware (1 Azul...50 EC2), expected
> > traffic(1qps...1000qps), expected query time(10 msec ... 3 sec),
> > redundancy (it's a large dataset, I don't think you want to loose it),
> > and so on...you'll have to decide how many partitions do you want.
> >
> > It may work with 8-10, it may need 50-64. (I usually use 2^n as it's
> > easier to split each shard in 2 when index grows too much)
> >
> > On such large datasets it's a lot of tuning, custom code, and no
> > one-size-fits-all solution.
> > Lucene is just a tool (a fine one) but you need to use it wisely to
> > archive great results.
> >
> > On Tue, Aug 10, 2010 at 15:55, Shelly_Singh <Shelly_Singh@infosys.com>
> > wrote:
> > > Hmm..I get the point. But, in my application, the document is basical=
ly
> a
> > descriptive name of a particular thing. The user will search by name (o=
r
> > part of name) and I need to pull out all info pointed to by that name.
> This
> > info is externalized in a db.
> > >
> > > One option I can think of is-
> > > I can shard based on starting alphabet of any name. So, "Alan Mathur =
of
> > New Delhi" may go to shard "A". But since the name will have 'n' tokens=
,
> and
> > the user may type any one token, this will not work. I can further twea=
k
> > this such that I index the same document into multiple indices (one for
> each
> > token). So, the same document may be indexed into Shard"A", "M", "N" an=
d
> > "D".
> > > I am not able to think of another option.
> > >
> > > Comments welcome.
> > >
> > >
> > > -----Original Message-----
> > > From: Danil =C5=A2ORIN [mailto:torindan@gmail.com]
> > > Sent: Tuesday, August 10, 2010 6:11 PM
> > > To: java-user@lucene.apache.org
> > > Subject: Re: Scaling Lucene to 1bln docs
> > >
> > > I'd second that.
> > >
> > > It doesn't have to be date for sharding. Maybe every query has some
> > > specific field, like UserId or something, so you can redirect to
> > > specific shard instead of hitting all 10 indices.
> > >
> > > You have to have some kind of narrowing: searching 1bn documents with
> > > queries that may hit all documents is useless.
> > > An user won't look on more than let say 100 results (if presented
> > > properly..maybe 1000)
> > >
> > > Those fields that narrow the result set are good candidates for
> sharding
> > keys.
> > >
> > >
> > > On Tue, Aug 10, 2010 at 15:32, Dan OConnor <doconnor@acquiremedia.com=
>
> > wrote:
> > >> Shelly:
> > >>
> > >> You wouldn't necessarily have to use a multisearcher. A suggested
> > alternative is:
> > >>
> > >> - shard into 10 indices. If you need the concept of a date range
> search,
> > I would assign the documents to the shard by date, otherwise random
> > assignment is fine.
> > >> - have a pool of IndexSearchers for each index
> > >> - when a search comes in, allocate a Searcher from each index to the
> > search.
> > >> - perform the search in parallel across all indices.
> > >> - merge the results in your own code using an efficient merging
> > algorithm.
> > >>
> > >> Regards,
> > >> Dan
> > >>
> > >>
> > >>
> > >>
> > >> -----Original Message-----
> > >> From: Shelly_Singh [mailto:Shelly_Singh@infosys.com]
> > >> Sent: Tuesday, August 10, 2010 8:20 AM
> > >> To: java-user@lucene.apache.org
> > >> Subject: RE: Scaling Lucene to 1bln docs
> > >>
> > >> No sort. I will need relevance based on TF. If I shard, I will have =
to
> > search in al indices.
> > >>
> > >> -----Original Message-----
> > >> From: anshum.gupta@naukri.com [mailto:anshumg@gmail.com]
> > >> Sent: Tuesday, August 10, 2010 1:54 PM
> > >> To: java-user@lucene.apache.org
> > >> Subject: Re: Scaling Lucene to 1bln docs
> > >>
> > >> Would like to know, are you using a particular type of sort? Do you
> need
> > to sort on relevance? Can you shard and restrict your search to a limit=
ed
> > set of indexes functionally?
> > >>
> > >> --
> > >> Anshum
> > >> http://blog.anshumgupta.net
> > >>
> > >> Sent from BlackBerry(r)
> > >>
> > >> -----Original Message-----
> > >> From: Shelly_Singh <Shelly_Singh@infosys.com>
> > >> Date: Tue, 10 Aug 2010 13:31:38
> > >> To: java-user@lucene.apache.org<java-user@lucene.apache.org>
> > >> Reply-To: java-user@lucene.apache.org
> > >> Subject: RE: Scaling Lucene to 1bln docs
> > >>
> > >> Hi Anshum,
> > >>
> > >> I am already running with the 'setCompoundFile' option off.
> > >> And thanks for pointing out mergeFactor. I had tried a higher
> > mergeFactor couple of days ago, but got an OOM, so I discarded it. Late=
r
> I
> > figured that OOM was because maxMergeDocs was unlimited and I was using
> > MMap. U r rigt, I should try a higher mergeFactor.
> > >>
> > >> With regards to the multithreaded approach, I was considering creati=
ng
> > 10 different threads each indexing 100mln docs coupled with a
> Multisearcher
> > to which I will feed these 10 indices. Do you think this will improve
> > performance.
> > >>
> > >> And just FYI, I have latest reading for 1 bln docs. Indexing time is=
 2
> > hrs and search time is 15 secs.. I can live with indexing time but the
> > search time is highly unacceptable.
> > >>
> > >> Help again.
> > >>
> > >> -----Original Message-----
> > >> From: Anshum [mailto:anshumg@gmail.com]
> > >> Sent: Tuesday, August 10, 2010 12:55 PM
> > >> To: java-user@lucene.apache.org
> > >> Subject: Re: Scaling Lucene to 1bln docs
> > >>
> > >> Hi Shelly,
> > >> That seems like a reasonable data set size. I'd suggest you increase
> > your
> > >> mergeFactor as a mergeFactor of 10 says, you are only buffering 10
> docs
> > in
> > >> memory before writing it to a file (and incurring I/O). You could
> > actually
> > >> flush by RAM usage instead of a Doc count. Turn off using the Compou=
nd
> > file
> > >> structure for indexing as it generally takes more time creating a cf=
s
> > index.
> > >>
> > >> Plus the time would not grow linearly as the larger the size of
> segments
> > >> get, the more time it'd take to add more docs and merge those togeth=
er
> > >> intermittently.
> > >> You may also use a multithreaded approach in case reading the source
> > takes
> > >> time in your case, though, the indexwriter would have to be shared
> among
> > all
> > >> threads.
> > >>
> > >> --
> > >> Anshum Gupta
> > >> http://ai-cafe.blogspot.com
> > >>
> > >>
> > >> On Tue, Aug 10, 2010 at 12:24 PM, Shelly_Singh <
> > Shelly_Singh@infosys.com>wrote:
> > >>
> > >>> Hi,
> > >>>
> > >>> I am developing an application which uses Lucene for indexing and
> > searching
> > >>> 1 bln documents. (the document size is very small though. Each
> document
> > has
> > >>> a single field of 5-10 words; so I believe that my data size is
> within
> > the
> > >>> tested limits).
> > >>>
> > >>> I am using the following configuration:
> > >>> 1.      1.5 gig RAM to the jvm
> > >>> 2.      100GB disk space.
> > >>> 3.      Index creation tuning factors:
> > >>> a.      mergeFactor =3D 10
> > >>> b.      maxFieldLength =3D 10
> > >>> c.      maxMergeDocs =3D 5000000 (if I try with a larger value, I g=
et
> an
> > >>> out-of-memory)
> > >>>
> > >>> With these settings, I am able to create an index of 100 million do=
cs
> > (10
> > >>> pow 8)  in 15 mins consuming a disk space of 2.5gb. Which is quite
> > >>> satisfactory for me, but nevertheless, I want to know what else can
> be
> > done
> > >>> to tune it further. Please help.
> > >>> Also, with these settings, can I expect the time and size to grow
> > linearly
> > >>> for 1bln (10 pow 9) documents?
> > >>>
> > >>> Thanks and Regards,
> > >>>
> > >>> Shelly Singh
> > >>> Center For KNowledge Driven Information Systems, Infosys
> > >>> Email: shelly_singh@infosys.com<mailto:shelly_singh@infosys.com>
> > >>> Phone: (M) 91 992 369 7200, (VoIP)2022978622
> > >>>
> > >>>
> > >>>
> > >>>
> > >>
> > >> --------------------------------------------------------------------=
-
> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>
> > >>
> > >> --------------------------------------------------------------------=
-
> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>
> > >>
> > >> --------------------------------------------------------------------=
-
> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>
> > >>
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > **************** CAUTION - Disclaimer *****************
> > This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended
> > solely
> > for the use of the addressee(s). If you are not the intended recipient,
> > please
> > notify the sender by e-mail and delete the original message. Further, y=
ou
> > are not
> > to copy, disclose, or distribute this e-mail or its contents to any oth=
er
> > person and
> > any such actions are unlawful. This e-mail may contain viruses. Infosys
> has
> > taken
> > every reasonable precaution to minimize this risk, but is not liable fo=
r
> > any damage
> > you may sustain as a result of any virus in this e-mail. You should car=
ry
> > out your
> > own virus checks before opening the e-mail or attachment. Infosys
> reserves
> > the
> > right to monitor and review the content of all messages sent to or from
> > this e-mail
> > address. Messages sent to or from this e-mail address may be stored on
> the
> > Infosys e-mail system.
> > ***INFOSYS******** End of Disclaimer ********INFOSYS***
> >
>

--0016367faeebcf3aa7048d853c10--

From java-user-return-46990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 11 05:25:34 2010
Return-Path: <java-user-return-46990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54266 invoked from network); 11 Aug 2010 05:25:34 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Aug 2010 05:25:34 -0000
Received: (qmail 15080 invoked by uid 500); 11 Aug 2010 05:25:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14779 invoked by uid 500); 11 Aug 2010 05:25:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14771 invoked by uid 99); 11 Aug 2010 05:25:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Aug 2010 05:25:29 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [122.98.14.32] (HELO kecgate02.infosys.com) (122.98.14.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Aug 2010 05:25:25 +0000
X-TM-IMSS-Message-ID:<85d9212b000e2ab4@kecgate02.infosys.com>
Received: from blrkechub04.ad.infosys.com ([10.66.236.44]) by kecgate02.infosys.com ([122.98.14.32]) with ESMTP (TREND IMSS SMTP Service 7.0) id 85d9212b000e2ab4 ; Wed, 11 Aug 2010 10:48:15 +0530
Received: from PUNITPHUB02.ad.infosys.com (10.76.151.42) by
 blrkechub04.ad.infosys.com (10.66.236.44) with Microsoft SMTP Server (TLS) id
 8.2.176.0; Wed, 11 Aug 2010 10:54:59 +0530
Received: from PUNITPMBX02.ad.infosys.com ([10.76.151.22]) by
 PUNITPHUB02.ad.infosys.com ([10.76.151.42]) with mapi; Wed, 11 Aug 2010
 10:54:58 +0530
From: Shelly_Singh <Shelly_Singh@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 11 Aug 2010 10:54:57 +0530
Subject: RE: Scaling Lucene to 1bln docs
Thread-Topic: Scaling Lucene to 1bln docs
Thread-Index: Acs5E0xMnWE6HTWyTVqVfezWga4SzwAAdRQQ
Message-ID: <AA27F54EFDA0CE43B33EBDB7796323740CA2660D0B@PUNITPMBX02.ad.infosys.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA2660945@PUNITPMBX02.ad.infosys.com>
 	<AANLkTi=4LLNLK-wk9frni=ay0qkEokgnr+sLLfWPyZ=8@mail.gmail.com>
 	<AA27F54EFDA0CE43B33EBDB7796323740CA2660988@PUNITPMBX02.ad.infosys.com>
 	<528709861-1281428644-cardhu_decombobulator_blackberry.rim.net-283608400-@bda2121.bisx.produk.on.blackberry>
 	<AA27F54EFDA0CE43B33EBDB7796323740CA2660B35@PUNITPMBX02.ad.infosys.com>
 	<3B4AEBB59588ED409ECE3CB6517C41750EC8C16BEC@exchange.windows.mmu.acquiremedia.com>
 	<AANLkTinJ=AE=+E1iyCqQxe26PSm2PgS_r-8+WMjcT_oG@mail.gmail.com>
 	<AA27F54EFDA0CE43B33EBDB7796323740CA2660B5E@PUNITPMBX02.ad.infosys.com>
 	<AANLkTi=YuvwdGjj=RoH6A1-nUhBN14xtc2LDeqiVBqmO@mail.gmail.com>
 	<AA27F54EFDA0CE43B33EBDB7796323740CA2660B93@PUNITPMBX02.ad.infosys.com>
 	<335122582-1281448159-cardhu_decombobulator_blackberry.rim.net-1093115328-@bda2121.bisx.produk.on.blackberry>
 	<AANLkTimNUAsXpHUvPhFjhTn4djW38gpEmWeiBt-d0nEP@mail.gmail.com>
 	<AA27F54EFDA0CE43B33EBDB7796323740CA2660CE4@PUNITPMBX02.ad.infosys.com>
 <AANLkTinKFPMtC4OYuLKp1AYVGrmTbw4pNXpa2eiEY+mp@mail.gmail.com>
In-Reply-To: <AANLkTinKFPMtC4OYuLKp1AYVGrmTbw4pNXpa2eiEY+mp@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0

SSBleHBlcmltZW50ZWQgd2l0aCBpdCwgYnV0IHNvbWVob3cgKEkgYW0gbm90IGNvbnZpbmNlZCB3
aHkpIEkgZ290IHBvb3JlciBpbmRleGluZyBwZXJmb3JtYW5jZSB3aXRoIGhpZ2hlciBSQU0uIFRo
YXQgd2FzIGFuIGluaXRpYWwgZXhwZXJpbWVudCBhbmQgSSBkaWQgbm90IGRpZyBpbnRvIGl0LiBC
dXQsIGZvciB0aW1lIGJlaW5nLCBJIGhhdmUgYWNjZXB0YWJsZSBpbmRleGluZyBzcGVlZCBzbyBJ
IGFtIG9ubHkgZm9jdXNpbmcgb24gcmVkdWNpbmcgc2VhcmNoIHRpbWUuDQoNClRoYW5rcyBhbmQg
UmVnYXJkcywNCg0KU2hlbGx5IFNpbmdoDQpDZW50ZXIgRm9yIEtOb3dsZWRnZSBEcml2ZW4gSW5m
b3JtYXRpb24gU3lzdGVtcywgSW5mb3N5cw0KRW1haWw6IHNoZWxseV9zaW5naEBpbmZvc3lzLmNv
bQ0KUGhvbmU6IChNKSA5MSA5OTIgMzY5IDcyMDAsIChWb0lQKTIwMjI5Nzg2MjINCg0KDQotLS0t
LU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KRnJvbTogQW5zaHVtIFttYWlsdG86YW5zaHVtZ0BnbWFp
bC5jb21dIA0KU2VudDogV2VkbmVzZGF5LCBBdWd1c3QgMTEsIDIwMTAgMTA6MzggQU0NClRvOiBq
YXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNClN1YmplY3Q6IFJlOiBTY2FsaW5nIEx1Y2VuZSB0
byAxYmxuIGRvY3MNCg0KU28sIHlvdSBkaWRuJ3QgcmVhbGx5IHVzZSB0aGUgc2V0UmFtQnVmZmVy
Li4gPw0KQW55IHJlYXNvbnMgZm9yIHRoYXQ/DQoNCi0tDQpBbnNodW0gR3VwdGENCmh0dHA6Ly9h
aS1jYWZlLmJsb2dzcG90LmNvbQ0KDQoNCk9uIFdlZCwgQXVnIDExLCAyMDEwIGF0IDEwOjI4IEFN
LCBTaGVsbHlfU2luZ2ggPFNoZWxseV9TaW5naEBpbmZvc3lzLmNvbT53cm90ZToNCg0KPiBNeSBm
aW5hbCBzZXR0aW5ncyBhcmU6DQo+IDEuICAgICAgMS41IGdpZyBSQU0gdG8gdGhlIGp2bSBvdXQg
b2YgMkdCIGF2YWlsYWJsZSBmb3IgbXkgZGVza3RvcA0KPiAyLiAgICAgIDEwMEdCIGRpc2sgc3Bh
Y2UuDQo+IDMuICAgICAgSW5kZXggY3JlYXRpb24gYW5kIHNlYXJjaGluZyB0dW5pbmcgZmFjdG9y
czoNCj4gICAgICAgICBhLiBtZXJnZUZhY3RvciA9IDEwDQo+ICAgICAgICBiLiBtYXhGaWVsZExl
bmd0aCA9IDEwDQo+ICAgICAgICBjLiBtYXhNZXJnZURvY3MgPSA1MDAwMDAwDQo+ICAgICAgICAg
ZC4gZnVsbCBvcHRpbWl6ZSBhdCBlbmQgb2YgaW5kZXggY3JlYXRpb24NCj4gICAgICAgIGUuIHJl
YWRDaHVua1NpemUgPSAxMDAwMDAwDQo+ICAgICAgICBmLiBUZXJtSW5mb3NJbmRleERpdmlzb3Ig
PSAxMA0KPiAgICAgICAgZy4gTk8gc2hhcmRpbmcuIFNpbmdsZSBNYWNoaW5lLg0KPg0KPiBCdXQg
UGFibG8sIG15IGRvY3VtZW50IGlzIGEgc2luZ2xlIGZpZWxkIGRvY3VtZW50IHdpdGggdGhlIHRo
ZSBmaWVsZCBsZW5ndGgNCj4gYmVpbmcgMi01IHdvcmRzLiBTbywgdSBjYW4gcHJvYmFibHkgcmVk
dWNlIGl0IGJ5IGEgZmFjdG9yIG9mIDEwMCBkaXJlY3RseSBpZg0KPiB1IHdhbnQgdG8gY29tcGFy
ZSB3aXRoIHJlZ3VsYXIgZG9jcy4NCj4NCj4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCj4g
RnJvbTogUGFibG8gTWVuZGVzIFttYWlsdG86cGFibG9tZW5kZXNAZ21haWwuY29tXQ0KPiBTZW50
OiBUdWVzZGF5LCBBdWd1c3QgMTAsIDIwMTAgNzoyMiBQTQ0KPiBUbzogamF2YS11c2VyQGx1Y2Vu
ZS5hcGFjaGUub3JnDQo+IFN1YmplY3Q6IFJlOiBTY2FsaW5nIEx1Y2VuZSB0byAxYmxuIGRvY3MN
Cj4NCj4gU2hlbGx5LA0KPiBEbyB5b3UgbWluZCBzaGFyaW5nIHdpdGggdGhlIGxpc3QgdGhlIGZp
bmFsIHNldHRpbmdzIHlvdSB1c2VkIGZvciB5b3VyIGJlc3QNCj4gcmVzdWx0cz8NCj4NCj4gQ2hl
ZXJzLA0KPiBQYWJsbw0KPg0KPiBPbiBUdWUsIEF1ZyAxMCwgMjAxMCBhdCAzOjQ5IFBNLCBhbnNo
dW0uZ3VwdGFAbmF1a3JpLmNvbQ0KPiA8YW5zaHVtZ0BnbWFpbC5jb20+d3JvdGU6DQo+DQo+ID4g
SGV5IFNoZWxseSwNCj4gPiBJZiB5b3Ugd2FudCB0byBnZXQgbW9yZSBpbmZvIG9uIGx1Y2VuZSwg
SSdkIHJlY29tbWVuZCB5b3UgZ2V0IGEgY29weSBvZg0KPiA+IGx1Y2VuZSBpbiBhY3Rpb24gMm5k
IEVkLiBJdCdsbCBoZWxwIHlvdSBnZXQgYSBoYW5nIG9mIGEgbG90IG9mIHRoaW5ncyEgOikNCj4g
Pg0KPiA+IC0tDQo+ID4gQW5zaHVtDQo+ID4gaHR0cDovL2Jsb2cuYW5zaHVtZ3VwdGEubmV0DQo+
ID4NCj4gPiBTZW50IGZyb20gQmxhY2tCZXJyecKuDQo+ID4NCj4gPiAtLS0tLU9yaWdpbmFsIE1l
c3NhZ2UtLS0tLQ0KPiA+IEZyb206IFNoZWxseV9TaW5naCA8U2hlbGx5X1NpbmdoQGluZm9zeXMu
Y29tPg0KPiA+IERhdGU6IFR1ZSwgMTAgQXVnIDIwMTAgMTk6MTE6MTENCj4gPiBUbzogamF2YS11
c2VyQGx1Y2VuZS5hcGFjaGUub3JnPGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZz4NCj4gPiBS
ZXBseS1UbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQo+ID4gU3ViamVjdDogUkU6IFNj
YWxpbmcgTHVjZW5lIHRvIDFibG4gZG9jcw0KPiA+DQo+ID4gSGkgZm9sa3MsDQo+ID4NCj4gPiBU
aGFua3MgZm9yIHRoZSBleGNlbGxlbnQgc3VwcG9ydCBuIGd1aWRhbmNlIG9uIG15IHZlcnkgZmly
c3QgZGF5IG9uIHRoaXMNCj4gPiBtYWlsaW5nIGxpc3QuLi4NCj4gPiBBdCBlbmQgb2YgZGF5LCBJ
IGhhdmUgdmVyeSBvcHRpbWlzdGljIHJlc3VsdHMuIDEwMGJsbiBzZWFyY2ggaW4gbGVzcyB0aGFu
DQo+ID4gMW1zIGFuZCB0aGUgaW5kZXggY3JlYXRpb24gdGltZSBpcyBub3QgaHVnZSBlaXRoZXIg
KCBjbG9zZSB0byAxNQ0KPiBtaW51dGVzKS4NCj4gPg0KPiA+IEkgYW0gbm93IGhpdHRpbmcgdGhl
IDFibG4gbWFyayB3aXRoIHJvdWdobHkgdGhlIHNhbWUgc2V0dGluZ3MuIEJ1dCwgSQ0KPiB3YW50
DQo+ID4gdG8gdW5kZXJzdGFuZCBOb3JtcyBhbmQgVGVybUZpbHRlcnMuDQo+ID4NCj4gPiBDYW4g
c29tZW9uZSBleHBsYWluLCB3aHkgb3Igd2h5IG5vdCBzaG91bGQgb25lIHVzZSBlYWNoIG9mIHRo
ZXNlIGFuZCB3aGF0DQo+ID4gdHJhZGVvZmZzIGRvZXMgaXQgaGF2ZS4NCj4gPg0KPiA+IFJlZ2Fy
ZHMsDQo+ID4gU2hlbGx5DQo+ID4NCj4gPiAtLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KPiA+
IEZyb206IERhbmlsIMWiT1JJTiBbbWFpbHRvOnRvcmluZGFuQGdtYWlsLmNvbV0NCj4gPiBTZW50
OiBUdWVzZGF5LCBBdWd1c3QgMTAsIDIwMTAgNjo1MiBQTQ0KPiA+IFRvOiBqYXZhLXVzZXJAbHVj
ZW5lLmFwYWNoZS5vcmcNCj4gPiBTdWJqZWN0OiBSZTogU2NhbGluZyBMdWNlbmUgdG8gMWJsbiBk
b2NzDQo+ID4NCj4gPiBUaGF0IHdvbid0IHdvcmsuLi5pZiB5b3UnbGwgaGF2ZSBzb21ldGhpbmcg
bGlrZSAiQSBCYXNpYyBDcmF6eQ0KPiA+IERvY3VtZW50IEUtc29tZXRoaW5nIEYtc29tZXRoaW5n
IEctc29tZXRoaW5nLi4uLnlvdSBnZXQgdGhlIHBvaW50IiBpdA0KPiA+IHdpbGwgZ28gdG8gYWxs
IHNoYXJkcyBzbyB0aGUgd2hvbGUgcG9pbnQgb2Ygc2hhcmRzIHdpbGwgYmUNCj4gPiBjb21wcm9t
aXNlZC4uLnlvdSdsbCBoYXZlIDI2IGJpbGxpb24gZG9jdW1lbnRzIGluZGV4IDspDQo+ID4NCj4g
PiBMb29rcyBsaWtlIHRoZSBvbmx5IHdheSBpcyB0byBzZWFyY2ggYWxsIHNoYXJkcy4NCj4gPiBE
ZXBlbmRpbmcgb24gYXZhaWxhYmxlIGhhcmR3YXJlICgxIEF6dWwuLi41MCBFQzIpLCBleHBlY3Rl
ZA0KPiA+IHRyYWZmaWMoMXFwcy4uLjEwMDBxcHMpLCBleHBlY3RlZCBxdWVyeSB0aW1lKDEwIG1z
ZWMgLi4uIDMgc2VjKSwNCj4gPiByZWR1bmRhbmN5IChpdCdzIGEgbGFyZ2UgZGF0YXNldCwgSSBk
b24ndCB0aGluayB5b3Ugd2FudCB0byBsb29zZSBpdCksDQo+ID4gYW5kIHNvIG9uLi4ueW91J2xs
IGhhdmUgdG8gZGVjaWRlIGhvdyBtYW55IHBhcnRpdGlvbnMgZG8geW91IHdhbnQuDQo+ID4NCj4g
PiBJdCBtYXkgd29yayB3aXRoIDgtMTAsIGl0IG1heSBuZWVkIDUwLTY0LiAoSSB1c3VhbGx5IHVz
ZSAyXm4gYXMgaXQncw0KPiA+IGVhc2llciB0byBzcGxpdCBlYWNoIHNoYXJkIGluIDIgd2hlbiBp
bmRleCBncm93cyB0b28gbXVjaCkNCj4gPg0KPiA+IE9uIHN1Y2ggbGFyZ2UgZGF0YXNldHMgaXQn
cyBhIGxvdCBvZiB0dW5pbmcsIGN1c3RvbSBjb2RlLCBhbmQgbm8NCj4gPiBvbmUtc2l6ZS1maXRz
LWFsbCBzb2x1dGlvbi4NCj4gPiBMdWNlbmUgaXMganVzdCBhIHRvb2wgKGEgZmluZSBvbmUpIGJ1
dCB5b3UgbmVlZCB0byB1c2UgaXQgd2lzZWx5IHRvDQo+ID4gYXJjaGl2ZSBncmVhdCByZXN1bHRz
Lg0KPiA+DQo+ID4gT24gVHVlLCBBdWcgMTAsIDIwMTAgYXQgMTU6NTUsIFNoZWxseV9TaW5naCA8
U2hlbGx5X1NpbmdoQGluZm9zeXMuY29tPg0KPiA+IHdyb3RlOg0KPiA+ID4gSG1tLi5JIGdldCB0
aGUgcG9pbnQuIEJ1dCwgaW4gbXkgYXBwbGljYXRpb24sIHRoZSBkb2N1bWVudCBpcyBiYXNpY2Fs
bHkNCj4gYQ0KPiA+IGRlc2NyaXB0aXZlIG5hbWUgb2YgYSBwYXJ0aWN1bGFyIHRoaW5nLiBUaGUg
dXNlciB3aWxsIHNlYXJjaCBieSBuYW1lIChvcg0KPiA+IHBhcnQgb2YgbmFtZSkgYW5kIEkgbmVl
ZCB0byBwdWxsIG91dCBhbGwgaW5mbyBwb2ludGVkIHRvIGJ5IHRoYXQgbmFtZS4NCj4gVGhpcw0K
PiA+IGluZm8gaXMgZXh0ZXJuYWxpemVkIGluIGEgZGIuDQo+ID4gPg0KPiA+ID4gT25lIG9wdGlv
biBJIGNhbiB0aGluayBvZiBpcy0NCj4gPiA+IEkgY2FuIHNoYXJkIGJhc2VkIG9uIHN0YXJ0aW5n
IGFscGhhYmV0IG9mIGFueSBuYW1lLiBTbywgIkFsYW4gTWF0aHVyIG9mDQo+ID4gTmV3IERlbGhp
IiBtYXkgZ28gdG8gc2hhcmQgIkEiLiBCdXQgc2luY2UgdGhlIG5hbWUgd2lsbCBoYXZlICduJyB0
b2tlbnMsDQo+IGFuZA0KPiA+IHRoZSB1c2VyIG1heSB0eXBlIGFueSBvbmUgdG9rZW4sIHRoaXMg
d2lsbCBub3Qgd29yay4gSSBjYW4gZnVydGhlciB0d2Vhaw0KPiA+IHRoaXMgc3VjaCB0aGF0IEkg
aW5kZXggdGhlIHNhbWUgZG9jdW1lbnQgaW50byBtdWx0aXBsZSBpbmRpY2VzIChvbmUgZm9yDQo+
IGVhY2gNCj4gPiB0b2tlbikuIFNvLCB0aGUgc2FtZSBkb2N1bWVudCBtYXkgYmUgaW5kZXhlZCBp
bnRvIFNoYXJkIkEiLCAiTSIsICJOIiBhbmQNCj4gPiAiRCIuDQo+ID4gPiBJIGFtIG5vdCBhYmxl
IHRvIHRoaW5rIG9mIGFub3RoZXIgb3B0aW9uLg0KPiA+ID4NCj4gPiA+IENvbW1lbnRzIHdlbGNv
bWUuDQo+ID4gPg0KPiA+ID4NCj4gPiA+IC0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQo+ID4g
PiBGcm9tOiBEYW5pbCDFok9SSU4gW21haWx0bzp0b3JpbmRhbkBnbWFpbC5jb21dDQo+ID4gPiBT
ZW50OiBUdWVzZGF5LCBBdWd1c3QgMTAsIDIwMTAgNjoxMSBQTQ0KPiA+ID4gVG86IGphdmEtdXNl
ckBsdWNlbmUuYXBhY2hlLm9yZw0KPiA+ID4gU3ViamVjdDogUmU6IFNjYWxpbmcgTHVjZW5lIHRv
IDFibG4gZG9jcw0KPiA+ID4NCj4gPiA+IEknZCBzZWNvbmQgdGhhdC4NCj4gPiA+DQo+ID4gPiBJ
dCBkb2Vzbid0IGhhdmUgdG8gYmUgZGF0ZSBmb3Igc2hhcmRpbmcuIE1heWJlIGV2ZXJ5IHF1ZXJ5
IGhhcyBzb21lDQo+ID4gPiBzcGVjaWZpYyBmaWVsZCwgbGlrZSBVc2VySWQgb3Igc29tZXRoaW5n
LCBzbyB5b3UgY2FuIHJlZGlyZWN0IHRvDQo+ID4gPiBzcGVjaWZpYyBzaGFyZCBpbnN0ZWFkIG9m
IGhpdHRpbmcgYWxsIDEwIGluZGljZXMuDQo+ID4gPg0KPiA+ID4gWW91IGhhdmUgdG8gaGF2ZSBz
b21lIGtpbmQgb2YgbmFycm93aW5nOiBzZWFyY2hpbmcgMWJuIGRvY3VtZW50cyB3aXRoDQo+ID4g
PiBxdWVyaWVzIHRoYXQgbWF5IGhpdCBhbGwgZG9jdW1lbnRzIGlzIHVzZWxlc3MuDQo+ID4gPiBB
biB1c2VyIHdvbid0IGxvb2sgb24gbW9yZSB0aGFuIGxldCBzYXkgMTAwIHJlc3VsdHMgKGlmIHBy
ZXNlbnRlZA0KPiA+ID4gcHJvcGVybHkuLm1heWJlIDEwMDApDQo+ID4gPg0KPiA+ID4gVGhvc2Ug
ZmllbGRzIHRoYXQgbmFycm93IHRoZSByZXN1bHQgc2V0IGFyZSBnb29kIGNhbmRpZGF0ZXMgZm9y
DQo+IHNoYXJkaW5nDQo+ID4ga2V5cy4NCj4gPiA+DQo+ID4gPg0KPiA+ID4gT24gVHVlLCBBdWcg
MTAsIDIwMTAgYXQgMTU6MzIsIERhbiBPQ29ubm9yIDxkb2Nvbm5vckBhY3F1aXJlbWVkaWEuY29t
Pg0KPiA+IHdyb3RlOg0KPiA+ID4+IFNoZWxseToNCj4gPiA+Pg0KPiA+ID4+IFlvdSB3b3VsZG4n
dCBuZWNlc3NhcmlseSBoYXZlIHRvIHVzZSBhIG11bHRpc2VhcmNoZXIuIEEgc3VnZ2VzdGVkDQo+
ID4gYWx0ZXJuYXRpdmUgaXM6DQo+ID4gPj4NCj4gPiA+PiAtIHNoYXJkIGludG8gMTAgaW5kaWNl
cy4gSWYgeW91IG5lZWQgdGhlIGNvbmNlcHQgb2YgYSBkYXRlIHJhbmdlDQo+IHNlYXJjaCwNCj4g
PiBJIHdvdWxkIGFzc2lnbiB0aGUgZG9jdW1lbnRzIHRvIHRoZSBzaGFyZCBieSBkYXRlLCBvdGhl
cndpc2UgcmFuZG9tDQo+ID4gYXNzaWdubWVudCBpcyBmaW5lLg0KPiA+ID4+IC0gaGF2ZSBhIHBv
b2wgb2YgSW5kZXhTZWFyY2hlcnMgZm9yIGVhY2ggaW5kZXgNCj4gPiA+PiAtIHdoZW4gYSBzZWFy
Y2ggY29tZXMgaW4sIGFsbG9jYXRlIGEgU2VhcmNoZXIgZnJvbSBlYWNoIGluZGV4IHRvIHRoZQ0K
PiA+IHNlYXJjaC4NCj4gPiA+PiAtIHBlcmZvcm0gdGhlIHNlYXJjaCBpbiBwYXJhbGxlbCBhY3Jv
c3MgYWxsIGluZGljZXMuDQo+ID4gPj4gLSBtZXJnZSB0aGUgcmVzdWx0cyBpbiB5b3VyIG93biBj
b2RlIHVzaW5nIGFuIGVmZmljaWVudCBtZXJnaW5nDQo+ID4gYWxnb3JpdGhtLg0KPiA+ID4+DQo+
ID4gPj4gUmVnYXJkcywNCj4gPiA+PiBEYW4NCj4gPiA+Pg0KPiA+ID4+DQo+ID4gPj4NCj4gPiA+
Pg0KPiA+ID4+IC0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQo+ID4gPj4gRnJvbTogU2hlbGx5
X1NpbmdoIFttYWlsdG86U2hlbGx5X1NpbmdoQGluZm9zeXMuY29tXQ0KPiA+ID4+IFNlbnQ6IFR1
ZXNkYXksIEF1Z3VzdCAxMCwgMjAxMCA4OjIwIEFNDQo+ID4gPj4gVG86IGphdmEtdXNlckBsdWNl
bmUuYXBhY2hlLm9yZw0KPiA+ID4+IFN1YmplY3Q6IFJFOiBTY2FsaW5nIEx1Y2VuZSB0byAxYmxu
IGRvY3MNCj4gPiA+Pg0KPiA+ID4+IE5vIHNvcnQuIEkgd2lsbCBuZWVkIHJlbGV2YW5jZSBiYXNl
ZCBvbiBURi4gSWYgSSBzaGFyZCwgSSB3aWxsIGhhdmUgdG8NCj4gPiBzZWFyY2ggaW4gYWwgaW5k
aWNlcy4NCj4gPiA+Pg0KPiA+ID4+IC0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQo+ID4gPj4g
RnJvbTogYW5zaHVtLmd1cHRhQG5hdWtyaS5jb20gW21haWx0bzphbnNodW1nQGdtYWlsLmNvbV0N
Cj4gPiA+PiBTZW50OiBUdWVzZGF5LCBBdWd1c3QgMTAsIDIwMTAgMTo1NCBQTQ0KPiA+ID4+IFRv
OiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNCj4gPiA+PiBTdWJqZWN0OiBSZTogU2NhbGlu
ZyBMdWNlbmUgdG8gMWJsbiBkb2NzDQo+ID4gPj4NCj4gPiA+PiBXb3VsZCBsaWtlIHRvIGtub3cs
IGFyZSB5b3UgdXNpbmcgYSBwYXJ0aWN1bGFyIHR5cGUgb2Ygc29ydD8gRG8geW91DQo+IG5lZWQN
Cj4gPiB0byBzb3J0IG9uIHJlbGV2YW5jZT8gQ2FuIHlvdSBzaGFyZCBhbmQgcmVzdHJpY3QgeW91
ciBzZWFyY2ggdG8gYSBsaW1pdGVkDQo+ID4gc2V0IG9mIGluZGV4ZXMgZnVuY3Rpb25hbGx5Pw0K
PiA+ID4+DQo+ID4gPj4gLS0NCj4gPiA+PiBBbnNodW0NCj4gPiA+PiBodHRwOi8vYmxvZy5hbnNo
dW1ndXB0YS5uZXQNCj4gPiA+Pg0KPiA+ID4+IFNlbnQgZnJvbSBCbGFja0JlcnJ5KHIpDQo+ID4g
Pj4NCj4gPiA+PiAtLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KPiA+ID4+IEZyb206IFNoZWxs
eV9TaW5naCA8U2hlbGx5X1NpbmdoQGluZm9zeXMuY29tPg0KPiA+ID4+IERhdGU6IFR1ZSwgMTAg
QXVnIDIwMTAgMTM6MzE6MzgNCj4gPiA+PiBUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3Jn
PGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZz4NCj4gPiA+PiBSZXBseS1UbzogamF2YS11c2Vy
QGx1Y2VuZS5hcGFjaGUub3JnDQo+ID4gPj4gU3ViamVjdDogUkU6IFNjYWxpbmcgTHVjZW5lIHRv
IDFibG4gZG9jcw0KPiA+ID4+DQo+ID4gPj4gSGkgQW5zaHVtLA0KPiA+ID4+DQo+ID4gPj4gSSBh
bSBhbHJlYWR5IHJ1bm5pbmcgd2l0aCB0aGUgJ3NldENvbXBvdW5kRmlsZScgb3B0aW9uIG9mZi4N
Cj4gPiA+PiBBbmQgdGhhbmtzIGZvciBwb2ludGluZyBvdXQgbWVyZ2VGYWN0b3IuIEkgaGFkIHRy
aWVkIGEgaGlnaGVyDQo+ID4gbWVyZ2VGYWN0b3IgY291cGxlIG9mIGRheXMgYWdvLCBidXQgZ290
IGFuIE9PTSwgc28gSSBkaXNjYXJkZWQgaXQuIExhdGVyDQo+IEkNCj4gPiBmaWd1cmVkIHRoYXQg
T09NIHdhcyBiZWNhdXNlIG1heE1lcmdlRG9jcyB3YXMgdW5saW1pdGVkIGFuZCBJIHdhcyB1c2lu
Zw0KPiA+IE1NYXAuIFUgciByaWd0LCBJIHNob3VsZCB0cnkgYSBoaWdoZXIgbWVyZ2VGYWN0b3Iu
DQo+ID4gPj4NCj4gPiA+PiBXaXRoIHJlZ2FyZHMgdG8gdGhlIG11bHRpdGhyZWFkZWQgYXBwcm9h
Y2gsIEkgd2FzIGNvbnNpZGVyaW5nIGNyZWF0aW5nDQo+ID4gMTAgZGlmZmVyZW50IHRocmVhZHMg
ZWFjaCBpbmRleGluZyAxMDBtbG4gZG9jcyBjb3VwbGVkIHdpdGggYQ0KPiBNdWx0aXNlYXJjaGVy
DQo+ID4gdG8gd2hpY2ggSSB3aWxsIGZlZWQgdGhlc2UgMTAgaW5kaWNlcy4gRG8geW91IHRoaW5r
IHRoaXMgd2lsbCBpbXByb3ZlDQo+ID4gcGVyZm9ybWFuY2UuDQo+ID4gPj4NCj4gPiA+PiBBbmQg
anVzdCBGWUksIEkgaGF2ZSBsYXRlc3QgcmVhZGluZyBmb3IgMSBibG4gZG9jcy4gSW5kZXhpbmcg
dGltZSBpcyAyDQo+ID4gaHJzIGFuZCBzZWFyY2ggdGltZSBpcyAxNSBzZWNzLi4gSSBjYW4gbGl2
ZSB3aXRoIGluZGV4aW5nIHRpbWUgYnV0IHRoZQ0KPiA+IHNlYXJjaCB0aW1lIGlzIGhpZ2hseSB1
bmFjY2VwdGFibGUuDQo+ID4gPj4NCj4gPiA+PiBIZWxwIGFnYWluLg0KPiA+ID4+DQo+ID4gPj4g
LS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCj4gPiA+PiBGcm9tOiBBbnNodW0gW21haWx0bzph
bnNodW1nQGdtYWlsLmNvbV0NCj4gPiA+PiBTZW50OiBUdWVzZGF5LCBBdWd1c3QgMTAsIDIwMTAg
MTI6NTUgUE0NCj4gPiA+PiBUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQo+ID4gPj4g
U3ViamVjdDogUmU6IFNjYWxpbmcgTHVjZW5lIHRvIDFibG4gZG9jcw0KPiA+ID4+DQo+ID4gPj4g
SGkgU2hlbGx5LA0KPiA+ID4+IFRoYXQgc2VlbXMgbGlrZSBhIHJlYXNvbmFibGUgZGF0YSBzZXQg
c2l6ZS4gSSdkIHN1Z2dlc3QgeW91IGluY3JlYXNlDQo+ID4geW91cg0KPiA+ID4+IG1lcmdlRmFj
dG9yIGFzIGEgbWVyZ2VGYWN0b3Igb2YgMTAgc2F5cywgeW91IGFyZSBvbmx5IGJ1ZmZlcmluZyAx
MA0KPiBkb2NzDQo+ID4gaW4NCj4gPiA+PiBtZW1vcnkgYmVmb3JlIHdyaXRpbmcgaXQgdG8gYSBm
aWxlIChhbmQgaW5jdXJyaW5nIEkvTykuIFlvdSBjb3VsZA0KPiA+IGFjdHVhbGx5DQo+ID4gPj4g
Zmx1c2ggYnkgUkFNIHVzYWdlIGluc3RlYWQgb2YgYSBEb2MgY291bnQuIFR1cm4gb2ZmIHVzaW5n
IHRoZSBDb21wb3VuZA0KPiA+IGZpbGUNCj4gPiA+PiBzdHJ1Y3R1cmUgZm9yIGluZGV4aW5nIGFz
IGl0IGdlbmVyYWxseSB0YWtlcyBtb3JlIHRpbWUgY3JlYXRpbmcgYSBjZnMNCj4gPiBpbmRleC4N
Cj4gPiA+Pg0KPiA+ID4+IFBsdXMgdGhlIHRpbWUgd291bGQgbm90IGdyb3cgbGluZWFybHkgYXMg
dGhlIGxhcmdlciB0aGUgc2l6ZSBvZg0KPiBzZWdtZW50cw0KPiA+ID4+IGdldCwgdGhlIG1vcmUg
dGltZSBpdCdkIHRha2UgdG8gYWRkIG1vcmUgZG9jcyBhbmQgbWVyZ2UgdGhvc2UgdG9nZXRoZXIN
Cj4gPiA+PiBpbnRlcm1pdHRlbnRseS4NCj4gPiA+PiBZb3UgbWF5IGFsc28gdXNlIGEgbXVsdGl0
aHJlYWRlZCBhcHByb2FjaCBpbiBjYXNlIHJlYWRpbmcgdGhlIHNvdXJjZQ0KPiA+IHRha2VzDQo+
ID4gPj4gdGltZSBpbiB5b3VyIGNhc2UsIHRob3VnaCwgdGhlIGluZGV4d3JpdGVyIHdvdWxkIGhh
dmUgdG8gYmUgc2hhcmVkDQo+IGFtb25nDQo+ID4gYWxsDQo+ID4gPj4gdGhyZWFkcy4NCj4gPiA+
Pg0KPiA+ID4+IC0tDQo+ID4gPj4gQW5zaHVtIEd1cHRhDQo+ID4gPj4gaHR0cDovL2FpLWNhZmUu
YmxvZ3Nwb3QuY29tDQo+ID4gPj4NCj4gPiA+Pg0KPiA+ID4+IE9uIFR1ZSwgQXVnIDEwLCAyMDEw
IGF0IDEyOjI0IFBNLCBTaGVsbHlfU2luZ2ggPA0KPiA+IFNoZWxseV9TaW5naEBpbmZvc3lzLmNv
bT53cm90ZToNCj4gPiA+Pg0KPiA+ID4+PiBIaSwNCj4gPiA+Pj4NCj4gPiA+Pj4gSSBhbSBkZXZl
bG9waW5nIGFuIGFwcGxpY2F0aW9uIHdoaWNoIHVzZXMgTHVjZW5lIGZvciBpbmRleGluZyBhbmQN
Cj4gPiBzZWFyY2hpbmcNCj4gPiA+Pj4gMSBibG4gZG9jdW1lbnRzLiAodGhlIGRvY3VtZW50IHNp
emUgaXMgdmVyeSBzbWFsbCB0aG91Z2guIEVhY2gNCj4gZG9jdW1lbnQNCj4gPiBoYXMNCj4gPiA+
Pj4gYSBzaW5nbGUgZmllbGQgb2YgNS0xMCB3b3Jkczsgc28gSSBiZWxpZXZlIHRoYXQgbXkgZGF0
YSBzaXplIGlzDQo+IHdpdGhpbg0KPiA+IHRoZQ0KPiA+ID4+PiB0ZXN0ZWQgbGltaXRzKS4NCj4g
PiA+Pj4NCj4gPiA+Pj4gSSBhbSB1c2luZyB0aGUgZm9sbG93aW5nIGNvbmZpZ3VyYXRpb246DQo+
ID4gPj4+IDEuICAgICAgMS41IGdpZyBSQU0gdG8gdGhlIGp2bQ0KPiA+ID4+PiAyLiAgICAgIDEw
MEdCIGRpc2sgc3BhY2UuDQo+ID4gPj4+IDMuICAgICAgSW5kZXggY3JlYXRpb24gdHVuaW5nIGZh
Y3RvcnM6DQo+ID4gPj4+IGEuICAgICAgbWVyZ2VGYWN0b3IgPSAxMA0KPiA+ID4+PiBiLiAgICAg
IG1heEZpZWxkTGVuZ3RoID0gMTANCj4gPiA+Pj4gYy4gICAgICBtYXhNZXJnZURvY3MgPSA1MDAw
MDAwIChpZiBJIHRyeSB3aXRoIGEgbGFyZ2VyIHZhbHVlLCBJIGdldA0KPiBhbg0KPiA+ID4+PiBv
dXQtb2YtbWVtb3J5KQ0KPiA+ID4+Pg0KPiA+ID4+PiBXaXRoIHRoZXNlIHNldHRpbmdzLCBJIGFt
IGFibGUgdG8gY3JlYXRlIGFuIGluZGV4IG9mIDEwMCBtaWxsaW9uIGRvY3MNCj4gPiAoMTANCj4g
PiA+Pj4gcG93IDgpICBpbiAxNSBtaW5zIGNvbnN1bWluZyBhIGRpc2sgc3BhY2Ugb2YgMi41Z2Iu
IFdoaWNoIGlzIHF1aXRlDQo+ID4gPj4+IHNhdGlzZmFjdG9yeSBmb3IgbWUsIGJ1dCBuZXZlcnRo
ZWxlc3MsIEkgd2FudCB0byBrbm93IHdoYXQgZWxzZSBjYW4NCj4gYmUNCj4gPiBkb25lDQo+ID4g
Pj4+IHRvIHR1bmUgaXQgZnVydGhlci4gUGxlYXNlIGhlbHAuDQo+ID4gPj4+IEFsc28sIHdpdGgg
dGhlc2Ugc2V0dGluZ3MsIGNhbiBJIGV4cGVjdCB0aGUgdGltZSBhbmQgc2l6ZSB0byBncm93DQo+
ID4gbGluZWFybHkNCj4gPiA+Pj4gZm9yIDFibG4gKDEwIHBvdyA5KSBkb2N1bWVudHM/DQo+ID4g
Pj4+DQo+ID4gPj4+IFRoYW5rcyBhbmQgUmVnYXJkcywNCj4gPiA+Pj4NCj4gPiA+Pj4gU2hlbGx5
IFNpbmdoDQo+ID4gPj4+IENlbnRlciBGb3IgS05vd2xlZGdlIERyaXZlbiBJbmZvcm1hdGlvbiBT
eXN0ZW1zLCBJbmZvc3lzDQo+ID4gPj4+IEVtYWlsOiBzaGVsbHlfc2luZ2hAaW5mb3N5cy5jb208
bWFpbHRvOnNoZWxseV9zaW5naEBpbmZvc3lzLmNvbT4NCj4gPiA+Pj4gUGhvbmU6IChNKSA5MSA5
OTIgMzY5IDcyMDAsIChWb0lQKTIwMjI5Nzg2MjINCj4gPiA+Pj4NCj4gPiA+Pj4NCj4gPiA+Pj4N
Cj4gPiA+Pj4NCj4gPiA+Pg0KPiA+ID4+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KPiA+ID4+IFRvIHVuc3Vic2Ny
aWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KPiA+
ID4+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2Vu
ZS5hcGFjaGUub3JnDQo+ID4gPj4NCj4gPiA+Pg0KPiA+ID4+IC0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KPiA+ID4+
IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBh
Y2hlLm9yZw0KPiA+ID4+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNl
ci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+ID4gPj4NCj4gPiA+Pg0KPiA+ID4+IC0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLQ0KPiA+ID4+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmli
ZUBsdWNlbmUuYXBhY2hlLm9yZw0KPiA+ID4+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1h
aWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+ID4gPj4NCj4gPiA+Pg0KPiA+
ID4NCj4gPiA+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KPiA+ID4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2
YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+ID4gPiBGb3IgYWRkaXRpb25h
bCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KPiA+
ID4NCj4gPiA+DQo+ID4NCj4gPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4gPiBUbyB1bnN1YnNjcmliZSwgZS1t
YWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4gPiBGb3IgYWRk
aXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9y
Zw0KPiA+DQo+ID4NCj4gPiAqKioqKioqKioqKioqKioqIENBVVRJT04gLSBEaXNjbGFpbWVyICoq
KioqKioqKioqKioqKioqDQo+ID4gVGhpcyBlLW1haWwgY29udGFpbnMgUFJJVklMRUdFRCBBTkQg
Q09ORklERU5USUFMIElORk9STUFUSU9OIGludGVuZGVkDQo+ID4gc29sZWx5DQo+ID4gZm9yIHRo
ZSB1c2Ugb2YgdGhlIGFkZHJlc3NlZShzKS4gSWYgeW91IGFyZSBub3QgdGhlIGludGVuZGVkIHJl
Y2lwaWVudCwNCj4gPiBwbGVhc2UNCj4gPiBub3RpZnkgdGhlIHNlbmRlciBieSBlLW1haWwgYW5k
IGRlbGV0ZSB0aGUgb3JpZ2luYWwgbWVzc2FnZS4gRnVydGhlciwgeW91DQo+ID4gYXJlIG5vdA0K
PiA+IHRvIGNvcHksIGRpc2Nsb3NlLCBvciBkaXN0cmlidXRlIHRoaXMgZS1tYWlsIG9yIGl0cyBj
b250ZW50cyB0byBhbnkgb3RoZXINCj4gPiBwZXJzb24gYW5kDQo+ID4gYW55IHN1Y2ggYWN0aW9u
cyBhcmUgdW5sYXdmdWwuIFRoaXMgZS1tYWlsIG1heSBjb250YWluIHZpcnVzZXMuIEluZm9zeXMN
Cj4gaGFzDQo+ID4gdGFrZW4NCj4gPiBldmVyeSByZWFzb25hYmxlIHByZWNhdXRpb24gdG8gbWlu
aW1pemUgdGhpcyByaXNrLCBidXQgaXMgbm90IGxpYWJsZSBmb3INCj4gPiBhbnkgZGFtYWdlDQo+
ID4geW91IG1heSBzdXN0YWluIGFzIGEgcmVzdWx0IG9mIGFueSB2aXJ1cyBpbiB0aGlzIGUtbWFp
bC4gWW91IHNob3VsZCBjYXJyeQ0KPiA+IG91dCB5b3VyDQo+ID4gb3duIHZpcnVzIGNoZWNrcyBi
ZWZvcmUgb3BlbmluZyB0aGUgZS1tYWlsIG9yIGF0dGFjaG1lbnQuIEluZm9zeXMNCj4gcmVzZXJ2
ZXMNCj4gPiB0aGUNCj4gPiByaWdodCB0byBtb25pdG9yIGFuZCByZXZpZXcgdGhlIGNvbnRlbnQg
b2YgYWxsIG1lc3NhZ2VzIHNlbnQgdG8gb3IgZnJvbQ0KPiA+IHRoaXMgZS1tYWlsDQo+ID4gYWRk
cmVzcy4gTWVzc2FnZXMgc2VudCB0byBvciBmcm9tIHRoaXMgZS1tYWlsIGFkZHJlc3MgbWF5IGJl
IHN0b3JlZCBvbg0KPiB0aGUNCj4gPiBJbmZvc3lzIGUtbWFpbCBzeXN0ZW0uDQo+ID4gKioqSU5G
T1NZUyoqKioqKioqIEVuZCBvZiBEaXNjbGFpbWVyICoqKioqKioqSU5GT1NZUyoqKg0KPiA+DQo+
DQo=


From java-user-return-46991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 11 08:40:53 2010
Return-Path: <java-user-return-46991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23448 invoked from network); 11 Aug 2010 08:40:53 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Aug 2010 08:40:53 -0000
Received: (qmail 69894 invoked by uid 500); 11 Aug 2010 08:40:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69481 invoked by uid 500); 11 Aug 2010 08:40:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69449 invoked by uid 99); 11 Aug 2010 08:40:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Aug 2010 08:40:46 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=SPF_HELO_PASS,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Aug 2010 08:40:41 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <christian.schwendener@swissinfo.ch>)
	id 1Oj6rF-0005b0-6p
	for java-user@lucene.apache.org; Wed, 11 Aug 2010 01:40:21 -0700
Date: Wed, 11 Aug 2010 01:40:21 -0700 (PDT)
From: "Christian S." <christian.schwendener@swissinfo.ch>
To: java-user@lucene.apache.org
Message-ID: <1281516021202-1084545.post@n3.nabble.com>
Subject: Indexing and searching phrases
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hy All

I'm using Lucene to extract keywords out of a text.
The Lucene Index is built over a set of defined words (we call them
keywords). Then a text is queried to search that index. The goal is to find
out which keywords appear in the given text.

This works fine as long as the defined keywords are only "single" words and
not phrases.
But what to do if a keyword is a phrase and has to appear as whole in the
text? (and no part of the phrase must match for it's own)
Searching of phrases in quotes would do the job, but I have no knowledge of
the text beeing searched.

To make my problem clearer:

Indexed: Document1 fieldName:economy
Text to find keywords in: An economy consists of the economic system of a
country or other area
search processed: fieldName: economy, fieldName:consists, fieldName:economic
... etc
result: Document1 -> keyword economy

But now:
Keyword phrase I want to index: Make peace not war
Text to find keywords in: Two or three eggs for breakfast make no difference

if indexed as before this text matches to "Make peace not war" because of
the "make" in the text.
This is what I'm trying to avoid.

Am I overseeing something or is there a different approach for finding
keywords and keywordPhrases in a text?

Thanks for your help!
Christian 
-- 
View this message in context: http://lucene.472066.n3.nabble.com/Indexing-and-searching-phrases-tp1084545p1084545.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 11 09:58:36 2010
Return-Path: <java-user-return-46992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39421 invoked from network); 11 Aug 2010 09:58:36 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Aug 2010 09:58:36 -0000
Received: (qmail 33401 invoked by uid 500); 11 Aug 2010 09:58:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32994 invoked by uid 500); 11 Aug 2010 09:58:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32986 invoked by uid 99); 11 Aug 2010 09:58:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Aug 2010 09:58:30 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Aug 2010 09:58:25 +0000
Received: by wyb35 with SMTP id 35so12065356wyb.35
        for <java-user@lucene.apache.org>; Wed, 11 Aug 2010 02:58:03 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.193.195 with SMTP id k45mr16318206wen.32.1281520683482; 
	Wed, 11 Aug 2010 02:58:03 -0700 (PDT)
Received: by 10.216.36.79 with HTTP; Wed, 11 Aug 2010 02:58:03 -0700 (PDT)
In-Reply-To: <D85AE610CF584C5C962E1A95E17A0A2A@sv.us.sonicwall.com>
References: <D85AE610CF584C5C962E1A95E17A0A2A@sv.us.sonicwall.com>
Date: Wed, 11 Aug 2010 05:58:03 -0400
Message-ID: <AANLkTimxAUOL2kZyndT038fOh_dixzVTgYPHoDfVzeZR@mail.gmail.com>
Subject: Re: read past EOF
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

It looks like it may be this issue:

    https://issues.apache.org/jira/browse/LUCENE-2593

But can you describe the circumstances leading up to this?  EG were
there any exceptions (eg disk full) before this one?  Which version of
Lucene?

Mike

On Wed, Aug 11, 2010 at 12:30 AM, Ganesh <emailgane@yahoo.co.in> wrote:
> Hello all,
>
> I am getting the following exception for one of my customer. I think the =
database is corrupted but want to know the exact cause.
>
> =A0 =A0 =A0 =A0 =A0 =A0Exception: read past EOF
> =A0 =A0 =A0 =A0 =A0 =A0org.apache.lucene.store.BufferedIndexInput.readByt=
es(BufferedIndexInput.java:135)
> =A0 =A0 =A0 =A0 =A0 =A0org.apache.lucene.store.BufferedIndexInput.readByt=
es(BufferedIndexInput.java:92)
> =A0 =A0 =A0 =A0 =A0 =A0org.apache.lucene.util.BitVector.readBits(BitVecto=
r.java:225)
> =A0 =A0 =A0 =A0 =A0 =A0org.apache.lucene.util.BitVector.<init>(BitVector.=
java:214)
> =A0 =A0 =A0 =A0 =A0 =A0org.apache.lucene.index.SegmentReader.loadDeletedD=
ocs(SegmentReader.java:666)
> =A0 =A0 =A0 =A0 =A0 =A0org.apache.lucene.index.SegmentReader.get(SegmentR=
eader.java:642)
> =A0 =A0 =A0 =A0 =A0 =A0org.apache.lucene.index.SegmentReader.get(SegmentR=
eader.java:599)
> =A0 =A0 =A0 =A0 =A0 =A0org.apache.lucene.index.DirectoryReader.<init>(Dir=
ectoryReader.java:104)
> =A0 =A0 =A0 =A0 =A0 =A0org.apache.lucene.index.ReadOnlyDirectoryReader.<i=
nit>(ReadOnlyDirectoryReader.java:27)
> =A0 =A0 =A0 =A0 =A0 =A0org.apache.lucene.index.DirectoryReader$1.doBody(D=
irectoryReader.java:74)
> =A0 =A0 =A0 =A0 =A0 =A0org.apache.lucene.index.SegmentInfos$FindSegmentsF=
ile.run(SegmentInfos.java:704)
> =A0 =A0 =A0 =A0 =A0 =A0org.apache.lucene.index.DirectoryReader.open(Direc=
toryReader.java:69)
> =A0 =A0 =A0 =A0 =A0 =A0org.apache.lucene.index.IndexReader.open(IndexRead=
er.java:476)
> =A0 =A0 =A0 =A0 =A0 =A0org.apache.lucene.index.IndexReader.open(IndexRead=
er.java:403)
>
> Regards
> Ganesh
> Send free SMS to your Friends on Mobile from your Yahoo! Messenger. Downl=
oad Now! http://messenger.yahoo.com/download.php
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 11 11:49:20 2010
Return-Path: <java-user-return-46993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69182 invoked from network); 11 Aug 2010 11:49:20 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Aug 2010 11:49:20 -0000
Received: (qmail 53665 invoked by uid 500); 11 Aug 2010 11:49:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53359 invoked by uid 500); 11 Aug 2010 11:49:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53350 invoked by uid 99); 11 Aug 2010 11:49:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Aug 2010 11:49:14 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mailer.thomas@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Aug 2010 11:49:05 +0000
Received: by bwz9 with SMTP id 9so51460bwz.35
        for <java-user@lucene.apache.org>; Wed, 11 Aug 2010 04:48:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:content-type
         :content-transfer-encoding;
        bh=+ea6ZuQU0TAxsw3ygcQ1M2HSHcE7JyoXRVzo0T31Oyw=;
        b=ZZry7SYHPOXaCWWG8d3GxiE4iMQ2S5tb1LJmfEt2GJwqWupotZcjK2EyB1Jiwi0r6+
         Mgm+vE144Eq+kSK1rBksMFC2b4uYI0b2zvmqbC+3zyTiOkdRKQa+o8V5S7Jiy2THEV2C
         LFDVs8fx95BuI6Mh9Sx8ZDN4TpO8zuUBlEAxg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=lzockY3gD/adB1/BjHhv4JADkDcaC95Krk0sii5eWibagwXj8EHxo+uJBPWA+NxQfG
         14q+74j9e/24t/QSutQv4dfrsUlBwAwQXTMCOrZAbBbAd7NBAkjNtZ+Hb4Xwzel3SQDW
         1aw2/xV4G//E/QrtY6ROk9y5ZYJ+dU6bCkjDw=
Received: by 10.204.82.80 with SMTP id a16mr5022748bkl.39.1281527325016;
        Wed, 11 Aug 2010 04:48:45 -0700 (PDT)
Received: from [192.168.24.135] (funny.informatik.hu-berlin.de [141.20.24.156])
        by mx.google.com with ESMTPS id y2sm10324bkx.20.2010.08.11.04.48.43
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 11 Aug 2010 04:48:44 -0700 (PDT)
Message-ID: <4C628E1A.2030507@gmail.com>
Date: Wed, 11 Aug 2010 13:48:42 +0200
From: Philippe <mailer.thomas@gmail.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.11) Gecko/20100713 Thunderbird/3.0.6
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Rank by Number of token
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I want to rank my query by the number of tokens in a field. What would 
be the best way to implement such a ranking?

Regards,
     Philippe

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 11 12:49:10 2010
Return-Path: <java-user-return-46994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97268 invoked from network); 11 Aug 2010 12:49:10 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Aug 2010 12:49:10 -0000
Received: (qmail 20090 invoked by uid 500); 11 Aug 2010 12:49:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19338 invoked by uid 500); 11 Aug 2010 12:49:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19328 invoked by uid 99); 11 Aug 2010 12:49:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Aug 2010 12:49:03 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,MIME_QP_LONG_LINE,SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [202.86.5.95] (HELO smtp108.mail.in.yahoo.com) (202.86.5.95)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 11 Aug 2010 12:48:58 +0000
Received: (qmail 84985 invoked from network); 11 Aug 2010 12:48:36 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=DKIM-Signature:Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=MIxw94js2omF/kmejRDXvkIQLZGq9Gm+Tb4973JB7OR54s4UQnACI/l44X4apxaHbzU+bqJnTy0RQHPw41Tq2zYwf+nO21nUFTRNF75CPcvXgu2f5Ecnd8jQT7I+5qkM4fp454O4ff4SkOeZGeNY02zcczDjbdoHU05kbgUCTLY=  ;
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.in; s=s1024; t=1281530916; bh=xVLK7sOlTGivmHCHZX6lVInJbFmQroj9LO5aIIr4YNU=; h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE; b=F3ItVh5pr8bVGmCxARLVrj6oyCHy2fz0IU1AZyIL7DeRnhCW56fLFs2efUJp3Orq8cwST87X2Y4kQOoyqGMX1uMLPY8PI3VefrajCDgqHpPGuCZZiEhuWZePBFUcaaUMSF89EYZ1koj2Y57tbkQQ59BomRlYPb9fse92LAJvDAs=
Received: from GaneshM (emailgane@121.244.159.130 with login)
        by smtp108.mail.in.yahoo.com with SMTP; 11 Aug 2010 18:18:35 +0530 IST
X-Yahoo-SMTP: JObyHkuswBBrNSLZp.Ycd7Boqpr_GQ--
X-YMail-OSG: emdUTO4VM1nF1sCXn6uSWrYg88KLwL3K8vbw8Kc5eEYKE3x
 PghutHOgllPnyx93HFx2QK5WAaMe9WFM7bChIh1Ivn2dV72mAIwGSztNSpc3
 7t3nzhYvWq_oMS2_kldxcbhuuuTx.CZyn4a0D_NPB7aerl__XRU5mpn0p6VR
 hrPWmgPjqg0icue3NB1QBJxEQxkClTj7.GBWUjFG0PD_5T6cCSS5wp4TfDQa
 O4X8MUCcZVZqURsDIUNelylrn2Q7UxYBEB6tSX_rDuQ--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <9D855DBCDD5D485ABBE708BAA09A4921@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <D85AE610CF584C5C962E1A95E17A0A2A@sv.us.sonicwall.com> <AANLkTimxAUOL2kZyndT038fOh_dixzVTgYPHoDfVzeZR@mail.gmail.com>
Subject: Re: read past EOF
Date: Wed, 11 Aug 2010 18:18:34 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.5931
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5931
X-Virus-Checked: Checked by ClamAV on apache.org

I am using Lucene 2.9.1 and there was no exception in the past.

Regards
Ganesh

----- Original Message -----=20
From: "Michael McCandless" <lucene@mikemccandless.com>
To: <java-user@lucene.apache.org>
Sent: Wednesday, August 11, 2010 3:28 PM
Subject: Re: read past EOF


It looks like it may be this issue:

    https://issues.apache.org/jira/browse/LUCENE-2593

But can you describe the circumstances leading up to this?  EG were
there any exceptions (eg disk full) before this one?  Which version of
Lucene?

Mike

On Wed, Aug 11, 2010 at 12:30 AM, Ganesh <emailgane@yahoo.co.in> wrote:
> Hello all,
>
> I am getting the following exception for one of my customer. I think =
the database is corrupted but want to know the exact cause.
>
> Exception: read past EOF
> =
org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.j=
ava:135)
> =
org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.j=
ava:92)
> org.apache.lucene.util.BitVector.readBits(BitVector.java:225)
> org.apache.lucene.util.BitVector.<init>(BitVector.java:214)
> =
org.apache.lucene.index.SegmentReader.loadDeletedDocs(SegmentReader.java:=
666)
> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:642)
> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:599)
> =
org.apache.lucene.index.DirectoryReader.<init>(DirectoryReader.java:104)
> =
org.apache.lucene.index.ReadOnlyDirectoryReader.<init>(ReadOnlyDirectoryR=
eader.java:27)
> =
org.apache.lucene.index.DirectoryReader$1.doBody(DirectoryReader.java:74)=

> =
org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.ja=
va:704)
> org.apache.lucene.index.DirectoryReader.open(DirectoryReader.java:69)
> org.apache.lucene.index.IndexReader.open(IndexReader.java:476)
> org.apache.lucene.index.IndexReader.open(IndexReader.java:403)
>
> Regards
> Ganesh
> Send free SMS to your Friends on Mobile from your Yahoo! Messenger. =
Download Now! http://messenger.yahoo.com/download.php
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

Send free SMS to your Friends on Mobile from your Yahoo! Messenger. Download Now! http://messenger.yahoo.com/download.php

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 11 12:56:03 2010
Return-Path: <java-user-return-46995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2628 invoked from network); 11 Aug 2010 12:56:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Aug 2010 12:56:03 -0000
Received: (qmail 33740 invoked by uid 500); 11 Aug 2010 12:56:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33489 invoked by uid 500); 11 Aug 2010 12:55:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33477 invoked by uid 99); 11 Aug 2010 12:55:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Aug 2010 12:55:58 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Aug 2010 12:55:53 +0000
Received: by wyb35 with SMTP id 35so117933wyb.35
        for <java-user@lucene.apache.org>; Wed, 11 Aug 2010 05:55:32 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.35.209 with SMTP id u59mr5239864wea.82.1281531331899; Wed,
 11 Aug 2010 05:55:31 -0700 (PDT)
Received: by 10.216.36.79 with HTTP; Wed, 11 Aug 2010 05:55:31 -0700 (PDT)
In-Reply-To: <9D855DBCDD5D485ABBE708BAA09A4921@sv.us.sonicwall.com>
References: <D85AE610CF584C5C962E1A95E17A0A2A@sv.us.sonicwall.com>
	<AANLkTimxAUOL2kZyndT038fOh_dixzVTgYPHoDfVzeZR@mail.gmail.com>
	<9D855DBCDD5D485ABBE708BAA09A4921@sv.us.sonicwall.com>
Date: Wed, 11 Aug 2010 08:55:31 -0400
Message-ID: <AANLkTi=CA-vSuiZSaGX+am2ocA2o1VEaANQXqrKXfbBZ@mail.gmail.com>
Subject: Re: read past EOF
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hmm, this issue only leads to corruption is an exception is hit at the
wrong time.

Is it at all possible you missed an exception?  Because that EOF on
reading del docs is precisely the corruption seen if you hit this
issue.

The issue was backported to 2.9.4-dev, so you may want to check out
2.9 branch & build the Lucene JAR and upgrade to that?

Even so, you should upgrade at least to 2.9.3 -- there are a number of
bug fixes since 2.9.1.

Mike

On Wed, Aug 11, 2010 at 8:48 AM, Ganesh <emailgane@yahoo.co.in> wrote:
> I am using Lucene 2.9.1 and there was no exception in the past.
>
> Regards
> Ganesh
>
> ----- Original Message -----
> From: "Michael McCandless" <lucene@mikemccandless.com>
> To: <java-user@lucene.apache.org>
> Sent: Wednesday, August 11, 2010 3:28 PM
> Subject: Re: read past EOF
>
>
> It looks like it may be this issue:
>
> =A0 =A0https://issues.apache.org/jira/browse/LUCENE-2593
>
> But can you describe the circumstances leading up to this? =A0EG were
> there any exceptions (eg disk full) before this one? =A0Which version of
> Lucene?
>
> Mike
>
> On Wed, Aug 11, 2010 at 12:30 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>> Hello all,
>>
>> I am getting the following exception for one of my customer. I think the=
 database is corrupted but want to know the exact cause.
>>
>> Exception: read past EOF
>> org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.=
java:135)
>> org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.=
java:92)
>> org.apache.lucene.util.BitVector.readBits(BitVector.java:225)
>> org.apache.lucene.util.BitVector.<init>(BitVector.java:214)
>> org.apache.lucene.index.SegmentReader.loadDeletedDocs(SegmentReader.java=
:666)
>> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:642)
>> org.apache.lucene.index.SegmentReader.get(SegmentReader.java:599)
>> org.apache.lucene.index.DirectoryReader.<init>(DirectoryReader.java:104)
>> org.apache.lucene.index.ReadOnlyDirectoryReader.<init>(ReadOnlyDirectory=
Reader.java:27)
>> org.apache.lucene.index.DirectoryReader$1.doBody(DirectoryReader.java:74=
)
>> org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.j=
ava:704)
>> org.apache.lucene.index.DirectoryReader.open(DirectoryReader.java:69)
>> org.apache.lucene.index.IndexReader.open(IndexReader.java:476)
>> org.apache.lucene.index.IndexReader.open(IndexReader.java:403)
>>
>> Regards
>> Ganesh
>> Send free SMS to your Friends on Mobile from your Yahoo! Messenger. Down=
load Now! http://messenger.yahoo.com/download.php
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> Send free SMS to your Friends on Mobile from your Yahoo! Messenger. Downl=
oad Now! http://messenger.yahoo.com/download.php
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 11 13:31:43 2010
Return-Path: <java-user-return-46996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24243 invoked from network); 11 Aug 2010 13:31:42 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Aug 2010 13:31:42 -0000
Received: (qmail 89292 invoked by uid 500); 11 Aug 2010 13:31:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88901 invoked by uid 500); 11 Aug 2010 13:31:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88893 invoked by uid 99); 11 Aug 2010 13:31:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Aug 2010 13:31:36 +0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of lucene@searchblox.com does not designate 62.24.128.245 as permitted sender)
Received: from [62.24.128.245] (HELO out1.ip09ir2.opaltelecom.net) (62.24.128.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Aug 2010 13:31:29 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AtsBAD5DYkxZ87iv/2dsb2JhbAAHkxvJWIU6BIw4
X-IronPort-AV: E=Sophos;i="4.55,353,1278284400"; 
   d="scan'208";a="445473458"
Received: from unknown (HELO [192.168.1.104]) ([89.243.184.175])
  by out1.ip09ir2.opaltelecom.net with ESMTP; 11 Aug 2010 14:31:08 +0100
From: Lucene <lucene@searchblox.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Date: Wed, 11 Aug 2010 14:31:05 +0100
Subject: [ANN] SearchBlox Version 6.0 incorporating Apache Lucene 3.0.2 released
To: java-user@lucene.apache.org
Message-Id: <77873BA1-21D6-4034-955C-D2EE9CBFE083@searchblox.com>
Mime-Version: 1.0 (Apple Message framework v1081)
X-Mailer: Apple Mail (2.1081)
X-Virus-Checked: Checked by ClamAV on apache.org


The SearchBlox Team is pleased to announce the availability of =
SearchBlox
Version 6.0. The new version upgrades to Apache Lucene 3.0.2.=20

SearchBlox is an integrated Enterprise Search Server incorporating =
Lucene
and includes:

- Web/RSS/FileSystem Crawlers
- REST API
- Web Admin Console for Server Management
- Indexing of documents including Office and PDF
- Multi-language Support
- Rapid Search UI customization=20

SearchBlox is available for both on-premise and cloud deployment =
including Amazon Web Services (AWS).

Regards,

The SearchBlox Team
SearchBlox Software, Inc.
http://www.searchblox.com <http://www.searchblox.com/>=20
http://twitter.com/search_software=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 11 16:53:09 2010
Return-Path: <java-user-return-46997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9397 invoked from network); 11 Aug 2010 16:52:59 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Aug 2010 16:52:59 -0000
Received: (qmail 51519 invoked by uid 500); 11 Aug 2010 16:45:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51320 invoked by uid 500); 11 Aug 2010 16:45:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51312 invoked by uid 99); 11 Aug 2010 16:45:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Aug 2010 16:45:35 +0000
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of luan.cestari@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Aug 2010 16:45:29 +0000
Received: by eyg5 with SMTP id 5so256924eyg.35
        for <java-user@lucene.apache.org>; Wed, 11 Aug 2010 09:45:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=9Bp5MZBz1uDJvY+d322Uo9a/r33BgrB+vgnXXnTBPso=;
        b=Oi6ohLheKlaUpbPQB4wvhdTWYpiqfjXXjWmdTqoa100A4mB5xbIpe9LTJv7GMuVhvb
         JI3j9Z1kcUkPXPrGORrsaWVBJyd2RHudTFAfi7Y21kqtUb5Awfq2tx4BWfuBz6xZBXK5
         NuSYnuEy+AjipeMFGklbkMxq9bUTrTEYr5j1c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=rl/2BN+oxS2oBnnkTazx8Lwyv20qWjVKKSxYoWQs37WVtKUHldl44K2LH2BgtMb3a0
         bDpN8pJu9nEcQNc6egIPHVkcfBeZdVYt2Xl5uQ7IYaUVFhmrXNnlYI/k9JpOBu/YXuNm
         pAU29N9PY32KePaKDYs/h5VWJP50qKjrK+d7I=
MIME-Version: 1.0
Received: by 10.213.114.67 with SMTP id d3mr6175729ebq.77.1281545107216; Wed,
 11 Aug 2010 09:45:07 -0700 (PDT)
Received: by 10.213.36.3 with HTTP; Wed, 11 Aug 2010 09:45:06 -0700 (PDT)
In-Reply-To: <AANLkTimS9gtmKiu-R5rPc=+w40ytMjkjMdqBDDrA48jC@mail.gmail.com>
References: <1281309365193-1049232.post@n3.nabble.com>
	<AANLkTimrJLnreDntLK9yua6teOkSw7Y7y3_ayz32jF+b@mail.gmail.com>
	<1281406906339-1066049.post@n3.nabble.com>
	<AANLkTimS9gtmKiu-R5rPc=+w40ytMjkjMdqBDDrA48jC@mail.gmail.com>
Date: Wed, 11 Aug 2010 13:45:06 -0300
Message-ID: <AANLkTikCfc2JiFFP5v3LTw6AovGPiWC6Fp1dGuL8-972@mail.gmail.com>
Subject: Re: Using categories with Lucene
From: Luan Cestari <luan.cestari@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174bdde8e11b2a048d8ef87c
X-Virus-Checked: Checked by ClamAV on apache.org

--0015174bdde8e11b2a048d8ef87c
Content-Type: text/plain; charset=ISO-8859-1

Hi Glen,

The URL to the Creative Commons package plugin (
http://netlikon.de/docs/javadoc-nutch/trunk/org/creativecommons/nutch/package-summary.html
).

It is in the CCIndexingFilter class that add a field that in
the CCQueryFilter class filter the result using that new field.

Regards,
Luan

On Tue, Aug 10, 2010 at 3:04 AM, Glen Newton <glen.newton@gmail.com> wrote:

> Hi Luan,
>
> Could you tell us the name and/or URL of this plugin so that the list
> might know about it?
> Thanks,
> Glen
>
>
> On 10 August 2010 12:21, Luan Cestari <luan.cestari@gmail.com> wrote:
> >
> > We would like to say thanks for the replies.
> >
> > We found a plugin in Nutch (the Creative Commons plugin) that does like
> Otis
> > said. It adds information to the indexes, and then uses them to filter
> the
> > results during the query.
> >
> > Thanks again for the help.
> >
> > Best Regards,
> > Daniel & Luan
> > --
> > View this message in context:
> http://lucene.472066.n3.nabble.com/Using-categories-with-Lucene-tp1049232p1066049.html
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
> --
>
> -
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Luan cestari

"All the gold which is under or upon the earth is not enough to give in
exchange for virtue."
Plato
"At his best, man is the noblest of all animals; separated from law and
justice he is the worst."
"A true friend is one soul in two bodies."
Aristotle

--0015174bdde8e11b2a048d8ef87c--

From java-user-return-46998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 11 17:17:12 2010
Return-Path: <java-user-return-46998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33267 invoked from network); 11 Aug 2010 17:17:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Aug 2010 17:17:12 -0000
Received: (qmail 13412 invoked by uid 500); 11 Aug 2010 17:17:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13350 invoked by uid 500); 11 Aug 2010 17:17:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13342 invoked by uid 99); 11 Aug 2010 17:17:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Aug 2010 17:17:09 +0000
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists.digitalpebble@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Aug 2010 17:17:03 +0000
Received: by qyk36 with SMTP id 36so158610qyk.14
        for <java-user@lucene.apache.org>; Wed, 11 Aug 2010 10:16:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=73pZ2CTeHglegzLrqTdBv9v94nxJHtyRQCkCyCvTOTA=;
        b=sRnf9rOBTDrdygJA6bcyhW/DjF2ZAfHhCrqhbLzQFiZIAmTfog6WJFYFTcdnQFmZ3c
         dKLo4bp5JEmTxdJejB4V7Pf4RfaHfbl5vnC2EM4OnwXKG4snTeIgHabpv8tsaYtLI4a1
         njNypw9BCPE/cgY9pqiBOMc71qywGN6bQXwRY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Mq/JLiGWopydUSLqbBPSwS5ViNVvBUbOYzHaL6+Jxc6Zv3qMBQpdMA/WQCadgVm0vI
         c2FQWcLLJ8h1mibUBaXV5FvQq/jvU5TT/KTUUbHoqc1UF7lKdFPL3sojMMnmgxt+wlcW
         BCbZi+LtoWFOjVwnkH/JobLY9+X6vaPAO5Sbk=
MIME-Version: 1.0
Received: by 10.224.54.69 with SMTP id p5mr10870796qag.347.1281547002597; Wed, 
	11 Aug 2010 10:16:42 -0700 (PDT)
Received: by 10.229.42.82 with HTTP; Wed, 11 Aug 2010 10:16:41 -0700 (PDT)
In-Reply-To: <1281309365193-1049232.post@n3.nabble.com>
References: <1281309365193-1049232.post@n3.nabble.com>
Date: Wed, 11 Aug 2010 18:16:41 +0100
Message-ID: <AANLkTik-EZfLo4GSrmeHSgs-puh0N6AZpOyVdfY0jxq0@mail.gmail.com>
Subject: Re: Using categories with Lucene
From: Julien Nioche <lists.digitalpebble@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175cdee2da538f048d8f6904
X-Virus-Checked: Checked by ClamAV on apache.org

--0015175cdee2da538f048d8f6904
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

BTW I don't remember anyone on the Nutch list suggesting you to use Carrot
for this (see : http://search-lucene.com/?q=3Dluan+carrot) or classifying a=
t
querying time

What I suggested in http://search-lucene.com/m/JWZTj1q4lB92 was about
classifying during the parsing or indexing and generating a field for Lucen=
e
or SOLR. As Otis pointed out you can of course use SOLR for faceting. Since
you will be using Nutch anyway, you might as well avoid an external DB just
for storing the results of the classification and just keep the labels e.g.
in the parse metadata

Julien
--=20
DigitalPebble Ltd

Open Source Solutions for Text Engineering
http://www.digitalpebble.com

On 9 August 2010 00:16, Luan Cestari <luan.cestari@gmail.com> wrote:

>
> Lucene developers,
>
> We=92ve been working on a undergraduate project to the college about chan=
ging
> Apache Nutch (that uses Lucene do index it=92s web pages) to include a
> category filter, and we are having problems about the query part. We want
> to
> develop an application with a good performance, so we thought that here
> would be the best place to ask this kind of question. The idea is that th=
e
> user can search pages stored for only a category. So the number of result=
s
> found should display the number of pages that actually is classified in
> that
> category.
>
> The problem is about how to add to the Lucene indexes the category
> information, and how filter the search on that. We tried to look on the
> Nutch mailing-list (Nabble) about that and asked some help, but people fr=
om
> there think that we should use some plug-in like Carrot, that get like 10=
0
> of pages and classify it in the query time. We are not very confident tha=
t
> it=92s the best solution. We thought in other two different ideas: #1 To
> classify those pages and store that information on a DB and in the query
> time filter the result that DB to filter the result. #2 Use different ind=
ex
> servers, one for each category and one to search without filtering by
> category.
>
> We have seen on this project http://search-lucene.com/ that there are
> pre-defined categories. We think that this should be classified at indexi=
ng
> time, as we wanted.
>
> Do you have any other idea about how to do that?
>
> Sincerely,
>
> Daniel Costa Gimenes & Luan Cestari
> Undergraduate students of University Center of FEI
> Brazil
> --
> View this message in context:
> http://lucene.472066.n3.nabble.com/Using-categories-with-Lucene-tp1049232=
p1049232.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0015175cdee2da538f048d8f6904--

From java-user-return-46999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 11 17:22:24 2010
Return-Path: <java-user-return-46999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35324 invoked from network); 11 Aug 2010 17:22:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Aug 2010 17:22:24 -0000
Received: (qmail 23966 invoked by uid 500); 11 Aug 2010 17:22:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23903 invoked by uid 500); 11 Aug 2010 17:22:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23895 invoked by uid 99); 11 Aug 2010 17:22:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Aug 2010 17:22:21 +0000
X-ASF-Spam-Status: No, hits=-0.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [171.67.219.83] (HELO smtp.stanford.edu) (171.67.219.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Aug 2010 17:22:16 +0000
Received: from smtp.stanford.edu (localhost.localdomain [127.0.0.1])
	by localhost (Postfix) with SMTP id 6783A1A04B2
	for <java-user@lucene.apache.org>; Wed, 11 Aug 2010 10:21:55 -0700 (PDT)
Received: from gogo.stanford.edu (gogo.Stanford.EDU [171.65.75.146])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	(Authenticated sender: sweng)
	by smtp.stanford.edu (Postfix) with ESMTPSA id 9C5041A049C
	for <java-user@lucene.apache.org>; Wed, 11 Aug 2010 10:21:54 -0700 (PDT)
Content-Type: text/plain; charset=windows-1252
Mime-Version: 1.0 (Apple Message framework v1077)
Subject: word frequency counting
From: Shuai Weng <shuai@genome.stanford.edu>
In-Reply-To: <AANLkTik-EZfLo4GSrmeHSgs-puh0N6AZpOyVdfY0jxq0@mail.gmail.com>
Date: Wed, 11 Aug 2010 10:21:54 -0700
Content-Transfer-Encoding: quoted-printable
Message-Id: <F231B205-8069-4B82-861A-E0CAA44F008B@genome.stanford.edu>
References: <1281309365193-1049232.post@n3.nabble.com> <AANLkTik-EZfLo4GSrmeHSgs-puh0N6AZpOyVdfY0jxq0@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1077)
X-Spam: Probability=8%, Report='
 BODY_SIZE_3000_3999 0, BODY_SIZE_5000_LESS 0, BODY_SIZE_7000_LESS 0, DATE_TZ_NA 0, __CANPHARM_UNSUB_LINK 0, __CP_URI_IN_BODY 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __FRAUD_BODY_WEBMAIL 0, __FRAUD_WEBMAIL 0, __HAS_MSGID 0, __HAS_X_MAILER 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __MIME_VERSION_APPLEMAIL 0, __MSGID_APPLEMAIL 0, __SANE_MSGID 0, __TO_MALFORMED_2 0, __TO_NO_NAME 0, __USER_AGENT_APPLEMAIL 0, __X_MAILER_APPLEMAIL 0'


Hey,

I'm new to Lucene...  I was wondering if we can use Lucene/Solr for word =
frequency counting
(eg, in a subset of full text papers).

Thanks for any info you may provide.
Shuai

On Aug 11, 2010, at 10:16 AM, Julien Nioche wrote:

> BTW I don't remember anyone on the Nutch list suggesting you to use =
Carrot
> for this (see : http://search-lucene.com/?q=3Dluan+carrot) or =
classifying at
> querying time
>=20
> What I suggested in http://search-lucene.com/m/JWZTj1q4lB92 was about
> classifying during the parsing or indexing and generating a field for =
Lucene
> or SOLR. As Otis pointed out you can of course use SOLR for faceting. =
Since
> you will be using Nutch anyway, you might as well avoid an external DB =
just
> for storing the results of the classification and just keep the labels =
e.g.
> in the parse metadata
>=20
> Julien
> --=20
> DigitalPebble Ltd
>=20
> Open Source Solutions for Text Engineering
> http://www.digitalpebble.com
>=20
> On 9 August 2010 00:16, Luan Cestari <luan.cestari@gmail.com> wrote:
>=20
>>=20
>> Lucene developers,
>>=20
>> We=92ve been working on a undergraduate project to the college about =
changing
>> Apache Nutch (that uses Lucene do index it=92s web pages) to include =
a
>> category filter, and we are having problems about the query part. We =
want
>> to
>> develop an application with a good performance, so we thought that =
here
>> would be the best place to ask this kind of question. The idea is =
that the
>> user can search pages stored for only a category. So the number of =
results
>> found should display the number of pages that actually is classified =
in
>> that
>> category.
>>=20
>> The problem is about how to add to the Lucene indexes the category
>> information, and how filter the search on that. We tried to look on =
the
>> Nutch mailing-list (Nabble) about that and asked some help, but =
people from
>> there think that we should use some plug-in like Carrot, that get =
like 100
>> of pages and classify it in the query time. We are not very confident =
that
>> it=92s the best solution. We thought in other two different ideas: #1 =
To
>> classify those pages and store that information on a DB and in the =
query
>> time filter the result that DB to filter the result. #2 Use different =
index
>> servers, one for each category and one to search without filtering by
>> category.
>>=20
>> We have seen on this project http://search-lucene.com/ that there are
>> pre-defined categories. We think that this should be classified at =
indexing
>> time, as we wanted.
>>=20
>> Do you have any other idea about how to do that?
>>=20
>> Sincerely,
>>=20
>> Daniel Costa Gimenes & Luan Cestari
>> Undergraduate students of University Center of FEI
>> Brazil
>> --
>> View this message in context:
>> =
http://lucene.472066.n3.nabble.com/Using-categories-with-Lucene-tp1049232p=
1049232.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 11 19:44:27 2010
Return-Path: <java-user-return-47000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12273 invoked from network); 11 Aug 2010 19:44:26 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 11 Aug 2010 19:44:26 -0000
Received: (qmail 65011 invoked by uid 500); 11 Aug 2010 19:44:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64941 invoked by uid 500); 11 Aug 2010 19:44:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64932 invoked by uid 99); 11 Aug 2010 19:44:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Aug 2010 19:44:23 +0000
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of luan.cestari@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Aug 2010 19:44:19 +0000
Received: by eyg5 with SMTP id 5so428914eyg.35
        for <java-user@lucene.apache.org>; Wed, 11 Aug 2010 12:43:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=LGJhzvOutD2kocpaPz+UgYus7Saa3Iv6nsqfvF3cUe8=;
        b=Pu22Si5CtKnKxP/H00n4Z3NsEMrbtuaWmgGyIkqMiI1ElyWPgXeWlGi29t7sBNwHH0
         9SR8BZkiS/J8nhc5436m3+IcSRDf5V6BGviAOLe82L3vA8b1BqWBTvexEnyLSgwOT8Oh
         uUCK6c81HzKtTTQDpfkJEaqZgU6ZqS9MtNSWk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=vOH18D4RPEgZ96t/IvZ1tJAAttzYSBwS/d8dMOXSDlAKdLn+goapM11X/kKkhFT9Hj
         0bRVtPQ2ddWbHX8LPiVba/UwOMPQVVsxPKbIJxLzWlpgP4MT3yLsxwFyYu+TLHpmBdKD
         sUtAJzCxDZOgtxRTsq5/RChU+PhMy8cgr2ELs=
MIME-Version: 1.0
Received: by 10.213.54.140 with SMTP id q12mr6079439ebg.71.1281555837035; Wed,
 11 Aug 2010 12:43:57 -0700 (PDT)
Received: by 10.213.36.3 with HTTP; Wed, 11 Aug 2010 12:43:56 -0700 (PDT)
In-Reply-To: <AANLkTik-EZfLo4GSrmeHSgs-puh0N6AZpOyVdfY0jxq0@mail.gmail.com>
References: <1281309365193-1049232.post@n3.nabble.com>
	<AANLkTik-EZfLo4GSrmeHSgs-puh0N6AZpOyVdfY0jxq0@mail.gmail.com>
Date: Wed, 11 Aug 2010 16:43:56 -0300
Message-ID: <AANLkTimnxBcQKVWDaoQJ4okt-OxZrKj_2R=mSOUFeRB6@mail.gmail.com>
Subject: Re: Using categories with Lucene
From: Luan Cestari <luan.cestari@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163600d6e06d2ad7048d917898

--00163600d6e06d2ad7048d917898
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

Julien,

You're right. We discovered carrot by searching the mailing-list and though=
t
it was mentioned in one of our conversations. We are sorry for our mistake.

Best Regards,
Daniel Gimenes
Luan Cestari

On Wed, Aug 11, 2010 at 2:16 PM, Julien Nioche <
lists.digitalpebble@gmail.com> wrote:

> BTW I don't remember anyone on the Nutch list suggesting you to use Carro=
t
> for this (see : http://search-lucene.com/?q=3Dluan+carrot) or classifying=
 at
> querying time
>
> What I suggested in http://search-lucene.com/m/JWZTj1q4lB92 was about
> classifying during the parsing or indexing and generating a field for
> Lucene
> or SOLR. As Otis pointed out you can of course use SOLR for faceting. Sin=
ce
> you will be using Nutch anyway, you might as well avoid an external DB ju=
st
> for storing the results of the classification and just keep the labels e.=
g.
> in the parse metadata
>
> Julien
> --
> DigitalPebble Ltd
>
> Open Source Solutions for Text Engineering
> http://www.digitalpebble.com
>
> On 9 August 2010 00:16, Luan Cestari <luan.cestari@gmail.com> wrote:
>
> >
> > Lucene developers,
> >
> > We=92ve been working on a undergraduate project to the college about
> changing
> > Apache Nutch (that uses Lucene do index it=92s web pages) to include a
> > category filter, and we are having problems about the query part. We wa=
nt
> > to
> > develop an application with a good performance, so we thought that here
> > would be the best place to ask this kind of question. The idea is that
> the
> > user can search pages stored for only a category. So the number of
> results
> > found should display the number of pages that actually is classified in
> > that
> > category.
> >
> > The problem is about how to add to the Lucene indexes the category
> > information, and how filter the search on that. We tried to look on the
> > Nutch mailing-list (Nabble) about that and asked some help, but people
> from
> > there think that we should use some plug-in like Carrot, that get like
> 100
> > of pages and classify it in the query time. We are not very confident
> that
> > it=92s the best solution. We thought in other two different ideas: #1 T=
o
> > classify those pages and store that information on a DB and in the quer=
y
> > time filter the result that DB to filter the result. #2 Use different
> index
> > servers, one for each category and one to search without filtering by
> > category.
> >
> > We have seen on this project http://search-lucene.com/ that there are
> > pre-defined categories. We think that this should be classified at
> indexing
> > time, as we wanted.
> >
> > Do you have any other idea about how to do that?
> >
> > Sincerely,
> >
> > Daniel Costa Gimenes & Luan Cestari
> > Undergraduate students of University Center of FEI
> > Brazil
> > --
> > View this message in context:
> >
> http://lucene.472066.n3.nabble.com/Using-categories-with-Lucene-tp1049232=
p1049232.html
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>



--=20
Luan cestari

"All the gold which is under or upon the earth is not enough to give in
exchange for virtue."
Plato
"At his best, man is the noblest of all animals; separated from law and
justice he is the worst."
"A true friend is one soul in two bodies."
Aristotle

--00163600d6e06d2ad7048d917898--

From java-user-return-47001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 12 19:18:49 2010
Return-Path: <java-user-return-47001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54930 invoked from network); 12 Aug 2010 19:18:49 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Aug 2010 19:18:49 -0000
Received: (qmail 95748 invoked by uid 500); 12 Aug 2010 19:18:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95131 invoked by uid 500); 12 Aug 2010 19:18:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95090 invoked by uid 99); 12 Aug 2010 19:18:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Aug 2010 19:18:42 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erik.hatcher@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Aug 2010 19:18:37 +0000
Received: by qyk36 with SMTP id 36so2045317qyk.14
        for <multiple recipients>; Thu, 12 Aug 2010 12:18:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :content-type:content-transfer-encoding:subject:mime-version:date
         :x-mailer;
        bh=MmuDDCRAitW0UgPJK7sCvXKSbiktYV5sXPqQf1gi2h4=;
        b=mZmanzOQDDaZAWVbse5JpxQcCJ1T3IkxtS4Os2GyICgX/FEi1Is9R5Sq3Ht9RSNWDN
         m/8njmj9OWFzfa2dxelNLtUd3na+/2HD/NCZ6kUclD+8r2Wzc/RlC36CXmyCAIdh8sEO
         tQszsRH+hdv7B9UwJBpSKON33ThEFfYiqSPa4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:content-type:content-transfer-encoding:subject
         :mime-version:date:x-mailer;
        b=h04QOyLnw+k8sA28kiJ0IvIWOLqUjA9NS6uVdYW3q4E4MuBt3aqdob3C0Bz/SAbdbc
         4V6CCOz+h574FMSyJMExE/YsPpA+bhtoEWj6+TmFWU8O/47AHDtyRwOTsWftn1tyoo2t
         gO3hY43+RTnMRmklDzRwb0sa0Lsr65SFYWxr4=
Received: by 10.220.59.202 with SMTP id m10mr404715vch.56.1281640695292;
        Thu, 12 Aug 2010 12:18:15 -0700 (PDT)
Received: from [10.0.0.41] ([65.242.47.202])
        by mx.google.com with ESMTPS id v11sm1107067vbb.13.2010.08.12.12.18.12
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 12 Aug 2010 12:18:13 -0700 (PDT)
Message-Id: <E8BE243B-938F-4F61-BFD4-8D24351AB924@gmail.com>
From: Erik Hatcher <erik.hatcher@gmail.com>
To: solr-user@lucene.apache.org,
 general@lucene.apache.org,
 java-user@lucene.apache.org
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Subject: Free Webinar: Findability: Designing the Search Experience 
Mime-Version: 1.0 (Apple Message framework v936)
Date: Thu, 12 Aug 2010 15:17:35 -0400
X-Mailer: Apple Mail (2.936)

Here's perhaps the coolest webinar we've done to date, IMO :)

I attended Tyler's presentation at Lucene EuroCon* and thoroughly =20
enjoyed it.  Search UI/UX is a fascinating topic to me, and really =20
important to do well for the applications most of us are building.

I'm pleased to pass along the blurb below.  See you there!

	Erik

* http://lucene-eurocon.org/sessions-track2-day2.html#3

--------

Lucid Imagination presents a free webinar
Wednesday, August 18, 2010 10:00 AM PST / 1:00 PM EST / 19:00 CET
Sign up at http://www.eventsvc.com/lucidimagination/081810?trk=3Dap

You don't need billions of dollars or users to build a user-friendly =20
search application. In fact, studies of how and why people search have =20=

revealed a set of principles that can  result in happy users who find =20=

what they're seeking with as little friction as possible -- and help =20
you build a better, more successful search application.

Join special guest Tyler Tate, user experience designer at UK-based =20
TwigKit Search, for a high-level discussion of key user interface =20
strategies for search that can be leveraged with Lucene and Solr. The =20=

presentation covers:
* Ten things to know about designing the search experience
* When to assume users know what they=92re looking for =96 and when not =
to
* Navigation/discovery techniques, such as faceted navigation, tag =20
clouds, histograms and more
* Practical considerations in leveraging suggestions into search =20
interactions

Lucid Imagination presents a free webinar
Wednesday, August 18, 2010 10:00 AM PST / 1:00 PM EST / 19:00 CET
Sign up at http://www.eventsvc.com/lucidimagination/081810?trk=3Dap

About the presenter: Tyler Tate is co-founder of TwigKit, a UK-based =20
company focused on building truly usable interfaces for search. Tyler =20=

has led user experience design for enterprise applications from CMS to =20=

CRM, and is the creator of the popular 1KB CSS Grid. Tyler also =20
organizes a monthly Enterprise Search Meetup in London, and blogs at =20
blog.twigkit.com.

-------------------------------------------------
Join the Revolution!
Don't miss Lucene Revolution
Lucene & Solr User Conference
Boston | October 7-8 2010
http://lucenerevolution.org
-------------------------------------------------

This webinar is sponsored by Lucid Imagination, the commercial entity =20=

exclusively dedicated to Apache Lucene/Solr open source search =20
technology. Our solutions can help you develop and deploy search =20
solutions with confidence: SLA-based support subscriptions, =20
professional training, best practices consulting, along with and value-=20=

add software and free documentation and certified distributions of =20
Lucene and Solr.

"Apache Lucene" and "Apache Solr" are trademarks of the Apache =20
Software Foundation.=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 13 07:58:54 2010
Return-Path: <java-user-return-47002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25883 invoked from network); 13 Aug 2010 07:58:54 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 Aug 2010 07:58:54 -0000
Received: (qmail 85241 invoked by uid 500); 13 Aug 2010 07:58:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84844 invoked by uid 500); 13 Aug 2010 07:58:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84836 invoked by uid 99); 13 Aug 2010 07:58:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Aug 2010 07:58:47 +0000
X-ASF-Spam-Status: No, hits=3.8 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of crackeur@comcast.net designates 76.96.30.24 as permitted sender)
Received: from [76.96.30.24] (HELO qmta02.emeryville.ca.mail.comcast.net) (76.96.30.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Aug 2010 07:58:39 +0000
Received: from omta18.emeryville.ca.mail.comcast.net ([76.96.30.74])
	by qmta02.emeryville.ca.mail.comcast.net with comcast
	id tjyJ1e0011bwxycA2jyJ6k; Fri, 13 Aug 2010 07:58:18 +0000
Received: from JimmyZhangPC ([24.6.50.139])
	by omta18.emeryville.ca.mail.comcast.net with comcast
	id tjyJ1e00230BdcQ8ejyJ4J; Fri, 13 Aug 2010 07:58:18 +0000
Message-ID: <41EE55673BC042149AC3DC8734C0FA9E@JimmyZhangPC>
From: "Jimmy Zhang" <crackeur@comcast.net>
To: <java-user@lucene.apache.org>
References: <AANLkTi=6DWiryDozqHUWqsVgDtsZHHSpQ6O=AcezsJL8@mail.gmail.com> <AANLkTinYxW4r=mnW-nvRzgu7X7kE2jmEoYqrVAJdGXSk@mail.gmail.com>
In-Reply-To: <AANLkTinYxW4r=mnW-nvRzgu7X7kE2jmEoYqrVAJdGXSk@mail.gmail.com>
Subject: [ANN]VTD-XML 2.9
Date: Fri, 13 Aug 2010 00:58:19 -0700
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0212_01CB3A82.9F0ADD80"
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 14.0.8089.726
X-MimeOLE: Produced By Microsoft MimeOLE V14.0.8089.726

------=_NextPart_000_0212_01CB3A82.9F0ADD80
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

VTD-XML 2.9, the next generation XML Processing API for SOA and Cloud =
computing, has been released. Please visit  =
https://sourceforge.net/projects/vtd-xml/files/ to download the latest =
version.
  a.. Strict Conformance=20
    a.. VTD-XML now fully conforms to XML namespace 1.0 spec=20
  b.. Performance Improvement
    a.. Significantly improved parsing performance for small XML files=20
  c.. Expand Core VTD-XML API =20
    a.. Adds getPrefixString(), and toNormalizedString2()=20
  d.. Cutting/Splitting=20
    a.. Adds getSiblingElementFragment() =20
  e.. A number of bug fixes and code enhancement including:=20
    a.. Fixes a bug for reading very large XML documents on some =
platforms=20
    b.. Fixes a bug in parsing processing instruction=20
    c.. Fixes a bug in outputAndReparse()=20

------=_NextPart_000_0212_01CB3A82.9F0ADD80--


From java-user-return-47003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 13 08:52:31 2010
Return-Path: <java-user-return-47003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42429 invoked from network); 13 Aug 2010 08:52:31 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 Aug 2010 08:52:31 -0000
Received: (qmail 21495 invoked by uid 500); 13 Aug 2010 08:52:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20948 invoked by uid 500); 13 Aug 2010 08:52:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20940 invoked by uid 99); 13 Aug 2010 08:52:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Aug 2010 08:52:23 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [85.158.139.211] (HELO mail206.messagelabs.com) (85.158.139.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Aug 2010 08:52:17 +0000
X-VirusChecked: Checked
X-Env-Sender: wzzelfzzel@abas.de
X-Msg-Ref: server-5.tower-206.messagelabs.com!1281689514!18543523!1
X-StarScan-Version: 6.2.4; banners=-,-,-
X-Originating-IP: [212.202.226.202]
Received: (qmail 27776 invoked from network); 13 Aug 2010 08:51:55 -0000
Received: from gate.abas.de (HELO gate.abas.de) (212.202.226.202)
  by server-5.tower-206.messagelabs.com with DHE-RSA-AES256-SHA encrypted SMTP; 13 Aug 2010 08:51:55 -0000
Received: from gate.abas.de (localhost [127.0.0.1])
	by gate.abas.de (8.14.3/8.14.3) with ESMTP id o7D8psbR007344
	for <java-user@lucene.apache.org>; Fri, 13 Aug 2010 10:51:54 +0200 (CEST)
Received: (from localhost) by gate.abas.de (MSCAN) id 3/gate.abas.de/smtp-gw/mscan; Fri Aug 13 10:51:54 2010
From: Stefan Trcek <wzzelfzzel@abas.de>
To: java-user@lucene.apache.org
Subject: Re: [ANN] Free technical webinar:  Mastering the Lucene Index: Wednesday, August 11, 2010 11:00 AM PST / 2:00 PM EST / 20:00 CET
Date: Fri, 13 Aug 2010 10:51:51 +0200
User-Agent: KMail/1.9.10
References: <4C60540E.7050106@gmail.com>
In-Reply-To: <4C60540E.7050106@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-ID: <201008131051.52051.wzzelfzzel@abas.de>
X-ABAS-MAIL-MARK: added by mailmarker.abas.de

On Monday 09 August 2010 21:16:30 Mark Miller wrote:
> Lucid Imagination Presents a free technical webinar: =A0Mastering the
> Lucene Index
> Wednesday, August 11, 2010 11:00 AM PST / 2:00 PM EST / 20:00 CET
>
> Sign up here:
> http://www.eventsvc.com/lucidimagination/081110?trk-AP

Did this work for anybody?
After registrating and selecting the webinar there was no information=20
how to proceed ... until 21:00 CET a broken(*) mail arrived,=20
titled "You are confirmed..." and containing a link "Click here to=20
attend". The webpage of this link claimed that this event has ended,=20
not really unexpected as it was one hour late now. Plenty data for=20
registration required and the account seems to be undeletable.

(*) sending xhtml claiming to be text/plain

regards,
Stefan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 13 12:17:31 2010
Return-Path: <java-user-return-47004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28237 invoked from network); 13 Aug 2010 12:17:31 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 Aug 2010 12:17:31 -0000
Received: (qmail 58260 invoked by uid 500); 13 Aug 2010 12:17:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57925 invoked by uid 500); 13 Aug 2010 12:17:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57917 invoked by uid 99); 13 Aug 2010 12:17:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Aug 2010 12:17:24 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erik.hatcher@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Aug 2010 12:17:18 +0000
Received: by qyk34 with SMTP id 34so3416211qyk.14
        for <java-user@lucene.apache.org>; Fri, 13 Aug 2010 05:16:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=aAfwM2h29+eZIi6fH/G7EDK0hduLH4o01/e7RxGCeVA=;
        b=Oo45jNOx89bwqihpWJdPpqOFAmSYilsdM6YwZDEVhQHex4W8tb9Jpk5qaP9yh0wvjO
         o+z3de7qVWx6apWvrImxH0m8sIG96IoQ/X6lROpQnLSCo6w6GZDDdq87s+MTfFNQPj9b
         B9/ERLeeZLCqHf5/vujLAz6GNO+7myGDafx4k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=bMw73IhkwAV1PTYh0li7sIw2FOOinFVcTQ04aEU8ckyYQGNlaRnRzKQ4XGrLYH0ynP
         tGfi/uqt9Hyqi87PvnZgFNODqlKJnu8CFLFyz7wPme4h1ToGIP+oCyBM6Z1MB1pmzlk3
         EKMaZWrJQYxWrT+6eI242t/VNnU1qE809lm8Q=
Received: by 10.224.79.151 with SMTP id p23mr937701qak.312.1281701817931;
        Fri, 13 Aug 2010 05:16:57 -0700 (PDT)
Received: from [10.0.1.11] (c-71-63-2-238.hsd1.va.comcast.net [71.63.2.238])
        by mx.google.com with ESMTPS id n6sm3328149qcu.31.2010.08.13.05.16.54
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 13 Aug 2010 05:16:55 -0700 (PDT)
Message-Id: <BF706E9A-79C8-42A4-B6E3-7515FBF19647@gmail.com>
From: Erik Hatcher <erik.hatcher@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <201008131051.52051.wzzelfzzel@abas.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v936)
Subject: Re: [ANN] Free technical webinar:  Mastering the Lucene Index: Wednesday, August 11, 2010 11:00 AM PST / 2:00 PM EST / 20:00 CET
Date: Fri, 13 Aug 2010 08:16:53 -0400
References: <4C60540E.7050106@gmail.com> <201008131051.52051.wzzelfzzel@abas.de>
X-Mailer: Apple Mail (2.936)

I have passed this report on to the folks that manage our webinars.

	Erik

On Aug 13, 2010, at 4:51 AM, Stefan Trcek wrote:

> On Monday 09 August 2010 21:16:30 Mark Miller wrote:
>> Lucid Imagination Presents a free technical webinar:  Mastering the
>> Lucene Index
>> Wednesday, August 11, 2010 11:00 AM PST / 2:00 PM EST / 20:00 CET
>>
>> Sign up here:
>> http://www.eventsvc.com/lucidimagination/081110?trk-AP
>
> Did this work for anybody?
> After registrating and selecting the webinar there was no information
> how to proceed ... until 21:00 CET a broken(*) mail arrived,
> titled "You are confirmed..." and containing a link "Click here to
> attend". The webpage of this link claimed that this event has ended,
> not really unexpected as it was one hour late now. Plenty data for
> registration required and the account seems to be undeletable.
>
> (*) sending xhtml claiming to be text/plain
>
> regards,
> Stefan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 13 19:13:51 2010
Return-Path: <java-user-return-47005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43464 invoked from network); 13 Aug 2010 19:13:51 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 Aug 2010 19:13:51 -0000
Received: (qmail 65633 invoked by uid 500); 13 Aug 2010 19:13:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65524 invoked by uid 500); 13 Aug 2010 19:13:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65516 invoked by uid 99); 13 Aug 2010 19:13:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Aug 2010 19:13:48 +0000
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [68.142.200.128] (HELO web30605.mail.mud.yahoo.com) (68.142.200.128)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 13 Aug 2010 19:13:42 +0000
Received: (qmail 57707 invoked by uid 60001); 13 Aug 2010 19:13:20 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1281726800; bh=YC2AypPyeZM8VZM2olVJzkzHFGKyhs7XHR3r+3NFAi8=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=qTWHojnktHV5HcU0PbhcNImGhDt5ajzkCriCNPrvtAlrHrB2w5wZMjPWHdPVNSC4s1KHkogEwCmOMnUghPPksRGaZwmEQvl4oXbTcIYQnl9rWAt0R6h3L+rWfmOCizPoLrRc5e8IcOujZ/OVtRpi8oya4sBytzHFsKuKnPYFOWE=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=hwdZ/1UAHXuUJkyqjs+Pw84aORvJ6FR0HTJpUB0kTqh4CVY6hAqXtvlwYvWf1FkIkmCqVIh6FQLfUWDPVTN31geRmoKKQ/wq+sWIp4WP9JYKxvfQT2ZckoBsqYZvO9RLQM8msOcG6+Aotbky+XR80S+F/rv0dZeopeX/qtYjxV0=;
Message-ID: <189507.56195.qm@web30605.mail.mud.yahoo.com>
X-YMail-OSG: pHCjNhwVM1lXV32o_soUjVLgnswWRSu94L4wAyhW6gsdpaT
 FPXTmDM7xP47x4pqKVAERw7o7No8qtiHHR37JPxS.0leJPjtDWDJeS3kQJ3I
 hlTisF4FUeiF_dy.Bk8b7cWy8tKc.gGAL6F9xa9XYOZUC.MHKSRJjac1Ozhk
 bfxjb55q0NNDHNisdgzAvhdbeGG8CHIM1PMBBIJGRhGTlTZeKftOdJYuULF8
 nYk8uTwtyuJkvtSRqgpgAfu8bMyVHOKSZDEWN6ZeSazFiFftnypjGhVXKtO5
 94iXnLiDfG0J.L2xsu9m121k6OFfxgDOWWITI.8ltm08WjpuOfItYBK2.V9g
 KGQIOu4Rg8oULZPsp10sDzK5zyHs-
Received: from [98.233.40.157] by web30605.mail.mud.yahoo.com via HTTP; Fri, 13 Aug 2010 12:13:20 PDT
X-Mailer: YahooMailRC/470 YahooMailWebService/0.8.105.279950
References: <1281309365193-1049232.post@n3.nabble.com> <AANLkTik-EZfLo4GSrmeHSgs-puh0N6AZpOyVdfY0jxq0@mail.gmail.com> <F231B205-8069-4B82-861A-E0CAA44F008B@genome.stanford.edu>
Date: Fri, 13 Aug 2010 12:13:20 -0700 (PDT)
From: Greg Gershman <greggersh@yahoo.com>
Subject: Re: word frequency counting
To: java-user@lucene.apache.org
In-Reply-To: <F231B205-8069-4B82-861A-E0CAA44F008B@genome.stanford.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1789590307-1281726800=:56195"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1789590307-1281726800=:56195
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Absolutely!=0A=0AIndex your documents, then open an IndexReader and take a =
look at the terms() =0Amethod.  You can grab each term, and pass it to the =
IndexReader using the =0AdocFreq(Term t) method and get back the number of =
documents that term appears =0Ain.=0A=0AGreg=0A=0A=0A=0A___________________=
_____________=0AFrom: Shuai Weng <shuai@genome.stanford.edu>=0ATo: java-use=
r@lucene.apache.org=0ASent: Wed, August 11, 2010 1:21:54 PM=0ASubject: word=
 frequency counting=0A=0A=0AHey,=0A=0AI'm new to Lucene...  I was wondering=
 if we can use Lucene/Solr for word =0Afrequency counting=0A(eg, in a subse=
t of full text papers).=0A=0AThanks for any info you may provide.=0AShuai=
=0A=0AOn Aug 11, 2010, at 10:16 AM, Julien Nioche wrote:=0A=0A> BTW I don't=
 remember anyone on the Nutch list suggesting you to use Carrot=0A> for thi=
s (see : http://search-lucene.com/?q=3Dluan+carrot) or classifying at=0A> q=
uerying time=0A> =0A> What I suggested in http://search-lucene.com/m/JWZTj1=
q4lB92 was about=0A> classifying during the parsing or indexing and generat=
ing a field for Lucene=0A> or SOLR. As Otis pointed out you can of course u=
se SOLR for faceting. Since=0A> you will be using Nutch anyway, you might a=
s well avoid an external DB just=0A> for storing the results of the classif=
ication and just keep the labels e.g.=0A> in the parse metadata=0A> =0A> Ju=
lien=0A> -- =0A> DigitalPebble Ltd=0A> =0A> Open Source Solutions for Text =
Engineering=0A> http://www.digitalpebble.com=0A> =0A> On 9 August 2010 00:1=
6, Luan Cestari <luan.cestari@gmail.com> wrote:=0A> =0A>> =0A>> Lucene deve=
lopers,=0A>> =0A>> We=E2=80=99ve been working on a undergraduate project to=
 the college about changing=0A>> Apache Nutch (that uses Lucene do index it=
=E2=80=99s web pages) to include a=0A>> category filter, and we are having =
problems about the query part. We want=0A>> to=0A>> develop an application =
with a good performance, so we thought that here=0A>> would be the best pla=
ce to ask this kind of question. The idea is that the=0A>> user can search =
pages stored for only a category. So the number of results=0A>> found shoul=
d display the number of pages that actually is classified in=0A>> that=0A>>=
 category.=0A>> =0A>> The problem is about how to add to the Lucene indexes=
 the category=0A>> information, and how filter the search on that. We tried=
 to look on the=0A>> Nutch mailing-list (Nabble) about that and asked some =
help, but people from=0A>> there think that we should use some plug-in like=
 Carrot, that get like 100=0A>> of pages and classify it in the query time.=
 We are not very confident that=0A>> it=E2=80=99s the best solution. We tho=
ught in other two different ideas: #1 To=0A>> classify those pages and stor=
e that information on a DB and in the query=0A>> time filter the result tha=
t DB to filter the result. #2 Use different index=0A>> servers, one for eac=
h category and one to search without filtering by=0A>> category.=0A>> =0A>>=
 We have seen on this project http://search-lucene.com/ that there are=0A>>=
 pre-defined categories. We think that this should be classified at indexin=
g=0A>> time, as we wanted.=0A>> =0A>> Do you have any other idea about how =
to do that?=0A>> =0A>> Sincerely,=0A>> =0A>> Daniel Costa Gimenes & Luan Ce=
stari=0A>> Undergraduate students of University Center of FEI=0A>> Brazil=
=0A>> --=0A>> View this message in context:=0A>>http://lucene.472066.n3.nab=
ble.com/Using-categories-with-Lucene-tp1049232p1049232.html=0A>>l=0A>> Sent=
 from the Lucene - Java Users mailing list archive at Nabble.com.=0A>> =0A>=
> ---------------------------------------------------------------------=0A>=
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A>> For =
additional commands, e-mail: java-user-help@lucene.apache.org=0A>> =0A>> =
=0A=0A=0A------------------------------------------------------------------=
---=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor=
 additional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A    =
  
--0-1789590307-1281726800=:56195--

From java-user-return-47006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 14 01:25:10 2010
Return-Path: <java-user-return-47006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88740 invoked from network); 14 Aug 2010 01:25:10 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Aug 2010 01:25:10 -0000
Received: (qmail 25661 invoked by uid 500); 14 Aug 2010 01:25:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25575 invoked by uid 500); 14 Aug 2010 01:25:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25567 invoked by uid 99); 14 Aug 2010 01:25:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Aug 2010 01:25:07 +0000
X-ASF-Spam-Status: No, hits=3.0 required=10.0
	tests=FORGED_YAHOO_RCVD,FREEMAIL_FROM,SPF_HELO_PASS,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Aug 2010 01:25:02 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <andrew_nuss@yahoo.com>)
	id 1Ok5UH-0001Zk-JK
	for java-user@lucene.apache.org; Fri, 13 Aug 2010 18:24:41 -0700
Date: Fri, 13 Aug 2010 18:24:41 -0700 (PDT)
From: andynuss <andrew_nuss@yahoo.com>
To: java-user@lucene.apache.org
Message-ID: <1281749081591-1142517.post@n3.nabble.com>
Subject: scalability limit in terms of numbers of large documents
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hi,

Lets say that I am indexing large book documents broken into chapters.  A
typical book that you buy at amazon.  What would be the approximate limit to
the number of books that can be indexed slowly and searched quickly.  The
search unit would be a chapter, so assume that a book is divided into 15-50
chapters.  Any ideas?

Andy
-- 
View this message in context: http://lucene.472066.n3.nabble.com/scalability-limit-in-terms-of-numbers-of-large-documents-tp1142517p1142517.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 14 10:12:01 2010
Return-Path: <java-user-return-47007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44101 invoked from network); 14 Aug 2010 10:12:01 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Aug 2010 10:12:01 -0000
Received: (qmail 84511 invoked by uid 500); 14 Aug 2010 10:11:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83915 invoked by uid 500); 14 Aug 2010 10:11:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83907 invoked by uid 99); 14 Aug 2010 10:11:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Aug 2010 10:11:52 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of andrew.bruno@gmail.com designates 209.85.215.48 as permitted sender)
Received: from [209.85.215.48] (HELO mail-ew0-f48.google.com) (209.85.215.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Aug 2010 10:11:44 +0000
Received: by ewy10 with SMTP id 10so2483707ewy.35
        for <java-user@lucene.apache.org>; Sat, 14 Aug 2010 03:11:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=hvskJqxoepYN3jg4ayN0oW/lUZMwdnKgbB/x5jz8b28=;
        b=ExQIqGzugpC4Tl06VMtI9k4YEQlnht5Q9hXqiUyVsPnAiiEaJ9/KIek6SbmFxcTSQQ
         elzgfCaSoEg21emAQGL9FvOxrIXDUcFONUqCdMugAAwyMRLzoUeGIbO2XVH+0hXdfeyZ
         c4NPN684v/TfmwQUrSrhrT3hdRPLM5BQjvxSI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=uBxPH5BQXRnMNiP8mu57IunfC5BiPN2RjLXXlYrBrwJ23Fu+QsKgXVlvgJs88OGrJe
         q9BO4a+BSQRJpTTut6GAz97BDDWW2TDOdyZT/Prjk+qiNBZKK4md1QF4vRQpyxVF9E7Y
         37oexC06FHynathzWWPeJjZGz1AsECF4uGBHg=
MIME-Version: 1.0
Received: by 10.213.113.141 with SMTP id a13mr535435ebq.7.1281780684034; Sat,
 14 Aug 2010 03:11:24 -0700 (PDT)
Received: by 10.14.29.1 with HTTP; Sat, 14 Aug 2010 03:11:24 -0700 (PDT)
Date: Sat, 14 Aug 2010 20:11:24 +1000
Message-ID: <AANLkTinTicbY_rEQiaNFGor+ghnE_JqQf0WOu_bKMK5c@mail.gmail.com>
Subject: 140GB index directory, what can I do?
From: Andrew Bruno <andrew.bruno@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I have an index directory that is growing pretty fast, and is now at 138GB.

A while ago, this index got corrupted.  It was rebuilt, but the
engineer cannot remember whether he deleted the corrupt directory
before the rebuild.  Is there a way to know if any files are not being
used or whether they can be purged, merged, etc?

The files are listed below.

08/14/2010  02:51 AM    <DIR>          ..
03/24/2010  11:22 PM                 0 clearcache
08/14/2010  02:51 AM                 4 deletable
08/14/2010  02:51 AM               369 segments
03/29/2010  02:29 AM   135,941,156,712 _1x3.cfs
08/13/2010  08:24 AM           275,615 _1x3.del
05/10/2010  09:59 AM       977,999,933 _491b.cfs
08/10/2010  12:46 PM            17,304 _491b.del
06/18/2010  09:33 PM       809,473,470 _7sr7.cfs
08/06/2010  07:10 AM            15,038 _7sr7.del
07/23/2010  11:34 PM       559,421,479 _aeps.cfs
08/13/2010  07:20 AM            11,276 _aeps.del
08/09/2010  09:23 AM       299,717,058 _bu0l.cfs
08/12/2010  12:42 PM             6,387 _bu0l.del
08/11/2010  02:46 PM        66,910,259 _c4x4.cfs
08/11/2010  04:06 PM             1,401 _c4x4.del
08/13/2010  02:11 PM        45,009,744 _cc9c.cfs
08/13/2010  03:59 PM               944 _cc9c.del
08/13/2010  04:03 PM         3,409,701 _ccqa.cfs
08/13/2010  04:29 PM                79 _ccqa.del
08/13/2010  10:42 PM           900,521 _ccvl.cfs
08/14/2010  12:01 AM                29 _ccvl.del
08/14/2010  12:00 AM           589,015 _cczi.cfs
08/14/2010  12:07 AM                24 _cczi.del
08/14/2010  12:05 AM           260,231 _cd0v.cfs
08/14/2010  02:44 AM           324,498 _cd1z.cfs
08/14/2010  02:44 AM            10,651 _cd20.cfs
08/14/2010  02:45 AM             6,427 _cd21.cfs
08/14/2010  02:45 AM             6,702 _cd22.cfs
08/14/2010  02:45 AM             9,024 _cd23.cfs
08/14/2010  02:45 AM            10,641 _cd24.cfs
08/14/2010  02:46 AM             9,037 _cd25.cfs
08/14/2010  02:46 AM             6,297 _cd26.cfs
08/14/2010  02:46 AM             6,504 _cd27.cfs
08/14/2010  02:46 AM            56,164 _cd28.cfs
08/14/2010  02:47 AM                 9 _cd28.del
08/14/2010  02:47 AM            56,246 _cd29.cfs
08/14/2010  02:47 AM             7,093 _cd2a.cfs
08/14/2010  02:47 AM                 9 _cd2a.del
08/14/2010  02:47 AM             7,179 _cd2b.cfs
08/14/2010  02:48 AM            10,324 _cd2c.cfs
08/14/2010  02:48 AM                 9 _cd2c.del
08/14/2010  02:48 AM            10,412 _cd2d.cfs
08/14/2010  02:49 AM            67,808 _cd2e.cfs
08/14/2010  02:49 AM             6,431 _cd2f.cfs
08/14/2010  02:49 AM             6,419 _cd2g.cfs
08/14/2010  02:49 AM            10,394 _cd2h.cfs
08/14/2010  02:49 AM            10,417 _cd2i.cfs
08/14/2010  02:49 AM             8,379 _cd2j.cfs
08/14/2010  02:50 AM             5,982 _cd2k.cfs
08/14/2010  02:50 AM             5,670 _cd2l.cfs
08/14/2010  02:51 AM             5,622 _cd2m.cfs
              51 File(s) 138,705,840,941 bytes

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 14 10:14:39 2010
Return-Path: <java-user-return-47008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44714 invoked from network); 14 Aug 2010 10:14:38 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Aug 2010 10:14:38 -0000
Received: (qmail 89353 invoked by uid 500); 14 Aug 2010 10:14:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89210 invoked by uid 500); 14 Aug 2010 10:14:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89202 invoked by uid 99); 14 Aug 2010 10:14:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Aug 2010 10:14:32 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Aug 2010 10:14:25 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id B850A45E757
	for <java-user@lucene.apache.org>; Sat, 14 Aug 2010 12:14:04 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id m0J-t2ikWUPx for <java-user@lucene.apache.org>;
	Sat, 14 Aug 2010 12:13:50 +0200 (CEST)
Received: from VEGA (dslb-088-065-071-010.pools.arcor-ip.net [88.65.71.10])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id D7D2C45E73D
	for <java-user@lucene.apache.org>; Sat, 14 Aug 2010 12:13:49 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTinTicbY_rEQiaNFGor+ghnE_JqQf0WOu_bKMK5c@mail.gmail.com>
In-Reply-To: <AANLkTinTicbY_rEQiaNFGor+ghnE_JqQf0WOu_bKMK5c@mail.gmail.com>
Subject: RE: 140GB index directory, what can I do?
Date: Sat, 14 Aug 2010 12:15:02 +0200
Message-ID: <000101cb3b99$8f592410$ae0b6c30$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQHazRbdffq2LoHDxqNsOngAgKS2lZLBmMhA
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Optimize the index one time then all unused segment files are *for-sure*
removed.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Andrew Bruno [mailto:andrew.bruno@gmail.com]
> Sent: Saturday, August 14, 2010 12:11 PM
> To: java-user@lucene.apache.org
> Subject: 140GB index directory, what can I do?
> 
> Hi all,
> 
> I have an index directory that is growing pretty fast, and is now at
138GB.
> 
> A while ago, this index got corrupted.  It was rebuilt, but the engineer
cannot
> remember whether he deleted the corrupt directory before the rebuild.  Is
> there a way to know if any files are not being used or whether they can be
> purged, merged, etc?
> 
> The files are listed below.
> 
> 08/14/2010  02:51 AM    <DIR>          ..
> 03/24/2010  11:22 PM                 0 clearcache
> 08/14/2010  02:51 AM                 4 deletable
> 08/14/2010  02:51 AM               369 segments
> 03/29/2010  02:29 AM   135,941,156,712 _1x3.cfs
> 08/13/2010  08:24 AM           275,615 _1x3.del
> 05/10/2010  09:59 AM       977,999,933 _491b.cfs
> 08/10/2010  12:46 PM            17,304 _491b.del
> 06/18/2010  09:33 PM       809,473,470 _7sr7.cfs
> 08/06/2010  07:10 AM            15,038 _7sr7.del
> 07/23/2010  11:34 PM       559,421,479 _aeps.cfs
> 08/13/2010  07:20 AM            11,276 _aeps.del
> 08/09/2010  09:23 AM       299,717,058 _bu0l.cfs
> 08/12/2010  12:42 PM             6,387 _bu0l.del
> 08/11/2010  02:46 PM        66,910,259 _c4x4.cfs
> 08/11/2010  04:06 PM             1,401 _c4x4.del
> 08/13/2010  02:11 PM        45,009,744 _cc9c.cfs
> 08/13/2010  03:59 PM               944 _cc9c.del
> 08/13/2010  04:03 PM         3,409,701 _ccqa.cfs
> 08/13/2010  04:29 PM                79 _ccqa.del
> 08/13/2010  10:42 PM           900,521 _ccvl.cfs
> 08/14/2010  12:01 AM                29 _ccvl.del
> 08/14/2010  12:00 AM           589,015 _cczi.cfs
> 08/14/2010  12:07 AM                24 _cczi.del
> 08/14/2010  12:05 AM           260,231 _cd0v.cfs
> 08/14/2010  02:44 AM           324,498 _cd1z.cfs
> 08/14/2010  02:44 AM            10,651 _cd20.cfs
> 08/14/2010  02:45 AM             6,427 _cd21.cfs
> 08/14/2010  02:45 AM             6,702 _cd22.cfs
> 08/14/2010  02:45 AM             9,024 _cd23.cfs
> 08/14/2010  02:45 AM            10,641 _cd24.cfs
> 08/14/2010  02:46 AM             9,037 _cd25.cfs
> 08/14/2010  02:46 AM             6,297 _cd26.cfs
> 08/14/2010  02:46 AM             6,504 _cd27.cfs
> 08/14/2010  02:46 AM            56,164 _cd28.cfs
> 08/14/2010  02:47 AM                 9 _cd28.del
> 08/14/2010  02:47 AM            56,246 _cd29.cfs
> 08/14/2010  02:47 AM             7,093 _cd2a.cfs
> 08/14/2010  02:47 AM                 9 _cd2a.del
> 08/14/2010  02:47 AM             7,179 _cd2b.cfs
> 08/14/2010  02:48 AM            10,324 _cd2c.cfs
> 08/14/2010  02:48 AM                 9 _cd2c.del
> 08/14/2010  02:48 AM            10,412 _cd2d.cfs
> 08/14/2010  02:49 AM            67,808 _cd2e.cfs
> 08/14/2010  02:49 AM             6,431 _cd2f.cfs
> 08/14/2010  02:49 AM             6,419 _cd2g.cfs
> 08/14/2010  02:49 AM            10,394 _cd2h.cfs
> 08/14/2010  02:49 AM            10,417 _cd2i.cfs
> 08/14/2010  02:49 AM             8,379 _cd2j.cfs
> 08/14/2010  02:50 AM             5,982 _cd2k.cfs
> 08/14/2010  02:50 AM             5,670 _cd2l.cfs
> 08/14/2010  02:51 AM             5,622 _cd2m.cfs
>               51 File(s) 138,705,840,941 bytes
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 14 10:55:37 2010
Return-Path: <java-user-return-47009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53894 invoked from network); 14 Aug 2010 10:55:36 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Aug 2010 10:55:36 -0000
Received: (qmail 3331 invoked by uid 500); 14 Aug 2010 10:55:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2734 invoked by uid 500); 14 Aug 2010 10:55:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2726 invoked by uid 99); 14 Aug 2010 10:55:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Aug 2010 10:55:29 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ramneekm@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Aug 2010 10:55:22 +0000
Received: by qyk12 with SMTP id 12so535072qyk.14
        for <java-user@lucene.apache.org>; Sat, 14 Aug 2010 03:55:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=8zoAVplRIyV2d2bDBukBoED8r93sG2QtqT2lisXaCqY=;
        b=Y4Gs6h5yIf/7grvnEQ6Sw+X7Po02gdi1WoJYulx4zqI7/DaELMIACYki043jQf/u5s
         fQ5D9VPmaKgvFMfUiwvQmY3neBXZ6ki0DeVMwJMrWK/Q2RSfnXFS3ZO9APcD+0I+BKTV
         jFX4O2BU+TQm3BmskiXXAO4UUmaA7kmXw+PUE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=eW811CMUFoKSt6GeE/l/D2C/A5OlmpOrZveQTxjYwSO3ZMWaUY2Z9ZKvh0NMHer5BO
         3+r3Y24/NetmZ9sq4aeai3N7qxaPfT1/qSDlkgZagzrlQTOLnbpy7XJiy9JcjcoSIsiC
         xP72Tw3U+ABFt0XL8fMlVsMm5fqZV/dxmMJu0=
MIME-Version: 1.0
Received: by 10.224.93.130 with SMTP id v2mr1748622qam.253.1281783301194; Sat,
 14 Aug 2010 03:55:01 -0700 (PDT)
Received: by 10.229.62.144 with HTTP; Sat, 14 Aug 2010 03:55:01 -0700 (PDT)
Date: Sat, 14 Aug 2010 20:55:01 +1000
Message-ID: <AANLkTinCgZJJK7_xWCdeDg8yuC=PaTbkas0_yKocE_H5@mail.gmail.com>
Subject: lucene usage on TREC data
From: Ramneek Maan Singh <ramneekm@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000feaf1486158c668048dc66ec5
X-Virus-Checked: Checked by ClamAV on apache.org

--000feaf1486158c668048dc66ec5
Content-Type: text/plain; charset=ISO-8859-1

Hello Everyone,

Can anyone point me to a publicly Question answering system built using
lucene on TREC or non-TREC data.

Regards,
Ramneek

--000feaf1486158c668048dc66ec5--

From java-user-return-47010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 14 11:02:04 2010
Return-Path: <java-user-return-47010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54793 invoked from network); 14 Aug 2010 11:02:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Aug 2010 11:02:04 -0000
Received: (qmail 5938 invoked by uid 500); 14 Aug 2010 11:02:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5426 invoked by uid 500); 14 Aug 2010 11:01:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5413 invoked by uid 99); 14 Aug 2010 11:01:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Aug 2010 11:01:58 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of serera@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Aug 2010 11:01:51 +0000
Received: by vws4 with SMTP id 4so2685879vws.35
        for <java-user@lucene.apache.org>; Sat, 14 Aug 2010 04:01:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=+RqAjJxiXbvOMR237Sjo52QFANhrQ6Dfm+P8eRD7t6Y=;
        b=Uc9SJdNFMdvR5nL/AM56o3inGHwWm7hpp49NDf28e+ngkRdXpMFLPcuAj2sFDyvMpT
         WffKK12Tilz4qt6Nr/tHuhsT1oEKvgA8x930zs4zsXA1wwrRwzzMv2oiYZyEkvhdu/ZE
         4wt1TaRyzr3fqdgQp3r0Di+cSSaOHaF2rN/zo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=MG1E4U0jIv1bZNo618CkRovcVbKY1OqBFEuLC7zOx/h8bRwWbaBMOCaf2FVl8nqLS+
         1e9diEaO6c4BMnSJ3NUZXl6C5dXWwoFetBjywcj1eFzc3so30S+L46wNGYp7P3S8hNrx
         y9yBktffHEV3K5OvKfp1erW72E/27B9TUTXdE=
MIME-Version: 1.0
Received: by 10.220.59.5 with SMTP id j5mr1602992vch.90.1281783690737; Sat, 14
 Aug 2010 04:01:30 -0700 (PDT)
Received: by 10.220.158.72 with HTTP; Sat, 14 Aug 2010 04:01:30 -0700 (PDT)
In-Reply-To: <000101cb3b99$8f592410$ae0b6c30$@thetaphi.de>
References: <AANLkTinTicbY_rEQiaNFGor+ghnE_JqQf0WOu_bKMK5c@mail.gmail.com>
	<000101cb3b99$8f592410$ae0b6c30$@thetaphi.de>
Date: Sat, 14 Aug 2010 14:01:30 +0300
Message-ID: <AANLkTikJsMpW4ANUpJMaVQDRFkXnoCTHm55PSmnYO=Mw@mail.gmail.com>
Subject: Re: 140GB index directory, what can I do?
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0023544476f990b875048dc6853d
X-Virus-Checked: Checked by ClamAV on apache.org

--0023544476f990b875048dc6853d
Content-Type: text/plain; charset=ISO-8859-1

You can also call deleteUnusedFiles(), and all unreferenced files will be
deleted either. Make sure to set the index DeletionPolicy to
KeepOnlyLastCommit (which is the default), before you do that. That's
relevant though if you've built the index using either 3x or 4.0 code.

If not, you can achieve the same goal by, say, add a document, commit,
delete the document and commit again. The first commit will delete the
unused files. Perhaps if you simply do new IndexWriter().close() it will
delete the unused files as well, but I'm not sure.

Shai

On Sat, Aug 14, 2010 at 1:15 PM, Uwe Schindler <uwe@thetaphi.de> wrote:

> Optimize the index one time then all unused segment files are *for-sure*
> removed.
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
> > -----Original Message-----
> > From: Andrew Bruno [mailto:andrew.bruno@gmail.com]
> > Sent: Saturday, August 14, 2010 12:11 PM
> > To: java-user@lucene.apache.org
> > Subject: 140GB index directory, what can I do?
> >
> > Hi all,
> >
> > I have an index directory that is growing pretty fast, and is now at
> 138GB.
> >
> > A while ago, this index got corrupted.  It was rebuilt, but the engineer
> cannot
> > remember whether he deleted the corrupt directory before the rebuild.  Is
> > there a way to know if any files are not being used or whether they can
> be
> > purged, merged, etc?
> >
> > The files are listed below.
> >
> > 08/14/2010  02:51 AM    <DIR>          ..
> > 03/24/2010  11:22 PM                 0 clearcache
> > 08/14/2010  02:51 AM                 4 deletable
> > 08/14/2010  02:51 AM               369 segments
> > 03/29/2010  02:29 AM   135,941,156,712 _1x3.cfs
> > 08/13/2010  08:24 AM           275,615 _1x3.del
> > 05/10/2010  09:59 AM       977,999,933 _491b.cfs
> > 08/10/2010  12:46 PM            17,304 _491b.del
> > 06/18/2010  09:33 PM       809,473,470 _7sr7.cfs
> > 08/06/2010  07:10 AM            15,038 _7sr7.del
> > 07/23/2010  11:34 PM       559,421,479 _aeps.cfs
> > 08/13/2010  07:20 AM            11,276 _aeps.del
> > 08/09/2010  09:23 AM       299,717,058 _bu0l.cfs
> > 08/12/2010  12:42 PM             6,387 _bu0l.del
> > 08/11/2010  02:46 PM        66,910,259 _c4x4.cfs
> > 08/11/2010  04:06 PM             1,401 _c4x4.del
> > 08/13/2010  02:11 PM        45,009,744 _cc9c.cfs
> > 08/13/2010  03:59 PM               944 _cc9c.del
> > 08/13/2010  04:03 PM         3,409,701 _ccqa.cfs
> > 08/13/2010  04:29 PM                79 _ccqa.del
> > 08/13/2010  10:42 PM           900,521 _ccvl.cfs
> > 08/14/2010  12:01 AM                29 _ccvl.del
> > 08/14/2010  12:00 AM           589,015 _cczi.cfs
> > 08/14/2010  12:07 AM                24 _cczi.del
> > 08/14/2010  12:05 AM           260,231 _cd0v.cfs
> > 08/14/2010  02:44 AM           324,498 _cd1z.cfs
> > 08/14/2010  02:44 AM            10,651 _cd20.cfs
> > 08/14/2010  02:45 AM             6,427 _cd21.cfs
> > 08/14/2010  02:45 AM             6,702 _cd22.cfs
> > 08/14/2010  02:45 AM             9,024 _cd23.cfs
> > 08/14/2010  02:45 AM            10,641 _cd24.cfs
> > 08/14/2010  02:46 AM             9,037 _cd25.cfs
> > 08/14/2010  02:46 AM             6,297 _cd26.cfs
> > 08/14/2010  02:46 AM             6,504 _cd27.cfs
> > 08/14/2010  02:46 AM            56,164 _cd28.cfs
> > 08/14/2010  02:47 AM                 9 _cd28.del
> > 08/14/2010  02:47 AM            56,246 _cd29.cfs
> > 08/14/2010  02:47 AM             7,093 _cd2a.cfs
> > 08/14/2010  02:47 AM                 9 _cd2a.del
> > 08/14/2010  02:47 AM             7,179 _cd2b.cfs
> > 08/14/2010  02:48 AM            10,324 _cd2c.cfs
> > 08/14/2010  02:48 AM                 9 _cd2c.del
> > 08/14/2010  02:48 AM            10,412 _cd2d.cfs
> > 08/14/2010  02:49 AM            67,808 _cd2e.cfs
> > 08/14/2010  02:49 AM             6,431 _cd2f.cfs
> > 08/14/2010  02:49 AM             6,419 _cd2g.cfs
> > 08/14/2010  02:49 AM            10,394 _cd2h.cfs
> > 08/14/2010  02:49 AM            10,417 _cd2i.cfs
> > 08/14/2010  02:49 AM             8,379 _cd2j.cfs
> > 08/14/2010  02:50 AM             5,982 _cd2k.cfs
> > 08/14/2010  02:50 AM             5,670 _cd2l.cfs
> > 08/14/2010  02:51 AM             5,622 _cd2m.cfs
> >               51 File(s) 138,705,840,941 bytes
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0023544476f990b875048dc6853d--

From java-user-return-47011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 14 11:09:55 2010
Return-Path: <java-user-return-47011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60885 invoked from network); 14 Aug 2010 11:09:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Aug 2010 11:09:55 -0000
Received: (qmail 8962 invoked by uid 500); 14 Aug 2010 11:09:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8747 invoked by uid 500); 14 Aug 2010 11:09:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8739 invoked by uid 99); 14 Aug 2010 11:09:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Aug 2010 11:09:49 +0000
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Aug 2010 11:09:43 +0000
Received: by qwk3 with SMTP id 3so3086280qwk.35
        for <java-user@lucene.apache.org>; Sat, 14 Aug 2010 04:09:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=D6SZ0Y8DV2uTXdw4xNtT6skayGOzapJRu/wLN/pnxII=;
        b=RYSa/YHJyUCC7WOph0cjLwEaT2Y/fj3j6VNEcqCOo3kUPtwkJBDr0HUTHyG9MLxmSa
         e6N9IUXCkFVKeXPmHyPS2efq8MfkL2T3ThocbEuFrU/jJ9b2QpGHD7x3V3sosDWUBY+a
         SNsZLVMHBKbUaiAwfVgFjpZYYtDPlrwlHeLu0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=N4jiUGL8qeRulacDFp3WwMDBzmFduJDh6Bugfm3JfXNT8tja1i5fGLrcSuk6akLB6x
         gQv06SBqbYYwy3SfHeB/4S1a+4rWpsi6qEDAvKOBHR0rV+k/yv7KhGIUTGBJitWH79WI
         Xw6LrWJwY/zSd5fIIDalblEHfocCcEsXxRHZE=
MIME-Version: 1.0
Received: by 10.224.31.138 with SMTP id y10mr1813051qac.289.1281784162332;
 Sat, 14 Aug 2010 04:09:22 -0700 (PDT)
Received: by 10.229.219.11 with HTTP; Sat, 14 Aug 2010 04:09:22 -0700 (PDT)
In-Reply-To: <1281749081591-1142517.post@n3.nabble.com>
References: <1281749081591-1142517.post@n3.nabble.com>
Date: Sat, 14 Aug 2010 07:09:22 -0400
Message-ID: <AANLkTinTduY6mjLigRVePS=N4Dbi0rua+XH_SNHnL4V5@mail.gmail.com>
Subject: Re: scalability limit in terms of numbers of large documents
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000feaf9578dacb0ba048dc6a12e

--000feaf9578dacb0ba048dc6a12e
Content-Type: text/plain; charset=ISO-8859-1

As asked, that's really an unanswerable question. The math is pretty easy
in terms of running out of document IDs, but "searched quickly" depends
on too many variables.

I suspect, though, that long before you ran out of document IDs, you'd need
to shard your index, Have you looked at SOLR?

Best
Erick

On Fri, Aug 13, 2010 at 9:24 PM, andynuss <andrew_nuss@yahoo.com> wrote:

>
> Hi,
>
> Lets say that I am indexing large book documents broken into chapters.  A
> typical book that you buy at amazon.  What would be the approximate limit
> to
> the number of books that can be indexed slowly and searched quickly.  The
> search unit would be a chapter, so assume that a book is divided into 15-50
> chapters.  Any ideas?
>
> Andy
> --
> View this message in context:
> http://lucene.472066.n3.nabble.com/scalability-limit-in-terms-of-numbers-of-large-documents-tp1142517p1142517.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000feaf9578dacb0ba048dc6a12e--

From java-user-return-47012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 14 13:16:57 2010
Return-Path: <java-user-return-47012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2892 invoked from network); 14 Aug 2010 13:16:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Aug 2010 13:16:57 -0000
Received: (qmail 52589 invoked by uid 500); 14 Aug 2010 13:16:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52139 invoked by uid 500); 14 Aug 2010 13:16:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52131 invoked by uid 99); 14 Aug 2010 13:16:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Aug 2010 13:16:50 +0000
X-ASF-Spam-Status: No, hits=3.0 required=10.0
	tests=FORGED_YAHOO_RCVD,FREEMAIL_FROM,SPF_HELO_PASS,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Aug 2010 13:16:43 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <andrew_nuss@yahoo.com>)
	id 1OkGaz-0000wG-Dv
	for java-user@lucene.apache.org; Sat, 14 Aug 2010 06:16:21 -0700
Date: Sat, 14 Aug 2010 06:16:21 -0700 (PDT)
From: andynuss <andrew_nuss@yahoo.com>
To: java-user@lucene.apache.org
Message-ID: <1281791781413-1146449.post@n3.nabble.com>
In-Reply-To: <AANLkTinTduY6mjLigRVePS=N4Dbi0rua+XH_SNHnL4V5@mail.gmail.com>
References: <1281749081591-1142517.post@n3.nabble.com> <AANLkTinTduY6mjLigRVePS=N4Dbi0rua+XH_SNHnL4V5@mail.gmail.com>
Subject: Re: scalability limit in terms of numbers of large documents
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Erick,

My documents are roughly a 0.5 to 1 million chars divide into normal words,
and divided into 50 chapters, each chapter streamed into a docid unit.  So a
search hit is a chapter.

How do I find out more about sharding and SOLR?

Andy
-- 
View this message in context: http://lucene.472066.n3.nabble.com/scalability-limit-in-terms-of-numbers-of-large-documents-tp1142517p1146449.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 14 14:19:48 2010
Return-Path: <java-user-return-47013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18301 invoked from network); 14 Aug 2010 14:19:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Aug 2010 14:19:48 -0000
Received: (qmail 68453 invoked by uid 500); 14 Aug 2010 14:19:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67951 invoked by uid 500); 14 Aug 2010 14:19:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67926 invoked by uid 99); 14 Aug 2010 14:19:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Aug 2010 14:19:42 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of devshree.sane@gmail.com designates 209.85.213.48 as permitted sender)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Aug 2010 14:19:34 +0000
Received: by ywg4 with SMTP id 4so477692ywg.35
        for <java-user@lucene.apache.org>; Sat, 14 Aug 2010 07:19:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=mlXx+MzoIooyxX2RRZjwk/zstu+yX6sUTO3KDGVA5hw=;
        b=EL2VCgJC7AfIXJAw3g6zJeqBQj00fpwQPHF/MsITZAJiOb/RFb9sfOwf7mr/rDJp64
         zdqx6NwfIb2qGWuuDxFAwxVEJjBsiztgG4Wod6i1YE5zPgJvxKu28DgDIMwuQljzFnSb
         1pufyQ78zSBZEdWxQ/VBYVep/q/a9b7o1OEGQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=MTrp1ClsxJD5WmC8B4VtKu1kfmn8FRvCnJY5sUhJN0E3yO1fxkWrVFCHc7/2VpkPp5
         5A15l1ozf5gxLgzFbha6zVY35DqWa+W8gonpk9LwVsCLR6rd2l/Wo57M1zqLaYO8g9qw
         ZvrQWANMTr1o7vcb2/J41BiB6KHrRxkeLGarg=
MIME-Version: 1.0
Received: by 10.231.36.13 with SMTP id r13mr2798656ibd.75.1281795553281; Sat,
 14 Aug 2010 07:19:13 -0700 (PDT)
Received: by 10.231.193.72 with HTTP; Sat, 14 Aug 2010 07:19:13 -0700 (PDT)
Date: Sat, 14 Aug 2010 19:49:13 +0530
Message-ID: <AANLkTinv-7Be5rqASZB0bh3Tx4TYEnQCd+aNnLUdFrEO@mail.gmail.com>
Subject: Interaction of Tokenattributes and Tokenizer
From: Devshree Sane <devshree.sane@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=002215048dfba0c6e0048dc948e2
X-Virus-Checked: Checked by ClamAV on apache.org

--002215048dfba0c6e0048dc948e2
Content-Type: text/plain; charset=ISO-8859-1

Hi,

Can anyone explain to me how exactly the Tokenizers and tokenattributes
interact with each other?
Or perhaps point me to a link which has a the interaction/sequence diagram
for the same?

I want to extend the Token class to allow use of some more types of Token
Attributes.

Thanks

-Devshree.

--002215048dfba0c6e0048dc948e2--

From java-user-return-47014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 14 14:34:18 2010
Return-Path: <java-user-return-47014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22416 invoked from network); 14 Aug 2010 14:34:18 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Aug 2010 14:34:18 -0000
Received: (qmail 74605 invoked by uid 500); 14 Aug 2010 14:34:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74388 invoked by uid 500); 14 Aug 2010 14:34:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74380 invoked by uid 99); 14 Aug 2010 14:34:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Aug 2010 14:34:12 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.208.4.194] (HELO mout.perfora.net) (74.208.4.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Aug 2010 14:34:04 +0000
Received: from [192.168.1.117] (cpe-75-84-68-253.socal.res.rr.com [75.84.68.253])
	by mrelay.perfora.net (node=mrus0) with ESMTP (Nemesis)
	id 0MU0Eb-1OKCDE2L8j-00QnxF; Sat, 14 Aug 2010 10:33:42 -0400
Message-ID: <4C66A944.2070409@orcatec.com>
Date: Sat, 14 Aug 2010 07:33:40 -0700
From: Herbert Roitblat <herb@orcatec.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.11) Gecko/20100711 Lightning/1.0b1 Thunderbird/3.0.6
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Not a valid hit number: 0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Provags-ID: V02:K0:QRxusJcZV9VNiILHQtiiDjHiLex7TeECijv3wsIo1kS
 wgLoNOwhFhBdpLVeRxUj1N/SZ5q3x/Agj8WISMfm3SFLZCV2Jy
 H2vf186uX0yxOkA0l51iGHxwHCGRKU4hl9ukTdLh5Sw7FNcMAS
 etvfs5NDfEer2aZkk/ciMwYJ+iJg4XWWnku1h9/f7ETS3mrzng
 BjcMw09ZYc4HemtXOhAHA==

I was setting up a new instance of my program on a new computer.  I got 
this error:

2010-08-14 10:05:21,951 ERROR Thread LuceneThread: 
java.lang.IndexOutOfBoundsException: Not a valid hit number: 0
     Java stacktrace:
java.lang.IndexOutOfBoundsException: Not a valid hit number: 0
     at org.apache.lucene.search.Hits.hitDoc(Hits.java:215)
     at org.apache.lucene.search.Hits.doc(Hits.java:168)

This is the first time I am using pylucene-2.9.3-1, I had been using 
pylucene-2.9.2-1
Is there some incompatibility between 2.9.3 and 2.9.2 that would cause 
this?

Thanks,
Herb


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 14 20:23:34 2010
Return-Path: <java-user-return-47015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30546 invoked from network); 14 Aug 2010 20:23:33 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Aug 2010 20:23:33 -0000
Received: (qmail 29631 invoked by uid 500); 14 Aug 2010 20:23:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29573 invoked by uid 500); 14 Aug 2010 20:23:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29565 invoked by uid 99); 14 Aug 2010 20:23:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Aug 2010 20:23:30 +0000
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Aug 2010 20:23:26 +0000
Received: by qwk3 with SMTP id 3so3398254qwk.35
        for <java-user@lucene.apache.org>; Sat, 14 Aug 2010 13:23:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:reply-to
         :in-reply-to:references:date:message-id:subject:from:to:content-type;
        bh=uUQT1Ka1mlDwheJaK3t6fUKVp4ute7tg9abo8C8rx+I=;
        b=oD10ORdP+6ZvgBXHboIPMgTIq0xr9RW86+SP6FAiyCUXMtlzpbwVz+N63+JRBJQiFl
         yTdv02uEhwbH60MPbkjbs9RC+hiJv1fdEvR37+d9yUE5CzYQtFTWPRP6W8N76x6Fcujv
         nlIsVxixgHI1icX/1tuZG3bAZNOaOtE4TP7YE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        b=OUtQy0x30QmtnCsXr6tZOlZZ7LQn7LQ0MrrAfn9U/jbC0kOk18BuS/DY9n4cjoRChw
         9Gwa8/ffX9D8Wft5k+Cuj6hvRDZdpJG2kji7l7NqIDSziBSPz7YUbOGlU8wb+tWUXagS
         imjLtrNqGX3a/bzRsrynffwcMYElSNQs7CgB0=
MIME-Version: 1.0
Received: by 10.224.43.197 with SMTP id x5mr2109424qae.153.1281817385515; Sat,
 14 Aug 2010 13:23:05 -0700 (PDT)
Received: by 10.229.251.69 with HTTP; Sat, 14 Aug 2010 13:23:05 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <AANLkTinv-7Be5rqASZB0bh3Tx4TYEnQCd+aNnLUdFrEO@mail.gmail.com>
References: <AANLkTinv-7Be5rqASZB0bh3Tx4TYEnQCd+aNnLUdFrEO@mail.gmail.com>
Date: Sat, 14 Aug 2010 22:23:05 +0200
Message-ID: <AANLkTina9J7zg3s9-bT_AqvB+cDtfK7bvev7MRJb9-tk@mail.gmail.com>
Subject: Re: Interaction of Tokenattributes and Tokenizer
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

You might wanna look at the "Whats new in Lucene 2.9" Whitepaper from
Lucid Imagination

http://www.lucidimagination.com/developer/whitepaper/Whats-New-in-Apache-Lucene-2-9

on page 7 you find an introduction to this API. This should get you started :)

simon

On Sat, Aug 14, 2010 at 4:19 PM, Devshree Sane <devshree.sane@gmail.com> wrote:
>
> Hi,
>
> Can anyone explain to me how exactly the Tokenizers and tokenattributes
> interact with each other?
> Or perhaps point me to a link which has a the interaction/sequence diagram
> for the same?
>
> I want to extend the Token class to allow use of some more types of Token
> Attributes.
>
> Thanks
>
> -Devshree.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 14 21:09:25 2010
Return-Path: <java-user-return-47016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43587 invoked from network); 14 Aug 2010 21:09:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Aug 2010 21:09:24 -0000
Received: (qmail 42899 invoked by uid 500); 14 Aug 2010 21:09:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42829 invoked by uid 500); 14 Aug 2010 21:09:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42821 invoked by uid 99); 14 Aug 2010 21:09:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Aug 2010 21:09:22 +0000
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Aug 2010 21:09:17 +0000
Received: by qwk3 with SMTP id 3so3420555qwk.35
        for <java-user@lucene.apache.org>; Sat, 14 Aug 2010 14:08:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=ZLa3vtxH5Nc/eIHCD0Ke+gMB2XWv/y/9nvsf69kCacY=;
        b=ec0k3m/fk8HLDoHD6yTB8G0DS1jjTD3trFFOgZ7iVJqSbiHNDc3SztKsWn3pw+3Z2O
         A/ZVLqCFfpQc514tIrFzeT/jBUE7tR6zX5isai8+eSTyx+romsysy0oF4idFzm8mVZcg
         xFYgHKjG1zay9AUlksRop8iBl7CPBj9ahWD5w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=bGOFID16YhoPS/C8+EV8s5rVbs0+AGiN7H0xW1kgAivpKKWLMLjWSIwsbtFTn9AuV9
         6o/LU3MR6dGkiLbDXZXR3CKgZilAcm7NG3lG0CjhaLd9T0ORVek5joCUPxZadwfXW1Vg
         6ycgkAsiDQoSmgCPal8hu5qh+4T5+EdLZ2FNk=
MIME-Version: 1.0
Received: by 10.229.1.233 with SMTP id 41mr32866qcg.284.1281820136822; Sat, 14
 Aug 2010 14:08:56 -0700 (PDT)
Received: by 10.229.219.11 with HTTP; Sat, 14 Aug 2010 14:08:56 -0700 (PDT)
In-Reply-To: <1281791781413-1146449.post@n3.nabble.com>
References: <1281749081591-1142517.post@n3.nabble.com>
	<AANLkTinTduY6mjLigRVePS=N4Dbi0rua+XH_SNHnL4V5@mail.gmail.com>
	<1281791781413-1146449.post@n3.nabble.com>
Date: Sat, 14 Aug 2010 17:08:56 -0400
Message-ID: <AANLkTik9Wx8hpVcNekVK2L=cYQH-krW_sCeWqGNtGvpX@mail.gmail.com>
Subject: Re: scalability limit in terms of numbers of large documents
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485394038ebd7fd048dcf0144

--001485394038ebd7fd048dcf0144
Content-Type: text/plain; charset=ISO-8859-1

Here's the Wiki:
http://wiki.apache.org/solr/

You can be reading the eBook in 5 minutes, or order the physical book at:
https://www.packtpub.com/solr-1-4-enterprise-search-server/book?utm_source=lucidimagination.com&utm_medium=bookrev&utm_content=other&utm_campaign=mdb_000374

Lucid Imaginations maintains quite a bit of free information in addition to
their commercial services, try:
http://www.lucidimagination.com

Best
Erick

On Sat, Aug 14, 2010 at 9:16 AM, andynuss <andrew_nuss@yahoo.com> wrote:

>
> Hi Erick,
>
> My documents are roughly a 0.5 to 1 million chars divide into normal words,
> and divided into 50 chapters, each chapter streamed into a docid unit.  So
> a
> search hit is a chapter.
>
> How do I find out more about sharding and SOLR?
>
> Andy
> --
> View this message in context:
> http://lucene.472066.n3.nabble.com/scalability-limit-in-terms-of-numbers-of-large-documents-tp1142517p1146449.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001485394038ebd7fd048dcf0144--

From java-user-return-47017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 14 23:19:14 2010
Return-Path: <java-user-return-47017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82135 invoked from network); 14 Aug 2010 23:19:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Aug 2010 23:19:14 -0000
Received: (qmail 77044 invoked by uid 500); 14 Aug 2010 23:19:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76967 invoked by uid 500); 14 Aug 2010 23:19:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76959 invoked by uid 99); 14 Aug 2010 23:19:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Aug 2010 23:19:11 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of glen.newton@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Aug 2010 23:19:06 +0000
Received: by wyb35 with SMTP id 35so5777211wyb.35
        for <java-user@lucene.apache.org>; Sat, 14 Aug 2010 16:18:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=eaovtmXWhBSxjCz/UOnwD7kE3kRcAHV9g6w8YzyxueY=;
        b=tmvrCpnyiNZAo1dM8KRZQu//zTzXqZ+tRoKQ1WpR8Z+pkjBt2etZyg6R+MDTaQo9Nf
         dPubZATc4KVPtZF876QftLqdfcvEAmdsYSEquuMMzQBL9R4paeFRsuzCC94WcFY6RQ85
         0AJhf9AqtyaLdBwGTa6CGEOvz0uzS7SHQhy2Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=rLmW4wOVepClLL4D3H947L5BGTTi+E9Ei3e5BCe1VfXqBbs9Ki8wH2eMU3LhdZ9WmS
         QcXqvUqajWlCrhpMluh061LO44yQjkc6BWbWCl0p5AhiN4yvbE/fwyP347TjVZq6XT0h
         UYuol2qtrfdeGK/Ass0euR+PKRKEjz2wNbo9w=
Received: by 10.216.7.78 with SMTP id 56mr1031254weo.96.1281827926181; Sat, 14
 Aug 2010 16:18:46 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.133.1 with HTTP; Sat, 14 Aug 2010 16:18:26 -0700 (PDT)
In-Reply-To: <AANLkTinCgZJJK7_xWCdeDg8yuC=PaTbkas0_yKocE_H5@mail.gmail.com>
References: <AANLkTinCgZJJK7_xWCdeDg8yuC=PaTbkas0_yKocE_H5@mail.gmail.com>
From: Glen Newton <glen.newton@gmail.com>
Date: Sat, 14 Aug 2010 19:18:26 -0400
Message-ID: <AANLkTin97aY97XazCfoAavACR+wXCa8wDoqebUxsdvwv@mail.gmail.com>
Subject: Re: lucene usage on TREC data
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

Lucene has been used - usually as a starting base that has been
modified for specific tasks - by a number of IR researchers for
various TREC challenges. Here are some (there are many more):

IBM Haifa:
http://wiki.apache.org/lucene-java/TREC_2007_Million_Queries_Track_-_IBM_Haifa_Team
http://trec.nist.gov/pubs/trec16/papers/ibm-haifa.mq.final.pdf

Logistic Regression Merging of Amberfish and Lucene Multisearch Results
http://trec.nist.gov/pubs/trec14/papers/ualaska.tera.pdf

IR 2009 Term Project - Modern Web Search (TREC WT10g)
http://code.google.com/p/lucene-web-search-and-trec-wt10g/

Phrasal Queries with LingPipe and Lucene: Ad Hoc Genomics Text Retrieval
http://comminfo.rutgers.edu/~muresan/IR/TREC/Proceedings/t13_proceedings/papers/alias-i.geo.pdf

Evaluation of the Default Similarity Function in Lucene
http://www.ece.udel.edu/~hfang/lucene/Lucene_exp.pdf

Lucene for n-grams using the ClueWeb collection
http://trec.nist.gov/pubs/trec18/papers/arsc.WEB.pdf

Expanding Queries Using Multiple Resources
http://staff.science.uva.nl/~mdr/Publications/Files/trec2006-proceedings-genomics.pdf

-Glen Newton
http://zzzoot.blogspot.com/2008/06/simultaneous-threaded-query-lucene.html
http://zzzoot.blogspot.com/2008/04/lucene-indexing-performance-benchmarks.html
http://zzzoot.blogspot.com/2008/06/lucene-concurrent-search-performance.html
http://zzzoot.blogspot.com/2008/11/software-announcement-lusql-database-to.html
http://zzzoot.blogspot.com/2008/11/lucene-231-vs-24-benchmarks-using-lusql.html
http://zzzoot.blogspot.com/2009/07/project-torngat-building-large-scale.html






On 14 August 2010 06:55, Ramneek Maan Singh <ramneekm@gmail.com> wrote:
> Hello Everyone,
>
> Can anyone point me to a publicly Question answering system built using
> lucene on TREC or non-TREC data.
>
> Regards,
> Ramneek
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 15 20:58:46 2010
Return-Path: <java-user-return-47018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15978 invoked from network); 15 Aug 2010 20:58:45 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Aug 2010 20:58:45 -0000
Received: (qmail 64259 invoked by uid 500); 15 Aug 2010 20:58:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64199 invoked by uid 500); 15 Aug 2010 20:58:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64191 invoked by uid 99); 15 Aug 2010 20:58:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Aug 2010 20:58:42 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.208.4.194] (HELO mout.perfora.net) (74.208.4.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Aug 2010 20:58:34 +0000
Received: from [192.168.1.117] (cpe-75-84-68-253.socal.res.rr.com [75.84.68.253])
	by mrelay.perfora.net (node=mrus2) with ESMTP (Nemesis)
	id 0MDR5B-1OfXkU3IfV-00H1z3; Sun, 15 Aug 2010 16:58:13 -0400
Message-ID: <4C6854E3.6000307@orcatec.com>
Date: Sun, 15 Aug 2010 13:58:11 -0700
From: Herbert Roitblat <herb@orcatec.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.11) Gecko/20100711 Lightning/1.0b1 Thunderbird/3.0.6
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Not a valid hit number: 0
References: <4C66A944.2070409@orcatec.com>
In-Reply-To: <4C66A944.2070409@orcatec.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Provags-ID: V02:K0:JwnW5ulR/pqIqpjzVDoGwP13u1mtuEOt8gnnkflT4RG
 dDHGdqVLDRr4we/sveczDuCxR6aSLYSZ1Kl9/vKb01sREH4Rio
 XfJHnVryXh4sc2ak8SJy0+GGnm6k+iL4lMSqu8XYcCCAGQECTR
 lyN0dCu0a0F8WrQ+KQNvJHeoTnEfn1ZRo7G9q7OHG209jEJKrX
 iXNLFqP7W3nFgdxtfcThQ==

That seems not to be the cause.  I went back to 2.9.2 and got the same 
error.
I must have done something else wrong.
Thanks,
Herb

On 8/14/2010 7:33 AM, Herbert Roitblat wrote:
> I was setting up a new instance of my program on a new computer.  I 
> got this error:
>
> 2010-08-14 10:05:21,951 ERROR Thread LuceneThread: 
> java.lang.IndexOutOfBoundsException: Not a valid hit number: 0
>     Java stacktrace:
> java.lang.IndexOutOfBoundsException: Not a valid hit number: 0
>     at org.apache.lucene.search.Hits.hitDoc(Hits.java:215)
>     at org.apache.lucene.search.Hits.doc(Hits.java:168)
>
> This is the first time I am using pylucene-2.9.3-1, I had been using 
> pylucene-2.9.2-1
> Is there some incompatibility between 2.9.3 and 2.9.2 that would cause 
> this?
>
> Thanks,
> Herb
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 15 21:04:57 2010
Return-Path: <java-user-return-47019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18539 invoked from network); 15 Aug 2010 21:04:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Aug 2010 21:04:57 -0000
Received: (qmail 68755 invoked by uid 500); 15 Aug 2010 21:04:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68700 invoked by uid 500); 15 Aug 2010 21:04:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68692 invoked by uid 99); 15 Aug 2010 21:04:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Aug 2010 21:04:54 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.65.145.80] (HELO p02c12o147.mxlogic.net) (208.65.145.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Aug 2010 21:04:45 +0000
Received: from unknown [67.132.206.99] (EHLO donkey.hmsonline.com)
	by p02c12o147.mxlogic.net(mxl_mta-6.7.0-0)
	with ESMTP id 756586c4.0.125631.00-376.237418.p02c12o147.mxlogic.net (envelope-from <nkolev@healthmarketscience.com>);
	Sun, 15 Aug 2010 15:04:25 -0600 (MDT)
X-MXL-Hash: 4c6856592d6753c2-7e8958013d942294389334b4ab44ed0d1ccfc03f
Received: from pwex01.zoo.hmsonline.com (pwex01.hmsonline.com [10.67.88.109])
	by donkey.hmsonline.com (8.13.1/8.13.1) with ESMTP id o7FL4N2I020595
	for <java-user@lucene.apache.org>; Sun, 15 Aug 2010 17:04:23 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: cluster documents based on fields' values
Date: Sun, 15 Aug 2010 17:01:31 -0400
Message-ID: <67B9FB634299E5469D36BF5B3537F02409524C@pwex01.zoo.hmsonline.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: cluster documents based on fields' values
Thread-Index: Acs8vQmnNwDInWQpQoqXCJvW0t95dQ==
From: "Nik Kolev" <nkolev@healthmarketscience.com>
To: <java-user@lucene.apache.org>
X-Spam: [F=0.2000000000; CM=0.500; S=0.200(2010073001)]
X-MAIL-FROM: <nkolev@healthmarketscience.com>
X-SOURCE-IP: [67.132.206.99]
X-AnalysisOut: [v=1.0 c=1 a=zuR1PaR6FCsA:10 a=VphdPIyG4kEA:10 a=8nJEP1OIZ-]
X-AnalysisOut: [IA:10 a=xdWuvbPJTlx+8X/s3BW2YQ==:17 a=ev2FjOB0O_vkjNYUonoA]
X-AnalysisOut: [:9 a=-9G9z-3bHiFzObxvZr1XXAH6Pu4A:4 a=wPNLvfGTeEIA:10]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I am researching the possibility of using Lucene for discovering
clusters of documents and since I am new to Lucene I decided to
ask the community for advice before I poke the APIs and the internals.
Your input will be invaluable!

Here's the use case. Documents arrive from different feeds. Each feed
produces millions and millions of documents. Documents are structured
and share certain "interesting" fields. For the purpose of illustration
here's a trivial example. Let's say the documents on each feed represent
shoes. A shoe has an ID (uniquely identifying it within its feed) and a
SIZE [1]. I want to be able to ask Lucene (assuming the shoe documents
are indexed of course) for all of the clusters of shoes that sport the =
same
size. A cluster of shoes is just the IDs of the shoes that got grouped
together due to having the same value of the SIZE field.

I don't think that doing this brute force will perform. Here's what I
mean when I say brute force. I looked at IndexReader, and I saw that
I can get the distinct values for an indexed field. So assuming that
each feed will have its own index (I don't think I can get away with
a single index for all feeds [2]), I can get the union of all distinct
values for the interesting field across all indexes (one per each
document feed). Then for each distinct value I can do a MultiSearcher
search across these indexes getting the IDs of the documents .

My gut tells me that the brute force approach won't perform [3]. And
here's where you guys come in - is it possible to ask lucene to give
me the groups of records (across indixes) that share the value for a
given field? Is there something else in API that I can take advantage
of and get what I need faster? If I am to extend Lucene to allow for
this sort of thing, where should I start, what documents should I
read,...?

Thanks very much again for your advise,
-nik

[1] Shoe document layout:
    SHOE
      |--ID
      |--SIZE

[2] The volume of documents I get from each feed is huge. Also, even
    though a lot of fields are shared the format across feeds varies
    and a feed may not have some of the "interesting" fields of
    another feed.

[3] The dataset I am talking about is rich and the brute force approach
    means that I need to be doing tens of millions of searches just to
    group on one field. Also I most likely will blow my heap up if I try =
to
    load all of the values in memory all at once.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 16 01:35:00 2010
Return-Path: <java-user-return-47020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93910 invoked from network); 16 Aug 2010 01:35:00 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Aug 2010 01:35:00 -0000
Received: (qmail 64572 invoked by uid 500); 16 Aug 2010 01:34:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64422 invoked by uid 500); 16 Aug 2010 01:34:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64414 invoked by uid 99); 16 Aug 2010 01:34:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 01:34:57 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of andrew.bruno@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 01:34:52 +0000
Received: by eydd26 with SMTP id d26so1421223eyd.35
        for <java-user@lucene.apache.org>; Sun, 15 Aug 2010 18:34:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=eM3GiY/bSWLMXmimUme5AdKDqOzprVilJG7fR3lKqfU=;
        b=sC/4yM335NJiySn/DFL4awr/RE9eHjdgmabgugVhQcMuFg0ecRS2tgktk04q4H/Npl
         45imVxB9Y+1M8TtRG+5aCKAnAKvaPzkpPKqqzLfCIlnALKJSlvuVCX6v5TILdYPIug9V
         Mjdooagl93DXsMUVKrNCDJVROxiVEKZKWUoPw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=wV7VS27e6Ewi3wKrGzzZ4Qpj4nShZpnaN8Ma80e7R7I5JHjjJFWB08VRRshiInTrxL
         ytwJaVgGjBeVWnmvAMIvxUMwsbxogCuE2YsWIFx4ugFwxg3XY9zFYrHm2vRE4qTIqcl9
         m5gJ9zHbuV1febLlh1BNzN0xFK8DCCEJlkXxw=
MIME-Version: 1.0
Received: by 10.213.15.65 with SMTP id j1mr4132370eba.79.1281922471224; Sun,
 15 Aug 2010 18:34:31 -0700 (PDT)
Received: by 10.14.29.1 with HTTP; Sun, 15 Aug 2010 18:34:31 -0700 (PDT)
In-Reply-To: <000101cb3b99$8f592410$ae0b6c30$@thetaphi.de>
References: <AANLkTinTicbY_rEQiaNFGor+ghnE_JqQf0WOu_bKMK5c@mail.gmail.com>
	<000101cb3b99$8f592410$ae0b6c30$@thetaphi.de>
Date: Mon, 16 Aug 2010 11:34:31 +1000
Message-ID: <AANLkTi=wez_LHTBhAwruY5HMyDekXt3ChvA+Lv3avL7G@mail.gmail.com>
Subject: Re: 140GB index directory, what can I do?
From: Andrew Bruno <andrew.bruno@gmail.com>
To: java-user <java-user@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

The index is optimized every 60 secs... so it must have already been cleane=
d up.

Thanks for feedback.

On Sat, Aug 14, 2010 at 8:15 PM, Uwe Schindler <uwe@thetaphi.de> wrote:
> Optimize the index one time then all unused segment files are *for-sure*
> removed.
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
>> -----Original Message-----
>> From: Andrew Bruno [mailto:andrew.bruno@gmail.com]
>> Sent: Saturday, August 14, 2010 12:11 PM
>> To: java-user@lucene.apache.org
>> Subject: 140GB index directory, what can I do?
>>
>> Hi all,
>>
>> I have an index directory that is growing pretty fast, and is now at
> 138GB.
>>
>> A while ago, this index got corrupted. =A0It was rebuilt, but the engine=
er
> cannot
>> remember whether he deleted the corrupt directory before the rebuild. =
=A0Is
>> there a way to know if any files are not being used or whether they can =
be
>> purged, merged, etc?
>>
>> The files are listed below.
>>
>> 08/14/2010 =A002:51 AM =A0 =A0<DIR> =A0 =A0 =A0 =A0 =A0..
>> 03/24/2010 =A011:22 PM =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 0 clearcache
>> 08/14/2010 =A002:51 AM =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 4 deletable
>> 08/14/2010 =A002:51 AM =A0 =A0 =A0 =A0 =A0 =A0 =A0 369 segments
>> 03/29/2010 =A002:29 AM =A0 135,941,156,712 _1x3.cfs
>> 08/13/2010 =A008:24 AM =A0 =A0 =A0 =A0 =A0 275,615 _1x3.del
>> 05/10/2010 =A009:59 AM =A0 =A0 =A0 977,999,933 _491b.cfs
>> 08/10/2010 =A012:46 PM =A0 =A0 =A0 =A0 =A0 =A017,304 _491b.del
>> 06/18/2010 =A009:33 PM =A0 =A0 =A0 809,473,470 _7sr7.cfs
>> 08/06/2010 =A007:10 AM =A0 =A0 =A0 =A0 =A0 =A015,038 _7sr7.del
>> 07/23/2010 =A011:34 PM =A0 =A0 =A0 559,421,479 _aeps.cfs
>> 08/13/2010 =A007:20 AM =A0 =A0 =A0 =A0 =A0 =A011,276 _aeps.del
>> 08/09/2010 =A009:23 AM =A0 =A0 =A0 299,717,058 _bu0l.cfs
>> 08/12/2010 =A012:42 PM =A0 =A0 =A0 =A0 =A0 =A0 6,387 _bu0l.del
>> 08/11/2010 =A002:46 PM =A0 =A0 =A0 =A066,910,259 _c4x4.cfs
>> 08/11/2010 =A004:06 PM =A0 =A0 =A0 =A0 =A0 =A0 1,401 _c4x4.del
>> 08/13/2010 =A002:11 PM =A0 =A0 =A0 =A045,009,744 _cc9c.cfs
>> 08/13/2010 =A003:59 PM =A0 =A0 =A0 =A0 =A0 =A0 =A0 944 _cc9c.del
>> 08/13/2010 =A004:03 PM =A0 =A0 =A0 =A0 3,409,701 _ccqa.cfs
>> 08/13/2010 =A004:29 PM =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A079 _ccqa.del
>> 08/13/2010 =A010:42 PM =A0 =A0 =A0 =A0 =A0 900,521 _ccvl.cfs
>> 08/14/2010 =A012:01 AM =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A029 _ccvl.del
>> 08/14/2010 =A012:00 AM =A0 =A0 =A0 =A0 =A0 589,015 _cczi.cfs
>> 08/14/2010 =A012:07 AM =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A024 _cczi.del
>> 08/14/2010 =A012:05 AM =A0 =A0 =A0 =A0 =A0 260,231 _cd0v.cfs
>> 08/14/2010 =A002:44 AM =A0 =A0 =A0 =A0 =A0 324,498 _cd1z.cfs
>> 08/14/2010 =A002:44 AM =A0 =A0 =A0 =A0 =A0 =A010,651 _cd20.cfs
>> 08/14/2010 =A002:45 AM =A0 =A0 =A0 =A0 =A0 =A0 6,427 _cd21.cfs
>> 08/14/2010 =A002:45 AM =A0 =A0 =A0 =A0 =A0 =A0 6,702 _cd22.cfs
>> 08/14/2010 =A002:45 AM =A0 =A0 =A0 =A0 =A0 =A0 9,024 _cd23.cfs
>> 08/14/2010 =A002:45 AM =A0 =A0 =A0 =A0 =A0 =A010,641 _cd24.cfs
>> 08/14/2010 =A002:46 AM =A0 =A0 =A0 =A0 =A0 =A0 9,037 _cd25.cfs
>> 08/14/2010 =A002:46 AM =A0 =A0 =A0 =A0 =A0 =A0 6,297 _cd26.cfs
>> 08/14/2010 =A002:46 AM =A0 =A0 =A0 =A0 =A0 =A0 6,504 _cd27.cfs
>> 08/14/2010 =A002:46 AM =A0 =A0 =A0 =A0 =A0 =A056,164 _cd28.cfs
>> 08/14/2010 =A002:47 AM =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 9 _cd28.del
>> 08/14/2010 =A002:47 AM =A0 =A0 =A0 =A0 =A0 =A056,246 _cd29.cfs
>> 08/14/2010 =A002:47 AM =A0 =A0 =A0 =A0 =A0 =A0 7,093 _cd2a.cfs
>> 08/14/2010 =A002:47 AM =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 9 _cd2a.del
>> 08/14/2010 =A002:47 AM =A0 =A0 =A0 =A0 =A0 =A0 7,179 _cd2b.cfs
>> 08/14/2010 =A002:48 AM =A0 =A0 =A0 =A0 =A0 =A010,324 _cd2c.cfs
>> 08/14/2010 =A002:48 AM =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 9 _cd2c.del
>> 08/14/2010 =A002:48 AM =A0 =A0 =A0 =A0 =A0 =A010,412 _cd2d.cfs
>> 08/14/2010 =A002:49 AM =A0 =A0 =A0 =A0 =A0 =A067,808 _cd2e.cfs
>> 08/14/2010 =A002:49 AM =A0 =A0 =A0 =A0 =A0 =A0 6,431 _cd2f.cfs
>> 08/14/2010 =A002:49 AM =A0 =A0 =A0 =A0 =A0 =A0 6,419 _cd2g.cfs
>> 08/14/2010 =A002:49 AM =A0 =A0 =A0 =A0 =A0 =A010,394 _cd2h.cfs
>> 08/14/2010 =A002:49 AM =A0 =A0 =A0 =A0 =A0 =A010,417 _cd2i.cfs
>> 08/14/2010 =A002:49 AM =A0 =A0 =A0 =A0 =A0 =A0 8,379 _cd2j.cfs
>> 08/14/2010 =A002:50 AM =A0 =A0 =A0 =A0 =A0 =A0 5,982 _cd2k.cfs
>> 08/14/2010 =A002:50 AM =A0 =A0 =A0 =A0 =A0 =A0 5,670 _cd2l.cfs
>> 08/14/2010 =A002:51 AM =A0 =A0 =A0 =A0 =A0 =A0 5,622 _cd2m.cfs
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 51 File(s) 138,705,840,941 bytes
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 16 07:12:44 2010
Return-Path: <java-user-return-47021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7484 invoked from network); 16 Aug 2010 07:12:44 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Aug 2010 07:12:44 -0000
Received: (qmail 18411 invoked by uid 500); 16 Aug 2010 07:12:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17904 invoked by uid 500); 16 Aug 2010 07:12:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17896 invoked by uid 99); 16 Aug 2010 07:12:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 07:12:37 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [122.98.14.33] (HELO kecgate06.infosys.com) (122.98.14.33)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 07:12:30 +0000
X-TM-IMSS-Message-ID:<f1b290fa000993bf@kecgate06.infosys.com>
Received: from blrkechub01.ad.infosys.com ([10.66.236.41]) by kecgate06.infosys.com ([122.98.14.33]) with ESMTP (TREND IMSS SMTP Service 7.0) id f1b290fa000993bf ; Mon, 16 Aug 2010 12:43:10 +0530
Received: from PUNITPCAS02.ad.infosys.com (10.76.151.52) by
 blrkechub01.ad.infosys.com (10.66.236.41) with Microsoft SMTP Server (TLS) id
 8.2.176.0; Mon, 16 Aug 2010 12:42:06 +0530
Received: from PUNITPMBX02.ad.infosys.com ([10.76.151.22]) by
 PUNITPCAS02.ad.infosys.com ([10.76.151.52]) with mapi; Mon, 16 Aug 2010
 12:42:06 +0530
From: Shelly_Singh <Shelly_Singh@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 16 Aug 2010 12:42:03 +0530
Subject: RE: Scaling Lucene to 1bln docs
Thread-Topic: Scaling Lucene to 1bln docs
Thread-Index: Acs5E0xMnWE6HTWyTVqVfezWga4SzwD/oC9A
Message-ID: <AA27F54EFDA0CE43B33EBDB7796323740CA26DA10C@PUNITPMBX02.ad.infosys.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA2660945@PUNITPMBX02.ad.infosys.com>
 	<AANLkTi=4LLNLK-wk9frni=ay0qkEokgnr+sLLfWPyZ=8@mail.gmail.com>
 	<AA27F54EFDA0CE43B33EBDB7796323740CA2660988@PUNITPMBX02.ad.infosys.com>
 	<528709861-1281428644-cardhu_decombobulator_blackberry.rim.net-283608400-@bda2121.bisx.produk.on.blackberry>
 	<AA27F54EFDA0CE43B33EBDB7796323740CA2660B35@PUNITPMBX02.ad.infosys.com>
 	<3B4AEBB59588ED409ECE3CB6517C41750EC8C16BEC@exchange.windows.mmu.acquiremedia.com>
 	<AANLkTinJ=AE=+E1iyCqQxe26PSm2PgS_r-8+WMjcT_oG@mail.gmail.com>
 	<AA27F54EFDA0CE43B33EBDB7796323740CA2660B5E@PUNITPMBX02.ad.infosys.com>
 	<AANLkTi=YuvwdGjj=RoH6A1-nUhBN14xtc2LDeqiVBqmO@mail.gmail.com>
 	<AA27F54EFDA0CE43B33EBDB7796323740CA2660B93@PUNITPMBX02.ad.infosys.com>
 	<335122582-1281448159-cardhu_decombobulator_blackberry.rim.net-1093115328-@bda2121.bisx.produk.on.blackberry>
 	<AANLkTimNUAsXpHUvPhFjhTn4djW38gpEmWeiBt-d0nEP@mail.gmail.com>
 	<AA27F54EFDA0CE43B33EBDB7796323740CA2660CE4@PUNITPMBX02.ad.infosys.com>
 <AANLkTinKFPMtC4OYuLKp1AYVGrmTbw4pNXpa2eiEY+mp@mail.gmail.com>
In-Reply-To: <AANLkTinKFPMtC4OYuLKp1AYVGrmTbw4pNXpa2eiEY+mp@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

SGksDQoNCldoaWxlIEkgY291bGQgZ2V0IGFuIGV4Y2VsbGVudCBzZWFyY2ggdGltZSBvbiAxIGJs
biBkb2N1bWVudHMgaW4gbHVjZW5lOyB3aGVuIEkgdHJ5IHRvIHJldHJpZXZlIHRoZSBkb2N1bWVu
dCwgSSBhbSBiZWluZyBmYWNlZCBieSBhIHByb2JsZW0uIElmIHRoZSBudW1iZXIgb2YgZG9jdW1l
bnRzIHJldHVybmVkIGJ5IGx1Y2VuZSBpcyBsYXJnZSAoaW4gbXkgZXhhbXBsZSBpdCBpcyAzMjAw
MCksIHRoZW4gdGhlIGRvY3VtZW50IHJldHJpZXZhbCB0aW1lIGlzIDMgc2Vjb25kcy4NCg0KTXkg
bHVjZW5lIGRvY3VtZW50IGlzIG5vdCBiaWcsIGl0IGhhcyAzIGZpZWxkcyBvZiAxLTIgdGVybXMg
ZWFjaC4NCkZyb20gbXkgY29kZSwgSSBjb3VsZCBzZWUgdGhhdCBtb3N0IG9mIHRob3NlIDMgc2Vj
b25kcyBnbyBpbiAicmVhZGVyLmdldERvYyhkb2NJZCkiLiANCklzIHRoZXJlIGlzIGEgYmV0dGVy
IHdheSB0byBkbyB0aGlzLg0KDQpUaGFua3MgYW5kIFJlZ2FyZHMsDQoNClNoZWxseSBTaW5naA0K
Q2VudGVyIEZvciBLTm93bGVkZ2UgRHJpdmVuIEluZm9ybWF0aW9uIFN5c3RlbXMsIEluZm9zeXMN
CkVtYWlsOiBzaGVsbHlfc2luZ2hAaW5mb3N5cy5jb20NClBob25lOiAoTSkgOTEgOTkyIDM2OSA3
MjAwLCAoVm9JUCkyMDIyOTc4NjIyDQoNCi0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQpGcm9t
OiBBbnNodW0gW21haWx0bzphbnNodW1nQGdtYWlsLmNvbV0gDQpTZW50OiBXZWRuZXNkYXksIEF1
Z3VzdCAxMSwgMjAxMCAxMDozOCBBTQ0KVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0K
U3ViamVjdDogUmU6IFNjYWxpbmcgTHVjZW5lIHRvIDFibG4gZG9jcw0KDQpTbywgeW91IGRpZG4n
dCByZWFsbHkgdXNlIHRoZSBzZXRSYW1CdWZmZXIuLiA/DQpBbnkgcmVhc29ucyBmb3IgdGhhdD8N
Cg0KLS0NCkFuc2h1bSBHdXB0YQ0KaHR0cDovL2FpLWNhZmUuYmxvZ3Nwb3QuY29tDQoNCg0KT24g
V2VkLCBBdWcgMTEsIDIwMTAgYXQgMTA6MjggQU0sIFNoZWxseV9TaW5naCA8U2hlbGx5X1Npbmdo
QGluZm9zeXMuY29tPndyb3RlOg0KDQo+IE15IGZpbmFsIHNldHRpbmdzIGFyZToNCj4gMS4gICAg
ICAxLjUgZ2lnIFJBTSB0byB0aGUganZtIG91dCBvZiAyR0IgYXZhaWxhYmxlIGZvciBteSBkZXNr
dG9wDQo+IDIuICAgICAgMTAwR0IgZGlzayBzcGFjZS4NCj4gMy4gICAgICBJbmRleCBjcmVhdGlv
biBhbmQgc2VhcmNoaW5nIHR1bmluZyBmYWN0b3JzOg0KPiAgICAgICAgIGEuIG1lcmdlRmFjdG9y
ID0gMTANCj4gICAgICAgIGIuIG1heEZpZWxkTGVuZ3RoID0gMTANCj4gICAgICAgIGMuIG1heE1l
cmdlRG9jcyA9IDUwMDAwMDANCj4gICAgICAgICBkLiBmdWxsIG9wdGltaXplIGF0IGVuZCBvZiBp
bmRleCBjcmVhdGlvbg0KPiAgICAgICAgZS4gcmVhZENodW5rU2l6ZSA9IDEwMDAwMDANCj4gICAg
ICAgIGYuIFRlcm1JbmZvc0luZGV4RGl2aXNvciA9IDEwDQo+ICAgICAgICBnLiBOTyBzaGFyZGlu
Zy4gU2luZ2xlIE1hY2hpbmUuDQo+DQo+IEJ1dCBQYWJsbywgbXkgZG9jdW1lbnQgaXMgYSBzaW5n
bGUgZmllbGQgZG9jdW1lbnQgd2l0aCB0aGUgdGhlIGZpZWxkIGxlbmd0aA0KPiBiZWluZyAyLTUg
d29yZHMuIFNvLCB1IGNhbiBwcm9iYWJseSByZWR1Y2UgaXQgYnkgYSBmYWN0b3Igb2YgMTAwIGRp
cmVjdGx5IGlmDQo+IHUgd2FudCB0byBjb21wYXJlIHdpdGggcmVndWxhciBkb2NzLg0KPg0KPiAt
LS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KPiBGcm9tOiBQYWJsbyBNZW5kZXMgW21haWx0bzpw
YWJsb21lbmRlc0BnbWFpbC5jb21dDQo+IFNlbnQ6IFR1ZXNkYXksIEF1Z3VzdCAxMCwgMjAxMCA3
OjIyIFBNDQo+IFRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNCj4gU3ViamVjdDogUmU6
IFNjYWxpbmcgTHVjZW5lIHRvIDFibG4gZG9jcw0KPg0KPiBTaGVsbHksDQo+IERvIHlvdSBtaW5k
IHNoYXJpbmcgd2l0aCB0aGUgbGlzdCB0aGUgZmluYWwgc2V0dGluZ3MgeW91IHVzZWQgZm9yIHlv
dXIgYmVzdA0KPiByZXN1bHRzPw0KPg0KPiBDaGVlcnMsDQo+IFBhYmxvDQo+DQo+IE9uIFR1ZSwg
QXVnIDEwLCAyMDEwIGF0IDM6NDkgUE0sIGFuc2h1bS5ndXB0YUBuYXVrcmkuY29tDQo+IDxhbnNo
dW1nQGdtYWlsLmNvbT53cm90ZToNCj4NCj4gPiBIZXkgU2hlbGx5LA0KPiA+IElmIHlvdSB3YW50
IHRvIGdldCBtb3JlIGluZm8gb24gbHVjZW5lLCBJJ2QgcmVjb21tZW5kIHlvdSBnZXQgYSBjb3B5
IG9mDQo+ID4gbHVjZW5lIGluIGFjdGlvbiAybmQgRWQuIEl0J2xsIGhlbHAgeW91IGdldCBhIGhh
bmcgb2YgYSBsb3Qgb2YgdGhpbmdzISA6KQ0KPiA+DQo+ID4gLS0NCj4gPiBBbnNodW0NCj4gPiBo
dHRwOi8vYmxvZy5hbnNodW1ndXB0YS5uZXQNCj4gPg0KPiA+IFNlbnQgZnJvbSBCbGFja0JlcnJ5
wq4NCj4gPg0KPiA+IC0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQo+ID4gRnJvbTogU2hlbGx5
X1NpbmdoIDxTaGVsbHlfU2luZ2hAaW5mb3N5cy5jb20+DQo+ID4gRGF0ZTogVHVlLCAxMCBBdWcg
MjAxMCAxOToxMToxMQ0KPiA+IFRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmc8amF2YS11
c2VyQGx1Y2VuZS5hcGFjaGUub3JnPg0KPiA+IFJlcGx5LVRvOiBqYXZhLXVzZXJAbHVjZW5lLmFw
YWNoZS5vcmcNCj4gPiBTdWJqZWN0OiBSRTogU2NhbGluZyBMdWNlbmUgdG8gMWJsbiBkb2NzDQo+
ID4NCj4gPiBIaSBmb2xrcywNCj4gPg0KPiA+IFRoYW5rcyBmb3IgdGhlIGV4Y2VsbGVudCBzdXBw
b3J0IG4gZ3VpZGFuY2Ugb24gbXkgdmVyeSBmaXJzdCBkYXkgb24gdGhpcw0KPiA+IG1haWxpbmcg
bGlzdC4uLg0KPiA+IEF0IGVuZCBvZiBkYXksIEkgaGF2ZSB2ZXJ5IG9wdGltaXN0aWMgcmVzdWx0
cy4gMTAwYmxuIHNlYXJjaCBpbiBsZXNzIHRoYW4NCj4gPiAxbXMgYW5kIHRoZSBpbmRleCBjcmVh
dGlvbiB0aW1lIGlzIG5vdCBodWdlIGVpdGhlciAoIGNsb3NlIHRvIDE1DQo+IG1pbnV0ZXMpLg0K
PiA+DQo+ID4gSSBhbSBub3cgaGl0dGluZyB0aGUgMWJsbiBtYXJrIHdpdGggcm91Z2hseSB0aGUg
c2FtZSBzZXR0aW5ncy4gQnV0LCBJDQo+IHdhbnQNCj4gPiB0byB1bmRlcnN0YW5kIE5vcm1zIGFu
ZCBUZXJtRmlsdGVycy4NCj4gPg0KPiA+IENhbiBzb21lb25lIGV4cGxhaW4sIHdoeSBvciB3aHkg
bm90IHNob3VsZCBvbmUgdXNlIGVhY2ggb2YgdGhlc2UgYW5kIHdoYXQNCj4gPiB0cmFkZW9mZnMg
ZG9lcyBpdCBoYXZlLg0KPiA+DQo+ID4gUmVnYXJkcywNCj4gPiBTaGVsbHkNCj4gPg0KPiA+IC0t
LS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQo+ID4gRnJvbTogRGFuaWwgxaJPUklOIFttYWlsdG86
dG9yaW5kYW5AZ21haWwuY29tXQ0KPiA+IFNlbnQ6IFR1ZXNkYXksIEF1Z3VzdCAxMCwgMjAxMCA2
OjUyIFBNDQo+ID4gVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KPiA+IFN1YmplY3Q6
IFJlOiBTY2FsaW5nIEx1Y2VuZSB0byAxYmxuIGRvY3MNCj4gPg0KPiA+IFRoYXQgd29uJ3Qgd29y
ay4uLmlmIHlvdSdsbCBoYXZlIHNvbWV0aGluZyBsaWtlICJBIEJhc2ljIENyYXp5DQo+ID4gRG9j
dW1lbnQgRS1zb21ldGhpbmcgRi1zb21ldGhpbmcgRy1zb21ldGhpbmcuLi4ueW91IGdldCB0aGUg
cG9pbnQiIGl0DQo+ID4gd2lsbCBnbyB0byBhbGwgc2hhcmRzIHNvIHRoZSB3aG9sZSBwb2ludCBv
ZiBzaGFyZHMgd2lsbCBiZQ0KPiA+IGNvbXByb21pc2VkLi4ueW91J2xsIGhhdmUgMjYgYmlsbGlv
biBkb2N1bWVudHMgaW5kZXggOykNCj4gPg0KPiA+IExvb2tzIGxpa2UgdGhlIG9ubHkgd2F5IGlz
IHRvIHNlYXJjaCBhbGwgc2hhcmRzLg0KPiA+IERlcGVuZGluZyBvbiBhdmFpbGFibGUgaGFyZHdh
cmUgKDEgQXp1bC4uLjUwIEVDMiksIGV4cGVjdGVkDQo+ID4gdHJhZmZpYygxcXBzLi4uMTAwMHFw
cyksIGV4cGVjdGVkIHF1ZXJ5IHRpbWUoMTAgbXNlYyAuLi4gMyBzZWMpLA0KPiA+IHJlZHVuZGFu
Y3kgKGl0J3MgYSBsYXJnZSBkYXRhc2V0LCBJIGRvbid0IHRoaW5rIHlvdSB3YW50IHRvIGxvb3Nl
IGl0KSwNCj4gPiBhbmQgc28gb24uLi55b3UnbGwgaGF2ZSB0byBkZWNpZGUgaG93IG1hbnkgcGFy
dGl0aW9ucyBkbyB5b3Ugd2FudC4NCj4gPg0KPiA+IEl0IG1heSB3b3JrIHdpdGggOC0xMCwgaXQg
bWF5IG5lZWQgNTAtNjQuIChJIHVzdWFsbHkgdXNlIDJebiBhcyBpdCdzDQo+ID4gZWFzaWVyIHRv
IHNwbGl0IGVhY2ggc2hhcmQgaW4gMiB3aGVuIGluZGV4IGdyb3dzIHRvbyBtdWNoKQ0KPiA+DQo+
ID4gT24gc3VjaCBsYXJnZSBkYXRhc2V0cyBpdCdzIGEgbG90IG9mIHR1bmluZywgY3VzdG9tIGNv
ZGUsIGFuZCBubw0KPiA+IG9uZS1zaXplLWZpdHMtYWxsIHNvbHV0aW9uLg0KPiA+IEx1Y2VuZSBp
cyBqdXN0IGEgdG9vbCAoYSBmaW5lIG9uZSkgYnV0IHlvdSBuZWVkIHRvIHVzZSBpdCB3aXNlbHkg
dG8NCj4gPiBhcmNoaXZlIGdyZWF0IHJlc3VsdHMuDQo+ID4NCj4gPiBPbiBUdWUsIEF1ZyAxMCwg
MjAxMCBhdCAxNTo1NSwgU2hlbGx5X1NpbmdoIDxTaGVsbHlfU2luZ2hAaW5mb3N5cy5jb20+DQo+
ID4gd3JvdGU6DQo+ID4gPiBIbW0uLkkgZ2V0IHRoZSBwb2ludC4gQnV0LCBpbiBteSBhcHBsaWNh
dGlvbiwgdGhlIGRvY3VtZW50IGlzIGJhc2ljYWxseQ0KPiBhDQo+ID4gZGVzY3JpcHRpdmUgbmFt
ZSBvZiBhIHBhcnRpY3VsYXIgdGhpbmcuIFRoZSB1c2VyIHdpbGwgc2VhcmNoIGJ5IG5hbWUgKG9y
DQo+ID4gcGFydCBvZiBuYW1lKSBhbmQgSSBuZWVkIHRvIHB1bGwgb3V0IGFsbCBpbmZvIHBvaW50
ZWQgdG8gYnkgdGhhdCBuYW1lLg0KPiBUaGlzDQo+ID4gaW5mbyBpcyBleHRlcm5hbGl6ZWQgaW4g
YSBkYi4NCj4gPiA+DQo+ID4gPiBPbmUgb3B0aW9uIEkgY2FuIHRoaW5rIG9mIGlzLQ0KPiA+ID4g
SSBjYW4gc2hhcmQgYmFzZWQgb24gc3RhcnRpbmcgYWxwaGFiZXQgb2YgYW55IG5hbWUuIFNvLCAi
QWxhbiBNYXRodXIgb2YNCj4gPiBOZXcgRGVsaGkiIG1heSBnbyB0byBzaGFyZCAiQSIuIEJ1dCBz
aW5jZSB0aGUgbmFtZSB3aWxsIGhhdmUgJ24nIHRva2VucywNCj4gYW5kDQo+ID4gdGhlIHVzZXIg
bWF5IHR5cGUgYW55IG9uZSB0b2tlbiwgdGhpcyB3aWxsIG5vdCB3b3JrLiBJIGNhbiBmdXJ0aGVy
IHR3ZWFrDQo+ID4gdGhpcyBzdWNoIHRoYXQgSSBpbmRleCB0aGUgc2FtZSBkb2N1bWVudCBpbnRv
IG11bHRpcGxlIGluZGljZXMgKG9uZSBmb3INCj4gZWFjaA0KPiA+IHRva2VuKS4gU28sIHRoZSBz
YW1lIGRvY3VtZW50IG1heSBiZSBpbmRleGVkIGludG8gU2hhcmQiQSIsICJNIiwgIk4iIGFuZA0K
PiA+ICJEIi4NCj4gPiA+IEkgYW0gbm90IGFibGUgdG8gdGhpbmsgb2YgYW5vdGhlciBvcHRpb24u
DQo+ID4gPg0KPiA+ID4gQ29tbWVudHMgd2VsY29tZS4NCj4gPiA+DQo+ID4gPg0KPiA+ID4gLS0t
LS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCj4gPiA+IEZyb206IERhbmlsIMWiT1JJTiBbbWFpbHRv
OnRvcmluZGFuQGdtYWlsLmNvbV0NCj4gPiA+IFNlbnQ6IFR1ZXNkYXksIEF1Z3VzdCAxMCwgMjAx
MCA2OjExIFBNDQo+ID4gPiBUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQo+ID4gPiBT
dWJqZWN0OiBSZTogU2NhbGluZyBMdWNlbmUgdG8gMWJsbiBkb2NzDQo+ID4gPg0KPiA+ID4gSSdk
IHNlY29uZCB0aGF0Lg0KPiA+ID4NCj4gPiA+IEl0IGRvZXNuJ3QgaGF2ZSB0byBiZSBkYXRlIGZv
ciBzaGFyZGluZy4gTWF5YmUgZXZlcnkgcXVlcnkgaGFzIHNvbWUNCj4gPiA+IHNwZWNpZmljIGZp
ZWxkLCBsaWtlIFVzZXJJZCBvciBzb21ldGhpbmcsIHNvIHlvdSBjYW4gcmVkaXJlY3QgdG8NCj4g
PiA+IHNwZWNpZmljIHNoYXJkIGluc3RlYWQgb2YgaGl0dGluZyBhbGwgMTAgaW5kaWNlcy4NCj4g
PiA+DQo+ID4gPiBZb3UgaGF2ZSB0byBoYXZlIHNvbWUga2luZCBvZiBuYXJyb3dpbmc6IHNlYXJj
aGluZyAxYm4gZG9jdW1lbnRzIHdpdGgNCj4gPiA+IHF1ZXJpZXMgdGhhdCBtYXkgaGl0IGFsbCBk
b2N1bWVudHMgaXMgdXNlbGVzcy4NCj4gPiA+IEFuIHVzZXIgd29uJ3QgbG9vayBvbiBtb3JlIHRo
YW4gbGV0IHNheSAxMDAgcmVzdWx0cyAoaWYgcHJlc2VudGVkDQo+ID4gPiBwcm9wZXJseS4ubWF5
YmUgMTAwMCkNCj4gPiA+DQo+ID4gPiBUaG9zZSBmaWVsZHMgdGhhdCBuYXJyb3cgdGhlIHJlc3Vs
dCBzZXQgYXJlIGdvb2QgY2FuZGlkYXRlcyBmb3INCj4gc2hhcmRpbmcNCj4gPiBrZXlzLg0KPiA+
ID4NCj4gPiA+DQo+ID4gPiBPbiBUdWUsIEF1ZyAxMCwgMjAxMCBhdCAxNTozMiwgRGFuIE9Db25u
b3IgPGRvY29ubm9yQGFjcXVpcmVtZWRpYS5jb20+DQo+ID4gd3JvdGU6DQo+ID4gPj4gU2hlbGx5
Og0KPiA+ID4+DQo+ID4gPj4gWW91IHdvdWxkbid0IG5lY2Vzc2FyaWx5IGhhdmUgdG8gdXNlIGEg
bXVsdGlzZWFyY2hlci4gQSBzdWdnZXN0ZWQNCj4gPiBhbHRlcm5hdGl2ZSBpczoNCj4gPiA+Pg0K
PiA+ID4+IC0gc2hhcmQgaW50byAxMCBpbmRpY2VzLiBJZiB5b3UgbmVlZCB0aGUgY29uY2VwdCBv
ZiBhIGRhdGUgcmFuZ2UNCj4gc2VhcmNoLA0KPiA+IEkgd291bGQgYXNzaWduIHRoZSBkb2N1bWVu
dHMgdG8gdGhlIHNoYXJkIGJ5IGRhdGUsIG90aGVyd2lzZSByYW5kb20NCj4gPiBhc3NpZ25tZW50
IGlzIGZpbmUuDQo+ID4gPj4gLSBoYXZlIGEgcG9vbCBvZiBJbmRleFNlYXJjaGVycyBmb3IgZWFj
aCBpbmRleA0KPiA+ID4+IC0gd2hlbiBhIHNlYXJjaCBjb21lcyBpbiwgYWxsb2NhdGUgYSBTZWFy
Y2hlciBmcm9tIGVhY2ggaW5kZXggdG8gdGhlDQo+ID4gc2VhcmNoLg0KPiA+ID4+IC0gcGVyZm9y
bSB0aGUgc2VhcmNoIGluIHBhcmFsbGVsIGFjcm9zcyBhbGwgaW5kaWNlcy4NCj4gPiA+PiAtIG1l
cmdlIHRoZSByZXN1bHRzIGluIHlvdXIgb3duIGNvZGUgdXNpbmcgYW4gZWZmaWNpZW50IG1lcmdp
bmcNCj4gPiBhbGdvcml0aG0uDQo+ID4gPj4NCj4gPiA+PiBSZWdhcmRzLA0KPiA+ID4+IERhbg0K
PiA+ID4+DQo+ID4gPj4NCj4gPiA+Pg0KPiA+ID4+DQo+ID4gPj4gLS0tLS1PcmlnaW5hbCBNZXNz
YWdlLS0tLS0NCj4gPiA+PiBGcm9tOiBTaGVsbHlfU2luZ2ggW21haWx0bzpTaGVsbHlfU2luZ2hA
aW5mb3N5cy5jb21dDQo+ID4gPj4gU2VudDogVHVlc2RheSwgQXVndXN0IDEwLCAyMDEwIDg6MjAg
QU0NCj4gPiA+PiBUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQo+ID4gPj4gU3ViamVj
dDogUkU6IFNjYWxpbmcgTHVjZW5lIHRvIDFibG4gZG9jcw0KPiA+ID4+DQo+ID4gPj4gTm8gc29y
dC4gSSB3aWxsIG5lZWQgcmVsZXZhbmNlIGJhc2VkIG9uIFRGLiBJZiBJIHNoYXJkLCBJIHdpbGwg
aGF2ZSB0bw0KPiA+IHNlYXJjaCBpbiBhbCBpbmRpY2VzLg0KPiA+ID4+DQo+ID4gPj4gLS0tLS1P
cmlnaW5hbCBNZXNzYWdlLS0tLS0NCj4gPiA+PiBGcm9tOiBhbnNodW0uZ3VwdGFAbmF1a3JpLmNv
bSBbbWFpbHRvOmFuc2h1bWdAZ21haWwuY29tXQ0KPiA+ID4+IFNlbnQ6IFR1ZXNkYXksIEF1Z3Vz
dCAxMCwgMjAxMCAxOjU0IFBNDQo+ID4gPj4gVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9y
Zw0KPiA+ID4+IFN1YmplY3Q6IFJlOiBTY2FsaW5nIEx1Y2VuZSB0byAxYmxuIGRvY3MNCj4gPiA+
Pg0KPiA+ID4+IFdvdWxkIGxpa2UgdG8ga25vdywgYXJlIHlvdSB1c2luZyBhIHBhcnRpY3VsYXIg
dHlwZSBvZiBzb3J0PyBEbyB5b3UNCj4gbmVlZA0KPiA+IHRvIHNvcnQgb24gcmVsZXZhbmNlPyBD
YW4geW91IHNoYXJkIGFuZCByZXN0cmljdCB5b3VyIHNlYXJjaCB0byBhIGxpbWl0ZWQNCj4gPiBz
ZXQgb2YgaW5kZXhlcyBmdW5jdGlvbmFsbHk/DQo+ID4gPj4NCj4gPiA+PiAtLQ0KPiA+ID4+IEFu
c2h1bQ0KPiA+ID4+IGh0dHA6Ly9ibG9nLmFuc2h1bWd1cHRhLm5ldA0KPiA+ID4+DQo+ID4gPj4g
U2VudCBmcm9tIEJsYWNrQmVycnkocikNCj4gPiA+Pg0KPiA+ID4+IC0tLS0tT3JpZ2luYWwgTWVz
c2FnZS0tLS0tDQo+ID4gPj4gRnJvbTogU2hlbGx5X1NpbmdoIDxTaGVsbHlfU2luZ2hAaW5mb3N5
cy5jb20+DQo+ID4gPj4gRGF0ZTogVHVlLCAxMCBBdWcgMjAxMCAxMzozMTozOA0KPiA+ID4+IFRv
OiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmc8amF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3Jn
Pg0KPiA+ID4+IFJlcGx5LVRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNCj4gPiA+PiBT
dWJqZWN0OiBSRTogU2NhbGluZyBMdWNlbmUgdG8gMWJsbiBkb2NzDQo+ID4gPj4NCj4gPiA+PiBI
aSBBbnNodW0sDQo+ID4gPj4NCj4gPiA+PiBJIGFtIGFscmVhZHkgcnVubmluZyB3aXRoIHRoZSAn
c2V0Q29tcG91bmRGaWxlJyBvcHRpb24gb2ZmLg0KPiA+ID4+IEFuZCB0aGFua3MgZm9yIHBvaW50
aW5nIG91dCBtZXJnZUZhY3Rvci4gSSBoYWQgdHJpZWQgYSBoaWdoZXINCj4gPiBtZXJnZUZhY3Rv
ciBjb3VwbGUgb2YgZGF5cyBhZ28sIGJ1dCBnb3QgYW4gT09NLCBzbyBJIGRpc2NhcmRlZCBpdC4g
TGF0ZXINCj4gSQ0KPiA+IGZpZ3VyZWQgdGhhdCBPT00gd2FzIGJlY2F1c2UgbWF4TWVyZ2VEb2Nz
IHdhcyB1bmxpbWl0ZWQgYW5kIEkgd2FzIHVzaW5nDQo+ID4gTU1hcC4gVSByIHJpZ3QsIEkgc2hv
dWxkIHRyeSBhIGhpZ2hlciBtZXJnZUZhY3Rvci4NCj4gPiA+Pg0KPiA+ID4+IFdpdGggcmVnYXJk
cyB0byB0aGUgbXVsdGl0aHJlYWRlZCBhcHByb2FjaCwgSSB3YXMgY29uc2lkZXJpbmcgY3JlYXRp
bmcNCj4gPiAxMCBkaWZmZXJlbnQgdGhyZWFkcyBlYWNoIGluZGV4aW5nIDEwMG1sbiBkb2NzIGNv
dXBsZWQgd2l0aCBhDQo+IE11bHRpc2VhcmNoZXINCj4gPiB0byB3aGljaCBJIHdpbGwgZmVlZCB0
aGVzZSAxMCBpbmRpY2VzLiBEbyB5b3UgdGhpbmsgdGhpcyB3aWxsIGltcHJvdmUNCj4gPiBwZXJm
b3JtYW5jZS4NCj4gPiA+Pg0KPiA+ID4+IEFuZCBqdXN0IEZZSSwgSSBoYXZlIGxhdGVzdCByZWFk
aW5nIGZvciAxIGJsbiBkb2NzLiBJbmRleGluZyB0aW1lIGlzIDINCj4gPiBocnMgYW5kIHNlYXJj
aCB0aW1lIGlzIDE1IHNlY3MuLiBJIGNhbiBsaXZlIHdpdGggaW5kZXhpbmcgdGltZSBidXQgdGhl
DQo+ID4gc2VhcmNoIHRpbWUgaXMgaGlnaGx5IHVuYWNjZXB0YWJsZS4NCj4gPiA+Pg0KPiA+ID4+
IEhlbHAgYWdhaW4uDQo+ID4gPj4NCj4gPiA+PiAtLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0K
PiA+ID4+IEZyb206IEFuc2h1bSBbbWFpbHRvOmFuc2h1bWdAZ21haWwuY29tXQ0KPiA+ID4+IFNl
bnQ6IFR1ZXNkYXksIEF1Z3VzdCAxMCwgMjAxMCAxMjo1NSBQTQ0KPiA+ID4+IFRvOiBqYXZhLXVz
ZXJAbHVjZW5lLmFwYWNoZS5vcmcNCj4gPiA+PiBTdWJqZWN0OiBSZTogU2NhbGluZyBMdWNlbmUg
dG8gMWJsbiBkb2NzDQo+ID4gPj4NCj4gPiA+PiBIaSBTaGVsbHksDQo+ID4gPj4gVGhhdCBzZWVt
cyBsaWtlIGEgcmVhc29uYWJsZSBkYXRhIHNldCBzaXplLiBJJ2Qgc3VnZ2VzdCB5b3UgaW5jcmVh
c2UNCj4gPiB5b3VyDQo+ID4gPj4gbWVyZ2VGYWN0b3IgYXMgYSBtZXJnZUZhY3RvciBvZiAxMCBz
YXlzLCB5b3UgYXJlIG9ubHkgYnVmZmVyaW5nIDEwDQo+IGRvY3MNCj4gPiBpbg0KPiA+ID4+IG1l
bW9yeSBiZWZvcmUgd3JpdGluZyBpdCB0byBhIGZpbGUgKGFuZCBpbmN1cnJpbmcgSS9PKS4gWW91
IGNvdWxkDQo+ID4gYWN0dWFsbHkNCj4gPiA+PiBmbHVzaCBieSBSQU0gdXNhZ2UgaW5zdGVhZCBv
ZiBhIERvYyBjb3VudC4gVHVybiBvZmYgdXNpbmcgdGhlIENvbXBvdW5kDQo+ID4gZmlsZQ0KPiA+
ID4+IHN0cnVjdHVyZSBmb3IgaW5kZXhpbmcgYXMgaXQgZ2VuZXJhbGx5IHRha2VzIG1vcmUgdGlt
ZSBjcmVhdGluZyBhIGNmcw0KPiA+IGluZGV4Lg0KPiA+ID4+DQo+ID4gPj4gUGx1cyB0aGUgdGlt
ZSB3b3VsZCBub3QgZ3JvdyBsaW5lYXJseSBhcyB0aGUgbGFyZ2VyIHRoZSBzaXplIG9mDQo+IHNl
Z21lbnRzDQo+ID4gPj4gZ2V0LCB0aGUgbW9yZSB0aW1lIGl0J2QgdGFrZSB0byBhZGQgbW9yZSBk
b2NzIGFuZCBtZXJnZSB0aG9zZSB0b2dldGhlcg0KPiA+ID4+IGludGVybWl0dGVudGx5Lg0KPiA+
ID4+IFlvdSBtYXkgYWxzbyB1c2UgYSBtdWx0aXRocmVhZGVkIGFwcHJvYWNoIGluIGNhc2UgcmVh
ZGluZyB0aGUgc291cmNlDQo+ID4gdGFrZXMNCj4gPiA+PiB0aW1lIGluIHlvdXIgY2FzZSwgdGhv
dWdoLCB0aGUgaW5kZXh3cml0ZXIgd291bGQgaGF2ZSB0byBiZSBzaGFyZWQNCj4gYW1vbmcNCj4g
PiBhbGwNCj4gPiA+PiB0aHJlYWRzLg0KPiA+ID4+DQo+ID4gPj4gLS0NCj4gPiA+PiBBbnNodW0g
R3VwdGENCj4gPiA+PiBodHRwOi8vYWktY2FmZS5ibG9nc3BvdC5jb20NCj4gPiA+Pg0KPiA+ID4+
DQo+ID4gPj4gT24gVHVlLCBBdWcgMTAsIDIwMTAgYXQgMTI6MjQgUE0sIFNoZWxseV9TaW5naCA8
DQo+ID4gU2hlbGx5X1NpbmdoQGluZm9zeXMuY29tPndyb3RlOg0KPiA+ID4+DQo+ID4gPj4+IEhp
LA0KPiA+ID4+Pg0KPiA+ID4+PiBJIGFtIGRldmVsb3BpbmcgYW4gYXBwbGljYXRpb24gd2hpY2gg
dXNlcyBMdWNlbmUgZm9yIGluZGV4aW5nIGFuZA0KPiA+IHNlYXJjaGluZw0KPiA+ID4+PiAxIGJs
biBkb2N1bWVudHMuICh0aGUgZG9jdW1lbnQgc2l6ZSBpcyB2ZXJ5IHNtYWxsIHRob3VnaC4gRWFj
aA0KPiBkb2N1bWVudA0KPiA+IGhhcw0KPiA+ID4+PiBhIHNpbmdsZSBmaWVsZCBvZiA1LTEwIHdv
cmRzOyBzbyBJIGJlbGlldmUgdGhhdCBteSBkYXRhIHNpemUgaXMNCj4gd2l0aGluDQo+ID4gdGhl
DQo+ID4gPj4+IHRlc3RlZCBsaW1pdHMpLg0KPiA+ID4+Pg0KPiA+ID4+PiBJIGFtIHVzaW5nIHRo
ZSBmb2xsb3dpbmcgY29uZmlndXJhdGlvbjoNCj4gPiA+Pj4gMS4gICAgICAxLjUgZ2lnIFJBTSB0
byB0aGUganZtDQo+ID4gPj4+IDIuICAgICAgMTAwR0IgZGlzayBzcGFjZS4NCj4gPiA+Pj4gMy4g
ICAgICBJbmRleCBjcmVhdGlvbiB0dW5pbmcgZmFjdG9yczoNCj4gPiA+Pj4gYS4gICAgICBtZXJn
ZUZhY3RvciA9IDEwDQo+ID4gPj4+IGIuICAgICAgbWF4RmllbGRMZW5ndGggPSAxMA0KPiA+ID4+
PiBjLiAgICAgIG1heE1lcmdlRG9jcyA9IDUwMDAwMDAgKGlmIEkgdHJ5IHdpdGggYSBsYXJnZXIg
dmFsdWUsIEkgZ2V0DQo+IGFuDQo+ID4gPj4+IG91dC1vZi1tZW1vcnkpDQo+ID4gPj4+DQo+ID4g
Pj4+IFdpdGggdGhlc2Ugc2V0dGluZ3MsIEkgYW0gYWJsZSB0byBjcmVhdGUgYW4gaW5kZXggb2Yg
MTAwIG1pbGxpb24gZG9jcw0KPiA+ICgxMA0KPiA+ID4+PiBwb3cgOCkgIGluIDE1IG1pbnMgY29u
c3VtaW5nIGEgZGlzayBzcGFjZSBvZiAyLjVnYi4gV2hpY2ggaXMgcXVpdGUNCj4gPiA+Pj4gc2F0
aXNmYWN0b3J5IGZvciBtZSwgYnV0IG5ldmVydGhlbGVzcywgSSB3YW50IHRvIGtub3cgd2hhdCBl
bHNlIGNhbg0KPiBiZQ0KPiA+IGRvbmUNCj4gPiA+Pj4gdG8gdHVuZSBpdCBmdXJ0aGVyLiBQbGVh
c2UgaGVscC4NCj4gPiA+Pj4gQWxzbywgd2l0aCB0aGVzZSBzZXR0aW5ncywgY2FuIEkgZXhwZWN0
IHRoZSB0aW1lIGFuZCBzaXplIHRvIGdyb3cNCj4gPiBsaW5lYXJseQ0KPiA+ID4+PiBmb3IgMWJs
biAoMTAgcG93IDkpIGRvY3VtZW50cz8NCj4gPiA+Pj4NCj4gPiA+Pj4gVGhhbmtzIGFuZCBSZWdh
cmRzLA0KPiA+ID4+Pg0KPiA+ID4+PiBTaGVsbHkgU2luZ2gNCj4gPiA+Pj4gQ2VudGVyIEZvciBL
Tm93bGVkZ2UgRHJpdmVuIEluZm9ybWF0aW9uIFN5c3RlbXMsIEluZm9zeXMNCj4gPiA+Pj4gRW1h
aWw6IHNoZWxseV9zaW5naEBpbmZvc3lzLmNvbTxtYWlsdG86c2hlbGx5X3NpbmdoQGluZm9zeXMu
Y29tPg0KPiA+ID4+PiBQaG9uZTogKE0pIDkxIDk5MiAzNjkgNzIwMCwgKFZvSVApMjAyMjk3ODYy
Mg0KPiA+ID4+Pg0KPiA+ID4+Pg0KPiA+ID4+Pg0KPiA+ID4+Pg0KPiA+ID4+DQo+ID4gPj4gLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tDQo+ID4gPj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vi
c2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+ID4gPj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMs
IGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCj4gPiA+Pg0KPiA+ID4+
DQo+ID4gPj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+ID4gPj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2
YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+ID4gPj4gRm9yIGFkZGl0aW9u
YWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCj4g
PiA+Pg0KPiA+ID4+DQo+ID4gPj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+ID4gPj4gVG8gdW5zdWJzY3JpYmUs
IGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+ID4gPj4g
Rm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFw
YWNoZS5vcmcNCj4gPiA+Pg0KPiA+ID4+DQo+ID4gPg0KPiA+ID4gLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+ID4g
PiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFw
YWNoZS5vcmcNCj4gPiA+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNl
ci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+ID4gPg0KPiA+ID4NCj4gPg0KPiA+IC0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLQ0KPiA+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBs
dWNlbmUuYXBhY2hlLm9yZw0KPiA+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGph
dmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+ID4NCj4gPg0KPiA+ICoqKioqKioqKioq
KioqKiogQ0FVVElPTiAtIERpc2NsYWltZXIgKioqKioqKioqKioqKioqKioNCj4gPiBUaGlzIGUt
bWFpbCBjb250YWlucyBQUklWSUxFR0VEIEFORCBDT05GSURFTlRJQUwgSU5GT1JNQVRJT04gaW50
ZW5kZWQNCj4gPiBzb2xlbHkNCj4gPiBmb3IgdGhlIHVzZSBvZiB0aGUgYWRkcmVzc2VlKHMpLiBJ
ZiB5b3UgYXJlIG5vdCB0aGUgaW50ZW5kZWQgcmVjaXBpZW50LA0KPiA+IHBsZWFzZQ0KPiA+IG5v
dGlmeSB0aGUgc2VuZGVyIGJ5IGUtbWFpbCBhbmQgZGVsZXRlIHRoZSBvcmlnaW5hbCBtZXNzYWdl
LiBGdXJ0aGVyLCB5b3UNCj4gPiBhcmUgbm90DQo+ID4gdG8gY29weSwgZGlzY2xvc2UsIG9yIGRp
c3RyaWJ1dGUgdGhpcyBlLW1haWwgb3IgaXRzIGNvbnRlbnRzIHRvIGFueSBvdGhlcg0KPiA+IHBl
cnNvbiBhbmQNCj4gPiBhbnkgc3VjaCBhY3Rpb25zIGFyZSB1bmxhd2Z1bC4gVGhpcyBlLW1haWwg
bWF5IGNvbnRhaW4gdmlydXNlcy4gSW5mb3N5cw0KPiBoYXMNCj4gPiB0YWtlbg0KPiA+IGV2ZXJ5
IHJlYXNvbmFibGUgcHJlY2F1dGlvbiB0byBtaW5pbWl6ZSB0aGlzIHJpc2ssIGJ1dCBpcyBub3Qg
bGlhYmxlIGZvcg0KPiA+IGFueSBkYW1hZ2UNCj4gPiB5b3UgbWF5IHN1c3RhaW4gYXMgYSByZXN1
bHQgb2YgYW55IHZpcnVzIGluIHRoaXMgZS1tYWlsLiBZb3Ugc2hvdWxkIGNhcnJ5DQo+ID4gb3V0
IHlvdXINCj4gPiBvd24gdmlydXMgY2hlY2tzIGJlZm9yZSBvcGVuaW5nIHRoZSBlLW1haWwgb3Ig
YXR0YWNobWVudC4gSW5mb3N5cw0KPiByZXNlcnZlcw0KPiA+IHRoZQ0KPiA+IHJpZ2h0IHRvIG1v
bml0b3IgYW5kIHJldmlldyB0aGUgY29udGVudCBvZiBhbGwgbWVzc2FnZXMgc2VudCB0byBvciBm
cm9tDQo+ID4gdGhpcyBlLW1haWwNCj4gPiBhZGRyZXNzLiBNZXNzYWdlcyBzZW50IHRvIG9yIGZy
b20gdGhpcyBlLW1haWwgYWRkcmVzcyBtYXkgYmUgc3RvcmVkIG9uDQo+IHRoZQ0KPiA+IEluZm9z
eXMgZS1tYWlsIHN5c3RlbS4NCj4gPiAqKipJTkZPU1lTKioqKioqKiogRW5kIG9mIERpc2NsYWlt
ZXIgKioqKioqKipJTkZPU1lTKioqDQo+ID4NCj4NCg==


From java-user-return-47022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 16 08:09:55 2010
Return-Path: <java-user-return-47022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27000 invoked from network); 16 Aug 2010 08:09:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Aug 2010 08:09:55 -0000
Received: (qmail 62152 invoked by uid 500); 16 Aug 2010 08:09:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61631 invoked by uid 500); 16 Aug 2010 08:09:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61618 invoked by uid 99); 16 Aug 2010 08:09:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 08:09:49 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 08:09:44 +0000
Received: from [172.18.226.237] (172.18.226.237) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.436.0; Mon, 16 Aug 2010 10:09:22 +0200
Subject: Re: scalability limit in terms of numbers of large documents
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <1281749081591-1142517.post@n3.nabble.com>
References: <1281749081591-1142517.post@n3.nabble.com>
Content-Type: text/plain; charset="UTF-8"
Organization: State and University Library, Denmark
Date: Mon, 16 Aug 2010 10:09:38 +0200
Message-ID: <1281946178.7264.17.camel@te-prime>
MIME-Version: 1.0
X-Mailer: Evolution 2.28.3 
Content-Transfer-Encoding: 7bit

On Sat, 2010-08-14 at 03:24 +0200, andynuss wrote:
> Lets say that I am indexing large book documents broken into chapters.  A
> typical book that you buy at amazon.  What would be the approximate limit to
> the number of books that can be indexed slowly and searched quickly.  The
> search unit would be a chapter, so assume that a book is divided into 15-50
> chapters.  Any ideas?

Hathi Trust has an excellent blog where they write about indexing 
5 million+ scanned books.  http://www.hathitrust.org/blogs
They focus on OCR'ed books where dirty data is a big problem, but most
of their thoughts and solutions can be used for clean data too.

Regards,
Toke Eskildsen


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 16 09:23:55 2010
Return-Path: <java-user-return-47023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54967 invoked from network); 16 Aug 2010 09:23:54 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Aug 2010 09:23:54 -0000
Received: (qmail 37814 invoked by uid 500); 16 Aug 2010 09:23:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37423 invoked by uid 500); 16 Aug 2010 09:23:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37399 invoked by uid 99); 16 Aug 2010 09:23:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 09:23:48 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of torindan@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 09:23:43 +0000
Received: by qyk12 with SMTP id 12so1835502qyk.14
        for <java-user@lucene.apache.org>; Mon, 16 Aug 2010 02:23:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=t8WE8l9YdfD8oF/VPX6Ii154Z+4wLhT3aAetLIt9zMs=;
        b=RRNNEMyYZEkzpUqBqs9HSVdXzbl4/s2QWLoDMzeV9AVXvl6qMkJyYLvSDmEa5D7DCK
         jRNMlS3R95fc3Af2YcYlBpaKNrnLAOzupLUH/7GZ6cKXdGUkrA/WnJ3vQF5Hf673ZRt0
         1DTAoB8+fQWbWOydFv9OFLlA8pEYlPWDsMA3s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=LnfPdK4+HbAJ8RDmzatkyI6yWIBnuO7zBGIQJZrPEpJO2Ta7vwTNRL7y3GLXd+oJpG
         1ZOcR69snkL1Bq6+FTqdnfiwawuR0bN9+Yljn4ZM9+7GXrEf6iOfzicSi3yK6rJ27crO
         pOOJWIJz9As9YfpPlOhPa/XEXEI7Nfs2tymXA=
Received: by 10.229.184.196 with SMTP id cl4mr3396344qcb.190.1281950602179;
 Mon, 16 Aug 2010 02:23:22 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.34.204 with HTTP; Mon, 16 Aug 2010 02:23:02 -0700 (PDT)
In-Reply-To: <AANLkTi=wez_LHTBhAwruY5HMyDekXt3ChvA+Lv3avL7G@mail.gmail.com>
References: <AANLkTinTicbY_rEQiaNFGor+ghnE_JqQf0WOu_bKMK5c@mail.gmail.com>
 <000101cb3b99$8f592410$ae0b6c30$@thetaphi.de> <AANLkTi=wez_LHTBhAwruY5HMyDekXt3ChvA+Lv3avL7G@mail.gmail.com>
From: =?UTF-8?B?RGFuaWwgxaJPUklO?= <torindan@gmail.com>
Date: Mon, 16 Aug 2010 12:23:02 +0300
Message-ID: <AANLkTikV=ZuK9ACwYxDsXMJmpH6YTk478-ZyoD1tDp3P@mail.gmail.com>
Subject: Re: 140GB index directory, what can I do?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

It's not optimized, trust me.
An optimized index will contain only 1 segment and no delete files.

On Mon, Aug 16, 2010 at 04:34, Andrew Bruno <andrew.bruno@gmail.com> wrote:
> The index is optimized every 60 secs... so it must have already been clea=
ned up.
>
> Thanks for feedback.
>
> On Sat, Aug 14, 2010 at 8:15 PM, Uwe Schindler <uwe@thetaphi.de> wrote:
>> Optimize the index one time then all unused segment files are *for-sure*
>> removed.
>>
>> -----
>> Uwe Schindler
>> H.-H.-Meier-Allee 63, D-28213 Bremen
>> http://www.thetaphi.de
>> eMail: uwe@thetaphi.de
>>
>>
>>> -----Original Message-----
>>> From: Andrew Bruno [mailto:andrew.bruno@gmail.com]
>>> Sent: Saturday, August 14, 2010 12:11 PM
>>> To: java-user@lucene.apache.org
>>> Subject: 140GB index directory, what can I do?
>>>
>>> Hi all,
>>>
>>> I have an index directory that is growing pretty fast, and is now at
>> 138GB.
>>>
>>> A while ago, this index got corrupted. =C2=A0It was rebuilt, but the en=
gineer
>> cannot
>>> remember whether he deleted the corrupt directory before the rebuild. =
=C2=A0Is
>>> there a way to know if any files are not being used or whether they can=
 be
>>> purged, merged, etc?
>>>
>>> The files are listed below.
>>>
>>> 08/14/2010 =C2=A002:51 AM =C2=A0 =C2=A0<DIR> =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0..
>>> 03/24/2010 =C2=A011:22 PM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 0 clearcache
>>> 08/14/2010 =C2=A002:51 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 4 deletable
>>> 08/14/2010 =C2=A002:51 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 369 segments
>>> 03/29/2010 =C2=A002:29 AM =C2=A0 135,941,156,712 _1x3.cfs
>>> 08/13/2010 =C2=A008:24 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 275,615 _1=
x3.del
>>> 05/10/2010 =C2=A009:59 AM =C2=A0 =C2=A0 =C2=A0 977,999,933 _491b.cfs
>>> 08/10/2010 =C2=A012:46 PM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A017,3=
04 _491b.del
>>> 06/18/2010 =C2=A009:33 PM =C2=A0 =C2=A0 =C2=A0 809,473,470 _7sr7.cfs
>>> 08/06/2010 =C2=A007:10 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A015,0=
38 _7sr7.del
>>> 07/23/2010 =C2=A011:34 PM =C2=A0 =C2=A0 =C2=A0 559,421,479 _aeps.cfs
>>> 08/13/2010 =C2=A007:20 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A011,2=
76 _aeps.del
>>> 08/09/2010 =C2=A009:23 AM =C2=A0 =C2=A0 =C2=A0 299,717,058 _bu0l.cfs
>>> 08/12/2010 =C2=A012:42 PM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 6,3=
87 _bu0l.del
>>> 08/11/2010 =C2=A002:46 PM =C2=A0 =C2=A0 =C2=A0 =C2=A066,910,259 _c4x4.c=
fs
>>> 08/11/2010 =C2=A004:06 PM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 1,4=
01 _c4x4.del
>>> 08/13/2010 =C2=A002:11 PM =C2=A0 =C2=A0 =C2=A0 =C2=A045,009,744 _cc9c.c=
fs
>>> 08/13/2010 =C2=A003:59 PM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 944 _cc9c.del
>>> 08/13/2010 =C2=A004:03 PM =C2=A0 =C2=A0 =C2=A0 =C2=A0 3,409,701 _ccqa.c=
fs
>>> 08/13/2010 =C2=A004:29 PM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A079 _ccqa.del
>>> 08/13/2010 =C2=A010:42 PM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 900,521 _c=
cvl.cfs
>>> 08/14/2010 =C2=A012:01 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A029 _ccvl.del
>>> 08/14/2010 =C2=A012:00 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 589,015 _c=
czi.cfs
>>> 08/14/2010 =C2=A012:07 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A024 _cczi.del
>>> 08/14/2010 =C2=A012:05 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 260,231 _c=
d0v.cfs
>>> 08/14/2010 =C2=A002:44 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 324,498 _c=
d1z.cfs
>>> 08/14/2010 =C2=A002:44 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A010,6=
51 _cd20.cfs
>>> 08/14/2010 =C2=A002:45 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 6,4=
27 _cd21.cfs
>>> 08/14/2010 =C2=A002:45 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 6,7=
02 _cd22.cfs
>>> 08/14/2010 =C2=A002:45 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 9,0=
24 _cd23.cfs
>>> 08/14/2010 =C2=A002:45 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A010,6=
41 _cd24.cfs
>>> 08/14/2010 =C2=A002:46 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 9,0=
37 _cd25.cfs
>>> 08/14/2010 =C2=A002:46 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 6,2=
97 _cd26.cfs
>>> 08/14/2010 =C2=A002:46 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 6,5=
04 _cd27.cfs
>>> 08/14/2010 =C2=A002:46 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A056,1=
64 _cd28.cfs
>>> 08/14/2010 =C2=A002:47 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 9 _cd28.del
>>> 08/14/2010 =C2=A002:47 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A056,2=
46 _cd29.cfs
>>> 08/14/2010 =C2=A002:47 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 7,0=
93 _cd2a.cfs
>>> 08/14/2010 =C2=A002:47 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 9 _cd2a.del
>>> 08/14/2010 =C2=A002:47 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 7,1=
79 _cd2b.cfs
>>> 08/14/2010 =C2=A002:48 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A010,3=
24 _cd2c.cfs
>>> 08/14/2010 =C2=A002:48 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 9 _cd2c.del
>>> 08/14/2010 =C2=A002:48 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A010,4=
12 _cd2d.cfs
>>> 08/14/2010 =C2=A002:49 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A067,8=
08 _cd2e.cfs
>>> 08/14/2010 =C2=A002:49 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 6,4=
31 _cd2f.cfs
>>> 08/14/2010 =C2=A002:49 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 6,4=
19 _cd2g.cfs
>>> 08/14/2010 =C2=A002:49 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A010,3=
94 _cd2h.cfs
>>> 08/14/2010 =C2=A002:49 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A010,4=
17 _cd2i.cfs
>>> 08/14/2010 =C2=A002:49 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 8,3=
79 _cd2j.cfs
>>> 08/14/2010 =C2=A002:50 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 5,9=
82 _cd2k.cfs
>>> 08/14/2010 =C2=A002:50 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 5,6=
70 _cd2l.cfs
>>> 08/14/2010 =C2=A002:51 AM =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 5,6=
22 _cd2m.cfs
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 51 File(s) 138,705,840=
,941 bytes
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 16 09:31:05 2010
Return-Path: <java-user-return-47024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57881 invoked from network); 16 Aug 2010 09:31:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Aug 2010 09:31:04 -0000
Received: (qmail 45416 invoked by uid 500); 16 Aug 2010 09:31:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45124 invoked by uid 500); 16 Aug 2010 09:31:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45116 invoked by uid 99); 16 Aug 2010 09:30:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 09:30:59 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 09:30:51 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id ACF1145F081
	for <java-user@lucene.apache.org>; Mon, 16 Aug 2010 11:30:31 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Bk39i6MH39FN for <java-user@lucene.apache.org>;
	Mon, 16 Aug 2010 11:30:20 +0200 (CEST)
Received: from VEGA (dslb-084-057-087-196.pools.arcor-ip.net [84.57.87.196])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id C326745F069
	for <java-user@lucene.apache.org>; Mon, 16 Aug 2010 11:30:19 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTinTicbY_rEQiaNFGor+ghnE_JqQf0WOu_bKMK5c@mail.gmail.com>	<000101cb3b99$8f592410$ae0b6c30$@thetaphi.de> <AANLkTi=wez_LHTBhAwruY5HMyDekXt3ChvA+Lv3avL7G@mail.gmail.com>
In-Reply-To: <AANLkTi=wez_LHTBhAwruY5HMyDekXt3ChvA+Lv3avL7G@mail.gmail.com>
Subject: RE: 140GB index directory, what can I do?
Date: Mon, 16 Aug 2010 11:31:34 +0200
Message-ID: <001301cb3d25$d1f17e20$75d47a60$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQHazRbdffq2LoHDxqNsOngAgKS2lQIxAROxAfrGXqKSo1HtsA==
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Optimizing an index every 60 seconds is a *very* bad idea! Don't do =
this!
Performance will dramatically decrease. Since Lucene 2.9 you don=92t =
need to
optimize in most cases, as search is working per-segment. Optimizing an
index should only be done during maintenance or if you want to ship a =
static
index e.g. on a DVD. For live installations, the merge policy will =
manage
index segments for you fine and index reopen times and field cache for
sorting will be working fast. If you optimize every 60 seconds, you have =
to
reopen the whole index, redo all caches and so on.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Andrew Bruno [mailto:andrew.bruno@gmail.com]
> Sent: Monday, August 16, 2010 3:35 AM
> To: java-user
> Subject: Re: 140GB index directory, what can I do?
>=20
> The index is optimized every 60 secs... so it must have already been
cleaned up.
>=20
> Thanks for feedback.
>=20
> On Sat, Aug 14, 2010 at 8:15 PM, Uwe Schindler <uwe@thetaphi.de> =
wrote:
> > Optimize the index one time then all unused segment files are
> > *for-sure* removed.
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> >
> >> -----Original Message-----
> >> From: Andrew Bruno [mailto:andrew.bruno@gmail.com]
> >> Sent: Saturday, August 14, 2010 12:11 PM
> >> To: java-user@lucene.apache.org
> >> Subject: 140GB index directory, what can I do?
> >>
> >> Hi all,
> >>
> >> I have an index directory that is growing pretty fast, and is now =
at
> > 138GB.
> >>
> >> A while ago, this index got corrupted. =A0It was rebuilt, but the
> >> engineer
> > cannot
> >> remember whether he deleted the corrupt directory before the =
rebuild.
> >> Is there a way to know if any files are not being used or whether
> >> they can be purged, merged, etc?
> >>
> >> The files are listed below.
> >>
> >> 08/14/2010 =A002:51 AM =A0 =A0<DIR> =A0 =A0 =A0 =A0 =A0..
> >> 03/24/2010 =A011:22 PM =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 0 clearcache
> >> 08/14/2010 =A002:51 AM =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 4 deletable
> >> 08/14/2010 =A002:51 AM =A0 =A0 =A0 =A0 =A0 =A0 =A0 369 segments
> >> 03/29/2010 =A002:29 AM =A0 135,941,156,712 _1x3.cfs
> >> 08/13/2010 =A008:24 AM =A0 =A0 =A0 =A0 =A0 275,615 _1x3.del
> >> 05/10/2010 =A009:59 AM =A0 =A0 =A0 977,999,933 _491b.cfs
> >> 08/10/2010 =A012:46 PM =A0 =A0 =A0 =A0 =A0 =A017,304 _491b.del
> >> 06/18/2010 =A009:33 PM =A0 =A0 =A0 809,473,470 _7sr7.cfs
> >> 08/06/2010 =A007:10 AM =A0 =A0 =A0 =A0 =A0 =A015,038 _7sr7.del
> >> 07/23/2010 =A011:34 PM =A0 =A0 =A0 559,421,479 _aeps.cfs
> >> 08/13/2010 =A007:20 AM =A0 =A0 =A0 =A0 =A0 =A011,276 _aeps.del
> >> 08/09/2010 =A009:23 AM =A0 =A0 =A0 299,717,058 _bu0l.cfs
> >> 08/12/2010 =A012:42 PM =A0 =A0 =A0 =A0 =A0 =A0 6,387 _bu0l.del
> >> 08/11/2010 =A002:46 PM =A0 =A0 =A0 =A066,910,259 _c4x4.cfs
> >> 08/11/2010 =A004:06 PM =A0 =A0 =A0 =A0 =A0 =A0 1,401 _c4x4.del
> >> 08/13/2010 =A002:11 PM =A0 =A0 =A0 =A045,009,744 _cc9c.cfs
> >> 08/13/2010 =A003:59 PM =A0 =A0 =A0 =A0 =A0 =A0 =A0 944 _cc9c.del
> >> 08/13/2010 =A004:03 PM =A0 =A0 =A0 =A0 3,409,701 _ccqa.cfs
> >> 08/13/2010 =A004:29 PM =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A079 _ccqa.del
> >> 08/13/2010 =A010:42 PM =A0 =A0 =A0 =A0 =A0 900,521 _ccvl.cfs
> >> 08/14/2010 =A012:01 AM =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A029 _ccvl.del
> >> 08/14/2010 =A012:00 AM =A0 =A0 =A0 =A0 =A0 589,015 _cczi.cfs
> >> 08/14/2010 =A012:07 AM =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A024 _cczi.del
> >> 08/14/2010 =A012:05 AM =A0 =A0 =A0 =A0 =A0 260,231 _cd0v.cfs
> >> 08/14/2010 =A002:44 AM =A0 =A0 =A0 =A0 =A0 324,498 _cd1z.cfs
> >> 08/14/2010 =A002:44 AM =A0 =A0 =A0 =A0 =A0 =A010,651 _cd20.cfs
> >> 08/14/2010 =A002:45 AM =A0 =A0 =A0 =A0 =A0 =A0 6,427 _cd21.cfs
> >> 08/14/2010 =A002:45 AM =A0 =A0 =A0 =A0 =A0 =A0 6,702 _cd22.cfs
> >> 08/14/2010 =A002:45 AM =A0 =A0 =A0 =A0 =A0 =A0 9,024 _cd23.cfs
> >> 08/14/2010 =A002:45 AM =A0 =A0 =A0 =A0 =A0 =A010,641 _cd24.cfs
> >> 08/14/2010 =A002:46 AM =A0 =A0 =A0 =A0 =A0 =A0 9,037 _cd25.cfs
> >> 08/14/2010 =A002:46 AM =A0 =A0 =A0 =A0 =A0 =A0 6,297 _cd26.cfs
> >> 08/14/2010 =A002:46 AM =A0 =A0 =A0 =A0 =A0 =A0 6,504 _cd27.cfs
> >> 08/14/2010 =A002:46 AM =A0 =A0 =A0 =A0 =A0 =A056,164 _cd28.cfs
> >> 08/14/2010 =A002:47 AM =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 9 _cd28.del
> >> 08/14/2010 =A002:47 AM =A0 =A0 =A0 =A0 =A0 =A056,246 _cd29.cfs
> >> 08/14/2010 =A002:47 AM =A0 =A0 =A0 =A0 =A0 =A0 7,093 _cd2a.cfs
> >> 08/14/2010 =A002:47 AM =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 9 _cd2a.del
> >> 08/14/2010 =A002:47 AM =A0 =A0 =A0 =A0 =A0 =A0 7,179 _cd2b.cfs
> >> 08/14/2010 =A002:48 AM =A0 =A0 =A0 =A0 =A0 =A010,324 _cd2c.cfs
> >> 08/14/2010 =A002:48 AM =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 9 _cd2c.del
> >> 08/14/2010 =A002:48 AM =A0 =A0 =A0 =A0 =A0 =A010,412 _cd2d.cfs
> >> 08/14/2010 =A002:49 AM =A0 =A0 =A0 =A0 =A0 =A067,808 _cd2e.cfs
> >> 08/14/2010 =A002:49 AM =A0 =A0 =A0 =A0 =A0 =A0 6,431 _cd2f.cfs
> >> 08/14/2010 =A002:49 AM =A0 =A0 =A0 =A0 =A0 =A0 6,419 _cd2g.cfs
> >> 08/14/2010 =A002:49 AM =A0 =A0 =A0 =A0 =A0 =A010,394 _cd2h.cfs
> >> 08/14/2010 =A002:49 AM =A0 =A0 =A0 =A0 =A0 =A010,417 _cd2i.cfs
> >> 08/14/2010 =A002:49 AM =A0 =A0 =A0 =A0 =A0 =A0 8,379 _cd2j.cfs
> >> 08/14/2010 =A002:50 AM =A0 =A0 =A0 =A0 =A0 =A0 5,982 _cd2k.cfs
> >> 08/14/2010 =A002:50 AM =A0 =A0 =A0 =A0 =A0 =A0 5,670 _cd2l.cfs
> >> 08/14/2010 =A002:51 AM =A0 =A0 =A0 =A0 =A0 =A0 5,622 _cd2m.cfs
> >> =A0 =A0 =A0 =A0 =A0 =A0 =A0 51 File(s) 138,705,840,941 bytes
> >>
> >> =
---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 16 09:33:30 2010
Return-Path: <java-user-return-47025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59004 invoked from network); 16 Aug 2010 09:33:30 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Aug 2010 09:33:30 -0000
Received: (qmail 49083 invoked by uid 500); 16 Aug 2010 09:33:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48779 invoked by uid 500); 16 Aug 2010 09:33:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48771 invoked by uid 99); 16 Aug 2010 09:33:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 09:33:24 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of torindan@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 09:33:17 +0000
Received: by qwk3 with SMTP id 3so4466027qwk.35
        for <java-user@lucene.apache.org>; Mon, 16 Aug 2010 02:32:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=2qN5aJaVY6+RHHAZMUbvBrYnYF1e129h7+GujZrxxMY=;
        b=rs8/WLnhAbT2YIK8HtGO5+GZNHqn7diZ8Z7L8c/03+3YFw6wdFHxDrNN1Z06Aer/Hg
         auevLiQETytZ+IvJ7lUy/VCDsAkSSCW4WHR0LuHFf/4KgIxpxmlNxZBXN1nowXPPGTJY
         vYXZQ1Y3GqFLAXHWKiFGlk4gA5JvsNyIbZNnk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=RkWaIypydezBHjsQDWvOBYkwctlRoas/8LgmM9zR3jnnqskOWG1xmW9L7iU1rbWeyg
         MWia7if6Ip1dqI1ij2wOdWk6p7c4llzP8SyKOKUlXhNcgfQO6Ltpguv07RsfJpl1vbDQ
         rv0w9g9vAh4zQpm9Zm4D+lnbd+ypTWd6XotVc=
Received: by 10.224.19.140 with SMTP id a12mr3034538qab.217.1281951175096;
 Mon, 16 Aug 2010 02:32:55 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.34.204 with HTTP; Mon, 16 Aug 2010 02:32:35 -0700 (PDT)
In-Reply-To: <AA27F54EFDA0CE43B33EBDB7796323740CA26DA10C@PUNITPMBX02.ad.infosys.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA2660945@PUNITPMBX02.ad.infosys.com>
 <AANLkTi=4LLNLK-wk9frni=ay0qkEokgnr+sLLfWPyZ=8@mail.gmail.com>
 <AA27F54EFDA0CE43B33EBDB7796323740CA2660988@PUNITPMBX02.ad.infosys.com>
 <528709861-1281428644-cardhu_decombobulator_blackberry.rim.net-283608400-@bda2121.bisx.produk.on.blackberry>
 <AA27F54EFDA0CE43B33EBDB7796323740CA2660B35@PUNITPMBX02.ad.infosys.com>
 <3B4AEBB59588ED409ECE3CB6517C41750EC8C16BEC@exchange.windows.mmu.acquiremedia.com>
 <AANLkTinJ=AE=+E1iyCqQxe26PSm2PgS_r-8+WMjcT_oG@mail.gmail.com>
 <AA27F54EFDA0CE43B33EBDB7796323740CA2660B5E@PUNITPMBX02.ad.infosys.com>
 <AANLkTi=YuvwdGjj=RoH6A1-nUhBN14xtc2LDeqiVBqmO@mail.gmail.com>
 <AA27F54EFDA0CE43B33EBDB7796323740CA2660B93@PUNITPMBX02.ad.infosys.com>
 <335122582-1281448159-cardhu_decombobulator_blackberry.rim.net-1093115328-@bda2121.bisx.produk.on.blackberry>
 <AANLkTimNUAsXpHUvPhFjhTn4djW38gpEmWeiBt-d0nEP@mail.gmail.com>
 <AA27F54EFDA0CE43B33EBDB7796323740CA2660CE4@PUNITPMBX02.ad.infosys.com>
 <AANLkTinKFPMtC4OYuLKp1AYVGrmTbw4pNXpa2eiEY+mp@mail.gmail.com> <AA27F54EFDA0CE43B33EBDB7796323740CA26DA10C@PUNITPMBX02.ad.infosys.com>
From: =?UTF-8?B?RGFuaWwgxaJPUklO?= <torindan@gmail.com>
Date: Mon, 16 Aug 2010 12:32:35 +0300
Message-ID: <AANLkTikRMAQVK6SmWCrMm3KQSnrME-S+NWJTbODHX5Uk@mail.gmail.com>
Subject: Re: Scaling Lucene to 1bln docs
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Nope, getDoc is the right way to do it.

Those 3 seconds are actually spent in finding proper position to read
the document from, and then IO (disk spinning, head positioning,etc).

32k documents it's quite a lot. A user won't look at all these
documents, at least not all at once.

Maybe you could add paging, returning a page of 1000 will cut your
retrieval time proportionally to ~100msec.

If you use result in some kind of post-processing, maybe you can
rework your code, use some kind of queue,
so you can start serving documents as soon as possible, and the
post-processing thread won't wait until all results are available.


On Mon, Aug 16, 2010 at 10:12, Shelly_Singh <Shelly_Singh@infosys.com> wrot=
e:
> Hi,
>
> While I could get an excellent search time on 1 bln documents in lucene; =
when I try to retrieve the document, I am being faced by a problem. If the =
number of documents returned by lucene is large (in my example it is 32000)=
, then the document retrieval time is 3 seconds.
>
> My lucene document is not big, it has 3 fields of 1-2 terms each.
> From my code, I could see that most of those 3 seconds go in "reader.getD=
oc(docId)".
> Is there is a better way to do this.
>
> Thanks and Regards,
>
> Shelly Singh
> Center For KNowledge Driven Information Systems, Infosys
> Email: shelly_singh@infosys.com
> Phone: (M) 91 992 369 7200, (VoIP)2022978622
>
> -----Original Message-----
> From: Anshum [mailto:anshumg@gmail.com]
> Sent: Wednesday, August 11, 2010 10:38 AM
> To: java-user@lucene.apache.org
> Subject: Re: Scaling Lucene to 1bln docs
>
> So, you didn't really use the setRamBuffer.. ?
> Any reasons for that?
>
> --
> Anshum Gupta
> http://ai-cafe.blogspot.com
>
>
> On Wed, Aug 11, 2010 at 10:28 AM, Shelly_Singh <Shelly_Singh@infosys.com>=
wrote:
>
>> My final settings are:
>> 1. =C2=A0 =C2=A0 =C2=A01.5 gig RAM to the jvm out of 2GB available for m=
y desktop
>> 2. =C2=A0 =C2=A0 =C2=A0100GB disk space.
>> 3. =C2=A0 =C2=A0 =C2=A0Index creation and searching tuning factors:
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 a. mergeFactor =3D 10
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0b. maxFieldLength =3D 10
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0c. maxMergeDocs =3D 5000000
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 d. full optimize at end of index creation
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0e. readChunkSize =3D 1000000
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0f. TermInfosIndexDivisor =3D 10
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0g. NO sharding. Single Machine.
>>
>> But Pablo, my document is a single field document with the the field len=
gth
>> being 2-5 words. So, u can probably reduce it by a factor of 100 directl=
y if
>> u want to compare with regular docs.
>>
>> -----Original Message-----
>> From: Pablo Mendes [mailto:pablomendes@gmail.com]
>> Sent: Tuesday, August 10, 2010 7:22 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: Scaling Lucene to 1bln docs
>>
>> Shelly,
>> Do you mind sharing with the list the final settings you used for your b=
est
>> results?
>>
>> Cheers,
>> Pablo
>>
>> On Tue, Aug 10, 2010 at 3:49 PM, anshum.gupta@naukri.com
>> <anshumg@gmail.com>wrote:
>>
>> > Hey Shelly,
>> > If you want to get more info on lucene, I'd recommend you get a copy o=
f
>> > lucene in action 2nd Ed. It'll help you get a hang of a lot of things!=
 :)
>> >
>> > --
>> > Anshum
>> > http://blog.anshumgupta.net
>> >
>> > Sent from BlackBerry=C2=AE
>> >
>> > -----Original Message-----
>> > From: Shelly_Singh <Shelly_Singh@infosys.com>
>> > Date: Tue, 10 Aug 2010 19:11:11
>> > To: java-user@lucene.apache.org<java-user@lucene.apache.org>
>> > Reply-To: java-user@lucene.apache.org
>> > Subject: RE: Scaling Lucene to 1bln docs
>> >
>> > Hi folks,
>> >
>> > Thanks for the excellent support n guidance on my very first day on th=
is
>> > mailing list...
>> > At end of day, I have very optimistic results. 100bln search in less t=
han
>> > 1ms and the index creation time is not huge either ( close to 15
>> minutes).
>> >
>> > I am now hitting the 1bln mark with roughly the same settings. But, I
>> want
>> > to understand Norms and TermFilters.
>> >
>> > Can someone explain, why or why not should one use each of these and w=
hat
>> > tradeoffs does it have.
>> >
>> > Regards,
>> > Shelly
>> >
>> > -----Original Message-----
>> > From: Danil =C5=A2ORIN [mailto:torindan@gmail.com]
>> > Sent: Tuesday, August 10, 2010 6:52 PM
>> > To: java-user@lucene.apache.org
>> > Subject: Re: Scaling Lucene to 1bln docs
>> >
>> > That won't work...if you'll have something like "A Basic Crazy
>> > Document E-something F-something G-something....you get the point" it
>> > will go to all shards so the whole point of shards will be
>> > compromised...you'll have 26 billion documents index ;)
>> >
>> > Looks like the only way is to search all shards.
>> > Depending on available hardware (1 Azul...50 EC2), expected
>> > traffic(1qps...1000qps), expected query time(10 msec ... 3 sec),
>> > redundancy (it's a large dataset, I don't think you want to loose it),
>> > and so on...you'll have to decide how many partitions do you want.
>> >
>> > It may work with 8-10, it may need 50-64. (I usually use 2^n as it's
>> > easier to split each shard in 2 when index grows too much)
>> >
>> > On such large datasets it's a lot of tuning, custom code, and no
>> > one-size-fits-all solution.
>> > Lucene is just a tool (a fine one) but you need to use it wisely to
>> > archive great results.
>> >
>> > On Tue, Aug 10, 2010 at 15:55, Shelly_Singh <Shelly_Singh@infosys.com>
>> > wrote:
>> > > Hmm..I get the point. But, in my application, the document is basica=
lly
>> a
>> > descriptive name of a particular thing. The user will search by name (=
or
>> > part of name) and I need to pull out all info pointed to by that name.
>> This
>> > info is externalized in a db.
>> > >
>> > > One option I can think of is-
>> > > I can shard based on starting alphabet of any name. So, "Alan Mathur=
 of
>> > New Delhi" may go to shard "A". But since the name will have 'n' token=
s,
>> and
>> > the user may type any one token, this will not work. I can further twe=
ak
>> > this such that I index the same document into multiple indices (one fo=
r
>> each
>> > token). So, the same document may be indexed into Shard"A", "M", "N" a=
nd
>> > "D".
>> > > I am not able to think of another option.
>> > >
>> > > Comments welcome.
>> > >
>> > >
>> > > -----Original Message-----
>> > > From: Danil =C5=A2ORIN [mailto:torindan@gmail.com]
>> > > Sent: Tuesday, August 10, 2010 6:11 PM
>> > > To: java-user@lucene.apache.org
>> > > Subject: Re: Scaling Lucene to 1bln docs
>> > >
>> > > I'd second that.
>> > >
>> > > It doesn't have to be date for sharding. Maybe every query has some
>> > > specific field, like UserId or something, so you can redirect to
>> > > specific shard instead of hitting all 10 indices.
>> > >
>> > > You have to have some kind of narrowing: searching 1bn documents wit=
h
>> > > queries that may hit all documents is useless.
>> > > An user won't look on more than let say 100 results (if presented
>> > > properly..maybe 1000)
>> > >
>> > > Those fields that narrow the result set are good candidates for
>> sharding
>> > keys.
>> > >
>> > >
>> > > On Tue, Aug 10, 2010 at 15:32, Dan OConnor <doconnor@acquiremedia.co=
m>
>> > wrote:
>> > >> Shelly:
>> > >>
>> > >> You wouldn't necessarily have to use a multisearcher. A suggested
>> > alternative is:
>> > >>
>> > >> - shard into 10 indices. If you need the concept of a date range
>> search,
>> > I would assign the documents to the shard by date, otherwise random
>> > assignment is fine.
>> > >> - have a pool of IndexSearchers for each index
>> > >> - when a search comes in, allocate a Searcher from each index to th=
e
>> > search.
>> > >> - perform the search in parallel across all indices.
>> > >> - merge the results in your own code using an efficient merging
>> > algorithm.
>> > >>
>> > >> Regards,
>> > >> Dan
>> > >>
>> > >>
>> > >>
>> > >>
>> > >> -----Original Message-----
>> > >> From: Shelly_Singh [mailto:Shelly_Singh@infosys.com]
>> > >> Sent: Tuesday, August 10, 2010 8:20 AM
>> > >> To: java-user@lucene.apache.org
>> > >> Subject: RE: Scaling Lucene to 1bln docs
>> > >>
>> > >> No sort. I will need relevance based on TF. If I shard, I will have=
 to
>> > search in al indices.
>> > >>
>> > >> -----Original Message-----
>> > >> From: anshum.gupta@naukri.com [mailto:anshumg@gmail.com]
>> > >> Sent: Tuesday, August 10, 2010 1:54 PM
>> > >> To: java-user@lucene.apache.org
>> > >> Subject: Re: Scaling Lucene to 1bln docs
>> > >>
>> > >> Would like to know, are you using a particular type of sort? Do you
>> need
>> > to sort on relevance? Can you shard and restrict your search to a limi=
ted
>> > set of indexes functionally?
>> > >>
>> > >> --
>> > >> Anshum
>> > >> http://blog.anshumgupta.net
>> > >>
>> > >> Sent from BlackBerry(r)
>> > >>
>> > >> -----Original Message-----
>> > >> From: Shelly_Singh <Shelly_Singh@infosys.com>
>> > >> Date: Tue, 10 Aug 2010 13:31:38
>> > >> To: java-user@lucene.apache.org<java-user@lucene.apache.org>
>> > >> Reply-To: java-user@lucene.apache.org
>> > >> Subject: RE: Scaling Lucene to 1bln docs
>> > >>
>> > >> Hi Anshum,
>> > >>
>> > >> I am already running with the 'setCompoundFile' option off.
>> > >> And thanks for pointing out mergeFactor. I had tried a higher
>> > mergeFactor couple of days ago, but got an OOM, so I discarded it. Lat=
er
>> I
>> > figured that OOM was because maxMergeDocs was unlimited and I was usin=
g
>> > MMap. U r rigt, I should try a higher mergeFactor.
>> > >>
>> > >> With regards to the multithreaded approach, I was considering creat=
ing
>> > 10 different threads each indexing 100mln docs coupled with a
>> Multisearcher
>> > to which I will feed these 10 indices. Do you think this will improve
>> > performance.
>> > >>
>> > >> And just FYI, I have latest reading for 1 bln docs. Indexing time i=
s 2
>> > hrs and search time is 15 secs.. I can live with indexing time but the
>> > search time is highly unacceptable.
>> > >>
>> > >> Help again.
>> > >>
>> > >> -----Original Message-----
>> > >> From: Anshum [mailto:anshumg@gmail.com]
>> > >> Sent: Tuesday, August 10, 2010 12:55 PM
>> > >> To: java-user@lucene.apache.org
>> > >> Subject: Re: Scaling Lucene to 1bln docs
>> > >>
>> > >> Hi Shelly,
>> > >> That seems like a reasonable data set size. I'd suggest you increas=
e
>> > your
>> > >> mergeFactor as a mergeFactor of 10 says, you are only buffering 10
>> docs
>> > in
>> > >> memory before writing it to a file (and incurring I/O). You could
>> > actually
>> > >> flush by RAM usage instead of a Doc count. Turn off using the Compo=
und
>> > file
>> > >> structure for indexing as it generally takes more time creating a c=
fs
>> > index.
>> > >>
>> > >> Plus the time would not grow linearly as the larger the size of
>> segments
>> > >> get, the more time it'd take to add more docs and merge those toget=
her
>> > >> intermittently.
>> > >> You may also use a multithreaded approach in case reading the sourc=
e
>> > takes
>> > >> time in your case, though, the indexwriter would have to be shared
>> among
>> > all
>> > >> threads.
>> > >>
>> > >> --
>> > >> Anshum Gupta
>> > >> http://ai-cafe.blogspot.com
>> > >>
>> > >>
>> > >> On Tue, Aug 10, 2010 at 12:24 PM, Shelly_Singh <
>> > Shelly_Singh@infosys.com>wrote:
>> > >>
>> > >>> Hi,
>> > >>>
>> > >>> I am developing an application which uses Lucene for indexing and
>> > searching
>> > >>> 1 bln documents. (the document size is very small though. Each
>> document
>> > has
>> > >>> a single field of 5-10 words; so I believe that my data size is
>> within
>> > the
>> > >>> tested limits).
>> > >>>
>> > >>> I am using the following configuration:
>> > >>> 1. =C2=A0 =C2=A0 =C2=A01.5 gig RAM to the jvm
>> > >>> 2. =C2=A0 =C2=A0 =C2=A0100GB disk space.
>> > >>> 3. =C2=A0 =C2=A0 =C2=A0Index creation tuning factors:
>> > >>> a. =C2=A0 =C2=A0 =C2=A0mergeFactor =3D 10
>> > >>> b. =C2=A0 =C2=A0 =C2=A0maxFieldLength =3D 10
>> > >>> c. =C2=A0 =C2=A0 =C2=A0maxMergeDocs =3D 5000000 (if I try with a l=
arger value, I get
>> an
>> > >>> out-of-memory)
>> > >>>
>> > >>> With these settings, I am able to create an index of 100 million d=
ocs
>> > (10
>> > >>> pow 8) =C2=A0in 15 mins consuming a disk space of 2.5gb. Which is =
quite
>> > >>> satisfactory for me, but nevertheless, I want to know what else ca=
n
>> be
>> > done
>> > >>> to tune it further. Please help.
>> > >>> Also, with these settings, can I expect the time and size to grow
>> > linearly
>> > >>> for 1bln (10 pow 9) documents?
>> > >>>
>> > >>> Thanks and Regards,
>> > >>>
>> > >>> Shelly Singh
>> > >>> Center For KNowledge Driven Information Systems, Infosys
>> > >>> Email: shelly_singh@infosys.com<mailto:shelly_singh@infosys.com>
>> > >>> Phone: (M) 91 992 369 7200, (VoIP)2022978622
>> > >>>
>> > >>>
>> > >>>
>> > >>>
>> > >>
>> > >> -------------------------------------------------------------------=
--
>> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> > >>
>> > >>
>> > >> -------------------------------------------------------------------=
--
>> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> > >>
>> > >>
>> > >> -------------------------------------------------------------------=
--
>> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> > >>
>> > >>
>> > >
>> > > --------------------------------------------------------------------=
-
>> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> > >
>> > >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> > **************** CAUTION - Disclaimer *****************
>> > This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended
>> > solely
>> > for the use of the addressee(s). If you are not the intended recipient=
,
>> > please
>> > notify the sender by e-mail and delete the original message. Further, =
you
>> > are not
>> > to copy, disclose, or distribute this e-mail or its contents to any ot=
her
>> > person and
>> > any such actions are unlawful. This e-mail may contain viruses. Infosy=
s
>> has
>> > taken
>> > every reasonable precaution to minimize this risk, but is not liable f=
or
>> > any damage
>> > you may sustain as a result of any virus in this e-mail. You should ca=
rry
>> > out your
>> > own virus checks before opening the e-mail or attachment. Infosys
>> reserves
>> > the
>> > right to monitor and review the content of all messages sent to or fro=
m
>> > this e-mail
>> > address. Messages sent to or from this e-mail address may be stored on
>> the
>> > Infosys e-mail system.
>> > ***INFOSYS******** End of Disclaimer ********INFOSYS***
>> >
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 16 13:22:23 2010
Return-Path: <java-user-return-47026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75305 invoked from network); 16 Aug 2010 13:22:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Aug 2010 13:22:23 -0000
Received: (qmail 40310 invoked by uid 500); 16 Aug 2010 13:22:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39932 invoked by uid 500); 16 Aug 2010 13:22:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39924 invoked by uid 99); 16 Aug 2010 13:22:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 13:22:16 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of semykov@yandex.ru designates 95.108.253.145 as permitted sender)
Received: from [95.108.253.145] (HELO forward20.mail.yandex.net) (95.108.253.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 13:22:08 +0000
Received: from web29.yandex.ru (web29.yandex.ru [95.108.253.238])
	by forward20.mail.yandex.net (Yandex) with ESMTP id DAAFB5D10AF4
	for <java-user@lucene.apache.org>; Mon, 16 Aug 2010 17:21:47 +0400 (MSD)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yandex.ru; s=mail;
	t=1281964907; bh=KeVB+PBESfR8cKpERB3w/rEB2XRINBPZp7wRzJtJlX0=;
	h=From:To:In-Reply-To:References:Subject:MIME-Version:Message-Id:
	 Date:Content-Type;
	b=jsUfM9BKujtJYzNK/qEJXMhXtZdeFAjxHv/Sia7PqB6ZmXp0B0apcHhEmzm81reKc
	 eEV2khvaoltxSxUvruTPtI9tau7YfjDIR2e4Y9PEAG+klMpdNBv5U3WGS0Ji03yX6t
	 RprncuqPyTQ3iLR6qQ3+Wj+bjxSWiZiDAOYXZqSg=
Received: from localhost (localhost.localdomain [127.0.0.1])
	by web29.yandex.ru (Yandex) with ESMTP id D7B4050C1539
	for <java-user@lucene.apache.org>; Mon, 16 Aug 2010 17:21:47 +0400 (MSD)
X-Yandex-Spam: 1
X-Yandex-Front: web29.yandex.ru 
X-Yandex-TimeMark: 1281964907 
Received: from fortytwo.axmor.com (fortytwo.axmor.com [91.192.173.242]) by mail.yandex.ru with HTTP;
	Mon, 16 Aug 2010 17:21:47 +0400
From: Mylnikov Sergey <semykov@yandex.ru>
To: java-user@lucene.apache.org
In-Reply-To: <1281963673.13668.ezmlm@lucene.apache.org>
References: <1281963673.13668.ezmlm@lucene.apache.org>
Subject: How to close IndexSearcher so that index file gets released?
MIME-Version: 1.0
Message-Id: <16491281964907@web29.yandex.ru>
Date: Mon, 16 Aug 2010 17:21:47 +0400
X-Mailer: Yamail [ http://yandex.ru ] 5.0
Content-Type: multipart/mixed;
	boundary="----==--bound.1650.web29.yandex.ru"
X-Virus-Checked: Checked by ClamAV on apache.org

------==--bound.1650.web29.yandex.ru
Content-Transfer-Encoding: 7bit
Content-Type: text/plain

Hi,

I want to be able to regenerate index from time to time. I'm using IndexSearcher for search and want to be able to release the current index file so that I can replace it with the new one. But once IndexSearcher is instantiated it does not seem to release index file even if I call close().

I'm running the test on Windows XP. Here is a short test that I use:

String indexDir = "C:/IndexTemp2/index/";
IndexSearcher searcher = new IndexSearcher(new MMapDirectory(new File(indexDir)));
searcher.close();
/*
 Trying to see if the index file can be modified
 */
new FileWriter(indexDir + "_0.cfs");
/*
 java.io.FileNotFoundException: C:\IndexTemp2\index\_0.cfs 
 (The requested operation cannot be performed on a file with a user-mapped section open.)
 */

After I close IndexSearcher I try to check if I can modify file, but it is in use.

Could someone tell me what is the correct way to close the IndexReader?

I will try to attach the JUnit test class and index directory as ZIP archive to this message.

Thanks,
Sergey

------==--bound.1650.web29.yandex.ru
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------==--bound.1650.web29.yandex.ru--

From java-user-return-47027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 16 13:28:26 2010
Return-Path: <java-user-return-47027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77383 invoked from network); 16 Aug 2010 13:28:26 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Aug 2010 13:28:26 -0000
Received: (qmail 50398 invoked by uid 500); 16 Aug 2010 13:28:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49987 invoked by uid 500); 16 Aug 2010 13:28:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49978 invoked by uid 99); 16 Aug 2010 13:28:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 13:28:20 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 13:28:15 +0000
Received: by qwk3 with SMTP id 3so4680920qwk.35
        for <java-user@lucene.apache.org>; Mon, 16 Aug 2010 06:27:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=//RqQidVoRpj6h84xRGpV3aM0tZWEcvwS//1nRk4IQE=;
        b=Q4hNKsTUSU1MdzW4kEm/s/dQ/2l56Mnh+PyeNNsFje3Jsb9Ug5m9XYaVpPd2kORxMI
         rJiwr7Ov/yOOsn6x2kZNVpjBxZ9cdkPTVg0w+bmQoqb781PhdSpQS3Hne3MMHV3eFCMO
         BXxRtU2l5RqIaPVoU2u0CYC3KxnDUt64aQ970=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=ufFWLK1MKZ8ZKgwDCCWWtmAi9JTJADEYiUrwd28V2gtxJz7oJ4zVevyzfVrxCNt8E8
         iWK0XZIl+eVfOTgPkq+UErmJs7BqoMG30/bPyWcFTeCSUhgFm48VLjzD/wdbaH7CM7Sa
         2F2Lefclegnta9gWiJLSmB5kVDluF0yM3f1cc=
Received: by 10.229.51.210 with SMTP id e18mr167116qcg.249.1281965274210; Mon,
 16 Aug 2010 06:27:54 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.96.200 with HTTP; Mon, 16 Aug 2010 06:27:34 -0700 (PDT)
In-Reply-To: <16491281964907@web29.yandex.ru>
References: <1281963673.13668.ezmlm@lucene.apache.org> <16491281964907@web29.yandex.ru>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 16 Aug 2010 14:27:34 +0100
Message-ID: <AANLkTin2uOK8vrZ2YD_dJNZHo==qL7B+BNqbhRNEx3o2@mail.gmail.com>
Subject: Re: How to close IndexSearcher so that index file gets released?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Read the javadocs for MMapDirectory.

--
Ian.


On Mon, Aug 16, 2010 at 2:21 PM, Mylnikov Sergey <semykov@yandex.ru> wrote:
> Hi,
>
> I want to be able to regenerate index from time to time. I'm using IndexS=
earcher for search and want to be able to release the current index file so=
 that I can replace it with the new one. But once IndexSearcher is instanti=
ated it does not seem to release index file even if I call close().
>
> I'm running the test on Windows XP. Here is a short test that I use:
>
> String indexDir =3D "C:/IndexTemp2/index/";
> IndexSearcher searcher =3D new IndexSearcher(new MMapDirectory(new File(i=
ndexDir)));
> searcher.close();
> /*
> =A0Trying to see if the index file can be modified
> =A0*/
> new FileWriter(indexDir + "_0.cfs");
> /*
> =A0java.io.FileNotFoundException: C:\IndexTemp2\index\_0.cfs
> =A0(The requested operation cannot be performed on a file with a user-map=
ped section open.)
> =A0*/
>
> After I close IndexSearcher I try to check if I can modify file, but it i=
s in use.
>
> Could someone tell me what is the correct way to close the IndexReader?
>
> I will try to attach the JUnit test class and index directory as ZIP arch=
ive to this message.
>
> Thanks,
> Sergey
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 16 13:32:39 2010
Return-Path: <java-user-return-47028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79921 invoked from network); 16 Aug 2010 13:32:39 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Aug 2010 13:32:39 -0000
Received: (qmail 58192 invoked by uid 500); 16 Aug 2010 13:32:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57859 invoked by uid 500); 16 Aug 2010 13:32:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57851 invoked by uid 99); 16 Aug 2010 13:32:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 13:32:32 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [132.230.150.4] (HELO abacus.informatik.uni-freiburg.de) (132.230.150.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 13:32:24 +0000
Received: from hsi-kbw-078-042-207-153.hsi3.kabel-badenwuerttemberg.de ([78.42.207.153] helo=guschtel.localnet)
	by abacus.informatik.uni-freiburg.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.71)
	(envelope-from <hermann@informatik.uni-freiburg.de>)
	id 1OkznI-0003Dn-KX
	for java-user@lucene.apache.org; Mon, 16 Aug 2010 15:32:04 +0200
From: Christoph Hermann <hermann@informatik.uni-freiburg.de>
To: java-user@lucene.apache.org
Subject: Search results include results with excluded terms
Date: Mon, 16 Aug 2010 15:31:59 +0200
User-Agent: KMail/1.13.5 (Linux/2.6.34-gentoo-r1; KDE/4.4.5; x86_64; ; )
Organization: =?iso-8859-1?q?Albert-Ludwigs-Universit=E4t?= Freiburg
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Message-Id: <201008161532.00315.hermann@informatik.uni-freiburg.de>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

i've built a local index of the german wikipedia (works fine so far).

Now when i'm searching this index with luke (or my own code) using a query=
=20
like "title:(-Datei*) avl" i still get results with Documents where the tit=
le=20
contains: "Datei:foo".

The title field is created like this:
=46ield fieldTitle =3D new Field(Metadata.TITLE, title, Field.Store.YES,=20
=46ield.Index.ANALYZED);

Can someone explain to me why i still get these results?

If i click on "explain" in luke, it tells me that the score basically came=
=20
from the contents field where "avl" is included.

So the question is, how do i *exclude* documents? I.e. score the exclusion=
=20
very low, so that these results won't appear at all?

regards
Christoph

=2D-=20
Christoph Hermann
Institut f=FCr Informatik
Tel: +49 761-203-8171 Fax: +49 761-203-8162
e-mail: hermann@informatik.uni-freiburg.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 16 13:42:13 2010
Return-Path: <java-user-return-47029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83632 invoked from network); 16 Aug 2010 13:42:13 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Aug 2010 13:42:13 -0000
Received: (qmail 74916 invoked by uid 500); 16 Aug 2010 13:42:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74634 invoked by uid 500); 16 Aug 2010 13:42:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74626 invoked by uid 99); 16 Aug 2010 13:42:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 13:42:07 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of semykov@yandex.ru designates 95.108.130.119 as permitted sender)
Received: from [95.108.130.119] (HELO forward15.mail.yandex.net) (95.108.130.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 13:41:58 +0000
Received: from web147.yandex.ru (web147.yandex.ru [95.108.131.162])
	by forward15.mail.yandex.net (Yandex) with ESMTP id 583964459111
	for <java-user@lucene.apache.org>; Mon, 16 Aug 2010 17:41:38 +0400 (MSD)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yandex.ru; s=mail;
	t=1281966098; bh=JIAhNOWZfBWCdnqBY8NP/nIYzm19DSlNiQZfWEm0yuA=;
	h=From:To:In-Reply-To:References:Subject:MIME-Version:Message-Id:
	 Date:Content-Transfer-Encoding:Content-Type;
	b=XwYGgDulrI36RyiMC3/nkJLVL90hlXj8/W15ca91gPQaDnDCaIpFi+C80dISGSvam
	 qY3qQgDfPUT5kNy/ycZqA2WxpPmRu28Cndf6oxrj0IRyr1arcsYwcuoHiFfcZxHdC1
	 V98V+su/u2Dw6i8vtg9dfSf+ppMxm/LdLTg2aBG4=
Received: from localhost (localhost.localdomain [127.0.0.1])
	by web147.yandex.ru (Yandex) with ESMTP id 557C06E7006F
	for <java-user@lucene.apache.org>; Mon, 16 Aug 2010 17:41:38 +0400 (MSD)
X-Yandex-Spam: 1
X-Yandex-Front: web147.yandex.ru 
X-Yandex-TimeMark: 1281966098 
Received: from fortytwo.axmor.com (fortytwo.axmor.com [91.192.173.242]) by mail.yandex.ru with HTTP;
	Mon, 16 Aug 2010 17:41:37 +0400
From: Sergey <semykov@yandex.ru>
To: java-user@lucene.apache.org
In-Reply-To: <AANLkTin2uOK8vrZ2YD_dJNZHo==qL7B+BNqbhRNEx3o2@mail.gmail.com>
References: <1281963673.13668.ezmlm@lucene.apache.org> <16491281964907@web29.yandex.ru> <AANLkTin2uOK8vrZ2YD_dJNZHo==qL7B+BNqbhRNEx3o2@mail.gmail.com>
Subject: Re: Re: How to close IndexSearcher so that index file gets released?
MIME-Version: 1.0
Message-Id: <23761281966098@web147.yandex.ru>
Date: Mon, 16 Aug 2010 17:41:37 +0400
X-Mailer: Yamail [ http://yandex.ru ] 5.0
Content-Transfer-Encoding: 8bit
Content-Type: text/plain; charset=koi8-r
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks, Ian

Somehow I did not bother to read the MMapDirectory javadoc.


16.08.10, 17:27, "Ian Lea" <ian.lea@gmail.com>:

> Read the javadocs for MMapDirectory.
>  
>  --
>  Ian.
>  
>  
>  On Mon, Aug 16, 2010 at 2:21 PM, Mylnikov Sergey  wrote:
>  > Hi,
>  >
>  > I want to be able to regenerate index from time to time. I'm using IndexSearcher for search and want to be able to release the current index file so that I can replace it with the new one. But once IndexSearcher is instantiated it does not seem to release index file even if I call close().
>  >
>  > I'm running the test on Windows XP. Here is a short test that I use:
>  >
>  > String indexDir = "C:/IndexTemp2/index/";
>  > IndexSearcher searcher = new IndexSearcher(new MMapDirectory(new File(indexDir)));
>  > searcher.close();
>  > /*
>  > Trying to see if the index file can be modified
>  > */
>  > new FileWriter(indexDir + "_0.cfs");
>  > /*
>  > java.io.FileNotFoundException: C:\IndexTemp2\index\_0.cfs
>  > (The requested operation cannot be performed on a file with a user-mapped section open.)
>  > */
>  >
>  > After I close IndexSearcher I try to check if I can modify file, but it is in use.
>  >
>  > Could someone tell me what is the correct way to close the IndexReader?
>  >
>  > I will try to attach the JUnit test class and index directory as ZIP archive to this message.
>  >
>  > Thanks,
>  > Sergey
>  >
>  >
>  > ---------------------------------------------------------------------
>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  > For additional commands, e-mail: java-user-help@lucene.apache.org
>  >
>  
>  ---------------------------------------------------------------------
>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>  For additional commands, e-mail: java-user-help@lucene.apache.org
>  
>  
>  

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 16 16:00:54 2010
Return-Path: <java-user-return-47030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57278 invoked from network); 16 Aug 2010 16:00:53 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Aug 2010 16:00:53 -0000
Received: (qmail 87422 invoked by uid 500); 16 Aug 2010 16:00:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87371 invoked by uid 500); 16 Aug 2010 16:00:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87363 invoked by uid 99); 16 Aug 2010 16:00:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 16:00:50 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [141.211.3.202] (HELO itcs-ehub-02.adsroot.itcs.umich.edu) (141.211.3.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 16:00:43 +0000
Received: from ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu ([141.211.3.233]) by
 itcs-ehub-02.adsroot.itcs.umich.edu ([141.211.3.202]) with mapi; Mon, 16 Aug
 2010 12:00:21 -0400
From: "Burton-West, Tom" <tburtonw@umich.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 16 Aug 2010 12:00:19 -0400
Subject: RE: scalability limit in terms of numbers of large documents
Thread-Topic: scalability limit in terms of numbers of large documents
Thread-Index: Acs9GmofaEt5ciA2TJGB09+Me7ttdwAPjI5m
Message-ID: <A902805D9E8F66428EACF947DDA9840C070B826CBA@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
References: <1281749081591-1142517.post@n3.nabble.com>,<1281946178.7264.17.camel@te-prime>
In-Reply-To: <1281946178.7264.17.camel@te-prime>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Andy,

We are currently indexing about 650,000 full-text books in per Solr/Lucene =
index.   We have 10 shards  for a total of about 6.5 million documents and =
our average response time is under a 2 seconds, but the slowest 1% of queri=
es take between 5-30 seconds.  If you were searching only one index of 650,=
000 documents instead of the 6.5 million, the response time would quite a b=
it better. If you only allow boolean "AND" queries and use stopwords, the r=
esponse time would be significantly better.  Our slowest searches are almos=
t all phrase queries with common words.  =20

You probably need to define what you mean by "searched quickly" and what ki=
nd of a load you are expecting. Also you need to think about what kind of h=
ardware you want to use. Also as index sizes get large,disk I/O can become =
a bottleneck.   Using more memory for the OS disk cache and Solr/Lucene cac=
hes can compensate for this. Using SSD's instead of Hard Disks can also off=
set this as Toke can tell you about.  If you need to do frequent index upda=
tes it can invalidate both the OS I/O cache and the Solr/Lucene caches, so =
there are lots of trade-offs to tune.=20

Lucene had a limit of about 2.4 billion unique terms per segment, which we =
ran into because we have dirty OCR and 200 languages (http://www.hathitrust=
.org/blogs/large-scale-search/too-many-words).  However Michael McCandless =
changed the limit to about 274 billion unique terms.  Chances are you will =
run into bottlenecks with disk I/O  or other bottlenecks, long before you r=
each this limit.

BTW: we index whole books as Solr documents, not chapters or pages.

Tom=20
www.hathitrust.org/blogs
________________________________________





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 16 16:29:31 2010
Return-Path: <java-user-return-47031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72404 invoked from network); 16 Aug 2010 16:29:31 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Aug 2010 16:29:31 -0000
Received: (qmail 18101 invoked by uid 500); 16 Aug 2010 16:29:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18027 invoked by uid 500); 16 Aug 2010 16:29:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18019 invoked by uid 99); 16 Aug 2010 16:29:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 16:29:28 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.92] (HELO smtp2.syr.edu) (128.230.18.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 16:29:19 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by smtp2.syr.edu (8.14.3/8.14.3) with ESMTP id o7GGSwGo016694
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Mon, 16 Aug 2010 12:28:58 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-01.ad.syr.edu ([128.230.108.195]) with mapi; Mon, 16 Aug 2010
 12:28:58 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 16 Aug 2010 12:29:14 -0400
Subject: RE: Search results include results with excluded terms
Thread-Topic: Search results include results with excluded terms
Thread-Index: Acs9R4LrBDD6ZazFQ2eodGG+8CRK2QAFrX1w
Message-ID: <2D127F11DC79714E9B6A43AC9458147F796786FB@suex07-mbx-03.ad.syr.edu>
References: <201008161532.00315.hermann@informatik.uni-freiburg.de>
In-Reply-To: <201008161532.00315.hermann@informatik.uni-freiburg.de>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.0.10011,1.0.148,0.0.0000
 definitions=2010-08-16_03:2010-08-16,2010-08-16,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgQ2hyaXN0b3BoLA0KDQpUaGVyZSBjb3VsZCBiZSBzZXZlcmFsIHRoaW5ncyBnb2luZyBvbiwg
YnV0IGl0J3MgZGlmZmljdWx0IHRvIHRlbGwgd2l0aG91dCBtb3JlIGluZm9ybWF0aW9uLiAgDQoN
ClNpbmNlIGV4Y2x1ZGVkIHRlcm1zIHJlcXVpcmUgYSBub24tZW1wdHkgc2V0IGZyb20gd2hpY2gg
dG8gcmVtb3ZlIGRvY3VtZW50cyBhdCB0aGUgc2FtZSBib29sZWFuIGNsYXVzZSBsZXZlbCwgeW91
IGNvdWxkIHRyeSBzb21ldGhpbmcgbGlrZSAidGl0bGU6KCo6KiAtRGF0ZWkqKSBhdmwiLCBvciAi
LXRpdGxlOkRhdGVpKiBhdmwiLg0KDQpBbm90aGVyIHBvc3NpYmxlIHByb2JsZW0gaXMgY2FzZS4g
IElmIHlvdSBkb3duY2FzZSBpbmRleGVkIHRlcm1zLCAiRGF0ZWkqIiB3aWxsIG5vdCBtYXRjaCBh
bnkgb2YgdGhlbSBieSBkZWZhdWx0LCBzaW5jZSBubyBhbmFseXNpcyBpcyBjYXJyaWVkIG91dCBv
biB3aWxkY2FyZCB0ZXJtcy4gIFF1ZXJ5UGFyc2VyIGhhcyBhIHN0YXRpYyBtZXRob2Qgc2V0TG93
ZXJjYXNlRXhwYW5kZWRUZXJtcygpIHRoYXQgeW91IGNhbiBjYWxsIHRvIHR1cm4gb24gYXV0b21h
dGljIHByZS1leHBhbnNpb24gcXVlcnkgdGVybSBkb3duY2FzaW5nOg0KDQo8aHR0cDovL2x1Y2Vu
ZS5hcGFjaGUub3JnL2phdmEvM18wXzIvYXBpL2FsbC9vcmcvYXBhY2hlL2x1Y2VuZS9xdWVyeVBh
cnNlci9RdWVyeVBhcnNlci5odG1sI3NldExvd2VyY2FzZUV4cGFuZGVkVGVybXMlMjhib29sZWFu
JTI5Pg0KDQpTdGV2ZQ0KDQo+IC0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQo+IEZyb206IENo
cmlzdG9waCBIZXJtYW5uIFttYWlsdG86aGVybWFubkBpbmZvcm1hdGlrLnVuaS1mcmVpYnVyZy5k
ZV0NCj4gU2VudDogTW9uZGF5LCBBdWd1c3QgMTYsIDIwMTAgOTozMiBBTQ0KPiBUbzogamF2YS11
c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQo+IFN1YmplY3Q6IFNlYXJjaCByZXN1bHRzIGluY2x1ZGUg
cmVzdWx0cyB3aXRoIGV4Y2x1ZGVkIHRlcm1zDQo+IA0KPiBIaSwNCj4gDQo+IGkndmUgYnVpbHQg
YSBsb2NhbCBpbmRleCBvZiB0aGUgZ2VybWFuIHdpa2lwZWRpYSAod29ya3MgZmluZSBzbyBmYXIp
Lg0KPiANCj4gTm93IHdoZW4gaSdtIHNlYXJjaGluZyB0aGlzIGluZGV4IHdpdGggbHVrZSAob3Ig
bXkgb3duIGNvZGUpIHVzaW5nIGEgcXVlcnkNCj4gbGlrZSAidGl0bGU6KC1EYXRlaSopIGF2bCIg
aSBzdGlsbCBnZXQgcmVzdWx0cyB3aXRoIERvY3VtZW50cyB3aGVyZSB0aGUNCj4gdGl0bGUgY29u
dGFpbnM6ICJEYXRlaTpmb28iLg0KPiANCj4gVGhlIHRpdGxlIGZpZWxkIGlzIGNyZWF0ZWQgbGlr
ZSB0aGlzOg0KPiBGaWVsZCBmaWVsZFRpdGxlID0gbmV3IEZpZWxkKE1ldGFkYXRhLlRJVExFLCB0
aXRsZSwgRmllbGQuU3RvcmUuWUVTLCBGaWVsZC5JbmRleC5BTkFMWVpFRCk7DQo+IA0KPiBDYW4g
c29tZW9uZSBleHBsYWluIHRvIG1lIHdoeSBpIHN0aWxsIGdldCB0aGVzZSByZXN1bHRzPw0KPiAN
Cj4gSWYgaSBjbGljayBvbiAiZXhwbGFpbiIgaW4gbHVrZSwgaXQgdGVsbHMgbWUgdGhhdCB0aGUg
c2NvcmUgYmFzaWNhbGx5IGNhbWUNCj4gZnJvbSB0aGUgY29udGVudHMgZmllbGQgd2hlcmUgImF2
bCIgaXMgaW5jbHVkZWQuDQo+IA0KPiBTbyB0aGUgcXVlc3Rpb24gaXMsIGhvdyBkbyBpICpleGNs
dWRlKiBkb2N1bWVudHM/IEkuZS4gc2NvcmUgdGhlIGV4Y2x1c2lvbg0KPiB2ZXJ5IGxvdywgc28g
dGhhdCB0aGVzZSByZXN1bHRzIHdvbid0IGFwcGVhciBhdCBhbGw/DQo+IA0KPiByZWdhcmRzDQo+
IENocmlzdG9waA0KPiANCj4gLS0NCj4gQ2hyaXN0b3BoIEhlcm1hbm4NCj4gSW5zdGl0dXQgZsO8
ciBJbmZvcm1hdGlrDQo+IFRlbDogKzQ5IDc2MS0yMDMtODE3MSBGYXg6ICs0OSA3NjEtMjAzLTgx
NjINCj4gZS1tYWlsOiBoZXJtYW5uQGluZm9ybWF0aWsudW5pLWZyZWlidXJnLmRlDQo+IA0KPiAt
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0NCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2Ny
aWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6
IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQoNCg==


From java-user-return-47032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 16 16:35:56 2010
Return-Path: <java-user-return-47032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77833 invoked from network); 16 Aug 2010 16:35:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Aug 2010 16:35:55 -0000
Received: (qmail 32490 invoked by uid 500); 16 Aug 2010 16:35:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32437 invoked by uid 500); 16 Aug 2010 16:35:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32429 invoked by uid 99); 16 Aug 2010 16:35:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 16:35:53 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.82] (HELO smtp1.syr.edu) (128.230.18.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 16:35:42 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by smtp1.syr.edu (8.14.3/8.14.3) with ESMTP id o7GGZLlF028981
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Mon, 16 Aug 2010 12:35:21 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([128.230.108.196]) with mapi; Mon, 16 Aug 2010
 12:35:21 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 16 Aug 2010 12:35:36 -0400
Subject: RE: Search results include results with excluded terms
Thread-Topic: Search results include results with excluded terms
Thread-Index: Acs9R4LrBDD6ZazFQ2eodGG+8CRK2QAFrX1wAACpeVA=
Message-ID: <2D127F11DC79714E9B6A43AC9458147F796786FC@suex07-mbx-03.ad.syr.edu>
References: <201008161532.00315.hermann@informatik.uni-freiburg.de>
 <2D127F11DC79714E9B6A43AC9458147F796786FB@suex07-mbx-03.ad.syr.edu>
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F796786FB@suex07-mbx-03.ad.syr.edu>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.0.10011,1.0.148,0.0.0000
 definitions=2010-08-16_03:2010-08-16,2010-08-16,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe

T29wcywgc2V0TG93ZXJjYXNlRXhwYW5kZWRUZXJtcygpIGlzIGFuIGluc3RhbmNlIG1ldGhvZCwg
bm90IHN0YXRpYy4NCg0KSSB3cm90ZToNCj4gUXVlcnlQYXJzZXIgaGFzIGEgc3RhdGljIG1ldGhv
ZCBzZXRMb3dlcmNhc2VFeHBhbmRlZFRlcm1zKCkgdGhhdCB5b3UgY2FuIGNhbGwNCj4gdG8gdHVy
biBvbiBhdXRvbWF0aWMgcHJlLWV4cGFuc2lvbiBxdWVyeSB0ZXJtIGRvd25jYXNpbmc6DQo+IA0K
PiA8aHR0cDovL2x1Y2VuZS5hcGFjaGUub3JnL2phdmEvM18wXzIvYXBpL2FsbC9vcmcvYXBhY2hl
L2x1Y2VuZS9xdWVyeVBhcnNlci9RdWVyeVBhcnNlci5odG1sI3NldExvd2VyY2FzZUV4cGFuZGVk
VGVybXMlMjhib29sZWFuJTI5Pg0K


From java-user-return-47033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 16 18:49:26 2010
Return-Path: <java-user-return-47033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80033 invoked from network); 16 Aug 2010 18:49:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Aug 2010 18:49:25 -0000
Received: (qmail 65480 invoked by uid 500); 16 Aug 2010 18:49:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65422 invoked by uid 500); 16 Aug 2010 18:49:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65407 invoked by uid 99); 16 Aug 2010 18:49:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 18:49:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [132.230.150.4] (HELO abacus.informatik.uni-freiburg.de) (132.230.150.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 18:49:15 +0000
Received: from hsi-kbw-078-042-207-153.hsi3.kabel-badenwuerttemberg.de ([78.42.207.153] helo=guschtel.localnet)
	by abacus.informatik.uni-freiburg.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.71)
	(envelope-from <hermann@informatik.uni-freiburg.de>)
	id 1Ol4ju-0005fh-FT
	for java-user@lucene.apache.org; Mon, 16 Aug 2010 20:48:54 +0200
From: Christoph Hermann <hermann@informatik.uni-freiburg.de>
To: java-user@lucene.apache.org
Subject: Re: Search results include results with excluded terms
Date: Mon, 16 Aug 2010 20:48:49 +0200
User-Agent: KMail/1.13.5 (Linux/2.6.34-gentoo-r1; KDE/4.4.5; x86_64; ; )
References: <201008161532.00315.hermann@informatik.uni-freiburg.de> <2D127F11DC79714E9B6A43AC9458147F796786FB@suex07-mbx-03.ad.syr.edu> <2D127F11DC79714E9B6A43AC9458147F796786FC@suex07-mbx-03.ad.syr.edu>
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F796786FC@suex07-mbx-03.ad.syr.edu>
Organization: =?utf-8?q?Albert-Ludwigs-Universit=C3=A4t?= Freiburg
MIME-Version: 1.0
Content-Type: Text/Plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Message-Id: <201008162048.49681.hermann@informatik.uni-freiburg.de>
X-Virus-Checked: Checked by ClamAV on apache.org

Am Montag, 16. August 2010, 18:35:36 schrieb Steven A Rowe:

Hi,

> I wrote:
> > QueryParser has a static method setLowercaseExpandedTerms() that you can
> > call to turn on automatic pre-expansion query term downcasing:
> >=20
> > <http://lucene.apache.org/java/3_0_2/api/all/org/apache/lucene/queryPar=
se
> > r/QueryParser.html#setLowercaseExpandedTerms%28boolean%29>

> Oops, setLowercaseExpandedTerms() is an instance method, not static.

defaults to true.

If i change my code:

QueryParser qp =3D new QueryParser(Version.LUCENE_30, "contents",=20
AnalyzerHelper.getWikipediaAnalyzer("de"));
qp.setLowercaseExpandedTerms(false); <-- HERE
	=09
String queryStr =3D "avl tree";
Query q =3D qp.parse(queryStr);
String noFilesQueryStr =3D Metadata.TITLE + ":Datei*";
Query q2 =3D qp.parse(noFilesQueryStr);
	=09
BooleanQuery finalQuery =3D new BooleanQuery();
finalQuery.add(q, Occur.MUST);
finalQuery.add(q2, Occur.MUST_NOT);

it works as expected.

Thanks a lot for the hint!

I think i'll recreate my index with a LowerCaseFilter, that should fix it,=
=20
shouldn't it?

regards
Christoph Hermann

=2D-=20
Christoph Hermann
Institut f=C3=BCr Informatik
Tel: +49 761-203-8171 Fax: +49 761-203-8162
e-mail: hermann@informatik.uni-freiburg.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 16 19:09:31 2010
Return-Path: <java-user-return-47034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96629 invoked from network); 16 Aug 2010 19:09:31 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Aug 2010 19:09:31 -0000
Received: (qmail 98682 invoked by uid 500); 16 Aug 2010 19:09:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98585 invoked by uid 500); 16 Aug 2010 19:09:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98577 invoked by uid 99); 16 Aug 2010 19:09:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 19:09:28 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_FILL_THIS_FORM_SHORT,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of akaris@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 19:09:22 +0000
Received: by eydd26 with SMTP id d26so2103408eyd.35
        for <java-user@lucene.apache.org>; Mon, 16 Aug 2010 12:09:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type;
        bh=o7bBG8A9fZcsH8eiY7gQQj1Xma9fcWGY20lL1Jz1R5U=;
        b=Hv3W1UGDqg6/jGYiFqEVKAZ0JwXB+KaCk3NC8ndh7/zmv4YU4Tqd0/XFQoYwWsNiRl
         gEQb+brGSQbJY3MhGmSoTIIjCYXXJ0SOqiQvKo1BneIQHzb+nFKe7FB5iRePh3a/axpb
         ip0BOci7Hlv2usshJvoAy0XtKHr/g9sMCl/0g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=bHUR5x1qsWv27TIW0o/IFFgJBM9cb4d2LYYlot7gYNp47tMH51l9k2BKnQq6+JQ/Xo
         lNlpup0SGsEMq1jVDiE1YgBVaf4/ips+zq8dsY5Cy7J3G67I0xNbdNbIdogtTDopLMQc
         iSRyqlLrtkmJ50X+S96by6KX2Q1Zk+lOAQi0o=
Received: by 10.213.28.134 with SMTP id m6mr4997701ebc.96.1281985741175; Mon,
 16 Aug 2010 12:09:01 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.14.10.153 with HTTP; Mon, 16 Aug 2010 12:08:41 -0700 (PDT)
From: Michel Nadeau <akaris@gmail.com>
Date: Mon, 16 Aug 2010 15:08:41 -0400
Message-ID: <AANLkTimHhWx4ZEzZCuQN5p4u=kbc-s20R4qfdyBLDf=p@mail.gmail.com>
Subject: "Natural sorting" of documents in a Lucene index - possible?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174c45eeb5c6ab048df590cc

--0015174c45eeb5c6ab048df590cc
Content-Type: text/plain; charset=ISO-8859-1

Hi,

we are building an application using Lucene and we have HUGE data sets (our
index contains millions and millions and millions of documents), which
obviously cause us very important problems when sorting. In fact, we
disabled sorting completely because the servers were just exploding when
trying to sort results in RAM. The users using the system can search for
whatever they want, so we never know how many results will be returned - a
search can return 10 documents (no problem with sorting) or 10,000,000 (huge
sorting problems).

I woke up this morning and had a flash : is it possible with Lucene to have
a "natural sorting" of documents? For example, let's say I have 3 columns I
want to be able to sort by : first name, last name, email; I would have 3
different indexes with the very same data but with a different primary key
for sorting. I know it's far fetched, and I have never seen anything like
that since I use Lucene, but we're just desperate... how people do to have
huge data sets, a lot of users, and sort!?

Thanks,

Mike

--0015174c45eeb5c6ab048df590cc--

From java-user-return-47035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 16 19:16:06 2010
Return-Path: <java-user-return-47035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99543 invoked from network); 16 Aug 2010 19:16:05 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Aug 2010 19:16:05 -0000
Received: (qmail 14362 invoked by uid 500); 16 Aug 2010 19:16:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14148 invoked by uid 500); 16 Aug 2010 19:16:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14138 invoked by uid 99); 16 Aug 2010 19:16:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 19:16:03 +0000
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=RCVD_IN_DNSWL_LOW,RCVD_NUMERIC_HELO,SPF_NEUTRAL,T_FILL_THIS_FORM_SHORT
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [69.50.2.20] (HELO ex14.myhostedexchange.com) (69.50.2.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 19:15:55 +0000
Received: from 208.178.63.106 ([208.178.63.106]) by ex14.hostedexchange.local ([172.16.69.21]) with Microsoft Exchange Server HTTP-DAV ;
 Mon, 16 Aug 2010 19:15:33 +0000
User-Agent: Microsoft-Entourage/12.25.0.100505
Date: Mon, 16 Aug 2010 12:15:32 -0700
Subject: Re: "Natural sorting" of documents in a Lucene index - possible?
From: Marilson Campos <mcampos@buzzlogic.com>
To: <java-user@lucene.apache.org>
Message-ID: <C88EDC64.19EB%mcampos@buzzlogic.com>
Thread-Topic: "Natural sorting" of documents in a Lucene index - possible?
Thread-Index: Acs9d2VKBYpOOx+BvkKok3s28er71Q==
In-Reply-To: <AANLkTimHhWx4ZEzZCuQN5p4u=kbc-s20R4qfdyBLDf=p@mail.gmail.com>
Mime-version: 1.0
Content-type: text/plain;
	charset="US-ASCII"
Content-transfer-encoding: 7bit

Hi Michael,
One issue to consider is how long it's going to take to rebuild the indexes
at the frequency that you plan. One option is to not store any data on the
indexes just a docId that references to another repository. This will keep
the processes a little lighter. Also consider using Solid State Drives to
improve the indexing speed.

Marilson Campos 


On 8/16/10 12:08 PM, "Michel Nadeau" <akaris@gmail.com> wrote:

> Hi,
> 
> we are building an application using Lucene and we have HUGE data sets (our
> index contains millions and millions and millions of documents), which
> obviously cause us very important problems when sorting. In fact, we
> disabled sorting completely because the servers were just exploding when
> trying to sort results in RAM. The users using the system can search for
> whatever they want, so we never know how many results will be returned - a
> search can return 10 documents (no problem with sorting) or 10,000,000 (huge
> sorting problems).
> 
> I woke up this morning and had a flash : is it possible with Lucene to have
> a "natural sorting" of documents? For example, let's say I have 3 columns I
> want to be able to sort by : first name, last name, email; I would have 3
> different indexes with the very same data but with a different primary key
> for sorting. I know it's far fetched, and I have never seen anything like
> that since I use Lucene, but we're just desperate... how people do to have
> huge data sets, a lot of users, and sort!?
> 
> Thanks,
> 
> Mike


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 16 19:39:27 2010
Return-Path: <java-user-return-47036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7824 invoked from network); 16 Aug 2010 19:39:26 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Aug 2010 19:39:26 -0000
Received: (qmail 36988 invoked by uid 500); 16 Aug 2010 19:39:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36934 invoked by uid 500); 16 Aug 2010 19:39:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36926 invoked by uid 99); 16 Aug 2010 19:39:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 19:39:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [132.230.150.4] (HELO abacus.informatik.uni-freiburg.de) (132.230.150.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 19:39:18 +0000
Received: from hsi-kbw-078-042-207-153.hsi3.kabel-badenwuerttemberg.de ([78.42.207.153] helo=guschtel.localnet)
	by abacus.informatik.uni-freiburg.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.71)
	(envelope-from <hermann@informatik.uni-freiburg.de>)
	id 1Ol5WJ-0005tr-AX
	for java-user@lucene.apache.org; Mon, 16 Aug 2010 21:38:55 +0200
From: Christoph Hermann <hermann@informatik.uni-freiburg.de>
To: java-user@lucene.apache.org
Subject: Re: Search results include results with excluded terms
Date: Mon, 16 Aug 2010 21:38:50 +0200
User-Agent: KMail/1.13.5 (Linux/2.6.34-gentoo-r1; KDE/4.4.5; x86_64; ; )
References: <201008161532.00315.hermann@informatik.uni-freiburg.de> <2D127F11DC79714E9B6A43AC9458147F796786FC@suex07-mbx-03.ad.syr.edu> <201008162048.49681.hermann@informatik.uni-freiburg.de>
In-Reply-To: <201008162048.49681.hermann@informatik.uni-freiburg.de>
Organization: =?utf-8?q?Albert-Ludwigs-Universit=C3=A4t?= Freiburg
MIME-Version: 1.0
Message-Id: <201008162138.50532.hermann@informatik.uni-freiburg.de>
Content-Type: Text/Plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable

Am Montag, 16. August 2010, 20:48:49 schrieb Christoph Hermann:

Hello,

> I think i'll recreate my index with a LowerCaseFilter, that should fix it=
,=20
> shouldn't it?

it does.
At least i just recreated my index and i'm now using the same Analyzer for =
the=20
QueryParser which i used to create the index (includes a lowercasefilter) a=
nd=20
i don't need the setLowercaseExpandedTerms() any more.

Thanks again for your help.

regards
Christoph Hermann

=2D-=20
Christoph Hermann
Institut f=C3=BCr Informatik
Tel: +49 761-203-8171 Fax: +49 761-203-8162
e-mail: hermann@informatik.uni-freiburg.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 16 20:02:17 2010
Return-Path: <java-user-return-47037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13742 invoked from network); 16 Aug 2010 20:02:17 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Aug 2010 20:02:17 -0000
Received: (qmail 66838 invoked by uid 500); 16 Aug 2010 20:02:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66773 invoked by uid 500); 16 Aug 2010 20:02:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66765 invoked by uid 99); 16 Aug 2010 20:02:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 20:02:14 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_FILL_THIS_FORM_SHORT,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Aug 2010 20:02:07 +0000
Received: by qyk2 with SMTP id 2so2286391qyk.14
        for <java-user@lucene.apache.org>; Mon, 16 Aug 2010 13:01:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=zwo8JOZpzdQKBXUptndMFFByLVsMkI05uZ6xZyLJTJk=;
        b=u4xecR5oFVaHTYw85N700AqrsnhuEkDkjujy6MqVkbqbqhY+YycE+tyJV8wk5t37Iq
         TTFgrIm2ZZ5EIc10VokryX7s8K0fYI926E2y9XiQkfVjlzBperOB0aHUCyvwxAhEcODY
         Tkc5zt62YgGEUusMa+jdaS6Vmw4OcE2XLiGLs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=sBEXNPADvaLDSCRWq4sfhvj8ZXc/RAgJGR8N7WHG4aelEY3RDOk2w2Iv6YBv++Ntau
         GF0vuZPaww5ccUebLExT92v+H+CpXyT4L2pDzinyQ3RHn17v+4Zg+W4TnUYmUIvGsjlE
         lWQPUwAcqvWj8/lmsQjt/G6LomADTLyCq6EtQ=
MIME-Version: 1.0
Received: by 10.224.65.95 with SMTP id h31mr3667040qai.116.1281988906060; Mon,
 16 Aug 2010 13:01:46 -0700 (PDT)
Received: by 10.229.219.11 with HTTP; Mon, 16 Aug 2010 13:01:45 -0700 (PDT)
In-Reply-To: <AANLkTimHhWx4ZEzZCuQN5p4u=kbc-s20R4qfdyBLDf=p@mail.gmail.com>
References: <AANLkTimHhWx4ZEzZCuQN5p4u=kbc-s20R4qfdyBLDf=p@mail.gmail.com>
Date: Mon, 16 Aug 2010 16:01:45 -0400
Message-ID: <AANLkTi=qUOSNBP=ZpvGd=SrXtdp6NabbMFPLJF2AwGrD@mail.gmail.com>
Subject: Re: "Natural sorting" of documents in a Lucene index - possible?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00c09f8992285a0ddb048df64dd6
X-Virus-Checked: Checked by ClamAV on apache.org

--00c09f8992285a0ddb048df64dd6
Content-Type: text/plain; charset=ISO-8859-1

Let's back up a minute. The number of matched records is not
important when sorting, what's important is the number of unique
terms in the field being sorted. Do you have any figures on that? One
very common sorting issue is sorting on very fine date time resolutions,
although your examples don't include that...

Now, cache loading is an issue. The very first time you sort on a field,
all the values are read into a cache. Is it possible this is the source
of your problems? You can cure this with warmup queries. The take-away
is that measuring the response time for the first sorted query is
very misleading.

Although if you're sorting on many, many, many email addresses,
that could be "interesting".

The comment "returning 10,000,000 documents" is, I hope, a
misstatement. If you're trying to *return* 10M docs sorting
is irrelevant compared to assembling that many documents. If
you're trying to return the first 100 of 10M documents, it should
work.

Overall, we need more details on what you're sorting and what
you're trying to return as well as how you're measuring before
we can say much....

Along with how much memory you're giving your JVM to work with,
what "exploding" means. Are you CPU bound? IO bound? Swapping?
You need to characterize what is going wrong before worrying about
solutions......

Best
Erick

On Mon, Aug 16, 2010 at 3:08 PM, Michel Nadeau <akaris@gmail.com> wrote:

> Hi,
>
> we are building an application using Lucene and we have HUGE data sets (our
> index contains millions and millions and millions of documents), which
> obviously cause us very important problems when sorting. In fact, we
> disabled sorting completely because the servers were just exploding when
> trying to sort results in RAM. The users using the system can search for
> whatever they want, so we never know how many results will be returned - a
> search can return 10 documents (no problem with sorting) or 10,000,000
> (huge
> sorting problems).
>
> I woke up this morning and had a flash : is it possible with Lucene to have
> a "natural sorting" of documents? For example, let's say I have 3 columns I
> want to be able to sort by : first name, last name, email; I would have 3
> different indexes with the very same data but with a different primary key
> for sorting. I know it's far fetched, and I have never seen anything like
> that since I use Lucene, but we're just desperate... how people do to have
> huge data sets, a lot of users, and sort!?
>
> Thanks,
>
> Mike
>

--00c09f8992285a0ddb048df64dd6--

From java-user-return-47038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 17 02:29:52 2010
Return-Path: <java-user-return-47038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99923 invoked from network); 17 Aug 2010 02:29:51 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Aug 2010 02:29:51 -0000
Received: (qmail 79714 invoked by uid 500); 17 Aug 2010 02:29:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79662 invoked by uid 500); 17 Aug 2010 02:29:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79654 invoked by uid 99); 17 Aug 2010 02:29:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 02:29:49 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of hillyzheng@gmail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 02:29:42 +0000
Received: by gyb13 with SMTP id 13so3087653gyb.35
        for <java-user@lucene.apache.org>; Mon, 16 Aug 2010 19:29:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=2NUuw3GB/WwGMxgQzsJfP7bNjlCPipyEOqRyqE0LpsI=;
        b=FqTumAqC0df9htL+THhckkbilaPM6AzE2bmhhwjRmh6D0RbXVCuzAMVysUHxZnG8Di
         WBJK0ymuluznsXQ+buZ8+bpJHu2j1Uh6STon3aj3+a9oaLPKbvZ8c25ZwK5vO04Uxnbn
         niLKgw8GPKY/AVBOon3No2ubWc/5jaDdeNKc4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=DdSbgOg2i1uBOCaNaCT+kUMupDEhvjs7tZAcbDZrAM1wO3Mp4bKlMVMsQKXg+bhQuy
         UQzevyXINl4n5D75uXOH4DxIIa5WkMUoe0TwuzqWYDNBI0nUJNreI/i04v8b5OQycLTz
         6dG0AnUw28SPpcWzuAIHQHi0Sffw6v/vIFVn0=
MIME-Version: 1.0
Received: by 10.231.174.84 with SMTP id s20mr6911706ibz.94.1282012160622; Mon,
 16 Aug 2010 19:29:20 -0700 (PDT)
Received: by 10.231.169.201 with HTTP; Mon, 16 Aug 2010 19:29:20 -0700 (PDT)
Date: Tue, 17 Aug 2010 10:29:20 +0800
Message-ID: <AANLkTi=uQ7kmmfvcOvztj43xchUaJt0oPUchRE2V=q0b@mail.gmail.com>
Subject: how to post a question or a message?
From: xiaoyan Zheng <hillyzheng@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364ece566e7f49048dfbb7a6

--0016364ece566e7f49048dfbb7a6
Content-Type: text/plain; charset=ISO-8859-1

hey, I am new with this mail list thing, i wonder how to post a question or
a message?

I just send a question to FAQ mail address, but i recevie a letter with none
available, have i send the wrong address?

regards
Hilly

--0016364ece566e7f49048dfbb7a6--

From java-user-return-47039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 17 02:47:59 2010
Return-Path: <java-user-return-47039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8824 invoked from network); 17 Aug 2010 02:47:59 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Aug 2010 02:47:59 -0000
Received: (qmail 95411 invoked by uid 500); 17 Aug 2010 02:47:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95182 invoked by uid 500); 17 Aug 2010 02:47:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95172 invoked by uid 99); 17 Aug 2010 02:47:55 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 02:47:55 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of hillyzheng@gmail.com designates 209.85.161.176 as permitted sender)
Received: from [209.85.161.176] (HELO mail-gx0-f176.google.com) (209.85.161.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 02:47:32 +0000
Received: by gxk7 with SMTP id 7so3140056gxk.35
        for <java-user@lucene.apache.org>; Mon, 16 Aug 2010 19:47:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=+qq2KUK+BO2UwnPTvvfISDgfar7c/ETvz4UNC4wTgYc=;
        b=gUtxTSDRWhbM1QPaG05vIx98XESv0/JQKoDyPz2uJtCZT7JOyQWusMoK6p8rxYMln6
         Jo1+2ygHQ2xBT/6HEX1OefUaTen+j5+Ganzlbl4ZvOVuww0ZPEgoCwoRP3QVeMe6N1If
         qfShzxfZDZ1f5I0A62ZU0hc5WU2qnT8YmhCq0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=ENljoq/7SY+vc511fIbqgKEwidW0F8nB76yfIr2uP2xG67Omc9Txi4LHdNAuUBc3ie
         KFmTj/vl3tTzwf3s4UIaZD9MKAZCbW8yJ5Pb55XfXpCg/A7iHYAUI85Wg+G68+sbLcQV
         1MKedIwDZt4YtsGSnAiU9AfdVWn/H1AGxs2L4=
MIME-Version: 1.0
Received: by 10.231.159.204 with SMTP id k12mr6932804ibx.42.1282013231479;
 Mon, 16 Aug 2010 19:47:11 -0700 (PDT)
Received: by 10.231.169.201 with HTTP; Mon, 16 Aug 2010 19:47:11 -0700 (PDT)
In-Reply-To: <AANLkTikFkdh8EqDgkKDHnTiGy7ruV9gng+msofiGoB8z@mail.gmail.com>
References: <AANLkTikFkdh8EqDgkKDHnTiGy7ruV9gng+msofiGoB8z@mail.gmail.com>
Date: Tue, 17 Aug 2010 10:47:11 +0800
Message-ID: <AANLkTi=0NcbtWL1YiStzT7wUaXNA0pM--sKLToAEcTDb@mail.gmail.com>
Subject: about RAMDirectory based B/S plantform problem
From: xiaoyan Zheng <hillyzheng@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=005045015d4b427d6d048dfbf763
X-Virus-Checked: Checked by ClamAV on apache.org

--005045015d4b427d6d048dfbf763
Content-Type: text/plain; charset=ISO-8859-1

 about RAMDirectory based B/S plantform problem

hello, I just start to use lucene and become confused about RAMDirectory
based lucene index establishment, the problem is one user use this RAM to
establish index is ok, but, when it comes to multi user, the results is not
correct. when i use synchronized{ writer.writeIndex (...)}, all go alright.
but users have to wait. i mean, is that RAM can only be used in single
thread, esp. writing the index? how to solve it in a B/S plantform?

============================
the detailed test code is like these, very simple, just use jsp:


RAMDirectory idx=new RAMDirectory();

LuceneIndexWriterImpl writer=null;
writer=LuceneIndexWriterImpl.getInstance();

//RAM-based lucene index establishment

synchronized(wirter){
//if no synchronized the result is not correct
writer.writeIndex(idx);

}

LuceneIndexReaderImpl luceneReader=new LuceneIndexReaderImpl(idx);
....
....

out.println("****");
for(Integer id :documents.keySet())
out.println(id);
out.println("****");

===========================
result:
if only one user: out put is correct 7,3

but two users(if no synchronized): out put may be 0,0 and 4, 0 or other
unexpected result.


Regards
Hilly

--005045015d4b427d6d048dfbf763--

From java-user-return-47040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 17 02:51:26 2010
Return-Path: <java-user-return-47040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9779 invoked from network); 17 Aug 2010 02:51:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Aug 2010 02:51:25 -0000
Received: (qmail 1862 invoked by uid 500); 17 Aug 2010 02:51:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1704 invoked by uid 500); 17 Aug 2010 02:51:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1696 invoked by uid 99); 17 Aug 2010 02:51:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 02:51:21 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,MIME_BASE64_BLANKS,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.161.176 as permitted sender)
Received: from [209.85.161.176] (HELO mail-gx0-f176.google.com) (209.85.161.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 02:51:15 +0000
Received: by gxk7 with SMTP id 7so3141706gxk.35
        for <java-user@lucene.apache.org>; Mon, 16 Aug 2010 19:50:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:x-rim-org-msg-ref-id
         :message-id:content-transfer-encoding:reply-to:x-priority
         :sensitivity:importance:subject:to:from:date:content-type
         :mime-version;
        bh=+no/aJaWfvGw1IjMgNnOoPa7gjvtSfDSUqpIVnZZMOM=;
        b=Y4Rnnz3O1Ai2s8v22zx571xC6fB01Coz9peug1XPeNXvEvvvoRemrWCiYPBIzgsXdP
         aiewZffS9kGVxQedrlTwzZoNPL2KClzBmF8oyKC910SZvg16Rd0WyDgl/sO9oaa2r1KE
         nr4YJe8YTG8ZpFHYihPnZfk0qYh+dkNVGnUE4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=x-rim-org-msg-ref-id:message-id:content-transfer-encoding:reply-to
         :x-priority:sensitivity:importance:subject:to:from:date:content-type
         :mime-version;
        b=ScLgFNHhjw+CKJ/LqXWHuVgtr15i0FEauEoLJcslni3HYtjcC2hAT718DmzpGHg2Nx
         UJ0hwYRqxwDK2pXqC2faUTAKH7kswfSTLswD7hnV8uECqhB5zQxs7N51ijtnCBXBkTcH
         2B9tyuoTyrJb2WSgYkWnJuJ2LJLbBR4HwiFSU=
Received: by 10.150.190.16 with SMTP id n16mr6659988ybf.144.1282013454604;
        Mon, 16 Aug 2010 19:50:54 -0700 (PDT)
Received: from bda028.bisx.produk.on.blackberry (bda-68-171-236-185.bise.eu.blackberry.com [68.171.236.185])
        by mx.google.com with ESMTPS id q21sm7237985ybk.11.2010.08.16.19.50.53
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 16 Aug 2010 19:50:53 -0700 (PDT)
X-rim-org-msg-ref-id:624115839
Message-ID:<624115839-1282013451-cardhu_decombobulator_blackberry.rim.net-1888337317-@bda2121.bisx.produk.on.blackberry>
Content-Transfer-Encoding: base64
Reply-To: anshumg@gmail.com
X-Priority: Normal
Sensitivity: Normal
Importance: Normal
Subject: Re: how to post a question or a message?
To: java-user@lucene.apache.org
From: "anshum.gupta@naukri.com" <anshumg@gmail.com>
Date: Tue, 17 Aug 2010 02:50:50 +0000
Content-Type: text/plain; charset="Windows-1252"
MIME-Version: 1.0

SGkgSGlsbHksDQpTbyB0aGlzIGlzIGV4YWN0bHkgd2hhdCB5b3UgbmVlZCB0byBkbywgbWFpbCB0
byBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcgYW5kIGl0J2QgZ2V0IHRvIGFsbCBncm91cCBt
ZW1iZXJzLg0KDQoNCi0tLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLS0NCkZyb206IHhpYW95YW4g
WmhlbmcNClRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNClJlcGx5VG86IGphdmEtdXNl
ckBsdWNlbmUuYXBhY2hlLm9yZw0KU3ViamVjdDogaG93IHRvIHBvc3QgYSBxdWVzdGlvbiBvciBh
IG1lc3NhZ2U/DQpTZW50OiBBdWcgMTcsIDIwMTAgMDc6NTkNCg0KaGV5LCBJIGFtIG5ldyB3aXRo
IHRoaXMgbWFpbCBsaXN0IHRoaW5nLCBpIHdvbmRlciBob3cgdG8gcG9zdCBhIHF1ZXN0aW9uIG9y
DQphIG1lc3NhZ2U/DQoNCkkganVzdCBzZW5kIGEgcXVlc3Rpb24gdG8gRkFRIG1haWwgYWRkcmVz
cywgYnV0IGkgcmVjZXZpZSBhIGxldHRlciB3aXRoIG5vbmUNCmF2YWlsYWJsZSwgaGF2ZSBpIHNl
bmQgdGhlIHdyb25nIGFkZHJlc3M/DQoNCnJlZ2FyZHMNCkhpbGx5DQoNCg0KDQotLQ0KQW5zaHVt
DQpodHRwOi8vYmxvZy5hbnNodW1ndXB0YS5uZXQNCg0KU2VudCBmcm9tIEJsYWNrQmVycnmu



From java-user-return-47041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 17 03:07:14 2010
Return-Path: <java-user-return-47041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18951 invoked from network); 17 Aug 2010 03:07:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Aug 2010 03:07:14 -0000
Received: (qmail 33028 invoked by uid 500); 17 Aug 2010 03:07:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32558 invoked by uid 500); 17 Aug 2010 03:07:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32534 invoked by uid 99); 17 Aug 2010 03:07:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 03:07:07 +0000
X-ASF-Spam-Status: No, hits=3.3 required=10.0
	tests=FREEMAIL_FROM,HTML_IMAGE_ONLY_16,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of hillyzheng@gmail.com designates 209.85.161.176 as permitted sender)
Received: from [209.85.161.176] (HELO mail-gx0-f176.google.com) (209.85.161.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 03:07:03 +0000
Received: by gxk7 with SMTP id 7so3148912gxk.35
        for <java-user@lucene.apache.org>; Mon, 16 Aug 2010 20:06:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:x-goomoji-body:date:message-id:subject:from:to
         :content-type;
        bh=n84xKszy80iarhGw3xiB33ZHq3chRr5lxF5ojC2WiRM=;
        b=sy9nU1c/e4wVYFJwjPUjDs0/gz9x3B9HrdHWxLPIy8OkwzqFEQThvmrTQfhNR6doax
         XehE/ci1nmUGftRB6A/S77yYQz1B3kvLy1ZOK3RbyzAkOAm6PqId3c/AWG2KWC9MujNi
         DNEQzJjB5n9BQ0rvpFONhjAD8cb0d13qKbQQw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:x-goomoji-body:date:message-id
         :subject:from:to:content-type;
        b=aPZjd5IN1gpVOPgsN/YkrdFpw9i1Ik1wujifUg+8BRbGnIBPeYpWso15bRk1gZZ6X7
         DnQI8xq65KTj3zP+xmzAUHa0DBYAcDBvCPm9JVwGHdGpEwql3y2XlJuxuK6vIBI30B3N
         Zk9LHMpjEK9lcIvOyciGRG+TXrPwec79Tw5Js=
MIME-Version: 1.0
Received: by 10.231.77.155 with SMTP id g27mt9035375ibk.195.1282014402058;
 Mon, 16 Aug 2010 20:06:42 -0700 (PDT)
Received: by 10.231.169.201 with HTTP; Mon, 16 Aug 2010 20:06:42 -0700 (PDT)
In-Reply-To: <624115839-1282013451-cardhu_decombobulator_blackberry.rim.net-1888337317-@bda2121.bisx.produk.on.blackberry>
References: <624115839-1282013451-cardhu_decombobulator_blackberry.rim.net-1888337317-@bda2121.bisx.produk.on.blackberry>
X-Goomoji-Body: true
Date: Tue, 17 Aug 2010 11:06:42 +0800
Message-ID: <AANLkTi=mecEuGmZmXr-TUuGbgt0LeOL5Jwdzb_yh+ETq@mail.gmail.com>
Subject: Re: how to post a question or a message?
From: xiaoyan Zheng <hillyzheng@gmail.com>
To: java-user@lucene.apache.org, anshumg@gmail.com
Content-Type: multipart/related; boundary=000e0cd254140ad350048dfc3d02

--000e0cd254140ad350048dfc3d02
Content-Type: multipart/alternative; boundary=000e0cd254140ad34c048dfc3d01

--000e0cd254140ad34c048dfc3d01
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

  Hey, Anshum
  thanks  again~~~~~[?]
2010/8/17 anshum.gupta@naukri.com <anshumg@gmail.com>

> Hi Hilly,
> So this is exactly what you need to do, mail to
> java-user@lucene.apache.org and it'd get to all group members.
>
>
> ------Original Message------
> From: xiaoyan Zheng
> To: java-user@lucene.apache.org
> ReplyTo: java-user@lucene.apache.org
> Subject: how to post a question or a message?
> Sent: Aug 17, 2010 07:59
>
> hey, I am new with this mail list thing, i wonder how to post a question =
or
> a message?
>
> I just send a question to FAQ mail address, but i recevie a letter with
> none
> available, have i send the wrong address?
>
> regards
> Hilly
>
>
>
> --
> Anshum
> http://blog.anshumgupta.net
>
> Sent from BlackBerry=AE

--000e0cd254140ad34c048dfc3d01
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

<div><br>=A0 Hey, Anshum</div>
<div>=A0 thanks=A0 again~~~~~<img style=3D"MARGIN: 0px 0.2ex; VERTICAL-ALIG=
N: middle" height=3D"12" src=3D"cid:330@goomoji.gmail" width=3D"12" goomoji=
=3D"330"><br></div>
<div class=3D"gmail_quote">2010/8/17 <a href=3D"mailto:anshum.gupta@naukri.=
com">anshum.gupta@naukri.com</a> <span dir=3D"ltr">&lt;<a href=3D"mailto:an=
shumg@gmail.com">anshumg@gmail.com</a>&gt;</span><br>
<blockquote class=3D"gmail_quote" style=3D"PADDING-LEFT: 1ex; MARGIN: 0px 0=
px 0px 0.8ex; BORDER-LEFT: #ccc 1px solid">Hi Hilly,<br>So this is exactly =
what you need to do, mail to <a href=3D"mailto:java-user@lucene.apache.org"=
>java-user@lucene.apache.org</a> and it&#39;d get to all group members.<br>

<div>
<div></div>
<div class=3D"h5"><br><br>------Original Message------<br>From: xiaoyan Zhe=
ng<br>To: <a href=3D"mailto:java-user@lucene.apache.org">java-user@lucene.a=
pache.org</a><br>ReplyTo: <a href=3D"mailto:java-user@lucene.apache.org">ja=
va-user@lucene.apache.org</a><br>
Subject: how to post a question or a message?<br>Sent: Aug 17, 2010 07:59<b=
r><br>hey, I am new with this mail list thing, i wonder how to post a quest=
ion or<br>a message?<br><br>I just send a question to FAQ mail address, but=
 i recevie a letter with none<br>
available, have i send the wrong address?<br><br>regards<br>Hilly<br><br><b=
r><br></div></div><font color=3D"#888888">--<br>Anshum<br><a href=3D"http:/=
/blog.anshumgupta.net/" target=3D"_blank">http://blog.anshumgupta.net</a><b=
r>
<br>Sent from BlackBerry=AE</font></blockquote></div><br>

--000e0cd254140ad34c048dfc3d01--
--000e0cd254140ad350048dfc3d02--

From java-user-return-47042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 17 06:09:51 2010
Return-Path: <java-user-return-47042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80761 invoked from network); 17 Aug 2010 06:09:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Aug 2010 06:09:50 -0000
Received: (qmail 92881 invoked by uid 500); 17 Aug 2010 06:09:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91982 invoked by uid 500); 17 Aug 2010 06:09:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91970 invoked by uid 99); 17 Aug 2010 06:09:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 06:09:42 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of hillyzheng@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 06:09:36 +0000
Received: by gwj19 with SMTP id 19so3220065gwj.35
        for <java-user@lucene.apache.org>; Mon, 16 Aug 2010 23:09:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=LY9GWg3npswLOWCHf2ei2l8Rd7xcAW36f2KPw+XwVN0=;
        b=Me1pJ+HTFce/KPG21K80pib+eQwgX9bkGDxLRXyx9+BejVU5J38bP1pB9nIQnJOMGB
         S+bOLsXqgLwWO9S6xDCAY/5nXcX07cE0dJ30RMrlUkKYcoftvVjYkQsD1K2SwBM1ZgoO
         wq/79RPhS8krae9DJBYNR3roTiY1wTCVOmJR4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=lr8XEI193uwlFeXEopW6ZkIaY3X7aQaa/v9iQjJpbhgZ7uz8C2LXOO1RBV4DCwh2r5
         rib2IROVT2mX1R/QCmE8qFj48cB4AKimHYvw3VgWgz6eznOKPvaJMumknQp1pYEXlKHl
         Ca2RzkRoIKgHddrfHRUuOpIqateMYtZoiouJ4=
MIME-Version: 1.0
Received: by 10.231.35.199 with SMTP id q7mr7264945ibd.47.1282025351565; Mon,
 16 Aug 2010 23:09:11 -0700 (PDT)
Received: by 10.231.169.201 with HTTP; Mon, 16 Aug 2010 23:09:11 -0700 (PDT)
In-Reply-To: <AANLkTi=0NcbtWL1YiStzT7wUaXNA0pM--sKLToAEcTDb@mail.gmail.com>
References: <AANLkTikFkdh8EqDgkKDHnTiGy7ruV9gng+msofiGoB8z@mail.gmail.com>
	<AANLkTi=0NcbtWL1YiStzT7wUaXNA0pM--sKLToAEcTDb@mail.gmail.com>
Date: Tue, 17 Aug 2010 14:09:11 +0800
Message-ID: <AANLkTimeVbGJL=4G7+JJE6momsc7j9_s-sob8pYhb+pW@mail.gmail.com>
Subject: Re: about RAMDirectory based B/S plantform problem
From: xiaoyan Zheng <hillyzheng@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0022152d6149ac5496048dfec99e

--0022152d6149ac5496048dfec99e
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

the question is like this=A3=BA

when one user is using IndexWirter.addDocument(doc), and another user has
already finished adding part and have closed IndexWirter, then, the first
user embraces the error "ERROR: this IndexWriter is closed", cause both of
them creat the IndexWriter based on RAM by the same sever.

I followed the error to the lucene source, there is ensureOpen(); in
IndexWirter.addDocument( ), and the error is there,

protected synchronized final void ensureOpen(boolean includePendingClose)
throws AlreadyClosedException {
    if (!isOpen(includePendingClose)) {
      throw new AlreadyClosedException("this IndexWriter is closed");
    }
  }
how to avoid these kind of error? could lucene check this kind of sitation
by itself?


2010/8/17 xiaoyan Zheng <hillyzheng@gmail.com>

>
>  about RAMDirectory based B/S plantform problem
>
> hello, I just start to use lucene and become confused about RAMDirectory
> based lucene index establishment, the problem is one user use this RAM to
> establish index is ok, but, when it comes to multi user, the results is n=
ot
> correct. when i use synchronized{ writer.writeIndex (...)}, all go alrigh=
t.
> but users have to wait. i mean, is that RAM can only be used in single
> thread, esp. writing the index? how to solve it in a B/S plantform?
>
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D
> the detailed test code is like these, very simple, just use jsp:
>
>
> RAMDirectory idx=3Dnew RAMDirectory();
>
> LuceneIndexWriterImpl writer=3Dnull;
> writer=3DLuceneIndexWriterImpl.getInstance();
>
> //RAM-based lucene index establishment
>
> synchronized(wirter){
> //if no synchronized the result is not correct
> writer.writeIndex(idx);
>
> }
>
> LuceneIndexReaderImpl luceneReader=3Dnew LuceneIndexReaderImpl(idx);
> ....
> ....
>
> out.println("****");
> for(Integer id :documents.keySet())
> out.println(id);
> out.println("****");
>
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
> result:
> if only one user: out put is correct 7,3
>
> but two users(if no synchronized): out put may be 0,0 and 4, 0 or other
> unexpected result.
>
>
> Regards
> Hilly
>

--0022152d6149ac5496048dfec99e--

From java-user-return-47043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 17 06:18:34 2010
Return-Path: <java-user-return-47043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85407 invoked from network); 17 Aug 2010 06:18:34 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Aug 2010 06:18:34 -0000
Received: (qmail 350 invoked by uid 500); 17 Aug 2010 06:18:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99785 invoked by uid 500); 17 Aug 2010 06:18:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99776 invoked by uid 99); 17 Aug 2010 06:18:27 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 06:18:27 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 06:18:04 +0000
Received: by wyb35 with SMTP id 35so8991986wyb.35
        for <java-user@lucene.apache.org>; Mon, 16 Aug 2010 23:17:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=6RKWkUbhDjITjnp+opBDAwUyM0E1AcpW2o8NksKtt8Q=;
        b=vCpOpNY4r2PRDIAQcOKM6vXU14q5Y635fl0lkrdWb3ybXFMdOSodF7Bj+F4vHbsDVM
         3lTigCjRo62Q4ROt/wmgkhLegNnMnGW0zRKn8tX8Vjfg/wY7JTV92OMyEsHZEfhHdt6r
         DRch3rdeYnSjDpESFdgXZgUREuEXtCF73qFSw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=jJB6JjugA02zfPD/DgBZ/VVP7YZpd9qFY7v7ETsf8SZp4KWZgXZo96EVFnSweNKKDW
         YNkpY+4GRleWj5XyIGiGm79U4Bbg3hV45N1EqTbtdiOvakjbxfmb1IGgEL9SlegpI55+
         q+ZHSSVO9J4/cHk4aUc9xUGBKnSI12uB8s2S8=
Received: by 10.227.153.208 with SMTP id l16mr5444943wbw.57.1282025864432;
 Mon, 16 Aug 2010 23:17:44 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.132.17 with HTTP; Mon, 16 Aug 2010 23:17:24 -0700 (PDT)
In-Reply-To: <AANLkTimeVbGJL=4G7+JJE6momsc7j9_s-sob8pYhb+pW@mail.gmail.com>
References: <AANLkTikFkdh8EqDgkKDHnTiGy7ruV9gng+msofiGoB8z@mail.gmail.com>
 <AANLkTi=0NcbtWL1YiStzT7wUaXNA0pM--sKLToAEcTDb@mail.gmail.com> <AANLkTimeVbGJL=4G7+JJE6momsc7j9_s-sob8pYhb+pW@mail.gmail.com>
From: Anshum <anshumg@gmail.com>
Date: Tue, 17 Aug 2010 11:47:24 +0530
Message-ID: <AANLkTinSoqbEyoHaKqEmfkWRJbRhYLS_qy5LXtEokVH9@mail.gmail.com>
Subject: Re: about RAMDirectory based B/S plantform problem
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64c27643e0b92048dfee8cc
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64c27643e0b92048dfee8cc
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hi Hilly,
Seems like you are trying to use an already closed writer. Could you keep
the writer open and continue writing to the same indexdirectory using a
'shared' indexwriter 'instance'. To put it as pseudo code
Something like a singleton/static indexwriter instance.. almost.
--
Open indexwriter and keep open.

accept data from thread1 and write to index using indexwriter [DO NOT CLOSE
THE INDEXWRITER HERE]
accept data from thread2 and write to index using indexwriter [DO NOT CLOSE
THE INDEXWRITER HERE]
.
.

Close IndexWriter
--

Would this work/be implementable for your application?

--
Anshum Gupta
http://ai-cafe.blogspot.com


2010/8/17 xiaoyan Zheng <hillyzheng@gmail.com>

> the question is like this=EF=BC=9A
>
> when one user is using IndexWirter.addDocument(doc), and another user has
> already finished adding part and have closed IndexWirter, then, the first
> user embraces the error "ERROR: this IndexWriter is closed", cause both o=
f
> them creat the IndexWriter based on RAM by the same sever.
>
> I followed the error to the lucene source, there is ensureOpen(); in
> IndexWirter.addDocument( ), and the error is there,
>
> protected synchronized final void ensureOpen(boolean includePendingClose)
> throws AlreadyClosedException {
>    if (!isOpen(includePendingClose)) {
>      throw new AlreadyClosedException("this IndexWriter is closed");
>    }
>  }
> how to avoid these kind of error? could lucene check this kind of sitatio=
n
> by itself?
>
>
> 2010/8/17 xiaoyan Zheng <hillyzheng@gmail.com>
>
> >
> >  about RAMDirectory based B/S plantform problem
> >
> > hello, I just start to use lucene and become confused about RAMDirector=
y
> > based lucene index establishment, the problem is one user use this RAM =
to
> > establish index is ok, but, when it comes to multi user, the results is
> not
> > correct. when i use synchronized{ writer.writeIndex (...)}, all go
> alright.
> > but users have to wait. i mean, is that RAM can only be used in single
> > thread, esp. writing the index? how to solve it in a B/S plantform?
> >
> > =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D
> > the detailed test code is like these, very simple, just use jsp:
> >
> >
> > RAMDirectory idx=3Dnew RAMDirectory();
> >
> > LuceneIndexWriterImpl writer=3Dnull;
> > writer=3DLuceneIndexWriterImpl.getInstance();
> >
> > //RAM-based lucene index establishment
> >
> > synchronized(wirter){
> > //if no synchronized the result is not correct
> > writer.writeIndex(idx);
> >
> > }
> >
> > LuceneIndexReaderImpl luceneReader=3Dnew LuceneIndexReaderImpl(idx);
> > ....
> > ....
> >
> > out.println("****");
> > for(Integer id :documents.keySet())
> > out.println(id);
> > out.println("****");
> >
> > =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D
> > result:
> > if only one user: out put is correct 7,3
> >
> > but two users(if no synchronized): out put may be 0,0 and 4, 0 or other
> > unexpected result.
> >
> >
> > Regards
> > Hilly
> >
>

--0016e64c27643e0b92048dfee8cc--

From java-user-return-47044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 17 07:21:24 2010
Return-Path: <java-user-return-47044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9677 invoked from network); 17 Aug 2010 07:21:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Aug 2010 07:21:24 -0000
Received: (qmail 57845 invoked by uid 500); 17 Aug 2010 07:21:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57413 invoked by uid 500); 17 Aug 2010 07:21:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57405 invoked by uid 99); 17 Aug 2010 07:21:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 07:21:18 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of hillyzheng@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 07:21:12 +0000
Received: by gwj19 with SMTP id 19so3254294gwj.35
        for <java-user@lucene.apache.org>; Tue, 17 Aug 2010 00:20:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:x-goomoji-body:date:message-id:subject:from:to
         :content-type;
        bh=kXvzAaWIlSu1VUkJSluPL9eXJzGHHDvzRkatiwHpwT8=;
        b=EdGPq/VNZ9Y/3y8zYD819NLJC1UuW//j4K25irx0a30DIV77LRCMMuUQ1sPxpVIGyH
         DBXKyLKw6szCUR6C7GJZEHVNpX6RxgzheZ4s3iv00D0N6WcLtQboDAOjcptSnPomMEAN
         S2eL+fpRC72m74K7AL8+Zde8Q3DANHZgw7jEY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:x-goomoji-body:date:message-id
         :subject:from:to:content-type;
        b=Jnle0yqRx0L3zNxmaPm742Vd0lG+hhqKSAHn0ylGqr/KxYoJLyXYY3wB8upxreTOZI
         HoF6WZ0DOxSRqajoU1LqOvi0WP8luddXmOg8nVReOYXxV12+cTUC+3+O1YdK3Jos/Oud
         gYfvlrIWnwwcr2CU07inCsgpW+m3BQVGbqDvM=
MIME-Version: 1.0
Received: by 10.101.78.11 with SMTP id f11mr7082840anl.221.1282029650958; Tue,
 17 Aug 2010 00:20:50 -0700 (PDT)
Received: by 10.231.169.201 with HTTP; Tue, 17 Aug 2010 00:20:50 -0700 (PDT)
In-Reply-To: <AANLkTinSoqbEyoHaKqEmfkWRJbRhYLS_qy5LXtEokVH9@mail.gmail.com>
References: <AANLkTikFkdh8EqDgkKDHnTiGy7ruV9gng+msofiGoB8z@mail.gmail.com>
	<AANLkTi=0NcbtWL1YiStzT7wUaXNA0pM--sKLToAEcTDb@mail.gmail.com>
	<AANLkTimeVbGJL=4G7+JJE6momsc7j9_s-sob8pYhb+pW@mail.gmail.com>
	<AANLkTinSoqbEyoHaKqEmfkWRJbRhYLS_qy5LXtEokVH9@mail.gmail.com>
X-Goomoji-Body: true
Date: Tue, 17 Aug 2010 15:20:50 +0800
Message-ID: <AANLkTinmMgDxQRd_1bebdqU7ik_Lxum0kVz0qNBcryh2@mail.gmail.com>
Subject: Re: about RAMDirectory based B/S plantform problem
From: xiaoyan Zheng <hillyzheng@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/related; boundary=001636ed6918efda9e048dffc92f

--001636ed6918efda9e048dffc92f
Content-Type: multipart/alternative; boundary=001636ed6918efda99048dffc92e

--001636ed6918efda99048dffc92e
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

Hey, Anshum

u mean Indexwriter based on RAMdirectory must be a singleton/static, yeah,
that works, finally success[?][?][?][?][?],
thanks a lot!

Regards
Hilly


2010/8/17 Anshum <anshumg@gmail.com>

> Hi Hilly,
> Seems like you are trying to use an already closed writer. Could you keep
> the writer open and continue writing to the same indexdirectory using a
> 'shared' indexwriter 'instance'. To put it as pseudo code
> Something like a singleton/static indexwriter instance.. almost.
> --
> Open indexwriter and keep open.
>
> accept data from thread1 and write to index using indexwriter [DO NOT CLO=
SE
> THE INDEXWRITER HERE]
> accept data from thread2 and write to index using indexwriter [DO NOT CLO=
SE
> THE INDEXWRITER HERE]
> .
> .
>
> Close IndexWriter
> --
>
> Would this work/be implementable for your application?
>
> --
> Anshum Gupta
> http://ai-cafe.blogspot.com
>
>
> 2010/8/17 xiaoyan Zheng <hillyzheng@gmail.com>
>
> > the question is like this=A3=BA
> >
> > when one user is using IndexWirter.addDocument(doc), and another user h=
as
> > already finished adding part and have closed IndexWirter, then, the fir=
st
> > user embraces the error "ERROR: this IndexWriter is closed", cause both
> of
> > them creat the IndexWriter based on RAM by the same sever.
> >
> > I followed the error to the lucene source, there is ensureOpen(); in
> > IndexWirter.addDocument( ), and the error is there,
> >
> > protected synchronized final void ensureOpen(boolean includePendingClos=
e)
> > throws AlreadyClosedException {
> >    if (!isOpen(includePendingClose)) {
> >      throw new AlreadyClosedException("this IndexWriter is closed");
> >    }
> >  }
> > how to avoid these kind of error? could lucene check this kind of
> sitation
> > by itself?
> >
> >
> > 2010/8/17 xiaoyan Zheng <hillyzheng@gmail.com>
> >
> > >
> > >  about RAMDirectory based B/S plantform problem
> > >
> > > hello, I just start to use lucene and become confused about
> RAMDirectory
> > > based lucene index establishment, the problem is one user use this RA=
M
> to
> > > establish index is ok, but, when it comes to multi user, the results =
is
> > not
> > > correct. when i use synchronized{ writer.writeIndex (...)}, all go
> > alright.
> > > but users have to wait. i mean, is that RAM can only be used in singl=
e
> > > thread, esp. writing the index? how to solve it in a B/S plantform?
> > >
> > > =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D
> > > the detailed test code is like these, very simple, just use jsp:
> > >
> > >
> > > RAMDirectory idx=3Dnew RAMDirectory();
> > >
> > > LuceneIndexWriterImpl writer=3Dnull;
> > > writer=3DLuceneIndexWriterImpl.getInstance();
> > >
> > > //RAM-based lucene index establishment
> > >
> > > synchronized(wirter){
> > > //if no synchronized the result is not correct
> > > writer.writeIndex(idx);
> > >
> > > }
> > >
> > > LuceneIndexReaderImpl luceneReader=3Dnew LuceneIndexReaderImpl(idx);
> > > ....
> > > ....
> > >
> > > out.println("****");
> > > for(Integer id :documents.keySet())
> > > out.println(id);
> > > out.println("****");
> > >
> > > =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D
> > > result:
> > > if only one user: out put is correct 7,3
> > >
> > > but two users(if no synchronized): out put may be 0,0 and 4, 0 or oth=
er
> > > unexpected result.
> > >
> > >
> > > Regards
> > > Hilly
> > >
> >
>

--001636ed6918efda99048dffc92e
Content-Type: text/html; charset=GB2312
Content-Transfer-Encoding: quoted-printable

<div><br>Hey, Anshum</div>
<div>&nbsp;</div>
<div>u mean Indexwriter based on RAMdirectory must be a singleton/static, y=
eah, that works, finally success<img style=3D"MARGIN: 0px 0.2ex; VERTICAL-A=
LIGN: middle" height=3D"12" src=3D"cid:330@goomoji.gmail" width=3D"12" goom=
oji=3D"330"><img style=3D"MARGIN: 0px 0.2ex; VERTICAL-ALIGN: middle" height=
=3D"12" src=3D"cid:330@goomoji.gmail" width=3D"12" goomoji=3D"330"><img sty=
le=3D"MARGIN: 0px 0.2ex; VERTICAL-ALIGN: middle" height=3D"12" src=3D"cid:3=
30@goomoji.gmail" width=3D"12" goomoji=3D"330"><img style=3D"MARGIN: 0px 0.=
2ex; VERTICAL-ALIGN: middle" height=3D"12" src=3D"cid:330@goomoji.gmail" wi=
dth=3D"12" goomoji=3D"330"><img style=3D"MARGIN: 0px 0.2ex; VERTICAL-ALIGN:=
 middle" height=3D"12" src=3D"cid:330@goomoji.gmail" width=3D"12" goomoji=
=3D"330">,</div>

<div>thanks a lot!</div>
<div>&nbsp;</div>
<div>Regards</div>
<div>Hilly</div>
<div><br>&nbsp;</div>
<div class=3D"gmail_quote">2010/8/17 Anshum <span dir=3D"ltr">&lt;<a href=
=3D"mailto:anshumg@gmail.com">anshumg@gmail.com</a>&gt;</span><br>
<blockquote class=3D"gmail_quote" style=3D"PADDING-LEFT: 1ex; MARGIN: 0px 0=
px 0px 0.8ex; BORDER-LEFT: #ccc 1px solid">Hi Hilly,<br>Seems like you are =
trying to use an already closed writer. Could you keep<br>the writer open a=
nd continue writing to the same indexdirectory using a<br>
&#39;shared&#39; indexwriter &#39;instance&#39;. To put it as pseudo code<b=
r>Something like a singleton/static indexwriter instance.. almost.<br>--<br=
>Open indexwriter and keep open.<br><br>accept data from thread1 and write =
to index using indexwriter [DO NOT CLOSE<br>
THE INDEXWRITER HERE]<br>accept data from thread2 and write to index using =
indexwriter [DO NOT CLOSE<br>THE INDEXWRITER HERE]<br>.<br>.<br><br>Close I=
ndexWriter<br>--<br><br>Would this work/be implementable for your applicati=
on?<br>
<font color=3D"#888888"><br>--<br>Anshum Gupta<br><a href=3D"http://ai-cafe=
.blogspot.com/" target=3D"_blank">http://ai-cafe.blogspot.com</a><br></font=
>
<div>
<div></div>
<div class=3D"h5"><br><br>2010/8/17 xiaoyan Zheng &lt;<a href=3D"mailto:hil=
lyzheng@gmail.com">hillyzheng@gmail.com</a>&gt;<br><br>&gt; the question is=
 like this=A3=BA<br>&gt;<br>&gt; when one user is using IndexWirter.addDocu=
ment(doc), and another user has<br>
&gt; already finished adding part and have closed IndexWirter, then, the fi=
rst<br>&gt; user embraces the error &quot;ERROR: this IndexWriter is closed=
&quot;, cause both of<br>&gt; them creat the IndexWriter based on RAM by th=
e same sever.<br>
&gt;<br>&gt; I followed the error to the lucene source, there is ensureOpen=
(); in<br>&gt; IndexWirter.addDocument( ), and the error is there,<br>&gt;<=
br>&gt; protected synchronized final void ensureOpen(boolean includePending=
Close)<br>
&gt; throws AlreadyClosedException {<br>&gt; &nbsp; &nbsp;if (!isOpen(inclu=
dePendingClose)) {<br>&gt; &nbsp; &nbsp; &nbsp;throw new AlreadyClosedExcep=
tion(&quot;this IndexWriter is closed&quot;);<br>&gt; &nbsp; &nbsp;}<br>&gt=
; &nbsp;}<br>&gt; how to avoid these kind of error? could lucene check this=
 kind of sitation<br>
&gt; by itself?<br>&gt;<br>&gt;<br>&gt; 2010/8/17 xiaoyan Zheng &lt;<a href=
=3D"mailto:hillyzheng@gmail.com">hillyzheng@gmail.com</a>&gt;<br>&gt;<br>&g=
t; &gt;<br>&gt; &gt; &nbsp;about RAMDirectory based B/S plantform problem<b=
r>&gt; &gt;<br>
&gt; &gt; hello, I just start to use lucene and become confused about RAMDi=
rectory<br>&gt; &gt; based lucene index establishment, the problem is one u=
ser use this RAM to<br>&gt; &gt; establish index is ok, but, when it comes =
to multi user, the results is<br>
&gt; not<br>&gt; &gt; correct. when i use synchronized{ writer.writeIndex (=
...)}, all go<br>&gt; alright.<br>&gt; &gt; but users have to wait. i mean,=
 is that RAM can only be used in single<br>&gt; &gt; thread, esp. writing t=
he index? how to solve it in a B/S plantform?<br>
&gt; &gt;<br>&gt; &gt; =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<br>&gt; &gt; the detailed test code is li=
ke these, very simple, just use jsp:<br>&gt; &gt;<br>&gt; &gt;<br>&gt; &gt;=
 RAMDirectory idx=3Dnew RAMDirectory();<br>&gt; &gt;<br>
&gt; &gt; LuceneIndexWriterImpl writer=3Dnull;<br>&gt; &gt; writer=3DLucene=
IndexWriterImpl.getInstance();<br>&gt; &gt;<br>&gt; &gt; //RAM-based lucene=
 index establishment<br>&gt; &gt;<br>&gt; &gt; synchronized(wirter){<br>&gt=
; &gt; //if no synchronized the result is not correct<br>
&gt; &gt; writer.writeIndex(idx);<br>&gt; &gt;<br>&gt; &gt; }<br>&gt; &gt;<=
br>&gt; &gt; LuceneIndexReaderImpl luceneReader=3Dnew LuceneIndexReaderImpl=
(idx);<br>&gt; &gt; ....<br>&gt; &gt; ....<br>&gt; &gt;<br>&gt; &gt; out.pr=
intln(&quot;****&quot;);<br>
&gt; &gt; for(Integer id :documents.keySet())<br>&gt; &gt; out.println(id);=
<br>&gt; &gt; out.println(&quot;****&quot;);<br>&gt; &gt;<br>&gt; &gt; =3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D<br>&gt; &gt; result:<br>&gt; &gt; if only one user: out put is correct =
7,3<br>
&gt; &gt;<br>&gt; &gt; but two users(if no synchronized): out put may be 0,=
0 and 4, 0 or other<br>&gt; &gt; unexpected result.<br>&gt; &gt;<br>&gt; &g=
t;<br>&gt; &gt; Regards<br>&gt; &gt; Hilly<br>&gt; &gt;<br>&gt;<br></div>
</div></blockquote></div><br>

--001636ed6918efda99048dffc92e--
--001636ed6918efda9e048dffc92f--

From java-user-return-47045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 17 08:18:41 2010
Return-Path: <java-user-return-47045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34904 invoked from network); 17 Aug 2010 08:18:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Aug 2010 08:18:40 -0000
Received: (qmail 9494 invoked by uid 500); 17 Aug 2010 08:18:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9128 invoked by uid 500); 17 Aug 2010 08:18:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9120 invoked by uid 99); 17 Aug 2010 08:18:34 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 08:18:34 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ramneekm@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 08:18:13 +0000
Received: by qyk2 with SMTP id 2so2816742qyk.14
        for <java-user@lucene.apache.org>; Tue, 17 Aug 2010 01:17:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=pLo0PB+WF3xnawTa0OECwhMeDxqP3o0aysQeoq0w23Y=;
        b=i7nUmSwNZ2TqnR4WBJw9Qu/fsAfFMX57HpixUw4ROM19cXUO5bku942t8xyOGJx5QF
         Spz91NkEgxpy+Q/G0ubbwFzyiPb0oyCnHKbf8Ui4DCgSV245bgyx7N3yKYb9BuySp3bn
         T8fICvMhYEYy+eFQCaFZZxJlXNpefbi3hOS5s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Mt7GJh0EiJ9fB0CL6F//CPSgQiWyRqhFtT3NxT3vtl3JJVnBx0/9ELJMkx2efvbBNm
         jQHOTfiUhFubZGMhDqmRNbXvUMxZWAkR+ST/EjXqpB8laO+Y1qmufBQBB07skTOWz35u
         SBmPgHBZkD4mMu8o87cP6TJZ3qB1HIWXgYsoo=
MIME-Version: 1.0
Received: by 10.224.96.160 with SMTP id h32mr4064075qan.269.1282033072904;
 Tue, 17 Aug 2010 01:17:52 -0700 (PDT)
Received: by 10.229.62.144 with HTTP; Tue, 17 Aug 2010 01:17:52 -0700 (PDT)
In-Reply-To: <AANLkTin97aY97XazCfoAavACR+wXCa8wDoqebUxsdvwv@mail.gmail.com>
References: <AANLkTinCgZJJK7_xWCdeDg8yuC=PaTbkas0_yKocE_H5@mail.gmail.com>
	<AANLkTin97aY97XazCfoAavACR+wXCa8wDoqebUxsdvwv@mail.gmail.com>
Date: Tue, 17 Aug 2010 18:17:52 +1000
Message-ID: <AANLkTikQCbgVCWntvtKnVAjTNzdggvqi7LUVgh_tKQW6@mail.gmail.com>
Subject: Re: lucene usage on TREC data
From: Ramneek Maan Singh <ramneekm@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00c09f89957ee6a381048e009529
X-Virus-Checked: Checked by ClamAV on apache.org

--00c09f89957ee6a381048e009529
Content-Type: text/plain; charset=ISO-8859-1

Thanks for the info Glen.

~Ramneek

On Sun, Aug 15, 2010 at 9:18 AM, Glen Newton <glen.newton@gmail.com> wrote:

> Lucene has been used - usually as a starting base that has been
> modified for specific tasks - by a number of IR researchers for
> various TREC challenges. Here are some (there are many more):
>
> IBM Haifa:
>
> http://wiki.apache.org/lucene-java/TREC_2007_Million_Queries_Track_-_IBM_Haifa_Team
> http://trec.nist.gov/pubs/trec16/papers/ibm-haifa.mq.final.pdf
>
> Logistic Regression Merging of Amberfish and Lucene Multisearch Results
> http://trec.nist.gov/pubs/trec14/papers/ualaska.tera.pdf
>
> IR 2009 Term Project - Modern Web Search (TREC WT10g)
> http://code.google.com/p/lucene-web-search-and-trec-wt10g/
>
> Phrasal Queries with LingPipe and Lucene: Ad Hoc Genomics Text Retrieval
>
> http://comminfo.rutgers.edu/~muresan/IR/TREC/Proceedings/t13_proceedings/papers/alias-i.geo.pdf<http://comminfo.rutgers.edu/%7Emuresan/IR/TREC/Proceedings/t13_proceedings/papers/alias-i.geo.pdf>
>
> Evaluation of the Default Similarity Function in Lucene
> http://www.ece.udel.edu/~hfang/lucene/Lucene_exp.pdf<http://www.ece.udel.edu/%7Ehfang/lucene/Lucene_exp.pdf>
>
> Lucene for n-grams using the ClueWeb collection
> http://trec.nist.gov/pubs/trec18/papers/arsc.WEB.pdf
>
> Expanding Queries Using Multiple Resources
>
> http://staff.science.uva.nl/~mdr/Publications/Files/trec2006-proceedings-genomics.pdf<http://staff.science.uva.nl/%7Emdr/Publications/Files/trec2006-proceedings-genomics.pdf>
>
> -Glen Newton
> http://zzzoot.blogspot.com/2008/06/simultaneous-threaded-query-lucene.html
>
> http://zzzoot.blogspot.com/2008/04/lucene-indexing-performance-benchmarks.html
>
> http://zzzoot.blogspot.com/2008/06/lucene-concurrent-search-performance.html
>
> http://zzzoot.blogspot.com/2008/11/software-announcement-lusql-database-to.html
>
> http://zzzoot.blogspot.com/2008/11/lucene-231-vs-24-benchmarks-using-lusql.html
>
> http://zzzoot.blogspot.com/2009/07/project-torngat-building-large-scale.html
>
>
>
>
>
>
> On 14 August 2010 06:55, Ramneek Maan Singh <ramneekm@gmail.com> wrote:
> > Hello Everyone,
> >
> > Can anyone point me to a publicly Question answering system built using
> > lucene on TREC or non-TREC data.
> >
> > Regards,
> > Ramneek
> >
>
>
>
> --
>
> -
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00c09f89957ee6a381048e009529--

From java-user-return-47046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 17 11:57:44 2010
Return-Path: <java-user-return-47046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13904 invoked from network); 17 Aug 2010 11:57:44 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Aug 2010 11:57:44 -0000
Received: (qmail 56224 invoked by uid 500); 17 Aug 2010 11:57:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55358 invoked by uid 500); 17 Aug 2010 11:57:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55350 invoked by uid 99); 17 Aug 2010 11:57:38 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 11:57:38 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.9] (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 17 Aug 2010 11:57:20 +0000
Received: (qmail 13736 invoked by uid 99); 17 Aug 2010 11:56:58 -0000
Received: from localhost.apache.org (HELO [10.0.0.77]) (127.0.0.1)
  (smtp-auth username gsingers, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 11:56:58 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1081)
Subject: Re: cluster documents based on fields' values
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <67B9FB634299E5469D36BF5B3537F02409524C@pwex01.zoo.hmsonline.com>
Date: Tue, 17 Aug 2010 07:56:57 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <50725D21-336A-4575-A939-8ABFF4F419CD@apache.org>
References: <67B9FB634299E5469D36BF5B3537F02409524C@pwex01.zoo.hmsonline.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1081)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Nik,

Inline below.
On Aug 15, 2010, at 5:01 PM, Nik Kolev wrote:

> Hi,
>=20
> I am researching the possibility of using Lucene for discovering
> clusters of documents and since I am new to Lucene I decided to
> ask the community for advice before I poke the APIs and the internals.
> Your input will be invaluable!
>=20
> Here's the use case. Documents arrive from different feeds. Each feed
> produces millions and millions of documents. Documents are structured
> and share certain "interesting" fields. For the purpose of =
illustration
> here's a trivial example. Let's say the documents on each feed =
represent
> shoes. A shoe has an ID (uniquely identifying it within its feed) and =
a
> SIZE [1]. I want to be able to ask Lucene (assuming the shoe documents
> are indexed of course) for all of the clusters of shoes that sport the =
same
> size. A cluster of shoes is just the IDs of the shoes that got grouped
> together due to having the same value of the SIZE field.
>=20
> I don't think that doing this brute force will perform. Here's what I
> mean when I say brute force. I looked at IndexReader, and I saw that
> I can get the distinct values for an indexed field. So assuming that
> each feed will have its own index (I don't think I can get away with
> a single index for all feeds [2]), I can get the union of all distinct
> values for the interesting field across all indexes (one per each
> document feed). Then for each distinct value I can do a MultiSearcher
> search across these indexes getting the IDs of the documents .
>=20
> My gut tells me that the brute force approach won't perform [3]. And
> here's where you guys come in - is it possible to ask lucene to give
> me the groups of records (across indixes) that share the value for a
> given field? Is there something else in API that I can take advantage
> of and get what I need faster? If I am to extend Lucene to allow for
> this sort of thing, where should I start, what documents should I
> read,...?

This feature, called faceting -- amongst other things, comes out of the =
box in Solr (http://lucene.apache.org/solr)

>=20
> Thanks very much again for your advise,
> -nik
>=20
> [1] Shoe document layout:
>    SHOE
>      |--ID
>      |--SIZE
>=20
> [2] The volume of documents I get from each feed is huge. Also, even
>    though a lot of fields are shared the format across feeds varies
>    and a feed may not have some of the "interesting" fields of
>    another feed.
>=20
> [3] The dataset I am talking about is rich and the brute force =
approach
>    means that I need to be doing tens of millions of searches just to
>    group on one field. Also I most likely will blow my heap up if I =
try to
>    load all of the values in memory all at once.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem using Solr/Lucene: =
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 17 17:21:48 2010
Return-Path: <java-user-return-47047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83285 invoked from network); 17 Aug 2010 17:21:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Aug 2010 17:21:48 -0000
Received: (qmail 76918 invoked by uid 500); 17 Aug 2010 17:21:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76809 invoked by uid 500); 17 Aug 2010 17:21:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76593 invoked by uid 99); 17 Aug 2010 17:21:44 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 17:21:44 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 17:21:24 +0000
Received: by qwk3 with SMTP id 3so6401112qwk.35
        for <java-user@lucene.apache.org>; Tue, 17 Aug 2010 10:21:02 -0700 (PDT)
Received: by 10.224.37.19 with SMTP id v19mr4566302qad.15.1282065662164; Tue,
 17 Aug 2010 10:21:02 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.192.142 with HTTP; Tue, 17 Aug 2010 10:20:42 -0700 (PDT)
In-Reply-To: <631372.39592.qm@web50303.mail.re2.yahoo.com>
References: <AANLkTimszB7MNXgG+8srxHDDAna59OqLmZzB5dh906yP@mail.gmail.com> <631372.39592.qm@web50303.mail.re2.yahoo.com>
From: =?UTF-8?Q?Utku_Can_Top=C3=A7u?= <utku@topcu.gen.tr>
Date: Tue, 17 Aug 2010 19:20:42 +0200
Message-ID: <AANLkTimvSm2NROUtoQniXpx_BJxwPsM4evKPaXL5mpzp@mail.gmail.com>
Subject: Re: LUCENE-2456 (A Column-Oriented Cassandra-Based Lucene Directory)
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001517503cc85f40d8048e082c66
X-Virus-Checked: Checked by ClamAV on apache.org

--001517503cc85f40d8048e082c66
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hi Otis,

Thank you for the notice. I'll do so.

"What happened with Lucandra?" Is really a hard question to answer.

After testing the CassandraDirectory and Lucandra against a real-time strea=
m
of "large" data. I've concluded that the approach to make this data
searchable in Lucene over Cassandra is not as scalable as it has sounded.

So I've developed some "pure" cassandra techniques to index and search for
the portions of data I'm interested in.

Regards,
Utku

On Sun, Aug 8, 2010 at 5:50 AM, Otis Gospodnetic <otis_gospodnetic@yahoo.co=
m
> wrote:

> Utku, you should ask via comments on
> https://issues.apache.org/jira/browse/LUCENE-2453.
> What happened with Lucandra?
>
> Otis
> ----
> Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
> Lucene ecosystem search :: http://search-lucene.com/
>
>
>
> ----- Original Message ----
> > From: Utku Can Top=C3=A7u <utku@topcu.gen.tr>
> > To: java-user@lucene.apache.org
> > Sent: Fri, July 23, 2010 12:59:36 PM
> > Subject: LUCENE-2456 (A Column-Oriented Cassandra-Based Lucene Director=
y)
> >
> > Hi All,
> >
> > I'm trying to use the patch for testing, provided in the  issue.
> >
> > I downloaded the patch and the dependency *LUCENE-2453
> > <https://issues.apache.org/jira/browse/LUCENE-2453>*.
> > I tested this  contribution against the r942817 revision where I assume
> the
> > contributor has  been using during the time of development. The tests
> seemed
> > to  fail.
> >
> > This time, I updated the CassandraDirectory.java to match the new
>  Cassandra
> > Interface. It unfortunately failed again.
> >
> > Has anyone here  have an idea on which cassandra revision and lucene
> revision
> > this patch  works  against?
> >
> > Best Regards,
> > Utku
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001517503cc85f40d8048e082c66--

From java-user-return-47048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 17 17:43:44 2010
Return-Path: <java-user-return-47048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92019 invoked from network); 17 Aug 2010 17:43:44 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Aug 2010 17:43:44 -0000
Received: (qmail 5579 invoked by uid 500); 17 Aug 2010 17:43:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5516 invoked by uid 500); 17 Aug 2010 17:43:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5508 invoked by uid 99); 17 Aug 2010 17:43:41 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 17:43:41 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.65.145.76] (HELO p02c12o143.mxlogic.net) (208.65.145.76)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 17:43:18 +0000
Received: from unknown [67.132.206.99] (EHLO donkey.hmsonline.com)
	by p02c12o143.mxlogic.net(mxl_mta-6.7.0-0)
	with ESMTP id f1aca6c4.0.20220.00-368.46144.p02c12o143.mxlogic.net (envelope-from <nkolev@healthmarketscience.com>);
	Tue, 17 Aug 2010 11:42:57 -0600 (MDT)
X-MXL-Hash: 4c6aca213bff9222-642f5634f72e7ee4abb82fe952db08d81dd1a773
Received: from pwex01.zoo.hmsonline.com (pwex01.hmsonline.com [10.67.88.109])
	by donkey.hmsonline.com (8.13.1/8.13.1) with ESMTP id o7HHgtnU012882
	for <java-user@lucene.apache.org>; Tue, 17 Aug 2010 13:42:55 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: cluster documents based on fields' values
Date: Tue, 17 Aug 2010 13:42:16 -0400
Message-ID: <67B9FB634299E5469D36BF5B3537F024C2D07A@pwex01.zoo.hmsonline.com>
In-Reply-To: <50725D21-336A-4575-A939-8ABFF4F419CD@apache.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: cluster documents based on fields' values
Thread-Index: Acs+A2e+W+A7nmvTQBqXY/XxghiSeQALsqeg
References: <67B9FB634299E5469D36BF5B3537F02409524C@pwex01.zoo.hmsonline.com> <50725D21-336A-4575-A939-8ABFF4F419CD@apache.org>
From: "Nik Kolev" <nkolev@healthmarketscience.com>
To: <java-user@lucene.apache.org>
X-Spam: [F=0.2000000000; CM=0.500; S=0.200(2010073001)]
X-MAIL-FROM: <nkolev@healthmarketscience.com>
X-SOURCE-IP: [67.132.206.99]
X-AnalysisOut: [v=1.0 c=1 a=j2mpCyZGM1oA:10 a=VphdPIyG4kEA:10 a=kj9zAlcOel]
X-AnalysisOut: [0A:10 a=xdWuvbPJTlx+8X/s3BW2YQ==:17 a=mV9VRH-2AAAA:8 a=KxA]
X-AnalysisOut: [zbDy6AAAA:8 a=AzbsbPbQY-hnv8vcyyIA:9 a=987CNZ_nlGzms9fo9Sk]
X-AnalysisOut: [A:7 a=B2rCTFl9_Ii0qmpA87r5qaxvr4IA:4 a=CjuIK1q_8ugA:10 a=8]
X-AnalysisOut: [8iI8knYSJUA:10]
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Grant. I'll take a look at Solr's faceting.

A colleague of mine also discovered solr's clustering component -
http://wiki.apache.org/solr/ClusteringComponent. It's still labeled as
experimental - does anybody have experience with it?

Another option (pointed out by your post:
http://www.lucidimagination.com/blog/2010/03/16/integrating-apache-mahou
t-with-apache-lucene-and-solr-part-i-of-3/) is mahout with its baked in
clustering algorithms. Has anybody gotten good mileage out of this
approach?

Thanks again,
-nik


-----Original Message-----
From: Grant Ingersoll [mailto:gsingers@apache.org]=20
Sent: Tuesday, August 17, 2010 7:57 AM
To: java-user@lucene.apache.org
Subject: Re: cluster documents based on fields' values

Hi Nik,

Inline below.
On Aug 15, 2010, at 5:01 PM, Nik Kolev wrote:

> Hi,
>=20
> I am researching the possibility of using Lucene for discovering
> clusters of documents and since I am new to Lucene I decided to
> ask the community for advice before I poke the APIs and the internals.
> Your input will be invaluable!
>=20
> Here's the use case. Documents arrive from different feeds. Each feed
> produces millions and millions of documents. Documents are structured
> and share certain "interesting" fields. For the purpose of
illustration
> here's a trivial example. Let's say the documents on each feed
represent
> shoes. A shoe has an ID (uniquely identifying it within its feed) and
a
> SIZE [1]. I want to be able to ask Lucene (assuming the shoe documents
> are indexed of course) for all of the clusters of shoes that sport the
same
> size. A cluster of shoes is just the IDs of the shoes that got grouped
> together due to having the same value of the SIZE field.
>=20
> I don't think that doing this brute force will perform. Here's what I
> mean when I say brute force. I looked at IndexReader, and I saw that
> I can get the distinct values for an indexed field. So assuming that
> each feed will have its own index (I don't think I can get away with
> a single index for all feeds [2]), I can get the union of all distinct
> values for the interesting field across all indexes (one per each
> document feed). Then for each distinct value I can do a MultiSearcher
> search across these indexes getting the IDs of the documents .
>=20
> My gut tells me that the brute force approach won't perform [3]. And
> here's where you guys come in - is it possible to ask lucene to give
> me the groups of records (across indixes) that share the value for a
> given field? Is there something else in API that I can take advantage
> of and get what I need faster? If I am to extend Lucene to allow for
> this sort of thing, where should I start, what documents should I
> read,...?

This feature, called faceting -- amongst other things, comes out of the
box in Solr (http://lucene.apache.org/solr)

>=20
> Thanks very much again for your advise,
> -nik
>=20
> [1] Shoe document layout:
>    SHOE
>      |--ID
>      |--SIZE
>=20
> [2] The volume of documents I get from each feed is huge. Also, even
>    though a lot of fields are shared the format across feeds varies
>    and a feed may not have some of the "interesting" fields of
>    another feed.
>=20
> [3] The dataset I am talking about is rich and the brute force
approach
>    means that I need to be doing tens of millions of searches just to
>    group on one field. Also I most likely will blow my heap up if I
try to
>    load all of the values in memory all at once.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem using Solr/Lucene:
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 17 19:06:49 2010
Return-Path: <java-user-return-47049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43064 invoked from network); 17 Aug 2010 19:06:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Aug 2010 19:06:48 -0000
Received: (qmail 34231 invoked by uid 500); 17 Aug 2010 19:06:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34144 invoked by uid 500); 17 Aug 2010 19:06:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34131 invoked by uid 99); 17 Aug 2010 19:06:46 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 19:06:46 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_FILL_THIS_FORM_SHORT,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of akaris@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 19:06:22 +0000
Received: by eydd26 with SMTP id d26so3028706eyd.35
        for <java-user@lucene.apache.org>; Tue, 17 Aug 2010 12:06:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=eVG9FljdaBfFlPBVeV+GD0YBR7lmltki+phhoCAv3qA=;
        b=Sm1sbDR2+fUCVmdB/DNOlOO7lml+mTcPyIVVN32YiMgoyfXa0LwXmvO6h/GUiEdV4G
         pXC6QhYUJMvvFhcfI8zuuw3r+1IIQMH5v6oqdu8EmDtGO4aoI12JnElSf2iICIGp72jb
         6d8NW4pPDY1dfUJ7343z7F9oR9xCaHvna/XEM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=MeM4zH7q8kQph3tIo9Fmb5WJxdNGBiHKdqRkJPjuUpyFSKyb8L8PS/cakQUBBLk3FH
         sZmBQrJMRpP5XamtEJ1Xe8GBUAzJ6y3xzb9U1CDgz8IOUB0gAZIXxqGxpiQIRHLiVfFE
         ttkWdU3VA3Cjs7qw9+6UY6ak5YkmO20SFdHpM=
Received: by 10.213.22.133 with SMTP id n5mr6469012ebb.64.1282071962455; Tue,
 17 Aug 2010 12:06:02 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.14.10.153 with HTTP; Tue, 17 Aug 2010 12:05:42 -0700 (PDT)
In-Reply-To: <AANLkTi=qUOSNBP=ZpvGd=SrXtdp6NabbMFPLJF2AwGrD@mail.gmail.com>
References: <AANLkTimHhWx4ZEzZCuQN5p4u=kbc-s20R4qfdyBLDf=p@mail.gmail.com> <AANLkTi=qUOSNBP=ZpvGd=SrXtdp6NabbMFPLJF2AwGrD@mail.gmail.com>
From: Michel Nadeau <akaris@gmail.com>
Date: Tue, 17 Aug 2010 15:05:42 -0400
Message-ID: <AANLkTi=zB3f1+PdUBkMY11yfWcaoX=vfgcKpgm_tvb3E@mail.gmail.com>
Subject: Re: "Natural sorting" of documents in a Lucene index - possible?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174bdc6ce6114e048e09a349
X-Virus-Checked: Checked by ClamAV on apache.org

--0015174bdc6ce6114e048e09a349
Content-Type: text/plain; charset=ISO-8859-1

Hi Erick,

Here's some more details about our structure. First here's an example of
document in our index :

     PrimaryKey        = SJAsfsf353JHGada66GH6 (it's a hash)
     DocType           = X
     Data              = This is the data
     SearchableContent = This is the data
     DateCreated       = <timestamp>
     DateModified      = <timestamp>
     Counter1          = 17
     Counter2          = 3
     Average           = 0.17
     Cost              = 200

The users are able to sort on almost all fields: Data, DateCreated,
DateModified, Counter1, Counter2, Average, Cost.

When we search, we always search on the 'SearchableContent' field and we
have at least one filter on the DocType (because we have many document types
in the same index). So a common search that would find the document above is
"data *AND DocType:X*" (we automatically add the "*AND DocType:X*" part
using Lucene Filters.

I would say that the number of unique terms in the field being sorted on is
very big - for example timestamps, almost all unique, counters, average,
cost, data... so if a query finds 10M results, it's almost 10M different
values to sort. About cache and warm-up queries : we don't use warm-up
queries -at all- because we have absolutely no idea of what users are going
to search for (they can search for absolutely anything). About "returning
10M" documents, right, we don't actually return the 10M documents, we use
pagination to return documents X to Y of the 10M (and the 10M was only an
example, it can be anywhere between 1K and 100M results). The pagination
usually works fine and fast, our problem is really sorting.

Our "Lucene Reader" process has 2GB of ram allowed, here's how I start it -

     java -Xmx2048m -jar LuceneReader.jar

The problem really seems to be a ram problem, but I can't be 100% sure (any
help about how to be sure is welcome).

Our current idea of a solution would be to get maximum 250 results (the more
relevant ones; more results than that is totally useless in our system) so
the sort should work fine on a small data set like that, but we want to make
sure we're doing everything right before doing that so we don't run in the
same problems again.

Thank you very much; let me know if you need any more details!

- Mike
akaris@gmail.com


On Mon, Aug 16, 2010 at 4:01 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> Let's back up a minute. The number of matched records is not
> important when sorting, what's important is the number of unique
> terms in the field being sorted. Do you have any figures on that? One
> very common sorting issue is sorting on very fine date time resolutions,
> although your examples don't include that...
>
> Now, cache loading is an issue. The very first time you sort on a field,
> all the values are read into a cache. Is it possible this is the source
> of your problems? You can cure this with warmup queries. The take-away
> is that measuring the response time for the first sorted query is
> very misleading.
>
> Although if you're sorting on many, many, many email addresses,
> that could be "interesting".
>
> The comment "returning 10,000,000 documents" is, I hope, a
> misstatement. If you're trying to *return* 10M docs sorting
> is irrelevant compared to assembling that many documents. If
> you're trying to return the first 100 of 10M documents, it should
> work.
>
> Overall, we need more details on what you're sorting and what
> you're trying to return as well as how you're measuring before
> we can say much....
>
> Along with how much memory you're giving your JVM to work with,
> what "exploding" means. Are you CPU bound? IO bound? Swapping?
> You need to characterize what is going wrong before worrying about
> solutions......
>
> Best
> Erick
>
> On Mon, Aug 16, 2010 at 3:08 PM, Michel Nadeau <akaris@gmail.com> wrote:
>
> > Hi,
> >
> > we are building an application using Lucene and we have HUGE data sets
> (our
> > index contains millions and millions and millions of documents), which
> > obviously cause us very important problems when sorting. In fact, we
> > disabled sorting completely because the servers were just exploding when
> > trying to sort results in RAM. The users using the system can search for
> > whatever they want, so we never know how many results will be returned -
> a
> > search can return 10 documents (no problem with sorting) or 10,000,000
> > (huge
> > sorting problems).
> >
> > I woke up this morning and had a flash : is it possible with Lucene to
> have
> > a "natural sorting" of documents? For example, let's say I have 3 columns
> I
> > want to be able to sort by : first name, last name, email; I would have 3
> > different indexes with the very same data but with a different primary
> key
> > for sorting. I know it's far fetched, and I have never seen anything like
> > that since I use Lucene, but we're just desperate... how people do to
> have
> > huge data sets, a lot of users, and sort!?
> >
> > Thanks,
> >
> > Mike
> >
>

--0015174bdc6ce6114e048e09a349--

From java-user-return-47050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 17 19:08:04 2010
Return-Path: <java-user-return-47050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43831 invoked from network); 17 Aug 2010 19:08:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Aug 2010 19:08:04 -0000
Received: (qmail 37184 invoked by uid 500); 17 Aug 2010 19:07:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36905 invoked by uid 500); 17 Aug 2010 19:07:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36884 invoked by uid 99); 17 Aug 2010 19:07:58 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 19:07:58 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.214.115.60] (HELO h1349259.stratoserver.net) (85.214.115.60)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 19:07:34 +0000
Received: from g225064220.adsl.alicedsl.de ([92.225.64.220] helo=motokokusanagi.localnet)
	by h1349259.stratoserver.net with esmtpsa (TLS1.0:DHE_RSA_AES_256_CBC_SHA1:32)
	(Exim 4.69)
	(envelope-from <isabel@apache.org>)
	id 1OlRVB-0003g3-PU; Tue, 17 Aug 2010 19:07:13 +0000
From: Isabel Drost <isabel@apache.org>
Reply-To: isabel@apache.org
To: community@apache.org
Subject: Apache Dinner DUS (co-located with FSFE fellowship meetup)
Date: Tue, 17 Aug 2010 21:06:58 +0200
User-Agent: KMail/1.13.5 (Linux/2.6.32-5-amd64; KDE/4.4.5; x86_64; ; )
Cc: java-user@lucene.apache.org,
 user@mahout.apache.org,
 general@hadoop.apache.org
MIME-Version: 1.0
Content-Type: multipart/signed;
  boundary="nextPart3207924.hMO8L3MZZH";
  protocol="application/pgp-signature";
  micalg=pgp-sha1
Content-Transfer-Encoding: 7bit
Message-Id: <201008172107.08117.isabel@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

--nextPart3207924.hMO8L3MZZH
Content-Type: Text/Plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hello,

the evening after FrOSCon - that is on August 22nd 2010 at 7:30p.m. CEST - =
a=20
combined "FSFE Fellowship meetup/ Apache dinner*" takes place in Tigges in=
=20
D=FCsseldorf (Brunnenstra=DFe 1, at Bilker S-Bahnhof). Given it doesn't rai=
n, we'll=20
be sitting outside.

Would be great to meet you there for tasty food, interesting discussions on=
=20
Apache in general, as well as projects like Lucene, Hadoop or Tomcat in=20
particular. Anyone interested in either the FSFE or Apache is welcome to jo=
in=20
us.

One personal request: Somehow, Rainer (Kersten, FSFE) talked me into prepar=
ing a=20
talk on what the ASF is all about - would be really great to have more peop=
le=20
around share their experience.


See you in D=FCsseldorf,
Isabel=20


* http://blog.isabel-drost.de/index.php/archives/category/events/apache-din=
ner-
berlin

--nextPart3207924.hMO8L3MZZH
Content-Type: application/pgp-signature; name=signature.asc 
Content-Description: This is a digitally signed message part.

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.10 (GNU/Linux)

iEYEABECAAYFAkxq3dMACgkQPJpCBAwIhbTtLACgrGdZpWH6P5mYBJtsxwDSpiD/
B2gAnRbm4TVlceARdnUU/FfX6j5irkXk
=HqWO
-----END PGP SIGNATURE-----

--nextPart3207924.hMO8L3MZZH--

From java-user-return-47051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 17 19:26:03 2010
Return-Path: <java-user-return-47051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57707 invoked from network); 17 Aug 2010 19:26:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Aug 2010 19:26:03 -0000
Received: (qmail 67728 invoked by uid 500); 17 Aug 2010 19:26:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67671 invoked by uid 500); 17 Aug 2010 19:26:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67663 invoked by uid 99); 17 Aug 2010 19:26:00 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 19:26:00 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 19:25:39 +0000
Received: by qwk3 with SMTP id 3so6561842qwk.35
        for <java-user@lucene.apache.org>; Tue, 17 Aug 2010 12:25:18 -0700 (PDT)
Received: by 10.220.179.7 with SMTP id bo7mr2098300vcb.2.1282073118136; Tue,
 17 Aug 2010 12:25:18 -0700 (PDT)
References: <AANLkTimszB7MNXgG+8srxHDDAna59OqLmZzB5dh906yP@mail.gmail.com>
 <631372.39592.qm@web50303.mail.re2.yahoo.com> <AANLkTimvSm2NROUtoQniXpx_BJxwPsM4evKPaXL5mpzp@mail.gmail.com>
From: William Newport <billy@billynewport.com>
In-Reply-To: <AANLkTimvSm2NROUtoQniXpx_BJxwPsM4evKPaXL5mpzp@mail.gmail.com>
Mime-Version: 1.0 (iPhone Mail 8A400)
Date: Tue, 17 Aug 2010 14:24:49 -0500
Message-ID: <8233194671419460165@unknownmsgid>
Subject: Re: LUCENE-2456 (A Column-Oriented Cassandra-Based Lucene Directory)
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I think it's similar to datagrid directory plugins which are likely
higher performance than Cassandra but still have performance issues
with large indexes.

Sent from my iPhone

On Aug 17, 2010, at 12:20 PM, Utku Can Top=E7u <utku@topcu.gen.tr> wrote:

> Hi Otis,
>
> Thank you for the notice. I'll do so.
>
> "What happened with Lucandra?" Is really a hard question to answer.
>
> After testing the CassandraDirectory and Lucandra against a real-time str=
eam
> of "large" data. I've concluded that the approach to make this data
> searchable in Lucene over Cassandra is not as scalable as it has sounded.
>
> So I've developed some "pure" cassandra techniques to index and search fo=
r
> the portions of data I'm interested in.
>
> Regards,
> Utku
>
> On Sun, Aug 8, 2010 at 5:50 AM, Otis Gospodnetic <otis_gospodnetic@yahoo.=
com
>> wrote:
>
>> Utku, you should ask via comments on
>> https://issues.apache.org/jira/browse/LUCENE-2453.
>> What happened with Lucandra?
>>
>> Otis
>> ----
>> Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
>> Lucene ecosystem search :: http://search-lucene.com/
>>
>>
>>
>> ----- Original Message ----
>>> From: Utku Can Top=E7u <utku@topcu.gen.tr>
>>> To: java-user@lucene.apache.org
>>> Sent: Fri, July 23, 2010 12:59:36 PM
>>> Subject: LUCENE-2456 (A Column-Oriented Cassandra-Based Lucene Director=
y)
>>>
>>> Hi All,
>>>
>>> I'm trying to use the patch for testing, provided in the  issue.
>>>
>>> I downloaded the patch and the dependency *LUCENE-2453
>>> <https://issues.apache.org/jira/browse/LUCENE-2453>*.
>>> I tested this  contribution against the r942817 revision where I assume
>> the
>>> contributor has  been using during the time of development. The tests
>> seemed
>>> to  fail.
>>>
>>> This time, I updated the CassandraDirectory.java to match the new
>> Cassandra
>>> Interface. It unfortunately failed again.
>>>
>>> Has anyone here  have an idea on which cassandra revision and lucene
>> revision
>>> this patch  works  against?
>>>
>>> Best Regards,
>>> Utku
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 17 19:29:23 2010
Return-Path: <java-user-return-47052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59816 invoked from network); 17 Aug 2010 19:29:22 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Aug 2010 19:29:22 -0000
Received: (qmail 73170 invoked by uid 500); 17 Aug 2010 19:29:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73106 invoked by uid 500); 17 Aug 2010 19:29:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73098 invoked by uid 99); 17 Aug 2010 19:29:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 19:29:19 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_FILL_THIS_FORM_SHORT,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 19:29:14 +0000
Received: by qyk12 with SMTP id 12so1143769qyk.14
        for <java-user@lucene.apache.org>; Tue, 17 Aug 2010 12:28:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=eJXzp4sn1fmuWNnHUULUZBQ3LXDV0uWjBExqEjwqH+Q=;
        b=dGUGvIBNK4iuztjyFmp/4fOPN6BcDIpHoPPBJPOt5fppjkWWJ1zZ/7ioGmkyR/uLdO
         /1AZEWKLYy10etOvDyO4gjD/qQhH78e/1hCCoEJ0mcx4rq+S10rL0FJ+ThoEG7G4m7NU
         N6oIf/xRVJltYhNfAqIkiYC5RvJaerZBSPBcE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=wow0maO103ALG4wx0OUoaYh5brTgfPSRkJjTFeNOcgcZUlssehckO4dRM4A2b2H3Pm
         gNnDw3W0NwSo52KIeNLNo552vw0zpC5qc1YYLx0a5PJhf7cIP0BkcW3DkG5DKGCH7PuE
         5ssRxzok/KO3Z0ZsySS2eterLMcTLXbtKxevo=
MIME-Version: 1.0
Received: by 10.224.37.134 with SMTP id x6mr4686855qad.145.1282073333804; Tue,
 17 Aug 2010 12:28:53 -0700 (PDT)
Received: by 10.229.219.11 with HTTP; Tue, 17 Aug 2010 12:28:53 -0700 (PDT)
In-Reply-To: <AANLkTi=zB3f1+PdUBkMY11yfWcaoX=vfgcKpgm_tvb3E@mail.gmail.com>
References: <AANLkTimHhWx4ZEzZCuQN5p4u=kbc-s20R4qfdyBLDf=p@mail.gmail.com>
	<AANLkTi=qUOSNBP=ZpvGd=SrXtdp6NabbMFPLJF2AwGrD@mail.gmail.com>
	<AANLkTi=zB3f1+PdUBkMY11yfWcaoX=vfgcKpgm_tvb3E@mail.gmail.com>
Date: Tue, 17 Aug 2010 15:28:53 -0400
Message-ID: <AANLkTinf56RGiYE3h5nFt4TYk_J-xan++AdoSRLJggJv@mail.gmail.com>
Subject: Re: "Natural sorting" of documents in a Lucene index - possible?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175cdb8ca32f79048e09f53b

--0015175cdb8ca32f79048e09f53b
Content-Type: text/plain; charset=ISO-8859-1

If you have tens of millions of documents, almost all with unique fields
that you're sorting on, you'll chew through memory like there's no
tomorrow.

Have you looked at trie fields? See:
http://www.lucidimagination.com/blog/2009/05/13/exploring-lucene-and-solrs-trierange-capabilities/

I'm a little concerned that the user can sort on Data. Any field used for
sorting
should NOT be analyzed, so unless you are indexing "Data" unanalyzed, that's
a problem. And if you are sorting on strings unique to each document, that's
also a memory hog. Not to mention whether capitalization counts.

You might enumerate the terms in your index for each of the sortable fields
to figure out what the total number of unique terms each is and use that as
a basis for reducing their count....

HTH
Erick

On Tue, Aug 17, 2010 at 3:05 PM, Michel Nadeau <akaris@gmail.com> wrote:

> Hi Erick,
>
> Here's some more details about our structure. First here's an example of
> document in our index :
>
>     PrimaryKey        = SJAsfsf353JHGada66GH6 (it's a hash)
>     DocType           = X
>     Data              = This is the data
>     SearchableContent = This is the data
>     DateCreated       = <timestamp>
>     DateModified      = <timestamp>
>     Counter1          = 17
>     Counter2          = 3
>     Average           = 0.17
>     Cost              = 200
>
> The users are able to sort on almost all fields: Data, DateCreated,
> DateModified, Counter1, Counter2, Average, Cost.
>
> When we search, we always search on the 'SearchableContent' field and we
> have at least one filter on the DocType (because we have many document
> types
> in the same index). So a common search that would find the document above
> is
> "data *AND DocType:X*" (we automatically add the "*AND DocType:X*" part
> using Lucene Filters.
>
> I would say that the number of unique terms in the field being sorted on is
> very big - for example timestamps, almost all unique, counters, average,
> cost, data... so if a query finds 10M results, it's almost 10M different
> values to sort. About cache and warm-up queries : we don't use warm-up
> queries -at all- because we have absolutely no idea of what users are going
> to search for (they can search for absolutely anything). About "returning
> 10M" documents, right, we don't actually return the 10M documents, we use
> pagination to return documents X to Y of the 10M (and the 10M was only an
> example, it can be anywhere between 1K and 100M results). The pagination
> usually works fine and fast, our problem is really sorting.
>
> Our "Lucene Reader" process has 2GB of ram allowed, here's how I start it -
>
>     java -Xmx2048m -jar LuceneReader.jar
>
> The problem really seems to be a ram problem, but I can't be 100% sure (any
> help about how to be sure is welcome).
>
> Our current idea of a solution would be to get maximum 250 results (the
> more
> relevant ones; more results than that is totally useless in our system) so
> the sort should work fine on a small data set like that, but we want to
> make
> sure we're doing everything right before doing that so we don't run in the
> same problems again.
>
> Thank you very much; let me know if you need any more details!
>
> - Mike
> akaris@gmail.com
>
>
> On Mon, Aug 16, 2010 at 4:01 PM, Erick Erickson <erickerickson@gmail.com
> >wrote:
>
> > Let's back up a minute. The number of matched records is not
> > important when sorting, what's important is the number of unique
> > terms in the field being sorted. Do you have any figures on that? One
> > very common sorting issue is sorting on very fine date time resolutions,
> > although your examples don't include that...
> >
> > Now, cache loading is an issue. The very first time you sort on a field,
> > all the values are read into a cache. Is it possible this is the source
> > of your problems? You can cure this with warmup queries. The take-away
> > is that measuring the response time for the first sorted query is
> > very misleading.
> >
> > Although if you're sorting on many, many, many email addresses,
> > that could be "interesting".
> >
> > The comment "returning 10,000,000 documents" is, I hope, a
> > misstatement. If you're trying to *return* 10M docs sorting
> > is irrelevant compared to assembling that many documents. If
> > you're trying to return the first 100 of 10M documents, it should
> > work.
> >
> > Overall, we need more details on what you're sorting and what
> > you're trying to return as well as how you're measuring before
> > we can say much....
> >
> > Along with how much memory you're giving your JVM to work with,
> > what "exploding" means. Are you CPU bound? IO bound? Swapping?
> > You need to characterize what is going wrong before worrying about
> > solutions......
> >
> > Best
> > Erick
> >
> > On Mon, Aug 16, 2010 at 3:08 PM, Michel Nadeau <akaris@gmail.com> wrote:
> >
> > > Hi,
> > >
> > > we are building an application using Lucene and we have HUGE data sets
> > (our
> > > index contains millions and millions and millions of documents), which
> > > obviously cause us very important problems when sorting. In fact, we
> > > disabled sorting completely because the servers were just exploding
> when
> > > trying to sort results in RAM. The users using the system can search
> for
> > > whatever they want, so we never know how many results will be returned
> -
> > a
> > > search can return 10 documents (no problem with sorting) or 10,000,000
> > > (huge
> > > sorting problems).
> > >
> > > I woke up this morning and had a flash : is it possible with Lucene to
> > have
> > > a "natural sorting" of documents? For example, let's say I have 3
> columns
> > I
> > > want to be able to sort by : first name, last name, email; I would have
> 3
> > > different indexes with the very same data but with a different primary
> > key
> > > for sorting. I know it's far fetched, and I have never seen anything
> like
> > > that since I use Lucene, but we're just desperate... how people do to
> > have
> > > huge data sets, a lot of users, and sort!?
> > >
> > > Thanks,
> > >
> > > Mike
> > >
> >
>

--0015175cdb8ca32f79048e09f53b--

From java-user-return-47053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 17 19:36:34 2010
Return-Path: <java-user-return-47053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63609 invoked from network); 17 Aug 2010 19:36:34 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Aug 2010 19:36:34 -0000
Received: (qmail 83064 invoked by uid 500); 17 Aug 2010 19:36:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83015 invoked by uid 500); 17 Aug 2010 19:36:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83007 invoked by uid 99); 17 Aug 2010 19:36:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 19:36:31 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,SPF_PASS,T_FILL_THIS_FORM_SHORT,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of akaris@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 19:36:26 +0000
Received: by eydd26 with SMTP id d26so3062869eyd.35
        for <java-user@lucene.apache.org>; Tue, 17 Aug 2010 12:36:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=+NrIphfS24Wy8UPTAK+NX+LJOzT5OM4dX2BzMnNTWw4=;
        b=rhEEWvA7fvSW+G/SyS//VVTxcSUXmU/A0xM7OuFL9AXOT1Hs8Ck2C1ABr+zF6obzsh
         x8ZoutfraGVN0gOpgjHR2P00ZPcgU2gp/3dr3u4fVDKGC0izh7+MqQo9GbvF3qzbLet2
         LgZ7tDABk7T1TfuKRqdcWJCcHkvrogcpUyQBs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=m4b5jLabCy7R3ZbznOOYoinET6XnqgTdAhXxbYM2U7LgaKar0izJO3mMBSqlPr0ZmZ
         GOQPIiv2AK3z9eRWN/6n6n9Y3ojXJeYJz3/8KoHfmPl7Jx/XiTtBBVQ1FgFe+GNzkHKV
         uAtCbeVM1+WejZoZThZ4bDz51qmwUbERabTDo=
Received: by 10.213.15.74 with SMTP id j10mr1131991eba.74.1282073764479; Tue,
 17 Aug 2010 12:36:04 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.14.10.153 with HTTP; Tue, 17 Aug 2010 12:35:44 -0700 (PDT)
In-Reply-To: <AANLkTinf56RGiYE3h5nFt4TYk_J-xan++AdoSRLJggJv@mail.gmail.com>
References: <AANLkTimHhWx4ZEzZCuQN5p4u=kbc-s20R4qfdyBLDf=p@mail.gmail.com>
 <AANLkTi=qUOSNBP=ZpvGd=SrXtdp6NabbMFPLJF2AwGrD@mail.gmail.com>
 <AANLkTi=zB3f1+PdUBkMY11yfWcaoX=vfgcKpgm_tvb3E@mail.gmail.com> <AANLkTinf56RGiYE3h5nFt4TYk_J-xan++AdoSRLJggJv@mail.gmail.com>
From: Michel Nadeau <akaris@gmail.com>
Date: Tue, 17 Aug 2010 15:35:44 -0400
Message-ID: <AANLkTimj9xmwn8c5hUiq2E=W3j1vm-R9Jo4v_YKCBFqB@mail.gmail.com>
Subject: Re: "Natural sorting" of documents in a Lucene index - possible?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174c41304ec572048e0a0f52

--0015174c41304ec572048e0a0f52
Content-Type: text/plain; charset=ISO-8859-1

Would our approach to limit the search top 250 documents (and then sort
these 250 documents) work fine ? Or even 250 unique terms with a lot of
users is bad on memory when sorting ?

We didn't look at trie fields - I will do though, thanks for the tip !

We do store the original 'Data' field (only the 'SearchableData' field is
analyzed, all other fields are not analyzed), the users mainly sort on
numeric values; not a lot on string values (in fact I could compltely drop
the sort by string feature). We do pad our numbers with zeros though (for
example: 10 becomes 00000010, etc.) because we had trouble with sorting (100
was smaller than 2) ; is that considered as "string sorting" ? This might
explain a part of the problem.

Why/how would I reduce the count of unique terms?


- Mike
akaris@gmail.com


On Tue, Aug 17, 2010 at 3:28 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> If you have tens of millions of documents, almost all with unique fields
> that you're sorting on, you'll chew through memory like there's no
> tomorrow.
>
> Have you looked at trie fields? See:
>
> http://www.lucidimagination.com/blog/2009/05/13/exploring-lucene-and-solrs-trierange-capabilities/
>
> I'm a little concerned that the user can sort on Data. Any field used for
> sorting
> should NOT be analyzed, so unless you are indexing "Data" unanalyzed,
> that's
> a problem. And if you are sorting on strings unique to each document,
> that's
> also a memory hog. Not to mention whether capitalization counts.
>
> You might enumerate the terms in your index for each of the sortable fields
> to figure out what the total number of unique terms each is and use that as
> a basis for reducing their count....
>
> HTH
> Erick
>
> On Tue, Aug 17, 2010 at 3:05 PM, Michel Nadeau <akaris@gmail.com> wrote:
>
> > Hi Erick,
> >
> > Here's some more details about our structure. First here's an example of
> > document in our index :
> >
> >     PrimaryKey        = SJAsfsf353JHGada66GH6 (it's a hash)
> >     DocType           = X
> >     Data              = This is the data
> >     SearchableContent = This is the data
> >     DateCreated       = <timestamp>
> >     DateModified      = <timestamp>
> >     Counter1          = 17
> >     Counter2          = 3
> >     Average           = 0.17
> >     Cost              = 200
> >
> > The users are able to sort on almost all fields: Data, DateCreated,
> > DateModified, Counter1, Counter2, Average, Cost.
> >
> > When we search, we always search on the 'SearchableContent' field and we
> > have at least one filter on the DocType (because we have many document
> > types
> > in the same index). So a common search that would find the document above
> > is
> > "data *AND DocType:X*" (we automatically add the "*AND DocType:X*" part
> > using Lucene Filters.
> >
> > I would say that the number of unique terms in the field being sorted on
> is
> > very big - for example timestamps, almost all unique, counters, average,
> > cost, data... so if a query finds 10M results, it's almost 10M different
> > values to sort. About cache and warm-up queries : we don't use warm-up
> > queries -at all- because we have absolutely no idea of what users are
> going
> > to search for (they can search for absolutely anything). About "returning
> > 10M" documents, right, we don't actually return the 10M documents, we use
> > pagination to return documents X to Y of the 10M (and the 10M was only an
> > example, it can be anywhere between 1K and 100M results). The pagination
> > usually works fine and fast, our problem is really sorting.
> >
> > Our "Lucene Reader" process has 2GB of ram allowed, here's how I start it
> -
> >
> >     java -Xmx2048m -jar LuceneReader.jar
> >
> > The problem really seems to be a ram problem, but I can't be 100% sure
> (any
> > help about how to be sure is welcome).
> >
> > Our current idea of a solution would be to get maximum 250 results (the
> > more
> > relevant ones; more results than that is totally useless in our system)
> so
> > the sort should work fine on a small data set like that, but we want to
> > make
> > sure we're doing everything right before doing that so we don't run in
> the
> > same problems again.
> >
> > Thank you very much; let me know if you need any more details!
> >
> > - Mike
> > akaris@gmail.com
> >
> >
> > On Mon, Aug 16, 2010 at 4:01 PM, Erick Erickson <erickerickson@gmail.com
> > >wrote:
> >
> > > Let's back up a minute. The number of matched records is not
> > > important when sorting, what's important is the number of unique
> > > terms in the field being sorted. Do you have any figures on that? One
> > > very common sorting issue is sorting on very fine date time
> resolutions,
> > > although your examples don't include that...
> > >
> > > Now, cache loading is an issue. The very first time you sort on a
> field,
> > > all the values are read into a cache. Is it possible this is the source
> > > of your problems? You can cure this with warmup queries. The take-away
> > > is that measuring the response time for the first sorted query is
> > > very misleading.
> > >
> > > Although if you're sorting on many, many, many email addresses,
> > > that could be "interesting".
> > >
> > > The comment "returning 10,000,000 documents" is, I hope, a
> > > misstatement. If you're trying to *return* 10M docs sorting
> > > is irrelevant compared to assembling that many documents. If
> > > you're trying to return the first 100 of 10M documents, it should
> > > work.
> > >
> > > Overall, we need more details on what you're sorting and what
> > > you're trying to return as well as how you're measuring before
> > > we can say much....
> > >
> > > Along with how much memory you're giving your JVM to work with,
> > > what "exploding" means. Are you CPU bound? IO bound? Swapping?
> > > You need to characterize what is going wrong before worrying about
> > > solutions......
> > >
> > > Best
> > > Erick
> > >
> > > On Mon, Aug 16, 2010 at 3:08 PM, Michel Nadeau <akaris@gmail.com>
> wrote:
> > >
> > > > Hi,
> > > >
> > > > we are building an application using Lucene and we have HUGE data
> sets
> > > (our
> > > > index contains millions and millions and millions of documents),
> which
> > > > obviously cause us very important problems when sorting. In fact, we
> > > > disabled sorting completely because the servers were just exploding
> > when
> > > > trying to sort results in RAM. The users using the system can search
> > for
> > > > whatever they want, so we never know how many results will be
> returned
> > -
> > > a
> > > > search can return 10 documents (no problem with sorting) or
> 10,000,000
> > > > (huge
> > > > sorting problems).
> > > >
> > > > I woke up this morning and had a flash : is it possible with Lucene
> to
> > > have
> > > > a "natural sorting" of documents? For example, let's say I have 3
> > columns
> > > I
> > > > want to be able to sort by : first name, last name, email; I would
> have
> > 3
> > > > different indexes with the very same data but with a different
> primary
> > > key
> > > > for sorting. I know it's far fetched, and I have never seen anything
> > like
> > > > that since I use Lucene, but we're just desperate... how people do to
> > > have
> > > > huge data sets, a lot of users, and sort!?
> > > >
> > > > Thanks,
> > > >
> > > > Mike
> > > >
> > >
> >
>

--0015174c41304ec572048e0a0f52--

From java-user-return-47054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 17 19:41:43 2010
Return-Path: <java-user-return-47054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64282 invoked from network); 17 Aug 2010 19:41:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Aug 2010 19:41:43 -0000
Received: (qmail 89825 invoked by uid 500); 17 Aug 2010 19:41:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89671 invoked by uid 500); 17 Aug 2010 19:41:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89663 invoked by uid 99); 17 Aug 2010 19:41:40 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 19:41:40 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_FILL_THIS_FORM_SHORT,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 19:41:17 +0000
Received: by qyk2 with SMTP id 2so3547698qyk.14
        for <java-user@lucene.apache.org>; Tue, 17 Aug 2010 12:40:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=f766bof+pDPTIqsMDSOop8sKNM1yUfP+m7guveMVppc=;
        b=o4dNaU/MBbUZbZa09g6v5qxcVoBbifhwsMrUagAazEsnfDbn/Uutvqj+dxHqzj5evF
         E487xAk5ZgWNpkIHPZXw4orml60AEUX/sJ4oYbMfcLWrdoF+bQfSbDYCJdY3feA+Y0hz
         9QSISf3sXtpdVusdDwfbQ47J5nfHsQqF10hrI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=fQPtKbjz5lrEEADv6XpVysAbBtdCU3ieorpNVWFdqlvX7TPW1Xf0f3ouLzOkgASdCY
         C1VXTUT8JM/yxzeiOv/nNDEPEEyOKyhS7wg227SCFS5+Djc+qF5SO0dqva5sY+bxX8Jb
         xNEBXTnpbSDkgnLpxNraXmT9qMb21UgWnKNiM=
MIME-Version: 1.0
Received: by 10.229.251.210 with SMTP id mt18mr5210789qcb.151.1282074056680;
 Tue, 17 Aug 2010 12:40:56 -0700 (PDT)
Received: by 10.229.219.11 with HTTP; Tue, 17 Aug 2010 12:40:56 -0700 (PDT)
In-Reply-To: <AANLkTimj9xmwn8c5hUiq2E=W3j1vm-R9Jo4v_YKCBFqB@mail.gmail.com>
References: <AANLkTimHhWx4ZEzZCuQN5p4u=kbc-s20R4qfdyBLDf=p@mail.gmail.com>
	<AANLkTi=qUOSNBP=ZpvGd=SrXtdp6NabbMFPLJF2AwGrD@mail.gmail.com>
	<AANLkTi=zB3f1+PdUBkMY11yfWcaoX=vfgcKpgm_tvb3E@mail.gmail.com>
	<AANLkTinf56RGiYE3h5nFt4TYk_J-xan++AdoSRLJggJv@mail.gmail.com>
	<AANLkTimj9xmwn8c5hUiq2E=W3j1vm-R9Jo4v_YKCBFqB@mail.gmail.com>
Date: Tue, 17 Aug 2010 15:40:56 -0400
Message-ID: <AANLkTi=VJV+mPpkGW9ye5SoHX3NncgDREUeywY8jRyt4@mail.gmail.com>
Subject: Re: "Natural sorting" of documents in a Lucene index - possible?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163631036fb9672f048e0a20ee
X-Virus-Checked: Checked by ClamAV on apache.org

--00163631036fb9672f048e0a20ee
Content-Type: text/plain; charset=ISO-8859-1

Hmmm, I glossed over your comment about sorting the top 250. There's
no reason that wouldn't work.

Well, one way for, say, dates is to store separate fields. YYYY, MM, DD,
HH, MM, SS, MS. That gives you say, 100 year terms, + 12 month
+31 days + .... for a very small total. You pay the price though by
having to change your queries and sorts to respect all 6 fields...

But I'd only really go there after seeing if other options don't work.


Best
Erick

On Tue, Aug 17, 2010 at 3:35 PM, Michel Nadeau <akaris@gmail.com> wrote:

> Would our approach to limit the search top 250 documents (and then sort
> these 250 documents) work fine ? Or even 250 unique terms with a lot of
> users is bad on memory when sorting ?
>
> We didn't look at trie fields - I will do though, thanks for the tip !
>
> We do store the original 'Data' field (only the 'SearchableData' field is
> analyzed, all other fields are not analyzed), the users mainly sort on
> numeric values; not a lot on string values (in fact I could compltely drop
> the sort by string feature). We do pad our numbers with zeros though (for
> example: 10 becomes 00000010, etc.) because we had trouble with sorting
> (100
> was smaller than 2) ; is that considered as "string sorting" ? This might
> explain a part of the problem.
>
> Why/how would I reduce the count of unique terms?
>
>
> - Mike
> akaris@gmail.com
>
>
> On Tue, Aug 17, 2010 at 3:28 PM, Erick Erickson <erickerickson@gmail.com
> >wrote:
>
> > If you have tens of millions of documents, almost all with unique fields
> > that you're sorting on, you'll chew through memory like there's no
> > tomorrow.
> >
> > Have you looked at trie fields? See:
> >
> >
> http://www.lucidimagination.com/blog/2009/05/13/exploring-lucene-and-solrs-trierange-capabilities/
> >
> > I'm a little concerned that the user can sort on Data. Any field used for
> > sorting
> > should NOT be analyzed, so unless you are indexing "Data" unanalyzed,
> > that's
> > a problem. And if you are sorting on strings unique to each document,
> > that's
> > also a memory hog. Not to mention whether capitalization counts.
> >
> > You might enumerate the terms in your index for each of the sortable
> fields
> > to figure out what the total number of unique terms each is and use that
> as
> > a basis for reducing their count....
> >
> > HTH
> > Erick
> >
> > On Tue, Aug 17, 2010 at 3:05 PM, Michel Nadeau <akaris@gmail.com> wrote:
> >
> > > Hi Erick,
> > >
> > > Here's some more details about our structure. First here's an example
> of
> > > document in our index :
> > >
> > >     PrimaryKey        = SJAsfsf353JHGada66GH6 (it's a hash)
> > >     DocType           = X
> > >     Data              = This is the data
> > >     SearchableContent = This is the data
> > >     DateCreated       = <timestamp>
> > >     DateModified      = <timestamp>
> > >     Counter1          = 17
> > >     Counter2          = 3
> > >     Average           = 0.17
> > >     Cost              = 200
> > >
> > > The users are able to sort on almost all fields: Data, DateCreated,
> > > DateModified, Counter1, Counter2, Average, Cost.
> > >
> > > When we search, we always search on the 'SearchableContent' field and
> we
> > > have at least one filter on the DocType (because we have many document
> > > types
> > > in the same index). So a common search that would find the document
> above
> > > is
> > > "data *AND DocType:X*" (we automatically add the "*AND DocType:X*" part
> > > using Lucene Filters.
> > >
> > > I would say that the number of unique terms in the field being sorted
> on
> > is
> > > very big - for example timestamps, almost all unique, counters,
> average,
> > > cost, data... so if a query finds 10M results, it's almost 10M
> different
> > > values to sort. About cache and warm-up queries : we don't use warm-up
> > > queries -at all- because we have absolutely no idea of what users are
> > going
> > > to search for (they can search for absolutely anything). About
> "returning
> > > 10M" documents, right, we don't actually return the 10M documents, we
> use
> > > pagination to return documents X to Y of the 10M (and the 10M was only
> an
> > > example, it can be anywhere between 1K and 100M results). The
> pagination
> > > usually works fine and fast, our problem is really sorting.
> > >
> > > Our "Lucene Reader" process has 2GB of ram allowed, here's how I start
> it
> > -
> > >
> > >     java -Xmx2048m -jar LuceneReader.jar
> > >
> > > The problem really seems to be a ram problem, but I can't be 100% sure
> > (any
> > > help about how to be sure is welcome).
> > >
> > > Our current idea of a solution would be to get maximum 250 results (the
> > > more
> > > relevant ones; more results than that is totally useless in our system)
> > so
> > > the sort should work fine on a small data set like that, but we want to
> > > make
> > > sure we're doing everything right before doing that so we don't run in
> > the
> > > same problems again.
> > >
> > > Thank you very much; let me know if you need any more details!
> > >
> > > - Mike
> > > akaris@gmail.com
> > >
> > >
> > > On Mon, Aug 16, 2010 at 4:01 PM, Erick Erickson <
> erickerickson@gmail.com
> > > >wrote:
> > >
> > > > Let's back up a minute. The number of matched records is not
> > > > important when sorting, what's important is the number of unique
> > > > terms in the field being sorted. Do you have any figures on that? One
> > > > very common sorting issue is sorting on very fine date time
> > resolutions,
> > > > although your examples don't include that...
> > > >
> > > > Now, cache loading is an issue. The very first time you sort on a
> > field,
> > > > all the values are read into a cache. Is it possible this is the
> source
> > > > of your problems? You can cure this with warmup queries. The
> take-away
> > > > is that measuring the response time for the first sorted query is
> > > > very misleading.
> > > >
> > > > Although if you're sorting on many, many, many email addresses,
> > > > that could be "interesting".
> > > >
> > > > The comment "returning 10,000,000 documents" is, I hope, a
> > > > misstatement. If you're trying to *return* 10M docs sorting
> > > > is irrelevant compared to assembling that many documents. If
> > > > you're trying to return the first 100 of 10M documents, it should
> > > > work.
> > > >
> > > > Overall, we need more details on what you're sorting and what
> > > > you're trying to return as well as how you're measuring before
> > > > we can say much....
> > > >
> > > > Along with how much memory you're giving your JVM to work with,
> > > > what "exploding" means. Are you CPU bound? IO bound? Swapping?
> > > > You need to characterize what is going wrong before worrying about
> > > > solutions......
> > > >
> > > > Best
> > > > Erick
> > > >
> > > > On Mon, Aug 16, 2010 at 3:08 PM, Michel Nadeau <akaris@gmail.com>
> > wrote:
> > > >
> > > > > Hi,
> > > > >
> > > > > we are building an application using Lucene and we have HUGE data
> > sets
> > > > (our
> > > > > index contains millions and millions and millions of documents),
> > which
> > > > > obviously cause us very important problems when sorting. In fact,
> we
> > > > > disabled sorting completely because the servers were just exploding
> > > when
> > > > > trying to sort results in RAM. The users using the system can
> search
> > > for
> > > > > whatever they want, so we never know how many results will be
> > returned
> > > -
> > > > a
> > > > > search can return 10 documents (no problem with sorting) or
> > 10,000,000
> > > > > (huge
> > > > > sorting problems).
> > > > >
> > > > > I woke up this morning and had a flash : is it possible with Lucene
> > to
> > > > have
> > > > > a "natural sorting" of documents? For example, let's say I have 3
> > > columns
> > > > I
> > > > > want to be able to sort by : first name, last name, email; I would
> > have
> > > 3
> > > > > different indexes with the very same data but with a different
> > primary
> > > > key
> > > > > for sorting. I know it's far fetched, and I have never seen
> anything
> > > like
> > > > > that since I use Lucene, but we're just desperate... how people do
> to
> > > > have
> > > > > huge data sets, a lot of users, and sort!?
> > > > >
> > > > > Thanks,
> > > > >
> > > > > Mike
> > > > >
> > > >
> > >
> >
>

--00163631036fb9672f048e0a20ee--

From java-user-return-47055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 17 19:47:36 2010
Return-Path: <java-user-return-47055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65461 invoked from network); 17 Aug 2010 19:47:35 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Aug 2010 19:47:35 -0000
Received: (qmail 572 invoked by uid 500); 17 Aug 2010 19:47:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 407 invoked by uid 500); 17 Aug 2010 19:47:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 399 invoked by uid 99); 17 Aug 2010 19:47:33 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 19:47:33 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,SPF_PASS,T_FILL_THIS_FORM_SHORT,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of akaris@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 19:47:10 +0000
Received: by eydd26 with SMTP id d26so3074634eyd.35
        for <java-user@lucene.apache.org>; Tue, 17 Aug 2010 12:46:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=alxKTP/wqFPv4As7Ff6hjpNw8mQnvD8XVxjkxiT7Qh0=;
        b=mbIxnQTNeT3cYbWw/w+olAUr2FGlJJSH1SV8R3Nd4DEAmGxHVyLTBsZfW6jeEM+pfl
         GIMtTBa1KNYlz7AVq2/hshTxGXkrRhaMF9xSNiqiH07/kCt0wEk6qQzTNV8A9VK+xULi
         9Sz23uEIQpSNYTUILydjkqLD3YOVD28zKYtTU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=e+6CdZQb6SPF0MMGyhAJrP4FYzMJgW2dkWN8nzXWdxAJk9Id58kw+tPwas/m8krGLE
         w5ISx5CpWdvo/8yi3hCM4Dr9HoXJyrnOjtZX7ryKRIQa1IffqvR5CYkMVtSgi9ziEb9h
         lREQ/T6GKwMAx+ip0vLzGmBgv2ifYjq1pezfg=
Received: by 10.213.40.75 with SMTP id j11mr1173000ebe.28.1282074409948; Tue,
 17 Aug 2010 12:46:49 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.14.10.153 with HTTP; Tue, 17 Aug 2010 12:46:28 -0700 (PDT)
In-Reply-To: <AANLkTi=VJV+mPpkGW9ye5SoHX3NncgDREUeywY8jRyt4@mail.gmail.com>
References: <AANLkTimHhWx4ZEzZCuQN5p4u=kbc-s20R4qfdyBLDf=p@mail.gmail.com>
 <AANLkTi=qUOSNBP=ZpvGd=SrXtdp6NabbMFPLJF2AwGrD@mail.gmail.com>
 <AANLkTi=zB3f1+PdUBkMY11yfWcaoX=vfgcKpgm_tvb3E@mail.gmail.com>
 <AANLkTinf56RGiYE3h5nFt4TYk_J-xan++AdoSRLJggJv@mail.gmail.com>
 <AANLkTimj9xmwn8c5hUiq2E=W3j1vm-R9Jo4v_YKCBFqB@mail.gmail.com> <AANLkTi=VJV+mPpkGW9ye5SoHX3NncgDREUeywY8jRyt4@mail.gmail.com>
From: Michel Nadeau <akaris@gmail.com>
Date: Tue, 17 Aug 2010 15:46:28 -0400
Message-ID: <AANLkTi=HRhzrhaBGF4anxZXghjiE9jxuOn92boiJr+if@mail.gmail.com>
Subject: Re: "Natural sorting" of documents in a Lucene index - possible?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00148531a87bc7e2b3048e0a3517
X-Virus-Checked: Checked by ClamAV on apache.org

--00148531a87bc7e2b3048e0a3517
Content-Type: text/plain; charset=ISO-8859-1

I could at least drop hours/mins/sec, we don't need them, so my timestamp
could become 'YYYYMMDD', that would cut the number of unique terms at least
for dates.

What about my other question about numbers : *" We do pad our numbers with
zeros though (for example: 10 becomes 00000010, etc.) because we had trouble
with sorting (100 was smaller than 2) ; is that considered as "string
sorting" ? This might explain a part of the problem."* ? Thanks.

- Mike
akaris@gmail.com


On Tue, Aug 17, 2010 at 3:40 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> Hmmm, I glossed over your comment about sorting the top 250. There's
> no reason that wouldn't work.
>
> Well, one way for, say, dates is to store separate fields. YYYY, MM, DD,
> HH, MM, SS, MS. That gives you say, 100 year terms, + 12 month
> +31 days + .... for a very small total. You pay the price though by
> having to change your queries and sorts to respect all 6 fields...
>
> But I'd only really go there after seeing if other options don't work.
>
>
> Best
> Erick
>
> On Tue, Aug 17, 2010 at 3:35 PM, Michel Nadeau <akaris@gmail.com> wrote:
>
> > Would our approach to limit the search top 250 documents (and then sort
> > these 250 documents) work fine ? Or even 250 unique terms with a lot of
> > users is bad on memory when sorting ?
> >
> > We didn't look at trie fields - I will do though, thanks for the tip !
> >
> > We do store the original 'Data' field (only the 'SearchableData' field is
> > analyzed, all other fields are not analyzed), the users mainly sort on
> > numeric values; not a lot on string values (in fact I could compltely
> drop
> > the sort by string feature). We do pad our numbers with zeros though (for
> > example: 10 becomes 00000010, etc.) because we had trouble with sorting
> > (100
> > was smaller than 2) ; is that considered as "string sorting" ? This might
> > explain a part of the problem.
> >
> > Why/how would I reduce the count of unique terms?
> >
> >
> > - Mike
> > akaris@gmail.com
> >
> >
> > On Tue, Aug 17, 2010 at 3:28 PM, Erick Erickson <erickerickson@gmail.com
> > >wrote:
> >
> > > If you have tens of millions of documents, almost all with unique
> fields
> > > that you're sorting on, you'll chew through memory like there's no
> > > tomorrow.
> > >
> > > Have you looked at trie fields? See:
> > >
> > >
> >
> http://www.lucidimagination.com/blog/2009/05/13/exploring-lucene-and-solrs-trierange-capabilities/
> > >
> > > I'm a little concerned that the user can sort on Data. Any field used
> for
> > > sorting
> > > should NOT be analyzed, so unless you are indexing "Data" unanalyzed,
> > > that's
> > > a problem. And if you are sorting on strings unique to each document,
> > > that's
> > > also a memory hog. Not to mention whether capitalization counts.
> > >
> > > You might enumerate the terms in your index for each of the sortable
> > fields
> > > to figure out what the total number of unique terms each is and use
> that
> > as
> > > a basis for reducing their count....
> > >
> > > HTH
> > > Erick
> > >
> > > On Tue, Aug 17, 2010 at 3:05 PM, Michel Nadeau <akaris@gmail.com>
> wrote:
> > >
> > > > Hi Erick,
> > > >
> > > > Here's some more details about our structure. First here's an example
> > of
> > > > document in our index :
> > > >
> > > >     PrimaryKey        = SJAsfsf353JHGada66GH6 (it's a hash)
> > > >     DocType           = X
> > > >     Data              = This is the data
> > > >     SearchableContent = This is the data
> > > >     DateCreated       = <timestamp>
> > > >     DateModified      = <timestamp>
> > > >     Counter1          = 17
> > > >     Counter2          = 3
> > > >     Average           = 0.17
> > > >     Cost              = 200
> > > >
> > > > The users are able to sort on almost all fields: Data, DateCreated,
> > > > DateModified, Counter1, Counter2, Average, Cost.
> > > >
> > > > When we search, we always search on the 'SearchableContent' field and
> > we
> > > > have at least one filter on the DocType (because we have many
> document
> > > > types
> > > > in the same index). So a common search that would find the document
> > above
> > > > is
> > > > "data *AND DocType:X*" (we automatically add the "*AND DocType:X*"
> part
> > > > using Lucene Filters.
> > > >
> > > > I would say that the number of unique terms in the field being sorted
> > on
> > > is
> > > > very big - for example timestamps, almost all unique, counters,
> > average,
> > > > cost, data... so if a query finds 10M results, it's almost 10M
> > different
> > > > values to sort. About cache and warm-up queries : we don't use
> warm-up
> > > > queries -at all- because we have absolutely no idea of what users are
> > > going
> > > > to search for (they can search for absolutely anything). About
> > "returning
> > > > 10M" documents, right, we don't actually return the 10M documents, we
> > use
> > > > pagination to return documents X to Y of the 10M (and the 10M was
> only
> > an
> > > > example, it can be anywhere between 1K and 100M results). The
> > pagination
> > > > usually works fine and fast, our problem is really sorting.
> > > >
> > > > Our "Lucene Reader" process has 2GB of ram allowed, here's how I
> start
> > it
> > > -
> > > >
> > > >     java -Xmx2048m -jar LuceneReader.jar
> > > >
> > > > The problem really seems to be a ram problem, but I can't be 100%
> sure
> > > (any
> > > > help about how to be sure is welcome).
> > > >
> > > > Our current idea of a solution would be to get maximum 250 results
> (the
> > > > more
> > > > relevant ones; more results than that is totally useless in our
> system)
> > > so
> > > > the sort should work fine on a small data set like that, but we want
> to
> > > > make
> > > > sure we're doing everything right before doing that so we don't run
> in
> > > the
> > > > same problems again.
> > > >
> > > > Thank you very much; let me know if you need any more details!
> > > >
> > > > - Mike
> > > > akaris@gmail.com
> > > >
> > > >
> > > > On Mon, Aug 16, 2010 at 4:01 PM, Erick Erickson <
> > erickerickson@gmail.com
> > > > >wrote:
> > > >
> > > > > Let's back up a minute. The number of matched records is not
> > > > > important when sorting, what's important is the number of unique
> > > > > terms in the field being sorted. Do you have any figures on that?
> One
> > > > > very common sorting issue is sorting on very fine date time
> > > resolutions,
> > > > > although your examples don't include that...
> > > > >
> > > > > Now, cache loading is an issue. The very first time you sort on a
> > > field,
> > > > > all the values are read into a cache. Is it possible this is the
> > source
> > > > > of your problems? You can cure this with warmup queries. The
> > take-away
> > > > > is that measuring the response time for the first sorted query is
> > > > > very misleading.
> > > > >
> > > > > Although if you're sorting on many, many, many email addresses,
> > > > > that could be "interesting".
> > > > >
> > > > > The comment "returning 10,000,000 documents" is, I hope, a
> > > > > misstatement. If you're trying to *return* 10M docs sorting
> > > > > is irrelevant compared to assembling that many documents. If
> > > > > you're trying to return the first 100 of 10M documents, it should
> > > > > work.
> > > > >
> > > > > Overall, we need more details on what you're sorting and what
> > > > > you're trying to return as well as how you're measuring before
> > > > > we can say much....
> > > > >
> > > > > Along with how much memory you're giving your JVM to work with,
> > > > > what "exploding" means. Are you CPU bound? IO bound? Swapping?
> > > > > You need to characterize what is going wrong before worrying about
> > > > > solutions......
> > > > >
> > > > > Best
> > > > > Erick
> > > > >
> > > > > On Mon, Aug 16, 2010 at 3:08 PM, Michel Nadeau <akaris@gmail.com>
> > > wrote:
> > > > >
> > > > > > Hi,
> > > > > >
> > > > > > we are building an application using Lucene and we have HUGE data
> > > sets
> > > > > (our
> > > > > > index contains millions and millions and millions of documents),
> > > which
> > > > > > obviously cause us very important problems when sorting. In fact,
> > we
> > > > > > disabled sorting completely because the servers were just
> exploding
> > > > when
> > > > > > trying to sort results in RAM. The users using the system can
> > search
> > > > for
> > > > > > whatever they want, so we never know how many results will be
> > > returned
> > > > -
> > > > > a
> > > > > > search can return 10 documents (no problem with sorting) or
> > > 10,000,000
> > > > > > (huge
> > > > > > sorting problems).
> > > > > >
> > > > > > I woke up this morning and had a flash : is it possible with
> Lucene
> > > to
> > > > > have
> > > > > > a "natural sorting" of documents? For example, let's say I have 3
> > > > columns
> > > > > I
> > > > > > want to be able to sort by : first name, last name, email; I
> would
> > > have
> > > > 3
> > > > > > different indexes with the very same data but with a different
> > > primary
> > > > > key
> > > > > > for sorting. I know it's far fetched, and I have never seen
> > anything
> > > > like
> > > > > > that since I use Lucene, but we're just desperate... how people
> do
> > to
> > > > > have
> > > > > > huge data sets, a lot of users, and sort!?
> > > > > >
> > > > > > Thanks,
> > > > > >
> > > > > > Mike
> > > > > >
> > > > >
> > > >
> > >
> >
>

--00148531a87bc7e2b3048e0a3517--

From java-user-return-47056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 17 20:09:52 2010
Return-Path: <java-user-return-47056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76325 invoked from network); 17 Aug 2010 20:09:52 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Aug 2010 20:09:52 -0000
Received: (qmail 31493 invoked by uid 500); 17 Aug 2010 20:09:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31426 invoked by uid 500); 17 Aug 2010 20:09:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31418 invoked by uid 99); 17 Aug 2010 20:09:49 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 20:09:49 +0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,RCVD_IN_DNSWL_NONE,SPF_PASS,T_FILL_THIS_FORM_SHORT,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 20:09:27 +0000
Received: by qwk3 with SMTP id 3so6617945qwk.35
        for <java-user@lucene.apache.org>; Tue, 17 Aug 2010 13:09:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=4m0b/t1HkuG6URYu6YiPcz1TKFUzqh4d8Rmuf7TQz6Q=;
        b=cvGnSVkS3bWOjJ4whU0pFuLUo0jhpjpW0zB5cP9Y4gnKQv3Eaj+jZCnrJEmivWXSd5
         y4wQJblCfsClGw3/9pzNoH+9cJ8SJ8OSMZen3ajoa7InH5j9wOvY6jABePyQ97/MSIdV
         lySuqiFRwN3xrot+aLR8z4kjGSCA91MrbXu3w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=flcxo1pgPKmNTVusrlPnwPY2zaImOn5Q6u5zpS0yn3AlftOAgD1z2vMiKnWldzCtIo
         L4AtAgNVm47OMRXwyCGhzvyhdXHl4ahP6SfJZi9mg7vF7xyoX06DNqwYjrByvF2zysBj
         F9uh4X+cUycNiTyKo/0s5QUdTyhI1OSQiGZpE=
Received: by 10.229.218.69 with SMTP id hp5mr5247503qcb.18.1282075746165; Tue,
 17 Aug 2010 13:09:06 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.96.200 with HTTP; Tue, 17 Aug 2010 13:08:46 -0700 (PDT)
In-Reply-To: <AANLkTi=HRhzrhaBGF4anxZXghjiE9jxuOn92boiJr+if@mail.gmail.com>
References: <AANLkTimHhWx4ZEzZCuQN5p4u=kbc-s20R4qfdyBLDf=p@mail.gmail.com>
 <AANLkTi=qUOSNBP=ZpvGd=SrXtdp6NabbMFPLJF2AwGrD@mail.gmail.com>
 <AANLkTi=zB3f1+PdUBkMY11yfWcaoX=vfgcKpgm_tvb3E@mail.gmail.com>
 <AANLkTinf56RGiYE3h5nFt4TYk_J-xan++AdoSRLJggJv@mail.gmail.com>
 <AANLkTimj9xmwn8c5hUiq2E=W3j1vm-R9Jo4v_YKCBFqB@mail.gmail.com>
 <AANLkTi=VJV+mPpkGW9ye5SoHX3NncgDREUeywY8jRyt4@mail.gmail.com> <AANLkTi=HRhzrhaBGF4anxZXghjiE9jxuOn92boiJr+if@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 17 Aug 2010 21:08:46 +0100
Message-ID: <AANLkTikG_7Jh-LfuavzxQ928TJjru8Ds_jwKCHdbi2hH@mail.gmail.com>
Subject: Re: "Natural sorting" of documents in a Lucene index - possible?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Using NumericField for dates and other numbers is likely to help a
lot, and removes padding problems.  I'd try that first, or just sort
the top n hits yourself.


--
Ian.


On Tue, Aug 17, 2010 at 8:46 PM, Michel Nadeau <akaris@gmail.com> wrote:
> I could at least drop hours/mins/sec, we don't need them, so my timestamp
> could become 'YYYYMMDD', that would cut the number of unique terms at lea=
st
> for dates.
>
> What about my other question about numbers : *" We do pad our numbers wit=
h
> zeros though (for example: 10 becomes 00000010, etc.) because we had trou=
ble
> with sorting (100 was smaller than 2) ; is that considered as "string
> sorting" ? This might explain a part of the problem."* ? Thanks.
>
> - Mike
> akaris@gmail.com
>
>
> On Tue, Aug 17, 2010 at 3:40 PM, Erick Erickson <erickerickson@gmail.com>=
wrote:
>
>> Hmmm, I glossed over your comment about sorting the top 250. There's
>> no reason that wouldn't work.
>>
>> Well, one way for, say, dates is to store separate fields. YYYY, MM, DD,
>> HH, MM, SS, MS. That gives you say, 100 year terms, + 12 month
>> +31 days + .... for a very small total. You pay the price though by
>> having to change your queries and sorts to respect all 6 fields...
>>
>> But I'd only really go there after seeing if other options don't work.
>>
>>
>> Best
>> Erick
>>
>> On Tue, Aug 17, 2010 at 3:35 PM, Michel Nadeau <akaris@gmail.com> wrote:
>>
>> > Would our approach to limit the search top 250 documents (and then sor=
t
>> > these 250 documents) work fine ? Or even 250 unique terms with a lot o=
f
>> > users is bad on memory when sorting ?
>> >
>> > We didn't look at trie fields - I will do though, thanks for the tip !
>> >
>> > We do store the original 'Data' field (only the 'SearchableData' field=
 is
>> > analyzed, all other fields are not analyzed), the users mainly sort on
>> > numeric values; not a lot on string values (in fact I could compltely
>> drop
>> > the sort by string feature). We do pad our numbers with zeros though (=
for
>> > example: 10 becomes 00000010, etc.) because we had trouble with sortin=
g
>> > (100
>> > was smaller than 2) ; is that considered as "string sorting" ? This mi=
ght
>> > explain a part of the problem.
>> >
>> > Why/how would I reduce the count of unique terms?
>> >
>> >
>> > - Mike
>> > akaris@gmail.com
>> >
>> >
>> > On Tue, Aug 17, 2010 at 3:28 PM, Erick Erickson <erickerickson@gmail.c=
om
>> > >wrote:
>> >
>> > > If you have tens of millions of documents, almost all with unique
>> fields
>> > > that you're sorting on, you'll chew through memory like there's no
>> > > tomorrow.
>> > >
>> > > Have you looked at trie fields? See:
>> > >
>> > >
>> >
>> http://www.lucidimagination.com/blog/2009/05/13/exploring-lucene-and-sol=
rs-trierange-capabilities/
>> > >
>> > > I'm a little concerned that the user can sort on Data. Any field use=
d
>> for
>> > > sorting
>> > > should NOT be analyzed, so unless you are indexing "Data" unanalyzed=
,
>> > > that's
>> > > a problem. And if you are sorting on strings unique to each document=
,
>> > > that's
>> > > also a memory hog. Not to mention whether capitalization counts.
>> > >
>> > > You might enumerate the terms in your index for each of the sortable
>> > fields
>> > > to figure out what the total number of unique terms each is and use
>> that
>> > as
>> > > a basis for reducing their count....
>> > >
>> > > HTH
>> > > Erick
>> > >
>> > > On Tue, Aug 17, 2010 at 3:05 PM, Michel Nadeau <akaris@gmail.com>
>> wrote:
>> > >
>> > > > Hi Erick,
>> > > >
>> > > > Here's some more details about our structure. First here's an exam=
ple
>> > of
>> > > > document in our index :
>> > > >
>> > > > =A0 =A0 PrimaryKey =A0 =A0 =A0 =A0=3D SJAsfsf353JHGada66GH6 (it's =
a hash)
>> > > > =A0 =A0 DocType =A0 =A0 =A0 =A0 =A0 =3D X
>> > > > =A0 =A0 Data =A0 =A0 =A0 =A0 =A0 =A0 =A0=3D This is the data
>> > > > =A0 =A0 SearchableContent =3D This is the data
>> > > > =A0 =A0 DateCreated =A0 =A0 =A0 =3D <timestamp>
>> > > > =A0 =A0 DateModified =A0 =A0 =A0=3D <timestamp>
>> > > > =A0 =A0 Counter1 =A0 =A0 =A0 =A0 =A0=3D 17
>> > > > =A0 =A0 Counter2 =A0 =A0 =A0 =A0 =A0=3D 3
>> > > > =A0 =A0 Average =A0 =A0 =A0 =A0 =A0 =3D 0.17
>> > > > =A0 =A0 Cost =A0 =A0 =A0 =A0 =A0 =A0 =A0=3D 200
>> > > >
>> > > > The users are able to sort on almost all fields: Data, DateCreated=
,
>> > > > DateModified, Counter1, Counter2, Average, Cost.
>> > > >
>> > > > When we search, we always search on the 'SearchableContent' field =
and
>> > we
>> > > > have at least one filter on the DocType (because we have many
>> document
>> > > > types
>> > > > in the same index). So a common search that would find the documen=
t
>> > above
>> > > > is
>> > > > "data *AND DocType:X*" (we automatically add the "*AND DocType:X*"
>> part
>> > > > using Lucene Filters.
>> > > >
>> > > > I would say that the number of unique terms in the field being sor=
ted
>> > on
>> > > is
>> > > > very big - for example timestamps, almost all unique, counters,
>> > average,
>> > > > cost, data... so if a query finds 10M results, it's almost 10M
>> > different
>> > > > values to sort. About cache and warm-up queries : we don't use
>> warm-up
>> > > > queries -at all- because we have absolutely no idea of what users =
are
>> > > going
>> > > > to search for (they can search for absolutely anything). About
>> > "returning
>> > > > 10M" documents, right, we don't actually return the 10M documents,=
 we
>> > use
>> > > > pagination to return documents X to Y of the 10M (and the 10M was
>> only
>> > an
>> > > > example, it can be anywhere between 1K and 100M results). The
>> > pagination
>> > > > usually works fine and fast, our problem is really sorting.
>> > > >
>> > > > Our "Lucene Reader" process has 2GB of ram allowed, here's how I
>> start
>> > it
>> > > -
>> > > >
>> > > > =A0 =A0 java -Xmx2048m -jar LuceneReader.jar
>> > > >
>> > > > The problem really seems to be a ram problem, but I can't be 100%
>> sure
>> > > (any
>> > > > help about how to be sure is welcome).
>> > > >
>> > > > Our current idea of a solution would be to get maximum 250 results
>> (the
>> > > > more
>> > > > relevant ones; more results than that is totally useless in our
>> system)
>> > > so
>> > > > the sort should work fine on a small data set like that, but we wa=
nt
>> to
>> > > > make
>> > > > sure we're doing everything right before doing that so we don't ru=
n
>> in
>> > > the
>> > > > same problems again.
>> > > >
>> > > > Thank you very much; let me know if you need any more details!
>> > > >
>> > > > - Mike
>> > > > akaris@gmail.com
>> > > >
>> > > >
>> > > > On Mon, Aug 16, 2010 at 4:01 PM, Erick Erickson <
>> > erickerickson@gmail.com
>> > > > >wrote:
>> > > >
>> > > > > Let's back up a minute. The number of matched records is not
>> > > > > important when sorting, what's important is the number of unique
>> > > > > terms in the field being sorted. Do you have any figures on that=
?
>> One
>> > > > > very common sorting issue is sorting on very fine date time
>> > > resolutions,
>> > > > > although your examples don't include that...
>> > > > >
>> > > > > Now, cache loading is an issue. The very first time you sort on =
a
>> > > field,
>> > > > > all the values are read into a cache. Is it possible this is the
>> > source
>> > > > > of your problems? You can cure this with warmup queries. The
>> > take-away
>> > > > > is that measuring the response time for the first sorted query i=
s
>> > > > > very misleading.
>> > > > >
>> > > > > Although if you're sorting on many, many, many email addresses,
>> > > > > that could be "interesting".
>> > > > >
>> > > > > The comment "returning 10,000,000 documents" is, I hope, a
>> > > > > misstatement. If you're trying to *return* 10M docs sorting
>> > > > > is irrelevant compared to assembling that many documents. If
>> > > > > you're trying to return the first 100 of 10M documents, it shoul=
d
>> > > > > work.
>> > > > >
>> > > > > Overall, we need more details on what you're sorting and what
>> > > > > you're trying to return as well as how you're measuring before
>> > > > > we can say much....
>> > > > >
>> > > > > Along with how much memory you're giving your JVM to work with,
>> > > > > what "exploding" means. Are you CPU bound? IO bound? Swapping?
>> > > > > You need to characterize what is going wrong before worrying abo=
ut
>> > > > > solutions......
>> > > > >
>> > > > > Best
>> > > > > Erick
>> > > > >
>> > > > > On Mon, Aug 16, 2010 at 3:08 PM, Michel Nadeau <akaris@gmail.com=
>
>> > > wrote:
>> > > > >
>> > > > > > Hi,
>> > > > > >
>> > > > > > we are building an application using Lucene and we have HUGE d=
ata
>> > > sets
>> > > > > (our
>> > > > > > index contains millions and millions and millions of documents=
),
>> > > which
>> > > > > > obviously cause us very important problems when sorting. In fa=
ct,
>> > we
>> > > > > > disabled sorting completely because the servers were just
>> exploding
>> > > > when
>> > > > > > trying to sort results in RAM. The users using the system can
>> > search
>> > > > for
>> > > > > > whatever they want, so we never know how many results will be
>> > > returned
>> > > > -
>> > > > > a
>> > > > > > search can return 10 documents (no problem with sorting) or
>> > > 10,000,000
>> > > > > > (huge
>> > > > > > sorting problems).
>> > > > > >
>> > > > > > I woke up this morning and had a flash : is it possible with
>> Lucene
>> > > to
>> > > > > have
>> > > > > > a "natural sorting" of documents? For example, let's say I hav=
e 3
>> > > > columns
>> > > > > I
>> > > > > > want to be able to sort by : first name, last name, email; I
>> would
>> > > have
>> > > > 3
>> > > > > > different indexes with the very same data but with a different
>> > > primary
>> > > > > key
>> > > > > > for sorting. I know it's far fetched, and I have never seen
>> > anything
>> > > > like
>> > > > > > that since I use Lucene, but we're just desperate... how peopl=
e
>> do
>> > to
>> > > > > have
>> > > > > > huge data sets, a lot of users, and sort!?
>> > > > > >
>> > > > > > Thanks,
>> > > > > >
>> > > > > > Mike
>> > > > > >
>> > > > >
>> > > >
>> > >
>> >
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 17 23:45:28 2010
Return-Path: <java-user-return-47057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72417 invoked from network); 17 Aug 2010 23:45:27 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Aug 2010 23:45:27 -0000
Received: (qmail 18537 invoked by uid 500); 17 Aug 2010 23:45:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18450 invoked by uid 500); 17 Aug 2010 23:45:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18442 invoked by uid 99); 17 Aug 2010 23:45:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 23:45:24 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of arunrangarajan@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Aug 2010 23:45:18 +0000
Received: by wwb17 with SMTP id 17so929700wwb.5
        for <java-user@lucene.apache.org>; Tue, 17 Aug 2010 16:44:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type;
        bh=M+s4fheMM1YpUwyuMQhp8Yk67OMnR7IFnTazRl5IOKs=;
        b=DMBC9AgIuiVfF7oEAhw9JX4gHsi/cQSLZGSD1gEApGQbNXnwG8DrMUYxMeNt7KOf++
         0Cl/tjTwKo9XZXPuKmM7Rbsu+AUCBQL7AGNcl5OV382M+1EumRNE2QO0rSaVsgkrCF8r
         LX46rgyNw6NrBuaGe4S6a8IrE8/7d3vDS5I+M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=EV9u87d4b4mzuckTKlP5aXuqlk6LrqsR0hW1xW2FY5mNms5ERaqbN/9zVhCKW80Lrd
         dKgSGWBes5W7U4qvkiEz1vehb08tH/7qT7vYKbq+GEk/XffF+pv/a9st0HmnZew/4nGx
         7v7/d5X1bWMZ894WU7o7vHWPnc/EBiky6qedA=
Received: by 10.227.132.199 with SMTP id c7mr6393190wbt.89.1282088697309; Tue,
 17 Aug 2010 16:44:57 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.44.4 with HTTP; Tue, 17 Aug 2010 16:44:36 -0700 (PDT)
From: Arun Rangarajan <arunrangarajan@gmail.com>
Date: Tue, 17 Aug 2010 16:44:36 -0700
Message-ID: <AANLkTinHR+d9D_i_xuy8poSF8WQskpBbsFzTHhHMV6-f@mail.gmail.com>
Subject: Solr SynonymFilter in Lucene analyzer
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f6c88a5faf77048e0d89f0

--001485f6c88a5faf77048e0d89f0
Content-Type: text/plain; charset=ISO-8859-1

I am trying to have multi-word synonyms work in lucene using Solr's *
SynonymFilter*.

I need to match synonyms at index time, since many of the synonym lists are
huge. Actually they are really not synonyms, but are words that belong to a
concept. For example, I would like to map {"New York", "Los Angeles", "New
Orleans", "Salt Lake City"...}, a bunch of city names, to the concept called
"city". While searching, the user query for the concept "city" will be
translated to a keyword like, say "CONCEPTcity", which is the synonym for
any city name.

Using lucene's SynonymAnalyzer, as explained in Lucene in Action (p. 131),
all I could match for "CONCEPTcity" is single word city names like
"Chicago", "Seattle", "Boston", etc., It would not match multi-word city
names like "New York", "Los Angeles", etc.,

I tried using Solr's SynonymFilter in tokenStream method in a custom
Analyzer (that extends org.apache.lucene.analysis.
Analyzer - lucene ver. 2.9.3) using:

*    public TokenStream tokenStream(String fieldName, Reader reader) {
        TokenStream result = new SynonymFilter(
                new WhitespaceTokenizer(reader),
                synonymMap);
        return result;
    }
*
where *synonymMap* is loaded with synonyms using

*synonymMap.add(conceptTerms, listOfTokens, true, true);*

where *conceptTerms* is of type *ArrayList<String>* of all the terms in a
concept and *listofTokens* is of type *List<Token>  *and contains only the
generic synonym identifier like *CONCEPTcity*.

When I print synonymMap using synonymMap.toString(), I get the output like

<{New York=<{Chicago=<{Seattle=<{New
Orleans=....<[(CATEGORYcity,0,0,type=SYNONYM),ORIG],null>}>}>}>....}>

so it looks like all the synonyms are loaded. But if I search for
"CATEGORYcity" then it says no matches found. I am not sure whether I have
loaded the synonyms correctly in the synonymMap.

Any help will be deeply appreciated. Thanks!

--001485f6c88a5faf77048e0d89f0--

From java-user-return-47058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 18 11:43:00 2010
Return-Path: <java-user-return-47058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46910 invoked from network); 18 Aug 2010 11:42:59 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 Aug 2010 11:42:59 -0000
Received: (qmail 57462 invoked by uid 500); 18 Aug 2010 11:42:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57046 invoked by uid 500); 18 Aug 2010 11:42:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57036 invoked by uid 99); 18 Aug 2010 11:42:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Aug 2010 11:42:52 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [122.98.10.31] (HELO KECGATE03.infosys.com) (122.98.10.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Aug 2010 11:42:47 +0000
X-TM-IMSS-Message-ID:<fd7fea9d0014300d@KECGATE03.infosys.com>
Received: from blrkechub04.ad.infosys.com ([10.66.236.44]) by KECGATE03.infosys.com ([122.98.10.31]) with ESMTP (TREND IMSS SMTP Service 7.0) id fd7fea9d0014300d ; Wed, 18 Aug 2010 17:04:16 +0530
Received: from PUNITPHCS01.ad.infosys.com (10.76.151.41) by
 blrkechub04.ad.infosys.com (10.66.236.44) with Microsoft SMTP Server (TLS) id
 8.2.176.0; Wed, 18 Aug 2010 17:12:24 +0530
Received: from PUNITPMBX02.ad.infosys.com ([10.76.151.22]) by
 PUNITPHCS01.ad.infosys.com ([10.76.151.41]) with mapi; Wed, 18 Aug 2010
 17:12:22 +0530
From: Shelly_Singh <Shelly_Singh@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 18 Aug 2010 17:12:20 +0530
Subject: Sorting a Lucene index
Thread-Topic: Sorting a Lucene index
Thread-Index: Acs+ymrWOXU1fPjBSVSBcY74QT3NPQ==
Message-ID: <AA27F54EFDA0CE43B33EBDB7796323740CA26DAB52@PUNITPMBX02.ad.infosys.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_AA27F54EFDA0CE43B33EBDB7796323740CA26DAB52PUNITPMBX02ad_"
MIME-Version: 1.0

--_000_AA27F54EFDA0CE43B33EBDB7796323740CA26DAB52PUNITPMBX02ad_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

I have a Lucene index that contains a numeric field along with certain othe=
r fields. The order of incoming documents is random and un-predictable. As =
a result, while creating an index, I end up adding docs in random order wit=
h respect to the numeric field value.

For example, documents may be added in following order:
12,y,d
100,o,p
1,x,y
23,u,i
31,v,m
22,b,m
109,k,l

My requirement is that at search time, I want the documents in order of the=
 numeric field.
One, option is to do a score/sort on the numeric field.
But, this may be a costly operation.

Hence, I am trying to find if there is some way, such that, my stored index=
 is sorted by itself.

Please help.

Thanks and Regards,

Shelly Singh
Center For KNowledge Driven Information Systems, Infosys
Email: shelly_singh@infosys.com<mailto:shelly_singh@infosys.com>
Phone: (M) 91 992 369 7200, (VoIP)2022978622




--_000_AA27F54EFDA0CE43B33EBDB7796323740CA26DAB52PUNITPMBX02ad_--

From java-user-return-47059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 18 11:47:42 2010
Return-Path: <java-user-return-47059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48499 invoked from network); 18 Aug 2010 11:47:42 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 Aug 2010 11:47:42 -0000
Received: (qmail 63548 invoked by uid 500); 18 Aug 2010 11:47:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63241 invoked by uid 500); 18 Aug 2010 11:47:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63233 invoked by uid 99); 18 Aug 2010 11:47:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Aug 2010 11:47:36 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [122.98.14.33] (HELO kecgate06.infosys.com) (122.98.14.33)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Aug 2010 11:47:32 +0000
X-TM-IMSS-Message-ID:<fcfb1388000b7f54@kecgate06.infosys.com>
Received: from blrkechub01.ad.infosys.com ([10.66.236.41]) by kecgate06.infosys.com ([122.98.14.33]) with ESMTP (TREND IMSS SMTP Service 7.0) id fcfb1388000b7f54 ; Wed, 18 Aug 2010 17:18:12 +0530
Received: from PUNITPCAS02.ad.infosys.com (10.76.151.52) by
 blrkechub01.ad.infosys.com (10.66.236.41) with Microsoft SMTP Server (TLS) id
 8.2.176.0; Wed, 18 Aug 2010 17:17:07 +0530
Received: from PUNITPMBX02.ad.infosys.com ([10.76.151.22]) by
 PUNITPCAS02.ad.infosys.com ([10.76.151.52]) with mapi; Wed, 18 Aug 2010
 17:17:07 +0530
From: Shelly_Singh <Shelly_Singh@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 18 Aug 2010 17:17:05 +0530
Subject: TermQuery and ConstantScoreQuery on TermsFilter
Thread-Topic: TermQuery and ConstantScoreQuery on TermsFilter
Thread-Index: Acs+yxSRbIlQY/XcQneU3Wr7tfoAzQ==
Message-ID: <AA27F54EFDA0CE43B33EBDB7796323740CA26DAB59@PUNITPMBX02.ad.infosys.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_AA27F54EFDA0CE43B33EBDB7796323740CA26DAB59PUNITPMBX02ad_"
MIME-Version: 1.0

--_000_AA27F54EFDA0CE43B33EBDB7796323740CA26DAB59PUNITPMBX02ad_
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

In=20my=20index=20lucene=20index,=20I=20want=20to=20search=20on=20a=20fie=
ld,=20but=20the=20score=20or=20order=20of=20returned=20documents=20is=20n=
ot=20important.=20What=20is=20important=20is=20which=20documents=20are=20=
returned.

As,=20I=20do=20not=20need=20score=20or=20even=20default=20sorting(order=
=20=20by=20docid),=20what=20is=20the=20best=20way=20to=20write=20a=20quer=
y.

I=20compared=20performance=20of=20two=20options=20-=20TermQuery=20and=20C=
onstantScoreQuery=20on=20TermsFilter.=20I=20was=20expecting=20smaller=20s=
earch=20time=20with=20ConstantScoreQuery=20with=20TermsFilter,=20but=20it=
=20has=20turned=20out=20otherwise.
Please=20help=20me=20understand=20this=20behavior.

Thanks=20and=20Regards,

Shelly=20Singh
Center=20For=20KNowledge=20Driven=20Information=20Systems,=20Infosys
Email:=20shelly_singh@infosys.com<mailto:shelly_singh@infosys.com>
Phone:=20(M)=2091=20992=20369=207200,=20(VoIP)2022978622




****************=20CAUTION=20-=20Disclaimer=20*****************
This=20e-mail=20contains=20PRIVILEGED=20AND=20CONFIDENTIAL=20INFORMATION=
=20intended=20solely=20
for=20the=20use=20of=20the=20addressee(s).=20If=20you=20are=20not=20the=
=20intended=20recipient,=20please=20
notify=20the=20sender=20by=20e-mail=20and=20delete=20the=20original=20mes=
sage.=20Further,=20you=20are=20not=20
to=20copy,=20disclose,=20or=20distribute=20this=20e-mail=20or=20its=20con=
tents=20to=20any=20other=20person=20and=20
any=20such=20actions=20are=20unlawful.=20This=20e-mail=20may=20contain=20=
viruses.=20Infosys=20has=20taken=20
every=20reasonable=20precaution=20to=20minimize=20this=20risk,=20but=20is=
=20not=20liable=20for=20any=20damage=20
you=20may=20sustain=20as=20a=20result=20of=20any=20virus=20in=20this=20e-=
mail.=20You=20should=20carry=20out=20your=20
own=20virus=20checks=20before=20opening=20the=20e-mail=20or=20attachment.=
=20Infosys=20reserves=20the=20
right=20to=20monitor=20and=20review=20the=20content=20of=20all=20messages=
=20sent=20to=20or=20from=20this=20e-mail=20
address.=20Messages=20sent=20to=20or=20from=20this=20e-mail=20address=20m=
ay=20be=20stored=20on=20the=20
Infosys=20e-mail=20system.
***INFOSYS********=20End=20of=20Disclaimer=20********INFOSYS***

--_000_AA27F54EFDA0CE43B33EBDB7796323740CA26DAB59PUNITPMBX02ad_--

From java-user-return-47060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 18 11:51:24 2010
Return-Path: <java-user-return-47060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49845 invoked from network); 18 Aug 2010 11:51:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 Aug 2010 11:51:23 -0000
Received: (qmail 72658 invoked by uid 500); 18 Aug 2010 11:51:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72294 invoked by uid 500); 18 Aug 2010 11:51:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72286 invoked by uid 99); 18 Aug 2010 11:51:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Aug 2010 11:51:17 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Aug 2010 11:51:13 +0000
Received: by wwb34 with SMTP id 34so88983wwb.5
        for <java-user@lucene.apache.org>; Wed, 18 Aug 2010 04:50:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=5yaxYgWg5Qxn0mRfvEawao4E2X1ozGCLkIKKhhD6ZYY=;
        b=szoTxb49KtF7mluxCGYWAIqDALFBPk7zjV1u4gdbM86mw5HMJnd1Rr8/4eqQPizhEl
         xHy3trIZiigjf+apZVbI+Z8g7iYctuSrT+ebbeORkfi9cL5QZJ4rdqR9dzRwOZ10Wb9U
         JS22p9prfjp/hTEfvRAPwOnGvz78kel8zWWE0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=qD7l5Khl4PWcgAOcYsa7TfRVpS6QypKp1Jgnxjr+qeoREQMR9kswoBTdXq8fFmuC5V
         3sqOFD5wDwYzuqbXOkGst4CrMypFe7HIygpJ7Eq2AauAk5qGFPiMxUdu9RlI/qi+/OkU
         HvkVBs+nRbJr+uyJxwZoDkwCKQ1MaeBRrwkII=
Received: by 10.227.144.2 with SMTP id x2mr7018425wbu.76.1282132251496; Wed,
 18 Aug 2010 04:50:51 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.132.17 with HTTP; Wed, 18 Aug 2010 04:50:31 -0700 (PDT)
In-Reply-To: <AA27F54EFDA0CE43B33EBDB7796323740CA26DAB52@PUNITPMBX02.ad.infosys.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA26DAB52@PUNITPMBX02.ad.infosys.com>
From: Anshum <anshumg@gmail.com>
Date: Wed, 18 Aug 2010 17:20:31 +0530
Message-ID: <AANLkTikjV11DwFig21TQqGVokB5g2Hy3Cd9QhuM8mxFh@mail.gmail.com>
Subject: Re: Sorting a Lucene index
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636832eba67dc4b048e17ada5

--001636832eba67dc4b048e17ada5
Content-Type: text/plain; charset=ISO-8859-1

Hi Shelly,
The search results so returned are sorted either by relevance, index order,
stored field, or custom order.
As you are saying that you would not be able to maintain the index order,
 you would have to do the sort at run time.
Sorting on a stored field is not costly and you may use it comfortably. btw,
are you facing any issues in sort time or is it a presumption?

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Wed, Aug 18, 2010 at 5:12 PM, Shelly_Singh <Shelly_Singh@infosys.com>wrote:

> Hi,
>
> I have a Lucene index that contains a numeric field along with certain
> other fields. The order of incoming documents is random and un-predictable.
> As a result, while creating an index, I end up adding docs in random order
> with respect to the numeric field value.
>
> For example, documents may be added in following order:
> 12,y,d
> 100,o,p
> 1,x,y
> 23,u,i
> 31,v,m
> 22,b,m
> 109,k,l
>
> My requirement is that at search time, I want the documents in order of the
> numeric field.
> One, option is to do a score/sort on the numeric field.
> But, this may be a costly operation.
>
> Hence, I am trying to find if there is some way, such that, my stored index
> is sorted by itself.
>
> Please help.
>
> Thanks and Regards,
>
> Shelly Singh
> Center For KNowledge Driven Information Systems, Infosys
> Email: shelly_singh@infosys.com<mailto:shelly_singh@infosys.com>
> Phone: (M) 91 992 369 7200, (VoIP)2022978622
>
>
>
>

--001636832eba67dc4b048e17ada5--

From java-user-return-47061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 18 13:41:23 2010
Return-Path: <java-user-return-47061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19932 invoked from network); 18 Aug 2010 13:41:22 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 Aug 2010 13:41:22 -0000
Received: (qmail 90470 invoked by uid 500); 18 Aug 2010 13:41:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89950 invoked by uid 500); 18 Aug 2010 13:41:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89932 invoked by uid 99); 18 Aug 2010 13:41:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Aug 2010 13:41:15 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Aug 2010 13:41:09 +0000
Received: by qwk3 with SMTP id 3so607112qwk.35
        for <java-user@lucene.apache.org>; Wed, 18 Aug 2010 06:40:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=wgCFE1kNX0uQHx1hFtJqGJW47et1QaFz1Q7sXrjIexw=;
        b=FgURw3MsHisWr3gGfFXWUWP0CTPt3W/NJT886AE8L8GIiwkw+31cSZTmhsr7WqqLnN
         UBYhYgpBGzHyNOxr/Oo600v0zXTL4leDcSndFy5XznBgzgDggA1kRR/8jLP87DrzD7+S
         lL6ZcI+BnNA0IonIx7itkZTIQQ+iaZL/oUb5E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=LD9b9qaNubzJ8RoIBIyaMYSlkQMPhNo2be+Skfxw7dyhV96sIqf+hNStvjEGAEhWFp
         vafCTT8RkYc5tIDUARqNvjmT+ZvkwASj49JJgwJJnshew9AhXlmBgEZ5OM0GpB8TBU3s
         J+Wrb8h/r835iA2VWiG6Ol6/zW90xS8U6v+Ak=
Received: by 10.224.20.9 with SMTP id d9mr5379844qab.310.1282138848256; Wed,
 18 Aug 2010 06:40:48 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.96.200 with HTTP; Wed, 18 Aug 2010 06:40:28 -0700 (PDT)
In-Reply-To: <AA27F54EFDA0CE43B33EBDB7796323740CA26DAB59@PUNITPMBX02.ad.infosys.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA26DAB59@PUNITPMBX02.ad.infosys.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 18 Aug 2010 14:40:28 +0100
Message-ID: <AANLkTinUPwH5JO9xdUqDYwLfRSYyYbZOyRjXv26Qv=m6@mail.gmail.com>
Subject: Re: TermQuery and ConstantScoreQuery on TermsFilter
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hard to say - there are many factors involved in searching.  I'd just
use the easiest queries that were fast enough.  If you want a better
answer more info would be useful.  For starters:

What version of lucene.
How big is the index.
How many hits.
Exactly what do the queries look like (q.toString()).
How are you constructing the filters.
Are the filters cached.

And don't forget to ignore the times of the first few searches on a
new Searcher.


--
Ian.


On Wed, Aug 18, 2010 at 12:47 PM, Shelly_Singh <Shelly_Singh@infosys.com> w=
rote:
> Hi,
>
> In my index lucene index, I want to search on a field, but the score or o=
rder of returned documents is not important. What is important is which doc=
uments are returned.
>
> As, I do not need score or even default sorting(order =A0by docid), what =
is the best way to write a query.
>
> I compared performance of two options - TermQuery and ConstantScoreQuery =
on TermsFilter. I was expecting smaller search time with ConstantScoreQuery=
 with TermsFilter, but it has turned out otherwise.
> Please help me understand this behavior.
>
> Thanks and Regards,
>
> Shelly Singh
> Center For KNowledge Driven Information Systems, Infosys
> Email: shelly_singh@infosys.com<mailto:shelly_singh@infosys.com>
> Phone: (M) 91 992 369 7200, (VoIP)2022978622
>
>
>
>
> **************** CAUTION - Disclaimer *****************
> This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended sol=
ely
> for the use of the addressee(s). If you are not the intended recipient, p=
lease
> notify the sender by e-mail and delete the original message. Further, you=
 are not
> to copy, disclose, or distribute this e-mail or its contents to any other=
 person and
> any such actions are unlawful. This e-mail may contain viruses. Infosys h=
as taken
> every reasonable precaution to minimize this risk, but is not liable for =
any damage
> you may sustain as a result of any virus in this e-mail. You should carry=
 out your
> own virus checks before opening the e-mail or attachment. Infosys reserve=
s the
> right to monitor and review the content of all messages sent to or from t=
his e-mail
> address. Messages sent to or from this e-mail address may be stored on th=
e
> Infosys e-mail system.
> ***INFOSYS******** End of Disclaimer ********INFOSYS***
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 18 14:22:40 2010
Return-Path: <java-user-return-47062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42612 invoked from network); 18 Aug 2010 14:22:39 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 Aug 2010 14:22:39 -0000
Received: (qmail 77504 invoked by uid 500); 18 Aug 2010 14:22:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77081 invoked by uid 500); 18 Aug 2010 14:22:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77063 invoked by uid 99); 18 Aug 2010 14:22:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Aug 2010 14:22:33 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,SPF_PASS,T_FILL_THIS_FORM_SHORT,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of akaris@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Aug 2010 14:22:28 +0000
Received: by eydd26 with SMTP id d26so440219eyd.35
        for <java-user@lucene.apache.org>; Wed, 18 Aug 2010 07:22:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=S/H6tyeN1aez/U0liCXe68UaAp1UkDlznFh/XfT7pw4=;
        b=CojdzI/Jq/mENqvzCbcBuVtLhGxuAzoJgG9hXaaM99wq9IRZXQenCOTXCitmGXMdSY
         JrYCRXtbA12NngwJW/KhOI/TxkvCKOfJxQyj4+WIbQlXJ3+JawXdO8P2LkgXMxvqxfkA
         M12AETfI4TVW9xfPhIYjqeRi4CJbIFxVvBakc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=Rq5wgIRYZ/L0i7MyZsgRQuqk7o9RwdSLNJngq9OsYOVNYM3Ru2Pqk+odd4RfYJqAbO
         XAOIRQ6qMDkk3eTRJ6mc5lms7JZrLLmV+QxOmkYq83DW6Gyevk5oCN8gLnKwJDK+qE9B
         nlSy7GLFzUETRAOULhmiMXZlf1pPJVjMSJrcw=
Received: by 10.213.33.73 with SMTP id g9mr352114ebd.46.1282141326335; Wed, 18
 Aug 2010 07:22:06 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.14.10.153 with HTTP; Wed, 18 Aug 2010 07:21:45 -0700 (PDT)
In-Reply-To: <AANLkTikG_7Jh-LfuavzxQ928TJjru8Ds_jwKCHdbi2hH@mail.gmail.com>
References: <AANLkTimHhWx4ZEzZCuQN5p4u=kbc-s20R4qfdyBLDf=p@mail.gmail.com>
 <AANLkTi=qUOSNBP=ZpvGd=SrXtdp6NabbMFPLJF2AwGrD@mail.gmail.com>
 <AANLkTi=zB3f1+PdUBkMY11yfWcaoX=vfgcKpgm_tvb3E@mail.gmail.com>
 <AANLkTinf56RGiYE3h5nFt4TYk_J-xan++AdoSRLJggJv@mail.gmail.com>
 <AANLkTimj9xmwn8c5hUiq2E=W3j1vm-R9Jo4v_YKCBFqB@mail.gmail.com>
 <AANLkTi=VJV+mPpkGW9ye5SoHX3NncgDREUeywY8jRyt4@mail.gmail.com>
 <AANLkTi=HRhzrhaBGF4anxZXghjiE9jxuOn92boiJr+if@mail.gmail.com> <AANLkTikG_7Jh-LfuavzxQ928TJjru8Ds_jwKCHdbi2hH@mail.gmail.com>
From: Michel Nadeau <akaris@gmail.com>
Date: Wed, 18 Aug 2010 10:21:45 -0400
Message-ID: <AANLkTimsmsZ0a60iVgk-Rqsj1Wt=TQNw2_mM7R+E=Xt+@mail.gmail.com>
Subject: Re: "Natural sorting" of documents in a Lucene index - possible?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174c3c484edfd2048e19ca8d

--0015174c3c484edfd2048e19ca8d
Content-Type: text/plain; charset=ISO-8859-1

Cool, so I'll try these things -

* Replace timestamps with YYYYMMDD - will minimize unique terms count;
* Use NumericField's for dates and numbers - will remove all string sorting.
Thanks guys!

--

But - to come back to my original question... is there any way to have a
"natural order" of documents other that the DocId In Lucene? For example, is
there any way to have an index automatically sorted on a specific field,
like :

DocId     Count     Data
-------------------------------------
  5         1       First test
  1         3       Otter
  8         4       Test
  2         8       Aloha
 10        11       Zulu
  9        17       Bingo
  3        46       Alpha test
  6       112       Tango
  4       120       Charlie test
  7       200       Kiwi

Notice the DocId and Data random orders, but Count is sorted. That would be
the 'natural order' in the index, and searching for 'test' would return (in
that order) :

DocId     Count     Data
-------------------------------------
  5         1       First test
  3        46       Alpha test
   4       120       Charlie test

Already sorted on the Count.

Thanks!

- Mike
akaris@gmail.com


On Tue, Aug 17, 2010 at 4:08 PM, Ian Lea <ian.lea@gmail.com> wrote:

> Using NumericField for dates and other numbers is likely to help a
> lot, and removes padding problems.  I'd try that first, or just sort
> the top n hits yourself.
>
>
> --
> Ian.
>
>
> On Tue, Aug 17, 2010 at 8:46 PM, Michel Nadeau <akaris@gmail.com> wrote:
> > I could at least drop hours/mins/sec, we don't need them, so my timestamp
> > could become 'YYYYMMDD', that would cut the number of unique terms at
> least
> > for dates.
> >
> > What about my other question about numbers : *" We do pad our numbers
> with
> > zeros though (for example: 10 becomes 00000010, etc.) because we had
> trouble
> > with sorting (100 was smaller than 2) ; is that considered as "string
> > sorting" ? This might explain a part of the problem."* ? Thanks.
> >
> > - Mike
> > akaris@gmail.com
> >
> >
> > On Tue, Aug 17, 2010 at 3:40 PM, Erick Erickson <erickerickson@gmail.com
> >wrote:
> >
> >> Hmmm, I glossed over your comment about sorting the top 250. There's
> >> no reason that wouldn't work.
> >>
> >> Well, one way for, say, dates is to store separate fields. YYYY, MM, DD,
> >> HH, MM, SS, MS. That gives you say, 100 year terms, + 12 month
> >> +31 days + .... for a very small total. You pay the price though by
> >> having to change your queries and sorts to respect all 6 fields...
> >>
> >> But I'd only really go there after seeing if other options don't work.
> >>
> >>
> >> Best
> >> Erick
> >>
> >> On Tue, Aug 17, 2010 at 3:35 PM, Michel Nadeau <akaris@gmail.com>
> wrote:
> >>
> >> > Would our approach to limit the search top 250 documents (and then
> sort
> >> > these 250 documents) work fine ? Or even 250 unique terms with a lot
> of
> >> > users is bad on memory when sorting ?
> >> >
> >> > We didn't look at trie fields - I will do though, thanks for the tip !
> >> >
> >> > We do store the original 'Data' field (only the 'SearchableData' field
> is
> >> > analyzed, all other fields are not analyzed), the users mainly sort on
> >> > numeric values; not a lot on string values (in fact I could compltely
> >> drop
> >> > the sort by string feature). We do pad our numbers with zeros though
> (for
> >> > example: 10 becomes 00000010, etc.) because we had trouble with
> sorting
> >> > (100
> >> > was smaller than 2) ; is that considered as "string sorting" ? This
> might
> >> > explain a part of the problem.
> >> >
> >> > Why/how would I reduce the count of unique terms?
> >> >
> >> >
> >> > - Mike
> >> > akaris@gmail.com
> >> >
> >> >
> >> > On Tue, Aug 17, 2010 at 3:28 PM, Erick Erickson <
> erickerickson@gmail.com
> >> > >wrote:
> >> >
> >> > > If you have tens of millions of documents, almost all with unique
> >> fields
> >> > > that you're sorting on, you'll chew through memory like there's no
> >> > > tomorrow.
> >> > >
> >> > > Have you looked at trie fields? See:
> >> > >
> >> > >
> >> >
> >>
> http://www.lucidimagination.com/blog/2009/05/13/exploring-lucene-and-solrs-trierange-capabilities/
> >> > >
> >> > > I'm a little concerned that the user can sort on Data. Any field
> used
> >> for
> >> > > sorting
> >> > > should NOT be analyzed, so unless you are indexing "Data"
> unanalyzed,
> >> > > that's
> >> > > a problem. And if you are sorting on strings unique to each
> document,
> >> > > that's
> >> > > also a memory hog. Not to mention whether capitalization counts.
> >> > >
> >> > > You might enumerate the terms in your index for each of the sortable
> >> > fields
> >> > > to figure out what the total number of unique terms each is and use
> >> that
> >> > as
> >> > > a basis for reducing their count....
> >> > >
> >> > > HTH
> >> > > Erick
> >> > >
> >> > > On Tue, Aug 17, 2010 at 3:05 PM, Michel Nadeau <akaris@gmail.com>
> >> wrote:
> >> > >
> >> > > > Hi Erick,
> >> > > >
> >> > > > Here's some more details about our structure. First here's an
> example
> >> > of
> >> > > > document in our index :
> >> > > >
> >> > > >     PrimaryKey        = SJAsfsf353JHGada66GH6 (it's a hash)
> >> > > >     DocType           = X
> >> > > >     Data              = This is the data
> >> > > >     SearchableContent = This is the data
> >> > > >     DateCreated       = <timestamp>
> >> > > >     DateModified      = <timestamp>
> >> > > >     Counter1          = 17
> >> > > >     Counter2          = 3
> >> > > >     Average           = 0.17
> >> > > >     Cost              = 200
> >> > > >
> >> > > > The users are able to sort on almost all fields: Data,
> DateCreated,
> >> > > > DateModified, Counter1, Counter2, Average, Cost.
> >> > > >
> >> > > > When we search, we always search on the 'SearchableContent' field
> and
> >> > we
> >> > > > have at least one filter on the DocType (because we have many
> >> document
> >> > > > types
> >> > > > in the same index). So a common search that would find the
> document
> >> > above
> >> > > > is
> >> > > > "data *AND DocType:X*" (we automatically add the "*AND DocType:X*"
> >> part
> >> > > > using Lucene Filters.
> >> > > >
> >> > > > I would say that the number of unique terms in the field being
> sorted
> >> > on
> >> > > is
> >> > > > very big - for example timestamps, almost all unique, counters,
> >> > average,
> >> > > > cost, data... so if a query finds 10M results, it's almost 10M
> >> > different
> >> > > > values to sort. About cache and warm-up queries : we don't use
> >> warm-up
> >> > > > queries -at all- because we have absolutely no idea of what users
> are
> >> > > going
> >> > > > to search for (they can search for absolutely anything). About
> >> > "returning
> >> > > > 10M" documents, right, we don't actually return the 10M documents,
> we
> >> > use
> >> > > > pagination to return documents X to Y of the 10M (and the 10M was
> >> only
> >> > an
> >> > > > example, it can be anywhere between 1K and 100M results). The
> >> > pagination
> >> > > > usually works fine and fast, our problem is really sorting.
> >> > > >
> >> > > > Our "Lucene Reader" process has 2GB of ram allowed, here's how I
> >> start
> >> > it
> >> > > -
> >> > > >
> >> > > >     java -Xmx2048m -jar LuceneReader.jar
> >> > > >
> >> > > > The problem really seems to be a ram problem, but I can't be 100%
> >> sure
> >> > > (any
> >> > > > help about how to be sure is welcome).
> >> > > >
> >> > > > Our current idea of a solution would be to get maximum 250 results
> >> (the
> >> > > > more
> >> > > > relevant ones; more results than that is totally useless in our
> >> system)
> >> > > so
> >> > > > the sort should work fine on a small data set like that, but we
> want
> >> to
> >> > > > make
> >> > > > sure we're doing everything right before doing that so we don't
> run
> >> in
> >> > > the
> >> > > > same problems again.
> >> > > >
> >> > > > Thank you very much; let me know if you need any more details!
> >> > > >
> >> > > > - Mike
> >> > > > akaris@gmail.com
> >> > > >
> >> > > >
> >> > > > On Mon, Aug 16, 2010 at 4:01 PM, Erick Erickson <
> >> > erickerickson@gmail.com
> >> > > > >wrote:
> >> > > >
> >> > > > > Let's back up a minute. The number of matched records is not
> >> > > > > important when sorting, what's important is the number of unique
> >> > > > > terms in the field being sorted. Do you have any figures on
> that?
> >> One
> >> > > > > very common sorting issue is sorting on very fine date time
> >> > > resolutions,
> >> > > > > although your examples don't include that...
> >> > > > >
> >> > > > > Now, cache loading is an issue. The very first time you sort on
> a
> >> > > field,
> >> > > > > all the values are read into a cache. Is it possible this is the
> >> > source
> >> > > > > of your problems? You can cure this with warmup queries. The
> >> > take-away
> >> > > > > is that measuring the response time for the first sorted query
> is
> >> > > > > very misleading.
> >> > > > >
> >> > > > > Although if you're sorting on many, many, many email addresses,
> >> > > > > that could be "interesting".
> >> > > > >
> >> > > > > The comment "returning 10,000,000 documents" is, I hope, a
> >> > > > > misstatement. If you're trying to *return* 10M docs sorting
> >> > > > > is irrelevant compared to assembling that many documents. If
> >> > > > > you're trying to return the first 100 of 10M documents, it
> should
> >> > > > > work.
> >> > > > >
> >> > > > > Overall, we need more details on what you're sorting and what
> >> > > > > you're trying to return as well as how you're measuring before
> >> > > > > we can say much....
> >> > > > >
> >> > > > > Along with how much memory you're giving your JVM to work with,
> >> > > > > what "exploding" means. Are you CPU bound? IO bound? Swapping?
> >> > > > > You need to characterize what is going wrong before worrying
> about
> >> > > > > solutions......
> >> > > > >
> >> > > > > Best
> >> > > > > Erick
> >> > > > >
> >> > > > > On Mon, Aug 16, 2010 at 3:08 PM, Michel Nadeau <
> akaris@gmail.com>
> >> > > wrote:
> >> > > > >
> >> > > > > > Hi,
> >> > > > > >
> >> > > > > > we are building an application using Lucene and we have HUGE
> data
> >> > > sets
> >> > > > > (our
> >> > > > > > index contains millions and millions and millions of
> documents),
> >> > > which
> >> > > > > > obviously cause us very important problems when sorting. In
> fact,
> >> > we
> >> > > > > > disabled sorting completely because the servers were just
> >> exploding
> >> > > > when
> >> > > > > > trying to sort results in RAM. The users using the system can
> >> > search
> >> > > > for
> >> > > > > > whatever they want, so we never know how many results will be
> >> > > returned
> >> > > > -
> >> > > > > a
> >> > > > > > search can return 10 documents (no problem with sorting) or
> >> > > 10,000,000
> >> > > > > > (huge
> >> > > > > > sorting problems).
> >> > > > > >
> >> > > > > > I woke up this morning and had a flash : is it possible with
> >> Lucene
> >> > > to
> >> > > > > have
> >> > > > > > a "natural sorting" of documents? For example, let's say I
> have 3
> >> > > > columns
> >> > > > > I
> >> > > > > > want to be able to sort by : first name, last name, email; I
> >> would
> >> > > have
> >> > > > 3
> >> > > > > > different indexes with the very same data but with a different
> >> > > primary
> >> > > > > key
> >> > > > > > for sorting. I know it's far fetched, and I have never seen
> >> > anything
> >> > > > like
> >> > > > > > that since I use Lucene, but we're just desperate... how
> people
> >> do
> >> > to
> >> > > > > have
> >> > > > > > huge data sets, a lot of users, and sort!?
> >> > > > > >
> >> > > > > > Thanks,
> >> > > > > >
> >> > > > > > Mike
> >> > > > > >
> >> > > > >
> >> > > >
> >> > >
> >> >
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0015174c3c484edfd2048e19ca8d--

From java-user-return-47063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 18 14:38:34 2010
Return-Path: <java-user-return-47063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54903 invoked from network); 18 Aug 2010 14:38:34 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 Aug 2010 14:38:34 -0000
Received: (qmail 15275 invoked by uid 500); 18 Aug 2010 14:38:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15015 invoked by uid 500); 18 Aug 2010 14:38:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15007 invoked by uid 99); 18 Aug 2010 14:38:28 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Aug 2010 14:38:28 +0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,RCVD_IN_DNSWL_NONE,SPF_PASS,T_FILL_THIS_FORM_SHORT,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Aug 2010 14:38:05 +0000
Received: by qwk3 with SMTP id 3so683669qwk.35
        for <java-user@lucene.apache.org>; Wed, 18 Aug 2010 07:37:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=7PjKhcASr0Zbo2N5ukWxh2wenpE2GHgTDJM83Q6uBFI=;
        b=REdhrH6a+kUf9fUA9CML8EVbFNwGmUHWpnki9fbYFYh/iF7j591JVWL7oz0Fco9/0C
         OeQHI0s4sWV7nBZ6gotyl0Pj2IOYvQU5B4Y7rYQEkKNxJzNTMLH1mOrYq63wiPAV8pfU
         Q458DPvPhn7aFf+PhXYyhDVyW0S2fiQsJIS9w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=GI5wX1nI7t4P9BECFl8pZEt+UU6We48CEwZCV+3Lf+iUvE13wo56KCOZmlx++tvd6x
         4qMbBFcdE3DqLyYz2A/Gi9XnHwL/sRn2GwL06mNFPWjZqTP/TjuMWk+l+Q74Dq0epxMg
         J9KN1W2Acu3k4+jxLgevmD19IcuMWugJsheLw=
Received: by 10.224.19.200 with SMTP id c8mr5413868qab.309.1282142264588; Wed,
 18 Aug 2010 07:37:44 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.96.200 with HTTP; Wed, 18 Aug 2010 07:37:24 -0700 (PDT)
In-Reply-To: <AANLkTimsmsZ0a60iVgk-Rqsj1Wt=TQNw2_mM7R+E=Xt+@mail.gmail.com>
References: <AANLkTimHhWx4ZEzZCuQN5p4u=kbc-s20R4qfdyBLDf=p@mail.gmail.com>
 <AANLkTi=qUOSNBP=ZpvGd=SrXtdp6NabbMFPLJF2AwGrD@mail.gmail.com>
 <AANLkTi=zB3f1+PdUBkMY11yfWcaoX=vfgcKpgm_tvb3E@mail.gmail.com>
 <AANLkTinf56RGiYE3h5nFt4TYk_J-xan++AdoSRLJggJv@mail.gmail.com>
 <AANLkTimj9xmwn8c5hUiq2E=W3j1vm-R9Jo4v_YKCBFqB@mail.gmail.com>
 <AANLkTi=VJV+mPpkGW9ye5SoHX3NncgDREUeywY8jRyt4@mail.gmail.com>
 <AANLkTi=HRhzrhaBGF4anxZXghjiE9jxuOn92boiJr+if@mail.gmail.com>
 <AANLkTikG_7Jh-LfuavzxQ928TJjru8Ds_jwKCHdbi2hH@mail.gmail.com> <AANLkTimsmsZ0a60iVgk-Rqsj1Wt=TQNw2_mM7R+E=Xt+@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 18 Aug 2010 15:37:24 +0100
Message-ID: <AANLkTikryzMDfxpiKQO+1LX41kAgpnR3r1PbOy=3OM7Z@mail.gmail.com>
Subject: Re: "Natural sorting" of documents in a Lucene index - possible?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

> But - to come back to my original question... is there any way to have a
> "natural order" of documents other that the DocId In Lucene?

No.


--
Ian.


On Wed, Aug 18, 2010 at 3:21 PM, Michel Nadeau <akaris@gmail.com> wrote:
> Cool, so I'll try these things -
>
> * Replace timestamps with YYYYMMDD - will minimize unique terms count;
> * Use NumericField's for dates and numbers - will remove all string sorti=
ng.
> Thanks guys!
>
> --
>
> But - to come back to my original question... is there any way to have a
> "natural order" of documents other that the DocId In Lucene? For example,=
 is
> there any way to have an index automatically sorted on a specific field,
> like :
>
> DocId =A0 =A0 Count =A0 =A0 Data
> -------------------------------------
> =A05 =A0 =A0 =A0 =A0 1 =A0 =A0 =A0 First test
> =A01 =A0 =A0 =A0 =A0 3 =A0 =A0 =A0 Otter
> =A08 =A0 =A0 =A0 =A0 4 =A0 =A0 =A0 Test
> =A02 =A0 =A0 =A0 =A0 8 =A0 =A0 =A0 Aloha
> =A010 =A0 =A0 =A0 =A011 =A0 =A0 =A0 Zulu
> =A09 =A0 =A0 =A0 =A017 =A0 =A0 =A0 Bingo
> =A03 =A0 =A0 =A0 =A046 =A0 =A0 =A0 Alpha test
> =A06 =A0 =A0 =A0 112 =A0 =A0 =A0 Tango
> =A04 =A0 =A0 =A0 120 =A0 =A0 =A0 Charlie test
> =A07 =A0 =A0 =A0 200 =A0 =A0 =A0 Kiwi
>
> Notice the DocId and Data random orders, but Count is sorted. That would =
be
> the 'natural order' in the index, and searching for 'test' would return (=
in
> that order) :
>
> DocId =A0 =A0 Count =A0 =A0 Data
> -------------------------------------
> =A05 =A0 =A0 =A0 =A0 1 =A0 =A0 =A0 First test
> =A03 =A0 =A0 =A0 =A046 =A0 =A0 =A0 Alpha test
> =A0 4 =A0 =A0 =A0 120 =A0 =A0 =A0 Charlie test
>
> Already sorted on the Count.
>
> Thanks!
>
> - Mike
> akaris@gmail.com
>
>
> On Tue, Aug 17, 2010 at 4:08 PM, Ian Lea <ian.lea@gmail.com> wrote:
>
>> Using NumericField for dates and other numbers is likely to help a
>> lot, and removes padding problems. =A0I'd try that first, or just sort
>> the top n hits yourself.
>>
>>
>> --
>> Ian.
>>
>>
>> On Tue, Aug 17, 2010 at 8:46 PM, Michel Nadeau <akaris@gmail.com> wrote:
>> > I could at least drop hours/mins/sec, we don't need them, so my timest=
amp
>> > could become 'YYYYMMDD', that would cut the number of unique terms at
>> least
>> > for dates.
>> >
>> > What about my other question about numbers : *" We do pad our numbers
>> with
>> > zeros though (for example: 10 becomes 00000010, etc.) because we had
>> trouble
>> > with sorting (100 was smaller than 2) ; is that considered as "string
>> > sorting" ? This might explain a part of the problem."* ? Thanks.
>> >
>> > - Mike
>> > akaris@gmail.com
>> >
>> >
>> > On Tue, Aug 17, 2010 at 3:40 PM, Erick Erickson <erickerickson@gmail.c=
om
>> >wrote:
>> >
>> >> Hmmm, I glossed over your comment about sorting the top 250. There's
>> >> no reason that wouldn't work.
>> >>
>> >> Well, one way for, say, dates is to store separate fields. YYYY, MM, =
DD,
>> >> HH, MM, SS, MS. That gives you say, 100 year terms, + 12 month
>> >> +31 days + .... for a very small total. You pay the price though by
>> >> having to change your queries and sorts to respect all 6 fields...
>> >>
>> >> But I'd only really go there after seeing if other options don't work=
.
>> >>
>> >>
>> >> Best
>> >> Erick
>> >>
>> >> On Tue, Aug 17, 2010 at 3:35 PM, Michel Nadeau <akaris@gmail.com>
>> wrote:
>> >>
>> >> > Would our approach to limit the search top 250 documents (and then
>> sort
>> >> > these 250 documents) work fine ? Or even 250 unique terms with a lo=
t
>> of
>> >> > users is bad on memory when sorting ?
>> >> >
>> >> > We didn't look at trie fields - I will do though, thanks for the ti=
p !
>> >> >
>> >> > We do store the original 'Data' field (only the 'SearchableData' fi=
eld
>> is
>> >> > analyzed, all other fields are not analyzed), the users mainly sort=
 on
>> >> > numeric values; not a lot on string values (in fact I could complte=
ly
>> >> drop
>> >> > the sort by string feature). We do pad our numbers with zeros thoug=
h
>> (for
>> >> > example: 10 becomes 00000010, etc.) because we had trouble with
>> sorting
>> >> > (100
>> >> > was smaller than 2) ; is that considered as "string sorting" ? This
>> might
>> >> > explain a part of the problem.
>> >> >
>> >> > Why/how would I reduce the count of unique terms?
>> >> >
>> >> >
>> >> > - Mike
>> >> > akaris@gmail.com
>> >> >
>> >> >
>> >> > On Tue, Aug 17, 2010 at 3:28 PM, Erick Erickson <
>> erickerickson@gmail.com
>> >> > >wrote:
>> >> >
>> >> > > If you have tens of millions of documents, almost all with unique
>> >> fields
>> >> > > that you're sorting on, you'll chew through memory like there's n=
o
>> >> > > tomorrow.
>> >> > >
>> >> > > Have you looked at trie fields? See:
>> >> > >
>> >> > >
>> >> >
>> >>
>> http://www.lucidimagination.com/blog/2009/05/13/exploring-lucene-and-sol=
rs-trierange-capabilities/
>> >> > >
>> >> > > I'm a little concerned that the user can sort on Data. Any field
>> used
>> >> for
>> >> > > sorting
>> >> > > should NOT be analyzed, so unless you are indexing "Data"
>> unanalyzed,
>> >> > > that's
>> >> > > a problem. And if you are sorting on strings unique to each
>> document,
>> >> > > that's
>> >> > > also a memory hog. Not to mention whether capitalization counts.
>> >> > >
>> >> > > You might enumerate the terms in your index for each of the sorta=
ble
>> >> > fields
>> >> > > to figure out what the total number of unique terms each is and u=
se
>> >> that
>> >> > as
>> >> > > a basis for reducing their count....
>> >> > >
>> >> > > HTH
>> >> > > Erick
>> >> > >
>> >> > > On Tue, Aug 17, 2010 at 3:05 PM, Michel Nadeau <akaris@gmail.com>
>> >> wrote:
>> >> > >
>> >> > > > Hi Erick,
>> >> > > >
>> >> > > > Here's some more details about our structure. First here's an
>> example
>> >> > of
>> >> > > > document in our index :
>> >> > > >
>> >> > > > =A0 =A0 PrimaryKey =A0 =A0 =A0 =A0=3D SJAsfsf353JHGada66GH6 (it=
's a hash)
>> >> > > > =A0 =A0 DocType =A0 =A0 =A0 =A0 =A0 =3D X
>> >> > > > =A0 =A0 Data =A0 =A0 =A0 =A0 =A0 =A0 =A0=3D This is the data
>> >> > > > =A0 =A0 SearchableContent =3D This is the data
>> >> > > > =A0 =A0 DateCreated =A0 =A0 =A0 =3D <timestamp>
>> >> > > > =A0 =A0 DateModified =A0 =A0 =A0=3D <timestamp>
>> >> > > > =A0 =A0 Counter1 =A0 =A0 =A0 =A0 =A0=3D 17
>> >> > > > =A0 =A0 Counter2 =A0 =A0 =A0 =A0 =A0=3D 3
>> >> > > > =A0 =A0 Average =A0 =A0 =A0 =A0 =A0 =3D 0.17
>> >> > > > =A0 =A0 Cost =A0 =A0 =A0 =A0 =A0 =A0 =A0=3D 200
>> >> > > >
>> >> > > > The users are able to sort on almost all fields: Data,
>> DateCreated,
>> >> > > > DateModified, Counter1, Counter2, Average, Cost.
>> >> > > >
>> >> > > > When we search, we always search on the 'SearchableContent' fie=
ld
>> and
>> >> > we
>> >> > > > have at least one filter on the DocType (because we have many
>> >> document
>> >> > > > types
>> >> > > > in the same index). So a common search that would find the
>> document
>> >> > above
>> >> > > > is
>> >> > > > "data *AND DocType:X*" (we automatically add the "*AND DocType:=
X*"
>> >> part
>> >> > > > using Lucene Filters.
>> >> > > >
>> >> > > > I would say that the number of unique terms in the field being
>> sorted
>> >> > on
>> >> > > is
>> >> > > > very big - for example timestamps, almost all unique, counters,
>> >> > average,
>> >> > > > cost, data... so if a query finds 10M results, it's almost 10M
>> >> > different
>> >> > > > values to sort. About cache and warm-up queries : we don't use
>> >> warm-up
>> >> > > > queries -at all- because we have absolutely no idea of what use=
rs
>> are
>> >> > > going
>> >> > > > to search for (they can search for absolutely anything). About
>> >> > "returning
>> >> > > > 10M" documents, right, we don't actually return the 10M documen=
ts,
>> we
>> >> > use
>> >> > > > pagination to return documents X to Y of the 10M (and the 10M w=
as
>> >> only
>> >> > an
>> >> > > > example, it can be anywhere between 1K and 100M results). The
>> >> > pagination
>> >> > > > usually works fine and fast, our problem is really sorting.
>> >> > > >
>> >> > > > Our "Lucene Reader" process has 2GB of ram allowed, here's how =
I
>> >> start
>> >> > it
>> >> > > -
>> >> > > >
>> >> > > > =A0 =A0 java -Xmx2048m -jar LuceneReader.jar
>> >> > > >
>> >> > > > The problem really seems to be a ram problem, but I can't be 10=
0%
>> >> sure
>> >> > > (any
>> >> > > > help about how to be sure is welcome).
>> >> > > >
>> >> > > > Our current idea of a solution would be to get maximum 250 resu=
lts
>> >> (the
>> >> > > > more
>> >> > > > relevant ones; more results than that is totally useless in our
>> >> system)
>> >> > > so
>> >> > > > the sort should work fine on a small data set like that, but we
>> want
>> >> to
>> >> > > > make
>> >> > > > sure we're doing everything right before doing that so we don't
>> run
>> >> in
>> >> > > the
>> >> > > > same problems again.
>> >> > > >
>> >> > > > Thank you very much; let me know if you need any more details!
>> >> > > >
>> >> > > > - Mike
>> >> > > > akaris@gmail.com
>> >> > > >
>> >> > > >
>> >> > > > On Mon, Aug 16, 2010 at 4:01 PM, Erick Erickson <
>> >> > erickerickson@gmail.com
>> >> > > > >wrote:
>> >> > > >
>> >> > > > > Let's back up a minute. The number of matched records is not
>> >> > > > > important when sorting, what's important is the number of uni=
que
>> >> > > > > terms in the field being sorted. Do you have any figures on
>> that?
>> >> One
>> >> > > > > very common sorting issue is sorting on very fine date time
>> >> > > resolutions,
>> >> > > > > although your examples don't include that...
>> >> > > > >
>> >> > > > > Now, cache loading is an issue. The very first time you sort =
on
>> a
>> >> > > field,
>> >> > > > > all the values are read into a cache. Is it possible this is =
the
>> >> > source
>> >> > > > > of your problems? You can cure this with warmup queries. The
>> >> > take-away
>> >> > > > > is that measuring the response time for the first sorted quer=
y
>> is
>> >> > > > > very misleading.
>> >> > > > >
>> >> > > > > Although if you're sorting on many, many, many email addresse=
s,
>> >> > > > > that could be "interesting".
>> >> > > > >
>> >> > > > > The comment "returning 10,000,000 documents" is, I hope, a
>> >> > > > > misstatement. If you're trying to *return* 10M docs sorting
>> >> > > > > is irrelevant compared to assembling that many documents. If
>> >> > > > > you're trying to return the first 100 of 10M documents, it
>> should
>> >> > > > > work.
>> >> > > > >
>> >> > > > > Overall, we need more details on what you're sorting and what
>> >> > > > > you're trying to return as well as how you're measuring befor=
e
>> >> > > > > we can say much....
>> >> > > > >
>> >> > > > > Along with how much memory you're giving your JVM to work wit=
h,
>> >> > > > > what "exploding" means. Are you CPU bound? IO bound? Swapping=
?
>> >> > > > > You need to characterize what is going wrong before worrying
>> about
>> >> > > > > solutions......
>> >> > > > >
>> >> > > > > Best
>> >> > > > > Erick
>> >> > > > >
>> >> > > > > On Mon, Aug 16, 2010 at 3:08 PM, Michel Nadeau <
>> akaris@gmail.com>
>> >> > > wrote:
>> >> > > > >
>> >> > > > > > Hi,
>> >> > > > > >
>> >> > > > > > we are building an application using Lucene and we have HUG=
E
>> data
>> >> > > sets
>> >> > > > > (our
>> >> > > > > > index contains millions and millions and millions of
>> documents),
>> >> > > which
>> >> > > > > > obviously cause us very important problems when sorting. In
>> fact,
>> >> > we
>> >> > > > > > disabled sorting completely because the servers were just
>> >> exploding
>> >> > > > when
>> >> > > > > > trying to sort results in RAM. The users using the system c=
an
>> >> > search
>> >> > > > for
>> >> > > > > > whatever they want, so we never know how many results will =
be
>> >> > > returned
>> >> > > > -
>> >> > > > > a
>> >> > > > > > search can return 10 documents (no problem with sorting) or
>> >> > > 10,000,000
>> >> > > > > > (huge
>> >> > > > > > sorting problems).
>> >> > > > > >
>> >> > > > > > I woke up this morning and had a flash : is it possible wit=
h
>> >> Lucene
>> >> > > to
>> >> > > > > have
>> >> > > > > > a "natural sorting" of documents? For example, let's say I
>> have 3
>> >> > > > columns
>> >> > > > > I
>> >> > > > > > want to be able to sort by : first name, last name, email; =
I
>> >> would
>> >> > > have
>> >> > > > 3
>> >> > > > > > different indexes with the very same data but with a differ=
ent
>> >> > > primary
>> >> > > > > key
>> >> > > > > > for sorting. I know it's far fetched, and I have never seen
>> >> > anything
>> >> > > > like
>> >> > > > > > that since I use Lucene, but we're just desperate... how
>> people
>> >> do
>> >> > to
>> >> > > > > have
>> >> > > > > > huge data sets, a lot of users, and sort!?
>> >> > > > > >
>> >> > > > > > Thanks,
>> >> > > > > >
>> >> > > > > > Mike
>> >> > > > > >
>> >> > > > >
>> >> > > >
>> >> > >
>> >> >
>> >>
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 18 15:28:00 2010
Return-Path: <java-user-return-47064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84209 invoked from network); 18 Aug 2010 15:27:59 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 Aug 2010 15:27:59 -0000
Received: (qmail 19568 invoked by uid 500); 18 Aug 2010 15:27:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19479 invoked by uid 500); 18 Aug 2010 15:27:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19470 invoked by uid 99); 18 Aug 2010 15:27:56 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Aug 2010 15:27:56 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,SPF_PASS,T_FILL_THIS_FORM_SHORT,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of akaris@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Aug 2010 15:27:33 +0000
Received: by eydd26 with SMTP id d26so528271eyd.35
        for <java-user@lucene.apache.org>; Wed, 18 Aug 2010 08:27:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=EhfSAgb05tDJ9QlBsmrgPASo2Jpy8L+QkkYq0HTgCNc=;
        b=TWVVgsyAsiSW03rLJjX0IcaEkFLUSuYB2YZENt1WExQrl1Qg9zKTNBn+RjesTQ2nkx
         bhp1nrVfIsMMesn9hLlu/PV41tuQrsmvbcnVPOOqSds7w8dgtw7gUR7Fw1uOJdoJhYOg
         BFrc8F+V/7kpnzqSoQR8FnWAwd4u7NycL2qYI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=aseYwkM27XKYmAPHl8Lo+hPYSoGziSuh5DtW1i22YsPHi/pVUm/7j/0JXq1aWfpMNk
         BI4Gd5n0pNbGt8HWgeauGOhask8S+mESgXkmQDR7XOt5G9ARb4UO/HcmqnkbHhICux+C
         kAWSDbwG/ryJjLj2/zlrHzQ3dYuUHT53wrFgw=
Received: by 10.213.15.147 with SMTP id k19mr1388282eba.18.1282145233227; Wed,
 18 Aug 2010 08:27:13 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.14.10.153 with HTTP; Wed, 18 Aug 2010 08:26:53 -0700 (PDT)
In-Reply-To: <AANLkTikryzMDfxpiKQO+1LX41kAgpnR3r1PbOy=3OM7Z@mail.gmail.com>
References: <AANLkTimHhWx4ZEzZCuQN5p4u=kbc-s20R4qfdyBLDf=p@mail.gmail.com>
 <AANLkTi=qUOSNBP=ZpvGd=SrXtdp6NabbMFPLJF2AwGrD@mail.gmail.com>
 <AANLkTi=zB3f1+PdUBkMY11yfWcaoX=vfgcKpgm_tvb3E@mail.gmail.com>
 <AANLkTinf56RGiYE3h5nFt4TYk_J-xan++AdoSRLJggJv@mail.gmail.com>
 <AANLkTimj9xmwn8c5hUiq2E=W3j1vm-R9Jo4v_YKCBFqB@mail.gmail.com>
 <AANLkTi=VJV+mPpkGW9ye5SoHX3NncgDREUeywY8jRyt4@mail.gmail.com>
 <AANLkTi=HRhzrhaBGF4anxZXghjiE9jxuOn92boiJr+if@mail.gmail.com>
 <AANLkTikG_7Jh-LfuavzxQ928TJjru8Ds_jwKCHdbi2hH@mail.gmail.com>
 <AANLkTimsmsZ0a60iVgk-Rqsj1Wt=TQNw2_mM7R+E=Xt+@mail.gmail.com> <AANLkTikryzMDfxpiKQO+1LX41kAgpnR3r1PbOy=3OM7Z@mail.gmail.com>
From: Michel Nadeau <akaris@gmail.com>
Date: Wed, 18 Aug 2010 11:26:53 -0400
Message-ID: <AANLkTi=Pi864khTCCjA+5mo94VB5kT9dUPTyaYx2ZfK+@mail.gmail.com>
Subject: Re: "Natural sorting" of documents in a Lucene index - possible?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174bdcd62d4f19048e1ab35e
X-Virus-Checked: Checked by ClamAV on apache.org

--0015174bdcd62d4f19048e1ab35e
Content-Type: text/plain; charset=ISO-8859-1

Thanks !

- Mike
akaris@gmail.com


On Wed, Aug 18, 2010 at 10:37 AM, Ian Lea <ian.lea@gmail.com> wrote:

> > But - to come back to my original question... is there any way to have a
> > "natural order" of documents other that the DocId In Lucene?
>
> No.
>
>
> --
> Ian.
>
>
> On Wed, Aug 18, 2010 at 3:21 PM, Michel Nadeau <akaris@gmail.com> wrote:
> > Cool, so I'll try these things -
> >
> > * Replace timestamps with YYYYMMDD - will minimize unique terms count;
> > * Use NumericField's for dates and numbers - will remove all string
> sorting.
> > Thanks guys!
> >
> > --
> >
> > But - to come back to my original question... is there any way to have a
> > "natural order" of documents other that the DocId In Lucene? For example,
> is
> > there any way to have an index automatically sorted on a specific field,
> > like :
> >
> > DocId     Count     Data
> > -------------------------------------
> >  5         1       First test
> >  1         3       Otter
> >  8         4       Test
> >  2         8       Aloha
> >  10        11       Zulu
> >  9        17       Bingo
> >  3        46       Alpha test
> >  6       112       Tango
> >  4       120       Charlie test
> >  7       200       Kiwi
> >
> > Notice the DocId and Data random orders, but Count is sorted. That would
> be
> > the 'natural order' in the index, and searching for 'test' would return
> (in
> > that order) :
> >
> > DocId     Count     Data
> > -------------------------------------
> >  5         1       First test
> >  3        46       Alpha test
> >   4       120       Charlie test
> >
> > Already sorted on the Count.
> >
> > Thanks!
> >
> > - Mike
> > akaris@gmail.com
> >
> >
> > On Tue, Aug 17, 2010 at 4:08 PM, Ian Lea <ian.lea@gmail.com> wrote:
> >
> >> Using NumericField for dates and other numbers is likely to help a
> >> lot, and removes padding problems.  I'd try that first, or just sort
> >> the top n hits yourself.
> >>
> >>
> >> --
> >> Ian.
> >>
> >>
> >> On Tue, Aug 17, 2010 at 8:46 PM, Michel Nadeau <akaris@gmail.com>
> wrote:
> >> > I could at least drop hours/mins/sec, we don't need them, so my
> timestamp
> >> > could become 'YYYYMMDD', that would cut the number of unique terms at
> >> least
> >> > for dates.
> >> >
> >> > What about my other question about numbers : *" We do pad our numbers
> >> with
> >> > zeros though (for example: 10 becomes 00000010, etc.) because we had
> >> trouble
> >> > with sorting (100 was smaller than 2) ; is that considered as "string
> >> > sorting" ? This might explain a part of the problem."* ? Thanks.
> >> >
> >> > - Mike
> >> > akaris@gmail.com
> >> >
> >> >
> >> > On Tue, Aug 17, 2010 at 3:40 PM, Erick Erickson <
> erickerickson@gmail.com
> >> >wrote:
> >> >
> >> >> Hmmm, I glossed over your comment about sorting the top 250. There's
> >> >> no reason that wouldn't work.
> >> >>
> >> >> Well, one way for, say, dates is to store separate fields. YYYY, MM,
> DD,
> >> >> HH, MM, SS, MS. That gives you say, 100 year terms, + 12 month
> >> >> +31 days + .... for a very small total. You pay the price though by
> >> >> having to change your queries and sorts to respect all 6 fields...
> >> >>
> >> >> But I'd only really go there after seeing if other options don't
> work.
> >> >>
> >> >>
> >> >> Best
> >> >> Erick
> >> >>
> >> >> On Tue, Aug 17, 2010 at 3:35 PM, Michel Nadeau <akaris@gmail.com>
> >> wrote:
> >> >>
> >> >> > Would our approach to limit the search top 250 documents (and then
> >> sort
> >> >> > these 250 documents) work fine ? Or even 250 unique terms with a
> lot
> >> of
> >> >> > users is bad on memory when sorting ?
> >> >> >
> >> >> > We didn't look at trie fields - I will do though, thanks for the
> tip !
> >> >> >
> >> >> > We do store the original 'Data' field (only the 'SearchableData'
> field
> >> is
> >> >> > analyzed, all other fields are not analyzed), the users mainly sort
> on
> >> >> > numeric values; not a lot on string values (in fact I could
> compltely
> >> >> drop
> >> >> > the sort by string feature). We do pad our numbers with zeros
> though
> >> (for
> >> >> > example: 10 becomes 00000010, etc.) because we had trouble with
> >> sorting
> >> >> > (100
> >> >> > was smaller than 2) ; is that considered as "string sorting" ? This
> >> might
> >> >> > explain a part of the problem.
> >> >> >
> >> >> > Why/how would I reduce the count of unique terms?
> >> >> >
> >> >> >
> >> >> > - Mike
> >> >> > akaris@gmail.com
> >> >> >
> >> >> >
> >> >> > On Tue, Aug 17, 2010 at 3:28 PM, Erick Erickson <
> >> erickerickson@gmail.com
> >> >> > >wrote:
> >> >> >
> >> >> > > If you have tens of millions of documents, almost all with unique
> >> >> fields
> >> >> > > that you're sorting on, you'll chew through memory like there's
> no
> >> >> > > tomorrow.
> >> >> > >
> >> >> > > Have you looked at trie fields? See:
> >> >> > >
> >> >> > >
> >> >> >
> >> >>
> >>
> http://www.lucidimagination.com/blog/2009/05/13/exploring-lucene-and-solrs-trierange-capabilities/
> >> >> > >
> >> >> > > I'm a little concerned that the user can sort on Data. Any field
> >> used
> >> >> for
> >> >> > > sorting
> >> >> > > should NOT be analyzed, so unless you are indexing "Data"
> >> unanalyzed,
> >> >> > > that's
> >> >> > > a problem. And if you are sorting on strings unique to each
> >> document,
> >> >> > > that's
> >> >> > > also a memory hog. Not to mention whether capitalization counts.
> >> >> > >
> >> >> > > You might enumerate the terms in your index for each of the
> sortable
> >> >> > fields
> >> >> > > to figure out what the total number of unique terms each is and
> use
> >> >> that
> >> >> > as
> >> >> > > a basis for reducing their count....
> >> >> > >
> >> >> > > HTH
> >> >> > > Erick
> >> >> > >
> >> >> > > On Tue, Aug 17, 2010 at 3:05 PM, Michel Nadeau <akaris@gmail.com
> >
> >> >> wrote:
> >> >> > >
> >> >> > > > Hi Erick,
> >> >> > > >
> >> >> > > > Here's some more details about our structure. First here's an
> >> example
> >> >> > of
> >> >> > > > document in our index :
> >> >> > > >
> >> >> > > >     PrimaryKey        = SJAsfsf353JHGada66GH6 (it's a hash)
> >> >> > > >     DocType           = X
> >> >> > > >     Data              = This is the data
> >> >> > > >     SearchableContent = This is the data
> >> >> > > >     DateCreated       = <timestamp>
> >> >> > > >     DateModified      = <timestamp>
> >> >> > > >     Counter1          = 17
> >> >> > > >     Counter2          = 3
> >> >> > > >     Average           = 0.17
> >> >> > > >     Cost              = 200
> >> >> > > >
> >> >> > > > The users are able to sort on almost all fields: Data,
> >> DateCreated,
> >> >> > > > DateModified, Counter1, Counter2, Average, Cost.
> >> >> > > >
> >> >> > > > When we search, we always search on the 'SearchableContent'
> field
> >> and
> >> >> > we
> >> >> > > > have at least one filter on the DocType (because we have many
> >> >> document
> >> >> > > > types
> >> >> > > > in the same index). So a common search that would find the
> >> document
> >> >> > above
> >> >> > > > is
> >> >> > > > "data *AND DocType:X*" (we automatically add the "*AND
> DocType:X*"
> >> >> part
> >> >> > > > using Lucene Filters.
> >> >> > > >
> >> >> > > > I would say that the number of unique terms in the field being
> >> sorted
> >> >> > on
> >> >> > > is
> >> >> > > > very big - for example timestamps, almost all unique, counters,
> >> >> > average,
> >> >> > > > cost, data... so if a query finds 10M results, it's almost 10M
> >> >> > different
> >> >> > > > values to sort. About cache and warm-up queries : we don't use
> >> >> warm-up
> >> >> > > > queries -at all- because we have absolutely no idea of what
> users
> >> are
> >> >> > > going
> >> >> > > > to search for (they can search for absolutely anything). About
> >> >> > "returning
> >> >> > > > 10M" documents, right, we don't actually return the 10M
> documents,
> >> we
> >> >> > use
> >> >> > > > pagination to return documents X to Y of the 10M (and the 10M
> was
> >> >> only
> >> >> > an
> >> >> > > > example, it can be anywhere between 1K and 100M results). The
> >> >> > pagination
> >> >> > > > usually works fine and fast, our problem is really sorting.
> >> >> > > >
> >> >> > > > Our "Lucene Reader" process has 2GB of ram allowed, here's how
> I
> >> >> start
> >> >> > it
> >> >> > > -
> >> >> > > >
> >> >> > > >     java -Xmx2048m -jar LuceneReader.jar
> >> >> > > >
> >> >> > > > The problem really seems to be a ram problem, but I can't be
> 100%
> >> >> sure
> >> >> > > (any
> >> >> > > > help about how to be sure is welcome).
> >> >> > > >
> >> >> > > > Our current idea of a solution would be to get maximum 250
> results
> >> >> (the
> >> >> > > > more
> >> >> > > > relevant ones; more results than that is totally useless in our
> >> >> system)
> >> >> > > so
> >> >> > > > the sort should work fine on a small data set like that, but we
> >> want
> >> >> to
> >> >> > > > make
> >> >> > > > sure we're doing everything right before doing that so we don't
> >> run
> >> >> in
> >> >> > > the
> >> >> > > > same problems again.
> >> >> > > >
> >> >> > > > Thank you very much; let me know if you need any more details!
> >> >> > > >
> >> >> > > > - Mike
> >> >> > > > akaris@gmail.com
> >> >> > > >
> >> >> > > >
> >> >> > > > On Mon, Aug 16, 2010 at 4:01 PM, Erick Erickson <
> >> >> > erickerickson@gmail.com
> >> >> > > > >wrote:
> >> >> > > >
> >> >> > > > > Let's back up a minute. The number of matched records is not
> >> >> > > > > important when sorting, what's important is the number of
> unique
> >> >> > > > > terms in the field being sorted. Do you have any figures on
> >> that?
> >> >> One
> >> >> > > > > very common sorting issue is sorting on very fine date time
> >> >> > > resolutions,
> >> >> > > > > although your examples don't include that...
> >> >> > > > >
> >> >> > > > > Now, cache loading is an issue. The very first time you sort
> on
> >> a
> >> >> > > field,
> >> >> > > > > all the values are read into a cache. Is it possible this is
> the
> >> >> > source
> >> >> > > > > of your problems? You can cure this with warmup queries. The
> >> >> > take-away
> >> >> > > > > is that measuring the response time for the first sorted
> query
> >> is
> >> >> > > > > very misleading.
> >> >> > > > >
> >> >> > > > > Although if you're sorting on many, many, many email
> addresses,
> >> >> > > > > that could be "interesting".
> >> >> > > > >
> >> >> > > > > The comment "returning 10,000,000 documents" is, I hope, a
> >> >> > > > > misstatement. If you're trying to *return* 10M docs sorting
> >> >> > > > > is irrelevant compared to assembling that many documents. If
> >> >> > > > > you're trying to return the first 100 of 10M documents, it
> >> should
> >> >> > > > > work.
> >> >> > > > >
> >> >> > > > > Overall, we need more details on what you're sorting and what
> >> >> > > > > you're trying to return as well as how you're measuring
> before
> >> >> > > > > we can say much....
> >> >> > > > >
> >> >> > > > > Along with how much memory you're giving your JVM to work
> with,
> >> >> > > > > what "exploding" means. Are you CPU bound? IO bound?
> Swapping?
> >> >> > > > > You need to characterize what is going wrong before worrying
> >> about
> >> >> > > > > solutions......
> >> >> > > > >
> >> >> > > > > Best
> >> >> > > > > Erick
> >> >> > > > >
> >> >> > > > > On Mon, Aug 16, 2010 at 3:08 PM, Michel Nadeau <
> >> akaris@gmail.com>
> >> >> > > wrote:
> >> >> > > > >
> >> >> > > > > > Hi,
> >> >> > > > > >
> >> >> > > > > > we are building an application using Lucene and we have
> HUGE
> >> data
> >> >> > > sets
> >> >> > > > > (our
> >> >> > > > > > index contains millions and millions and millions of
> >> documents),
> >> >> > > which
> >> >> > > > > > obviously cause us very important problems when sorting. In
> >> fact,
> >> >> > we
> >> >> > > > > > disabled sorting completely because the servers were just
> >> >> exploding
> >> >> > > > when
> >> >> > > > > > trying to sort results in RAM. The users using the system
> can
> >> >> > search
> >> >> > > > for
> >> >> > > > > > whatever they want, so we never know how many results will
> be
> >> >> > > returned
> >> >> > > > -
> >> >> > > > > a
> >> >> > > > > > search can return 10 documents (no problem with sorting) or
> >> >> > > 10,000,000
> >> >> > > > > > (huge
> >> >> > > > > > sorting problems).
> >> >> > > > > >
> >> >> > > > > > I woke up this morning and had a flash : is it possible
> with
> >> >> Lucene
> >> >> > > to
> >> >> > > > > have
> >> >> > > > > > a "natural sorting" of documents? For example, let's say I
> >> have 3
> >> >> > > > columns
> >> >> > > > > I
> >> >> > > > > > want to be able to sort by : first name, last name, email;
> I
> >> >> would
> >> >> > > have
> >> >> > > > 3
> >> >> > > > > > different indexes with the very same data but with a
> different
> >> >> > > primary
> >> >> > > > > key
> >> >> > > > > > for sorting. I know it's far fetched, and I have never seen
> >> >> > anything
> >> >> > > > like
> >> >> > > > > > that since I use Lucene, but we're just desperate... how
> >> people
> >> >> do
> >> >> > to
> >> >> > > > > have
> >> >> > > > > > huge data sets, a lot of users, and sort!?
> >> >> > > > > >
> >> >> > > > > > Thanks,
> >> >> > > > > >
> >> >> > > > > > Mike
> >> >> > > > > >
> >> >> > > > >
> >> >> > > >
> >> >> > >
> >> >> >
> >> >>
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0015174bdcd62d4f19048e1ab35e--

From java-user-return-47065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 18 16:23:12 2010
Return-Path: <java-user-return-47065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13983 invoked from network); 18 Aug 2010 16:23:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 Aug 2010 16:23:03 -0000
Received: (qmail 25777 invoked by uid 500); 18 Aug 2010 16:23:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25708 invoked by uid 500); 18 Aug 2010 16:23:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25700 invoked by uid 99); 18 Aug 2010 16:23:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Aug 2010 16:23:00 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,SPF_PASS,T_FILL_THIS_FORM_SHORT,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of akaris@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Aug 2010 16:22:51 +0000
Received: by eydd26 with SMTP id d26so603217eyd.35
        for <java-user@lucene.apache.org>; Wed, 18 Aug 2010 09:22:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=gHw/KAk3YsAm4KojDettc4ohfAmQ3ntNM1L0r/ztcOE=;
        b=Cfp72XE6OJDQXYalmW0Cz665YoE6XZzDHg42egl0x+lMwPAdEapqxtybqjgqrV+PJx
         JJb4CpLeZIGtxBOikURPLyyIBIXWXUN3WhsxRwjLs4ip5XgiMCgD+uc0NDlb0A2pZAKW
         T/t5Zi3Xk5DO+2Z4sfRoIEx45ZWM+IL8JzMW8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=ElU9r34vYFSSH88j2NdVXouNoIrOBW2nnmSsBtFcgTGo1mwAjGRfypyYs6VJYVG6PI
         SIARvoLsGGA78pq1wLRXR+RIq1OoflXCsfGdX7nd9RzOUatYRyZCzTdWZw2j97qrH0mQ
         PgZo1Sh2Rh+neYFWEIrREkqTTdN6SoaF+JbrA=
Received: by 10.213.29.193 with SMTP id r1mr462393ebc.51.1282148550359; Wed,
 18 Aug 2010 09:22:30 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.14.10.153 with HTTP; Wed, 18 Aug 2010 09:22:10 -0700 (PDT)
In-Reply-To: <AANLkTi=Pi864khTCCjA+5mo94VB5kT9dUPTyaYx2ZfK+@mail.gmail.com>
References: <AANLkTimHhWx4ZEzZCuQN5p4u=kbc-s20R4qfdyBLDf=p@mail.gmail.com>
 <AANLkTi=qUOSNBP=ZpvGd=SrXtdp6NabbMFPLJF2AwGrD@mail.gmail.com>
 <AANLkTi=zB3f1+PdUBkMY11yfWcaoX=vfgcKpgm_tvb3E@mail.gmail.com>
 <AANLkTinf56RGiYE3h5nFt4TYk_J-xan++AdoSRLJggJv@mail.gmail.com>
 <AANLkTimj9xmwn8c5hUiq2E=W3j1vm-R9Jo4v_YKCBFqB@mail.gmail.com>
 <AANLkTi=VJV+mPpkGW9ye5SoHX3NncgDREUeywY8jRyt4@mail.gmail.com>
 <AANLkTi=HRhzrhaBGF4anxZXghjiE9jxuOn92boiJr+if@mail.gmail.com>
 <AANLkTikG_7Jh-LfuavzxQ928TJjru8Ds_jwKCHdbi2hH@mail.gmail.com>
 <AANLkTimsmsZ0a60iVgk-Rqsj1Wt=TQNw2_mM7R+E=Xt+@mail.gmail.com>
 <AANLkTikryzMDfxpiKQO+1LX41kAgpnR3r1PbOy=3OM7Z@mail.gmail.com> <AANLkTi=Pi864khTCCjA+5mo94VB5kT9dUPTyaYx2ZfK+@mail.gmail.com>
From: Michel Nadeau <akaris@gmail.com>
Date: Wed, 18 Aug 2010 12:22:10 -0400
Message-ID: <AANLkTimf5MGkaBk5hMJdASoEEsC1A9peyEB3tG8vNTDH@mail.gmail.com>
Subject: Re: "Natural sorting" of documents in a Lucene index - possible?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd1fa8ae4bae7048e1b783c
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd1fa8ae4bae7048e1b783c
Content-Type: text/plain; charset=ISO-8859-1

Can you guys tell me more about "warm up queries" strategies ?

I know that once you made one query, the second time is super quick because
it's in cache - but how can you do warm up queries when you don't know what
users are going to search ?

- Mike
akaris@gmail.com


On Wed, Aug 18, 2010 at 11:26 AM, Michel Nadeau <akaris@gmail.com> wrote:

> Thanks !
>
> - Mike
> akaris@gmail.com
>
>
> On Wed, Aug 18, 2010 at 10:37 AM, Ian Lea <ian.lea@gmail.com> wrote:
>
>> > But - to come back to my original question... is there any way to have a
>> > "natural order" of documents other that the DocId In Lucene?
>>
>> No.
>>
>>
>> --
>> Ian.
>>
>>
>> On Wed, Aug 18, 2010 at 3:21 PM, Michel Nadeau <akaris@gmail.com> wrote:
>> > Cool, so I'll try these things -
>> >
>> > * Replace timestamps with YYYYMMDD - will minimize unique terms count;
>> > * Use NumericField's for dates and numbers - will remove all string
>> sorting.
>> > Thanks guys!
>> >
>> > --
>> >
>> > But - to come back to my original question... is there any way to have a
>> > "natural order" of documents other that the DocId In Lucene? For
>> example, is
>> > there any way to have an index automatically sorted on a specific field,
>> > like :
>> >
>> > DocId     Count     Data
>> > -------------------------------------
>> >  5         1       First test
>> >  1         3       Otter
>> >  8         4       Test
>> >  2         8       Aloha
>> >  10        11       Zulu
>> >  9        17       Bingo
>> >  3        46       Alpha test
>> >  6       112       Tango
>> >  4       120       Charlie test
>> >  7       200       Kiwi
>> >
>> > Notice the DocId and Data random orders, but Count is sorted. That would
>> be
>> > the 'natural order' in the index, and searching for 'test' would return
>> (in
>> > that order) :
>> >
>> > DocId     Count     Data
>> > -------------------------------------
>> >  5         1       First test
>> >  3        46       Alpha test
>> >   4       120       Charlie test
>> >
>> > Already sorted on the Count.
>> >
>> > Thanks!
>> >
>> > - Mike
>> > akaris@gmail.com
>> >
>> >
>> > On Tue, Aug 17, 2010 at 4:08 PM, Ian Lea <ian.lea@gmail.com> wrote:
>> >
>> >> Using NumericField for dates and other numbers is likely to help a
>> >> lot, and removes padding problems.  I'd try that first, or just sort
>> >> the top n hits yourself.
>> >>
>> >>
>> >> --
>> >> Ian.
>> >>
>> >>
>> >> On Tue, Aug 17, 2010 at 8:46 PM, Michel Nadeau <akaris@gmail.com>
>> wrote:
>> >> > I could at least drop hours/mins/sec, we don't need them, so my
>> timestamp
>> >> > could become 'YYYYMMDD', that would cut the number of unique terms at
>> >> least
>> >> > for dates.
>> >> >
>> >> > What about my other question about numbers : *" We do pad our numbers
>> >> with
>> >> > zeros though (for example: 10 becomes 00000010, etc.) because we had
>> >> trouble
>> >> > with sorting (100 was smaller than 2) ; is that considered as "string
>> >> > sorting" ? This might explain a part of the problem."* ? Thanks.
>> >> >
>> >> > - Mike
>> >> > akaris@gmail.com
>> >> >
>> >> >
>> >> > On Tue, Aug 17, 2010 at 3:40 PM, Erick Erickson <
>> erickerickson@gmail.com
>> >> >wrote:
>> >> >
>> >> >> Hmmm, I glossed over your comment about sorting the top 250. There's
>> >> >> no reason that wouldn't work.
>> >> >>
>> >> >> Well, one way for, say, dates is to store separate fields. YYYY, MM,
>> DD,
>> >> >> HH, MM, SS, MS. That gives you say, 100 year terms, + 12 month
>> >> >> +31 days + .... for a very small total. You pay the price though by
>> >> >> having to change your queries and sorts to respect all 6 fields...
>> >> >>
>> >> >> But I'd only really go there after seeing if other options don't
>> work.
>> >> >>
>> >> >>
>> >> >> Best
>> >> >> Erick
>> >> >>
>> >> >> On Tue, Aug 17, 2010 at 3:35 PM, Michel Nadeau <akaris@gmail.com>
>> >> wrote:
>> >> >>
>> >> >> > Would our approach to limit the search top 250 documents (and then
>> >> sort
>> >> >> > these 250 documents) work fine ? Or even 250 unique terms with a
>> lot
>> >> of
>> >> >> > users is bad on memory when sorting ?
>> >> >> >
>> >> >> > We didn't look at trie fields - I will do though, thanks for the
>> tip !
>> >> >> >
>> >> >> > We do store the original 'Data' field (only the 'SearchableData'
>> field
>> >> is
>> >> >> > analyzed, all other fields are not analyzed), the users mainly
>> sort on
>> >> >> > numeric values; not a lot on string values (in fact I could
>> compltely
>> >> >> drop
>> >> >> > the sort by string feature). We do pad our numbers with zeros
>> though
>> >> (for
>> >> >> > example: 10 becomes 00000010, etc.) because we had trouble with
>> >> sorting
>> >> >> > (100
>> >> >> > was smaller than 2) ; is that considered as "string sorting" ?
>> This
>> >> might
>> >> >> > explain a part of the problem.
>> >> >> >
>> >> >> > Why/how would I reduce the count of unique terms?
>> >> >> >
>> >> >> >
>> >> >> > - Mike
>> >> >> > akaris@gmail.com
>> >> >> >
>> >> >> >
>> >> >> > On Tue, Aug 17, 2010 at 3:28 PM, Erick Erickson <
>> >> erickerickson@gmail.com
>> >> >> > >wrote:
>> >> >> >
>> >> >> > > If you have tens of millions of documents, almost all with
>> unique
>> >> >> fields
>> >> >> > > that you're sorting on, you'll chew through memory like there's
>> no
>> >> >> > > tomorrow.
>> >> >> > >
>> >> >> > > Have you looked at trie fields? See:
>> >> >> > >
>> >> >> > >
>> >> >> >
>> >> >>
>> >>
>> http://www.lucidimagination.com/blog/2009/05/13/exploring-lucene-and-solrs-trierange-capabilities/
>> >> >> > >
>> >> >> > > I'm a little concerned that the user can sort on Data. Any field
>> >> used
>> >> >> for
>> >> >> > > sorting
>> >> >> > > should NOT be analyzed, so unless you are indexing "Data"
>> >> unanalyzed,
>> >> >> > > that's
>> >> >> > > a problem. And if you are sorting on strings unique to each
>> >> document,
>> >> >> > > that's
>> >> >> > > also a memory hog. Not to mention whether capitalization counts.
>> >> >> > >
>> >> >> > > You might enumerate the terms in your index for each of the
>> sortable
>> >> >> > fields
>> >> >> > > to figure out what the total number of unique terms each is and
>> use
>> >> >> that
>> >> >> > as
>> >> >> > > a basis for reducing their count....
>> >> >> > >
>> >> >> > > HTH
>> >> >> > > Erick
>> >> >> > >
>> >> >> > > On Tue, Aug 17, 2010 at 3:05 PM, Michel Nadeau <
>> akaris@gmail.com>
>> >> >> wrote:
>> >> >> > >
>> >> >> > > > Hi Erick,
>> >> >> > > >
>> >> >> > > > Here's some more details about our structure. First here's an
>> >> example
>> >> >> > of
>> >> >> > > > document in our index :
>> >> >> > > >
>> >> >> > > >     PrimaryKey        = SJAsfsf353JHGada66GH6 (it's a hash)
>> >> >> > > >     DocType           = X
>> >> >> > > >     Data              = This is the data
>> >> >> > > >     SearchableContent = This is the data
>> >> >> > > >     DateCreated       = <timestamp>
>> >> >> > > >     DateModified      = <timestamp>
>> >> >> > > >     Counter1          = 17
>> >> >> > > >     Counter2          = 3
>> >> >> > > >     Average           = 0.17
>> >> >> > > >     Cost              = 200
>> >> >> > > >
>> >> >> > > > The users are able to sort on almost all fields: Data,
>> >> DateCreated,
>> >> >> > > > DateModified, Counter1, Counter2, Average, Cost.
>> >> >> > > >
>> >> >> > > > When we search, we always search on the 'SearchableContent'
>> field
>> >> and
>> >> >> > we
>> >> >> > > > have at least one filter on the DocType (because we have many
>> >> >> document
>> >> >> > > > types
>> >> >> > > > in the same index). So a common search that would find the
>> >> document
>> >> >> > above
>> >> >> > > > is
>> >> >> > > > "data *AND DocType:X*" (we automatically add the "*AND
>> DocType:X*"
>> >> >> part
>> >> >> > > > using Lucene Filters.
>> >> >> > > >
>> >> >> > > > I would say that the number of unique terms in the field being
>> >> sorted
>> >> >> > on
>> >> >> > > is
>> >> >> > > > very big - for example timestamps, almost all unique,
>> counters,
>> >> >> > average,
>> >> >> > > > cost, data... so if a query finds 10M results, it's almost 10M
>> >> >> > different
>> >> >> > > > values to sort. About cache and warm-up queries : we don't use
>> >> >> warm-up
>> >> >> > > > queries -at all- because we have absolutely no idea of what
>> users
>> >> are
>> >> >> > > going
>> >> >> > > > to search for (they can search for absolutely anything). About
>> >> >> > "returning
>> >> >> > > > 10M" documents, right, we don't actually return the 10M
>> documents,
>> >> we
>> >> >> > use
>> >> >> > > > pagination to return documents X to Y of the 10M (and the 10M
>> was
>> >> >> only
>> >> >> > an
>> >> >> > > > example, it can be anywhere between 1K and 100M results). The
>> >> >> > pagination
>> >> >> > > > usually works fine and fast, our problem is really sorting.
>> >> >> > > >
>> >> >> > > > Our "Lucene Reader" process has 2GB of ram allowed, here's how
>> I
>> >> >> start
>> >> >> > it
>> >> >> > > -
>> >> >> > > >
>> >> >> > > >     java -Xmx2048m -jar LuceneReader.jar
>> >> >> > > >
>> >> >> > > > The problem really seems to be a ram problem, but I can't be
>> 100%
>> >> >> sure
>> >> >> > > (any
>> >> >> > > > help about how to be sure is welcome).
>> >> >> > > >
>> >> >> > > > Our current idea of a solution would be to get maximum 250
>> results
>> >> >> (the
>> >> >> > > > more
>> >> >> > > > relevant ones; more results than that is totally useless in
>> our
>> >> >> system)
>> >> >> > > so
>> >> >> > > > the sort should work fine on a small data set like that, but
>> we
>> >> want
>> >> >> to
>> >> >> > > > make
>> >> >> > > > sure we're doing everything right before doing that so we
>> don't
>> >> run
>> >> >> in
>> >> >> > > the
>> >> >> > > > same problems again.
>> >> >> > > >
>> >> >> > > > Thank you very much; let me know if you need any more details!
>> >> >> > > >
>> >> >> > > > - Mike
>> >> >> > > > akaris@gmail.com
>> >> >> > > >
>> >> >> > > >
>> >> >> > > > On Mon, Aug 16, 2010 at 4:01 PM, Erick Erickson <
>> >> >> > erickerickson@gmail.com
>> >> >> > > > >wrote:
>> >> >> > > >
>> >> >> > > > > Let's back up a minute. The number of matched records is not
>> >> >> > > > > important when sorting, what's important is the number of
>> unique
>> >> >> > > > > terms in the field being sorted. Do you have any figures on
>> >> that?
>> >> >> One
>> >> >> > > > > very common sorting issue is sorting on very fine date time
>> >> >> > > resolutions,
>> >> >> > > > > although your examples don't include that...
>> >> >> > > > >
>> >> >> > > > > Now, cache loading is an issue. The very first time you sort
>> on
>> >> a
>> >> >> > > field,
>> >> >> > > > > all the values are read into a cache. Is it possible this is
>> the
>> >> >> > source
>> >> >> > > > > of your problems? You can cure this with warmup queries. The
>> >> >> > take-away
>> >> >> > > > > is that measuring the response time for the first sorted
>> query
>> >> is
>> >> >> > > > > very misleading.
>> >> >> > > > >
>> >> >> > > > > Although if you're sorting on many, many, many email
>> addresses,
>> >> >> > > > > that could be "interesting".
>> >> >> > > > >
>> >> >> > > > > The comment "returning 10,000,000 documents" is, I hope, a
>> >> >> > > > > misstatement. If you're trying to *return* 10M docs sorting
>> >> >> > > > > is irrelevant compared to assembling that many documents. If
>> >> >> > > > > you're trying to return the first 100 of 10M documents, it
>> >> should
>> >> >> > > > > work.
>> >> >> > > > >
>> >> >> > > > > Overall, we need more details on what you're sorting and
>> what
>> >> >> > > > > you're trying to return as well as how you're measuring
>> before
>> >> >> > > > > we can say much....
>> >> >> > > > >
>> >> >> > > > > Along with how much memory you're giving your JVM to work
>> with,
>> >> >> > > > > what "exploding" means. Are you CPU bound? IO bound?
>> Swapping?
>> >> >> > > > > You need to characterize what is going wrong before worrying
>> >> about
>> >> >> > > > > solutions......
>> >> >> > > > >
>> >> >> > > > > Best
>> >> >> > > > > Erick
>> >> >> > > > >
>> >> >> > > > > On Mon, Aug 16, 2010 at 3:08 PM, Michel Nadeau <
>> >> akaris@gmail.com>
>> >> >> > > wrote:
>> >> >> > > > >
>> >> >> > > > > > Hi,
>> >> >> > > > > >
>> >> >> > > > > > we are building an application using Lucene and we have
>> HUGE
>> >> data
>> >> >> > > sets
>> >> >> > > > > (our
>> >> >> > > > > > index contains millions and millions and millions of
>> >> documents),
>> >> >> > > which
>> >> >> > > > > > obviously cause us very important problems when sorting.
>> In
>> >> fact,
>> >> >> > we
>> >> >> > > > > > disabled sorting completely because the servers were just
>> >> >> exploding
>> >> >> > > > when
>> >> >> > > > > > trying to sort results in RAM. The users using the system
>> can
>> >> >> > search
>> >> >> > > > for
>> >> >> > > > > > whatever they want, so we never know how many results will
>> be
>> >> >> > > returned
>> >> >> > > > -
>> >> >> > > > > a
>> >> >> > > > > > search can return 10 documents (no problem with sorting)
>> or
>> >> >> > > 10,000,000
>> >> >> > > > > > (huge
>> >> >> > > > > > sorting problems).
>> >> >> > > > > >
>> >> >> > > > > > I woke up this morning and had a flash : is it possible
>> with
>> >> >> Lucene
>> >> >> > > to
>> >> >> > > > > have
>> >> >> > > > > > a "natural sorting" of documents? For example, let's say I
>> >> have 3
>> >> >> > > > columns
>> >> >> > > > > I
>> >> >> > > > > > want to be able to sort by : first name, last name, email;
>> I
>> >> >> would
>> >> >> > > have
>> >> >> > > > 3
>> >> >> > > > > > different indexes with the very same data but with a
>> different
>> >> >> > > primary
>> >> >> > > > > key
>> >> >> > > > > > for sorting. I know it's far fetched, and I have never
>> seen
>> >> >> > anything
>> >> >> > > > like
>> >> >> > > > > > that since I use Lucene, but we're just desperate... how
>> >> people
>> >> >> do
>> >> >> > to
>> >> >> > > > > have
>> >> >> > > > > > huge data sets, a lot of users, and sort!?
>> >> >> > > > > >
>> >> >> > > > > > Thanks,
>> >> >> > > > > >
>> >> >> > > > > > Mike
>> >> >> > > > > >
>> >> >> > > > >
>> >> >> > > >
>> >> >> > >
>> >> >> >
>> >> >>
>> >> >
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

--000e0cd1fa8ae4bae7048e1b783c--

From java-user-return-47066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 18 17:04:22 2010
Return-Path: <java-user-return-47066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40840 invoked from network); 18 Aug 2010 17:04:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 Aug 2010 17:04:21 -0000
Received: (qmail 78187 invoked by uid 500); 18 Aug 2010 17:04:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78070 invoked by uid 500); 18 Aug 2010 17:04:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78062 invoked by uid 99); 18 Aug 2010 17:04:19 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Aug 2010 17:04:19 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Aug 2010 17:03:56 +0000
Received: by qwk3 with SMTP id 3so883121qwk.35
        for <java-user@lucene.apache.org>; Wed, 18 Aug 2010 10:03:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=bZdyLyQ5XuKddJbsQSBQqAYAz0bE0KEF3pkfKb+26x8=;
        b=FJl2ehJlhSBKS1rkrqj3KL9s8SWa56vsSqvmgsuF3sZOT0mKpVd0R1W+cQYhRE7jXs
         XUPdX/fozVyDTue/YCfcP5D+iegHGFlrOE4OmxKlL8duYtbZMHclTIJdUnxXeEdlB4Fz
         ssTiYedheBZLtTuzPf+FUiU436fVpE2WMfdGE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=uBM0uzxi5+j4l/5KubQnB0vPo7rgWRBLyKdy06PNgS8r1JKEoyXy2jnJvcNykKmo5n
         R4j5DqM2W/KK5wP51kUbooOBvFD9VO4bPeWLwQYNxcVHEVTNXZyx4TBQ9PCt4YqbrQZq
         6ZJqfE0zEEI/OeRd1v6Zv9C9kfzgRzc3hE/Ko=
Received: by 10.229.232.6 with SMTP id js6mr6302918qcb.7.1282151015516; Wed,
 18 Aug 2010 10:03:35 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.96.200 with HTTP; Wed, 18 Aug 2010 10:03:15 -0700 (PDT)
In-Reply-To: <AANLkTimf5MGkaBk5hMJdASoEEsC1A9peyEB3tG8vNTDH@mail.gmail.com>
References: <AANLkTimHhWx4ZEzZCuQN5p4u=kbc-s20R4qfdyBLDf=p@mail.gmail.com>
 <AANLkTi=qUOSNBP=ZpvGd=SrXtdp6NabbMFPLJF2AwGrD@mail.gmail.com>
 <AANLkTi=zB3f1+PdUBkMY11yfWcaoX=vfgcKpgm_tvb3E@mail.gmail.com>
 <AANLkTinf56RGiYE3h5nFt4TYk_J-xan++AdoSRLJggJv@mail.gmail.com>
 <AANLkTimj9xmwn8c5hUiq2E=W3j1vm-R9Jo4v_YKCBFqB@mail.gmail.com>
 <AANLkTi=VJV+mPpkGW9ye5SoHX3NncgDREUeywY8jRyt4@mail.gmail.com>
 <AANLkTi=HRhzrhaBGF4anxZXghjiE9jxuOn92boiJr+if@mail.gmail.com>
 <AANLkTikG_7Jh-LfuavzxQ928TJjru8Ds_jwKCHdbi2hH@mail.gmail.com>
 <AANLkTimsmsZ0a60iVgk-Rqsj1Wt=TQNw2_mM7R+E=Xt+@mail.gmail.com>
 <AANLkTikryzMDfxpiKQO+1LX41kAgpnR3r1PbOy=3OM7Z@mail.gmail.com>
 <AANLkTi=Pi864khTCCjA+5mo94VB5kT9dUPTyaYx2ZfK+@mail.gmail.com> <AANLkTimf5MGkaBk5hMJdASoEEsC1A9peyEB3tG8vNTDH@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 18 Aug 2010 18:03:15 +0100
Message-ID: <AANLkTimyVrnOPN_E5_GAnk5iQXZVrv8xDBFH4fw8Ejef@mail.gmail.com>
Subject: Re: "Natural sorting" of documents in a Lucene index - possible?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

> Can you guys tell me more about "warm up queries" strategies ?
>
> I know that once you made one query, the second time is super quick because
> it's in cache - but how can you do warm up queries when you don't know what
> users are going to search ?

It's not so much that the hits or queries are cached (they aren't) but
that some lucene internal structures are loaded from disk.  And if you
are sorting, the field cache is also loaded.  So it usually doesn't
matter exactly what queries you use.  One strategy is to keep a list
of the last n queries and execute them.  Another is just to pick some
arbitrary queries that you know are representative of real queries
e.g. if people search on title and sort on date then use a query that
does that.


--
Ian.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 19 02:49:38 2010
Return-Path: <java-user-return-47067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5177 invoked from network); 19 Aug 2010 02:49:37 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Aug 2010 02:49:37 -0000
Received: (qmail 6272 invoked by uid 500); 19 Aug 2010 02:49:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5928 invoked by uid 500); 19 Aug 2010 02:49:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5920 invoked by uid 99); 19 Aug 2010 02:49:32 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Aug 2010 02:49:32 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.32.146.53] (HELO thomsonlearning.com) (69.32.146.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Aug 2010 02:49:10 +0000
Received: from ([10.160.3.174])
	by ohciniron02.thomsonlearning.com with ESMTP with TLS id 5502562.72195379;
	Wed, 18 Aug 2010 22:48:45 -0400
Received: from OHCINMBX01.corp.local ([10.160.3.161]) by ohcinht02.corp.local
 ([10.160.3.174]) with mapi; Wed, 18 Aug 2010 22:48:45 -0400
From: "Nader, John P" <john.nader@cengage.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 18 Aug 2010 22:48:43 -0400
Subject: Problems with Lucene 3.0.2 and Java 1.6.0_12
Thread-Topic: Problems with Lucene 3.0.2 and Java 1.6.0_12
Thread-Index: AcsvBC+pyJEXy5i/TZyYmVuu+v+QeAAYsg3wACy6Z2ADyz0qkA==
Message-ID: <70EA5691BD59734784FF872CD1B9747A15D70C0927@OHCINMBX01.corp.local>
References: <70EA5691BD59734784FF872CD1B9747A15D56588ED@OHCINMBX01.corp.local>
 <AANLkTi=DSGhFJ1tUVX2nLUAZ5WdSdtHpUdQnUu2ZyHmj@mail.gmail.com>
 <70EA5691BD59734784FF872CD1B9747A15D56BDB14@OHCINMBX01.corp.local>
 <70EA5691BD59734784FF872CD1B9747A15D56BDF74@OHCINMBX01.corp.local>
In-Reply-To: <70EA5691BD59734784FF872CD1B9747A15D56BDF74@OHCINMBX01.corp.local>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org


This is a follow up related to my original post Term browsing performance p=
roblems with our upgrade to Lucene 3.0.2.  The suggestions were helpful and=
 did give us a performance increase.  However, in a full scale environment =
under load our performance issue remained a problem.   =20

Our investigation lead us to an issue with our patch level of Java.  This i=
s not too surprising considering we were on revision 12, and the current is=
 21.  The behavior we saw was that some JVMs would come up in a state where=
 browsing ran very slowly, while others would run as expected.  The JVM wou=
ld stay in that state until it was restarted. =20

The only change we made was to upgrade our JVM to 1.6.0_21.  At that point,=
 all JVMs performed consistently with no issues.  I wanted to make sure I s=
hare this info with the forum as others may encounter similar problems.

I have no specific info about what changed between 3.0.2 from 2.4.0 that wo=
uld cause an issue with Java 1.6.0_12.  Nor do any Java release notes indic=
ate what might have been fixed to address this issue.  I strongly suspect t=
hat it is JIT compiler related and would be glad to share thoughts on this =
with anyone that is interested.=20

-John


-----Original Message-----
From: Nader, John P [mailto:john.nader@cengage.com]=20
Sent: Friday, July 30, 2010 3:17 PM
To: java-user@lucene.apache.org
Subject: RE: Term browsing much slower in Lucene 3.x.x

Mike,

We took your suggestion and refactored like this:

 TermEnum termEnum =3D indexReader.terms(new Term(field, "0"));
 TermDocs allTermDocs =3D indexReader.termDocs();

 while(termEnum.next() && termEnum.term().field().equals(field) {
   allTermsDocs.seek(termEnum);
   while(allTermDocs.next()) {
	...doo something to each doc...
   }
 }

The results were much better than creating a new TermDocs for each term.  W=
e were about 6x faster than the old algorithm in Lucene 3.0.2, and 3x faste=
r than the old algorithm in Lucene 2.4.0.

Thanks much for your help.

With respect to a 3.0.2 enhancement that would yield the same performance w=
ithout using different APIs, I'm not sure what the impact would be.  We def=
initely have proven the synchronization had a dramatic impact in our enviro=
nment.  But the synchronization in the constructor looks like it is necessa=
ry in other API calls.

BTW, that environment is Java 1.6.0_12 on 64-bit SUSE Linux with 32G of RAM=
 and using MMapDirectory.

Thanks.

-John


-----Original Message-----
From: Nader, John P [mailto:john.nader@cengage.com]=20
Sent: Thursday, July 29, 2010 5:49 PM
To: java-user@lucene.apache.org
Subject: RE: Term browsing much slower in Lucene 3.x.x

Thanks much for your response.  Yes, our terms are sorted in index-sort ord=
er.  I think you have a good suggestion, which is to get the term docs once=
 and then seek to each term.  I will try that approach and report back to t=
he forum on the results.

Like you I am surprised by the overhead of the added synchronization.  I do=
n't think is waiting on locks, but rather the memory flush and loading that=
 goes on.

-John

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: Thursday, July 29, 2010 5:55 AM
To: java-user@lucene.apache.org
Subject: Re: Term browsing much slower in Lucene 3.x.x

On Wed, Jul 28, 2010 at 2:39 PM, Nader, John P <john.nader@cengage.com> wro=
te:
> We recently upgraded from lucene 2.4.0 to lucene 3.0.2. =A0Our load testi=
ng revealed a serious performance drop specific to traversing the list of t=
erms and their associated documents for a given indexed field. =A0Our code =
looks something like this:
>
> for(Term term : terms) {
> TermDocs termDocs =3D indexReader.termDocs(term);
> while(termDocs.next()) { =A0 // =A0much slower here
> =A0 =A0int doc =3D termDocs.doc();
> =A0 =A0...do something with each doc...
> }

Is that IndexReader reading multiple segments or single segment?

> The slowness is all on the first call to TermDocs.next() for each term. =
=A0Further investigation comparing 2.4.0 and 3.0.2 revealed that there is s=
ome new synchronization on the SegmentTermDocs constructor and the SegmentR=
eader.getTermsReader(). =A0The first call to next() hits this synchronizati=
on, causing a 4x slowdown on an 8 CPU machine.

There was some added sync, however, the code within those sync blocks
is minuscule (looking up a field).  It's weird that you're seeing a 4X
hit because of this.  We could conceivably optimize this code to avoid
the sync blocks if the reader is readOnly.

> My first question is should we be using a different approach to process e=
ach term's doc list that would be more efficient? =A0The synchronization ap=
pears to be on aspects of these classes that the next() operation is not co=
ncerned with.

Are you sorting your terms in index-sort order (UTF16, ie
String.compareTo)?  This can be an important gain especially if you
have many terms.

Also, if you are working with your top reader, you should see some
perf gain by instead working w/ the sub readers directly, ie:

  for(IndexReader subReader : indexReader.getSequentialSubReaders()) {
     ...
  }

Also, instead of getting a new TermDocs every time, you should get a
single TermDocs up front (IndexReader.termDocs()), and then seek it to
your term (termDocs.seek(term)), validate the term in seek'd to in
fact matches what you asked for, then iterate its docs.

> My other question is whether there are planned performance enhancements t=
o address this loss of performance?

These APIs are very different in the next major release (4.0) of
Lucene, so except for problems spotted by users like you, there's not
much more dev happening against them.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 19 04:56:32 2010
Return-Path: <java-user-return-47068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46055 invoked from network); 19 Aug 2010 04:56:31 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Aug 2010 04:56:31 -0000
Received: (qmail 84240 invoked by uid 500); 19 Aug 2010 04:56:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83818 invoked by uid 500); 19 Aug 2010 04:56:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83810 invoked by uid 99); 19 Aug 2010 04:56:25 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Aug 2010 04:56:25 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of arunrangarajan@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Aug 2010 04:56:02 +0000
Received: by wyb35 with SMTP id 35so2125049wyb.35
        for <java-user@lucene.apache.org>; Wed, 18 Aug 2010 21:55:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=+iBWkpsK1hdU20Pc8tSb4x5KkmJkffW0bMpPceUuVBc=;
        b=j/WGn917/WJcHdyRpXZe2B6hCKfI+TyJFQcvaemek1OBlppdDVb6wjHWZKmdvZ2/Ma
         5QWtuD0btCTzSg4BfBPaATSBnMvjiy4vX3WYj+YqYOACAwrlXUK4v0l8RKpW1vriZ0uU
         zTzzKNySGR6bMZ1h80wWUVdgGWSwN+3xmluso=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=vynEEBB5zw3Oh18gMd9CcLcwd8tjZ5XC0z96BnPTzLjtVL5PneuBck/Zqs9FIwuUOz
         LqJjdhmTDl8tPEviP7MauX4kNfxm+makk76jz3p1QcI1DofQSImdjOIXKjpV6rWrVj0w
         InIhG/psTg/SUuIDcAusgsST9l8/dJHv1Fwjw=
Received: by 10.227.142.139 with SMTP id q11mr7917376wbu.103.1282193737288;
 Wed, 18 Aug 2010 21:55:37 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.44.4 with HTTP; Wed, 18 Aug 2010 21:55:17 -0700 (PDT)
In-Reply-To: <AANLkTinHR+d9D_i_xuy8poSF8WQskpBbsFzTHhHMV6-f@mail.gmail.com>
References: <AANLkTinHR+d9D_i_xuy8poSF8WQskpBbsFzTHhHMV6-f@mail.gmail.com>
From: Arun Rangarajan <arunrangarajan@gmail.com>
Date: Wed, 18 Aug 2010 21:55:17 -0700
Message-ID: <AANLkTi=QGHYXT4aeyVBbnf1HyZCV267dbYGLkaFhzDHC@mail.gmail.com>
Subject: Re: Solr SynonymFilter in Lucene analyzer
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e65a0d343e9560048e25fe21
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e65a0d343e9560048e25fe21
Content-Type: text/plain; charset=ISO-8859-1

I think the lucene WhitespaceAnalyzer I am using inside Solr's SynonymFilter
is the one that prevents multi-word synonyms like "New York" from getting
mapped to the generic synonym name like CONCEPTYcity. It appears to me that
an analyzer which recognizes that a white-space is inside a synonym like
"New York" will be required. Do I need to implement one like this or is
there already an analyzer I can use? Looks like I am missing something here,
since Solr's SynonymFilter is supposed to handle this. Can someone tell me
what is the correct way to integrate Solr's SynonymFilter within a custom
lucene analyzer? Thanks.


On Tue, Aug 17, 2010 at 4:44 PM, Arun Rangarajan
<arunrangarajan@gmail.com>wrote:

> I am trying to have multi-word synonyms work in lucene using Solr's *
> SynonymFilter*.
>
> I need to match synonyms at index time, since many of the synonym lists are
> huge. Actually they are really not synonyms, but are words that belong to a
> concept. For example, I would like to map {"New York", "Los Angeles", "New
> Orleans", "Salt Lake City"...}, a bunch of city names, to the concept called
> "city". While searching, the user query for the concept "city" will be
> translated to a keyword like, say "CONCEPTcity", which is the synonym for
> any city name.
>
> Using lucene's SynonymAnalyzer, as explained in Lucene in Action (p. 131),
> all I could match for "CONCEPTcity" is single word city names like
> "Chicago", "Seattle", "Boston", etc., It would not match multi-word city
> names like "New York", "Los Angeles", etc.,
>
> I tried using Solr's SynonymFilter in tokenStream method in a custom
> Analyzer (that extends org.apache.lucene.analysis.
> Analyzer - lucene ver. 2.9.3) using:
>
> *    public TokenStream tokenStream(String fieldName, Reader reader) {
>         TokenStream result = new SynonymFilter(
>                 new WhitespaceTokenizer(reader),
>                 synonymMap);
>         return result;
>     }
> *
> where *synonymMap* is loaded with synonyms using
>
> *synonymMap.add(conceptTerms, listOfTokens, true, true);*
>
> where *conceptTerms* is of type *ArrayList<String>* of all the terms in a
> concept and *listofTokens* is of type *List<Token>  *and contains only the
> generic synonym identifier like *CONCEPTcity*.
>
> When I print synonymMap using synonymMap.toString(), I get the output like
>
> <{New York=<{Chicago=<{Seattle=<{New
> Orleans=....<[(CONCEPTcity,0,0,type=SYNONYM),ORIG],null>}>}>}>....}>
>
> so it looks like all the synonyms are loaded. But if I search for
> "CONCEPTcity" then it says no matches found. I am not sure whether I have
> loaded the synonyms correctly in the synonymMap.
>
> Any help will be deeply appreciated. Thanks!
>

--0016e65a0d343e9560048e25fe21--

From java-user-return-47069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 19 05:28:40 2010
Return-Path: <java-user-return-47069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59216 invoked from network); 19 Aug 2010 05:28:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Aug 2010 05:28:40 -0000
Received: (qmail 12925 invoked by uid 500); 19 Aug 2010 05:28:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12573 invoked by uid 500); 19 Aug 2010 05:28:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12565 invoked by uid 99); 19 Aug 2010 05:28:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Aug 2010 05:28:34 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of goksron@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Aug 2010 05:28:28 +0000
Received: by wyb35 with SMTP id 35so2162856wyb.35
        for <java-user@lucene.apache.org>; Wed, 18 Aug 2010 22:28:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=1Soks3crdWNjcIKQPmgIo31cME7lujHFjUN43xuWoyY=;
        b=EIl+aqZeAu+F0TmVN5trUCJDyKrNn7+m+Yesy/7CRJxYpJYji8hLf03m6RMkz9PQnW
         PyUOyFW21k0lywYmaNZUgt5xiwPUuhf+QlO9/2fFTTRTSW5idtuXEFoswZenrwA8Qp4F
         5eppPkgKL3p5b9Ph4jheI2mM5V+SjMZRhvU0Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=QhoACxyIP/iR9OFpWQRhnxlb1qL+Hm6U6WexwtLrqdhb6R7Np7Whrsaf74LTu1ESTS
         M68RIZSb//d0Vf3Rjr7d1I8USn/Xd0Mu3yurz7q7wcDfPGVE+yJert6yzDSLdRL+2nyT
         2JgnSpuJ6q+zbmbE6P9p3z3eZQnaQduaIamQk=
MIME-Version: 1.0
Received: by 10.227.134.199 with SMTP id k7mr8076681wbt.51.1282195684291; Wed,
 18 Aug 2010 22:28:04 -0700 (PDT)
Received: by 10.216.139.211 with HTTP; Wed, 18 Aug 2010 22:28:04 -0700 (PDT)
In-Reply-To: <AANLkTi=QGHYXT4aeyVBbnf1HyZCV267dbYGLkaFhzDHC@mail.gmail.com>
References: <AANLkTinHR+d9D_i_xuy8poSF8WQskpBbsFzTHhHMV6-f@mail.gmail.com>
	<AANLkTi=QGHYXT4aeyVBbnf1HyZCV267dbYGLkaFhzDHC@mail.gmail.com>
Date: Wed, 18 Aug 2010 22:28:04 -0700
Message-ID: <AANLkTi=wy5fB2ncQJ=RkKzjTk3z_-kiQbDmO0jAcLtzr@mail.gmail.com>
Subject: Re: Solr SynonymFilter in Lucene analyzer
From: Lance Norskog <goksron@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Yes, you need an analyzer that leaves successive words together as one
long term. This might be easier to do with the new CharFilter tool,
which processes text before it goes to the tokenizer.

What you are doing here is similar to Parts-Of-Speech analysis, where
text analysis software parses a sentence and labels words 'Noun',
'Verb', etc. One suite stores these labels as payloads on the terms.
This might be a better way to store your categories, rather than using
the synonym filter.

On Wed, Aug 18, 2010 at 9:55 PM, Arun Rangarajan
<arunrangarajan@gmail.com> wrote:
> I think the lucene WhitespaceAnalyzer I am using inside Solr's SynonymFil=
ter
> is the one that prevents multi-word synonyms like "New York" from getting
> mapped to the generic synonym name like CONCEPTYcity. It appears to me th=
at
> an analyzer which recognizes that a white-space is inside a synonym like
> "New York" will be required. Do I need to implement one like this or is
> there already an analyzer I can use? Looks like I am missing something he=
re,
> since Solr's SynonymFilter is supposed to handle this. Can someone tell m=
e
> what is the correct way to integrate Solr's SynonymFilter within a custom
> lucene analyzer? Thanks.
>
>
> On Tue, Aug 17, 2010 at 4:44 PM, Arun Rangarajan
> <arunrangarajan@gmail.com>wrote:
>
>> I am trying to have multi-word synonyms work in lucene using Solr's *
>> SynonymFilter*.
>>
>> I need to match synonyms at index time, since many of the synonym lists =
are
>> huge. Actually they are really not synonyms, but are words that belong t=
o a
>> concept. For example, I would like to map {"New York", "Los Angeles", "N=
ew
>> Orleans", "Salt Lake City"...}, a bunch of city names, to the concept ca=
lled
>> "city". While searching, the user query for the concept "city" will be
>> translated to a keyword like, say "CONCEPTcity", which is the synonym fo=
r
>> any city name.
>>
>> Using lucene's SynonymAnalyzer, as explained in Lucene in Action (p. 131=
),
>> all I could match for "CONCEPTcity" is single word city names like
>> "Chicago", "Seattle", "Boston", etc., It would not match multi-word city
>> names like "New York", "Los Angeles", etc.,
>>
>> I tried using Solr's SynonymFilter in tokenStream method in a custom
>> Analyzer (that extends org.apache.lucene.analysis.
>> Analyzer - lucene ver. 2.9.3) using:
>>
>> * =C2=A0 =C2=A0public TokenStream tokenStream(String fieldName, Reader r=
eader) {
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 TokenStream result =3D new SynonymFilter(
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 new WhitespaceTo=
kenizer(reader),
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 synonymMap);
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 return result;
>> =C2=A0 =C2=A0 }
>> *
>> where *synonymMap* is loaded with synonyms using
>>
>> *synonymMap.add(conceptTerms, listOfTokens, true, true);*
>>
>> where *conceptTerms* is of type *ArrayList<String>* of all the terms in =
a
>> concept and *listofTokens* is of type *List<Token> =C2=A0*and contains o=
nly the
>> generic synonym identifier like *CONCEPTcity*.
>>
>> When I print synonymMap using synonymMap.toString(), I get the output li=
ke
>>
>> <{New York=3D<{Chicago=3D<{Seattle=3D<{New
>> Orleans=3D....<[(CONCEPTcity,0,0,type=3DSYNONYM),ORIG],null>}>}>}>....}>
>>
>> so it looks like all the synonyms are loaded. But if I search for
>> "CONCEPTcity" then it says no matches found. I am not sure whether I hav=
e
>> loaded the synonyms correctly in the synonymMap.
>>
>> Any help will be deeply appreciated. Thanks!
>>
>



--=20
Lance Norskog
goksron@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 19 05:52:18 2010
Return-Path: <java-user-return-47070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65324 invoked from network); 19 Aug 2010 05:52:18 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Aug 2010 05:52:18 -0000
Received: (qmail 45235 invoked by uid 500); 19 Aug 2010 05:52:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44755 invoked by uid 500); 19 Aug 2010 05:52:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44744 invoked by uid 99); 19 Aug 2010 05:52:12 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Aug 2010 05:52:12 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [122.98.10.33] (HELO KECGATE08.infosys.com) (122.98.10.33)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Aug 2010 05:51:51 +0000
X-TM-IMSS-Message-ID:<4d72901900215d23@KECGATE08.infosys.com>
Received: from blrkechub03.ad.infosys.com ([10.66.236.43]) by KECGATE08.infosys.com ([122.98.10.33]) with ESMTP (TREND IMSS SMTP Service 7.0) id 4d72901900215d23 ; Thu, 19 Aug 2010 11:23:29 +0530
Received: from PUNITPCAS01.ad.infosys.com (10.76.151.51) by
 blrkechub03.ad.infosys.com (10.66.236.43) with Microsoft SMTP Server (TLS) id
 8.2.176.0; Thu, 19 Aug 2010 11:21:29 +0530
Received: from PUNITPMBX02.ad.infosys.com ([10.76.151.22]) by
 PUNITPCAS01.ad.infosys.com ([10.76.151.51]) with mapi; Thu, 19 Aug 2010
 11:21:28 +0530
From: Shelly_Singh <Shelly_Singh@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 19 Aug 2010 11:21:27 +0530
Subject: RE: Sorting a Lucene index
Thread-Topic: Sorting a Lucene index
Thread-Index: Acs+y7mR7Edqdo62RDqMmpzo2czLWQAlqTcQ
Message-ID: <AA27F54EFDA0CE43B33EBDB7796323740CA2760D60@PUNITPMBX02.ad.infosys.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA26DAB52@PUNITPMBX02.ad.infosys.com>
 <AANLkTikjV11DwFig21TQqGVokB5g2Hy3Cd9QhuM8mxFh@mail.gmail.com>
In-Reply-To: <AANLkTikjV11DwFig21TQqGVokB5g2Hy3Cd9QhuM8mxFh@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Anshum,

I require sorted results for all my queries and the field on which I need s=
orting is fixed; so this lead to me the idea of storing in sorted order to =
avoid sorting cost with every query.

Thanks and Regards,

Shelly Singh
Center For KNowledge Driven Information Systems, Infosys
Email: shelly_singh@infosys.com
Phone: (M) 91 992 369 7200, (VoIP)2022978622

-----Original Message-----
From: Anshum [mailto:anshumg@gmail.com]=20
Sent: Wednesday, August 18, 2010 5:21 PM
To: java-user@lucene.apache.org
Subject: Re: Sorting a Lucene index

Hi Shelly,
The search results so returned are sorted either by relevance, index order,
stored field, or custom order.
As you are saying that you would not be able to maintain the index order,
 you would have to do the sort at run time.
Sorting on a stored field is not costly and you may use it comfortably. btw=
,
are you facing any issues in sort time or is it a presumption?

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Wed, Aug 18, 2010 at 5:12 PM, Shelly_Singh <Shelly_Singh@infosys.com>wro=
te:

> Hi,
>
> I have a Lucene index that contains a numeric field along with certain
> other fields. The order of incoming documents is random and un-predictabl=
e.
> As a result, while creating an index, I end up adding docs in random orde=
r
> with respect to the numeric field value.
>
> For example, documents may be added in following order:
> 12,y,d
> 100,o,p
> 1,x,y
> 23,u,i
> 31,v,m
> 22,b,m
> 109,k,l
>
> My requirement is that at search time, I want the documents in order of t=
he
> numeric field.
> One, option is to do a score/sort on the numeric field.
> But, this may be a costly operation.
>
> Hence, I am trying to find if there is some way, such that, my stored ind=
ex
> is sorted by itself.
>
> Please help.
>
> Thanks and Regards,
>
> Shelly Singh
> Center For KNowledge Driven Information Systems, Infosys
> Email: shelly_singh@infosys.com<mailto:shelly_singh@infosys.com>
> Phone: (M) 91 992 369 7200, (VoIP)2022978622
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 19 06:28:50 2010
Return-Path: <java-user-return-47071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84308 invoked from network); 19 Aug 2010 06:28:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Aug 2010 06:28:50 -0000
Received: (qmail 74817 invoked by uid 500); 19 Aug 2010 06:28:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74250 invoked by uid 500); 19 Aug 2010 06:28:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74236 invoked by uid 99); 19 Aug 2010 06:28:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Aug 2010 06:28:43 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stachoo@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Aug 2010 06:28:38 +0000
Received: by qwk3 with SMTP id 3so1714756qwk.35
        for <java-user@lucene.apache.org>; Wed, 18 Aug 2010 23:28:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:sender:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type;
        bh=LGfm27x8qLNvy2DfRgyj/mPzoyv4P5TVZ3wqKrt0rc0=;
        b=HSwbdIqxCYpMZ5eYXly3/DdMoFO8dEoZ6sb57RN8EsDQfBSoL1oIf6ybZpo8KgsrVW
         XbRTnAB0MlgEYnRlxuAXdyNtaxO95VLEYpcnj0NQ4TRqY58fSNqO+1a7p2ocJE22qQty
         iYinj/C9L0O6fI14XeyRemxnTtmQaj3bX1zyU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type;
        b=GGr/SAecVv7Sn+RTs6UrFxEoPoY0x6bHidLlkcfHHiGvydY7zpj/W9jClKvkiuuY5e
         uB8HqBO8cuYxbOVCN3N4ApidD7hMq51mIMcYybq5Fo7AvwHZRfHsvtmYUr+/cC/Sqa9X
         fFZmHspfyQcCJlCbyporVqssLWDTGIhkIt8NI=
MIME-Version: 1.0
Received: by 10.229.245.1 with SMTP id ls1mr6921817qcb.112.1282199297431; Wed,
 18 Aug 2010 23:28:17 -0700 (PDT)
Sender: stachoo@gmail.com
Received: by 10.229.110.11 with HTTP; Wed, 18 Aug 2010 23:28:17 -0700 (PDT)
In-Reply-To: <67B9FB634299E5469D36BF5B3537F024C2D07A@pwex01.zoo.hmsonline.com>
References: <67B9FB634299E5469D36BF5B3537F02409524C@pwex01.zoo.hmsonline.com>
	<50725D21-336A-4575-A939-8ABFF4F419CD@apache.org>
	<67B9FB634299E5469D36BF5B3537F024C2D07A@pwex01.zoo.hmsonline.com>
Date: Thu, 19 Aug 2010 08:28:17 +0200
X-Google-Sender-Auth: Z7H_2GILIgUBossCdmSCIbaMS7w
Message-ID: <AANLkTinB1_bUrYDgrEjGvvufL9EowqyNJxFLRuQVWzwp@mail.gmail.com>
Subject: Re: cluster documents based on fields' values
From: Stanislaw Osinski <stanislaw.osinski@carrotsearch.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016363b8b88a797b2048e2749bc

--0016363b8b88a797b2048e2749bc
Content-Type: text/plain; charset=ISO-8859-1

>
> A colleague of mine also discovered solr's clustering component -
> http://wiki.apache.org/solr/ClusteringComponent. It's still labeled as
> experimental - does anybody have experience with it?
>

The clustering component is based on the Carrot2 project (
project.carrot2.org). Carrot2 has been around for many years and is a mature
piece of software. However, the scope of the clustering component is
currently limited to post-retrieval clustering, ie. clustering of search
results, not the whole index. If you're looking for large-scale clustering,
Mahout would be the way to go.

Cheers,

Stanislaw

--0016363b8b88a797b2048e2749bc--

From java-user-return-47072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 19 06:43:51 2010
Return-Path: <java-user-return-47072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87931 invoked from network); 19 Aug 2010 06:43:51 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Aug 2010 06:43:51 -0000
Received: (qmail 84253 invoked by uid 500); 19 Aug 2010 06:43:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82570 invoked by uid 500); 19 Aug 2010 06:43:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82562 invoked by uid 99); 19 Aug 2010 06:43:44 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Aug 2010 06:43:44 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Aug 2010 06:43:22 +0000
Received: by iwn35 with SMTP id 35so2041053iwn.35
        for <java-user@lucene.apache.org>; Wed, 18 Aug 2010 23:43:00 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.19.7 with SMTP id y7mr10404126iba.152.1282200180411; Wed,
 18 Aug 2010 23:43:00 -0700 (PDT)
Received: by 10.231.190.68 with HTTP; Wed, 18 Aug 2010 23:43:00 -0700 (PDT)
Date: Thu, 19 Aug 2010 13:43:00 +0700
Message-ID: <AANLkTimxW7FgZ8AduBWhy56aE9wLjYNFvk1-PLZpnLAF@mail.gmail.com>
Subject: asking about incremental update
From: Yakob <jacobian@opensuse-id.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

hello all,
you may remember me as the one who ask about how to understand lucene
in the previous email,but I have now been able to create a sample
application of lucene. I read the book and able to test it. which to
me is very great, as I am a new learner.

here is my proof.

http://jacobian.web.id/2010/08/09/how-to-use-lucene-part-1/

but now I am taking lucene to a higher level, I was tasked to create
an index that can update itself. it was called incremental update.
basically lucene will index the text file periodically and will store
the index first in memory then after a while it will be store on the
harddisk.

so anyone can give me any idea of how these things can be done? maybe
there is a sample application out there that I might have miss but can
be of great importance for me to learn about this incremental update.

any help would be greatly appreciated.

-- 
http://jacobian.web.id

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 19 08:31:42 2010
Return-Path: <java-user-return-47073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28343 invoked from network); 19 Aug 2010 08:31:42 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Aug 2010 08:31:42 -0000
Received: (qmail 93515 invoked by uid 500); 19 Aug 2010 08:31:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93408 invoked by uid 500); 19 Aug 2010 08:31:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93396 invoked by uid 99); 19 Aug 2010 08:31:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Aug 2010 08:31:33 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of findbestopensource@gmail.com designates 209.85.210.48 as permitted sender)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Aug 2010 08:31:29 +0000
Received: by pzk4 with SMTP id 4so865660pzk.35
        for <java-user@lucene.apache.org>; Thu, 19 Aug 2010 01:31:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=6tBPyKLsnDPX5a4pc0vkMQ0txjDEVoD4+tKkEkfU0GI=;
        b=gJr0e/++YB6Eg1X2OVnCCvAz5x4vO3FkfyVydtbV9LgGXFILHuTPkTjZTDQ6QRiTj6
         DpvuTkpxOurKCw1nQxWrB+mpwXSGuXOO9Bqp01p6yxmFHqKgUZLIAzzKs6nSfr0geY7L
         rA+CnP6kyoVA2w0abhs5/TDYcii1AUQi3YKh0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=kcS9G9gClmjPz4W216Gm703iC28Idl4s3cA6lhmfA8psBuwkZCTdg10CtvJtfGZFuf
         J9AJ/+gtt7JkxATTQ/sCWLm53G87bqQK6m0npIV1UIkUWTtBaiX3vw+GVXE0V5+N21Yn
         lNXWe8C7vDtHc9OvECP8T9AC9X6aZf/1I12Vg=
MIME-Version: 1.0
Received: by 10.142.154.11 with SMTP id b11mr8129509wfe.168.1282206668992;
 Thu, 19 Aug 2010 01:31:08 -0700 (PDT)
Received: by 10.142.195.7 with HTTP; Thu, 19 Aug 2010 01:31:08 -0700 (PDT)
In-Reply-To: <AA27F54EFDA0CE43B33EBDB7796323740CA2760D60@PUNITPMBX02.ad.infosys.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA26DAB52@PUNITPMBX02.ad.infosys.com>
	<AANLkTikjV11DwFig21TQqGVokB5g2Hy3Cd9QhuM8mxFh@mail.gmail.com>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2760D60@PUNITPMBX02.ad.infosys.com>
Date: Thu, 19 Aug 2010 14:01:08 +0530
Message-ID: <AANLkTi=eCxwXQJdaeKqrFi_Q9+dUSwc7_7cn8PNw1TX-@mail.gmail.com>
Subject: Re: Sorting a Lucene index
From: findbestopensource <findbestopensource@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi Shelly,

Have you tried sorting in your queries. Is it creating in any issues?
Once you open a reader and warm your search with sorting then
fieldcache will be loaded for that field. You could see more usage of
RAM. You could do as many queries with sorting till you reopen the
reader.

If you add document according to increasing / decreasing order then
you could prefer sorting on INDEX_ORDER basically it does sorting on
document number which is incremental for every document. Try if could
control, the way you insert.

12,y,d
100,o,p
1,x,y
23,u,i
31,v,m
22,b,m
109,k,l

According to your document, You could use short integer or string as
your sort field. You need to worry if you use long or date time
sorting as it involves more size.

Regards
Aditya
www.findbestopensource.com


On Thu, Aug 19, 2010 at 11:21 AM, Shelly_Singh <Shelly_Singh@infosys.com> w=
rote:
> Hi Anshum,
>
> I require sorted results for all my queries and the field on which I need=
 sorting is fixed; so this lead to me the idea of storing in sorted order t=
o avoid sorting cost with every query.
>
> Thanks and Regards,
>
> Shelly Singh
> Center For KNowledge Driven Information Systems, Infosys
> Email: shelly_singh@infosys.com
> Phone: (M) 91 992 369 7200, (VoIP)2022978622
>
> -----Original Message-----
> From: Anshum [mailto:anshumg@gmail.com]
> Sent: Wednesday, August 18, 2010 5:21 PM
> To: java-user@lucene.apache.org
> Subject: Re: Sorting a Lucene index
>
> Hi Shelly,
> The search results so returned are sorted either by relevance, index orde=
r,
> stored field, or custom order.
> As you are saying that you would not be able to maintain the index order,
> =A0you would have to do the sort at run time.
> Sorting on a stored field is not costly and you may use it comfortably. b=
tw,
> are you facing any issues in sort time or is it a presumption?
>
> --
> Anshum Gupta
> http://ai-cafe.blogspot.com
>
>
> On Wed, Aug 18, 2010 at 5:12 PM, Shelly_Singh <Shelly_Singh@infosys.com>w=
rote:
>
>> Hi,
>>
>> I have a Lucene index that contains a numeric field along with certain
>> other fields. The order of incoming documents is random and un-predictab=
le.
>> As a result, while creating an index, I end up adding docs in random ord=
er
>> with respect to the numeric field value.
>>
>> For example, documents may be added in following order:
>> 12,y,d
>> 100,o,p
>> 1,x,y
>> 23,u,i
>> 31,v,m
>> 22,b,m
>> 109,k,l
>>
>> My requirement is that at search time, I want the documents in order of =
the
>> numeric field.
>> One, option is to do a score/sort on the numeric field.
>> But, this may be a costly operation.
>>
>> Hence, I am trying to find if there is some way, such that, my stored in=
dex
>> is sorted by itself.
>>
>> Please help.
>>
>> Thanks and Regards,
>>
>> Shelly Singh
>> Center For KNowledge Driven Information Systems, Infosys
>> Email: shelly_singh@infosys.com<mailto:shelly_singh@infosys.com>
>> Phone: (M) 91 992 369 7200, (VoIP)2022978622
>>
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 19 08:43:27 2010
Return-Path: <java-user-return-47074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33194 invoked from network); 19 Aug 2010 08:43:27 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Aug 2010 08:43:27 -0000
Received: (qmail 4827 invoked by uid 500); 19 Aug 2010 08:43:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4505 invoked by uid 500); 19 Aug 2010 08:43:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4497 invoked by uid 99); 19 Aug 2010 08:43:21 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Aug 2010 08:43:21 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of findbestopensource@gmail.com designates 209.85.210.48 as permitted sender)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Aug 2010 08:43:01 +0000
Received: by pzk4 with SMTP id 4so870488pzk.35
        for <java-user@lucene.apache.org>; Thu, 19 Aug 2010 01:42:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=gKilKl4WkSJmrWEcSop8FbRKDEIfvSMs59CXDKnaMSw=;
        b=yGxtl4PpcFxN5oOJgpW+0KTMF+a8lBigsEoVVGMAniPXTd5opmJAR3zdie1zQJcEqC
         kWm1KdvKmhU/gune6sppM2/ag+lDfHPM6yRp7QeYa5lv8RlbPaXtU5IrKJHfwm7F2Jxr
         PtQRX2hjmApeUjWK/VYY5f2MhiwLuABMvKe4E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=UoRo076lzuTKcNv8Y2pjCimGHVQoE7PrYd98hT7EYnnyHA9KFYIvRR4kNg8uqf/NWb
         /W0OZOPqknJqVKEbm+2BAbqxA2BE9VYnLaBJF6ULoltyzZed9RxAEX5mO/wOjDucFXE8
         vOookqF2Yc10PjlB9/NhpwIEmyLZgoNXJbwPY=
MIME-Version: 1.0
Received: by 10.142.178.7 with SMTP id a7mr8040569wff.314.1282207359925; Thu,
 19 Aug 2010 01:42:39 -0700 (PDT)
Received: by 10.142.195.7 with HTTP; Thu, 19 Aug 2010 01:42:39 -0700 (PDT)
In-Reply-To: <AANLkTimxW7FgZ8AduBWhy56aE9wLjYNFvk1-PLZpnLAF@mail.gmail.com>
References: <AANLkTimxW7FgZ8AduBWhy56aE9wLjYNFvk1-PLZpnLAF@mail.gmail.com>
Date: Thu, 19 Aug 2010 14:12:39 +0530
Message-ID: <AANLkTikA3W6N=RBCgxW-1pFCnYEQYP=uJJESYzL674Mq@mail.gmail.com>
Subject: Re: asking about incremental update
From: findbestopensource <findbestopensource@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi jacobian,

Lucene will not do incremental update by iteself. Lucene is just a
library. Your app should periodically add the content to the index and
once done, reopen the reader to get your changes reflected.

Regards
Aditya
www.findbestopensource.com


On Thu, Aug 19, 2010 at 12:13 PM, Yakob <jacobian@opensuse-id.org> wrote:
> hello all,
> you may remember me as the one who ask about how to understand lucene
> in the previous email,but I have now been able to create a sample
> application of lucene. I read the book and able to test it. which to
> me is very great, as I am a new learner.
>
> here is my proof.
>
> http://jacobian.web.id/2010/08/09/how-to-use-lucene-part-1/
>
> but now I am taking lucene to a higher level, I was tasked to create
> an index that can update itself. it was called incremental update.
> basically lucene will index the text file periodically and will store
> the index first in memory then after a while it will be store on the
> harddisk.
>
> so anyone can give me any idea of how these things can be done? maybe
> there is a sample application out there that I might have miss but can
> be of great importance for me to learn about this incremental update.
>
> any help would be greatly appreciated.
>
> --
> http://jacobian.web.id
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 19 09:39:07 2010
Return-Path: <java-user-return-47075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55297 invoked from network); 19 Aug 2010 09:39:07 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Aug 2010 09:39:07 -0000
Received: (qmail 67432 invoked by uid 500); 19 Aug 2010 09:39:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66934 invoked by uid 500); 19 Aug 2010 09:39:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66926 invoked by uid 99); 19 Aug 2010 09:39:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Aug 2010 09:39:00 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Aug 2010 09:38:55 +0000
Received: by wyb35 with SMTP id 35so2452018wyb.35
        for <java-user@lucene.apache.org>; Thu, 19 Aug 2010 02:38:33 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.137.101 with SMTP id x79mr8108890wei.48.1282210713441;
 Thu, 19 Aug 2010 02:38:33 -0700 (PDT)
Received: by 10.216.9.2 with HTTP; Thu, 19 Aug 2010 02:38:33 -0700 (PDT)
In-Reply-To: <70EA5691BD59734784FF872CD1B9747A15D70C0927@OHCINMBX01.corp.local>
References: <70EA5691BD59734784FF872CD1B9747A15D56588ED@OHCINMBX01.corp.local>
	<AANLkTi=DSGhFJ1tUVX2nLUAZ5WdSdtHpUdQnUu2ZyHmj@mail.gmail.com>
	<70EA5691BD59734784FF872CD1B9747A15D56BDB14@OHCINMBX01.corp.local>
	<70EA5691BD59734784FF872CD1B9747A15D56BDF74@OHCINMBX01.corp.local>
	<70EA5691BD59734784FF872CD1B9747A15D70C0927@OHCINMBX01.corp.local>
Date: Thu, 19 Aug 2010 05:38:33 -0400
Message-ID: <AANLkTinnodJS4s6sw9EB06NDrEF2S6Br9R+hQpqnVzQd@mail.gmail.com>
Subject: Re: Problems with Lucene 3.0.2 and Java 1.6.0_12
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Phew... thanks for bringing closure!  And, good sleuthing.

So the takeaway is JRE 1.6.0_12 =3D BAD and JRE 1.6.0_21 =3D GOOD.

Mike

On Wed, Aug 18, 2010 at 10:48 PM, Nader, John P <john.nader@cengage.com> wr=
ote:
>
> This is a follow up related to my original post Term browsing performance=
 problems with our upgrade to Lucene 3.0.2. =A0The suggestions were helpful=
 and did give us a performance increase. =A0However, in a full scale enviro=
nment under load our performance issue remained a problem.
>
> Our investigation lead us to an issue with our patch level of Java. =A0Th=
is is not too surprising considering we were on revision 12, and the curren=
t is 21. =A0The behavior we saw was that some JVMs would come up in a state=
 where browsing ran very slowly, while others would run as expected. =A0The=
 JVM would stay in that state until it was restarted.
>
> The only change we made was to upgrade our JVM to 1.6.0_21. =A0At that po=
int, all JVMs performed consistently with no issues. =A0I wanted to make su=
re I share this info with the forum as others may encounter similar problem=
s.
>
> I have no specific info about what changed between 3.0.2 from 2.4.0 that =
would cause an issue with Java 1.6.0_12. =A0Nor do any Java release notes i=
ndicate what might have been fixed to address this issue. =A0I strongly sus=
pect that it is JIT compiler related and would be glad to share thoughts on=
 this with anyone that is interested.
>
> -John
>
>
> -----Original Message-----
> From: Nader, John P [mailto:john.nader@cengage.com]
> Sent: Friday, July 30, 2010 3:17 PM
> To: java-user@lucene.apache.org
> Subject: RE: Term browsing much slower in Lucene 3.x.x
>
> Mike,
>
> We took your suggestion and refactored like this:
>
> =A0TermEnum termEnum =3D indexReader.terms(new Term(field, "0"));
> =A0TermDocs allTermDocs =3D indexReader.termDocs();
>
> =A0while(termEnum.next() && termEnum.term().field().equals(field) {
> =A0 allTermsDocs.seek(termEnum);
> =A0 while(allTermDocs.next()) {
> =A0 =A0 =A0 =A0...doo something to each doc...
> =A0 }
> =A0}
>
> The results were much better than creating a new TermDocs for each term. =
=A0We were about 6x faster than the old algorithm in Lucene 3.0.2, and 3x f=
aster than the old algorithm in Lucene 2.4.0.
>
> Thanks much for your help.
>
> With respect to a 3.0.2 enhancement that would yield the same performance=
 without using different APIs, I'm not sure what the impact would be. =A0We=
 definitely have proven the synchronization had a dramatic impact in our en=
vironment. =A0But the synchronization in the constructor looks like it is n=
ecessary in other API calls.
>
> BTW, that environment is Java 1.6.0_12 on 64-bit SUSE Linux with 32G of R=
AM and using MMapDirectory.
>
> Thanks.
>
> -John
>
>
> -----Original Message-----
> From: Nader, John P [mailto:john.nader@cengage.com]
> Sent: Thursday, July 29, 2010 5:49 PM
> To: java-user@lucene.apache.org
> Subject: RE: Term browsing much slower in Lucene 3.x.x
>
> Thanks much for your response. =A0Yes, our terms are sorted in index-sort=
 order. =A0I think you have a good suggestion, which is to get the term doc=
s once and then seek to each term. =A0I will try that approach and report b=
ack to the forum on the results.
>
> Like you I am surprised by the overhead of the added synchronization. =A0=
I don't think is waiting on locks, but rather the memory flush and loading =
that goes on.
>
> -John
>
> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: Thursday, July 29, 2010 5:55 AM
> To: java-user@lucene.apache.org
> Subject: Re: Term browsing much slower in Lucene 3.x.x
>
> On Wed, Jul 28, 2010 at 2:39 PM, Nader, John P <john.nader@cengage.com> w=
rote:
>> We recently upgraded from lucene 2.4.0 to lucene 3.0.2. =A0Our load test=
ing revealed a serious performance drop specific to traversing the list of =
terms and their associated documents for a given indexed field. =A0Our code=
 looks something like this:
>>
>> for(Term term : terms) {
>> TermDocs termDocs =3D indexReader.termDocs(term);
>> while(termDocs.next()) { =A0 // =A0much slower here
>> =A0 =A0int doc =3D termDocs.doc();
>> =A0 =A0...do something with each doc...
>> }
>
> Is that IndexReader reading multiple segments or single segment?
>
>> The slowness is all on the first call to TermDocs.next() for each term. =
=A0Further investigation comparing 2.4.0 and 3.0.2 revealed that there is s=
ome new synchronization on the SegmentTermDocs constructor and the SegmentR=
eader.getTermsReader(). =A0The first call to next() hits this synchronizati=
on, causing a 4x slowdown on an 8 CPU machine.
>
> There was some added sync, however, the code within those sync blocks
> is minuscule (looking up a field). =A0It's weird that you're seeing a 4X
> hit because of this. =A0We could conceivably optimize this code to avoid
> the sync blocks if the reader is readOnly.
>
>> My first question is should we be using a different approach to process =
each term's doc list that would be more efficient? =A0The synchronization a=
ppears to be on aspects of these classes that the next() operation is not c=
oncerned with.
>
> Are you sorting your terms in index-sort order (UTF16, ie
> String.compareTo)? =A0This can be an important gain especially if you
> have many terms.
>
> Also, if you are working with your top reader, you should see some
> perf gain by instead working w/ the sub readers directly, ie:
>
> =A0for(IndexReader subReader : indexReader.getSequentialSubReaders()) {
> =A0 =A0 ...
> =A0}
>
> Also, instead of getting a new TermDocs every time, you should get a
> single TermDocs up front (IndexReader.termDocs()), and then seek it to
> your term (termDocs.seek(term)), validate the term in seek'd to in
> fact matches what you asked for, then iterate its docs.
>
>> My other question is whether there are planned performance enhancements =
to address this loss of performance?
>
> These APIs are very different in the next major release (4.0) of
> Lucene, so except for problems spotted by users like you, there's not
> much more dev happening against them.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 19 11:55:48 2010
Return-Path: <java-user-return-47076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4463 invoked from network); 19 Aug 2010 11:55:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Aug 2010 11:55:47 -0000
Received: (qmail 2990 invoked by uid 500); 19 Aug 2010 11:55:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2431 invoked by uid 500); 19 Aug 2010 11:55:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2423 invoked by uid 99); 19 Aug 2010 11:55:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Aug 2010 11:55:40 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Aug 2010 11:55:35 +0000
Received: by iwn35 with SMTP id 35so2361065iwn.35
        for <java-user@lucene.apache.org>; Thu, 19 Aug 2010 04:55:15 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.174.206 with SMTP id u14mr11063794ibz.103.1282218914945;
 Thu, 19 Aug 2010 04:55:14 -0700 (PDT)
Received: by 10.231.190.68 with HTTP; Thu, 19 Aug 2010 04:55:14 -0700 (PDT)
In-Reply-To: <AANLkTikA3W6N=RBCgxW-1pFCnYEQYP=uJJESYzL674Mq@mail.gmail.com>
References: <AANLkTimxW7FgZ8AduBWhy56aE9wLjYNFvk1-PLZpnLAF@mail.gmail.com>
	<AANLkTikA3W6N=RBCgxW-1pFCnYEQYP=uJJESYzL674Mq@mail.gmail.com>
Date: Thu, 19 Aug 2010 18:55:14 +0700
Message-ID: <AANLkTimL-JQ6-FywxzKMK2ikGRDXq0kfcLLufDtsrM=g@mail.gmail.com>
Subject: Re: asking about incremental update
From: Yakob <jacobian@opensuse-id.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

do you reckon I should use a timer or a thread instead to periodically
update the index?

On 8/19/10, findbestopensource <findbestopensource@gmail.com> wrote:
> Hi jacobian,
>
> Lucene will not do incremental update by iteself. Lucene is just a
> library. Your app should periodically add the content to the index and
> once done, reopen the reader to get your changes reflected.
>
> Regards
> Aditya
> www.findbestopensource.com


-- 
http://jacobian.web.id

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 19 13:48:58 2010
Return-Path: <java-user-return-47077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60307 invoked from network); 19 Aug 2010 13:48:58 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Aug 2010 13:48:58 -0000
Received: (qmail 66812 invoked by uid 500); 19 Aug 2010 13:48:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66334 invoked by uid 500); 19 Aug 2010 13:48:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66317 invoked by uid 99); 19 Aug 2010 13:48:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Aug 2010 13:48:51 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Aug 2010 13:48:47 +0000
Received: by qwk3 with SMTP id 3so2172273qwk.35
        for <java-user@lucene.apache.org>; Thu, 19 Aug 2010 06:48:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=tpHJD5/7x9NQfs1vdDQMt4E+81XSSRIIud9UlgY0hZM=;
        b=KBU7E2PDT93edFDPEJMaf3ayWwLhJGVbU8bsw4EhexB+LKpgIClvUtAhYqfZCC71A3
         WsxqNHftQQ5QxPL/wVNvZTs+hTu8K2ybYbf6r2QvbCq2SZDAm3xYy/MgIoSJDkG+dsax
         2YbenvMxMdTej012mK0cCXgcFVHJouP/wdKgQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=CDqdWxxPHei1YMOP/grpqT4jcApaJLo6rgRjEPGIg3BNlVxJYt82s71Wv+c+tkr4YL
         e0mC3rKkKwrIMWIlndC14WdITcdiPunIaWU/s6fAPcpCbKM4KkR6kmBQ+/a7Fl6UnrNe
         d0R9SL3jsc6Pwn6Nm/gDeE8B6CQ0GuHX0Wp+c=
MIME-Version: 1.0
Received: by 10.224.36.204 with SMTP id u12mr6488605qad.134.1282225706064;
 Thu, 19 Aug 2010 06:48:26 -0700 (PDT)
Received: by 10.229.186.83 with HTTP; Thu, 19 Aug 2010 06:48:25 -0700 (PDT)
In-Reply-To: <AA27F54EFDA0CE43B33EBDB7796323740CA2760D60@PUNITPMBX02.ad.infosys.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA26DAB52@PUNITPMBX02.ad.infosys.com>
	<AANLkTikjV11DwFig21TQqGVokB5g2Hy3Cd9QhuM8mxFh@mail.gmail.com>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2760D60@PUNITPMBX02.ad.infosys.com>
Date: Thu, 19 Aug 2010 09:48:25 -0400
Message-ID: <AANLkTink0QeB+2PpzwFjztZg_1VxwoEjjVrFA9SPwWfj@mail.gmail.com>
Subject: Re: Sorting a Lucene index
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175caad2bb66cf048e2d6f71

--0015175caad2bb66cf048e2d6f71
Content-Type: text/plain; charset=ISO-8859-1

You haven't yet told us how many documents you're talking about here, so
it's
hard to have a good idea of what solutions are. That said, I'd just try
sorting first.
The sorting cache size will be something like (sizeof(int or long)) *
(number of documents).
Measure (remember to measure the response after query warmups, the first
few will be slower because they fill up the cache) THEN fix iff there's a
problem.

And just forget the idea of inserting your documents in the correct order
<G>. You
stated that the documents come in in random order. Document IDs are assigned
internally to Lucene, and monotonically increasing. I sure don't see how you
can
reconcile those two things...

But again, just try it with sorting on the numeric field and only fix things
if you have a
problem. Lots of work has been put into making Lucene fast, by very bright
people. See
if they've already solved your problem for you...

Best
Erick.


On Thu, Aug 19, 2010 at 1:51 AM, Shelly_Singh <Shelly_Singh@infosys.com>wrote:

> Hi Anshum,
>
> I require sorted results for all my queries and the field on which I need
> sorting is fixed; so this lead to me the idea of storing in sorted order to
> avoid sorting cost with every query.
>
> Thanks and Regards,
>
> Shelly Singh
> Center For KNowledge Driven Information Systems, Infosys
> Email: shelly_singh@infosys.com
> Phone: (M) 91 992 369 7200, (VoIP)2022978622
>
> -----Original Message-----
> From: Anshum [mailto:anshumg@gmail.com]
> Sent: Wednesday, August 18, 2010 5:21 PM
> To: java-user@lucene.apache.org
> Subject: Re: Sorting a Lucene index
>
> Hi Shelly,
> The search results so returned are sorted either by relevance, index order,
> stored field, or custom order.
> As you are saying that you would not be able to maintain the index order,
>  you would have to do the sort at run time.
> Sorting on a stored field is not costly and you may use it comfortably.
> btw,
> are you facing any issues in sort time or is it a presumption?
>
> --
> Anshum Gupta
> http://ai-cafe.blogspot.com
>
>
> On Wed, Aug 18, 2010 at 5:12 PM, Shelly_Singh <Shelly_Singh@infosys.com
> >wrote:
>
> > Hi,
> >
> > I have a Lucene index that contains a numeric field along with certain
> > other fields. The order of incoming documents is random and
> un-predictable.
> > As a result, while creating an index, I end up adding docs in random
> order
> > with respect to the numeric field value.
> >
> > For example, documents may be added in following order:
> > 12,y,d
> > 100,o,p
> > 1,x,y
> > 23,u,i
> > 31,v,m
> > 22,b,m
> > 109,k,l
> >
> > My requirement is that at search time, I want the documents in order of
> the
> > numeric field.
> > One, option is to do a score/sort on the numeric field.
> > But, this may be a costly operation.
> >
> > Hence, I am trying to find if there is some way, such that, my stored
> index
> > is sorted by itself.
> >
> > Please help.
> >
> > Thanks and Regards,
> >
> > Shelly Singh
> > Center For KNowledge Driven Information Systems, Infosys
> > Email: shelly_singh@infosys.com<mailto:shelly_singh@infosys.com>
> > Phone: (M) 91 992 369 7200, (VoIP)2022978622
> >
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0015175caad2bb66cf048e2d6f71--

From java-user-return-47078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 19 15:40:51 2010
Return-Path: <java-user-return-47078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34239 invoked from network); 19 Aug 2010 15:40:51 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Aug 2010 15:40:51 -0000
Received: (qmail 8966 invoked by uid 500); 19 Aug 2010 15:40:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8890 invoked by uid 500); 19 Aug 2010 15:40:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8882 invoked by uid 99); 19 Aug 2010 15:40:48 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Aug 2010 15:40:48 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of algoharyalex@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Aug 2010 15:40:24 +0000
Received: by qyk12 with SMTP id 12so3683990qyk.14
        for <java-user@lucene.apache.org>; Thu, 19 Aug 2010 08:40:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type;
        bh=fjrYkOj08TqE8fFixq18hm8AFfxsj7IUjKTiTWYS7Is=;
        b=n+XXjNlxCv/UMyaTmBexLvGpE5OPIrkVr3qNV+P6XXIUGUbkRqHTCDb3gzMQs9ph58
         BnA42MeYC67cSMJLGpjw20/Xj4K0WlyknXmkBIjqMwBDXuUl6AHQQjSO576LjX2R+Ckh
         D2sfi0zgM2BjoaAuFOwzFMOg2JKKXQ86HNsvI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=fpzwgq+NFkZ5igddHaqY+p0xs0CzjruGixm/XyoYmHN+YhBt4ZxsVpWluLAIASdd0i
         id5DU/Rc01DGvcrbi+bTpnjxfeEAsZVGJ0HL+KYq6SijPt0c+wYEizXFLe4UD3rnH3o2
         Z64cAgpyCrt6eeN709zX1x0dqTx0obHsQfUSQ=
Received: by 10.229.224.76 with SMTP id in12mr17056qcb.81.1282232403201; Thu,
 19 Aug 2010 08:40:03 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.38.82 with HTTP; Thu, 19 Aug 2010 08:39:42 -0700 (PDT)
From: ahmed algohary <algoharyalex@gmail.com>
Date: Thu, 19 Aug 2010 17:39:42 +0200
Message-ID: <AANLkTikRQQEp3-ambcuhLOdEP4h2Kq5oEixm9CpBTMNH@mail.gmail.com>
Subject: Calculate Term Co-occurrence Matrix
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016363b887ae9a421048e2efea8
X-Virus-Checked: Checked by ClamAV on apache.org

--0016363b887ae9a421048e2efea8
Content-Type: text/plain; charset=ISO-8859-1

Hi all,

I need to know if there is a Lucene plug-in or a Lucene-based API for
calculating the term co-occurrence matrix for a given text corpus.

Thanks!

--
Ahmed

--0016363b887ae9a421048e2efea8--

From java-user-return-47079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 19 18:02:31 2010
Return-Path: <java-user-return-47079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19673 invoked from network); 19 Aug 2010 18:02:31 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Aug 2010 18:02:31 -0000
Received: (qmail 95865 invoked by uid 500); 19 Aug 2010 18:02:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95778 invoked by uid 500); 19 Aug 2010 18:02:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95770 invoked by uid 99); 19 Aug 2010 18:02:28 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Aug 2010 18:02:28 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [12.44.8.171] (HELO birexchange.BIRPLAZA.local) (12.44.8.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Aug 2010 18:02:05 +0000
Content-class: urn:content-classes:message
Subject: Tokenization / Analyzer question
Date: Thu, 19 Aug 2010 14:01:44 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Message-ID: <CC2671C08F06704ABFD37ED1EA09AA560112AC61@birexchange.BIRPLAZA.local>
In-Reply-To: <o2t8c4e68611005040153i2990d28ew4c6a4b01f4a8c071@mail.gmail.com>
X-MimeOLE: Produced By Microsoft Exchange V6.5
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Tokenization / Analyzer question
Thread-Index: AcrrZ2B20MslodCuQFyrx89Bida88hUUZUmQ
References: <s2uca64e7161005031152gfd75fa3cha003686d515ca9cc@mail.gmail.com> <m2pca64e7161005031220m66578428i6760427c5875f61c@mail.gmail.com> <o2t8c4e68611005040153i2990d28ew4c6a4b01f4a8c071@mail.gmail.com>
From: "Beard, Brian" <Brian.Beard@mybir.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

I'm using lucene 2.9.1.

I'm indexing documents which correspond to an ID.
Each field in the ID document is made up of data from all subId's.
(It's a requirement that searches must work across all subId's within an
ID).

They will be indexed and stored in some format similar to:
subId0Value0 subId0Value1 DELIMITER subId1Value0 subId1Value1 DELIMITER
....
This is so the stored value strings can be matched up to the correct
subId for display purposes.
In addition, there may be more than one type of delimiter to denote the
type of data within a subId's data.

Moreover, for some of the fields it is desired to be able to tell which
subId the search terms corresponded to.

What I'd like to do is use payloads to encode the delimiter type into
the payload, but use the same text string for all delimiter types. Also,
the delimiter tokens shouldn't affect the search because they will be
filtered out of the analyzer. This is so that during a post-processing
step of the returned results, all payloads could be extracted at once by
a single term, instead of having to loop through them term by term
(because I don't see a way to get them on a per-document basis -
otherwise I could add a payload to the first term when the subId changes
during indexing). Then the search term positions could be checked
against the delimiter positions to determine the record and type of
data.=20

I've got an example performing the tokenization and payload encoding
correctly, but the stored values are not the ones I want.

What I've done is write a BoundaryTokenFilter class which always is
instantiated *after* the standardAnalyzer, or WhitespaceAnalyzer, etc -
new BoundaryTokenFilter(new StandardAnalyzer().tokenStream()).=20

In order to get the tokens passed down to BoundaryTokenFilter and pass
through the other tokenizers/TokenFilters higher up the chain, I'm using
character based delimiters (Different ones for each delimiter that also
have some additional encoded information for the payload). Then inside
of BoundaryTokenFilter, the character based delimiter is decoded. Then
the token is changed over to the single delimiter value and the payload
added.

This part works, but the problem I'm having is that I would like the
delimiter values stored in the index to be the same as the single
delimiter tokenized ones.=20

Is there any way to do this - transform the stored values to be the
tokenized values, but only for select tokens?

The other alternative I can think of if that isn't possible, is to
modify standardAnalyzer to have indexing and search modes, so that
during indexing mode it would allow the delimiter tokens to pass through
and flag them using a typeAttribute, while they don't in search mode.
For this though I would most likely have to end up using different
delimiter values.

Any help is appreciated,

Brian Beard



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 19 18:35:25 2010
Return-Path: <java-user-return-47080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46015 invoked from network); 19 Aug 2010 18:35:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Aug 2010 18:35:25 -0000
Received: (qmail 49670 invoked by uid 500); 19 Aug 2010 18:35:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49614 invoked by uid 500); 19 Aug 2010 18:35:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49606 invoked by uid 99); 19 Aug 2010 18:35:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Aug 2010 18:35:22 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.136.167.15] (HELO web113315.mail.gq1.yahoo.com) (98.136.167.15)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 19 Aug 2010 18:35:13 +0000
Received: (qmail 85399 invoked by uid 60001); 19 Aug 2010 18:34:52 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1282242891; bh=U/Dl0Xzqn/16+5ga93rV8IIAzVHIaQ/PDa/ePfhqiog=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=cts+wwqCi1oWbjAPzTDgLI7wngmXmikF5Brx1CqYIGOJmlLlJVFyjs5nxHufTPtifEhANTPpLy2EHW2boyHaXhv9Y4XriFolUuXv+msXbmTBKfdd7TFCgnqPh3efW9wjpNgQiqPHp2a91MeRFw4um7P3ac3/OEWBSxSaXwBZ/j8=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=mGfdr3U2f4Gjt7vx/wqIByDi3XgEJKHTLGT2bHFpOFKahF1a+ZOcmSp45OBHR2ipCapzw7kiXjzAMgh3upMLQRXwqCkqYaHPBHorx2KUmABAlKdO2HFwIqf21KXdeQmN/a5jRoTd+Cg6gtfmgkAm1aP7QkVVubd95LY883OPZtU=;
Message-ID: <980676.81990.qm@web113315.mail.gq1.yahoo.com>
X-YMail-OSG: acp5y3MVM1knAU5hVTxtyr4GPDF3pIZ01gumEFWmXrECK59
 Pc94ZOoYYuyGGzdxNUTvhgTFRETIRhek0goMFvfxtXfbTQJZqFVih.YaICdB
 XKBXiEKQSl3U1f9EINXExePYQW3NT2PH8pILKKgz1b2XLO_x67WOKDxYWD7O
 JQOhxHNHsL8vDk2dXwpIXCpGqp3_G1IvgmLlRpeZ1jTva2Bzv4DtNvmqA45q
 QSligoE1mgv_dNye79JRSy2uC_9GODbcwEBzlUrbucGe4iqXEO2ZaA37GuCJ
 xgPPPtdg1S369vvY2i7DhY08bQJq4LP0cPFZwjjxMrt.ouWvKExZm3fo1T15
 fppVxRwZjp2Hli4g-
Received: from [140.244.128.12] by web113315.mail.gq1.yahoo.com via HTTP; Thu, 19 Aug 2010 11:34:51 PDT
X-Mailer: YahooMailClassic/11.3.2 YahooMailWebService/0.8.105.279950
Date: Thu, 19 Aug 2010 11:34:51 -0700 (PDT)
From: Ivan Provalov <iprovalo@yahoo.com>
Subject: Re: Calculate Term Co-occurrence Matrix
To: java-user@lucene.apache.org
In-Reply-To: <AANLkTikRQQEp3-ambcuhLOdEP4h2Kq5oEixm9CpBTMNH@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

I used this before almost as is with couple of fixes:

http://issues.apache.org/jira/browse/LUCENE-474

Thanks,

IP


--- On Thu, 8/19/10, ahmed algohary <algoharyalex@gmail.com> wrote:

> From: ahmed algohary <algoharyalex@gmail.com>
> Subject: Calculate Term Co-occurrence Matrix
> To: java-user@lucene.apache.org
> Date: Thursday, August 19, 2010, 11:39 AM
> Hi all,
> 
> I need to know if there is a Lucene plug-in or a
> Lucene-based API for
> calculating the term co-occurrence matrix for a given text
> corpus.
> 
> Thanks!
> 
> --
> Ahmed
> 


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 20 11:45:06 2010
Return-Path: <java-user-return-47081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54306 invoked from network); 20 Aug 2010 11:45:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Aug 2010 11:45:06 -0000
Received: (qmail 85692 invoked by uid 500); 20 Aug 2010 11:45:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85211 invoked by uid 500); 20 Aug 2010 11:45:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85185 invoked by uid 99); 20 Aug 2010 11:45:00 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Aug 2010 11:45:00 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Aug 2010 11:44:37 +0000
Received: by iwn9 with SMTP id 9so620250iwn.35
        for <java-user@lucene.apache.org>; Fri, 20 Aug 2010 04:44:16 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.15.8 with SMTP id i8mr560045iba.12.1282304656171; Fri, 20
 Aug 2010 04:44:16 -0700 (PDT)
Received: by 10.231.119.84 with HTTP; Fri, 20 Aug 2010 04:44:16 -0700 (PDT)
X-Originating-IP: [122.183.194.201]
Date: Fri, 20 Aug 2010 17:14:16 +0530
Message-ID: <AANLkTincqEg7VhPVqSZ4rjtyk6TKFndqO8ntVBPP+VyA@mail.gmail.com>
Subject: How to convert WAR application into console application (Making
 Unicorn has console application)
From: Ranjith <ranjith.k@sedin.co.in>
To: java-user@lucene.apache.org, users@maven.apache.org, user@ant.apache.org, 
	users@tomcat.apache.org, users@buildr.apache.org
Content-Type: multipart/alternative; boundary=002215047c9b86621b048e3fd1fa
X-Virus-Checked: Checked by ClamAV on apache.org

--002215047c9b86621b048e3fd1fa
Content-Type: text/plain; charset=ISO-8859-1

Hi all,
     Hi all, Unicorn just provide a URI and push the button. It will call a
series of validation services and report the results.I have already
downloaded and installed Unicorn. To Download the source code it is only
available for download from the Mercurial repository. To download it, use
the command "hg clone https://dvcs.w3.org/hg/unicorn"

To compile Unicorn, Apache Ant and Ivy are required. From Unicorn's
directory, run: "ant retrieve generate_observer generate_tasklist
default_conf war"

It works fine in apache-tomcat, what I want is how to make the unicorn as
console application. The input should passed through command line arguments
and output should displayed at console itself I don`t want to use any web
server to deploy it.

-- 
Cheers,
Ranjith Kumar.K
http://ranjithtenz.wordpress.com

--002215047c9b86621b048e3fd1fa--

From java-user-return-47082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 20 11:49:32 2010
Return-Path: <java-user-return-47082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56039 invoked from network); 20 Aug 2010 11:49:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Aug 2010 11:49:32 -0000
Received: (qmail 93731 invoked by uid 500); 20 Aug 2010 11:49:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93176 invoked by uid 500); 20 Aug 2010 11:49:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93160 invoked by uid 99); 20 Aug 2010 11:49:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Aug 2010 11:49:25 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.9] (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 20 Aug 2010 11:49:23 +0000
Received: (qmail 55908 invoked by uid 99); 20 Aug 2010 11:49:03 -0000
Received: from localhost.apache.org (HELO [10.0.0.77]) (127.0.0.1)
  (smtp-auth username gsingers, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Aug 2010 11:49:03 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1081)
Subject: Re: asking about incremental update
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <AANLkTimL-JQ6-FywxzKMK2ikGRDXq0kfcLLufDtsrM=g@mail.gmail.com>
Date: Fri, 20 Aug 2010 07:49:01 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <4EA43DD3-A386-43C7-A815-8AA5A9FB17A3@apache.org>
References: <AANLkTimxW7FgZ8AduBWhy56aE9wLjYNFvk1-PLZpnLAF@mail.gmail.com> <AANLkTikA3W6N=RBCgxW-1pFCnYEQYP=uJJESYzL674Mq@mail.gmail.com> <AANLkTimL-JQ6-FywxzKMK2ikGRDXq0kfcLLufDtsrM=g@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1081)


On Aug 19, 2010, at 7:55 AM, Yakob wrote:

> do you reckon I should use a timer or a thread instead to periodically
> update the index?

That's likely what most people do, setup something to watch a directory =
or check a timestamp.  If your data is in a DB, then you can do a query =
to get what's changed.  Note, that an update is really a delete an add.



>=20
> On 8/19/10, findbestopensource <findbestopensource@gmail.com> wrote:
>> Hi jacobian,
>>=20
>> Lucene will not do incremental update by iteself. Lucene is just a
>> library. Your app should periodically add the content to the index =
and
>> once done, reopen the reader to get your changes reflected.
>>=20
>> Regards
>> Aditya
>> www.findbestopensource.com
>=20
>=20
> --=20
> http://jacobian.web.id
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem using Solr/Lucene: =
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 20 12:52:47 2010
Return-Path: <java-user-return-47083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83800 invoked from network); 20 Aug 2010 12:52:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Aug 2010 12:52:47 -0000
Received: (qmail 67095 invoked by uid 500); 20 Aug 2010 12:52:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66548 invoked by uid 500); 20 Aug 2010 12:52:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66486 invoked by uid 99); 20 Aug 2010 12:52:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Aug 2010 12:52:40 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.9] (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 20 Aug 2010 12:52:39 +0000
Received: (qmail 83733 invoked by uid 99); 20 Aug 2010 12:52:19 -0000
Received: from localhost.apache.org (HELO [10.0.0.77]) (127.0.0.1)
  (smtp-auth username gsingers, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Aug 2010 12:52:19 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1081)
Subject: Re: Calculate Term Co-occurrence Matrix
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <AANLkTikRQQEp3-ambcuhLOdEP4h2Kq5oEixm9CpBTMNH@mail.gmail.com>
Date: Fri, 20 Aug 2010 08:52:17 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <11005E6B-12CE-4DB1-A496-F71A2FC81FC1@apache.org>
References: <AANLkTikRQQEp3-ambcuhLOdEP4h2Kq5oEixm9CpBTMNH@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1081)

You might also be interested in Mahout's collocations package: =
http://cwiki.apache.org/confluence/display/MAHOUT/Collocations

-Grant
On Aug 19, 2010, at 11:39 AM, ahmed algohary wrote:

> Hi all,
>=20
> I need to know if there is a Lucene plug-in or a Lucene-based API for
> calculating the term co-occurrence matrix for a given text corpus.
>=20
> Thanks!
>=20
> --
> Ahmed

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem using Solr/Lucene: =
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 20 13:19:36 2010
Return-Path: <java-user-return-47084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97076 invoked from network); 20 Aug 2010 13:19:35 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Aug 2010 13:19:35 -0000
Received: (qmail 15671 invoked by uid 500); 20 Aug 2010 13:19:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15213 invoked by uid 500); 20 Aug 2010 13:19:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15205 invoked by uid 99); 20 Aug 2010 13:19:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Aug 2010 13:19:29 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Aug 2010 13:19:22 +0000
Received: by qwk3 with SMTP id 3so3653318qwk.35
        for <java-user@lucene.apache.org>; Fri, 20 Aug 2010 06:19:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=kFxGUcZRIJ2jtT0MiJ1eMIOXqwSncvvxqa9qMW5kUDU=;
        b=xrV7ayMccMkss7fahEk2QoTmI1ypvB0NJf2ezVLfYoJBcZOPvKuMr68YuQdLy38LhK
         NJo0OjEHjlpsXh3ttEgVvO7+aFyDbkYgbpWga5ywA07jopVlhzA5nEkfxkuTJpiPIAWh
         Z3dSldytXnDAWCUfNpL/QKKCOCNbfW8wF36Yo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=W7v2SLjdI0LXklrgiRE39/21nLBODih4u7pTt/Lemwwsp7dAskK1aqjflYmontobD9
         pRFwZD+nP/U7TXuSaMBYYYA3YhERlt911rrkDNkRgDt9uHJwL6OVgcqyijE2oL36POqr
         M6WwWAGeirIPh7nzbi82juAnsscZ0CplVgwlg=
MIME-Version: 1.0
Received: by 10.224.29.16 with SMTP id o16mr950303qac.155.1282310341683; Fri,
 20 Aug 2010 06:19:01 -0700 (PDT)
Received: by 10.229.186.83 with HTTP; Fri, 20 Aug 2010 06:19:01 -0700 (PDT)
In-Reply-To: <AANLkTincqEg7VhPVqSZ4rjtyk6TKFndqO8ntVBPP+VyA@mail.gmail.com>
References: <AANLkTincqEg7VhPVqSZ4rjtyk6TKFndqO8ntVBPP+VyA@mail.gmail.com>
Date: Fri, 20 Aug 2010 09:19:01 -0400
Message-ID: <AANLkTik_stwPXxDBspC9xpGKB1W=gJV0yhk5qMFRozLQ@mail.gmail.com>
Subject: Re: How to convert WAR application into console application (Making
 Unicorn has console application)
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175ce054686b5f048e4124d5
X-Virus-Checked: Checked by ClamAV on apache.org

--0015175ce054686b5f048e4124d5
Content-Type: text/plain; charset=ISO-8859-1

Please do not cross-post to multiple users lists with questions like this,
it's considered quite rude. Take the time to find the appropriate list
and post to that one.

Erick

On Fri, Aug 20, 2010 at 7:44 AM, Ranjith <ranjith.k@sedin.co.in> wrote:

> Hi all,
>     Hi all, Unicorn just provide a URI and push the button. It will call a
> series of validation services and report the results.I have already
> downloaded and installed Unicorn. To Download the source code it is only
> available for download from the Mercurial repository. To download it, use
> the command "hg clone https://dvcs.w3.org/hg/unicorn"
>
> To compile Unicorn, Apache Ant and Ivy are required. From Unicorn's
> directory, run: "ant retrieve generate_observer generate_tasklist
> default_conf war"
>
> It works fine in apache-tomcat, what I want is how to make the unicorn as
> console application. The input should passed through command line arguments
> and output should displayed at console itself I don`t want to use any web
> server to deploy it.
>
> --
> Cheers,
> Ranjith Kumar.K
> http://ranjithtenz.wordpress.com
>

--0015175ce054686b5f048e4124d5--

From java-user-return-47085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 20 20:46:10 2010
Return-Path: <java-user-return-47085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85742 invoked from network); 20 Aug 2010 20:46:10 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Aug 2010 20:46:10 -0000
Received: (qmail 46560 invoked by uid 500); 20 Aug 2010 20:46:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46501 invoked by uid 500); 20 Aug 2010 20:46:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46493 invoked by uid 99); 20 Aug 2010 20:46:07 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Aug 2010 20:46:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [12.44.8.171] (HELO birexchange.BIRPLAZA.local) (12.44.8.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Aug 2010 20:45:45 +0000
Content-class: urn:content-classes:message
Subject: RE: Tokenization / Analyzer question
Date: Fri, 20 Aug 2010 16:45:23 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Message-ID: <CC2671C08F06704ABFD37ED1EA09AA560112ACB1@birexchange.BIRPLAZA.local>
In-Reply-To: <CC2671C08F06704ABFD37ED1EA09AA560112AC61@birexchange.BIRPLAZA.local>
X-MimeOLE: Produced By Microsoft Exchange V6.5
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Tokenization / Analyzer question
Thread-Index: AcrrZ2B20MslodCuQFyrx89Bida88hUUZUmQADuJeNA=
References: <s2uca64e7161005031152gfd75fa3cha003686d515ca9cc@mail.gmail.com> <m2pca64e7161005031220m66578428i6760427c5875f61c@mail.gmail.com> <o2t8c4e68611005040153i2990d28ew4c6a4b01f4a8c071@mail.gmail.com> <CC2671C08F06704ABFD37ED1EA09AA560112AC61@birexchange.BIRPLAZA.local>
From: "Beard, Brian" <Brian.Beard@mybir.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

So I've been thinking about this more and what seems most plausible is
to just use Store.NO for the delimiters, so they will have payloads
encoded correctly but not affect the stored data, and store separate
instances of the subId information which can be retrieved along the
boundaries. There should be on average 3 subId's, so I don't think this
would be too big of a performance hit to extract the separate field
instances.

What I find myself wanting to do is to be able to pass MetaData along
with the Field() when it is added to the document. Then be able to
retrieve this metaData information while inside the TokenFilter. I guess
this would be similar to adding column stride fields, but have multiple
ones at different positions in the document.

-----Original Message-----
From: Beard, Brian [mailto:Brian.Beard@mybir.com]=20
Sent: Thursday, August 19, 2010 2:02 PM
To: java-user@lucene.apache.org
Subject: Tokenization / Analyzer question

I'm using lucene 2.9.1.

I'm indexing documents which correspond to an ID.
Each field in the ID document is made up of data from all subId's.
(It's a requirement that searches must work across all subId's within an
ID).

They will be indexed and stored in some format similar to:
subId0Value0 subId0Value1 DELIMITER subId1Value0 subId1Value1 DELIMITER
....
This is so the stored value strings can be matched up to the correct
subId for display purposes.
In addition, there may be more than one type of delimiter to denote the
type of data within a subId's data.

Moreover, for some of the fields it is desired to be able to tell which
subId the search terms corresponded to.

What I'd like to do is use payloads to encode the delimiter type into
the payload, but use the same text string for all delimiter types. Also,
the delimiter tokens shouldn't affect the search because they will be
filtered out of the analyzer. This is so that during a post-processing
step of the returned results, all payloads could be extracted at once by
a single term, instead of having to loop through them term by term
(because I don't see a way to get them on a per-document basis -
otherwise I could add a payload to the first term when the subId changes
during indexing). Then the search term positions could be checked
against the delimiter positions to determine the record and type of
data.=20

I've got an example performing the tokenization and payload encoding
correctly, but the stored values are not the ones I want.

What I've done is write a BoundaryTokenFilter class which always is
instantiated *after* the standardAnalyzer, or WhitespaceAnalyzer, etc -
new BoundaryTokenFilter(new StandardAnalyzer().tokenStream()).=20

In order to get the tokens passed down to BoundaryTokenFilter and pass
through the other tokenizers/TokenFilters higher up the chain, I'm using
character based delimiters (Different ones for each delimiter that also
have some additional encoded information for the payload). Then inside
of BoundaryTokenFilter, the character based delimiter is decoded. Then
the token is changed over to the single delimiter value and the payload
added.

This part works, but the problem I'm having is that I would like the
delimiter values stored in the index to be the same as the single
delimiter tokenized ones.=20

Is there any way to do this - transform the stored values to be the
tokenized values, but only for select tokens?

The other alternative I can think of if that isn't possible, is to
modify standardAnalyzer to have indexing and search modes, so that
during indexing mode it would allow the delimiter tokens to pass through
and flag them using a typeAttribute, while they don't in search mode.
For this though I would most likely have to end up using different
delimiter values.

Any help is appreciated,

Brian Beard



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 20 21:48:21 2010
Return-Path: <java-user-return-47086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6356 invoked from network); 20 Aug 2010 21:48:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Aug 2010 21:48:21 -0000
Received: (qmail 49509 invoked by uid 500); 20 Aug 2010 21:48:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49458 invoked by uid 500); 20 Aug 2010 21:48:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49450 invoked by uid 99); 20 Aug 2010 21:48:18 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Aug 2010 21:48:18 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [171.67.219.83] (HELO smtp.stanford.edu) (171.67.219.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Aug 2010 21:47:54 +0000
Received: from smtp.stanford.edu (localhost.localdomain [127.0.0.1])
	by localhost (Postfix) with SMTP id 3702CD9C2D
	for <java-user@lucene.apache.org>; Fri, 20 Aug 2010 14:47:32 -0700 (PDT)
Received: from gogo.stanford.edu (gogo.Stanford.EDU [171.65.75.146])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	(Authenticated sender: sweng)
	by smtp.stanford.edu (Postfix) with ESMTPSA id A8FE5D9C2A
	for <java-user@lucene.apache.org>; Fri, 20 Aug 2010 14:47:31 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1077)
Subject: Re: lucene indexing configuration
From: Shuai Weng <shuai@genome.stanford.edu>
In-Reply-To: <AANLkTinTCnH9voLn0q=79CRHm7E_z3QhqqfvR79BO7Cm@mail.gmail.com>
Date: Fri, 20 Aug 2010 14:47:31 -0700
Content-Transfer-Encoding: quoted-printable
Message-Id: <DB495EFA-2740-4AB0-8B9E-0B37F596C48E@genome.stanford.edu>
References: <614C529D389A5944B351F7DFB7594F24C86AF2@uksrpblkexb01.detica.com>  <AANLkTi=DZAV7C3S3Fb_FRUkvzntcNZx6knkGVB0djw4o@mail.gmail.com>  <Pine.GSO.4.64.1007300807370.13898@fafner.Stanford.EDU> <AANLkTinEx9ChmQrs_F4Krwgwma_Wq5KzhjKiK_2qUqZ2@mail.gmail.com>  <764293C8-86EA-4D0E-BFD2-A914B806D3AD@genome.stanford.edu> <AANLkTinTCnH9voLn0q=79CRHm7E_z3QhqqfvR79BO7Cm@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1077)
X-Spam: Probability=8%, Report='
 BODYTEXTP_SIZE_3000_LESS 0, BODY_SIZE_1000_LESS 0, BODY_SIZE_2000_LESS 0, BODY_SIZE_200_299 0, BODY_SIZE_5000_LESS 0, BODY_SIZE_7000_LESS 0, DATE_TZ_NA 0, SMALL_BODY 0, __BOUNCE_CHALLENGE_SUBJ 0, __BOUNCE_NDR_SUBJ_EXEMPT 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __HAS_X_MAILER 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __MIME_VERSION_APPLEMAIL 0, __MSGID_APPLEMAIL 0, __SANE_MSGID 0, __TO_MALFORMED_2 0, __TO_NO_NAME 0, __USER_AGENT_APPLEMAIL 0, __X_MAILER_APPLEMAIL 0'
X-Virus-Checked: Checked by ClamAV on apache.org


Hey,

Currently we have indexed some biological full text pages,  I was =
wondering how to config the schema.xml such that=20
the gene names 'met1', 'met2', 'met3' will be treated as different =
words. Currently they are all mapped to 'met'.=20

Thanks,
Shuai=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 20 23:47:18 2010
Return-Path: <java-user-return-47087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45441 invoked from network); 20 Aug 2010 23:47:18 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Aug 2010 23:47:18 -0000
Received: (qmail 42390 invoked by uid 500); 20 Aug 2010 23:47:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42223 invoked by uid 500); 20 Aug 2010 23:47:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42215 invoked by uid 99); 20 Aug 2010 23:47:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Aug 2010 23:47:15 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.56] (HELO web50302.mail.re2.yahoo.com) (206.190.38.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 20 Aug 2010 23:47:10 +0000
Received: (qmail 59407 invoked by uid 60001); 20 Aug 2010 23:46:49 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1282348009; bh=lBTaQYIzLkNMMJ7GU+9rT+GN5IxYFSvjagblWC4Kfv4=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=SeHu9zU0lENCQNHFcmx/3T6NhmB2Y5HyAx4bdE/NQmPPLj0L3k9OcldzUfzMmCYyFotEz9RbBYhBfoykuFH9qBn22sphf75TCM5/DX/mU1xHm62gsETRGQw9a98QnC/to0dN4ATYwD4TjT0t2o8Wg1ECebBw3HyCCAe4HtDUCR4=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=vplQsU1LO7phpnEbgR26/OJ4D07OrEqayxVUukU3pOexPRU8Yb11ac1+dX2heu60oTzmCjTo6M0lOKlJ6WrA6Tz8WMuGphEljnFMKgiCZwz31SQKJwb8DcoMpmkTWyGOmOmpXT54URHmMwL3erwbEWat5FeY5RePRVHDRFKCuF4=;
Message-ID: <216847.59345.qm@web50302.mail.re2.yahoo.com>
X-YMail-OSG: 6RBULMMVM1mMb7bsJFUDLMxfy0KfAJjnaLq4EcnzUpRsBa1
 O_8yZC_NB_MJn_VyCG2WVlJtSJcqKSpQukC7RIhEHPKcaA2FS7stU5oejtCe
 x5Ceg5MKjR5RF3n3fTqeNUH_2oXhKaq3Fv5JnzKbypwx8WNOWnbUQ1uL65bf
 DYaUnZDuylq5mhlZt1MzJU3BgKQfsFYlwccno8o2MRwsnY5yIw93HuC9XLrW
 o0eKFj9LPKMLPQUHcqdDWYHw8uaUZtBz4y9R4HwtH8VMoVYoVmjFeJq7Gbz1
 AQD9xDb_o2bJPdO7yiMKtAlquYDat5RIVo7g1oRAe9cqJ.A--
Received: from [78.3.94.228] by web50302.mail.re2.yahoo.com via HTTP; Fri, 20 Aug 2010 23:46:49 UTC
X-Mailer: YahooMailRC/470 YahooMailWebService/0.8.105.279950
References: <AANLkTikRQQEp3-ambcuhLOdEP4h2Kq5oEixm9CpBTMNH@mail.gmail.com> <11005E6B-12CE-4DB1-A496-F71A2FC81FC1@apache.org>
Date: Fri, 20 Aug 2010 23:46:49 +0000 (UTC)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Calculate Term Co-occurrence Matrix
To: java-user@lucene.apache.org
In-Reply-To: <11005E6B-12CE-4DB1-A496-F71A2FC81FC1@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

There is also a non-Mahout Key Phrase Extractor for Collocations, SIPs, and a 
few other things: http://sematext.com/products/key-phrase-extractor/index.html

One of the demos that uses news data is at 
http://sematext.com/demo/kpe/index.html

Otis
----
Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
Lucene ecosystem search :: http://search-lucene.com/



----- Original Message ----
> From: Grant Ingersoll <gsingers@apache.org>
> To: java-user@lucene.apache.org
> Sent: Fri, August 20, 2010 8:52:17 AM
> Subject: Re: Calculate Term Co-occurrence Matrix
> 
> You might also be interested in Mahout's collocations package: 
>http://cwiki.apache.org/confluence/display/MAHOUT/Collocations
> 
> -Grant
> On  Aug 19, 2010, at 11:39 AM, ahmed algohary wrote:
> 
> > Hi all,
> > 
> > I need to know if there is a Lucene plug-in or a Lucene-based API  for
> > calculating the term co-occurrence matrix for a given text  corpus.
> > 
> > Thanks!
> > 
> > --
> >  Ahmed
> 
> --------------------------
> Grant Ingersoll
> http://www.lucidimagination.com/
> 
> Search the Lucene ecosystem using  Solr/Lucene: 
>http://www.lucidimagination.com/search
> 
> 
> ---------------------------------------------------------------------
> To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For  additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 20 23:49:56 2010
Return-Path: <java-user-return-47088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45737 invoked from network); 20 Aug 2010 23:49:56 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Aug 2010 23:49:56 -0000
Received: (qmail 47923 invoked by uid 500); 20 Aug 2010 23:49:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47862 invoked by uid 500); 20 Aug 2010 23:49:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47854 invoked by uid 99); 20 Aug 2010 23:49:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Aug 2010 23:49:53 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.58] (HELO web50304.mail.re2.yahoo.com) (206.190.38.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 20 Aug 2010 23:49:48 +0000
Received: (qmail 48078 invoked by uid 60001); 20 Aug 2010 23:49:27 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1282348167; bh=SWDJ5DqpymXyGuEAP4sLqc2eLZK8Lc7Z1Aq8m9kWWmY=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=3ZEYB2x/oT6ALEuh7xtmf2ZflPxAzV4ZmBazcbNoClvgIdnI8HVmQZTLtJcwJy6GJ4g9mNFliMnoEB5A4OXVesofba5ignB3gC2kaf8KrNwXTtEeU4Yw7B+1WWmSdkKUEZ6fyDgIJnXAlqfF106X8eZ9ue4NDot9jr2D2tDs5Hk=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=KrqHJosCqATSd4iCO23nt5XJHkqNUcqEmAevYkCK0keaGjuvYZ/Vl0eQ2TQy5QLONKEBVXIGTRDgtX2pDxKj1L9U9TFpWzHZ/JtUGMUwZHbmig8EGz+pHoBy2kHUYmy9XHPYGZg7htK25XQhHo2lJFgb+6yvxAGZzbZWDXfkzss=;
Message-ID: <139922.43065.qm@web50304.mail.re2.yahoo.com>
X-YMail-OSG: e0KVFkQVM1l7UQowGbDQAC1UlIIisaqsdhhcbxHWX52qyiB
 K2ZwjSQieU4iXozU4OAIjK0B3zU_SiYgHzUNv6lHZ.twQP9ac2duvsrYHpDk
 _QszTJ0OBv.96HOSFEmVQMROlObdR5NhDWCzEuPkOFFsqgzoXdBLr3XFjWzz
 bBuB1t1SYhP0adB.8b1ioRHJq7NVjnAkLM7gIbgNi5t.JSrzAZvO6S.RWtJq
 0cAwGnPDMS6cK6ugMmaotcJp3CV5JAuOTtW9Z6vvCUcQI3UFo4M2dAGuERso
 wBjj5s9_FQ2SPP43KuhFZMdT12i0uww2sQPfG2fxxerBLBQ--
Received: from [78.3.94.228] by web50304.mail.re2.yahoo.com via HTTP; Fri, 20 Aug 2010 16:49:27 PDT
X-Mailer: YahooMailRC/470 YahooMailWebService/0.8.105.279950
References: <614C529D389A5944B351F7DFB7594F24C86AF2@uksrpblkexb01.detica.com>  <AANLkTi=DZAV7C3S3Fb_FRUkvzntcNZx6knkGVB0djw4o@mail.gmail.com>  <Pine.GSO.4.64.1007300807370.13898@fafner.Stanford.EDU> <AANLkTinEx9ChmQrs_F4Krwgwma_Wq5KzhjKiK_2qUqZ2@mail.gmail.com>  <764293C8-86EA-4D0E-BFD2-A914B806D3AD@genome.stanford.edu> <AANLkTinTCnH9voLn0q=79CRHm7E_z3QhqqfvR79BO7Cm@mail.gmail.com> <DB495EFA-2740-4AB0-8B9E-0B37F596C48E@genome.stanford.edu>
Date: Fri, 20 Aug 2010 16:49:27 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: lucene indexing configuration
To: java-user@lucene.apache.org
In-Reply-To: <DB495EFA-2740-4AB0-8B9E-0B37F596C48E@genome.stanford.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Hi,

Are you actually talking about Solr?  Sounds like it.  Check solr-user@lucene 
list.

Maybe you need to treat those words are protected words?  See the protwords.txt 
file in the conf dir.

Otis
----
Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
Lucene ecosystem search :: http://search-lucene.com/



----- Original Message ----
> From: Shuai Weng <shuai@genome.stanford.edu>
> To: java-user@lucene.apache.org
> Sent: Fri, August 20, 2010 5:47:31 PM
> Subject: Re: lucene indexing configuration
> 
> 
> Hey,
> 
> Currently we have indexed some biological full text pages,   I was wondering 
>how to config the schema.xml such that 
>
> the gene names  'met1', 'met2', 'met3' will be treated as different words. 
>Currently they are  all mapped to 'met'. 
>
> 
> Thanks,
> Shuai
> ---------------------------------------------------------------------
> To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For  additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 21 00:56:24 2010
Return-Path: <java-user-return-47089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70049 invoked from network); 21 Aug 2010 00:56:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Aug 2010 00:56:24 -0000
Received: (qmail 82091 invoked by uid 500); 21 Aug 2010 00:56:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82040 invoked by uid 500); 21 Aug 2010 00:56:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82032 invoked by uid 99); 21 Aug 2010 00:56:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Aug 2010 00:56:21 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [171.67.219.81] (HELO smtp.stanford.edu) (171.67.219.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Aug 2010 00:56:16 +0000
Received: from smtp.stanford.edu (localhost.localdomain [127.0.0.1])
	by localhost (Postfix) with SMTP id 9D81A1F80E0
	for <java-user@lucene.apache.org>; Fri, 20 Aug 2010 17:55:55 -0700 (PDT)
Received: from fafner.Stanford.EDU (fafner.Stanford.EDU [171.65.77.2])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by smtp.stanford.edu (Postfix) with ESMTPS id 4E34F1F8088
	for <java-user@lucene.apache.org>; Fri, 20 Aug 2010 17:55:55 -0700 (PDT)
Received: from fafner.Stanford.EDU (localhost [127.0.0.1])
	by fafner.Stanford.EDU (8.14.4/8.12.7) with ESMTP id o7L0ts9W001090
	for <java-user@lucene.apache.org>; Fri, 20 Aug 2010 17:55:55 -0700 (PDT)
Received: from localhost (shuai@localhost)
	by fafner.Stanford.EDU (8.14.4/8.12.7/Submit) with ESMTP id o7L0tsjB001086
	for <java-user@lucene.apache.org>; Fri, 20 Aug 2010 17:55:54 -0700 (PDT)
Date: Fri, 20 Aug 2010 17:55:54 -0700 (PDT)
From: Shuai Weng <shuai@genome.stanford.edu>
To: java-user@lucene.apache.org
Subject: Re: lucene indexing configuration
In-Reply-To: <139922.43065.qm@web50304.mail.re2.yahoo.com>
Message-ID: <Pine.GSO.4.64.1008201755040.1030@fafner.Stanford.EDU>
References: <614C529D389A5944B351F7DFB7594F24C86AF2@uksrpblkexb01.detica.com>
  <AANLkTi=DZAV7C3S3Fb_FRUkvzntcNZx6knkGVB0djw4o@mail.gmail.com> 
 <Pine.GSO.4.64.1007300807370.13898@fafner.Stanford.EDU>
 <AANLkTinEx9ChmQrs_F4Krwgwma_Wq5KzhjKiK_2qUqZ2@mail.gmail.com> 
 <764293C8-86EA-4D0E-BFD2-A914B806D3AD@genome.stanford.edu>
 <AANLkTinTCnH9voLn0q=79CRHm7E_z3QhqqfvR79BO7Cm@mail.gmail.com>
 <DB495EFA-2740-4AB0-8B9E-0B37F596C48E@genome.stanford.edu>
 <139922.43065.qm@web50304.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Spam: Probability=8%, Report='
 BODYTEXTP_SIZE_3000_LESS 0, BODY_SIZE_1300_1399 0, BODY_SIZE_2000_LESS 0, BODY_SIZE_5000_LESS 0, BODY_SIZE_7000_LESS 0, __BOUNCE_CHALLENGE_SUBJ 0, __BOUNCE_NDR_SUBJ_EXEMPT 0, __CANPHARM_UNSUB_LINK 0, __CP_URI_IN_BODY 0, __CT 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __TO_MALFORMED_2 0, __TO_NO_NAME 0, __URI_NO_WWW 0'


Oh, thanks.

Shuai

On Fri, 20 Aug 2010, Otis Gospodnetic wrote:

> Hi,
>
> Are you actually talking about Solr?  Sounds like it.  Check solr-user@lucene
> list.
>
> Maybe you need to treat those words are protected words?  See the protwords.txt
> file in the conf dir.
>
> Otis
> ----
> Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
> Lucene ecosystem search :: http://search-lucene.com/
>
>
>
> ----- Original Message ----
>> From: Shuai Weng <shuai@genome.stanford.edu>
>> To: java-user@lucene.apache.org
>> Sent: Fri, August 20, 2010 5:47:31 PM
>> Subject: Re: lucene indexing configuration
>>
>>
>> Hey,
>>
>> Currently we have indexed some biological full text pages,   I was wondering
>> how to config the schema.xml such that
>>
>> the gene names  'met1', 'met2', 'met3' will be treated as different words.
>> Currently they are  all mapped to 'met'.
>>
>>
>> Thanks,
>> Shuai
>> ---------------------------------------------------------------------
>> To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For  additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 21 11:20:55 2010
Return-Path: <java-user-return-47090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50441 invoked from network); 21 Aug 2010 11:20:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Aug 2010 11:20:55 -0000
Received: (qmail 41263 invoked by uid 500); 21 Aug 2010 11:20:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40805 invoked by uid 500); 21 Aug 2010 11:20:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40797 invoked by uid 99); 21 Aug 2010 11:20:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Aug 2010 11:20:48 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of algoharyalex@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Aug 2010 11:20:44 +0000
Received: by qwk3 with SMTP id 3so4788945qwk.35
        for <java-user@lucene.apache.org>; Sat, 21 Aug 2010 04:20:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=KlJ1hd4yYJGqZ4Z2Vs1VQ4s6e0Y4csg1rKkFnZSGQvg=;
        b=FvJ4vNgWcNvMfMBsREdK2cn99dd7c0+dYwX9ejHfn+gHPWMZXqieJ1H41gEhnWRm19
         sqj00OGKSAY/gBk/aZ1Maf9l3X8HbsGG9FH7teD3nnYNrftHG3SFg9v385hPtt0PKF82
         TALkSRx8tNnHkGo0pHbFVGIsfuUMLCYHrNt/s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=reMBtQjbhG/IRyyY0BBXwDVBF9AV3S5IW44Exhg0lRJHkOnT0Ior5Vk7wWt7zlFSPy
         jEAkkP6Gm5eLDvc1LV3NBgoF6xmV1qs4PMXFSyWreBibeseatLRM39LMBy69FN3dzccU
         VGn9B9oK5AXwgFTcrHPGWkcvrsEimReyDGl3o=
Received: by 10.224.47.66 with SMTP id m2mr1744096qaf.392.1282389623214; Sat,
 21 Aug 2010 04:20:23 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.38.82 with HTTP; Sat, 21 Aug 2010 04:20:03 -0700 (PDT)
In-Reply-To: <216847.59345.qm@web50302.mail.re2.yahoo.com>
References: <AANLkTikRQQEp3-ambcuhLOdEP4h2Kq5oEixm9CpBTMNH@mail.gmail.com>
 <11005E6B-12CE-4DB1-A496-F71A2FC81FC1@apache.org> <216847.59345.qm@web50302.mail.re2.yahoo.com>
From: ahmed algohary <algoharyalex@gmail.com>
Date: Sat, 21 Aug 2010 13:20:03 +0200
Message-ID: <AANLkTinGv5X73k+7g9STUgS9+q649u=9N=NW7p2XNXp9@mail.gmail.com>
Subject: Re: Calculate Term Co-occurrence Matrix
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00151750e900f495a3048e5399c3

--00151750e900f495a3048e5399c3
Content-Type: text/plain; charset=ISO-8859-1

Thanks for all your answers!

it seems like I did not make my question clear. I have a text corpus and I
need to determine the pairs of words that occur together in many documents.
I need to do that to be able to measure the semantic proximity between
words. This method is expanded
here<http://forums.searchenginewatch.com/showthread.php?t=48>.
I hope to find some code that given a text corpus, generate all the words
pairs with their probability of occurring together.


On Sat, Aug 21, 2010 at 1:46 AM, Otis Gospodnetic <
otis_gospodnetic@yahoo.com> wrote:

> There is also a non-Mahout Key Phrase Extractor for Collocations, SIPs, and
> a
> few other things:
> http://sematext.com/products/key-phrase-extractor/index.html
>
> One of the demos that uses news data is at
> http://sematext.com/demo/kpe/index.html
>
> Otis
> ----
> Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
> Lucene ecosystem search :: http://search-lucene.com/
>
>
>
> ----- Original Message ----
> > From: Grant Ingersoll <gsingers@apache.org>
> > To: java-user@lucene.apache.org
> > Sent: Fri, August 20, 2010 8:52:17 AM
> > Subject: Re: Calculate Term Co-occurrence Matrix
> >
> > You might also be interested in Mahout's collocations package:
> >http://cwiki.apache.org/confluence/display/MAHOUT/Collocations
> >
> > -Grant
> > On  Aug 19, 2010, at 11:39 AM, ahmed algohary wrote:
> >
> > > Hi all,
> > >
> > > I need to know if there is a Lucene plug-in or a Lucene-based API  for
> > > calculating the term co-occurrence matrix for a given text  corpus.
> > >
> > > Thanks!
> > >
> > > --
> > >  Ahmed
> >
> > --------------------------
> > Grant Ingersoll
> > http://www.lucidimagination.com/
> >
> > Search the Lucene ecosystem using  Solr/Lucene:
> >http://www.lucidimagination.com/search
> >
> >
> > ---------------------------------------------------------------------
> > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For  additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00151750e900f495a3048e5399c3--

From java-user-return-47091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 21 12:05:43 2010
Return-Path: <java-user-return-47091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61549 invoked from network); 21 Aug 2010 12:05:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Aug 2010 12:05:43 -0000
Received: (qmail 57851 invoked by uid 500); 21 Aug 2010 12:05:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57321 invoked by uid 500); 21 Aug 2010 12:05:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57312 invoked by uid 99); 21 Aug 2010 12:05:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Aug 2010 12:05:36 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.re2.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 21 Aug 2010 12:05:32 +0000
Received: (qmail 13768 invoked by uid 60001); 21 Aug 2010 12:05:11 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1282392311; bh=Q2vqihWhg0irw5Gjsk109FDyOclibss9usm60/tsM8s=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=wNHg5IXAX0cWIiPR5Trd6LPyLRCFj82sYbYxrDcYOWL42VicOhFlumD2LEhzQhgYE3T3/DQom0P7PJH8IKHbjT36sHe+MB/R5X+c6bmflDxaTF03brx/4lphsSw0aI3AUgThhE0t4bsEiMwUBCalM5gqyNxpT12egZ90sFIgImI=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=z6/IVmGOv6X7v3YhApXagM5n6q6FIUG/M4VlXcb7s5My+lg01/d4oEdeY8jm76w2DArBxjgPB8zeATJqw9Pf+zxgwVBWxG89+mY1DyBn4F/oVBCImZLHgV0CJkGdy/gBQjdqcWCCM/tnrbHms7mCtqp7indipDMQ7GvTGeSlfy4=;
Message-ID: <24931.12945.qm@web50301.mail.re2.yahoo.com>
X-YMail-OSG: _arxVoUVM1ke_EJK07lT4wicqk7th_MkbUreEZ9Q_CTKv8s
 .cRxmYswSkt84nuiSy0sJ04HXjcKaZbHEJHHhlIGVeMtn2mUD.7GvyTnGiNn
 BUFytViO3XGm4OMhAhI7EpEORv.5HQGqLItlVDhsJtoaFc2Yi.8YJUSMfrbN
 .bOisqa3nQPtctXCarK_C7lVtguVe_exk9lNqoq9MlZ926VjFZLShgUTw0ho
 S3YJaHdB6nlzwrqRpvcZKQCoZ890SMDLafJvZBuFmG6dn3C.Fr.9wolAqfpF
 nA2btijNX4QP.L71i2BZkDvAdVdKtDHFiKEx2fUrH2VLs7w--
Received: from [78.3.11.245] by web50301.mail.re2.yahoo.com via HTTP; Sat, 21 Aug 2010 05:05:10 PDT
X-Mailer: YahooMailRC/470 YahooMailWebService/0.8.105.279950
References: <AANLkTikRQQEp3-ambcuhLOdEP4h2Kq5oEixm9CpBTMNH@mail.gmail.com> <11005E6B-12CE-4DB1-A496-F71A2FC81FC1@apache.org> <216847.59345.qm@web50302.mail.re2.yahoo.com> <AANLkTinGv5X73k+7g9STUgS9+q649u=9N=NW7p2XNXp9@mail.gmail.com>
Date: Sat, 21 Aug 2010 05:05:10 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Calculate Term Co-occurrence Matrix
To: java-user@lucene.apache.org
In-Reply-To: <AANLkTinGv5X73k+7g9STUgS9+q649u=9N=NW7p2XNXp9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Ahmed,

That's what that KPE (link in my previous email, below) will do for you.  It's 
not open source at this time, but that is exactly one of the things it does.  I 
think Mahout collocations stuff might work for you, too.

Otis
----
Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
Lucene ecosystem search :: http://search-lucene.com/



----- Original Message ----
> From: ahmed algohary <algoharyalex@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Sat, August 21, 2010 7:20:03 AM
> Subject: Re: Calculate Term Co-occurrence Matrix
> 
> Thanks for all your answers!
> 
> it seems like I did not make my question  clear. I have a text corpus and I
> need to determine the pairs of words that  occur together in many documents.
> I need to do that to be able to measure the  semantic proximity between
> words. This method is expanded
> here<http://forums.searchenginewatch.com/showthread.php?t=48>.
> I hope to  find some code that given a text corpus, generate all the words
> pairs with  their probability of occurring together.
> 
> 
> On Sat, Aug 21, 2010 at 1:46  AM, Otis Gospodnetic <
> otis_gospodnetic@yahoo.com>  wrote:
> 
> > There is also a non-Mahout Key Phrase Extractor for  Collocations, SIPs, and
> > a
> > few other things:
> > http://sematext.com/products/key-phrase-extractor/index.html
> >
> >  One of the demos that uses news data is at
> > http://sematext.com/demo/kpe/index.html
> >
> > Otis
> >  ----
> > Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
> > Lucene ecosystem  search :: http://search-lucene.com/
> >
> >
> >
> > ----- Original  Message ----
> > > From: Grant Ingersoll <gsingers@apache.org>
> > > To: java-user@lucene.apache.org
> >  > Sent: Fri, August 20, 2010 8:52:17 AM
> > > Subject: Re: Calculate  Term Co-occurrence Matrix
> > >
> > > You might also be interested  in Mahout's collocations package:
> > >http://cwiki.apache.org/confluence/display/MAHOUT/Collocations
> >  >
> > > -Grant
> > > On  Aug 19, 2010, at 11:39 AM, ahmed  algohary wrote:
> > >
> > > > Hi all,
> > > >
> >  > > I need to know if there is a Lucene plug-in or a Lucene-based  API  for
> > > > calculating the term co-occurrence matrix for a  given text  corpus.
> > > >
> > > > Thanks!
> >  > >
> > > > --
> > > >  Ahmed
> >  >
> > > --------------------------
> > > Grant  Ingersoll
> > > http://www.lucidimagination.com/
> > >
> > > Search the  Lucene ecosystem using  Solr/Lucene:
> > >http://www.lucidimagination.com/search
> > >
> > >
> >  >  ---------------------------------------------------------------------
> >  > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >  > For  additional commands, e-mail: java-user-help@lucene.apache.org
> >  >
> > >
> >
> >  ---------------------------------------------------------------------
> > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >  For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 22 03:35:51 2010
Return-Path: <java-user-return-47092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82434 invoked from network); 22 Aug 2010 03:35:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Aug 2010 03:35:50 -0000
Received: (qmail 65992 invoked by uid 500); 22 Aug 2010 03:35:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65616 invoked by uid 500); 22 Aug 2010 03:35:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65608 invoked by uid 99); 22 Aug 2010 03:35:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Aug 2010 03:35:45 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.136.167.15] (HELO web113315.mail.gq1.yahoo.com) (98.136.167.15)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 22 Aug 2010 03:35:40 +0000
Received: (qmail 92033 invoked by uid 60001); 22 Aug 2010 03:35:19 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1282448119; bh=Kt7/V/fIUh7dAP6vUhsCvSie8yPp93igeaRF25HuRsI=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=eu5Lltw1NbXciNTXDr8vuqG5tkdUpPNWatSJmF9iE6blfGf5McvAgZa/cSUseNkGfFpYO55aT6WNsZAmDKDZQmlWOHoibjYv/zbqYPCO/YxGxoinby/1yA3FQW38I7lhn5w3GM82B90iJfRdVEBY2ceAe5Znappkzoczm7Go9Vo=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=ZNcr3ITjzMyOtFt76N4M6/xU3QFduHqDCcRaHay06btHYOWGQa+G7grkflvbF47jGrPuS4iII5BpLxAqRG79ZWWLbjRuA1vFdgtL5MJN7jbI6hnIuSoO1BceAqA8bAXHt0bxSH7Wg7hwSpNEe0+M0C2gXz9tsr7c+wGZ4uEZl0w=;
Message-ID: <531769.90099.qm@web113315.mail.gq1.yahoo.com>
X-YMail-OSG: PoOvl50VM1kLtj2VdziG03d44k3WcJEpTgxy2Ga19mxizIg
 2La5X.shri6oukeT91cnWup3GdxoM5dYUetjWqpg8M4Hwqa7sJPWyVwbukgc
 QZsnrvD9qTruOIJxpncMteczA16wwAz_0XLkYJZHTsgA3vEncxanT5kF6o70
 cXIf8Yq8fR_36i_3aEx1b1Z7M8KcogteYTTQTaT9sNt5iHHRN_m2a5N0EZoc
 6.HQu1zC1XafWqG98znhdepaRo66raOpFYufhAOi343zfyCE7FnsCXzycgkA
 cIlAC06V4FmGe6BZeWNEb4E4kEuaZtWB3bsyxIOq_h1aLQqbo03Xs0.76Pdw
 7RlAG23lu1FRa9AU-
Received: from [99.150.131.106] by web113315.mail.gq1.yahoo.com via HTTP; Sat, 21 Aug 2010 20:35:19 PDT
X-Mailer: YahooMailClassic/11.3.2 YahooMailWebService/0.8.105.279950
Date: Sat, 21 Aug 2010 20:35:19 -0700 (PDT)
From: Ivan Provalov <iprovalo@yahoo.com>
Subject: Re: Calculate Term Co-occurrence Matrix
To: java-user@lucene.apache.org
In-Reply-To: <24931.12945.qm@web50301.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Ahmed,=0A=0AFYI, I updated the term collocations package I mentioned earlie=
r with a few fixes and changes which will make it work for Lucene 3.0.2.  T=
his may help your task.=0A=0ASee: =0Ahttps://issues.apache.org/jira/browse/=
LUCENE-474=0A=0AThanks,=0A=0AIvan Provalov=0A=0A=0A--- On Sat, 8/21/10, Oti=
s Gospodnetic <otis_gospodnetic@yahoo.com> wrote:=0A=0A> From: Otis Gospodn=
etic <otis_gospodnetic@yahoo.com>=0A> Subject: Re: Calculate Term Co-occurr=
ence Matrix=0A> To: java-user@lucene.apache.org=0A> Date: Saturday, August =
21, 2010, 8:05 AM=0A> Ahmed,=0A> =0A> That's what that KPE (link in my prev=
ious email, below)=0A> will do for you.=A0 It's =0A> not open source at thi=
s time, but that is exactly one of=0A> the things it does.=A0 I =0A> think =
Mahout collocations stuff might work for you, too.=0A> =0A> Otis=0A> ----=
=0A> Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch=0A> Lucene e=
cosystem search :: http://search-lucene.com/=0A> =0A> =0A> =0A> ----- Origi=
nal Message ----=0A> > From: ahmed algohary <algoharyalex@gmail.com>=0A> > =
To: java-user@lucene.apache.org=0A> > Sent: Sat, August 21, 2010 7:20:03 AM=
=0A> > Subject: Re: Calculate Term Co-occurrence Matrix=0A> > =0A> > Thanks=
 for all your answers!=0A> > =0A> > it seems like I did not make my questio=
n=A0 clear.=0A> I have a text corpus and I=0A> > need to determine the pair=
s of words that=A0 occur=0A> together in many documents.=0A> > I need to do=
 that to be able to measure the=A0=0A> semantic proximity between=0A> > wor=
ds. This method is expanded=0A> > here<http://forums.searchenginewatch.com/=
showthread.php?t=3D48>.=0A> > I hope to=A0 find some code that given a text=
=0A> corpus, generate all the words=0A> > pairs with=A0 their probability o=
f occurring=0A> together.=0A> > =0A> > =0A> > On Sat, Aug 21, 2010 at 1:46=
=A0 AM, Otis=0A> Gospodnetic <=0A> > otis_gospodnetic@yahoo.com>=A0=0A> wro=
te:=0A> > =0A> > > There is also a non-Mahout Key Phrase Extractor=0A> for=
=A0 Collocations, SIPs, and=0A> > > a=0A> > > few other things:=0A> > > htt=
p://sematext.com/products/key-phrase-extractor/index.html=0A> > >=0A> > >=
=A0 One of the demos that uses news data is at=0A> > > http://sematext.com/=
demo/kpe/index.html=0A> > >=0A> > > Otis=0A> > >=A0 ----=0A> > > Sematext :=
: http://sematext.com/ :: Solr - Lucene -=0A> Nutch=0A> > > Lucene ecosyste=
m=A0 search :: http://search-lucene.com/=0A> > >=0A> > >=0A> > >=0A> > > --=
--- Original=A0 Message ----=0A> > > > From: Grant Ingersoll <gsingers@apac=
he.org>=0A> > > > To: java-user@lucene.apache.org=0A> > >=A0 > Sent: Fri, A=
ugust 20, 2010 8:52:17 AM=0A> > > > Subject: Re: Calculate=A0 Term=0A> Co-o=
ccurrence Matrix=0A> > > >=0A> > > > You might also be interested=A0 in=0A>=
 Mahout's collocations package:=0A> > > >http://cwiki.apache.org/confluence=
/display/MAHOUT/Collocations=0A> > >=A0 >=0A> > > > -Grant=0A> > > > On=A0 =
Aug 19, 2010, at 11:39 AM,=0A> ahmed=A0 algohary wrote:=0A> > > >=0A> > > >=
 > Hi all,=0A> > > > >=0A> > >=A0 > > I need to know if there is a=0A> Luce=
ne plug-in or a Lucene-based=A0 API=A0 for=0A> > > > > calculating the term=
 co-occurrence=0A> matrix for a=A0 given text=A0 corpus.=0A> > > > >=0A> > =
> > > Thanks!=0A> > >=A0 > >=0A> > > > > --=0A> > > > >=A0 Ahmed=0A> > >=A0=
 >=0A> > > > --------------------------=0A> > > > Grant=A0 Ingersoll=0A> > =
> > http://www.lucidimagination.com/=0A> > > >=0A> > > > Search the=A0 Luce=
ne ecosystem=0A> using=A0 Solr/Lucene:=0A> > > >http://www.lucidimagination=
.com/search=0A> > > >=0A> > > >=0A> > >=A0 >=A0=0A> -----------------------=
----------------------------------------------=0A> > >=A0 > To=A0 unsubscri=
be, e-mail: java-user-unsubscribe@lucene.apache.org=0A> > >=A0 > For=A0 add=
itional commands, e-mail:=0A> java-user-help@lucene.apache.org=0A> > >=A0 >=
=0A> > > >=0A> > >=0A> > >=A0=0A> -----------------------------------------=
----------------------------=0A> > > To=A0 unsubscribe, e-mail: java-user-u=
nsubscribe@lucene.apache.org=0A> > >=A0 For additional commands, e-mail: ja=
va-user-help@lucene.apache.org=0A> > >=0A> > >=0A> > =0A> =0A> ------------=
---------------------------------------------------------=0A> To unsubscrib=
e, e-mail: java-user-unsubscribe@lucene.apache.org=0A> For additional comma=
nds, e-mail: java-user-help@lucene.apache.org=0A> =0A> =0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 22 12:47:55 2010
Return-Path: <java-user-return-47093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35111 invoked from network); 22 Aug 2010 12:47:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Aug 2010 12:47:55 -0000
Received: (qmail 31133 invoked by uid 500); 22 Aug 2010 12:47:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30693 invoked by uid 500); 22 Aug 2010 12:47:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30683 invoked by uid 99); 22 Aug 2010 12:47:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Aug 2010 12:47:48 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of algoharyalex@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Aug 2010 12:47:44 +0000
Received: by qwk3 with SMTP id 3so5499235qwk.35
        for <java-user@lucene.apache.org>; Sun, 22 Aug 2010 05:47:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=LhPfb6sFWu0xf1V5DMe02FLYFVeAHJDDRMwY1vEaFe4=;
        b=WLnCAvbKYtf4A/K4gCrqAX6xscylQduN/J+ze1J6BE9pxlyFNzRGI6LI3CirQZaQTy
         lRfNbL0Xwz59n/RyRaw5fgXIwMuc6y6Op1VnVZWwO+DwOJZnNBJ01TVOfly4ZiVIzI2Y
         tv1LAqa1cGCngOXHyXpCp5Mqy2J68l1q/Fe9s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=k2C3rsw8DB9ZTr0YaY0aTsNM1uYSHTMI6Fu2NeuSamOFiOOnbte8qouO2eV0ftXnYK
         JNf94YnkAp0VOu1/3wYNFbbBQVpoT2ql2mfm/oGyHZ05ut9niDV8tonho93hLNMtYTPo
         GDZ1a+eu0nekNaG6JeHDRjpMTk9UDJYObsY34=
Received: by 10.224.45.142 with SMTP id e14mr2496736qaf.117.1282481242235;
 Sun, 22 Aug 2010 05:47:22 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.227.10 with HTTP; Sun, 22 Aug 2010 05:47:02 -0700 (PDT)
In-Reply-To: <531769.90099.qm@web113315.mail.gq1.yahoo.com>
References: <24931.12945.qm@web50301.mail.re2.yahoo.com> <531769.90099.qm@web113315.mail.gq1.yahoo.com>
From: ahmed algohary <algoharyalex@gmail.com>
Date: Sun, 22 Aug 2010 14:47:02 +0200
Message-ID: <AANLkTi=ZxWf48CiEOFDO7DZNMq5G2u10VTAw-5f2+AZT@mail.gmail.com>
Subject: Re: Calculate Term Co-occurrence Matrix
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175cdddadff771048e68ee78

--0015175cdddadff771048e68ee78
Content-Type: text/plain; charset=ISO-8859-1

Thanks! It is exactly what I need. But, isn't there a way to get the
matching score ?

for example, "damaged"  co-occurs with "shipment" with a probability = 0.4
??


On Sun, Aug 22, 2010 at 5:35 AM, Ivan Provalov <iprovalo@yahoo.com> wrote:

> Ahmed,
>
> FYI, I updated the term collocations package I mentioned earlier with a few
> fixes and changes which will make it work for Lucene 3.0.2.  This may help
> your task.
>
> See:
> https://issues.apache.org/jira/browse/LUCENE-474
>
> Thanks,
>
> Ivan Provalov
>
>
> --- On Sat, 8/21/10, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>
> > From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> > Subject: Re: Calculate Term Co-occurrence Matrix
> > To: java-user@lucene.apache.org
> > Date: Saturday, August 21, 2010, 8:05 AM
> > Ahmed,
> >
> > That's what that KPE (link in my previous email, below)
> > will do for you.  It's
> > not open source at this time, but that is exactly one of
> > the things it does.  I
> > think Mahout collocations stuff might work for you, too.
> >
> > Otis
> > ----
> > Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
> > Lucene ecosystem search :: http://search-lucene.com/
> >
> >
> >
> > ----- Original Message ----
> > > From: ahmed algohary <algoharyalex@gmail.com>
> > > To: java-user@lucene.apache.org
> > > Sent: Sat, August 21, 2010 7:20:03 AM
> > > Subject: Re: Calculate Term Co-occurrence Matrix
> > >
> > > Thanks for all your answers!
> > >
> > > it seems like I did not make my question  clear.
> > I have a text corpus and I
> > > need to determine the pairs of words that  occur
> > together in many documents.
> > > I need to do that to be able to measure the
> > semantic proximity between
> > > words. This method is expanded
> > > here<http://forums.searchenginewatch.com/showthread.php?t=48>.
> > > I hope to  find some code that given a text
> > corpus, generate all the words
> > > pairs with  their probability of occurring
> > together.
> > >
> > >
> > > On Sat, Aug 21, 2010 at 1:46  AM, Otis
> > Gospodnetic <
> > > otis_gospodnetic@yahoo.com>
> > wrote:
> > >
> > > > There is also a non-Mahout Key Phrase Extractor
> > for  Collocations, SIPs, and
> > > > a
> > > > few other things:
> > > > http://sematext.com/products/key-phrase-extractor/index.html
> > > >
> > > >  One of the demos that uses news data is at
> > > > http://sematext.com/demo/kpe/index.html
> > > >
> > > > Otis
> > > >  ----
> > > > Sematext :: http://sematext.com/ :: Solr - Lucene -
> > Nutch
> > > > Lucene ecosystem  search :: http://search-lucene.com/
> > > >
> > > >
> > > >
> > > > ----- Original  Message ----
> > > > > From: Grant Ingersoll <gsingers@apache.org>
> > > > > To: java-user@lucene.apache.org
> > > >  > Sent: Fri, August 20, 2010 8:52:17 AM
> > > > > Subject: Re: Calculate  Term
> > Co-occurrence Matrix
> > > > >
> > > > > You might also be interested  in
> > Mahout's collocations package:
> > > > >http://cwiki.apache.org/confluence/display/MAHOUT/Collocations
> > > >  >
> > > > > -Grant
> > > > > On  Aug 19, 2010, at 11:39 AM,
> > ahmed  algohary wrote:
> > > > >
> > > > > > Hi all,
> > > > > >
> > > >  > > I need to know if there is a
> > Lucene plug-in or a Lucene-based  API  for
> > > > > > calculating the term co-occurrence
> > matrix for a  given text  corpus.
> > > > > >
> > > > > > Thanks!
> > > >  > >
> > > > > > --
> > > > > >  Ahmed
> > > >  >
> > > > > --------------------------
> > > > > Grant  Ingersoll
> > > > > http://www.lucidimagination.com/
> > > > >
> > > > > Search the  Lucene ecosystem
> > using  Solr/Lucene:
> > > > >http://www.lucidimagination.com/search
> > > > >
> > > > >
> > > >  >
> > ---------------------------------------------------------------------
> > > >  > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > >  > For  additional commands, e-mail:
> > java-user-help@lucene.apache.org
> > > >  >
> > > > >
> > > >
> > > >
> > ---------------------------------------------------------------------
> > > > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > >  For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0015175cdddadff771048e68ee78--

From java-user-return-47094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 22 13:28:36 2010
Return-Path: <java-user-return-47094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49177 invoked from network); 22 Aug 2010 13:28:36 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Aug 2010 13:28:36 -0000
Received: (qmail 61265 invoked by uid 500); 22 Aug 2010 13:28:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60939 invoked by uid 500); 22 Aug 2010 13:28:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60931 invoked by uid 99); 22 Aug 2010 13:28:29 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Aug 2010 13:28:29 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of algoharyalex@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Aug 2010 13:28:08 +0000
Received: by qwk3 with SMTP id 3so5518542qwk.35
        for <java-user@lucene.apache.org>; Sun, 22 Aug 2010 06:27:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=uv87zslvkGy9heNKX9OteqBN2evbs/PYbKTqALM//mQ=;
        b=rSz+btUmKJIvpwOuKxLBwLtm53vJ+6ak8Z1eXv2z7ciCLrlcejCRk7/y9xRkzgyCJ5
         y8YEwJDwwjrNgQhaivBJhvFGNoWhHd7NTjOJ8H5QbQIY8fVx2RYkOzMCo+9/a6VxuYxL
         blGnJq66mq+kODlFRLPdxgZL5Wd4xfFR/jL7I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=F0sW1rvCb7t2M8dQfF+i9y3eJt1qnTpzneHZakUjktmRAdZMLE+74zkOd3H3sSRR/d
         bQ+DfzXx+e8Z9XlpjIZrH4pj35eMKJTro6mX9CkiYJdkhs0jP6ycGSYV3+OdkVJQFbCo
         G43UKCQQp1TIde8d0P8NSx1zORoLr6Hvdoe+M=
Received: by 10.229.11.11 with SMTP id r11mr1867108qcr.240.1282483667113; Sun,
 22 Aug 2010 06:27:47 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.227.10 with HTTP; Sun, 22 Aug 2010 06:27:27 -0700 (PDT)
In-Reply-To: <AANLkTi=ZxWf48CiEOFDO7DZNMq5G2u10VTAw-5f2+AZT@mail.gmail.com>
References: <24931.12945.qm@web50301.mail.re2.yahoo.com> <531769.90099.qm@web113315.mail.gq1.yahoo.com>
 <AANLkTi=ZxWf48CiEOFDO7DZNMq5G2u10VTAw-5f2+AZT@mail.gmail.com>
From: ahmed algohary <algoharyalex@gmail.com>
Date: Sun, 22 Aug 2010 15:27:27 +0200
Message-ID: <AANLkTikmc5pE7P9Nm04kKzc11Ly2jLter8gQyHwsAWLq@mail.gmail.com>
Subject: Re: Calculate Term Co-occurrence Matrix
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364ecd62689835048e697fe6
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364ecd62689835048e697fe6
Content-Type: text/plain; charset=ISO-8859-1

I think I got it.

In the CollectionIndexer class, I have added the co-occurrence score to the
index document:

 doc.add(new Field("score", collocation.getScore() + "",
                Field.Store.YES, Field.Index.NOT_ANALYZED));

then in the CollectionSearcher, the scores can be retrieved:

 d.get("score")

Is that correct ??

On Sun, Aug 22, 2010 at 2:47 PM, ahmed algohary <algoharyalex@gmail.com>wrote:

> Thanks! It is exactly what I need. But, isn't there a way to get the
> matching score ?
>
> for example, "damaged"  co-occurs with "shipment" with a probability = 0.4
> ??
>
>
> On Sun, Aug 22, 2010 at 5:35 AM, Ivan Provalov <iprovalo@yahoo.com> wrote:
>
>> Ahmed,
>>
>> FYI, I updated the term collocations package I mentioned earlier with a
>> few fixes and changes which will make it work for Lucene 3.0.2.  This may
>> help your task.
>>
>> See:
>> https://issues.apache.org/jira/browse/LUCENE-474
>>
>> Thanks,
>>
>> Ivan Provalov
>>
>>
>> --- On Sat, 8/21/10, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>>
>> > From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
>> > Subject: Re: Calculate Term Co-occurrence Matrix
>> > To: java-user@lucene.apache.org
>> > Date: Saturday, August 21, 2010, 8:05 AM
>> > Ahmed,
>> >
>> > That's what that KPE (link in my previous email, below)
>> > will do for you.  It's
>> > not open source at this time, but that is exactly one of
>> > the things it does.  I
>> > think Mahout collocations stuff might work for you, too.
>> >
>> > Otis
>> > ----
>> > Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
>> > Lucene ecosystem search :: http://search-lucene.com/
>> >
>> >
>> >
>> > ----- Original Message ----
>> > > From: ahmed algohary <algoharyalex@gmail.com>
>> > > To: java-user@lucene.apache.org
>> > > Sent: Sat, August 21, 2010 7:20:03 AM
>> > > Subject: Re: Calculate Term Co-occurrence Matrix
>> > >
>> > > Thanks for all your answers!
>> > >
>> > > it seems like I did not make my question  clear.
>> > I have a text corpus and I
>> > > need to determine the pairs of words that  occur
>> > together in many documents.
>> > > I need to do that to be able to measure the
>> > semantic proximity between
>> > > words. This method is expanded
>> > > here<http://forums.searchenginewatch.com/showthread.php?t=48>.
>> > > I hope to  find some code that given a text
>> > corpus, generate all the words
>> > > pairs with  their probability of occurring
>> > together.
>> > >
>> > >
>> > > On Sat, Aug 21, 2010 at 1:46  AM, Otis
>> > Gospodnetic <
>> > > otis_gospodnetic@yahoo.com>
>> > wrote:
>> > >
>> > > > There is also a non-Mahout Key Phrase Extractor
>> > for  Collocations, SIPs, and
>> > > > a
>> > > > few other things:
>> > > > http://sematext.com/products/key-phrase-extractor/index.html
>> > > >
>> > > >  One of the demos that uses news data is at
>> > > > http://sematext.com/demo/kpe/index.html
>> > > >
>> > > > Otis
>> > > >  ----
>> > > > Sematext :: http://sematext.com/ :: Solr - Lucene -
>> > Nutch
>> > > > Lucene ecosystem  search :: http://search-lucene.com/
>> > > >
>> > > >
>> > > >
>> > > > ----- Original  Message ----
>> > > > > From: Grant Ingersoll <gsingers@apache.org>
>> > > > > To: java-user@lucene.apache.org
>> > > >  > Sent: Fri, August 20, 2010 8:52:17 AM
>> > > > > Subject: Re: Calculate  Term
>> > Co-occurrence Matrix
>> > > > >
>> > > > > You might also be interested  in
>> > Mahout's collocations package:
>> > > > >http://cwiki.apache.org/confluence/display/MAHOUT/Collocations
>> > > >  >
>> > > > > -Grant
>> > > > > On  Aug 19, 2010, at 11:39 AM,
>> > ahmed  algohary wrote:
>> > > > >
>> > > > > > Hi all,
>> > > > > >
>> > > >  > > I need to know if there is a
>> > Lucene plug-in or a Lucene-based  API  for
>> > > > > > calculating the term co-occurrence
>> > matrix for a  given text  corpus.
>> > > > > >
>> > > > > > Thanks!
>> > > >  > >
>> > > > > > --
>> > > > > >  Ahmed
>> > > >  >
>> > > > > --------------------------
>> > > > > Grant  Ingersoll
>> > > > > http://www.lucidimagination.com/
>> > > > >
>> > > > > Search the  Lucene ecosystem
>> > using  Solr/Lucene:
>> > > > >http://www.lucidimagination.com/search
>> > > > >
>> > > > >
>> > > >  >
>> > ---------------------------------------------------------------------
>> > > >  > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > >  > For  additional commands, e-mail:
>> > java-user-help@lucene.apache.org
>> > > >  >
>> > > > >
>> > > >
>> > > >
>> > ---------------------------------------------------------------------
>> > > > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > >  For additional commands, e-mail: java-user-help@lucene.apache.org
>> > > >
>> > > >
>> > >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

--0016364ecd62689835048e697fe6--

From java-user-return-47095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 22 13:57:22 2010
Return-Path: <java-user-return-47095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54157 invoked from network); 22 Aug 2010 13:57:22 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Aug 2010 13:57:22 -0000
Received: (qmail 85730 invoked by uid 500); 22 Aug 2010 13:57:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85484 invoked by uid 500); 22 Aug 2010 13:57:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85476 invoked by uid 99); 22 Aug 2010 13:57:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Aug 2010 13:57:17 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.136.167.12] (HELO web113312.mail.gq1.yahoo.com) (98.136.167.12)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 22 Aug 2010 13:57:12 +0000
Received: (qmail 23885 invoked by uid 60001); 22 Aug 2010 13:56:51 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1282485411; bh=xjKlya2k48KgGAmb3BnPMnIeW7XiBDx7uRjdMaE0cvM=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=agctd5U+Wxp7mOrwtHo/qIlR4KmokEzOQrCReHftH/XHBf6jt2o/e4M63p8Md9yfnfb2MN8SBbBD3QshZXOZ+s4T7B2EF6SOY+s4xXH7255JrKq9c44J9g9dWtaj+/PkuS6qxMTR0wqzPeu86Y5wjdjup/aZclkP5xvVFjyyr8Q=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=5Hiv0fQybvbqANuwZE5OPj37qSb0mIFtnFjjgbZDxCsRvDiksn6Ts1EgkhvGczNdPBqPP9YAQX3R+rPxtKadzB1RfeK+rCvIxRCNQGw+9BiyEMuRCj73OZeGf33IfH6XgKLS6B+gbqNb9TTkWnblfb9clBFlIvJ7u/FcffiaGCU=;
Message-ID: <318683.22388.qm@web113312.mail.gq1.yahoo.com>
X-YMail-OSG: Eo_JMxsVM1kjStzuzqDBfa6AQChotJ43EVsLy.aN3lpNQvf
 Niwx0qEDW5vHl8ggxiCYEhCrLFQw0JEqoh0G2aeLsYD6k7Dw5ykAb_Bwm3Qn
 kMX2CkSvjN6B7tWeMlO9RoV3wVRIDe765M1LtYOypVpP7h5iuSRAyXDrbuF1
 tycdKIuBEb0T7a4ZaVRI1IZY1n53YG9NdUH3NAI96AkqTzkXlQRSsC2zrE.7
 unyAf13Y.0Sfy.qYOko7NwuUGJ7m6qkLeDoRUROK7iw3G3KcLNa0Zs2tIbhP
 KGRHwt0mqOWERfyuQ_He6kFYwlh3Ld17CS8tdf4h6nhZCHpfUHdI47PRN10m
 ZYUUCeIjqyClEzc8-
Received: from [99.150.131.106] by web113312.mail.gq1.yahoo.com via HTTP; Sun, 22 Aug 2010 06:56:50 PDT
X-Mailer: YahooMailClassic/11.3.2 YahooMailWebService/0.8.105.279950
Date: Sun, 22 Aug 2010 06:56:50 -0700 (PDT)
From: Ivan Provalov <iprovalo@yahoo.com>
Subject: Re: Calculate Term Co-occurrence Matrix
To: java-user@lucene.apache.org
In-Reply-To: <AANLkTikmc5pE7P9Nm04kKzc11Ly2jLter8gQyHwsAWLq@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Ahmed,=0A=0AInstead, I would use the score coming out of the CollocationSea=
rcher class. I changed it a bit to return the LinkedHashMap of collocated t=
erms and their scores relative to the term used in the query.  I have attac=
hed the new version.=0A=0AThanks,=0A=0AIP=0A=0A=0A=0A--- On Sun, 8/22/10, a=
hmed algohary <algoharyalex@gmail.com> wrote:=0A=0A> From: ahmed algohary <=
algoharyalex@gmail.com>=0A> Subject: Re: Calculate Term Co-occurrence Matri=
x=0A> To: java-user@lucene.apache.org=0A> Date: Sunday, August 22, 2010, 9:=
27 AM=0A> I think I got it.=0A> =0A> In the CollectionIndexer class, I have=
 added the=0A> co-occurrence score to the=0A> index document:=0A> =0A>  doc=
.add(new Field("score", collocation.getScore() + "",=0A> =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0=0A> Field.Store.YES, Field.Index.NOT_ANALYZED));=0A> =0A> t=
hen in the CollectionSearcher, the scores can be=0A> retrieved:=0A> =0A>  d=
.get("score")=0A> =0A> Is that correct ??=0A> =0A> On Sun, Aug 22, 2010 at =
2:47 PM, ahmed algohary <algoharyalex@gmail.com>wrote:=0A> =0A> > Thanks! I=
t is exactly what I need. But, isn't there a=0A> way to get the=0A> > match=
ing score ?=0A> >=0A> > for example, "damaged"=A0 co-occurs with "shipment"=
=0A> with a probability =3D 0.4=0A> > ??=0A> >=0A> >=0A> > On Sun, Aug 22, =
2010 at 5:35 AM, Ivan Provalov <iprovalo@yahoo.com>=0A> wrote:=0A> >=0A> >>=
 Ahmed,=0A> >>=0A> >> FYI, I updated the term collocations package I=0A> me=
ntioned earlier with a=0A> >> few fixes and changes which will make it work=
 for=0A> Lucene 3.0.2.=A0 This may=0A> >> help your task.=0A> >>=0A> >> See=
:=0A> >> https://issues.apache.org/jira/browse/LUCENE-474=0A> >>=0A> >> Tha=
nks,=0A> >>=0A> >> Ivan Provalov=0A> >>=0A> >>=0A> >> --- On Sat, 8/21/10, =
Otis Gospodnetic <otis_gospodnetic@yahoo.com>=0A> wrote:=0A> >>=0A> >> > Fr=
om: Otis Gospodnetic <otis_gospodnetic@yahoo.com>=0A> >> > Subject: Re: Cal=
culate Term Co-occurrence=0A> Matrix=0A> >> > To: java-user@lucene.apache.o=
rg=0A> >> > Date: Saturday, August 21, 2010, 8:05 AM=0A> >> > Ahmed,=0A> >>=
 >=0A> >> > That's what that KPE (link in my previous=0A> email, below)=0A>=
 >> > will do for you.=A0 It's=0A> >> > not open source at this time, but t=
hat is=0A> exactly one of=0A> >> > the things it does.=A0 I=0A> >> > think =
Mahout collocations stuff might work=0A> for you, too.=0A> >> >=0A> >> > Ot=
is=0A> >> > ----=0A> >> > Sematext :: http://sematext.com/ :: Solr - Lucene=
 -=0A> Nutch=0A> >> > Lucene ecosystem search :: http://search-lucene.com/=
=0A> >> >=0A> >> >=0A> >> >=0A> >> > ----- Original Message ----=0A> >> > >=
 From: ahmed algohary <algoharyalex@gmail.com>=0A> >> > > To: java-user@luc=
ene.apache.org=0A> >> > > Sent: Sat, August 21, 2010 7:20:03 AM=0A> >> > > =
Subject: Re: Calculate Term=0A> Co-occurrence Matrix=0A> >> > >=0A> >> > > =
Thanks for all your answers!=0A> >> > >=0A> >> > > it seems like I did not =
make my=0A> question=A0 clear.=0A> >> > I have a text corpus and I=0A> >> >=
 > need to determine the pairs of words=0A> that=A0 occur=0A> >> > together=
 in many documents.=0A> >> > > I need to do that to be able to measure=0A> =
the=0A> >> > semantic proximity between=0A> >> > > words. This method is ex=
panded=0A> >> > > here<http://forums.searchenginewatch.com/showthread.php?t=
=3D48>.=0A> >> > > I hope to=A0 find some code that=0A> given a text=0A> >>=
 > corpus, generate all the words=0A> >> > > pairs with=A0 their probabilit=
y of=0A> occurring=0A> >> > together.=0A> >> > >=0A> >> > >=0A> >> > > On S=
at, Aug 21, 2010 at 1:46=A0 AM,=0A> Otis=0A> >> > Gospodnetic <=0A> >> > > =
otis_gospodnetic@yahoo.com>=0A> >> > wrote:=0A> >> > >=0A> >> > > > There i=
s also a non-Mahout Key=0A> Phrase Extractor=0A> >> > for=A0 Collocations, =
SIPs, and=0A> >> > > > a=0A> >> > > > few other things:=0A> >> > > > http:/=
/sematext.com/products/key-phrase-extractor/index.html=0A> >> > > >=0A> >> =
> > >=A0 One of the demos that uses=0A> news data is at=0A> >> > > > http:/=
/sematext.com/demo/kpe/index.html=0A> >> > > >=0A> >> > > > Otis=0A> >> > >=
 >=A0 ----=0A> >> > > > Sematext :: http://sematext.com/ :: Solr - Lucene -=
=0A> >> > Nutch=0A> >> > > > Lucene ecosystem=A0 search :: http://search-lu=
cene.com/=0A> >> > > >=0A> >> > > >=0A> >> > > >=0A> >> > > > ----- Origina=
l=A0 Message ----=0A> >> > > > > From: Grant Ingersoll <gsingers@apache.org=
>=0A> >> > > > > To: java-user@lucene.apache.org=0A> >> > > >=A0 > Sent: Fr=
i, August 20,=0A> 2010 8:52:17 AM=0A> >> > > > > Subject: Re: Calculate=A0=
=0A> Term=0A> >> > Co-occurrence Matrix=0A> >> > > > >=0A> >> > > > > You m=
ight also be=0A> interested=A0 in=0A> >> > Mahout's collocations package:=
=0A> >> > > > >http://cwiki.apache.org/confluence/display/MAHOUT/Collocatio=
ns=0A> >> > > >=A0 >=0A> >> > > > > -Grant=0A> >> > > > > On=A0 Aug 19, 201=
0, at=0A> 11:39 AM,=0A> >> > ahmed=A0 algohary wrote:=0A> >> > > > >=0A> >>=
 > > > > > Hi all,=0A> >> > > > > >=0A> >> > > >=A0 > > I need to know if=
=0A> there is a=0A> >> > Lucene plug-in or a Lucene-based=A0=0A> API=A0 for=
=0A> >> > > > > > calculating the term=0A> co-occurrence=0A> >> > matrix fo=
r a=A0 given text=A0 corpus.=0A> >> > > > > >=0A> >> > > > > > Thanks!=0A> =
>> > > >=A0 > >=0A> >> > > > > > --=0A> >> > > > > >=A0 Ahmed=0A> >> > > >=
=A0 >=0A> >> > > > > --------------------------=0A> >> > > > > Grant=A0 Ing=
ersoll=0A> >> > > > > http://www.lucidimagination.com/=0A> >> > > > >=0A> >=
> > > > > Search the=A0 Lucene=0A> ecosystem=0A> >> > using=A0 Solr/Lucene:=
=0A> >> > > > >http://www.lucidimagination.com/search=0A> >> > > > >=0A> >>=
 > > > >=0A> >> > > >=A0 >=0A> >> >=0A> -----------------------------------=
----------------------------------=0A> >> > > >=A0 > To=A0 unsubscribe,=0A>=
 e-mail: java-user-unsubscribe@lucene.apache.org=0A> >> > > >=A0 > For=A0 a=
dditional=0A> commands, e-mail:=0A> >> > java-user-help@lucene.apache.org=
=0A> >> > > >=A0 >=0A> >> > > > >=0A> >> > > >=0A> >> > > >=0A> >> >=0A> --=
-------------------------------------------------------------------=0A> >> =
> > > To=A0 unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A=
> >> > > >=A0 For additional commands,=0A> e-mail: java-user-help@lucene.ap=
ache.org=0A> >> > > >=0A> >> > > >=0A> >> > >=0A> >> >=0A> >> >=0A> -------=
--------------------------------------------------------------=0A> >> > To =
unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> >> > For a=
dditional commands, e-mail: java-user-help@lucene.apache.org=0A> >> >=0A> >=
> >=0A> >>=0A> >>=0A> >>=0A> >>=0A> >>=0A> --------------------------------=
-------------------------------------=0A> >> To unsubscribe, e-mail: java-u=
ser-unsubscribe@lucene.apache.org=0A> >> For additional commands, e-mail: j=
ava-user-help@lucene.apache.org=0A> >>=0A> >>=0A> >=0A> =0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 22 19:25:06 2010
Return-Path: <java-user-return-47096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59966 invoked from network); 22 Aug 2010 19:25:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Aug 2010 19:25:06 -0000
Received: (qmail 52365 invoked by uid 500); 22 Aug 2010 19:25:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52314 invoked by uid 500); 22 Aug 2010 19:25:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52306 invoked by uid 99); 22 Aug 2010 19:25:03 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Aug 2010 19:25:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paul@pauljlucas.org designates 209.85.210.48 as permitted sender)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Aug 2010 19:24:39 +0000
Received: by pzk4 with SMTP id 4so2891430pzk.35
        for <java-user@lucene.apache.org>; Sun, 22 Aug 2010 12:24:17 -0700 (PDT)
Received: by 10.142.44.16 with SMTP id r16mr3435400wfr.319.1282505057171;
        Sun, 22 Aug 2010 12:24:17 -0700 (PDT)
Received: from [10.0.1.4] (adsl-76-199-65-208.dsl.pltn13.sbcglobal.net [76.199.65.208])
        by mx.google.com with ESMTPS id 23sm7322080wfa.22.2010.08.22.12.24.15
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 22 Aug 2010 12:24:16 -0700 (PDT)
Sender: "Paul J. Lucas" <paul@pauljlucas.org>
From: "Paul J. Lucas" <paul@lucasmail.org>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: IndexWriter.deleteDocuments(Query[]) not deleting
Date: Sun, 22 Aug 2010 12:24:12 -0700
Message-Id: <4370895A-AA21-439F-9601-5B3E1DCB7845@lucasmail.org>
To: java-user@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1081)
X-Mailer: Apple Mail (2.1081)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi -

Using Lucene 2.9.3, I'm indexing the metadata in image files.  For each =
image ("document" in Lucene), I have 2 additional special fields: =
"FILE-PATH" (containing the full path of the file) and "DIR-PATH" =
(containing the full path of the directory the file is in).

The FILE-PATH Field is created only once like:

    private final Field m_fieldFilePath =3D new Field(
        "FILE-PATH", "INIT", Field.Store.YES, Field.Index.NOT_ANALYZED
    );

and reused; the DIR-PATH Field is created once per document like:

    new Field(
        "DIR-PATH", file.getParentFile().getAbsolutePath(),
        Field.Store.NO, Field.Index.NOT_ANALYZED
    )

(The reason the DIR-PATH Field is created once per document is because =
it's part of indexing the rest of the image metadata and isn't a =
special-case like FILE-PATH.  I don't believe this is relevant to the =
problem at hand, however.)

If an image file (or an entire directory of image files) gets deleted, I =
need to delete it (them) from the index.  When deleting a single image, =
I could do:

	Term fileTerm =3D new Term( "FILE-PATH", file.getAbsolutePath() =
);
	writer.deleteDocuments( new TermQuery( fileTerm ) );

When deleting an entire directory of images, I could do:

	Term dirTerm =3D new Term( "DIR-PATH", file.getAbsolutePath() );
	writer.deleteDocuments( new TermQuery( dirTerm ) );

However, at the time of deletion, I don't know whether "file" refers to =
a single image file or to a directory of images files.  I can't do =
file.isFile() or file.isDirectory() because "file" no longer exists (it =
was deleted).  So to cover both cases, I do:

	Query[] queries =3D new Query[]{
	    new TermQuery( fileTerm ),
	    new TermQuery( dirTerm )
	};
	writer.deleteDocuments( queries );

I have non-Lucene code that monitors the filesystem for changes.  For =
Mac OS X, I can only get directory-level change notifications.  So if a =
file is deleted from a directory, I get a notification that the =
directory has changed.  So I delete all the documents in that directory =
then re-add them.

However (and here's the problem), the deletes never happen.  If I delete =
a file from a directory, the directory (looks like) its unindexed and =
reindexed, but a query for that image file still returns a result.  So =
it's like the delete never happened.

Why not?

Additional information: I create/close a new IndexWriter for the delete. =
 Even if I quit the application, relaunch, and run the query, the result =
still shows up (hence it's not that the current reader isn't seeing the =
deletion change).

- Paul


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 22 20:47:31 2010
Return-Path: <java-user-return-47097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81710 invoked from network); 22 Aug 2010 20:47:31 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Aug 2010 20:47:31 -0000
Received: (qmail 90722 invoked by uid 500); 22 Aug 2010 20:47:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90595 invoked by uid 500); 22 Aug 2010 20:47:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90587 invoked by uid 99); 22 Aug 2010 20:47:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Aug 2010 20:47:28 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Aug 2010 20:47:24 +0000
Received: by qwk3 with SMTP id 3so5732812qwk.35
        for <java-user@lucene.apache.org>; Sun, 22 Aug 2010 13:47:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=9XL4x2VmK8fPJ5nsN5eV20pUtPSSKjarUWyfp1EPlKc=;
        b=gSWVxYHTPlm+HboPBLWrpyaeL5vYlW/ijnAlM45CVmIYs22QNN9DOHBdiJ4FQVt+oR
         +ScfWVo9rUcLfGYeWrR8yYgEvNg/Rx8scWY/LiyGpP21M7AbNV9ZYDFMNUxb3tvz3/mK
         Z5tYkUXUwwnlNwoi0JVQ0XkKSCwPDg0Gb17BM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=BtGdgb7zlw4jzhht8KF0Xi7yiDyU3W2DhzuBSgxQmAGjMxTZyqkN5U1pZRNusYLs/6
         CrN6N5Vqt6lkuQPNXQmtTqUwGtMjwDZAVXfF4bqDGK9DCpliekVdOlKoitxjjbNUB39I
         hjq39DCdyd5OCQ/CyTS9mgSFc35JanmAkHNL8=
MIME-Version: 1.0
Received: by 10.229.213.80 with SMTP id gv16mr2947175qcb.134.1282510021464;
 Sun, 22 Aug 2010 13:47:01 -0700 (PDT)
Received: by 10.229.186.83 with HTTP; Sun, 22 Aug 2010 13:47:01 -0700 (PDT)
In-Reply-To: <4370895A-AA21-439F-9601-5B3E1DCB7845@lucasmail.org>
References: <4370895A-AA21-439F-9601-5B3E1DCB7845@lucasmail.org>
Date: Sun, 22 Aug 2010 13:47:01 -0700
Message-ID: <AANLkTinMBZSMWyjDYVxEEJj4HxLKfkc5FCw4_L_D=9Dt@mail.gmail.com>
Subject: Re: IndexWriter.deleteDocuments(Query[]) not deleting
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636284402401363048e6fa2ad

--001636284402401363048e6fa2ad
Content-Type: text/plain; charset=ISO-8859-1

Did you issue a commit (or close) the IndexWriter after you deleted the
documents?
And I'm assuming that something really weird didn't happen like a case
change,
but your NOT_ANALYZED should take care of that at index time, but are you
sure
your cases match when you submit your term queries?

An interesting test would be to write out the file names you create your
terms
from, and see what happens if you search on those fields etc....

HTH
Erick

On Sun, Aug 22, 2010 at 12:24 PM, Paul J. Lucas <paul@lucasmail.org> wrote:

> Hi -
>
> Using Lucene 2.9.3, I'm indexing the metadata in image files.  For each
> image ("document" in Lucene), I have 2 additional special fields:
> "FILE-PATH" (containing the full path of the file) and "DIR-PATH"
> (containing the full path of the directory the file is in).
>
> The FILE-PATH Field is created only once like:
>
>    private final Field m_fieldFilePath = new Field(
>        "FILE-PATH", "INIT", Field.Store.YES, Field.Index.NOT_ANALYZED
>    );
>
> and reused; the DIR-PATH Field is created once per document like:
>
>    new Field(
>        "DIR-PATH", file.getParentFile().getAbsolutePath(),
>        Field.Store.NO, Field.Index.NOT_ANALYZED
>    )
>
> (The reason the DIR-PATH Field is created once per document is because it's
> part of indexing the rest of the image metadata and isn't a special-case
> like FILE-PATH.  I don't believe this is relevant to the problem at hand,
> however.)
>
> If an image file (or an entire directory of image files) gets deleted, I
> need to delete it (them) from the index.  When deleting a single image, I
> could do:
>
>        Term fileTerm = new Term( "FILE-PATH", file.getAbsolutePath() );
>        writer.deleteDocuments( new TermQuery( fileTerm ) );
>
> When deleting an entire directory of images, I could do:
>
>        Term dirTerm = new Term( "DIR-PATH", file.getAbsolutePath() );
>        writer.deleteDocuments( new TermQuery( dirTerm ) );
>
> However, at the time of deletion, I don't know whether "file" refers to a
> single image file or to a directory of images files.  I can't do
> file.isFile() or file.isDirectory() because "file" no longer exists (it was
> deleted).  So to cover both cases, I do:
>
>        Query[] queries = new Query[]{
>            new TermQuery( fileTerm ),
>            new TermQuery( dirTerm )
>        };
>        writer.deleteDocuments( queries );
>
> I have non-Lucene code that monitors the filesystem for changes.  For Mac
> OS X, I can only get directory-level change notifications.  So if a file is
> deleted from a directory, I get a notification that the directory has
> changed.  So I delete all the documents in that directory then re-add them.
>
> However (and here's the problem), the deletes never happen.  If I delete a
> file from a directory, the directory (looks like) its unindexed and
> reindexed, but a query for that image file still returns a result.  So it's
> like the delete never happened.
>
> Why not?
>
> Additional information: I create/close a new IndexWriter for the delete.
>  Even if I quit the application, relaunch, and run the query, the result
> still shows up (hence it's not that the current reader isn't seeing the
> deletion change).
>
> - Paul
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636284402401363048e6fa2ad--

From java-user-return-47098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 22 22:05:13 2010
Return-Path: <java-user-return-47098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6463 invoked from network); 22 Aug 2010 22:05:13 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Aug 2010 22:05:13 -0000
Received: (qmail 44606 invoked by uid 500); 22 Aug 2010 22:05:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44539 invoked by uid 500); 22 Aug 2010 22:05:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44531 invoked by uid 99); 22 Aug 2010 22:05:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Aug 2010 22:05:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul@pauljlucas.org designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Aug 2010 22:05:02 +0000
Received: by pwj4 with SMTP id 4so1257602pwj.35
        for <java-user@lucene.apache.org>; Sun, 22 Aug 2010 15:04:42 -0700 (PDT)
Received: by 10.114.74.16 with SMTP id w16mr4896224waa.179.1282514682148;
        Sun, 22 Aug 2010 15:04:42 -0700 (PDT)
Received: from [10.0.1.4] (adsl-76-199-65-208.dsl.pltn13.sbcglobal.net [76.199.65.208])
        by mx.google.com with ESMTPS id g4sm11076395wae.2.2010.08.22.15.04.40
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 22 Aug 2010 15:04:41 -0700 (PDT)
Sender: "Paul J. Lucas" <paul@pauljlucas.org>
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1081)
Subject: Re: IndexWriter.deleteDocuments(Query[]) not deleting
From: "Paul J. Lucas" <paul@lucasmail.org>
In-Reply-To: <AANLkTinMBZSMWyjDYVxEEJj4HxLKfkc5FCw4_L_D=9Dt@mail.gmail.com>
Date: Sun, 22 Aug 2010 15:04:38 -0700
Content-Transfer-Encoding: quoted-printable
Message-Id: <69DF7A51-3064-4187-9265-1070BDADF168@lucasmail.org>
References: <4370895A-AA21-439F-9601-5B3E1DCB7845@lucasmail.org> <AANLkTinMBZSMWyjDYVxEEJj4HxLKfkc5FCw4_L_D=9Dt@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1081)

On Aug 22, 2010, at 1:47 PM, Erick Erickson wrote:

> Did you issue a commit (or close) the IndexWriter after you deleted =
the
> documents?

I originally wrote:

> I create/close a new IndexWriter for the delete.

So the answer is "yes."

> ... are you sure your cases match when you submit your term queries?

Yes.

> An interesting test would be to write out the file names you create =
your
> terms from, and see what happens if you search on those fields etc....

Never mind.  I figured it out.  (Don't you hate it when you can't figure =
something out, you write-up a detailed question, post it, then go off an =
figure it out afterwards?)

The problem was the directory was being stored in the index like:

	/path/to/file/

(with the trailing slash).  The delete query, however, didn't have the =
trailing slash since File.getAbsolutePath() doesn't return trailing file =
separator characters.  D'oh!

- Paul


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 22 22:14:47 2010
Return-Path: <java-user-return-47099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9974 invoked from network); 22 Aug 2010 22:14:46 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Aug 2010 22:14:46 -0000
Received: (qmail 51141 invoked by uid 500); 22 Aug 2010 22:14:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51013 invoked by uid 500); 22 Aug 2010 22:14:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51005 invoked by uid 99); 22 Aug 2010 22:14:44 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Aug 2010 22:14:44 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Aug 2010 22:14:22 +0000
Received: by qwk3 with SMTP id 3so5772283qwk.35
        for <java-user@lucene.apache.org>; Sun, 22 Aug 2010 15:14:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=QuYWxhT4x495stwYd6eX3dRmm+rYCNudHMLea42zEhA=;
        b=vc4o4Mpi+ba4ZhjZ1q5XwHutLA1dGQgEto5n5PeHGlG9vwyYHcjGyIxf+oaHcdPzJB
         IbaYTxo6h2SC4tvO5sDU5l3shqocqTgRkOrZRcBJ0wLVqGe6EZEMNYg10fApwoyPajK/
         mVXON8oj0NmZ3biot5ru2rQqALwxlyJg8xRpI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=WZ98awJUz/PDLeELYx0clxkG2w19rQ/YuEwn+gzDYgH0CpDqtN4ZhhXpHJi1Vu58VF
         HDuneBmKj7dUgDeKBuGaWhHC6cUEQMhVEDjrU46pkpvQsHkbHxbaw+6yHUjL9scuaHXc
         W7MfL5Heep+66eBinwlZ8N5ke+IHQLmfAGDMs=
MIME-Version: 1.0
Received: by 10.224.121.65 with SMTP id g1mr2708850qar.370.1282515241432; Sun,
 22 Aug 2010 15:14:01 -0700 (PDT)
Received: by 10.229.186.83 with HTTP; Sun, 22 Aug 2010 15:14:01 -0700 (PDT)
In-Reply-To: <69DF7A51-3064-4187-9265-1070BDADF168@lucasmail.org>
References: <4370895A-AA21-439F-9601-5B3E1DCB7845@lucasmail.org>
	<AANLkTinMBZSMWyjDYVxEEJj4HxLKfkc5FCw4_L_D=9Dt@mail.gmail.com>
	<69DF7A51-3064-4187-9265-1070BDADF168@lucasmail.org>
Date: Sun, 22 Aug 2010 15:14:01 -0700
Message-ID: <AANLkTi=5ZYW+3mPBmN82iEOKuDPQQ8z70Mp2bpZR0Xwq@mail.gmail.com>
Subject: Re: IndexWriter.deleteDocuments(Query[]) not deleting
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00c09f88d3d46278c2048e70d9f0
X-Virus-Checked: Checked by ClamAV on apache.org

--00c09f88d3d46278c2048e70d9f0
Content-Type: text/plain; charset=ISO-8859-1

Yep, sure hate it when that happens, which doesn't prevent it
happening to me more often than I'd like :).

Glad you figured it out.

Erick

On Sun, Aug 22, 2010 at 3:04 PM, Paul J. Lucas <paul@lucasmail.org> wrote:

> On Aug 22, 2010, at 1:47 PM, Erick Erickson wrote:
>
> > Did you issue a commit (or close) the IndexWriter after you deleted the
> > documents?
>
> I originally wrote:
>
> > I create/close a new IndexWriter for the delete.
>
> So the answer is "yes."
>
> > ... are you sure your cases match when you submit your term queries?
>
> Yes.
>
> > An interesting test would be to write out the file names you create your
> > terms from, and see what happens if you search on those fields etc....
>
> Never mind.  I figured it out.  (Don't you hate it when you can't figure
> something out, you write-up a detailed question, post it, then go off an
> figure it out afterwards?)
>
> The problem was the directory was being stored in the index like:
>
>        /path/to/file/
>
> (with the trailing slash).  The delete query, however, didn't have the
> trailing slash since File.getAbsolutePath() doesn't return trailing file
> separator characters.  D'oh!
>
> - Paul
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00c09f88d3d46278c2048e70d9f0--

From java-user-return-47100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 23 07:43:16 2010
Return-Path: <java-user-return-47100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83547 invoked from network); 23 Aug 2010 07:43:15 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Aug 2010 07:43:15 -0000
Received: (qmail 15858 invoked by uid 500); 23 Aug 2010 07:43:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15227 invoked by uid 500); 23 Aug 2010 07:43:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15218 invoked by uid 99); 23 Aug 2010 07:43:08 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Aug 2010 07:43:08 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [205.188.91.95] (HELO imr-db01.mx.aol.com) (205.188.91.95)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Aug 2010 07:42:42 +0000
Received: from imo-da01.mx.aol.com (imo-da01.mx.aol.com [205.188.169.199])
	by imr-db01.mx.aol.com (8.14.1/8.14.1) with ESMTP id o7N7gKZ8018145
	for <java-user@lucene.apache.org>; Mon, 23 Aug 2010 03:42:20 -0400
Received: from gaganb@graffiti.net
	by imo-da01.mx.aol.com  (mail_out_v42.9.) id h.ef6.45b8c9e (34976)
	 for <java-user@lucene.apache.org>; Mon, 23 Aug 2010 03:42:15 -0400 (EDT)
Received: from smtprly-dc03.mx.aol.com (smtprly-dc03.mx.aol.com [205.188.170.3]) by cia-da08.mx.aol.com (v129.4) with ESMTP id MAILCIADA081-d3c04c7226551a5; Mon, 23 Aug 2010 03:42:15 -0400
Received: from web-mmc-m04 (web-mmc-m04.sim.aol.com [64.12.224.137]) by smtprly-dc03.mx.aol.com (v129.4) with ESMTP id MAILSMTPRLYDC038-d3c04c7226551a5; Mon, 23 Aug 2010 03:42:13 -0400
To: java-user@lucene.apache.org
Subject: slow search threads during a disk copy
Date: Mon, 23 Aug 2010 03:42:12 -0400
X-MB-Message-Source: WebUI
X-AOL-IP: 216.109.102.12
X-MB-Message-Type: User
MIME-Version: 1.0
From: gaganb@graffiti.net
Content-Type: multipart/alternative; 
 boundary="--------MB_8CD10ADD5A19174_1354_3E5_web-mmc-m04.sysops.aol.com"
X-Mailer: Mail.com Webmail 32447-STANDARD
Received: from 216.109.102.12 by web-mmc-m04.sysops.aol.com (64.12.224.137) with HTTP (WebMailUI); Mon, 23 Aug 2010 03:42:12 -0400
Message-Id: <8CD10ADD59CCEB2-1354-1F2@web-mmc-m04.sysops.aol.com>
X-AOL-SENDER: gaganb@graffiti.net
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Flag: NO

----------MB_8CD10ADD5A19174_1354_3E5_web-mmc-m04.sysops.aol.com
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="us-ascii"


Hi all,


We're observing search threads slowing down during directory copies perfor=
med during updates to the index. The thread dump shows search threads bloc=
ked on a FSDirectory$FSIndexInput$Descriptor instance:



"Worker Thread - 12" daemon prio=3D10 tid=3D0x082b2400 nid=3D0x4654 waitin=
g for monitor entry [0x988ed000..0x988edf30]
   java.lang.Thread.State: BLOCKED (on object monitor)
    at org.apache.lucene.store.FSDirectory$FSIndexInput.readInternal(FSDir=
ectory.java:542)
    - waiting to lock <0xc79c9900> (a org.apache.lucene.store.FSDirectory$=
FSIndexInput$Descriptor)
    at org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInpu=
t.java:152)
    at org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexIn=
put.java:38)
    at org.apache.lucene.store.IndexInput.readVInt(IndexInput.java:76)
    at org.apache.lucene.index.SegmentTermDocs.read(SegmentTermDocs.java:1=
33)
    at org.apache.lucene.index.MultiSegmentReader$MultiTermDocs.read(Multi=
SegmentReader.java:573)
    at org.apache.lucene.search.TermScorer.next(TermScorer.java:106)
    at org.apache.lucene.search.ConjunctionScorer.init(ConjunctionScorer.j=
ava:80)
    at org.apache.lucene.search.ConjunctionScorer.next(ConjunctionScorer.j=
ava:48)
    at org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java:3=
19)
    at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:14=
6)
    at org.apache.lucene.search.Searcher.search(Searcher.java:118)

    ...


The directory copy we do is a 'cp -pr <src-dir>/* <dest-dir>' command prio=
r to applying changes (addDocument calls) on the current "available" segme=
nt. This takes >7 mins to copy a directory of size 1.4G. During this time=
 window, the searches are slow and the above thread stacks are observed.


Could there be any system level limits we're hitting? =20


Our test environment is:
lucene-2.3.2
4x2.6 GHz, 16G memory
Red Hat 3.4.6-9


Thanks and regards,


- Gagan

----------MB_8CD10ADD5A19174_1354_3E5_web-mmc-m04.sysops.aol.com--

From java-user-return-47101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 23 07:48:12 2010
Return-Path: <java-user-return-47101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84044 invoked from network); 23 Aug 2010 07:48:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Aug 2010 07:48:12 -0000
Received: (qmail 21030 invoked by uid 500); 23 Aug 2010 07:48:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20918 invoked by uid 500); 23 Aug 2010 07:48:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20910 invoked by uid 99); 23 Aug 2010 07:48:06 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Aug 2010 07:48:06 +0000
X-ASF-Spam-Status: No, hits=3.3 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Aug 2010 07:47:45 +0000
Received: by wwb13 with SMTP id 13so169981wwb.5
        for <java-user@lucene.apache.org>; Mon, 23 Aug 2010 00:47:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=TRrwzfdGcn9rl/WqqLxI49JgnYirzX9SeBEGD0EiZ/g=;
        b=TrvBMClA1GIihv/JEkOdKSwSlspDuwcNrB9ZPEpdAiPaLKCgcYlS3e9BQoFpaCfYDT
         dyyUIthg89VW2lADAB55YRtcF+MIFP8nkvfPmCu5QgZIEfK68YqrQuW/U6yarp3TZZgt
         VtSAW2zSJ0st7FRHVT4KySsiKvKW1eGwyDmO0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=mZZdKhIu3oLaYhtZSmXoi/48opvcuROeylObkvaaXO7I7TSzsf7uw9Nf1UP/ps18BI
         jyPMvotedZI1tLilpsUkj5yktdUZPBVp2YG0Ds7gXG4RO+mEyBE9bp64VvzfND7oiYeq
         mSYyCukzZk/Is1u6Odz76C4WyIx3RGQ5jFidg=
Received: by 10.227.157.17 with SMTP id z17mr4188882wbw.122.1282549644216;
 Mon, 23 Aug 2010 00:47:24 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.149.78 with HTTP; Mon, 23 Aug 2010 00:47:04 -0700 (PDT)
In-Reply-To: <8CD10ADD59CCEB2-1354-1F2@web-mmc-m04.sysops.aol.com>
References: <8CD10ADD59CCEB2-1354-1F2@web-mmc-m04.sysops.aol.com>
From: Anshum <anshumg@gmail.com>
Date: Mon, 23 Aug 2010 13:17:04 +0530
Message-ID: <AANLkTimT+=LEsiNi3adUM0Ow3qvbs5qi5VBgqCj7yUpz@mail.gmail.com>
Subject: Re: slow search threads during a disk copy
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e65b5e3ef34ae4048e78dbd3
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e65b5e3ef34ae4048e78dbd3
Content-Type: text/plain; charset=ISO-8859-1

Seems like a case of I/O issues. You may be reading content off the index
while performing searches while the I/O for copy is also happening.

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Mon, Aug 23, 2010 at 1:12 PM, <gaganb@graffiti.net> wrote:

>
> Hi all,
>
>
> We're observing search threads slowing down during directory copies
> performed during updates to the index. The thread dump shows search threads
> blocked on a FSDirectory$FSIndexInput$Descriptor instance:
>
>
>
> "Worker Thread - 12" daemon prio=10 tid=0x082b2400 nid=0x4654 waiting for
> monitor entry [0x988ed000..0x988edf30]
>   java.lang.Thread.State: BLOCKED (on object monitor)
>    at
> org.apache.lucene.store.FSDirectory$FSIndexInput.readInternal(FSDirectory.java:542)
>    - waiting to lock <0xc79c9900> (a
> org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor)
>    at
> org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:152)
>    at
> org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java:38)
>    at org.apache.lucene.store.IndexInput.readVInt(IndexInput.java:76)
>    at
> org.apache.lucene.index.SegmentTermDocs.read(SegmentTermDocs.java:133)
>    at
> org.apache.lucene.index.MultiSegmentReader$MultiTermDocs.read(MultiSegmentReader.java:573)
>    at org.apache.lucene.search.TermScorer.next(TermScorer.java:106)
>    at
> org.apache.lucene.search.ConjunctionScorer.init(ConjunctionScorer.java:80)
>    at
> org.apache.lucene.search.ConjunctionScorer.next(ConjunctionScorer.java:48)
>    at
> org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java:319)
>    at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:146)
>    at org.apache.lucene.search.Searcher.search(Searcher.java:118)
>
>    ...
>
>
> The directory copy we do is a 'cp -pr <src-dir>/* <dest-dir>' command prior
> to applying changes (addDocument calls) on the current "available" segment.
> This takes >7 mins to copy a directory of size 1.4G. During this time
> window, the searches are slow and the above thread stacks are observed.
>
>
> Could there be any system level limits we're hitting?
>
>
> Our test environment is:
> lucene-2.3.2
> 4x2.6 GHz, 16G memory
> Red Hat 3.4.6-9
>
>
> Thanks and regards,
>
>
> - Gagan
>

--0016e65b5e3ef34ae4048e78dbd3--

From java-user-return-47102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 23 08:21:59 2010
Return-Path: <java-user-return-47102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96989 invoked from network); 23 Aug 2010 08:21:59 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Aug 2010 08:21:59 -0000
Received: (qmail 42323 invoked by uid 500); 23 Aug 2010 08:21:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42291 invoked by uid 500); 23 Aug 2010 08:21:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42283 invoked by uid 99); 23 Aug 2010 08:21:52 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Aug 2010 08:21:52 +0000
X-ASF-Spam-Status: No, hits=3.9 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [64.12.100.31] (HELO imr-ma05.mx.aol.com) (64.12.100.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Aug 2010 08:21:28 +0000
Received: from imo-da04.mx.aol.com (imo-da04.mx.aol.com [205.188.169.202])
	by imr-ma05.mx.aol.com (8.14.1/8.14.1) with ESMTP id o7N8L5gV002157
	for <java-user@lucene.apache.org>; Mon, 23 Aug 2010 04:21:05 -0400
Received: from gaganb@graffiti.net
	by imo-da04.mx.aol.com  (mail_out_v42.9.) id h.eb6.5226db (55721)
	 for <java-user@lucene.apache.org>; Mon, 23 Aug 2010 04:21:00 -0400 (EDT)
Received: from smtprly-mc02.mx.aol.com (smtprly-mc02.mx.aol.com [64.12.95.98]) by cia-md02.mx.aol.com (v129.4) with ESMTP id MAILCIAMD024-d3cf4c722f6666; Mon, 23 Aug 2010 04:21:00 -0400
Received: from web-mmc-m04 (web-mmc-m04.sim.aol.com [64.12.224.137]) by smtprly-mc02.mx.aol.com (v129.4) with ESMTP id MAILSMTPRLYMC021-d3cf4c722f6666; Mon, 23 Aug 2010 04:20:54 -0400
References: <8CD10ADD59CCEB2-1354-1F2@web-mmc-m04.sysops.aol.com> <AANLkTimT+=LEsiNi3adUM0Ow3qvbs5qi5VBgqCj7yUpz@mail.gmail.com>
To: java-user@lucene.apache.org
Subject: Re: slow search threads during a disk copy
Date: Mon, 23 Aug 2010 04:20:54 -0400
X-AOL-IP: 216.109.102.12
In-Reply-To: <AANLkTimT+=LEsiNi3adUM0Ow3qvbs5qi5VBgqCj7yUpz@mail.gmail.com>
X-MB-Message-Source: WebUI
MIME-Version: 1.0
From: gaganb@graffiti.net
X-MB-Message-Type: User
Content-Type: multipart/alternative; 
 boundary="--------MB_8CD10B33D5C042A_1354_722_web-mmc-m04.sysops.aol.com"
X-Mailer: Mail.com Webmail 32447-STANDARD
Received: from 216.109.102.12 by web-mmc-m04.sysops.aol.com (64.12.224.137) with HTTP (WebMailUI); Mon, 23 Aug 2010 04:20:54 -0400
Message-Id: <8CD10B33D527E22-1354-395@web-mmc-m04.sysops.aol.com>
X-AOL-SENDER: gaganb@graffiti.net
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Flag: NO

----------MB_8CD10B33D5C042A_1354_722_web-mmc-m04.sysops.aol.com
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="us-ascii"


We suspected the same at first, and so modified the flow to do the copy of=
 the new version "before" searching is activated on it. So, there are no=
 searches on the new version dir at the time of copy - yet we still see sl=
owness during the disk copy.


Thanks,
- Gagan





-----Original Message-----
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Sent: Mon, Aug 23, 2010 1:17 pm
Subject: Re: slow search threads during a disk copy


Seems like a case of I/O issues. You may be reading content off the index
while performing searches while the I/O for copy is also happening.

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Mon, Aug 23, 2010 at 1:12 PM, <gaganb@graffiti.net> wrote:

>
> Hi all,
>
>
> We're observing search threads slowing down during directory copies
> performed during updates to the index. The thread dump shows search thre=
ads
> blocked on a FSDirectory$FSIndexInput$Descriptor instance:
>
>
>
> "Worker Thread - 12" daemon prio=3D10 tid=3D0x082b2400 nid=3D0x4654 wait=
ing for
> monitor entry [0x988ed000..0x988edf30]
>   java.lang.Thread.State: BLOCKED (on object monitor)
>    at
> org.apache.lucene.store.FSDirectory$FSIndexInput.readInternal(FSDirector=
y.java:542)
>    - waiting to lock <0xc79c9900> (a
> org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor)
>    at
> org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.jav=
a:152)
>    at
> org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.j=
ava:38)
>    at org.apache.lucene.store.IndexInput.readVInt(IndexInput.java:76)
>    at
> org.apache.lucene.index.SegmentTermDocs.read(SegmentTermDocs.java:133)
>    at
> org.apache.lucene.index.MultiSegmentReader$MultiTermDocs.read(MultiSegme=
ntReader.java:573)
>    at org.apache.lucene.search.TermScorer.next(TermScorer.java:106)
>    at
> org.apache.lucene.search.ConjunctionScorer.init(ConjunctionScorer.java:8=
0)
>    at
> org.apache.lucene.search.ConjunctionScorer.next(ConjunctionScorer.java:4=
8)
>    at
> org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java:319)
>    at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:1=
46)
>    at org.apache.lucene.search.Searcher.search(Searcher.java:118)
>
>    ...
>
>
> The directory copy we do is a 'cp -pr <src-dir>/* <dest-dir>' command pr=
ior
> to applying changes (addDocument calls) on the current "available" segme=
nt.
> This takes >7 mins to copy a directory of size 1.4G. During this time
> window, the searches are slow and the above thread stacks are observed.
>
>
> Could there be any system level limits we're hitting?
>
>
> Our test environment is:
> lucene-2.3.2
> 4x2.6 GHz, 16G memory
> Red Hat 3.4.6-9
>
>
> Thanks and regards,
>
>
> - Gagan
>

=20


----------MB_8CD10B33D5C042A_1354_722_web-mmc-m04.sysops.aol.com--

From java-user-return-47103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 23 08:42:01 2010
Return-Path: <java-user-return-47103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1943 invoked from network); 23 Aug 2010 08:42:00 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Aug 2010 08:42:00 -0000
Received: (qmail 53941 invoked by uid 500); 23 Aug 2010 08:41:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53577 invoked by uid 500); 23 Aug 2010 08:41:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53569 invoked by uid 99); 23 Aug 2010 08:41:55 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Aug 2010 08:41:55 +0000
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Aug 2010 08:41:33 +0000
Received: by qyk12 with SMTP id 12so2801696qyk.14
        for <java-user@lucene.apache.org>; Mon, 23 Aug 2010 01:41:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=BvPPgL8YdrGOK3FpoqMCZU+V9peZvLcKP3M0thrNBYQ=;
        b=hH1+lOD0Rj2mo+CbrFI12vRvWDLf1kaUS0EwPUWo8t7lQ2eRrGyKok47wN7U9xYt35
         V9xNfm82VljOpeh6p8Fj1ORlXOq01v/FMMA7ITxMXqpGN9SDfg1bSaJ9qbT0IWjwWXqw
         HnK4J0GCt/eunQrIBczBJ9N4NO4bDwmbYG6Bs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=CSnfqNlWon+iWbP9OKSUYcLakj+wkHa90dVX0Fsv5caFntZXrT+uMi8ne1F/Nky25g
         8e0jM53FAtTh6COMFDzTogryCFvBhwqJfa2QuNhseHgAqJT8iSmXLJrrmbWbLGeZkaQz
         Z8BGBG/JTNzQMsjlSF2CyFzw/1iC+nQRtiehc=
Received: by 10.229.192.4 with SMTP id do4mr3305592qcb.164.1282552872381; Mon,
 23 Aug 2010 01:41:12 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.223.132 with HTTP; Mon, 23 Aug 2010 01:40:52 -0700 (PDT)
In-Reply-To: <8CD10B33D527E22-1354-395@web-mmc-m04.sysops.aol.com>
References: <8CD10ADD59CCEB2-1354-1F2@web-mmc-m04.sysops.aol.com>
 <AANLkTimT+=LEsiNi3adUM0Ow3qvbs5qi5VBgqCj7yUpz@mail.gmail.com> <8CD10B33D527E22-1354-395@web-mmc-m04.sysops.aol.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 23 Aug 2010 09:40:52 +0100
Message-ID: <AANLkTi=Qj=Auc5MP4fRYJhOF-h1t8PzkRzLDg2WUyccL@mail.gmail.com>
Subject: Re: slow search threads during a disk copy
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Well, there still sounds like plenty of scope for IO contention.  Are
source and dest directories on the same disk?  What does iostat show?
Could you use rsync rather than cp -rp, or something else that only
copies changes?


--
Ian.


On Mon, Aug 23, 2010 at 9:20 AM,  <gaganb@graffiti.net> wrote:
>
> We suspected the same at first, and so modified the flow to do the copy o=
f the new version "before" searching is activated on it. So, there are no s=
earches on the new version dir at the time of copy - yet we still see slown=
ess during the disk copy.
>
>
> Thanks,
> - Gagan
>
>
>
>
>
> -----Original Message-----
> From: Anshum <anshumg@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Mon, Aug 23, 2010 1:17 pm
> Subject: Re: slow search threads during a disk copy
>
>
> Seems like a case of I/O issues. You may be reading content off the index
> while performing searches while the I/O for copy is also happening.
>
> --
> Anshum Gupta
> http://ai-cafe.blogspot.com
>
>
> On Mon, Aug 23, 2010 at 1:12 PM, <gaganb@graffiti.net> wrote:
>
>>
>> Hi all,
>>
>>
>> We're observing search threads slowing down during directory copies
>> performed during updates to the index. The thread dump shows search thre=
ads
>> blocked on a FSDirectory$FSIndexInput$Descriptor instance:
>>
>>
>>
>> "Worker Thread - 12" daemon prio=3D10 tid=3D0x082b2400 nid=3D0x4654 wait=
ing for
>> monitor entry [0x988ed000..0x988edf30]
>> =A0 java.lang.Thread.State: BLOCKED (on object monitor)
>> =A0 =A0at
>> org.apache.lucene.store.FSDirectory$FSIndexInput.readInternal(FSDirector=
y.java:542)
>> =A0 =A0- waiting to lock <0xc79c9900> (a
>> org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor)
>> =A0 =A0at
>> org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.jav=
a:152)
>> =A0 =A0at
>> org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.j=
ava:38)
>> =A0 =A0at org.apache.lucene.store.IndexInput.readVInt(IndexInput.java:76=
)
>> =A0 =A0at
>> org.apache.lucene.index.SegmentTermDocs.read(SegmentTermDocs.java:133)
>> =A0 =A0at
>> org.apache.lucene.index.MultiSegmentReader$MultiTermDocs.read(MultiSegme=
ntReader.java:573)
>> =A0 =A0at org.apache.lucene.search.TermScorer.next(TermScorer.java:106)
>> =A0 =A0at
>> org.apache.lucene.search.ConjunctionScorer.init(ConjunctionScorer.java:8=
0)
>> =A0 =A0at
>> org.apache.lucene.search.ConjunctionScorer.next(ConjunctionScorer.java:4=
8)
>> =A0 =A0at
>> org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java:319)
>> =A0 =A0at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.ja=
va:146)
>> =A0 =A0at org.apache.lucene.search.Searcher.search(Searcher.java:118)
>>
>> =A0 =A0...
>>
>>
>> The directory copy we do is a 'cp -pr <src-dir>/* <dest-dir>' command pr=
ior
>> to applying changes (addDocument calls) on the current "available" segme=
nt.
>> This takes >7 mins to copy a directory of size 1.4G. During this time
>> window, the searches are slow and the above thread stacks are observed.
>>
>>
>> Could there be any system level limits we're hitting?
>>
>>
>> Our test environment is:
>> lucene-2.3.2
>> 4x2.6 GHz, 16G memory
>> Red Hat 3.4.6-9
>>
>>
>> Thanks and regards,
>>
>>
>> - Gagan
>>
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 23 09:44:50 2010
Return-Path: <java-user-return-47104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24224 invoked from network); 23 Aug 2010 09:44:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Aug 2010 09:44:50 -0000
Received: (qmail 20923 invoked by uid 500); 23 Aug 2010 09:44:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20635 invoked by uid 500); 23 Aug 2010 09:44:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20627 invoked by uid 99); 23 Aug 2010 09:44:43 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Aug 2010 09:44:43 +0000
X-ASF-Spam-Status: No, hits=3.9 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [64.12.206.41] (HELO imr-ma03.mx.aol.com) (64.12.206.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Aug 2010 09:44:18 +0000
Received: from imo-da02.mx.aol.com (imo-da02.mx.aol.com [205.188.169.200])
	by imr-ma03.mx.aol.com (8.14.1/8.14.1) with ESMTP id o7N9hoMf015051
	for <java-user@lucene.apache.org>; Mon, 23 Aug 2010 05:43:50 -0400
Received: from gaganb@graffiti.net
	by imo-da02.mx.aol.com  (mail_out_v42.9.) id h.d7e.dfb625c (37690)
	 for <java-user@lucene.apache.org>; Mon, 23 Aug 2010 05:43:45 -0400 (EDT)
Received: from smtprly-mb01.mx.aol.com (smtprly-mb01.mx.aol.com [64.12.207.148]) by cia-mb08.mx.aol.com (v129.4) with ESMTP id MAILCIAMB086-5c5c4c7242d13c6; Mon, 23 Aug 2010 05:43:45 -0400
Received: from web-mmc-m04 (web-mmc-m04.sim.aol.com [64.12.224.137]) by smtprly-mb01.mx.aol.com (v129.4) with ESMTP id MAILSMTPRLYMB012-5c5c4c7242d13c6; Mon, 23 Aug 2010 05:43:45 -0400
References: <8CD10ADD59CCEB2-1354-1F2@web-mmc-m04.sysops.aol.com><AANLkTimT+=LEsiNi3adUM0Ow3qvbs5qi5VBgqCj7yUpz@mail.gmail.com> <8CD10B33D527E22-1354-395@web-mmc-m04.sysops.aol.com> <AANLkTi=Qj=Auc5MP4fRYJhOF-h1t8PzkRzLDg2WUyccL@mail.gmail.com>
To: java-user@lucene.apache.org
Subject: Re: slow search threads during a disk copy
Date: Mon, 23 Aug 2010 05:43:44 -0400
X-AOL-IP: 216.109.102.12
In-Reply-To: <AANLkTi=Qj=Auc5MP4fRYJhOF-h1t8PzkRzLDg2WUyccL@mail.gmail.com>
X-MB-Message-Source: WebUI
MIME-Version: 1.0
From: gaganb@graffiti.net
X-MB-Message-Type: User
Content-Type: multipart/alternative; 
 boundary="--------MB_8CD10BED00DCE63_1354_D87_web-mmc-m04.sysops.aol.com"
X-Mailer: Mail.com Webmail 32447-STANDARD
Received: from 216.109.102.12 by web-mmc-m04.sysops.aol.com (64.12.224.137) with HTTP (WebMailUI); Mon, 23 Aug 2010 05:43:44 -0400
Message-Id: <8CD10BECF70B361-1354-687@web-mmc-m04.sysops.aol.com>
X-AOL-SENDER: gaganb@graffiti.net
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Flag: NO

----------MB_8CD10BED00DCE63_1354_D87_web-mmc-m04.sysops.aol.com
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="us-ascii"

Yes, all version directories are on the same disk. iostat output should be=
 useful. Using rsync is complicated because of legacy reasons - there's a=
 change impact to manage.


Intererstingly, the copy is quite fast (around 30s) when there are no sear=
ches in progress.



Thanks,
- Gagan


-----Original Message-----
From: Ian Lea <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Sent: Mon, Aug 23, 2010 2:10 pm
Subject: Re: slow search threads during a disk copy


Well, there still sounds like plenty of scope for IO contention.  Are
source and dest directories on the same disk?  What does iostat show?
Could you use rsync rather than cp -rp, or something else that only
copies changes?


--
Ian.


On Mon, Aug 23, 2010 at 9:20 AM,  <gaganb@graffiti.net> wrote:
>
> We suspected the same at first, and so modified the flow to do the copy=
 of the=20
new version "before" searching is activated on it. So, there are no search=
es on=20
the new version dir at the time of copy - yet we still see slowness during=
 the=20
disk copy.
>
>
> Thanks,
> - Gagan
>
>
>
>
>
> -----Original Message-----
> From: Anshum <anshumg@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Mon, Aug 23, 2010 1:17 pm
> Subject: Re: slow search threads during a disk copy
>
>
> Seems like a case of I/O issues. You may be reading content off the inde=
x
> while performing searches while the I/O for copy is also happening.
>
> --
> Anshum Gupta
> http://ai-cafe.blogspot.com
>
>
> On Mon, Aug 23, 2010 at 1:12 PM, <gaganb@graffiti.net> wrote:
>
>>
>> Hi all,
>>
>>
>> We're observing search threads slowing down during directory copies
>> performed during updates to the index. The thread dump shows search thr=
eads
>> blocked on a FSDirectory$FSIndexInput$Descriptor instance:
>>
>>
>>
>> "Worker Thread - 12" daemon prio=3D10 tid=3D0x082b2400 nid=3D0x4654 wai=
ting for
>> monitor entry [0x988ed000..0x988edf30]
>>   java.lang.Thread.State: BLOCKED (on object monitor)
>>    at
>> org.apache.lucene.store.FSDirectory$FSIndexInput.readInternal(FSDirecto=
ry.java:542)
>>    - waiting to lock <0xc79c9900> (a
>> org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor)
>>    at
>> org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.ja=
va:152)
>>    at
>> org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.=
java:38)
>>    at org.apache.lucene.store.IndexInput.readVInt(IndexInput.java:76)
>>    at
>> org.apache.lucene.index.SegmentTermDocs.read(SegmentTermDocs.java:133)
>>    at
>> org.apache.lucene.index.MultiSegmentReader$MultiTermDocs.read(MultiSegm=
entReader.java:573)
>>    at org.apache.lucene.search.TermScorer.next(TermScorer.java:106)
>>    at
>> org.apache.lucene.search.ConjunctionScorer.init(ConjunctionScorer.java:=
80)
>>    at
>> org.apache.lucene.search.ConjunctionScorer.next(ConjunctionScorer.java:=
48)
>>    at
>> org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java:319)
>>    at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:=
146)
>>    at org.apache.lucene.search.Searcher.search(Searcher.java:118)
>>
>>    ...
>>
>>
>> The directory copy we do is a 'cp -pr <src-dir>/* <dest-dir>' command=
 prior
>> to applying changes (addDocument calls) on the current "available" segm=
ent.
>> This takes >7 mins to copy a directory of size 1.4G. During this time
>> window, the searches are slow and the above thread stacks are observed.
>>
>>
>> Could there be any system level limits we're hitting?
>>
>>
>> Our test environment is:
>> lucene-2.3.2
>> 4x2.6 GHz, 16G memory
>> Red Hat 3.4.6-9
>>
>>
>> Thanks and regards,
>>
>>
>> - Gagan
>>
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

=20

----------MB_8CD10BED00DCE63_1354_D87_web-mmc-m04.sysops.aol.com--

From java-user-return-47105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 23 10:40:01 2010
Return-Path: <java-user-return-47105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45102 invoked from network); 23 Aug 2010 10:40:01 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Aug 2010 10:40:01 -0000
Received: (qmail 78641 invoked by uid 500); 23 Aug 2010 10:39:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78125 invoked by uid 500); 23 Aug 2010 10:39:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78117 invoked by uid 99); 23 Aug 2010 10:39:54 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Aug 2010 10:39:54 +0000
X-ASF-Spam-Status: No, hits=3.3 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 74.125.82.42 as permitted sender)
Received: from [74.125.82.42] (HELO mail-ww0-f42.google.com) (74.125.82.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Aug 2010 10:39:32 +0000
Received: by wwi17 with SMTP id 17so5128wwi.5
        for <java-user@lucene.apache.org>; Mon, 23 Aug 2010 03:39:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=jfj48/QIL6+Zwn01Sb3lL9OQyMknAFJi+AE++Rterag=;
        b=quYbGp5Q1vYzzSIxFZfUfKIxsvMzf8R6KcrjHV6gc8l3pfaYIDdzaZatIAPNxgoYrO
         zb2f9BBsgTBF2rVf0XuZlPMGKPiiIo2u+BP9pOy3xrDWXpUeotozvvtoFhZI65eWiQAK
         jinXnoWLdCk3OT2JqJ56JpPYzEFNe33wlryog=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=MP6Uzrw+4lGb4RTszx4PAzKcn7HVN1d92X9KtH1UF8mTK6VONLGAjjew1sdb/zJbgz
         YMbgX/LPW1nSGR40uFysXJwNuBqzN+WHKW/lhfFlimjEex1I5kVUtQxx5xp2ktbRmvDW
         C5GYufkx2qkkK2tekIBVR1CO5Qb/3M1VD+Rj8=
Received: by 10.227.142.132 with SMTP id q4mr4326785wbu.90.1282559952220; Mon,
 23 Aug 2010 03:39:12 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.149.78 with HTTP; Mon, 23 Aug 2010 03:38:52 -0700 (PDT)
In-Reply-To: <8CD10BECF70B361-1354-687@web-mmc-m04.sysops.aol.com>
References: <8CD10ADD59CCEB2-1354-1F2@web-mmc-m04.sysops.aol.com>
 <AANLkTimT+=LEsiNi3adUM0Ow3qvbs5qi5VBgqCj7yUpz@mail.gmail.com>
 <8CD10B33D527E22-1354-395@web-mmc-m04.sysops.aol.com> <AANLkTi=Qj=Auc5MP4fRYJhOF-h1t8PzkRzLDg2WUyccL@mail.gmail.com>
 <8CD10BECF70B361-1354-687@web-mmc-m04.sysops.aol.com>
From: Anshum <anshumg@gmail.com>
Date: Mon, 23 Aug 2010 16:08:52 +0530
Message-ID: <AANLkTikgSKm--oWi5z+E2v4KfDwZ9JqksoRXXnGYEpJU@mail.gmail.com>
Subject: Re: slow search threads during a disk copy
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e659f4f25afd41048e7b4229
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e659f4f25afd41048e7b4229
Content-Type: text/plain; charset=ISO-8859-1

There is bound to be IO contention. I'm sure iostat will give you a much
better picture on it.

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Mon, Aug 23, 2010 at 3:13 PM, <gaganb@graffiti.net> wrote:

> Yes, all version directories are on the same disk. iostat output should be
> useful. Using rsync is complicated because of legacy reasons - there's a
> change impact to manage.
>
>
> Intererstingly, the copy is quite fast (around 30s) when there are no
> searches in progress.
>
>
>
> Thanks,
> - Gagan
>
>
> -----Original Message-----
> From: Ian Lea <ian.lea@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Mon, Aug 23, 2010 2:10 pm
> Subject: Re: slow search threads during a disk copy
>
>
> Well, there still sounds like plenty of scope for IO contention.  Are
> source and dest directories on the same disk?  What does iostat show?
> Could you use rsync rather than cp -rp, or something else that only
> copies changes?
>
>
> --
> Ian.
>
>
> On Mon, Aug 23, 2010 at 9:20 AM,  <gaganb@graffiti.net> wrote:
> >
> > We suspected the same at first, and so modified the flow to do the copy
> of the
> new version "before" searching is activated on it. So, there are no
> searches on
> the new version dir at the time of copy - yet we still see slowness during
> the
> disk copy.
> >
> >
> > Thanks,
> > - Gagan
> >
> >
> >
> >
> >
> > -----Original Message-----
> > From: Anshum <anshumg@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Mon, Aug 23, 2010 1:17 pm
> > Subject: Re: slow search threads during a disk copy
> >
> >
> > Seems like a case of I/O issues. You may be reading content off the index
> > while performing searches while the I/O for copy is also happening.
> >
> > --
> > Anshum Gupta
> > http://ai-cafe.blogspot.com
> >
> >
> > On Mon, Aug 23, 2010 at 1:12 PM, <gaganb@graffiti.net> wrote:
> >
> >>
> >> Hi all,
> >>
> >>
> >> We're observing search threads slowing down during directory copies
> >> performed during updates to the index. The thread dump shows search
> threads
> >> blocked on a FSDirectory$FSIndexInput$Descriptor instance:
> >>
> >>
> >>
> >> "Worker Thread - 12" daemon prio=10 tid=0x082b2400 nid=0x4654 waiting
> for
> >> monitor entry [0x988ed000..0x988edf30]
> >>   java.lang.Thread.State: BLOCKED (on object monitor)
> >>    at
> >>
> org.apache.lucene.store.FSDirectory$FSIndexInput.readInternal(FSDirectory.java:542)
> >>    - waiting to lock <0xc79c9900> (a
> >> org.apache.lucene.store.FSDirectory$FSIndexInput$Descriptor)
> >>    at
> >>
> org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:152)
> >>    at
> >>
> org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java:38)
> >>    at org.apache.lucene.store.IndexInput.readVInt(IndexInput.java:76)
> >>    at
> >> org.apache.lucene.index.SegmentTermDocs.read(SegmentTermDocs.java:133)
> >>    at
> >>
> org.apache.lucene.index.MultiSegmentReader$MultiTermDocs.read(MultiSegmentReader.java:573)
> >>    at org.apache.lucene.search.TermScorer.next(TermScorer.java:106)
> >>    at
> >>
> org.apache.lucene.search.ConjunctionScorer.init(ConjunctionScorer.java:80)
> >>    at
> >>
> org.apache.lucene.search.ConjunctionScorer.next(ConjunctionScorer.java:48)
> >>    at
> >> org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java:319)
> >>    at
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:146)
> >>    at org.apache.lucene.search.Searcher.search(Searcher.java:118)
> >>
> >>    ...
> >>
> >>
> >> The directory copy we do is a 'cp -pr <src-dir>/* <dest-dir>' command
> prior
> >> to applying changes (addDocument calls) on the current "available"
> segment.
> >> This takes >7 mins to copy a directory of size 1.4G. During this time
> >> window, the searches are slow and the above thread stacks are observed.
> >>
> >>
> >> Could there be any system level limits we're hitting?
> >>
> >>
> >> Our test environment is:
> >> lucene-2.3.2
> >> 4x2.6 GHz, 16G memory
> >> Red Hat 3.4.6-9
> >>
> >>
> >> Thanks and regards,
> >>
> >>
> >> - Gagan
> >>
> >
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>

--0016e659f4f25afd41048e7b4229--

From java-user-return-47106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 23 13:23:11 2010
Return-Path: <java-user-return-47106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25677 invoked from network); 23 Aug 2010 13:23:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Aug 2010 13:23:11 -0000
Received: (qmail 88595 invoked by uid 500); 23 Aug 2010 13:23:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88152 invoked by uid 500); 23 Aug 2010 13:23:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88144 invoked by uid 99); 23 Aug 2010 13:23:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Aug 2010 13:23:05 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.136.167.3] (HELO web113303.mail.gq1.yahoo.com) (98.136.167.3)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 23 Aug 2010 13:23:00 +0000
Received: (qmail 51527 invoked by uid 60001); 23 Aug 2010 13:22:40 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1282569760; bh=1TWE3lZoKur+yNRnU4Y6ENZ1FsqqsHMoiyWACbSKfxM=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=oPKwqK/jvXc7LvApy40+dPHPB9bWDbjiYEH+5MwkO4T1Juix1LSNcxjhcNWdtYwi8QKXn3s7TC+g+cMg80lbwrVKD4gTFqlS04GmlJ5zGDP5btjWTawO2JdkD/OpqgDHhceWMbPV/hjVWPFIcqLVgPdh5tz4ZCP3ENY6/t1Ny7M=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=t5svUwa22frVvQ4Feb+/Gys9CMC7aUMqT4+KMrbIDKR51aThbGK2qtBvNE5Pl4E22m0mHXY48HuFc0/XYWnBZikBxLZuTdRc26BiDVknqP8NNbci3EJHOW0TUt/oThkqXQM9Z15O899hKI4t+KZH6fqAChq0ZFVkv6agyKboHAQ=;
Message-ID: <23828.51507.qm@web113303.mail.gq1.yahoo.com>
X-YMail-OSG: N_BBxAYVM1nHJOUmbRUBY8igNfGSBbYTb9yLgar7puSIJK7
 LcLd3VmHN7Q3gfWXgS11xRfLQ4Qnlwa51CBGXi_4BZ_Y9DIVKOjXpRNfgqEM
 jEqhF2DvJ5.8rV2FKwkoohyqsWtCdJ8wPVGUDoZ0wX8YAXx8Axpg_GmDDuSB
 5P.EzPGW.RYDby5S.N48ARGhd9e.1KAHke3izqQbvfMVwsfYJpmmT.1eeiKq
 mzFm5N211PUyKwdFc0ShcibEKVui3tO0WI.V7l3eW48fM9d9mQW1qRBB1o4T
 xDVPCjVri7Fm.0TrK3UQ9RgthryiHzbl0NoiltfYQ4elL5c1KcrUsO465KpC
 KlN16tYRsrAsl0R4-
Received: from [99.150.131.106] by web113303.mail.gq1.yahoo.com via HTTP; Mon, 23 Aug 2010 06:22:39 PDT
X-Mailer: YahooMailClassic/11.3.2 YahooMailWebService/0.8.105.279950
Date: Mon, 23 Aug 2010 06:22:39 -0700 (PDT)
From: Ivan Provalov <iprovalo@yahoo.com>
Subject: Re: Calculate Term Co-occurrence Matrix
To: java-user@lucene.apache.org
In-Reply-To: <AANLkTikmc5pE7P9Nm04kKzc11Ly2jLter8gQyHwsAWLq@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Ahmed, if you want the raw score, you can do it the way you describe below.=
=0A=0A=0A=0A--- On Sun, 8/22/10, ahmed algohary <algoharyalex@gmail.com> wr=
ote:=0A=0A> From: ahmed algohary <algoharyalex@gmail.com>=0A> Subject: Re: =
Calculate Term Co-occurrence Matrix=0A> To: java-user@lucene.apache.org=0A>=
 Date: Sunday, August 22, 2010, 9:27 AM=0A> I think I got it.=0A> =0A> In t=
he CollectionIndexer class, I have added the=0A> co-occurrence score to the=
=0A> index document:=0A> =0A>  doc.add(new Field("score", collocation.getSc=
ore() + "",=0A> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0=0A> Field.Store.YES, Field.=
Index.NOT_ANALYZED));=0A> =0A> then in the CollectionSearcher, the scores c=
an be=0A> retrieved:=0A> =0A>  d.get("score")=0A> =0A> Is that correct ??=
=0A> =0A> On Sun, Aug 22, 2010 at 2:47 PM, ahmed algohary <algoharyalex@gma=
il.com>wrote:=0A> =0A> > Thanks! It is exactly what I need. But, isn't ther=
e a=0A> way to get the=0A> > matching score ?=0A> >=0A> > for example, "dam=
aged"=A0 co-occurs with "shipment"=0A> with a probability =3D 0.4=0A> > ??=
=0A> >=0A> >=0A> > On Sun, Aug 22, 2010 at 5:35 AM, Ivan Provalov <iprovalo=
@yahoo.com>=0A> wrote:=0A> >=0A> >> Ahmed,=0A> >>=0A> >> FYI, I updated the=
 term collocations package I=0A> mentioned earlier with a=0A> >> few fixes =
and changes which will make it work for=0A> Lucene 3.0.2.=A0 This may=0A> >=
> help your task.=0A> >>=0A> >> See:=0A> >> https://issues.apache.org/jira/=
browse/LUCENE-474=0A> >>=0A> >> Thanks,=0A> >>=0A> >> Ivan Provalov=0A> >>=
=0A> >>=0A> >> --- On Sat, 8/21/10, Otis Gospodnetic <otis_gospodnetic@yaho=
o.com>=0A> wrote:=0A> >>=0A> >> > From: Otis Gospodnetic <otis_gospodnetic@=
yahoo.com>=0A> >> > Subject: Re: Calculate Term Co-occurrence=0A> Matrix=0A=
> >> > To: java-user@lucene.apache.org=0A> >> > Date: Saturday, August 21, =
2010, 8:05 AM=0A> >> > Ahmed,=0A> >> >=0A> >> > That's what that KPE (link =
in my previous=0A> email, below)=0A> >> > will do for you.=A0 It's=0A> >> >=
 not open source at this time, but that is=0A> exactly one of=0A> >> > the =
things it does.=A0 I=0A> >> > think Mahout collocations stuff might work=0A=
> for you, too.=0A> >> >=0A> >> > Otis=0A> >> > ----=0A> >> > Sematext :: h=
ttp://sematext.com/ :: Solr - Lucene -=0A> Nutch=0A> >> > Lucene ecosystem =
search :: http://search-lucene.com/=0A> >> >=0A> >> >=0A> >> >=0A> >> > ---=
-- Original Message ----=0A> >> > > From: ahmed algohary <algoharyalex@gmai=
l.com>=0A> >> > > To: java-user@lucene.apache.org=0A> >> > > Sent: Sat, Aug=
ust 21, 2010 7:20:03 AM=0A> >> > > Subject: Re: Calculate Term=0A> Co-occur=
rence Matrix=0A> >> > >=0A> >> > > Thanks for all your answers!=0A> >> > >=
=0A> >> > > it seems like I did not make my=0A> question=A0 clear.=0A> >> >=
 I have a text corpus and I=0A> >> > > need to determine the pairs of words=
=0A> that=A0 occur=0A> >> > together in many documents.=0A> >> > > I need t=
o do that to be able to measure=0A> the=0A> >> > semantic proximity between=
=0A> >> > > words. This method is expanded=0A> >> > > here<http://forums.se=
archenginewatch.com/showthread.php?t=3D48>.=0A> >> > > I hope to=A0 find so=
me code that=0A> given a text=0A> >> > corpus, generate all the words=0A> >=
> > > pairs with=A0 their probability of=0A> occurring=0A> >> > together.=
=0A> >> > >=0A> >> > >=0A> >> > > On Sat, Aug 21, 2010 at 1:46=A0 AM,=0A> O=
tis=0A> >> > Gospodnetic <=0A> >> > > otis_gospodnetic@yahoo.com>=0A> >> > =
wrote:=0A> >> > >=0A> >> > > > There is also a non-Mahout Key=0A> Phrase Ex=
tractor=0A> >> > for=A0 Collocations, SIPs, and=0A> >> > > > a=0A> >> > > >=
 few other things:=0A> >> > > > http://sematext.com/products/key-phrase-ext=
ractor/index.html=0A> >> > > >=0A> >> > > >=A0 One of the demos that uses=
=0A> news data is at=0A> >> > > > http://sematext.com/demo/kpe/index.html=
=0A> >> > > >=0A> >> > > > Otis=0A> >> > > >=A0 ----=0A> >> > > > Sematext =
:: http://sematext.com/ :: Solr - Lucene -=0A> >> > Nutch=0A> >> > > > Luce=
ne ecosystem=A0 search :: http://search-lucene.com/=0A> >> > > >=0A> >> > >=
 >=0A> >> > > >=0A> >> > > > ----- Original=A0 Message ----=0A> >> > > > > =
From: Grant Ingersoll <gsingers@apache.org>=0A> >> > > > > To: java-user@lu=
cene.apache.org=0A> >> > > >=A0 > Sent: Fri, August 20,=0A> 2010 8:52:17 AM=
=0A> >> > > > > Subject: Re: Calculate=A0=0A> Term=0A> >> > Co-occurrence M=
atrix=0A> >> > > > >=0A> >> > > > > You might also be=0A> interested=A0 in=
=0A> >> > Mahout's collocations package:=0A> >> > > > >http://cwiki.apache.=
org/confluence/display/MAHOUT/Collocations=0A> >> > > >=A0 >=0A> >> > > > >=
 -Grant=0A> >> > > > > On=A0 Aug 19, 2010, at=0A> 11:39 AM,=0A> >> > ahmed=
=A0 algohary wrote:=0A> >> > > > >=0A> >> > > > > > Hi all,=0A> >> > > > > =
>=0A> >> > > >=A0 > > I need to know if=0A> there is a=0A> >> > Lucene plug=
-in or a Lucene-based=A0=0A> API=A0 for=0A> >> > > > > > calculating the te=
rm=0A> co-occurrence=0A> >> > matrix for a=A0 given text=A0 corpus.=0A> >> =
> > > > >=0A> >> > > > > > Thanks!=0A> >> > > >=A0 > >=0A> >> > > > > > --=
=0A> >> > > > > >=A0 Ahmed=0A> >> > > >=A0 >=0A> >> > > > > ---------------=
-----------=0A> >> > > > > Grant=A0 Ingersoll=0A> >> > > > > http://www.luc=
idimagination.com/=0A> >> > > > >=0A> >> > > > > Search the=A0 Lucene=0A> e=
cosystem=0A> >> > using=A0 Solr/Lucene:=0A> >> > > > >http://www.lucidimagi=
nation.com/search=0A> >> > > > >=0A> >> > > > >=0A> >> > > >=A0 >=0A> >> >=
=0A> ---------------------------------------------------------------------=
=0A> >> > > >=A0 > To=A0 unsubscribe,=0A> e-mail: java-user-unsubscribe@luc=
ene.apache.org=0A> >> > > >=A0 > For=A0 additional=0A> commands, e-mail:=0A=
> >> > java-user-help@lucene.apache.org=0A> >> > > >=A0 >=0A> >> > > > >=0A=
> >> > > >=0A> >> > > >=0A> >> >=0A> --------------------------------------=
-------------------------------=0A> >> > > > To=A0 unsubscribe, e-mail: jav=
a-user-unsubscribe@lucene.apache.org=0A> >> > > >=A0 For additional command=
s,=0A> e-mail: java-user-help@lucene.apache.org=0A> >> > > >=0A> >> > > >=
=0A> >> > >=0A> >> >=0A> >> >=0A> -----------------------------------------=
----------------------------=0A> >> > To unsubscribe, e-mail: java-user-uns=
ubscribe@lucene.apache.org=0A> >> > For additional commands, e-mail: java-u=
ser-help@lucene.apache.org=0A> >> >=0A> >> >=0A> >>=0A> >>=0A> >>=0A> >>=0A=
> >>=0A> ------------------------------------------------------------------=
---=0A> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=
=0A> >> For additional commands, e-mail: java-user-help@lucene.apache.org=
=0A> >>=0A> >>=0A> >=0A> =0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 23 14:03:48 2010
Return-Path: <java-user-return-47107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38535 invoked from network); 23 Aug 2010 14:03:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Aug 2010 14:03:48 -0000
Received: (qmail 68112 invoked by uid 500); 23 Aug 2010 14:03:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67598 invoked by uid 500); 23 Aug 2010 14:03:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67589 invoked by uid 99); 23 Aug 2010 14:03:40 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Aug 2010 14:03:40 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [70.182.184.44] (HELO mailsecurity.capitallegals.com) (70.182.184.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Aug 2010 14:03:18 +0000
X-AuditID: c0a8032b-9f0f3bb000001eef-c4-4c727f9059bc
Received: from Cmail.Capitallegals.com (cmail.capitallegals.com [192.168.3.18])
	by mailsecurity.capitallegals.com (Symantec Mail Security) with ESMTP id 20D02558002
	for <java-user@lucene.apache.org>; Mon, 23 Aug 2010 10:02:56 -0400 (EDT)
Received: from EXCHSVR.IN.Capitallegals.com ([10.1.2.10]) by Cmail.Capitallegals.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 23 Aug 2010 10:02:56 -0400
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CB42CB.DFB47038"
Subject: How to eliminate stop words from Surround  query ?
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Mon, 23 Aug 2010 19:32:50 +0530
Message-ID: <B1B793DEA6F70E45B586B5DF2ADA0DF66EE942@EXCHSVR.IN.Capitallegals.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to eliminate stop words from Surround  query ?
Thread-Index: ActCy98xz/V9pnQ+RP2WbtlhMwaNMQ==
From: "Jagdish Vasani IN" <jvasani@in.Capitallegals.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 23 Aug 2010 14:02:56.0039 (UTC) FILETIME=[E2C29B70:01CB42CB]
X-Brightmail-Tracker: AAAAARWs/ZI=
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01CB42CB.DFB47038
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

All , I want to eliminate stop words from surround  query how I can do
that ...as I am new to QueryParser languages(JavaCC) ..

Any Ideas or suggestions ?

=20

Thanks,

Jagdish


------_=_NextPart_001_01CB42CB.DFB47038--

From java-user-return-47108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 23 14:58:04 2010
Return-Path: <java-user-return-47108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61151 invoked from network); 23 Aug 2010 14:58:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Aug 2010 14:58:04 -0000
Received: (qmail 58559 invoked by uid 500); 23 Aug 2010 14:58:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58190 invoked by uid 500); 23 Aug 2010 14:58:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58182 invoked by uid 99); 23 Aug 2010 14:57:59 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Aug 2010 14:57:59 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ryantxu@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Aug 2010 14:57:36 +0000
Received: by pwj4 with SMTP id 4so1612169pwj.35
        for <java-user@lucene.apache.org>; Mon, 23 Aug 2010 07:57:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=6jeM4aVmYZWfJokuRUopkvRowtDZ7mlHikPeEswF3So=;
        b=juXo0YBqaWeD+2N9f2Y2bKJTrdqRNmXw9qJgyS4djiWN3og/ZXlQC6UlvHMrCjSqDZ
         NY+wzDa/optpvmU2LMwi1ICNDzyH9AS7MrXRavteX8m/pPmgdrwbi5vS+/vht+Ws3Ar6
         MIHqa8Y/z6CDS+NDWasJP+xMgE24oHy2KqzWY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=RLUOb6AZuTKQ3TXbk2wlaF43x/JjV0tgg3zfsgUI++W16BUyJriJfMJF38cD4SydXy
         SgXNQ9bYb+JVH0TdYt/ab8e3CW4lW8hE3/HGpYISPu7FkSnxLy6VHx+InNVchyWgTqhk
         frq/1N4hJitfEUpMNOg3MtwJQVgAqCndDxPVQ=
MIME-Version: 1.0
Received: by 10.114.113.9 with SMTP id l9mr6049665wac.109.1282575435128; Mon,
 23 Aug 2010 07:57:15 -0700 (PDT)
Received: by 10.231.141.8 with HTTP; Mon, 23 Aug 2010 07:57:14 -0700 (PDT)
Date: Mon, 23 Aug 2010 10:57:14 -0400
Message-ID: <AANLkTinfTD2VJ8O2G591Zbu=26msNObHx56sazmZvRb7@mail.gmail.com>
Subject: reverse TermsEnum (/trunk)?
From: Ryan McKinley <ryantxu@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Is there anyway to walk the terms in reverse order?

I have a query that need to find the last matching term -- if it could
start checking from the end, it would avoid a lot of work.

Thanks
Ryan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 23 15:04:32 2010
Return-Path: <java-user-return-47109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64165 invoked from network); 23 Aug 2010 15:04:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Aug 2010 15:04:32 -0000
Received: (qmail 73613 invoked by uid 500); 23 Aug 2010 15:04:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73311 invoked by uid 500); 23 Aug 2010 15:04:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73303 invoked by uid 99); 23 Aug 2010 15:04:29 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Aug 2010 15:04:29 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Aug 2010 15:04:06 +0000
Received: by fxm17 with SMTP id 17so3932098fxm.35
        for <java-user@lucene.apache.org>; Mon, 23 Aug 2010 08:03:45 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.210.206 with SMTP id u56mr4670834weo.50.1282575825141;
 Mon, 23 Aug 2010 08:03:45 -0700 (PDT)
Received: by 10.216.9.2 with HTTP; Mon, 23 Aug 2010 08:03:44 -0700 (PDT)
In-Reply-To: <AANLkTinfTD2VJ8O2G591Zbu=26msNObHx56sazmZvRb7@mail.gmail.com>
References: <AANLkTinfTD2VJ8O2G591Zbu=26msNObHx56sazmZvRb7@mail.gmail.com>
Date: Mon, 23 Aug 2010 11:03:44 -0400
Message-ID: <AANLkTimb8bTM9VbpeLifG9fR_1ov-FXnT=_+UR0bX_On@mail.gmail.com>
Subject: Re: reverse TermsEnum (/trunk)?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

I don't think there is a way....

The only thing I can think of is to reverse your term comparator (flex
lets you specify a custom term order); then the terms are indexed in
reversed order and your first term is the "last".

You can seek by ord though.  So you could seek backwards by moving the
ord backwards, but, this will be severely inefficient

Mike

On Mon, Aug 23, 2010 at 10:57 AM, Ryan McKinley <ryantxu@gmail.com> wrote:
> Is there anyway to walk the terms in reverse order?
>
> I have a query that need to find the last matching term -- if it could
> start checking from the end, it would avoid a lot of work.
>
> Thanks
> Ryan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 23 15:08:21 2010
Return-Path: <java-user-return-47110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70003 invoked from network); 23 Aug 2010 15:08:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Aug 2010 15:08:21 -0000
Received: (qmail 80950 invoked by uid 500); 23 Aug 2010 15:08:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80888 invoked by uid 500); 23 Aug 2010 15:08:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80880 invoked by uid 99); 23 Aug 2010 15:08:18 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Aug 2010 15:08:18 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=FREEMAIL_FROM,HTML_IMAGE_ONLY_28,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of hz.root@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Aug 2010 15:07:56 +0000
Received: by iwn9 with SMTP id 9so4440042iwn.35
        for <java-user@lucene.apache.org>; Mon, 23 Aug 2010 08:07:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=F8N6DqPurlQoPeqRcW+FjjDM2SkXDgqF5P4BC6UP35U=;
        b=eJO7EY+8tdTcl6HHNaRKfeoji1okfTnsLwFI2K0yqFnnzd1cvuzh2cyr+2rzktNB72
         6o9z1EXBhWz1i1vGqveDFt2q2AavY8r/DawvSiN9V1qI7nJPSo4vjmjCU8/yBpwyy9YA
         RLhSsu2INgqsrB1iKW9naVRWR4F2q0o/MSbPo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=HWBROrvkAVFjR/1hh/Zuyhjyk0DVER6aSd8HiPFrz5uXe0bouyqF5CFUAVII3hShFQ
         J9KBoBwH1yYHOEwvtAzQvXtmHbkqlvB8EACi+aL/+3rPKfd2TJu0xy3h2bJYoJan1EQe
         C22vGZrrnplFemMINFCpTWVb8Y9GIqn4nalss=
MIME-Version: 1.0
Received: by 10.231.31.135 with SMTP id y7mr6273990ibc.139.1282576055250; Mon,
 23 Aug 2010 08:07:35 -0700 (PDT)
Received: by 10.231.157.79 with HTTP; Mon, 23 Aug 2010 08:07:34 -0700 (PDT)
In-Reply-To: <AANLkTinfTD2VJ8O2G591Zbu=26msNObHx56sazmZvRb7@mail.gmail.com>
References: <AANLkTinfTD2VJ8O2G591Zbu=26msNObHx56sazmZvRb7@mail.gmail.com>
Date: Mon, 23 Aug 2010 18:07:35 +0300
Message-ID: <AANLkTi=skyMNQ0KFnXBPj15sbbdj_RHeGFma5FA6FF_N@mail.gmail.com>
Subject: Re: reverse TermsEnum (/trunk)?
From: Erdinc Akkaya <hz.root@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0022152d5fb52bb111048e7f0265
X-Virus-Checked: Checked by ClamAV on apache.org

--0022152d5fb52bb111048e7f0265
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

hmm you can try creating

Sort sort =3D null;
        SortField[] sortFields =3D new SortField[1];
        sortFields[0] =3D new SortField(FIELD_TO_SEARCH, LOCALE,true**);
        sort =3D new Sort(sortFields);

** org.apache.lucene.search.SortField<eclipse-javadoc:%E2%98%82=3DSearchInd=
exWeb/%5C/var%5C/www%5C/SearchIndexWeb%5C/WebContent%5C/WEB-INF%5C/lib%5C/l=
ucene-core-3.0.2.jar%3Corg.apache.lucene.search%28SortField.class%E2%98%83S=
ortField>
.SortField(String<eclipse-javadoc:%E2%98%82=3DSearchIndexWeb/%5C/var%5C/www=
%5C/SearchIndexWeb%5C/WebContent%5C/WEB-INF%5C/lib%5C/lucene-core-3.0.2.jar=
%3Corg.apache.lucene.search%28SortField.class%E2%98%83SortField%7ESortField=
%7ELjava.lang.String;%7ELjava.util.Locale;%7EZ%E2%98%82String>field,
Locale<eclipse-javadoc:%E2%98%82=3DSearchIndexWeb/%5C/var%5C/www%5C/SearchI=
ndexWeb%5C/WebContent%5C/WEB-INF%5C/lib%5C/lucene-core-3.0.2.jar%3Corg.apac=
he.lucene.search%28SortField.class%E2%98%83SortField%7ESortField%7ELjava.la=
ng.String;%7ELjava.util.Locale;%7EZ%E2%98%82Locale>locale,
boolean reverse)
if you set last variable true it will walk reverse order.
then give it to Searcher object as a sort parameter
Searcher searcher =3D null;
TopFieldDocs topFieldDocs =3D searcher.search(query, AMOUNT_YOU_WANT, sort)=
;




2010/8/23 Ryan McKinley <ryantxu@gmail.com>

> Is there anyway to walk the terms in reverse order?
>
> I have a query that need to find the last matching term -- if it could
> start checking from the end, it would avoid a lot of work.
>
> Thanks
> Ryan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Erdinc Akkaya
Web Developer @ CE / Positive
www.positive.com.tr

--0022152d5fb52bb111048e7f0265--

From java-user-return-47111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 23 17:37:16 2010
Return-Path: <java-user-return-47111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36391 invoked from network); 23 Aug 2010 17:37:15 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Aug 2010 17:37:15 -0000
Received: (qmail 29766 invoked by uid 500); 23 Aug 2010 17:37:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29616 invoked by uid 500); 23 Aug 2010 17:37:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29608 invoked by uid 99); 23 Aug 2010 17:37:13 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Aug 2010 17:37:13 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of hota.aida@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Aug 2010 17:36:51 +0000
Received: by pwj4 with SMTP id 4so1722236pwj.35
        for <java-user@lucene.apache.org>; Mon, 23 Aug 2010 10:36:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=CFkp7N1lRx2pF2eDJzhX2xMZo994AgGAOh0M/qF/U+8=;
        b=YYr9J8kuXOhA4e7qozS67a2ptL2DnKcqaoGRceyl63Krf4F8IgPioXV8g6k54qFSxI
         xRPQUc6Z0e1EoPdJoGhWI5K4ies/gWdUKd7PmzrVpOOO0w0z//75MjJFzSmED7RoNbYi
         v1TpeqsVE//Aj0essrJZPTXSIgVIhfL5pWY9I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=ot7FObBiEZr8zQpBQFLZea9xM2CYGFz/Aoz+gex2gV2muyQYBC5c0BPdn+yoQkbei3
         OY+J1TQjgcGRxeWKZR9Krez6XR3/DC8ZFKTvRtmLb5mfOVXB7hcAeEsk1jrrvp5/0hHK
         yIX3kIotgzpvJsSDOOdlhBAdJwpE21RnZTRLI=
Received: by 10.114.132.17 with SMTP id f17mr6297302wad.223.1282584989870;
 Mon, 23 Aug 2010 10:36:29 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.209.212 with HTTP; Mon, 23 Aug 2010 10:36:09 -0700 (PDT)
In-Reply-To: <23828.51507.qm@web113303.mail.gq1.yahoo.com>
References: <AANLkTikmc5pE7P9Nm04kKzc11Ly2jLter8gQyHwsAWLq@mail.gmail.com> <23828.51507.qm@web113303.mail.gq1.yahoo.com>
From: Aida Hota <hota.aida@gmail.com>
Date: Mon, 23 Aug 2010 19:36:09 +0200
Message-ID: <AANLkTimaUtmYCg02Ri-eG3g859+C8Os089U0jbdQr60A@mail.gmail.com>
Subject: Re: Calculate Term Co-occurrence Matrix
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64cbfa2b73249048e811649
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64cbfa2b73249048e811649
Content-Type: text/plain; charset=ISO-8859-1

Hi Ivan thanx a lot for this. I just caught time to see this and reply,
sorry for bugging again, I appreciate already what you uploaded . I would
also like to ask one question, if you dont mind. If it is possible somehow
to get from this unified list of frequently occuring unigrams, bigrams and
trigrams with their frequencies????

Thank you very much


On Mon, Aug 23, 2010 at 3:22 PM, Ivan Provalov <iprovalo@yahoo.com> wrote:

> Ahmed, if you want the raw score, you can do it the way you describe below.
>
>
>
> --- On Sun, 8/22/10, ahmed algohary <algoharyalex@gmail.com> wrote:
>
> > From: ahmed algohary <algoharyalex@gmail.com>
> > Subject: Re: Calculate Term Co-occurrence Matrix
> > To: java-user@lucene.apache.org
> > Date: Sunday, August 22, 2010, 9:27 AM
> > I think I got it.
> >
> > In the CollectionIndexer class, I have added the
> > co-occurrence score to the
> > index document:
> >
> >  doc.add(new Field("score", collocation.getScore() + "",
> >
> > Field.Store.YES, Field.Index.NOT_ANALYZED));
> >
> > then in the CollectionSearcher, the scores can be
> > retrieved:
> >
> >  d.get("score")
> >
> > Is that correct ??
> >
> > On Sun, Aug 22, 2010 at 2:47 PM, ahmed algohary <algoharyalex@gmail.com
> >wrote:
> >
> > > Thanks! It is exactly what I need. But, isn't there a
> > way to get the
> > > matching score ?
> > >
> > > for example, "damaged"  co-occurs with "shipment"
> > with a probability = 0.4
> > > ??
> > >
> > >
> > > On Sun, Aug 22, 2010 at 5:35 AM, Ivan Provalov <iprovalo@yahoo.com>
> > wrote:
> > >
> > >> Ahmed,
> > >>
> > >> FYI, I updated the term collocations package I
> > mentioned earlier with a
> > >> few fixes and changes which will make it work for
> > Lucene 3.0.2.  This may
> > >> help your task.
> > >>
> > >> See:
> > >> https://issues.apache.org/jira/browse/LUCENE-474
> > >>
> > >> Thanks,
> > >>
> > >> Ivan Provalov
> > >>
> > >>
> > >> --- On Sat, 8/21/10, Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> > wrote:
> > >>
> > >> > From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> > >> > Subject: Re: Calculate Term Co-occurrence
> > Matrix
> > >> > To: java-user@lucene.apache.org
> > >> > Date: Saturday, August 21, 2010, 8:05 AM
> > >> > Ahmed,
> > >> >
> > >> > That's what that KPE (link in my previous
> > email, below)
> > >> > will do for you.  It's
> > >> > not open source at this time, but that is
> > exactly one of
> > >> > the things it does.  I
> > >> > think Mahout collocations stuff might work
> > for you, too.
> > >> >
> > >> > Otis
> > >> > ----
> > >> > Sematext :: http://sematext.com/ :: Solr - Lucene -
> > Nutch
> > >> > Lucene ecosystem search :: http://search-lucene.com/
> > >> >
> > >> >
> > >> >
> > >> > ----- Original Message ----
> > >> > > From: ahmed algohary <algoharyalex@gmail.com>
> > >> > > To: java-user@lucene.apache.org
> > >> > > Sent: Sat, August 21, 2010 7:20:03 AM
> > >> > > Subject: Re: Calculate Term
> > Co-occurrence Matrix
> > >> > >
> > >> > > Thanks for all your answers!
> > >> > >
> > >> > > it seems like I did not make my
> > question  clear.
> > >> > I have a text corpus and I
> > >> > > need to determine the pairs of words
> > that  occur
> > >> > together in many documents.
> > >> > > I need to do that to be able to measure
> > the
> > >> > semantic proximity between
> > >> > > words. This method is expanded
> > >> > > here<http://forums.searchenginewatch.com/showthread.php?t=48>.
> > >> > > I hope to  find some code that
> > given a text
> > >> > corpus, generate all the words
> > >> > > pairs with  their probability of
> > occurring
> > >> > together.
> > >> > >
> > >> > >
> > >> > > On Sat, Aug 21, 2010 at 1:46  AM,
> > Otis
> > >> > Gospodnetic <
> > >> > > otis_gospodnetic@yahoo.com>
> > >> > wrote:
> > >> > >
> > >> > > > There is also a non-Mahout Key
> > Phrase Extractor
> > >> > for  Collocations, SIPs, and
> > >> > > > a
> > >> > > > few other things:
> > >> > > > http://sematext.com/products/key-phrase-extractor/index.html
> > >> > > >
> > >> > > >  One of the demos that uses
> > news data is at
> > >> > > > http://sematext.com/demo/kpe/index.html
> > >> > > >
> > >> > > > Otis
> > >> > > >  ----
> > >> > > > Sematext :: http://sematext.com/ :: Solr - Lucene -
> > >> > Nutch
> > >> > > > Lucene ecosystem  search :: http://search-lucene.com/
> > >> > > >
> > >> > > >
> > >> > > >
> > >> > > > ----- Original  Message ----
> > >> > > > > From: Grant Ingersoll <gsingers@apache.org>
> > >> > > > > To: java-user@lucene.apache.org
> > >> > > >  > Sent: Fri, August 20,
> > 2010 8:52:17 AM
> > >> > > > > Subject: Re: Calculate
> > Term
> > >> > Co-occurrence Matrix
> > >> > > > >
> > >> > > > > You might also be
> > interested  in
> > >> > Mahout's collocations package:
> > >> > > > >http://cwiki.apache.org/confluence/display/MAHOUT/Collocations
> > >> > > >  >
> > >> > > > > -Grant
> > >> > > > > On  Aug 19, 2010, at
> > 11:39 AM,
> > >> > ahmed  algohary wrote:
> > >> > > > >
> > >> > > > > > Hi all,
> > >> > > > > >
> > >> > > >  > > I need to know if
> > there is a
> > >> > Lucene plug-in or a Lucene-based
> > API  for
> > >> > > > > > calculating the term
> > co-occurrence
> > >> > matrix for a  given text  corpus.
> > >> > > > > >
> > >> > > > > > Thanks!
> > >> > > >  > >
> > >> > > > > > --
> > >> > > > > >  Ahmed
> > >> > > >  >
> > >> > > > > --------------------------
> > >> > > > > Grant  Ingersoll
> > >> > > > > http://www.lucidimagination.com/
> > >> > > > >
> > >> > > > > Search the  Lucene
> > ecosystem
> > >> > using  Solr/Lucene:
> > >> > > > >http://www.lucidimagination.com/search
> > >> > > > >
> > >> > > > >
> > >> > > >  >
> > >> >
> > ---------------------------------------------------------------------
> > >> > > >  > To  unsubscribe,
> > e-mail: java-user-unsubscribe@lucene.apache.org
> > >> > > >  > For  additional
> > commands, e-mail:
> > >> > java-user-help@lucene.apache.org
> > >> > > >  >
> > >> > > > >
> > >> > > >
> > >> > > >
> > >> >
> > ---------------------------------------------------------------------
> > >> > > > To  unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > >> > > >  For additional commands,
> > e-mail: java-user-help@lucene.apache.org
> > >> > > >
> > >> > > >
> > >> > >
> > >> >
> > >> >
> > ---------------------------------------------------------------------
> > >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >> >
> > >> >
> > >>
> > >>
> > >>
> > >>
> > >>
> > ---------------------------------------------------------------------
> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>
> > >>
> > >
> >
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e64cbfa2b73249048e811649--

From java-user-return-47112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 23 18:42:18 2010
Return-Path: <java-user-return-47112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74400 invoked from network); 23 Aug 2010 18:42:18 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Aug 2010 18:42:18 -0000
Received: (qmail 34439 invoked by uid 500); 23 Aug 2010 18:42:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34376 invoked by uid 500); 23 Aug 2010 18:42:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34368 invoked by uid 99); 23 Aug 2010 18:42:15 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Aug 2010 18:42:15 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.136.167.12] (HELO web113312.mail.gq1.yahoo.com) (98.136.167.12)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 23 Aug 2010 18:41:53 +0000
Received: (qmail 40160 invoked by uid 60001); 23 Aug 2010 18:41:31 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1282588891; bh=FMRucgunLY4/adCG92pyc1YGKsqW3bqL7hSpE5j62xM=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=gLYy9CYLUiaeumwpsVFiK9/h2CwsIJVSoNCqJigJBpWAED817CG2j1nyTmKPJA7/5PjQYDSMupln6n/gNkN2ZktgwFMpN7I7sFOYfeYUzOnTtfIJU13AU3WhyTlsGXB79DTYadcYOq6YgquFomcY0KrSKEeBYp13daevQT9Sl4Q=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=NmuHbt64D7063sR0Y2UD7ruh5QZAY4kYprp5CaAJ/01/2ytPnpbbDbQLex0hD5GcvBVNjdtVSvvax7gsKROGnq3V2dZzHd2pctKaxKCWALkcK9/77KX1Kitp3tyoeTRLQSDKk0//NxS7xssLk+7UZE51fvlZsNymhlirF3aY1cM=;
Message-ID: <413135.39676.qm@web113312.mail.gq1.yahoo.com>
X-YMail-OSG: PdmuP_AVM1lB__E0KaFUhq3n2jX54VgIuKLIclx.pgnBC04
 .oqH5LS7qCR_KHO_Yuw_Wj30MXor.0lW1TDkS1vY.bTYbdSarzKQ4MsDt9v8
 nR7RpSHsrgCTEyVs3bkTy1YlV9yLya4Hr3U41YwM_sfpsJvMwtsvzzOLM3q8
 CCuM0sPLYi_3kKah1kBsPktz2XjSr1UK5eLvklc.QhRbbyKBj5MOL_hbPxBd
 vGKpikMBe7sdsY3W7lMuOzCzK69G7Tvu2lSJWaMy0S_iPuRTdRbXSNUXupPJ
 j0I9su31iCKOkopXiS8HI7o7cdRJ8apGPyHf4G8GK.hwn.YuIOsDFLPvPBrd
 X48x7ojQf_Vr23m4-
Received: from [140.244.128.12] by web113312.mail.gq1.yahoo.com via HTTP; Mon, 23 Aug 2010 11:41:31 PDT
X-Mailer: YahooMailClassic/11.3.2 YahooMailWebService/0.8.105.279950
Date: Mon, 23 Aug 2010 11:41:31 -0700 (PDT)
From: Ivan Provalov <iprovalo@yahoo.com>
Subject: Re: Calculate Term Co-occurrence Matrix
To: java-user@lucene.apache.org
In-Reply-To: <AANLkTimaUtmYCg02Ri-eG3g859+C8Os089U0jbdQr60A@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Aida,=0A=0AAre you talking about letter n-grams or term n-grams?=0A=0AThank=
s,=0A=0AIvan=0A=0A--- On Mon, 8/23/10, Aida Hota <hota.aida@gmail.com> wrot=
e:=0A=0A> From: Aida Hota <hota.aida@gmail.com>=0A> Subject: Re: Calculate =
Term Co-occurrence Matrix=0A> To: java-user@lucene.apache.org=0A> Date: Mon=
day, August 23, 2010, 1:36 PM=0A> Hi Ivan thanx a lot for this. I just=0A> =
caught time to see this and reply,=0A> sorry for bugging again, I appreciat=
e already what you=0A> uploaded . I would=0A> also like to ask one question=
, if you dont mind. If it is=0A> possible somehow=0A> to get from this unif=
ied list of frequently occuring=0A> unigrams, bigrams and=0A> trigrams with=
 their frequencies????=0A> =0A> Thank you very much=0A> =0A> =0A> On Mon, A=
ug 23, 2010 at 3:22 PM, Ivan Provalov <iprovalo@yahoo.com>=0A> wrote:=0A> =
=0A> > Ahmed, if you want the raw score, you can do it the=0A> way you desc=
ribe below.=0A> >=0A> >=0A> >=0A> > --- On Sun, 8/22/10, ahmed algohary <al=
goharyalex@gmail.com>=0A> wrote:=0A> >=0A> > > From: ahmed algohary <algoha=
ryalex@gmail.com>=0A> > > Subject: Re: Calculate Term Co-occurrence Matrix=
=0A> > > To: java-user@lucene.apache.org=0A> > > Date: Sunday, August 22, 2=
010, 9:27 AM=0A> > > I think I got it.=0A> > >=0A> > > In the CollectionInd=
exer class, I have added the=0A> > > co-occurrence score to the=0A> > > ind=
ex document:=0A> > >=0A> > >=A0 doc.add(new Field("score",=0A> collocation.=
getScore() + "",=0A> > >=0A> > > Field.Store.YES, Field.Index.NOT_ANALYZED)=
);=0A> > >=0A> > > then in the CollectionSearcher, the scores can=0A> be=0A=
> > > retrieved:=0A> > >=0A> > >=A0 d.get("score")=0A> > >=0A> > > Is that =
correct ??=0A> > >=0A> > > On Sun, Aug 22, 2010 at 2:47 PM, ahmed algohary=
=0A> <algoharyalex@gmail.com=0A> > >wrote:=0A> > >=0A> > > > Thanks! It is =
exactly what I need. But,=0A> isn't there a=0A> > > way to get the=0A> > > =
> matching score ?=0A> > > >=0A> > > > for example, "damaged"=A0 co-occurs =
with=0A> "shipment"=0A> > > with a probability =3D 0.4=0A> > > > ??=0A> > >=
 >=0A> > > >=0A> > > > On Sun, Aug 22, 2010 at 5:35 AM, Ivan=0A> Provalov <=
iprovalo@yahoo.com>=0A> > > wrote:=0A> > > >=0A> > > >> Ahmed,=0A> > > >>=
=0A> > > >> FYI, I updated the term collocations=0A> package I=0A> > > ment=
ioned earlier with a=0A> > > >> few fixes and changes which will make it=0A=
> work for=0A> > > Lucene 3.0.2.=A0 This may=0A> > > >> help your task.=0A>=
 > > >>=0A> > > >> See:=0A> > > >> https://issues.apache.org/jira/browse/LU=
CENE-474=0A> > > >>=0A> > > >> Thanks,=0A> > > >>=0A> > > >> Ivan Provalov=
=0A> > > >>=0A> > > >>=0A> > > >> --- On Sat, 8/21/10, Otis Gospodnetic=0A>=
 <otis_gospodnetic@yahoo.com>=0A> > > wrote:=0A> > > >>=0A> > > >> > From: =
Otis Gospodnetic <otis_gospodnetic@yahoo.com>=0A> > > >> > Subject: Re: Cal=
culate Term=0A> Co-occurrence=0A> > > Matrix=0A> > > >> > To: java-user@luc=
ene.apache.org=0A> > > >> > Date: Saturday, August 21, 2010,=0A> 8:05 AM=0A=
> > > >> > Ahmed,=0A> > > >> >=0A> > > >> > That's what that KPE (link in m=
y=0A> previous=0A> > > email, below)=0A> > > >> > will do for you.=A0 It's=
=0A> > > >> > not open source at this time, but=0A> that is=0A> > > exactly=
 one of=0A> > > >> > the things it does.=A0 I=0A> > > >> > think Mahout col=
locations stuff=0A> might work=0A> > > for you, too.=0A> > > >> >=0A> > > >=
> > Otis=0A> > > >> > ----=0A> > > >> > Sematext :: http://sematext.com/ ::=
 Solr - Lucene -=0A> > > Nutch=0A> > > >> > Lucene ecosystem search :: http=
://search-lucene.com/=0A> > > >> >=0A> > > >> >=0A> > > >> >=0A> > > >> > -=
---- Original Message ----=0A> > > >> > > From: ahmed algohary <algoharyale=
x@gmail.com>=0A> > > >> > > To: java-user@lucene.apache.org=0A> > > >> > > =
Sent: Sat, August 21, 2010=0A> 7:20:03 AM=0A> > > >> > > Subject: Re: Calcu=
late Term=0A> > > Co-occurrence Matrix=0A> > > >> > >=0A> > > >> > > Thanks=
 for all your answers!=0A> > > >> > >=0A> > > >> > > it seems like I did no=
t make=0A> my=0A> > > question=A0 clear.=0A> > > >> > I have a text corpus =
and I=0A> > > >> > > need to determine the pairs of=0A> words=0A> > > that=
=A0 occur=0A> > > >> > together in many documents.=0A> > > >> > > I need to=
 do that to be able=0A> to measure=0A> > > the=0A> > > >> > semantic proxim=
ity between=0A> > > >> > > words. This method is=0A> expanded=0A> > > >> > =
> here<http://forums.searchenginewatch.com/showthread.php?t=3D48>.=0A> > > =
>> > > I hope to=A0 find some code=0A> that=0A> > > given a text=0A> > > >>=
 > corpus, generate all the words=0A> > > >> > > pairs with=A0 their=0A> pr=
obability of=0A> > > occurring=0A> > > >> > together.=0A> > > >> > >=0A> > =
> >> > >=0A> > > >> > > On Sat, Aug 21, 2010 at=0A> 1:46=A0 AM,=0A> > > Oti=
s=0A> > > >> > Gospodnetic <=0A> > > >> > > otis_gospodnetic@yahoo.com>=0A>=
 > > >> > wrote:=0A> > > >> > >=0A> > > >> > > > There is also a=0A> non-Ma=
hout Key=0A> > > Phrase Extractor=0A> > > >> > for=A0 Collocations, SIPs, a=
nd=0A> > > >> > > > a=0A> > > >> > > > few other things:=0A> > > >> > > > h=
ttp://sematext.com/products/key-phrase-extractor/index.html=0A> > > >> > > =
>=0A> > > >> > > >=A0 One of the demos=0A> that uses=0A> > > news data is a=
t=0A> > > >> > > > http://sematext.com/demo/kpe/index.html=0A> > > >> > > >=
=0A> > > >> > > > Otis=0A> > > >> > > >=A0 ----=0A> > > >> > > > Sematext :=
: http://sematext.com/ :: Solr - Lucene -=0A> > > >> > Nutch=0A> > > >> > >=
 > Lucene ecosystem=A0=0A> search :: http://search-lucene.com/=0A> > > >> >=
 > >=0A> > > >> > > >=0A> > > >> > > >=0A> > > >> > > > ----- Original=A0=
=0A> Message ----=0A> > > >> > > > > From: Grant=0A> Ingersoll <gsingers@ap=
ache.org>=0A> > > >> > > > > To: java-user@lucene.apache.org=0A> > > >> > >=
 >=A0 > Sent: Fri,=0A> August 20,=0A> > > 2010 8:52:17 AM=0A> > > >> > > > =
> Subject: Re:=0A> Calculate=0A> > > Term=0A> > > >> > Co-occurrence Matrix=
=0A> > > >> > > > >=0A> > > >> > > > > You might also be=0A> > > interested=
=A0 in=0A> > > >> > Mahout's collocations package:=0A> > > >> > > > >http:/=
/cwiki.apache.org/confluence/display/MAHOUT/Collocations=0A> > > >> > > >=
=A0 >=0A> > > >> > > > > -Grant=0A> > > >> > > > > On=A0 Aug 19,=0A> 2010, =
at=0A> > > 11:39 AM,=0A> > > >> > ahmed=A0 algohary wrote:=0A> > > >> > > >=
 >=0A> > > >> > > > > > Hi all,=0A> > > >> > > > > >=0A> > > >> > > >=A0 > =
> I need to=0A> know if=0A> > > there is a=0A> > > >> > Lucene plug-in or a=
 Lucene-based=0A> > > API=A0 for=0A> > > >> > > > > > calculating the=0A> t=
erm=0A> > > co-occurrence=0A> > > >> > matrix for a=A0 given text=A0=0A> co=
rpus.=0A> > > >> > > > > >=0A> > > >> > > > > > Thanks!=0A> > > >> > > >=A0=
 > >=0A> > > >> > > > > > --=0A> > > >> > > > > >=A0 Ahmed=0A> > > >> > > >=
=A0 >=0A> > > >> > > > >=0A> --------------------------=0A> > > >> > > > > =
Grant=A0=0A> Ingersoll=0A> > > >> > > > > http://www.lucidimagination.com/=
=0A> > > >> > > > >=0A> > > >> > > > > Search the=A0=0A> Lucene=0A> > > eco=
system=0A> > > >> > using=A0 Solr/Lucene:=0A> > > >> > > > >http://www.luci=
dimagination.com/search=0A> > > >> > > > >=0A> > > >> > > > >=0A> > > >> > =
> >=A0 >=0A> > > >> >=0A> > >=0A> -----------------------------------------=
----------------------------=0A> > > >> > > >=A0 > To=A0=0A> unsubscribe,=
=0A> > > e-mail: java-user-unsubscribe@lucene.apache.org=0A> > > >> > > >=
=A0 > For=A0=0A> additional=0A> > > commands, e-mail:=0A> > > >> > java-use=
r-help@lucene.apache.org=0A> > > >> > > >=A0 >=0A> > > >> > > > >=0A> > > >=
> > > >=0A> > > >> > > >=0A> > > >> >=0A> > >=0A> -------------------------=
--------------------------------------------=0A> > > >> > > > To=A0 unsubsc=
ribe,=0A> e-mail:=0A> > java-user-unsubscribe@lucene.apache.org=0A> > > >> =
> > >=A0 For additional=0A> commands,=0A> > > e-mail: java-user-help@lucene=
.apache.org=0A> > > >> > > >=0A> > > >> > > >=0A> > > >> > >=0A> > > >> >=
=0A> > > >> >=0A> > >=0A> -------------------------------------------------=
--------------------=0A> > > >> > To unsubscribe, e-mail: java-user-unsubsc=
ribe@lucene.apache.org=0A> > > >> > For additional commands, e-mail: java-u=
ser-help@lucene.apache.org=0A> > > >> >=0A> > > >> >=0A> > > >>=0A> > > >>=
=0A> > > >>=0A> > > >>=0A> > > >>=0A> > >=0A> -----------------------------=
----------------------------------------=0A> > > >> To unsubscribe, e-mail:=
 java-user-unsubscribe@lucene.apache.org=0A> > > >> For additional commands=
, e-mail: java-user-help@lucene.apache.org=0A> > > >>=0A> > > >>=0A> > > >=
=0A> > >=0A> >=0A> >=0A> >=0A> >=0A> >=0A> --------------------------------=
-------------------------------------=0A> > To unsubscribe, e-mail: java-us=
er-unsubscribe@lucene.apache.org=0A> > For additional commands, e-mail: jav=
a-user-help@lucene.apache.org=0A> >=0A> >=0A> =0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 23 19:08:27 2010
Return-Path: <java-user-return-47113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85912 invoked from network); 23 Aug 2010 19:08:27 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Aug 2010 19:08:27 -0000
Received: (qmail 77421 invoked by uid 500); 23 Aug 2010 19:08:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77267 invoked by uid 500); 23 Aug 2010 19:08:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77259 invoked by uid 99); 23 Aug 2010 19:08:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Aug 2010 19:08:24 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of hota.aida@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Aug 2010 19:08:20 +0000
Received: by iwn9 with SMTP id 9so4599881iwn.35
        for <java-user@lucene.apache.org>; Mon, 23 Aug 2010 12:07:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=u3ek0AFbh07q3ljEHIsRjzVtafu7LvM/T9WpSia79Rk=;
        b=v/+AsfWrCoyBr/wsmTdFevTAm+q50fYdrU2S+3NAZAYHy1fYmw4q0OIxw45+itW3OQ
         hYwBeL3S9M/JPIUxEuwTWlBN698NOSRcm+1mIdGBrws8qZfZXMEEWvnF2OxM+prYre+R
         8mKvKXIGkMfjO/exEwgZCcqTlFSI5UX17RUcc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=EkJDYvMhjO15vctbuTER5e6FxTtKHk/0SdUW/xb1/j2PqFmIEKoUkE4K1ZXRgjG+75
         TFHznRVEXw11esQGa9GsS3JDu1JDCHFLZSyePkooq80qcDBw49z4aXUQWD4myu89/yXP
         EZfYAGjAybK5ID41b3yDgc6DboViYwGNLOGEE=
Received: by 10.231.33.140 with SMTP id h12mr6854134ibd.59.1282590479200; Mon,
 23 Aug 2010 12:07:59 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.209.212 with HTTP; Mon, 23 Aug 2010 12:07:38 -0700 (PDT)
In-Reply-To: <413135.39676.qm@web113312.mail.gq1.yahoo.com>
References: <AANLkTimaUtmYCg02Ri-eG3g859+C8Os089U0jbdQr60A@mail.gmail.com> <413135.39676.qm@web113312.mail.gq1.yahoo.com>
From: Aida Hota <hota.aida@gmail.com>
Date: Mon, 23 Aug 2010 21:07:38 +0200
Message-ID: <AANLkTik=j4G55FZ77UcBP565R=tH7GLRZeHnX9q0q_k5@mail.gmail.com>
Subject: Re: Calculate Term Co-occurrence Matrix
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0022152d5f05e7b448048e825d17

--0022152d5f05e7b448048e825d17
Content-Type: text/plain; charset=ISO-8859-1

Hi Ivan!

sorry for not being clear, i am talking about term ngrams, shingles....
Something like:

poster
online advertising
yellow cab
this is phrase
sunshine
good morning sunshine

with their frequencies. That is,  that these that are returned are some
popular phrases and terns, which go over certain threshold.

Thanx Ivan




On Mon, Aug 23, 2010 at 8:41 PM, Ivan Provalov <iprovalo@yahoo.com> wrote:

> Aida,
>
> Are you talking about letter n-grams or term n-grams?
>
> Thanks,
>
> Ivan
>
> --- On Mon, 8/23/10, Aida Hota <hota.aida@gmail.com> wrote:
>
> > From: Aida Hota <hota.aida@gmail.com>
> > Subject: Re: Calculate Term Co-occurrence Matrix
> > To: java-user@lucene.apache.org
> > Date: Monday, August 23, 2010, 1:36 PM
> > Hi Ivan thanx a lot for this. I just
> > caught time to see this and reply,
> > sorry for bugging again, I appreciate already what you
> > uploaded . I would
> > also like to ask one question, if you dont mind. If it is
> > possible somehow
> > to get from this unified list of frequently occuring
> > unigrams, bigrams and
> > trigrams with their frequencies????
> >
> > Thank you very much
> >
> >
> > On Mon, Aug 23, 2010 at 3:22 PM, Ivan Provalov <iprovalo@yahoo.com>
> > wrote:
> >
> > > Ahmed, if you want the raw score, you can do it the
> > way you describe below.
> > >
> > >
> > >
> > > --- On Sun, 8/22/10, ahmed algohary <algoharyalex@gmail.com>
> > wrote:
> > >
> > > > From: ahmed algohary <algoharyalex@gmail.com>
> > > > Subject: Re: Calculate Term Co-occurrence Matrix
> > > > To: java-user@lucene.apache.org
> > > > Date: Sunday, August 22, 2010, 9:27 AM
> > > > I think I got it.
> > > >
> > > > In the CollectionIndexer class, I have added the
> > > > co-occurrence score to the
> > > > index document:
> > > >
> > > >  doc.add(new Field("score",
> > collocation.getScore() + "",
> > > >
> > > > Field.Store.YES, Field.Index.NOT_ANALYZED));
> > > >
> > > > then in the CollectionSearcher, the scores can
> > be
> > > > retrieved:
> > > >
> > > >  d.get("score")
> > > >
> > > > Is that correct ??
> > > >
> > > > On Sun, Aug 22, 2010 at 2:47 PM, ahmed algohary
> > <algoharyalex@gmail.com
> > > >wrote:
> > > >
> > > > > Thanks! It is exactly what I need. But,
> > isn't there a
> > > > way to get the
> > > > > matching score ?
> > > > >
> > > > > for example, "damaged"  co-occurs with
> > "shipment"
> > > > with a probability = 0.4
> > > > > ??
> > > > >
> > > > >
> > > > > On Sun, Aug 22, 2010 at 5:35 AM, Ivan
> > Provalov <iprovalo@yahoo.com>
> > > > wrote:
> > > > >
> > > > >> Ahmed,
> > > > >>
> > > > >> FYI, I updated the term collocations
> > package I
> > > > mentioned earlier with a
> > > > >> few fixes and changes which will make it
> > work for
> > > > Lucene 3.0.2.  This may
> > > > >> help your task.
> > > > >>
> > > > >> See:
> > > > >> https://issues.apache.org/jira/browse/LUCENE-474
> > > > >>
> > > > >> Thanks,
> > > > >>
> > > > >> Ivan Provalov
> > > > >>
> > > > >>
> > > > >> --- On Sat, 8/21/10, Otis Gospodnetic
> > <otis_gospodnetic@yahoo.com>
> > > > wrote:
> > > > >>
> > > > >> > From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> > > > >> > Subject: Re: Calculate Term
> > Co-occurrence
> > > > Matrix
> > > > >> > To: java-user@lucene.apache.org
> > > > >> > Date: Saturday, August 21, 2010,
> > 8:05 AM
> > > > >> > Ahmed,
> > > > >> >
> > > > >> > That's what that KPE (link in my
> > previous
> > > > email, below)
> > > > >> > will do for you.  It's
> > > > >> > not open source at this time, but
> > that is
> > > > exactly one of
> > > > >> > the things it does.  I
> > > > >> > think Mahout collocations stuff
> > might work
> > > > for you, too.
> > > > >> >
> > > > >> > Otis
> > > > >> > ----
> > > > >> > Sematext :: http://sematext.com/ :: Solr - Lucene -
> > > > Nutch
> > > > >> > Lucene ecosystem search :: http://search-lucene.com/
> > > > >> >
> > > > >> >
> > > > >> >
> > > > >> > ----- Original Message ----
> > > > >> > > From: ahmed algohary <algoharyalex@gmail.com>
> > > > >> > > To: java-user@lucene.apache.org
> > > > >> > > Sent: Sat, August 21, 2010
> > 7:20:03 AM
> > > > >> > > Subject: Re: Calculate Term
> > > > Co-occurrence Matrix
> > > > >> > >
> > > > >> > > Thanks for all your answers!
> > > > >> > >
> > > > >> > > it seems like I did not make
> > my
> > > > question  clear.
> > > > >> > I have a text corpus and I
> > > > >> > > need to determine the pairs of
> > words
> > > > that  occur
> > > > >> > together in many documents.
> > > > >> > > I need to do that to be able
> > to measure
> > > > the
> > > > >> > semantic proximity between
> > > > >> > > words. This method is
> > expanded
> > > > >> > > here<http://forums.searchenginewatch.com/showthread.php?t=48
> >.
> > > > >> > > I hope to  find some code
> > that
> > > > given a text
> > > > >> > corpus, generate all the words
> > > > >> > > pairs with  their
> > probability of
> > > > occurring
> > > > >> > together.
> > > > >> > >
> > > > >> > >
> > > > >> > > On Sat, Aug 21, 2010 at
> > 1:46  AM,
> > > > Otis
> > > > >> > Gospodnetic <
> > > > >> > > otis_gospodnetic@yahoo.com>
> > > > >> > wrote:
> > > > >> > >
> > > > >> > > > There is also a
> > non-Mahout Key
> > > > Phrase Extractor
> > > > >> > for  Collocations, SIPs, and
> > > > >> > > > a
> > > > >> > > > few other things:
> > > > >> > > >
> http://sematext.com/products/key-phrase-extractor/index.html
> > > > >> > > >
> > > > >> > > >  One of the demos
> > that uses
> > > > news data is at
> > > > >> > > > http://sematext.com/demo/kpe/index.html
> > > > >> > > >
> > > > >> > > > Otis
> > > > >> > > >  ----
> > > > >> > > > Sematext :: http://sematext.com/ :: Solr - Lucene -
> > > > >> > Nutch
> > > > >> > > > Lucene ecosystem
> > search :: http://search-lucene.com/
> > > > >> > > >
> > > > >> > > >
> > > > >> > > >
> > > > >> > > > ----- Original
> > Message ----
> > > > >> > > > > From: Grant
> > Ingersoll <gsingers@apache.org>
> > > > >> > > > > To: java-user@lucene.apache.org
> > > > >> > > >  > Sent: Fri,
> > August 20,
> > > > 2010 8:52:17 AM
> > > > >> > > > > Subject: Re:
> > Calculate
> > > > Term
> > > > >> > Co-occurrence Matrix
> > > > >> > > > >
> > > > >> > > > > You might also be
> > > > interested  in
> > > > >> > Mahout's collocations package:
> > > > >> > > > >
> http://cwiki.apache.org/confluence/display/MAHOUT/Collocations
> > > > >> > > >  >
> > > > >> > > > > -Grant
> > > > >> > > > > On  Aug 19,
> > 2010, at
> > > > 11:39 AM,
> > > > >> > ahmed  algohary wrote:
> > > > >> > > > >
> > > > >> > > > > > Hi all,
> > > > >> > > > > >
> > > > >> > > >  > > I need to
> > know if
> > > > there is a
> > > > >> > Lucene plug-in or a Lucene-based
> > > > API  for
> > > > >> > > > > > calculating the
> > term
> > > > co-occurrence
> > > > >> > matrix for a  given text
> > corpus.
> > > > >> > > > > >
> > > > >> > > > > > Thanks!
> > > > >> > > >  > >
> > > > >> > > > > > --
> > > > >> > > > > >  Ahmed
> > > > >> > > >  >
> > > > >> > > > >
> > --------------------------
> > > > >> > > > > Grant
> > Ingersoll
> > > > >> > > > > http://www.lucidimagination.com/
> > > > >> > > > >
> > > > >> > > > > Search the
> > Lucene
> > > > ecosystem
> > > > >> > using  Solr/Lucene:
> > > > >> > > > >http://www.lucidimagination.com/search
> > > > >> > > > >
> > > > >> > > > >
> > > > >> > > >  >
> > > > >> >
> > > >
> > ---------------------------------------------------------------------
> > > > >> > > >  > To
> > unsubscribe,
> > > > e-mail: java-user-unsubscribe@lucene.apache.org
> > > > >> > > >  > For
> > additional
> > > > commands, e-mail:
> > > > >> > java-user-help@lucene.apache.org
> > > > >> > > >  >
> > > > >> > > > >
> > > > >> > > >
> > > > >> > > >
> > > > >> >
> > > >
> > ---------------------------------------------------------------------
> > > > >> > > > To  unsubscribe,
> > e-mail:
> > > java-user-unsubscribe@lucene.apache.org
> > > > >> > > >  For additional
> > commands,
> > > > e-mail: java-user-help@lucene.apache.org
> > > > >> > > >
> > > > >> > > >
> > > > >> > >
> > > > >> >
> > > > >> >
> > > >
> > ---------------------------------------------------------------------
> > > > >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > >> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > > > >> >
> > > > >> >
> > > > >>
> > > > >>
> > > > >>
> > > > >>
> > > > >>
> > > >
> > ---------------------------------------------------------------------
> > > > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > > > >>
> > > > >>
> > > > >
> > > >
> > >
> > >
> > >
> > >
> > >
> > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0022152d5f05e7b448048e825d17--

From java-user-return-47114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 23 19:22:10 2010
Return-Path: <java-user-return-47114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91782 invoked from network); 23 Aug 2010 19:22:10 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Aug 2010 19:22:10 -0000
Received: (qmail 376 invoked by uid 500); 23 Aug 2010 19:22:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 215 invoked by uid 500); 23 Aug 2010 19:22:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 207 invoked by uid 99); 23 Aug 2010 19:22:07 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Aug 2010 19:22:07 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of akaris@gmail.com designates 209.85.213.48 as permitted sender)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Aug 2010 19:21:44 +0000
Received: by ywg4 with SMTP id 4so3175414ywg.35
        for <java-user@lucene.apache.org>; Mon, 23 Aug 2010 12:21:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:cc:content-type;
        bh=I2E9eAVSAPsO4NTq0ER1QSLx0IXs45WYYkzVnEycJwE=;
        b=Mi41Z0ir2Zclu58xo5WOLHr8M9Sp78BetiQrHD6FC/b69V0qN1ExQDsCWx58wqKHAw
         vptIs9B/acDNUotnyUACFWRgXEYNBZcOwL8TI7VwdHw5BdGIDFF2ZLS59kbWESlDUo1H
         X3n0De18nQKtbHt2XmbnrwJFVbBVxPbjB0o00=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:cc:content-type;
        b=B07kEbDl6NAOd2mo4U2VlOPZ8XJZNmJ4i0PadY38hklocqfJglJyGxw+ml+p990V+n
         0UrXoATFnPlq/CVJ4ik6PqNjvLqDEObvVVKWxf4uMBGe4bV3icks/R5+l2XSFMfNyLq5
         C3uGsHcxi54YIT6pWY7DlzPikQ8WKWQkGtTyo=
Received: by 10.213.19.211 with SMTP id c19mr4336848ebb.93.1282591282172; Mon,
 23 Aug 2010 12:21:22 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.14.10.153 with HTTP; Mon, 23 Aug 2010 12:21:02 -0700 (PDT)
From: Michel Nadeau <akaris@gmail.com>
Date: Mon, 23 Aug 2010 15:21:02 -0400
Message-ID: <AANLkTim6BHmkopsbPOj8VBpe3VgWa6+axtL0sRTvaNjg@mail.gmail.com>
Subject: Lucandra - Any experiences?
To: java-user@lucene.apache.org
Cc: Mike Peters <mike@softwareprojects.com>
Content-Type: multipart/alternative; boundary=0015174c45f4c4123d048e828da8
X-Virus-Checked: Checked by ClamAV on apache.org

--0015174c45f4c4123d048e828da8
Content-Type: text/plain; charset=ISO-8859-1

Hi,

we are currently considering to switch from Lucene + Cassandra to *Lucandra*,
mainly for the following reasons:

* Ability to have many threads writing in the same index at the same time;
* Live results without the need to close/re-open the index reader;
* Easy scaling to many nodes thanks to Cassandra's scaling abilities;
* Possibility to boost Lucene's sorting abilities by using many Cassandra
ColumnFamilies;
* No mismatch between data in Lucene and Cassandra (when used separately).

We were told that Lucandra is ready to be used in a production system and
that we would have access to all the Lucene features we're currently using
(wildcard searches, ranges, pagination, sort, filters); but we couldn't find
any big success stories about Lucandra - that's why I'm writing here today!

So if you or someone you know worked on a project using Lucandra (especially
systems involving a lot of data because we have millions and millions and
millions of documents to deal with), please let me know: I'm very interested
to get feedback about your experiences.

Thanks,

Mike

--0015174c45f4c4123d048e828da8--

From java-user-return-47115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 23 20:02:46 2010
Return-Path: <java-user-return-47115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8440 invoked from network); 23 Aug 2010 20:02:46 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Aug 2010 20:02:46 -0000
Received: (qmail 75260 invoked by uid 500); 23 Aug 2010 20:02:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75174 invoked by uid 500); 23 Aug 2010 20:02:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75166 invoked by uid 99); 23 Aug 2010 20:02:43 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Aug 2010 20:02:43 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jsaardchit@go2.com designates 38.97.64.35 as permitted sender)
Received: from [38.97.64.35] (HELO mail.go2.com) (38.97.64.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Aug 2010 20:02:19 +0000
Received: from [10.0.1.4] ([75.82.49.1]) by mail.go2.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Mon, 23 Aug 2010 16:01:58 -0400
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1081)
Subject: Re: Lucandra - Any experiences?
From: Jordon Saardchit <jsaardchit@go2.com>
In-Reply-To: <AANLkTim6BHmkopsbPOj8VBpe3VgWa6+axtL0sRTvaNjg@mail.gmail.com>
Date: Mon, 23 Aug 2010 13:01:57 -0700
Content-Transfer-Encoding: quoted-printable
Message-Id: <304C5ED9-30EF-4912-94FB-04A475418D37@go2.com>
References: <AANLkTim6BHmkopsbPOj8VBpe3VgWa6+axtL0sRTvaNjg@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1081)
X-OriginalArrivalTime: 23 Aug 2010 20:01:58.0471 (UTC) FILETIME=[0B0CDD70:01CB42FE]
X-Virus-Checked: Checked by ClamAV on apache.org

I also would be thoroughly interested in hearing the viewpoints from any =
lucandra users.  Its a model we've been considering for some time now.  =
Our only reluctance is the lack of point of views from the community.  =
Good or bad, i'd love to hear experiences with it.

Jordon

On Aug 23, 2010, at 12:21 PM, Michel Nadeau wrote:

> Hi,
>=20
> we are currently considering to switch from Lucene + Cassandra to =
*Lucandra*,
> mainly for the following reasons:
>=20
> * Ability to have many threads writing in the same index at the same =
time;
> * Live results without the need to close/re-open the index reader;
> * Easy scaling to many nodes thanks to Cassandra's scaling abilities;
> * Possibility to boost Lucene's sorting abilities by using many =
Cassandra
> ColumnFamilies;
> * No mismatch between data in Lucene and Cassandra (when used =
separately).
>=20
> We were told that Lucandra is ready to be used in a production system =
and
> that we would have access to all the Lucene features we're currently =
using
> (wildcard searches, ranges, pagination, sort, filters); but we =
couldn't find
> any big success stories about Lucandra - that's why I'm writing here =
today!
>=20
> So if you or someone you know worked on a project using Lucandra =
(especially
> systems involving a lot of data because we have millions and millions =
and
> millions of documents to deal with), please let me know: I'm very =
interested
> to get feedback about your experiences.
>=20
> Thanks,
>=20
> Mike


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 23 23:08:56 2010
Return-Path: <java-user-return-47116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94434 invoked from network); 23 Aug 2010 23:08:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Aug 2010 23:08:55 -0000
Received: (qmail 13718 invoked by uid 500); 23 Aug 2010 23:08:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13619 invoked by uid 500); 23 Aug 2010 23:08:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13611 invoked by uid 99); 23 Aug 2010 23:08:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Aug 2010 23:08:52 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.191.69.81] (HELO web32904.mail.mud.yahoo.com) (209.191.69.81)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 23 Aug 2010 23:08:45 +0000
Received: (qmail 50207 invoked by uid 60001); 23 Aug 2010 23:08:23 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1282604903; bh=9YA3Rcn1No21nHbLzPR6vlhA1h6VbKjgXRbU+7iT3Dk=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=rkGYQ6CbQF6XOCSvzbHnLkvbpTo/fmUBWY4wLnS2aoz18rKykTV2VFA43PrgQxRhPPvGcZAsEcCeVMXMCrlMDnATWZWOBnE0GSsbPTONoP8iZjeSMDBg5yEM7qorHAEInpRgVjKDgSvVU/PIL0V5Enrg+dow4SRcMEeVrFjQRGQ=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=N/mZR09e8O83qOL5xbPlkuS/MYv62lBwuTxILxWE8uAxWASjwjV7mQN26jCMUwzPSGhJLd8xiTlKyDz5U967zdd0lAtko7J768qwcg4+O5u8qD4Y8OT0zmotfxBuqWqVBEAQApCoXfdFpA381ZEJG4nryYKomS05PVpe5eGr4Ks=;
Message-ID: <860351.49081.qm@web32904.mail.mud.yahoo.com>
X-YMail-OSG: s1BNLC0VM1nj4N6H3CHdxXPXlVaXwEWCvhl2qDpYCH0WLe6
 AODiqPhogTE5Lv8mu6GweF73G85gCG8YAHa3unK6ydmwDWWEWSDG.AI5znwS
 dEbQbaxUszIJWvcbuG9BLoAXnO2MwAQsAEffGsrcK6_yP4OvjUciyZvYiZ2u
 JzzsreNEgzf1rqehqfALh7XTs4kDyilSj8SJV4I0AYL3MCo0OCW.Oy3WWND4
 m1os.jbCZIt9HG.QcDYW56gzbTRbpmlZPCcqMqXQQYrdfx9eUB5v.xnj6nQ5
 pxTT3amUkNvFMC.Nwia.ojZ..w0OTpBKzQP1brFQRtNhtDZcZsV1CmwY_ps_
 qlKMYSOSVHKjYDtl.q72_5gxUUAM-
Received: from [72.36.94.20] by web32904.mail.mud.yahoo.com via HTTP; Mon, 23 Aug 2010 16:08:23 PDT
X-Mailer: YahooMailRC/470 YahooMailWebService/0.8.105.279950
Date: Mon, 23 Aug 2010 16:08:23 -0700 (PDT)
From: Justin <crynax@yahoo.com>
Subject: Wanting batch update to avoid high disk usage
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

In an attempt to avoid doubling disk usage when adding new fields to all 
existing documents, I added a call to IndexWriter::expungeDeletes. Then my 
colleague pointed out that Lucene will rewrite the potentially large segment 
files each time that method is called.


  reader = writer.getReader();
  for (int i=0; i<n; i++) {
    Term idTerm = new Term("id", i);
    TermDocs termDocs = reader.termDocs(idTerm);
    if (termDocs != null && termDocs.next()) {
      Document doc = reader.document(termDocs.doc());
      doc.add(myfield, value);
      writer.updateDocument(idTerm, doc);
      //writer.expungeDeletes(true); // BAD: rewrites segment files each time
    }
  }
  reader.close();
  writer.commit();
  writer.optimize(true);
  writer.close();


The following Lucene FAQ response suggests that disk space from deleted 
documents will be reclaimed. Is this true and is the savings worthwhile to 
update an existing index (followed by optimizing out the deleted documents) 
instead of simply creating a new index?

http://wiki.apache.org/lucene-java/LuceneFAQ#If_I_decide_not_to_optimize_the_index.2C_when_will_the_deleted_documents_actually_get_deleted.3F


Thanks for your help,
Justin


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 24 03:19:30 2010
Return-Path: <java-user-return-47117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85183 invoked from network); 24 Aug 2010 03:19:29 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Aug 2010 03:19:29 -0000
Received: (qmail 68500 invoked by uid 500); 24 Aug 2010 03:19:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68125 invoked by uid 500); 24 Aug 2010 03:19:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68117 invoked by uid 99); 24 Aug 2010 03:19:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Aug 2010 03:19:23 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Aug 2010 03:19:17 +0000
Received: by wyf23 with SMTP id 23so250440wyf.35
        for <java-user@lucene.apache.org>; Mon, 23 Aug 2010 20:18:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=AZkNQaZhcVg61jspe+6Sl23yd6hY7oXkyxdQkLwV3jM=;
        b=pQrwzE0JFFysVib3tveBCYG6nYm0Dz6wsKNTgcIjQyGPKhGgAhOBZTe/H8CcxYql+I
         hFBqeKZQF6vJXOSvuiCYUp8BL/o5TU4WKMAeglTM7UgI6ANMbvoK+GrBxxSbY4W2LtwY
         Z6hDHmj2sDDDRyjLRRnum223H7eYpkSGffFZY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=rpIfD32tvAj0/VnLxZ08A4B8EgrfY+VWp/yz1JZJ+N12iUpXPWkkfGzF6LmPHVyGvr
         goSy8CKltPznBVWP5Obhw2Jv/FWFDIrwNXTKorEk965NwBmcsTtdyh5bJ7Kko6noiTFF
         VZkswcxT0JDxMp8TbHaQK+Myq9co5ZspANd44=
Received: by 10.227.127.84 with SMTP id f20mr5390616wbs.3.1282619936198; Mon,
 23 Aug 2010 20:18:56 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.149.78 with HTTP; Mon, 23 Aug 2010 20:18:36 -0700 (PDT)
In-Reply-To: <860351.49081.qm@web32904.mail.mud.yahoo.com>
References: <860351.49081.qm@web32904.mail.mud.yahoo.com>
From: Anshum <anshumg@gmail.com>
Date: Tue, 24 Aug 2010 08:48:36 +0530
Message-ID: <AANLkTi=B7SHDKgLBT7Duy+bzmkPPAFiX4w8TqwMdhHcq@mail.gmail.com>
Subject: Re: Wanting batch update to avoid high disk usage
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016367fa534add59a048e893919

--0016367fa534add59a048e893919
Content-Type: text/plain; charset=ISO-8859-1

Don't bother calling expunge deletes so often, makes no sense. Instead, call
it once at the end, though, you are calling the optimize method in the end
anyways so should take care of itself. there shouldn't be any difference
(but degradation in performance) on adding a call to expungedeletes().

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Tue, Aug 24, 2010 at 4:38 AM, Justin <crynax@yahoo.com> wrote:

> In an attempt to avoid doubling disk usage when adding new fields to all
> existing documents, I added a call to IndexWriter::expungeDeletes. Then my
> colleague pointed out that Lucene will rewrite the potentially large
> segment
> files each time that method is called.
>
>
>  reader = writer.getReader();
>  for (int i=0; i<n; i++) {
>    Term idTerm = new Term("id", i);
>    TermDocs termDocs = reader.termDocs(idTerm);
>    if (termDocs != null && termDocs.next()) {
>      Document doc = reader.document(termDocs.doc());
>      doc.add(myfield, value);
>      writer.updateDocument(idTerm, doc);
>      //writer.expungeDeletes(true); // BAD: rewrites segment files each
> time
>    }
>  }
>  reader.close();
>  writer.commit();
>  writer.optimize(true);
>  writer.close();
>
>
> The following Lucene FAQ response suggests that disk space from deleted
> documents will be reclaimed. Is this true and is the savings worthwhile to
> update an existing index (followed by optimizing out the deleted documents)
> instead of simply creating a new index?
>
>
> http://wiki.apache.org/lucene-java/LuceneFAQ#If_I_decide_not_to_optimize_the_index.2C_when_will_the_deleted_documents_actually_get_deleted.3F
>
>
> Thanks for your help,
> Justin
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016367fa534add59a048e893919--

From java-user-return-47118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 24 03:52:49 2010
Return-Path: <java-user-return-47118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92353 invoked from network); 24 Aug 2010 03:52:49 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Aug 2010 03:52:49 -0000
Received: (qmail 93532 invoked by uid 500); 24 Aug 2010 03:52:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93061 invoked by uid 500); 24 Aug 2010 03:52:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93053 invoked by uid 99); 24 Aug 2010 03:52:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Aug 2010 03:52:43 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.191.69.79] (HELO web32902.mail.mud.yahoo.com) (209.191.69.79)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 24 Aug 2010 03:52:36 +0000
Received: (qmail 99968 invoked by uid 60001); 24 Aug 2010 03:52:15 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1282621935; bh=t54dl2UEgNUU7a+2gCusyz/gJx8Za0TyaQsaSp2QLdI=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=Qer8aQrDkXP64DvXr+IJCfJdDsZW6DBzULk7UjIZ+m6LDsaZyc8M7lsi1g94fiQWQCYwkThOVLInla75BzNt6L1NWnRKBx1/5SsLy4yj7is3l3i0L3eDeHVuWmDGCD6uL6XUmRHV7FUkPcG+PSum0vYC+DJfUXddAxyZxjsZ4hA=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=GYT+MoJG16UAO1V3pqSOncYZN1W28Z3t9cHwI94/n3nZ0MD085mqG4gIVVcrWH7qXP0kxUrnWSSN65+nNiboetNVwQBS8g4vq1VouaplVO2u2/nkEOwqutTgkNIcukEQITLWG7SPTr5HmI1zMUXEoigm1DfRaT71AejZH+wP6Sg=;
Message-ID: <98745.94859.qm@web32902.mail.mud.yahoo.com>
X-YMail-OSG: x3ZwqOEVM1klI3tD81WlSMAEnxRiDXOiOKChX_szANmHoIE
 lLVdkOTxptpNfgDBrNhN7yfn1B5D9jEXNhVa68V0YcC0LAex4crCbVdIMC5j
 7LnKZn_evRTuvfzZPMp.A55ROjppHjwavjc_N3MhHGOQajFC9UeW.Ll6iSQf
 Cex_6qjwaW1agTujOMc6ILzq4ixnC46EMWEYfz94BLmvAstAS0OnH9usvjp9
 e7YB4q7tS9WFnQsUrQNxdUsYvkT_An0nRRLoc.qoVN7hjuNtcip_8iub9YmH
 4H0bLnPx1im26l1f7w2TXR1dqYuiujSdOxKi4AHsb.mAD4NjzAAs8ZyfXSIc
 zdkQ-
Received: from [99.4.164.92] by web32902.mail.mud.yahoo.com via HTTP; Mon, 23 Aug 2010 20:52:14 PDT
X-Mailer: YahooMailRC/470 YahooMailWebService/0.8.103.269680
References: <860351.49081.qm@web32904.mail.mud.yahoo.com> <AANLkTi=B7SHDKgLBT7Duy+bzmkPPAFiX4w8TqwMdhHcq@mail.gmail.com>
Date: Mon, 23 Aug 2010 20:52:14 -0700 (PDT)
From: Justin <crynax@yahoo.com>
Subject: Re: Wanting batch update to avoid high disk usage
To: java-user@lucene.apache.org
In-Reply-To: <AANLkTi=B7SHDKgLBT7Duy+bzmkPPAFiX4w8TqwMdhHcq@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

My actual code did not call expungeDeletes every time through the loop; however, 
calling expungeDeletes or optimize after the loop means that the index has 
doubled in size with all the deleted documents still sitting around. Or is it 
true that Lucene will try to reclaim disk space? I assume a commit would be 
required at some point.




----- Original Message ----
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Sent: Mon, August 23, 2010 10:18:36 PM
Subject: Re: Wanting batch update to avoid high disk usage

Don't bother calling expunge deletes so often, makes no sense. Instead, call
it once at the end, though, you are calling the optimize method in the end
anyways so should take care of itself. there shouldn't be any difference
(but degradation in performance) on adding a call to expungedeletes().

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Tue, Aug 24, 2010 at 4:38 AM, Justin <crynax@yahoo.com> wrote:

> In an attempt to avoid doubling disk usage when adding new fields to all
> existing documents, I added a call to IndexWriter::expungeDeletes. Then my
> colleague pointed out that Lucene will rewrite the potentially large
> segment
> files each time that method is called.
>
>
>  reader = writer.getReader();
>  for (int i=0; i<n; i++) {
>    Term idTerm = new Term("id", i);
>    TermDocs termDocs = reader.termDocs(idTerm);
>    if (termDocs != null && termDocs.next()) {
>      Document doc = reader.document(termDocs.doc());
>      doc.add(myfield, value);
>      writer.updateDocument(idTerm, doc);
>      //writer.expungeDeletes(true); // BAD: rewrites segment files each
> time
>    }
>  }
>  reader.close();
>  writer.commit();
>  writer.optimize(true);
>  writer.close();
>
>
> The following Lucene FAQ response suggests that disk space from deleted
> documents will be reclaimed. Is this true and is the savings worthwhile to
> update an existing index (followed by optimizing out the deleted documents)
> instead of simply creating a new index?
>
>
>http://wiki.apache.org/lucene-java/LuceneFAQ#If_I_decide_not_to_optimize_the_index.2C_when_will_the_deleted_documents_actually_get_deleted.3F
>F
>
>
> Thanks for your help,
> Justin
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 24 04:12:06 2010
Return-Path: <java-user-return-47119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 235 invoked from network); 24 Aug 2010 04:12:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Aug 2010 04:12:06 -0000
Received: (qmail 7392 invoked by uid 500); 24 Aug 2010 04:12:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6960 invoked by uid 500); 24 Aug 2010 04:12:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6952 invoked by uid 99); 24 Aug 2010 04:11:59 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Aug 2010 04:11:59 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anshumg@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Aug 2010 04:11:37 +0000
Received: by wwb18 with SMTP id 18so965569wwb.5
        for <java-user@lucene.apache.org>; Mon, 23 Aug 2010 21:11:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=CZ9k3fEbW8EysRsjkjYm8LtOJszw0Jbn9c1I5W17axc=;
        b=uUKcKed5HdaYahFBeoSFHONd5qN9Jn2xG015qafioeKlaHmoNarmnc1ZjUkVSZBl2+
         DSTyhpO70qHXVp54ufXK/nq9cT5HTbfI1ShVafnmOfea7FrgapNtZAJOvGZ2d+Fee3WV
         Q2NI1P1YC2NWxFq6hGzWK2M7LsnEgN1XcywpA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=aJhQ5F1fKTIwIvpvfCPzqAA2pOrO7OYMjBHUWB2OO0AFsueSpAYlBcnuCspcV2971c
         vWufvEjnIaM4LKT6EEdCNKd73e5vVbUW8MUkonvcqV45fCUHZZj6lXdHaubjoG4Ar1Aj
         HSoH+QlMkYeKGvt7590MRZ/bqM5sJtAv0OZlU=
Received: by 10.227.136.129 with SMTP id r1mr5436445wbt.114.1282623076094;
 Mon, 23 Aug 2010 21:11:16 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.149.78 with HTTP; Mon, 23 Aug 2010 21:10:56 -0700 (PDT)
In-Reply-To: <98745.94859.qm@web32902.mail.mud.yahoo.com>
References: <860351.49081.qm@web32904.mail.mud.yahoo.com> <AANLkTi=B7SHDKgLBT7Duy+bzmkPPAFiX4w8TqwMdhHcq@mail.gmail.com>
 <98745.94859.qm@web32902.mail.mud.yahoo.com>
From: Anshum <anshumg@gmail.com>
Date: Tue, 24 Aug 2010 09:40:56 +0530
Message-ID: <AANLkTim=g8AFkducQcq9=QA8HaF+vBnRVY4zU+muUepd@mail.gmail.com>
Subject: Re: Wanting batch update to avoid high disk usage
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f7965ad4d2e1048e89f44a
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f7965ad4d2e1048e89f44a
Content-Type: text/plain; charset=ISO-8859-1

Hi Justin,
Lucene does not reclaim space, each update translates to a deletion followed
by an addition of a new document. Ideally you could let the index size bloat
and then expungeDeletes or optimize at the end, unless you want to clean up
and reclaim the disc space for some reason. Optimize/expungeDeletes() is
when lucene would reclaim deleted document ids and document space. Though
remember that both these functions are highly I/O intensive and time
consuming at times. Just see if reclaiming space midway is something so
essential.

Moreover, a commit would not impact your issue of reclaiming lost disc
space.

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Tue, Aug 24, 2010 at 9:22 AM, Justin <crynax@yahoo.com> wrote:

> My actual code did not call expungeDeletes every time through the loop;
> however,
> calling expungeDeletes or optimize after the loop means that the index has
> doubled in size with all the deleted documents still sitting around. Or is
> it
> true that Lucene will try to reclaim disk space? I assume a commit would be
> required at some point.
>
>
>
>
> ----- Original Message ----
> From: Anshum <anshumg@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Mon, August 23, 2010 10:18:36 PM
> Subject: Re: Wanting batch update to avoid high disk usage
>
> Don't bother calling expunge deletes so often, makes no sense. Instead,
> call
> it once at the end, though, you are calling the optimize method in the end
> anyways so should take care of itself. there shouldn't be any difference
> (but degradation in performance) on adding a call to expungedeletes().
>
> --
> Anshum Gupta
> http://ai-cafe.blogspot.com
>
>
> On Tue, Aug 24, 2010 at 4:38 AM, Justin <crynax@yahoo.com> wrote:
>
> > In an attempt to avoid doubling disk usage when adding new fields to all
> > existing documents, I added a call to IndexWriter::expungeDeletes. Then
> my
> > colleague pointed out that Lucene will rewrite the potentially large
> > segment
> > files each time that method is called.
> >
> >
> >  reader = writer.getReader();
> >  for (int i=0; i<n; i++) {
> >    Term idTerm = new Term("id", i);
> >    TermDocs termDocs = reader.termDocs(idTerm);
> >    if (termDocs != null && termDocs.next()) {
> >      Document doc = reader.document(termDocs.doc());
> >      doc.add(myfield, value);
> >      writer.updateDocument(idTerm, doc);
> >      //writer.expungeDeletes(true); // BAD: rewrites segment files each
> > time
> >    }
> >  }
> >  reader.close();
> >  writer.commit();
> >  writer.optimize(true);
> >  writer.close();
> >
> >
> > The following Lucene FAQ response suggests that disk space from deleted
> > documents will be reclaimed. Is this true and is the savings worthwhile
> to
> > update an existing index (followed by optimizing out the deleted
> documents)
> > instead of simply creating a new index?
> >
> >
> >
> http://wiki.apache.org/lucene-java/LuceneFAQ#If_I_decide_not_to_optimize_the_index.2C_when_will_the_deleted_documents_actually_get_deleted.3F
> >F
> >
> >
> > Thanks for your help,
> > Justin
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001485f7965ad4d2e1048e89f44a--

From java-user-return-47120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 24 13:15:13 2010
Return-Path: <java-user-return-47120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13339 invoked from network); 24 Aug 2010 13:15:13 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Aug 2010 13:15:13 -0000
Received: (qmail 44828 invoked by uid 500); 24 Aug 2010 13:15:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44444 invoked by uid 500); 24 Aug 2010 13:15:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44436 invoked by uid 99); 24 Aug 2010 13:15:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Aug 2010 13:15:06 +0000
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=SPF_PASS,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Aug 2010 13:15:01 +0000
Received: from [172.18.226.237] (172.18.226.237) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.436.0; Tue, 24 Aug 2010 15:14:39 +0200
Subject: Re: slow search threads during a disk copy
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <8CD10BECF70B361-1354-687@web-mmc-m04.sysops.aol.com>
References: <8CD10ADD59CCEB2-1354-1F2@web-mmc-m04.sysops.aol.com>
	 <AANLkTimT+=LEsiNi3adUM0Ow3qvbs5qi5VBgqCj7yUpz@mail.gmail.com>
	 <8CD10B33D527E22-1354-395@web-mmc-m04.sysops.aol.com>
	 <AANLkTi=Qj=Auc5MP4fRYJhOF-h1t8PzkRzLDg2WUyccL@mail.gmail.com>
	 <8CD10BECF70B361-1354-687@web-mmc-m04.sysops.aol.com>
Content-Type: text/plain; charset="UTF-8"
Organization: State and University Library, Denmark
Date: Tue, 24 Aug 2010 15:14:34 +0200
Message-ID: <1282655674.2545.26.camel@te-prime>
MIME-Version: 1.0
X-Mailer: Evolution 2.28.3 
Content-Transfer-Encoding: 7bit

On Mon, 2010-08-23 at 11:43 +0200, gaganb@graffiti.net wrote:
> Intererstingly, the copy is quite fast (around 30s) when there are no searches in progress.

I agree with Anshum: This looks very much like IO contention.

However, it might not just be a case of seek-time trouble: We've had
similar problems on our Linux server with when copying large files from
harddisk A to A while performing searches on SSD B.

Our low-level guys tells me that this was due to the write-buffer being
filled and that reads were blocked while it was flushed (AFAIR). We've
experimented by mounting with sync instead of async which gave us much
better response times during copying at the cost of a substantially
slower copy. dirsync should also be worth looking into.

Regards,
Toke Eskildsen


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 24 13:20:43 2010
Return-Path: <java-user-return-47121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15186 invoked from network); 24 Aug 2010 13:20:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Aug 2010 13:20:43 -0000
Received: (qmail 58271 invoked by uid 500); 24 Aug 2010 13:20:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57535 invoked by uid 500); 24 Aug 2010 13:20:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56555 invoked by uid 99); 24 Aug 2010 13:20:36 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Aug 2010 13:20:36 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [12.44.8.171] (HELO birexchange.BIRPLAZA.local) (12.44.8.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Aug 2010 13:20:14 +0000
Content-class: urn:content-classes:message
Subject: RE: Wanting batch update to avoid high disk usage
Date: Tue, 24 Aug 2010 09:19:52 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Message-ID: <CC2671C08F06704ABFD37ED1EA09AA560112AD13@birexchange.BIRPLAZA.local>
In-Reply-To: <AANLkTim=g8AFkducQcq9=QA8HaF+vBnRVY4zU+muUepd@mail.gmail.com>
X-MimeOLE: Produced By Microsoft Exchange V6.5
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Wanting batch update to avoid high disk usage
Thread-Index: ActDQoNIPV4IaJi5S82oOjXUmooLWAAR9+tg
References: <860351.49081.qm@web32904.mail.mud.yahoo.com> <AANLkTi=B7SHDKgLBT7Duy+bzmkPPAFiX4w8TqwMdhHcq@mail.gmail.com> <98745.94859.qm@web32902.mail.mud.yahoo.com> <AANLkTim=g8AFkducQcq9=QA8HaF+vBnRVY4zU+muUepd@mail.gmail.com>
From: "Beard, Brian" <Brian.Beard@mybir.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

We had a situation where our index size was inflated to roughly double.
It took about a couple of months, but the size eventually dropped back
down, so it does seem to eventually get rid of the deleted documents.

With that said, in the future expungeDeletes will get called once a day
to better manage the size.

If you always optimize down to 1 segment, this problem won't occur. We
had this setting at 5 segments, so that may be why the document
deletions took a while longer.=20

I'm not 100% sure, but this also seems dependent on how large the
segments are and what the maxMergeMb limit is. This reclamation may take
longer to happen for segments that essentially have less activity
associated them - they are already large and never get merged due to the
number of optimization segments is greater than 1, and they also are
already at the maxMergeMb limit and never get merged through the normal
indexing process.

-----Original Message-----
From: Anshum [mailto:anshumg@gmail.com]=20
Sent: Tuesday, August 24, 2010 12:11 AM
To: java-user@lucene.apache.org
Subject: Re: Wanting batch update to avoid high disk usage

Hi Justin,
Lucene does not reclaim space, each update translates to a deletion
followed
by an addition of a new document. Ideally you could let the index size
bloat
and then expungeDeletes or optimize at the end, unless you want to clean
up
and reclaim the disc space for some reason. Optimize/expungeDeletes() is
when lucene would reclaim deleted document ids and document space.
Though
remember that both these functions are highly I/O intensive and time
consuming at times. Just see if reclaiming space midway is something so
essential.

Moreover, a commit would not impact your issue of reclaiming lost disc
space.

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Tue, Aug 24, 2010 at 9:22 AM, Justin <crynax@yahoo.com> wrote:

> My actual code did not call expungeDeletes every time through the
loop;
> however,
> calling expungeDeletes or optimize after the loop means that the index
has
> doubled in size with all the deleted documents still sitting around.
Or is
> it
> true that Lucene will try to reclaim disk space? I assume a commit
would be
> required at some point.
>
>
>
>
> ----- Original Message ----
> From: Anshum <anshumg@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Mon, August 23, 2010 10:18:36 PM
> Subject: Re: Wanting batch update to avoid high disk usage
>
> Don't bother calling expunge deletes so often, makes no sense.
Instead,
> call
> it once at the end, though, you are calling the optimize method in the
end
> anyways so should take care of itself. there shouldn't be any
difference
> (but degradation in performance) on adding a call to expungedeletes().
>
> --
> Anshum Gupta
> http://ai-cafe.blogspot.com
>
>
> On Tue, Aug 24, 2010 at 4:38 AM, Justin <crynax@yahoo.com> wrote:
>
> > In an attempt to avoid doubling disk usage when adding new fields to
all
> > existing documents, I added a call to IndexWriter::expungeDeletes.
Then
> my
> > colleague pointed out that Lucene will rewrite the potentially large
> > segment
> > files each time that method is called.
> >
> >
> >  reader =3D writer.getReader();
> >  for (int i=3D0; i<n; i++) {
> >    Term idTerm =3D new Term("id", i);
> >    TermDocs termDocs =3D reader.termDocs(idTerm);
> >    if (termDocs !=3D null && termDocs.next()) {
> >      Document doc =3D reader.document(termDocs.doc());
> >      doc.add(myfield, value);
> >      writer.updateDocument(idTerm, doc);
> >      //writer.expungeDeletes(true); // BAD: rewrites segment files
each
> > time
> >    }
> >  }
> >  reader.close();
> >  writer.commit();
> >  writer.optimize(true);
> >  writer.close();
> >
> >
> > The following Lucene FAQ response suggests that disk space from
deleted
> > documents will be reclaimed. Is this true and is the savings
worthwhile
> to
> > update an existing index (followed by optimizing out the deleted
> documents)
> > instead of simply creating a new index?
> >
> >
> >
>
http://wiki.apache.org/lucene-java/LuceneFAQ#If_I_decide_not_to_optimize
_the_index.2C_when_will_the_deleted_documents_actually_get_deleted.3F
> >F
> >
> >
> > Thanks for your help,
> > Justin
> >
> >
> >
> >
> >
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 24 13:41:12 2010
Return-Path: <java-user-return-47122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23529 invoked from network); 24 Aug 2010 13:41:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Aug 2010 13:41:12 -0000
Received: (qmail 99159 invoked by uid 500); 24 Aug 2010 13:41:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98681 invoked by uid 500); 24 Aug 2010 13:41:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98673 invoked by uid 99); 24 Aug 2010 13:41:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Aug 2010 13:41:06 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.191.69.82] (HELO web32905.mail.mud.yahoo.com) (209.191.69.82)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 24 Aug 2010 13:41:00 +0000
Received: (qmail 18812 invoked by uid 60001); 24 Aug 2010 13:40:39 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1282657239; bh=QywOrmT0ztgQcMlWvjfaPPDG0m4QwIjpuw0iCUMMwtY=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=JIsyAS/C2CKgpzqDba5RGoCIi7z8gnlJ/Zi57oAjkmz3rywUbICIuONdcro2JjslxUlobEXcw2uTu4lPc7CrFaHY5Wwh485g1BNvUs/q6N/gDkrc2KtkW4LQNkHU31lNoQoj0sIrZ4Tgfxba8At9/To7STbOdcwq9wgaZtlXQZI=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=UdhBZMhKw53gZAKUMNzgUqzbgj3H6P7M+ZmgWKQGRk17p9KB9EX5LggGGd/ZrmMrc5GnUxsX2oI0n/7UBnrF6aw0reoSBx0ejHz4LCRZqi2REF8Jv1ZNRpKTxrb513mr5We5Yq/kZTn66etIUN486pt0eFOWJOBbDTUvXfMWbj4=;
Message-ID: <548154.18796.qm@web32905.mail.mud.yahoo.com>
X-YMail-OSG: 5ESvhAoVM1l1o_lxnVw6GwJhZ.DmWwKUDBPccVKdSsGyP6S
 BDwtnfYw0LDs5vuANbKs_cUB4sQA4uT.zWBPnRNugxGyHfCamPAbN.wGNcjr
 E4Aqa6tHteji3Hr2yDlsHe4R2mCe8GkimU732HEi89MmNuztMaVEVSRxUH0M
 7vAOLX8AcYKB6aTQmaMHtk721TjRcUYQsHui4Sp03j.ClJ.YMLJRqJ9aZuHR
 H0d19ZQRzFLQvdGvZsZb6tptPAzIp4.gRlDgDJMGmHiCERG6a7tXcstFyGAN
 rc72FsuSwIgnJebb7eD_XPGvRUOvLXVd9rtBLAGD0jPoRXSwOy6Do3pKXCut
 .Ma4-
Received: from [99.4.164.92] by web32905.mail.mud.yahoo.com via HTTP; Tue, 24 Aug 2010 06:40:38 PDT
X-Mailer: YahooMailRC/470 YahooMailWebService/0.8.105.279950
References: <860351.49081.qm@web32904.mail.mud.yahoo.com> <AANLkTi=B7SHDKgLBT7Duy+bzmkPPAFiX4w8TqwMdhHcq@mail.gmail.com> <98745.94859.qm@web32902.mail.mud.yahoo.com> <AANLkTim=g8AFkducQcq9=QA8HaF+vBnRVY4zU+muUepd@mail.gmail.com> <CC2671C08F06704ABFD37ED1EA09AA560112AD13@birexchange.BIRPLAZA.local>
Date: Tue, 24 Aug 2010 06:40:38 -0700 (PDT)
From: Justin <crynax@yahoo.com>
Subject: Re: Wanting batch update to avoid high disk usage
To: java-user@lucene.apache.org
In-Reply-To: <CC2671C08F06704ABFD37ED1EA09AA560112AD13@birexchange.BIRPLAZA.local>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

> reclamation may take longer ... for segments ... less activity

At the present time, I'm concerned about adding a field to every document in an 
existing index. The activity is delete followed by add many times. So if my disk 
capacity is 32GB and my index size is 20GB, there may be plenty of space for an 
additional field but not enough to double the size of the index with all the 
deleted documents sitting around. The pseudo-code in my first post was an 
attempt to reclaim space as documents are updated, but that's not practical when 
entire segment files are rewritten every time. So it looks like our only option 
is to bail out when there's not enough space to duplicate the existing index.




----- Original Message ----
From: "Beard, Brian" <Brian.Beard@mybir.com>
To: java-user@lucene.apache.org
Sent: Tue, August 24, 2010 8:19:52 AM
Subject: RE: Wanting batch update to avoid high disk usage

We had a situation where our index size was inflated to roughly double.
It took about a couple of months, but the size eventually dropped back
down, so it does seem to eventually get rid of the deleted documents.

With that said, in the future expungeDeletes will get called once a day
to better manage the size.

If you always optimize down to 1 segment, this problem won't occur. We
had this setting at 5 segments, so that may be why the document
deletions took a while longer. 

I'm not 100% sure, but this also seems dependent on how large the
segments are and what the maxMergeMb limit is. This reclamation may take
longer to happen for segments that essentially have less activity
associated them - they are already large and never get merged due to the
number of optimization segments is greater than 1, and they also are
already at the maxMergeMb limit and never get merged through the normal
indexing process.

-----Original Message-----
From: Anshum [mailto:anshumg@gmail.com] 
Sent: Tuesday, August 24, 2010 12:11 AM
To: java-user@lucene.apache.org
Subject: Re: Wanting batch update to avoid high disk usage

Hi Justin,
Lucene does not reclaim space, each update translates to a deletion
followed
by an addition of a new document. Ideally you could let the index size
bloat
and then expungeDeletes or optimize at the end, unless you want to clean
up
and reclaim the disc space for some reason. Optimize/expungeDeletes() is
when lucene would reclaim deleted document ids and document space.
Though
remember that both these functions are highly I/O intensive and time
consuming at times. Just see if reclaiming space midway is something so
essential.

Moreover, a commit would not impact your issue of reclaiming lost disc
space.

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Tue, Aug 24, 2010 at 9:22 AM, Justin <crynax@yahoo.com> wrote:

> My actual code did not call expungeDeletes every time through the
loop;
> however,
> calling expungeDeletes or optimize after the loop means that the index
has
> doubled in size with all the deleted documents still sitting around.
Or is
> it
> true that Lucene will try to reclaim disk space? I assume a commit
would be
> required at some point.
>
>
>
>
> ----- Original Message ----
> From: Anshum <anshumg@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Mon, August 23, 2010 10:18:36 PM
> Subject: Re: Wanting batch update to avoid high disk usage
>
> Don't bother calling expunge deletes so often, makes no sense.
Instead,
> call
> it once at the end, though, you are calling the optimize method in the
end
> anyways so should take care of itself. there shouldn't be any
difference
> (but degradation in performance) on adding a call to expungedeletes().
>
> --
> Anshum Gupta
> http://ai-cafe.blogspot.com
>
>
> On Tue, Aug 24, 2010 at 4:38 AM, Justin <crynax@yahoo.com> wrote:
>
> > In an attempt to avoid doubling disk usage when adding new fields to
all
> > existing documents, I added a call to IndexWriter::expungeDeletes.
Then
> my
> > colleague pointed out that Lucene will rewrite the potentially large
> > segment
> > files each time that method is called.
> >
> >
> >  reader = writer.getReader();
> >  for (int i=0; i<n; i++) {
> >    Term idTerm = new Term("id", i);
> >    TermDocs termDocs = reader.termDocs(idTerm);
> >    if (termDocs != null && termDocs.next()) {
> >      Document doc = reader.document(termDocs.doc());
> >      doc.add(myfield, value);
> >      writer.updateDocument(idTerm, doc);
> >      //writer.expungeDeletes(true); // BAD: rewrites segment files
each
> > time
> >    }
> >  }
> >  reader.close();
> >  writer.commit();
> >  writer.optimize(true);
> >  writer.close();
> >
> >
> > The following Lucene FAQ response suggests that disk space from
deleted
> > documents will be reclaimed. Is this true and is the savings
worthwhile
> to
> > update an existing index (followed by optimizing out the deleted
> documents)
> > instead of simply creating a new index?
> >
> >
> >
>
http://wiki.apache.org/lucene-java/LuceneFAQ#If_I_decide_not_to_optimize
_the_index.2C_when_will_the_deleted_documents_actually_get_deleted.3F
> >F
> >
> >
> > Thanks for your help,
> > Justin
> >
> >
> >
> >
> >
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 24 13:56:40 2010
Return-Path: <java-user-return-47123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27948 invoked from network); 24 Aug 2010 13:56:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Aug 2010 13:56:40 -0000
Received: (qmail 29902 invoked by uid 500); 24 Aug 2010 13:56:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29389 invoked by uid 500); 24 Aug 2010 13:56:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29381 invoked by uid 99); 24 Aug 2010 13:56:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Aug 2010 13:56:33 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [12.44.8.171] (HELO birexchange.BIRPLAZA.local) (12.44.8.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Aug 2010 13:56:28 +0000
Content-class: urn:content-classes:message
Subject: RE: Wanting batch update to avoid high disk usage
Date: Tue, 24 Aug 2010 09:56:07 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Message-ID: <CC2671C08F06704ABFD37ED1EA09AA560112AD22@birexchange.BIRPLAZA.local>
In-Reply-To: <548154.18796.qm@web32905.mail.mud.yahoo.com>
X-MimeOLE: Produced By Microsoft Exchange V6.5
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Wanting batch update to avoid high disk usage
Thread-Index: ActDkgQgzrC0FZz+TYubU1+f+aSd2AAAKLLQ
References: <860351.49081.qm@web32904.mail.mud.yahoo.com> <AANLkTi=B7SHDKgLBT7Duy+bzmkPPAFiX4w8TqwMdhHcq@mail.gmail.com> <98745.94859.qm@web32902.mail.mud.yahoo.com> <AANLkTim=g8AFkducQcq9=QA8HaF+vBnRVY4zU+muUepd@mail.gmail.com> <CC2671C08F06704ABFD37ED1EA09AA560112AD13@birexchange.BIRPLAZA.local> <548154.18796.qm@web32905.mail.mud.yahoo.com>
From: "Beard, Brian" <Brian.Beard@mybir.com>
To: <java-user@lucene.apache.org>

At any given time, you need to have at least twice as much disk space
available as the total index size, for the use case you mention, but
also in the case of optimization. It is possible for an optimize to
double the index size right before the commit.

You could try to dynamically call expungeDeletes by monitoring disk
space usage. As long as it doesn't happen on a per-batch basis it may be
enough to take care of the problem.

-----Original Message-----
From: Justin [mailto:crynax@yahoo.com]=20
Sent: Tuesday, August 24, 2010 9:41 AM
To: java-user@lucene.apache.org
Subject: Re: Wanting batch update to avoid high disk usage

> reclamation may take longer ... for segments ... less activity

At the present time, I'm concerned about adding a field to every
document in an=20
existing index. The activity is delete followed by add many times. So if
my disk=20
capacity is 32GB and my index size is 20GB, there may be plenty of space
for an=20
additional field but not enough to double the size of the index with all
the=20
deleted documents sitting around. The pseudo-code in my first post was
an=20
attempt to reclaim space as documents are updated, but that's not
practical when=20
entire segment files are rewritten every time. So it looks like our only
option=20
is to bail out when there's not enough space to duplicate the existing
index.




----- Original Message ----
From: "Beard, Brian" <Brian.Beard@mybir.com>
To: java-user@lucene.apache.org
Sent: Tue, August 24, 2010 8:19:52 AM
Subject: RE: Wanting batch update to avoid high disk usage

We had a situation where our index size was inflated to roughly double.
It took about a couple of months, but the size eventually dropped back
down, so it does seem to eventually get rid of the deleted documents.

With that said, in the future expungeDeletes will get called once a day
to better manage the size.

If you always optimize down to 1 segment, this problem won't occur. We
had this setting at 5 segments, so that may be why the document
deletions took a while longer.=20

I'm not 100% sure, but this also seems dependent on how large the
segments are and what the maxMergeMb limit is. This reclamation may take
longer to happen for segments that essentially have less activity
associated them - they are already large and never get merged due to the
number of optimization segments is greater than 1, and they also are
already at the maxMergeMb limit and never get merged through the normal
indexing process.

-----Original Message-----
From: Anshum [mailto:anshumg@gmail.com]=20
Sent: Tuesday, August 24, 2010 12:11 AM
To: java-user@lucene.apache.org
Subject: Re: Wanting batch update to avoid high disk usage

Hi Justin,
Lucene does not reclaim space, each update translates to a deletion
followed
by an addition of a new document. Ideally you could let the index size
bloat
and then expungeDeletes or optimize at the end, unless you want to clean
up
and reclaim the disc space for some reason. Optimize/expungeDeletes() is
when lucene would reclaim deleted document ids and document space.
Though
remember that both these functions are highly I/O intensive and time
consuming at times. Just see if reclaiming space midway is something so
essential.

Moreover, a commit would not impact your issue of reclaiming lost disc
space.

--
Anshum Gupta
http://ai-cafe.blogspot.com


On Tue, Aug 24, 2010 at 9:22 AM, Justin <crynax@yahoo.com> wrote:

> My actual code did not call expungeDeletes every time through the
loop;
> however,
> calling expungeDeletes or optimize after the loop means that the index
has
> doubled in size with all the deleted documents still sitting around.
Or is
> it
> true that Lucene will try to reclaim disk space? I assume a commit
would be
> required at some point.
>
>
>
>
> ----- Original Message ----
> From: Anshum <anshumg@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Mon, August 23, 2010 10:18:36 PM
> Subject: Re: Wanting batch update to avoid high disk usage
>
> Don't bother calling expunge deletes so often, makes no sense.
Instead,
> call
> it once at the end, though, you are calling the optimize method in the
end
> anyways so should take care of itself. there shouldn't be any
difference
> (but degradation in performance) on adding a call to expungedeletes().
>
> --
> Anshum Gupta
> http://ai-cafe.blogspot.com
>
>
> On Tue, Aug 24, 2010 at 4:38 AM, Justin <crynax@yahoo.com> wrote:
>
> > In an attempt to avoid doubling disk usage when adding new fields to
all
> > existing documents, I added a call to IndexWriter::expungeDeletes.
Then
> my
> > colleague pointed out that Lucene will rewrite the potentially large
> > segment
> > files each time that method is called.
> >
> >
> >  reader =3D writer.getReader();
> >  for (int i=3D0; i<n; i++) {
> >    Term idTerm =3D new Term("id", i);
> >    TermDocs termDocs =3D reader.termDocs(idTerm);
> >    if (termDocs !=3D null && termDocs.next()) {
> >      Document doc =3D reader.document(termDocs.doc());
> >      doc.add(myfield, value);
> >      writer.updateDocument(idTerm, doc);
> >      //writer.expungeDeletes(true); // BAD: rewrites segment files
each
> > time
> >    }
> >  }
> >  reader.close();
> >  writer.commit();
> >  writer.optimize(true);
> >  writer.close();
> >
> >
> > The following Lucene FAQ response suggests that disk space from
deleted
> > documents will be reclaimed. Is this true and is the savings
worthwhile
> to
> > update an existing index (followed by optimizing out the deleted
> documents)
> > instead of simply creating a new index?
> >
> >
> >
>
http://wiki.apache.org/lucene-java/LuceneFAQ#If_I_decide_not_to_optimize
_the_index.2C_when_will_the_deleted_documents_actually_get_deleted.3F
> >F
> >
> >
> > Thanks for your help,
> > Justin
> >
> >
> >
> >
> >
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


     =20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 24 15:13:59 2010
Return-Path: <java-user-return-47124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65020 invoked from network); 24 Aug 2010 15:13:59 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Aug 2010 15:13:59 -0000
Received: (qmail 89114 invoked by uid 500); 24 Aug 2010 15:13:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88962 invoked by uid 500); 24 Aug 2010 15:13:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88954 invoked by uid 99); 24 Aug 2010 15:13:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Aug 2010 15:13:55 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.136.167.8] (HELO web113308.mail.gq1.yahoo.com) (98.136.167.8)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 24 Aug 2010 15:13:48 +0000
Received: (qmail 8059 invoked by uid 60001); 24 Aug 2010 15:13:26 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1282662806; bh=/sHhMCjYRut/awcLjAS+ENtWDhgq4KPXh7vFdG2YT0c=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=pyZxZg0jkQ6F8rT4ECgUd11BdOsEYSiIIQ95TRw2vN5SQYnVGf0DFi8kmKqKvrONDceIuwmrxrQI3UImic8YGB1RcbML+sq2XWbUL941kSjo5Y8eihSruptmbQPPooHDuE7JajLZ3seXItEwqkSTUHRyRtYikUUdxs1uVAWlFBQ=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=wqVERa1j4cGpjmoqnpj1kXYmhbXYHM0j+yJx28c4XeR6JJxvK5q3ovFdV1Xmala8AlZZZ4EvWsVcddQSbUAcP8ryOzjGbE4UmdLLe6qIjEFbrgp7soP5UK7ZXBCwjpLuB4V0TzVG6D1SJogrgab0OqYYQ1RdyQRquAZQUOlXd7w=;
Message-ID: <507931.497.qm@web113308.mail.gq1.yahoo.com>
X-YMail-OSG: XbtRgXAVM1khUWM35tuPoIdbtn70MCgW.DyEKEiMDxcB1YE
 i78eBns7OFeU_mCtBu89CjARaM.FvJDIMLqqbgnLomuv_kMhhfkJmhVSeLzO
 apmu6wxld4Gv.Iqrp2xOrj_xY858400tCi6nSiWb2LLcRssfrXiSZzjWhW3_
 FgSA0ZJnlU3mgQ0IX7M8rERvMBW9BbUeZsURumqngFn7b86NuZgaODVp8y_M
 plRk1d6.bJMo1LNzIuDO2ZNftZqITm2HWv6rSTUUqoRvIwkCpt53sLG84q7q
 b1rqh7hFVIpCgzIw1BNPopNK7ogIHA0TtrU7Nz271BpSqpJk1febzlkM8Jly
 b_VlmzN3c6DqgFP0-
Received: from [140.244.128.12] by web113308.mail.gq1.yahoo.com via HTTP; Tue, 24 Aug 2010 08:13:26 PDT
X-Mailer: YahooMailClassic/11.3.2 YahooMailWebService/0.8.105.279950
Date: Tue, 24 Aug 2010 08:13:26 -0700 (PDT)
From: Ivan Provalov <iprovalo@yahoo.com>
Subject: Re: Calculate Term Co-occurrence Matrix
To: java-user@lucene.apache.org
In-Reply-To: <AANLkTimaUtmYCg02Ri-eG3g859+C8Os089U0jbdQr60A@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Aida,=0A=0ARight now it will do two term collocation only.=0A=0AIvan=0A=0A=
=0A--- On Mon, 8/23/10, Aida Hota <hota.aida@gmail.com> wrote:=0A=0A> From:=
 Aida Hota <hota.aida@gmail.com>=0A> Subject: Re: Calculate Term Co-occurre=
nce Matrix=0A> To: java-user@lucene.apache.org=0A> Date: Monday, August 23,=
 2010, 1:36 PM=0A> Hi Ivan thanx a lot for this. I just=0A> caught time to =
see this and reply,=0A> sorry for bugging again, I appreciate already what =
you=0A> uploaded . I would=0A> also like to ask one question, if you dont m=
ind. If it is=0A> possible somehow=0A> to get from this unified list of fre=
quently occuring=0A> unigrams, bigrams and=0A> trigrams with their frequenc=
ies????=0A> =0A> Thank you very much=0A> =0A> =0A> On Mon, Aug 23, 2010 at =
3:22 PM, Ivan Provalov <iprovalo@yahoo.com>=0A> wrote:=0A> =0A> > Ahmed, if=
 you want the raw score, you can do it the=0A> way you describe below.=0A> =
>=0A> >=0A> >=0A> > --- On Sun, 8/22/10, ahmed algohary <algoharyalex@gmail=
.com>=0A> wrote:=0A> >=0A> > > From: ahmed algohary <algoharyalex@gmail.com=
>=0A> > > Subject: Re: Calculate Term Co-occurrence Matrix=0A> > > To: java=
-user@lucene.apache.org=0A> > > Date: Sunday, August 22, 2010, 9:27 AM=0A> =
> > I think I got it.=0A> > >=0A> > > In the CollectionIndexer class, I hav=
e added the=0A> > > co-occurrence score to the=0A> > > index document:=0A> =
> >=0A> > >=A0 doc.add(new Field("score",=0A> collocation.getScore() + "",=
=0A> > >=0A> > > Field.Store.YES, Field.Index.NOT_ANALYZED));=0A> > >=0A> >=
 > then in the CollectionSearcher, the scores can=0A> be=0A> > > retrieved:=
=0A> > >=0A> > >=A0 d.get("score")=0A> > >=0A> > > Is that correct ??=0A> >=
 >=0A> > > On Sun, Aug 22, 2010 at 2:47 PM, ahmed algohary=0A> <algoharyale=
x@gmail.com=0A> > >wrote:=0A> > >=0A> > > > Thanks! It is exactly what I ne=
ed. But,=0A> isn't there a=0A> > > way to get the=0A> > > > matching score =
?=0A> > > >=0A> > > > for example, "damaged"=A0 co-occurs with=0A> "shipmen=
t"=0A> > > with a probability =3D 0.4=0A> > > > ??=0A> > > >=0A> > > >=0A> =
> > > On Sun, Aug 22, 2010 at 5:35 AM, Ivan=0A> Provalov <iprovalo@yahoo.co=
m>=0A> > > wrote:=0A> > > >=0A> > > >> Ahmed,=0A> > > >>=0A> > > >> FYI, I =
updated the term collocations=0A> package I=0A> > > mentioned earlier with =
a=0A> > > >> few fixes and changes which will make it=0A> work for=0A> > > =
Lucene 3.0.2.=A0 This may=0A> > > >> help your task.=0A> > > >>=0A> > > >> =
See:=0A> > > >> https://issues.apache.org/jira/browse/LUCENE-474=0A> > > >>=
=0A> > > >> Thanks,=0A> > > >>=0A> > > >> Ivan Provalov=0A> > > >>=0A> > > =
>>=0A> > > >> --- On Sat, 8/21/10, Otis Gospodnetic=0A> <otis_gospodnetic@y=
ahoo.com>=0A> > > wrote:=0A> > > >>=0A> > > >> > From: Otis Gospodnetic <ot=
is_gospodnetic@yahoo.com>=0A> > > >> > Subject: Re: Calculate Term=0A> Co-o=
ccurrence=0A> > > Matrix=0A> > > >> > To: java-user@lucene.apache.org=0A> >=
 > >> > Date: Saturday, August 21, 2010,=0A> 8:05 AM=0A> > > >> > Ahmed,=0A=
> > > >> >=0A> > > >> > That's what that KPE (link in my=0A> previous=0A> >=
 > email, below)=0A> > > >> > will do for you.=A0 It's=0A> > > >> > not ope=
n source at this time, but=0A> that is=0A> > > exactly one of=0A> > > >> > =
the things it does.=A0 I=0A> > > >> > think Mahout collocations stuff=0A> m=
ight work=0A> > > for you, too.=0A> > > >> >=0A> > > >> > Otis=0A> > > >> >=
 ----=0A> > > >> > Sematext :: http://sematext.com/ :: Solr - Lucene -=0A> =
> > Nutch=0A> > > >> > Lucene ecosystem search :: http://search-lucene.com/=
=0A> > > >> >=0A> > > >> >=0A> > > >> >=0A> > > >> > ----- Original Message=
 ----=0A> > > >> > > From: ahmed algohary <algoharyalex@gmail.com>=0A> > > =
>> > > To: java-user@lucene.apache.org=0A> > > >> > > Sent: Sat, August 21,=
 2010=0A> 7:20:03 AM=0A> > > >> > > Subject: Re: Calculate Term=0A> > > Co-=
occurrence Matrix=0A> > > >> > >=0A> > > >> > > Thanks for all your answers=
!=0A> > > >> > >=0A> > > >> > > it seems like I did not make=0A> my=0A> > >=
 question=A0 clear.=0A> > > >> > I have a text corpus and I=0A> > > >> > > =
need to determine the pairs of=0A> words=0A> > > that=A0 occur=0A> > > >> >=
 together in many documents.=0A> > > >> > > I need to do that to be able=0A=
> to measure=0A> > > the=0A> > > >> > semantic proximity between=0A> > > >>=
 > > words. This method is=0A> expanded=0A> > > >> > > here<http://forums.s=
earchenginewatch.com/showthread.php?t=3D48>.=0A> > > >> > > I hope to=A0 fi=
nd some code=0A> that=0A> > > given a text=0A> > > >> > corpus, generate al=
l the words=0A> > > >> > > pairs with=A0 their=0A> probability of=0A> > > o=
ccurring=0A> > > >> > together.=0A> > > >> > >=0A> > > >> > >=0A> > > >> > =
> On Sat, Aug 21, 2010 at=0A> 1:46=A0 AM,=0A> > > Otis=0A> > > >> > Gospodn=
etic <=0A> > > >> > > otis_gospodnetic@yahoo.com>=0A> > > >> > wrote:=0A> >=
 > >> > >=0A> > > >> > > > There is also a=0A> non-Mahout Key=0A> > > Phras=
e Extractor=0A> > > >> > for=A0 Collocations, SIPs, and=0A> > > >> > > > a=
=0A> > > >> > > > few other things:=0A> > > >> > > > http://sematext.com/pr=
oducts/key-phrase-extractor/index.html=0A> > > >> > > >=0A> > > >> > > >=A0=
 One of the demos=0A> that uses=0A> > > news data is at=0A> > > >> > > > ht=
tp://sematext.com/demo/kpe/index.html=0A> > > >> > > >=0A> > > >> > > > Oti=
s=0A> > > >> > > >=A0 ----=0A> > > >> > > > Sematext :: http://sematext.com=
/ :: Solr - Lucene -=0A> > > >> > Nutch=0A> > > >> > > > Lucene ecosystem=
=A0=0A> search :: http://search-lucene.com/=0A> > > >> > > >=0A> > > >> > >=
 >=0A> > > >> > > >=0A> > > >> > > > ----- Original=A0=0A> Message ----=0A>=
 > > >> > > > > From: Grant=0A> Ingersoll <gsingers@apache.org>=0A> > > >> =
> > > > To: java-user@lucene.apache.org=0A> > > >> > > >=A0 > Sent: Fri,=0A=
> August 20,=0A> > > 2010 8:52:17 AM=0A> > > >> > > > > Subject: Re:=0A> Ca=
lculate=0A> > > Term=0A> > > >> > Co-occurrence Matrix=0A> > > >> > > > >=
=0A> > > >> > > > > You might also be=0A> > > interested=A0 in=0A> > > >> >=
 Mahout's collocations package:=0A> > > >> > > > >http://cwiki.apache.org/c=
onfluence/display/MAHOUT/Collocations=0A> > > >> > > >=A0 >=0A> > > >> > > =
> > -Grant=0A> > > >> > > > > On=A0 Aug 19,=0A> 2010, at=0A> > > 11:39 AM,=
=0A> > > >> > ahmed=A0 algohary wrote:=0A> > > >> > > > >=0A> > > >> > > > =
> > Hi all,=0A> > > >> > > > > >=0A> > > >> > > >=A0 > > I need to=0A> know=
 if=0A> > > there is a=0A> > > >> > Lucene plug-in or a Lucene-based=0A> > =
> API=A0 for=0A> > > >> > > > > > calculating the=0A> term=0A> > > co-occur=
rence=0A> > > >> > matrix for a=A0 given text=A0=0A> corpus.=0A> > > >> > >=
 > > >=0A> > > >> > > > > > Thanks!=0A> > > >> > > >=A0 > >=0A> > > >> > > =
> > > --=0A> > > >> > > > > >=A0 Ahmed=0A> > > >> > > >=A0 >=0A> > > >> > >=
 > >=0A> --------------------------=0A> > > >> > > > > Grant=A0=0A> Ingerso=
ll=0A> > > >> > > > > http://www.lucidimagination.com/=0A> > > >> > > > >=
=0A> > > >> > > > > Search the=A0=0A> Lucene=0A> > > ecosystem=0A> > > >> >=
 using=A0 Solr/Lucene:=0A> > > >> > > > >http://www.lucidimagination.com/se=
arch=0A> > > >> > > > >=0A> > > >> > > > >=0A> > > >> > > >=A0 >=0A> > > >>=
 >=0A> > >=0A> ------------------------------------------------------------=
---------=0A> > > >> > > >=A0 > To=A0=0A> unsubscribe,=0A> > > e-mail: java=
-user-unsubscribe@lucene.apache.org=0A> > > >> > > >=A0 > For=A0=0A> additi=
onal=0A> > > commands, e-mail:=0A> > > >> > java-user-help@lucene.apache.or=
g=0A> > > >> > > >=A0 >=0A> > > >> > > > >=0A> > > >> > > >=0A> > > >> > > =
>=0A> > > >> >=0A> > >=0A> ------------------------------------------------=
---------------------=0A> > > >> > > > To=A0 unsubscribe,=0A> e-mail:=0A> >=
 java-user-unsubscribe@lucene.apache.org=0A> > > >> > > >=A0 For additional=
=0A> commands,=0A> > > e-mail: java-user-help@lucene.apache.org=0A> > > >> =
> > >=0A> > > >> > > >=0A> > > >> > >=0A> > > >> >=0A> > > >> >=0A> > >=0A>=
 ---------------------------------------------------------------------=0A> =
> > >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A=
> > > >> > For additional commands, e-mail: java-user-help@lucene.apache.or=
g=0A> > > >> >=0A> > > >> >=0A> > > >>=0A> > > >>=0A> > > >>=0A> > > >>=0A>=
 > > >>=0A> > >=0A> -------------------------------------------------------=
--------------=0A> > > >> To unsubscribe, e-mail: java-user-unsubscribe@luc=
ene.apache.org=0A> > > >> For additional commands, e-mail: java-user-help@l=
ucene.apache.org=0A> > > >>=0A> > > >>=0A> > > >=0A> > >=0A> >=0A> >=0A> >=
=0A> >=0A> >=0A> ----------------------------------------------------------=
-----------=0A> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apac=
he.org=0A> > For additional commands, e-mail: java-user-help@lucene.apache.=
org=0A> >=0A> >=0A> =0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 25 05:16:57 2010
Return-Path: <java-user-return-47125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1007 invoked from network); 25 Aug 2010 05:16:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Aug 2010 05:16:57 -0000
Received: (qmail 10134 invoked by uid 500); 25 Aug 2010 05:16:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9599 invoked by uid 500); 25 Aug 2010 05:16:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9517 invoked by uid 99); 25 Aug 2010 05:16:50 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Aug 2010 05:16:50 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [122.98.10.31] (HELO KECGATE03.infosys.com) (122.98.10.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Aug 2010 05:16:28 +0000
X-TM-IMSS-Message-ID:<202a9aa800194ce4@KECGATE03.infosys.com>
Received: from blrkechub03.ad.infosys.com ([10.66.236.43]) by KECGATE03.infosys.com ([122.98.10.31]) with ESMTP (TREND IMSS SMTP Service 7.0) id 202a9aa800194ce4 ; Wed, 25 Aug 2010 10:37:47 +0530
Received: from PUNITPCAS02.ad.infosys.com (10.76.151.52) by
 blrkechub03.ad.infosys.com (10.66.236.43) with Microsoft SMTP Server (TLS) id
 8.2.176.0; Wed, 25 Aug 2010 10:46:07 +0530
Received: from PUNITPMBX02.ad.infosys.com ([10.76.151.22]) by
 PUNITPCAS02.ad.infosys.com ([10.76.151.52]) with mapi; Wed, 25 Aug 2010
 10:46:06 +0530
From: Shelly_Singh <Shelly_Singh@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 25 Aug 2010 10:46:04 +0530
Subject: RE: Sorting a Lucene index
Thread-Topic: Sorting a Lucene index
Thread-Index: Acs/pUr8ICKQfpr1TxulkhxI34ZI2QEbt3ng
Message-ID: <AA27F54EFDA0CE43B33EBDB7796323740CA2761A19@PUNITPMBX02.ad.infosys.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA26DAB52@PUNITPMBX02.ad.infosys.com>
	<AANLkTikjV11DwFig21TQqGVokB5g2Hy3Cd9QhuM8mxFh@mail.gmail.com>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2760D60@PUNITPMBX02.ad.infosys.com>
 <AANLkTink0QeB+2PpzwFjztZg_1VxwoEjjVrFA9SPwWfj@mail.gmail.com>
In-Reply-To: <AANLkTink0QeB+2PpzwFjztZg_1VxwoEjjVrFA9SPwWfj@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

I have 1 bln documents to sort. So, that would mean ( 8 bln bytes =3D=3D 8G=
B RAM) bytes.=20
All I have is 8 GB on my machine, so I do not think approach would work.

Any other options?

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Thursday, August 19, 2010 7:18 PM
To: java-user@lucene.apache.org
Subject: Re: Sorting a Lucene index

You haven't yet told us how many documents you're talking about here, so
it's
hard to have a good idea of what solutions are. That said, I'd just try
sorting first.
The sorting cache size will be something like (sizeof(int or long)) *
(number of documents).
Measure (remember to measure the response after query warmups, the first
few will be slower because they fill up the cache) THEN fix iff there's a
problem.

And just forget the idea of inserting your documents in the correct order
<G>. You
stated that the documents come in in random order. Document IDs are assigne=
d
internally to Lucene, and monotonically increasing. I sure don't see how yo=
u
can
reconcile those two things...

But again, just try it with sorting on the numeric field and only fix thing=
s
if you have a
problem. Lots of work has been put into making Lucene fast, by very bright
people. See
if they've already solved your problem for you...

Best
Erick.


On Thu, Aug 19, 2010 at 1:51 AM, Shelly_Singh <Shelly_Singh@infosys.com>wro=
te:

> Hi Anshum,
>
> I require sorted results for all my queries and the field on which I need
> sorting is fixed; so this lead to me the idea of storing in sorted order =
to
> avoid sorting cost with every query.
>
> Thanks and Regards,
>
> Shelly Singh
> Center For KNowledge Driven Information Systems, Infosys
> Email: shelly_singh@infosys.com
> Phone: (M) 91 992 369 7200, (VoIP)2022978622
>
> -----Original Message-----
> From: Anshum [mailto:anshumg@gmail.com]
> Sent: Wednesday, August 18, 2010 5:21 PM
> To: java-user@lucene.apache.org
> Subject: Re: Sorting a Lucene index
>
> Hi Shelly,
> The search results so returned are sorted either by relevance, index orde=
r,
> stored field, or custom order.
> As you are saying that you would not be able to maintain the index order,
>  you would have to do the sort at run time.
> Sorting on a stored field is not costly and you may use it comfortably.
> btw,
> are you facing any issues in sort time or is it a presumption?
>
> --
> Anshum Gupta
> http://ai-cafe.blogspot.com
>
>
> On Wed, Aug 18, 2010 at 5:12 PM, Shelly_Singh <Shelly_Singh@infosys.com
> >wrote:
>
> > Hi,
> >
> > I have a Lucene index that contains a numeric field along with certain
> > other fields. The order of incoming documents is random and
> un-predictable.
> > As a result, while creating an index, I end up adding docs in random
> order
> > with respect to the numeric field value.
> >
> > For example, documents may be added in following order:
> > 12,y,d
> > 100,o,p
> > 1,x,y
> > 23,u,i
> > 31,v,m
> > 22,b,m
> > 109,k,l
> >
> > My requirement is that at search time, I want the documents in order of
> the
> > numeric field.
> > One, option is to do a score/sort on the numeric field.
> > But, this may be a costly operation.
> >
> > Hence, I am trying to find if there is some way, such that, my stored
> index
> > is sorted by itself.
> >
> > Please help.
> >
> > Thanks and Regards,
> >
> > Shelly Singh
> > Center For KNowledge Driven Information Systems, Infosys
> > Email: shelly_singh@infosys.com<mailto:shelly_singh@infosys.com>
> > Phone: (M) 91 992 369 7200, (VoIP)2022978622
> >
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 25 08:33:06 2010
Return-Path: <java-user-return-47126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65787 invoked from network); 25 Aug 2010 08:33:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Aug 2010 08:33:06 -0000
Received: (qmail 50031 invoked by uid 500); 25 Aug 2010 08:33:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49343 invoked by uid 500); 25 Aug 2010 08:32:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49265 invoked by uid 99); 25 Aug 2010 08:32:58 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Aug 2010 08:32:58 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Aug 2010 08:32:37 +0000
Received: by qwk3 with SMTP id 3so305622qwk.35
        for <java-user@lucene.apache.org>; Wed, 25 Aug 2010 01:32:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=6RZ4/QZZ7U1hH9gv5+T2UYqCESQPHMVQSPZB2nAfEdA=;
        b=YniEniIhnB3tbsI2GRkcPMM2FMhX2eJ77KstoH8S+OZu88SdKdlSr8IQJ+ngxyYOqS
         4zVLaaMK3rem7U3a+7N/F5sUtRj89MPw8QWKOiIF9TlX4MsPwcPlEO890KW4WF7PBaU4
         t/+aFvpVcRTCHXgHdD3YITEK9+/rP/LgDuVfU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=bC3WRQ8C3PFdcPyppNkedzfsK+QwRLpvcSLdoEugtbwASwxpru7/sHOIBTICqgoyVr
         55WFbqjl7AmEf8VtdhQJ4GuYrw4kcdQExilUyBDpVkJg5F6ag+ZG2lTzq2zmW4dWLr2k
         pbB26ujyzMTnzlTcy6Qm2mzefHpx1JEawwCyU=
Received: by 10.224.19.205 with SMTP id c13mr2238531qab.111.1282725136155;
 Wed, 25 Aug 2010 01:32:16 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.223.132 with HTTP; Wed, 25 Aug 2010 01:31:55 -0700 (PDT)
In-Reply-To: <AA27F54EFDA0CE43B33EBDB7796323740CA2761A19@PUNITPMBX02.ad.infosys.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA26DAB52@PUNITPMBX02.ad.infosys.com>
 <AANLkTikjV11DwFig21TQqGVokB5g2Hy3Cd9QhuM8mxFh@mail.gmail.com>
 <AA27F54EFDA0CE43B33EBDB7796323740CA2760D60@PUNITPMBX02.ad.infosys.com>
 <AANLkTink0QeB+2PpzwFjztZg_1VxwoEjjVrFA9SPwWfj@mail.gmail.com> <AA27F54EFDA0CE43B33EBDB7796323740CA2761A19@PUNITPMBX02.ad.infosys.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 25 Aug 2010 09:31:55 +0100
Message-ID: <AANLkTimgzckcB1zr7VdcU8cuvHNJmA8PL7EtK01+QejS@mail.gmail.com>
Subject: Re: Sorting a Lucene index
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

1 billion i.e. 1,000,000,000?

Either buy more RAM, lots more RAM, or skip lucene sorting and do your
own sorting for the top n hits.  You might also want to look into
sharding/distributing your index.


--
Ian.


On Wed, Aug 25, 2010 at 6:16 AM, Shelly_Singh <Shelly_Singh@infosys.com> wr=
ote:
> I have 1 bln documents to sort. So, that would mean ( 8 bln bytes =3D=3D =
8GB RAM) bytes.
> All I have is 8 GB on my machine, so I do not think approach would work.
>
> Any other options?
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Thursday, August 19, 2010 7:18 PM
> To: java-user@lucene.apache.org
> Subject: Re: Sorting a Lucene index
>
> You haven't yet told us how many documents you're talking about here, so
> it's
> hard to have a good idea of what solutions are. That said, I'd just try
> sorting first.
> The sorting cache size will be something like (sizeof(int or long)) *
> (number of documents).
> Measure (remember to measure the response after query warmups, the first
> few will be slower because they fill up the cache) THEN fix iff there's a
> problem.
>
> And just forget the idea of inserting your documents in the correct order
> <G>. You
> stated that the documents come in in random order. Document IDs are assig=
ned
> internally to Lucene, and monotonically increasing. I sure don't see how =
you
> can
> reconcile those two things...
>
> But again, just try it with sorting on the numeric field and only fix thi=
ngs
> if you have a
> problem. Lots of work has been put into making Lucene fast, by very brigh=
t
> people. See
> if they've already solved your problem for you...
>
> Best
> Erick.
>
>
> On Thu, Aug 19, 2010 at 1:51 AM, Shelly_Singh <Shelly_Singh@infosys.com>w=
rote:
>
>> Hi Anshum,
>>
>> I require sorted results for all my queries and the field on which I nee=
d
>> sorting is fixed; so this lead to me the idea of storing in sorted order=
 to
>> avoid sorting cost with every query.
>>
>> Thanks and Regards,
>>
>> Shelly Singh
>> Center For KNowledge Driven Information Systems, Infosys
>> Email: shelly_singh@infosys.com
>> Phone: (M) 91 992 369 7200, (VoIP)2022978622
>>
>> -----Original Message-----
>> From: Anshum [mailto:anshumg@gmail.com]
>> Sent: Wednesday, August 18, 2010 5:21 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: Sorting a Lucene index
>>
>> Hi Shelly,
>> The search results so returned are sorted either by relevance, index ord=
er,
>> stored field, or custom order.
>> As you are saying that you would not be able to maintain the index order=
,
>> =A0you would have to do the sort at run time.
>> Sorting on a stored field is not costly and you may use it comfortably.
>> btw,
>> are you facing any issues in sort time or is it a presumption?
>>
>> --
>> Anshum Gupta
>> http://ai-cafe.blogspot.com
>>
>>
>> On Wed, Aug 18, 2010 at 5:12 PM, Shelly_Singh <Shelly_Singh@infosys.com
>> >wrote:
>>
>> > Hi,
>> >
>> > I have a Lucene index that contains a numeric field along with certain
>> > other fields. The order of incoming documents is random and
>> un-predictable.
>> > As a result, while creating an index, I end up adding docs in random
>> order
>> > with respect to the numeric field value.
>> >
>> > For example, documents may be added in following order:
>> > 12,y,d
>> > 100,o,p
>> > 1,x,y
>> > 23,u,i
>> > 31,v,m
>> > 22,b,m
>> > 109,k,l
>> >
>> > My requirement is that at search time, I want the documents in order o=
f
>> the
>> > numeric field.
>> > One, option is to do a score/sort on the numeric field.
>> > But, this may be a costly operation.
>> >
>> > Hence, I am trying to find if there is some way, such that, my stored
>> index
>> > is sorted by itself.
>> >
>> > Please help.
>> >
>> > Thanks and Regards,
>> >
>> > Shelly Singh
>> > Center For KNowledge Driven Information Systems, Infosys
>> > Email: shelly_singh@infosys.com<mailto:shelly_singh@infosys.com>
>> > Phone: (M) 91 992 369 7200, (VoIP)2022978622
>> >
>> >
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 25 08:46:59 2010
Return-Path: <java-user-return-47127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70911 invoked from network); 25 Aug 2010 08:46:58 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Aug 2010 08:46:58 -0000
Received: (qmail 68077 invoked by uid 500); 25 Aug 2010 08:46:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67737 invoked by uid 500); 25 Aug 2010 08:46:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67728 invoked by uid 99); 25 Aug 2010 08:46:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Aug 2010 08:46:52 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Aug 2010 08:46:46 +0000
Received: from [172.18.226.237] (172.18.226.237) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.436.0; Wed, 25 Aug 2010 10:46:24 +0200
Subject: RE: Sorting a Lucene index
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <AA27F54EFDA0CE43B33EBDB7796323740CA2761A19@PUNITPMBX02.ad.infosys.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA26DAB52@PUNITPMBX02.ad.infosys.com>
	 <AANLkTikjV11DwFig21TQqGVokB5g2Hy3Cd9QhuM8mxFh@mail.gmail.com>
	 <AA27F54EFDA0CE43B33EBDB7796323740CA2760D60@PUNITPMBX02.ad.infosys.com>
	 <AANLkTink0QeB+2PpzwFjztZg_1VxwoEjjVrFA9SPwWfj@mail.gmail.com>
	 <AA27F54EFDA0CE43B33EBDB7796323740CA2761A19@PUNITPMBX02.ad.infosys.com>
Content-Type: text/plain; charset="UTF-8"
Organization: State and University Library, Denmark
Date: Wed, 25 Aug 2010 10:46:19 +0200
Message-ID: <1282725979.2545.1004.camel@te-prime>
MIME-Version: 1.0
X-Mailer: Evolution 2.28.3 
Content-Transfer-Encoding: 7bit

On Wed, 2010-08-25 at 07:16 +0200, Shelly_Singh wrote:
> I have 1 bln documents to sort. So, that would mean ( 8 bln bytes == 8GB RAM) bytes. 
> All I have is 8 GB on my machine, so I do not think approach would work.

This implies that your numeric value can be more than 2 billion. Are you
sure that is true?


First suggestion (simple): Ensure that your sort field is stored and
sort by requesting the value for each document in the search result.
This works okay when the number of hits is small.

Second suggestion (complex): Make an int-array with the sort-order of
your documents. This takes 4GB and needs to be calculated fully before
use, which will take time. After that sorted searches will be very fast
and handle a large number of hits well.

You can let your indexer maintain the sort-array so that the existing
order ban be re-used when adding documents. Whether modifying an
existing order-array is cheaper than a full re-sort or not depends on
your batch size.

Regards,
Toke Eskildsen


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 25 13:21:13 2010
Return-Path: <java-user-return-47128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91155 invoked from network); 25 Aug 2010 13:21:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Aug 2010 13:21:12 -0000
Received: (qmail 9674 invoked by uid 500); 25 Aug 2010 13:21:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8741 invoked by uid 500); 25 Aug 2010 13:21:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8663 invoked by uid 99); 25 Aug 2010 13:21:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Aug 2010 13:21:04 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS,T_FILL_THIS_FORM_SHORT
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.153.217.231] (HELO ns3.sozvers.at) (194.153.217.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Aug 2010 13:20:56 +0000
Received: from mailgw1.sozvers.at (gateway-ext.sozvers.at [194.153.217.230])
	by ns3.sozvers.at (8.13.8/8.13.8) with ESMTP id o7PDKZpB023886
	for <java-user@lucene.apache.org>; Wed, 25 Aug 2010 15:20:35 +0200
Received: from SVSMSG002.svservices.local (viruswall-01.sozvers.at [172.16.10.38])
	by mailgw1.sozvers.at (8.13.8/8.13.8) with ESMTP id o7PDKYQq017481
	for <java-user@lucene.apache.org>; Wed, 25 Aug 2010 15:20:35 +0200
Received: from SVSMSG007.svservices.local ([fe80::d587:863a:fbe4:ae95]) by
 SVSMSG002.svservices.local ([fe80::c97a:f339:55bf:6ede%10]) with mapi; Wed,
 25 Aug 2010 15:20:34 +0200
From: Schreiner Wolfgang <Wolfgang.Schreiner@itsv.at>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 25 Aug 2010 15:20:59 +0200
Subject: Lucene applicability
Thread-Topic: Lucene applicability
Thread-Index: ActEWFvCFTGM4l3kRX+gzRI1Zpv/UQ==
Message-ID: <8721F0F9B0109947A0DD64B7E44D83C11C87B34DBF@SVSMSG007.svservices.local>
Accept-Language: en-US, de-AT
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US, de-AT
Content-Type: multipart/alternative;
	boundary="_000_8721F0F9B0109947A0DD64B7E44D83C11C87B34DBFSVSMSG007svse_"
MIME-Version: 1.0

--_000_8721F0F9B0109947A0DD64B7E44D83C11C87B34DBFSVSMSG007svse_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi all,

We are currently evaluating potential search frameworks (such as Hibernate =
Search) which might be suitable to use in our project (using Spring, JPA wi=
th Hibernate) ...
I am sending this E-Mail in hope you can advise me on a few issues that wou=
ld help us in our decision making process.


1.)    Is Lucene suitable for full text database searches? I read Lucene wa=
s designed to index and search documents but how does it behave querying re=
lational data sets in general?

2.)    Can we make assumptions on query performance considering combined se=
arches, range queries or structured data and wildcard searches? If we consi=
der a data structure consisting of say 3 tables and each table contains a f=
ew million entries (e.g. first name, last name and address fields) and we s=
earch for common values (such as 'John', 'Smith' and 'New York') where

a.       each value for itself and each combination would result in million=
s of hits

b.      a person can have multiple first names and we want to make sure to =
receive any combination of the last name with any first name

c.       we search for a last name and a range of birth dates

3.)    Transaction safety: How does Lucene handle indexes? If we update dat=
a model and index, what happens to the index if anything goes wrong as soon=
 as the data model has been persisted?

I hope I made the issues clear to you, just some general thoughts about how=
 Lucene would behave in a real world application scenario ... Any support o=
r pointers to helpful documents or Web links are highly appreciated!
Cheers for now,

w


--_000_8721F0F9B0109947A0DD64B7E44D83C11C87B34DBFSVSMSG007svse_--

From java-user-return-47129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 25 17:28:25 2010
Return-Path: <java-user-return-47129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93639 invoked from network); 25 Aug 2010 17:28:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Aug 2010 17:28:24 -0000
Received: (qmail 61549 invoked by uid 500); 25 Aug 2010 17:28:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61507 invoked by uid 500); 25 Aug 2010 17:28:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61499 invoked by uid 99); 25 Aug 2010 17:28:21 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Aug 2010 17:28:21 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_FILL_THIS_FORM_SHORT,T_LOTS_OF_MONEY,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of chris.lu@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Aug 2010 17:28:00 +0000
Received: by wwc33 with SMTP id 33so921941wwc.5
        for <java-user@lucene.apache.org>; Wed, 25 Aug 2010 10:27:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=0Yzf08z5eqSLJzf37xYkDR6YHHR3YYCb5iJe5zVG8Lc=;
        b=lPGL93VKNfxHHJ/SYlhk8IXLxqh7ijoINqjLSESOXQXDF3FCG+8sHqJA7uZMQZCkZS
         mmznquQ/KQEQ6iQ85Z/YpRiCSkjgivRakz4lR4YmBwqLuiSbkJIg/LNkobGdTsCNWuCL
         Kw06SE7aiaC2p0dIyGNFtxXAGTruYVmgADWq8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=PQw+eillob6BsobpqbLZmJgrS6M2ctF5KCcTLC0v722oHe8B8PvN/Xj7WrxQjtghWg
         SOregeIQq2b3kmspeuXanHXWIHedOq4zUhplkbF0TfcLC6+Vgx3fpHYk7FvCPAbYTSYd
         zAZEKsgy0gkPU4gIvtcmuhnKTxTz3GODfnYt4=
MIME-Version: 1.0
Received: by 10.227.136.129 with SMTP id r1mr7661739wbt.114.1282757259971;
 Wed, 25 Aug 2010 10:27:39 -0700 (PDT)
Received: by 10.216.167.203 with HTTP; Wed, 25 Aug 2010 10:27:39 -0700 (PDT)
In-Reply-To: <8721F0F9B0109947A0DD64B7E44D83C11C87B34DBF@SVSMSG007.svservices.local>
References: <8721F0F9B0109947A0DD64B7E44D83C11C87B34DBF@SVSMSG007.svservices.local>
Date: Wed, 25 Aug 2010 10:27:39 -0700
Message-ID: <AANLkTikuahUsgr07BF+DnXhp6_QrHMUYFXB33jSrCb2M@mail.gmail.com>
Subject: Re: Lucene applicability
From: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f7965ad04bf9048ea9329d
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f7965ad04bf9048ea9329d
Content-Type: text/plain; charset=ISO-8859-1

I see you are coming from the database world. To get a better understanding
of Lucene, I would suggest you use the free version of DBSight, which let
you create Lucene index with SQL after a few clicks.

Basically Lucene is more like a list of denormalized documents. So if you
change your database schema, your lucene index would likely need to be
changed and re-built also.

The combined full text search and range queries are easy in Lucene index.
You don't need to worry about it.

It's a great question about 3). If anything goes wrong, you would need to
rebuild the index. So you would need a mechanism to get prepared and rebuild
the index when you need to.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

On Wed, Aug 25, 2010 at 6:20 AM, Schreiner Wolfgang <
Wolfgang.Schreiner@itsv.at> wrote:

> Hi all,
>
> We are currently evaluating potential search frameworks (such as Hibernate
> Search) which might be suitable to use in our project (using Spring, JPA
> with Hibernate) ...
> I am sending this E-Mail in hope you can advise me on a few issues that
> would help us in our decision making process.
>
>
> 1.)    Is Lucene suitable for full text database searches? I read Lucene
> was designed to index and search documents but how does it behave querying
> relational data sets in general?
>
> 2.)    Can we make assumptions on query performance considering combined
> searches, range queries or structured data and wildcard searches? If we
> consider a data structure consisting of say 3 tables and each table contains
> a few million entries (e.g. first name, last name and address fields) and we
> search for common values (such as 'John', 'Smith' and 'New York') where
>
> a.       each value for itself and each combination would result in
> millions of hits
>
> b.      a person can have multiple first names and we want to make sure to
> receive any combination of the last name with any first name
>
> c.       we search for a last name and a range of birth dates
>
> 3.)    Transaction safety: How does Lucene handle indexes? If we update
> data model and index, what happens to the index if anything goes wrong as
> soon as the data model has been persisted?
>
> I hope I made the issues clear to you, just some general thoughts about how
> Lucene would behave in a real world application scenario ... Any support or
> pointers to helpful documents or Web links are highly appreciated!
> Cheers for now,
>
> w
>
>

--001485f7965ad04bf9048ea9329d--

From java-user-return-47130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 25 17:34:29 2010
Return-Path: <java-user-return-47130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95100 invoked from network); 25 Aug 2010 17:34:29 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Aug 2010 17:34:29 -0000
Received: (qmail 71045 invoked by uid 500); 25 Aug 2010 17:34:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71000 invoked by uid 500); 25 Aug 2010 17:34:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70992 invoked by uid 99); 25 Aug 2010 17:34:26 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Aug 2010 17:34:26 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_FILL_THIS_FORM_SHORT,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Aug 2010 17:34:03 +0000
Received: by qyk2 with SMTP id 2so951533qyk.14
        for <java-user@lucene.apache.org>; Wed, 25 Aug 2010 10:33:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=4GMzeLvo28uLks+psbMkwf16WFLAN592fRYh0HPdfPs=;
        b=WoFgksDh2hltcf/5DEumP4u9bnIRuUhmcTOVAwR9dWNqT1jsE/T4b+4x0bn/TyHwUW
         7oJiRZC4dGo7eagCkaeH4FJgxJI0Dh/gur1KVekKI6EguHHQvDZKCjvVOPdB0SHKaEad
         mslhfUVYHxU3hQ4tiwsmFur+Wq24vxuzVcQuQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=DNHgu+CBsTrszM7+OyfidPuUUuYFp3l3v+r6Bo2Akf+o1/ZkdcJkSiuor72aKiCSUk
         YQEySz5BMfiIIfOrQyi3/GVHhGXCtwRyJruW6p8lifZuNnG/H8ksi3Bwj4PKkgWbPm15
         PCezmqIiPSR9jJD3zoeEJA+F2JoI7uGwYT1g4=
MIME-Version: 1.0
Received: by 10.224.28.77 with SMTP id l13mr5834856qac.222.1282757622453; Wed,
 25 Aug 2010 10:33:42 -0700 (PDT)
Received: by 10.229.186.83 with HTTP; Wed, 25 Aug 2010 10:33:42 -0700 (PDT)
In-Reply-To: <8721F0F9B0109947A0DD64B7E44D83C11C87B34DBF@SVSMSG007.svservices.local>
References: <8721F0F9B0109947A0DD64B7E44D83C11C87B34DBF@SVSMSG007.svservices.local>
Date: Wed, 25 Aug 2010 10:33:42 -0700
Message-ID: <AANLkTimDXMug=mNsjK2Vo4tNcj+m0oJmgrwf0rxxe9Hg@mail.gmail.com>
Subject: Re: Lucene applicability
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175caa246b5623048ea948d4
X-Virus-Checked: Checked by ClamAV on apache.org

--0015175caa246b5623048ea948d4
Content-Type: text/plain; charset=ISO-8859-1

The SOLR wiki has lots of good information, start there:
http://wiki.apache.org/solr/

Otherwise, see below...

On Wed, Aug 25, 2010 at 6:20 AM, Schreiner Wolfgang <
Wolfgang.Schreiner@itsv.at> wrote:

> Hi all,
>
> We are currently evaluating potential search frameworks (such as Hibernate
> Search) which might be suitable to use in our project (using Spring, JPA
> with Hibernate) ...
> I am sending this E-Mail in hope you can advise me on a few issues that
> would help us in our decision making process.
>
>
> 1.)    Is Lucene suitable for full text database searches? I read Lucene
> was designed to index and search documents but how does it behave querying
> relational data sets in general?
>

Let's start be talking about the phrase "full text database searches". One
thing virtually all db-centric
people trip over is trying to use SOLR as if it were a database. You just
can't think about tables. The
first time you think about using SOLR to do something join-like, stop and
take a deep breath and
think about documents instead. The general approach is to flatten your data
so that each "document"
contains all the relevant info. Yes, this leads to de-normalization. Yes,
denormalized data makes a
good DBA cringe. But that's the difference between searching and using a
RDBMS.

"Document" is somewhat misleading. A document in SOLR terms is just a
collection of fields. And, BTW,
there's no requirement that each document have the same fields (very unlike
a DB).


>
> 2.)    Can we make assumptions on query performance considering combined
> searches, range queries or structured data and wildcard searches? If we
> consider a data structure consisting of say 3 tables and each table contains
> a few million entries (e.g. first name, last name and address fields) and we
> search for common values (such as 'John', 'Smith' and 'New York') where
>
> a.       each value for itself and each combination would result in
> millions of hits
>

Sure, but what those assumptions are is totally dependent on how you've set
things up. SOLR has been successfully
used on several billion document indexes. There are tools for making all
that work (i.e. replication, sharding, etc)
built into SOLR. So I suspect you can make things work. Several million
documents is not that large a data set.

As always, there are tradeoffs between speed and complexity. But from what
you've described
I see no show stoppers.


>
> b.      a person can have multiple first names and we want to make sure to
> receive any combination of the last name with any first name
>
>
This just sounds like an OR. But the queries can be pretty complex queries.
Some examples of what you expect would help.
See multi-valued fields. So, a "document" can have multiple "firstname"
entries. Again, not like a DB (your reflexes will trip you
up on this point <G>).


> c.       we search for a last name and a range of birth dates
>
>
Sure, range queries work just fine. Note that dates can trip you up, look at
triedate if you experiment.


> 3.)    Transaction safety: How does Lucene handle indexes? If we update
> data model and index, what happens to the index if anything goes wrong as
> soon as the data model has been persisted?
>

A lot of work has been done to make SOLR quite robust if "anything goes
wrong". That said, how are you backing up your data?
That is, what is the source of the data you're going to index? If you're
relying on your SOLR index to be your backup, you simply must back it up
somewhere "often enough" to get by if your building burns down. I'd also
think about storing your original input...

This is no different than a DB. you have to guard against the disk crashing,
someone walking by with a powerful magnet,  earthquake, flood, fires
<G>.....

Do note that if you modify your index schema, no existing documents reflect
the new schema, you have to reindex them.


>
> I hope I made the issues clear to you, just some general thoughts about how
> Lucene would behave in a real world application scenario ... Any support or
> pointers to helpful documents or Web links are highly appreciated!
> Cheers for now,
>
> w
>
>

--0015175caa246b5623048ea948d4--

From java-user-return-47131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 25 20:22:53 2010
Return-Path: <java-user-return-47131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77192 invoked from network); 25 Aug 2010 20:22:52 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Aug 2010 20:22:52 -0000
Received: (qmail 23683 invoked by uid 500); 25 Aug 2010 20:22:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23616 invoked by uid 500); 25 Aug 2010 20:22:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23608 invoked by uid 99); 25 Aug 2010 20:22:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Aug 2010 20:22:50 +0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.25 as permitted sender)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Aug 2010 20:22:42 +0000
Received: from compute3.internal (compute3.internal [10.202.2.43])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 8DC1D557
	for <java-user@lucene.apache.org>; Wed, 25 Aug 2010 16:22:21 -0400 (EDT)
Received: from frontend2.messagingengine.com ([10.202.2.161])
  by compute3.internal (MEProxy); Wed, 25 Aug 2010 16:22:21 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:subject:content-type:content-transfer-encoding; s=smtpout; bh=hICs+ZAwNJ7HqZZK8WOZWstcWlc=; b=plqBCzW7aBIY9HNBErgh/hFiHRyjeN4PxgpfmFjh5TNCe1dJw6akAoEo3KoLqrZ4u3FKRjZWciZhvXkEs4tZFP82wrfYqmx5k4TWr7r5mhi02wEg7VFMIJN+prG3SvbvqhbhgmcTg3OuNwZpg1FuRU4mebAaxr5ZCieeKtFXOec=
X-Sasl-enc: To15o9h3n2SAv1gg8hmtGnxgYR1KyWtnjP+D20Sr8gpQ 1282767741
Received: from [192.168.1.66] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id 2541F5E0BDA
	for <java-user@lucene.apache.org>; Wed, 25 Aug 2010 16:22:21 -0400 (EDT)
Message-ID: <4C757C48.5010909@fastmail.fm>
Date: Wed, 25 Aug 2010 21:25:44 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Thunderbird 2.0.0.24 (Macintosh/20100228)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Blocking on IndexSearcher search
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

My multithreaded code was always creating a new IndexSearcher for every 
search, but I changed over to the recommendation of creating just one 
index  searcher and keeping it between searches. Now I find if I have 
multiple threads trying to search they
block on the search method(), only one can search at any time, is this 
expected behaviour ?


Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 25 20:41:43 2010
Return-Path: <java-user-return-47132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85646 invoked from network); 25 Aug 2010 20:41:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Aug 2010 20:41:43 -0000
Received: (qmail 54118 invoked by uid 500); 25 Aug 2010 20:41:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54041 invoked by uid 500); 25 Aug 2010 20:41:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54033 invoked by uid 99); 25 Aug 2010 20:41:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Aug 2010 20:41:40 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Aug 2010 20:41:33 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 3512445F53B;
	Wed, 25 Aug 2010 22:41:13 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 4k64v2Zql+ib; Wed, 25 Aug 2010 22:41:01 +0200 (CEST)
Received: from VEGA (dslb-088-065-077-242.pools.arcor-ip.net [88.65.77.242])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id CE71645F498;
	Wed, 25 Aug 2010 22:41:00 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>,
	<paul_t100@fastmail.fm>
References: <4C757C48.5010909@fastmail.fm>
In-Reply-To: <4C757C48.5010909@fastmail.fm>
Subject: RE: Blocking on IndexSearcher search
Date: Wed, 25 Aug 2010 22:42:29 +0200
Message-ID: <00c901cb4496$09164a30$1b42de90$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQJw3bIXxdpKu+hq+zCLZu1rZxjlQ5GncArQ
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Can you show us where it exactly blocks (e.g. use Ctrl-Break on windows to
print a thread dump)? IndexSearchers methods are not synchronized and
concurrent access is easy possible, all concurrent access is managed by the
underlying IndexReader. Maybe you synchronize somewhere in your code?

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Paul Taylor [mailto:paul_t100@fastmail.fm]
> Sent: Wednesday, August 25, 2010 10:26 PM
> To: java-user@lucene.apache.org
> Subject: Blocking on IndexSearcher search
> 
> Hi
> 
> My multithreaded code was always creating a new IndexSearcher for every
> search, but I changed over to the recommendation of creating just one
index
> searcher and keeping it between searches. Now I find if I have multiple
threads
> trying to search they block on the search method(), only one can search at
any
> time, is this expected behaviour ?
> 
> 
> Paul
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 25 20:52:23 2010
Return-Path: <java-user-return-47133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87802 invoked from network); 25 Aug 2010 20:52:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Aug 2010 20:52:23 -0000
Received: (qmail 71494 invoked by uid 500); 25 Aug 2010 20:52:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71452 invoked by uid 500); 25 Aug 2010 20:52:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71442 invoked by uid 99); 25 Aug 2010 20:52:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Aug 2010 20:52:20 +0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.25 as permitted sender)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Aug 2010 20:52:15 +0000
Received: from compute3.internal (compute3.internal [10.202.2.43])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 8F00255E;
	Wed, 25 Aug 2010 16:51:54 -0400 (EDT)
Received: from frontend2.messagingengine.com ([10.202.2.161])
  by compute3.internal (MEProxy); Wed, 25 Aug 2010 16:51:54 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:cc:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=s4TXJrF/y0FAUq85r5ebLEJNFg4=; b=Cn2DxJoURWmAWYnRW97oyd2bMSHN/sbQixRvuJ07SP4norjcBlSIotxzvrJ21IKbBVMI426OO0np+EnsJThNEVNWSCw1LbmnnYyy/G3MVheQKyTEsBk5Y/Jj5KLvE/BlDauwwU00rj1iSlOI5iVgjfj4KX0CNdMOetZTACA49LM=
X-Sasl-enc: n1kTsunAAhnTqccZmdRm6+NnC3zy9teEbX035BAmPZrK 1282769514
Received: from [192.168.1.66] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id CFE165E0223;
	Wed, 25 Aug 2010 16:51:53 -0400 (EDT)
Message-ID: <4C758335.7010107@fastmail.fm>
Date: Wed, 25 Aug 2010 21:55:17 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Thunderbird 2.0.0.24 (Macintosh/20100228)
MIME-Version: 1.0
To: Uwe Schindler <uwe@thetaphi.de>
CC: java-user@lucene.apache.org
Subject: Re: Blocking on IndexSearcher search
References: <4C757C48.5010909@fastmail.fm> <00c901cb4496$09164a30$1b42de90$@thetaphi.de>
In-Reply-To: <00c901cb4496$09164a30$1b42de90$@thetaphi.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Uwe Schindler wrote:
> Can you show us where it exactly blocks (e.g. use Ctrl-Break on windows to
> print a thread dump)? IndexSearchers methods are not synchronized and
> concurrent access is easy possible, all concurrent access is managed by the
> underlying IndexReader. Maybe you synchronize somewhere in your code?
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>   
I'm picking this up using the Yourkit Profiler

In the thread view it says:
blocked on org.apache.lucene.search.Searcher.search(Query,Filter,int)

On the Monitor Profiling page it says:
Blocked Thread: was blocked on monitor of class 
orga.apache.lucene.store.SimpleFSDirectory$SimpleFSindexInput$Descriptor


is the file system the problem ? I'm creating the index using

Directory directory = FSDirectory.open(new File(INDEX_NAME));
IndexWriter writer  = new IndexWriter(directory,analyzer,true, 
IndexWriter.MaxFieldLength.UNLIMITED);

and my Index Searcher is created as

IndexSearcher is = new IndexSearcher(directory,true);

Paul


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 25 21:24:44 2010
Return-Path: <java-user-return-47134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3028 invoked from network); 25 Aug 2010 21:24:44 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Aug 2010 21:24:44 -0000
Received: (qmail 10789 invoked by uid 500); 25 Aug 2010 21:24:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10734 invoked by uid 500); 25 Aug 2010 21:24:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10726 invoked by uid 99); 25 Aug 2010 21:24:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Aug 2010 21:24:41 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.25 as permitted sender)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Aug 2010 21:24:33 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 41CCD3EF;
	Wed, 25 Aug 2010 17:24:13 -0400 (EDT)
Received: from frontend2.messagingengine.com ([10.202.2.161])
  by compute1.internal (MEProxy); Wed, 25 Aug 2010 17:24:13 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=nBWgiEbYFCKg9TjoJuPKyzYlVlM=; b=CCYAk/56itR3h4mVNiGpRziE2rOccj9nWB7LBJK/aZdlmCEK7oEo5zXlLC4LsEINiOjC9WdqdVkkWx6epPTIoooHK/wKnylaETHT+30UkoX/V2Yb5cG8TJZVmYpjDCOJs0swqTGEo9aHLi/RNqfCrbQ6yRUdttq3i0lv6VKxpz8=
X-Sasl-enc: HF81l8NMJK3MBBe3fcWMtztsw0fOwrNrcxp1gtpaYi76 1282771452
Received: from [192.168.1.66] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPA id 817F65E130F;
	Wed, 25 Aug 2010 17:24:12 -0400 (EDT)
Message-ID: <4C758AC7.1030006@fastmail.fm>
Date: Wed, 25 Aug 2010 22:27:35 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: java-user@lucene.apache.org
User-Agent: Thunderbird 2.0.0.24 (Macintosh/20100228)
MIME-Version: 1.0
To: Uwe Schindler <uwe@thetaphi.de>, java-user@lucene.apache.org
Subject: Re: Blocking on IndexSearcher search
References: <4C757C48.5010909@fastmail.fm> <00c901cb4496$09164a30$1b42de90$@thetaphi.de> <4C758335.7010107@fastmail.fm> <00cb01cb449a$0859db30$190d9190$@thetaphi.de>
In-Reply-To: <00cb01cb449a$0859db30$190d9190$@thetaphi.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Uwe Schindler wrote:
> That lock contention is fine there as this is the central point where all IO
> is done. This does not mean that only one query is running in parallel, the
> queries are still running in parallel. But there is one place where all IO
> is waiting for one file descriptor. This is not different with multiple
> IndexSearchers. YourKit simply shows this place as it has most contention.
>
> You are using Windows? On Linux it should use NIO automatically
> (FSDir.open() uses platform specific defaults). You can also improve speed
> and play with e.g. MMapDirectory on 64 bit platforms. Or try out how NIO
> works on your platform.
>   
Im using Windows and I'll try NIO, good idea, my app is already memory 
hungry in other areas so I guess MMapped is a no go, doe sit use heap or 
perm memory ?

I understand the lock on I/O point but what was concerning me is in the 
thread view the threads were blocking for some time, not just a couple 
of milliseconds. I actually refactored my code to make it multithreaded 
specifically tfor his bit of code becaue alot of searches was necessary, 
and the elapsed time is faster than using a single thread but not as 
fast as Id hoped.

Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 25 21:41:47 2010
Return-Path: <java-user-return-47135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8937 invoked from network); 25 Aug 2010 21:41:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 25 Aug 2010 21:41:47 -0000
Received: (qmail 27566 invoked by uid 500); 25 Aug 2010 21:41:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27504 invoked by uid 500); 25 Aug 2010 21:41:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27496 invoked by uid 99); 25 Aug 2010 21:41:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Aug 2010 21:41:44 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Aug 2010 21:41:36 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 7FB4545E019
	for <java-user@lucene.apache.org>; Wed, 25 Aug 2010 23:41:15 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id LOqAm75uPrt4 for <java-user@lucene.apache.org>;
	Wed, 25 Aug 2010 23:41:12 +0200 (CEST)
Received: from VEGA (dslb-088-065-077-242.pools.arcor-ip.net [88.65.77.242])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 2E49245E018
	for <java-user@lucene.apache.org>; Wed, 25 Aug 2010 23:41:12 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4C757C48.5010909@fastmail.fm> <00c901cb4496$09164a30$1b42de90$@thetaphi.de> <4C758335.7010107@fastmail.fm> <00cb01cb449a$0859db30$190d9190$@thetaphi.de> <4C758AC7.1030006@fastmail.fm>
In-Reply-To: <4C758AC7.1030006@fastmail.fm>
Subject: RE: Blocking on IndexSearcher search
Date: Wed, 25 Aug 2010 23:42:40 +0200
Message-ID: <000901cb449e$7194cd90$54be68b0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
thread-index: AQJw3bIXxdpKu+hq+zCLZu1rZxjlQwLNQ3t/AmI1r7UDLbQoKQJ37MCCkVDYBcA=
Content-language: de

> Im using Windows and I'll try NIO, good idea, my app is already memory
> hungry in other areas so I guess MMapped is a no go, doe sit use heap or
perm
> memory ?

It uses address space for mapping the files into virtual memory (like a swap
file) - this is why it only works well for 64bit VMs. The used physical
memory depends on your OS cache configuration. Java Heap is not used for
that (in contrast to copying a  file to a RAMDirectory).

Uwe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 26 03:19:40 2010
Return-Path: <java-user-return-47136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34224 invoked from network); 26 Aug 2010 03:19:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Aug 2010 03:19:40 -0000
Received: (qmail 89161 invoked by uid 500); 26 Aug 2010 03:19:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88550 invoked by uid 500); 26 Aug 2010 03:19:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88536 invoked by uid 99); 26 Aug 2010 03:19:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Aug 2010 03:19:32 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of goksron@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Aug 2010 03:19:27 +0000
Received: by pvg3 with SMTP id 3so689150pvg.35
        for <java-user@lucene.apache.org>; Wed, 25 Aug 2010 20:19:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=FcwhvQI0thu6efYP1InzHktMG7f64N2i6Yyjkdbj1ag=;
        b=sfbN7CSiz5o91koVAE/t0ccYvT4jsbZDgi2mPK9zU8plvDzXj/JCUU/2OUyEjPnL4K
         R16+3tES8XR7XgVdfND3BAjbMVx66yzRXqvZF62Jeh+JUtPHjX2iC9yDe2RzhSU/qa0v
         3t//Gj+wJSqj716sGTVgAj8lqXsUw/yUUlQ6g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=i79AB0cBYUgq5Eth/1Uy19w0m1XKaGy07pduC85j6+K0qSeHwbV4o9rfYaJ6Up66Xc
         p94wMamM96T/QbkAe61q2NCuOmjP6Jp6PbF6FsIeDYlRApkLhDM3cP3OqGYUxgP4c8Vn
         InzLWNVOvhLX5KCuJswl1iQzFFRAawY0lKjQc=
MIME-Version: 1.0
Received: by 10.142.127.9 with SMTP id z9mr7769036wfc.193.1282792746838; Wed,
 25 Aug 2010 20:19:06 -0700 (PDT)
Received: by 10.142.51.21 with HTTP; Wed, 25 Aug 2010 20:19:06 -0700 (PDT)
In-Reply-To: <1282725979.2545.1004.camel@te-prime>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA26DAB52@PUNITPMBX02.ad.infosys.com>
	<AANLkTikjV11DwFig21TQqGVokB5g2Hy3Cd9QhuM8mxFh@mail.gmail.com>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2760D60@PUNITPMBX02.ad.infosys.com>
	<AANLkTink0QeB+2PpzwFjztZg_1VxwoEjjVrFA9SPwWfj@mail.gmail.com>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2761A19@PUNITPMBX02.ad.infosys.com>
	<1282725979.2545.1004.camel@te-prime>
Date: Wed, 25 Aug 2010 20:19:06 -0700
Message-ID: <AANLkTinYxhHMJ__2VQTaOFDfL8WaV3MAXHtx=_DOKFDQ@mail.gmail.com>
Subject: Re: Sorting a Lucene index
From: Lance Norskog <goksron@gmail.com>
To: java-user@lucene.apache.org, te@statsbiblioteket.dk
Content-Type: text/plain; charset=UTF-8

It is also possible to sort by function. This allows you to avoid
storing an array of 1 int for all documents. It is slower than the raw
Lucene sort.

On Wed, Aug 25, 2010 at 1:46 AM, Toke Eskildsen <te@statsbiblioteket.dk> wrote:
> On Wed, 2010-08-25 at 07:16 +0200, Shelly_Singh wrote:
>> I have 1 bln documents to sort. So, that would mean ( 8 bln bytes == 8GB RAM) bytes.
>> All I have is 8 GB on my machine, so I do not think approach would work.
>
> This implies that your numeric value can be more than 2 billion. Are you
> sure that is true?
>
>
> First suggestion (simple): Ensure that your sort field is stored and
> sort by requesting the value for each document in the search result.
> This works okay when the number of hits is small.
>
> Second suggestion (complex): Make an int-array with the sort-order of
> your documents. This takes 4GB and needs to be calculated fully before
> use, which will take time. After that sorted searches will be very fast
> and handle a large number of hits well.
>
> You can let your indexer maintain the sort-array so that the existing
> order ban be re-used when adding documents. Whether modifying an
> existing order-array is cheaper than a full re-sort or not depends on
> your batch size.
>
> Regards,
> Toke Eskildsen
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Lance Norskog
goksron@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 26 03:25:40 2010
Return-Path: <java-user-return-47137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35556 invoked from network); 26 Aug 2010 03:25:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Aug 2010 03:25:40 -0000
Received: (qmail 92231 invoked by uid 500); 26 Aug 2010 03:25:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91933 invoked by uid 500); 26 Aug 2010 03:25:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91925 invoked by uid 99); 26 Aug 2010 03:25:34 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Aug 2010 03:25:34 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_FILL_THIS_FORM_SHORT,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of goksron@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Aug 2010 03:25:12 +0000
Received: by pwj5 with SMTP id 5so479533pwj.35
        for <java-user@lucene.apache.org>; Wed, 25 Aug 2010 20:24:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=jiOaVshlb4ODGA8+b7lDWFqafCdphlVUj/ROC9nji6k=;
        b=Bxp/8KIetgy5eOm5EPSh1Hx7YekG5dfjuG2OYb9qSlaC2nDbTEtUuP23PmU8tXHGJ+
         iMVAwSUXQ1F2foz9moAZp3YnxCoF6/WkVUWnvg+/x+1UOdzgFpNeKvbXUC7OzJzyL76y
         EuAMbl5eUEqjut46Am96usbRr7ylrEf9S7RIs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=DTD9OWbdndhEoQsLi6gK40wbofz0WlYE4X75KM3H+bo4T6aCvYP8xaaxPd52cH1clu
         5WLEKZlEPyc2b+Eegszw3uKojrXTKnhVYGQJq9IaZAaQruIQK+EpGdr5LtX9J3/JZfWx
         U5OdTPQpmIwQEe84EkgLZF7K7FfXQyseELCQg=
MIME-Version: 1.0
Received: by 10.143.37.18 with SMTP id p18mr7708644wfj.13.1282793090102; Wed,
 25 Aug 2010 20:24:50 -0700 (PDT)
Received: by 10.142.51.21 with HTTP; Wed, 25 Aug 2010 20:24:47 -0700 (PDT)
In-Reply-To: <AANLkTimDXMug=mNsjK2Vo4tNcj+m0oJmgrwf0rxxe9Hg@mail.gmail.com>
References: <8721F0F9B0109947A0DD64B7E44D83C11C87B34DBF@SVSMSG007.svservices.local>
	<AANLkTimDXMug=mNsjK2Vo4tNcj+m0oJmgrwf0rxxe9Hg@mail.gmail.com>
Date: Wed, 25 Aug 2010 20:24:47 -0700
Message-ID: <AANLkTi=Vvik918F3NA9fQXvOAc9ssC65U_HENfkMU6fY@mail.gmail.com>
Subject: Re: Lucene applicability
From: Lance Norskog <goksron@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

A stepping stone to the above is that, in DB terms, a Lucene index is
only one table. It has a suite of indexing features that are very
different from database search. The features are oriented to searching
large bodies of text for "ideas" rather than concrete words. It
searches a lot faster than a DB. It also spends more time creating its
various indexes than a DB. Other points- you can't add or drop fields
or indexes.

On Wed, Aug 25, 2010 at 10:33 AM, Erick Erickson
<erickerickson@gmail.com> wrote:
> The SOLR wiki has lots of good information, start there:
> http://wiki.apache.org/solr/
>
> Otherwise, see below...
>
> On Wed, Aug 25, 2010 at 6:20 AM, Schreiner Wolfgang <
> Wolfgang.Schreiner@itsv.at> wrote:
>
>> Hi all,
>>
>> We are currently evaluating potential search frameworks (such as Hiberna=
te
>> Search) which might be suitable to use in our project (using Spring, JPA
>> with Hibernate) ...
>> I am sending this E-Mail in hope you can advise me on a few issues that
>> would help us in our decision making process.
>>
>>
>> 1.) =C2=A0 =C2=A0Is Lucene suitable for full text database searches? I r=
ead Lucene
>> was designed to index and search documents but how does it behave queryi=
ng
>> relational data sets in general?
>>
>
> Let's start be talking about the phrase "full text database searches". On=
e
> thing virtually all db-centric
> people trip over is trying to use SOLR as if it were a database. You just
> can't think about tables. The
> first time you think about using SOLR to do something join-like, stop and
> take a deep breath and
> think about documents instead. The general approach is to flatten your da=
ta
> so that each "document"
> contains all the relevant info. Yes, this leads to de-normalization. Yes,
> denormalized data makes a
> good DBA cringe. But that's the difference between searching and using a
> RDBMS.
>
> "Document" is somewhat misleading. A document in SOLR terms is just a
> collection of fields. And, BTW,
> there's no requirement that each document have the same fields (very unli=
ke
> a DB).
>
>
>>
>> 2.) =C2=A0 =C2=A0Can we make assumptions on query performance considerin=
g combined
>> searches, range queries or structured data and wildcard searches? If we
>> consider a data structure consisting of say 3 tables and each table cont=
ains
>> a few million entries (e.g. first name, last name and address fields) an=
d we
>> search for common values (such as 'John', 'Smith' and 'New York') where
>>
>> a. =C2=A0 =C2=A0 =C2=A0 each value for itself and each combination would=
 result in
>> millions of hits
>>
>
> Sure, but what those assumptions are is totally dependent on how you've s=
et
> things up. SOLR has been successfully
> used on several billion document indexes. There are tools for making all
> that work (i.e. replication, sharding, etc)
> built into SOLR. So I suspect you can make things work. Several million
> documents is not that large a data set.
>
> As always, there are tradeoffs between speed and complexity. But from wha=
t
> you've described
> I see no show stoppers.
>
>
>>
>> b. =C2=A0 =C2=A0 =C2=A0a person can have multiple first names and we wan=
t to make sure to
>> receive any combination of the last name with any first name
>>
>>
> This just sounds like an OR. But the queries can be pretty complex querie=
s.
> Some examples of what you expect would help.
> See multi-valued fields. So, a "document" can have multiple "firstname"
> entries. Again, not like a DB (your reflexes will trip you
> up on this point <G>).
>
>
>> c. =C2=A0 =C2=A0 =C2=A0 we search for a last name and a range of birth d=
ates
>>
>>
> Sure, range queries work just fine. Note that dates can trip you up, look=
 at
> triedate if you experiment.
>
>
>> 3.) =C2=A0 =C2=A0Transaction safety: How does Lucene handle indexes? If =
we update
>> data model and index, what happens to the index if anything goes wrong a=
s
>> soon as the data model has been persisted?
>>
>
> A lot of work has been done to make SOLR quite robust if "anything goes
> wrong". That said, how are you backing up your data?
> That is, what is the source of the data you're going to index? If you're
> relying on your SOLR index to be your backup, you simply must back it up
> somewhere "often enough" to get by if your building burns down. I'd also
> think about storing your original input...
>
> This is no different than a DB. you have to guard against the disk crashi=
ng,
> someone walking by with a powerful magnet, =C2=A0earthquake, flood, fires
> <G>.....
>
> Do note that if you modify your index schema, no existing documents refle=
ct
> the new schema, you have to reindex them.
>
>
>>
>> I hope I made the issues clear to you, just some general thoughts about =
how
>> Lucene would behave in a real world application scenario ... Any support=
 or
>> pointers to helpful documents or Web links are highly appreciated!
>> Cheers for now,
>>
>> w
>>
>>
>



--=20
Lance Norskog
goksron@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 26 07:24:54 2010
Return-Path: <java-user-return-47138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8025 invoked from network); 26 Aug 2010 07:24:53 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Aug 2010 07:24:53 -0000
Received: (qmail 36873 invoked by uid 500); 26 Aug 2010 07:24:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35698 invoked by uid 500); 26 Aug 2010 07:24:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35682 invoked by uid 99); 26 Aug 2010 07:24:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Aug 2010 07:24:44 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of fancyerii@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Aug 2010 07:24:38 +0000
Received: by wwe15 with SMTP id 15so558786wwe.5
        for <multiple recipients>; Thu, 26 Aug 2010 00:24:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=aSTKKUnKLY46JYprumDYhTYvebwDZWQQGe5r0TfRfQI=;
        b=T1oeAVYetvfCpyhwgYNvi2KL6XyO0K6b95oAmTMC8m+FQkIpCPUkLiVfRNeRU/8jEi
         UA5t/x6/8LIS4OXb0S0OfOSkavi//c/bkdsV4V/nLBpblbihSj8/7/+slkNhGV+vzvKA
         U5dl2wCJ0L5FP8OQHDKPwNWsxL7H7vPt/VJVc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=qyjEs/lw9jYkyf0aWyUAw5XT4TL8UebxKNwcdAAP+8eXanP4Be6hmyAXLLRe0XB27x
         U34G7mvQ5R7236xcYJLwaHYPLDMftwR3VjB/hJ+qGQAaMwAhAUCLdm0erw0npDstLTEn
         qkH0fN5dwcpHdFn0LAj4lgDDnwr7YJ0KgMArM=
MIME-Version: 1.0
Received: by 10.216.11.130 with SMTP id 2mr8417673wex.100.1282807456890; Thu,
 26 Aug 2010 00:24:16 -0700 (PDT)
Received: by 10.216.169.132 with HTTP; Thu, 26 Aug 2010 00:24:16 -0700 (PDT)
Date: Thu, 26 Aug 2010 15:24:16 +0800
Message-ID: <AANLkTimD-hdw4i1J2C6ov6HL6GgrvKH+5+QBR2yQgJ-U@mail.gmail.com>
Subject: instantiated contrib
From: Li Li <fancyerii@gmail.com>
To: java-user@lucene.apache.org, dev@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

I have about 70k document, the total indexed size is about 15MB(the
orginal text files' size).
                dir=new RAMDirectory();
                IndexWriter write=new IndexWriter(dir,...;
                for(loop){
                     writer.addDocument(doc);
                }
	writer.optimize();
	writer.close();

	IndexReader ir=IndexReader.open(dir,true);
	InstantiatedIndex ii=new InstantiatedIndex(ir);
	InstantiatedIndexReader iir=new InstantiatedIndexReader(ii);
	is=new IndexSearcher(ir);
	is2=new IndexSearcher(iir);

              I calculate the time by:
	long searchStart=System.nanoTime();
	TopDocs docs=is.search(bQuery,Integer.MAX_VALUE);
	long searchEnd=System.nanoTime();

             I searched 10,000 documents and the time of RAMDirectory
and instantiated
             the time used is time1: 21s(21812978000 ns) time2:
20s(20713817000 ns)
             I also calulate the time including get field value:
                total1: 23852ms total2: 22610ms
            it seems instantiated is not much faster than
RAMDirectory. Is there any thing wrong I used? my max memory is 4GB

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 26 08:02:22 2010
Return-Path: <java-user-return-47139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14941 invoked from network); 26 Aug 2010 08:02:22 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Aug 2010 08:02:22 -0000
Received: (qmail 65976 invoked by uid 500); 26 Aug 2010 08:02:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65578 invoked by uid 500); 26 Aug 2010 08:02:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65570 invoked by uid 99); 26 Aug 2010 08:02:15 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Aug 2010 08:02:15 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of suman.holani@zapak.co.in designates 220.226.181.11 as permitted sender)
Received: from [220.226.181.11] (HELO mail.zapak.co.in) (220.226.181.11)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 26 Aug 2010 08:01:53 +0000
Received: (qmail 22116 invoked by uid 508); 26 Aug 2010 08:01:28 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=default; d=zapak.co.in;
  b=gE/3XS7o8+2LvFhubUFb1tfv6xkzZYBxTClwSCWya6H7auPaxMvc/ZlOxUutbcoK  ;
Received: from localhost (HELO www.mail.zapak.co.in) (127.0.0.1)
  by mail.zapak.co.in with SMTP; 26 Aug 2010 08:01:28 -0000
MIME-Version: 1.0
Date: Thu, 26 Aug 2010 13:31:28 +0530
From: <suman.holani@zapak.co.in>
To: <java-user@lucene.apache.org>
Subject: lucene scanning
Message-ID: <e80ac6deeed20b7b25c4a7ef3ef03f8b@localhost>
X-Sender: suman.holani@zapak.co.in
User-Agent: RoundCube Webmail/0.3.1
Content-Type: multipart/alternative;
	boundary="=_c64699b2ffa8c02500c104cd487c248d"
X-Virus-Checked: Checked by ClamAV on apache.org

--=_c64699b2ffa8c02500c104cd487c248d
Content-Transfer-Encoding: 8bit
Content-Type: text/plain; charset=UTF-8



hi ,

1. whether any search query, will scan for all documents in the
lucene indexes 

2. 

I want to search query faster.So I thought of if I
could reduce the number of docs , lucene needs to search for , when given
some search parameters. It would act lil faster. 

Can we make subset
(subindexes) or say give some subset which should be scanned ,so as the
search performs efficiently (small subset to scan , faster ll b the
result)
Do not want to use filtered query as it will search twice the
indexes and I simply do not have requirement to scan again on the basis of
set of parameters again. I mean every query will be a unique one .


Thanks,
Suman
--=_c64699b2ffa8c02500c104cd487c248d--


From java-user-return-47140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 26 09:04:04 2010
Return-Path: <java-user-return-47140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33251 invoked from network); 26 Aug 2010 09:04:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Aug 2010 09:04:03 -0000
Received: (qmail 35211 invoked by uid 500); 26 Aug 2010 09:04:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34516 invoked by uid 500); 26 Aug 2010 09:03:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34508 invoked by uid 99); 26 Aug 2010 09:03:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Aug 2010 09:03:56 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of hota.aida@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Aug 2010 09:03:51 +0000
Received: by iwn9 with SMTP id 9so1837191iwn.35
        for <java-user@lucene.apache.org>; Thu, 26 Aug 2010 02:03:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=PX0AH1MpSlYogajHwOJLNxztZLkuYJZDvEYlbpBJBKA=;
        b=Ei7UEbNuUkm2vPpULskwXCU1YcEztnPKYUHCKRuHsglo6MunU+sZvEWjMU6KEbvMQz
         UJcBSZ8Jf2udQc2YcYbFF+b77lYuJQ6rR3I4TsN35i3zVs7MujeBSg2R95zKsmH5u6Eb
         fJLHF1RJ+4VSwxZp/IcG3SGqM+BYr2q64QJnA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=V9K9gEJGKu/BTG2FKL1rt2dBOMOLenHTfpa3o411ZtZujSc44XGzX16KZfthMWVmnx
         oYbFXZp1Y0e8lwHdlF5yNZX88uTkcL81YPAjoqagmgdSKKZSo3V3BmG2/jWyX2cmpxqC
         Cjpq/KKRcHwiYX3x8xmFU5r/Y4j4BQ8KC3L2g=
Received: by 10.231.179.24 with SMTP id bo24mr10403438ibb.193.1282813411127;
 Thu, 26 Aug 2010 02:03:31 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.49.20 with HTTP; Thu, 26 Aug 2010 02:03:11 -0700 (PDT)
In-Reply-To: <507931.497.qm@web113308.mail.gq1.yahoo.com>
References: <AANLkTimaUtmYCg02Ri-eG3g859+C8Os089U0jbdQr60A@mail.gmail.com> <507931.497.qm@web113308.mail.gq1.yahoo.com>
From: Aida Hota <hota.aida@gmail.com>
Date: Thu, 26 Aug 2010 11:03:11 +0200
Message-ID: <AANLkTinJK_bE7EEn2f+48g0irR3QDkGrcT-ugn=L3voX@mail.gmail.com>
Subject: Re: Calculate Term Co-occurrence Matrix
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=005045017180aef254048eb645bb

--005045017180aef254048eb645bb
Content-Type: text/plain; charset=ISO-8859-1

ok, thank you Ivan!!

On Tue, Aug 24, 2010 at 5:13 PM, Ivan Provalov <iprovalo@yahoo.com> wrote:

> Aida,
>
> Right now it will do two term collocation only.
>
> Ivan
>
>
> --- On Mon, 8/23/10, Aida Hota <hota.aida@gmail.com> wrote:
>
> > From: Aida Hota <hota.aida@gmail.com>
> > Subject: Re: Calculate Term Co-occurrence Matrix
> > To: java-user@lucene.apache.org
> > Date: Monday, August 23, 2010, 1:36 PM
> > Hi Ivan thanx a lot for this. I just
> > caught time to see this and reply,
> > sorry for bugging again, I appreciate already what you
> > uploaded . I would
> > also like to ask one question, if you dont mind. If it is
> > possible somehow
> > to get from this unified list of frequently occuring
> > unigrams, bigrams and
> > trigrams with their frequencies????
> >
> > Thank you very much
> >
> >
> > On Mon, Aug 23, 2010 at 3:22 PM, Ivan Provalov <iprovalo@yahoo.com>
> > wrote:
> >
> > > Ahmed, if you want the raw score, you can do it the
> > way you describe below.
> > >
> > >
> > >
> > > --- On Sun, 8/22/10, ahmed algohary <algoharyalex@gmail.com>
> > wrote:
> > >
> > > > From: ahmed algohary <algoharyalex@gmail.com>
> > > > Subject: Re: Calculate Term Co-occurrence Matrix
> > > > To: java-user@lucene.apache.org
> > > > Date: Sunday, August 22, 2010, 9:27 AM
> > > > I think I got it.
> > > >
> > > > In the CollectionIndexer class, I have added the
> > > > co-occurrence score to the
> > > > index document:
> > > >
> > > >  doc.add(new Field("score",
> > collocation.getScore() + "",
> > > >
> > > > Field.Store.YES, Field.Index.NOT_ANALYZED));
> > > >
> > > > then in the CollectionSearcher, the scores can
> > be
> > > > retrieved:
> > > >
> > > >  d.get("score")
> > > >
> > > > Is that correct ??
> > > >
> > > > On Sun, Aug 22, 2010 at 2:47 PM, ahmed algohary
> > <algoharyalex@gmail.com
> > > >wrote:
> > > >
> > > > > Thanks! It is exactly what I need. But,
> > isn't there a
> > > > way to get the
> > > > > matching score ?
> > > > >
> > > > > for example, "damaged"  co-occurs with
> > "shipment"
> > > > with a probability = 0.4
> > > > > ??
> > > > >
> > > > >
> > > > > On Sun, Aug 22, 2010 at 5:35 AM, Ivan
> > Provalov <iprovalo@yahoo.com>
> > > > wrote:
> > > > >
> > > > >> Ahmed,
> > > > >>
> > > > >> FYI, I updated the term collocations
> > package I
> > > > mentioned earlier with a
> > > > >> few fixes and changes which will make it
> > work for
> > > > Lucene 3.0.2.  This may
> > > > >> help your task.
> > > > >>
> > > > >> See:
> > > > >> https://issues.apache.org/jira/browse/LUCENE-474
> > > > >>
> > > > >> Thanks,
> > > > >>
> > > > >> Ivan Provalov
> > > > >>
> > > > >>
> > > > >> --- On Sat, 8/21/10, Otis Gospodnetic
> > <otis_gospodnetic@yahoo.com>
> > > > wrote:
> > > > >>
> > > > >> > From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> > > > >> > Subject: Re: Calculate Term
> > Co-occurrence
> > > > Matrix
> > > > >> > To: java-user@lucene.apache.org
> > > > >> > Date: Saturday, August 21, 2010,
> > 8:05 AM
> > > > >> > Ahmed,
> > > > >> >
> > > > >> > That's what that KPE (link in my
> > previous
> > > > email, below)
> > > > >> > will do for you.  It's
> > > > >> > not open source at this time, but
> > that is
> > > > exactly one of
> > > > >> > the things it does.  I
> > > > >> > think Mahout collocations stuff
> > might work
> > > > for you, too.
> > > > >> >
> > > > >> > Otis
> > > > >> > ----
> > > > >> > Sematext :: http://sematext.com/ :: Solr - Lucene -
> > > > Nutch
> > > > >> > Lucene ecosystem search :: http://search-lucene.com/
> > > > >> >
> > > > >> >
> > > > >> >
> > > > >> > ----- Original Message ----
> > > > >> > > From: ahmed algohary <algoharyalex@gmail.com>
> > > > >> > > To: java-user@lucene.apache.org
> > > > >> > > Sent: Sat, August 21, 2010
> > 7:20:03 AM
> > > > >> > > Subject: Re: Calculate Term
> > > > Co-occurrence Matrix
> > > > >> > >
> > > > >> > > Thanks for all your answers!
> > > > >> > >
> > > > >> > > it seems like I did not make
> > my
> > > > question  clear.
> > > > >> > I have a text corpus and I
> > > > >> > > need to determine the pairs of
> > words
> > > > that  occur
> > > > >> > together in many documents.
> > > > >> > > I need to do that to be able
> > to measure
> > > > the
> > > > >> > semantic proximity between
> > > > >> > > words. This method is
> > expanded
> > > > >> > > here<http://forums.searchenginewatch.com/showthread.php?t=48
> >.
> > > > >> > > I hope to  find some code
> > that
> > > > given a text
> > > > >> > corpus, generate all the words
> > > > >> > > pairs with  their
> > probability of
> > > > occurring
> > > > >> > together.
> > > > >> > >
> > > > >> > >
> > > > >> > > On Sat, Aug 21, 2010 at
> > 1:46  AM,
> > > > Otis
> > > > >> > Gospodnetic <
> > > > >> > > otis_gospodnetic@yahoo.com>
> > > > >> > wrote:
> > > > >> > >
> > > > >> > > > There is also a
> > non-Mahout Key
> > > > Phrase Extractor
> > > > >> > for  Collocations, SIPs, and
> > > > >> > > > a
> > > > >> > > > few other things:
> > > > >> > > >
> http://sematext.com/products/key-phrase-extractor/index.html
> > > > >> > > >
> > > > >> > > >  One of the demos
> > that uses
> > > > news data is at
> > > > >> > > > http://sematext.com/demo/kpe/index.html
> > > > >> > > >
> > > > >> > > > Otis
> > > > >> > > >  ----
> > > > >> > > > Sematext :: http://sematext.com/ :: Solr - Lucene -
> > > > >> > Nutch
> > > > >> > > > Lucene ecosystem
> > search :: http://search-lucene.com/
> > > > >> > > >
> > > > >> > > >
> > > > >> > > >
> > > > >> > > > ----- Original
> > Message ----
> > > > >> > > > > From: Grant
> > Ingersoll <gsingers@apache.org>
> > > > >> > > > > To: java-user@lucene.apache.org
> > > > >> > > >  > Sent: Fri,
> > August 20,
> > > > 2010 8:52:17 AM
> > > > >> > > > > Subject: Re:
> > Calculate
> > > > Term
> > > > >> > Co-occurrence Matrix
> > > > >> > > > >
> > > > >> > > > > You might also be
> > > > interested  in
> > > > >> > Mahout's collocations package:
> > > > >> > > > >
> http://cwiki.apache.org/confluence/display/MAHOUT/Collocations
> > > > >> > > >  >
> > > > >> > > > > -Grant
> > > > >> > > > > On  Aug 19,
> > 2010, at
> > > > 11:39 AM,
> > > > >> > ahmed  algohary wrote:
> > > > >> > > > >
> > > > >> > > > > > Hi all,
> > > > >> > > > > >
> > > > >> > > >  > > I need to
> > know if
> > > > there is a
> > > > >> > Lucene plug-in or a Lucene-based
> > > > API  for
> > > > >> > > > > > calculating the
> > term
> > > > co-occurrence
> > > > >> > matrix for a  given text
> > corpus.
> > > > >> > > > > >
> > > > >> > > > > > Thanks!
> > > > >> > > >  > >
> > > > >> > > > > > --
> > > > >> > > > > >  Ahmed
> > > > >> > > >  >
> > > > >> > > > >
> > --------------------------
> > > > >> > > > > Grant
> > Ingersoll
> > > > >> > > > > http://www.lucidimagination.com/
> > > > >> > > > >
> > > > >> > > > > Search the
> > Lucene
> > > > ecosystem
> > > > >> > using  Solr/Lucene:
> > > > >> > > > >http://www.lucidimagination.com/search
> > > > >> > > > >
> > > > >> > > > >
> > > > >> > > >  >
> > > > >> >
> > > >
> > ---------------------------------------------------------------------
> > > > >> > > >  > To
> > unsubscribe,
> > > > e-mail: java-user-unsubscribe@lucene.apache.org
> > > > >> > > >  > For
> > additional
> > > > commands, e-mail:
> > > > >> > java-user-help@lucene.apache.org
> > > > >> > > >  >
> > > > >> > > > >
> > > > >> > > >
> > > > >> > > >
> > > > >> >
> > > >
> > ---------------------------------------------------------------------
> > > > >> > > > To  unsubscribe,
> > e-mail:
> > > java-user-unsubscribe@lucene.apache.org
> > > > >> > > >  For additional
> > commands,
> > > > e-mail: java-user-help@lucene.apache.org
> > > > >> > > >
> > > > >> > > >
> > > > >> > >
> > > > >> >
> > > > >> >
> > > >
> > ---------------------------------------------------------------------
> > > > >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > >> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > > > >> >
> > > > >> >
> > > > >>
> > > > >>
> > > > >>
> > > > >>
> > > > >>
> > > >
> > ---------------------------------------------------------------------
> > > > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > > > >>
> > > > >>
> > > > >
> > > >
> > >
> > >
> > >
> > >
> > >
> > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--005045017180aef254048eb645bb--

From java-user-return-47141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 26 13:05:34 2010
Return-Path: <java-user-return-47141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14819 invoked from network); 26 Aug 2010 13:05:34 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Aug 2010 13:05:34 -0000
Received: (qmail 6841 invoked by uid 500); 26 Aug 2010 13:05:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6645 invoked by uid 500); 26 Aug 2010 13:05:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6637 invoked by uid 99); 26 Aug 2010 13:05:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Aug 2010 13:05:27 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nigelspleen@gmail.com designates 209.85.213.48 as permitted sender)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Aug 2010 13:05:21 +0000
Received: by ywi6 with SMTP id 6so443195ywi.35
        for <java-user@lucene.apache.org>; Thu, 26 Aug 2010 06:05:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=7dQ7PY2ycG8LloaZToU0Rvzn5kMc+KTg1CwvpsTzFRc=;
        b=ZzU1SmcihEE6a+tmJx2gt17tNMGjYIvfHOhP3CRj3LDSD82GTNLDXQInL76I6BiNzj
         6/X1otVKeSlj6vIi38uG4iqDli7mP56oF82rAPrpZ2eWaYElKA83uGGc7sjOHQYwOgXD
         E8ZKWgNK+SbzkNWNNHcfF/2rh65eYn5mW58c0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=VUUvzxHUR2I6JhkvfxaypTsB7xaH5BGOgyAFNpLICF0gavpTPJB9FmtJcUrUC1wlq2
         8wfMUu04ZuoVY8abirOC+XVv1yItkEQ3YupQiZ0/0boJjigHP+0VScPuqSKRwbw8OG4c
         eilSlRJ7KvyN/Q89MD2TV28zSWwmfviwkbLZg=
MIME-Version: 1.0
Received: by 10.90.27.2 with SMTP id a2mr536227aga.56.1282827900707; Thu, 26
 Aug 2010 06:05:00 -0700 (PDT)
Received: by 10.220.64.214 with HTTP; Thu, 26 Aug 2010 06:05:00 -0700 (PDT)
Date: Thu, 26 Aug 2010 09:05:00 -0400
Message-ID: <AANLkTi=gcoKyY4_HriuLu1anqc3iOCzO60APg-onQHU4@mail.gmail.com>
Subject: Largest Lucene installation?
From: Nigel <nigelspleen@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6509cca54715e048eb9a5aa

--0016e6509cca54715e048eb9a5aa
Content-Type: text/plain; charset=ISO-8859-1

I'm curious about what the largest Lucene installations are, in terms of:

- Greatest number of documents (i.e. X billion docs)
- Largest data size (i.e. Y terabytes of indexes)
- Most machines (i.e. Z shards or severs)

Apart from general curiosity, the obvious follow-up question would be what
approaches were taken to scale to extremes.

We have ~11 billion documents indexed (growing at >2 billion per month), but
I'm sure someone else has enough that this appears puny.  (-:

Thanks,
Chris

--0016e6509cca54715e048eb9a5aa--

From java-user-return-47142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 26 15:38:49 2010
Return-Path: <java-user-return-47142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62040 invoked from network); 26 Aug 2010 15:38:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Aug 2010 15:38:48 -0000
Received: (qmail 61014 invoked by uid 500); 26 Aug 2010 15:38:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60888 invoked by uid 500); 26 Aug 2010 15:38:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60880 invoked by uid 99); 26 Aug 2010 15:38:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Aug 2010 15:38:45 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Aug 2010 15:38:39 +0000
Received: by qyk12 with SMTP id 12so7360831qyk.14
        for <java-user@lucene.apache.org>; Thu, 26 Aug 2010 08:38:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=iH5moXCVMWsLnyLbTPvwzd6FOzPPtRUgoHiRlYj/Qcs=;
        b=iSjFqrIeNTWx9nBSHF/WpEOS0GPx7xl8DR5jddGllsFMQbfEPsy4HOKv8dEmQa/g2n
         0BIXcnJ+JxzXNBAhGw2Fz9OW2q0FXUgUZRe2WV4JAVA28Sux+Lh9diplQTWKz/cPcBL8
         rHUab9XUr55xs/AHwts5hZ/YelqSkogI8ZSC0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=PvSE6iUsV5rDgU95A//rP4rc5OY2wBQt3/fSpWh4SQvFzNlxfcsEYyYOQKaYJXe71w
         ormSnZq75rsAtewBZspIgBlaBWdFj8oiZDW1rg0IyKLDz/olrmYNbFI/HKsjBzLRvuZY
         OE/IJeT7bZ3/CL+7TEULAiOMXdLdq/Pw+uVlg=
MIME-Version: 1.0
Received: by 10.224.100.5 with SMTP id w5mr6783588qan.191.1282837098705; Thu,
 26 Aug 2010 08:38:18 -0700 (PDT)
Received: by 10.229.186.83 with HTTP; Thu, 26 Aug 2010 08:38:18 -0700 (PDT)
In-Reply-To: <e80ac6deeed20b7b25c4a7ef3ef03f8b@localhost>
References: <e80ac6deeed20b7b25c4a7ef3ef03f8b@localhost>
Date: Thu, 26 Aug 2010 08:38:18 -0700
Message-ID: <AANLkTi=QBW7pyeoJez2V4-3Cs3HHH706GZLS3snP7jdp@mail.gmail.com>
Subject: Re: lucene scanning
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00c09f971fac92b712048ebbc950

--00c09f971fac92b712048ebbc950
Content-Type: text/plain; charset=ISO-8859-1

Why do you care? By that I mean that nothing you've written gives
us any clue whether you need to do anything about making things
faster. "Making things faster" is a laudable goal, but not worth worrying
about until you can confidently state you have performance issues.

And you've provided no details that'll help us help you. How big is
your index? What kinds of queries are you submitting? What are
your performance requirements? What kind of throughput are you
expecting (i.e. queries per second)? What kind of hardware are
you running on? What are your JVM settings?

This is for SOLR, but it might help if you reviewed it:
http://wiki.apache.org/solr/UsingMailingLists

Best
Erick

On Thu, Aug 26, 2010 at 1:01 AM, <suman.holani@zapak.co.in> wrote:

>
>
> hi ,
>
> 1. whether any search query, will scan for all documents in the
> lucene indexes
>
> 2.
>
> I want to search query faster.So I thought of if I
> could reduce the number of docs , lucene needs to search for , when given
> some search parameters. It would act lil faster.
>
> Can we make subset
> (subindexes) or say give some subset which should be scanned ,so as the
> search performs efficiently (small subset to scan , faster ll b the
> result)
> Do not want to use filtered query as it will search twice the
> indexes and I simply do not have requirement to scan again on the basis of
> set of parameters again. I mean every query will be a unique one .
>
>
> Thanks,
> Suman

--00c09f971fac92b712048ebbc950--

From java-user-return-47143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 26 16:48:46 2010
Return-Path: <java-user-return-47143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87988 invoked from network); 26 Aug 2010 16:48:45 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Aug 2010 16:48:45 -0000
Received: (qmail 64413 invoked by uid 500); 26 Aug 2010 16:48:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64356 invoked by uid 500); 26 Aug 2010 16:48:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64348 invoked by uid 99); 26 Aug 2010 16:48:42 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Aug 2010 16:48:42 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of shashi.mit@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Aug 2010 16:48:19 +0000
Received: by eydd26 with SMTP id d26so1865857eyd.35
        for <java-user@lucene.apache.org>; Thu, 26 Aug 2010 09:47:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:sender:received:from:date
         :x-google-sender-auth:message-id:subject:to:content-type;
        bh=UGy6No4hRKUqDF2zT9kfPhkBpgkL2Xl7gCG+QZPYrxs=;
        b=ZL90CUyaciYhF5zr66ALagw2YDoxTtEr4yNmY3AFAX1F0CcxDklWy1GXgTTcYt04p+
         DaJzgh9XcRihBsvsnbU+ceUNlmTmSpslycv2D/phjmmVAA+3i2HJcKwfZ4jj2LQKeNzy
         9M1q9rNIzeFFkKSVrMm9JyouadeR+rTV7BeuI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:from:date:x-google-sender-auth:message-id
         :subject:to:content-type;
        b=TrDkQv656/6mW1uog2YVgBnX554HXmuoRLtf4nN3bxg03NTD9IqffLejPx2X+UcH8t
         cCCL0CAHmE4SFaXy8P17EvPneFAKRkjAHv3iSr/oPTiEVR/UfCv27vU7JL04a3KE3mnf
         oTC9UsnVy+SStAIFLQK2Z7aZZIOVBw9zkHc8M=
Received: by 10.216.184.19 with SMTP id r19mr7122563wem.36.1282841279431; Thu,
 26 Aug 2010 09:47:59 -0700 (PDT)
MIME-Version: 1.0
Sender: shashi.mit@gmail.com
Received: by 10.216.231.12 with HTTP; Thu, 26 Aug 2010 09:47:29 -0700 (PDT)
From: Shashi Kant <skant@sloan.mit.edu>
Date: Thu, 26 Aug 2010 12:47:29 -0400
X-Google-Sender-Auth: CNmxhN2DBJO89AzWaiHaLWG900Y
Message-ID: <AANLkTim1diodAnrVWoQzKQyvob_PtSq4X0nkHyYQMdR-@mail.gmail.com>
Subject: Span Query/Slop distance
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hello, I am familiar with the SpanQuery construct and set an upper Slop limit.

1. But when I get the hit results, is there any way I can access the
actual slop and the span text itself in that particular hit.
2. Also it is possible to have multiple matches within the same
document. So how do I access the span text and the corresponding slop
for the multiple matches with the same doc?


Thanks,
Shashi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 26 18:14:14 2010
Return-Path: <java-user-return-47144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19672 invoked from network); 26 Aug 2010 18:14:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Aug 2010 18:14:14 -0000
Received: (qmail 81060 invoked by uid 500); 26 Aug 2010 18:14:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80916 invoked by uid 500); 26 Aug 2010 18:14:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80908 invoked by uid 99); 26 Aug 2010 18:14:11 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Aug 2010 18:14:11 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of karl.wettin@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Aug 2010 18:13:47 +0000
Received: by eydd26 with SMTP id d26so1978013eyd.35
        for <java-user@lucene.apache.org>; Thu, 26 Aug 2010 11:13:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=rHrhYtTov/BdrDNBWECUoLvcF8ZZJhgIqH7sy/RwEXM=;
        b=AEetwY/zguTnVydkqc6BQRPM1I9PhBY36qBMJ9AaIVRXeDUukosNQz9Nxys8oEAeej
         8CihKFtMvW6lfh8Tr50BO/EIV80GVKXfIAjpeWSCuNY9S87CeFNtKGbpkDT+CN+FkNA8
         J4VAWYIBNErnRzgUQBvY2l8f1MwV8WOIyJLcs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=kqlT1ffK9e82fAn+nx+v9Fr5l2ohVMx9+vDBozi8jDzUQui0hpDiGYiKxlTraCbhnV
         eqfw0RU8KgDIhXq0H1xuBSZ3iBPv40fm96YCYXTJwzfH6n7MQY6FHR4UZYbswuZEVYun
         dva2au0mCuRWvM/uKBBJumV0sRoDnNx9fK/+c=
Received: by 10.213.114.5 with SMTP id c5mr1105567ebq.91.1282846405661;
        Thu, 26 Aug 2010 11:13:25 -0700 (PDT)
Received: from [192.168.1.201] (c-918770d5.029-18-6d6c6d2.cust.bredbandsbolaget.se [213.112.135.145])
        by mx.google.com with ESMTPS id v8sm4465801eeh.20.2010.08.26.11.13.21
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 26 Aug 2010 11:13:22 -0700 (PDT)
Message-Id: <8D02E901-B277-4CC9-8672-DC5C28F4F977@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <AANLkTimD-hdw4i1J2C6ov6HL6GgrvKH+5+QBR2yQgJ-U@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v936)
Subject: Re: instantiated contrib
Date: Thu, 26 Aug 2010 20:13:20 +0200
References: <AANLkTimD-hdw4i1J2C6ov6HL6GgrvKH+5+QBR2yQgJ-U@mail.gmail.com>
X-Mailer: Apple Mail (2.936)
X-Virus-Checked: Checked by ClamAV on apache.org

My mail client died while sending this mail.. Sorry for any duplicate.

It is strange that it should take 20 second to gather fields, this is  
the only thing that really suprises me. I'd expect it to be instant  
compared to RAMDirectory. It is hard to say from the information you  
provided. Did you perhaps lazy load field values from your  
RAMDirectory and not retrieve them, or something like that?

Why your queries are slow is also hard to say, there can be many  
reaons. 70k documents can be quite a few documents for II if they  
contain enough text. Here are a few questions that may or may not be  
helpful:

What is the content of the documents? Do they contain a lot of the  
same text? Or are they all rather unique? The major thing that makes  
II faster than RAMDirectory is that it does not have to deserialize  
values from the bytestream. As the index grows binary searching for  
documents containing a given term will start consume more time than  
deserializing the index.

What speed do you see if you only load 10% (7k)?

Did you see the graphics in the package level javadocs?
http://lucene.apache.org/java/3_0_2/api/all/org/apache/lucene/store/instantiated/package-summary.html


	karl


26 aug 2010 kl. 09.24 skrev Li Li:

> I have about 70k document, the total indexed size is about 15MB(the
> orginal text files' size).
>                dir=new RAMDirectory();
>                IndexWriter write=new IndexWriter(dir,...;
>                for(loop){
>                     writer.addDocument(doc);
>                }
> 	writer.optimize();
> 	writer.close();
>
> 	IndexReader ir=IndexReader.open(dir,true);
> 	InstantiatedIndex ii=new InstantiatedIndex(ir);
> 	InstantiatedIndexReader iir=new InstantiatedIndexReader(ii);
> 	is=new IndexSearcher(ir);
> 	is2=new IndexSearcher(iir);
>
>              I calculate the time by:
> 	long searchStart=System.nanoTime();
> 	TopDocs docs=is.search(bQuery,Integer.MAX_VALUE);
> 	long searchEnd=System.nanoTime();
>
>             I searched 10,000 documents and the time of RAMDirectory
> and instantiated
>             the time used is time1: 21s(21812978000 ns) time2:
> 20s(20713817000 ns)
>             I also calulate the time including get field value:
>                total1: 23852ms total2: 22610ms
>            it seems instantiated is not much faster than
> RAMDirectory. Is there any thing wrong I used? my max memory is 4GB
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: dev-unsubscribe@lucene.apache.org
> For additional commands, e-mail: dev-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 26 18:22:27 2010
Return-Path: <java-user-return-47145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28704 invoked from network); 26 Aug 2010 18:22:26 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Aug 2010 18:22:26 -0000
Received: (qmail 2351 invoked by uid 500); 26 Aug 2010 18:22:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2272 invoked by uid 500); 26 Aug 2010 18:22:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2264 invoked by uid 99); 26 Aug 2010 18:22:24 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Aug 2010 18:22:23 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aminmc@gmail.com designates 74.125.82.42 as permitted sender)
Received: from [74.125.82.42] (HELO mail-ww0-f42.google.com) (74.125.82.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Aug 2010 18:22:00 +0000
Received: by wwc33 with SMTP id 33so553729wwc.5
        for <java-user@lucene.apache.org>; Thu, 26 Aug 2010 11:21:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:content-type
         :content-transfer-encoding:subject:date:message-id:to:mime-version
         :x-mailer;
        bh=CwtNURLWlSFNcSEzkTjApKPKXo42qkTAZnl9VX7TlBo=;
        b=oBXIlp7x6+2DfzMpU3ZVIdjAw311fhp/16TvdzWXq/HnGGlTXSlZePx42+9zElkwjc
         5C2AZxDL3YDZIEpy8VPR6RQeAkVoPW8l7JFvHC9zU2CpE9p1wKFSKR/zIAA7X/G4wG2M
         wUqiITUK4BTmWaJT40ehcQqT1wkSTfQ9qClUM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:content-type:content-transfer-encoding:subject:date:message-id
         :to:mime-version:x-mailer;
        b=VqtSRawza+anKbLm3IjPVeynbVd+Q4bBmzG1mfGlHIQsC6zWIN9WOeQq1oCrkiqLzc
         wSd/Q57fh4RdGDAqXO5jINYvNTcYKiNWVELZIrYN8uJUf992aRWEl522SJW1TASsWQqC
         mlEj4ywu9tBnpNPbkY1enD2JTF+jYs8LaXfHw=
Received: by 10.227.140.154 with SMTP id i26mr9308959wbu.199.1282846899818;
        Thu, 26 Aug 2010 11:21:39 -0700 (PDT)
Received: from [192.168.1.88] (host86-146-89-111.range86-146.btcentralplus.com [86.146.89.111])
        by mx.google.com with ESMTPS id b23sm2501959wbb.16.2010.08.26.11.21.37
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 26 Aug 2010 11:21:38 -0700 (PDT)
From: Amin Mohammed-Coleman <aminmc@gmail.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: Batch Operation and Commit
Date: Thu, 26 Aug 2010 18:42:32 +0100
Message-Id: <EE6E7DE1-76BD-4CB0-B27C-AD4D06333879@gmail.com>
To: java-user@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1081)
X-Mailer: Apple Mail (2.1081)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


I have a list of batch tasks that need to be executed.  Each batch =
contains 1000 documents and basically I use a RAMDirectory based index =
writer, and at the end of adding 1000 documents to the memory  i perform =
the following:

    ramWriter.commit();
    indexWriter.addIndexesNoOptimize(ramWriter.getDirectory());
    ramWriter.close();



Do I then need to explicitly do an indexWriter.commit()?  It seems as =
though if I don't do an explicit commit the documents aren't added to =
the index (I've inspected via Luke).  I would've thought that the =
indexWriter.addIndexesNoOptimize would not require me to call the commit =
explicitly.  Is this a correct assumption? or should i call the commit =
explicitly for my disk based index writer? =20

The main idea behind this is that each batch can be executed in a =
seperate thread and there is only on shared index writer. =20

Any help would be appreciated.


Thanks
Amin
     =20=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 26 18:34:04 2010
Return-Path: <java-user-return-47146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32117 invoked from network); 26 Aug 2010 18:34:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Aug 2010 18:34:04 -0000
Received: (qmail 24887 invoked by uid 500); 26 Aug 2010 18:34:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24714 invoked by uid 500); 26 Aug 2010 18:34:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24706 invoked by uid 99); 26 Aug 2010 18:34:01 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Aug 2010 18:34:01 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Aug 2010 18:33:38 +0000
Received: by qyk2 with SMTP id 2so2435391qyk.14
        for <java-user@lucene.apache.org>; Thu, 26 Aug 2010 11:33:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=BgOSPvNfiRX9lKUcZrsA2Ub9lIRwwtJTmTjMF/paO3k=;
        b=DZgouDxVmc1L949y4qFwzxUJ4snw3QrWQeh//yIU2PmUl3qZFKSWC7MKmkeOPL9PbV
         ixLRGbxcS332pNyFUhmCu5rP4as7GFxZcNMMctIeqVXNxHP0DMv0x9uu9U79ael9dq+k
         t/BYk6jxCUPEdkwI5u2hFr6Gu6GYQKCabC9kU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=At4VhTR6HOFIiOtxIl+gIiQZ5UzZEfrzPjsfCLB+CAiU3KcCINvHYxf9eXokRQ73l+
         vLxoF8ZAPs98DsG1R6MCaK0CBQqZP7Cf38Oxaw2OfEB3d3NQVatfKJjpB5LfWNwRVM+E
         ouSoI3i1HheOiUiO2GdtzLX4Ah+ghT3r8IwMU=
MIME-Version: 1.0
Received: by 10.224.78.194 with SMTP id m2mr7009043qak.19.1282847597462; Thu,
 26 Aug 2010 11:33:17 -0700 (PDT)
Received: by 10.229.186.83 with HTTP; Thu, 26 Aug 2010 11:33:17 -0700 (PDT)
In-Reply-To: <EE6E7DE1-76BD-4CB0-B27C-AD4D06333879@gmail.com>
References: <EE6E7DE1-76BD-4CB0-B27C-AD4D06333879@gmail.com>
Date: Thu, 26 Aug 2010 11:33:17 -0700
Message-ID: <AANLkTi=9r8A_1m2Uyhou5a_psemCAxz-9iF_NO84=wFD@mail.gmail.com>
Subject: Re: Batch Operation and Commit
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00c09f986a1259072e048ebe3bd5
X-Virus-Checked: Checked by ClamAV on apache.org

--00c09f986a1259072e048ebe3bd5
Content-Type: text/plain; charset=ISO-8859-1

I'm going to sidestep your question and ask why you're using
a RAMDirectory in the first place. People often think it'll
speed up their indexing because it's in RAM, but the
normal FS-based indexing caches in RAM too, and you
can use various settings governing segments, ramusage
etc. to control how often you flush to disk. So unless you're
certain you need to, I'd just forget the whole RAM thing <G>.

You must close your indexwriter OR commit the changes
before you can see your changes, see IndexWriter.close/commit

Best
Erick



On Thu, Aug 26, 2010 at 10:42 AM, Amin Mohammed-Coleman <aminmc@gmail.com>wrote:

> Hi
>
>
> I have a list of batch tasks that need to be executed.  Each batch contains
> 1000 documents and basically I use a RAMDirectory based index writer, and at
> the end of adding 1000 documents to the memory  i perform the following:
>
>    ramWriter.commit();
>    indexWriter.addIndexesNoOptimize(ramWriter.getDirectory());
>    ramWriter.close();
>
>
>
> Do I then need to explicitly do an indexWriter.commit()?  It seems as
> though if I don't do an explicit commit the documents aren't added to the
> index (I've inspected via Luke).  I would've thought that the
> indexWriter.addIndexesNoOptimize would not require me to call the commit
> explicitly.  Is this a correct assumption? or should i call the commit
> explicitly for my disk based index writer?
>
> The main idea behind this is that each batch can be executed in a seperate
> thread and there is only on shared index writer.
>
> Any help would be appreciated.
>
>
> Thanks
> Amin
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00c09f986a1259072e048ebe3bd5--

From java-user-return-47147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 26 19:08:37 2010
Return-Path: <java-user-return-47147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42675 invoked from network); 26 Aug 2010 19:08:37 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Aug 2010 19:08:37 -0000
Received: (qmail 80638 invoked by uid 500); 26 Aug 2010 19:08:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80579 invoked by uid 500); 26 Aug 2010 19:08:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80571 invoked by uid 99); 26 Aug 2010 19:08:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Aug 2010 19:08:34 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aminmc@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Aug 2010 19:08:26 +0000
Received: by wyf23 with SMTP id 23so3167435wyf.35
        for <java-user@lucene.apache.org>; Thu, 26 Aug 2010 12:08:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:content-type:mime-version
         :subject:from:in-reply-to:date:content-transfer-encoding:message-id
         :references:to:x-mailer;
        bh=VqdWIl9YkGQd1NApD+/8y/HQuKR8+5mSo/eBuAe/7Io=;
        b=lm5TrisNszlBRy7FEbs9o0hPweeO6uArlZpfaJsNzgu/o5nIOjUmz9s2fSaIufTeAX
         D1Oy9fUw+Tp5IM+zIc+y3hnSufAta6IDLdGBdGJiDwdYyHZ2yf76J8AxstNFgtoVXWmD
         Z5gLwf1nNhd5IbuSLE83AlA74MB184v8z5ZuA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=v6gtSsp4DqoZVJXOj7U4PJsJGguggVSLPH2FYzbhN/BH93dwXBer6N9Hky3SUvkper
         3VwCQeRPPHA91iOQFbgoBCXn5QjKId43pn0P92opdofezrCL5ZuLT4lycuB1E1ZG0smq
         iwcNXhZYuGGgp7g+o6c/wykOHF5fTrdvjUz94=
Received: by 10.227.134.136 with SMTP id j8mr9254204wbt.206.1282849685189;
        Thu, 26 Aug 2010 12:08:05 -0700 (PDT)
Received: from [192.168.1.88] (host86-146-89-111.range86-146.btcentralplus.com [86.146.89.111])
        by mx.google.com with ESMTPS id a1sm2543178wbb.20.2010.08.26.12.08.02
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 26 Aug 2010 12:08:04 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1081)
Subject: Re: Batch Operation and Commit
From: Amin Mohammed-Coleman <aminmc@gmail.com>
In-Reply-To: <AANLkTi=9r8A_1m2Uyhou5a_psemCAxz-9iF_NO84=wFD@mail.gmail.com>
Date: Thu, 26 Aug 2010 20:08:01 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <6B057BEE-DAD1-4CA7-B72C-B1DDEBD7C17C@gmail.com>
References: <EE6E7DE1-76BD-4CB0-B27C-AD4D06333879@gmail.com> <AANLkTi=9r8A_1m2Uyhou5a_psemCAxz-9iF_NO84=wFD@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1081)

Hi Erick

Thanks for your response.  I used the Lucene in Action 1st edition as a =
reference for batch indexing. I've just got my copy of the 2nd edition =
which mentions that there is no point in using RAM directory.  Not =
saying I don't trust you :).

I'll update my code to use the normal fs directory for batch.


Thanks
Amin

On 26 Aug 2010, at 19:33, Erick Erickson wrote:

> I'm going to sidestep your question and ask why you're using
> a RAMDirectory in the first place. People often think it'll
> speed up their indexing because it's in RAM, but the
> normal FS-based indexing caches in RAM too, and you
> can use various settings governing segments, ramusage
> etc. to control how often you flush to disk. So unless you're
> certain you need to, I'd just forget the whole RAM thing <G>.
>=20
> You must close your indexwriter OR commit the changes
> before you can see your changes, see IndexWriter.close/commit
>=20
> Best
> Erick
>=20
>=20
>=20
> On Thu, Aug 26, 2010 at 10:42 AM, Amin Mohammed-Coleman =
<aminmc@gmail.com>wrote:
>=20
>> Hi
>>=20
>>=20
>> I have a list of batch tasks that need to be executed.  Each batch =
contains
>> 1000 documents and basically I use a RAMDirectory based index writer, =
and at
>> the end of adding 1000 documents to the memory  i perform the =
following:
>>=20
>>   ramWriter.commit();
>>   indexWriter.addIndexesNoOptimize(ramWriter.getDirectory());
>>   ramWriter.close();
>>=20
>>=20
>>=20
>> Do I then need to explicitly do an indexWriter.commit()?  It seems as
>> though if I don't do an explicit commit the documents aren't added to =
the
>> index (I've inspected via Luke).  I would've thought that the
>> indexWriter.addIndexesNoOptimize would not require me to call the =
commit
>> explicitly.  Is this a correct assumption? or should i call the =
commit
>> explicitly for my disk based index writer?
>>=20
>> The main idea behind this is that each batch can be executed in a =
seperate
>> thread and there is only on shared index writer.
>>=20
>> Any help would be appreciated.
>>=20
>>=20
>> Thanks
>> Amin
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 26 21:37:20 2010
Return-Path: <java-user-return-47148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84601 invoked from network); 26 Aug 2010 21:37:20 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Aug 2010 21:37:20 -0000
Received: (qmail 58440 invoked by uid 500); 26 Aug 2010 21:37:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58384 invoked by uid 500); 26 Aug 2010 21:37:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58376 invoked by uid 99); 26 Aug 2010 21:37:17 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Aug 2010 21:37:17 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of stefan.nikolic@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Aug 2010 21:36:55 +0000
Received: by bwz14 with SMTP id 14so2038448bwz.35
        for <java-user@lucene.apache.org>; Thu, 26 Aug 2010 14:36:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=H/OlXRyLwCaZIBDBS0rZRZ2p7gqgVsxFswEyV1z4JFE=;
        b=s1Q04pGM2WOjwuV+vH1gnIHZ2ntJTNspSnrnx65A6Z6YpMyyygTx08/OR4JNLiXdkj
         Rd6r9dshK/frjW9AkfB1yS9YjcCXfVxVfAppK1hZ+psh/J0+kaXTdiqOeACK8rvNxYed
         Dsdq4Cb3Y+Z9AYxAzVzh7AsmTUoNjymeu/ARc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=gKYjzy0Yv+5FkBYqsNs04Ul14K/r9FEF2EOjXnU8LZcYIGqlaD8UC3ajBMVFfgduvG
         c5oN883vsuFsOC+9h8vbKpDfWolRALuN4VdPdkecV9CLlB8/eBR9C1waEgmRJGlZAxIH
         +VJXnQfKvVZXCuw2sgwz8FGtZWVUwK17VpDlY=
MIME-Version: 1.0
Received: by 10.204.81.215 with SMTP id y23mr6882885bkk.78.1282858594515; Thu,
 26 Aug 2010 14:36:34 -0700 (PDT)
Received: by 10.204.127.143 with HTTP; Thu, 26 Aug 2010 14:36:34 -0700 (PDT)
Date: Thu, 26 Aug 2010 17:36:34 -0400
Message-ID: <AANLkTi=0J4w4WFp-ACiT0XujRH3e0Xgn3Q2fP-GO084-@mail.gmail.com>
Subject: Using multiple drives and non-CFS format to improve search performance
From: Stefan Nikolic <stefan.nikolic@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d96d85d2bb38048ec0ca20
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d96d85d2bb38048ec0ca20
Content-Type: text/plain; charset=ISO-8859-1

Hi everyone,

I'm trying to figure out the effects on search performance of using the
non-CFS format and spreading the various underlying files to different
disks/media types. For example, I'm considering moving a segment's various
.t* term-related files onto a solid-state drive, the .fdx/.fdt
stored-fields-related files onto a standard rotational drive, and using
symlinks to hide all of this from Lucene.

Any ideas on what the performance effects of such a setup would be? Which
files would you recommend putting on the slower media, and which on the
faster media?

Thanks!

-Stefan

--0016e6d96d85d2bb38048ec0ca20--

From java-user-return-47149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 27 01:01:49 2010
Return-Path: <java-user-return-47149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52144 invoked from network); 27 Aug 2010 01:01:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Aug 2010 01:01:48 -0000
Received: (qmail 54976 invoked by uid 500); 27 Aug 2010 01:01:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54875 invoked by uid 500); 27 Aug 2010 01:01:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54867 invoked by uid 99); 27 Aug 2010 01:01:45 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Aug 2010 01:01:45 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of arunrangarajan@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Aug 2010 01:01:22 +0000
Received: by fxm17 with SMTP id 17so2284974fxm.35
        for <java-user@lucene.apache.org>; Thu, 26 Aug 2010 18:01:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=BkXkgy1whHAwFl2F/D1tKzL7wJAugz49NVjLJVL69/g=;
        b=GQ5Z2ND5is/wPiY8kM0WEXuJe7w1eGQgT170xifMQVWxarwnYobMIYKYX/8jVsTv4H
         PH8N93NtHUlMG1LrgAXEl3H9Tlb61yfRI5MdDhCx+vgiYw+ygDdxcT7i9p3/bMEr+YOf
         mat2WuDTToIKPq9B3EdclctuB/Rl9N/bOmXjs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=hwMtrDjZZWak/OBhI9B8V0Nq50TjiRXtgHTZ/cHOFFUAw9Ft5YmviGBZZxBlBxoSvh
         bsCAxENmnw/A/jIBrEVKeH+AFAdK65pdOVQRoMQekBoaESaITK8P4lnlE8+So4rYMMZk
         h+Ko6NCk8m4AK+hDOmbLTbm7v1K3W5HEYQiL0=
Received: by 10.223.113.65 with SMTP id z1mr10403727fap.38.1282870862345; Thu,
 26 Aug 2010 18:01:02 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.223.50.69 with HTTP; Thu, 26 Aug 2010 18:00:42 -0700 (PDT)
In-Reply-To: <AANLkTi=wy5fB2ncQJ=RkKzjTk3z_-kiQbDmO0jAcLtzr@mail.gmail.com>
References: <AANLkTinHR+d9D_i_xuy8poSF8WQskpBbsFzTHhHMV6-f@mail.gmail.com>
 <AANLkTi=QGHYXT4aeyVBbnf1HyZCV267dbYGLkaFhzDHC@mail.gmail.com> <AANLkTi=wy5fB2ncQJ=RkKzjTk3z_-kiQbDmO0jAcLtzr@mail.gmail.com>
From: Arun Rangarajan <arunrangarajan@gmail.com>
Date: Thu, 26 Aug 2010 18:00:42 -0700
Message-ID: <AANLkTinAHXcMNS49wwMGpT8nE+vZB7KQrVZEgaB6Mvyy@mail.gmail.com>
Subject: Re: Solr SynonymFilter in Lucene analyzer
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016369200970af4e0048ec3a6d5
X-Virus-Checked: Checked by ClamAV on apache.org

--0016369200970af4e0048ec3a6d5
Content-Type: text/plain; charset=ISO-8859-1

Thanks, Lance. After exploring for a while, I used lucene's ShingleFilter
followed by the SynonymFilter in Lucene in Action book. Then using the type
attribute, I removed all the shingles which did not belong to any category.

On Wed, Aug 18, 2010 at 10:28 PM, Lance Norskog <goksron@gmail.com> wrote:

> Yes, you need an analyzer that leaves successive words together as one
> long term. This might be easier to do with the new CharFilter tool,
> which processes text before it goes to the tokenizer.
>
> What you are doing here is similar to Parts-Of-Speech analysis, where
> text analysis software parses a sentence and labels words 'Noun',
> 'Verb', etc. One suite stores these labels as payloads on the terms.
> This might be a better way to store your categories, rather than using
> the synonym filter.
>
> On Wed, Aug 18, 2010 at 9:55 PM, Arun Rangarajan
> <arunrangarajan@gmail.com> wrote:
> > I think the lucene WhitespaceAnalyzer I am using inside Solr's
> SynonymFilter
> > is the one that prevents multi-word synonyms like "New York" from getting
> > mapped to the generic synonym name like CONCEPTYcity. It appears to me
> that
> > an analyzer which recognizes that a white-space is inside a synonym like
> > "New York" will be required. Do I need to implement one like this or is
> > there already an analyzer I can use? Looks like I am missing something
> here,
> > since Solr's SynonymFilter is supposed to handle this. Can someone tell
> me
> > what is the correct way to integrate Solr's SynonymFilter within a custom
> > lucene analyzer? Thanks.
> >
> >
> > On Tue, Aug 17, 2010 at 4:44 PM, Arun Rangarajan
> > <arunrangarajan@gmail.com>wrote:
> >
> >> I am trying to have multi-word synonyms work in lucene using Solr's *
> >> SynonymFilter*.
> >>
> >> I need to match synonyms at index time, since many of the synonym lists
> are
> >> huge. Actually they are really not synonyms, but are words that belong
> to a
> >> concept. For example, I would like to map {"New York", "Los Angeles",
> "New
> >> Orleans", "Salt Lake City"...}, a bunch of city names, to the concept
> called
> >> "city". While searching, the user query for the concept "city" will be
> >> translated to a keyword like, say "CONCEPTcity", which is the synonym
> for
> >> any city name.
> >>
> >> Using lucene's SynonymAnalyzer, as explained in Lucene in Action (p.
> 131),
> >> all I could match for "CONCEPTcity" is single word city names like
> >> "Chicago", "Seattle", "Boston", etc., It would not match multi-word city
> >> names like "New York", "Los Angeles", etc.,
> >>
> >> I tried using Solr's SynonymFilter in tokenStream method in a custom
> >> Analyzer (that extends org.apache.lucene.analysis.
> >> Analyzer - lucene ver. 2.9.3) using:
> >>
> >> *    public TokenStream tokenStream(String fieldName, Reader reader) {
> >>         TokenStream result = new SynonymFilter(
> >>                 new WhitespaceTokenizer(reader),
> >>                 synonymMap);
> >>         return result;
> >>     }
> >> *
> >> where *synonymMap* is loaded with synonyms using
> >>
> >> *synonymMap.add(conceptTerms, listOfTokens, true, true);*
> >>
> >> where *conceptTerms* is of type *ArrayList<String>* of all the terms in
> a
> >> concept and *listofTokens* is of type *List<Token>  *and contains only
> the
> >> generic synonym identifier like *CONCEPTcity*.
> >>
> >> When I print synonymMap using synonymMap.toString(), I get the output
> like
> >>
> >> <{New York=<{Chicago=<{Seattle=<{New
> >> Orleans=....<[(CONCEPTcity,0,0,type=SYNONYM),ORIG],null>}>}>}>....}>
> >>
> >> so it looks like all the synonyms are loaded. But if I search for
> >> "CONCEPTcity" then it says no matches found. I am not sure whether I
> have
> >> loaded the synonyms correctly in the synonymMap.
> >>
> >> Any help will be deeply appreciated. Thanks!
> >>
> >
>
>
>
> --
> Lance Norskog
> goksron@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016369200970af4e0048ec3a6d5--

From java-user-return-47150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 27 03:34:36 2010
Return-Path: <java-user-return-47150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86190 invoked from network); 27 Aug 2010 03:34:35 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Aug 2010 03:34:35 -0000
Received: (qmail 51119 invoked by uid 500); 27 Aug 2010 03:34:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51041 invoked by uid 500); 27 Aug 2010 03:34:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51032 invoked by uid 99); 27 Aug 2010 03:34:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Aug 2010 03:34:28 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of fancyerii@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Aug 2010 03:34:21 +0000
Received: by wwd20 with SMTP id 20so551119wwd.5
        for <java-user@lucene.apache.org>; Thu, 26 Aug 2010 20:34:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=quULEmpi0jCa9vPOFzE9m+4EDa+FZMoySn6napwNgGo=;
        b=cQ7Q/dgjUyFVYEginy8YRt/iK6kylJK1cj0aL6lKs5yfpOEQ9pTonAxqyXh9p7o3xA
         0VR36BxVGAIS0nCTKQi9XcS24mErEDyFDViOTZVTKdkwzSvQKvy3OESvVg5vVTytqu6P
         /p40Um1CW9TRKXtPiksn5YhCxhCyixzhWz6VA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=kql6AkYDSM7vbrrRl3+8/OZpGobEGQ9iNHs7+z8vxM4FgjYfIwgBVjgpWnWfO/Xr1L
         +JjvPxE0MqM9glWVvxMlvwWmZaJoCx2McegSE/drgCmSIxvOwdNupzEdZNXECGmGQ3IA
         PEcj2l0zGJY94zGWEJBOf9UUcafuiQoStwB9Y=
MIME-Version: 1.0
Received: by 10.216.54.193 with SMTP id i43mr217474wec.95.1282880040384; Thu,
 26 Aug 2010 20:34:00 -0700 (PDT)
Received: by 10.216.169.132 with HTTP; Thu, 26 Aug 2010 20:34:00 -0700 (PDT)
In-Reply-To: <8D02E901-B277-4CC9-8672-DC5C28F4F977@gmail.com>
References: <AANLkTimD-hdw4i1J2C6ov6HL6GgrvKH+5+QBR2yQgJ-U@mail.gmail.com>
	<8D02E901-B277-4CC9-8672-DC5C28F4F977@gmail.com>
Date: Fri, 27 Aug 2010 11:34:00 +0800
Message-ID: <AANLkTimdXvKre7F5=TUkz=US-suU1RbKsMQoXUCpr-iw@mail.gmail.com>
Subject: Re: instantiated contrib
From: Li Li <fancyerii@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

if I index only 7k documents, the time comparison:
time1: 7602331019 time2: 4246878035 total1: 10736 total2: 7393
it seems II is faster than RAMDirectory.

My indexed texts are all hotel names (chinese and english, litter french).
it has about 100k terms. terms such as hotel is very frequent and
hotel name is very rare(exception Hotel Chain).
so I guess it's distribution is a litter term is very frequent and
other term is very rare.

2010/8/27 Karl Wettin <karl.wettin@gmail.com>:
> My mail client died while sending this mail.. Sorry for any duplicate.
>
> It is strange that it should take 20 second to gather fields, this is the
> only thing that really suprises me. I'd expect it to be instant compared =
to
> RAMDirectory. It is hard to say from the information you provided. Did yo=
u
> perhaps lazy load field values from your RAMDirectory and not retrieve th=
em,
> or something like that?
>
> Why your queries are slow is also hard to say, there can be many reaons. =
70k
> documents can be quite a few documents for II if they contain enough text=
.
> Here are a few questions that may or may not be helpful:
>
> What is the content of the documents? Do they contain a lot of the same
> text? Or are they all rather unique? The major thing that makes II faster
> than RAMDirectory is that it does not have to deserialize values from the
> bytestream. As the index grows binary searching for documents containing =
a
> given term will start consume more time than deserializing the index.
>
> What speed do you see if you only load 10% (7k)?
>
> Did you see the graphics in the package level javadocs?
> http://lucene.apache.org/java/3_0_2/api/all/org/apache/lucene/store/insta=
ntiated/package-summary.html
>
>
> =A0 =A0 =A0 =A0karl
>
>
> 26 aug 2010 kl. 09.24 skrev Li Li:
>
>> I have about 70k document, the total indexed size is about 15MB(the
>> orginal text files' size).
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 dir=3Dnew RAMDirectory();
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 IndexWriter write=3Dnew IndexWriter(dir,...;
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 for(loop){
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0writer.addDocument(doc);
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 }
>> =A0 =A0 =A0 =A0writer.optimize();
>> =A0 =A0 =A0 =A0writer.close();
>>
>> =A0 =A0 =A0 =A0IndexReader ir=3DIndexReader.open(dir,true);
>> =A0 =A0 =A0 =A0InstantiatedIndex ii=3Dnew InstantiatedIndex(ir);
>> =A0 =A0 =A0 =A0InstantiatedIndexReader iir=3Dnew InstantiatedIndexReader=
(ii);
>> =A0 =A0 =A0 =A0is=3Dnew IndexSearcher(ir);
>> =A0 =A0 =A0 =A0is2=3Dnew IndexSearcher(iir);
>>
>> =A0 =A0 =A0 =A0 =A0 =A0 I calculate the time by:
>> =A0 =A0 =A0 =A0long searchStart=3DSystem.nanoTime();
>> =A0 =A0 =A0 =A0TopDocs docs=3Dis.search(bQuery,Integer.MAX_VALUE);
>> =A0 =A0 =A0 =A0long searchEnd=3DSystem.nanoTime();
>>
>> =A0 =A0 =A0 =A0 =A0 =A0I searched 10,000 documents and the time of RAMDi=
rectory
>> and instantiated
>> =A0 =A0 =A0 =A0 =A0 =A0the time used is time1: 21s(21812978000 ns) time2=
:
>> 20s(20713817000 ns)
>> =A0 =A0 =A0 =A0 =A0 =A0I also calulate the time including get field valu=
e:
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 total1: 23852ms total2: 22610ms
>> =A0 =A0 =A0 =A0 =A0 it seems instantiated is not much faster than
>> RAMDirectory. Is there any thing wrong I used? my max memory is 4GB
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: dev-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: dev-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 27 03:35:27 2010
Return-Path: <java-user-return-47151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86407 invoked from network); 27 Aug 2010 03:35:26 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Aug 2010 03:35:26 -0000
Received: (qmail 53084 invoked by uid 500); 27 Aug 2010 03:35:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53052 invoked by uid 500); 27 Aug 2010 03:35:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53044 invoked by uid 99); 27 Aug 2010 03:35:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Aug 2010 03:35:20 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [122.98.10.33] (HELO KECGATE08.infosys.com) (122.98.10.33)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Aug 2010 03:35:15 +0000
X-TM-IMSS-Message-ID:<04f4be080000d519@KECGATE08.infosys.com>
Received: from blrkechub03.ad.infosys.com ([10.66.236.43]) by KECGATE08.infosys.com ([122.98.10.33]) with ESMTP (TREND IMSS SMTP Service 7.0) id 04f4be080000d519 ; Fri, 27 Aug 2010 09:06:56 +0530
Received: from PUNITPCAS01.ad.infosys.com (10.76.151.51) by
 blrkechub03.ad.infosys.com (10.66.236.43) with Microsoft SMTP Server (TLS) id
 8.2.176.0; Fri, 27 Aug 2010 09:04:52 +0530
Received: from PUNITPMBX02.ad.infosys.com ([10.76.151.22]) by
 PUNITPCAS01.ad.infosys.com ([10.76.151.51]) with mapi; Fri, 27 Aug 2010
 09:04:51 +0530
From: Shelly_Singh <Shelly_Singh@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 27 Aug 2010 09:04:50 +0530
Subject: Bettering search performance
Thread-Topic: Bettering search performance
Thread-Index: Acs9JhutRg15dkiiTYG96T8VYBvn5QIcbRuA
Message-ID: <AA27F54EFDA0CE43B33EBDB7796323740CA27EEB0B@PUNITPMBX02.ad.infosys.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA2660945@PUNITPMBX02.ad.infosys.com>
 <AANLkTi=4LLNLK-wk9frni=ay0qkEokgnr+sLLfWPyZ=8@mail.gmail.com>
 <AA27F54EFDA0CE43B33EBDB7796323740CA2660988@PUNITPMBX02.ad.infosys.com>
 <528709861-1281428644-cardhu_decombobulator_blackberry.rim.net-283608400-@bda2121.bisx.produk.on.blackberry>
 <AA27F54EFDA0CE43B33EBDB7796323740CA2660B35@PUNITPMBX02.ad.infosys.com>
 <3B4AEBB59588ED409ECE3CB6517C41750EC8C16BEC@exchange.windows.mmu.acquiremedia.com>
 <AANLkTinJ=AE=+E1iyCqQxe26PSm2PgS_r-8+WMjcT_oG@mail.gmail.com>
 <AA27F54EFDA0CE43B33EBDB7796323740CA2660B5E@PUNITPMBX02.ad.infosys.com>
 <AANLkTi=YuvwdGjj=RoH6A1-nUhBN14xtc2LDeqiVBqmO@mail.gmail.com>
 <AA27F54EFDA0CE43B33EBDB7796323740CA2660B93@PUNITPMBX02.ad.infosys.com>
 <335122582-1281448159-cardhu_decombobulator_blackberry.rim.net-1093115328-@bda2121.bisx.produk.on.blackberry>
 <AANLkTimNUAsXpHUvPhFjhTn4djW38gpEmWeiBt-d0nEP@mail.gmail.com>
 <AA27F54EFDA0CE43B33EBDB7796323740CA2660CE4@PUNITPMBX02.ad.infosys.com>
 <AANLkTinKFPMtC4OYuLKp1AYVGrmTbw4pNXpa2eiEY+mp@mail.gmail.com>
 <AA27F54EFDA0CE43B33EBDB7796323740CA26DA10C@PUNITPMBX02.ad.infosys.com>
 <AANLkTikRMAQVK6SmWCrMm3KQSnrME-S+NWJTbODHX5Uk@mail.gmail.com>
In-Reply-To: <AANLkTikRMAQVK6SmWCrMm3KQSnrME-S+NWJTbODHX5Uk@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0

SGksDQoNCkkgaGF2ZSBhIGx1Y2VuZSBpbmRleCBvZiAxMDAgbWlsbGlvbiBkb2N1bWVudHMuIEJ1
dCB0aGUgZG9jdW1lbnQgc2l6ZSBpcyB2ZXJ5IHNtYWxsIC0gNSBmaWVsZHMgd2l0aCAxIG9yIDIg
dGVybXMgZWFjaC4gT25seSAxIGZpZWxkIGlzIGFuYWx5emVkIGFuZCBvdGhlcnMgYXJlIGp1c3Qg
c2ltcGx5IGluZGV4ZWQuIFRoZSBpbmRleCBpcyBvcHRpbWl6ZWQgdG8gMiBzZWdtZW50cyBhbmQg
dGhlIHRvdGFsIGluZGV4IHNpemUgaXMgN0dCLg0KDQpJIG9wZW4gYSBzZWFyY2hlciB3aXRoIGEg
dGVybXNJbmZvRGl2aXNvciB2YWx1ZSBhcyAnMTAnLiBJIGhhdmUgd2FybWVkIG15IHNlYXJjaGVy
IGJ5IGV4ZWN1dGluZyAxMCByYW5kb20gdGVybVF1ZXJpZXMgKG9uIHRoZSBmaWVsZCB0aGF0IGlz
IGFuYWx5emVkKS4gQWZ0ZXIgdGhpcywgd2hlbiBJIGRvIGEgc2VhcmNoIG9uIHRoZSBzYW1lIGZp
ZWxkLCBJIGdldCBhIHJlc3BvbnNlIHRpbWUgb2Ygb3ZlciAyIHNlY29uZHMuIA0KSSBhbSBleGVj
dXRpbmcgd2l0aCBhIFJBTSBvZiAxLjVHLiBJcyBpdCBwb3NzaWJsZSB0byBicmluZyB0aGUgc2Vh
cmNoIHRpbWUgZG93biB0byBmZXcgbWlsbGlzZWNvbmRzIGluIHRoaXMgY29uZmlndXJhdGlvbi4N
Cg0KQW55IHRpcHMgd291bGQgaGVscC4NCg0KDQpUaGFua3MgYW5kIFJlZ2FyZHMsDQoNClNoZWxs
eSBTaW5naA0KQ2VudGVyIEZvciBLTm93bGVkZ2UgRHJpdmVuIEluZm9ybWF0aW9uIFN5c3RlbXMs
IEluZm9zeXMNCkVtYWlsOiBzaGVsbHlfc2luZ2hAaW5mb3N5cy5jb20NClBob25lOiAoTSkgOTEg
OTkyIDM2OSA3MjAwLCAoVm9JUCkyMDIyOTc4NjIyDQo=


From java-user-return-47152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 27 03:35:59 2010
Return-Path: <java-user-return-47152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86509 invoked from network); 27 Aug 2010 03:35:59 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Aug 2010 03:35:59 -0000
Received: (qmail 55063 invoked by uid 500); 27 Aug 2010 03:35:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54916 invoked by uid 500); 27 Aug 2010 03:35:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54908 invoked by uid 99); 27 Aug 2010 03:35:54 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Aug 2010 03:35:54 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of fancyerii@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Aug 2010 03:35:31 +0000
Received: by wwd20 with SMTP id 20so552037wwd.5
        for <java-user@lucene.apache.org>; Thu, 26 Aug 2010 20:35:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=bJachuAuu5SrdLOLU0ty21Z79BcCuRlNtlt8zX+JpYM=;
        b=FbY4WIY7dfnqU5Up54Y0i4rJQXCh3sHvO+HaC0RS4+qnGWH+UNBUK7rvAlm0NBNtlW
         krXIt9ECE9G37E80SI14tJefi9JcESnZfs31RAENtn2bggvoId1OHfuk6YGb1iV+38VS
         FPkdEUMKvTIcypqj0uLuV0O+329HMn9Pc4eTw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=DVMndYKxTPdKVIgzlIqTi8DuNcGEbBYIngOkHZKSAqyd1GV3sJdgcWvqtxs5aYVntC
         ID317tesfOgKhk4A8mbV9qzvICBa5mpHLggFYZNfNozCjD6jXOyphrjelMIDZzhbO05r
         oJLCUOyjEq7XEfZAAQZ1XEcLXtEMRhdGXwmhs=
MIME-Version: 1.0
Received: by 10.216.44.141 with SMTP id n13mr215832web.16.1282880111324; Thu,
 26 Aug 2010 20:35:11 -0700 (PDT)
Received: by 10.216.169.132 with HTTP; Thu, 26 Aug 2010 20:35:11 -0700 (PDT)
In-Reply-To: <8D02E901-B277-4CC9-8672-DC5C28F4F977@gmail.com>
References: <AANLkTimD-hdw4i1J2C6ov6HL6GgrvKH+5+QBR2yQgJ-U@mail.gmail.com>
	<8D02E901-B277-4CC9-8672-DC5C28F4F977@gmail.com>
Date: Fri, 27 Aug 2010 11:35:11 +0800
Message-ID: <AANLkTik3-wYk3QzY6QdXk98FvkJ8+xbsPzzcMwoEbcbp@mail.gmail.com>
Subject: Re: instantiated contrib
From: Li Li <fancyerii@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

" It is strange that it should take 20 second to gather fields,"
20s including search and gather fields, it's the total time

2010/8/27 Karl Wettin <karl.wettin@gmail.com>:
> My mail client died while sending this mail.. Sorry for any duplicate.
>
> It is strange that it should take 20 second to gather fields, this is the
> only thing that really suprises me. I'd expect it to be instant compared =
to
> RAMDirectory. It is hard to say from the information you provided. Did yo=
u
> perhaps lazy load field values from your RAMDirectory and not retrieve th=
em,
> or something like that?
>
> Why your queries are slow is also hard to say, there can be many reaons. =
70k
> documents can be quite a few documents for II if they contain enough text=
.
> Here are a few questions that may or may not be helpful:
>
> What is the content of the documents? Do they contain a lot of the same
> text? Or are they all rather unique? The major thing that makes II faster
> than RAMDirectory is that it does not have to deserialize values from the
> bytestream. As the index grows binary searching for documents containing =
a
> given term will start consume more time than deserializing the index.
>
> What speed do you see if you only load 10% (7k)?
>
> Did you see the graphics in the package level javadocs?
> http://lucene.apache.org/java/3_0_2/api/all/org/apache/lucene/store/insta=
ntiated/package-summary.html
>
>
> =A0 =A0 =A0 =A0karl
>
>
> 26 aug 2010 kl. 09.24 skrev Li Li:
>
>> I have about 70k document, the total indexed size is about 15MB(the
>> orginal text files' size).
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 dir=3Dnew RAMDirectory();
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 IndexWriter write=3Dnew IndexWriter(dir,...;
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 for(loop){
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0writer.addDocument(doc);
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 }
>> =A0 =A0 =A0 =A0writer.optimize();
>> =A0 =A0 =A0 =A0writer.close();
>>
>> =A0 =A0 =A0 =A0IndexReader ir=3DIndexReader.open(dir,true);
>> =A0 =A0 =A0 =A0InstantiatedIndex ii=3Dnew InstantiatedIndex(ir);
>> =A0 =A0 =A0 =A0InstantiatedIndexReader iir=3Dnew InstantiatedIndexReader=
(ii);
>> =A0 =A0 =A0 =A0is=3Dnew IndexSearcher(ir);
>> =A0 =A0 =A0 =A0is2=3Dnew IndexSearcher(iir);
>>
>> =A0 =A0 =A0 =A0 =A0 =A0 I calculate the time by:
>> =A0 =A0 =A0 =A0long searchStart=3DSystem.nanoTime();
>> =A0 =A0 =A0 =A0TopDocs docs=3Dis.search(bQuery,Integer.MAX_VALUE);
>> =A0 =A0 =A0 =A0long searchEnd=3DSystem.nanoTime();
>>
>> =A0 =A0 =A0 =A0 =A0 =A0I searched 10,000 documents and the time of RAMDi=
rectory
>> and instantiated
>> =A0 =A0 =A0 =A0 =A0 =A0the time used is time1: 21s(21812978000 ns) time2=
:
>> 20s(20713817000 ns)
>> =A0 =A0 =A0 =A0 =A0 =A0I also calulate the time including get field valu=
e:
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 total1: 23852ms total2: 22610ms
>> =A0 =A0 =A0 =A0 =A0 it seems instantiated is not much faster than
>> RAMDirectory. Is there any thing wrong I used? my max memory is 4GB
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: dev-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: dev-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 27 06:36:24 2010
Return-Path: <java-user-return-47153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32184 invoked from network); 27 Aug 2010 06:36:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Aug 2010 06:36:24 -0000
Received: (qmail 62040 invoked by uid 500); 27 Aug 2010 06:36:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61587 invoked by uid 500); 27 Aug 2010 06:36:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61576 invoked by uid 99); 27 Aug 2010 06:36:19 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Aug 2010 06:36:19 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sanne.grinovero@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Aug 2010 06:35:57 +0000
Received: by vws4 with SMTP id 4so3402780vws.35
        for <java-user@lucene.apache.org>; Thu, 26 Aug 2010 23:35:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=MoMPhWrclOQtBn5xAzWJ3beAxqSjXGmAKWZiB6V8i9k=;
        b=BpDZcRg8Wd4e9bY/cKPKL7oXb+YkeoWOIhlYvZuTxd+jhq/pEevfYRDMF3wLotxqNZ
         w138QXpNz4tpW2ozJpmW8/I1lEnOJkAFxip/nYKylgMCi3yUJvDQJ/5omhVBqDcK5E73
         La8dgx4RtZfcK9dE7EZyTzAiVE5gZbhbuE4JA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=QDCFj5/r/57FkH/z42m7rJokS5uSRB4bNnZAwGgzxTPvIsbcHXRaaydZpmwiOfrT0N
         ui+wBmYnGMaE2W6KRJTC4VdpGittSKYukU1uuDuanZtjzdNvhBZRnynO5AX9sapybFHt
         +1f2fvAeiMPg5BJMicGtTgd6L2Hg1a/+oCRxI=
Received: by 10.220.60.70 with SMTP id o6mr267068vch.142.1282890936487; Thu,
 26 Aug 2010 23:35:36 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.220.195.136 with HTTP; Thu, 26 Aug 2010 23:35:16 -0700 (PDT)
In-Reply-To: <AANLkTi=0J4w4WFp-ACiT0XujRH3e0Xgn3Q2fP-GO084-@mail.gmail.com>
References: <AANLkTi=0J4w4WFp-ACiT0XujRH3e0Xgn3Q2fP-GO084-@mail.gmail.com>
From: Sanne Grinovero <sanne.grinovero@gmail.com>
Date: Fri, 27 Aug 2010 08:35:16 +0200
Message-ID: <AANLkTinY3F_E4KT2H7fZuyCaPR9Xx+T1-dwC8mD+=4W7@mail.gmail.com>
Subject: Re: Using multiple drives and non-CFS format to improve search performance
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Stefan,
you might want to consider org.apache.lucene.store.FileSwitchDirectory
before going for the symlinks approach.
Sorry I don't know the effect nor recommended file types, I would
naively start setting the smallest on SSD, then perform tests, but
that's possibly not the best scenario:
under stress the most-frequently used files will likely be cached by
your operating system, so to achieve the perfect setup you would need
to find which is the most frequently used types of files, excluding
what fits in your os cache.. I assume it's going to change with
configurations, index sizes and use cases: not an easy task.

Sanne

2010/8/26 Stefan Nikolic <stefan.nikolic@gmail.com>:
> Hi everyone,
>
> I'm trying to figure out the effects on search performance of using the
> non-CFS format and spreading the various underlying files to different
> disks/media types. For example, I'm considering moving a segment's various
> .t* term-related files onto a solid-state drive, the .fdx/.fdt
> stored-fields-related files onto a standard rotational drive, and using
> symlinks to hide all of this from Lucene.
>
> Any ideas on what the performance effects of such a setup would be? Which
> files would you recommend putting on the slower media, and which on the
> faster media?
>
> Thanks!
>
> -Stefan
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 27 08:48:15 2010
Return-Path: <java-user-return-47154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60368 invoked from network); 27 Aug 2010 08:48:15 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Aug 2010 08:48:15 -0000
Received: (qmail 85922 invoked by uid 500); 27 Aug 2010 08:48:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85557 invoked by uid 500); 27 Aug 2010 08:48:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85548 invoked by uid 99); 27 Aug 2010 08:48:08 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Aug 2010 08:48:07 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of karl.wettin@gmail.com designates 209.85.215.48 as permitted sender)
Received: from [209.85.215.48] (HELO mail-ew0-f48.google.com) (209.85.215.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Aug 2010 08:47:43 +0000
Received: by ewy10 with SMTP id 10so2446069ewy.35
        for <java-user@lucene.apache.org>; Fri, 27 Aug 2010 01:47:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=3NHeAHedrzTGcScEeQTZs0jVG3BL3EKyvCjBnso/ubY=;
        b=L/loAZ5KUW5BVjCtWzj3dsjxoTBizCffe+iDEgCFHSievT50PVKMps1xfunyukPrFW
         ZwGkKOV9+B1fzurfOldXTVCGgomWP8euPhK+hek/92loBYq2j1OZdn3pBgYP+B/z7kRG
         joVu0CxRP1A/IhRNjmvFUTiB5JFHVbEb/bYnc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=rRuXvwK3umS6B0PsNNmU3BapKssUd6CgzWHryVuDBcQWSvhLxrq/Z2OJavVCtLcmLo
         olT0yQqheu2Cb4eiZXH/Uo43Tqu0S/eqYilguETi2OeE5QvnSRmWVTNv+cUYtD+875j6
         ny56N1rP7N3vhS3jye0+LVW2hV6BVf7Ny2XkA=
Received: by 10.213.36.16 with SMTP id r16mr611235ebd.37.1282898843545;
        Fri, 27 Aug 2010 01:47:23 -0700 (PDT)
Received: from [192.168.1.201] (c-918770d5.029-18-6d6c6d2.cust.bredbandsbolaget.se [213.112.135.145])
        by mx.google.com with ESMTPS id z55sm5698505eeh.9.2010.08.27.01.47.21
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 27 Aug 2010 01:47:22 -0700 (PDT)
Message-Id: <B7CFFF8E-9D06-4907-A437-5A1CB8AC1E38@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <AANLkTimdXvKre7F5=TUkz=US-suU1RbKsMQoXUCpr-iw@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v936)
Subject: Re: instantiated contrib
Date: Fri, 27 Aug 2010 10:47:19 +0200
References: <AANLkTimD-hdw4i1J2C6ov6HL6GgrvKH+5+QBR2yQgJ-U@mail.gmail.com> <8D02E901-B277-4CC9-8672-DC5C28F4F977@gmail.com> <AANLkTimdXvKre7F5=TUkz=US-suU1RbKsMQoXUCpr-iw@mail.gmail.com>
X-Mailer: Apple Mail (2.936)
X-Virus-Checked: Checked by ClamAV on apache.org

Can you tell us what your queries are? Is it simple term queries,  
phrases, fuzzy, etc?

I think the bad guy here is the term "hotel", that so many documents  
contains it. You could try loading the full index to II and see how  
long time it take to match just that term and compare. And then try a  
more unique term.

If this indeed is the bad guy here are two solutions that might work  
depending on your needs:

Replace all queries for "hotel" with a filter and remove "hotel" from  
your term queries. This might decrease p/r for phrases etc.

Index and query using shingles to create more unique terms. This will  
also improve p/r for phrases if you don't already do phrase queries  
and if you do it should save you time at query time as you might no  
longer need the phrase queries. But the index size will grow.

I'm sure there are other solutions too, but to be quite honest I think  
your corpus is pushing the limit for when it make sense with an II. My  
guess is that you can get it perhaps 2x faster than a RAMDirectory if  
you tune it right.



	karl

27 aug 2010 kl. 05.34 skrev Li Li:

> if I index only 7k documents, the time comparison:
> time1: 7602331019 time2: 4246878035 total1: 10736 total2: 7393
> it seems II is faster than RAMDirectory.
>
> My indexed texts are all hotel names (chinese and english, litter  
> french).
> it has about 100k terms. terms such as hotel is very frequent and
> hotel name is very rare(exception Hotel Chain).
> so I guess it's distribution is a litter term is very frequent and
> other term is very rare.
>
> 2010/8/27 Karl Wettin <karl.wettin@gmail.com>:
>> My mail client died while sending this mail.. Sorry for any  
>> duplicate.
>>
>> It is strange that it should take 20 second to gather fields, this  
>> is the
>> only thing that really suprises me. I'd expect it to be instant  
>> compared to
>> RAMDirectory. It is hard to say from the information you provided.  
>> Did you
>> perhaps lazy load field values from your RAMDirectory and not  
>> retrieve them,
>> or something like that?
>>
>> Why your queries are slow is also hard to say, there can be many  
>> reaons. 70k
>> documents can be quite a few documents for II if they contain  
>> enough text.
>> Here are a few questions that may or may not be helpful:
>>
>> What is the content of the documents? Do they contain a lot of the  
>> same
>> text? Or are they all rather unique? The major thing that makes II  
>> faster
>> than RAMDirectory is that it does not have to deserialize values  
>> from the
>> bytestream. As the index grows binary searching for documents  
>> containing a
>> given term will start consume more time than deserializing the index.
>>
>> What speed do you see if you only load 10% (7k)?
>>
>> Did you see the graphics in the package level javadocs?
>> http://lucene.apache.org/java/3_0_2/api/all/org/apache/lucene/store/instantiated/package-summary.html
>>
>>
>>        karl
>>
>>
>> 26 aug 2010 kl. 09.24 skrev Li Li:
>>
>>> I have about 70k document, the total indexed size is about 15MB(the
>>> orginal text files' size).
>>>               dir=new RAMDirectory();
>>>               IndexWriter write=new IndexWriter(dir,...;
>>>               for(loop){
>>>                    writer.addDocument(doc);
>>>               }
>>>        writer.optimize();
>>>        writer.close();
>>>
>>>        IndexReader ir=IndexReader.open(dir,true);
>>>        InstantiatedIndex ii=new InstantiatedIndex(ir);
>>>        InstantiatedIndexReader iir=new InstantiatedIndexReader(ii);
>>>        is=new IndexSearcher(ir);
>>>        is2=new IndexSearcher(iir);
>>>
>>>             I calculate the time by:
>>>        long searchStart=System.nanoTime();
>>>        TopDocs docs=is.search(bQuery,Integer.MAX_VALUE);
>>>        long searchEnd=System.nanoTime();
>>>
>>>            I searched 10,000 documents and the time of RAMDirectory
>>> and instantiated
>>>            the time used is time1: 21s(21812978000 ns) time2:
>>> 20s(20713817000 ns)
>>>            I also calulate the time including get field value:
>>>               total1: 23852ms total2: 22610ms
>>>           it seems instantiated is not much faster than
>>> RAMDirectory. Is there any thing wrong I used? my max memory is 4GB
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: dev-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: dev-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 27 08:57:55 2010
Return-Path: <java-user-return-47155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64783 invoked from network); 27 Aug 2010 08:57:54 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Aug 2010 08:57:54 -0000
Received: (qmail 9004 invoked by uid 500); 27 Aug 2010 08:57:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8505 invoked by uid 500); 27 Aug 2010 08:57:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8497 invoked by uid 99); 27 Aug 2010 08:57:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Aug 2010 08:57:48 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Aug 2010 08:57:41 +0000
Received: from [172.18.226.237] (172.18.226.237) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.436.0; Fri, 27 Aug 2010 10:57:19 +0200
Subject: Re: Bettering search performance
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <AA27F54EFDA0CE43B33EBDB7796323740CA27EEB0B@PUNITPMBX02.ad.infosys.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA2660945@PUNITPMBX02.ad.infosys.com>
	 <AANLkTi=4LLNLK-wk9frni=ay0qkEokgnr+sLLfWPyZ=8@mail.gmail.com>
	 <AA27F54EFDA0CE43B33EBDB7796323740CA2660988@PUNITPMBX02.ad.infosys.com>
	 <528709861-1281428644-cardhu_decombobulator_blackberry.rim.net-283608400-@bda2121.bisx.produk.on.blackberry>
	 <AA27F54EFDA0CE43B33EBDB7796323740CA2660B35@PUNITPMBX02.ad.infosys.com>
	 <3B4AEBB59588ED409ECE3CB6517C41750EC8C16BEC@exchange.windows.mmu.acquiremedia.com>
	 <AANLkTinJ=AE=+E1iyCqQxe26PSm2PgS_r-8+WMjcT_oG@mail.gmail.com>
	 <AA27F54EFDA0CE43B33EBDB7796323740CA2660B5E@PUNITPMBX02.ad.infosys.com>
	 <AANLkTi=YuvwdGjj=RoH6A1-nUhBN14xtc2LDeqiVBqmO@mail.gmail.com>
	 <AA27F54EFDA0CE43B33EBDB7796323740CA2660B93@PUNITPMBX02.ad.infosys.com>
	 <335122582-1281448159-cardhu_decombobulator_blackberry.rim.net-1093115328-@bda2121.bisx.produk.on.blackberry>
	 <AANLkTimNUAsXpHUvPhFjhTn4djW38gpEmWeiBt-d0nEP@mail.gmail.com>
	 <AA27F54EFDA0CE43B33EBDB7796323740CA2660CE4@PUNITPMBX02.ad.infosys.com>
	 <AANLkTinKFPMtC4OYuLKp1AYVGrmTbw4pNXpa2eiEY+mp@mail.gmail.com>
	 <AA27F54EFDA0CE43B33EBDB7796323740CA26DA10C@PUNITPMBX02.ad.infosys.com>
	 <AANLkTikRMAQVK6SmWCrMm3KQSnrME-S+NWJTbODHX5Uk@mail.gmail.com>
	 <AA27F54EFDA0CE43B33EBDB7796323740CA27EEB0B@PUNITPMBX02.ad.infosys.com>
Content-Type: text/plain; charset="UTF-8"
Organization: State and University Library, Denmark
Date: Fri, 27 Aug 2010 10:57:14 +0200
Message-ID: <1282899434.32369.316.camel@te-prime>
MIME-Version: 1.0
X-Mailer: Evolution 2.28.3 
Content-Transfer-Encoding: 7bit

On Fri, 2010-08-27 at 05:34 +0200, Shelly_Singh wrote:
> I have a lucene index of 100 million documents. [...]  total index size is 7GB.

[...]

> I get a response time of over 2 seconds.

How many documents match such a query and how many of those documents do
you process (i.e. extract a term for)?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 27 09:47:19 2010
Return-Path: <java-user-return-47156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77647 invoked from network); 27 Aug 2010 09:47:19 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Aug 2010 09:47:19 -0000
Received: (qmail 54267 invoked by uid 500); 27 Aug 2010 09:47:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53849 invoked by uid 500); 27 Aug 2010 09:47:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53838 invoked by uid 99); 27 Aug 2010 09:47:13 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Aug 2010 09:47:13 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [122.98.14.32] (HELO kecgate02.infosys.com) (122.98.14.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Aug 2010 09:46:51 +0000
X-TM-IMSS-Message-ID:<0665295700012a5d@kecgate02.infosys.com>
Received: from blrkechub01.ad.infosys.com ([10.66.236.41]) by kecgate02.infosys.com ([122.98.14.32]) with ESMTP (TREND IMSS SMTP Service 7.0) id 0665295700012a5d ; Fri, 27 Aug 2010 15:16:21 +0530
Received: from PUNITPHUB02.ad.infosys.com (10.76.151.42) by
 blrkechub01.ad.infosys.com (10.66.236.41) with Microsoft SMTP Server (TLS) id
 8.2.176.0; Fri, 27 Aug 2010 15:16:28 +0530
Received: from PUNITPMBX02.ad.infosys.com ([10.76.151.22]) by
 PUNITPHUB02.ad.infosys.com ([10.76.151.42]) with mapi; Fri, 27 Aug 2010
 15:16:27 +0530
From: Shelly_Singh <Shelly_Singh@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>,
	"te@statsbiblioteket.dk" <te@statsbiblioteket.dk>
Date: Fri, 27 Aug 2010 15:16:26 +0530
Subject: RE: Bettering search performance
Thread-Topic: Bettering search performance
Thread-Index: ActFxfKASCAuEs/wSRWKrQJBRV3SSgABn73w
Message-ID: <AA27F54EFDA0CE43B33EBDB7796323740CA27EED2E@PUNITPMBX02.ad.infosys.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA2660945@PUNITPMBX02.ad.infosys.com>
	 <AANLkTi=4LLNLK-wk9frni=ay0qkEokgnr+sLLfWPyZ=8@mail.gmail.com>
	 <AA27F54EFDA0CE43B33EBDB7796323740CA2660988@PUNITPMBX02.ad.infosys.com>
	 <528709861-1281428644-cardhu_decombobulator_blackberry.rim.net-283608400-@bda2121.bisx.produk.on.blackberry>
	 <AA27F54EFDA0CE43B33EBDB7796323740CA2660B35@PUNITPMBX02.ad.infosys.com>
	 <3B4AEBB59588ED409ECE3CB6517C41750EC8C16BEC@exchange.windows.mmu.acquiremedia.com>
	 <AANLkTinJ=AE=+E1iyCqQxe26PSm2PgS_r-8+WMjcT_oG@mail.gmail.com>
	 <AA27F54EFDA0CE43B33EBDB7796323740CA2660B5E@PUNITPMBX02.ad.infosys.com>
	 <AANLkTi=YuvwdGjj=RoH6A1-nUhBN14xtc2LDeqiVBqmO@mail.gmail.com>
	 <AA27F54EFDA0CE43B33EBDB7796323740CA2660B93@PUNITPMBX02.ad.infosys.com>
	 <335122582-1281448159-cardhu_decombobulator_blackberry.rim.net-1093115328-@bda2121.bisx.produk.on.blackberry>
	 <AANLkTimNUAsXpHUvPhFjhTn4djW38gpEmWeiBt-d0nEP@mail.gmail.com>
	 <AA27F54EFDA0CE43B33EBDB7796323740CA2660CE4@PUNITPMBX02.ad.infosys.com>
	 <AANLkTinKFPMtC4OYuLKp1AYVGrmTbw4pNXpa2eiEY+mp@mail.gmail.com>
	 <AA27F54EFDA0CE43B33EBDB7796323740CA26DA10C@PUNITPMBX02.ad.infosys.com>
	 <AANLkTikRMAQVK6SmWCrMm3KQSnrME-S+NWJTbODHX5Uk@mail.gmail.com>
	 <AA27F54EFDA0CE43B33EBDB7796323740CA27EEB0B@PUNITPMBX02.ad.infosys.com>
 <1282899434.32369.316.camel@te-prime>
In-Reply-To: <1282899434.32369.316.camel@te-prime>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

VGhlIHF1ZXJpZXMgdGhhdCBJIGhhdmUgcmVjb3JkZWQgcGVyZm9ybWFuY2UgZm9yIG1hdGNoZXMg
ZG9jdW1lbnRzIHJhbmdpbmcgZnJvbSAzNDAgdG8gMzAwMC4gSSBhbSBub3QgcHJvY2Vzc2luZyBh
bnkgZG9jdW1lbnRzIHlldDsgSSBtZWFuIHRpbWUgb2YgMiBzZWNvbmRzIGRvZXMgbm90IGluY2x1
ZGUgdGltZSBmb3IgcHJvY2Vzc2luZyAvY29sbGVjdCBzY29yZURvY3MuLi4NCg0KVGhhbmtzIGFu
ZCBSZWdhcmRzLA0KDQpTaGVsbHkgU2luZ2gNCkNlbnRlciBGb3IgS05vd2xlZGdlIERyaXZlbiBJ
bmZvcm1hdGlvbiBTeXN0ZW1zLCBJbmZvc3lzDQpFbWFpbDogc2hlbGx5X3NpbmdoQGluZm9zeXMu
Y29tDQpQaG9uZTogKE0pIDkxIDk5MiAzNjkgNzIwMCwgKFZvSVApMjAyMjk3ODYyMg0KDQoNCi0t
LS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQpGcm9tOiBUb2tlIEVza2lsZHNlbiBbbWFpbHRvOnRl
QHN0YXRzYmlibGlvdGVrZXQuZGtdIA0KU2VudDogRnJpZGF5LCBBdWd1c3QgMjcsIDIwMTAgMjoy
NyBQTQ0KVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KU3ViamVjdDogUmU6IEJldHRl
cmluZyBzZWFyY2ggcGVyZm9ybWFuY2UNCg0KT24gRnJpLCAyMDEwLTA4LTI3IGF0IDA1OjM0ICsw
MjAwLCBTaGVsbHlfU2luZ2ggd3JvdGU6DQo+IEkgaGF2ZSBhIGx1Y2VuZSBpbmRleCBvZiAxMDAg
bWlsbGlvbiBkb2N1bWVudHMuIFsuLi5dICB0b3RhbCBpbmRleCBzaXplIGlzIDdHQi4NCg0KWy4u
Ll0NCg0KPiBJIGdldCBhIHJlc3BvbnNlIHRpbWUgb2Ygb3ZlciAyIHNlY29uZHMuDQoNCkhvdyBt
YW55IGRvY3VtZW50cyBtYXRjaCBzdWNoIGEgcXVlcnkgYW5kIGhvdyBtYW55IG9mIHRob3NlIGRv
Y3VtZW50cyBkbw0KeW91IHByb2Nlc3MgKGkuZS4gZXh0cmFjdCBhIHRlcm0gZm9yKT8NCg0KDQot
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmli
ZUBsdWNlbmUuYXBhY2hlLm9yZw0KRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2
YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcNCg0K


From java-user-return-47157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 27 12:54:13 2010
Return-Path: <java-user-return-47157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38455 invoked from network); 27 Aug 2010 12:54:13 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Aug 2010 12:54:13 -0000
Received: (qmail 92790 invoked by uid 500); 27 Aug 2010 12:54:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92383 invoked by uid 500); 27 Aug 2010 12:54:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92375 invoked by uid 99); 27 Aug 2010 12:54:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Aug 2010 12:54:07 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [70.182.184.44] (HELO mailsecurity.capitallegals.com) (70.182.184.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Aug 2010 12:54:00 +0000
X-AuditID: c0a8032b-9e0f1bb000001eef-d4-4c77b5526548
Received: from Cmail.Capitallegals.com (cmail.capitallegals.com [192.168.3.18])
	by mailsecurity.capitallegals.com (Symantec Mail Security) with ESMTP id B7855558002
	for <java-user@lucene.apache.org>; Fri, 27 Aug 2010 08:53:38 -0400 (EDT)
Received: from EXCHSVR.IN.Capitallegals.com ([10.1.2.10]) by Cmail.Capitallegals.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 27 Aug 2010 08:53:38 -0400
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CB45E6.DB71E624"
Subject: contrib -surround query -How to add default operator in surround query ?
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Fri, 27 Aug 2010 18:23:30 +0530
Message-ID: <B1B793DEA6F70E45B586B5DF2ADA0DF66EEA73@EXCHSVR.IN.Capitallegals.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: contrib -surround query -How to add default operator in surround query ?
Thread-Index: ActF5tmwoJuxPNZhQg6Kdk/qAMicbg==
From: "Jagdish Vasani IN" <jvasani@in.Capitallegals.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Aug 2010 12:53:38.0305 (UTC) FILETIME=[DE35BF10:01CB45E6]
X-Brightmail-Tracker: AAAAAA==

------_=_NextPart_001_01CB45E6.DB71E624
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

Can any one guide me.. how I can accomplish to add default operator
(W/1) in surround query ?

=20

Thanks,

Jagdish

=20


------_=_NextPart_001_01CB45E6.DB71E624--

From java-user-return-47158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 27 12:59:39 2010
Return-Path: <java-user-return-47158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39266 invoked from network); 27 Aug 2010 12:59:38 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Aug 2010 12:59:38 -0000
Received: (qmail 99938 invoked by uid 500); 27 Aug 2010 12:59:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99293 invoked by uid 500); 27 Aug 2010 12:59:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99279 invoked by uid 99); 27 Aug 2010 12:59:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Aug 2010 12:59:31 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [70.182.184.44] (HELO mailsecurity.capitallegals.com) (70.182.184.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Aug 2010 12:59:25 +0000
X-AuditID: c0a8032b-9e0f1bb000001eef-ec-4c77b698958b
Received: from Cmail.Capitallegals.com (cmail.capitallegals.com [192.168.3.18])
	by mailsecurity.capitallegals.com (Symantec Mail Security) with ESMTP id 6C014558002
	for <java-user@lucene.apache.org>; Fri, 27 Aug 2010 08:59:04 -0400 (EDT)
Received: from EXCHSVR.IN.Capitallegals.com ([10.1.2.10]) by Cmail.Capitallegals.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 27 Aug 2010 08:59:04 -0400
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: contrib -surround query -How to add default operator in surround query ?
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Fri, 27 Aug 2010 18:28:56 +0530
Message-ID: <B1B793DEA6F70E45B586B5DF2ADA0DF66EEA74@EXCHSVR.IN.Capitallegals.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: contrib -surround query -How to add default operator in surround query ?
Thread-Index: ActF5tmwoJuxPNZhQg6Kdk/qAMicbgAAD3ww
References: <B1B793DEA6F70E45B586B5DF2ADA0DF66EEA73@EXCHSVR.IN.Capitallegals.com>
From: "Jagdish Vasani IN" <jvasani@in.Capitallegals.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Aug 2010 12:59:04.0291 (UTC) FILETIME=[A0834330:01CB45E7]
X-Brightmail-Tracker: AAAAAA==

Hi,

I mean to say ..if I want to query like "Solr rocks" with Surround query
then I have to explicitly pass slop like "Solr 1w rocks"
I want to implement this logic in code so user can only enter "solr
rocks"..so internally  default operator (1w) will be added inbetween two
words.

Any suggestions?

Thanks,
Jagdish

-----Original Message-----
From: Jagdish Vasani IN [mailto:jvasani@in.Capitallegals.com]=20
Sent: Friday, August 27, 2010 6:24 PM
To: java-user@lucene.apache.org
Subject: contrib -surround query -How to add default operator in
surround query ?

Hi,

=20

Can any one guide me.. how I can accomplish to add default operator
(W/1) in surround query ?

=20

Thanks,

Jagdish

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 27 14:58:23 2010
Return-Path: <java-user-return-47159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74468 invoked from network); 27 Aug 2010 14:58:22 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Aug 2010 14:58:22 -0000
Received: (qmail 88355 invoked by uid 500); 27 Aug 2010 14:58:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87977 invoked by uid 500); 27 Aug 2010 14:58:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87792 invoked by uid 99); 27 Aug 2010 14:58:16 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Aug 2010 14:58:16 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [70.182.184.44] (HELO mailsecurity.capitallegals.com) (70.182.184.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Aug 2010 14:57:52 +0000
X-AuditID: c0a8032b-a38fcbb000001eef-48-4c77d25a9d3f
Received: from Cmail.Capitallegals.com (cmail.capitallegals.com [192.168.3.18])
	by mailsecurity.capitallegals.com (Symantec Mail Security) with ESMTP id C6EE5558002
	for <java-user@lucene.apache.org>; Fri, 27 Aug 2010 10:57:30 -0400 (EDT)
Received: from EXCHSVR.IN.Capitallegals.com ([10.1.2.10]) by Cmail.Capitallegals.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 27 Aug 2010 10:57:30 -0400
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: How to eliminate stop words from Surround  query ?
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Fri, 27 Aug 2010 20:27:23 +0530
Message-ID: <B1B793DEA6F70E45B586B5DF2ADA0DF66EEA81@EXCHSVR.IN.Capitallegals.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to eliminate stop words from Surround  query ?
Thread-Index: ActCy98xz/V9pnQ+RP2WbtlhMwaNMQDKkQgg
References: <B1B793DEA6F70E45B586B5DF2ADA0DF66EE942@EXCHSVR.IN.Capitallegals.com>
From: "Jagdish Vasani IN" <jvasani@in.Capitallegals.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Aug 2010 14:57:30.0665 (UTC) FILETIME=[2C3DE190:01CB45F8]
X-Brightmail-Tracker: AAAAARXElsw=
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I get it working..here is logic that need to implement...

In function getTermQuery check term is stop word or not if it is stop
word then return null.
Otherwise return SrndTermQuery object..

Code ...

protected SrndQuery getTermQuery(
        String term, boolean quoted) {
       if(stopwordList !=3D null && stopwordList.contains(term))
            return null;
    return new SrndTermQuery(term, quoted);
}

Here stopwordList is static collection..


Next in each Query function (NQuery, NotQuery, AndQuery, WQuery) add
code as per following OrQuery=20


SrndQuery OrQuery() : {
  SrndQuery q;
  SrndQuery prevq =3D null;
  ArrayList queries =3D null;
  Token oprt =3D null;
}{
  q =3D AndQuery()
  ( oprt =3D <OR> { /* keep only last used operator */
      if (queries =3D=3D null) {
        queries =3D new ArrayList();
      }
      if(q !=3D null)
        queries.add(q);
      prevq =3D q;
      if(queries.size() >=3D 2){
         q =3D getOrQuery(queries, true /* infix */, oprt);
         return q;
      }


    }   =20
    q =3D AndQuery() {
      if(q !=3D null)
        queries.add(q);
      else
        q =3D prevq;
       =20
      if(queries.size() >=3D 2){
            q =3D getOrQuery(queries, true /* infix */, oprt);
      }

    }
  )*
  {return q;}
}

Now generate QueryParser.java file using javaCC then do search..

Thanks,
Jagdish.


-----Original Message-----
From: Jagdish Vasani IN [mailto:jvasani@in.Capitallegals.com]=20
Sent: Monday, August 23, 2010 7:33 PM
To: java-user@lucene.apache.org
Subject: How to eliminate stop words from Surround query ?

Hi,

=20

All , I want to eliminate stop words from surround  query how I can do
that ...as I am new to QueryParser languages(JavaCC) ..

Any Ideas or suggestions ?

=20

Thanks,

Jagdish


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 27 15:27:11 2010
Return-Path: <java-user-return-47160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83519 invoked from network); 27 Aug 2010 15:27:10 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Aug 2010 15:27:10 -0000
Received: (qmail 18554 invoked by uid 500); 27 Aug 2010 15:27:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18356 invoked by uid 500); 27 Aug 2010 15:27:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18348 invoked by uid 99); 27 Aug 2010 15:27:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Aug 2010 15:27:07 +0000
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stefan.nikolic@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Aug 2010 15:27:02 +0000
Received: by bwz14 with SMTP id 14so2803522bwz.35
        for <java-user@lucene.apache.org>; Fri, 27 Aug 2010 08:26:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=kObgurXUTLVaTMO2z2sRWdgEdiMRK90EroZeK0gtQfw=;
        b=oTKmsG+fk7hDib/JJdKPoW+Y88NfAJXQTr815RKJxlgg1MGrK9Dlo916/oG0rnsPz5
         dYcdtg/KR0Fx+ojZ2xWqSoiQAbEgvNt3Y9BlR5Iif0badpyTVaF1H1FOWf0RdJrATifx
         QLK1G/eIrMqJ0NJgZexS5UbwGVEir1E8afTac=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=mH+Rj1Vnn7CM3vYvhGlc+jbt25lI+YnLMRz7H6tizNa1ZAI0SViIo1j/Vf2nIsDQ8W
         b9yxIVtmzbvi6s0mhZ0cF7HYVKWlJ0i0q3cLDCGk4AZeuiqH2GuebHdRI/qAoIbAgrne
         xmuO/7wVe33SC9s68C84d4I52wIuVL2OXzX7M=
MIME-Version: 1.0
Received: by 10.204.48.75 with SMTP id q11mr620373bkf.0.1282922800995; Fri, 27
 Aug 2010 08:26:40 -0700 (PDT)
Received: by 10.204.127.143 with HTTP; Fri, 27 Aug 2010 08:26:40 -0700 (PDT)
In-Reply-To: <AANLkTinY3F_E4KT2H7fZuyCaPR9Xx+T1-dwC8mD+=4W7@mail.gmail.com>
References: <AANLkTi=0J4w4WFp-ACiT0XujRH3e0Xgn3Q2fP-GO084-@mail.gmail.com>
	<AANLkTinY3F_E4KT2H7fZuyCaPR9Xx+T1-dwC8mD+=4W7@mail.gmail.com>
Date: Fri, 27 Aug 2010 11:26:40 -0400
Message-ID: <AANLkTimufEQ2B7_6wq=JtWRKS3c6__hw2Ghm6bO6kAVm@mail.gmail.com>
Subject: Re: Using multiple drives and non-CFS format to improve search performance
From: Stefan Nikolic <stefan.nikolic@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6dd85c6d3dfe5048ecfbda3

--0016e6dd85c6d3dfe5048ecfbda3
Content-Type: text/plain; charset=ISO-8859-1

Sanne,

I'd prefer to use symlinks for existing, static indexes, but I'm really glad
you showed me FileSwitchDirectory. I think it will be useful for me in the
future. Thanks for your advice!

Any tips on how to convert an existing CFS index to non-CFS? I'm aware of
the extractor in IndexReader, but I don't know how to repair/rebuild the
segments_N file afterwards. Is this even possible?

Also, I found this:
http://lucene.472066.n3.nabble.com/Distributing-index-over-N-disks-td577483.html
Gives
me hope!

Thanks again,
Stefan

On Fri, Aug 27, 2010 at 2:35 AM, Sanne Grinovero
<sanne.grinovero@gmail.com>wrote:

> Hi Stefan,
> you might want to consider org.apache.lucene.store.FileSwitchDirectory
> before going for the symlinks approach.
> Sorry I don't know the effect nor recommended file types, I would
> naively start setting the smallest on SSD, then perform tests, but
> that's possibly not the best scenario:
> under stress the most-frequently used files will likely be cached by
> your operating system, so to achieve the perfect setup you would need
> to find which is the most frequently used types of files, excluding
> what fits in your os cache.. I assume it's going to change with
> configurations, index sizes and use cases: not an easy task.
>
> Sanne
>
> 2010/8/26 Stefan Nikolic <stefan.nikolic@gmail.com>:
> > Hi everyone,
> >
> > I'm trying to figure out the effects on search performance of using the
> > non-CFS format and spreading the various underlying files to different
> > disks/media types. For example, I'm considering moving a segment's
> various
> > .t* term-related files onto a solid-state drive, the .fdx/.fdt
> > stored-fields-related files onto a standard rotational drive, and using
> > symlinks to hide all of this from Lucene.
> >
> > Any ideas on what the performance effects of such a setup would be? Which
> > files would you recommend putting on the slower media, and which on the
> > faster media?
> >
> > Thanks!
> >
> > -Stefan
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6dd85c6d3dfe5048ecfbda3--

From java-user-return-47161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 27 17:13:51 2010
Return-Path: <java-user-return-47161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12880 invoked from network); 27 Aug 2010 17:13:51 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Aug 2010 17:13:51 -0000
Received: (qmail 49394 invoked by uid 500); 27 Aug 2010 17:13:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49302 invoked by uid 500); 27 Aug 2010 17:13:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49294 invoked by uid 99); 27 Aug 2010 17:13:48 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Aug 2010 17:13:48 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Aug 2010 17:13:27 +0000
Received: by qyk2 with SMTP id 2so3733311qyk.14
        for <java-user@lucene.apache.org>; Fri, 27 Aug 2010 10:13:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=V+606QI3vZFb6D0XNfbZjLQpxccUgL+tef1NOGGnYZA=;
        b=Aik97zYXTxOce6hgiqVCnj+zCcV5C7qywcKKyTCQcPMj88+DWbycRzBaXO48dGjv4R
         XFGcUV9or6KIgomV4sjN4dOoT5PVz08cuqKbH2wfqt8M5huz7jjZ/jE/3TlqRyHjxyug
         w8GbiBKoWwZPfdTU1/iOylj1rTMAeL09Zv6xA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=WaaM7od9lGXZzKm7JPw356srZXkYBQnzKp7kUVXVWTvan2jYxZdnZLEo9sodNyMTUV
         IHKGbTiNSFvMt77hDnlsXd55pDlpc6R5tRJfNFvGi/u4QLVphHWQrXXQoqmP4O7LHIEz
         LLeh7So10rxsFZJ6z94gmCNjXtG7paFjqg7Rc=
MIME-Version: 1.0
Received: by 10.224.11.131 with SMTP id t3mr641439qat.17.1282929183730; Fri,
 27 Aug 2010 10:13:03 -0700 (PDT)
Received: by 10.229.186.83 with HTTP; Fri, 27 Aug 2010 10:13:03 -0700 (PDT)
In-Reply-To: <AA27F54EFDA0CE43B33EBDB7796323740CA27EED2E@PUNITPMBX02.ad.infosys.com>
References: <AA27F54EFDA0CE43B33EBDB7796323740CA2660945@PUNITPMBX02.ad.infosys.com>
	<AANLkTi=4LLNLK-wk9frni=ay0qkEokgnr+sLLfWPyZ=8@mail.gmail.com>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660988@PUNITPMBX02.ad.infosys.com>
	<528709861-1281428644-cardhu_decombobulator_blackberry.rim.net-283608400-@bda2121.bisx.produk.on.blackberry>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660B35@PUNITPMBX02.ad.infosys.com>
	<3B4AEBB59588ED409ECE3CB6517C41750EC8C16BEC@exchange.windows.mmu.acquiremedia.com>
	<AANLkTinJ=AE=+E1iyCqQxe26PSm2PgS_r-8+WMjcT_oG@mail.gmail.com>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660B5E@PUNITPMBX02.ad.infosys.com>
	<AANLkTi=YuvwdGjj=RoH6A1-nUhBN14xtc2LDeqiVBqmO@mail.gmail.com>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660B93@PUNITPMBX02.ad.infosys.com>
	<335122582-1281448159-cardhu_decombobulator_blackberry.rim.net-1093115328-@bda2121.bisx.produk.on.blackberry>
	<AANLkTimNUAsXpHUvPhFjhTn4djW38gpEmWeiBt-d0nEP@mail.gmail.com>
	<AA27F54EFDA0CE43B33EBDB7796323740CA2660CE4@PUNITPMBX02.ad.infosys.com>
	<AANLkTinKFPMtC4OYuLKp1AYVGrmTbw4pNXpa2eiEY+mp@mail.gmail.com>
	<AA27F54EFDA0CE43B33EBDB7796323740CA26DA10C@PUNITPMBX02.ad.infosys.com>
	<AANLkTikRMAQVK6SmWCrMm3KQSnrME-S+NWJTbODHX5Uk@mail.gmail.com>
	<AA27F54EFDA0CE43B33EBDB7796323740CA27EEB0B@PUNITPMBX02.ad.infosys.com>
	<1282899434.32369.316.camel@te-prime>
	<AA27F54EFDA0CE43B33EBDB7796323740CA27EED2E@PUNITPMBX02.ad.infosys.com>
Date: Fri, 27 Aug 2010 10:13:03 -0700
Message-ID: <AANLkTi=eviVGVVQv9qh+fShF5DzqLQn9pCt2iTbLJR3C@mail.gmail.com>
Subject: Re: Bettering search performance
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd1f8c844acc9048ed13ac7
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd1f8c844acc9048ed13ac7
Content-Type: text/plain; charset=ISO-8859-1

I'm assuming that the queries you're timing also do not sort. Warmup queries
that don't sort also don't help speed up the first queries that do sort.

But assuming that sorting isn't the problem, you'll need to do a bit of
performance
monitoring. You haven't mentioned what op system you're using, so suggesting
a particular quick-n-dirty tool is kinda hard....

I suspect though that you're swapping. 1.5G or a 7G index jumps out as the
first place to look...

HTH
Erick

On Fri, Aug 27, 2010 at 2:46 AM, Shelly_Singh <Shelly_Singh@infosys.com>wrote:

> The queries that I have recorded performance for matches documents ranging
> from 340 to 3000. I am not processing any documents yet; I mean time of 2
> seconds does not include time for processing /collect scoreDocs...
>
> Thanks and Regards,
>
> Shelly Singh
> Center For KNowledge Driven Information Systems, Infosys
> Email: shelly_singh@infosys.com
> Phone: (M) 91 992 369 7200, (VoIP)2022978622
>
>
> -----Original Message-----
> From: Toke Eskildsen [mailto:te@statsbiblioteket.dk]
> Sent: Friday, August 27, 2010 2:27 PM
> To: java-user@lucene.apache.org
> Subject: Re: Bettering search performance
>
> On Fri, 2010-08-27 at 05:34 +0200, Shelly_Singh wrote:
> > I have a lucene index of 100 million documents. [...]  total index size
> is 7GB.
>
> [...]
>
> > I get a response time of over 2 seconds.
>
> How many documents match such a query and how many of those documents do
> you process (i.e. extract a term for)?
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd1f8c844acc9048ed13ac7--

From java-user-return-47162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 27 19:33:40 2010
Return-Path: <java-user-return-47162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54952 invoked from network); 27 Aug 2010 19:33:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Aug 2010 19:33:40 -0000
Received: (qmail 53169 invoked by uid 500); 27 Aug 2010 19:33:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53121 invoked by uid 500); 27 Aug 2010 19:33:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53113 invoked by uid 99); 27 Aug 2010 19:33:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Aug 2010 19:33:37 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jdixon@omniti.com designates 8.8.38.6 as permitted sender)
Received: from [8.8.38.6] (HELO edge.omniti.com) (8.8.38.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Aug 2010 19:33:31 +0000
DKIM-Signature: v=1; a=rsa-sha256; d=omniti.com; s=s1024; c=relaxed/relaxed;
	q=dns/txt; i=@omniti.com; t=1282937588;
	h=From:Subject:Date:To;
	bh=RMTKPw5KG9HiDTSd83mha4tbgbmrkkMMt+p2rtWdTiw=;
	b=V/vNrWodMPX5XO+5ugJNZ+Pk+MvzavzHEgjT7SgY3akyhAXNe3WA7Nabs90iTLMQ
	A/n39fbsYP2sIoNVg+f4C4psitZs6xcLSaK6ThuXzpBnTJahxGpPieA4uFbmwrku
	Jk+bkK52zPNv7J5blVO7eUbjqBzLqdrRK9U7i99fsnM=;
Authentication-Results:  edge smtp.user=jdixon@omniti.com; auth=pass (LOGIN)
Received: from [68.55.0.29] ([68.55.0.29:56445] helo=omniti.com)
	by edge (envelope-from <jdixon@omniti.com>)
	(ecelerity 2.2.3.46 r(37468M)) with ESMTPSA (cipher=AES256-SHA) 
	id 37/47-03409-3F2187C4; Fri, 27 Aug 2010 15:33:08 -0400
Date: Fri, 27 Aug 2010 15:33:04 -0400
From: Jason Dixon <jdixon@omniti.com>
To: java-user@lucene.apache.org
Subject: Surge 2010 Early Registration ends Tuesday!
Message-ID: <20100827193304.GE1736@omniti.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.5.18 (2008-05-17)

Early Bird Registration for Surge Scalability Conference 2010 ends next
Tuesday, August 31.  We have a killer lineup of speakers and architects
from across the Internet.  Listen to experts talk about the newest
methods and technologies for scaling your Web presence.

http://omniti.com/surge/2010/register

This year's event is all about the challenges faced (and overcome) in
real-life production architectures.  Meet the engineering talent from
some of the best and brightest throughout the Internet:

John Allspaw, Etsy
Theo Schlossnagle, OmniTI
Bryan Cantrill, Joyent
Rasmus Lerdorf, creator of PHP
Tom Cook, Facebook
Benjamin Black, fast_ip
Christopher Brown, Opscode
Artur Bergman, Wikia
Baron Schwartz, Percona
Paul Querna, Cloudkick

Surge 2010 takes place at the Tremont Grand Historic Venue on Sept 30
and Oct 1, 2010 in Baltimore, MD.  Register NOW for the Early Bird
discount and guarantee your seat to this year's event!


-- 
Jason Dixon
OmniTI Computer Consulting, Inc.
jdixon@omniti.com
443.325.1357 x.241

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 28 02:12:33 2010
Return-Path: <java-user-return-47163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70811 invoked from network); 28 Aug 2010 02:12:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Aug 2010 02:12:32 -0000
Received: (qmail 67499 invoked by uid 500); 28 Aug 2010 02:12:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67418 invoked by uid 500); 28 Aug 2010 02:12:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67410 invoked by uid 99); 28 Aug 2010 02:12:30 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Aug 2010 02:12:30 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of alertli@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Aug 2010 02:12:07 +0000
Received: by wwj40 with SMTP id 40so628027wwj.5
        for <java-user@lucene.apache.org>; Fri, 27 Aug 2010 19:11:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=8ACRioK0jBEAWyuepErtr4vDRPpR3r0hhwaD6mkqqk0=;
        b=ou6pSlutU169xKSxiA/kreQSVCgNl5wofTXjVLBcpwOafRRMLb0Dh/G5EAHmqFW6ld
         bSLXcF9Odp2+iE7UtTiS6aWJ5Aw8pdjKbDTYcK2ICQdkAbLZUqhI24c0t/wWxpr51uBo
         1910egkPRBfBWftsEmJXVGlAKYLRU3eUjPGzg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=mVRxBkvsXSTsH9WHr+5RjOs1cq6cmirisMEEegufKw2Yq3QERB+FvqNP7Z8Ph8d2bx
         4R2Bfpj0s2MOy5Lgq3XLAzFx6SVpWxKzkgCKRWvB2tdUOuumEZ7BlbNgfpf+HyULl7Dh
         w3mxq7g6ncwbRRSbMGqcrhqcqlAcWeEpJrTSI=
MIME-Version: 1.0
Received: by 10.216.90.148 with SMTP id e20mr1802578wef.8.1282961506741; Fri,
 27 Aug 2010 19:11:46 -0700 (PDT)
Received: by 10.216.9.1 with HTTP; Fri, 27 Aug 2010 19:11:46 -0700 (PDT)
Date: Fri, 27 Aug 2010 22:11:46 -0400
Message-ID: <AANLkTin8rdszsciL5wy9McMRhL=HKvxPHasqLrjSTzHQ@mail.gmail.com>
Subject: questions regarding index boost vs search boost for multivalued fields
From: Qi Li <alertli@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6dab0aedeacf2048ed8c0de
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6dab0aedeacf2048ed8c0de
Content-Type: text/plain; charset=ISO-8859-1

Here is my index structure.
 for each document:
      Field   articleTitle     (only one value)
      Field   majorHeading    (multiple values)
      Field   minorHeading     (multiple values)

I use heading (can be both majorHeadings or minorHeadings) to search.  What
I want is that majorHeading is more important than minorHeading.  I can
boost the majorHeading during index in two ways
      method 1:    for every major field of the same document,
field.setBoost(2f)
      method 2:    only the first major field of the same document,
field.setBoost(2f)

Looks like both ways give me the correct result.
Questions 1 :  What is the difference between boosting only the first field
or boosting all fields for a multivalued field?

In addition, I can also boost the majorHeading during searching if I choose
not to boost in index time
Question 2    What is the trade-off between index boost and search boost?

I will appreciate your help a lot.

Best regards,
Qi Li

--0016e6dab0aedeacf2048ed8c0de--

From java-user-return-47164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 28 06:46:07 2010
Return-Path: <java-user-return-47164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28004 invoked from network); 28 Aug 2010 06:46:07 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Aug 2010 06:46:07 -0000
Received: (qmail 50593 invoked by uid 500); 28 Aug 2010 06:46:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50055 invoked by uid 500); 28 Aug 2010 06:46:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50047 invoked by uid 99); 28 Aug 2010 06:45:59 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Aug 2010 06:45:59 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Aug 2010 06:45:36 +0000
Received: by qyk12 with SMTP id 12so1630789qyk.14
        for <java-user@lucene.apache.org>; Fri, 27 Aug 2010 23:45:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=E+RQb6mKM887jF3X/Zsv1PUdPv4ad7I3vffn1f5rmnY=;
        b=JPlwqUEHjJxmG6TB9wV+OtAEcr7PBLvDRYWuEN+T+5NNsfXqOff8wHFfpWHnEywRxf
         4smpD/e0c8ysrmVzorwMXvHkV/hsUQXi1dGaipgZzZu9X3WA/udcNMpd/+wjn0rCvDCB
         3VLqsEuonnPdOBy9McSXn4neXyVbpHxvcN+Mg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=GtQL2h9QB5MUoSecMB7emKFmQdOiP6t5FJudB2754g52YxNXQvggkrZqf5Af23uyd0
         oJGdu0KcfWEmWf3p6IpW58MPbbiWi2jsEyKstlBIVym0/Toiq6TKoM6f+EFvpCWNPev5
         AdIiWuw/9xiIdZ0sdnfZVlT7yEENbExh+ZQPI=
MIME-Version: 1.0
Received: by 10.224.65.197 with SMTP id k5mr1146025qai.52.1282977915538; Fri,
 27 Aug 2010 23:45:15 -0700 (PDT)
Received: by 10.229.186.83 with HTTP; Fri, 27 Aug 2010 23:45:15 -0700 (PDT)
In-Reply-To: <AANLkTin8rdszsciL5wy9McMRhL=HKvxPHasqLrjSTzHQ@mail.gmail.com>
References: <AANLkTin8rdszsciL5wy9McMRhL=HKvxPHasqLrjSTzHQ@mail.gmail.com>
Date: Fri, 27 Aug 2010 23:45:15 -0700
Message-ID: <AANLkTikMysMVUAi2JJmM1s6G4daHO7bti5L8YZPqoCmL@mail.gmail.com>
Subject: Re: questions regarding index boost vs search boost for multivalued fields
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00c09f99e3ffe90f45048edc9242
X-Virus-Checked: Checked by ClamAV on apache.org

--00c09f99e3ffe90f45048edc9242
Content-Type: text/plain; charset=ISO-8859-1

Index time and query time boosts have different meanings.
Boosting at index time says "this document's title is more
important than other documents titles". Query time boosts
express "I want matches in the title of a document to count
more than matches in other fields for this query". I guess if
you boosted the titles in all the documents, it'd be about the
same as boosting every title match in every query...

But relying on index-time boosting is not very flexible. To
change the boosts, you have to re-index which can be
very expensive. And you really have no idea what effect
boosts have until you run some trials. Even worse, for
your boosts to have the effect you want, you may have to
change the values as your corpus changes. Which is
very easy to do with query-time boosts, but requires
reindexing with index-time boosts.

In terms of cost, I don't think that there's any noticeable
advantage either way. Query time boosts will probably cause
an extra multiplication, but that's such a minor part of the
total cost of a query that I'd ignore it to start with.

Finally, I think (but don't know for sure) that boosting multiple
values of a multi-valued field uses the last boost set for the
entire field. I'd be surprised if the multi-valued boosts were
kept separately (but I've been surprised before).

Best
Erick

On Fri, Aug 27, 2010 at 7:11 PM, Qi Li <alertli@gmail.com> wrote:

> Here is my index structure.
>  for each document:
>      Field   articleTitle     (only one value)
>      Field   majorHeading    (multiple values)
>      Field   minorHeading     (multiple values)
>
> I use heading (can be both majorHeadings or minorHeadings) to search.  What
> I want is that majorHeading is more important than minorHeading.  I can
> boost the majorHeading during index in two ways
>      method 1:    for every major field of the same document,
> field.setBoost(2f)
>      method 2:    only the first major field of the same document,
> field.setBoost(2f)
>
> Looks like both ways give me the correct result.
> Questions 1 :  What is the difference between boosting only the first field
> or boosting all fields for a multivalued field?
>
> In addition, I can also boost the majorHeading during searching if I choose
> not to boost in index time
> Question 2    What is the trade-off between index boost and search boost?
>
> I will appreciate your help a lot.
>
> Best regards,
> Qi Li
>

--00c09f99e3ffe90f45048edc9242--

From java-user-return-47165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 29 20:39:17 2010
Return-Path: <java-user-return-47165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59570 invoked from network); 29 Aug 2010 20:39:17 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 29 Aug 2010 20:39:17 -0000
Received: (qmail 21508 invoked by uid 500); 29 Aug 2010 20:39:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21374 invoked by uid 500); 29 Aug 2010 20:39:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21366 invoked by uid 99); 29 Aug 2010 20:39:14 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Aug 2010 20:39:14 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.12 as permitted sender)
Received: from [80.91.229.12] (HELO lo.gmane.org) (80.91.229.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Aug 2010 20:38:51 +0000
Received: from list by lo.gmane.org with local (Exim 4.69)
	(envelope-from <jak-lucene-user@m.gmane.org>)
	id 1Opoe1-0000Rs-6K
	for java-user@lucene.apache.org; Sun, 29 Aug 2010 22:38:25 +0200
Received: from ool-457569c4.dyn.optonline.net ([69.117.105.196])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sun, 29 Aug 2010 22:38:25 +0200
Received: from gepardcv by ool-457569c4.dyn.optonline.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sun, 29 Aug 2010 22:38:25 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From: Constantine Vetoshev <gepardcv@gmail.com>
Subject: Re: Fields with Field.Store.NO and Field.Index.ANALYZED not being indexed
Date: Sun, 29 Aug 2010 16:38:11 -0400
Lines: 75
Message-ID: <m2tymdyx1o.fsf_-_@athena.local.i-did-not-set--mail-host-address--so-tickle-me>
References: <m2bpecmbff.fsf@athena.local.i-did-not-set--mail-host-address--so-tickle-me>
	<359a92831003251327j110470d7r5380db0910910747@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Complaints-To: usenet@dough.gmane.org
X-Gmane-NNTP-Posting-Host: ool-457569c4.dyn.optonline.net
User-Agent: Gnus/5.13 (Gnus v5.13) Emacs/23.2 (darwin)
Cancel-Lock: sha1:nZ7LUW0ksACZu/nWVjDFpqs53wI=
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Erick.

I finally had time to go back and look at this problem. I discovered
that the analyzed fields work fine for searching until I use
IndexWriter.updateDocument().

The way my application runs, it has to update documents several times to
update one specific field. The update code queries out Document objects
using a unique identifier, and updates the field. The problem is in
Document objects returned by the query. The querying code runs a search,
and eventually calls IndexSearcher.doc(int). According to the API
documentation, that method only returns Document objects with stored
fields from the underlying index.

I tried calling IndexSearcher.doc(int i, FieldSelector fieldSelector)
with fieldSelector set to null: the documentation states that this
returns Document objects with all fields, but that also only seems to
return stored fields.

So my question becomes: how can I update a document which contains
non-stored analyzed fields without clobbering the analyzed-only fields?
Note that I do not need to update the analyzed-only fields. I have found
nothing helpful in the documentation.

--
Regards,
Constantine Vetoshev


Erick Erickson <erickerickson@gmail.com> writes:

> I would be extraordinarily surprised if this was in Lucene, this is so
> basic to how it works that the howls would be heard world-round <G>.
>
> So I'm guessing it's in your code. Could you show it to us? Or, better
> yet, create a small, self-contained test case that illustrates your problem?
>
> Also, what analyzer(s) are you using? And what do your docs look like?
>
> Best
> Erick
>
> On Thu, Mar 25, 2010 at 3:46 PM, Constantine Vetoshev <gepardcv@gmail.com>wrote:
>
>> I have a strange problem with Field.Store.NO and Field.Index.ANALYZED
>> fields with Lucene 3.0.1.
>>
>> I'm testing my app with twenty test documents. Each has about ten
>> fields. All fields except one, "Content", are set as
>> Field.Store.YES. The "Content" field is set as Field.Store.NO and
>> Field.Index.ANALYZED. Using Luke, I discovered that this "Content" field
>> is not persisted to the disk, except on one document (neither the first
>> nor the last in the list). This always happens for exactly the same
>> document. When I examine the Document object before writing it, it has
>> the "Content" field I expect.
>>
>> When I change the "Content" field from Field.Store.NO to
>> Field.Store.YES, everything starts working. Every document has the
>> "Content" field exactly as I expect, and searches produce the hits I
>> expect to see. I really don't want to save the full "Content" data in
>> the Lucene index, though. I'm baffled why Field.Store.NO results in
>> nothing being written to the index even with Field.Index.ANALYZED.
>>
>> Suggestions?
>>
>> --
>> Regards,
>> Constantine Vetoshev
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 29 20:47:37 2010
Return-Path: <java-user-return-47166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60509 invoked from network); 29 Aug 2010 20:47:36 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 29 Aug 2010 20:47:36 -0000
Received: (qmail 26762 invoked by uid 500); 29 Aug 2010 20:47:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26708 invoked by uid 500); 29 Aug 2010 20:47:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26700 invoked by uid 99); 29 Aug 2010 20:47:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Aug 2010 20:47:34 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Aug 2010 20:47:28 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 148A345E57D
	for <java-user@lucene.apache.org>; Sun, 29 Aug 2010 22:47:00 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id i9r7eiWCxuNS for <java-user@lucene.apache.org>;
	Sun, 29 Aug 2010 22:46:45 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id CE75845E574
	for <java-user@lucene.apache.org>; Sun, 29 Aug 2010 22:46:44 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <m2bpecmbff.fsf@athena.local.i-did-not-set--mail-host-address--so-tickle-me>	<359a92831003251327j110470d7r5380db0910910747@mail.gmail.com> <m2tymdyx1o.fsf_-_@athena.local.i-did-not-set--mail-host-address--so-tickle-me>
In-Reply-To: <m2tymdyx1o.fsf_-_@athena.local.i-did-not-set--mail-host-address--so-tickle-me>
Subject: RE: Fields with Field.Store.NO and Field.Index.ANALYZED not being indexed
Date: Sun, 29 Aug 2010 22:48:17 +0200
Message-ID: <001d01cb47bb$8231cf70$86956e50$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQFELJNwHIJ9oPKXHxDMYsdAbcDRxwG2K44bAmMgSeuT5lLogA==
Content-Language: de

You cannot retrieve non-stored fields. They are analyzed and tokenized
during indexing and this is a one-way transformation. If you update
documents you have to reindex the contents. If you do not have access to the
original contents anymore, you may consider adding a stored-only "raw
document" field, that contains everything to rebuild the indexed fields. In
our installation, we have a stored field containing the JSON/XML source
document to do this.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Constantine Vetoshev [mailto:gepardcv@gmail.com]
> Sent: Sunday, August 29, 2010 10:38 PM
> To: java-user@lucene.apache.org
> Subject: Re: Fields with Field.Store.NO and Field.Index.ANALYZED not being
> indexed
> 
> Thanks Erick.
> 
> I finally had time to go back and look at this problem. I discovered that
the
> analyzed fields work fine for searching until I use
> IndexWriter.updateDocument().
> 
> The way my application runs, it has to update documents several times to
> update one specific field. The update code queries out Document objects
using
> a unique identifier, and updates the field. The problem is in Document
objects
> returned by the query. The querying code runs a search, and eventually
calls
> IndexSearcher.doc(int). According to the API documentation, that method
only
> returns Document objects with stored fields from the underlying index.
> 
> I tried calling IndexSearcher.doc(int i, FieldSelector fieldSelector) with
> fieldSelector set to null: the documentation states that this returns
Document
> objects with all fields, but that also only seems to return stored fields.
> 
> So my question becomes: how can I update a document which contains non-
> stored analyzed fields without clobbering the analyzed-only fields?
> Note that I do not need to update the analyzed-only fields. I have found
nothing
> helpful in the documentation.
> 
> --
> Regards,
> Constantine Vetoshev
> 
> 
> Erick Erickson <erickerickson@gmail.com> writes:
> 
> > I would be extraordinarily surprised if this was in Lucene, this is so
> > basic to how it works that the howls would be heard world-round <G>.
> >
> > So I'm guessing it's in your code. Could you show it to us? Or, better
> > yet, create a small, self-contained test case that illustrates your
problem?
> >
> > Also, what analyzer(s) are you using? And what do your docs look like?
> >
> > Best
> > Erick
> >
> > On Thu, Mar 25, 2010 at 3:46 PM, Constantine Vetoshev
> <gepardcv@gmail.com>wrote:
> >
> >> I have a strange problem with Field.Store.NO and Field.Index.ANALYZED
> >> fields with Lucene 3.0.1.
> >>
> >> I'm testing my app with twenty test documents. Each has about ten
> >> fields. All fields except one, "Content", are set as Field.Store.YES.
> >> The "Content" field is set as Field.Store.NO and
> >> Field.Index.ANALYZED. Using Luke, I discovered that this "Content"
> >> field is not persisted to the disk, except on one document (neither
> >> the first nor the last in the list). This always happens for exactly
> >> the same document. When I examine the Document object before writing
> >> it, it has the "Content" field I expect.
> >>
> >> When I change the "Content" field from Field.Store.NO to
> >> Field.Store.YES, everything starts working. Every document has the
> >> "Content" field exactly as I expect, and searches produce the hits I
> >> expect to see. I really don't want to save the full "Content" data in
> >> the Lucene index, though. I'm baffled why Field.Store.NO results in
> >> nothing being written to the index even with Field.Index.ANALYZED.
> >>
> >> Suggestions?
> >>
> >> --
> >> Regards,
> >> Constantine Vetoshev
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 29 21:48:00 2010
Return-Path: <java-user-return-47167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80069 invoked from network); 29 Aug 2010 21:48:00 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 29 Aug 2010 21:48:00 -0000
Received: (qmail 50513 invoked by uid 500); 29 Aug 2010 21:47:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50413 invoked by uid 500); 29 Aug 2010 21:47:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50405 invoked by uid 99); 29 Aug 2010 21:47:57 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Aug 2010 21:47:57 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Aug 2010 21:47:35 +0000
Received: by qyk12 with SMTP id 12so2759384qyk.14
        for <java-user@lucene.apache.org>; Sun, 29 Aug 2010 14:47:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=PRA19QYkkiBNI6UG1Z+lvZaBTcNiP5eOc/5goHAI7uk=;
        b=Y6dmVVVgMMYRzuKCHB5xY6gBWbAtxjjhsWEILz0czt3xxzhuvyB1D7CySOxXya6WY2
         O3+jZYCNwkKgOHOyv5WzZE3aJHHhraITxX9mTQYj+S4H2LqZSSTLhOa7l76LicMApXCD
         tWqUpCmsxz4/pWMzA7fl+oVTHWGbE721ILbJk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=MjDpG9+9LBE5lhDHDY+ItfkGxXg34qy9Wa3py1mBa6FysIYK1wzE3a5sf0/TQxrZhe
         KS0945msag25ZgT5QKfne8LxdzPCEbzxG+4uwBUlvScLP7azl3UAIDW58sENTkYBdpgj
         6KdyjxhFJxdVz229pIU5tHpnDCov+CYdbsWSc=
MIME-Version: 1.0
Received: by 10.229.224.146 with SMTP id io18mr2433191qcb.171.1283118109586;
 Sun, 29 Aug 2010 14:41:49 -0700 (PDT)
Received: by 10.229.186.83 with HTTP; Sun, 29 Aug 2010 14:41:49 -0700 (PDT)
In-Reply-To: <001d01cb47bb$8231cf70$86956e50$@thetaphi.de>
References: <m2bpecmbff.fsf@athena.local.i-did-not-set--mail-host-address--so-tickle-me>
	<359a92831003251327j110470d7r5380db0910910747@mail.gmail.com>
	<m2tymdyx1o.fsf_-_@athena.local.i-did-not-set--mail-host-address--so-tickle-me>
	<001d01cb47bb$8231cf70$86956e50$@thetaphi.de>
Date: Sun, 29 Aug 2010 14:41:49 -0700
Message-ID: <AANLkTikXppA0ar=hQx_GjJGo1yGo3CanuA+0oq97UiKd@mail.gmail.com>
Subject: Re: Fields with Field.Store.NO and Field.Index.ANALYZED not being indexed
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364ec9ca2077ce048efd3780
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364ec9ca2077ce048efd3780
Content-Type: text/plain; charset=ISO-8859-1

Adding to Uwe's comment, you may be operating under a false
assumption. Lucene has no capability to update fields in a document.
Period. This is one of the most frequently requested changes, but
the nature of an inverted index makes this...er...tricky. Updates
are really a document delete followed by a document add. And as
a bonus, the new document won't even have the same internal
Lucene doc id as the one it replaces.

So if you're reading a document from the index, non-stored fields
are not part of the new update and your results will be...uhmmmm....
not what you expect...

Best
Erick

On Sun, Aug 29, 2010 at 1:48 PM, Uwe Schindler <uwe@thetaphi.de> wrote:

> You cannot retrieve non-stored fields. They are analyzed and tokenized
> during indexing and this is a one-way transformation. If you update
> documents you have to reindex the contents. If you do not have access to
> the
> original contents anymore, you may consider adding a stored-only "raw
> document" field, that contains everything to rebuild the indexed fields. In
> our installation, we have a stored field containing the JSON/XML source
> document to do this.
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
> > -----Original Message-----
> > From: Constantine Vetoshev [mailto:gepardcv@gmail.com]
> > Sent: Sunday, August 29, 2010 10:38 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: Fields with Field.Store.NO and Field.Index.ANALYZED not
> being
> > indexed
> >
> > Thanks Erick.
> >
> > I finally had time to go back and look at this problem. I discovered that
> the
> > analyzed fields work fine for searching until I use
> > IndexWriter.updateDocument().
> >
> > The way my application runs, it has to update documents several times to
> > update one specific field. The update code queries out Document objects
> using
> > a unique identifier, and updates the field. The problem is in Document
> objects
> > returned by the query. The querying code runs a search, and eventually
> calls
> > IndexSearcher.doc(int). According to the API documentation, that method
> only
> > returns Document objects with stored fields from the underlying index.
> >
> > I tried calling IndexSearcher.doc(int i, FieldSelector fieldSelector)
> with
> > fieldSelector set to null: the documentation states that this returns
> Document
> > objects with all fields, but that also only seems to return stored
> fields.
> >
> > So my question becomes: how can I update a document which contains non-
> > stored analyzed fields without clobbering the analyzed-only fields?
> > Note that I do not need to update the analyzed-only fields. I have found
> nothing
> > helpful in the documentation.
> >
> > --
> > Regards,
> > Constantine Vetoshev
> >
> >
> > Erick Erickson <erickerickson@gmail.com> writes:
> >
> > > I would be extraordinarily surprised if this was in Lucene, this is so
> > > basic to how it works that the howls would be heard world-round <G>.
> > >
> > > So I'm guessing it's in your code. Could you show it to us? Or, better
> > > yet, create a small, self-contained test case that illustrates your
> problem?
> > >
> > > Also, what analyzer(s) are you using? And what do your docs look like?
> > >
> > > Best
> > > Erick
> > >
> > > On Thu, Mar 25, 2010 at 3:46 PM, Constantine Vetoshev
> > <gepardcv@gmail.com>wrote:
> > >
> > >> I have a strange problem with Field.Store.NO and Field.Index.ANALYZED
> > >> fields with Lucene 3.0.1.
> > >>
> > >> I'm testing my app with twenty test documents. Each has about ten
> > >> fields. All fields except one, "Content", are set as Field.Store.YES.
> > >> The "Content" field is set as Field.Store.NO and
> > >> Field.Index.ANALYZED. Using Luke, I discovered that this "Content"
> > >> field is not persisted to the disk, except on one document (neither
> > >> the first nor the last in the list). This always happens for exactly
> > >> the same document. When I examine the Document object before writing
> > >> it, it has the "Content" field I expect.
> > >>
> > >> When I change the "Content" field from Field.Store.NO to
> > >> Field.Store.YES, everything starts working. Every document has the
> > >> "Content" field exactly as I expect, and searches produce the hits I
> > >> expect to see. I really don't want to save the full "Content" data in
> > >> the Lucene index, though. I'm baffled why Field.Store.NO results in
> > >> nothing being written to the index even with Field.Index.ANALYZED.
> > >>
> > >> Suggestions?
> > >>
> > >> --
> > >> Regards,
> > >> Constantine Vetoshev
> > >>
> > >>
> > >> ---------------------------------------------------------------------
> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>
> > >>
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016364ec9ca2077ce048efd3780--

From java-user-return-47168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 30 03:34:58 2010
Return-Path: <java-user-return-47168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78009 invoked from network); 30 Aug 2010 03:34:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Aug 2010 03:34:57 -0000
Received: (qmail 3914 invoked by uid 500); 30 Aug 2010 03:34:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3401 invoked by uid 500); 30 Aug 2010 03:34:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3393 invoked by uid 99); 30 Aug 2010 03:34:51 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Aug 2010 03:34:51 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.12 as permitted sender)
Received: from [80.91.229.12] (HELO lo.gmane.org) (80.91.229.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Aug 2010 03:34:29 +0000
Received: from list by lo.gmane.org with local (Exim 4.69)
	(envelope-from <jak-lucene-user@m.gmane.org>)
	id 1Opv8H-0003ws-BP
	for java-user@lucene.apache.org; Mon, 30 Aug 2010 05:34:05 +0200
Received: from ool-457569c4.dyn.optonline.net ([69.117.105.196])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Mon, 30 Aug 2010 05:34:05 +0200
Received: from gepardcv by ool-457569c4.dyn.optonline.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Mon, 30 Aug 2010 05:34:05 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From: Constantine Vetoshev <gepardcv@gmail.com>
Subject: Re: Fields with Field.Store.NO and Field.Index.ANALYZED not being indexed
Date: Sun, 29 Aug 2010 23:33:52 -0400
Lines: 19
Message-ID: <m2mxs4zsdb.fsf@athena.local.i-did-not-set--mail-host-address--so-tickle-me>
References: <m2bpecmbff.fsf@athena.local.i-did-not-set--mail-host-address--so-tickle-me>
	<359a92831003251327j110470d7r5380db0910910747@mail.gmail.com>
	<m2tymdyx1o.fsf_-_@athena.local.i-did-not-set--mail-host-address--so-tickle-me>
	<001d01cb47bb$8231cf70$86956e50$@thetaphi.de>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Complaints-To: usenet@dough.gmane.org
X-Gmane-NNTP-Posting-Host: ool-457569c4.dyn.optonline.net
User-Agent: Gnus/5.13 (Gnus v5.13) Emacs/23.2 (darwin)
Cancel-Lock: sha1:0pbCSNfm6wZQddYO34ljt2RhxAU=
X-Virus-Checked: Checked by ClamAV on apache.org

"Uwe Schindler" <uwe@thetaphi.de> writes:
> You cannot retrieve non-stored fields. They are analyzed and tokenized
> during indexing and this is a one-way transformation. If you update
> documents you have to reindex the contents. If you do not have access to the
> original contents anymore, you may consider adding a stored-only "raw
> document" field, that contains everything to rebuild the indexed fields. In
> our installation, we have a stored field containing the JSON/XML source
> document to do this.

Thanks, that helps.

Since it seems that I have to keep the raw data around, is there any
reason not to just make that data's field both stored and analyzed? I'm
just wondering why you use a separate stored-only field: a Lucene
limitation or some app-specific reason?

--
Regards,
Constantine Vetoshev


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 30 09:58:40 2010
Return-Path: <java-user-return-47169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86285 invoked from network); 30 Aug 2010 09:58:39 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Aug 2010 09:58:39 -0000
Received: (qmail 27687 invoked by uid 500); 30 Aug 2010 09:58:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27270 invoked by uid 500); 30 Aug 2010 09:58:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27261 invoked by uid 99); 30 Aug 2010 09:58:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Aug 2010 09:58:32 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tangfulin@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Aug 2010 09:58:26 +0000
Received: by eydd26 with SMTP id d26so3986604eyd.35
        for <java-user@lucene.apache.org>; Mon, 30 Aug 2010 02:58:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=VX2Yr3y8SO8lIVpEMnl8IBhUvL1tUw2frWi3uqDqup8=;
        b=M5mreWJ2FmXZdFQS2BjwpUFShqEIf9BRUmgLSylVqYOUBFgDByQ/tTaCQC3w9Try8+
         SS+9XSCYRRk3jeRFUindbVq08s/kY1GJI5qP7P9wtt6HecQnuJ8X7vp772ex36D+KPFm
         hX/FYWotoakujxYFUbtBcgUuV+xFhzpxMdNvw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=GlFhpz8LwT/EwFI3rP/xGA8ysgOqyVinVd2Y4Bl8OgTPcd5GVTxRs6P55mDUXkVIH6
         pqKU1R4tIATclIkHgkOxFA0GGNRFODXyaAqZgB3cycok1X5EXl8fI02OamCcndQx5F73
         5MdODtXV/+yfpa9OYPYWTsc46DWnOS+g6W/6U=
MIME-Version: 1.0
Received: by 10.227.152.206 with SMTP id h14mr4670630wbw.145.1283162284578;
 Mon, 30 Aug 2010 02:58:04 -0700 (PDT)
Received: by 10.227.134.129 with HTTP; Mon, 30 Aug 2010 02:58:04 -0700 (PDT)
Date: Mon, 30 Aug 2010 17:58:04 +0800
Message-ID: <AANLkTi=_wHfoBcM+mHKZJu31Q4juSNOAAigbUg7pqaua@mail.gmail.com>
Subject: How to do facet search in lucene, NOT solr ?
From: fulin tang <tangfulin@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

we are building a search system on top of lucene, and we are now
looking for a facet feature

So it there a easy way to do this ?

btw, we do not want to switch to solr just for this!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 30 10:06:27 2010
Return-Path: <java-user-return-47170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91511 invoked from network); 30 Aug 2010 10:06:26 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Aug 2010 10:06:26 -0000
Received: (qmail 35410 invoked by uid 500); 30 Aug 2010 10:06:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35100 invoked by uid 500); 30 Aug 2010 10:06:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35090 invoked by uid 99); 30 Aug 2010 10:06:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Aug 2010 10:06:21 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of fancyerii@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Aug 2010 10:06:13 +0000
Received: by eydd26 with SMTP id d26so3995931eyd.35
        for <java-user@lucene.apache.org>; Mon, 30 Aug 2010 03:05:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=lj+ZwYqLAL/5MzR6C2B3Yi9j7qwRXaOi6Oa5hs33Dxo=;
        b=Q46FlZQOBlQnZwIXD9TMLAyfbCJhl4RSNz0qlbkHXOTVjc5DvYvqPMqZJkTsbWcpuj
         dB2xJIbrcq3CIOYTRXTJAwalL7MFJ2F2HsZuVV4m9h1g8IVDEMI/ePkQIczDHew+7VQF
         GqMweCN7Kzam1rvUcjSPxUILSOmYTT45gz4y4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=fie2RUPca/LIW4g1QKoCg83/XcqfCgAcCQXEaDs5YLRfGLz52bysa7/jKgGjc9GHLm
         2xWlm8Sv5ZdiG0KF/p5BsfknK7nbTH9t9MMm6vIIn7FbMsuYQ99l8Zp8sd2pkHBXlEp3
         nHLxe+hwq/Xws8jSOyH0Fjn3j7GrUtG0h7lYs=
MIME-Version: 1.0
Received: by 10.216.144.22 with SMTP id m22mr4460244wej.0.1283162752974; Mon,
 30 Aug 2010 03:05:52 -0700 (PDT)
Received: by 10.216.169.132 with HTTP; Mon, 30 Aug 2010 03:05:52 -0700 (PDT)
In-Reply-To: <AANLkTi=_wHfoBcM+mHKZJu31Q4juSNOAAigbUg7pqaua@mail.gmail.com>
References: <AANLkTi=_wHfoBcM+mHKZJu31Q4juSNOAAigbUg7pqaua@mail.gmail.com>
Date: Mon, 30 Aug 2010 18:05:52 +0800
Message-ID: <AANLkTinpxhRNruN2tWhgQFageY=f4Yf2A=Y5b0U5dQPP@mail.gmail.com>
Subject: Re: How to do facet search in lucene, NOT solr ?
From: Li Li <fancyerii@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

I think you can read the codes of solr.
I guess you can implement a collect to get all hit docs into a
DocSet(bitset). Also getting facet fields into memory(doc id->field
value) then loop the DocSet to count it.

2010/8/30 fulin tang <tangfulin@gmail.com>:
> we are building a search system on top of lucene, and we are now
> looking for a facet feature
>
> So it there a easy way to do this ?
>
> btw, we do not want to switch to solr just for this!
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 30 10:07:28 2010
Return-Path: <java-user-return-47171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91616 invoked from network); 30 Aug 2010 10:07:28 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Aug 2010 10:07:28 -0000
Received: (qmail 37616 invoked by uid 500); 30 Aug 2010 10:07:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37353 invoked by uid 500); 30 Aug 2010 10:07:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37345 invoked by uid 99); 30 Aug 2010 10:07:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Aug 2010 10:07:23 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [122.98.14.32] (HELO kecgate02.infosys.com) (122.98.14.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Aug 2010 10:07:16 +0000
X-TM-IMSS-Message-ID:<15eae0e300021697@kecgate02.infosys.com>
Received: from blrkechub04.ad.infosys.com ([10.66.236.44]) by kecgate02.infosys.com ([122.98.14.32]) with ESMTP (TREND IMSS SMTP Service 7.0) id 15eae0e300021697 ; Mon, 30 Aug 2010 15:36:42 +0530
Received: from BLRKECMBX06.ad.infosys.com ([10.66.236.32]) by
 blrkechub04.ad.infosys.com ([10.66.236.44]) with mapi; Mon, 30 Aug 2010
 15:36:49 +0530
From: Allahbaksh Mohammedali Asadullah <Allahbaksh_Asadullah@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 30 Aug 2010 15:36:51 +0530
Subject: RE: How to do facet search in lucene, NOT solr ?
Thread-Topic: How to do facet search in lucene, NOT solr ?
Thread-Index: ActIKe2Nz3yZ0s8BSYG38hvaJrSTBgAARbXA
Message-ID: <68959F25CDEBCB4F917D5A253291D73E0F8FA936F5@BLRKECMBX06.ad.infosys.com>
References: <AANLkTi=_wHfoBcM+mHKZJu31Q4juSNOAAigbUg7pqaua@mail.gmail.com>
In-Reply-To: <AANLkTi=_wHfoBcM+mHKZJu31Q4juSNOAAigbUg7pqaua@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
Just check out this project
http://code.google.com/p/bobo-browse/
Warm Regards,


Allahbaksh Mohammedali Asadullah,
Software Engineering & Technology Labs,
Infosys Technolgies Limited, Electronics City,
Hosur Road, Bangalore 560 100, India.
(Board: +91-80-28520261 | Extn: 53915 | Direct: 41173915.
Fax: +91-80-28520362 | Mobile: +91-9845505322.
http://allahbaksh.blogspot.com


=20
=20
=20
-----Original Message-----
From: fulin tang [mailto:tangfulin@gmail.com]=20
Sent: Monday, August 30, 2010 3:28 PM
To: java-user@lucene.apache.org
Subject: How to do facet search in lucene, NOT solr ?

we are building a search system on top of lucene, and we are now
looking for a facet feature

So it there a easy way to do this ?

btw, we do not want to switch to solr just for this!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 30 13:27:17 2010
Return-Path: <java-user-return-47172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62883 invoked from network); 30 Aug 2010 13:27:17 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Aug 2010 13:27:17 -0000
Received: (qmail 54285 invoked by uid 500); 30 Aug 2010 13:27:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53976 invoked by uid 500); 30 Aug 2010 13:27:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53960 invoked by uid 99); 30 Aug 2010 13:27:10 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Aug 2010 13:27:10 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.9] (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 30 Aug 2010 13:26:53 +0000
Received: (qmail 62790 invoked by uid 99); 30 Aug 2010 13:26:31 -0000
Received: from localhost.apache.org (HELO [10.0.0.77]) (127.0.0.1)
  (smtp-auth username gsingers, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Aug 2010 13:26:31 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1081)
Subject: Re: Span Query/Slop distance
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <AANLkTim1diodAnrVWoQzKQyvob_PtSq4X0nkHyYQMdR-@mail.gmail.com>
Date: Mon, 30 Aug 2010 09:26:29 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <E74A2761-CB4E-4BD0-B3BB-24F5B80134FD@apache.org>
References: <AANLkTim1diodAnrVWoQzKQyvob_PtSq4X0nkHyYQMdR-@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1081)
X-Virus-Checked: Checked by ClamAV on apache.org


On Aug 26, 2010, at 12:47 PM, Shashi Kant wrote:

> Hello, I am familiar with the SpanQuery construct and set an upper =
Slop limit.
>=20
> 1. But when I get the hit results, is there any way I can access the
> actual slop and the span text itself in that particular hit.

=
http://www.lucidimagination.com/blog/2009/05/26/accessing-words-around-a-p=
ositional-match-in-lucene/

> 2. Also it is possible to have multiple matches within the same
> document. So how do I access the span text and the corresponding slop
> for the multiple matches with the same doc?
>=20

It is possible.  When you walk the Spans, the doc() method will tell you =
what doc you are on.


--------------------------
Grant Ingersoll
http://lucenerevolution.org Apache Lucene/Solr Conference, Boston Oct =
7-8


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 30 20:14:48 2010
Return-Path: <java-user-return-47173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17481 invoked from network); 30 Aug 2010 20:14:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Aug 2010 20:14:48 -0000
Received: (qmail 82636 invoked by uid 500); 30 Aug 2010 20:14:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82384 invoked by uid 500); 30 Aug 2010 20:14:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82374 invoked by uid 99); 30 Aug 2010 20:14:45 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Aug 2010 20:14:45 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received: from [140.211.11.9] (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 30 Aug 2010 20:14:27 +0000
Received: (qmail 17158 invoked by uid 99); 30 Aug 2010 20:14:05 -0000
Received: from localhost.apache.org (HELO [10.0.0.77]) (127.0.0.1)
  (smtp-auth username gsingers, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Aug 2010 20:14:05 +0000
From: Grant Ingersoll <gsingers@apache.org>
Content-Type: multipart/alternative; boundary=Apple-Mail-16--50634370
Subject: RTP Apache Lucene/Solr Meetup Sept. 21
Date: Mon, 30 Aug 2010 16:14:03 -0400
Message-Id: <9A731D1E-6E15-427F-84EE-91A074C86CE0@apache.org>
To: solr-user@lucene.apache.org,
 java-user@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1081)
X-Mailer: Apple Mail (2.1081)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-16--50634370
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii

I'm pleased to announce the very first ever RTP area (Raleigh, Durham, =
Chapel Hill NC) Lucene/Solr meetup on Sept. 21.  The event will be held =
at Lulu Press and co-sponsored by Lucid Imagination.  To learn more and =
RSVP, please see http://www.meetup.com/RTP-Apache-Solr-Lucene-Meetup/

Hope to see you there,
Grant

--------------------------
Grant Ingersoll
http://lucenerevolution.org Apache Lucene/Solr Conference, Boston Oct =
7-8


--Apple-Mail-16--50634370--

From java-user-return-47174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 31 01:22:49 2010
Return-Path: <java-user-return-47174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19905 invoked from network); 31 Aug 2010 01:22:49 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 Aug 2010 01:22:49 -0000
Received: (qmail 25793 invoked by uid 500); 31 Aug 2010 01:22:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25660 invoked by uid 500); 31 Aug 2010 01:22:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25652 invoked by uid 99); 31 Aug 2010 01:22:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Aug 2010 01:22:46 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Aug 2010 01:22:40 +0000
Received: by qyk2 with SMTP id 2so6948639qyk.14
        for <java-user@lucene.apache.org>; Mon, 30 Aug 2010 18:22:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=HZggtl+8ZzQGKYYQxXXakZDsZhT6mbjrJ66iJHjeLXw=;
        b=HPDIqHGzR+6t/5nW+uLT8Ms96BLMwkjIAQAD2dJkdIUkgLC4teiz3399oeqo3wQI+S
         wmCTJLhH4YnNCAStoh7ju+9Wc0LSdWCaAfw1rpWnZc1MScp7LDDu4DRLk1LD672pkWem
         cd3GDpYyylnzrQ1tO0qprdOfh44ZtOKljVO0s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=S+VCTkIdmX50KYdzj43/tcjvuQATuSXbc7e0rFsE1IonQRnEDqxEl/nBewdGbc9jId
         WKKeQ/XnPoIlW4x+CrnxJB+Ky51chcq8o8sZG6zvmrDhAlshEPjCLkGNvnBEhWPhiDiN
         O0BjEdOCj27SqOx87ZcmRw5YRDBilzUPH/6lQ=
MIME-Version: 1.0
Received: by 10.224.54.143 with SMTP id q15mr3395663qag.395.1283217739050;
 Mon, 30 Aug 2010 18:22:19 -0700 (PDT)
Received: by 10.229.186.83 with HTTP; Mon, 30 Aug 2010 18:22:18 -0700 (PDT)
In-Reply-To: <m2mxs4zsdb.fsf@athena.local.i-did-not-set--mail-host-address--so-tickle-me>
References: <m2bpecmbff.fsf@athena.local.i-did-not-set--mail-host-address--so-tickle-me>
	<359a92831003251327j110470d7r5380db0910910747@mail.gmail.com>
	<m2tymdyx1o.fsf_-_@athena.local.i-did-not-set--mail-host-address--so-tickle-me>
	<001d01cb47bb$8231cf70$86956e50$@thetaphi.de>
	<m2mxs4zsdb.fsf@athena.local.i-did-not-set--mail-host-address--so-tickle-me>
Date: Mon, 30 Aug 2010 21:22:18 -0400
Message-ID: <AANLkTim-P3qZZG5jxhJkgNnuH68+i1-xvi+XKz+HhJJB@mail.gmail.com>
Subject: Re: Fields with Field.Store.NO and Field.Index.ANALYZED not being indexed
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175d6726816f82048f14694c
X-Virus-Checked: Checked by ClamAV on apache.org

--0015175d6726816f82048f14694c
Content-Type: text/plain; charset=ISO-8859-1

"if you do not have access to the original contents" is the key if Uwe's
comment. You do not need a separate field at all, it all depends upon
your situation. There's no problem in indexing AND storing f field.

HTH
Erick

On Sun, Aug 29, 2010 at 11:33 PM, Constantine Vetoshev
<gepardcv@gmail.com>wrote:

> "Uwe Schindler" <uwe@thetaphi.de> writes:
> > You cannot retrieve non-stored fields. They are analyzed and tokenized
> > during indexing and this is a one-way transformation. If you update
> > documents you have to reindex the contents. If you do not have access to
> the
> > original contents anymore, you may consider adding a stored-only "raw
> > document" field, that contains everything to rebuild the indexed fields.
> In
> > our installation, we have a stored field containing the JSON/XML source
> > document to do this.
>
> Thanks, that helps.
>
> Since it seems that I have to keep the raw data around, is there any
> reason not to just make that data's field both stored and analyzed? I'm
> just wondering why you use a separate stored-only field: a Lucene
> limitation or some app-specific reason?
>
> --
> Regards,
> Constantine Vetoshev
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0015175d6726816f82048f14694c--

From java-user-return-47175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 31 03:37:55 2010
Return-Path: <java-user-return-47175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44608 invoked from network); 31 Aug 2010 03:37:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 Aug 2010 03:37:55 -0000
Received: (qmail 3802 invoked by uid 500); 31 Aug 2010 03:37:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3455 invoked by uid 500); 31 Aug 2010 03:37:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3447 invoked by uid 99); 31 Aug 2010 03:37:49 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Aug 2010 03:37:49 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of phavelar@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Aug 2010 03:37:26 +0000
Received: by qyk2 with SMTP id 2so7113602qyk.14
        for <java-user@lucene.apache.org>; Mon, 30 Aug 2010 20:37:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=02TgLRvXaJRJxc6y6oyoXE5wryM6RPXdYauPH/Ef61I=;
        b=nMoE95JjFB4j7OvDFnqofz3Nlpa7zR8H80pTnRk/hEeT49Tm0QGge9wtqOxLgwWwSM
         IbZHz2z6rK+FYZkpvmo74ny95KQjce5dLpQPZrEocIm6oepS+Hatpqr9nX4rsPEHWAu3
         CSbjnEfOevooP5atdWCffKBg1Zj4HHdWi8/Uw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=POZ9c9oj1+CEc+r5DTjCHia2i175F/hsUiVXsgHn5UYci8C7oI/iF97mjh7GVzCwwO
         baD0df8bczPbrLNnbgTJZE3XXsqdOO+S2ff4uIcidFz6nNv7mwMsL6SrjipFdRMy10ky
         e2cPKYYJr+1XMRB7rFJCMPfuULDyYmQVgA7XU=
MIME-Version: 1.0
Received: by 10.224.44.4 with SMTP id y4mr3505171qae.376.1283225825544; Mon,
 30 Aug 2010 20:37:05 -0700 (PDT)
Received: by 10.224.46.14 with HTTP; Mon, 30 Aug 2010 20:37:05 -0700 (PDT)
In-Reply-To: <AANLkTinJPE5pRb=65VsdXd7+bEi0VcijQrdPn33NPBDD@mail.gmail.com>
References: <AANLkTinJPE5pRb=65VsdXd7+bEi0VcijQrdPn33NPBDD@mail.gmail.com>
Date: Mon, 30 Aug 2010 20:37:05 -0700
Message-ID: <AANLkTin+pKMkAdjW7cifA=nMmbfF-f8Vgw-qNUghSLEw@mail.gmail.com>
Subject: Re: Semantic Search research?
From: Paulo Avelar <phavelar@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Nope,
but if you find out, please let us know.
It sounds very interesting.
Thanks
Paulo

On Sun, Aug 1, 2010 at 8:29 AM, adasal <adam.saltiel@gmail.com> wrote:
> Does anyone on the list know about the nature of this research or
> collaboration:-
> A search engine based on '25 years of cutting edge research from the Indian
> Institutes of Technology, the University of Delhi, the Massachusetts
> Institute of Technology, Harvard University, and the University of
> California at Berkeley'?
> It uses an algorithms described this way:
> '... distributed electronic semantic intelligence (DESI) algorithms and our
> word-sense disambiguation extraction technologies can automatically identify
> the referential "meanings" embedded in various search terms.'
> From this description I can't get a handle on what the technology might be
> that would be different to something obvious, that the referential meanings
> in search terms would be important in disambiguating them, and using them
> can form the basis for grouping search results.
> This puts the emphasis on the disambiguation of the search terms which is a
> different strategy to clustering on the basis of what topics returned
> documents contain.
>
> In short, my question is whether anyone knows of research in this area that
> might fit the description in quotes?
> I am aware of projects like SireN. Does anyone have any hints on how this
> and known approaches may contrast?
>
> Adam Saltiel
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-47176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 31 09:18:05 2010
Return-Path: <java-user-return-47176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35009 invoked from network); 31 Aug 2010 09:18:05 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 Aug 2010 09:18:05 -0000
Received: (qmail 42066 invoked by uid 500); 31 Aug 2010 09:18:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41782 invoked by uid 500); 31 Aug 2010 09:17:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41774 invoked by uid 99); 31 Aug 2010 09:17:58 -0000
Received: from Unknown (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Aug 2010 09:17:58 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,T_FILL_THIS_FORM_SHORT
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.153.217.231] (HELO ns3.sozvers.at) (194.153.217.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Aug 2010 09:17:34 +0000
Received: from mailgw1.sozvers.at (gateway-ext.sozvers.at [194.153.217.230])
	by ns3.sozvers.at (8.13.8/8.13.8) with ESMTP id o7V9HD8R029600
	for <java-user@lucene.apache.org>; Tue, 31 Aug 2010 11:17:13 +0200
Received: from SVSMSG002.svservices.local (viruswall-01.sozvers.at [172.16.10.38])
	by mailgw1.sozvers.at (8.13.8/8.13.8) with ESMTP id o7V9HDHP021191
	for <java-user@lucene.apache.org>; Tue, 31 Aug 2010 11:17:13 +0200
Received: from SVSMSG007.svservices.local ([fe80::d587:863a:fbe4:ae95]) by
 SVSMSG002.svservices.local ([fe80::c97a:f339:55bf:6ede%10]) with mapi; Tue,
 31 Aug 2010 11:17:02 +0200
From: Schreiner Wolfgang <Wolfgang.Schreiner@itsv.at>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 31 Aug 2010 11:17:42 +0200
Subject: RE: Lucene applicability
Thread-Topic: Lucene applicability
Thread-Index: ActEzluM6Jsw0zS7Ta+dz13Pf3p34wEG91Vw
Message-ID: <8721F0F9B0109947A0DD64B7E44D83C11D3E283B56@SVSMSG007.svservices.local>
References: <8721F0F9B0109947A0DD64B7E44D83C11C87B34DBF@SVSMSG007.svservices.local>
	<AANLkTimDXMug=mNsjK2Vo4tNcj+m0oJmgrwf0rxxe9Hg@mail.gmail.com>
 <AANLkTi=Vvik918F3NA9fQXvOAc9ssC65U_HENfkMU6fY@mail.gmail.com>
In-Reply-To: <AANLkTi=Vvik918F3NA9fQXvOAc9ssC65U_HENfkMU6fY@mail.gmail.com>
Accept-Language: en-US, de-AT
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US, de-AT
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

SGksDQoNClRoYW5rIHlvdSBhbGwgZm9yIHlvdXIgdGltZSB0byBhbnN3ZXIgbXkgcXVlc3Rpb25z
IQ0KSG93ZXZlciB0aGVyZSBhcmUgYSBmZXcgbW9yZSBpc3N1ZXMgd2hpY2ggYXJlIG5vdCBxdWl0
ZSBjbGVhciB5ZXQgYW5kIGhvcGUgdG8gZ2V0IGFkdmljZSBvbiB0aG9zZSB0b286DQoNCjEuKSBI
b3cgaXMgdGhlIGluZGV4IG1haW50YWluZWQ/IEluIGFub3RoZXIgcHJvZHVjdCB3aGVyZSB3ZSB1
c2UgYW4gaW5kZXhlciBkaWZmZXJlbnQgZnJvbSBMdWNlbmUsIHdlIGdvdCBvbmUgY2VudHJhbCBp
bmRleCBhbmQgYSBmZXcgSkJvc3Mgc2VydmVycyBhbGwgYWNjZXNzaW5nIHRoZSBzYW1lIGluZGV4
LiBTbyBob3cgZG9lcyBMdWNlbmUgaGFuZGxlIHN5bmNocm9uaXphdGlvbiBiZXR3ZWVuIG11bHRp
cGxlIHRocmVhZHMgKGRpZmZlcmVudCBKVk1zKT8gSG93IGRvZXMgaXQgbWFpbnRhaW4gdGhlIGlu
ZGV4IGFmdGVyIHVwZGF0ZS9kZWxldGUgb3BlcmF0aW9ucyBvbiB0aGUgZGF0YWJhc2U/DQoyLikg
SXMgdGhlIGluZGV4IGFsd2F5cyB1cC10by1kYXRlPyBJbiB0aGUgRkFRcyBpdCBzYXlzIHdlIGhh
dmUgdG8gcmUtb3BlbiB0aGUgSW5kZXhSZWFkZXIgcGVyaW9kaWNhbGx5IC4uLiBob3cgZXhwZW5z
aXZlIChpbiBjb21wdXRhdGlvbmFsIHRlcm1zKSBpcyBpdCB0byBkbyB0aGF0IG9uIGV2ZXJ5IHJl
cXVlc3QgZm9yIGluc3RhbmNlPw0KMy4pIEknbSBzdGlsbCBub3Qgc3VyZSBhYm91dCBwZXJmb3Jt
YW5jZS4gQWNjb3JkaW5nIHRvIHRoZSBGQVFzIHdlIG5lZWQgdG8gYnVpbGQgb3VyIG93biBNdWx0
aVBocmFzZVF1ZXJ5IHBhcnNlciB0byBzdXBwb3J0IG11bHRpcGxlIHRlcm1zIGFuZCB3aWxkY2Fy
ZHMuIEZvciBleGFtcGxlIGNvbnNpZGVyIDUwLjAwMC4wMDAgZG9jdW1lbnRzLCA1MC4wMDAgb2Yg
dGhlbSBtYXRjaCB0ZXJtIFQxIGluIGNhdGVnb3J5IEEsIDUwLjAwMCBtYXRjaCB0ZXJtIFQyIGlu
IGNhdGVnb3J5IEIgYW5kIDEuMDAwLjAwMCBtYXRjaCB0ZXJtIFQzIGluIGNhdGVnb3J5IEMuIDUw
IE1hdGNoIFQxIGluIEEgYW5kIFQyIGluIEIgYW5kIFQzIGluIEMuIEhvdyBmYXN0IGlzIHRoZSBh
bGdvcml0aG0gaW4gdGhpcyBjYXNlPyBXaG8gZ3VhcmFudGVlcyB0aGF0IGl0IGRvZXNuJ3Qgc3Rh
cnQgYXQgdGhlIDEgbWlsbGlvbiBzaWRlPyAgDQoNCkNoZWVycywNCg0Kdw0KDQoNCi0tLS0tT3Jp
Z2luYWwgTWVzc2FnZS0tLS0tDQpGcm9tOiBMYW5jZSBOb3Jza29nIFttYWlsdG86Z29rc3JvbkBn
bWFpbC5jb21dIA0KU2VudDogRG9ubmVyc3RhZywgMjYuIEF1Z3VzdCAyMDEwIDA1OjI1DQpUbzog
amF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQpTdWJqZWN0OiBSZTogTHVjZW5lIGFwcGxpY2Fi
aWxpdHkNCg0KQSBzdGVwcGluZyBzdG9uZSB0byB0aGUgYWJvdmUgaXMgdGhhdCwgaW4gREIgdGVy
bXMsIGEgTHVjZW5lIGluZGV4IGlzDQpvbmx5IG9uZSB0YWJsZS4gSXQgaGFzIGEgc3VpdGUgb2Yg
aW5kZXhpbmcgZmVhdHVyZXMgdGhhdCBhcmUgdmVyeQ0KZGlmZmVyZW50IGZyb20gZGF0YWJhc2Ug
c2VhcmNoLiBUaGUgZmVhdHVyZXMgYXJlIG9yaWVudGVkIHRvIHNlYXJjaGluZw0KbGFyZ2UgYm9k
aWVzIG9mIHRleHQgZm9yICJpZGVhcyIgcmF0aGVyIHRoYW4gY29uY3JldGUgd29yZHMuIEl0DQpz
ZWFyY2hlcyBhIGxvdCBmYXN0ZXIgdGhhbiBhIERCLiBJdCBhbHNvIHNwZW5kcyBtb3JlIHRpbWUg
Y3JlYXRpbmcgaXRzDQp2YXJpb3VzIGluZGV4ZXMgdGhhbiBhIERCLiBPdGhlciBwb2ludHMtIHlv
dSBjYW4ndCBhZGQgb3IgZHJvcCBmaWVsZHMNCm9yIGluZGV4ZXMuDQoNCk9uIFdlZCwgQXVnIDI1
LCAyMDEwIGF0IDEwOjMzIEFNLCBFcmljayBFcmlja3Nvbg0KPGVyaWNrZXJpY2tzb25AZ21haWwu
Y29tPiB3cm90ZToNCj4gVGhlIFNPTFIgd2lraSBoYXMgbG90cyBvZiBnb29kIGluZm9ybWF0aW9u
LCBzdGFydCB0aGVyZToNCj4gaHR0cDovL3dpa2kuYXBhY2hlLm9yZy9zb2xyLw0KPg0KPiBPdGhl
cndpc2UsIHNlZSBiZWxvdy4uLg0KPg0KPiBPbiBXZWQsIEF1ZyAyNSwgMjAxMCBhdCA2OjIwIEFN
LCBTY2hyZWluZXIgV29sZmdhbmcgPA0KPiBXb2xmZ2FuZy5TY2hyZWluZXJAaXRzdi5hdD4gd3Jv
dGU6DQo+DQo+PiBIaSBhbGwsDQo+Pg0KPj4gV2UgYXJlIGN1cnJlbnRseSBldmFsdWF0aW5nIHBv
dGVudGlhbCBzZWFyY2ggZnJhbWV3b3JrcyAoc3VjaCBhcyBIaWJlcm5hdGUNCj4+IFNlYXJjaCkg
d2hpY2ggbWlnaHQgYmUgc3VpdGFibGUgdG8gdXNlIGluIG91ciBwcm9qZWN0ICh1c2luZyBTcHJp
bmcsIEpQQQ0KPj4gd2l0aCBIaWJlcm5hdGUpIC4uLg0KPj4gSSBhbSBzZW5kaW5nIHRoaXMgRS1N
YWlsIGluIGhvcGUgeW91IGNhbiBhZHZpc2UgbWUgb24gYSBmZXcgaXNzdWVzIHRoYXQNCj4+IHdv
dWxkIGhlbHAgdXMgaW4gb3VyIGRlY2lzaW9uIG1ha2luZyBwcm9jZXNzLg0KPj4NCj4+DQo+PiAx
LikgwqAgwqBJcyBMdWNlbmUgc3VpdGFibGUgZm9yIGZ1bGwgdGV4dCBkYXRhYmFzZSBzZWFyY2hl
cz8gSSByZWFkIEx1Y2VuZQ0KPj4gd2FzIGRlc2lnbmVkIHRvIGluZGV4IGFuZCBzZWFyY2ggZG9j
dW1lbnRzIGJ1dCBob3cgZG9lcyBpdCBiZWhhdmUgcXVlcnlpbmcNCj4+IHJlbGF0aW9uYWwgZGF0
YSBzZXRzIGluIGdlbmVyYWw/DQo+Pg0KPg0KPiBMZXQncyBzdGFydCBiZSB0YWxraW5nIGFib3V0
IHRoZSBwaHJhc2UgImZ1bGwgdGV4dCBkYXRhYmFzZSBzZWFyY2hlcyIuIE9uZQ0KPiB0aGluZyB2
aXJ0dWFsbHkgYWxsIGRiLWNlbnRyaWMNCj4gcGVvcGxlIHRyaXAgb3ZlciBpcyB0cnlpbmcgdG8g
dXNlIFNPTFIgYXMgaWYgaXQgd2VyZSBhIGRhdGFiYXNlLiBZb3UganVzdA0KPiBjYW4ndCB0aGlu
ayBhYm91dCB0YWJsZXMuIFRoZQ0KPiBmaXJzdCB0aW1lIHlvdSB0aGluayBhYm91dCB1c2luZyBT
T0xSIHRvIGRvIHNvbWV0aGluZyBqb2luLWxpa2UsIHN0b3AgYW5kDQo+IHRha2UgYSBkZWVwIGJy
ZWF0aCBhbmQNCj4gdGhpbmsgYWJvdXQgZG9jdW1lbnRzIGluc3RlYWQuIFRoZSBnZW5lcmFsIGFw
cHJvYWNoIGlzIHRvIGZsYXR0ZW4geW91ciBkYXRhDQo+IHNvIHRoYXQgZWFjaCAiZG9jdW1lbnQi
DQo+IGNvbnRhaW5zIGFsbCB0aGUgcmVsZXZhbnQgaW5mby4gWWVzLCB0aGlzIGxlYWRzIHRvIGRl
LW5vcm1hbGl6YXRpb24uIFllcywNCj4gZGVub3JtYWxpemVkIGRhdGEgbWFrZXMgYQ0KPiBnb29k
IERCQSBjcmluZ2UuIEJ1dCB0aGF0J3MgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiBzZWFyY2hpbmcg
YW5kIHVzaW5nIGENCj4gUkRCTVMuDQo+DQo+ICJEb2N1bWVudCIgaXMgc29tZXdoYXQgbWlzbGVh
ZGluZy4gQSBkb2N1bWVudCBpbiBTT0xSIHRlcm1zIGlzIGp1c3QgYQ0KPiBjb2xsZWN0aW9uIG9m
IGZpZWxkcy4gQW5kLCBCVFcsDQo+IHRoZXJlJ3Mgbm8gcmVxdWlyZW1lbnQgdGhhdCBlYWNoIGRv
Y3VtZW50IGhhdmUgdGhlIHNhbWUgZmllbGRzICh2ZXJ5IHVubGlrZQ0KPiBhIERCKS4NCj4NCj4N
Cj4+DQo+PiAyLikgwqAgwqBDYW4gd2UgbWFrZSBhc3N1bXB0aW9ucyBvbiBxdWVyeSBwZXJmb3Jt
YW5jZSBjb25zaWRlcmluZyBjb21iaW5lZA0KPj4gc2VhcmNoZXMsIHJhbmdlIHF1ZXJpZXMgb3Ig
c3RydWN0dXJlZCBkYXRhIGFuZCB3aWxkY2FyZCBzZWFyY2hlcz8gSWYgd2UNCj4+IGNvbnNpZGVy
IGEgZGF0YSBzdHJ1Y3R1cmUgY29uc2lzdGluZyBvZiBzYXkgMyB0YWJsZXMgYW5kIGVhY2ggdGFi
bGUgY29udGFpbnMNCj4+IGEgZmV3IG1pbGxpb24gZW50cmllcyAoZS5nLiBmaXJzdCBuYW1lLCBs
YXN0IG5hbWUgYW5kIGFkZHJlc3MgZmllbGRzKSBhbmQgd2UNCj4+IHNlYXJjaCBmb3IgY29tbW9u
IHZhbHVlcyAoc3VjaCBhcyAnSm9obicsICdTbWl0aCcgYW5kICdOZXcgWW9yaycpIHdoZXJlDQo+
Pg0KPj4gYS4gwqAgwqAgwqAgZWFjaCB2YWx1ZSBmb3IgaXRzZWxmIGFuZCBlYWNoIGNvbWJpbmF0
aW9uIHdvdWxkIHJlc3VsdCBpbg0KPj4gbWlsbGlvbnMgb2YgaGl0cw0KPj4NCj4NCj4gU3VyZSwg
YnV0IHdoYXQgdGhvc2UgYXNzdW1wdGlvbnMgYXJlIGlzIHRvdGFsbHkgZGVwZW5kZW50IG9uIGhv
dyB5b3UndmUgc2V0DQo+IHRoaW5ncyB1cC4gU09MUiBoYXMgYmVlbiBzdWNjZXNzZnVsbHkNCj4g
dXNlZCBvbiBzZXZlcmFsIGJpbGxpb24gZG9jdW1lbnQgaW5kZXhlcy4gVGhlcmUgYXJlIHRvb2xz
IGZvciBtYWtpbmcgYWxsDQo+IHRoYXQgd29yayAoaS5lLiByZXBsaWNhdGlvbiwgc2hhcmRpbmcs
IGV0YykNCj4gYnVpbHQgaW50byBTT0xSLiBTbyBJIHN1c3BlY3QgeW91IGNhbiBtYWtlIHRoaW5n
cyB3b3JrLiBTZXZlcmFsIG1pbGxpb24NCj4gZG9jdW1lbnRzIGlzIG5vdCB0aGF0IGxhcmdlIGEg
ZGF0YSBzZXQuDQo+DQo+IEFzIGFsd2F5cywgdGhlcmUgYXJlIHRyYWRlb2ZmcyBiZXR3ZWVuIHNw
ZWVkIGFuZCBjb21wbGV4aXR5LiBCdXQgZnJvbSB3aGF0DQo+IHlvdSd2ZSBkZXNjcmliZWQNCj4g
SSBzZWUgbm8gc2hvdyBzdG9wcGVycy4NCj4NCj4NCj4+DQo+PiBiLiDCoCDCoCDCoGEgcGVyc29u
IGNhbiBoYXZlIG11bHRpcGxlIGZpcnN0IG5hbWVzIGFuZCB3ZSB3YW50IHRvIG1ha2Ugc3VyZSB0
bw0KPj4gcmVjZWl2ZSBhbnkgY29tYmluYXRpb24gb2YgdGhlIGxhc3QgbmFtZSB3aXRoIGFueSBm
aXJzdCBuYW1lDQo+Pg0KPj4NCj4gVGhpcyBqdXN0IHNvdW5kcyBsaWtlIGFuIE9SLiBCdXQgdGhl
IHF1ZXJpZXMgY2FuIGJlIHByZXR0eSBjb21wbGV4IHF1ZXJpZXMuDQo+IFNvbWUgZXhhbXBsZXMg
b2Ygd2hhdCB5b3UgZXhwZWN0IHdvdWxkIGhlbHAuDQo+IFNlZSBtdWx0aS12YWx1ZWQgZmllbGRz
LiBTbywgYSAiZG9jdW1lbnQiIGNhbiBoYXZlIG11bHRpcGxlICJmaXJzdG5hbWUiDQo+IGVudHJp
ZXMuIEFnYWluLCBub3QgbGlrZSBhIERCICh5b3VyIHJlZmxleGVzIHdpbGwgdHJpcCB5b3UNCj4g
dXAgb24gdGhpcyBwb2ludCA8Rz4pLg0KPg0KPg0KPj4gYy4gwqAgwqAgwqAgd2Ugc2VhcmNoIGZv
ciBhIGxhc3QgbmFtZSBhbmQgYSByYW5nZSBvZiBiaXJ0aCBkYXRlcw0KPj4NCj4+DQo+IFN1cmUs
IHJhbmdlIHF1ZXJpZXMgd29yayBqdXN0IGZpbmUuIE5vdGUgdGhhdCBkYXRlcyBjYW4gdHJpcCB5
b3UgdXAsIGxvb2sgYXQNCj4gdHJpZWRhdGUgaWYgeW91IGV4cGVyaW1lbnQuDQo+DQo+DQo+PiAz
LikgwqAgwqBUcmFuc2FjdGlvbiBzYWZldHk6IEhvdyBkb2VzIEx1Y2VuZSBoYW5kbGUgaW5kZXhl
cz8gSWYgd2UgdXBkYXRlDQo+PiBkYXRhIG1vZGVsIGFuZCBpbmRleCwgd2hhdCBoYXBwZW5zIHRv
IHRoZSBpbmRleCBpZiBhbnl0aGluZyBnb2VzIHdyb25nIGFzDQo+PiBzb29uIGFzIHRoZSBkYXRh
IG1vZGVsIGhhcyBiZWVuIHBlcnNpc3RlZD8NCj4+DQo+DQo+IEEgbG90IG9mIHdvcmsgaGFzIGJl
ZW4gZG9uZSB0byBtYWtlIFNPTFIgcXVpdGUgcm9idXN0IGlmICJhbnl0aGluZyBnb2VzDQo+IHdy
b25nIi4gVGhhdCBzYWlkLCBob3cgYXJlIHlvdSBiYWNraW5nIHVwIHlvdXIgZGF0YT8NCj4gVGhh
dCBpcywgd2hhdCBpcyB0aGUgc291cmNlIG9mIHRoZSBkYXRhIHlvdSdyZSBnb2luZyB0byBpbmRl
eD8gSWYgeW91J3JlDQo+IHJlbHlpbmcgb24geW91ciBTT0xSIGluZGV4IHRvIGJlIHlvdXIgYmFj
a3VwLCB5b3Ugc2ltcGx5IG11c3QgYmFjayBpdCB1cA0KPiBzb21ld2hlcmUgIm9mdGVuIGVub3Vn
aCIgdG8gZ2V0IGJ5IGlmIHlvdXIgYnVpbGRpbmcgYnVybnMgZG93bi4gSSdkIGFsc28NCj4gdGhp
bmsgYWJvdXQgc3RvcmluZyB5b3VyIG9yaWdpbmFsIGlucHV0Li4uDQo+DQo+IFRoaXMgaXMgbm8g
ZGlmZmVyZW50IHRoYW4gYSBEQi4geW91IGhhdmUgdG8gZ3VhcmQgYWdhaW5zdCB0aGUgZGlzayBj
cmFzaGluZywNCj4gc29tZW9uZSB3YWxraW5nIGJ5IHdpdGggYSBwb3dlcmZ1bCBtYWduZXQsIMKg
ZWFydGhxdWFrZSwgZmxvb2QsIGZpcmVzDQo+IDxHPi4uLi4uDQo+DQo+IERvIG5vdGUgdGhhdCBp
ZiB5b3UgbW9kaWZ5IHlvdXIgaW5kZXggc2NoZW1hLCBubyBleGlzdGluZyBkb2N1bWVudHMgcmVm
bGVjdA0KPiB0aGUgbmV3IHNjaGVtYSwgeW91IGhhdmUgdG8gcmVpbmRleCB0aGVtLg0KPg0KPg0K
Pj4NCj4+IEkgaG9wZSBJIG1hZGUgdGhlIGlzc3VlcyBjbGVhciB0byB5b3UsIGp1c3Qgc29tZSBn
ZW5lcmFsIHRob3VnaHRzIGFib3V0IGhvdw0KPj4gTHVjZW5lIHdvdWxkIGJlaGF2ZSBpbiBhIHJl
YWwgd29ybGQgYXBwbGljYXRpb24gc2NlbmFyaW8gLi4uIEFueSBzdXBwb3J0IG9yDQo+PiBwb2lu
dGVycyB0byBoZWxwZnVsIGRvY3VtZW50cyBvciBXZWIgbGlua3MgYXJlIGhpZ2hseSBhcHByZWNp
YXRlZCENCj4+IENoZWVycyBmb3Igbm93LA0KPj4NCj4+IHcNCj4+DQo+Pg0KPg0KDQoNCg0KLS0g
DQpMYW5jZSBOb3Jza29nDQpnb2tzcm9uQGdtYWlsLmNvbQ0KDQotLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NClRvIHVu
c3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9y
Zw0KRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5l
LmFwYWNoZS5vcmcNCg0KDQo=


From java-user-return-47177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 31 12:05:58 2010
Return-Path: <java-user-return-47177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94239 invoked from network); 31 Aug 2010 12:05:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 Aug 2010 12:05:57 -0000
Received: (qmail 25266 invoked by uid 500); 31 Aug 2010 12:05:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24802 invoked by uid 500); 31 Aug 2010 12:05:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24794 invoked by uid 99); 31 Aug 2010 12:05:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Aug 2010 12:05:51 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_FILL_THIS_FORM_SHORT,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Aug 2010 12:05:46 +0000
Received: by qyk12 with SMTP id 12so5059841qyk.14
        for <java-user@lucene.apache.org>; Tue, 31 Aug 2010 05:05:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=VCV5mbpQ4fUPt85CxCgPLarQnWrRV/GkDvI+ulH6Sws=;
        b=Q4FkxPRDbyzSAFHAUBo2V1XGx2pzxuXYmx6gQpAW6PRQkh3Qk04CDgOylnkJzWSMCv
         16yB8SdjEo94DfXnj9CMebJrtVZa7fwDExErx0lfgol1w5MPOck9s9GyCeWK07mATdS4
         GwW/eiU6wf7RnVbQbWEuy4QHnpzQSX9M4kp8o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=uBivfcMl0UFvJyHLWUq53ufcZJXYLcFzu7P2MkJA7AhoN+Ep5fgbuLWaNwHtoOJhfx
         GwChEjmz8NWyTdAShlede3vH3Ahc+M2su0lF/rOjB4uLR18wslcYhL7xSv/Utr3j7lEr
         TGbdGrlL9EcCZt8yB29pCZXvnyVaAwiOYsQnU=
MIME-Version: 1.0
Received: by 10.224.27.104 with SMTP id h40mr3896258qac.125.1283256324779;
 Tue, 31 Aug 2010 05:05:24 -0700 (PDT)
Received: by 10.229.186.83 with HTTP; Tue, 31 Aug 2010 05:05:24 -0700 (PDT)
In-Reply-To: <8721F0F9B0109947A0DD64B7E44D83C11D3E283B56@SVSMSG007.svservices.local>
References: <8721F0F9B0109947A0DD64B7E44D83C11C87B34DBF@SVSMSG007.svservices.local>
	<AANLkTimDXMug=mNsjK2Vo4tNcj+m0oJmgrwf0rxxe9Hg@mail.gmail.com>
	<AANLkTi=Vvik918F3NA9fQXvOAc9ssC65U_HENfkMU6fY@mail.gmail.com>
	<8721F0F9B0109947A0DD64B7E44D83C11D3E283B56@SVSMSG007.svservices.local>
Date: Tue, 31 Aug 2010 08:05:24 -0400
Message-ID: <AANLkTin3sFAbkq_uP5Yio6SDB_qBy80YXdjYNA_qLMzW@mail.gmail.com>
Subject: Re: Lucene applicability
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00c09f89971464f036048f1d65e7

--00c09f89971464f036048f1d65e7
Content-Type: text/plain; charset=ISO-8859-1

See below

On Tue, Aug 31, 2010 at 5:17 AM, Schreiner Wolfgang <
Wolfgang.Schreiner@itsv.at> wrote:

> Hi,
>
> Thank you all for your time to answer my questions!
> However there are a few more issues which are not quite clear yet and hope
> to get advice on those too:
>
> 1.) How is the index maintained? In another product where we use an indexer
> different from Lucene, we got one central index and a few JBoss servers all
> accessing the same index. So how does Lucene handle synchronization between
> multiple threads (different JVMs)? How does it maintain the index after
> update/delete operations on the database?
>

It doesn't, you have to do it yourself. You'll have to write some app that
periodically queries your db and when it detecte changes, updates the Lucene
index. You should only have one JVM have an open writer at a time. You can
have as many readers from as many jvms as you want. Note that your single
JVM that has a writer can use multiple write threads. In other words writers
are thread safe..


> 2.) Is the index always up-to-date? In the FAQs it says we have to re-open
> the IndexReader periodically ... how expensive (in computational terms) is
> it to do that on every request for instance?
>

the index is always up to date, how could it be otherwise <G>. When you open
a reader, Lucene essentially takes a snapshot of the index at that moment.
Any updated are not visible to that reader, thus the comment about reopening
the reader.


> 3.) I'm still not sure about performance. According to the FAQs we need to
> build our own MultiPhraseQuery parser to support multiple terms and
> wildcards. For example consider 50.000.000 documents, 50.000 of them match
> term T1 in category A, 50.000 match term T2 in category B and 1.000.000
> match term T3 in category C. 50 Match T1 in A and T2 in B and T3 in C. How
> fast is the algorithm in this case? Who guarantees that it doesn't start at
> the 1 million side?
>
>
That can't be answered in the abstract because there are too many variables,
you have to measure. But there are Lucene installations that have many more
documents than that so you can probably get there. Consider SOLR if you need
to replicate or shard your indexes because they get too big.

I think you're probably thinking of Lucene in terms of an application, not
an engine. Lucene is what you build your application around, it provides the
guts of the searching. The rest is up to your.

HTH
Erick

Cheers,
>
> w
>
>
> -----Original Message-----
> From: Lance Norskog [mailto:goksron@gmail.com]
> Sent: Donnerstag, 26. August 2010 05:25
> To: java-user@lucene.apache.org
> Subject: Re: Lucene applicability
>
> A stepping stone to the above is that, in DB terms, a Lucene index is
> only one table. It has a suite of indexing features that are very
> different from database search. The features are oriented to searching
> large bodies of text for "ideas" rather than concrete words. It
> searches a lot faster than a DB. It also spends more time creating its
> various indexes than a DB. Other points- you can't add or drop fields
> or indexes.
>
> On Wed, Aug 25, 2010 at 10:33 AM, Erick Erickson
> <erickerickson@gmail.com> wrote:
> > The SOLR wiki has lots of good information, start there:
> > http://wiki.apache.org/solr/
> >
> > Otherwise, see below...
> >
> > On Wed, Aug 25, 2010 at 6:20 AM, Schreiner Wolfgang <
> > Wolfgang.Schreiner@itsv.at> wrote:
> >
> >> Hi all,
> >>
> >> We are currently evaluating potential search frameworks (such as
> Hibernate
> >> Search) which might be suitable to use in our project (using Spring, JPA
> >> with Hibernate) ...
> >> I am sending this E-Mail in hope you can advise me on a few issues that
> >> would help us in our decision making process.
> >>
> >>
> >> 1.)    Is Lucene suitable for full text database searches? I read Lucene
> >> was designed to index and search documents but how does it behave
> querying
> >> relational data sets in general?
> >>
> >
> > Let's start be talking about the phrase "full text database searches".
> One
> > thing virtually all db-centric
> > people trip over is trying to use SOLR as if it were a database. You just
> > can't think about tables. The
> > first time you think about using SOLR to do something join-like, stop and
> > take a deep breath and
> > think about documents instead. The general approach is to flatten your
> data
> > so that each "document"
> > contains all the relevant info. Yes, this leads to de-normalization. Yes,
> > denormalized data makes a
> > good DBA cringe. But that's the difference between searching and using a
> > RDBMS.
> >
> > "Document" is somewhat misleading. A document in SOLR terms is just a
> > collection of fields. And, BTW,
> > there's no requirement that each document have the same fields (very
> unlike
> > a DB).
> >
> >
> >>
> >> 2.)    Can we make assumptions on query performance considering combined
> >> searches, range queries or structured data and wildcard searches? If we
> >> consider a data structure consisting of say 3 tables and each table
> contains
> >> a few million entries (e.g. first name, last name and address fields)
> and we
> >> search for common values (such as 'John', 'Smith' and 'New York') where
> >>
> >> a.       each value for itself and each combination would result in
> >> millions of hits
> >>
> >
> > Sure, but what those assumptions are is totally dependent on how you've
> set
> > things up. SOLR has been successfully
> > used on several billion document indexes. There are tools for making all
> > that work (i.e. replication, sharding, etc)
> > built into SOLR. So I suspect you can make things work. Several million
> > documents is not that large a data set.
> >
> > As always, there are tradeoffs between speed and complexity. But from
> what
> > you've described
> > I see no show stoppers.
> >
> >
> >>
> >> b.      a person can have multiple first names and we want to make sure
> to
> >> receive any combination of the last name with any first name
> >>
> >>
> > This just sounds like an OR. But the queries can be pretty complex
> queries.
> > Some examples of what you expect would help.
> > See multi-valued fields. So, a "document" can have multiple "firstname"
> > entries. Again, not like a DB (your reflexes will trip you
> > up on this point <G>).
> >
> >
> >> c.       we search for a last name and a range of birth dates
> >>
> >>
> > Sure, range queries work just fine. Note that dates can trip you up, look
> at
> > triedate if you experiment.
> >
> >
> >> 3.)    Transaction safety: How does Lucene handle indexes? If we update
> >> data model and index, what happens to the index if anything goes wrong
> as
> >> soon as the data model has been persisted?
> >>
> >
> > A lot of work has been done to make SOLR quite robust if "anything goes
> > wrong". That said, how are you backing up your data?
> > That is, what is the source of the data you're going to index? If you're
> > relying on your SOLR index to be your backup, you simply must back it up
> > somewhere "often enough" to get by if your building burns down. I'd also
> > think about storing your original input...
> >
> > This is no different than a DB. you have to guard against the disk
> crashing,
> > someone walking by with a powerful magnet,  earthquake, flood, fires
> > <G>.....
> >
> > Do note that if you modify your index schema, no existing documents
> reflect
> > the new schema, you have to reindex them.
> >
> >
> >>
> >> I hope I made the issues clear to you, just some general thoughts about
> how
> >> Lucene would behave in a real world application scenario ... Any support
> or
> >> pointers to helpful documents or Web links are highly appreciated!
> >> Cheers for now,
> >>
> >> w
> >>
> >>
> >
>
>
>
> --
> Lance Norskog
> goksron@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>

--00c09f89971464f036048f1d65e7--

From java-user-return-47178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 31 12:33:04 2010
Return-Path: <java-user-return-47178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9980 invoked from network); 31 Aug 2010 12:33:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 Aug 2010 12:33:03 -0000
Received: (qmail 74110 invoked by uid 500); 31 Aug 2010 12:32:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72214 invoked by uid 500); 31 Aug 2010 12:32:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72183 invoked by uid 99); 31 Aug 2010 12:32:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Aug 2010 12:32:52 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received: from [140.211.11.9] (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 31 Aug 2010 12:32:51 +0000
Received: (qmail 9487 invoked by uid 99); 31 Aug 2010 12:32:31 -0000
Received: from localhost.apache.org (HELO [10.0.0.77]) (127.0.0.1)
  (smtp-auth username gsingers, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 Aug 2010 12:32:31 +0000
From: Grant Ingersoll <gsingers@apache.org>
Content-Type: multipart/alternative; boundary=Apple-Mail-23-8070525
Subject: Lucene Revolution Update
Date: Tue, 31 Aug 2010 08:32:28 -0400
Message-Id: <B28A6774-1CCC-4C2A-8D7B-0EE2B07A5593@apache.org>
To: solr-user@lucene.apache.org,
 java-user@lucene.apache.org,
 user@mahout.apache.org,
 user@tika.apache.org,
 user@nutch.apache.org,
 Lucene mailing list <general@lucene.apache.org>
Mime-Version: 1.0 (Apple Message framework v1081)
X-Mailer: Apple Mail (2.1081)

--Apple-Mail-23-8070525
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii

Hi, (apologies for the cross-post)

Just a quick update on Lucene Revolution - coming up in Boston, October =
7-8 (see http://lucenerevolution.org).

- Marten Mickos, CEO Eucalyptus Systems, ex-MySQL CEO will be giving a =
keynot on "How Open Source Leads Infrastructure Innovation"
- Bill Press from Salesforce.com has been added to the  Cutting Edge of =
Search panel (joining LinkedIn, Twitter, and eHarmony)
- We've added several new talks, including Jon Gifford (Loggly), Erik =
Arnold (Lucene in Goverment/Search.USA.gov).  I'll be doing a session =
comparing Apache Lucene, Solr and NoSQL
- Submit your tough Solr challenges for the "Stump The Chump" session =
(send email to stump@lucenerevolution.org)

There's still a limited number of seats available for the Lucene and =
Solr two-day trainings preceding the conference. If you're interested =
please register now. Also please be aware that the early bird rate =
expires September 10.

Hope to see you there.

Cheers,
Grant

--------------------------
Grant Ingersoll
http://lucenerevolution.org Apache Lucene/Solr Conference, Boston Oct =
7-8


--Apple-Mail-23-8070525--

