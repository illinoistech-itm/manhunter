From java-user-return-29547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 01 08:44:50 2007
Return-Path: <java-user-return-29547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73202 invoked from network); 1 Aug 2007 08:44:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2007 08:44:48 -0000
Received: (qmail 58606 invoked by uid 500); 1 Aug 2007 08:44:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58563 invoked by uid 500); 1 Aug 2007 08:44:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58552 invoked by uid 99); 1 Aug 2007 08:44:41 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 01:44:41 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.198.191] (HELO rv-out-0910.google.com) (209.85.198.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 08:44:38 +0000
Received: by rv-out-0910.google.com with SMTP id k20so108443rvb
        for <java-user@lucene.apache.org>; Wed, 01 Aug 2007 01:44:17 -0700 (PDT)
Received: by 10.143.34.11 with SMTP id m11mr21682wfj.1185957856744;
        Wed, 01 Aug 2007 01:44:16 -0700 (PDT)
Received: by 10.143.39.9 with HTTP; Wed, 1 Aug 2007 01:44:16 -0700 (PDT)
Message-ID: <7cbc67ff0708010144m566db3b3hc45c6742b89afa3b@mail.gmail.com>
Date: Wed, 1 Aug 2007 14:14:16 +0530
From: "Harini Raghavan" <harini.raghavan@insideview.com>
To: java-user@lucene.apache.org
Subject: Searching with too many clauses + Out of Memory
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_60452_17090410.1185957856712"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_60452_17090410.1185957856712
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

 Hi Everyone,

I am using Compass 1.1 M2 which supports Lucene 2.2 to store & search huge
amount of company, executive and employment data. There are some usecases
where I need to search for executives/employments on the result set of
company search. But when I try to create a compass query to search for
executives for over 1 lac company ids, it runs out of memory as the query is
huge. Here is the exception stack trace:

java.lang.OutOfMemoryError: GC overhead limit exceeded
at org.apache.lucene.index.SegmentReader.termDocs(SegmentReader.java:342)
at org.apache.lucene.index.MultiTermDocs.termDocs(MultiReader.java:435)
at org.apache.lucene.index.MultiTermDocs.termDocs(MultiReader.java:428)
at org.apache.lucene.index.MultiTermDocs.read(MultiReader.java:393)
at org.apache.lucene.search.TermScorer.next(TermScorer.java:106)
at org.apache.lucene.util.ScorerDocQueue.topNextAndAdjustElsePop(
ScorerDocQueue.ja va:116)
at org.apache.lucene.search.DisjunctionSumScorer.advanceAfterCurrent(DisjunctionSu
mScorer.java:175)
at org.apache.lucene.search.DisjunctionSumScorer.next(
DisjunctionSumScorer.java:14 6)
at org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java:327)
at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:146)
at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:124)
at org.apache.lucene.search.MultiSearcher.search(MultiSearcher.java:232)
at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:74)
at org.apache.lucene.search.Hits.<init>(Hits.java:61)
at org.apache.lucene.search.Searcher.search(Searcher.java:55)
at
org.compass.core.lucene.engine.transaction.ReadCommittedTransaction.findByQuery(
ReadCommittedTransaction.java:469)
at
org.compass.core.lucene.engine.transaction.ReadCommittedTransaction.doFind(Read
CommittedTransaction.java:426)
at org.compass.core.lucene.engine.transaction.AbstractTransaction.find(AbstractTra
nsaction.java:91)
at org.compass.core.lucene.engine.LuceneSearchEngine.find(
LuceneSearchEngine.java: 379)
at org.compass.core.lucene.engine.LuceneSearchEngineQuery.hits(LuceneSearchEngineQ
uery.java:151)
at org.compass.core.impl.DefaultCompassQuery.hits(DefaultCompassQuery.java:133)

at org.compass.core.support.search.CompassSearchHelper.performSearch(CompassSearch
Helper.java:144)
at org.compass.core.support.search.CompassSearchHelper$1.doInCompass(CompassSearch
Helper.java:89)
at org.compass.core.CompassTemplate.execute(CompassTemplate.java:137)
at org.compass.core.support.search.CompassSearchHelper.search(CompassSearchHelper.
java:86)

It looks like this error is actually in the lucene code. It would be great
if anyone in this group has an idea about this kind of usecase and has some
suggestions.

Thanks,
Harini

------=_Part_60452_17090410.1185957856712--

From java-user-return-29548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 01 09:19:28 2007
Return-Path: <java-user-return-29548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85454 invoked from network); 1 Aug 2007 09:19:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2007 09:19:06 -0000
Received: (qmail 46099 invoked by uid 500); 1 Aug 2007 09:18:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45791 invoked by uid 500); 1 Aug 2007 09:18:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45528 invoked by uid 99); 1 Aug 2007 09:18:22 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of michael.wechner@wyona.com designates 195.226.6.75 as permitted sender)
Received: from [195.226.6.75] (HELO mail.wyona.com) (195.226.6.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 02:18:19 -0700
Received: from [192.168.1.53] (unknown [195.226.6.66])
	by mail.wyona.com (Postfix) with ESMTP id 0C656325EB0
	for <java-user@lucene.apache.org>; Wed,  1 Aug 2007 11:11:58 +0200 (CEST)
Message-ID: <46B04EB0.6020200@wyona.com>
Date: Wed, 01 Aug 2007 11:13:20 +0200
From: Michael Wechner <michael.wechner@wyona.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.12) Gecko/20050920
X-Accept-Language: en, de, en-us, fr-ch
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Problem Search using lucene
References: <11939477.post@talk.nabble.com> <7a14509e0707312133y79b69e8cq7a07c4ef60e51917@mail.gmail.com> <11940536.post@talk.nabble.com> <4FA8C6AEE609B644B38DE471A3657A620141D4F6@INVS1.bangalore.corp.akamai.com>
In-Reply-To: <4FA8C6AEE609B644B38DE471A3657A620141D4F6@INVS1.bangalore.corp.akamai.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Chhabra, Kapil wrote:

>You just have to make sure that what you are searching is indexed (and
>esp. in the same format/case).
>Use Luke (http://www.getopt.org/luke/) to browse through your index.
>  
>

Does Luke also work re to Nutch?

Thanks

Michael

>This might give you an insight of what you have indexed and what you are
>searching for.
>
>Regards,
>kapilChhabra
>
>-----Original Message-----
>From: masz-wow [mailto:maznorlia.syafina@gmail.com] 
>Sent: Wednesday, August 01, 2007 12:13 PM
>To: java-user@lucene.apache.org
>Subject: Re: Problem Search using lucene
>
>
>Thanks Joe
>
>I'm using this function as my analyzer
>
>public static Analyzer getDefaultAnalyzer() {
>	PerFieldAnalyzerWrapper perFieldAnalyzer = new
>PerFieldAnalyzerWrapper(new
>StopAnalyzer());
>		perFieldAnalyzer.addAnalyzer("contents", new
>StopAnalyzer());
>		perFieldAnalyzer.addAnalyzer("fileID", new
>WhitespaceAnalyzer());
>		perFieldAnalyzer.addAnalyzer("path", new
>KeywordAnalyzer());
>		return perFieldAnalyzer;
>	}
>
>StopAnalyzer builds an analyzer which removes words in
>ENGLISH_STOP_WORDS.That might be the cause why I cannot search words
>such as
>'and' 'to'
>
>BUT
>
>I'm still having problem when I search a few words other than english
>words
>such as name (eg: Ghazat) or string of numbers (eg:45600).
>  
>


-- 
Michael Wechner
Wyona      -   Open Source Content Management - Yanel, Yulup
http://www.wyona.com
michael.wechner@wyona.com, michi@apache.org
+41 44 272 91 61


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 01 15:00:24 2007
Return-Path: <java-user-return-29549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27184 invoked from network); 1 Aug 2007 15:00:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2007 15:00:23 -0000
Received: (qmail 68848 invoked by uid 500); 1 Aug 2007 15:00:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68735 invoked by uid 500); 1 Aug 2007 15:00:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68613 invoked by uid 99); 1 Aug 2007 15:00:13 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 08:00:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of srinivas.apache@gmail.com designates 66.249.90.176 as permitted sender)
Received: from [66.249.90.176] (HELO ik-out-1112.google.com) (66.249.90.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 15:00:03 +0000
Received: by ik-out-1112.google.com with SMTP id b32so52011ika
        for <java-user@lucene.apache.org>; Wed, 01 Aug 2007 07:59:47 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=qdSBJEt0ItEzwODVUzAFqydjxlfbvqqfOpYYrj12MAdGiarzsQxUQU4mij/ZCNQzBiKJxvKVLtvy7gWHu2cakJfcW7LiVeY9VKg3iUGkcgA8rzDG1nUmu9Bm2mpc31kMeoWO+nNPCFnoTuQIsmeQcCDw/5tCxVzqGfafx2ThDMQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=XjLPDeHAmRkUJZ+FGx8v0qwd+abrZI6u8H7qWZTBoRPyf8mf1JLVRL4p0wOt+gZQACBq/OUPaz6x2p6pLdDyioUNEVpAUdoBZwowgY/+w/y6ZCa/qzBLuE2Lzku86mAB8yzbb0eruNlec1hlL5qU+kejRFkxhVMOK05o8U3Qv2s=
Received: by 10.78.81.20 with SMTP id e20mr211312hub.1185980387532;
        Wed, 01 Aug 2007 07:59:47 -0700 (PDT)
Received: by 10.78.180.10 with HTTP; Wed, 1 Aug 2007 07:59:47 -0700 (PDT)
Message-ID: <b0ba206a0708010759rdc8ff7ay953f0b2d5bbac1df@mail.gmail.com>
Date: Wed, 1 Aug 2007 20:29:47 +0530
From: "Srinivasarao Vundavalli" <srinivas.apache@gmail.com>
To: java-user@lucene.apache.org
Subject: Crawling in Nutch
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_44147_6976654.1185980387508"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_44147_6976654.1185980387508
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
     Where does (in which field)  nutch stores the content of a document
while indexing. I am using this nutch index to search in Lucene. So i want
to know the field in which the content of the document is present.

Thank You

------=_Part_44147_6976654.1185980387508--

From java-user-return-29550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 01 15:10:03 2007
Return-Path: <java-user-return-29550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47517 invoked from network); 1 Aug 2007 15:10:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2007 15:10:01 -0000
Received: (qmail 91225 invoked by uid 500); 1 Aug 2007 15:09:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91185 invoked by uid 500); 1 Aug 2007 15:09:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91174 invoked by uid 99); 1 Aug 2007 15:09:55 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 08:09:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.51.64.130] (HELO idlewild.ccnep.com.np) (202.51.64.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 15:09:44 +0000
Received: from chandantamrakar ([202.51.76.138])
	by idlewild.ccnep.com.np (8.13.3/8.13.3) with ESMTP id l71G29YG015816
	for <java-user@lucene.apache.org>; Wed, 1 Aug 2007 21:47:13 +0545
Message-Id: <200708011602.l71G29YG015816@idlewild.ccnep.com.np>
From: "Chandan Tamrakar" <chandan@ccnep.com.np>
To: <java-user@lucene.apache.org>
Subject: RE: Searching with too many clauses + Out of Memory
Date: Wed, 1 Aug 2007 20:54:17 +0545
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <7cbc67ff0708010144m566db3b3hc45c6742b89afa3b@mail.gmail.com>
Thread-Index: AcfUH5o7lxOD2AbIRa2rmdLYPO3MewALdEaw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Scanned-By: MIMEDefang 2.62 on 202.51.64.130
X-Virus-Checked: Checked by ClamAV on apache.org

What is the size of heap u r allocating for your app ?

-----Original Message-----
From: Harini Raghavan [mailto:harini.raghavan@insideview.com] 
Sent: Wednesday, August 01, 2007 2:29 PM
To: java-user@lucene.apache.org
Subject: Searching with too many clauses + Out of Memory

 Hi Everyone,

I am using Compass 1.1 M2 which supports Lucene 2.2 to store & search huge
amount of company, executive and employment data. There are some usecases
where I need to search for executives/employments on the result set of
company search. But when I try to create a compass query to search for
executives for over 1 lac company ids, it runs out of memory as the query is
huge. Here is the exception stack trace:

java.lang.OutOfMemoryError: GC overhead limit exceeded
at org.apache.lucene.index.SegmentReader.termDocs(SegmentReader.java:342)
at org.apache.lucene.index.MultiTermDocs.termDocs(MultiReader.java:435)
at org.apache.lucene.index.MultiTermDocs.termDocs(MultiReader.java:428)
at org.apache.lucene.index.MultiTermDocs.read(MultiReader.java:393)
at org.apache.lucene.search.TermScorer.next(TermScorer.java:106)
at org.apache.lucene.util.ScorerDocQueue.topNextAndAdjustElsePop(
ScorerDocQueue.ja va:116)
at
org.apache.lucene.search.DisjunctionSumScorer.advanceAfterCurrent(Disjunctio
nSu
mScorer.java:175)
at org.apache.lucene.search.DisjunctionSumScorer.next(
DisjunctionSumScorer.java:14 6)
at org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java:327)
at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:146)
at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:124)
at org.apache.lucene.search.MultiSearcher.search(MultiSearcher.java:232)
at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:74)
at org.apache.lucene.search.Hits.<init>(Hits.java:61)
at org.apache.lucene.search.Searcher.search(Searcher.java:55)
at
org.compass.core.lucene.engine.transaction.ReadCommittedTransaction.findByQu
ery(
ReadCommittedTransaction.java:469)
at
org.compass.core.lucene.engine.transaction.ReadCommittedTransaction.doFind(R
ead
CommittedTransaction.java:426)
at
org.compass.core.lucene.engine.transaction.AbstractTransaction.find(Abstract
Tra
nsaction.java:91)
at org.compass.core.lucene.engine.LuceneSearchEngine.find(
LuceneSearchEngine.java: 379)
at
org.compass.core.lucene.engine.LuceneSearchEngineQuery.hits(LuceneSearchEngi
neQ
uery.java:151)
at
org.compass.core.impl.DefaultCompassQuery.hits(DefaultCompassQuery.java:133)

at
org.compass.core.support.search.CompassSearchHelper.performSearch(CompassSea
rch
Helper.java:144)
at
org.compass.core.support.search.CompassSearchHelper$1.doInCompass(CompassSea
rch
Helper.java:89)
at org.compass.core.CompassTemplate.execute(CompassTemplate.java:137)
at
org.compass.core.support.search.CompassSearchHelper.search(CompassSearchHelp
er.
java:86)

It looks like this error is actually in the lucene code. It would be great
if anyone in this group has an idea about this kind of usecase and has some
suggestions.

Thanks,
Harini



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 01 15:32:27 2007
Return-Path: <java-user-return-29551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95798 invoked from network); 1 Aug 2007 15:32:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2007 15:32:23 -0000
Received: (qmail 35214 invoked by uid 500); 1 Aug 2007 15:32:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35176 invoked by uid 500); 1 Aug 2007 15:32:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35165 invoked by uid 99); 1 Aug 2007 15:32:17 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 08:32:17 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,NORMAL_HTTP_TO_IP,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jattardi@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 15:32:05 +0000
Received: by wa-out-1112.google.com with SMTP id j40so239787wah
        for <java-user@lucene.apache.org>; Wed, 01 Aug 2007 08:31:50 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=BjQ/+ytCBVNXhduqK9jGQsF78T1TqzDq67OT03GeoGDjArbPE7fdIMkmW2NIzQZLosPznp46fDoN7kiW0+k3rV0B/7G4b1iXdkvqnmZfDan2trUpTWhWcgTCpXdD+bIxRT8Jt/5NlI5RsEvYqis7XkXL71FaqcBI/waPet0wFQc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=hE+4BixhubklaXiCxmkYDnwGRG7fh+0px5z1EsIjm/sY7linvnarjKww8tImA902BqqPdgYbcLRoSvQ3FPJd3nxzGZZdgLSep6Prxs8orGG1bycCGK8qvqjq2YY5et38hHiCUZcuP8wdB8w0dKGCx0/SsUAIhQlB6CXnxZct1pg=
Received: by 10.114.158.1 with SMTP id g1mr831118wae.1185982310210;
        Wed, 01 Aug 2007 08:31:50 -0700 (PDT)
Received: by 10.114.121.8 with HTTP; Wed, 1 Aug 2007 08:31:50 -0700 (PDT)
Message-ID: <7a14509e0708010831g26c3c53ep1c61d485f31a4d0c@mail.gmail.com>
Date: Wed, 1 Aug 2007 11:31:50 -0400
From: "Joe Attardi" <jattardi@gmail.com>
To: "Lucene Mailing List" <java-user@lucene.apache.org>
Subject: More IP/MAC indexing questions
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_48000_5827540.1185982310189"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_48000_5827540.1185982310189
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi again, everyone. First of all, I want to thank everyone for their
extremely helpful replies so far.
Also, I just started reading the book "Lucene in Action" last night. So far
it's an awesome book, so a big thanks to the authors.

Anyhow, on to my question. As I've mentioned in several of my previous
messages, I am indexing different pieces of information about servers - in
particular, my question is about indexing the IP address and MAC address.

Using the StandardAnalyzer, an IP is kept as a single token ("192.168.1.100"),
and a MAC is broken up into one token per octet ("00", "17", "fd", "14",
"d3", "2a"). Many searches will be for partial IPs or MACs ("192.168",
"00:17:fd", etc).

Are either of these methods of indexing the addresses (single token vs
per-octet token) more or less efficient than the other when indexing large
numbers of these?

-- 
Joe Attardi
jattardi@gmail.com
http://thinksincode.blogspot.com/

------=_Part_48000_5827540.1185982310189--

From java-user-return-29552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 01 15:49:09 2007
Return-Path: <java-user-return-29552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28053 invoked from network); 1 Aug 2007 15:49:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2007 15:49:08 -0000
Received: (qmail 91393 invoked by uid 500); 1 Aug 2007 15:49:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91357 invoked by uid 500); 1 Aug 2007 15:49:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91346 invoked by uid 99); 1 Aug 2007 15:49:00 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 08:49:00 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_FONT_FACE_BAD,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ridwanhabbal@hotmail.com designates 65.54.246.223 as permitted sender)
Received: from [65.54.246.223] (HELO bay0-omc3-s23.bay0.hotmail.com) (65.54.246.223)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 15:48:44 +0000
Received: from BAY105-W2 ([65.54.224.102]) by bay0-omc3-s23.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Wed, 1 Aug 2007 08:48:28 -0700
Message-ID: <BAY105-W240679F09A4B88C38CB0ECCE80@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_9e78a6b8-6091-4686-8b4e-ac0d57e7152d_"
X-Originating-IP: [216.6.1.34]
From: Ridwan Habbal <ridwanhabbal@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: IndexReader deletes more that expected
Date: Wed, 1 Aug 2007 15:48:28 +0000
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 01 Aug 2007 15:48:28.0755 (UTC) FILETIME=[6785E230:01C7D453]
X-Virus-Checked: Checked by ClamAV on apache.org

--_9e78a6b8-6091-4686-8b4e-ac0d57e7152d_
Content-Type: text/plain; charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable

Hi,  I got unexpected behavior while testing lucene. To shortly address the=
 problem: Using IndexWriter I add docs with fields named ID with a consecut=
ive order (1,2,3,4, etc) then close that index. I get new IndexReader, and =
call IndexReader.deleteDocuments(Term). The term is simply new Term("ID", "=
1"). and then class close on IndexReader. Things work out fine. But if i ad=
d docs using IndexWriter, close writer, then create new IndexReader to dele=
te one of the docs already inserted, but without closing index. while the i=
ndexReader that perform deletion is still not closed, I add more docs, and =
then commit the IndexWriter, so when i search I get all added docs in the t=
wo phases (before using deleteDocuments() on IndexReader and after because =
i haven't closed IndexReader, howerer, closed IndexWriter). I close IndexRe=
ader and then query the index, so i deletes all docs after opening it till =
closing it, in addition to the specified doc in the Term object (in this te=
st case: ID=3D1). I know that i can avoid this by close IndexReader directl=
y after deleting docs, but what about runing it on mutiThread app like web =
application?  There you are the code:=20
IndexSearcher indexSearcher =3D new IndexSearcher(this.indexDirectory);
Hits hitsB4InsertAndClose =3D null;
hitsB4InsertAndClose =3D getAllAsHits(indexSearcher);
int beforeInsertAndClose =3D hitsB4InsertAndClose.length();

indexWriter.addDocument(getNewElement());
indexWriter.addDocument(getNewElement());
indexWriter.addDocument(getNewElement());
indexWriter.close();
IndexSearcher indexSearcherDel =3D new IndexSearcher(this.indexDirectory);
indexSearcherDel.getIndexReader().deleteDocuments(new Term("ID","1"));

indexWriter.addDocument(getNewElement());
indexWriter.addDocument(getNewElement());
indexWriter.addDocument(getNewElement());
indexWriter.addDocument(getNewElement());
indexWriter.addDocument(getNewElement());
indexWriter.addDocument(getNewElement());
indexWriter.addDocument(getNewElement());
indexWriter.addDocument(getNewElement());
indexWriter.addDocument(getNewElement());
indexWriter.addDocument(getNewElement());
indexWriter.addDocument(getNewElement());

indexWriter.close();
Hits hitsAfterInsertAndClose =3D getAllAsHits(indexSearcher);
int AfterInsertAndClose =3D hitsAfterInsertAndClose.length();//This is 14
=20
indexWriter.addDocument(getNewElement());
indexWriter.close();
Hits hitsAfterInsertAndAfterCloseb4Delete =3D getAllAsHits(indexSearcher);
int hitsAfterInsertButAndAfterCountb4Delete =3D hitsAfterInsertAndAfterClos=
eb4Delete.length();//This is 15


=20
indexSearcherDel.close();
Hits hitsAfterInsertAndAfterClose =3D getAllAsHits(indexSearcher);int hitsA=
fterInsertButAndAfterCount =3D hitsAfterInsertAndAfterClose.length();//This=
 is 2   The two methods I Use=20
private Hits getAllAsHits(IndexSearcher indexSearcher){
try{
Analyzer analyzer =3D new StandardAnalyzer();
String defaultSearchField =3D "all";
QueryParser parser =3D new QueryParser(defaultSearchField, analyzer);
indexSearcher =3D new IndexSearcher(this.indexDirectory);
Hits hits =3D indexSearcher.search(parser.parse("+alias:mydoc"));
indexSearcher.close();
return hits;
}catch(IOException ex){
throw new RuntimeException(ex);
}catch(org.apache.lucene.queryParser.ParseException ex){
throw new RuntimeException(ex);
}

}

private Document getNewElement(){
Map<String, String> map =3D new HashMap();
map.put("ID", new Integer(insertCounter).toString());
map.put("name", "name"+insertCounter);
insertCounter++;
Document document =3D new Document();
for (Iterator iter =3D map.keySet().iterator(); iter.hasNext();) {
String key =3D (String) iter.next();
document.add(new Field(key, map.get(key), Store.YES, Index.TOKENIZED));
}
document.add(new Field("alias", "mydoc", Store.YES, Index.UN_TOKENIZED));
return document;}  any clue why it works that way? I expect it to delete on=
ly one doc?=20
_________________________________________________________________
PC Magazine=92s 2007 editors=92 choice for best web mail=97award-winning Wi=
ndows Live Hotmail.
http://imagine-windowslive.com/hotmail/?locale=3Den-us&ocid=3DTXT_TAGHM_mig=
ration_HMWL_mini_pcmag_0707=

--_9e78a6b8-6091-4686-8b4e-ac0d57e7152d_--

From java-user-return-29553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 01 16:08:25 2007
Return-Path: <java-user-return-29553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64650 invoked from network); 1 Aug 2007 16:08:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2007 16:08:24 -0000
Received: (qmail 44257 invoked by uid 500); 1 Aug 2007 16:08:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44225 invoked by uid 500); 1 Aug 2007 16:08:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44199 invoked by uid 99); 1 Aug 2007 16:08:14 -0000
Received: from Unknown (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 09:08:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [198.144.201.51] (HELO esseff.org) (198.144.201.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 16:07:58 +0000
Received: from localhost (localhost [127.0.0.1])
	by esseff.org (Postfix) with ESMTP id 31F56525E3F
	for <java-user@lucene.apache.org>; Wed,  1 Aug 2007 09:09:08 -0700 (PDT)
X-Quarantine-ID: <COJ3hcJJOezM>
X-Virus-Scanned: amavisd-new at esseff.org
Received: from esseff.org ([127.0.0.1])
	by localhost (esseff.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id COJ3hcJJOezM for <java-user@lucene.apache.org>;
	Wed,  1 Aug 2007 09:09:02 -0700 (PDT)
Received: from professorville.windows.esseff.org (professorville.windows.esseff.org [10.0.1.16])
	by esseff.org (Postfix) with ESMTP id 9E8A851041
	for <java-user@lucene.apache.org>; Wed,  1 Aug 2007 09:09:02 -0700 (PDT)
Subject: RE: IndexReader deletes more that expected
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Wed, 1 Aug 2007 09:07:32 -0700
Content-class: urn:content-classes:message
Message-ID: <392521EA2692A2418DF48C331E61E3250E7406@professorville.windows.esseff.org>
X-MimeOLE: Produced By Microsoft Exchange V6.5
In-Reply-To: <BAY105-W240679F09A4B88C38CB0ECCE80@phx.gbl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: IndexReader deletes more that expected
Thread-Index: AcfUU4jR1+BF4nHqS/eb5eAOBWre+QAAYclw
References: <BAY105-W240679F09A4B88C38CB0ECCE80@phx.gbl>
From: "Steven Parkes" <steven_parkes@esseff.org>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

If I'm reading this correctly, there's something a little wonky here. In
your example code, you close the IndexWriter and then, without creating
a new IndexWriter, you call addDocument again. This shouldn't be
possible (what version of Lucene are you using?)

Assuming for the time being that you are creating the IndexWriter again,
the other issue here is that you shouldn't be able to have a reader and
a writer changing an index at the same time. There should be a lock
failure. This should occur either in the Index=20

Might you be creating your IndexWriters (which you don't show) with the
create flag always set to true? That will wipe your index each time,
ignoring the locks and cause all sorts of weird results.

-----Original Message-----
From: Ridwan Habbal [mailto:ridwanhabbal@hotmail.com]=20
Sent: Wednesday, August 01, 2007 8:48 AM
To: java-user@lucene.apache.org
Subject: IndexReader deletes more that expected

Hi,  I got unexpected behavior while testing lucene. To shortly address
the problem: Using IndexWriter I add docs with fields named ID with a
consecutive order (1,2,3,4, etc) then close that index. I get new
IndexReader, and call IndexReader.deleteDocuments(Term). The term is
simply new Term("ID", "1"). and then class close on IndexReader. Things
work out fine. But if i add docs using IndexWriter, close writer, then
create new IndexReader to delete one of the docs already inserted, but
without closing index. while the indexReader that perform deletion is
still not closed, I add more docs, and then commit the IndexWriter, so
when i search I get all added docs in the two phases (before using
deleteDocuments() on IndexReader and after because i haven't closed
IndexReader, howerer, closed IndexWriter). I close IndexReader and then
query the index, so i deletes all docs after opening it till closing it,
in addition to the specified doc in the Term object (in this test case:
ID=3D1). I know that i can avoid this by close IndexReader directly =
after
deleting docs, but what about runing it on mutiThread app like web
application?  There you are the code:=20
IndexSearcher indexSearcher =3D new IndexSearcher(this.indexDirectory);
Hits hitsB4InsertAndClose =3D null;
hitsB4InsertAndClose =3D getAllAsHits(indexSearcher);
int beforeInsertAndClose =3D hitsB4InsertAndClose.length();

indexWriter.addDocument(getNewElement());
indexWriter.addDocument(getNewElement());
indexWriter.addDocument(getNewElement());
indexWriter.close();
IndexSearcher indexSearcherDel =3D new =
IndexSearcher(this.indexDirectory);
indexSearcherDel.getIndexReader().deleteDocuments(new Term("ID","1"));

indexWriter.addDocument(getNewElement());
indexWriter.addDocument(getNewElement());
indexWriter.addDocument(getNewElement());
indexWriter.addDocument(getNewElement());
indexWriter.addDocument(getNewElement());
indexWriter.addDocument(getNewElement());
indexWriter.addDocument(getNewElement());
indexWriter.addDocument(getNewElement());
indexWriter.addDocument(getNewElement());
indexWriter.addDocument(getNewElement());
indexWriter.addDocument(getNewElement());

indexWriter.close();
Hits hitsAfterInsertAndClose =3D getAllAsHits(indexSearcher);
int AfterInsertAndClose =3D hitsAfterInsertAndClose.length();//This is =
14
=20
indexWriter.addDocument(getNewElement());
indexWriter.close();
Hits hitsAfterInsertAndAfterCloseb4Delete =3D =
getAllAsHits(indexSearcher);
int hitsAfterInsertButAndAfterCountb4Delete =3D
hitsAfterInsertAndAfterCloseb4Delete.length();//This is 15


=20
indexSearcherDel.close();
Hits hitsAfterInsertAndAfterClose =3D getAllAsHits(indexSearcher);int
hitsAfterInsertButAndAfterCount =3D
hitsAfterInsertAndAfterClose.length();//This is 2   The two methods I
Use=20
private Hits getAllAsHits(IndexSearcher indexSearcher){
try{
Analyzer analyzer =3D new StandardAnalyzer();
String defaultSearchField =3D "all";
QueryParser parser =3D new QueryParser(defaultSearchField, analyzer);
indexSearcher =3D new IndexSearcher(this.indexDirectory);
Hits hits =3D indexSearcher.search(parser.parse("+alias:mydoc"));
indexSearcher.close();
return hits;
}catch(IOException ex){
throw new RuntimeException(ex);
}catch(org.apache.lucene.queryParser.ParseException ex){
throw new RuntimeException(ex);
}

}

private Document getNewElement(){
Map<String, String> map =3D new HashMap();
map.put("ID", new Integer(insertCounter).toString());
map.put("name", "name"+insertCounter);
insertCounter++;
Document document =3D new Document();
for (Iterator iter =3D map.keySet().iterator(); iter.hasNext();) {
String key =3D (String) iter.next();
document.add(new Field(key, map.get(key), Store.YES, Index.TOKENIZED));
}
document.add(new Field("alias", "mydoc", Store.YES,
Index.UN_TOKENIZED));
return document;}  any clue why it works that way? I expect it to delete
only one doc?=20
_________________________________________________________________
PC Magazine's 2007 editors' choice for best web mail-award-winning
Windows Live Hotmail.
http://imagine-windowslive.com/hotmail/?locale=3Den-us&ocid=3DTXT_TAGHM_m=
igr
ation_HMWL_mini_pcmag_0707

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 01 17:14:44 2007
Return-Path: <java-user-return-29554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93156 invoked from network); 1 Aug 2007 17:14:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2007 17:14:37 -0000
Received: (qmail 55431 invoked by uid 500); 1 Aug 2007 17:14:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55398 invoked by uid 500); 1 Aug 2007 17:14:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55387 invoked by uid 99); 1 Aug 2007 17:14:30 -0000
Received: from igron-1.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 10:14:30 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 64.233.184.236 as permitted sender)
Received: from [64.233.184.236] (HELO wr-out-0506.google.com) (64.233.184.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 17:14:03 +0000
Received: by wr-out-0506.google.com with SMTP id 57so99818wri
        for <java-user@lucene.apache.org>; Wed, 01 Aug 2007 10:14:05 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dLcbdYeHQ0uMZ0Tw78t9zXhSJDDJI1auK/s9sJzTWCDdKrOW5rJ2OIobOntYtW9CL+GVHIOZIPmhzKzRxoLern3NUntaNZZHTVtWuN1eF/s1v8zwk6ivyH6Q1ro9p1uFUbjOrVnlus4PRLeN3+r6gI0EZnY5mW8DF01MIjFiTmM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GzH+J3dTB2lGqRgv7RQhM8SgER0TvlUmaRa7ik9Y00/NlZ8voUCWbw9L7dSnXwYGzhp5x7EmNV0YWlgw5Eg5JTLWmgcfh6sRXULZmhao2wVeGmyyJgbg9B1gZj2IW2fTh7F+jojVgNGcpCa9GJcbiSemliphCuaCe3ovmqr1fGQ=
Received: by 10.100.124.5 with SMTP id w5mr566984anc.1185988444416;
        Wed, 01 Aug 2007 10:14:04 -0700 (PDT)
Received: by 10.100.14.15 with HTTP; Wed, 1 Aug 2007 10:14:04 -0700 (PDT)
Message-ID: <ab0709bf0708011014q78955295yb60c3ca99a72bf87@mail.gmail.com>
Date: Wed, 1 Aug 2007 13:14:04 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexReader deletes more that expected
In-Reply-To: <BAY105-W240679F09A4B88C38CB0ECCE80@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_72878_7725967.1185988444380"
References: <BAY105-W240679F09A4B88C38CB0ECCE80@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_72878_7725967.1185988444380
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On 8/1/07, Ridwan Habbal <ridwanhabbal@hotmail.com> wrote:
>
>  but what about runing it on mutiThread app like web application?  There
> you are the code:


If you are targeting a multi threaded webapp than I strongly suggest you
look into using either Solr or the LuceneIndexAccessor code. You will want
to use some form of reference counting to manage your Readers and Writers.

Also, you can now use IndexWriter (Lucene 2.0 and greater I think) to
delete. This allows for efficient mixing of deletes and adds by buffering
the deletes, and then opening an IndexReader to commit them later. This is
much more efficient than IndexModifier.

- Mark

------=_Part_72878_7725967.1185988444380--

From java-user-return-29555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 01 17:16:00 2007
Return-Path: <java-user-return-29555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94104 invoked from network); 1 Aug 2007 17:15:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2007 17:15:58 -0000
Received: (qmail 59517 invoked by uid 500); 1 Aug 2007 17:15:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58686 invoked by uid 500); 1 Aug 2007 17:15:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58673 invoked by uid 99); 1 Aug 2007 17:15:52 -0000
Received: from igron-1.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 10:15:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,NORMAL_HTTP_TO_IP,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.128.187 as permitted sender)
Received: from [209.85.128.187] (HELO fk-out-0910.google.com) (209.85.128.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 17:15:23 +0000
Received: by fk-out-0910.google.com with SMTP id z23so220268fkz
        for <java-user@lucene.apache.org>; Wed, 01 Aug 2007 10:15:24 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lEsrcJKOx8kwMUp1lKQrxsiFn+bWXp3118nWANGYa+3jBjl9df0xKE5pdMxKR1kN5ODXrN3kVLQtW2XRfaRB2xyhpN40O1UTHpW4Y0/CB47N3FLIH+s55LmSmec/KW0n9mHNZVjxO+I3ipZPbhlVk9jqHH950m+8qlYhFO4dt/s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DE/r3GB3fN6vEd2rvZf8RiVjymFFuRdvEYjvsUtjzfSJcLer2WfuyJV4R8dHO1sEG1quwUiM+sVBaatePNIL3f5oomZQ7cgeZ9AEA39sTV7PzK/mrfxK0ayxBweqvHBiri5DvTNETua1w+pQ72CdvxBmZlNP4q06IaZMMni4SNE=
Received: by 10.82.162.14 with SMTP id k14mr1182939bue.1185988524391;
        Wed, 01 Aug 2007 10:15:24 -0700 (PDT)
Received: by 10.82.190.14 with HTTP; Wed, 1 Aug 2007 10:15:24 -0700 (PDT)
Message-ID: <359a92830708011015m43ed0dfapb5a68be62c006443@mail.gmail.com>
Date: Wed, 1 Aug 2007 13:15:24 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: More IP/MAC indexing questions
In-Reply-To: <7a14509e0708010831g26c3c53ep1c61d485f31a4d0c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_47474_13606129.1185988524367"
References: <7a14509e0708010831g26c3c53ep1c61d485f31a4d0c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_47474_13606129.1185988524367
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

First, consider using your own analyzer and/or breaking the IP addresses
up by substituting ' ' for '.' upon input. Otherwise, you'll have endless
issues as time passes......

But on to your question. Please post what you mean by
"a large number". 10,000? 1,000,000,000? we have no clue
from your posts so far...

That said, efficiency is hugely overrated at this stage of your
design. I'd personally use whatever is easiest and run some
tests.

Just index them as single (unbroken) tokens to start and search
your partial address with PrefixQuery. Or index them as
individual tokens and create a SpanFirstQuery. Or...

And measure <G>.

Best
Erick

On 8/1/07, Joe Attardi <jattardi@gmail.com> wrote:
>
> Hi again, everyone. First of all, I want to thank everyone for their
> extremely helpful replies so far.
> Also, I just started reading the book "Lucene in Action" last night. So
> far
> it's an awesome book, so a big thanks to the authors.
>
> Anyhow, on to my question. As I've mentioned in several of my previous
> messages, I am indexing different pieces of information about servers - in
> particular, my question is about indexing the IP address and MAC address.
>
> Using the StandardAnalyzer, an IP is kept as a single token ("
> 192.168.1.100"),
> and a MAC is broken up into one token per octet ("00", "17", "fd", "14",
> "d3", "2a"). Many searches will be for partial IPs or MACs ("192.168",
> "00:17:fd", etc).
>
> Are either of these methods of indexing the addresses (single token vs
> per-octet token) more or less efficient than the other when indexing large
> numbers of these?
>
> --
> Joe Attardi
> jattardi@gmail.com
> http://thinksincode.blogspot.com/
>

------=_Part_47474_13606129.1185988524367--

From java-user-return-29556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 01 17:53:00 2007
Return-Path: <java-user-return-29556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14363 invoked from network); 1 Aug 2007 17:52:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2007 17:52:59 -0000
Received: (qmail 26172 invoked by uid 500); 1 Aug 2007 17:52:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26139 invoked by uid 500); 1 Aug 2007 17:52:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26128 invoked by uid 99); 1 Aug 2007 17:52:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 10:52:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jattardi@gmail.com designates 209.85.146.180 as permitted sender)
Received: from [209.85.146.180] (HELO wa-out-1112.google.com) (209.85.146.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 17:52:22 +0000
Received: by wa-out-1112.google.com with SMTP id j40so276471wah
        for <java-user@lucene.apache.org>; Wed, 01 Aug 2007 10:52:23 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qJ4ziSB6f7+3w66c0j/YtLJ+hdebEnDXX4SFQS9h9pM5N8/jMQ/4zdjXPlMH2b6TkWf9ug9Z3VPDO8iMwZpF9c+sd1aMSMLeBBhX2I/BHZlWTQ+p4n4tCpNPWmq7uOl1V9s60UHHf6BzLuqFiGWams3qjLMwYRKNm+9Atc/4hH8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=CjL+L5DKY8tPPePgoFxSP356Zymy2ESkVahVeXsiDDk0+FUooAWgpYYLTVzTmdui1mhFyCADx2Ehi+xGENt2n3yZrylvJIYqvv6kAKjLPvZYPr0RedU0lSMa+JtnCmEB/yrFru6kVNrGK8hyvbGlSQM0mm/js7Sl9sDR4cgIzAE=
Received: by 10.115.14.1 with SMTP id r1mr964853wai.1185990742974;
        Wed, 01 Aug 2007 10:52:22 -0700 (PDT)
Received: by 10.114.121.8 with HTTP; Wed, 1 Aug 2007 10:52:22 -0700 (PDT)
Message-ID: <7a14509e0708011052v6be22ddej4a8cd516a513fe1@mail.gmail.com>
Date: Wed, 1 Aug 2007 13:52:22 -0400
From: "Joe Attardi" <jattardi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: More IP/MAC indexing questions
In-Reply-To: <359a92830708011015m43ed0dfapb5a68be62c006443@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_50308_16618761.1185990742941"
References: <7a14509e0708010831g26c3c53ep1c61d485f31a4d0c@mail.gmail.com>
	 <359a92830708011015m43ed0dfapb5a68be62c006443@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_50308_16618761.1185990742941
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Erick,

First, consider using your own analyzer and/or breaking the IP addresses
> up by substituting ' ' for '.' upon input.

Do you mean breaking the IP up into one token for each segment, like ["192",
"168", "1", "100"] ?



> But on to your question. Please post what you mean by
> "a large number". 10,000? 1,000,000,000? we have no clue
> from your posts so far...

I apologize for the lack of details. A large part of the data will be
wireless MAC addresses detected over the air, so it depends on the site. But
I suppose, worst case, we're looking at thousands or tens of thousands.
Comparatively speaking, then, I guess it's not such a large number compared
to some of the other questions discussed on the list.

That said, efficiency is hugely overrated at this stage of your
> design. I'd personally use whatever is easiest and run some
> tests.
>
> Just index them as single (unbroken) tokens to start and search
> your partial address with PrefixQuery.

This is what I was thinking originally, too. Although there could be times
where they are searching for a piece at the end of the address, which is why
my original post had me building a WildcardQuery.

The system will be searching log messages, too, and for that I'll use the
more normal StandardAnalyzer/QueryParser approach.

So what I am thinking of doing going forward is creating a custom query
parser class, that basically has special cases (IP addresses, MAC addresses)
where the query must be more customized, and in the other cases fall through
to the standard QueryParser class. Does this sound like a good idea?

Thanks again for your continued help!

------=_Part_50308_16618761.1185990742941--

From java-user-return-29557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 01 18:21:20 2007
Return-Path: <java-user-return-29557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26515 invoked from network); 1 Aug 2007 18:21:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2007 18:21:19 -0000
Received: (qmail 84007 invoked by uid 500); 1 Aug 2007 18:21:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83868 invoked by uid 500); 1 Aug 2007 18:21:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83857 invoked by uid 99); 1 Aug 2007 18:21:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 11:21:12 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.128.191 as permitted sender)
Received: from [209.85.128.191] (HELO fk-out-0910.google.com) (209.85.128.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 18:20:42 +0000
Received: by fk-out-0910.google.com with SMTP id z23so232636fkz
        for <java-user@lucene.apache.org>; Wed, 01 Aug 2007 11:20:45 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OSe4qL3BtyMAV8TGrgdA87bvlKONXl9XcVqvIOHvonyaN3OK4IGEX3SUOuTw3B4hnwcpZLZh7iNCU4jvB0djBKzfvf+5gXKhULceYfJWl7OSPJ3nw8Kz25ugICa6bfPaOBcigBrjWgKlYtVcnaMdJOl2UPpRB7HSDZFAdOULUIY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TfLLeMOG6C0mFu1f0msC0uouV6fcuHgQ62hjmJ2AFft59jKvUdjlXuQ1LNBEzEzcnTNo41vUUe/cwfy/yEPIeS7ukfSMK4hI9gs7BCFmi1NgELHw2N3SewxZAXz5rqqddqyqutB48CNw0//FT996ejj6s+bC4sOsZx4jMHc2FDU=
Received: by 10.82.126.5 with SMTP id y5mr1272097buc.1185992444747;
        Wed, 01 Aug 2007 11:20:44 -0700 (PDT)
Received: by 10.82.190.14 with HTTP; Wed, 1 Aug 2007 11:20:44 -0700 (PDT)
Message-ID: <359a92830708011120x7582437exd0a01909c80942c3@mail.gmail.com>
Date: Wed, 1 Aug 2007 14:20:44 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: More IP/MAC indexing questions
In-Reply-To: <7a14509e0708011052v6be22ddej4a8cd516a513fe1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_48494_16464764.1185992444721"
References: <7a14509e0708010831g26c3c53ep1c61d485f31a4d0c@mail.gmail.com>
	 <359a92830708011015m43ed0dfapb5a68be62c006443@mail.gmail.com>
	 <7a14509e0708011052v6be22ddej4a8cd516a513fe1@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_48494_16464764.1185992444721
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Think of a custom analyzer class rather than an custom query parser. The
QueryParser uses your analyzer, so it all just "comes along".

Here's the approach I'd try first, off the top of my head....

Yes, break the IP and etc. up into octets and index them
tokenized.

Use a SpanNearQuery with a slop of 0 and specify true for ordering.
What that will do is require that the segments you specify must appear
in order with no gaps. You have to construct this yourself since there's
no support for SpanQueries in the QueryParser yet. This'll avoid having
to deal with Wildcards, which have their own issues (try searching on
a thread "I just don't understand wildcards at all" for an exposition from
"the guys" on this.

Best
Erick

On 8/1/07, Joe Attardi <jattardi@gmail.com> wrote:
>
> Hi Erick,
>
> First, consider using your own analyzer and/or breaking the IP addresses
> > up by substituting ' ' for '.' upon input.
>
> Do you mean breaking the IP up into one token for each segment, like
> ["192",
> "168", "1", "100"] ?
>
>
>
> > But on to your question. Please post what you mean by
> > "a large number". 10,000? 1,000,000,000? we have no clue
> > from your posts so far...
>
> I apologize for the lack of details. A large part of the data will be
> wireless MAC addresses detected over the air, so it depends on the site.
> But
> I suppose, worst case, we're looking at thousands or tens of thousands.
> Comparatively speaking, then, I guess it's not such a large number
> compared
> to some of the other questions discussed on the list.
>
> That said, efficiency is hugely overrated at this stage of your
> > design. I'd personally use whatever is easiest and run some
> > tests.
> >
> > Just index them as single (unbroken) tokens to start and search
> > your partial address with PrefixQuery.
>
> This is what I was thinking originally, too. Although there could be times
> where they are searching for a piece at the end of the address, which is
> why
> my original post had me building a WildcardQuery.
>
> The system will be searching log messages, too, and for that I'll use the
> more normal StandardAnalyzer/QueryParser approach.
>
> So what I am thinking of doing going forward is creating a custom query
> parser class, that basically has special cases (IP addresses, MAC
> addresses)
> where the query must be more customized, and in the other cases fall
> through
> to the standard QueryParser class. Does this sound like a good idea?
>
> Thanks again for your continued help!
>

------=_Part_48494_16464764.1185992444721--

From java-user-return-29558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 01 18:34:59 2007
Return-Path: <java-user-return-29558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30282 invoked from network); 1 Aug 2007 18:34:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2007 18:34:58 -0000
Received: (qmail 26975 invoked by uid 500); 1 Aug 2007 18:34:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26933 invoked by uid 500); 1 Aug 2007 18:34:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26922 invoked by uid 99); 1 Aug 2007 18:34:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 11:34:51 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,NORMAL_HTTP_TO_IP,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jattardi@gmail.com designates 209.85.198.189 as permitted sender)
Received: from [209.85.198.189] (HELO rv-out-0910.google.com) (209.85.198.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 18:34:23 +0000
Received: by rv-out-0910.google.com with SMTP id k20so191410rvb
        for <java-user@lucene.apache.org>; Wed, 01 Aug 2007 11:34:24 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VYFFMeyRlgtaDbguAENczbU13MZFSAu1bn+ifK7sA0rzU3uNOFVq7mE72+ffs/ougwrEq6wvIlO8tWCLbXBJXt33lsQBZvFApbqQlyvICCiVYwkkVrixej9bDg7/qBWmycmWhAznvHFx6xUma5ISvhRU8HtcmVtaHZLYLoEncQ8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OFLfo/76gOLh1CBuvatgKLWeMlhhdJiJ8k9MNKllXwCF2eeWrXjq2ZxdkJHoOhfvEASA106U6/j+5R211HaAoa4dfDXTEV9S1b9flX7TnD9HvQsRpGzmFIalNU5VIbeTFIKS6sqa2oSktluepVYd7UqfbYHYjVF8zGmWRsqDB/8=
Received: by 10.114.111.1 with SMTP id j1mr968314wac.1185993264256;
        Wed, 01 Aug 2007 11:34:24 -0700 (PDT)
Received: by 10.114.121.8 with HTTP; Wed, 1 Aug 2007 11:34:24 -0700 (PDT)
Message-ID: <7a14509e0708011134w5288000dg4c466e009771fa0e@mail.gmail.com>
Date: Wed, 1 Aug 2007 14:34:24 -0400
From: "Joe Attardi" <jattardi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: More IP/MAC indexing questions
In-Reply-To: <359a92830708011120x7582437exd0a01909c80942c3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_50868_3253770.1185993264226"
References: <7a14509e0708010831g26c3c53ep1c61d485f31a4d0c@mail.gmail.com>
	 <359a92830708011015m43ed0dfapb5a68be62c006443@mail.gmail.com>
	 <7a14509e0708011052v6be22ddej4a8cd516a513fe1@mail.gmail.com>
	 <359a92830708011120x7582437exd0a01909c80942c3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_50868_3253770.1185993264226
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On 8/1/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Use a SpanNearQuery with a slop of 0 and specify true for ordering.
> What that will do is require that the segments you specify must appear
> in order with no gaps. You have to construct this yourself since there's
> no support for SpanQueries in the QueryParser yet. This'll avoid having
> to deal with Wildcards, which have their own issues (try searching on
> a thread "I just don't understand wildcards at all" for an exposition from
> "the guys" on this.


Thanks Erick, I'll try this. My only other question here though, is what if
they specify an incomplete octet of an address? For example, I want '
192.168.10' to match 192.168.10.1 and 192.168.100.1. How can I do this
without wildcards, is there a way to put a PrefixQuery into the Span Query?

Sorry if I don't make any sense

------=_Part_50868_3253770.1185993264226--

From java-user-return-29559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 01 19:52:30 2007
Return-Path: <java-user-return-29559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59669 invoked from network); 1 Aug 2007 19:52:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2007 19:52:29 -0000
Received: (qmail 59533 invoked by uid 500); 1 Aug 2007 19:52:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58883 invoked by uid 500); 1 Aug 2007 19:52:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58872 invoked by uid 99); 1 Aug 2007 19:52:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 12:52:22 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,NORMAL_HTTP_TO_IP,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.134.188 as permitted sender)
Received: from [209.85.134.188] (HELO mu-out-0910.google.com) (209.85.134.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 19:51:54 +0000
Received: by mu-out-0910.google.com with SMTP id g7so297705muf
        for <java-user@lucene.apache.org>; Wed, 01 Aug 2007 12:51:56 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=iihy4quLM/go0VAFR6tewoELYctnEZKMt4wltaYkppXxYgWj4YyXKyI0qPyj+mrhpz26KA8tbLSEQA3RdcrohNYZqptsq5gr2AzIQYd3xmuMUhvgFGWcYlJHuUrbUUut08JxMlmWiShEWyX2bXMJqFv9e4sjvdztoOiiivQ6fyA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ACA+2Ug/KOwvUd1xTwLJerO5jfvFvI6UH06r9axWzRq7CbySVvjmSuo+3cAfC4tQLl/s0+o0n5+xk9Wzb70UzVFw92m1ux5t/SBaL3TkJLw/WCWoey3C0k1KsXmy7W86qFFYy250NYb9mJPrpiJk4aGShpwwOQzYbKnsnGkCEsE=
Received: by 10.82.116.15 with SMTP id o15mr1411360buc.1185997915747;
        Wed, 01 Aug 2007 12:51:55 -0700 (PDT)
Received: by 10.82.190.14 with HTTP; Wed, 1 Aug 2007 12:51:55 -0700 (PDT)
Message-ID: <359a92830708011251ie028e55yb914c798697f6a97@mail.gmail.com>
Date: Wed, 1 Aug 2007 15:51:55 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: More IP/MAC indexing questions
In-Reply-To: <7a14509e0708011134w5288000dg4c466e009771fa0e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_49718_2546704.1185997915705"
References: <7a14509e0708010831g26c3c53ep1c61d485f31a4d0c@mail.gmail.com>
	 <359a92830708011015m43ed0dfapb5a68be62c006443@mail.gmail.com>
	 <7a14509e0708011052v6be22ddej4a8cd516a513fe1@mail.gmail.com>
	 <359a92830708011120x7582437exd0a01909c80942c3@mail.gmail.com>
	 <7a14509e0708011134w5288000dg4c466e009771fa0e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_49718_2546704.1185997915705
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I suspect you're going to have to deal with wildcards if you really want
this functionality.

Erick

On 8/1/07, Joe Attardi <jattardi@gmail.com> wrote:
>
> On 8/1/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > Use a SpanNearQuery with a slop of 0 and specify true for ordering.
> > What that will do is require that the segments you specify must appear
> > in order with no gaps. You have to construct this yourself since there's
> > no support for SpanQueries in the QueryParser yet. This'll avoid having
> > to deal with Wildcards, which have their own issues (try searching on
> > a thread "I just don't understand wildcards at all" for an exposition
> from
> > "the guys" on this.
>
>
> Thanks Erick, I'll try this. My only other question here though, is what
> if
> they specify an incomplete octet of an address? For example, I want '
> 192.168.10' to match 192.168.10.1 and 192.168.100.1. How can I do this
> without wildcards, is there a way to put a PrefixQuery into the Span
> Query?
>
> Sorry if I don't make any sense
>

------=_Part_49718_2546704.1185997915705--

From java-user-return-29560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 01 20:13:03 2007
Return-Path: <java-user-return-29560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64293 invoked from network); 1 Aug 2007 20:13:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2007 20:13:02 -0000
Received: (qmail 34669 invoked by uid 500); 1 Aug 2007 20:12:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34618 invoked by uid 500); 1 Aug 2007 20:12:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34603 invoked by uid 99); 1 Aug 2007 20:12:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 13:12:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of eduardobb@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 20:12:27 +0000
Received: by wa-out-1112.google.com with SMTP id j40so310883wah
        for <java-user@lucene.apache.org>; Wed, 01 Aug 2007 13:12:28 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Ac13HvlnsXj/EcbXE3Bw1b1AXEtLHk6RP/dxoT2WQ+ZS3MOLc0HtYproHtZDU8412A21vD3JvwBA0abaVSck1tz1KvHlB8+vEiAmrO4Ir3hmRqLK8vXSPGU16C83b0mWYiB+rjOqi9QMQgQRaeDB9czWEzIUGcGZeLjmRYG8En8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GsaEKbVOn5A6YPfrkeZuiw8OiU9/7H4X9pkaCO6Vgm9x4ogIkIbGJcmNCWyYbcPT6zci2ahHr+2cc1gQKGbgDTb/yOT+R5w27/ESkobvtxsbzj3BADOdDUMXgEbBYXXmWw4bg6M/MS6uD6oyGcXPNATv96ze/3aoM4nBu7hLVeo=
Received: by 10.114.177.1 with SMTP id z1mr1089663wae.1185999148220;
        Wed, 01 Aug 2007 13:12:28 -0700 (PDT)
Received: by 10.114.150.12 with HTTP; Wed, 1 Aug 2007 13:12:28 -0700 (PDT)
Message-ID: <9708bc630708011312h2fff0c34oc1a0b03a903f5f3c@mail.gmail.com>
Date: Wed, 1 Aug 2007 16:12:28 -0400
From: "Eduardo Botelho" <eduardobb@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Size of field?
In-Reply-To: <359a92830707300727r9e9220euacb499d78038213f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_68694_23539170.1185999148105"
References: <9708bc630707270822r541ffdd1t9b9e3732f9afaf80@mail.gmail.com>
	 <359a92830707300727r9e9220euacb499d78038213f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_68694_23539170.1185999148105
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Erick!!

You're right, I just use setMaxFieldLength() and all work fine.

You save my life, thanks! (y)

On 7/30/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> See IndexWriter.setMaxFieldLength(). 87,300 is odd, since the default
> max field length, last I knew, was 10,000. But this sounds like
> it might relate to your issue.
>
> Best
> Erick
>
> On 7/27/07, Eduardo Botelho <eduardobb@gmail.com> wrote:
> >
> > Hi guys,
> >
> > I would like to know if exist some limit of size for the fields of a
> > document.
> >
> > I'm with the following problem:
> > When a term is after a certain amount of characters (approximately
> 87300)
> > in
> > a field, the search does not find de occurrency.
> > If I divide my field in pages, the terms are found normally.
> > This problem occours when I make an exact query (query between quotes)
> >
> > What can be happening?
> >
> > I'm using BrazilianAnalyzer and StandardAnalyzer(for tests only) for
> both,
> > search and indexation.
> >
> > thanks...
> >
> > Sorry for my poor english...
> >
>

------=_Part_68694_23539170.1185999148105--

From java-user-return-29561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 01 21:31:35 2007
Return-Path: <java-user-return-29561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88285 invoked from network); 1 Aug 2007 21:31:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2007 21:31:34 -0000
Received: (qmail 7351 invoked by uid 500); 1 Aug 2007 21:31:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7096 invoked by uid 500); 1 Aug 2007 21:31:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7084 invoked by uid 99); 1 Aug 2007 21:31:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 14:31:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mike.klaas@gmail.com designates 209.85.198.191 as permitted sender)
Received: from [209.85.198.191] (HELO rv-out-0910.google.com) (209.85.198.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 21:31:14 +0000
Received: by rv-out-0910.google.com with SMTP id k20so218278rvb
        for <java-user@lucene.apache.org>; Wed, 01 Aug 2007 14:30:58 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=OAHGwWK1F5Ltumn5E9Ga63mj7DEwQxmrnbTaYYdiTWhVQ+Jgi94FoCo/T+oMBNXGiKK5ZQx9FXboKs69xXkyXoXe4Zth1iy8SH59WQoMA8NHn6iyOZhOYdzZQn3fwV5824d9mHURQVmu22kd92a1zlBTCxQPipk+tlLvPEwLhNE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=YhwmGanlmPq4GfzNCsXT9KMB2JD4+XABFB+sY4314wKcGeDAxAphSha2tTWBbWbeyz++vcziZS/Fdl8DE3a2NKGFDcTJ/DZzhEetMuWvIWN5cu7YCUjg2QKDBqBheGaKvwGa4ujb6U/nVBN1izs3ks93eyltLtFGeoZ+0BayXmk=
Received: by 10.114.179.1 with SMTP id b1mr1125124waf.1186003858815;
        Wed, 01 Aug 2007 14:30:58 -0700 (PDT)
Received: from ?192.168.1.103? ( [24.82.155.191])
        by mx.google.com with ESMTPS id m27sm2211612pof.2007.08.01.14.30.56
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 01 Aug 2007 14:30:56 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <7a14509e0708011134w5288000dg4c466e009771fa0e@mail.gmail.com>
References: <7a14509e0708010831g26c3c53ep1c61d485f31a4d0c@mail.gmail.com> <359a92830708011015m43ed0dfapb5a68be62c006443@mail.gmail.com> <7a14509e0708011052v6be22ddej4a8cd516a513fe1@mail.gmail.com> <359a92830708011120x7582437exd0a01909c80942c3@mail.gmail.com> <7a14509e0708011134w5288000dg4c466e009771fa0e@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <DBD2AD7A-992E-4762-9B0F-6AA62D9D076F@gmail.com>
Content-Transfer-Encoding: 7bit
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: More IP/MAC indexing questions
Date: Wed, 1 Aug 2007 14:30:55 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On 1-Aug-07, at 11:34 AM, Joe Attardi wrote:

> On 8/1/07, Erick Erickson <erickerickson@gmail.com> wrote:
>>
>> Use a SpanNearQuery with a slop of 0 and specify true for ordering.
>> What that will do is require that the segments you specify must  
>> appear
>> in order with no gaps. You have to construct this yourself since  
>> there's
>> no support for SpanQueries in the QueryParser yet. This'll avoid  
>> having
>> to deal with Wildcards, which have their own issues (try searching on
>> a thread "I just don't understand wildcards at all" for an  
>> exposition from
>> "the guys" on this.
>
>
> Thanks Erick, I'll try this. My only other question here though, is  
> what if
> they specify an incomplete octet of an address? For example, I want '
> 192.168.10' to match 192.168.10.1 and 192.168.100.1. How can I do this
> without wildcards, is there a way to put a PrefixQuery into the  
> Span Query?

If 192 168 10 1 are separate tokens, then a phrase query on "192 168  
10" will find it.  If it is a single token, then a wildcard or regex  
query is necessary.

-Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 01 21:39:32 2007
Return-Path: <java-user-return-29562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89279 invoked from network); 1 Aug 2007 21:39:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2007 21:39:31 -0000
Received: (qmail 19034 invoked by uid 500); 1 Aug 2007 21:39:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18074 invoked by uid 500); 1 Aug 2007 21:39:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18063 invoked by uid 99); 1 Aug 2007 21:39:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 14:39:25 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.187 as permitted sender)
Received: from [209.85.134.187] (HELO mu-out-0910.google.com) (209.85.134.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 21:39:12 +0000
Received: by mu-out-0910.google.com with SMTP id g7so319793muf
        for <java-user@lucene.apache.org>; Wed, 01 Aug 2007 14:38:55 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=HbT9sJPIMYpPEDxvQTltqNoO91+bIJWefXwjZxdYgK7P7i17uWncOo1qmp3j/C7ptikzKsQ+kPB3r5c32FSg3PcXWQkm2njvR6yHGoHDD96flEaF4ktGu1OzZ2MYyyeWgHDsxjxC2wCDe2oIeOuXvnL3+/YibelUax4s1zkpWZU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KQvc9COzAnwSP/1mjC16q6YcKvecKYr3SGZyiDh6Tjk3mpGFgi1rjob9C341s0a1ZNQucfJ9VQpnsvzgG2ktF/J7JWg8W8DJ4cDNopaeAxSLoRbQgaietCyFY0wam3ro8Sk4utIf4vBahgCElkrgPAeLHytJq+7Cfj+evCNaymo=
Received: by 10.82.127.14 with SMTP id z14mr1531708buc.1186004335227;
        Wed, 01 Aug 2007 14:38:55 -0700 (PDT)
Received: by 10.82.190.14 with HTTP; Wed, 1 Aug 2007 14:38:55 -0700 (PDT)
Message-ID: <359a92830708011438n7e3c90c1g3feba4087d1cef35@mail.gmail.com>
Date: Wed, 1 Aug 2007 17:38:55 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Size of field?
In-Reply-To: <9708bc630708011312h2fff0c34oc1a0b03a903f5f3c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_50715_30057575.1186004335211"
References: <9708bc630707270822r541ffdd1t9b9e3732f9afaf80@mail.gmail.com>
	 <359a92830707300727r9e9220euacb499d78038213f@mail.gmail.com>
	 <9708bc630708011312h2fff0c34oc1a0b03a903f5f3c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_50715_30057575.1186004335211
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Glad it worked out for you.... Did you ever have any insight into what
was magical about 87,300? Although now that I re-read your mail, that
was the number of characters, so I can imagine that your corpus
averaged 8.73 characters/word <G>....

Best
Erick

On 8/1/07, Eduardo Botelho <eduardobb@gmail.com> wrote:
>
> Hi Erick!!
>
> You're right, I just use setMaxFieldLength() and all work fine.
>
> You save my life, thanks! (y)
>
> On 7/30/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > See IndexWriter.setMaxFieldLength(). 87,300 is odd, since the default
> > max field length, last I knew, was 10,000. But this sounds like
> > it might relate to your issue.
> >
> > Best
> > Erick
> >
> > On 7/27/07, Eduardo Botelho <eduardobb@gmail.com> wrote:
> > >
> > > Hi guys,
> > >
> > > I would like to know if exist some limit of size for the fields of a
> > > document.
> > >
> > > I'm with the following problem:
> > > When a term is after a certain amount of characters (approximately
> > 87300)
> > > in
> > > a field, the search does not find de occurrency.
> > > If I divide my field in pages, the terms are found normally.
> > > This problem occours when I make an exact query (query between quotes)
> > >
> > > What can be happening?
> > >
> > > I'm using BrazilianAnalyzer and StandardAnalyzer(for tests only) for
> > both,
> > > search and indexation.
> > >
> > > thanks...
> > >
> > > Sorry for my poor english...
> > >
> >
>

------=_Part_50715_30057575.1186004335211--

From java-user-return-29563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 01 23:15:39 2007
Return-Path: <java-user-return-29563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33907 invoked from network); 1 Aug 2007 23:15:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Aug 2007 23:15:38 -0000
Received: (qmail 54050 invoked by uid 500); 1 Aug 2007 23:15:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53793 invoked by uid 500); 1 Aug 2007 23:15:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53782 invoked by uid 99); 1 Aug 2007 23:15:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 16:15:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 23:15:02 +0000
Received: by ug-out-1314.google.com with SMTP id c2so310513ugf
        for <java-user@lucene.apache.org>; Wed, 01 Aug 2007 16:15:03 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=c6pVlvabQxJvMVRqzFfPMtOXGx5kx+3J1ZHhvxB+PUZ1o0ysYA4tFvD1ego3UXLkL//pPwMiBokk6zVtymJf2nyGoMvjmUFLHeha5zyVqgMiMBe67R5KV1pCGt1DYCSvPXv1LKwT+5fXEt1cVqDsv2M3lL2HzT3d6XHwqGSAsIs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=SoiWIRarCRznCv4OiVYXz63AgTl2UUIIJgQz4tsbQr554+FkvOwliMcWW4NhoKn5G9Qolv9BPgi9ewC/2TrRWVT0Ro0zOG/qeYVrIToK50hC4vBM8CUY7FP/tFTQ6y+W8XUZktUramDilGgT6tQa85iyaYgYRpa/n275Pzb84io=
Received: by 10.66.217.5 with SMTP id p5mr1681765ugg.1186010103544;
        Wed, 01 Aug 2007 16:15:03 -0700 (PDT)
Received: from ?192.168.1.101? ( [80.70.152.60])
        by mx.google.com with ESMTPS id 7sm6417392nfv.2007.08.01.16.15.02
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 01 Aug 2007 16:15:02 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <003501c7d3e3$ca58e990$5f0abcb0$@com>
References: <004201c7d322$69c8bae0$3d5a30a0$@com> <4E0025CD-A1FF-44E4-8322-2A71F9F26332@gmail.com> <003501c7d3e3$ca58e990$5f0abcb0$@com>
Content-Type: text/plain; charset=WINDOWS-1252; delsp=yes; format=flowed
Message-Id: <D0F005F8-F115-45C9-A5F6-A3F758EE5514@gmail.com>
Content-Transfer-Encoding: quoted-printable
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: High CPU usage duing index and search
Date: Thu, 2 Aug 2007 01:10:41 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

It sounds like you have a fairly busy system, perhaps 100% load on the
process is not that strange, at least not during short periods of time.

A simpler solution would be to nice the process a little bit in order to
give your background jobs some more time to think.

Running a profiler is still the best advice I can think of. It should
clearly show you what is going on when you run out of CPU.

-- =20
karl

1 aug 2007 kl. 04.29 skrev Chew Yee Chuang:

> Hi,
>
> Thanks for the link provided, actually I've go through those =20
> article when I
> developing the index and search function for my application. I =20
> haven=92t try
> profiler yet, but I monitor the CPU usage and notice that whatever =20
> index or
> search performing, the CPU usage raise to 100%. Below I will try to
> elaborate more on what my application is doing and how I index and =20
> search.
>
> There are many concurrent process running, first, the application =20
> will write
> records that received into a text file with tab separated each =20
> different
> field. Application will point to a new file every 10mins and start =20
> writing
> to it. So every file will contains only 10mins record, approximate =20
> 600,000
> records per file. Then, the indexing process will check whether =20
> there is a
> text file to be index, if it is, the thread will wake up and start =20
> perform
> indexing.
>
> The indexing process will first add documents to RAMDir, Then =20
> later, add
> RAMDir into FSDir by calling addIndexNoOptimize() when there is =20
> 100,000
> documents(32 fields per doc) in RAMDir. There is only 1 IndexWriter=20
> (FSDir)
> was created but a few IndexWriter(RAMDir) was created during the whole
> process. Below are some configuration for IndexWriters that I =20
> mentioned:-
>
> IndexWriter (RAMDir)
> - SimpleAnalyzer
> - setMaxBufferedDocs(10000)
> - Filed.Store.YES
> - Field.Index.NO_NORMS
>
> IndexWriter (FSDir)
> - SimpleAnalyzer
> - setMergeFactor(20)
> - addIndexesNoOptimize()
>
> For the searching, because there are many queries(20,000) run =20
> continuously
> to generate the aggregate table for reporting purpose. All this =20
> queries is
> run in nested loop, and there is only 1 Searcher created, I try =20
> searcher and
> filter as well, filter give me better result, but both also utilize =20=

> lots of
> CPU resources.
>
> Hope this info will help and sorry for my bad English.
>
> Thanks
> eChuang, Chew
>
> -----Original Message-----
> From: karl wettin [mailto:karl.wettin@gmail.com]
> Sent: Tuesday, July 31, 2007 5:54 PM
> To: java-user@lucene.apache.org
> Subject: Re: High CPU usage duing index and search
>
>
> 31 jul 2007 kl. 05.25 skrev Chew Yee Chuang:
>> But just notice that when Lucene performing search or index,
>> the CPU usage on my machine raise to 100%, because of this issue,
>> some of my
>> others backend process will slow down eventually. Just want to know
>> does
>> anyone face this problem before ? and is it any idea on how to
>> overcome this
>> problem ?
>
> Did you run a profiler to see what it is that consume all the =20
> resources?
> It is very hard to guess based on the information you supplied. Start
> here:
>
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
> http://wiki.apache.org/lucene-java/ImproveSearchingSpeed
>
>
> --=20
> karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> No virus found in this incoming message.
> Checked by AVG Free Edition.
> Version: 7.5.476 / Virus Database: 269.11.0/927 - Release Date: =20
> 7/30/2007
> 5:02 PM
>
>
> No virus found in this outgoing message.
> Checked by AVG Free Edition.
> Version: 7.5.476 / Virus Database: 269.11.0/929 - Release Date: =20
> 7/31/2007
> 5:26 PM
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 02:07:43 2007
Return-Path: <java-user-return-29564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89369 invoked from network); 2 Aug 2007 02:07:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 02:07:42 -0000
Received: (qmail 43652 invoked by uid 500); 2 Aug 2007 02:07:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43398 invoked by uid 500); 2 Aug 2007 02:07:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43387 invoked by uid 99); 2 Aug 2007 02:07:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 19:07:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of cedric.ho@gmail.com designates 209.85.198.186 as permitted sender)
Received: from [209.85.198.186] (HELO rv-out-0910.google.com) (209.85.198.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 02:07:09 +0000
Received: by rv-out-0910.google.com with SMTP id k20so255666rvb
        for <java-user@lucene.apache.org>; Wed, 01 Aug 2007 19:07:10 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=kwuu1dEc05RygYVij3GKn0WMwFi+8ugTVp/WYy008jqLSnmI2VvN0jDudj6A1dBV74wtHZwoTd2tZjbuOnzLrYFMJsMn97XiIBrpVJv21epyTnm1zYWGmY7JG/+ykLjfPv1r6Fh0Vkr95NpR59IRLDLXfrx86OWavGIciH4RLRs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=TF1ezcwD5+iCUAkb3q5x5jylazPQgJgbEZ26ACBF/1qWcCxQo0cVN1avlSdg1BqGIUXMHcYvFeO70ID26i9pPv6vFx43EAukYwi8LuO12aIEjQy45HHPaIxEWJTwDEezJY5iuUizZzqrsikfscmYJkY3F6SZrpeYdUT8cF5khoQ=
Received: by 10.114.111.1 with SMTP id j1mr1305012wac.1186020429733;
        Wed, 01 Aug 2007 19:07:09 -0700 (PDT)
Received: by 10.114.46.4 with HTTP; Wed, 1 Aug 2007 19:07:09 -0700 (PDT)
Message-ID: <839ba01c0708011907v643faebbv57127e843700abf9@mail.gmail.com>
Date: Thu, 2 Aug 2007 10:07:09 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Can I do boosting based on term postions?
In-Reply-To: <d27fa17e0707312306q5e517d7fyedbedc31094dc6c4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <839ba01c0707312113p278da04bg636e2bfa853e6ff4@mail.gmail.com>
	 <d27fa17e0707312306q5e517d7fyedbedc31094dc6c4@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the quick response =)

On 8/1/07, Shailendra Sharma <shailendra.sharma@gmail.com> wrote:
> Yes, it is easily doable through "Payload" facility. During indexing process
> (mainly tokenization), you need to push this extra information in each
> token. And then you can use BoostingTermQuery for using Payload value to
> include Payload in the score. You also need to implement Similarity for this
> (mainly scorePayload method).

If I store, say a custom boost factor as Payload, does it means that I
will store one more byte per term per document in the index file? So
the index file would be much larger?

>
> Other way can be to extend SpanTermQuery, this already calculates the
> position of match. You just need to do something to use this position value
> in the score calculation.

I see that SpanTermQuery takes a TermPositions from the indexReader
and I can get the term position from there. However I am not sure how
to incorporate it into the score calculation. Would you mind give a
little more detail on this?

>
> One possible advantage of SpanTermQuery approach is that you can play
> around, without re-creating indices everytime.
>
> Thanks,
> Shailendra Sharma,
> CTO, Ver se' Innovation Pvt. Ltd.
> Bangalore, India
>
> On 8/1/07, Cedric Ho <cedric.ho@gmail.com> wrote:
> >
> > Hi all,
> >
> > I was wondering if it is possible to do boosting by search terms'
> > position in the document.
> >
> > for example:
> > search terms appear in the first 100 words, or first 10% words, or in
> > first two paragraphs would be given higher score.
> >
> > Is it achievable through using the new Payload function in lucene 2.2?
> > Or are there any easier ways to achieve these ?
> >
> >
> > Regards,
> > Cedric
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

Thanks,
Cedric

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 06:23:00 2007
Return-Path: <java-user-return-29565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63044 invoked from network); 2 Aug 2007 06:22:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 06:22:58 -0000
Received: (qmail 9929 invoked by uid 500); 2 Aug 2007 06:22:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9886 invoked by uid 500); 2 Aug 2007 06:22:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9866 invoked by uid 99); 2 Aug 2007 06:22:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 23:22:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mnrz57@gmail.com designates 209.85.132.240 as permitted sender)
Received: from [209.85.132.240] (HELO an-out-0708.google.com) (209.85.132.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 06:22:26 +0000
Received: by an-out-0708.google.com with SMTP id c5so76563anc
        for <java-user@lucene.apache.org>; Wed, 01 Aug 2007 23:22:26 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=X36ElxmLL3qyXMFcnqWaE8kzPQn/2rxoMkOMU4rep6jwl5MUFT7qgvAZz8O4JcagLxhagDGyN6Z3UOtf1TtTHYozHPyKYIg/nR3oc4YPRsdufU+SsS3u+QiKq+XYf1SYmeETp3KYbjcE+I/dK057OJfnDIEtQZeshi3bG0LMgdE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=Me2eELYtvA3f1siPPlTrWKfVoB0cs/Nyhi7uTTMCOnWLkVOBKLtUcV6v5xAeXXGlxvYGVThRf7h6RvL5WIzdaBKW2BLGAZyEEQAm/y3FcmTGHzzyEjsbwOxrTsEqa/ExTSqeEsgZH0NgXA3z4mwscxwjTd4SBQLD0FJ1s8B2Ky4=
Received: by 10.100.127.1 with SMTP id z1mr901863anc.1186035746278;
        Wed, 01 Aug 2007 23:22:26 -0700 (PDT)
Received: by 10.100.14.12 with HTTP; Wed, 1 Aug 2007 23:22:26 -0700 (PDT)
Message-ID: <34b8543c0708012322w282e6196yac062f8e34d8302e@mail.gmail.com>
Date: Thu, 2 Aug 2007 09:52:26 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Solr's NumberUtils doesnt work
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_100022_7788956.1186035746132"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_100022_7788956.1186035746132
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi
I am using NumberUtils to encode and decode numbers while indexing and
searching, when I am going to decode the number retrieved from an index it
throws exception for some fields
the exception message is:

Caused by: java.lang.StringIndexOutOfBoundsException: String index out of
range: 1
    at java.lang.String.charAt(Unknown Source)
    at org.apache.solr.util.NumberUtils.SortableStr2int(NumberUtils.java
:125)
    at org.apache.solr.util.NumberUtils.SortableStr2int(NumberUtils.java:37)
    at com.payvand.lucene.util.ExtendedNumberUtils.decodeInteger(
ExtendedNumberUtils.java:123)


I dont know why this happen, I am wondering if it has something to do with
character encoding. have you had such problem?

thanks

-- 
Regards,
Mohammad Norouzi
--------------------------
see my blog: http://brainable.blogspot.com/
another in Persian: http://fekre-motefavet.blogspot.com/

------=_Part_100022_7788956.1186035746132--

From java-user-return-29566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 06:33:06 2007
Return-Path: <java-user-return-29566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64726 invoked from network); 2 Aug 2007 06:33:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 06:33:05 -0000
Received: (qmail 23840 invoked by uid 500); 2 Aug 2007 06:32:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23793 invoked by uid 500); 2 Aug 2007 06:32:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23782 invoked by uid 99); 2 Aug 2007 06:32:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 23:32:59 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of srinivas.apache@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 06:32:34 +0000
Received: by nf-out-0910.google.com with SMTP id d3so113895nfc
        for <java-user@lucene.apache.org>; Wed, 01 Aug 2007 23:32:35 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=WF3TPwJMLM3cRLOX3EMxe6jo5MtiJ+Vu1fcreCfgSh4OxTxTDeiL6UM18j1kccJ1HOp66PwR3acvPOlTHpyHdow5/sxs3s157mnwxSBhCmssmBVSSQbGKZh3eP6orTkdGJjXyzLHZLcwisIPwFtTxSEMVpsMTymQ3jb36TwA2zU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ePEl7S9kw5xNdyWL5N2YaL1eEvh5x1/swN+VG/HgHexBJsXcBpHfv8/2lblNOOavxXf23OhTcv0NoLfKCw6w71Gw7DPoxoqodDJoIcr315TKZh09uv6L9HwOHCCZoTVDbwu/NDkYkdAwXXG2Ix33gyDVDWuzk6GlQ5oVpbARCxE=
Received: by 10.78.149.15 with SMTP id w15mr430061hud.1186036355627;
        Wed, 01 Aug 2007 23:32:35 -0700 (PDT)
Received: by 10.78.180.10 with HTTP; Wed, 1 Aug 2007 23:32:35 -0700 (PDT)
Message-ID: <b0ba206a0708012332h5613f61chec923f20d4083be6@mail.gmail.com>
Date: Thu, 2 Aug 2007 12:02:35 +0530
From: "Srinivasarao Vundavalli" <srinivas.apache@gmail.com>
To: java-user@lucene.apache.org
Subject: Using Nutch APIs in Lucene
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_50794_4525507.1186036355582"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_50794_4525507.1186036355582
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

How can we use nutch APIs in Lucene? For example using FetchedSegments , we
can get ParseText from which we can
get the content of the document. So can we use these classes
(FetchedSegments, ParseText ) in lucene. If so, how to use them?
Thank You

------=_Part_50794_4525507.1186036355582--

From java-user-return-29567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 06:43:27 2007
Return-Path: <java-user-return-29567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66955 invoked from network); 2 Aug 2007 06:43:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 06:43:27 -0000
Received: (qmail 32928 invoked by uid 500); 2 Aug 2007 06:43:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32889 invoked by uid 500); 2 Aug 2007 06:43:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32876 invoked by uid 99); 2 Aug 2007 06:43:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Aug 2007 23:43:21 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [203.99.193.26] (HELO ctsintcosxib.cts.com) (203.99.193.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 06:42:51 +0000
Received: from CTSCNSHNSXUA.cts.com ([10.225.68.4]) by ctsinchnsxun.cts.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 2 Aug 2007 12:08:38 +0530
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: je-analysis.jar
Date: Thu, 2 Aug 2007 14:38:36 +0800
Message-ID: <EAAF003CE5E5094DB92052DD646CAD8E0177B161@CTSCNSHNSXUA.cts.com>
In-Reply-To: <b0ba206a0708012332h5613f61chec923f20d4083be6@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: je-analysis.jar
Thread-Index: AcfUzwGUYkB/HHnXSN6b0DO0TjJr9QAAGd+Q
From: <Jun.Chen@cognizant.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 02 Aug 2007 06:38:38.0951 (UTC) FILETIME=[C27B0770:01C7D4CF]
X-Virus-Checked: Checked by ClamAV on apache.org


Dear All,

Who has the je-analysis.jar?

If somebody has, can you send it to me? I don't have the access to
download something in my computer now.
=0D
Thank you very much!

Yours truly,
Daniel


This e-mail and any files transmitted with it are for the sole use of the=
 intended recipient(s) and may contain confidential and privileged=
 information.
If you are not the intended recipient, please contact the sender by reply=
 e-mail and destroy all copies of the original message.=0D
Any unauthorized review, use, disclosure, dissemination, forwarding,=
 printing or copying of this email or any action taken in reliance on this=
 e-mail is strictly=0D
prohibited and may be unlawful.

  Visit us at http://www.cognizant.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 07:23:35 2007
Return-Path: <java-user-return-29568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81317 invoked from network); 2 Aug 2007 07:23:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 07:23:34 -0000
Received: (qmail 78429 invoked by uid 500); 2 Aug 2007 07:23:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78395 invoked by uid 500); 2 Aug 2007 07:23:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78344 invoked by uid 99); 2 Aug 2007 07:23:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 00:23:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.33] (HELO smtp-vbr13.xs4all.nl) (194.109.24.33)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 07:22:54 +0000
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr13.xs4all.nl (8.13.8/8.13.8) with ESMTP id l727MusQ021916
	for <java-user@lucene.apache.org>; Thu, 2 Aug 2007 09:22:56 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Can I do boosting based on term postions?
Date: Thu, 2 Aug 2007 09:22:55 +0200
User-Agent: KMail/1.8.2
References: <839ba01c0707312113p278da04bg636e2bfa853e6ff4@mail.gmail.com> <d27fa17e0707312306q5e517d7fyedbedc31094dc6c4@mail.gmail.com> <839ba01c0708011907v643faebbv57127e843700abf9@mail.gmail.com>
In-Reply-To: <839ba01c0708011907v643faebbv57127e843700abf9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200708020922.55296.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Cedric,

SpanFirstQuery could be a solution without payloads.
You may want to give it your own Similarity.sloppyFreq() .

Regards,
Paul Elschot

On Thursday 02 August 2007 04:07, Cedric Ho wrote:
> Thanks for the quick response =)
> 
> On 8/1/07, Shailendra Sharma <shailendra.sharma@gmail.com> wrote:
> > Yes, it is easily doable through "Payload" facility. During indexing 
process
> > (mainly tokenization), you need to push this extra information in each
> > token. And then you can use BoostingTermQuery for using Payload value to
> > include Payload in the score. You also need to implement Similarity for 
this
> > (mainly scorePayload method).
> 
> If I store, say a custom boost factor as Payload, does it means that I
> will store one more byte per term per document in the index file? So
> the index file would be much larger?
> 
> >
> > Other way can be to extend SpanTermQuery, this already calculates the
> > position of match. You just need to do something to use this position 
value
> > in the score calculation.
> 
> I see that SpanTermQuery takes a TermPositions from the indexReader
> and I can get the term position from there. However I am not sure how
> to incorporate it into the score calculation. Would you mind give a
> little more detail on this?
> 
> >
> > One possible advantage of SpanTermQuery approach is that you can play
> > around, without re-creating indices everytime.
> >
> > Thanks,
> > Shailendra Sharma,
> > CTO, Ver se' Innovation Pvt. Ltd.
> > Bangalore, India
> >
> > On 8/1/07, Cedric Ho <cedric.ho@gmail.com> wrote:
> > >
> > > Hi all,
> > >
> > > I was wondering if it is possible to do boosting by search terms'
> > > position in the document.
> > >
> > > for example:
> > > search terms appear in the first 100 words, or first 10% words, or in
> > > first two paragraphs would be given higher score.
> > >
> > > Is it achievable through using the new Payload function in lucene 2.2?
> > > Or are there any easier ways to achieve these ?
> > >
> > >
> > > Regards,
> > > Cedric
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> 
> Thanks,
> Cedric
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 07:50:48 2007
Return-Path: <java-user-return-29569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86749 invoked from network); 2 Aug 2007 07:50:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 07:50:47 -0000
Received: (qmail 6163 invoked by uid 500); 2 Aug 2007 07:50:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6126 invoked by uid 500); 2 Aug 2007 07:50:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6115 invoked by uid 99); 2 Aug 2007 07:50:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 00:50:41 -0700
X-ASF-Spam-Status: No, hits=4.1 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,URIBL_OB_SURBL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ridwanhabbal@hotmail.com designates 65.54.246.225 as permitted sender)
Received: from [65.54.246.225] (HELO bay0-omc3-s25.bay0.hotmail.com) (65.54.246.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 07:50:33 +0000
Received: from BAY105-W10 ([65.54.224.110]) by bay0-omc3-s25.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Thu, 2 Aug 2007 00:50:12 -0700
Message-ID: <BAY105-W1095B279B6800F6653979ECCE90@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_8d1f1739-8f83-4480-a643-6a2087460555_"
X-Originating-IP: [216.6.1.34]
From: Ridwan Habbal <ridwanhabbal@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: IndexReader deletes more than expected
Date: Thu, 2 Aug 2007 07:50:12 +0000
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 02 Aug 2007 07:50:12.0775 (UTC) FILETIME=[C1CC9370:01C7D4D9]
X-Virus-Checked: Checked by ClamAV on apache.org

--_8d1f1739-8f83-4480-a643-6a2087460555_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable












> Subject: RE: IndexReader deletes more that expected> Date: Wed, 1 Aug 200=
7 09:07:32 -0700> From: steven_parkes@esseff.org> To: java-user@lucene.apac=
he.org> > If I'm reading this correctly, there's something a little wonky h=
ere. In> your example code, you close the IndexWriter and then, without cre=
ating> a new IndexWriter, you call addDocument again. This shouldn't be> po=
ssible (what version of Lucene are you using?)   Yes, you are correct, I cl=
ose indexWriter and then add more docs. What's wrong? it worked out fine, a=
nd add docs i add will appear to NEW INSTANCES OF INDEX SEARCHERS after cal=
ling close on the indexWriter.    As for creating new IndexWriter, I tried =
to, however i suffered of the lock exception i got, although i was closing =
the IndexWriter instance, before creating a new IndexWriter instance! I don=
't know why! furthermore, this is useless, for multiThreaded app, cause you=
 can't know who is still writing to your index, and who has colsed his Inde=
xWriter. Even checking that the index is locked b4, leads to unnecessary ov=
erhead which can be avoided since it works for me and i can write with one =
single instance of IndexWriter. > > Assuming for the time being that you ar=
e creating the IndexWriter again,> the other issue here is that you shouldn=
't be able to have a reader and> a writer changing an index at the same tim=
e. There should be a lock> failure. This should occur either in the Index W=
ell, I think that i don't get the problems you expect cause i use the Lucen=
e version that is shiped by compass distribution (www.compassframework.org)=
 In short, compass to Lucene is the same of ORM server like hibernate for D=
BMS like oracle. It's really works fine but i couldn't understand why compa=
ss hides the deleteDocuments(Term) method on IndexWriter classhttp://lucene=
.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/=
index/IndexWriter.html#deleteDocuments(org.apache.lucene.index.Term). This =
is why i used delete on a reader rather than using it on the same writer in=
stance, and the only one i have. I couldn't manage my index in one particul=
ar situation using compass, because i had to store data not in the usual wa=
y we do (every row in table is a record). So i think i have to ask The comp=
ass team about that. Anyways, if you have coments, you or the others please=
 do. > > Might you be creating your IndexWriters (which you don't show) wit=
h the> create flag always set to true? That will wipe your index each time,=
> ignoring the locks and cause all sorts of weird results.No, I don't creat=
e a new Instance of indexWriter, the only one I create is in the Service co=
nstructor, so i create a new clean (has no docs) index only when program st=
arts up. public LuceneServiceSHImp(String indexDirectory) throws IOExceptio=
n{this.indexDirectory =3D indexDirectory;standardAnalyzer =3D new StandardA=
nalyzer();indexWriter =3D new IndexWriter(new java.io.File(indexDirectory),=
 standardAnalyzer, true);indexWriter.close();}> > -----Original Message----=
-> From: Ridwan Habbal [mailto:ridwanhabbal@hotmail.com] > Sent: Wednesday,=
 August 01, 2007 8:48 AM> To: java-user@lucene.apache.org> Subject: IndexRe=
ader deletes more that expected> > Hi, I got unexpected behavior while test=
ing lucene. To shortly address> the problem: Using IndexWriter I add docs w=
ith fields named ID with a> consecutive order (1,2,3,4, etc) then close tha=
t index. I get new> IndexReader, and call IndexReader.deleteDocuments(Term)=
. The term is> simply new Term("ID", "1"). and then class close on IndexRea=
der. Things> work out fine. But if i add docs using IndexWriter, close writ=
er, then> create new IndexReader to delete one of the docs already inserted=
, but> without closing index. while the indexReader that perform deletion i=
s> still not closed, I add more docs, and then commit the IndexWriter, so> =
when i search I get all added docs in the two phases (before using> deleteD=
ocuments() on IndexReader and after because i haven't closed> IndexReader, =
howerer, closed IndexWriter). I close IndexReader and then> query the index=
, so i deletes all docs after opening it till closing it,> in addition to t=
he specified doc in the Term object (in this test case:> ID=3D1). I know th=
at i can avoid this by close IndexReader directly after> deleting docs, but=
 what about runing it on mutiThread app like web> application? There you ar=
e the code: > IndexSearcher indexSearcher =3D new IndexSearcher(this.indexD=
irectory);> Hits hitsB4InsertAndClose =3D null;> hitsB4InsertAndClose =3D g=
etAllAsHits(indexSearcher);> int beforeInsertAndClose =3D hitsB4InsertAndCl=
ose.length();> > indexWriter.addDocument(getNewElement());> indexWriter.add=
Document(getNewElement());> indexWriter.addDocument(getNewElement());> inde=
xWriter.close();> IndexSearcher indexSearcherDel =3D new IndexSearcher(this=
.indexDirectory);> indexSearcherDel.getIndexReader().deleteDocuments(new Te=
rm("ID","1"));> > indexWriter.addDocument(getNewElement());> indexWriter.ad=
dDocument(getNewElement());> indexWriter.addDocument(getNewElement());> ind=
exWriter.addDocument(getNewElement());> indexWriter.addDocument(getNewEleme=
nt());> indexWriter.addDocument(getNewElement());> indexWriter.addDocument(=
getNewElement());> indexWriter.addDocument(getNewElement());> indexWriter.a=
ddDocument(getNewElement());> indexWriter.addDocument(getNewElement());> in=
dexWriter.addDocument(getNewElement());> > indexWriter.close();> Hits hitsA=
fterInsertAndClose =3D getAllAsHits(indexSearcher);> int AfterInsertAndClos=
e =3D hitsAfterInsertAndClose.length();//This is 14> > indexWriter.addDocum=
ent(getNewElement());> indexWriter.close();> Hits hitsAfterInsertAndAfterCl=
oseb4Delete =3D getAllAsHits(indexSearcher);> int hitsAfterInsertButAndAfte=
rCountb4Delete =3D> hitsAfterInsertAndAfterCloseb4Delete.length();//This is=
 15> > > > indexSearcherDel.close();> Hits hitsAfterInsertAndAfterClose =3D=
 getAllAsHits(indexSearcher);int> hitsAfterInsertButAndAfterCount =3D> hits=
AfterInsertAndAfterClose.length();//This is 2 The two methods I> Use > priv=
ate Hits getAllAsHits(IndexSearcher indexSearcher){> try{> Analyzer analyze=
r =3D new StandardAnalyzer();> String defaultSearchField =3D "all";> QueryP=
arser parser =3D new QueryParser(defaultSearchField, analyzer);> indexSearc=
her =3D new IndexSearcher(this.indexDirectory);> Hits hits =3D indexSearche=
r.search(parser.parse("+alias:mydoc"));> indexSearcher.close();> return hit=
s;> }catch(IOException ex){> throw new RuntimeException(ex);> }catch(org.ap=
ache.lucene.queryParser.ParseException ex){> throw new RuntimeException(ex)=
;> }> > }> > private Document getNewElement(){> Map<String, String> map =3D=
 new HashMap();> map.put("ID", new Integer(insertCounter).toString());> map=
.put("name", "name"+insertCounter);> insertCounter++;> Document document =
=3D new Document();> for (Iterator iter =3D map.keySet().iterator(); iter.h=
asNext();) {> String key =3D (String) iter.next();> document.add(new Field(=
key, map.get(key), Store.YES, Index.TOKENIZED));> }> document.add(new Field=
("alias", "mydoc", Store.YES,> Index.UN_TOKENIZED));> return document;} any=
 clue why it works that way? I expect it to delete> only one doc? > _______=
__________________________________________________________> PC Magazine's 2=
007 editors' choice for best web mail-award-winning> Windows Live Hotmail.>=
 http://imagine-windowslive.com/hotmail/?locale=3Den-us&ocid=3DTXT_TAGHM_mi=
gr> ation_HMWL_mini_pcmag_0707> > -----------------------------------------=
----------------------------> To unsubscribe, e-mail: java-user-unsubscribe=
@lucene.apache.org> For additional commands, e-mail: java-user-help@lucene.=
apache.org>=20

Don't get caught with egg on your face.    Play Chicktionary! =20
_________________________________________________________________
Don't get caught with egg on your face. Play Chicktionary!=A0=A0
http://club.live.com/chicktionary.aspx?icid=3Dchick_wlmailtextlink=

--_8d1f1739-8f83-4480-a643-6a2087460555_--

From java-user-return-29570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 07:56:41 2007
Return-Path: <java-user-return-29570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88092 invoked from network); 2 Aug 2007 07:56:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 07:56:41 -0000
Received: (qmail 12529 invoked by uid 500); 2 Aug 2007 07:56:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12500 invoked by uid 500); 2 Aug 2007 07:56:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12489 invoked by uid 99); 2 Aug 2007 07:56:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 00:56:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ridwanhabbal@hotmail.com designates 65.54.246.226 as permitted sender)
Received: from [65.54.246.226] (HELO bay0-omc3-s26.bay0.hotmail.com) (65.54.246.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 07:56:27 +0000
Received: from BAY105-W30 ([65.54.224.130]) by bay0-omc3-s26.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Thu, 2 Aug 2007 00:56:06 -0700
Message-ID: <BAY105-W3088C02EA3F596E5C5C154CCE90@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_84d20e28-44d3-4a46-8d9d-7301620dd6cd_"
X-Originating-IP: [216.6.1.34]
From: Ridwan Habbal <ridwanhabbal@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: IndexReader deletes more that expected
Date: Thu, 2 Aug 2007 07:56:06 +0000
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 02 Aug 2007 07:56:06.0396 (UTC) FILETIME=[9492DBC0:01C7D4DA]
X-Virus-Checked: Checked by ClamAV on apache.org

--_84d20e28-44d3-4a46-8d9d-7301620dd6cd_
Content-Type: text/plain; charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable









=20




> Subject: RE: IndexReader deletes more that expected> Date: Wed, 1 Aug 200=
7 09:07:32 -0700> From: steven_parkes@esseff.org> To: java-user@lucene.apac=
he.org> > If I'm reading this correctly, there's something a little wonky h=
ere. In> your example code, you close the IndexWriter and then, without cre=
ating> a new IndexWriter, you call addDocument again. This shouldn't be> po=
ssible (what version of Lucene are you using?)
Yes, you are correct, I close indexWriter and then add more docs. What's wr=
ong? it worked out fine, and add docs i add will appear to NEW INSTANCES OF=
 INDEX SEARCHERS after calling close on the indexWriter.=20
   As for creating new IndexWriter, I tried to, however i suffered of the l=
ock exception i got, although i was closing the IndexWriter instance, befor=
e creating a new IndexWriter instance! I don't know why! furthermore, this =
is useless, for multiThreaded app, cause you can't know who is still writin=
g to your index, and who has colsed his IndexWriter. Even checking that the=
 index is locked b4, leads to unnecessary overhead which can be avoided sin=
ce it works for me and i can write with one single instance of IndexWriter.=
 >
> > Assuming for the time being that you are creating the IndexWriter again=
,> the other issue here is that you shouldn't be able to have a reader and>=
 a writer changing an index at the same time. There should be a lock> failu=
re. This should occur either in the Index=20
Well, I think that i don't get the problems you expect cause i use the Luce=
ne version that is shiped by compass distribution (www.compassframework.org=
) In short, compass to Lucene is the same of ORM server like hibernate for =
DBMS like oracle. It's really works fine but i couldn't understand why comp=
ass hides the deleteDocuments(Term) method on IndexWriter class
http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/a=
pache/lucene/index/IndexWriter.html#deleteDocuments(org.apache.lucene.index=
.Term)
. This is why i used delete on a reader rather than using it on the same wr=
iter instance, and the only one i have. I couldn't manage my index in one p=
articular situation using compass, because i had to store data not in the u=
sual way we do (every row in table is a record). So i think i have to ask T=
he compass team about that. Anyways, if you have coments, you or the others=
 please do. >
> > Might you be creating your IndexWriters (which you don't show) with the=
> create flag always set to true? That will wipe your index each time,> ign=
oring the locks and cause all sorts of weird results.
No, I don't create a new Instance of indexWriter, the only one I create is =
in the Service constructor, so i create a new clean (has no docs) index onl=
y when program starts up. public LuceneServiceSHImp(String indexDirectory) =
throws IOException{this.indexDirectory =3D indexDirectory;standardAnalyzer =
=3D new StandardAnalyzer();indexWriter =3D new IndexWriter(new java.io.File=
(indexDirectory), standardAnalyzer, true);indexWriter.close();}
> > -----Original Message-----> From: Ridwan Habbal [mailto:ridwanhabbal@ho=
tmail.com] > Sent: Wednesday, August 01, 2007 8:48 AM> To: java-user@lucene=
.apache.org> Subject: IndexReader deletes more that expected> > Hi, I got u=
nexpected behavior while testing lucene. To shortly address> the problem: U=
sing IndexWriter I add docs with fields named ID with a> consecutive order =
(1,2,3,4, etc) then close that index. I get new> IndexReader, and call Inde=
xReader.deleteDocuments(Term). The term is> simply new Term("ID", "1"). and=
 then class close on IndexReader. Things> work out fine. But if i add docs =
using IndexWriter, close writer, then> create new IndexReader to delete one=
 of the docs already inserted, but> without closing index. while the indexR=
eader that perform deletion is> still not closed, I add more docs, and then=
 commit the IndexWriter, so> when i search I get all added docs in the two =
phases (before using> deleteDocuments() on IndexReader and after because i =
haven't closed> IndexReader, howerer, closed IndexWriter). I close IndexRea=
der and then> query the index, so i deletes all docs after opening it till =
closing it,> in addition to the specified doc in the Term object (in this t=
est case:> ID=3D1). I know that i can avoid this by close IndexReader direc=
tly after> deleting docs, but what about runing it on mutiThread app like w=
eb> application? There you are the code: > IndexSearcher indexSearcher =3D =
new IndexSearcher(this.indexDirectory);> Hits hitsB4InsertAndClose =3D null=
;> hitsB4InsertAndClose =3D getAllAsHits(indexSearcher);> int beforeInsertA=
ndClose =3D hitsB4InsertAndClose.length();> > indexWriter.addDocument(getNe=
wElement());> indexWriter.addDocument(getNewElement());> indexWriter.addDoc=
ument(getNewElement());> indexWriter.close();> IndexSearcher indexSearcherD=
el =3D new IndexSearcher(this.indexDirectory);> indexSearcherDel.getIndexRe=
ader().deleteDocuments(new Term("ID","1"));> > indexWriter.addDocument(getN=
ewElement());> indexWriter.addDocument(getNewElement());> indexWriter.addDo=
cument(getNewElement());> indexWriter.addDocument(getNewElement());> indexW=
riter.addDocument(getNewElement());> indexWriter.addDocument(getNewElement(=
));> indexWriter.addDocument(getNewElement());> indexWriter.addDocument(get=
NewElement());> indexWriter.addDocument(getNewElement());> indexWriter.addD=
ocument(getNewElement());> indexWriter.addDocument(getNewElement());> > ind=
exWriter.close();> Hits hitsAfterInsertAndClose =3D getAllAsHits(indexSearc=
her);> int AfterInsertAndClose =3D hitsAfterInsertAndClose.length();//This =
is 14> > indexWriter.addDocument(getNewElement());> indexWriter.close();> H=
its hitsAfterInsertAndAfterCloseb4Delete =3D getAllAsHits(indexSearcher);> =
int hitsAfterInsertButAndAfterCountb4Delete =3D> hitsAfterInsertAndAfterClo=
seb4Delete.length();//This is 15> > > > indexSearcherDel.close();> Hits hit=
sAfterInsertAndAfterClose =3D getAllAsHits(indexSearcher);int> hitsAfterIns=
ertButAndAfterCount =3D> hitsAfterInsertAndAfterClose.length();//This is 2 =
The two methods I> Use > private Hits getAllAsHits(IndexSearcher indexSearc=
her){> try{> Analyzer analyzer =3D new StandardAnalyzer();> String defaultS=
earchField =3D "all";> QueryParser parser =3D new QueryParser(defaultSearch=
Field, analyzer);> indexSearcher =3D new IndexSearcher(this.indexDirectory)=
;> Hits hits =3D indexSearcher.search(parser.parse("+alias:mydoc"));> index=
Searcher.close();> return hits;> }catch(IOException ex){> throw new Runtime=
Exception(ex);> }catch(org.apache.lucene.queryParser.ParseException ex){> t=
hrow new RuntimeException(ex);> }> > }> > private Document getNewElement(){=
> Map<String, String> map =3D new HashMap();> map.put("ID", new Integer(ins=
ertCounter).toString());> map.put("name", "name"+insertCounter);> insertCou=
nter++;> Document document =3D new Document();> for (Iterator iter =3D map.=
keySet().iterator(); iter.hasNext();) {> String key =3D (String) iter.next(=
);> document.add(new Field(key, map.get(key), Store.YES, Index.TOKENIZED));=
> }> document.add(new Field("alias", "mydoc", Store.YES,> Index.UN_TOKENIZE=
D));> return document;} any clue why it works that way? I expect it to dele=
te> only one doc? > _______________________________________________________=
__________> PC Magazine's 2007 editors' choice for best web mail-award-winn=
ing> Windows Live Hotmail.> http://imagine-windowslive.com/hotmail/?locale=
=3Den-us&ocid=3DTXT_TAGHM_migr> ation_HMWL_mini_pcmag_0707> > -------------=
--------------------------------------------------------> To unsubscribe, e=
-mail: java-user-unsubscribe@lucene.apache.org> For additional commands, e-=
mail: java-user-help@lucene.apache.org>=20
_________________________________________________________________
See what you=92re getting into=85before you go there.
http://newlivehotmail.com=

--_84d20e28-44d3-4a46-8d9d-7301620dd6cd_--

From java-user-return-29571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 08:00:20 2007
Return-Path: <java-user-return-29571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88769 invoked from network); 2 Aug 2007 08:00:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 08:00:18 -0000
Received: (qmail 17511 invoked by uid 500); 2 Aug 2007 08:00:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17190 invoked by uid 500); 2 Aug 2007 08:00:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17179 invoked by uid 99); 2 Aug 2007 08:00:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 01:00:12 -0700
X-ASF-Spam-Status: No, hits=4.6 required=10.0
	tests=HTML_FONT_FACE_BAD,HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ridwanhabbal@hotmail.com designates 65.54.246.231 as permitted sender)
Received: from [65.54.246.231] (HELO bay0-omc3-s31.bay0.hotmail.com) (65.54.246.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 07:59:40 +0000
Received: from BAY105-W28 ([65.54.224.128]) by bay0-omc3-s31.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Thu, 2 Aug 2007 00:59:40 -0700
Message-ID: <BAY105-W287462E64A16A521673C45CCE90@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_1c1a953e-8b05-4e18-a8c2-60f626f149f0_"
X-Originating-IP: [216.6.1.34]
From: Ridwan Habbal <ridwanhabbal@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: IndexReader deletes more that expected
Date: Thu, 2 Aug 2007 07:59:40 +0000
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 02 Aug 2007 07:59:40.0455 (UTC) FILETIME=[1429AB70:01C7D4DB]
X-Virus-Checked: Checked by ClamAV on apache.org

--_1c1a953e-8b05-4e18-a8c2-60f626f149f0_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Yes, you are correct, I close indexWriter and then add more docs. What's wr=
ong? it worked out fine, and add docs i add will appear to NEW INSTANCES OF=
 INDEX SEARCHERS after calling close on the indexWriter.=20
   As for creating new IndexWriter, I tried to, however i suffered of the l=
ock exception i got, although i was closing the IndexWriter instance, befor=
e creating a new IndexWriter instance! I don't know why! furthermore, this =
is useless, for multiThreaded app, cause you can't know who is still writin=
g to your index, and who has colsed his IndexWriter. Even checking that the=
 index is locked b4, leads to unnecessary overhead which can be avoided sin=
ce it works for me and i can write with one single instance of IndexWriter.=
=20

Well, I think that i don't get the problems you expect cause i use the Luce=
ne version that is shiped by compass distribution (www.compassframework.org=
) In short, compass to Lucene is the same of ORM server like hibernate for =
DBMS like oracle. It's really works fine but i couldn't understand why comp=
ass hides the deleteDocuments(Term) method on IndexWriter class
http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/a=
pache/lucene/index/IndexWriter.html#deleteDocuments(org.apache.lucene.index=
.Term)
. This is why i used delete on a reader rather than using it on the same wr=
iter instance, and the only one i have. I couldn't manage my index in one p=
articular situation using compass, because i had to store data not in the u=
sual way we do (every row in table is a record). So i think i have to ask T=
he compass team about that. Anyways, if you have coments, you or the others=
 please do.=20
=20

No, I don't create a new Instance of indexWriter, the only one I create is =
in the Service constructor, so i create a new clean (has no docs) index onl=
y when program starts up. public LuceneServiceSHImp(String indexDirectory) =
throws IOException{this.indexDirectory =3D indexDirectory;standardAnalyzer =
=3D new StandardAnalyzer();indexWriter =3D new IndexWriter(new java.io.File=
(indexDirectory), standardAnalyzer, true);indexWriter.close();}







> Subject: RE: IndexReader deletes more that expected> Date: Wed, 1 Aug 200=
7 09:07:32 -0700> From: steven_parkes@esseff.org> To: java-user@lucene.apac=
he.org> > If I'm reading this correctly, there's something a little wonky h=
ere. In> your example code, you close the IndexWriter and then, without cre=
ating> a new IndexWriter, you call addDocument again. This shouldn't be> po=
ssible (what version of Lucene are you using?)> > Assuming for the time bei=
ng that you are creating the IndexWriter again,> the other issue here is th=
at you shouldn't be able to have a reader and> a writer changing an index a=
t the same time. There should be a lock> failure. This should occur either =
in the Index > > Might you be creating your IndexWriters (which you don't s=
how) with the> create flag always set to true? That will wipe your index ea=
ch time,> ignoring the locks and cause all sorts of weird results.> > -----=
Original Message-----> From: Ridwan Habbal [mailto:ridwanhabbal@hotmail.com=
] > Sent: Wednesday, August 01, 2007 8:48 AM> To: java-user@lucene.apache.o=
rg> Subject: IndexReader deletes more that expected> > Hi, I got unexpected=
 behavior while testing lucene. To shortly address> the problem: Using Inde=
xWriter I add docs with fields named ID with a> consecutive order (1,2,3,4,=
 etc) then close that index. I get new> IndexReader, and call IndexReader.d=
eleteDocuments(Term). The term is> simply new Term("ID", "1"). and then cla=
ss close on IndexReader. Things> work out fine. But if i add docs using Ind=
exWriter, close writer, then> create new IndexReader to delete one of the d=
ocs already inserted, but> without closing index. while the indexReader tha=
t perform deletion is> still not closed, I add more docs, and then commit t=
he IndexWriter, so> when i search I get all added docs in the two phases (b=
efore using> deleteDocuments() on IndexReader and after because i haven't c=
losed> IndexReader, howerer, closed IndexWriter). I close IndexReader and t=
hen> query the index, so i deletes all docs after opening it till closing i=
t,> in addition to the specified doc in the Term object (in this test case:=
> ID=3D1). I know that i can avoid this by close IndexReader directly after=
> deleting docs, but what about runing it on mutiThread app like web> appli=
cation? There you are the code: > IndexSearcher indexSearcher =3D new Index=
Searcher(this.indexDirectory);> Hits hitsB4InsertAndClose =3D null;> hitsB4=
InsertAndClose =3D getAllAsHits(indexSearcher);> int beforeInsertAndClose =
=3D hitsB4InsertAndClose.length();> > indexWriter.addDocument(getNewElement=
());> indexWriter.addDocument(getNewElement());> indexWriter.addDocument(ge=
tNewElement());> indexWriter.close();> IndexSearcher indexSearcherDel =3D n=
ew IndexSearcher(this.indexDirectory);> indexSearcherDel.getIndexReader().d=
eleteDocuments(new Term("ID","1"));> > indexWriter.addDocument(getNewElemen=
t());> indexWriter.addDocument(getNewElement());> indexWriter.addDocument(g=
etNewElement());> indexWriter.addDocument(getNewElement());> indexWriter.ad=
dDocument(getNewElement());> indexWriter.addDocument(getNewElement());> ind=
exWriter.addDocument(getNewElement());> indexWriter.addDocument(getNewEleme=
nt());> indexWriter.addDocument(getNewElement());> indexWriter.addDocument(=
getNewElement());> indexWriter.addDocument(getNewElement());> > indexWriter=
.close();> Hits hitsAfterInsertAndClose =3D getAllAsHits(indexSearcher);> i=
nt AfterInsertAndClose =3D hitsAfterInsertAndClose.length();//This is 14> >=
 indexWriter.addDocument(getNewElement());> indexWriter.close();> Hits hits=
AfterInsertAndAfterCloseb4Delete =3D getAllAsHits(indexSearcher);> int hits=
AfterInsertButAndAfterCountb4Delete =3D> hitsAfterInsertAndAfterCloseb4Dele=
te.length();//This is 15> > > > indexSearcherDel.close();> Hits hitsAfterIn=
sertAndAfterClose =3D getAllAsHits(indexSearcher);int> hitsAfterInsertButAn=
dAfterCount =3D> hitsAfterInsertAndAfterClose.length();//This is 2 The two =
methods I> Use > private Hits getAllAsHits(IndexSearcher indexSearcher){> t=
ry{> Analyzer analyzer =3D new StandardAnalyzer();> String defaultSearchFie=
ld =3D "all";> QueryParser parser =3D new QueryParser(defaultSearchField, a=
nalyzer);> indexSearcher =3D new IndexSearcher(this.indexDirectory);> Hits =
hits =3D indexSearcher.search(parser.parse("+alias:mydoc"));> indexSearcher=
.close();> return hits;> }catch(IOException ex){> throw new RuntimeExceptio=
n(ex);> }catch(org.apache.lucene.queryParser.ParseException ex){> throw new=
 RuntimeException(ex);> }> > }> > private Document getNewElement(){> Map<St=
ring, String> map =3D new HashMap();> map.put("ID", new Integer(insertCount=
er).toString());> map.put("name", "name"+insertCounter);> insertCounter++;>=
 Document document =3D new Document();> for (Iterator iter =3D map.keySet()=
.iterator(); iter.hasNext();) {> String key =3D (String) iter.next();> docu=
ment.add(new Field(key, map.get(key), Store.YES, Index.TOKENIZED));> }> doc=
ument.add(new Field("alias", "mydoc", Store.YES,> Index.UN_TOKENIZED));> re=
turn document;} any clue why it works that way? I expect it to delete> only=
 one doc? > _______________________________________________________________=
__> PC Magazine's 2007 editors' choice for best web mail-award-winning> Win=
dows Live Hotmail.> http://imagine-windowslive.com/hotmail/?locale=3Den-us&=
ocid=3DTXT_TAGHM_migr> ation_HMWL_mini_pcmag_0707> > ----------------------=
-----------------------------------------------> To unsubscribe, e-mail: ja=
va-user-unsubscribe@lucene.apache.org> For additional commands, e-mail: jav=
a-user-help@lucene.apache.org>=20
_________________________________________________________________
Local listings, incredible imagery, and driving directions - all in one pla=
ce! Find it!
http://maps.live.com/?wip=3D69&FORM=3DMGAC01=

--_1c1a953e-8b05-4e18-a8c2-60f626f149f0_--

From java-user-return-29572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 08:56:54 2007
Return-Path: <java-user-return-29572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2531 invoked from network); 2 Aug 2007 08:56:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 08:56:53 -0000
Received: (qmail 8010 invoked by uid 500); 2 Aug 2007 08:56:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7974 invoked by uid 500); 2 Aug 2007 08:56:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7963 invoked by uid 99); 2 Aug 2007 08:56:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 01:56:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 08:56:19 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IGWTj-0000cz-Ko
	for java-user@lucene.apache.org; Thu, 02 Aug 2007 01:56:19 -0700
Message-ID: <11960750.post@talk.nabble.com>
Date: Thu, 2 Aug 2007 01:56:19 -0700 (PDT)
From: makkhar <mkharche@selectica.com>
To: java-user@lucene.apache.org
Subject: Getting only the Ids, not the whole documents.
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mkharche@selectica.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all,

   Can I get just a list of document Ids given a search criteria ? To
elaborate here is my situation:

I store 20000 contracts in the file system index each with some
parameterName and Value. Given a search criterion - (paramValue='draft'). I
need to get just an ArrayList of Strings containing contract Ids. I dont
need the lucene documents, just the Ids.

Can this be done ?

-thanks

-- 
View this message in context: http://www.nabble.com/Getting-only-the-Ids%2C-not-the-whole-documents.-tf4204907.html#a11960750
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 09:01:05 2007
Return-Path: <java-user-return-29573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3961 invoked from network); 2 Aug 2007 09:01:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 09:01:04 -0000
Received: (qmail 16818 invoked by uid 500); 2 Aug 2007 09:00:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16347 invoked by uid 500); 2 Aug 2007 09:00:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16336 invoked by uid 99); 2 Aug 2007 09:00:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 02:00:58 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mnrz57@gmail.com designates 209.85.132.240 as permitted sender)
Received: from [209.85.132.240] (HELO an-out-0708.google.com) (209.85.132.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 09:00:28 +0000
Received: by an-out-0708.google.com with SMTP id c5so81978anc
        for <java-user@lucene.apache.org>; Thu, 02 Aug 2007 02:00:29 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lLRlnU3Ct+DxHNNyXXo9mFK7NMCRVEUf6jVqzbq8Z8YhuyDVlPJ+nOJRjwKJ2Jla/3mTkvs5ndxOwvNtOU8/Qimn4Fn2vQ0pmImK0ush3kSwx7NmLSRNjAOKmFCijmdkTx5Ml/lWVoAa7QL0ywG/15gXFCMAE4lh3TDvRhwEICw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=k74n22K1VFhE+gKSd8JlByMOYyfqzsVgaWSZON1rbPaaGeE0OmlG74hiSmAQdakSr1zIOzL8Id7id9dP4GPLT5+UClTcDumDQC9QQkj2JR/KlWRGDgV7TKsII/uocxIg+NT1xIA+iSLcIGcR2p4rZ9mJFHIcDiZAujV7nHvwa90=
Received: by 10.100.94.3 with SMTP id r3mr978171anb.1186045228866;
        Thu, 02 Aug 2007 02:00:28 -0700 (PDT)
Received: by 10.100.14.12 with HTTP; Thu, 2 Aug 2007 02:00:28 -0700 (PDT)
Message-ID: <34b8543c0708020200s82acc82oe9c2e360d527f2db@mail.gmail.com>
Date: Thu, 2 Aug 2007 12:30:28 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Getting only the Ids, not the whole documents.
In-Reply-To: <11960750.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_101951_27354274.1186045228840"
References: <11960750.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_101951_27354274.1186045228840
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

yes if you extend your class from HitCollector and override the collect()
mthod with following signature you can get IDs

public void collect(int id, float score)

On 8/2/07, makkhar <mkharche@selectica.com> wrote:
>
>
> Hi all,
>
>    Can I get just a list of document Ids given a search criteria ? To
> elaborate here is my situation:
>
> I store 20000 contracts in the file system index each with some
> parameterName and Value. Given a search criterion - (paramValue='draft').
> I
> need to get just an ArrayList of Strings containing contract Ids. I dont
> need the lucene documents, just the Ids.
>
> Can this be done ?
>
> -thanks
>
> --
> View this message in context:
> http://www.nabble.com/Getting-only-the-Ids%2C-not-the-whole-documents.-tf4204907.html#a11960750
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/
another in Persian: http://fekre-motefavet.blogspot.com/

------=_Part_101951_27354274.1186045228840--

From java-user-return-29574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 09:09:23 2007
Return-Path: <java-user-return-29574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6413 invoked from network); 2 Aug 2007 09:09:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 09:09:22 -0000
Received: (qmail 26422 invoked by uid 500); 2 Aug 2007 09:09:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25469 invoked by uid 500); 2 Aug 2007 09:09:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25457 invoked by uid 99); 2 Aug 2007 09:09:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 02:09:15 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [80.67.64.10] (HELO smtp1.akamai.com) (80.67.64.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 09:09:10 +0000
Received: from smtp1.akamai.com (vwall.kendall.corp.akamai.com [172.17.4.35])
	by smtp1.akamai.com (8.13.8/8.12.10) with ESMTP id l7297jPE000252
	for <java-user@lucene.apache.org>; Thu, 2 Aug 2007 05:07:46 -0400 (EDT)
Received: from USMA1EX-GATE1.kendall.corp.akamai.com (usma1ex-gate1.kendall.corp.akamai.com [172.17.0.215])
	by smtp1.akamai.com (8.13.8/8.12.10) with ESMTP id l7297jMP000246
	for <java-user@lucene.apache.org>; Thu, 2 Aug 2007 05:07:45 -0400 (EDT)
Received: from INVS1.bangalore.corp.akamai.com ([172.21.20.14]) by USMA1EX-GATE1.kendall.corp.akamai.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 2 Aug 2007 05:03:31 -0400
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: Getting only the Ids, not the whole documents.
Date: Thu, 2 Aug 2007 14:38:41 +0530
Message-ID: <4FA8C6AEE609B644B38DE471A3657A6201547476@INVS1.bangalore.corp.akamai.com>
In-Reply-To: <11960750.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Getting only the Ids, not the whole documents.
Thread-Index: AcfU4xfVSHp63h4SQrWts5/hkVXFjgAARlmA
References: <11960750.post@talk.nabble.com>
From: "Chhabra, Kapil" <kchhabra@akamai.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 02 Aug 2007 09:03:31.0578 (UTC) FILETIME=[FFB0A5A0:01C7D4E3]
X-Virus-Checked: Checked by ClamAV on apache.org

What is the structure of your index?
If you havnt already, then add a new field to your index that stores the
contractId. For all other fields, set the "store" flag to false while
indexing.

You can now safely retrieve the value of this contractId field based on
your search results.

Regards,
kapilChhabra


-----Original Message-----
From: makkhar [mailto:mkharche@selectica.com]=20
Sent: Thursday, August 02, 2007 2:26 PM
To: java-user@lucene.apache.org
Subject: Getting only the Ids, not the whole documents.


Hi all,

   Can I get just a list of document Ids given a search criteria ? To
elaborate here is my situation:

I store 20000 contracts in the file system index each with some
parameterName and Value. Given a search criterion -
(paramValue=3D'draft'). I
need to get just an ArrayList of Strings containing contract Ids. I dont
need the lucene documents, just the Ids.

Can this be done ?

-thanks

--=20
View this message in context:
http://www.nabble.com/Getting-only-the-Ids%2C-not-the-whole-documents.-t
f4204907.html#a11960750
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 09:19:58 2007
Return-Path: <java-user-return-29575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8715 invoked from network); 2 Aug 2007 09:19:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 09:19:57 -0000
Received: (qmail 42238 invoked by uid 500); 2 Aug 2007 09:19:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42199 invoked by uid 500); 2 Aug 2007 09:19:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42188 invoked by uid 99); 2 Aug 2007 09:19:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 02:19:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 09:19:24 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IGWq3-0001Nq-Vv
	for java-user@lucene.apache.org; Thu, 02 Aug 2007 02:19:23 -0700
Message-ID: <11961159.post@talk.nabble.com>
Date: Thu, 2 Aug 2007 02:19:23 -0700 (PDT)
From: makkhar <mkharche@selectica.com>
To: java-user@lucene.apache.org
Subject: Re: Getting only the Ids, not the whole documents.
In-Reply-To: <34b8543c0708020200s82acc82oe9c2e360d527f2db@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mkharche@selectica.com
References: <11960750.post@talk.nabble.com> <34b8543c0708020200s82acc82oe9c2e360d527f2db@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org



Hi,

   The solution you suggested will definitely work but will definitely slow
down my search by an order of magnitude. The problem I am trying to solve is
performance, thats why I need the collection of IDs and not the whole
documents.

- thanks for the prompt reply.


is_maximum wrote:
> 
> yes if you extend your class from HitCollector and override the collect()
> mthod with following signature you can get IDs
> 
> public void collect(int id, float score)
> 
> On 8/2/07, makkhar <mkharche@selectica.com> wrote:
>>
>>
>> Hi all,
>>
>>    Can I get just a list of document Ids given a search criteria ? To
>> elaborate here is my situation:
>>
>> I store 20000 contracts in the file system index each with some
>> parameterName and Value. Given a search criterion - (paramValue='draft').
>> I
>> need to get just an ArrayList of Strings containing contract Ids. I dont
>> need the lucene documents, just the Ids.
>>
>> Can this be done ?
>>
>> -thanks
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Getting-only-the-Ids%2C-not-the-whole-documents.-tf4204907.html#a11960750
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 
> -- 
> Regards,
> Mohammad
> --------------------------
> see my blog: http://brainable.blogspot.com/
> another in Persian: http://fekre-motefavet.blogspot.com/
> 
> 

-- 
View this message in context: http://www.nabble.com/Getting-only-the-Ids%2C-not-the-whole-documents.-tf4204907.html#a11961159
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 09:23:59 2007
Return-Path: <java-user-return-29576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10026 invoked from network); 2 Aug 2007 09:23:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 09:23:59 -0000
Received: (qmail 50719 invoked by uid 500); 2 Aug 2007 09:23:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50683 invoked by uid 500); 2 Aug 2007 09:23:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50672 invoked by uid 99); 2 Aug 2007 09:23:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 02:23:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 09:23:44 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IGWtv-0001Tq-JQ
	for java-user@lucene.apache.org; Thu, 02 Aug 2007 02:23:23 -0700
Message-ID: <11961211.post@talk.nabble.com>
Date: Thu, 2 Aug 2007 02:23:23 -0700 (PDT)
From: makkhar <mkharche@selectica.com>
To: java-user@lucene.apache.org
Subject: RE: Getting only the Ids, not the whole documents.
In-Reply-To: <4FA8C6AEE609B644B38DE471A3657A6201547476@INVS1.bangalore.corp.akamai.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mkharche@selectica.com
References: <11960750.post@talk.nabble.com> <4FA8C6AEE609B644B38DE471A3657A6201547476@INVS1.bangalore.corp.akamai.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Heres my index structure :

Document -> contract ID   -    id (index AND store)
              -> paramName   -    name (index AND store)
              -> paramValue   -    value (index BUT NOT store)

When I get back 20000 hits, each document contains ID and paramName, I have
no interest in paramName (but I have to STORE it for some other reason), can
I not just get a plain java String Array of the contract IDs that matched ?
!

-thanks for the prompt reply.



Chhabra, Kapil wrote:
> 
> What is the structure of your index?
> If you havnt already, then add a new field to your index that stores the
> contractId. For all other fields, set the "store" flag to false while
> indexing.
> 
> You can now safely retrieve the value of this contractId field based on
> your search results.
> 
> Regards,
> kapilChhabra
> 
> 
> -----Original Message-----
> From: makkhar [mailto:mkharche@selectica.com] 
> Sent: Thursday, August 02, 2007 2:26 PM
> To: java-user@lucene.apache.org
> Subject: Getting only the Ids, not the whole documents.
> 
> 
> Hi all,
> 
>    Can I get just a list of document Ids given a search criteria ? To
> elaborate here is my situation:
> 
> I store 20000 contracts in the file system index each with some
> parameterName and Value. Given a search criterion -
> (paramValue='draft'). I
> need to get just an ArrayList of Strings containing contract Ids. I dont
> need the lucene documents, just the Ids.
> 
> Can this be done ?
> 
> -thanks
> 
> -- 
> View this message in context:
> http://www.nabble.com/Getting-only-the-Ids%2C-not-the-whole-documents.-t
> f4204907.html#a11960750
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Getting-only-the-Ids%2C-not-the-whole-documents.-tf4204907.html#a11961211
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 09:26:20 2007
Return-Path: <java-user-return-29577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10551 invoked from network); 2 Aug 2007 09:26:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 09:26:19 -0000
Received: (qmail 53774 invoked by uid 500); 2 Aug 2007 09:26:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53516 invoked by uid 500); 2 Aug 2007 09:26:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53505 invoked by uid 99); 2 Aug 2007 09:26:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 02:26:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mnrz57@gmail.com designates 209.85.132.246 as permitted sender)
Received: from [209.85.132.246] (HELO an-out-0708.google.com) (209.85.132.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 09:26:06 +0000
Received: by an-out-0708.google.com with SMTP id c5so82880anc
        for <java-user@lucene.apache.org>; Thu, 02 Aug 2007 02:25:46 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=YXt6yEFnhBlQFB/hFdTR4HFnv2Cn/yBgmPnL6i6DI+lHuCrv17zL/oD+N7lkHXHEdwoBnQm55paViKMniKpbc8vd5ByUVuwUOmR6nHyGGgpRNmGS3US9VsWvmBNB4Drt6SHfdzdALSS3jK/lzh6T3BX3PRvqqnTUjVC5pfnbtEk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LHDlOXyiVWcU3rds14vks9MXpxrAOJCJx1dmKvlnyAcuopIewX3km0UULxueNALOEWBsmRCIxBbjI6VzXdLGnslhRzZoo7VPZDuh4eO/B9pdkrpctR2JliV6AgMf3zuQL5daQ1AwhZhEiKJ+I3O+K+WvBG/+aAo/DIxnpkll9Ko=
Received: by 10.100.7.18 with SMTP id 18mr960525ang.1186046745959;
        Thu, 02 Aug 2007 02:25:45 -0700 (PDT)
Received: by 10.100.14.12 with HTTP; Thu, 2 Aug 2007 02:25:45 -0700 (PDT)
Message-ID: <34b8543c0708020225x435f0ad6s4869cd739107bc66@mail.gmail.com>
Date: Thu, 2 Aug 2007 12:55:45 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Getting only the Ids, not the whole documents.
In-Reply-To: <11961159.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_102163_19945325.1186046745830"
References: <11960750.post@talk.nabble.com>
	 <34b8543c0708020200s82acc82oe9c2e360d527f2db@mail.gmail.com>
	 <11961159.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_102163_19945325.1186046745830
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

yes it decrease the performance but the only solution.
I've spent many weeks to find best way to retrive my own IDs but find this
way as last one

now I am storing the ids in a BitSet structure and it's fast enough

public void collect(...){
idBitSet.set(Integer.valueOf(searcher.doc(id).get("MyOwnID")));

}

On 8/2/07, makkhar <mkharche@selectica.com> wrote:
>
>
>
> Hi,
>
>    The solution you suggested will definitely work but will definitely
> slow
> down my search by an order of magnitude. The problem I am trying to solve
> is
> performance, thats why I need the collection of IDs and not the whole
> documents.
>
> - thanks for the prompt reply.
>
>
> is_maximum wrote:
> >
> > yes if you extend your class from HitCollector and override the
> collect()
> > mthod with following signature you can get IDs
> >
> > public void collect(int id, float score)
> >
> > On 8/2/07, makkhar <mkharche@selectica.com> wrote:
> >>
> >>
> >> Hi all,
> >>
> >>    Can I get just a list of document Ids given a search criteria ? To
> >> elaborate here is my situation:
> >>
> >> I store 20000 contracts in the file system index each with some
> >> parameterName and Value. Given a search criterion -
> (paramValue='draft').
> >> I
> >> need to get just an ArrayList of Strings containing contract Ids. I
> dont
> >> need the lucene documents, just the Ids.
> >>
> >> Can this be done ?
> >>
> >> -thanks
> >>
> >> --
> >> View this message in context:
> >>
> http://www.nabble.com/Getting-only-the-Ids%2C-not-the-whole-documents.-tf4204907.html#a11960750
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
> > --
> > Regards,
> > Mohammad
> > --------------------------
> > see my blog: http://brainable.blogspot.com/
> > another in Persian: http://fekre-motefavet.blogspot.com/
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Getting-only-the-Ids%2C-not-the-whole-documents.-tf4204907.html#a11961159
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/
another in Persian: http://fekre-motefavet.blogspot.com/

------=_Part_102163_19945325.1186046745830--

From java-user-return-29578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 09:29:21 2007
Return-Path: <java-user-return-29578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11098 invoked from network); 2 Aug 2007 09:29:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 09:29:20 -0000
Received: (qmail 57765 invoked by uid 500); 2 Aug 2007 09:29:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57728 invoked by uid 500); 2 Aug 2007 09:29:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57716 invoked by uid 99); 2 Aug 2007 09:29:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 02:29:14 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mnrz57@gmail.com designates 209.85.132.243 as permitted sender)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 09:29:08 +0000
Received: by an-out-0708.google.com with SMTP id c5so82983anc
        for <java-user@lucene.apache.org>; Thu, 02 Aug 2007 02:28:48 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WPvCYoI/oyzNXS+69GSMQRsa9A94RGsqMHYp4ZK2xs3L0D5OK3xc+iFK1J9dIuBg38DnE02ZtVFMUqBn/tlBlANt/kgXjoxdKwrSROP+8jyew4cCJtWu+Zigi9MwkTHvpTVf0TXPrAfrIwqL+albnKbT76slAqcVf1mS0TpqkYY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TM8tKfUPb4tUogB4JByUUV+XP4S7XtFTS+nUzl6O6yvCn4K+cr3BowVDJfZ+AWs/fsUw/6EQ+kI3w6kElCsAGr1kXGDR+iPVibP0TlKA12X1+vHpwOcFAXy+eLbixhK1Dv200ot3JlyfedVSAb50CTsB2HLyVk5lONYRqSG9enA=
Received: by 10.100.11.7 with SMTP id 7mr960833ank.1186046928117;
        Thu, 02 Aug 2007 02:28:48 -0700 (PDT)
Received: by 10.100.14.12 with HTTP; Thu, 2 Aug 2007 02:28:48 -0700 (PDT)
Message-ID: <34b8543c0708020228g5fa42f93lf178f000bc4a8458@mail.gmail.com>
Date: Thu, 2 Aug 2007 12:58:48 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Getting only the Ids, not the whole documents.
In-Reply-To: <11961211.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_102179_28064046.1186046928025"
References: <11960750.post@talk.nabble.com>
	 <4FA8C6AEE609B644B38DE471A3657A6201547476@INVS1.bangalore.corp.akamai.com>
	 <11961211.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_102179_28064046.1186046928025
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

you should not store them in an Array structure since they will take up the
memory.
the BitSet is the best structure to store them


On 8/2/07, makkhar <mkharche@selectica.com> wrote:
>
>
> Heres my index structure :
>
> Document -> contract ID   -    id (index AND store)
>               -> paramName   -    name (index AND store)
>               -> paramValue   -    value (index BUT NOT store)
>
> When I get back 20000 hits, each document contains ID and paramName, I
> have
> no interest in paramName (but I have to STORE it for some other reason),
> can
> I not just get a plain java String Array of the contract IDs that matched
> ?
> !
>
> -thanks for the prompt reply.
>
>
>
> Chhabra, Kapil wrote:
> >
> > What is the structure of your index?
> > If you havnt already, then add a new field to your index that stores the
> > contractId. For all other fields, set the "store" flag to false while
> > indexing.
> >
> > You can now safely retrieve the value of this contractId field based on
> > your search results.
> >
> > Regards,
> > kapilChhabra
> >
> >
> > -----Original Message-----
> > From: makkhar [mailto:mkharche@selectica.com]
> > Sent: Thursday, August 02, 2007 2:26 PM
> > To: java-user@lucene.apache.org
> > Subject: Getting only the Ids, not the whole documents.
> >
> >
> > Hi all,
> >
> >    Can I get just a list of document Ids given a search criteria ? To
> > elaborate here is my situation:
> >
> > I store 20000 contracts in the file system index each with some
> > parameterName and Value. Given a search criterion -
> > (paramValue='draft'). I
> > need to get just an ArrayList of Strings containing contract Ids. I dont
> > need the lucene documents, just the Ids.
> >
> > Can this be done ?
> >
> > -thanks
> >
> > --
> > View this message in context:
> > http://www.nabble.com/Getting-only-the-Ids%2C-not-the-whole-documents.-t
> > f4204907.html#a11960750
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Getting-only-the-Ids%2C-not-the-whole-documents.-tf4204907.html#a11961211
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/
another in Persian: http://fekre-motefavet.blogspot.com/

------=_Part_102179_28064046.1186046928025--

From java-user-return-29579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 10:15:03 2007
Return-Path: <java-user-return-29579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23321 invoked from network); 2 Aug 2007 10:15:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 10:15:00 -0000
Received: (qmail 31850 invoked by uid 500); 2 Aug 2007 10:14:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31629 invoked by uid 500); 2 Aug 2007 10:14:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31618 invoked by uid 99); 2 Aug 2007 10:14:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 03:14:53 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of askar.zaidi@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 10:14:50 +0000
Received: by ug-out-1314.google.com with SMTP id c2so348058ugf
        for <java-user@lucene.apache.org>; Thu, 02 Aug 2007 03:14:29 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=C+mQd5+6aW9yHsKQWTg2w/NlLvmL7Om7M5T992vSImitmbok9Unj3LiyKUhiAJimG9x3AQpB1F8d2RvPAqAe/7RD6GaUpnxH+8ETP/kwMhKqMngMghHeQfR3kPAFL6Q8G8qpr+UVh1WacGn6wcSVYfl+nAQqWWxatSFH3E0aJcI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=Y64mHi4JMWFRwp/rTilrxkCl1jueDTmm9W8AVKEfbCvyn5Oj888m8oOgM7o22mSFtaaoaqzdHo3Wx5DtKwSR+YAqZF24uCSnGfnHjpDY6VNXCC2Itizl7EyVXzwliPxHw5iRg9IOjaCo6A1zE9AmirH2eNxyi4O9cVm9KALnomc=
Received: by 10.67.87.8 with SMTP id p8mr2023446ugl.1186049668889;
        Thu, 02 Aug 2007 03:14:28 -0700 (PDT)
Received: by 10.66.233.3 with HTTP; Thu, 2 Aug 2007 03:14:28 -0700 (PDT)
Message-ID: <c0c0e1d40708020314n398777d7v19fa698761aa7e1f@mail.gmail.com>
Date: Thu, 2 Aug 2007 06:14:28 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org
Subject: Do AND + OR Search in Lucene
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_68806_2603246.1186049668851"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_68806_2603246.1186049668851
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hey Guys,

Quick question:

I do this in my code for searching:

queryParser.setDefaultOperator(QueryParser.Operator.AND);

Lucene is OR by default so I change it to AND for my requirements. Now, I
have a requirement to do OR as well. I mean while doing AND I'd like to
include results from OR too ... but they'll be much lower ranked than the
AND results.

Is there a way to do this ?

thanks,
AZ

------=_Part_68806_2603246.1186049668851--

From java-user-return-29580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 10:59:58 2007
Return-Path: <java-user-return-29580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38683 invoked from network); 2 Aug 2007 10:59:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 10:59:56 -0000
Received: (qmail 1100 invoked by uid 500); 2 Aug 2007 10:59:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 992 invoked by uid 500); 2 Aug 2007 10:59:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 980 invoked by uid 99); 2 Aug 2007 10:59:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 03:59:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 10:59:44 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IGYOq-0003ow-5a
	for java-user@lucene.apache.org; Thu, 02 Aug 2007 03:59:24 -0700
Message-ID: <11962340.post@talk.nabble.com>
Date: Thu, 2 Aug 2007 03:59:24 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: Do AND + OR Search in Lucene
In-Reply-To: <c0c0e1d40708020314n398777d7v19fa698761aa7e1f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
References: <c0c0e1d40708020314n398777d7v19fa698761aa7e1f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


You can create two queries from two query parser, one with AND and the other
one with OR. After you create both of them, you call setBoost() to give
different boost level and then join them together using BooleanQuery with
option BooleanClause.Occur.SHOULD. That should do the trick.


askarzaidi wrote:
> 
> Hey Guys,
> 
> Quick question:
> 
> I do this in my code for searching:
> 
> queryParser.setDefaultOperator(QueryParser.Operator.AND);
> 
> Lucene is OR by default so I change it to AND for my requirements. Now, I
> have a requirement to do OR as well. I mean while doing AND I'd like to
> include results from OR too ... but they'll be much lower ranked than the
> AND results.
> 
> Is there a way to do this ?
> 
> thanks,
> AZ
> 
> 

-- 
View this message in context: http://www.nabble.com/Do-AND-%2B-OR-Search-in-Lucene-tf4205268.html#a11962340
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 11:05:58 2007
Return-Path: <java-user-return-29581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41632 invoked from network); 2 Aug 2007 11:05:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 11:05:56 -0000
Received: (qmail 14944 invoked by uid 500); 2 Aug 2007 11:05:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14469 invoked by uid 500); 2 Aug 2007 11:05:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14458 invoked by uid 99); 2 Aug 2007 11:05:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 04:05:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 11:05:44 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IGYUd-00049r-IB
	for java-user@lucene.apache.org; Thu, 02 Aug 2007 04:05:23 -0700
Message-ID: <11962465.post@talk.nabble.com>
Date: Thu, 2 Aug 2007 04:05:23 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: Getting only the Ids, not the whole documents.
In-Reply-To: <34b8543c0708020225x435f0ad6s4869cd739107bc66@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
References: <11960750.post@talk.nabble.com> <34b8543c0708020200s82acc82oe9c2e360d527f2db@mail.gmail.com> <11961159.post@talk.nabble.com> <34b8543c0708020225x435f0ad6s4869cd739107bc66@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

Why don't you consider to use FieldSelector? LoadFirstFieldSelector has an
ability to help you load only the first field in the document without
loading all the fields. After that, you can keep the whole document if you
like. It should help improve performance better.



is_maximum wrote:
> 
> yes it decrease the performance but the only solution.
> I've spent many weeks to find best way to retrive my own IDs but find this
> way as last one
> 
> now I am storing the ids in a BitSet structure and it's fast enough
> 
> public void collect(...){
> idBitSet.set(Integer.valueOf(searcher.doc(id).get("MyOwnID")));
> 
> }
> 
> On 8/2/07, makkhar <mkharche@selectica.com> wrote:
>>
>>
>>
>> Hi,
>>
>>    The solution you suggested will definitely work but will definitely
>> slow
>> down my search by an order of magnitude. The problem I am trying to solve
>> is
>> performance, thats why I need the collection of IDs and not the whole
>> documents.
>>
>> - thanks for the prompt reply.
>>
>>
>> is_maximum wrote:
>> >
>> > yes if you extend your class from HitCollector and override the
>> collect()
>> > mthod with following signature you can get IDs
>> >
>> > public void collect(int id, float score)
>> >
>> > On 8/2/07, makkhar <mkharche@selectica.com> wrote:
>> >>
>> >>
>> >> Hi all,
>> >>
>> >>    Can I get just a list of document Ids given a search criteria ? To
>> >> elaborate here is my situation:
>> >>
>> >> I store 20000 contracts in the file system index each with some
>> >> parameterName and Value. Given a search criterion -
>> (paramValue='draft').
>> >> I
>> >> need to get just an ArrayList of Strings containing contract Ids. I
>> dont
>> >> need the lucene documents, just the Ids.
>> >>
>> >> Can this be done ?
>> >>
>> >> -thanks
>> >>
>> >> --
>> >> View this message in context:
>> >>
>> http://www.nabble.com/Getting-only-the-Ids%2C-not-the-whole-documents.-tf4204907.html#a11960750
>> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>> >
>> > --
>> > Regards,
>> > Mohammad
>> > --------------------------
>> > see my blog: http://brainable.blogspot.com/
>> > another in Persian: http://fekre-motefavet.blogspot.com/
>> >
>> >
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Getting-only-the-Ids%2C-not-the-whole-documents.-tf4204907.html#a11961159
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 
> -- 
> Regards,
> Mohammad
> --------------------------
> see my blog: http://brainable.blogspot.com/
> another in Persian: http://fekre-motefavet.blogspot.com/
> 
> 

-- 
View this message in context: http://www.nabble.com/Getting-only-the-Ids%2C-not-the-whole-documents.-tf4204907.html#a11962465
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 11:10:40 2007
Return-Path: <java-user-return-29582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43973 invoked from network); 2 Aug 2007 11:10:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 11:10:39 -0000
Received: (qmail 22559 invoked by uid 500); 2 Aug 2007 11:10:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22519 invoked by uid 500); 2 Aug 2007 11:10:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22508 invoked by uid 99); 2 Aug 2007 11:10:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 04:10:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 11:10:27 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IGYZC-0004FO-Nx
	for java-user@lucene.apache.org; Thu, 02 Aug 2007 04:10:06 -0700
Message-ID: <11962524.post@talk.nabble.com>
Date: Thu, 2 Aug 2007 04:10:06 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: RE: High CPU usage duing index and search
In-Reply-To: <003501c7d3e3$ca58e990$5f0abcb0$@com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: test1@doramail.com
References: <004201c7d322$69c8bae0$3d5a30a0$@com> <4E0025CD-A1FF-44E4-8322-2A71F9F26332@gmail.com> <003501c7d3e3$ca58e990$5f0abcb0$@com>
X-Virus-Checked: Checked by ClamAV on apache.org


20,000 queries continuously? Sounds a bit too much. Can you elaborate more
what you need to do? Probably you won't need that many queries.



Chew Yee Chuang wrote:
>=20
> Hi,
>=20
> Thanks for the link provided, actually I've go through those article when
> I
> developing the index and search function for my application. I haven=E2=
=80=99t try
> profiler yet, but I monitor the CPU usage and notice that whatever index
> or
> search performing, the CPU usage raise to 100%. Below I will try to
> elaborate more on what my application is doing and how I index and search=
.
>=20
> There are many concurrent process running, first, the application will
> write
> records that received into a text file with tab separated each different
> field. Application will point to a new file every 10mins and start writin=
g
> to it. So every file will contains only 10mins record, approximate 600,00=
0
> records per file. Then, the indexing process will check whether there is =
a
> text file to be index, if it is, the thread will wake up and start perfor=
m
> indexing.
> =20
> The indexing process will first add documents to RAMDir, Then later, add
> RAMDir into FSDir by calling addIndexNoOptimize() when there is 100,000
> documents(32 fields per doc) in RAMDir. There is only 1 IndexWriter(FSDir=
)
> was created but a few IndexWriter(RAMDir) was created during the whole
> process. Below are some configuration for IndexWriters that I mentioned:-
>=20
> IndexWriter (RAMDir)
> - SimpleAnalyzer
> - setMaxBufferedDocs(10000)
> - Filed.Store.YES
> - Field.Index.NO_NORMS
>=20
> IndexWriter (FSDir)
> - SimpleAnalyzer
> - setMergeFactor(20)
> - addIndexesNoOptimize()
>=20
> For the searching, because there are many queries(20,000) run continuousl=
y
> to generate the aggregate table for reporting purpose. All this queries i=
s
> run in nested loop, and there is only 1 Searcher created, I try searcher
> and
> filter as well, filter give me better result, but both also utilize lots
> of
> CPU resources.
>=20
> Hope this info will help and sorry for my bad English.
>=20
> Thanks
> eChuang, Chew
>=20
> -----Original Message-----
> From: karl wettin [mailto:karl.wettin@gmail.com]=20
> Sent: Tuesday, July 31, 2007 5:54 PM
> To: java-user@lucene.apache.org
> Subject: Re: High CPU usage duing index and search
>=20
>=20
> 31 jul 2007 kl. 05.25 skrev Chew Yee Chuang:
>> But just notice that when Lucene performing search or index,
>> the CPU usage on my machine raise to 100%, because of this issue, =20
>> some of my
>> others backend process will slow down eventually. Just want to know =20
>> does
>> anyone face this problem before ? and is it any idea on how to =20
>> overcome this
>> problem ?
>=20
> Did you run a profiler to see what it is that consume all the resources?
> It is very hard to guess based on the information you supplied. Start =20
> here:
>=20
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
> http://wiki.apache.org/lucene-java/ImproveSearchingSpeed
>=20
>=20
> --=20
> karl
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> No virus found in this incoming message.
> Checked by AVG Free Edition.=20
> Version: 7.5.476 / Virus Database: 269.11.0/927 - Release Date: 7/30/2007
> 5:02 PM
> =20
>=20
> No virus found in this outgoing message.
> Checked by AVG Free Edition.=20
> Version: 7.5.476 / Virus Database: 269.11.0/929 - Release Date: 7/31/2007
> 5:26 PM
> =20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/High-CPU-usage-duing-in=
dex-and-search-tf4190756.html#a11962524
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 11:22:08 2007
Return-Path: <java-user-return-29583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48216 invoked from network); 2 Aug 2007 11:22:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 11:22:06 -0000
Received: (qmail 39346 invoked by uid 500); 2 Aug 2007 11:21:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39302 invoked by uid 500); 2 Aug 2007 11:21:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39291 invoked by uid 99); 2 Aug 2007 11:21:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 04:21:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 11:21:30 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IGYkD-0004V9-UN
	for java-user@lucene.apache.org; Thu, 02 Aug 2007 04:21:29 -0700
Message-ID: <11962580.post@talk.nabble.com>
Date: Thu, 2 Aug 2007 04:21:29 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: extracting non-english text from word, pdf, etc....??
In-Reply-To: <921764FE-0113-1000-FE74-856B9C5D860C-Webmail-10021@mac.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
References: <921764FE-0113-1000-FE74-856B9C5D860C-Webmail-10021@mac.com>
X-Virus-Checked: Checked by ClamAV on apache.org


If you can extract token stream from those files already, you can simply use
different analyzers to analyze those token stream appropriately. Check out
Lucen-contrib analyzers at
http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/analyzers/src/java/org/apache/lucene/analysis/



heybluez wrote:
> 
> I know how to do english text with POI and PDFBox and so on.  Now, I want
> to start indexing non-english language such as french and spanish.  Which
> extraction libs are available for me?
> 
> I want to do:
> 
> Excel
> Word
> PowerPoint
> PDF
> HTML
> RTF
> 
> Thanks!
> Michael
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/extracting-non-english-text-from-word%2C-pdf%2C-etc....---tf4198171.html#a11962580
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 11:24:42 2007
Return-Path: <java-user-return-29584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49304 invoked from network); 2 Aug 2007 11:24:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 11:24:41 -0000
Received: (qmail 41540 invoked by uid 500); 2 Aug 2007 11:24:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41496 invoked by uid 500); 2 Aug 2007 11:24:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41485 invoked by uid 99); 2 Aug 2007 11:24:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 04:24:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 11:24:30 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IGYmo-0004Z1-Dz
	for java-user@lucene.apache.org; Thu, 02 Aug 2007 04:24:10 -0700
Message-ID: <11962690.post@talk.nabble.com>
Date: Thu, 2 Aug 2007 04:24:10 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: LUCENE-843 Release
In-Reply-To: <e994873a0707300715i3daf233am999f0f2d4d38eefe@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
References: <11863644.post@talk.nabble.com> <e994873a0707300715i3daf233am999f0f2d4d38eefe@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Mike, as a committer, what do you think?

Thanks!


Peter Keegan wrote:
> 
> I've built a production index with this patch and done some query stress
> testing with no problems.
> I'd give it a thumbs up.
> 
> Peter
> 
> On 7/30/07, testn <test1@doramail.com> wrote:
>>
>>
>> Hi guys,
>>
>> Do you think LUCENE-843 is stable enough? If so, do you think it's worth
>> to
>> release it with probably LUCENE 2.2.1? It would be nice so that people
>> can
>> take the advantage of it right away without risking other breaking
>> changes
>> in the HEAD branch or waiting until 2.3 release.
>>
>> Thanks,
>> --
>> View this message in context:
>> http://www.nabble.com/LUCENE-843-Release-tf4170191.html#a11863644
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/LUCENE-843-Release-tf4170191.html#a11962690
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 12:04:03 2007
Return-Path: <java-user-return-29585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72751 invoked from network); 2 Aug 2007 12:04:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 12:04:02 -0000
Received: (qmail 74314 invoked by uid 500); 2 Aug 2007 12:03:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74269 invoked by uid 500); 2 Aug 2007 12:03:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74257 invoked by uid 99); 2 Aug 2007 12:03:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 05:03:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 12:03:50 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IGZOs-0005ct-8V
	for java-user@lucene.apache.org; Thu, 02 Aug 2007 05:03:30 -0700
Message-ID: <11963213.post@talk.nabble.com>
Date: Thu, 2 Aug 2007 05:03:30 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: Solr's NumberUtils doesnt work
In-Reply-To: <34b8543c0708012322w282e6196yac062f8e34d8302e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
References: <34b8543c0708012322w282e6196yac062f8e34d8302e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


How did you encode your integer into String? Did you use int2sortableStr?



is_maximum wrote:
> 
> Hi
> I am using NumberUtils to encode and decode numbers while indexing and
> searching, when I am going to decode the number retrieved from an index it
> throws exception for some fields
> the exception message is:
> 
> Caused by: java.lang.StringIndexOutOfBoundsException: String index out of
> range: 1
>     at java.lang.String.charAt(Unknown Source)
>     at org.apache.solr.util.NumberUtils.SortableStr2int(NumberUtils.java
> :125)
>     at
> org.apache.solr.util.NumberUtils.SortableStr2int(NumberUtils.java:37)
>     at com.payvand.lucene.util.ExtendedNumberUtils.decodeInteger(
> ExtendedNumberUtils.java:123)
> 
> 
> I dont know why this happen, I am wondering if it has something to do with
> character encoding. have you had such problem?
> 
> thanks
> 
> -- 
> Regards,
> Mohammad Norouzi
> --------------------------
> see my blog: http://brainable.blogspot.com/
> another in Persian: http://fekre-motefavet.blogspot.com/
> 
> 

-- 
View this message in context: http://www.nabble.com/Solr%27s-NumberUtils-doesnt-work-tf4204371.html#a11963213
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 12:06:09 2007
Return-Path: <java-user-return-29586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74133 invoked from network); 2 Aug 2007 12:06:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 12:06:08 -0000
Received: (qmail 76787 invoked by uid 500); 2 Aug 2007 12:06:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76744 invoked by uid 500); 2 Aug 2007 12:06:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76733 invoked by uid 99); 2 Aug 2007 12:06:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 05:06:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 12:05:34 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 00285BA40
	for <java-user@lucene.apache.org>; Thu,  2 Aug 2007 08:05:33 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Thu, 02 Aug 2007 08:05:34 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id D4B521790E; Thu,  2 Aug 2007 08:05:33 -0400 (EDT)
Message-Id: <1186056333.21117.1203377401@webmail.messagingengine.com>
X-Sasl-Enc: yKF2FZjgXZAP6/ZbZLWXc1mPEYBUV+0/I7+Vxfz3nYt8 1186056333
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <11863644.post@talk.nabble.com>
   <e994873a0707300715i3daf233am999f0f2d4d38eefe@mail.gmail.com>
   <11962690.post@talk.nabble.com>
Subject: Re: LUCENE-843 Release
In-Reply-To: <11962690.post@talk.nabble.com>
Date: Thu, 02 Aug 2007 08:05:33 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


Honestly I don't really think this is a good idea.

While LUCENE-843 has proven stable so far (knock on wood!), it is
still a major change and I do worry (less with time :) that maybe I
broke something subtle somewhere.

While a few brave people have tested the trunk in their production
worlds and seen good performance gains, that testing is still limited
compared to a real release.

A point release (2.4.1) really is not supposed to contain major
changes, just bug fixes, and so I don't think we should violate that
accepted practice.

I would rather see us finish up 2.3 and release it, and going forwards
do more frequent releases, instead of porting big changes back onto
point releases.

Mike

"testn" <test1@doramail.com> wrote:
> 
> Mike, as a committer, what do you think?
> 
> Thanks!
> 
> 
> Peter Keegan wrote:
> > 
> > I've built a production index with this patch and done some query stress
> > testing with no problems.
> > I'd give it a thumbs up.
> > 
> > Peter
> > 
> > On 7/30/07, testn <test1@doramail.com> wrote:
> >>
> >>
> >> Hi guys,
> >>
> >> Do you think LUCENE-843 is stable enough? If so, do you think it's worth
> >> to
> >> release it with probably LUCENE 2.2.1? It would be nice so that people
> >> can
> >> take the advantage of it right away without risking other breaking
> >> changes
> >> in the HEAD branch or waiting until 2.3 release.
> >>
> >> Thanks,
> >> --
> >> View this message in context:
> >> http://www.nabble.com/LUCENE-843-Release-tf4170191.html#a11863644
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> > 
> > 
> 
> -- 
> View this message in context:
> http://www.nabble.com/LUCENE-843-Release-tf4170191.html#a11962690
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 12:23:23 2007
Return-Path: <java-user-return-29587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83889 invoked from network); 2 Aug 2007 12:23:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 12:23:22 -0000
Received: (qmail 16260 invoked by uid 500); 2 Aug 2007 12:23:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16030 invoked by uid 500); 2 Aug 2007 12:23:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16019 invoked by uid 99); 2 Aug 2007 12:23:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 05:23:16 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a2.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 12:23:10 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a2.g.dreamhost.com (Postfix) with ESMTP id AEF7F87E50
	for <java-user@lucene.apache.org>; Thu,  2 Aug 2007 05:22:49 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <b0ba206a0708012332h5613f61chec923f20d4083be6@mail.gmail.com>
References: <b0ba206a0708012332h5613f61chec923f20d4083be6@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0F934C02-F48C-4B49-A2F2-52FAA4FDE559@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Using Nutch APIs in Lucene
Date: Thu, 2 Aug 2007 08:22:46 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Just use Nutch.  If you look in the Crawl.java class in Nutch, you  
can pretty easily tear out the appropriate pieces.  Question is, do  
you really need all of that?  If so, why not just use Nutch?

-Grant

On Aug 2, 2007, at 2:32 AM, Srinivasarao Vundavalli wrote:

> How can we use nutch APIs in Lucene? For example using  
> FetchedSegments , we
> can get ParseText from which we can
> get the content of the document. So can we use these classes
> (FetchedSegments, ParseText ) in lucene. If so, how to use them?
> Thank You

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 12:45:39 2007
Return-Path: <java-user-return-29588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90900 invoked from network); 2 Aug 2007 12:45:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 12:45:38 -0000
Received: (qmail 54865 invoked by uid 500); 2 Aug 2007 12:45:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54558 invoked by uid 500); 2 Aug 2007 12:45:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54547 invoked by uid 99); 2 Aug 2007 12:45:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 05:45:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 12:45:26 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IGa37-0006eF-GY
	for java-user@lucene.apache.org; Thu, 02 Aug 2007 05:45:05 -0700
Message-ID: <11963778.post@talk.nabble.com>
Date: Thu, 2 Aug 2007 05:45:05 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: LUCENE-843 Release
In-Reply-To: <1186056333.21117.1203377401@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
References: <11863644.post@talk.nabble.com> <e994873a0707300715i3daf233am999f0f2d4d38eefe@mail.gmail.com> <11962690.post@talk.nabble.com> <1186056333.21117.1203377401@webmail.messagingengine.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks! Will look forward to 2.3 then.


Michael McCandless-2 wrote:
> 
> 
> Honestly I don't really think this is a good idea.
> 
> While LUCENE-843 has proven stable so far (knock on wood!), it is
> still a major change and I do worry (less with time :) that maybe I
> broke something subtle somewhere.
> 
> While a few brave people have tested the trunk in their production
> worlds and seen good performance gains, that testing is still limited
> compared to a real release.
> 
> A point release (2.4.1) really is not supposed to contain major
> changes, just bug fixes, and so I don't think we should violate that
> accepted practice.
> 
> I would rather see us finish up 2.3 and release it, and going forwards
> do more frequent releases, instead of porting big changes back onto
> point releases.
> 
> Mike
> 
> "testn" <test1@doramail.com> wrote:
>> 
>> Mike, as a committer, what do you think?
>> 
>> Thanks!
>> 
>> 
>> Peter Keegan wrote:
>> > 
>> > I've built a production index with this patch and done some query
>> stress
>> > testing with no problems.
>> > I'd give it a thumbs up.
>> > 
>> > Peter
>> > 
>> > On 7/30/07, testn <test1@doramail.com> wrote:
>> >>
>> >>
>> >> Hi guys,
>> >>
>> >> Do you think LUCENE-843 is stable enough? If so, do you think it's
>> worth
>> >> to
>> >> release it with probably LUCENE 2.2.1? It would be nice so that people
>> >> can
>> >> take the advantage of it right away without risking other breaking
>> >> changes
>> >> in the HEAD branch or waiting until 2.3 release.
>> >>
>> >> Thanks,
>> >> --
>> >> View this message in context:
>> >> http://www.nabble.com/LUCENE-843-Release-tf4170191.html#a11863644
>> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> > 
>> > 
>> 
>> -- 
>> View this message in context:
>> http://www.nabble.com/LUCENE-843-Release-tf4170191.html#a11962690
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/LUCENE-843-Release-tf4170191.html#a11963778
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 12:59:41 2007
Return-Path: <java-user-return-29589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94604 invoked from network); 2 Aug 2007 12:59:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 12:59:41 -0000
Received: (qmail 72554 invoked by uid 500); 2 Aug 2007 12:59:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72523 invoked by uid 500); 2 Aug 2007 12:59:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72511 invoked by uid 99); 2 Aug 2007 12:59:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 05:59:34 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [17.250.248.172] (HELO smtpout.mac.com) (17.250.248.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 12:59:30 +0000
Received: from mac.com (smtpin03-en2 [10.13.10.148])
	by smtpout.mac.com (Xserve/smtpout02/MantshX 4.0) with ESMTP id l72Cx9hD002875
	for <java-user@lucene.apache.org>; Thu, 2 Aug 2007 05:59:09 -0700 (PDT)
Received: from [192.168.1.100] (216-12-26-89.va.mvl.ntelos.net [216.12.26.89])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin03/MantshX 4.0) with ESMTP id l72Cx7uO016203
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Thu, 2 Aug 2007 05:59:08 -0700 (PDT)
Message-ID: <46B1D51A.3000702@mac.com>
Date: Thu, 02 Aug 2007 08:59:06 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Thunderbird 1.5.0.12 (Windows/20070509)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: extracting non-english text from word, pdf, etc....??
References: <921764FE-0113-1000-FE74-856B9C5D860C-Webmail-10021@mac.com> <11962580.post@talk.nabble.com>
In-Reply-To: <11962580.post@talk.nabble.com>
Content-Type: multipart/alternative;
 boundary="------------030602090802070308020002"
X-Brightmail-Tracker: AAAAAA==
X-Brightmail-scanned: yes
X-Virus-Checked: Checked by ClamAV on apache.org

--------------030602090802070308020002
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Yea, I have seen those.  I guess the question is what do you all use to 
extract text from Word, Excel, PPT and PDF?  Can I use POI, PDFBox and 
so on?  This is what I use now to extract english.

Thanks,
Michael

testn wrote:
> If you can extract token stream from those files already, you can simply use
> different analyzers to analyze those token stream appropriately. Check out
> Lucen-contrib analyzers at
> http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/analyzers/src/java/org/apache/lucene/analysis/
>
>
>
> heybluez wrote:
>   
>> I know how to do english text with POI and PDFBox and so on.  Now, I want
>> to start indexing non-english language such as french and spanish.  Which
>> extraction libs are available for me?
>>
>> I want to do:
>>
>> Excel
>> Word
>> PowerPoint
>> PDF
>> HTML
>> RTF
>>
>> Thanks!
>> Michael
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>     
>
>   


--------------030602090802070308020002--

From java-user-return-29590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 12:59:59 2007
Return-Path: <java-user-return-29590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94794 invoked from network); 2 Aug 2007 12:59:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 12:59:58 -0000
Received: (qmail 74770 invoked by uid 500); 2 Aug 2007 12:59:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74744 invoked by uid 500); 2 Aug 2007 12:59:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74733 invoked by uid 99); 2 Aug 2007 12:59:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 05:59:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.185 as permitted sender)
Received: from [209.85.134.185] (HELO mu-out-0910.google.com) (209.85.134.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 12:59:45 +0000
Received: by mu-out-0910.google.com with SMTP id g7so507714muf
        for <java-user@lucene.apache.org>; Thu, 02 Aug 2007 05:59:24 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pNbF4nIMwGzTE3p6Lz4SJKwuvZ9CYgZIIOhlbVmY2GBhaumj4Q7PLRNygtcj6ftdFxoG+TmI6h4WGZNJvxseY0XnLIUeqFPJNhMFD+nJp7WySluTRs+pmfVgUFNxxki+o5mz7pj/U14ryb5Mf3cmNqexZ4n/TqCnprBJcrvCWLo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sxahRlA46ZH0thnT7mUC5rLOWchUX3QUlrdnCtT/Y58Bv4ktI4dMxkXarUI8cYQNKvmmGuhJH7Ebm1ahQbsXhqo4+4MtrWqeGMmkpBF9GjEegF+5PnxZlGhSgp3cB/1HqgSGwRs0gvvL6P97R5sybh+KECe+d3sumoGXfDFzJiE=
Received: by 10.82.183.19 with SMTP id g19mr2369152buf.1186059563866;
        Thu, 02 Aug 2007 05:59:23 -0700 (PDT)
Received: by 10.82.190.14 with HTTP; Thu, 2 Aug 2007 05:59:23 -0700 (PDT)
Message-ID: <359a92830708020559h75190065l35bd2b7da2e8010a@mail.gmail.com>
Date: Thu, 2 Aug 2007 08:59:23 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Do AND + OR Search in Lucene
In-Reply-To: <11962340.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_56375_9202053.1186059563843"
References: <c0c0e1d40708020314n398777d7v19fa698761aa7e1f@mail.gmail.com>
	 <11962340.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_56375_9202053.1186059563843
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Alternatively, construct a parenthesized query that
reflects what you want. If you do, make sure that OR is capitalized,
or make REAL SURE you understand the Lucene syntax and construct
your query with that syntax.

Erick

On 8/2/07, testn <test1@doramail.com> wrote:
>
>
> You can create two queries from two query parser, one with AND and the
> other
> one with OR. After you create both of them, you call setBoost() to give
> different boost level and then join them together using BooleanQuery with
> option BooleanClause.Occur.SHOULD. That should do the trick.
>
>
> askarzaidi wrote:
> >
> > Hey Guys,
> >
> > Quick question:
> >
> > I do this in my code for searching:
> >
> > queryParser.setDefaultOperator(QueryParser.Operator.AND);
> >
> > Lucene is OR by default so I change it to AND for my requirements. Now,
> I
> > have a requirement to do OR as well. I mean while doing AND I'd like to
> > include results from OR too ... but they'll be much lower ranked than
> the
> > AND results.
> >
> > Is there a way to do this ?
> >
> > thanks,
> > AZ
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Do-AND-%2B-OR-Search-in-Lucene-tf4205268.html#a11962340
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_56375_9202053.1186059563843--

From java-user-return-29591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 13:02:02 2007
Return-Path: <java-user-return-29591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95301 invoked from network); 2 Aug 2007 13:02:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 13:02:01 -0000
Received: (qmail 78046 invoked by uid 500); 2 Aug 2007 13:01:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77340 invoked by uid 500); 2 Aug 2007 13:01:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77329 invoked by uid 99); 2 Aug 2007 13:01:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 06:01:54 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ridwanhabbal@hotmail.com designates 65.54.246.205 as permitted sender)
Received: from [65.54.246.205] (HELO bay0-omc3-s5.bay0.hotmail.com) (65.54.246.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 13:01:23 +0000
Received: from BAY105-W11 ([65.54.224.111]) by bay0-omc3-s5.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Thu, 2 Aug 2007 06:01:22 -0700
Message-ID: <BAY105-W1199B1EF55EC969C8EFC32CCE90@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_232d63b3-1130-43b0-931a-a78a7f4571df_"
X-Originating-IP: [216.6.1.34]
From: Ridwan Habbal <ridwanhabbal@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: IndexReader deletes more that expected
Date: Thu, 2 Aug 2007 13:01:22 +0000
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 02 Aug 2007 13:01:22.0353 (UTC) FILETIME=[39BC1A10:01C7D505]
X-Virus-Checked: Checked by ClamAV on apache.org

--_232d63b3-1130-43b0-931a-a78a7f4571df_
Content-Type: text/plain; charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable

Yes, you are right, thanks for the great reply! I skimmed it so quickly tod=
ay, so re-read it now, and got the point you mean. I just tried Lucene 2.2.=
0 (I was using 2.0.0) and i could do add, delete and update docs so smoothl=
y! Based on my tests i did so far, similar to tests I presented in my first=
 email, that i don't have to worry who added and who deleted, and i can get=
 rid of Synchronized java methods ant lead to so slow app performance.=20
=20
I kept maintaining only one open instance of indexWrtier for the whole app.=
 As i stated b4, i suffered of having lock exception. I use flush() instead=
 of close(). In contrast, I create new IndexSearcher instance every time i =
search. I dislike to open and close then reopen the index searcher over and=
 over. I don't use Indexreader directly anymore, since i do have to use it =
indirectly using IndexSearcher. I won't try IndexModifier since you told me=
 that IndexWriter in 2.2.0 is much better.=20
Do you think i'm doing good this way i use IndexWriter (one instance for th=
e whole app)?
=20
One thing still remaining pending, however I need compass guys for it, is t=
hat they do use the new version of lucene or not yet.. i will check with th=
em anyways. I can't have two different versions of jars for the same classe=
s in same package.=20
=20
Final question, I still haven't seen Solr in details, but is it strongly re=
commended to use it when i have webapps?=20
=20
please write back!=20
=20
cya
=20
Rid







> Date: Wed, 1 Aug 2007 13:14:04 -0400> From: markrmiller@gmail.com> To: ja=
va-user@lucene.apache.org> Subject: Re: IndexReader deletes more that expec=
ted> On 8/1/07, Ridwan Habbal <ridwanhabbal@hotmail.com> wrote:>>  but what=
 about runing it on mutiThread app like web application?  There> you are th=
e code:  If you are targeting a multi threaded webapp than I strongly sugge=
st youlook into using either Solr or the LuceneIndexAccessor code. You will=
 wantto use some form of reference counting to manage your Readers and Writ=
ers. Also, you can now use IndexWriter (Lucene 2.0 and greater I think) tod=
elete. This allows for efficient mixing of deletes and adds by bufferingthe=
 deletes, and then opening an IndexReader to commit them later. This ismuch=
 more efficient than IndexModifier. - Mark
_________________________________________________________________
PC Magazine=92s 2007 editors=92 choice for best web mail=97award-winning Wi=
ndows Live Hotmail.
http://imagine-windowslive.com/hotmail/?locale=3Den-us&ocid=3DTXT_TAGHM_mig=
ration_HMWL_mini_pcmag_0707=

--_232d63b3-1130-43b0-931a-a78a7f4571df_--

From java-user-return-29592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 13:23:14 2007
Return-Path: <java-user-return-29592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8133 invoked from network); 2 Aug 2007 13:23:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 13:23:14 -0000
Received: (qmail 19019 invoked by uid 500); 2 Aug 2007 13:23:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18992 invoked by uid 500); 2 Aug 2007 13:23:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18981 invoked by uid 99); 2 Aug 2007 13:23:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 06:23:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 13:22:39 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IGadT-0007xR-2t
	for java-user@lucene.apache.org; Thu, 02 Aug 2007 06:22:39 -0700
Message-ID: <11964422.post@talk.nabble.com>
Date: Thu, 2 Aug 2007 06:22:39 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: extracting non-english text from word, pdf, etc....??
In-Reply-To: <46B1D51A.3000702@mac.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
References: <921764FE-0113-1000-FE74-856B9C5D860C-Webmail-10021@mac.com> <11962580.post@talk.nabble.com> <46B1D51A.3000702@mac.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Check out..
http://wiki.apache.org/lucene-java/LuceneFAQ#head-e7d23f91df094d7baeceb46b04d518dc426d7d2e



heybluez wrote:
> 
> Yea, I have seen those.  I guess the question is what do you all use to 
> extract text from Word, Excel, PPT and PDF?  Can I use POI, PDFBox and 
> so on?  This is what I use now to extract english.
> 
> Thanks,
> Michael
> 
> testn wrote:
>> If you can extract token stream from those files already, you can simply
>> use
>> different analyzers to analyze those token stream appropriately. Check
>> out
>> Lucen-contrib analyzers at
>> http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/analyzers/src/java/org/apache/lucene/analysis/
>>
>>
>>
>> heybluez wrote:
>>   
>>> I know how to do english text with POI and PDFBox and so on.  Now, I
>>> want
>>> to start indexing non-english language such as french and spanish. 
>>> Which
>>> extraction libs are available for me?
>>>
>>> I want to do:
>>>
>>> Excel
>>> Word
>>> PowerPoint
>>> PDF
>>> HTML
>>> RTF
>>>
>>> Thanks!
>>> Michael
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>     
>>
>>   
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/extracting-non-english-text-from-word%2C-pdf%2C-etc....---tf4198171.html#a11964422
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 14:19:03 2007
Return-Path: <java-user-return-29593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27354 invoked from network); 2 Aug 2007 14:19:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 14:19:03 -0000
Received: (qmail 43196 invoked by uid 500); 2 Aug 2007 14:18:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43163 invoked by uid 500); 2 Aug 2007 14:18:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43146 invoked by uid 99); 2 Aug 2007 14:18:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 07:18:57 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a15.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 14:18:27 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a15.dreamhost.com (Postfix) with ESMTP id C515E7F01E
	for <java-user@lucene.apache.org>; Thu,  2 Aug 2007 07:18:25 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <46B1D51A.3000702@mac.com>
References: <921764FE-0113-1000-FE74-856B9C5D860C-Webmail-10021@mac.com> <11962580.post@talk.nabble.com> <46B1D51A.3000702@mac.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <AE0ECCC6-611B-4E79-8096-09BC337DA925@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: extracting non-english text from word, pdf, etc....??
Date: Thu, 2 Aug 2007 10:18:22 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hey Michael,

Have you given it a try?  I would think they would work, but haven't  
actually done it.   Setup a small test that reads in a PDF in French  
or Spanish and give it a try.  You might have to worry about  
encodings or something, but the structure of the files should be the  
same, i.e. they are valid Word, etc. documents.

-Grant

On Aug 2, 2007, at 8:59 AM, Michael J. Prichard wrote:

> Yea, I have seen those.  I guess the question is what do you all  
> use to extract text from Word, Excel, PPT and PDF?  Can I use POI,  
> PDFBox and so on?  This is what I use now to extract english.
>
> Thanks,
> Michael
>
> testn wrote:
>> If you can extract token stream from those files already, you can  
>> simply use
>> different analyzers to analyze those token stream appropriately.  
>> Check out
>> Lucen-contrib analyzers at
>> http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/ 
>> analyzers/src/java/org/apache/lucene/analysis/
>>
>>
>>
>> heybluez wrote:
>>
>>> I know how to do english text with POI and PDFBox and so on.   
>>> Now, I want
>>> to start indexing non-english language such as french and  
>>> spanish.  Which
>>> extraction libs are available for me?
>>>
>>> I want to do:
>>>
>>> Excel
>>> Word
>>> PowerPoint
>>> PDF
>>> HTML
>>> RTF
>>>
>>> Thanks!
>>> Michael
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>
>>
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 14:47:16 2007
Return-Path: <java-user-return-29594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36208 invoked from network); 2 Aug 2007 14:47:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 14:47:15 -0000
Received: (qmail 5703 invoked by uid 500); 2 Aug 2007 14:47:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5664 invoked by uid 500); 2 Aug 2007 14:47:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5652 invoked by uid 99); 2 Aug 2007 14:47:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 07:47:09 -0700
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=MIME_QP_LONG_LINE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [64.128.80.6] (HELO yorktown.networkredux.net) (64.128.80.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 14:46:39 +0000
Received: from [127.0.0.1] (helo=localhost)
	by yorktown.networkredux.net with esmtpa (Exim 4.63)
	(envelope-from <ben@benlitchfield.com>)
	id 1IGbwo-0004PD-3u
	for java-user@lucene.apache.org; Thu, 02 Aug 2007 07:46:42 -0700
Received: from 129.21.60.26 ([129.21.60.26]) by localhost (Horde MIME
	library) with HTTP; Thu, 02 Aug 2007 10:46:41 -0400
Message-ID: <20070802104641.8sg625sfy8og00w0@localhost>
Date: Thu, 02 Aug 2007 10:46:41 -0400
From: Ben Litchfield <ben@benlitchfield.com>
To: java-user@lucene.apache.org
Subject: Re: extracting non-english text from word, pdf, etc....??
References: <921764FE-0113-1000-FE74-856B9C5D860C-Webmail-10021@mac.com>
	<11962580.post@talk.nabble.com> <46B1D51A.3000702@mac.com>
	<AE0ECCC6-611B-4E79-8096-09BC337DA925@apache.org>
In-Reply-To: <AE0ECCC6-611B-4E79-8096-09BC337DA925@apache.org>
MIME-Version: 1.0
Content-Type: text/plain;
	charset=ISO-8859-1;
	DelSp="Yes";
	format="flowed"
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable
User-Agent: Internet Messaging Program (IMP) H3 (4.1.3)
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - yorktown.networkredux.net
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - benlitchfield.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org

In terms of PDF documents...

PDFBox should work just fine with any latin based languages; at this =20
time certain PDFs that have CJK characters can pose some issues.  In =20
general english/french/spanish should be fine.

Some PDFs use custom encodings that make it impossible to extract text =20
and it comes out as gibberish.  As a simple test if Acrobat can =20
extract the text then PDFBox should be able to as well.

Ben


Quoting Grant Ingersoll <gsingers@apache.org>:

> Hey Michael,
>
> Have you given it a try?  I would think they would work, but haven't
> actually done it.   Setup a small test that reads in a PDF in French or
> Spanish and give it a try.  You might have to worry about encodings or
> something, but the structure of the files should be the same, i.e. they
> are valid Word, etc. documents.
>
> -Grant
>
> On Aug 2, 2007, at 8:59 AM, Michael J. Prichard wrote:
>
>> Yea, I have seen those.  I guess the question is what do you all  =20
>> use to extract text from Word, Excel, PPT and PDF?  Can I use POI,  =20
>> PDFBox and so on?  This is what I use now to extract english.
>>
>> Thanks,
>> Michael
>>
>> testn wrote:
>>> If you can extract token stream from those files already, you can  =20
>>> simply use
>>> different analyzers to analyze those token stream appropriately. Check o=
ut
>>> Lucen-contrib analyzers at
>>> http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/analyzers/src/=
java/org/apache/lucene/analysis/
>>>
>>>
>>>
>>> heybluez wrote:
>>>
>>>> I know how to do english text with POI and PDFBox and so on.  Now, I wa=
nt
>>>> to start indexing non-english language such as french and spanish.  Whi=
ch
>>>> extraction libs are available for me?
>>>>
>>>> I want to do:
>>>>
>>>> Excel
>>>> Word
>>>> PowerPoint
>>>> PDF
>>>> HTML
>>>> RTF
>>>>
>>>> Thanks!
>>>> Michael
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>>
>>>
>>
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 14:53:01 2007
Return-Path: <java-user-return-29595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37930 invoked from network); 2 Aug 2007 14:52:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 14:52:59 -0000
Received: (qmail 17978 invoked by uid 500); 2 Aug 2007 14:52:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17938 invoked by uid 500); 2 Aug 2007 14:52:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17923 invoked by uid 99); 2 Aug 2007 14:52:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 07:52:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.15.214.217] (HELO email.hannonhill.com) (69.15.214.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 14:52:29 +0000
Received: by email.hannonhill.com (Postfix, from userid 543)
	id 48E4B632861B; Thu,  2 Aug 2007 10:52:26 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on 
	files.hannonhill.com
X-Spam-Level: 
Received: from [10.0.1.156] (unknown [10.0.1.156])
	by email.hannonhill.com (Postfix) with ESMTP id 0EA9E6328594
	for <java-user@lucene.apache.org>; Thu,  2 Aug 2007 10:52:26 -0400 (EDT)
Message-ID: <46B1EF1D.4040900@hannonhill.com>
Date: Thu, 02 Aug 2007 10:50:05 -0400
From: Zach Bailey <zach.bailey@hannonhill.com>
Organization: Hannon Hill
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Clustered Indexing on common network filesystem
References: <46AF61DD.4050704@hannonhill.com>
In-Reply-To: <46AF61DD.4050704@hannonhill.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.4 required=4.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.1.0

Hi,

It's been a couple of days now and I haven't heard anything on this 
topic, while there has been substantial list traffic otherwise.

Am I asking in the wrong place? Was I unclear?

I know there are people out there that have used/are using Lucene in a 
clustered environment. I am just looking for any sort of feedback 
(general or specific) about clustering lucene as well as filesystem 
compatibility (windows shares, NFS, etc.).

Thanks again,
-Zach

Zach Bailey wrote:
> Hello all,
> 
> First a little background - we are developing a clustered application 
> that will in part leverage Lucene to provide index and search 
> capabilities. We have already spent time investigating various index 
> storage implementations (database vs. filesystem) and we've decided for 
> performance reasons to go with a filesystem index storage scheme.
> 
> That said, I have read back through the archives a bit and noticed that 
> the support for index storage on NFS is still experimental (e.g. the 
> latest bugfixes have not made it out to an official, stable release). I 
> realize most of the issues related to using a shared file system revolve 
> around locking, and I haven't seen much about the maturity of locking 
> for other network filesystems.
> 
> I was wondering if anyone has tried any other networked filesystems or 
> had any recommendations. We have clients who would be doing this on both 
> Windows and Unix/Linux so any insight there would be appreciated as well 
> - it can be assumed that across any cluster the operating system use 
> would be homogeneous (i.e. all nodes are on windows and would use 
> windows shares, or all nodes are on linux and would use xyz filesystem).
> 
> Thanks in advance,
> -Zach Bailey
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 15:13:13 2007
Return-Path: <java-user-return-29596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66350 invoked from network); 2 Aug 2007 15:13:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 15:13:13 -0000
Received: (qmail 61214 invoked by uid 500); 2 Aug 2007 15:13:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61184 invoked by uid 500); 2 Aug 2007 15:13:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61173 invoked by uid 99); 2 Aug 2007 15:13:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 08:13:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 15:12:39 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IGcLu-00035d-6p
	for java-user@lucene.apache.org; Thu, 02 Aug 2007 08:12:38 -0700
Message-ID: <11966423.post@talk.nabble.com>
Date: Thu, 2 Aug 2007 08:12:38 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: Clustered Indexing on common network filesystem
In-Reply-To: <46B1EF1D.4040900@hannonhill.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
References: <46AF61DD.4050704@hannonhill.com> <46B1EF1D.4040900@hannonhill.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Why don't you check out Hadoop and Nutch? It should provide what you are
looking for.


Zach Bailey wrote:
> 
> Hi,
> 
> It's been a couple of days now and I haven't heard anything on this 
> topic, while there has been substantial list traffic otherwise.
> 
> Am I asking in the wrong place? Was I unclear?
> 
> I know there are people out there that have used/are using Lucene in a 
> clustered environment. I am just looking for any sort of feedback 
> (general or specific) about clustering lucene as well as filesystem 
> compatibility (windows shares, NFS, etc.).
> 
> Thanks again,
> -Zach
> 
> Zach Bailey wrote:
>> Hello all,
>> 
>> First a little background - we are developing a clustered application 
>> that will in part leverage Lucene to provide index and search 
>> capabilities. We have already spent time investigating various index 
>> storage implementations (database vs. filesystem) and we've decided for 
>> performance reasons to go with a filesystem index storage scheme.
>> 
>> That said, I have read back through the archives a bit and noticed that 
>> the support for index storage on NFS is still experimental (e.g. the 
>> latest bugfixes have not made it out to an official, stable release). I 
>> realize most of the issues related to using a shared file system revolve 
>> around locking, and I haven't seen much about the maturity of locking 
>> for other network filesystems.
>> 
>> I was wondering if anyone has tried any other networked filesystems or 
>> had any recommendations. We have clients who would be doing this on both 
>> Windows and Unix/Linux so any insight there would be appreciated as well 
>> - it can be assumed that across any cluster the operating system use 
>> would be homogeneous (i.e. all nodes are on windows and would use 
>> windows shares, or all nodes are on linux and would use xyz filesystem).
>> 
>> Thanks in advance,
>> -Zach Bailey
>> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Clustered-Indexing-on-common-network-filesystem-tf4194135.html#a11966423
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 15:24:54 2007
Return-Path: <java-user-return-29597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89973 invoked from network); 2 Aug 2007 15:24:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 15:24:53 -0000
Received: (qmail 85477 invoked by uid 500); 2 Aug 2007 15:24:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85446 invoked by uid 500); 2 Aug 2007 15:24:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85435 invoked by uid 99); 2 Aug 2007 15:24:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 08:24:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.36.200] (HELO web53805.mail.re2.yahoo.com) (206.190.36.200)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 02 Aug 2007 15:24:40 +0000
Received: (qmail 36485 invoked by uid 60001); 2 Aug 2007 15:24:18 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=Ay93hb7lOMVopB/tn5hykh1nvz8EgVleuP8ya3ffSR8TbYdR8wHozCQPvVlDQ5WpfnCHXhZoRb0+HYOqnn14AoN0k9YSV3qXQVyjDxc9n7tCF8HcWmFf7/CK4Hswj3eXVeFyXzXNo3RYr+01I1xA5o/S6NUYglZ8lyC/ttX8WbI=;
X-YMail-OSG: ia.BrrUVM1lhYHKk_Xx0.D6JvbsR4BvkAly2EY0K7Vmc693AJUdxs0REW_VhtVllIT.RSg.N0akpfuYHSMCpyIiG38l2VK5M1m_tt5lRbWwzXlK2moxyThfzfEFAJA--
Received: from [65.209.72.226] by web53805.mail.re2.yahoo.com via HTTP; Thu, 02 Aug 2007 08:24:18 PDT
Date: Thu, 2 Aug 2007 08:24:18 -0700 (PDT)
From: Joe R <vinnyjojo@yahoo.com>
Subject: How do YOU detect corrupt indexes?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <879194.35448.qm@web53805.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,

I've been asked to devise some way to discover and correct data in Lucene
indexes that have been "corrupted."  The word "corrupt", in this case, has a
few different meanings, some of which strike me as exceedingly difficult to
grok.  What concerns me are the cases where we don't know that an index has
been changed:  A bit error in a stored field, for instance, is a form of
corruption that we (ideally) should be able to identify, at the very least, and
hopefully correct.  This case in particular seems particularly onerous, since
this isn't going to throw an exception of any sort, any time.

We have a fairly good handle on how to remedy problems that throw exceptions,
so we should be alright with corruption where (say) an operator logs in and
overwrites a file.

I'm wondering how other Lucene users have tackled this problem in the past. 
Calculating checksums on the documents seems like one way to go about it:
compute a checksum on the document and, in a background thread, compare the
checksum to the data.  Unfortunately we're building a large, federated system
and it would take months to exhaustively check every document this way. 
Checksumming the files themselves might be too much: We're storing gigabytes of
data per index and there is some churn to the data; in other words, the
overhead for this method might be too high.

Thanks for any help you might have.


-Joseph Rose



       
____________________________________________________________________________________
Sick sense of humor? Visit Yahoo! TV's 
Comedy with an Edge to see what's on, when. 
http://tv.yahoo.com/collections/222

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 15:36:32 2007
Return-Path: <java-user-return-29598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10842 invoked from network); 2 Aug 2007 15:36:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 15:36:31 -0000
Received: (qmail 10819 invoked by uid 500); 2 Aug 2007 15:36:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10791 invoked by uid 500); 2 Aug 2007 15:36:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10780 invoked by uid 99); 2 Aug 2007 15:36:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 08:36:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.15.214.217] (HELO email.hannonhill.com) (69.15.214.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 15:36:00 +0000
Received: by email.hannonhill.com (Postfix, from userid 543)
	id 88E17632861B; Thu,  2 Aug 2007 11:35:59 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on 
	files.hannonhill.com
X-Spam-Level: 
Received: from [10.0.1.156] (unknown [10.0.1.156])
	by email.hannonhill.com (Postfix) with ESMTP id 45B20632857A
	for <java-user@lucene.apache.org>; Thu,  2 Aug 2007 11:35:59 -0400 (EDT)
Message-ID: <46B1F952.7080403@hannonhill.com>
Date: Thu, 02 Aug 2007 11:33:38 -0400
From: Zach Bailey <zach.bailey@hannonhill.com>
Organization: Hannon Hill
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Clustered Indexing on common network filesystem
References: <46AF61DD.4050704@hannonhill.com> <46B1EF1D.4040900@hannonhill.com> <11966423.post@talk.nabble.com>
In-Reply-To: <11966423.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.4 required=4.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.1.0

Thanks for your response --

Based on my understanding, hadoop and nutch are essentially the same 
thing, with nutch being derived from hadoop, and are primarily intended 
to be standalone applications.

We are not looking for a standalone application, rather we must use a 
framework to implement search inside our current content management 
application. Currently the application search functionality is designed 
and built around Lucene, so migrating frameworks at this point is not 
feasible.

We are currently re-working our back-end to support clustering (in 
tomcat) and we are looking for information on the migration of Lucene 
from a single node filesystem index (which is what we use now and hope 
to continue to use for clients with a single-node deployment) to a 
shared filesystem index on a mounted network share.

We prefer to use this strategy because it means we do not have to have 
two disparate methods of managing indexes for clients who run in a 
single-node, non-clustered environment versus clients who run in a 
multiple-node, clustered environment.

So, hopefully here are some easy questions someone could shed some light on:

Is this not a recommended method of managing indexes across multiple nodes?

At this point would people recommend storing an individual index on each 
node and propagating index updates via a JMS framework rather than 
attempting to handle it transparently with a single shared index?

Is the Lucene index code so intimately tied to filesystem semantics that 
using a shared/networked file system is infeasible at this point in time?

What would be the quickest time-to-implementation of these strategies 
(JMS vs. shared FS)? The most robust/least error-prone?

I really appreciate any insight or response anyone can provide, even if 
it is a short answer to any of the related topics, "i.e. we implemented 
clustered search using per-node indexing with JMS update propagation and 
it works great", or even something as simple as "don't use a shared 
filesystem at this point".

Cheers,
-Zach

testn wrote:
> Why don't you check out Hadoop and Nutch? It should provide what you are
> looking for.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 15:46:35 2007
Return-Path: <java-user-return-29599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31700 invoked from network); 2 Aug 2007 15:46:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 15:46:33 -0000
Received: (qmail 35234 invoked by uid 500); 2 Aug 2007 15:46:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35192 invoked by uid 500); 2 Aug 2007 15:46:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35164 invoked by uid 99); 2 Aug 2007 15:46:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 08:46:21 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.162.181 as permitted sender)
Received: from [209.85.162.181] (HELO el-out-1112.google.com) (209.85.162.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 15:46:14 +0000
Received: by el-out-1112.google.com with SMTP id r27so71088ele
        for <java-user@lucene.apache.org>; Thu, 02 Aug 2007 08:45:53 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=nqoHwWhattiTWe8ue/fIBAnp4kyVsSvq+7nWXakCi8pkKArXiCQnVOOobIYH3QO5ipl7yJAsCAAO1bGRG83hdJd4fZKI6aokAGFkauxN45ccHVf+BV4cb1RcyxFSC12JvTZm9LqZiYDOukGvvKUcgG3quTWP6FeRlXvMbiC5hj4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=T1v4ZfV4T7/QkR0HTi+fPnSPntu6CLYNqoPN6wTmA5QTljTTmMqToP2NOlGrq3PImLPXbxIB2Zup7855ARF0n+WUHCggORiSWO13tJpcC4ZBPGZP6NyU2zstMDWQSA6tVNctF+IqG3FfX3hwqQvIiL5Q70flHjWCNpvPc1jyEeM=
Received: by 10.100.12.18 with SMTP id 18mr1210095anl.1186069553115;
        Thu, 02 Aug 2007 08:45:53 -0700 (PDT)
Received: from ?192.168.1.105? ( [216.66.114.204])
        by mx.google.com with ESMTPS id l48sm2348975wrl.2007.08.02.08.45.50
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 02 Aug 2007 08:45:51 -0700 (PDT)
Message-ID: <46B1FC03.6090607@gmail.com>
Date: Thu, 02 Aug 2007 11:45:07 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.5 (Windows/20070716)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Clustered Indexing on common network filesystem
References: <46AF61DD.4050704@hannonhill.com> <46B1EF1D.4040900@hannonhill.com> <11966423.post@talk.nabble.com> <46B1F952.7080403@hannonhill.com>
In-Reply-To: <46B1F952.7080403@hannonhill.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Some quick info:

NFS should work, but I think youll want to be working off the trunk. 
Also, Sharing an index over NFS is supposed to be slow. The standard so 
far, if you are not partitioning the index, is to use a unix/linux 
filesystem and hardlinks + rsync to efficiently share index changes 
across nodes (hard links for instant copy, rsync to only transfer 
changed index files, search the mailing list). If you look at solr you 
can see scripts that give an example of this. I don't think the scripts 
rely on solr. This kind of setup should be quick and simple to 
implement. Same with NFS. An RMI solution that allowed for index 
partitioning would probably be the longest to do.

-Mark



Zach Bailey wrote:
> Thanks for your response --
>
> Based on my understanding, hadoop and nutch are essentially the same 
> thing, with nutch being derived from hadoop, and are primarily 
> intended to be standalone applications.
>
> We are not looking for a standalone application, rather we must use a 
> framework to implement search inside our current content management 
> application. Currently the application search functionality is 
> designed and built around Lucene, so migrating frameworks at this 
> point is not feasible.
>
> We are currently re-working our back-end to support clustering (in 
> tomcat) and we are looking for information on the migration of Lucene 
> from a single node filesystem index (which is what we use now and hope 
> to continue to use for clients with a single-node deployment) to a 
> shared filesystem index on a mounted network share.
>
> We prefer to use this strategy because it means we do not have to have 
> two disparate methods of managing indexes for clients who run in a 
> single-node, non-clustered environment versus clients who run in a 
> multiple-node, clustered environment.
>
> So, hopefully here are some easy questions someone could shed some 
> light on:
>
> Is this not a recommended method of managing indexes across multiple 
> nodes?
>
> At this point would people recommend storing an individual index on 
> each node and propagating index updates via a JMS framework rather 
> than attempting to handle it transparently with a single shared index?
>
> Is the Lucene index code so intimately tied to filesystem semantics 
> that using a shared/networked file system is infeasible at this point 
> in time?
>
> What would be the quickest time-to-implementation of these strategies 
> (JMS vs. shared FS)? The most robust/least error-prone?
>
> I really appreciate any insight or response anyone can provide, even 
> if it is a short answer to any of the related topics, "i.e. we 
> implemented clustered search using per-node indexing with JMS update 
> propagation and it works great", or even something as simple as "don't 
> use a shared filesystem at this point".
>
> Cheers,
> -Zach
>
> testn wrote:
>> Why don't you check out Hadoop and Nutch? It should provide what you are
>> looking for.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 15:54:33 2007
Return-Path: <java-user-return-29600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46148 invoked from network); 2 Aug 2007 15:54:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 15:54:32 -0000
Received: (qmail 61332 invoked by uid 500); 2 Aug 2007 15:54:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61307 invoked by uid 500); 2 Aug 2007 15:54:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61296 invoked by uid 99); 2 Aug 2007 15:54:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 08:54:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.252] (HELO web52005.mail.re2.yahoo.com) (206.190.49.252)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 02 Aug 2007 15:53:59 +0000
Received: (qmail 76899 invoked by uid 60001); 2 Aug 2007 15:53:58 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=dE+BWy2Ovs9VpDegeN+dZI0yp1yprOmEQQOPoxRiJ8K0vGJm8IxPHpTgseYbqRpj8x2vkfDqVd8gtL2vGvmriWUTCFkJD/V7pZFBWJiPuowfzWKR0N+ONSrgN74EEofmYWpsjoTRv181on5G7i2AQHeO3wIwOn+JGpO6Ce7ngZ8=;
X-YMail-OSG: jwyuYd8VM1l8mDmJadWb0l.kVZ.VjBX1Xq3wb0zvH7oOr3YEbnHrwUGGB1ucv.pD9ZKaMLaej6SGwqMnNSOkUTKyXA--
Received: from [12.162.3.126] by web52005.mail.re2.yahoo.com via HTTP; Thu, 02 Aug 2007 08:53:58 PDT
Date: Thu, 2 Aug 2007 08:53:58 -0700 (PDT)
From: Rajesh parab <rajesh_parab_1@yahoo.com>
Subject: Re: Clustered Indexing on common network filesystem
To: java-user@lucene.apache.org
In-Reply-To: <46B1F952.7080403@hannonhill.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <148883.76636.qm@web52005.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

One more alternative, though I am not sure if anyone
is using it.

Apache Compass has added a plug-in to allow storing
Lucene index files inside the database. This should
work in clustered environment as all nodes will share
the same database instance.

I am not sure the impact it will have on performance.

Is anyone using DB for index storage? Any drawbacks of
this approach?

Regards,
Rajesh

--- Zach Bailey <zach.bailey@hannonhill.com> wrote:

> Thanks for your response --
> 
> Based on my understanding, hadoop and nutch are
> essentially the same 
> thing, with nutch being derived from hadoop, and are
> primarily intended 
> to be standalone applications.
> 
> We are not looking for a standalone application,
> rather we must use a 
> framework to implement search inside our current
> content management 
> application. Currently the application search
> functionality is designed 
> and built around Lucene, so migrating frameworks at
> this point is not 
> feasible.
> 
> We are currently re-working our back-end to support
> clustering (in 
> tomcat) and we are looking for information on the
> migration of Lucene 
> from a single node filesystem index (which is what
> we use now and hope 
> to continue to use for clients with a single-node
> deployment) to a 
> shared filesystem index on a mounted network share.
> 
> We prefer to use this strategy because it means we
> do not have to have 
> two disparate methods of managing indexes for
> clients who run in a 
> single-node, non-clustered environment versus
> clients who run in a 
> multiple-node, clustered environment.
> 
> So, hopefully here are some easy questions someone
> could shed some light on:
> 
> Is this not a recommended method of managing indexes
> across multiple nodes?
> 
> At this point would people recommend storing an
> individual index on each 
> node and propagating index updates via a JMS
> framework rather than 
> attempting to handle it transparently with a single
> shared index?
> 
> Is the Lucene index code so intimately tied to
> filesystem semantics that 
> using a shared/networked file system is infeasible
> at this point in time?
> 
> What would be the quickest time-to-implementation of
> these strategies 
> (JMS vs. shared FS)? The most robust/least
> error-prone?
> 
> I really appreciate any insight or response anyone
> can provide, even if 
> it is a short answer to any of the related topics,
> "i.e. we implemented 
> clustered search using per-node indexing with JMS
> update propagation and 
> it works great", or even something as simple as
> "don't use a shared 
> filesystem at this point".
> 
> Cheers,
> -Zach
> 
> testn wrote:
> > Why don't you check out Hadoop and Nutch? It
> should provide what you are
> > looking for.
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 



       
____________________________________________________________________________________
Building a website is a piece of cake. Yahoo! Small Business gives you all the tools to get online.
http://smallbusiness.yahoo.com/webhosting 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 15:59:40 2007
Return-Path: <java-user-return-29601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56880 invoked from network); 2 Aug 2007 15:59:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 15:59:39 -0000
Received: (qmail 73066 invoked by uid 500); 2 Aug 2007 15:59:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72844 invoked by uid 500); 2 Aug 2007 15:59:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72832 invoked by uid 99); 2 Aug 2007 15:59:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 08:59:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.15.214.217] (HELO email.hannonhill.com) (69.15.214.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 15:59:27 +0000
Received: by email.hannonhill.com (Postfix, from userid 543)
	id 15094632862B; Thu,  2 Aug 2007 11:59:06 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on 
	files.hannonhill.com
X-Spam-Level: 
Received: from [10.0.1.156] (unknown [10.0.1.156])
	by email.hannonhill.com (Postfix) with ESMTP id B71F16328594
	for <java-user@lucene.apache.org>; Thu,  2 Aug 2007 11:59:05 -0400 (EDT)
Message-ID: <46B1FEBC.6000208@hannonhill.com>
Date: Thu, 02 Aug 2007 11:56:44 -0400
From: Zach Bailey <zach.bailey@hannonhill.com>
Organization: Hannon Hill
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Clustered Indexing on common network filesystem
References: <148883.76636.qm@web52005.mail.re2.yahoo.com>
In-Reply-To: <148883.76636.qm@web52005.mail.re2.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.5 required=4.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.1.0

Rajesh,

I forgot to mention this, but we did investigate this option as well and 
even prototyped it for an internal project. It ended up being too slow 
for us.

It was adding a lot of overhead even to small updates, IIRC, mainly due 
to the fact that the index was essentially stored as a filesystem in the 
database. As you can probably imagine, using a database as a filesystem 
is not very performant.

Rajesh parab wrote:
> One more alternative, though I am not sure if anyone
> is using it.
> 
> Apache Compass has added a plug-in to allow storing
> Lucene index files inside the database. This should
> work in clustered environment as all nodes will share
> the same database instance.
> 
> I am not sure the impact it will have on performance.
> 
> Is anyone using DB for index storage? Any drawbacks of
> this approach?
> 
> Regards,
> Rajesh
> 
> --- Zach Bailey <zach.bailey@hannonhill.com> wrote:
> 
>> Thanks for your response --
>>
>> Based on my understanding, hadoop and nutch are
>> essentially the same 
>> thing, with nutch being derived from hadoop, and are
>> primarily intended 
>> to be standalone applications.
>>
>> We are not looking for a standalone application,
>> rather we must use a 
>> framework to implement search inside our current
>> content management 
>> application. Currently the application search
>> functionality is designed 
>> and built around Lucene, so migrating frameworks at
>> this point is not 
>> feasible.
>>
>> We are currently re-working our back-end to support
>> clustering (in 
>> tomcat) and we are looking for information on the
>> migration of Lucene 
>> from a single node filesystem index (which is what
>> we use now and hope 
>> to continue to use for clients with a single-node
>> deployment) to a 
>> shared filesystem index on a mounted network share.
>>
>> We prefer to use this strategy because it means we
>> do not have to have 
>> two disparate methods of managing indexes for
>> clients who run in a 
>> single-node, non-clustered environment versus
>> clients who run in a 
>> multiple-node, clustered environment.
>>
>> So, hopefully here are some easy questions someone
>> could shed some light on:
>>
>> Is this not a recommended method of managing indexes
>> across multiple nodes?
>>
>> At this point would people recommend storing an
>> individual index on each 
>> node and propagating index updates via a JMS
>> framework rather than 
>> attempting to handle it transparently with a single
>> shared index?
>>
>> Is the Lucene index code so intimately tied to
>> filesystem semantics that 
>> using a shared/networked file system is infeasible
>> at this point in time?
>>
>> What would be the quickest time-to-implementation of
>> these strategies 
>> (JMS vs. shared FS)? The most robust/least
>> error-prone?
>>
>> I really appreciate any insight or response anyone
>> can provide, even if 
>> it is a short answer to any of the related topics,
>> "i.e. we implemented 
>> clustered search using per-node indexing with JMS
>> update propagation and 
>> it works great", or even something as simple as
>> "don't use a shared 
>> filesystem at this point".
>>
>> Cheers,
>> -Zach
>>
>> testn wrote:
>>> Why don't you check out Hadoop and Nutch? It
>> should provide what you are
>>> looking for.
>>
> ---------------------------------------------------------------------
>> To unsubscribe, e-mail:
>> java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail:
>> java-user-help@lucene.apache.org
>>
>>
> 
> 
> 
>        
> ____________________________________________________________________________________
> Building a website is a piece of cake. Yahoo! Small Business gives you all the tools to get online.
> http://smallbusiness.yahoo.com/webhosting 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 16:14:01 2007
Return-Path: <java-user-return-29602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70497 invoked from network); 2 Aug 2007 16:14:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 16:14:01 -0000
Received: (qmail 89000 invoked by uid 500); 2 Aug 2007 16:13:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88970 invoked by uid 500); 2 Aug 2007 16:13:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88959 invoked by uid 99); 2 Aug 2007 16:13:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 09:13:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.15.214.217] (HELO email.hannonhill.com) (69.15.214.217)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 16:13:51 +0000
Received: by email.hannonhill.com (Postfix, from userid 543)
	id 6F73863285E7; Thu,  2 Aug 2007 12:13:30 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on 
	files.hannonhill.com
X-Spam-Level: 
Received: from [10.0.1.156] (unknown [10.0.1.156])
	by email.hannonhill.com (Postfix) with ESMTP id 16B93632857A
	for <java-user@lucene.apache.org>; Thu,  2 Aug 2007 12:13:30 -0400 (EDT)
Message-ID: <46B2021D.7070404@hannonhill.com>
Date: Thu, 02 Aug 2007 12:11:09 -0400
From: Zach Bailey <zach.bailey@hannonhill.com>
Organization: Hannon Hill
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Clustered Indexing on common network filesystem
References: <46AF61DD.4050704@hannonhill.com> <46B1EF1D.4040900@hannonhill.com> <11966423.post@talk.nabble.com> <46B1F952.7080403@hannonhill.com> <46B1FC03.6090607@gmail.com>
In-Reply-To: <46B1FC03.6090607@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.5 required=4.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.1.0

Mark,

Thanks so much for your response.

Unfortunately, I am not sure the leader of the project would feel good 
about running code from trunk, save without an explicit endorsement from 
a majority of the developers or contributors for that particular code 
(do those people keep up with this list, anyway?) Is there any word on 
the possible timeframe the code required to work with NFS might be released?

Thanks for your other insight about hardlinks and rsync. I will look 
into that; unfortunately it does not cover our userbase who may be 
clustering in a Windows Server environment. I still have not heard/seen 
any evidence (anecdotal or otherwise) about how well lucene might work 
sharing indexes over a mounted Windows share.

-Zach

Mark Miller wrote:
> Some quick info:
> 
> NFS should work, but I think youll want to be working off the trunk. 
> Also, Sharing an index over NFS is supposed to be slow. The standard so 
> far, if you are not partitioning the index, is to use a unix/linux 
> filesystem and hardlinks + rsync to efficiently share index changes 
> across nodes (hard links for instant copy, rsync to only transfer 
> changed index files, search the mailing list). If you look at solr you 
> can see scripts that give an example of this. I don't think the scripts 
> rely on solr. This kind of setup should be quick and simple to 
> implement. Same with NFS. An RMI solution that allowed for index 
> partitioning would probably be the longest to do.
> 
> -Mark
> 
> 
> 
> Zach Bailey wrote:
>> Thanks for your response --
>>
>> Based on my understanding, hadoop and nutch are essentially the same 
>> thing, with nutch being derived from hadoop, and are primarily 
>> intended to be standalone applications.
>>
>> We are not looking for a standalone application, rather we must use a 
>> framework to implement search inside our current content management 
>> application. Currently the application search functionality is 
>> designed and built around Lucene, so migrating frameworks at this 
>> point is not feasible.
>>
>> We are currently re-working our back-end to support clustering (in 
>> tomcat) and we are looking for information on the migration of Lucene 
>> from a single node filesystem index (which is what we use now and hope 
>> to continue to use for clients with a single-node deployment) to a 
>> shared filesystem index on a mounted network share.
>>
>> We prefer to use this strategy because it means we do not have to have 
>> two disparate methods of managing indexes for clients who run in a 
>> single-node, non-clustered environment versus clients who run in a 
>> multiple-node, clustered environment.
>>
>> So, hopefully here are some easy questions someone could shed some 
>> light on:
>>
>> Is this not a recommended method of managing indexes across multiple 
>> nodes?
>>
>> At this point would people recommend storing an individual index on 
>> each node and propagating index updates via a JMS framework rather 
>> than attempting to handle it transparently with a single shared index?
>>
>> Is the Lucene index code so intimately tied to filesystem semantics 
>> that using a shared/networked file system is infeasible at this point 
>> in time?
>>
>> What would be the quickest time-to-implementation of these strategies 
>> (JMS vs. shared FS)? The most robust/least error-prone?
>>
>> I really appreciate any insight or response anyone can provide, even 
>> if it is a short answer to any of the related topics, "i.e. we 
>> implemented clustered search using per-node indexing with JMS update 
>> propagation and it works great", or even something as simple as "don't 
>> use a shared filesystem at this point".
>>
>> Cheers,
>> -Zach
>>
>> testn wrote:
>>> Why don't you check out Hadoop and Nutch? It should provide what you are
>>> looking for.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 16:49:13 2007
Return-Path: <java-user-return-29603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86405 invoked from network); 2 Aug 2007 16:49:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 16:49:12 -0000
Received: (qmail 67937 invoked by uid 500); 2 Aug 2007 16:49:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67740 invoked by uid 500); 2 Aug 2007 16:49:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67729 invoked by uid 99); 2 Aug 2007 16:49:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 09:49:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 16:49:00 +0000
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by out1.messagingengine.com (Postfix) with ESMTP id 8FFFBB859
	for <java-user@lucene.apache.org>; Thu,  2 Aug 2007 12:48:38 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute2.internal (MEProxy); Thu, 02 Aug 2007 12:48:38 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 71A031978D; Thu,  2 Aug 2007 12:48:38 -0400 (EDT)
Message-Id: <1186073318.11265.1203429223@webmail.messagingengine.com>
X-Sasl-Enc: kzHgNFikXX6phYcdlYq9mNI8ir+NzBd6D15ly7syPgkD 1186073318
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
Subject: Re: Clustered Indexing on common network filesystem
In-Reply-To: <46B2021D.7070404@hannonhill.com>
Date: Thu, 02 Aug 2007 12:48:38 -0400
References: <46AF61DD.4050704@hannonhill.com> <46B1EF1D.4040900@hannonhill.com>
   <11966423.post@talk.nabble.com> <46B1F952.7080403@hannonhill.com>
   <46B1FC03.6090607@gmail.com> <46B2021D.7070404@hannonhill.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I have been meaning to write up a Wiki page on this general topic but
have not quite made time yet ...

Sharing an index with a shared filesystem will work, however there are
some caveats:

  * This is somewhat unchartered territory because it's fairly recent
    fixes to Lucene that have enabled the things below to work, and,
    it's not a heavily tested area.  Please share your experience so
    we all can learn...

  * If the filesystem does not protect against deletion of open files
    (notably NFS does not, however SMB/CIFS does) then you will need
    to create a custom DeletionPolicy based on your app logic so
    writer & readers "agree" on when it's safe to delete prior commit
    points.

    This can be something simple like "readers always refresh at least
    once per hour so any commit point older than 1 hour may be safely
    deleted".

  * Locking: if your app can ensure only one writer is active at a
    time, you can disable locking in Lucene entirely.  Else, it's best
    to use NativeFSLockFactory, if you can.

  * If you are using a filesystem that does not have coherent caching
    on directory listing (NFS clients often do not), and, different
    nodes can "become" the writer (vs a single dedicated writer node)
    then there is one known open issue that you'll hit once you make
    your own DeletionPolicy which I still have to port to trunk:

      http://issues.apache.org/jira/browse/LUCENE-948

But as Mark said, performance is likely quite poor and so you may want
to take an approach like Solr (or, use Solr) whereby a single writer
makes changes to the index.  Then these changes are efficiently
propagated to multiple hosts (hard link & rsync is one way but not the
only way), and these hosts then search their private copy via their
local filesystem.

Mike

"Zach Bailey" <zach.bailey@hannonhill.com> wrote:
> Mark,
> 
> Thanks so much for your response.
> 
> Unfortunately, I am not sure the leader of the project would feel good 
> about running code from trunk, save without an explicit endorsement from 
> a majority of the developers or contributors for that particular code 
> (do those people keep up with this list, anyway?) Is there any word on 
> the possible timeframe the code required to work with NFS might be
> released?
> 
> Thanks for your other insight about hardlinks and rsync. I will look 
> into that; unfortunately it does not cover our userbase who may be 
> clustering in a Windows Server environment. I still have not heard/seen 
> any evidence (anecdotal or otherwise) about how well lucene might work 
> sharing indexes over a mounted Windows share.
> 
> -Zach
> 
> Mark Miller wrote:
> > Some quick info:
> > 
> > NFS should work, but I think youll want to be working off the trunk. 
> > Also, Sharing an index over NFS is supposed to be slow. The standard so 
> > far, if you are not partitioning the index, is to use a unix/linux 
> > filesystem and hardlinks + rsync to efficiently share index changes 
> > across nodes (hard links for instant copy, rsync to only transfer 
> > changed index files, search the mailing list). If you look at solr you 
> > can see scripts that give an example of this. I don't think the scripts 
> > rely on solr. This kind of setup should be quick and simple to 
> > implement. Same with NFS. An RMI solution that allowed for index 
> > partitioning would probably be the longest to do.
> > 
> > -Mark
> > 
> > 
> > 
> > Zach Bailey wrote:
> >> Thanks for your response --
> >>
> >> Based on my understanding, hadoop and nutch are essentially the same 
> >> thing, with nutch being derived from hadoop, and are primarily 
> >> intended to be standalone applications.
> >>
> >> We are not looking for a standalone application, rather we must use a 
> >> framework to implement search inside our current content management 
> >> application. Currently the application search functionality is 
> >> designed and built around Lucene, so migrating frameworks at this 
> >> point is not feasible.
> >>
> >> We are currently re-working our back-end to support clustering (in 
> >> tomcat) and we are looking for information on the migration of Lucene 
> >> from a single node filesystem index (which is what we use now and hope 
> >> to continue to use for clients with a single-node deployment) to a 
> >> shared filesystem index on a mounted network share.
> >>
> >> We prefer to use this strategy because it means we do not have to have 
> >> two disparate methods of managing indexes for clients who run in a 
> >> single-node, non-clustered environment versus clients who run in a 
> >> multiple-node, clustered environment.
> >>
> >> So, hopefully here are some easy questions someone could shed some 
> >> light on:
> >>
> >> Is this not a recommended method of managing indexes across multiple 
> >> nodes?
> >>
> >> At this point would people recommend storing an individual index on 
> >> each node and propagating index updates via a JMS framework rather 
> >> than attempting to handle it transparently with a single shared index?
> >>
> >> Is the Lucene index code so intimately tied to filesystem semantics 
> >> that using a shared/networked file system is infeasible at this point 
> >> in time?
> >>
> >> What would be the quickest time-to-implementation of these strategies 
> >> (JMS vs. shared FS)? The most robust/least error-prone?
> >>
> >> I really appreciate any insight or response anyone can provide, even 
> >> if it is a short answer to any of the related topics, "i.e. we 
> >> implemented clustered search using per-node indexing with JMS update 
> >> propagation and it works great", or even something as simple as "don't 
> >> use a shared filesystem at this point".
> >>
> >> Cheers,
> >> -Zach
> >>
> >> testn wrote:
> >>> Why don't you check out Hadoop and Nutch? It should provide what you are
> >>> looking for.
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 02 16:53:23 2007
Return-Path: <java-user-return-29604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89240 invoked from network); 2 Aug 2007 16:53:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Aug 2007 16:53:20 -0000
Received: (qmail 75401 invoked by uid 500); 2 Aug 2007 16:53:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75352 invoked by uid 500); 2 Aug 2007 16:53:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75341 invoked by uid 99); 2 Aug 2007 16:53:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 09:53:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 16:53:08 +0000
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by out1.messagingengine.com (Postfix) with ESMTP id 8E603A7F5
	for <java-user@lucene.apache.org>; Thu,  2 Aug 2007 12:52:47 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute2.internal (MEProxy); Thu, 02 Aug 2007 12:52:47 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 6F9581577C; Thu,  2 Aug 2007 12:52:47 -0400 (EDT)
Message-Id: <1186073567.12871.1203429323@webmail.messagingengine.com>
X-Sasl-Enc: 4sJepR2D2cLK/XslHBPYpgab/z+eQX7BAeTGAGXRGJEK 1186073567
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <46AF61DD.4050704@hannonhill.com> <46B1EF1D.4040900@hannonhill.com>
   <11966423.post@talk.nabble.com> <46B1F952.7080403@hannonhill.com>
   <46B1FC03.6090607@gmail.com> <46B2021D.7070404@hannonhill.com>
Subject: Re: Clustered Indexing on common network filesystem
In-Reply-To: <46B2021D.7070404@hannonhill.com>
Date: Thu, 02 Aug 2007 12:52:47 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


"Zach Bailey" <zach.bailey@hannonhill.com> wrote:

> Unfortunately, I am not sure the leader of the project would feel good 
> about running code from trunk, save without an explicit endorsement from 
> a majority of the developers or contributors for that particular code 
> (do those people keep up with this list, anyway?) Is there any word on 
> the possible timeframe the code required to work with NFS might be
> released?

This person does keep up with the list :)

On timframe ... there are tentative discussions now on the dev
list on releasing 2.3 in a few months time, but by no means is
this a hard schedule.  I'll make sure LUCENE-948 is included in 2.3.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 00:35:41 2007
Return-Path: <java-user-return-29605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97781 invoked from network); 3 Aug 2007 00:35:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 00:35:40 -0000
Received: (qmail 88572 invoked by uid 500); 3 Aug 2007 00:35:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88540 invoked by uid 500); 3 Aug 2007 00:35:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88529 invoked by uid 99); 3 Aug 2007 00:35:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 17:35:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 00:35:06 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 162334A806D
	for <java-user@lucene.apache.org>; Fri,  3 Aug 2007 10:32:02 +1000 (EST)
From: Daniel Noll <daniel@nuix.com>
To: java-user@lucene.apache.org
Subject: Re: Getting only the Ids, not the whole documents.
Date: Fri, 3 Aug 2007 10:33:59 +1000
User-Agent: KMail/1.9.7
References: <11960750.post@talk.nabble.com> <11961211.post@talk.nabble.com> <34b8543c0708020228g5fa42f93lf178f000bc4a8458@mail.gmail.com>
In-Reply-To: <34b8543c0708020228g5fa42f93lf178f000bc4a8458@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200708031033.59579.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Thursday 02 August 2007 19:28:48 Mohammad Norouzi wrote:
> you should not store them in an Array structure since they will take up the
> memory.
> the BitSet is the best structure to store them

You can't store strings in a BitSet.

What I would do is return a List<String> but make a custom subclass of 
AbstractList<String> which creates the strings on demand from the Hits 
object.  We use similar tricks to convert Hits into a List of another more 
complex object type and it works great.  You can cache the strings as they're 
retrieved if you're planning to use some strings much more than others.

Daniel


-- 
Daniel Noll
Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 00:43:15 2007
Return-Path: <java-user-return-29606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99587 invoked from network); 3 Aug 2007 00:43:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 00:43:14 -0000
Received: (qmail 94063 invoked by uid 500); 3 Aug 2007 00:43:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94030 invoked by uid 500); 3 Aug 2007 00:43:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94019 invoked by uid 99); 3 Aug 2007 00:43:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 17:43:08 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 66.249.82.228 as permitted sender)
Received: from [66.249.82.228] (HELO wx-out-0506.google.com) (66.249.82.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 00:42:59 +0000
Received: by wx-out-0506.google.com with SMTP id i28so479027wxd
        for <java-user@lucene.apache.org>; Thu, 02 Aug 2007 17:42:39 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=ciw40D78oTsGII1tByQVo64IneXga/wEg0ADqmrWj0D52uQvs3IDAZHpm/RQt/e8qcKuw3df8mSJoOPqWm6MG7sZ10m4+daw4cjNPQNtH4LHD6vhMXnToMEhCQe3PvieftcKaeiPcnJnEE5ylyEfEeNfmEjgcFbXyew7RCQL9FA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=h4ZlQlsf5p+PWXEl0UskS5mqIR9ic57CqsoUeche9AXLMoiAhdrFe2sG/PntSnQfxy3tPZPpkV8tVe2w0sYmA2YVRqfWTcsl2VWvfu4XZyrNMzSHJ52NF0udf3RWJYCcL2nYSqBRoME1AvqG/m/buEMEvsih6BCKi/WdDR5mkz0=
Received: by 10.70.61.3 with SMTP id j3mr4126246wxa.1186101758954;
        Thu, 02 Aug 2007 17:42:38 -0700 (PDT)
Received: from ?192.168.1.105? ( [216.66.114.204])
        by mx.google.com with ESMTPS id l48sm2855182wrl.2007.08.02.17.42.36
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 02 Aug 2007 17:42:37 -0700 (PDT)
Message-ID: <46B279C8.8030300@gmail.com>
Date: Thu, 02 Aug 2007 20:41:44 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Getting only the Ids, not the whole documents.
References: <11960750.post@talk.nabble.com> <34b8543c0708020200s82acc82oe9c2e360d527f2db@mail.gmail.com> <11961159.post@talk.nabble.com> <34b8543c0708020225x435f0ad6s4869cd739107bc66@mail.gmail.com> <11962465.post@talk.nabble.com>
In-Reply-To: <11962465.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

If you are just retrieving your custom id and you have more stored 
fields (and they are not tiny) you certainly do want to use a field 
selector. I would suggest SetBasedFieldSelector.

- Mark

testn wrote:
> Hi,
>
> Why don't you consider to use FieldSelector? LoadFirstFieldSelector has an
> ability to help you load only the first field in the document without
> loading all the fields. After that, you can keep the whole document if you
> like. It should help improve performance better.
>
>
>
> is_maximum wrote:
>   
>> yes it decrease the performance but the only solution.
>> I've spent many weeks to find best way to retrive my own IDs but find this
>> way as last one
>>
>> now I am storing the ids in a BitSet structure and it's fast enough
>>
>> public void collect(...){
>> idBitSet.set(Integer.valueOf(searcher.doc(id).get("MyOwnID")));
>>
>> }
>>
>> On 8/2/07, makkhar <mkharche@selectica.com> wrote:
>>     
>>>
>>> Hi,
>>>
>>>    The solution you suggested will definitely work but will definitely
>>> slow
>>> down my search by an order of magnitude. The problem I am trying to solve
>>> is
>>> performance, thats why I need the collection of IDs and not the whole
>>> documents.
>>>
>>> - thanks for the prompt reply.
>>>
>>>
>>> is_maximum wrote:
>>>       
>>>> yes if you extend your class from HitCollector and override the
>>>>         
>>> collect()
>>>       
>>>> mthod with following signature you can get IDs
>>>>
>>>> public void collect(int id, float score)
>>>>
>>>> On 8/2/07, makkhar <mkharche@selectica.com> wrote:
>>>>         
>>>>> Hi all,
>>>>>
>>>>>    Can I get just a list of document Ids given a search criteria ? To
>>>>> elaborate here is my situation:
>>>>>
>>>>> I store 20000 contracts in the file system index each with some
>>>>> parameterName and Value. Given a search criterion -
>>>>>           
>>> (paramValue='draft').
>>>       
>>>>> I
>>>>> need to get just an ArrayList of Strings containing contract Ids. I
>>>>>           
>>> dont
>>>       
>>>>> need the lucene documents, just the Ids.
>>>>>
>>>>> Can this be done ?
>>>>>
>>>>> -thanks
>>>>>
>>>>> --
>>>>> View this message in context:
>>>>>
>>>>>           
>>> http://www.nabble.com/Getting-only-the-Ids%2C-not-the-whole-documents.-tf4204907.html#a11960750
>>>       
>>>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>           
>>>> --
>>>> Regards,
>>>> Mohammad
>>>> --------------------------
>>>> see my blog: http://brainable.blogspot.com/
>>>> another in Persian: http://fekre-motefavet.blogspot.com/
>>>>
>>>>
>>>>         
>>> --
>>> View this message in context:
>>> http://www.nabble.com/Getting-only-the-Ids%2C-not-the-whole-documents.-tf4204907.html#a11961159
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>       
>> -- 
>> Regards,
>> Mohammad
>> --------------------------
>> see my blog: http://brainable.blogspot.com/
>> another in Persian: http://fekre-motefavet.blogspot.com/
>>
>>
>>     
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 03:39:24 2007
Return-Path: <java-user-return-29607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41379 invoked from network); 3 Aug 2007 03:39:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 03:39:23 -0000
Received: (qmail 9239 invoked by uid 500); 3 Aug 2007 03:39:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9162 invoked by uid 500); 3 Aug 2007 03:39:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9151 invoked by uid 99); 3 Aug 2007 03:39:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 20:39:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cedric.ho@gmail.com designates 209.85.146.176 as permitted sender)
Received: from [209.85.146.176] (HELO wa-out-1112.google.com) (209.85.146.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 03:39:11 +0000
Received: by wa-out-1112.google.com with SMTP id j40so761345wah
        for <java-user@lucene.apache.org>; Thu, 02 Aug 2007 20:38:51 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=DkcD0Djj4p8COVwqY7oaTKcTPv3//LK3PXGVKfRk7YIKUpsxqMrb1dD/L9Gngs1GpuFe08ltN16gBLU6c/B/EEGOFsSf6PCVHw9OoO9WbOtTOFWQehCRnA5ogThnfy4oZzSlhBwZnabPhTSs8bWAt88fnjOVIsznwwLZDDnwylc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=XA6Jnb/Lh0VCFwynWsWYJktS0PUch/wTcpuznQvFg8+i8oLxaQHbqSi07b9Km2Q9qX7g2UbRiiYt4gjSwbrkWz8c6gSdAupyDmrLNKpxl396t27UT0X86UENDrEp9NuEAd8h4HIYK1JiOsO2tx1BXCddB7ZBHGrdiclF7WN49hA=
Received: by 10.114.135.1 with SMTP id i1mr2504767wad.1186112330586;
        Thu, 02 Aug 2007 20:38:50 -0700 (PDT)
Received: by 10.114.46.4 with HTTP; Thu, 2 Aug 2007 20:38:50 -0700 (PDT)
Message-ID: <839ba01c0708022038r7bf26d50nf4756773b76a9bdd@mail.gmail.com>
Date: Fri, 3 Aug 2007 11:38:50 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Can I do boosting based on term postions?
In-Reply-To: <200708020922.55296.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <839ba01c0707312113p278da04bg636e2bfa853e6ff4@mail.gmail.com>
	 <d27fa17e0707312306q5e517d7fyedbedc31094dc6c4@mail.gmail.com>
	 <839ba01c0708011907v643faebbv57127e843700abf9@mail.gmail.com>
	 <200708020922.55296.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgUGF1bCwKCklzbid0IFNwYW5GaXJzdFF1ZXJ5IG9ubHkgbWF0Y2ggdGhvc2Ugd2l0aCBwb3Np
dGlvbiBsZXNzIHRoYW4gYQpjZXJ0YWluIGVuZCBwb3NpdGlvbj8KCkkgYW0gcmF0aGVyIGxvb2tp
bmcgZm9yIGEgcXVlcnkgdGhhdCB3b3VsZCBzY29yZSBhIGRvY3VtZW50IGhpZ2hlciBmb3IKdGVy
bXMgYXBwZWFyIG5lYXIgdGhlIHN0YXJ0IGJ1dCBub3QgdG90YWxseSBkaXNjYXJkIHRob3NlIHdp
dGggdGVybXMKYXBwZWFyIG5lYXIgdGhlIGVuZC4KClJlZ2FyZHMsCkNlZHJpYwoKT24gOC8yLzA3
LCBQYXVsIEVsc2Nob3QgPHBhdWwuZWxzY2hvdEB4czRhbGwubmw+IHdyb3RlOgo+IENlZHJpYywK
Pgo+IFNwYW5GaXJzdFF1ZXJ5IGNvdWxkIGJlIGEgc29sdXRpb24gd2l0aG91dCBwYXlsb2Fkcy4K
PiBZb3UgbWF5IHdhbnQgdG8gZ2l2ZSBpdCB5b3VyIG93biBTaW1pbGFyaXR5LnNsb3BweUZyZXEo
KSAuCj4KPiBSZWdhcmRzLAo+IFBhdWwgRWxzY2hvdAo+Cj4gT24gVGh1cnNkYXkgMDIgQXVndXN0
IDIwMDcgMDQ6MDcsIENlZHJpYyBIbyB3cm90ZToKPiA+IFRoYW5rcyBmb3IgdGhlIHF1aWNrIHJl
c3BvbnNlID0pCj4gPgo+ID4gT24gOC8xLzA3LCBTaGFpbGVuZHJhIFNoYXJtYSA8c2hhaWxlbmRy
YS5zaGFybWFAZ21haWwuY29tPiB3cm90ZToKPiA+ID4gWWVzLCBpdCBpcyBlYXNpbHkgZG9hYmxl
IHRocm91Z2ggIlBheWxvYWQiIGZhY2lsaXR5LiBEdXJpbmcgaW5kZXhpbmcKPiBwcm9jZXNzCj4g
PiA+IChtYWlubHkgdG9rZW5pemF0aW9uKSwgeW91IG5lZWQgdG8gcHVzaCB0aGlzIGV4dHJhIGlu
Zm9ybWF0aW9uIGluIGVhY2gKPiA+ID4gdG9rZW4uIEFuZCB0aGVuIHlvdSBjYW4gdXNlIEJvb3N0
aW5nVGVybVF1ZXJ5IGZvciB1c2luZyBQYXlsb2FkIHZhbHVlIHRvCj4gPiA+IGluY2x1ZGUgUGF5
bG9hZCBpbiB0aGUgc2NvcmUuIFlvdSBhbHNvIG5lZWQgdG8gaW1wbGVtZW50IFNpbWlsYXJpdHkg
Zm9yCj4gdGhpcwo+ID4gPiAobWFpbmx5IHNjb3JlUGF5bG9hZCBtZXRob2QpLgo+ID4KPiA+IElm
IEkgc3RvcmUsIHNheSBhIGN1c3RvbSBib29zdCBmYWN0b3IgYXMgUGF5bG9hZCwgZG9lcyBpdCBt
ZWFucyB0aGF0IEkKPiA+IHdpbGwgc3RvcmUgb25lIG1vcmUgYnl0ZSBwZXIgdGVybSBwZXIgZG9j
dW1lbnQgaW4gdGhlIGluZGV4IGZpbGU/IFNvCj4gPiB0aGUgaW5kZXggZmlsZSB3b3VsZCBiZSBt
dWNoIGxhcmdlcj8KPiA+Cj4gPiA+Cj4gPiA+IE90aGVyIHdheSBjYW4gYmUgdG8gZXh0ZW5kIFNw
YW5UZXJtUXVlcnksIHRoaXMgYWxyZWFkeSBjYWxjdWxhdGVzIHRoZQo+ID4gPiBwb3NpdGlvbiBv
ZiBtYXRjaC4gWW91IGp1c3QgbmVlZCB0byBkbyBzb21ldGhpbmcgdG8gdXNlIHRoaXMgcG9zaXRp
b24KPiB2YWx1ZQo+ID4gPiBpbiB0aGUgc2NvcmUgY2FsY3VsYXRpb24uCj4gPgo+ID4gSSBzZWUg
dGhhdCBTcGFuVGVybVF1ZXJ5IHRha2VzIGEgVGVybVBvc2l0aW9ucyBmcm9tIHRoZSBpbmRleFJl
YWRlcgo+ID4gYW5kIEkgY2FuIGdldCB0aGUgdGVybSBwb3NpdGlvbiBmcm9tIHRoZXJlLiBIb3dl
dmVyIEkgYW0gbm90IHN1cmUgaG93Cj4gPiB0byBpbmNvcnBvcmF0ZSBpdCBpbnRvIHRoZSBzY29y
ZSBjYWxjdWxhdGlvbi4gV291bGQgeW91IG1pbmQgZ2l2ZSBhCj4gPiBsaXR0bGUgbW9yZSBkZXRh
aWwgb24gdGhpcz8KPiA+Cj4gPiA+Cj4gPiA+IE9uZSBwb3NzaWJsZSBhZHZhbnRhZ2Ugb2YgU3Bh
blRlcm1RdWVyeSBhcHByb2FjaCBpcyB0aGF0IHlvdSBjYW4gcGxheQo+ID4gPiBhcm91bmQsIHdp
dGhvdXQgcmUtY3JlYXRpbmcgaW5kaWNlcyBldmVyeXRpbWUuCj4gPiA+Cj4gPiA+IFRoYW5rcywK
PiA+ID4gU2hhaWxlbmRyYSBTaGFybWEsCj4gPiA+IENUTywgVmVyIHNlJyBJbm5vdmF0aW9uIFB2
dC4gTHRkLgo+ID4gPiBCYW5nYWxvcmUsIEluZGlhCj4gPiA+Cj4gPiA+IE9uIDgvMS8wNywgQ2Vk
cmljIEhvIDxjZWRyaWMuaG9AZ21haWwuY29tPiB3cm90ZToKPiA+ID4gPgo+ID4gPiA+IEhpIGFs
bCwKPiA+ID4gPgo+ID4gPiA+IEkgd2FzIHdvbmRlcmluZyBpZiBpdCBpcyBwb3NzaWJsZSB0byBk
byBib29zdGluZyBieSBzZWFyY2ggdGVybXMnCj4gPiA+ID4gcG9zaXRpb24gaW4gdGhlIGRvY3Vt
ZW50Lgo+ID4gPiA+Cj4gPiA+ID4gZm9yIGV4YW1wbGU6Cj4gPiA+ID4gc2VhcmNoIHRlcm1zIGFw
cGVhciBpbiB0aGUgZmlyc3QgMTAwIHdvcmRzLCBvciBmaXJzdCAxMCUgd29yZHMsIG9yIGluCj4g
PiA+ID4gZmlyc3QgdHdvIHBhcmFncmFwaHMgd291bGQgYmUgZ2l2ZW4gaGlnaGVyIHNjb3JlLgo+
ID4gPiA+Cj4gPiA+ID4gSXMgaXQgYWNoaWV2YWJsZSB0aHJvdWdoIHVzaW5nIHRoZSBuZXcgUGF5
bG9hZCBmdW5jdGlvbiBpbiBsdWNlbmUgMi4yPwo+ID4gPiA+IE9yIGFyZSB0aGVyZSBhbnkgZWFz
aWVyIHdheXMgdG8gYWNoaWV2ZSB0aGVzZSA/Cj4gPiA+ID4KPiA+ID4gPgo+ID4gPiA+IFJlZ2Fy
ZHMsCj4gPiA+ID4gQ2VkcmljCj4gPiA+ID4KPiA+ID4gPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiA+ID4gPiBU
byB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNo
ZS5vcmcKPiA+ID4gPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXIt
aGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+ID4gPiA+Cj4gPiA+ID4KPiA+ID4KPiA+Cj4gPiBUaGFu
a3MsCj4gPiBDZWRyaWMKPiA+Cj4gPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiA+IFRvIHVuc3Vic2NyaWJlLCBl
LW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+ID4gRm9yIGFk
ZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5v
cmcKPiA+Cj4gPgo+ID4KPgo+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6
IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+IEZvciBhZGRpdGlvbmFs
IGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4KPgoK
Ci0tIArmhJtA5LiKLktleWJvYXJkCg==


From java-user-return-29608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 03:46:40 2007
Return-Path: <java-user-return-29608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43355 invoked from network); 3 Aug 2007 03:46:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 03:46:39 -0000
Received: (qmail 13443 invoked by uid 500); 3 Aug 2007 03:46:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13402 invoked by uid 500); 3 Aug 2007 03:46:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13391 invoked by uid 99); 3 Aug 2007 03:46:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 20:46:33 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of shailendra.sharma@gmail.com designates 209.85.198.186 as permitted sender)
Received: from [209.85.198.186] (HELO rv-out-0910.google.com) (209.85.198.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 03:46:09 +0000
Received: by rv-out-0910.google.com with SMTP id k20so480489rvb
        for <java-user@lucene.apache.org>; Thu, 02 Aug 2007 20:46:06 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FMl/BCt+fspSvMGHMLoIiEMjVg/FBvbw6jj3YF6zfxzNE5scYDh9rCqkMIKEe071m07y5QxYnvZoFHJoiMdgoWl0lmxtcevKhx0C5YmYjICKrE7qRGqXOFoUtZtY4OwuJ8i36sXNHMt62X69hKQbRAgxumpZVL5xV75oHeXNEck=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DqljE+XowRSJj8vX9ZUrZE/ReKtF1js3fa9g07x49ft9o+VrgDMT2p6O7tKzwhBLXsTU6oMS8DFCkhVHui14xKxvXFGRStkF5HguSo0By/YTqilnZ5qRYtLh78hWDB2NxJalVJb14pnIX12wgSME/EpnlEe8XSby95wRZa4+ziU=
Received: by 10.142.171.6 with SMTP id t6mr115981wfe.1186112766088;
        Thu, 02 Aug 2007 20:46:06 -0700 (PDT)
Received: by 10.143.18.7 with HTTP; Thu, 2 Aug 2007 20:46:06 -0700 (PDT)
Message-ID: <d27fa17e0708022046y41b87d08tdef97962aff22ced@mail.gmail.com>
Date: Fri, 3 Aug 2007 09:16:06 +0530
From: "Shailendra Sharma" <shailendra.sharma@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Can I do boosting based on term postions?
In-Reply-To: <839ba01c0708022038r7bf26d50nf4756773b76a9bdd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_96445_13068150.1186112766040"
References: <839ba01c0707312113p278da04bg636e2bfa853e6ff4@mail.gmail.com>
	 <d27fa17e0707312306q5e517d7fyedbedc31094dc6c4@mail.gmail.com>
	 <839ba01c0708011907v643faebbv57127e843700abf9@mail.gmail.com>
	 <200708020922.55296.paul.elschot@xs4all.nl>
	 <839ba01c0708022038r7bf26d50nf4756773b76a9bdd@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_96445_13068150.1186112766040
Content-Type: text/plain; charset=ISO-2022-JP
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am doing implementation of SpanTermQuery for you, give me today. Sorry, I
was out for meetings for 2 days.

Enjoy,
Shailendra

On 8/3/07, Cedric Ho <cedric.ho@gmail.com> wrote:
>
> Hi Paul,
>
> Isn't SpanFirstQuery only match those with position less than a
> certain end position?
>
> I am rather looking for a query that would score a document higher for
> terms appear near the start but not totally discard those with terms
> appear near the end.
>
> Regards,
> Cedric
>
> On 8/2/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> > Cedric,
> >
> > SpanFirstQuery could be a solution without payloads.
> > You may want to give it your own Similarity.sloppyFreq() .
> >
> > Regards,
> > Paul Elschot
> >
> > On Thursday 02 August 2007 04:07, Cedric Ho wrote:
> > > Thanks for the quick response =)
> > >
> > > On 8/1/07, Shailendra Sharma <shailendra.sharma@gmail.com> wrote:
> > > > Yes, it is easily doable through "Payload" facility. During indexing
> > process
> > > > (mainly tokenization), you need to push this extra information in
> each
> > > > token. And then you can use BoostingTermQuery for using Payload
> value to
> > > > include Payload in the score. You also need to implement Similarity
> for
> > this
> > > > (mainly scorePayload method).
> > >
> > > If I store, say a custom boost factor as Payload, does it means that I
> > > will store one more byte per term per document in the index file? So
> > > the index file would be much larger?
> > >
> > > >
> > > > Other way can be to extend SpanTermQuery, this already calculates
> the
> > > > position of match. You just need to do something to use this
> position
> > value
> > > > in the score calculation.
> > >
> > > I see that SpanTermQuery takes a TermPositions from the indexReader
> > > and I can get the term position from there. However I am not sure how
> > > to incorporate it into the score calculation. Would you mind give a
> > > little more detail on this?
> > >
> > > >
> > > > One possible advantage of SpanTermQuery approach is that you can
> play
> > > > around, without re-creating indices everytime.
> > > >
> > > > Thanks,
> > > > Shailendra Sharma,
> > > > CTO, Ver se' Innovation Pvt. Ltd.
> > > > Bangalore, India
> > > >
> > > > On 8/1/07, Cedric Ho <cedric.ho@gmail.com> wrote:
> > > > >
> > > > > Hi all,
> > > > >
> > > > > I was wondering if it is possible to do boosting by search terms'
> > > > > position in the document.
> > > > >
> > > > > for example:
> > > > > search terms appear in the first 100 words, or first 10% words, or
> in
> > > > > first two paragraphs would be given higher score.
> > > > >
> > > > > Is it achievable through using the new Payload function in lucene
> 2.2?
> > > > > Or are there any easier ways to achieve these ?
> > > > >
> > > > >
> > > > > Regards,
> > > > > Cedric
> > > > >
> > > > >
> ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > > >
> > > > >
> > > >
> > >
> > > Thanks,
> > > Cedric
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> $B0&(B@$B>e(B.Keyboard
>

------=_Part_96445_13068150.1186112766040--

From java-user-return-29609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 04:27:41 2007
Return-Path: <java-user-return-29609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51829 invoked from network); 3 Aug 2007 04:27:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 04:27:40 -0000
Received: (qmail 50673 invoked by uid 500); 3 Aug 2007 04:27:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50631 invoked by uid 500); 3 Aug 2007 04:27:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50620 invoked by uid 99); 3 Aug 2007 04:27:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 21:27:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.246.22.40] (HELO mail.atlassian.com) (63.246.22.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 04:27:26 +0000
Received: (qmail 30138 invoked from network); 3 Aug 2007 04:27:06 -0000
Received: from unknown (HELO mail.atlassian.com) (127.0.0.1)
  by 63-246-22-40.contegix.com with SMTP; 3 Aug 2007 04:27:06 -0000
Received: from threesheets.sydney.atlassian.com (unknown [202.47.1.18])
	by mail.atlassian.com (Postfix) with ESMTP id DE595186C307
	for <java-user@lucene.apache.org>; Thu,  2 Aug 2007 23:27:05 -0500 (CDT)
Message-ID: <46B2AE93.70905@atlassian.com>
Date: Fri, 03 Aug 2007 14:26:59 +1000
From: Andreas Knecht <andreask@atlassian.com>
User-Agent: Thunderbird 2.0.0.6 (Macintosh/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Performance improvements using writer.delete vs reader.delete
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

We're considering to use the new IndexWriter.deleteDocuments call rather 
than the IndexReader.delete call.  Are there any performance 
improvements that this may provide, other than the benefit of not having 
to switch between readers/writers?

We've looked at LUCENE-565, but there's no clear view of performance 
enhancements over the old IndexReader call.

Cheers,
 Andreas

-- 
ATLASSIAN
Our products help over 7,000 organisations in more than 88 countries to collaborate. http://www.atlassian.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 05:46:50 2007
Return-Path: <java-user-return-29610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82571 invoked from network); 3 Aug 2007 05:46:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 05:46:48 -0000
Received: (qmail 15027 invoked by uid 500); 3 Aug 2007 05:46:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14983 invoked by uid 500); 3 Aug 2007 05:46:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14972 invoked by uid 99); 3 Aug 2007 05:46:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 22:46:41 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.157 as permitted sender)
Received: from [195.212.29.157] (HELO mtagate8.de.ibm.com) (195.212.29.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 05:46:15 +0000
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate8.de.ibm.com (8.13.8/8.13.8) with ESMTP id l735kDb1349600
	for <java-user@lucene.apache.org>; Fri, 3 Aug 2007 05:46:13 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.4) with ESMTP id l735kD8M1966180
	for <java-user@lucene.apache.org>; Fri, 3 Aug 2007 07:46:13 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l735kDRm013355
	for <java-user@lucene.apache.org>; Fri, 3 Aug 2007 07:46:13 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l735kDkq013352
	for <java-user@lucene.apache.org>; Fri, 3 Aug 2007 07:46:13 +0200
In-Reply-To: <46B2AE93.70905@atlassian.com>
Subject: Re: Performance improvements using writer.delete vs reader.delete
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF370CB93C.4AE25472-ON8825732C.001E844F-8825732C.001F69B7@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 2 Aug 2007 22:43:06 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 03/08/2007 08:46:12
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Andreas Knecht wrote:

> We're considering to use the new IndexWriter.deleteDocuments call rather
> than the IndexReader.delete call.  Are there any performance
> improvements that this may provide, other than the benefit of not having
> to switch between readers/writers?
>
> We've looked at LUCENE-565, but there's no clear view of performance
> enhancements over the old IndexReader call.

I think Yonik's comment in 565 holds here -
http://issues.apache.org/jira/browse/LUCENE-565#action_12432155
- if your application is buffering deletes/updates and
then batch the deletes you probably won't see a large
improvement. But if your application does not buffer
the deletes and does not batch them, then I believe
moving to IndexWriter.delete() (and update()) should
buy you performance improvement, because IndexWriter
would now buffer the deletes for you.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 06:08:02 2007
Return-Path: <java-user-return-29611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92579 invoked from network); 3 Aug 2007 06:08:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 06:08:01 -0000
Received: (qmail 29686 invoked by uid 500); 3 Aug 2007 06:07:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29648 invoked by uid 500); 3 Aug 2007 06:07:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29627 invoked by uid 99); 3 Aug 2007 06:07:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 23:07:55 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 06:07:47 +0000
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.8/8.13.8) with ESMTP id l7367PQ9101942
	for <java-user@lucene.apache.org>; Fri, 3 Aug 2007 06:07:25 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.4) with ESMTP id l7367P8d2338858
	for <java-user@lucene.apache.org>; Fri, 3 Aug 2007 08:07:25 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l7367Oll008840
	for <java-user@lucene.apache.org>; Fri, 3 Aug 2007 08:07:24 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l7367Oqx008833
	for <java-user@lucene.apache.org>; Fri, 3 Aug 2007 08:07:24 +0200
In-Reply-To: <879194.35448.qm@web53805.mail.re2.yahoo.com>
Subject: Re: How do YOU detect corrupt indexes?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFAA9F3FAE.758F55E0-ON8825732C.00206FFB-8825732C.0021449C@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 2 Aug 2007 23:03:22 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.2HF71 | November 3, 2006) at
 03/08/2007 09:07:24
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

What is the anticipated cause of corruption? Malicious?
Hardware fault? This somewhat reminds of discussions in
the list about encrypting the index. See LUCENE-737
and a discussion pointed by it. One of the opinions
there was that encryption should be handled at a lower
level (OS/FS). Wouldn't that hold here as well?

Joe R wrote:

>
> Hello,
>
> I've been asked to devise some way to discover and correct datain Lucene
> indexes that have been "corrupted."  The word "corrupt", in
> this case, has a
> few different meanings, some of which strike me as exceedingly
> difficult to
> grok.  What concerns me are the cases where we don't know that
> an index has
> been changed:  A bit error in a stored field, for instance, is a form of
> corruption that we (ideally) should be able to identify, at the
> very least, and
> hopefully correct.  This case in particular seems particularly
> onerous, since
> this isn't going to throw an exception of any sort, any time.
>
> We have a fairly good handle on how to remedy problems that
> throw exceptions,
> so we should be alright with corruption where (say) an operator
> logs in and
> overwrites a file.
>
> I'm wondering how other Lucene users have tackled this problem
> in the past.
> Calculating checksums on the documents seems like one way to goabout it:
> compute a checksum on the document and, in a background thread,
> compare the
> checksum to the data.  Unfortunately we're building a large,
> federated system
> and it would take months to exhaustively check every document this way.
> Checksumming the files themselves might be too much: We're
> storing gigabytes of
> data per index and there is some churn to the data; in other words, the
> overhead for this method might be too high.
>
> Thanks for any help you might have.
>
>
> -Joseph Rose


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 06:20:57 2007
Return-Path: <java-user-return-29612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96287 invoked from network); 3 Aug 2007 06:20:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 06:20:56 -0000
Received: (qmail 48074 invoked by uid 500); 3 Aug 2007 06:20:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48036 invoked by uid 500); 3 Aug 2007 06:20:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48024 invoked by uid 99); 3 Aug 2007 06:20:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 23:20:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dmitrytkach1@hotmail.com designates 65.54.246.213 as permitted sender)
Received: from [65.54.246.213] (HELO bay0-omc3-s13.bay0.hotmail.com) (65.54.246.213)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 06:20:23 +0000
Received: from hotmail.com ([65.54.169.86]) by bay0-omc3-s13.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Thu, 2 Aug 2007 23:20:20 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Thu, 2 Aug 2007 23:20:20 -0700
Message-ID: <BAY114-DAV144B92F2344E2FF51556CB94EA0@phx.gbl>
Received: from 24.12.157.130 by BAY114-DAV14.phx.gbl with DAV;
	Fri, 03 Aug 2007 06:20:16 +0000
X-Originating-IP: [24.12.157.130]
X-Originating-Email: [dmitrytkach1@hotmail.com]
X-Sender: dmitrytkach1@hotmail.com
From: "Dmitry" <dmitrytkach1@hotmail.com>
To: <java-user@lucene.apache.org>
References: <OFAA9F3FAE.758F55E0-ON8825732C.00206FFB-8825732C.0021449C@il.ibm.com>
Subject: Re: How do YOU detect corrupt indexes?
Date: Fri, 3 Aug 2007 01:20:46 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3028
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-OriginalArrivalTime: 03 Aug 2007 06:20:20.0670 (UTC) FILETIME=[5E4465E0:01C7D596]
X-Virus-Checked: Checked by ClamAV on apache.org

Not sure how exactly understand corrupted indexes in the sense that could 
not read / use indexes or something else..

thanks
DT
www.ejinz.com
EjinZ Search Engine

----- Original Message ----- 
From: "Doron Cohen" <DORONC@il.ibm.com>
To: <java-user@lucene.apache.org>
Sent: Friday, August 03, 2007 1:03 AM
Subject: Re: How do YOU detect corrupt indexes?


> What is the anticipated cause of corruption? Malicious?
> Hardware fault? This somewhat reminds of discussions in
> the list about encrypting the index. See LUCENE-737
> and a discussion pointed by it. One of the opinions
> there was that encryption should be handled at a lower
> level (OS/FS). Wouldn't that hold here as well?
>
> Joe R wrote:
>
>>
>> Hello,
>>
>> I've been asked to devise some way to discover and correct datain Lucene
>> indexes that have been "corrupted."  The word "corrupt", in
>> this case, has a
>> few different meanings, some of which strike me as exceedingly
>> difficult to
>> grok.  What concerns me are the cases where we don't know that
>> an index has
>> been changed:  A bit error in a stored field, for instance, is a form of
>> corruption that we (ideally) should be able to identify, at the
>> very least, and
>> hopefully correct.  This case in particular seems particularly
>> onerous, since
>> this isn't going to throw an exception of any sort, any time.
>>
>> We have a fairly good handle on how to remedy problems that
>> throw exceptions,
>> so we should be alright with corruption where (say) an operator
>> logs in and
>> overwrites a file.
>>
>> I'm wondering how other Lucene users have tackled this problem
>> in the past.
>> Calculating checksums on the documents seems like one way to goabout it:
>> compute a checksum on the document and, in a background thread,
>> compare the
>> checksum to the data.  Unfortunately we're building a large,
>> federated system
>> and it would take months to exhaustively check every document this way.
>> Checksumming the files themselves might be too much: We're
>> storing gigabytes of
>> data per index and there is some churn to the data; in other words, the
>> overhead for this method might be too high.
>>
>> Thanks for any help you might have.
>>
>>
>> -Joseph Rose
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 06:47:43 2007
Return-Path: <java-user-return-29613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3795 invoked from network); 3 Aug 2007 06:47:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 06:47:42 -0000
Received: (qmail 94463 invoked by uid 500); 3 Aug 2007 06:47:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94430 invoked by uid 500); 3 Aug 2007 06:47:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94414 invoked by uid 99); 3 Aug 2007 06:47:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Aug 2007 23:47:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 06:47:23 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 849154A806D
	for <java-user@lucene.apache.org>; Fri,  3 Aug 2007 16:44:03 +1000 (EST)
From: Daniel Noll <daniel@nuix.com>
To: java-user@lucene.apache.org
Subject: Re: How do YOU detect corrupt indexes?
Date: Fri, 3 Aug 2007 16:45:58 +1000
User-Agent: KMail/1.9.7
References: <OFAA9F3FAE.758F55E0-ON8825732C.00206FFB-8825732C.0021449C@il.ibm.com>
In-Reply-To: <OFAA9F3FAE.758F55E0-ON8825732C.00206FFB-8825732C.0021449C@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200708031645.58731.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Friday 03 August 2007 16:03:22 Doron Cohen wrote:
> What is the anticipated cause of corruption? Malicious?
> Hardware fault? This somewhat reminds of discussions in
> the list about encrypting the index. See LUCENE-737
> and a discussion pointed by it. One of the opinions
> there was that encryption should be handled at a lower
> level (OS/FS). Wouldn't that hold here as well?

That's actually a good point.  These days we have filesystems like ZFS which 
check for corruption automatically.  This should remove a lot of the extra 
digesting work people would otherwise need to do to ensure consistency.

Daniel


-- 
Daniel Noll
Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 09:18:57 2007
Return-Path: <java-user-return-29614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53962 invoked from network); 3 Aug 2007 09:18:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 09:18:56 -0000
Received: (qmail 22358 invoked by uid 500); 3 Aug 2007 09:18:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22317 invoked by uid 500); 3 Aug 2007 09:18:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22306 invoked by uid 99); 3 Aug 2007 09:18:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 02:18:50 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 09:18:44 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IGtIe-00059a-Ey
	for java-user@lucene.apache.org; Fri, 03 Aug 2007 02:18:24 -0700
Message-ID: <11980001.post@talk.nabble.com>
Date: Fri, 3 Aug 2007 02:18:24 -0700 (PDT)
From: tierecke <nir.nussbaum@gmail.com>
To: java-user@lucene.apache.org
Subject: Get the TokenStream of an indexed but unstored field
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19954_21108062.1186132704406"
X-Nabble-From: nir.nussbaum@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19954_21108062.1186132704406
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hi,

I indexed a large number of large documents, but I did not index the
document themselves.
Now I am interested in getting the vector (i.e.: the terms indexed and the
frequency) of that indexed but unstored field.
doc.getField (fieldname) returns null.
How can I get the data? It must be there, since it's a part of the index, or
am I wrong?

Would be grateful for a quick result (need to submit data for a conference
this weekend).
thanks,
Nir.
-- 
View this message in context: http://www.nabble.com/Get-the-TokenStream-of-an-indexed-but-unstored-field-tf4211430.html#a11980001
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

------=_Part_19954_21108062.1186132704406--


From java-user-return-29615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 09:20:52 2007
Return-Path: <java-user-return-29615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54224 invoked from network); 3 Aug 2007 09:20:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 09:20:50 -0000
Received: (qmail 24421 invoked by uid 500); 3 Aug 2007 09:20:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24382 invoked by uid 500); 3 Aug 2007 09:20:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24371 invoked by uid 99); 3 Aug 2007 09:20:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 02:20:45 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 09:20:39 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IGtKV-0005CA-6N
	for java-user@lucene.apache.org; Fri, 03 Aug 2007 02:20:19 -0700
Message-ID: <11980001.post@talk.nabble.com>
Date: Fri, 3 Aug 2007 02:20:19 -0700 (PDT)
From: tierecke <nir.nussbaum@gmail.com>
To: java-user@lucene.apache.org
Subject: Get the TokenStream of an indexed but unstored field
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19955_16156087.1186132819189"
X-Nabble-From: nir.nussbaum@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19955_16156087.1186132819189
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hi,

I indexed a large number of large documents, but I did not store the
document themselves, just indexed them.
Now I am interested in getting the vector (i.e.: the terms indexed and the
frequency) of that indexed but unstored field.
doc.getField (fieldname) returns null.
How can I get the data? It must be there, since it's a part of the index, or
am I wrong?

Would be grateful for a quick result (need to submit data for a conference
this weekend).
thanks,
Nir.
-- 
View this message in context: http://www.nabble.com/Get-the-TokenStream-of-an-indexed-but-unstored-field-tf4211430.html#a11980001
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

------=_Part_19955_16156087.1186132819189--


From java-user-return-29616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 09:24:31 2007
Return-Path: <java-user-return-29616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54767 invoked from network); 3 Aug 2007 09:24:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 09:24:30 -0000
Received: (qmail 27103 invoked by uid 500); 3 Aug 2007 09:24:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27069 invoked by uid 500); 3 Aug 2007 09:24:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27058 invoked by uid 99); 3 Aug 2007 09:24:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 02:24:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 09:24:00 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IGtO1-0005JO-EW
	for java-user@lucene.apache.org; Fri, 03 Aug 2007 02:23:57 -0700
Message-ID: <11980001.post@talk.nabble.com>
Date: Fri, 3 Aug 2007 02:23:57 -0700 (PDT)
From: tierecke <nir.nussbaum@gmail.com>
To: java-user@lucene.apache.org
Subject: Get the terms and frequency vector of an indexed but unstored field
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20021_7194448.1186133037444"
X-Nabble-From: nir.nussbaum@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20021_7194448.1186133037444
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hi,

I indexed a large number of large documents, but I did not store the
document themselves, just indexed them.
Now I am interested in getting the vector (i.e.: the terms indexed and the
frequency) of that indexed but unstored field.
doc.getField (fieldname) returns null.
How can I get the data? It must be there, since it's a part of the index, or
am I wrong?

Would be grateful for a quick result (need to submit data for a conference
this weekend).
thanks,
Nir.
-- 
View this message in context: http://www.nabble.com/Get-the-terms-and-frequency-vector-of-an-indexed-but-unstored-field-tf4211430.html#a11980001
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

------=_Part_20021_7194448.1186133037444--


From java-user-return-29617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 10:29:19 2007
Return-Path: <java-user-return-29617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71160 invoked from network); 3 Aug 2007 10:29:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 10:29:17 -0000
Received: (qmail 17003 invoked by uid 500); 3 Aug 2007 10:29:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16924 invoked by uid 500); 3 Aug 2007 10:29:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16913 invoked by uid 99); 3 Aug 2007 10:29:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 03:29:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 66.249.82.233 as permitted sender)
Received: from [66.249.82.233] (HELO wx-out-0506.google.com) (66.249.82.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 10:28:48 +0000
Received: by wx-out-0506.google.com with SMTP id i28so558058wxd
        for <java-user@lucene.apache.org>; Fri, 03 Aug 2007 03:28:45 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=QCJJhPG3Pv4yr4ClDw/wf+9ckr743Yh24WC7VQxFxHzsGslQaUBZyf4is0RFgC7V+qxKTFEiGMdtF+fv4nYGqJcoX+6J35fHkgCOIKvPcTBL1H3X4HzP0r7y4VzvDg78vvwzOCKay9IVIsLWtj+VEicJZMTFimMxlC9kZLmhpkM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=b+oTJGZJIxPRryAH/JihmfeNCuCss8Rdoy1nFZ186qg8lQv5EUOtRt3Ed+3PLLYW5WUxvZxvpmW6hC1z/uY9d0+UPc1M+WG4rV0N4PJglibnVPp8uzi9kqIEEYtQiLT2jqb+3eDtGuXcGXi3OYp20Hh7OIIGyrSGkCMkkZi3+78=
Received: by 10.90.118.8 with SMTP id q8mr2801974agc.1186136925017;
        Fri, 03 Aug 2007 03:28:45 -0700 (PDT)
Received: from ?192.168.1.105? ( [216.66.114.204])
        by mx.google.com with ESMTPS id 8sm3307337wrl.2007.08.03.03.28.41
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 03 Aug 2007 03:28:42 -0700 (PDT)
Message-ID: <46B30322.7080104@gmail.com>
Date: Fri, 03 Aug 2007 06:27:46 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Performance improvements using writer.delete vs reader.delete
References: <OF370CB93C.4AE25472-ON8825732C.001E844F-8825732C.001F69B7@il.ibm.com>
In-Reply-To: <OF370CB93C.4AE25472-ON8825732C.001E844F-8825732C.001F69B7@il.ibm.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Also, IndexWriter probably buffers better than you would. If you buffer 
a delete with IndexWriter and then add a document that would be removed 
by that delete right after, when the buffered deletes are flushed, your 
latest doc will not be removed. Its unlikely your own buffer system 
would work so well.

- Mark

Doron Cohen wrote:
> Andreas Knecht wrote:
>
>   
>> We're considering to use the new IndexWriter.deleteDocuments call rather
>> than the IndexReader.delete call.  Are there any performance
>> improvements that this may provide, other than the benefit of not having
>> to switch between readers/writers?
>>
>> We've looked at LUCENE-565, but there's no clear view of performance
>> enhancements over the old IndexReader call.
>>     
>
> I think Yonik's comment in 565 holds here -
> http://issues.apache.org/jira/browse/LUCENE-565#action_12432155
> - if your application is buffering deletes/updates and
> then batch the deletes you probably won't see a large
> improvement. But if your application does not buffer
> the deletes and does not batch them, then I believe
> moving to IndexWriter.delete() (and update()) should
> buy you performance improvement, because IndexWriter
> would now buffer the deletes for you.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 11:37:25 2007
Return-Path: <java-user-return-29618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5991 invoked from network); 3 Aug 2007 11:37:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 11:37:24 -0000
Received: (qmail 4307 invoked by uid 500); 3 Aug 2007 11:37:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4274 invoked by uid 500); 3 Aug 2007 11:37:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4263 invoked by uid 99); 3 Aug 2007 11:37:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 04:37:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 11:36:52 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IGvSa-0008Vo-V5
	for java-user@lucene.apache.org; Fri, 03 Aug 2007 04:36:48 -0700
Message-ID: <11981677.post@talk.nabble.com>
Date: Fri, 3 Aug 2007 04:36:48 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: Get the terms and frequency vector of an indexed but unstored
 field
In-Reply-To: <11980001.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
References: <11980001.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


you can use IndexReader.getTermFreqVectors(int n) to get all terms and their
frequencies. Make sure when you create an index, you choose option to store
it by specifying Field.TermVector option.
Check out http://www.cnlp.org/presentations/slides/AdvancedLuceneEU.pdf



tierecke wrote:
> 
> Hi,
> 
> I indexed a large number of large documents, but I did not store the
> document themselves, just indexed them.
> Now I am interested in getting the vector (i.e.: the terms indexed and the
> frequency) of that indexed but unstored field.
> doc.getField (fieldname) returns null.
> How can I get the data? It must be there, since it's a part of the index,
> or am I wrong?
> 
> Would be grateful for a quick result (need to submit data for a conference
> this weekend).
> thanks,
> Nir.
> 

-- 
View this message in context: http://www.nabble.com/Get-the-terms-and-frequency-vector-of-an-indexed-but-unstored-field-tf4211430.html#a11981677
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 13:20:14 2007
Return-Path: <java-user-return-29619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52931 invoked from network); 3 Aug 2007 13:20:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 13:20:13 -0000
Received: (qmail 74406 invoked by uid 500); 3 Aug 2007 13:20:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74374 invoked by uid 500); 3 Aug 2007 13:20:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74363 invoked by uid 99); 3 Aug 2007 13:20:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 06:20:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.39.55] (HELO web53812.mail.re2.yahoo.com) (206.190.39.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 03 Aug 2007 13:20:01 +0000
Received: (qmail 37630 invoked by uid 60001); 3 Aug 2007 13:19:40 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=0a8l8jhi+mTX/71nRGgyKGL4m+COa3gQfa2s8Bi4tG0E0CRS3NtNMbqm3r/11CznwVvCG05ESN7AAu5ULE2DW1QMpBPUpm9RwnW4TVTHhJx85jgDp36VAZ5fOnw4rGXyrLZzAOKmH5Mr5JF1zvsZ81sl0tL7hN3bNQFul6Ik4z4=;
X-YMail-OSG: 1JAkJqEVM1kygK2DoAywXAe5SjML71gPnSc.I3f8qWybzpApwaH_9IqNCUGv.n2DmPG0kPB7uz9MNsyKCcKchz1_WQR_F_X.Rzo9eV4aNldBP6dsCSQ-
Received: from [24.60.118.203] by web53812.mail.re2.yahoo.com via HTTP; Fri, 03 Aug 2007 06:19:40 PDT
Date: Fri, 3 Aug 2007 06:19:40 -0700 (PDT)
From: Joe R <vinnyjojo@yahoo.com>
Subject: Re: How do YOU detect corrupt indexes?
To: java-user@lucene.apache.org
In-Reply-To: <200708031645.58731.daniel@nuix.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <276657.37223.qm@web53812.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


We're planning on using encryption at the filesystem level (whole-disk
encryption) and, to be honest, I don't have a mechanism that can produce the
changes I'm talking about.  Neither does my boss, unfortunately ;)  He came
along one day and asked, "how do we know when data changed on disk without us
doing it?" -- and no, I couldn't get a mechanism out of him then.

I've yet to go through LUCENE-737 (and the Nabble thread it refers to.)  I'd
missed it; thanks for the pointer.

Maliciousness is certainly a possibility, but not likely.  Because a lot of the
data we store is sensitive, we've made sure that the system surrounding the
data is secure and that nobody actually has access to the data itself (there's
no root access on these boxes, the one user that can log in is jailed and the
network is "secure".)  What's more, we hold four copies of the index on four
seperate boxes, two each in two geographically seperated data centers, and
whoever wanted to change the data would have to get into both centers and mod
all four copies.  Any hardware-level fault would also have to operate on all
four copies, so that isn't likely, either.

What's most likely is a software fault.  My thought is to have a seperate
service running whose sole purpose is to "check data integrity", whatever that
means, and (hopefully) shares little code with our main service.  Of course, we
still have some third-party code to accomodate (Lucene included, of course) and
while those have been reliable so far, we can't rule out future problems.

I suppose that the main implementation problem here is that comparing the four
copies of the raw index data itself to each other would operate on a LOT of
data.  I was wondering if anyone had had success with an implementation that
operated on individual documents, groups of documents or some other, smaller
group of data.

Thanks again, sorry for leaving the mechanism and encryption details out.


-j


--- Daniel Noll <daniel@nuix.com> wrote:

> On Friday 03 August 2007 16:03:22 Doron Cohen wrote:
> > What is the anticipated cause of corruption? Malicious?
> > Hardware fault? This somewhat reminds of discussions in
> > the list about encrypting the index. See LUCENE-737
> > and a discussion pointed by it. One of the opinions
> > there was that encryption should be handled at a lower
> > level (OS/FS). Wouldn't that hold here as well?
> 
> That's actually a good point.  These days we have filesystems like ZFS which 
> check for corruption automatically.  This should remove a lot of the extra 
> digesting work people would otherwise need to do to ensure consistency.
> 
> Daniel
> 
> 
> -- 
> Daniel Noll
> Nuix Pty Ltd
> Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
> Web: http://nuix.com/                               Fax: +61 2 9212 6902
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 



       
____________________________________________________________________________________
Building a website is a piece of cake. Yahoo! Small Business gives you all the tools to get online.
http://smallbusiness.yahoo.com/webhosting 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 13:35:55 2007
Return-Path: <java-user-return-29620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67546 invoked from network); 3 Aug 2007 13:35:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 13:35:55 -0000
Received: (qmail 2146 invoked by uid 500); 3 Aug 2007 13:35:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2115 invoked by uid 500); 3 Aug 2007 13:35:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2104 invoked by uid 99); 3 Aug 2007 13:35:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 06:35:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 13:35:43 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IGxJK-0003aM-UJ
	for java-user@lucene.apache.org; Fri, 03 Aug 2007 06:35:22 -0700
Message-ID: <11983495.post@talk.nabble.com>
Date: Fri, 3 Aug 2007 06:35:22 -0700 (PDT)
From: tierecke <nir.nussbaum@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Get the terms and frequency vector of an indexed but unstored
 field
In-Reply-To: <11980001.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: nir.nussbaum@gmail.com
References: <11980001.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks a lot, that works 100%!...
Fortunately, I did use the flag to state that Lucene should store the term
frequency vector. Otherwise, I'd have to index 77GB right now... :-)
-- 
View this message in context: http://www.nabble.com/Get-the-terms-and-frequency-vector-of-an-indexed-but-unstored-field-tf4211430.html#a11983495
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 13:38:05 2007
Return-Path: <java-user-return-29621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69059 invoked from network); 3 Aug 2007 13:38:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 13:38:04 -0000
Received: (qmail 8576 invoked by uid 500); 3 Aug 2007 13:37:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8534 invoked by uid 500); 3 Aug 2007 13:37:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8523 invoked by uid 99); 3 Aug 2007 13:37:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 06:37:57 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 13:37:31 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IGxLM-0003dI-6m
	for java-user@lucene.apache.org; Fri, 03 Aug 2007 06:37:28 -0700
Message-ID: <11983532.post@talk.nabble.com>
Date: Fri, 3 Aug 2007 06:37:28 -0700 (PDT)
From: tierecke <nir.nussbaum@gmail.com>
To: java-user@lucene.apache.org
Subject: How can I get the Document Frequency for a specific term???
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20938_8261386.1186148248202"
X-Nabble-From: nir.nussbaum@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20938_8261386.1186148248202
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hi,

Can I know in how many documents a term appears (DF - Document Frequency)?
Does Lucene keep it? Can I retrieve it?

thanks a lot from Amsterdam, 
Nir.
-- 
View this message in context: http://www.nabble.com/How-can-I-get-the-Document-Frequency-for-a-specific-term----tf4212615.html#a11983532
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

------=_Part_20938_8261386.1186148248202--


From java-user-return-29622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 13:48:01 2007
Return-Path: <java-user-return-29622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74169 invoked from network); 3 Aug 2007 13:47:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 13:47:59 -0000
Received: (qmail 27017 invoked by uid 500); 3 Aug 2007 13:47:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26977 invoked by uid 500); 3 Aug 2007 13:47:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26964 invoked by uid 99); 3 Aug 2007 13:47:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 06:47:54 -0700
X-ASF-Spam-Status: No, hits=4.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 13:47:30 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IGxV0-0003th-Hv
	for java-user@lucene.apache.org; Fri, 03 Aug 2007 06:47:26 -0700
Message-ID: <11983532.post@talk.nabble.com>
Date: Fri, 3 Aug 2007 06:47:26 -0700 (PDT)
From: tierecke <nir.nussbaum@gmail.com>
To: java-user@lucene.apache.org
Subject: How can I get the Document Frequency for a specific term??? And
 more questions...
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20999_9342293.1186148846548"
X-Nabble-From: nir.nussbaum@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20999_9342293.1186148846548
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hi,

Can I know in how many documents a term appears (DF - Document Frequency)?
Does Lucene keep it? Can I retrieve it?

Now - an even more advanced question:
Since I have a 77GB index, I cut it into 25 smaller indices of 3GB each and
I query them using MultiSearcher. Is there a possibility to know the DF of a
term throughout the whole collection or do I need to ask each index for the
DF of a specific term (supposing that my first question is solvable).

And the last question: Is there a way to know the total number of documents
in a Lucene Index? Is there a way to know the total number of documents in
multiple indexes together?

I hope it's not too much. Suddenly I find myself dealing with stuff I never
dealt before.

thanks a lot from Amsterdam, 
Nir.
-- 
View this message in context: http://www.nabble.com/How-can-I-get-the-Document-Frequency-for-a-specific-term----And-more-questions...-tf4212615.html#a11983532
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

------=_Part_20999_9342293.1186148846548--


From java-user-return-29623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 14:10:04 2007
Return-Path: <java-user-return-29623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86610 invoked from network); 3 Aug 2007 14:10:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 14:10:04 -0000
Received: (qmail 68820 invoked by uid 500); 3 Aug 2007 14:09:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68786 invoked by uid 500); 3 Aug 2007 14:09:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68775 invoked by uid 99); 3 Aug 2007 14:09:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 07:09:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [213.215.131.235] (HELO quo2.webchatworld.com) (213.215.131.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 14:09:35 +0000
Received: from bohr.translated.home (213-140-16-177.fastres.net [213.140.16.177])
	(authenticated bits=0)
	by quo2.webchatworld.com (8.13.4/8.12.1) with ESMTP id l73EP3pu002782
	for <java-user@lucene.apache.org>; Fri, 3 Aug 2007 16:25:04 +0200
Received: from [192.168.1.173] (IP-173.translated.home [192.168.1.173])
	by bohr.translated.home (Postfix) with ESMTP id 18DC636C80B3
	for <java-user@lucene.apache.org>; Fri,  3 Aug 2007 16:09:25 +0200 (CEST)
Message-ID: <46B33718.6040107@translated.net>
Date: Fri, 03 Aug 2007 16:09:28 +0200
From: Luca Rondanini <luca@translated.net>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: strange MultiFieldQueryParser error: java.lang.Integer
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,
I've always used the MultiFieldQueryParser class without problems but 
now i'm experiencing a strange problem.
This is my code:

Map<String, Integer> boost = new HashMap<String, Integer>();
boost.put("field1",5);
boost.put("field2",1);

Analyzer analyzer = new StandardAnalyzer(STOP_WORDS);
String[] s_fields = new String[2];
s_fields[0] = "field1";
s_fields[1] = "field2";
MultiFieldQueryParser mfParser = new 
MultiFieldQueryParser(s_fields,analyzer,boost);
		
try {
	query = mfParser.parse(query_string);
} catch(Exception ex) {
	System.out.println(ex.getMessage());
}	

If I use a query like:
hi all
I'm getting the error: java.lang.Integer
(quite hard to understand!!)

If I use a query like:
field1:hi field1:all field2:hi field2:all
everything works correctly!!

What I'm missing?
Thanks


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 14:15:54 2007
Return-Path: <java-user-return-29624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89253 invoked from network); 3 Aug 2007 14:15:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 14:15:53 -0000
Received: (qmail 83383 invoked by uid 500); 3 Aug 2007 14:15:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83096 invoked by uid 500); 3 Aug 2007 14:15:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82983 invoked by uid 99); 3 Aug 2007 14:15:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 07:15:35 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.190 as permitted sender)
Received: from [209.85.128.190] (HELO fk-out-0910.google.com) (209.85.128.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 14:15:27 +0000
Received: by fk-out-0910.google.com with SMTP id z23so702251fkz
        for <java-user@lucene.apache.org>; Fri, 03 Aug 2007 07:15:06 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=fL7yJP8jutz/NQx4RVW2zMsr7tJkA7yC1jGYB/0THelAVZ8gpyo0T3HMMEnRPM4L2Xk5+D1EaIOetfNXopzSfkCqbI9kmg7UPAEqL2AtvuyrOePVHWXcTig/VpRV4PNMzL1yDQmah2qLgUWIRkom4+UxPJ/aMBEwgH+lMc7uJio=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jVdhriWNlhbYWQ7g4REmYhLsoHosuw9MTUGsPwFZ7zVnMyPhzSW/ONGl2XF2GgFR46R7DpTn5V4mRLDL+K9YcgZArkrptyQDTbfB2zTS0gXEV3MjVFR9wFqB8il0S7SkVdEln78GHt4Xcgc/teCiIeyVanOylJ7A9WKXwYyKQp4=
Received: by 10.82.178.11 with SMTP id a11mr3963308buf.1186150506201;
        Fri, 03 Aug 2007 07:15:06 -0700 (PDT)
Received: by 10.82.190.14 with HTTP; Fri, 3 Aug 2007 07:15:06 -0700 (PDT)
Message-ID: <359a92830708030715l7d2ccfa1k9b0aa371c6ac6411@mail.gmail.com>
Date: Fri, 3 Aug 2007 10:15:06 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Get the TokenStream of an indexed but unstored field
In-Reply-To: <11980001.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_65954_2181599.1186150506183"
References: <11980001.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_65954_2181599.1186150506183
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

<<<I indexed a large number of large documents, but I did not index the
document themselves.>>>

This is really confusing since it's self-contradictory. Could you
post the lines where you do the document.add() for the fields in
question?

Best
Erick

On 8/3/07, tierecke <nir.nussbaum@gmail.com> wrote:
>
>
> Hi,
>
> I indexed a large number of large documents, but I did not index the
> document themselves.
> Now I am interested in getting the vector (i.e.: the terms indexed and the
> frequency) of that indexed but unstored field.
> doc.getField (fieldname) returns null.
> How can I get the data? It must be there, since it's a part of the index,
> or
> am I wrong?
>
> Would be grateful for a quick result (need to submit data for a conference
> this weekend).
> thanks,
> Nir.
> --
> View this message in context:
> http://www.nabble.com/Get-the-TokenStream-of-an-indexed-but-unstored-field-tf4211430.html#a11980001
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>

------=_Part_65954_2181599.1186150506183--

From java-user-return-29625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 14:30:26 2007
Return-Path: <java-user-return-29625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96554 invoked from network); 3 Aug 2007 14:30:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 14:30:25 -0000
Received: (qmail 43066 invoked by uid 500); 3 Aug 2007 14:30:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43035 invoked by uid 500); 3 Aug 2007 14:30:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43020 invoked by uid 99); 3 Aug 2007 14:30:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 07:30:17 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 14:29:54 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IGyA2-0005D2-Fp
	for java-user@lucene.apache.org; Fri, 03 Aug 2007 07:29:50 -0700
Message-ID: <11984434.post@talk.nabble.com>
Date: Fri, 3 Aug 2007 07:29:50 -0700 (PDT)
From: tierecke <nir.nussbaum@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Get the TokenStream of an indexed but unstored field
In-Reply-To: <359a92830708030715l7d2ccfa1k9b0aa371c6ac6411@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: nir.nussbaum@gmail.com
References: <11980001.post@talk.nabble.com> <359a92830708030715l7d2ccfa1k9b0aa371c6ac6411@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I fixed my question later. I meant I did not STORE the document themselves.
Anyway - the issue is already solved, thank to testn.
But there are new hard (for me) questions.
Thanks a lot!

Erick Erickson wrote:
> 
> I indexed a large number of large documents, but I did not index the
> document themselves.
> 
> This is really confusing since it's self-contradictory. Could you
> post the lines where you do the document.add() for the fields in
> question?
> 
> Best
> Erick
> 
-- 
View this message in context: http://www.nabble.com/Get-the-terms-and-frequency-vector-of-an-indexed-but-unstored-field-tf4211430.html#a11984434
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 14:49:42 2007
Return-Path: <java-user-return-29626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4968 invoked from network); 3 Aug 2007 14:49:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 14:49:40 -0000
Received: (qmail 90302 invoked by uid 500); 3 Aug 2007 14:49:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90278 invoked by uid 500); 3 Aug 2007 14:49:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90261 invoked by uid 99); 3 Aug 2007 14:49:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 07:49:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.29] (HELO smtp-vbr9.xs4all.nl) (194.109.24.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 14:49:29 +0000
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr9.xs4all.nl (8.13.8/8.13.8) with ESMTP id l73En8n6017869
	for <java-user@lucene.apache.org>; Fri, 3 Aug 2007 16:49:08 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Can I do boosting based on term postions?
Date: Fri, 3 Aug 2007 16:49:07 +0200
User-Agent: KMail/1.8.2
References: <839ba01c0707312113p278da04bg636e2bfa853e6ff4@mail.gmail.com> <200708020922.55296.paul.elschot@xs4all.nl> <839ba01c0708022038r7bf26d50nf4756773b76a9bdd@mail.gmail.com>
In-Reply-To: <839ba01c0708022038r7bf26d50nf4756773b76a9bdd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200708031649.07438.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Cedric,

You can choose the end limit for SpanFirstQuery yourself.

Regards,
Paul Elschot


On Friday 03 August 2007 05:38, Cedric Ho wrote:
> Hi Paul,
>=20
> Isn't SpanFirstQuery only match those with position less than a
> certain end position?
>=20
> I am rather looking for a query that would score a document higher for
> terms appear near the start but not totally discard those with terms
> appear near the end.
>=20
> Regards,
> Cedric
>=20
> On 8/2/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> > Cedric,
> >
> > SpanFirstQuery could be a solution without payloads.
> > You may want to give it your own Similarity.sloppyFreq() .
> >
> > Regards,
> > Paul Elschot
> >
> > On Thursday 02 August 2007 04:07, Cedric Ho wrote:
> > > Thanks for the quick response =3D)
> > >
> > > On 8/1/07, Shailendra Sharma <shailendra.sharma@gmail.com> wrote:
> > > > Yes, it is easily doable through "Payload" facility. During indexing
> > process
> > > > (mainly tokenization), you need to push this extra information in e=
ach
> > > > token. And then you can use BoostingTermQuery for using Payload val=
ue=20
to
> > > > include Payload in the score. You also need to implement Similarity=
=20
for
> > this
> > > > (mainly scorePayload method).
> > >
> > > If I store, say a custom boost factor as Payload, does it means that I
> > > will store one more byte per term per document in the index file? So
> > > the index file would be much larger?
> > >
> > > >
> > > > Other way can be to extend SpanTermQuery, this already calculates t=
he
> > > > position of match. You just need to do something to use this positi=
on
> > value
> > > > in the score calculation.
> > >
> > > I see that SpanTermQuery takes a TermPositions from the indexReader
> > > and I can get the term position from there. However I am not sure how
> > > to incorporate it into the score calculation. Would you mind give a
> > > little more detail on this?
> > >
> > > >
> > > > One possible advantage of SpanTermQuery approach is that you can pl=
ay
> > > > around, without re-creating indices everytime.
> > > >
> > > > Thanks,
> > > > Shailendra Sharma,
> > > > CTO, Ver se' Innovation Pvt. Ltd.
> > > > Bangalore, India
> > > >
> > > > On 8/1/07, Cedric Ho <cedric.ho@gmail.com> wrote:
> > > > >
> > > > > Hi all,
> > > > >
> > > > > I was wondering if it is possible to do boosting by search terms'
> > > > > position in the document.
> > > > >
> > > > > for example:
> > > > > search terms appear in the first 100 words, or first 10% words, o=
r=20
in
> > > > > first two paragraphs would be given higher score.
> > > > >
> > > > > Is it achievable through using the new Payload function in lucene=
=20
2.2?
> > > > > Or are there any easier ways to achieve these ?
> > > > >
> > > > >
> > > > > Regards,
> > > > > Cedric
> > > > >
> > > > >=20
=2D--------------------------------------------------------------------
> > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > > >
> > > > >
> > > >
> > >
> > > Thanks,
> > > Cedric
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
>=20
> --=20
> =E6=84=9B@=E4=B8=8A.Keyboard
>=20
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 15:30:32 2007
Return-Path: <java-user-return-29627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71723 invoked from network); 3 Aug 2007 15:30:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 15:30:31 -0000
Received: (qmail 64620 invoked by uid 500); 3 Aug 2007 15:30:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64580 invoked by uid 500); 3 Aug 2007 15:30:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64549 invoked by uid 99); 3 Aug 2007 15:30:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 08:30:21 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 15:29:57 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IGz69-00077L-In
	for java-user@lucene.apache.org; Fri, 03 Aug 2007 08:29:53 -0700
Message-ID: <11985571.post@talk.nabble.com>
Date: Fri, 3 Aug 2007 08:29:53 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: strange MultiFieldQueryParser error: java.lang.Integer
In-Reply-To: <46B33718.6040107@translated.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
References: <46B33718.6040107@translated.net>
X-Virus-Checked: Checked by ClamAV on apache.org


Boost must be Map<String, Float>

Luca123 wrote:
> 
> Hi all,
> I've always used the MultiFieldQueryParser class without problems but 
> now i'm experiencing a strange problem.
> This is my code:
> 
> Map<String, Integer> boost = new HashMap<String, Integer>();
> boost.put("field1",5);
> boost.put("field2",1);
> 
> Analyzer analyzer = new StandardAnalyzer(STOP_WORDS);
> String[] s_fields = new String[2];
> s_fields[0] = "field1";
> s_fields[1] = "field2";
> MultiFieldQueryParser mfParser = new 
> MultiFieldQueryParser(s_fields,analyzer,boost);
> 		
> try {
> 	query = mfParser.parse(query_string);
> } catch(Exception ex) {
> 	System.out.println(ex.getMessage());
> }	
> 
> If I use a query like:
> hi all
> I'm getting the error: java.lang.Integer
> (quite hard to understand!!)
> 
> If I use a query like:
> field1:hi field1:all field2:hi field2:all
> everything works correctly!!
> 
> What I'm missing?
> Thanks
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/strange-MultiFieldQueryParser-error%3A-java.lang.Integer-tf4212784.html#a11985571
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 15:55:19 2007
Return-Path: <java-user-return-29628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17297 invoked from network); 3 Aug 2007 15:55:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 15:55:17 -0000
Received: (qmail 13812 invoked by uid 500); 3 Aug 2007 15:55:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13779 invoked by uid 500); 3 Aug 2007 15:55:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13768 invoked by uid 99); 3 Aug 2007 15:55:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 08:55:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ryanackley@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 15:55:03 +0000
Received: by wa-out-1112.google.com with SMTP id j40so939548wah
        for <java-user@lucene.apache.org>; Fri, 03 Aug 2007 08:54:43 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=gJnUv9thpWTz+ruPXWRG7bEcKDUgY6f4S2vBd7bRxjCLhWVuillyhjaSV6x5HuWUBfDHdLKxHrfRPupy7syIk9o/KEVG7+NXW1ZMowAKKjXoks8atgIZPFcNSKKT3wSbr1Oe5xISts1QwXDFBxPiL9SzzbX3T/Dlr1RP1g5lkBw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Xg+LSQLmIF96Uh4kCh/vf/+EFzBJ8HTu6ZNbPzP9caClCjIOnfdobmbvPRzljBsbM+WEWYtQHSqixL5Jds3OOi0z9OECBG7El6Ptb7ySZyyau6c2wBFSwF2Qs15UxsiN4LVISiNUOCr2bfC28Id30thNc/hJeaGEwKbZiFQlR9s=
Received: by 10.115.108.1 with SMTP id k1mr3075595wam.1186156481404;
        Fri, 03 Aug 2007 08:54:41 -0700 (PDT)
Received: by 10.115.94.10 with HTTP; Fri, 3 Aug 2007 08:54:41 -0700 (PDT)
Message-ID: <e15c52dc0708030854q3f337d9cpeca06ab34d4321f7@mail.gmail.com>
Date: Fri, 3 Aug 2007 11:54:41 -0400
From: "Ryan Ackley" <ryanackley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: extracting non-english text from word, pdf, etc....??
In-Reply-To: <20070802104641.8sg625sfy8og00w0@localhost>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <921764FE-0113-1000-FE74-856B9C5D860C-Webmail-10021@mac.com>
	 <11962580.post@talk.nabble.com> <46B1D51A.3000702@mac.com>
	 <AE0ECCC6-611B-4E79-8096-09BC337DA925@apache.org>
	 <20070802104641.8sg625sfy8og00w0@localhost>
X-Virus-Checked: Checked by ClamAV on apache.org

The textmining library (textmining.org) for Word docs should work fine
with non-english text as well. Let me know if it doesn't

On 8/2/07, Ben Litchfield <ben@benlitchfield.com> wrote:
> In terms of PDF documents...
>
> PDFBox should work just fine with any latin based languages; at this
> time certain PDFs that have CJK characters can pose some issues.  In
> general english/french/spanish should be fine.
>
> Some PDFs use custom encodings that make it impossible to extract text
> and it comes out as gibberish.  As a simple test if Acrobat can
> extract the text then PDFBox should be able to as well.
>
> Ben
>
>
> Quoting Grant Ingersoll <gsingers@apache.org>:
>
> > Hey Michael,
> >
> > Have you given it a try?  I would think they would work, but haven't
> > actually done it.   Setup a small test that reads in a PDF in French or
> > Spanish and give it a try.  You might have to worry about encodings or
> > something, but the structure of the files should be the same, i.e. they
> > are valid Word, etc. documents.
> >
> > -Grant
> >
> > On Aug 2, 2007, at 8:59 AM, Michael J. Prichard wrote:
> >
> >> Yea, I have seen those.  I guess the question is what do you all
> >> use to extract text from Word, Excel, PPT and PDF?  Can I use POI,
> >> PDFBox and so on?  This is what I use now to extract english.
> >>
> >> Thanks,
> >> Michael
> >>
> >> testn wrote:
> >>> If you can extract token stream from those files already, you can
> >>> simply use
> >>> different analyzers to analyze those token stream appropriately. Check out
> >>> Lucen-contrib analyzers at
> >>> http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/analyzers/src/java/org/apache/lucene/analysis/
> >>>
> >>>
> >>>
> >>> heybluez wrote:
> >>>
> >>>> I know how to do english text with POI and PDFBox and so on.  Now, I want
> >>>> to start indexing non-english language such as french and spanish.  Which
> >>>> extraction libs are available for me?
> >>>>
> >>>> I want to do:
> >>>>
> >>>> Excel
> >>>> Word
> >>>> PowerPoint
> >>>> PDF
> >>>> HTML
> >>>> RTF
> >>>>
> >>>> Thanks!
> >>>> Michael
> >>>>
> >>>> ---------------------------------------------------------------------
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>>>
> >>>>
> >>>
> >>>
> >>
> >
> > --------------------------
> > Grant Ingersoll
> > http://lucene.grantingersoll.com
> >
> > Lucene Helpful Hints:
> > http://wiki.apache.org/lucene-java/BasicsOfPerformance
> > http://wiki.apache.org/lucene-java/LuceneFAQ
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 16:21:23 2007
Return-Path: <java-user-return-29629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53239 invoked from network); 3 Aug 2007 16:21:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 16:21:22 -0000
Received: (qmail 92546 invoked by uid 500); 3 Aug 2007 16:21:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92503 invoked by uid 500); 3 Aug 2007 16:21:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92486 invoked by uid 99); 3 Aug 2007 16:21:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 09:21:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [213.215.131.235] (HELO quo2.webchatworld.com) (213.215.131.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 16:20:57 +0000
Received: from bohr.translated.home (213-140-16-177.fastres.net [213.140.16.177])
	(authenticated bits=0)
	by quo2.webchatworld.com (8.13.4/8.12.1) with ESMTP id l73GZlc3007433
	for <java-user@lucene.apache.org>; Fri, 3 Aug 2007 18:35:48 +0200
Received: from [192.168.1.173] (IP-173.translated.home [192.168.1.173])
	by bohr.translated.home (Postfix) with ESMTP id F1E8636C80B3
	for <java-user@lucene.apache.org>; Fri,  3 Aug 2007 18:20:06 +0200 (CEST)
Message-ID: <46B355BA.1050801@translated.net>
Date: Fri, 03 Aug 2007 18:20:10 +0200
From: Luca Rondanini <luca@translated.net>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: strange MultiFieldQueryParser error: java.lang.Integer
References: <46B33718.6040107@translated.net> <11985571.post@talk.nabble.com>
In-Reply-To: <11985571.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Sometimes I feel stupid! ;)
Thank you very much!
Luca


testn wrote:
> Boost must be Map<String, Float>
> 
> Luca123 wrote:
> 
>>Hi all,
>>I've always used the MultiFieldQueryParser class without problems but 
>>now i'm experiencing a strange problem.
>>This is my code:
>>
>>Map<String, Integer> boost = new HashMap<String, Integer>();
>>boost.put("field1",5);
>>boost.put("field2",1);
>>
>>Analyzer analyzer = new StandardAnalyzer(STOP_WORDS);
>>String[] s_fields = new String[2];
>>s_fields[0] = "field1";
>>s_fields[1] = "field2";
>>MultiFieldQueryParser mfParser = new 
>>MultiFieldQueryParser(s_fields,analyzer,boost);
>>		
>>try {
>>	query = mfParser.parse(query_string);
>>} catch(Exception ex) {
>>	System.out.println(ex.getMessage());
>>}	
>>
>>If I use a query like:
>>hi all
>>I'm getting the error: java.lang.Integer
>>(quite hard to understand!!)
>>
>>If I use a query like:
>>field1:hi field1:all field2:hi field2:all
>>everything works correctly!!
>>
>>What I'm missing?
>>Thanks
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 18:28:44 2007
Return-Path: <java-user-return-29630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14594 invoked from network); 3 Aug 2007 18:28:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 18:28:43 -0000
Received: (qmail 64478 invoked by uid 500); 3 Aug 2007 18:28:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64435 invoked by uid 500); 3 Aug 2007 18:28:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64424 invoked by uid 99); 3 Aug 2007 18:28:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 11:28:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mike.klaas@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 18:28:32 +0000
Received: by wa-out-1112.google.com with SMTP id j40so977221wah
        for <java-user@lucene.apache.org>; Fri, 03 Aug 2007 11:28:09 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=KGtCOlpULcTGH/FwmOQGLGRdyd27z/VQbEqiPYBJ6wJgoR4FSUczOU6d/fkFx/0WctnvmAi3uHqwd8A+NepW5yIFiZ8039eY5sojj+p4CaVqlGMYlXIrpqWGOqzP7Tpwn9C3bGoSU1/pe78oz3FriXbfDP/w2T2eWyM1osvtqUE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=CvjE+P6np5VBt7zuvF7XrrYgjggPu+1WtlJvGXANUihkUZff9sGS/F9POJwtIFmLP0OibWgox8s99Cyd2XSmdGVZxN7J95r0UyJ3/XdOsHi75tmgDkdId3oTKb0WGo4Dfc6hSNw9LVs4J/9/C3tsu/LZcjwJd74nirHhae+nr88=
Received: by 10.114.93.17 with SMTP id q17mr3227355wab.1186165689276;
        Fri, 03 Aug 2007 11:28:09 -0700 (PDT)
Received: from ?192.168.1.103? ( [24.82.155.191])
        by mx.google.com with ESMTPS id v35sm5000470wah.2007.08.03.11.28.07
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 03 Aug 2007 11:28:08 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <46B30322.7080104@gmail.com>
References: <OF370CB93C.4AE25472-ON8825732C.001E844F-8825732C.001F69B7@il.ibm.com> <46B30322.7080104@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <137CFCB5-FB31-460E-9AE1-850ED6D74885@gmail.com>
Content-Transfer-Encoding: 7bit
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: Performance improvements using writer.delete vs reader.delete
Date: Fri, 3 Aug 2007 11:28:08 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On 3-Aug-07, at 3:27 AM, Mark Miller wrote:

> Also, IndexWriter probably buffers better than you would. If you  
> buffer a delete with IndexWriter and then add a document that would  
> be removed by that delete right after, when the buffered deletes  
> are flushed, your latest doc will not be removed. Its unlikely your  
> own buffer system would work so well.

Is it?  ISTM that any sane buffering system would account for that case.

-Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 18:36:31 2007
Return-Path: <java-user-return-29631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16217 invoked from network); 3 Aug 2007 18:36:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 18:36:30 -0000
Received: (qmail 78352 invoked by uid 500); 3 Aug 2007 18:36:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78313 invoked by uid 500); 3 Aug 2007 18:36:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78296 invoked by uid 99); 3 Aug 2007 18:36:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 11:36:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shailendra.sharma@gmail.com designates 64.233.162.236 as permitted sender)
Received: from [64.233.162.236] (HELO nz-out-0506.google.com) (64.233.162.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 18:36:21 +0000
Received: by nz-out-0506.google.com with SMTP id i28so356454nzi
        for <java-user@lucene.apache.org>; Fri, 03 Aug 2007 11:36:00 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=nvtJ+aFHvVTZ9Q+AT7gClRAP7PdQLAC8xvgzD4UdHt6Xvc86gTDZsRZHR143dRJCFBWiFKMfdaogs/TmY3DfgQ3X8vkdvXbAkTeDZd381LEb+YD4x7IHF6jNdaOczShLnSFYy0nIzDOTLkxCr6jgtOk5Tzuanod5TglsQdp0Zvo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Gw4j2CFNenVh4O9o5tG9cuSN0y+kaHR39W/0AGd4mhDiweUJRDFNylIoL3780jU8POciQfXxVpgcWW05f4iZnHZ9SarMu5L2j6gb5OgkHjFhozjWoTXXeCmlptnwjYgZxjxS7/3vWg5ZDccNG++nhjGgKDt1iVkRB2r/vkXtQn4=
Received: by 10.143.16.9 with SMTP id t9mr146669wfi.1186166159796;
        Fri, 03 Aug 2007 11:35:59 -0700 (PDT)
Received: by 10.143.18.7 with HTTP; Fri, 3 Aug 2007 11:35:58 -0700 (PDT)
Message-ID: <d27fa17e0708031135i5692e3c6laf4328a09992dd80@mail.gmail.com>
Date: Sat, 4 Aug 2007 00:05:58 +0530
From: "Shailendra Sharma" <shailendra.sharma@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Can I do boosting based on term postions?
In-Reply-To: <200708031649.07438.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_105989_7616100.1186166158743"
References: <839ba01c0707312113p278da04bg636e2bfa853e6ff4@mail.gmail.com>
	 <200708020922.55296.paul.elschot@xs4all.nl>
	 <839ba01c0708022038r7bf26d50nf4756773b76a9bdd@mail.gmail.com>
	 <200708031649.07438.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_105989_7616100.1186166158743
Content-Type: text/plain; charset=ISO-2022-JP
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Paul,

If I understand Cedric right, he wants to have different boosting depending
on search term positions in the document. By using SpanFirstQuery he will
only be able to consider in terms till particular position; but he won't be
able to do something like following:
  a) Give 100% boosting to matching in first 100 words.
  b) Give 80% boosting to matching in next 100 words.
  c) Give 60% boosting to matching in next 100 words.

Though it can be done by writing DisjunctionMaxQuery having multiple
SpanFirstQuery with different boosting - but I see it as a workaround only
and not the direct and efficient solution.

Cedric,

I am sending you the implementation of SpanTermQuery to your gmail
account (lucene
mailing list is bouncing email with attachment). I have named the class as
VSpanTermQuery (I have followed the same package hierarchy as lucene). You
also need to extend VSimilarity class - which would require implementation
of method scoreSpan(..).

Let me know how it went. Though I did a testing for it, but before
submitting to contrib, I need to do extensive testing.

Thanks,
Shailendra

On 8/3/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
>
> Cedric,
>
> You can choose the end limit for SpanFirstQuery yourself.
>
> Regards,
> Paul Elschot
>
>
> On Friday 03 August 2007 05:38, Cedric Ho wrote:
> > Hi Paul,
> >
> > Isn't SpanFirstQuery only match those with position less than a
> > certain end position?
> >
> > I am rather looking for a query that would score a document higher for
> > terms appear near the start but not totally discard those with terms
> > appear near the end.
> >
> > Regards,
> > Cedric
> >
> > On 8/2/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> > > Cedric,
> > >
> > > SpanFirstQuery could be a solution without payloads.
> > > You may want to give it your own Similarity.sloppyFreq() .
> > >
> > > Regards,
> > > Paul Elschot
> > >
> > > On Thursday 02 August 2007 04:07, Cedric Ho wrote:
> > > > Thanks for the quick response =)
> > > >
> > > > On 8/1/07, Shailendra Sharma <shailendra.sharma@gmail.com> wrote:
> > > > > Yes, it is easily doable through "Payload" facility. During
> indexing
> > > process
> > > > > (mainly tokenization), you need to push this extra information in
> each
> > > > > token. And then you can use BoostingTermQuery for using Payload
> value
> to
> > > > > include Payload in the score. You also need to implement
> Similarity
> for
> > > this
> > > > > (mainly scorePayload method).
> > > >
> > > > If I store, say a custom boost factor as Payload, does it means that
> I
> > > > will store one more byte per term per document in the index file? So
> > > > the index file would be much larger?
> > > >
> > > > >
> > > > > Other way can be to extend SpanTermQuery, this already calculates
> the
> > > > > position of match. You just need to do something to use this
> position
> > > value
> > > > > in the score calculation.
> > > >
> > > > I see that SpanTermQuery takes a TermPositions from the indexReader
> > > > and I can get the term position from there. However I am not sure
> how
> > > > to incorporate it into the score calculation. Would you mind give a
> > > > little more detail on this?
> > > >
> > > > >
> > > > > One possible advantage of SpanTermQuery approach is that you can
> play
> > > > > around, without re-creating indices everytime.
> > > > >
> > > > > Thanks,
> > > > > Shailendra Sharma,
> > > > > CTO, Ver se' Innovation Pvt. Ltd.
> > > > > Bangalore, India
> > > > >
> > > > > On 8/1/07, Cedric Ho <cedric.ho@gmail.com> wrote:
> > > > > >
> > > > > > Hi all,
> > > > > >
> > > > > > I was wondering if it is possible to do boosting by search
> terms'
> > > > > > position in the document.
> > > > > >
> > > > > > for example:
> > > > > > search terms appear in the first 100 words, or first 10% words,
> or
> in
> > > > > > first two paragraphs would be given higher score.
> > > > > >
> > > > > > Is it achievable through using the new Payload function in
> lucene
> 2.2?
> > > > > > Or are there any easier ways to achieve these ?
> > > > > >
> > > > > >
> > > > > > Regards,
> > > > > > Cedric
> > > > > >
> > > > > >
> ---------------------------------------------------------------------
> > > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > > > > >
> > > > > >
> > > > >
> > > >
> > > > Thanks,
> > > > Cedric
> > > >
> > > >
> ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > $B0&(B@$B>e(B.Keyboard
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_105989_7616100.1186166158743--

From java-user-return-29632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 19:12:17 2007
Return-Path: <java-user-return-29632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26756 invoked from network); 3 Aug 2007 19:12:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 19:12:16 -0000
Received: (qmail 41993 invoked by uid 500); 3 Aug 2007 19:12:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41954 invoked by uid 500); 3 Aug 2007 19:12:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41943 invoked by uid 99); 3 Aug 2007 19:12:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 12:12:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.35] (HELO smtp-vbr15.xs4all.nl) (194.109.24.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 19:11:47 +0000
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr15.xs4all.nl (8.13.8/8.13.8) with ESMTP id l73JBh5O020826
	for <java-user@lucene.apache.org>; Fri, 3 Aug 2007 21:11:43 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Can I do boosting based on term postions?
Date: Fri, 3 Aug 2007 21:11:42 +0200
User-Agent: KMail/1.8.2
References: <839ba01c0707312113p278da04bg636e2bfa853e6ff4@mail.gmail.com> <200708031649.07438.paul.elschot@xs4all.nl> <d27fa17e0708031135i5692e3c6laf4328a09992dd80@mail.gmail.com>
In-Reply-To: <d27fa17e0708031135i5692e3c6laf4328a09992dd80@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200708032111.42593.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

On Friday 03 August 2007 20:35, Shailendra Sharma wrote:
> Paul,
>=20
> If I understand Cedric right, he wants to have different boosting dependi=
ng
> on search term positions in the document. By using SpanFirstQuery he will
> only be able to consider in terms till particular position;=20


> but he won't be=20
> able to do something like following:
>   a) Give 100% boosting to matching in first 100 words.
>   b) Give 80% boosting to matching in next 100 words.
>   c) Give 60% boosting to matching in next 100 words.

> Though it can be done by writing DisjunctionMaxQuery having multiple
> SpanFirstQuery with different boosting - but I see it as a workaround only
> and not the direct and efficient solution.

You're right, but SpanFirstQuery needs only a minor modification
for this to work.

This modification to SpanFirstQuery would be that the Spans
returned by SpanFirstQuery.getSpans() must always return 0
from its start() method. Then the slop passed to sloppyFreq(slop)
would be the distance from the beginning of the indexed field
to the end of the Spans of the SpanQuery passed to SpanFirstQuery.

Then the following should work:

Term firstTerm =3D .... ;

SpanFirstQuery sfq =3D new SpanFirstQuery(
  new SpanTermQuery( firstTerm),
  Integer.MAX_VALUE)) {
=2E..
public Similarity getSimilarity() {
return new Similarity() {
=2E..
float sloppyFreq(slop) {
  return (slop < 100)  ? 1.0f=20
           : (slop < 200) ? 0.8f
           : (slop < 300) ? 0.6f=20
           : 0.4f ; // etc. etc.
}}}}


Actually, I'm a bit surprised that SpanFirstQuery does not work that
way now.

Regards,
Paul Elschot


>=20
> Cedric,
>=20
> I am sending you the implementation of SpanTermQuery to your gmail
> account (lucene
> mailing list is bouncing email with attachment). I have named the class as
> VSpanTermQuery (I have followed the same package hierarchy as lucene). You
> also need to extend VSimilarity class - which would require implementation
> of method scoreSpan(..).
>=20
> Let me know how it went. Though I did a testing for it, but before
> submitting to contrib, I need to do extensive testing.
>=20
> Thanks,
> Shailendra
>=20
> On 8/3/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> >
> > Cedric,
> >
> > You can choose the end limit for SpanFirstQuery yourself.
> >
> > Regards,
> > Paul Elschot
> >
> >
> > On Friday 03 August 2007 05:38, Cedric Ho wrote:
> > > Hi Paul,
> > >
> > > Isn't SpanFirstQuery only match those with position less than a
> > > certain end position?
> > >
> > > I am rather looking for a query that would score a document higher for
> > > terms appear near the start but not totally discard those with terms
> > > appear near the end.
> > >
> > > Regards,
> > > Cedric
> > >
> > > On 8/2/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> > > > Cedric,
> > > >
> > > > SpanFirstQuery could be a solution without payloads.
> > > > You may want to give it your own Similarity.sloppyFreq() .
> > > >
> > > > Regards,
> > > > Paul Elschot
> > > >
> > > > On Thursday 02 August 2007 04:07, Cedric Ho wrote:
> > > > > Thanks for the quick response =3D)
> > > > >
> > > > > On 8/1/07, Shailendra Sharma <shailendra.sharma@gmail.com> wrote:
> > > > > > Yes, it is easily doable through "Payload" facility. During
> > indexing
> > > > process
> > > > > > (mainly tokenization), you need to push this extra information =
in
> > each
> > > > > > token. And then you can use BoostingTermQuery for using Payload
> > value
> > to
> > > > > > include Payload in the score. You also need to implement
> > Similarity
> > for
> > > > this
> > > > > > (mainly scorePayload method).
> > > > >
> > > > > If I store, say a custom boost factor as Payload, does it means t=
hat
> > I
> > > > > will store one more byte per term per document in the index file?=
 So
> > > > > the index file would be much larger?
> > > > >
> > > > > >
> > > > > > Other way can be to extend SpanTermQuery, this already calculat=
es
> > the
> > > > > > position of match. You just need to do something to use this
> > position
> > > > value
> > > > > > in the score calculation.
> > > > >
> > > > > I see that SpanTermQuery takes a TermPositions from the indexRead=
er
> > > > > and I can get the term position from there. However I am not sure
> > how
> > > > > to incorporate it into the score calculation. Would you mind give=
 a
> > > > > little more detail on this?
> > > > >
> > > > > >
> > > > > > One possible advantage of SpanTermQuery approach is that you can
> > play
> > > > > > around, without re-creating indices everytime.
> > > > > >
> > > > > > Thanks,
> > > > > > Shailendra Sharma,
> > > > > > CTO, Ver se' Innovation Pvt. Ltd.
> > > > > > Bangalore, India
> > > > > >
> > > > > > On 8/1/07, Cedric Ho <cedric.ho@gmail.com> wrote:
> > > > > > >
> > > > > > > Hi all,
> > > > > > >
> > > > > > > I was wondering if it is possible to do boosting by search
> > terms'
> > > > > > > position in the document.
> > > > > > >
> > > > > > > for example:
> > > > > > > search terms appear in the first 100 words, or first 10% word=
s,
> > or
> > in
> > > > > > > first two paragraphs would be given higher score.
> > > > > > >
> > > > > > > Is it achievable through using the new Payload function in
> > lucene
> > 2.2?
> > > > > > > Or are there any easier ways to achieve these ?
> > > > > > >
> > > > > > >
> > > > > > > Regards,
> > > > > > > Cedric
> > > > > > >
> > > > > > >
> > ---------------------------------------------------------------------
> > > > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.o=
rg
> > > > > > > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> > > > > > >
> > > > > > >
> > > > > >
> > > > >
> > > > > Thanks,
> > > > > Cedric
> > > > >
> > > > >
> > ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > > >
> > > > >
> > > > >
> > > >
> > > > -------------------------------------------------------------------=
=2D-
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > >
> > > --
> > > =E6=84=9B@=E4=B8=8A.Keyboard
> > >
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 19:28:18 2007
Return-Path: <java-user-return-29633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38622 invoked from network); 3 Aug 2007 19:28:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 19:28:18 -0000
Received: (qmail 69752 invoked by uid 500); 3 Aug 2007 19:28:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69440 invoked by uid 500); 3 Aug 2007 19:28:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69429 invoked by uid 99); 3 Aug 2007 19:28:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 12:28:11 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shailendra.sharma@gmail.com designates 64.233.162.237 as permitted sender)
Received: from [64.233.162.237] (HELO nz-out-0506.google.com) (64.233.162.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 19:28:07 +0000
Received: by nz-out-0506.google.com with SMTP id i28so362736nzi
        for <java-user@lucene.apache.org>; Fri, 03 Aug 2007 12:27:46 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=C1DoqDxe1kBWyaTCijT7mWDFcjwwq9xgc9BeSRIzMzPv+WSgQnwfR8QbrQnJPPm3el3xKBHVDnvVBCBNoL8UbgZGjyJRAZFprM7AJTtFJJXOgvJh2hbiuPxepgoZDAthD/gEsEFGmqnU8QacGzELgPFZVYT7xrjclW2D6LMo8fg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=R+Rcl+2SJZt4YRxigBbH1dVSG+dT1Uxcz/Cke5RFiR498kQTitxWZmGrM3zUhD5tYQzFSS4NdnJMEuu0Ue4sjSPQI8/9fggm+nGTR64cIzCSNBQkySmZeS2Dc6TNj3NwKgIE3hJp3fC2Vq7Mj8GetylBJ7GhwFUJQ08fdkgzgM0=
Received: by 10.143.2.19 with SMTP id e19mr148084wfi.1186169266208;
        Fri, 03 Aug 2007 12:27:46 -0700 (PDT)
Received: by 10.143.18.7 with HTTP; Fri, 3 Aug 2007 12:27:45 -0700 (PDT)
Message-ID: <d27fa17e0708031227i1aacf483i272651ecd8c1908e@mail.gmail.com>
Date: Sat, 4 Aug 2007 00:57:45 +0530
From: "Shailendra Sharma" <shailendra.sharma@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Can I do boosting based on term postions?
In-Reply-To: <200708032111.42593.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_106590_20085718.1186169265995"
References: <839ba01c0707312113p278da04bg636e2bfa853e6ff4@mail.gmail.com>
	 <200708031649.07438.paul.elschot@xs4all.nl>
	 <d27fa17e0708031135i5692e3c6laf4328a09992dd80@mail.gmail.com>
	 <200708032111.42593.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_106590_20085718.1186169265995
Content-Type: text/plain; charset=ISO-2022-JP
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Ah, Good way !

On 8/4/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
>
> On Friday 03 August 2007 20:35, Shailendra Sharma wrote:
> > Paul,
> >
> > If I understand Cedric right, he wants to have different boosting
> depending
> > on search term positions in the document. By using SpanFirstQuery he
> will
> > only be able to consider in terms till particular position;
>
>
> > but he won't be
> > able to do something like following:
> >   a) Give 100% boosting to matching in first 100 words.
> >   b) Give 80% boosting to matching in next 100 words.
> >   c) Give 60% boosting to matching in next 100 words.
>
> > Though it can be done by writing DisjunctionMaxQuery having multiple
> > SpanFirstQuery with different boosting - but I see it as a workaround
> only
> > and not the direct and efficient solution.
>
> You're right, but SpanFirstQuery needs only a minor modification
> for this to work.
>
> This modification to SpanFirstQuery would be that the Spans
> returned by SpanFirstQuery.getSpans() must always return 0
> from its start() method. Then the slop passed to sloppyFreq(slop)
> would be the distance from the beginning of the indexed field
> to the end of the Spans of the SpanQuery passed to SpanFirstQuery.
>
> Then the following should work:
>
> Term firstTerm = .... ;
>
> SpanFirstQuery sfq = new SpanFirstQuery(
>   new SpanTermQuery( firstTerm),
>   Integer.MAX_VALUE)) {
> ...
> public Similarity getSimilarity() {
> return new Similarity() {
> ...
> float sloppyFreq(slop) {
>   return (slop < 100)  ? 1.0f
>            : (slop < 200) ? 0.8f
>            : (slop < 300) ? 0.6f
>            : 0.4f ; // etc. etc.
> }}}}
>
>
> Actually, I'm a bit surprised that SpanFirstQuery does not work that
> way now.
>
> Regards,
> Paul Elschot
>
>
> >
> > Cedric,
> >
> > I am sending you the implementation of SpanTermQuery to your gmail
> > account (lucene
> > mailing list is bouncing email with attachment). I have named the class
> as
> > VSpanTermQuery (I have followed the same package hierarchy as lucene).
> You
> > also need to extend VSimilarity class - which would require
> implementation
> > of method scoreSpan(..).
> >
> > Let me know how it went. Though I did a testing for it, but before
> > submitting to contrib, I need to do extensive testing.
> >
> > Thanks,
> > Shailendra
> >
> > On 8/3/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> > >
> > > Cedric,
> > >
> > > You can choose the end limit for SpanFirstQuery yourself.
> > >
> > > Regards,
> > > Paul Elschot
> > >
> > >
> > > On Friday 03 August 2007 05:38, Cedric Ho wrote:
> > > > Hi Paul,
> > > >
> > > > Isn't SpanFirstQuery only match those with position less than a
> > > > certain end position?
> > > >
> > > > I am rather looking for a query that would score a document higher
> for
> > > > terms appear near the start but not totally discard those with terms
> > > > appear near the end.
> > > >
> > > > Regards,
> > > > Cedric
> > > >
> > > > On 8/2/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> > > > > Cedric,
> > > > >
> > > > > SpanFirstQuery could be a solution without payloads.
> > > > > You may want to give it your own Similarity.sloppyFreq() .
> > > > >
> > > > > Regards,
> > > > > Paul Elschot
> > > > >
> > > > > On Thursday 02 August 2007 04:07, Cedric Ho wrote:
> > > > > > Thanks for the quick response =)
> > > > > >
> > > > > > On 8/1/07, Shailendra Sharma <shailendra.sharma@gmail.com>
> wrote:
> > > > > > > Yes, it is easily doable through "Payload" facility. During
> > > indexing
> > > > > process
> > > > > > > (mainly tokenization), you need to push this extra information
> in
> > > each
> > > > > > > token. And then you can use BoostingTermQuery for using
> Payload
> > > value
> > > to
> > > > > > > include Payload in the score. You also need to implement
> > > Similarity
> > > for
> > > > > this
> > > > > > > (mainly scorePayload method).
> > > > > >
> > > > > > If I store, say a custom boost factor as Payload, does it means
> that
> > > I
> > > > > > will store one more byte per term per document in the index
> file? So
> > > > > > the index file would be much larger?
> > > > > >
> > > > > > >
> > > > > > > Other way can be to extend SpanTermQuery, this already
> calculates
> > > the
> > > > > > > position of match. You just need to do something to use this
> > > position
> > > > > value
> > > > > > > in the score calculation.
> > > > > >
> > > > > > I see that SpanTermQuery takes a TermPositions from the
> indexReader
> > > > > > and I can get the term position from there. However I am not
> sure
> > > how
> > > > > > to incorporate it into the score calculation. Would you mind
> give a
> > > > > > little more detail on this?
> > > > > >
> > > > > > >
> > > > > > > One possible advantage of SpanTermQuery approach is that you
> can
> > > play
> > > > > > > around, without re-creating indices everytime.
> > > > > > >
> > > > > > > Thanks,
> > > > > > > Shailendra Sharma,
> > > > > > > CTO, Ver se' Innovation Pvt. Ltd.
> > > > > > > Bangalore, India
> > > > > > >
> > > > > > > On 8/1/07, Cedric Ho <cedric.ho@gmail.com> wrote:
> > > > > > > >
> > > > > > > > Hi all,
> > > > > > > >
> > > > > > > > I was wondering if it is possible to do boosting by search
> > > terms'
> > > > > > > > position in the document.
> > > > > > > >
> > > > > > > > for example:
> > > > > > > > search terms appear in the first 100 words, or first 10%
> words,
> > > or
> > > in
> > > > > > > > first two paragraphs would be given higher score.
> > > > > > > >
> > > > > > > > Is it achievable through using the new Payload function in
> > > lucene
> > > 2.2?
> > > > > > > > Or are there any easier ways to achieve these ?
> > > > > > > >
> > > > > > > >
> > > > > > > > Regards,
> > > > > > > > Cedric
> > > > > > > >
> > > > > > > >
> > > ---------------------------------------------------------------------
> > > > > > > > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > > > > > > > For additional commands, e-mail:
> > > java-user-help@lucene.apache.org
> > > > > > > >
> > > > > > > >
> > > > > > >
> > > > > >
> > > > > > Thanks,
> > > > > > Cedric
> > > > > >
> > > > > >
> > > ---------------------------------------------------------------------
> > > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > > > > >
> > > > > >
> > > > > >
> > > > >
> > > > >
> ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > > >
> > > > >
> > > >
> > > >
> > > > --
> > > > $B0&(B@$B>e(B.Keyboard
> > > >
> > > >
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_106590_20085718.1186169265995--

From java-user-return-29634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 19:42:26 2007
Return-Path: <java-user-return-29634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47831 invoked from network); 3 Aug 2007 19:42:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 19:42:24 -0000
Received: (qmail 95251 invoked by uid 500); 3 Aug 2007 19:42:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95215 invoked by uid 500); 3 Aug 2007 19:42:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95204 invoked by uid 99); 3 Aug 2007 19:42:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 12:42:16 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [68.142.236.212] (HELO web58614.mail.re3.yahoo.com) (68.142.236.212)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 03 Aug 2007 19:41:53 +0000
Received: (qmail 28524 invoked by uid 60001); 3 Aug 2007 19:41:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=jOFQAYsCqml+ZJI4WcNT8lvp1TT8XJgVVBzbKyZFsM/woJ2BraRWc98CzdNMbxRoXtUrklBEntp/uiQtdRFz5RDyFYsHPvzkYxrWM7VLh1qUDxENJU6FXN8YU/Ac5gjGIinJyvD3zsYwFXhCowzzxizzjCc0bIgKJa5MMZ+Og/A=;
X-YMail-OSG: I1UksGEVM1lIqwUdibu4FsmoDfXgmAe.XLj.P8szhhgFVhMQR0cOVhEyMhs9JVNmNA--
Received: from [132.197.150.201] by web58614.mail.re3.yahoo.com via HTTP; Fri, 03 Aug 2007 12:41:48 PDT
Date: Fri, 3 Aug 2007 12:41:48 -0700 (PDT)
From: qaz zaq <fortques@yahoo.com>
Subject: multiple field searcher
To: java-user@lucene.apache.org
In-Reply-To: <d27fa17e0708031227i1aacf483i272651ecd8c1908e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1369155995-1186170108=:27812"
Content-Transfer-Encoding: 8bit
Message-ID: <961288.27812.qm@web58614.mail.re3.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1369155995-1186170108=:27812
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

I have Search Terms: T1, T2... Tn. Also I have document fields of F1 F2... Fm.

I want to search the match documents across F1 to Fm fields,i.e., all of the T1, T2, ...Tn need to be matched, but can be in the combination of T1, T2, ... Tn field. 

I check the MultiFieldQueryParser, it doesn't appear to support this. How can I do that?  Thanks

       
---------------------------------
Yahoo! oneSearch: Finally,  mobile search that gives answers, not web links. 
--0-1369155995-1186170108=:27812--

From java-user-return-29635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 19:47:20 2007
Return-Path: <java-user-return-29635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49758 invoked from network); 3 Aug 2007 19:47:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 19:47:19 -0000
Received: (qmail 4265 invoked by uid 500); 3 Aug 2007 19:47:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4223 invoked by uid 500); 3 Aug 2007 19:47:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4206 invoked by uid 99); 3 Aug 2007 19:47:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 12:47:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 66.249.82.232 as permitted sender)
Received: from [66.249.82.232] (HELO wx-out-0506.google.com) (66.249.82.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 19:47:09 +0000
Received: by wx-out-0506.google.com with SMTP id i28so652016wxd
        for <java-user@lucene.apache.org>; Fri, 03 Aug 2007 12:46:48 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=h4HosTgPBcjVa2CuS4N5EG2m1d8OQesdpxCZh6sIx54teK7TWNi5wIIm0Js4qQX4eC7zqsjoeoUDs92EPgk1vvJXlQvef3Bb3GnAEBojxXCavqldjO/zAYDpaWK2o2S/nncZQF18qmCjcHm0AVjK96j/+1LFETUue1w/4OdQYpA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=rKJhkokD/ma7TSzrK8AG+Msp6A0fcbwWJDWPCrZHOrgzbHZ8e21FW8t47RQy2xlPQV0MeQ/c5H3kJuyksx/ooxIzjGvj0Dr4nt4BILs68rWObyczrl6swxl36tHYfb2vDKOXYkiXXu2gvVrtNyQqnndXAjWhuzeooEMBXPCbDFs=
Received: by 10.90.97.11 with SMTP id u11mr3530191agb.1186170408657;
        Fri, 03 Aug 2007 12:46:48 -0700 (PDT)
Received: from ?192.168.1.105? ( [216.66.114.204])
        by mx.google.com with ESMTPS id 6sm3813651wrh.2007.08.03.12.46.46
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 03 Aug 2007 12:46:47 -0700 (PDT)
Message-ID: <46B385EC.3010204@gmail.com>
Date: Fri, 03 Aug 2007 15:45:48 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Performance improvements using writer.delete vs reader.delete
References: <OF370CB93C.4AE25472-ON8825732C.001E844F-8825732C.001F69B7@il.ibm.com> <46B30322.7080104@gmail.com> <137CFCB5-FB31-460E-9AE1-850ED6D74885@gmail.com>
In-Reply-To: <137CFCB5-FB31-460E-9AE1-850ED6D74885@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Heh. I suppose I'll defer to your judgment. In my mind, the simple 
system to make is to just buffer the adds, buffer the deletes - later 
apply the adds, apply the deletes (or the reverse). I am sure something 
in Solr would have a more sophisticated process, but my guess was about 
what the new Lucene user would throw together. But again, I'll defer to 
your judgment anytime.

- Mark

Mike Klaas wrote:
>
> On 3-Aug-07, at 3:27 AM, Mark Miller wrote:
>
>> Also, IndexWriter probably buffers better than you would. If you 
>> buffer a delete with IndexWriter and then add a document that would 
>> be removed by that delete right after, when the buffered deletes are 
>> flushed, your latest doc will not be removed. Its unlikely your own 
>> buffer system would work so well.
>
> Is it?  ISTM that any sane buffering system would account for that case.
>
> -Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 19:56:59 2007
Return-Path: <java-user-return-29636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53982 invoked from network); 3 Aug 2007 19:56:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 19:56:56 -0000
Received: (qmail 25496 invoked by uid 500); 3 Aug 2007 19:56:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25208 invoked by uid 500); 3 Aug 2007 19:56:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25197 invoked by uid 99); 3 Aug 2007 19:56:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 12:56:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.67] (HELO mx5.syr.edu) (128.230.18.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 19:56:42 +0000
Received: from [128.230.84.100] (ist-h335-d03.syr.edu [128.230.84.100])
	by mx5.syr.edu (8.13.7/8.13.7) with ESMTP id l73JuLgR021848
	for <java-user@lucene.apache.org>; Fri, 3 Aug 2007 15:56:21 -0400
Message-ID: <46B38853.5060806@syr.edu>
Date: Fri, 03 Aug 2007 15:56:03 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Thunderbird 2.0.0.4-GroupWise-IMAP-fix (Windows/20070719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: multiple field searcher
References: <961288.27812.qm@web58614.mail.re3.yahoo.com>
In-Reply-To: <961288.27812.qm@web58614.mail.re3.yahoo.com>
X-Enigmail-Version: 0.95.2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Scanner: InterScan AntiVirus for Sendmail
X-Virus-Scanned: by amavisd-new
X-Virus-Checked: Checked by ClamAV on apache.org

qaz zaq wrote:
> I have Search Terms: T1, T2... Tn. Also I have document fields of F1 F2... Fm.
> 
> I want to search the match documents across F1 to Fm fields,i.e., all of the T1, T2, ...Tn need to be matched, but can be in the combination of T1, T2, ... Tn field. 
> 
> I check the MultiFieldQueryParser, it doesn't appear to support this. How can I do that?  Thanks

You could make an aggregate field that contains all of the terms from
fields F1..Fm, and then search exclusively against it, requiring each
term to appear.

The alternative, in which you automate spelling out all of the
combinations, won't scale to a large field set or to a large term set.
But if you can guarantee that both are small (cardinality <= 3, maybe?),
then it might be feasible.

Steve

-- 
Steve Rowe
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 22:01:23 2007
Return-Path: <java-user-return-29637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86382 invoked from network); 3 Aug 2007 22:01:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 22:01:22 -0000
Received: (qmail 13309 invoked by uid 500); 3 Aug 2007 22:01:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13274 invoked by uid 500); 3 Aug 2007 22:01:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13263 invoked by uid 99); 3 Aug 2007 22:01:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 15:01:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spencertickner@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 22:01:12 +0000
Received: by nf-out-0910.google.com with SMTP id d3so252925nfc
        for <java-user@lucene.apache.org>; Fri, 03 Aug 2007 15:00:51 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=dz/e4hsAgDjjLQDqNxHm6MMvpvQMcZY33mDGE/Nk4UJi0oGP27zFKD22IxidcnKPbSk6fa8LhFgp7/DsgiZtWjuRSPIgjoQ4WbxyLKawnF2Bjavvgo/rpavTYe3xAvi50lj6aV84QY9/hZ6NhDSzK7aZnQYej1WVL6XlVH0LILY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=auTUIrJb3Qyo18rpjE42OS/RhtnIdm1NxwcEjuGMEUfS55GfejeF4D7pUfkUdqbhC7jvcR8EYMbai4PbKVXvt+T6C6qQln0GwfnfOTm15XS+RtpfCOSuv3Qgr/PfMxM1kFHIekhRW+VFeYolakzRXYaY+wN+MHAs8PbDHHsOQ6g=
Received: by 10.78.149.13 with SMTP id w13mr918126hud.1186178450753;
        Fri, 03 Aug 2007 15:00:50 -0700 (PDT)
Received: by 10.78.186.10 with HTTP; Fri, 3 Aug 2007 15:00:50 -0700 (PDT)
Message-ID: <2d72c9c50708031500n4b1900b7saca85a4fb1dca743@mail.gmail.com>
Date: Fri, 3 Aug 2007 15:00:50 -0700
From: "Spencer Tickner" <spencertickner@gmail.com>
To: java-user@lucene.apache.org
Subject: Nested Fields
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, and thanks in advace for any help.

I'm fairly new to lucene so excuse the ignorance. I'm attempting to
field an XML documents with nested fields. So:

<foo>
  <bar>This</bar>
  <bat>That</bat>
</foo>

would give me hits for:

bar:This
bat:That
foo:ThisThat

The only way I can see a way of doing this now is to field each
element I want to field and all of it's descendant text, repeating the
same text multiple times for nested fields, then finally have a <root>
field that would field the text for all the document so users not
doing field searches would programmically be forced to search on
<root> to not get multiple hits. This seems inefficent to me and am
hopeing that someone has some advice or can point me to a better way.

Thanks,

Spencer

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 03 23:42:31 2007
Return-Path: <java-user-return-29638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25970 invoked from network); 3 Aug 2007 23:42:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Aug 2007 23:42:29 -0000
Received: (qmail 37421 invoked by uid 500); 3 Aug 2007 23:42:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36792 invoked by uid 500); 3 Aug 2007 23:42:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36778 invoked by uid 99); 3 Aug 2007 23:42:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 16:42:23 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 23:42:16 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id 62D8720FF4
	for <java-user@lucene.apache.org>; Fri,  3 Aug 2007 16:41:55 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <11983532.post@talk.nabble.com>
References: <11983532.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7793A914-2468-42D5-A91C-474A61CD24B4@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: How can I get the Document Frequency for a specific term??? And more questions...
Date: Fri, 3 Aug 2007 19:41:47 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Aug 3, 2007, at 9:47 AM, tierecke wrote:

>
> Hi,
>
> Can I know in how many documents a term appears (DF - Document  
> Frequency)?
> Does Lucene keep it? Can I retrieve it?
>

See the TermEnum class (IndexReader.terms()

> Now - an even more advanced question:
> Since I have a 77GB index, I cut it into 25 smaller indices of 3GB  
> each and
> I query them using MultiSearcher. Is there a possibility to know  
> the DF of a
> term throughout the whole collection or do I need to ask each index  
> for the
> DF of a specific term (supposing that my first question is solvable).
>

See the MultiReader and MultiReader.terms()

> And the last question: Is there a way to know the total number of  
> documents
> in a Lucene Index? Is there a way to know the total number of  
> documents in
> multiple indexes together?

IndexReader.numDocs()
MultiReader.numDocs()

>
> I hope it's not too much. Suddenly I find myself dealing with stuff  
> I never
> dealt before.


Much better than doing the same stuff day after day for life, ain't  
it?  :-)




--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 04 03:14:23 2007
Return-Path: <java-user-return-29639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72247 invoked from network); 4 Aug 2007 03:14:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Aug 2007 03:14:21 -0000
Received: (qmail 33967 invoked by uid 500); 4 Aug 2007 03:14:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33927 invoked by uid 500); 4 Aug 2007 03:14:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33911 invoked by uid 99); 4 Aug 2007 03:14:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Aug 2007 20:14:15 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mike.klaas@gmail.com designates 209.85.146.181 as permitted sender)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Aug 2007 03:14:08 +0000
Received: by wa-out-1112.google.com with SMTP id j40so1102373wah
        for <java-user@lucene.apache.org>; Fri, 03 Aug 2007 20:13:48 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=nvntCMKbu6nFuua8KFZopY9VAZ7EzHupBs4BJbXFyQ+SVCcPAVBNqbvuQF9O+zCf6CDf9DLUJrrptc+WrrGduUvQ5wDbiZhbkq7LSWMIsjoEW0NRzbktPjZWXDVU8d0m4GoRYBQqQAaRE1zSrGvPftYAzkynCUYuC8r2lLPbLgY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=R9AtqyXFCHU4Mu2ORZQz9kXgUZIdIPwJJDrjVGTS3Rz7+QyPtYNjId/EWwU4ATA9hwr2iOcybc1NOYkS4rdmsauxgvAE8crJr2CVQIXleqxb3Nv7dmNEUjp5knkRkfmXS7Tu1boyfWgRDqq9mwgHMTJsPrOTWRcv4Jf/2KdnlB0=
Received: by 10.114.120.1 with SMTP id s1mr3559065wac.1186197227832;
        Fri, 03 Aug 2007 20:13:47 -0700 (PDT)
Received: from ?192.168.1.103? ( [24.82.155.191])
        by mx.google.com with ESMTPS id j21sm5568703wah.2007.08.03.20.13.44
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 03 Aug 2007 20:13:45 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <46B279C8.8030300@gmail.com>
References: <11960750.post@talk.nabble.com> <34b8543c0708020200s82acc82oe9c2e360d527f2db@mail.gmail.com> <11961159.post@talk.nabble.com> <34b8543c0708020225x435f0ad6s4869cd739107bc66@mail.gmail.com> <11962465.post@talk.nabble.com> <46B279C8.8030300@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <567A8ED8-D942-4598-8C9E-9EB5C3F85DB7@gmail.com>
Content-Transfer-Encoding: 7bit
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: Getting only the Ids, not the whole documents.
Date: Fri, 3 Aug 2007 20:13:41 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

You still have a disk seek per doc if the index can't fit in memory  
(usually more costly than reading the fields) .

Why not use FieldCache?

-Mike

On 2-Aug-07, at 5:41 PM, Mark Miller wrote:

> If you are just retrieving your custom id and you have more stored  
> fields (and they are not tiny) you certainly do want to use a field  
> selector. I would suggest SetBasedFieldSelector.
>
> - Mark
>
> testn wrote:
>> Hi,
>>
>> Why don't you consider to use FieldSelector?  
>> LoadFirstFieldSelector has an
>> ability to help you load only the first field in the document without
>> loading all the fields. After that, you can keep the whole  
>> document if you
>> like. It should help improve performance better.
>>
>>
>>
>> is_maximum wrote:
>>
>>> yes it decrease the performance but the only solution.
>>> I've spent many weeks to find best way to retrive my own IDs but  
>>> find this
>>> way as last one
>>>
>>> now I am storing the ids in a BitSet structure and it's fast enough
>>>
>>> public void collect(...){
>>> idBitSet.set(Integer.valueOf(searcher.doc(id).get("MyOwnID")));
>>>
>>> }
>>>
>>> On 8/2/07, makkhar <mkharche@selectica.com> wrote:
>>>
>>>>
>>>> Hi,
>>>>
>>>>    The solution you suggested will definitely work but will  
>>>> definitely
>>>> slow
>>>> down my search by an order of magnitude. The problem I am trying  
>>>> to solve
>>>> is
>>>> performance, thats why I need the collection of IDs and not the  
>>>> whole
>>>> documents.
>>>>
>>>> - thanks for the prompt reply.
>>>>
>>>>
>>>> is_maximum wrote:
>>>>
>>>>> yes if you extend your class from HitCollector and override the
>>>>>
>>>> collect()
>>>>
>>>>> mthod with following signature you can get IDs
>>>>>
>>>>> public void collect(int id, float score)
>>>>>
>>>>> On 8/2/07, makkhar <mkharche@selectica.com> wrote:
>>>>>
>>>>>> Hi all,
>>>>>>
>>>>>>    Can I get just a list of document Ids given a search  
>>>>>> criteria ? To
>>>>>> elaborate here is my situation:
>>>>>>
>>>>>> I store 20000 contracts in the file system index each with some
>>>>>> parameterName and Value. Given a search criterion -
>>>>>>
>>>> (paramValue='draft').
>>>>
>>>>>> I
>>>>>> need to get just an ArrayList of Strings containing contract  
>>>>>> Ids. I
>>>>>>
>>>> dont
>>>>
>>>>>> need the lucene documents, just the Ids.
>>>>>>
>>>>>> Can this be done ?
>>>>>>
>>>>>> -thanks
>>>>>>
>>>>>> --
>>>>>> View this message in context:
>>>>>>
>>>>>>
>>>> http://www.nabble.com/Getting-only-the-Ids%2C-not-the-whole- 
>>>> documents.-tf4204907.html#a11960750
>>>>
>>>>>> Sent from the Lucene - Java Users mailing list archive at  
>>>>>> Nabble.com.
>>>>>>
>>>>>>
>>>>>> ----------------------------------------------------------------- 
>>>>>> ----
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>> --
>>>>> Regards,
>>>>> Mohammad
>>>>> --------------------------
>>>>> see my blog: http://brainable.blogspot.com/
>>>>> another in Persian: http://fekre-motefavet.blogspot.com/
>>>>>
>>>>>
>>>>>
>>>> --
>>>> View this message in context:
>>>> http://www.nabble.com/Getting-only-the-Ids%2C-not-the-whole- 
>>>> documents.-tf4204907.html#a11961159
>>>> Sent from the Lucene - Java Users mailing list archive at  
>>>> Nabble.com.
>>>>
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>> -- 
>>> Regards,
>>> Mohammad
>>> --------------------------
>>> see my blog: http://brainable.blogspot.com/
>>> another in Persian: http://fekre-motefavet.blogspot.com/
>>>
>>>
>>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 05 00:27:21 2007
Return-Path: <java-user-return-29640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17513 invoked from network); 5 Aug 2007 00:27:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2007 00:27:19 -0000
Received: (qmail 56312 invoked by uid 500); 5 Aug 2007 00:27:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56273 invoked by uid 500); 5 Aug 2007 00:27:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56262 invoked by uid 99); 5 Aug 2007 00:27:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Aug 2007 17:27:12 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Aug 2007 00:26:52 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IHTxE-0004sP-RS
	for java-user@lucene.apache.org; Sat, 04 Aug 2007 17:26:44 -0700
Message-ID: <12001229.post@talk.nabble.com>
Date: Sat, 4 Aug 2007 17:26:44 -0700 (PDT)
From: tierecke <nir.nussbaum@gmail.com>
To: java-user@lucene.apache.org
Subject: Complex proximity clauses within Lucene QueryParser
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: nir.nussbaum@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I got stuck with a complex proximity clause - and would be grateful to get
your help.

Does Lucene allow, and if yes: what is the syntax?

* Proximity between two phrases, for instance a within n1 words from b which
is within n2 words from c?
* subclauses - for instance (a or b) within n words from (b* or c)?
* "a b" within n words from "c d"?

that would help immensely. 

best regards from Amsterdam,
Nir.
-- 
View this message in context: http://www.nabble.com/Complex-proximity-clauses-within-Lucene-QueryParser-tf4218409.html#a12001229
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 05 01:08:10 2007
Return-Path: <java-user-return-29641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24891 invoked from network); 5 Aug 2007 01:08:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2007 01:08:08 -0000
Received: (qmail 76476 invoked by uid 500); 5 Aug 2007 01:08:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76432 invoked by uid 500); 5 Aug 2007 01:08:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76420 invoked by uid 99); 5 Aug 2007 01:08:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Aug 2007 18:08:02 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.187 as permitted sender)
Received: from [209.85.128.187] (HELO fk-out-0910.google.com) (209.85.128.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Aug 2007 01:07:56 +0000
Received: by fk-out-0910.google.com with SMTP id z23so1062192fkz
        for <java-user@lucene.apache.org>; Sat, 04 Aug 2007 18:07:34 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=oT2PsBsXkcz6waHwL7RIsjzt6j3gMQ3HF5/rdK4eSZVFhsWaeV5C6+GjWW3MVbkkN58mbViJ2wdg+p9Age/586yiQGi+Nu/uNpACKFgmn86XcJKPA0fR8OpvYfjscCcRGNui2XVdpobbHFAeNdI1M9fEVe7JkWB2U14ARLCpNx4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XJsf0C0Th4NoX3Qi/n8AYBjhenIW8es/dPf5mQme0+7Lb9XzE4hmF8w+VVQtV4VBfYz7pSekzGD0j08lBqevdeuerDx/EzSAyCzK509tbbOjoc698jqsWgpcpXrBlcOsm0nYX446er/HTyuoPRDwJL2lVohE4GEM9GJXXR4G8cw=
Received: by 10.82.116.15 with SMTP id o15mr4724054buc.1186276054311;
        Sat, 04 Aug 2007 18:07:34 -0700 (PDT)
Received: by 10.82.190.14 with HTTP; Sat, 4 Aug 2007 18:07:34 -0700 (PDT)
Message-ID: <359a92830708041807p75a75e78ic0ba57921cf5db59@mail.gmail.com>
Date: Sat, 4 Aug 2007 21:07:34 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Complex proximity clauses within Lucene QueryParser
In-Reply-To: <12001229.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_76326_17884528.1186276054043"
References: <12001229.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_76326_17884528.1186276054043
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm not sure the native syntax supports this idea, but I'm pretty sure
you could construct it yourself with the appropriate SpanQuery
sub-clauses. You'd have to deal with your own parsing of the input
though.

Also, check the SrndQuery class, I'm pretty this will work, but be aware
that it has its own syntax that you have to get accustomed to.

You'll probably need to search the archives for discussions of this. I know
I had a lengthy exchange (see the thread "wildcard and span queries") that
was enlightening.

Best
Erick

On 8/4/07, tierecke <nir.nussbaum@gmail.com> wrote:
>
>
> Hi,
>
> I got stuck with a complex proximity clause - and would be grateful to get
> your help.
>
> Does Lucene allow, and if yes: what is the syntax?
>
> * Proximity between two phrases, for instance a within n1 words from b
> which
> is within n2 words from c?
> * subclauses - for instance (a or b) within n words from (b* or c)?
> * "a b" within n words from "c d"?
>
> that would help immensely.
>
> best regards from Amsterdam,
> Nir.
> --
> View this message in context:
> http://www.nabble.com/Complex-proximity-clauses-within-Lucene-QueryParser-tf4218409.html#a12001229
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_76326_17884528.1186276054043--

From java-user-return-29642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 05 04:34:08 2007
Return-Path: <java-user-return-29642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56619 invoked from network); 5 Aug 2007 04:34:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2007 04:34:06 -0000
Received: (qmail 51418 invoked by uid 500); 5 Aug 2007 04:34:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51379 invoked by uid 500); 5 Aug 2007 04:34:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51368 invoked by uid 99); 5 Aug 2007 04:34:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Aug 2007 21:34:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 66.249.82.224 as permitted sender)
Received: from [66.249.82.224] (HELO wx-out-0506.google.com) (66.249.82.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Aug 2007 04:33:54 +0000
Received: by wx-out-0506.google.com with SMTP id i28so871352wxd
        for <java-user@lucene.apache.org>; Sat, 04 Aug 2007 21:33:33 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=AhADpVPpIrvNFcoA6mt3Mcz0FlLTbi2nQh1XoEOJuc7orUSCpHxihWQJxn1DctsRU1iRjCSUZhuUq/H3UvGTG/c/1JWu3NSwGBIIPnG4OLI9hp5CFdFsySIUPFIubPPdR4FtvsyEPKFf+EaDNCRQPzjVoRffTa29oOlupFxXIrw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=eGJeeluHvUa7vQ/R0pHv8lMt1UNi07ouP6c86WARQRXN7PTdBbVBT7vr7dSk1scbCNqPSMxDOUlFsE4bZYGkwUuxTQjpgL1iieeyTeiieRC6qxYGzEXLZV6POVAQEOb+XbEOJqgbN2KxooOsXz1zGC+wHmH4Ui6yNULxWrZqueo=
Received: by 10.70.28.9 with SMTP id b9mr7669708wxb.1186288413368;
        Sat, 04 Aug 2007 21:33:33 -0700 (PDT)
Received: from ?192.168.1.105? ( [216.66.114.204])
        by mx.google.com with ESMTPS id 39sm3857593wrl.2007.08.04.21.33.31
        (version=SSLv3 cipher=RC4-MD5);
        Sat, 04 Aug 2007 21:33:32 -0700 (PDT)
Message-ID: <46B55307.2060906@gmail.com>
Date: Sun, 05 Aug 2007 00:33:11 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Complex proximity clauses within Lucene QueryParser
References: <12001229.post@talk.nabble.com>
In-Reply-To: <12001229.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

You might check out Qsol: http://myhardshadow.com/qsol.php

It is my attempt at just such a parser. Some of that logic can be open 
to a bit of interpretation (spans vs nonspans).

- Mark

tierecke wrote:
> Hi,
>
> I got stuck with a complex proximity clause - and would be grateful to get
> your help.
>
> Does Lucene allow, and if yes: what is the syntax?
>
> * Proximity between two phrases, for instance a within n1 words from b which
> is within n2 words from c?
> * subclauses - for instance (a or b) within n words from (b* or c)?
> * "a b" within n words from "c d"?
>
> that would help immensely. 
>
> best regards from Amsterdam,
> Nir.
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 05 08:26:32 2007
Return-Path: <java-user-return-29643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4278 invoked from network); 5 Aug 2007 08:26:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2007 08:26:30 -0000
Received: (qmail 56705 invoked by uid 500); 5 Aug 2007 08:26:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56655 invoked by uid 500); 5 Aug 2007 08:26:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56644 invoked by uid 99); 5 Aug 2007 08:26:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Aug 2007 01:26:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.22] (HELO smtp-vbr2.xs4all.nl) (194.109.24.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Aug 2007 08:26:05 +0000
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr2.xs4all.nl (8.13.8/8.13.8) with ESMTP id l758PvoG070544
	for <java-user@lucene.apache.org>; Sun, 5 Aug 2007 10:25:57 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Complex proximity clauses within Lucene QueryParser
Date: Sun, 5 Aug 2007 10:25:56 +0200
User-Agent: KMail/1.8.2
References: <12001229.post@talk.nabble.com> <46B55307.2060906@gmail.com>
In-Reply-To: <46B55307.2060906@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200708051025.56835.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Nir,

As Erick said, the surround query language does the things requested.
It is in contrib/surround.

Mark,

On Sunday 05 August 2007 06:33, Mark Miller wrote:
> You might check out Qsol: http://myhardshadow.com/qsol.php
> 
> It is my attempt at just such a parser. Some of that logic can be open 
> to a bit of interpretation (spans vs nonspans).

I had a quick look at the sources, and I missed a parser definition file
in the svn repository. Did I miss it, and when not, could you add it?

As far as qsol syntax goes, here are some suggestions.
Qsol mostly has binary operators, but with the following
operators also as prefix a lot more would be possible.
(Since there is already a prefix form for field searches, a lookahead in the 
syntax might be needed to avoid ambiguity with such prefix operators.)

Boolean:
& and | as prefix would allow easier mapping to BooleanQuery,
and an extra operator for optional clauses (just like ! now) would
allow all possibilities of BooleanQuery.

Distance:
operator ~ as prefix would allow multiple arguments to SpanNearQuery,
and with a single argument this could map to SpanFirstQuery.


Actually, with the above additions, qsol seems to be pretty close to
providing all of lucene in a single query language.

Regards,
Paul Elschot


> 
> - Mark
> 
> tierecke wrote:
> > Hi,
> >
> > I got stuck with a complex proximity clause - and would be grateful to get
> > your help.
> >
> > Does Lucene allow, and if yes: what is the syntax?
> >
> > * Proximity between two phrases, for instance a within n1 words from b 
which
> > is within n2 words from c?
> > * subclauses - for instance (a or b) within n words from (b* or c)?
> > * "a b" within n words from "c d"?
> >
> > that would help immensely. 
> >
> > best regards from Amsterdam,
> > Nir.
> >   
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 05 12:09:19 2007
Return-Path: <java-user-return-29644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58592 invoked from network); 5 Aug 2007 12:09:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2007 12:09:18 -0000
Received: (qmail 80404 invoked by uid 500); 5 Aug 2007 12:09:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80076 invoked by uid 500); 5 Aug 2007 12:09:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80063 invoked by uid 99); 5 Aug 2007 12:09:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Aug 2007 05:09:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 66.249.82.224 as permitted sender)
Received: from [66.249.82.224] (HELO wx-out-0506.google.com) (66.249.82.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Aug 2007 12:08:56 +0000
Received: by wx-out-0506.google.com with SMTP id i28so906156wxd
        for <java-user@lucene.apache.org>; Sun, 05 Aug 2007 05:08:35 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=dfxLaYROz3Yw2axhCiJWkf4rWORVHBWibhUXZu7oynP4TGj7kGyV/y6+NjiufhLfM5QmYRuqmj4VGU47UzCIhvW6+NqD3LdToB0wnDSKT9iDBf5DOjVBa0OslFYxT3Xl5ZDBDyxo8bIbF2k5Yh5D6I6Cnyj9FLmschmjAbMViWc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=bAXh/vCdm0kqUeMLssUd5wZnu+bo5xGpL+i4ic3G2hNCaRILhjZuEOfua2Yz7jn9qAqgpHT4eUUJRbggO7lbOFg9RMhNNRg5HY2Iu5Mj7B6THVjKx72amn96sCt2IZv4DK+E7B1i3vF98NYOrYmP8rmf9+x8S5WzNJ5v0gtw+GE=
Received: by 10.70.57.8 with SMTP id f8mr8060624wxa.1186315714532;
        Sun, 05 Aug 2007 05:08:34 -0700 (PDT)
Received: from ?192.168.1.105? ( [216.66.114.204])
        by mx.google.com with ESMTPS id p27sm5852618ele.2007.08.05.05.08.33
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 05 Aug 2007 05:08:33 -0700 (PDT)
Message-ID: <46B5BDA9.5070209@gmail.com>
Date: Sun, 05 Aug 2007 08:08:09 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Complex proximity clauses within Lucene QueryParser
References: <12001229.post@talk.nabble.com> <46B55307.2060906@gmail.com> <200708051025.56835.paul.elschot@xs4all.nl>
In-Reply-To: <200708051025.56835.paul.elschot@xs4all.nl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Paul Elschot wrote:
> I had a quick look at the sources, and I missed a parser definition file
> in the svn repository. Did I miss it, and when not, could you add it?
>
> As far as qsol syntax goes, here are some suggestions.
> Qsol mostly has binary operators, but with the following
> operators also as prefix a lot more would be possible.
> (Since there is already a prefix form for field searches, a lookahead in the 
> syntax might be needed to avoid ambiguity with such prefix operators.)
>
> Boolean:
> & and | as prefix would allow easier mapping to BooleanQuery,
> and an extra operator for optional clauses (just like ! now) would
> allow all possibilities of BooleanQuery.
>
> Distance:
> operator ~ as prefix would allow multiple arguments to SpanNearQuery,
> and with a single argument this could map to SpanFirstQuery.
>
>
> Actually, with the above additions, qsol seems to be pretty close to
> providing all of lucene in a single query language.
>
> Regards,
> Paul Elschot
>   
http://www.myhardshadow.com/qsolsource/trunk/src/java/com/mhs/qsol/qsol.jtb
It's a jtb file because I am using Java Tree Builder with JavaCC. I left 
out the generated .jj file as it is pretty messy and can be constructed 
with the build script.

I will try and work with your suggestions Paul, thanks for taking a 
look. I had tried some additions like this before without getting too 
far, but certainly worth another shot. I have wanted to get back and 
make some improvements and cleanup anyway. I know the whole parser could 
be a lot better than it is.

Make no mistake, Qsol works great for what I made for (I have some 
personal uses for it), but it could certainly be improved quite a bit. 
It uses a nice infix syntax that I wanted, but overall is not nearly as 
elegant as Surround.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 05 20:57:54 2007
Return-Path: <java-user-return-29645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91249 invoked from network); 5 Aug 2007 20:57:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2007 20:57:53 -0000
Received: (qmail 96021 invoked by uid 500); 5 Aug 2007 20:57:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94976 invoked by uid 500); 5 Aug 2007 20:57:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94965 invoked by uid 99); 5 Aug 2007 20:57:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Aug 2007 13:57:45 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lukas.vlcek@gmail.com designates 209.85.198.187 as permitted sender)
Received: from [209.85.198.187] (HELO rv-out-0910.google.com) (209.85.198.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Aug 2007 20:57:39 +0000
Received: by rv-out-0910.google.com with SMTP id k20so804137rvb
        for <java-user@lucene.apache.org>; Sun, 05 Aug 2007 13:57:19 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cQ/DNEq2izvm2t9yWcQCbUWptTv4mcqONtt9xcK7U1Y7UMxcxUeQ1hrnJ49T7JqgeugQm37fVTAdmFgk70CZjEPr+xuSMf84gufifLCMtjKJnuDbiWEzKvuJlpPD34TenHRQWkSxXrt7NsYwNmOagMRm7Ark5MkpZ6hu2v2+L0I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ERUdXy1QciPj0QXaPRtVuC3WeemZj4JYObc69l8JVCm09nz3bbWwowWaYiTC2CtRV+EsTv1huNkLDFjZekcQWuCagJ2zaMT2JsXDjJq4vsXlpxsvUYYYxUNKtun2z3qjMAbUvD0jme+TOFk2IuqNlEO7Lo204QH9yf7veamRGP8=
Received: by 10.140.135.20 with SMTP id i20mr1663080rvd.1186347438323;
        Sun, 05 Aug 2007 13:57:18 -0700 (PDT)
Received: by 10.141.18.9 with HTTP; Sun, 5 Aug 2007 13:57:18 -0700 (PDT)
Message-ID: <52c3ddca0708051357v4646fa2dj33a3e3e581680492@mail.gmail.com>
Date: Sun, 5 Aug 2007 22:57:18 +0200
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Bug in Lucene 2.2.0 code? Simple code included (StringIndexOutOfBoundsException).
In-Reply-To: <46ADD8D3.4020805@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30461_18324513.1186347438287"
References: <52c3ddca0707281502t56efed1dp9552f0907a4ffdde@mail.gmail.com>
	 <46ABE7C6.9000204@gmail.com>
	 <52c3ddca0707282231s52d8c881oc2813fa96741bb80@mail.gmail.com>
	 <46ADD8D3.4020805@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30461_18324513.1186347438287
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Mark,

thanks a lot. Based on my first tests it seems that I will be able to finish
my initial goal.
I will be doing something like the following:

            for (int i = 0; i < hits.length(); i++) {

                String[] texts = hits.doc(i).getValues("lotid");

                for (String text: texts) {

                    TokenStream tokenStream = analyzer.tokenStream("lotid",
new StringReader(text));
                    String result = highlighter.getBestFragment
(tokenStream,text);

                }
            }

This works very well for me. The only disadvantage is that I can use neither
term vector not positioning information thus I am loosing performance I
guess.

Thanks,
Lukas

On 7/30/07, Mark Miller <markrmiller@gmail.com> wrote:
>
> Hey Lukas,
>
> I was being simplistic when I said that the text and TokenSteam must be
> exactly the same. It's difficult to think of a reason why you would not
> want them to be the same though. Each Token records the offsets where it
> can be found in the original text -- that is how the Highlighter knows
> where to highlight in the original text with the only the Tokens to
> inspect. So if a Token is scored >0, then the offsets for that Token
> must be valid indexes into the text String (In the case of the
> HTMLFormmatter, which only marks Tokens that score >0).
>
> Now an issue I see you having:
>
> The TokenStream for "example long text" is:
> (term,startoffset,endoffset)
>
> (example,0,7)
> (long,8,12)
> (text,13,17)
>
> So for the query "example long" the Highlighter will highlight offsets
> 0-7 and 8-12 in the source text. In your example, with the text only
> being "example", the attempt to highlight the Token "long" will index
> into the source text 8 and cause an outofbounds.
>
> In your case you are even worse off because you are building the
> TokenStream from a field that was added more than once. This gives you
> seemingly wrong offsets of:
>
> (example,0,7)
> (long,14,18)
> (text,22,26)
>
> Each word has its space accounted for twice. Maybe there is a reason for
> this, but it looks wrong. I have not investigated enough to know if
> TokenSources is responsible for this, or if core Lucene is the culprit.
> Even if it was done differently though, there would still seem to be
> possible issues with the possible spacing between words when you are
> adding the words one at a time with no spacing in the same field.
>
> Looking at your original email though, you may be trying to do something
> that is best done without the Highlighter.
>
> In summary , you should use Document.getFields (more efficient if you
> are getting more than one field anyway) and get around the offset issues
> above.
>
> - Mark
>
> Lukas Vlcek wrote:
> > Mark,
> > thank you for this. I will wait for your other responses.
> > This will keep me going on :-)
> >
> > I didn't know that there is a design restriction in Lucene that the text
> and
> > TokenStream must be exactly the same (still this seems redundant, I will
> > dive into Lucene API more).
> >
> > BR
> > Lukas
> >
> > On 7/29/07, Mark Miller <markrmiller@gmail.com> wrote:
> >
> >> I'm am going to try and write up some more info for you tomorrow, but
> >> just to point out: I do think there is a bug in the way offsets are
> >> being handled. I don't think this is causing your current problem (what
> >> I mentioned is) but it will prob cause you problems down the road. I
> >> will look into this further.
> >>
> >> - Mark
> >>
> >> Lukas Vlcek wrote:
> >>
> >>> Hi Lucene experts,
> >>>
> >>> The following is a simple Lucene code which generates
> >>> StringIndexOutOfBoundsException exception. I am using Lucene
> 2.2.0official
> >>> releasse. Can anyone tell me what is wrong with this code? Is this a
> bug
> >>>
> >> or
> >>
> >>> a feature of Lucene? Any comments/hits highly welcommed!
> >>>
> >>> In a nutshell I have a document with two (or four) fileds:
> >>> 1) all
> >>> 2-4) small
> >>>
> >>> I use [all] for searching and [small] for highlighting.
> >>>
> >>> [packkage and imports truncated...]
> >>>
> >>> public class MemoryIndexCase {
> >>>     static public void main(String[] arg) {
> >>>
> >>>         Document doc = new Document();
> >>>
> >>>         doc.add(new Field("all","example long text",
> >>>                 Field.Store.NO, Field.Index.TOKENIZED));
> >>>         doc.add(new Field("small","example",
> >>>                 Field.Store.YES, Field.Index.UN_TOKENIZED,
> >>> Field.TermVector.WITH_POSITIONS_OFFSETS));
> >>>         doc.add(new Field("small","long",
> >>>                 Field.Store.YES, Field.Index.UN_TOKENIZED,
> >>> Field.TermVector.WITH_POSITIONS_OFFSETS));
> >>>         doc.add(new Field("small","text",
> >>>                 Field.Store.YES, Field.Index.UN_TOKENIZED,
> >>> Field.TermVector.WITH_POSITIONS_OFFSETS));
> >>>
> >>>         try {
> >>>             Directory idx = new RAMDirectory();
> >>>             IndexWriter writer = new IndexWriter(idx, new
> >>> StandardAnalyzer(), true);
> >>>
> >>>             writer.addDocument(doc);
> >>>             writer.optimize();
> >>>             writer.close();
> >>>
> >>>             Searcher searcher = new IndexSearcher(idx);
> >>>
> >>>             QueryParser qp = new QueryParser("all", new
> >>>
> >> StandardAnalyzer());
> >>
> >>>             Query query = qp.parse("example text");
> >>>             Hits hits = searcher.search(query);
> >>>
> >>>             Highlighter highlighter =    new Highlighter(new
> >>> QueryScorer(query));
> >>>
> >>>             IndexReader ir = IndexReader.open(idx);
> >>>             for (int i = 0; i < hits.length(); i++) {
> >>>
> >>>                 String text = hits.doc(i).get("small");
> >>>
> >>>                 TermFreqVector tfv = ir.getTermFreqVector(hits.id(i),
> >>> "small");
> >>>                 TokenStream tokenStream=
> >>> TokenSources.getTokenStream((TermPositionVector)
> >>> tfv);
> >>>
> >>>                 String result =
> >>>                     highlighter.getBestFragment(tokenStream,text);
> >>>                 System.out.println(result);
> >>>             }
> >>>
> >>>         } catch (Throwable e) {
> >>>             e.printStackTrace();
> >>>         }
> >>>     }
> >>> }
> >>>
> >>> The exception is:
> >>> java.lang.StringIndexOutOfBoundsException: String index out of range:
> 11
> >>>     at java.lang.String.substring(String.java:1935)
> >>>     at
> >>>
> >> org.apache.lucene.search.highlight.Highlighter.getBestTextFragments(
> >>
> >>> Highlighter.java:235)
> >>>     at org.apache.lucene.search.highlight.Highlighter.getBestFragments
> (
> >>> Highlighter.java:175)
> >>>     at org.apache.lucene.search.highlight.Highlighter.getBestFragment(
> >>> Highlighter.java:101)
> >>>     at org.lucenetest.MemoryIndexCase.main(MemoryIndexCase.java:70)
> >>>
> >>> Best regards,
> >>> Lukas
> >>>
> >>>
> >>>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_30461_18324513.1186347438287--

From java-user-return-29646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 05 21:13:45 2007
Return-Path: <java-user-return-29646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97794 invoked from network); 5 Aug 2007 21:13:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2007 21:13:44 -0000
Received: (qmail 7042 invoked by uid 500); 5 Aug 2007 21:13:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7008 invoked by uid 500); 5 Aug 2007 21:13:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6997 invoked by uid 99); 5 Aug 2007 21:13:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Aug 2007 14:13:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 66.249.82.227 as permitted sender)
Received: from [66.249.82.227] (HELO wx-out-0506.google.com) (66.249.82.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Aug 2007 21:13:32 +0000
Received: by wx-out-0506.google.com with SMTP id i28so967528wxd
        for <java-user@lucene.apache.org>; Sun, 05 Aug 2007 14:13:11 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=bIf83o2OZin0Yxj6mAmaI1XVJpk7zi5YJ1O5NI7Knmw7hoP5IrxJfJgCSNguAbGZLECmNcHtL6HNlS2CG3mrHIMlHwaebQADPUAm3/3klU9jgR1aFKi1wVIaMM1UKbE6HNbU9hv1LeWBAtdY7lJ20BGW7kaKRR6Lx12nIqyvlRQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=LO8bRLeJay/8cQlLYAKOOVIJCvN/SrMs7ePkosWvjp1Z23ITgGJeQVcFRIAKMNhF2BiFA32lJkHQha9/0875YGn0FubwrKo4ojY0cmDwEBgudxZPIPUi0zkeS+Yt9flZFX5zUhwFwHsyR6N/q4BmCjher3ANcFjf0wo6KqFZ990=
Received: by 10.70.13.1 with SMTP id 1mr8744708wxm.1186348391067;
        Sun, 05 Aug 2007 14:13:11 -0700 (PDT)
Received: from ?192.168.1.105? ( [216.66.114.204])
        by mx.google.com with ESMTPS id 10sm5990825wrl.2007.08.05.14.13.09
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 05 Aug 2007 14:13:10 -0700 (PDT)
Message-ID: <46B63D40.5080205@gmail.com>
Date: Sun, 05 Aug 2007 17:12:32 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Bug in Lucene 2.2.0 code? Simple code included (StringIndexOutOfBoundsException).
References: <52c3ddca0707281502t56efed1dp9552f0907a4ffdde@mail.gmail.com>	 <46ABE7C6.9000204@gmail.com>	 <52c3ddca0707282231s52d8c881oc2813fa96741bb80@mail.gmail.com>	 <46ADD8D3.4020805@gmail.com> <52c3ddca0708051357v4646fa2dj33a3e3e581680492@mail.gmail.com>
In-Reply-To: <52c3ddca0708051357v4646fa2dj33a3e3e581680492@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Its questionable if you are losing performance. Unless you have really 
large docs or a nasty slow analyzer, I have found it is usually faster 
or as fast to reanalyze as it is to use TermVectors, which can be quite 
time consuming to load up and assemble a TokenStream from. You might run 
some tests and see for yourself. I was quite surprised.

Also, perhaps things could be fixed in offset handling code for adding 
multiple fields. That might get you going. I am still not sure that they 
are just not handled correctly because it doesnt make sense to try, or 
what. But it seems to me they are being handled pretty badly now in 
terms of offsets. I honestly have not decided if its worth the effort to 
investigate further. I certainly would have, but am very busy working on 
a move. I know you can get the same results using other attacks, so it 
might just not be worth it.

Good luck.

- Mark

Lukas Vlcek wrote:
> Mark,
>
> thanks a lot. Based on my first tests it seems that I will be able to finish
> my initial goal.
> I will be doing something like the following:
>
>             for (int i = 0; i < hits.length(); i++) {
>
>                 String[] texts = hits.doc(i).getValues("lotid");
>
>                 for (String text: texts) {
>
>                     TokenStream tokenStream = analyzer.tokenStream("lotid",
> new StringReader(text));
>                     String result = highlighter.getBestFragment
> (tokenStream,text);
>
>                 }
>             }
>
> This works very well for me. The only disadvantage is that I can use neither
> term vector not positioning information thus I am loosing performance I
> guess.
>
> Thanks,
> Lukas
>
> On 7/30/07, Mark Miller <markrmiller@gmail.com> wrote:
>   
>> Hey Lukas,
>>
>> I was being simplistic when I said that the text and TokenSteam must be
>> exactly the same. It's difficult to think of a reason why you would not
>> want them to be the same though. Each Token records the offsets where it
>> can be found in the original text -- that is how the Highlighter knows
>> where to highlight in the original text with the only the Tokens to
>> inspect. So if a Token is scored >0, then the offsets for that Token
>> must be valid indexes into the text String (In the case of the
>> HTMLFormmatter, which only marks Tokens that score >0).
>>
>> Now an issue I see you having:
>>
>> The TokenStream for "example long text" is:
>> (term,startoffset,endoffset)
>>
>> (example,0,7)
>> (long,8,12)
>> (text,13,17)
>>
>> So for the query "example long" the Highlighter will highlight offsets
>> 0-7 and 8-12 in the source text. In your example, with the text only
>> being "example", the attempt to highlight the Token "long" will index
>> into the source text 8 and cause an outofbounds.
>>
>> In your case you are even worse off because you are building the
>> TokenStream from a field that was added more than once. This gives you
>> seemingly wrong offsets of:
>>
>> (example,0,7)
>> (long,14,18)
>> (text,22,26)
>>
>> Each word has its space accounted for twice. Maybe there is a reason for
>> this, but it looks wrong. I have not investigated enough to know if
>> TokenSources is responsible for this, or if core Lucene is the culprit.
>> Even if it was done differently though, there would still seem to be
>> possible issues with the possible spacing between words when you are
>> adding the words one at a time with no spacing in the same field.
>>
>> Looking at your original email though, you may be trying to do something
>> that is best done without the Highlighter.
>>
>> In summary , you should use Document.getFields (more efficient if you
>> are getting more than one field anyway) and get around the offset issues
>> above.
>>
>> - Mark
>>
>> Lukas Vlcek wrote:
>>     
>>> Mark,
>>> thank you for this. I will wait for your other responses.
>>> This will keep me going on :-)
>>>
>>> I didn't know that there is a design restriction in Lucene that the text
>>>       
>> and
>>     
>>> TokenStream must be exactly the same (still this seems redundant, I will
>>> dive into Lucene API more).
>>>
>>> BR
>>> Lukas
>>>
>>> On 7/29/07, Mark Miller <markrmiller@gmail.com> wrote:
>>>
>>>       
>>>> I'm am going to try and write up some more info for you tomorrow, but
>>>> just to point out: I do think there is a bug in the way offsets are
>>>> being handled. I don't think this is causing your current problem (what
>>>> I mentioned is) but it will prob cause you problems down the road. I
>>>> will look into this further.
>>>>
>>>> - Mark
>>>>
>>>> Lukas Vlcek wrote:
>>>>
>>>>         
>>>>> Hi Lucene experts,
>>>>>
>>>>> The following is a simple Lucene code which generates
>>>>> StringIndexOutOfBoundsException exception. I am using Lucene
>>>>>           
>> 2.2.0official
>>     
>>>>> releasse. Can anyone tell me what is wrong with this code? Is this a
>>>>>           
>> bug
>>     
>>>> or
>>>>
>>>>         
>>>>> a feature of Lucene? Any comments/hits highly welcommed!
>>>>>
>>>>> In a nutshell I have a document with two (or four) fileds:
>>>>> 1) all
>>>>> 2-4) small
>>>>>
>>>>> I use [all] for searching and [small] for highlighting.
>>>>>
>>>>> [packkage and imports truncated...]
>>>>>
>>>>> public class MemoryIndexCase {
>>>>>     static public void main(String[] arg) {
>>>>>
>>>>>         Document doc = new Document();
>>>>>
>>>>>         doc.add(new Field("all","example long text",
>>>>>                 Field.Store.NO, Field.Index.TOKENIZED));
>>>>>         doc.add(new Field("small","example",
>>>>>                 Field.Store.YES, Field.Index.UN_TOKENIZED,
>>>>> Field.TermVector.WITH_POSITIONS_OFFSETS));
>>>>>         doc.add(new Field("small","long",
>>>>>                 Field.Store.YES, Field.Index.UN_TOKENIZED,
>>>>> Field.TermVector.WITH_POSITIONS_OFFSETS));
>>>>>         doc.add(new Field("small","text",
>>>>>                 Field.Store.YES, Field.Index.UN_TOKENIZED,
>>>>> Field.TermVector.WITH_POSITIONS_OFFSETS));
>>>>>
>>>>>         try {
>>>>>             Directory idx = new RAMDirectory();
>>>>>             IndexWriter writer = new IndexWriter(idx, new
>>>>> StandardAnalyzer(), true);
>>>>>
>>>>>             writer.addDocument(doc);
>>>>>             writer.optimize();
>>>>>             writer.close();
>>>>>
>>>>>             Searcher searcher = new IndexSearcher(idx);
>>>>>
>>>>>             QueryParser qp = new QueryParser("all", new
>>>>>
>>>>>           
>>>> StandardAnalyzer());
>>>>
>>>>         
>>>>>             Query query = qp.parse("example text");
>>>>>             Hits hits = searcher.search(query);
>>>>>
>>>>>             Highlighter highlighter =    new Highlighter(new
>>>>> QueryScorer(query));
>>>>>
>>>>>             IndexReader ir = IndexReader.open(idx);
>>>>>             for (int i = 0; i < hits.length(); i++) {
>>>>>
>>>>>                 String text = hits.doc(i).get("small");
>>>>>
>>>>>                 TermFreqVector tfv = ir.getTermFreqVector(hits.id(i),
>>>>> "small");
>>>>>                 TokenStream tokenStream=
>>>>> TokenSources.getTokenStream((TermPositionVector)
>>>>> tfv);
>>>>>
>>>>>                 String result =
>>>>>                     highlighter.getBestFragment(tokenStream,text);
>>>>>                 System.out.println(result);
>>>>>             }
>>>>>
>>>>>         } catch (Throwable e) {
>>>>>             e.printStackTrace();
>>>>>         }
>>>>>     }
>>>>> }
>>>>>
>>>>> The exception is:
>>>>> java.lang.StringIndexOutOfBoundsException: String index out of range:
>>>>>           
>> 11
>>     
>>>>>     at java.lang.String.substring(String.java:1935)
>>>>>     at
>>>>>
>>>>>           
>>>> org.apache.lucene.search.highlight.Highlighter.getBestTextFragments(
>>>>
>>>>         
>>>>> Highlighter.java:235)
>>>>>     at org.apache.lucene.search.highlight.Highlighter.getBestFragments
>>>>>           
>> (
>>     
>>>>> Highlighter.java:175)
>>>>>     at org.apache.lucene.search.highlight.Highlighter.getBestFragment(
>>>>> Highlighter.java:101)
>>>>>     at org.lucenetest.MemoryIndexCase.main(MemoryIndexCase.java:70)
>>>>>
>>>>> Best regards,
>>>>> Lukas
>>>>>
>>>>>
>>>>>
>>>>>           
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>         
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 05 23:41:11 2007
Return-Path: <java-user-return-29647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47519 invoked from network); 5 Aug 2007 23:41:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Aug 2007 23:41:09 -0000
Received: (qmail 51731 invoked by uid 500); 5 Aug 2007 23:41:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51697 invoked by uid 500); 5 Aug 2007 23:41:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51686 invoked by uid 99); 5 Aug 2007 23:41:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Aug 2007 16:41:03 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Aug 2007 23:40:58 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IHpi9-0005Gm-R3
	for java-user@lucene.apache.org; Sun, 05 Aug 2007 16:40:37 -0700
Message-ID: <12009334.post@talk.nabble.com>
Date: Sun, 5 Aug 2007 16:40:37 -0700 (PDT)
From: tierecke <nir.nussbaum@gmail.com>
To: java-user@lucene.apache.org
Subject: docFreq takes long time to execute in a multiple index environment
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: nir.nussbaum@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi there,

I have my 25 indexes of 1.8GB each read with MultiReader.
I try to get the document frequency of all the terms in specific documents
and it takes quite a long time - a document with 1000 terms takes around
4:30 minutes to calculate all the document frequencies of its terms - and
there are longer documents than that.

Since I have quite a lot of documents to process (around 12000) - it'll take
forever.
My function of getting the document frequency is listed below (it's for one
single term - but it's called for all the terms in the document term vector.

    public int getdocumentfrequency (String termstr) throws Exception
    {
        Term term=new Term("contents", termstr);
        TermEnum termenum=multireader.terms(term);
        int freq=termenum.docFreq();
        return freq;
    }

Is there a better (i.e. faster) way to get all the document frequencies of a
specific document?

thanks a lot,
Nir.

-- 
View this message in context: http://www.nabble.com/docFreq-takes-long-time-to-execute-in-a-multiple-index-environment-tf4221604.html#a12009334
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 06 01:40:54 2007
Return-Path: <java-user-return-29648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81695 invoked from network); 6 Aug 2007 01:40:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2007 01:40:53 -0000
Received: (qmail 6624 invoked by uid 500); 6 Aug 2007 01:40:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6576 invoked by uid 500); 6 Aug 2007 01:40:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6565 invoked by uid 99); 6 Aug 2007 01:40:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Aug 2007 18:40:47 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kai.hu@dusee.cn designates 222.66.106.38 as permitted sender)
Received: from [222.66.106.38] (HELO mx01.dusee.cn) (222.66.106.38)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 01:40:40 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: =?gb2312?B?tPC4tDogR2V0IHRoZSB0ZXJtcyBhbmQgZnJlcXVlbmN5IHZlY3Rvcg==?=
	=?gb2312?B?IG9mIGFuIGluZGV4ZWQgYnV0IHVuc3RvcmVkIGZpZWxk?=
Date: Mon, 6 Aug 2007 09:40:11 +0800
Message-ID: <8E5BA7FAF994C6409A8E074B78EB467701364FD8@14sha-msg02.zm.sd.mediazone.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Get the terms and frequency vector of an indexed but unstored field
Thread-Index: AcfV0ztcy5dkEyEAR/ug1tS+IHQi1wB9lmNg
From: "Kai Hu" <kai.hu@dusee.cn>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

 you use the flag to state the should store term? does it mean that you =
use the Field.Store.YES to store the large  data?  Can it reduce the =
data's size?

-----=D3=CA=BC=FE=D4=AD=BC=FE-----
=B7=A2=BC=FE=C8=CB: tierecke [mailto:nir.nussbaum@gmail.com]=20
=B7=A2=CB=CD=CA=B1=BC=E4: 2007=C4=EA8=D4=C23=C8=D5 =D0=C7=C6=DA=CE=E5 =
21:35
=CA=D5=BC=FE=C8=CB: java-user@lucene.apache.org
=D6=F7=CC=E2: Re: Get the terms and frequency vector of an indexed but =
unstored field


Thanks a lot, that works 100%!...
Fortunately, I did use the flag to state that Lucene should store the =
term
frequency vector. Otherwise, I'd have to index 77GB right now... :-)
--=20
View this message in context: =
http://www.nabble.com/Get-the-terms-and-frequency-vector-of-an-indexed-bu=
t-unstored-field-tf4211430.html#a11983495
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 06 02:23:39 2007
Return-Path: <java-user-return-29649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86424 invoked from network); 6 Aug 2007 02:23:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2007 02:23:37 -0000
Received: (qmail 27345 invoked by uid 500); 6 Aug 2007 02:23:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27306 invoked by uid 500); 6 Aug 2007 02:23:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27295 invoked by uid 99); 6 Aug 2007 02:23:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Aug 2007 19:23:31 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dmitrytkach1@hotmail.com designates 65.54.246.103 as permitted sender)
Received: from [65.54.246.103] (HELO bay0-omc1-s31.bay0.hotmail.com) (65.54.246.103)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 02:23:12 +0000
Received: from hotmail.com ([65.54.169.74]) by bay0-omc1-s31.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Sun, 5 Aug 2007 19:23:01 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Sun, 5 Aug 2007 19:23:01 -0700
Message-ID: <BAY114-DAV230B7A8E894666271C34994E50@phx.gbl>
Received: from 24.12.157.130 by BAY114-DAV2.phx.gbl with DAV;
	Mon, 06 Aug 2007 02:22:58 +0000
X-Originating-IP: [24.12.157.130]
X-Originating-Email: [dmitrytkach1@hotmail.com]
X-Sender: dmitrytkach1@hotmail.com
From: "Dmitry" <dmitrytkach1@hotmail.com>
To: <java-user@lucene.apache.org>
References: <8E5BA7FAF994C6409A8E074B78EB467701364FD8@14sha-msg02.zm.sd.mediazone.com>
Subject: Re: Get the terms and frequency vector of an indexed but unstored field
Date: Sun, 5 Aug 2007 21:22:59 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="gb2312";
	reply-type=original
Content-Transfer-Encoding: 8bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3028
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-OriginalArrivalTime: 06 Aug 2007 02:23:01.0166 (UTC) FILETIME=[B619C4E0:01C7D7D0]
X-Virus-Checked: Checked by ClamAV on apache.org

What is advantage to use term
frequency vector?

thanks,
DT
www.ejinz.com Search News

----- Original Message ----- 
From: "Kai Hu" <kai.hu@dusee.cn>
To: <java-user@lucene.apache.org>
Sent: Sunday, August 05, 2007 8:40 PM
Subject: : Get the terms and frequency vector of an indexed but unstored 
field


you use the flag to state the should store term? does it mean that you use 
the Field.Store.YES to store the large  data?  Can it reduce the data's 
size?

----------
: tierecke [mailto:nir.nussbaum@gmail.com]
: 200783  21:35
: java-user@lucene.apache.org
: Re: Get the terms and frequency vector of an indexed but unstored 
field


Thanks a lot, that works 100%!...
Fortunately, I did use the flag to state that Lucene should store the term
frequency vector. Otherwise, I'd have to index 77GB right now... :-)
-- 
View this message in context: 
http://www.nabble.com/Get-the-terms-and-frequency-vector-of-an-indexed-but-unstored-field-tf4211430.html#a11983495
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 06 04:07:24 2007
Return-Path: <java-user-return-29650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1169 invoked from network); 6 Aug 2007 04:07:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2007 04:07:23 -0000
Received: (qmail 76157 invoked by uid 500); 6 Aug 2007 04:07:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76106 invoked by uid 500); 6 Aug 2007 04:07:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76095 invoked by uid 99); 6 Aug 2007 04:07:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Aug 2007 21:07:17 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of kai.hu@dusee.cn designates 222.66.106.38 as permitted sender)
Received: from [222.66.106.38] (HELO mx01.dusee.cn) (222.66.106.38)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 04:07:02 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7D7DF.34BBC69F"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: About muti-Threads in Lucene
Date: Mon, 6 Aug 2007 12:06:45 +0800
Message-ID: <8E5BA7FAF994C6409A8E074B78EB467701364FFD@14sha-msg02.zm.sd.mediazone.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: About muti-Threads in Lucene
Thread-Index: AcfX3zQ1H3u0RmeiQS2dcL/qPmAzcg==
From: "Kai Hu" <kai.hu@dusee.cn>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7D7DF.34BBC69F
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

         How do you solve the problems when add,update,delete documents
in muti-threads,use synchronized ?=20


------_=_NextPart_001_01C7D7DF.34BBC69F--

From java-user-return-29651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 06 04:31:15 2007
Return-Path: <java-user-return-29651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5066 invoked from network); 6 Aug 2007 04:31:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2007 04:31:14 -0000
Received: (qmail 89697 invoked by uid 500); 6 Aug 2007 04:31:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88836 invoked by uid 500); 6 Aug 2007 04:31:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88825 invoked by uid 99); 6 Aug 2007 04:31:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Aug 2007 21:31:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cedric.ho@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 04:31:05 +0000
Received: by wa-out-1112.google.com with SMTP id j40so1797670wah
        for <java-user@lucene.apache.org>; Sun, 05 Aug 2007 21:30:45 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ccgMbvHnVQw74QLyhGa/YvIQTI1SEK08H2Ne4MDBDXyCwvbnOSHoOY7oaQRAHdK5tD4AXx7tiOEvQVgyk2X/jmaC6NiNZvUU6J+8FbR0M+zS8xOULnCTB701I+AJwNLZxvxvUE6bpPxGAXHp+S++lvlWOLMmn4FdZ/28h15Edic=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=pwBQG1X4t7jc8waUcPVhjsk7jQVDHw4VumunNZr0FqUFDDjlXIKm7AT9X6GpqSFTxpZejN7BgG7R58WnwROGbAp3bWCY7h0LvMGoYDRg/pv7Mywmw3HodugUj5oiAyP9PAK34+2uxsXDW+kviklwfTAJPy6Kdf/Db6MkqF5/Ptc=
Received: by 10.114.168.1 with SMTP id q1mr5239304wae.1186374645156;
        Sun, 05 Aug 2007 21:30:45 -0700 (PDT)
Received: by 10.114.46.4 with HTTP; Sun, 5 Aug 2007 21:30:45 -0700 (PDT)
Message-ID: <839ba01c0708052130r57f2fet250036c3a951de39@mail.gmail.com>
Date: Mon, 6 Aug 2007 12:30:45 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Can I do boosting based on term postions?
In-Reply-To: <d27fa17e0708031227i1aacf483i272651ecd8c1908e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <839ba01c0707312113p278da04bg636e2bfa853e6ff4@mail.gmail.com>
	 <200708031649.07438.paul.elschot@xs4all.nl>
	 <d27fa17e0708031135i5692e3c6laf4328a09992dd80@mail.gmail.com>
	 <200708032111.42593.paul.elschot@xs4all.nl>
	 <d27fa17e0708031227i1aacf483i272651ecd8c1908e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

UGF1bCwKSG0uLmV2ZW4gYmVpbmcgYSBMdWNlbmUgbmV3YmllLCBJIGNhbiB1bmRlcnN0YW5kIHlv
dXIgc29sdXRpb24gZWFzaWx5LiBUaGFua3MgPSkKClNoYWlsZW5kcmEsCkFsc28gdGhhbmsgeW91
IGZvciB5b3VyIGVmZm9ydHMgaW4gaGVscGluZyBtZSB0byBkbyB0aGlzLiBJIGRpZCBsZWFybgph
IGxvdCBtb3JlIGFib3V0IHRoZSBpbm5lciB3b3JraW5nIG9mIGx1Y2VuZSB0aHJvdWdoIHlvdXIg
ZXhhbXBsZXMgPSkKClRoYW5rcywKQ2VkcmljCgoKT24gOC80LzA3LCBTaGFpbGVuZHJhIFNoYXJt
YSA8c2hhaWxlbmRyYS5zaGFybWFAZ21haWwuY29tPiB3cm90ZToKPiBBaCwgR29vZCB3YXkgIQo+
Cj4gT24gOC80LzA3LCBQYXVsIEVsc2Nob3QgPHBhdWwuZWxzY2hvdEB4czRhbGwubmw+IHdyb3Rl
Ogo+ID4KPiA+IE9uIEZyaWRheSAwMyBBdWd1c3QgMjAwNyAyMDozNSwgU2hhaWxlbmRyYSBTaGFy
bWEgd3JvdGU6Cj4gPiA+IFBhdWwsCj4gPiA+Cj4gPiA+IElmIEkgdW5kZXJzdGFuZCBDZWRyaWMg
cmlnaHQsIGhlIHdhbnRzIHRvIGhhdmUgZGlmZmVyZW50IGJvb3N0aW5nCj4gPiBkZXBlbmRpbmcK
PiA+ID4gb24gc2VhcmNoIHRlcm0gcG9zaXRpb25zIGluIHRoZSBkb2N1bWVudC4gQnkgdXNpbmcg
U3BhbkZpcnN0UXVlcnkgaGUKPiA+IHdpbGwKPiA+ID4gb25seSBiZSBhYmxlIHRvIGNvbnNpZGVy
IGluIHRlcm1zIHRpbGwgcGFydGljdWxhciBwb3NpdGlvbjsKPiA+Cj4gPgo+ID4gPiBidXQgaGUg
d29uJ3QgYmUKPiA+ID4gYWJsZSB0byBkbyBzb21ldGhpbmcgbGlrZSBmb2xsb3dpbmc6Cj4gPiA+
ICAgYSkgR2l2ZSAxMDAlIGJvb3N0aW5nIHRvIG1hdGNoaW5nIGluIGZpcnN0IDEwMCB3b3Jkcy4K
PiA+ID4gICBiKSBHaXZlIDgwJSBib29zdGluZyB0byBtYXRjaGluZyBpbiBuZXh0IDEwMCB3b3Jk
cy4KPiA+ID4gICBjKSBHaXZlIDYwJSBib29zdGluZyB0byBtYXRjaGluZyBpbiBuZXh0IDEwMCB3
b3Jkcy4KPiA+Cj4gPiA+IFRob3VnaCBpdCBjYW4gYmUgZG9uZSBieSB3cml0aW5nIERpc2p1bmN0
aW9uTWF4UXVlcnkgaGF2aW5nIG11bHRpcGxlCj4gPiA+IFNwYW5GaXJzdFF1ZXJ5IHdpdGggZGlm
ZmVyZW50IGJvb3N0aW5nIC0gYnV0IEkgc2VlIGl0IGFzIGEgd29ya2Fyb3VuZAo+ID4gb25seQo+
ID4gPiBhbmQgbm90IHRoZSBkaXJlY3QgYW5kIGVmZmljaWVudCBzb2x1dGlvbi4KPiA+Cj4gPiBZ
b3UncmUgcmlnaHQsIGJ1dCBTcGFuRmlyc3RRdWVyeSBuZWVkcyBvbmx5IGEgbWlub3IgbW9kaWZp
Y2F0aW9uCj4gPiBmb3IgdGhpcyB0byB3b3JrLgo+ID4KPiA+IFRoaXMgbW9kaWZpY2F0aW9uIHRv
IFNwYW5GaXJzdFF1ZXJ5IHdvdWxkIGJlIHRoYXQgdGhlIFNwYW5zCj4gPiByZXR1cm5lZCBieSBT
cGFuRmlyc3RRdWVyeS5nZXRTcGFucygpIG11c3QgYWx3YXlzIHJldHVybiAwCj4gPiBmcm9tIGl0
cyBzdGFydCgpIG1ldGhvZC4gVGhlbiB0aGUgc2xvcCBwYXNzZWQgdG8gc2xvcHB5RnJlcShzbG9w
KQo+ID4gd291bGQgYmUgdGhlIGRpc3RhbmNlIGZyb20gdGhlIGJlZ2lubmluZyBvZiB0aGUgaW5k
ZXhlZCBmaWVsZAo+ID4gdG8gdGhlIGVuZCBvZiB0aGUgU3BhbnMgb2YgdGhlIFNwYW5RdWVyeSBw
YXNzZWQgdG8gU3BhbkZpcnN0UXVlcnkuCj4gPgo+ID4gVGhlbiB0aGUgZm9sbG93aW5nIHNob3Vs
ZCB3b3JrOgo+ID4KPiA+IFRlcm0gZmlyc3RUZXJtID0gLi4uLiA7Cj4gPgo+ID4gU3BhbkZpcnN0
UXVlcnkgc2ZxID0gbmV3IFNwYW5GaXJzdFF1ZXJ5KAo+ID4gICBuZXcgU3BhblRlcm1RdWVyeSgg
Zmlyc3RUZXJtKSwKPiA+ICAgSW50ZWdlci5NQVhfVkFMVUUpKSB7Cj4gPiAuLi4KPiA+IHB1Ymxp
YyBTaW1pbGFyaXR5IGdldFNpbWlsYXJpdHkoKSB7Cj4gPiByZXR1cm4gbmV3IFNpbWlsYXJpdHko
KSB7Cj4gPiAuLi4KPiA+IGZsb2F0IHNsb3BweUZyZXEoc2xvcCkgewo+ID4gICByZXR1cm4gKHNs
b3AgPCAxMDApICA/IDEuMGYKPiA+ICAgICAgICAgICAgOiAoc2xvcCA8IDIwMCkgPyAwLjhmCj4g
PiAgICAgICAgICAgIDogKHNsb3AgPCAzMDApID8gMC42Zgo+ID4gICAgICAgICAgICA6IDAuNGYg
OyAvLyBldGMuIGV0Yy4KPiA+IH19fX0KPiA+Cj4gPgo+ID4gQWN0dWFsbHksIEknbSBhIGJpdCBz
dXJwcmlzZWQgdGhhdCBTcGFuRmlyc3RRdWVyeSBkb2VzIG5vdCB3b3JrIHRoYXQKPiA+IHdheSBu
b3cuCj4gPgo+ID4gUmVnYXJkcywKPiA+IFBhdWwgRWxzY2hvdAo+ID4KPiA+Cj4gPiA+Cj4gPiA+
IENlZHJpYywKPiA+ID4KPiA+ID4gSSBhbSBzZW5kaW5nIHlvdSB0aGUgaW1wbGVtZW50YXRpb24g
b2YgU3BhblRlcm1RdWVyeSB0byB5b3VyIGdtYWlsCj4gPiA+IGFjY291bnQgKGx1Y2VuZQo+ID4g
PiBtYWlsaW5nIGxpc3QgaXMgYm91bmNpbmcgZW1haWwgd2l0aCBhdHRhY2htZW50KS4gSSBoYXZl
IG5hbWVkIHRoZSBjbGFzcwo+ID4gYXMKPiA+ID4gVlNwYW5UZXJtUXVlcnkgKEkgaGF2ZSBmb2xs
b3dlZCB0aGUgc2FtZSBwYWNrYWdlIGhpZXJhcmNoeSBhcyBsdWNlbmUpLgo+ID4gWW91Cj4gPiA+
IGFsc28gbmVlZCB0byBleHRlbmQgVlNpbWlsYXJpdHkgY2xhc3MgLSB3aGljaCB3b3VsZCByZXF1
aXJlCj4gPiBpbXBsZW1lbnRhdGlvbgo+ID4gPiBvZiBtZXRob2Qgc2NvcmVTcGFuKC4uKS4KPiA+
ID4KPiA+ID4gTGV0IG1lIGtub3cgaG93IGl0IHdlbnQuIFRob3VnaCBJIGRpZCBhIHRlc3Rpbmcg
Zm9yIGl0LCBidXQgYmVmb3JlCj4gPiA+IHN1Ym1pdHRpbmcgdG8gY29udHJpYiwgSSBuZWVkIHRv
IGRvIGV4dGVuc2l2ZSB0ZXN0aW5nLgo+ID4gPgo+ID4gPiBUaGFua3MsCj4gPiA+IFNoYWlsZW5k
cmEKPiA+ID4KPiA+ID4gT24gOC8zLzA3LCBQYXVsIEVsc2Nob3QgPHBhdWwuZWxzY2hvdEB4czRh
bGwubmw+IHdyb3RlOgo+ID4gPiA+Cj4gPiA+ID4gQ2VkcmljLAo+ID4gPiA+Cj4gPiA+ID4gWW91
IGNhbiBjaG9vc2UgdGhlIGVuZCBsaW1pdCBmb3IgU3BhbkZpcnN0UXVlcnkgeW91cnNlbGYuCj4g
PiA+ID4KPiA+ID4gPiBSZWdhcmRzLAo+ID4gPiA+IFBhdWwgRWxzY2hvdAo+ID4gPiA+Cj4gPiA+
ID4KPiA+ID4gPiBPbiBGcmlkYXkgMDMgQXVndXN0IDIwMDcgMDU6MzgsIENlZHJpYyBIbyB3cm90
ZToKPiA+ID4gPiA+IEhpIFBhdWwsCj4gPiA+ID4gPgo+ID4gPiA+ID4gSXNuJ3QgU3BhbkZpcnN0
UXVlcnkgb25seSBtYXRjaCB0aG9zZSB3aXRoIHBvc2l0aW9uIGxlc3MgdGhhbiBhCj4gPiA+ID4g
PiBjZXJ0YWluIGVuZCBwb3NpdGlvbj8KPiA+ID4gPiA+Cj4gPiA+ID4gPiBJIGFtIHJhdGhlciBs
b29raW5nIGZvciBhIHF1ZXJ5IHRoYXQgd291bGQgc2NvcmUgYSBkb2N1bWVudCBoaWdoZXIKPiA+
IGZvcgo+ID4gPiA+ID4gdGVybXMgYXBwZWFyIG5lYXIgdGhlIHN0YXJ0IGJ1dCBub3QgdG90YWxs
eSBkaXNjYXJkIHRob3NlIHdpdGggdGVybXMKPiA+ID4gPiA+IGFwcGVhciBuZWFyIHRoZSBlbmQu
Cj4gPiA+ID4gPgo+ID4gPiA+ID4gUmVnYXJkcywKPiA+ID4gPiA+IENlZHJpYwo+ID4gPiA+ID4K
PiA+ID4gPiA+IE9uIDgvMi8wNywgUGF1bCBFbHNjaG90IDxwYXVsLmVsc2Nob3RAeHM0YWxsLm5s
PiB3cm90ZToKPiA+ID4gPiA+ID4gQ2VkcmljLAo+ID4gPiA+ID4gPgo+ID4gPiA+ID4gPiBTcGFu
Rmlyc3RRdWVyeSBjb3VsZCBiZSBhIHNvbHV0aW9uIHdpdGhvdXQgcGF5bG9hZHMuCj4gPiA+ID4g
PiA+IFlvdSBtYXkgd2FudCB0byBnaXZlIGl0IHlvdXIgb3duIFNpbWlsYXJpdHkuc2xvcHB5RnJl
cSgpIC4KPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gUmVnYXJkcywKPiA+ID4gPiA+ID4gUGF1bCBF
bHNjaG90Cj4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+IE9uIFRodXJzZGF5IDAyIEF1Z3VzdCAyMDA3
IDA0OjA3LCBDZWRyaWMgSG8gd3JvdGU6Cj4gPiA+ID4gPiA+ID4gVGhhbmtzIGZvciB0aGUgcXVp
Y2sgcmVzcG9uc2UgPSkKPiA+ID4gPiA+ID4gPgo+ID4gPiA+ID4gPiA+IE9uIDgvMS8wNywgU2hh
aWxlbmRyYSBTaGFybWEgPHNoYWlsZW5kcmEuc2hhcm1hQGdtYWlsLmNvbT4KPiA+IHdyb3RlOgo+
ID4gPiA+ID4gPiA+ID4gWWVzLCBpdCBpcyBlYXNpbHkgZG9hYmxlIHRocm91Z2ggIlBheWxvYWQi
IGZhY2lsaXR5LiBEdXJpbmcKPiA+ID4gPiBpbmRleGluZwo+ID4gPiA+ID4gPiBwcm9jZXNzCj4g
PiA+ID4gPiA+ID4gPiAobWFpbmx5IHRva2VuaXphdGlvbiksIHlvdSBuZWVkIHRvIHB1c2ggdGhp
cyBleHRyYSBpbmZvcm1hdGlvbgo+ID4gaW4KPiA+ID4gPiBlYWNoCj4gPiA+ID4gPiA+ID4gPiB0
b2tlbi4gQW5kIHRoZW4geW91IGNhbiB1c2UgQm9vc3RpbmdUZXJtUXVlcnkgZm9yIHVzaW5nCj4g
PiBQYXlsb2FkCj4gPiA+ID4gdmFsdWUKPiA+ID4gPiB0bwo+ID4gPiA+ID4gPiA+ID4gaW5jbHVk
ZSBQYXlsb2FkIGluIHRoZSBzY29yZS4gWW91IGFsc28gbmVlZCB0byBpbXBsZW1lbnQKPiA+ID4g
PiBTaW1pbGFyaXR5Cj4gPiA+ID4gZm9yCj4gPiA+ID4gPiA+IHRoaXMKPiA+ID4gPiA+ID4gPiA+
IChtYWlubHkgc2NvcmVQYXlsb2FkIG1ldGhvZCkuCj4gPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4g
PiBJZiBJIHN0b3JlLCBzYXkgYSBjdXN0b20gYm9vc3QgZmFjdG9yIGFzIFBheWxvYWQsIGRvZXMg
aXQgbWVhbnMKPiA+IHRoYXQKPiA+ID4gPiBJCj4gPiA+ID4gPiA+ID4gd2lsbCBzdG9yZSBvbmUg
bW9yZSBieXRlIHBlciB0ZXJtIHBlciBkb2N1bWVudCBpbiB0aGUgaW5kZXgKPiA+IGZpbGU/IFNv
Cj4gPiA+ID4gPiA+ID4gdGhlIGluZGV4IGZpbGUgd291bGQgYmUgbXVjaCBsYXJnZXI/Cj4gPiA+
ID4gPiA+ID4KPiA+ID4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+ID4gPiBPdGhlciB3YXkgY2FuIGJl
IHRvIGV4dGVuZCBTcGFuVGVybVF1ZXJ5LCB0aGlzIGFscmVhZHkKPiA+IGNhbGN1bGF0ZXMKPiA+
ID4gPiB0aGUKPiA+ID4gPiA+ID4gPiA+IHBvc2l0aW9uIG9mIG1hdGNoLiBZb3UganVzdCBuZWVk
IHRvIGRvIHNvbWV0aGluZyB0byB1c2UgdGhpcwo+ID4gPiA+IHBvc2l0aW9uCj4gPiA+ID4gPiA+
IHZhbHVlCj4gPiA+ID4gPiA+ID4gPiBpbiB0aGUgc2NvcmUgY2FsY3VsYXRpb24uCj4gPiA+ID4g
PiA+ID4KPiA+ID4gPiA+ID4gPiBJIHNlZSB0aGF0IFNwYW5UZXJtUXVlcnkgdGFrZXMgYSBUZXJt
UG9zaXRpb25zIGZyb20gdGhlCj4gPiBpbmRleFJlYWRlcgo+ID4gPiA+ID4gPiA+IGFuZCBJIGNh
biBnZXQgdGhlIHRlcm0gcG9zaXRpb24gZnJvbSB0aGVyZS4gSG93ZXZlciBJIGFtIG5vdAo+ID4g
c3VyZQo+ID4gPiA+IGhvdwo+ID4gPiA+ID4gPiA+IHRvIGluY29ycG9yYXRlIGl0IGludG8gdGhl
IHNjb3JlIGNhbGN1bGF0aW9uLiBXb3VsZCB5b3UgbWluZAo+ID4gZ2l2ZSBhCj4gPiA+ID4gPiA+
ID4gbGl0dGxlIG1vcmUgZGV0YWlsIG9uIHRoaXM/Cj4gPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4g
PiA+Cj4gPiA+ID4gPiA+ID4gPiBPbmUgcG9zc2libGUgYWR2YW50YWdlIG9mIFNwYW5UZXJtUXVl
cnkgYXBwcm9hY2ggaXMgdGhhdCB5b3UKPiA+IGNhbgo+ID4gPiA+IHBsYXkKPiA+ID4gPiA+ID4g
PiA+IGFyb3VuZCwgd2l0aG91dCByZS1jcmVhdGluZyBpbmRpY2VzIGV2ZXJ5dGltZS4KPiA+ID4g
PiA+ID4gPiA+Cj4gPiA+ID4gPiA+ID4gPiBUaGFua3MsCj4gPiA+ID4gPiA+ID4gPiBTaGFpbGVu
ZHJhIFNoYXJtYSwKPiA+ID4gPiA+ID4gPiA+IENUTywgVmVyIHNlJyBJbm5vdmF0aW9uIFB2dC4g
THRkLgo+ID4gPiA+ID4gPiA+ID4gQmFuZ2Fsb3JlLCBJbmRpYQo+ID4gPiA+ID4gPiA+ID4KPiA+
ID4gPiA+ID4gPiA+IE9uIDgvMS8wNywgQ2VkcmljIEhvIDxjZWRyaWMuaG9AZ21haWwuY29tPiB3
cm90ZToKPiA+ID4gPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gPiA+ID4gSGkgYWxsLAo+ID4gPiA+
ID4gPiA+ID4gPgo+ID4gPiA+ID4gPiA+ID4gPiBJIHdhcyB3b25kZXJpbmcgaWYgaXQgaXMgcG9z
c2libGUgdG8gZG8gYm9vc3RpbmcgYnkgc2VhcmNoCj4gPiA+ID4gdGVybXMnCj4gPiA+ID4gPiA+
ID4gPiA+IHBvc2l0aW9uIGluIHRoZSBkb2N1bWVudC4KPiA+ID4gPiA+ID4gPiA+ID4KPiA+ID4g
PiA+ID4gPiA+ID4gZm9yIGV4YW1wbGU6Cj4gPiA+ID4gPiA+ID4gPiA+IHNlYXJjaCB0ZXJtcyBh
cHBlYXIgaW4gdGhlIGZpcnN0IDEwMCB3b3Jkcywgb3IgZmlyc3QgMTAlCj4gPiB3b3JkcywKPiA+
ID4gPiBvcgo+ID4gPiA+IGluCj4gPiA+ID4gPiA+ID4gPiA+IGZpcnN0IHR3byBwYXJhZ3JhcGhz
IHdvdWxkIGJlIGdpdmVuIGhpZ2hlciBzY29yZS4KPiA+ID4gPiA+ID4gPiA+ID4KPiA+ID4gPiA+
ID4gPiA+ID4gSXMgaXQgYWNoaWV2YWJsZSB0aHJvdWdoIHVzaW5nIHRoZSBuZXcgUGF5bG9hZCBm
dW5jdGlvbiBpbgo+ID4gPiA+IGx1Y2VuZQo+ID4gPiA+IDIuMj8KPiA+ID4gPiA+ID4gPiA+ID4g
T3IgYXJlIHRoZXJlIGFueSBlYXNpZXIgd2F5cyB0byBhY2hpZXZlIHRoZXNlID8KPiA+ID4gPiA+
ID4gPiA+ID4KPiA+ID4gPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gPiA+ID4gUmVnYXJkcywKPiA+
ID4gPiA+ID4gPiA+ID4gQ2VkcmljCj4gPiA+ID4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+ID4gPiA+
Cj4gPiA+ID4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gPiA+ID4gPiA+ID4gPiA+IFRvIHVuc3Vic2NyaWJlLCBl
LW1haWw6Cj4gPiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiA+ID4g
PiA+ID4gPiA+ID4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDoKPiA+ID4gPiBqYXZh
LXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+ID4gPiA+ID4gPiA+ID4gPgo+ID4gPiA+ID4g
PiA+ID4gPgo+ID4gPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gPgo+ID4gPiA+ID4gPiA+IFRoYW5r
cywKPiA+ID4gPiA+ID4gPiBDZWRyaWMKPiA+ID4gPiA+ID4gPgo+ID4gPiA+ID4gPiA+Cj4gPiA+
ID4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tCj4gPiA+ID4gPiA+ID4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2
YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gPiA+ID4gPiA+ID4gRm9yIGFk
ZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDoKPiA+IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFj
aGUub3JnCj4gPiA+ID4gPiA+ID4KPiA+ID4gPiA+ID4gPgo+ID4gPiA+ID4gPiA+Cj4gPiA+ID4g
PiA+Cj4gPiA+ID4gPiA+Cj4gPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiA+ID4gPiA+ID4gVG8gdW5zdWJzY3Jp
YmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gPiA+
ID4gPiA+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1
Y2VuZS5hcGFjaGUub3JnCj4gPiA+ID4gPiA+Cj4gPiA+ID4gPiA+Cj4gPiA+ID4gPgo+ID4gPiA+
ID4KPiA+ID4gPiA+IC0tCj4gPiA+ID4gPiDmhJtA5LiKLktleWJvYXJkCj4gPiA+ID4gPgo+ID4g
PiA+ID4KPiA+ID4gPiA+Cj4gPiA+ID4KPiA+ID4gPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiA+ID4gPiBUbyB1
bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5v
cmcKPiA+ID4gPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVs
cEBsdWNlbmUuYXBhY2hlLm9yZwo+ID4gPiA+Cj4gPiA+ID4KPiA+ID4KPiA+Cj4gPiAtLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0KPiA+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBs
dWNlbmUuYXBhY2hlLm9yZwo+ID4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2
YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPiA+Cj4gPgo+Cg==


From java-user-return-29652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 06 06:57:29 2007
Return-Path: <java-user-return-29652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54373 invoked from network); 6 Aug 2007 06:57:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2007 06:57:28 -0000
Received: (qmail 77323 invoked by uid 500); 6 Aug 2007 06:57:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77290 invoked by uid 500); 6 Aug 2007 06:57:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77279 invoked by uid 99); 6 Aug 2007 06:57:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Aug 2007 23:57:21 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mailing.patrick.kimber@gmail.com designates 209.85.146.177 as permitted sender)
Received: from [209.85.146.177] (HELO wa-out-1112.google.com) (209.85.146.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 06:57:17 +0000
Received: by wa-out-1112.google.com with SMTP id j40so1834118wah
        for <java-user@lucene.apache.org>; Sun, 05 Aug 2007 23:56:56 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=f8xmsg5SSZ14HzJIfif4hxvlPDxMkXuHzHe6xXxmYU1QLpNF+z7y5C21MRZnzMEoHfZq1tkjQccxVmDoa4P47jGDMlSd+KsECR52YUxbml36s7xcbRdqqTbdHylkXkEw07MKadrAoX2dvJQc7kGimu78zc0I8NPfcua2p4chySQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=H545sfhW/WCAxt4UwiVpOMH/VekKun/5E9mFOWmzzNVLuvQUF8Fucr6RKQYCPbZorm2sHoLKAZ5H/9AKBsoNnkPNvPJiQQqv/xXh8Ttk1nHPlRbREvglNfE64tvYBbgD7WA1iMnJ5TQyp6gu0HDbmn83g3n5Dmwbeg7jAAOqEFc=
Received: by 10.114.154.1 with SMTP id b1mr5351790wae.1186383416045;
        Sun, 05 Aug 2007 23:56:56 -0700 (PDT)
Received: by 10.115.55.4 with HTTP; Sun, 5 Aug 2007 23:56:56 -0700 (PDT)
Message-ID: <4f9b23800708052356g5520a8f3v1b4ef586d6922b3b@mail.gmail.com>
Date: Mon, 6 Aug 2007 07:56:56 +0100
From: "Patrick Kimber" <mailing.patrick.kimber@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: About muti-Threads in Lucene
In-Reply-To: <8E5BA7FAF994C6409A8E074B78EB467701364FFD@14sha-msg02.zm.sd.mediazone.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <8E5BA7FAF994C6409A8E074B78EB467701364FFD@14sha-msg02.zm.sd.mediazone.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Kai

We use the Lucene Index Accessor contribution:

http://www.nabble.com/Fwd%3A-Contribution%3A-LuceneIndexAccessor-t17416.html#a47049

Patrick

On 06/08/07, Kai Hu <kai.hu@dusee.cn> wrote:
> Hi,
>
>          How do you solve the problems when add,update,delete documents
> in muti-threads,use synchronized ?
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 06 07:10:05 2007
Return-Path: <java-user-return-29653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57291 invoked from network); 6 Aug 2007 07:10:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2007 07:10:04 -0000
Received: (qmail 98036 invoked by uid 500); 6 Aug 2007 07:09:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97997 invoked by uid 500); 6 Aug 2007 07:09:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97986 invoked by uid 99); 6 Aug 2007 07:09:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 00:09:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.18.16 as permitted sender)
Received: from [80.67.18.16] (HELO smtprelay04.ispgateway.de) (80.67.18.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 07:09:41 +0000
Received: (qmail 26527 invoked from network); 6 Aug 2007 07:09:27 -0000
Received: from unknown (HELO p54bfd6a5.dip.t-dialin.net) ([pbs]695637@[84.191.214.165])
          (envelope-sender <lucenelist2007@danielnaber.de>)
          by smtprelay04.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 6 Aug 2007 07:09:27 -0000
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: docFreq takes long time to execute in a multiple index environment
Date: Mon, 6 Aug 2007 09:11:40 +0200
User-Agent: KMail/1.8.2
References: <12009334.post@talk.nabble.com>
In-Reply-To: <12009334.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200708060911.40377@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Monday 06 August 2007 01:40, tierecke wrote:

> =C2=A0 =C2=A0 =C2=A0 =C2=A0 Term term=3Dnew Term("contents", termstr);
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 TermEnum termenum=3Dmultireader.terms(term);
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 int freq=3Dtermenum.docFreq();

IndexReader has a docFreq() method, no need to get a Term enumeration.

regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 06 10:29:49 2007
Return-Path: <java-user-return-29654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16612 invoked from network); 6 Aug 2007 10:29:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2007 10:29:48 -0000
Received: (qmail 24628 invoked by uid 500); 6 Aug 2007 10:29:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24593 invoked by uid 500); 6 Aug 2007 10:29:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24582 invoked by uid 99); 6 Aug 2007 10:29:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 03:29:41 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=HTML_FONT_FACE_BAD,HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kai.hu@dusee.cn designates 222.66.106.38 as permitted sender)
Received: from [222.66.106.38] (HELO mx01.dusee.cn) (222.66.106.38)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 10:29:33 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7D814.9EDBBC08"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: =?gb2312?B?tPC4tDogQWJvdXQgbXV0aS1UaHJlYWRzIGluIEx1Y2VuZQ==?=
Date: Mon, 6 Aug 2007 18:29:05 +0800
Message-ID: <8E5BA7FAF994C6409A8E074B78EB467701365086@14sha-msg02.zm.sd.mediazone.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: About muti-Threads in Lucene
Thread-Index: AcfX9xFAbpmLVJuNSySiTalXH6alNgACu7Yg
From: "Kai Hu" <kai.hu@dusee.cn>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7D814.9EDBBC08
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable

Thanks , Patrick,

It is useful. But I found a problem that I use=20

=A1=B0new LuceneIndexAccessor(accessProvider);=A1=B1 when a request =
comes in B/S,the LuceneIndexAccessor.getWriter() will lose its sense,it =
will new an IndexWriter.

public IndexWriter getWriter() throws IOException {

       IndexWriter result;

       synchronized (this) {//here =A1=B0synchronized=A1=B1 will lose =
its sense=20

           checkClosed();

           ...

       if (cachedWriter !=3D null) {

              log.debug("returning cached writer");

              result =3D cachedWriter;

              writerUseCount++;

           } else {

              log.debug("opening new writer and caching it");

              result =3D accessProvider.getWriter();// when new a =
LuceneIndexAccessor Object ,it will new an IndexWriter Object=20

              cachedWriter =3D result;

              writerUseCount =3D 1;

           }

    }

}

It will also throw a Exception =A1=B0cann=A1=AFt obtain the =
Lock=A1=B1,should I use a single instance of LuceneIndexAccessor? =
Suppose I use a single instance of LuceneIndexAccessor,how to set a =
different Directory or Analyzer at one time.

=20

kai


///////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////

=20

>Hi Kai

>=20

>We use the Lucene Index Accessor contribution:

>=20

>http://www.nabble.com/Fwd%3A-Contribution%3A-LuceneIndexAccessor-t17416.=
html#a47049

>=20

>Patrick

=20

On 06/08/07, Kai Hu <kai.hu@dusee.cn> wrote:

> Hi,

>=20

>          How do you solve the problems when add,update,delete =
documents

> in muti-threads,use synchronized ?

>=20

>=20

=20

---------------------------------------------------------------------

To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org

For additional commands, e-mail: java-user-help@lucene.apache.org

=20


------_=_NextPart_001_01C7D814.9EDBBC08--

From java-user-return-29655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 06 11:01:13 2007
Return-Path: <java-user-return-29655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34573 invoked from network); 6 Aug 2007 11:01:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2007 11:01:12 -0000
Received: (qmail 57111 invoked by uid 500); 6 Aug 2007 11:01:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57073 invoked by uid 500); 6 Aug 2007 11:01:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57062 invoked by uid 99); 6 Aug 2007 11:01:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 04:01:06 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mailing.patrick.kimber@gmail.com designates 209.85.198.190 as permitted sender)
Received: from [209.85.198.190] (HELO rv-out-0910.google.com) (209.85.198.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 11:01:00 +0000
Received: by rv-out-0910.google.com with SMTP id k20so898750rvb
        for <java-user@lucene.apache.org>; Mon, 06 Aug 2007 04:00:40 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=kD1O/gSY9C69sGmw+Q9ntbiPUkLkwu7/JNnUjvghk84455gCyZHzzBLhQQkQtLxIeOuLCwmdrHFFjpLqVGSGrQqAfY5iedNAIu+yJR+cGrbxx6flEivK7heL/mz9jIGcB0A9NhC8Q0yo660htkdphBUuyckBYYVOXOJUpiaMd+I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=SOfydhVOvR4wmrMTX6MX3RNBhvWmR+mLYhy8VFoq1lB2xQCrGoW2B+wY1qMjkBP2usQQld/aJ5CBNwR+u/Az2Tzj/mCvBmzo94+sLM1ms0yq3TfxM7jz69GWbXKO1IFAsugMs5h92ySuWpmCZR76GQErLL81hHhrFi1kIVIjgh0=
Received: by 10.114.57.1 with SMTP id f1mr5539293waa.1186398039923;
        Mon, 06 Aug 2007 04:00:39 -0700 (PDT)
Received: by 10.115.55.4 with HTTP; Mon, 6 Aug 2007 04:00:39 -0700 (PDT)
Message-ID: <4f9b23800708060400t6e06601dic884cc0eed4d5744@mail.gmail.com>
Date: Mon, 6 Aug 2007 12:00:39 +0100
From: "Patrick Kimber" <mailing.patrick.kimber@gmail.com>
To: java-user@lucene.apache.org
Subject: =?GB2312?B?UmU6ILTwuLQ6IEFib3V0IG11dGktVGhyZWFkcyBpbiBMdWNlbmU=?=
In-Reply-To: <8E5BA7FAF994C6409A8E074B78EB467701365086@14sha-msg02.zm.sd.mediazone.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <8E5BA7FAF994C6409A8E074B78EB467701365086@14sha-msg02.zm.sd.mediazone.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Kai

We keep a synchronized map of LuceneIndexAccessor instances, one instance per
Directory.  The map is keyed on the directory path.  We then re-use
the accessor rather than creating a new one each time.

Patrick

On 06/08/07, Kai Hu <kai.hu@dusee.cn> wrote:
> Thanks , Patrick,
>
> It is useful. But I found a problem that I use
>
> "new LuceneIndexAccessor(accessProvider);" when a request comes in B/S,the LuceneIndexAccessor.getWriter() will lose its sense,it will new an IndexWriter.
>
> public IndexWriter getWriter() throws IOException {
>
>        IndexWriter result;
>
>        synchronized (this) {//here "synchronized" will lose its sense
>
>            checkClosed();
>
>            ...
>
>        if (cachedWriter != null) {
>
>               log.debug("returning cached writer");
>
>               result = cachedWriter;
>
>               writerUseCount++;
>
>            } else {
>
>               log.debug("opening new writer and caching it");
>
>               result = accessProvider.getWriter();// when new a LuceneIndexAccessor Object ,it will new an IndexWriter Object
>
>               cachedWriter = result;
>
>               writerUseCount = 1;
>
>            }
>
>     }
>
> }
>
> It will also throw a Exception "cann't obtain the Lock",should I use a single instance of LuceneIndexAccessor? Suppose I use a single instance of LuceneIndexAccessor,how to set a different Directory or Analyzer at one time.
>
>
>
> kai
>
>
> ///////////////////////////////////////////////////////////
>
> ///////////////////////////////////////////////////////////
>
>
>
> >Hi Kai
>
> >
>
> >We use the Lucene Index Accessor contribution:
>
> >
>
> >http://www.nabble.com/Fwd%3A-Contribution%3A-LuceneIndexAccessor-t17416.html#a47049
>
> >
>
> >Patrick
>
>
>
> On 06/08/07, Kai Hu <kai.hu@dusee.cn> wrote:
>
> > Hi,
>
> >
>
> >          How do you solve the problems when add,update,delete documents
>
> > in muti-threads,use synchronized ?
>
> >
>
> >
>
>
>
> ---------------------------------------------------------------------
>
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 06 11:13:14 2007
Return-Path: <java-user-return-29656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40019 invoked from network); 6 Aug 2007 11:13:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2007 11:13:13 -0000
Received: (qmail 68738 invoked by uid 500); 6 Aug 2007 11:13:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68699 invoked by uid 500); 6 Aug 2007 11:13:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68688 invoked by uid 99); 6 Aug 2007 11:13:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 04:13:07 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 11:13:02 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1II0Vt-0003HW-Mc
	for java-user@lucene.apache.org; Mon, 06 Aug 2007 04:12:41 -0700
Message-ID: <12014472.post@talk.nabble.com>
Date: Mon, 6 Aug 2007 04:12:41 -0700 (PDT)
From: tierecke <nir.nussbaum@gmail.com>
To: java-user@lucene.apache.org
Subject: You are right but it doesn't make it faster.
In-Reply-To: <200708060911.40377@danielnaber.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: nir.nussbaum@gmail.com
References: <12009334.post@talk.nabble.com> <200708060911.40377@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Daniel, you are completely right.
I changed the code - but it doesn't make it [noticeably faster] - probably
behind the scene it does run on the enum.
I added some kind of hash table that keeps the docfreq already read so if I
meet it again in another document I can retrieve it quickly - is there
another solution? Maybe have a separate Lucene index for this? (In this case
- can I read and write to the same index without closing it and reopening
it? I want to read from it and if I don't find the docfreq there, calculate
it and put it in the index).

10x Nir.


On Monday 06 August 2007 01:40, tierecke wrote:

>         Term term=new Term("contents", termstr);
>         TermEnum termenum=multireader.terms(term);
>         int freq=termenum.docFreq();

IndexReader has a docFreq() method, no need to get a Term enumeration.

regards
 Daniel

-- 
View this message in context: http://www.nabble.com/docFreq-takes-long-time-to-execute-in-a-multiple-index-environment-tf4221604.html#a12014472
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 06 11:39:45 2007
Return-Path: <java-user-return-29657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55645 invoked from network); 6 Aug 2007 11:39:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2007 11:39:43 -0000
Received: (qmail 94688 invoked by uid 500); 6 Aug 2007 11:39:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94642 invoked by uid 500); 6 Aug 2007 11:39:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94630 invoked by uid 99); 6 Aug 2007 11:39:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 04:39:37 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rsk.sen@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 11:39:34 +0000
Received: by wa-out-1112.google.com with SMTP id j40so1911226wah
        for <java-user@lucene.apache.org>; Mon, 06 Aug 2007 04:39:13 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=fUcwVYWliVKaI1ISsMANVFsEjwxjwGAGY1d3MSRBSaeXDiRDufqxk1gS9K7mFuseENzVrF+GHMlvMHfJmt57YhXyJKT4BKU8Umr39Um8kZWDgqcYNi9hCjdhWpAs3vmh3Mno/Pzu8/VbKbSgOFZi281q+d1OvDXF/z3AQw6Fr5E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=A6nShvmdGKVVilTpodjrQk7vraM7gquXW7SE0xcCUwV/RRhG/GhXbQZnac2e6pBKX7/4m9CE55paoZF9lhkYAzaa78T6Rx0TmS5lNfFFsDe46XbKOmFOw8J6HxQqguewRSCb7IWUXNqlU26BXtr7x/dZHV1Z3BCzT+8oFd9yPDM=
Received: by 10.114.149.2 with SMTP id w2mr5555985wad.1186400352678;
        Mon, 06 Aug 2007 04:39:12 -0700 (PDT)
Received: by 10.114.93.18 with HTTP; Mon, 6 Aug 2007 04:39:07 -0700 (PDT)
Message-ID: <4628d2a90708060439m19539f85h47288d92b4ca5d4a@mail.gmail.com>
Date: Mon, 6 Aug 2007 17:09:07 +0530
From: "SK R" <rsk.sen@gmail.com>
To: java-user@lucene.apache.org
Subject: speedup indexing
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_95568_3742242.1186400347647"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_95568_3742242.1186400347647
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
    I have indexed 5 fields  and stored 2 of them(field Length is around
10000). My index is growing in nature and it is in GB. I need to get search
result based on docID only. Scoring, additional sorting, delete and update
are never used. None of complicated things required.
    In my testing , Search is wonderful , but index is somewhat slow. Please
advice me how to improve indexing speed?
I played with MergeFactor and MaxBufferedDocs. Norms are disabled.
Is Lucene by default doing some more things more than my requirement?
I'm also testing with FastAnalyzer which improves indexing speed. I
appreciate more useful solutions?

Regards
RSK

------=_Part_95568_3742242.1186400347647--

From java-user-return-29658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 06 12:01:28 2007
Return-Path: <java-user-return-29658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68395 invoked from network); 6 Aug 2007 12:01:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2007 12:01:26 -0000
Received: (qmail 13393 invoked by uid 500); 6 Aug 2007 12:01:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13354 invoked by uid 500); 6 Aug 2007 12:01:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13343 invoked by uid 99); 6 Aug 2007 12:01:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 05:01:20 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [80.67.64.10] (HELO smtp2.akamai.com) (80.67.64.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 12:01:07 +0000
Received: from smtp2.akamai.com (vwall.kendall.corp.akamai.com [172.17.4.35])
	by smtp2.akamai.com (8.13.8/8.12.10) with ESMTP id l76C0tX5005319
	for <java-user@lucene.apache.org>; Mon, 6 Aug 2007 08:00:55 -0400 (EDT)
Received: from USMA1EX-GATE1.kendall.corp.akamai.com (usma1ex-gate1.kendall.corp.akamai.com [172.17.0.215])
	by smtp2.akamai.com (8.13.8/8.12.10) with ESMTP id l76C0hi0005269
	for <java-user@lucene.apache.org>; Mon, 6 Aug 2007 08:00:55 -0400 (EDT)
Received: from INVS1.bangalore.corp.akamai.com ([172.21.20.14]) by USMA1EX-GATE1.kendall.corp.akamai.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 6 Aug 2007 08:00:41 -0400
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: speedup indexing
Date: Mon, 6 Aug 2007 17:30:37 +0530
Message-ID: <4FA8C6AEE609B644B38DE471A3657A62015478C5@INVS1.bangalore.corp.akamai.com>
In-Reply-To: <4628d2a90708060439m19539f85h47288d92b4ca5d4a@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: speedup indexing
Thread-Index: AcfYHn28O0HlztaCQa+5iL1tyOa6IAAAtfxQ
References: <4628d2a90708060439m19539f85h47288d92b4ca5d4a@mail.gmail.com>
From: "Chhabra, Kapil" <kchhabra@akamai.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 06 Aug 2007 12:00:41.0425 (UTC) FILETIME=[69399410:01C7D821]
X-Virus-Checked: Checked by ClamAV on apache.org

Try going through:
http://wiki.apache.org/lucene-java/ImproveIndexingSpeed

Regards,
kapilChhabra

-----Original Message-----
From: SK R [mailto:rsk.sen@gmail.com]=20
Sent: Monday, August 06, 2007 5:09 PM
To: java-user@lucene.apache.org
Subject: speedup indexing

Hi,
    I have indexed 5 fields  and stored 2 of them(field Length is around
10000). My index is growing in nature and it is in GB. I need to get
search
result based on docID only. Scoring, additional sorting, delete and
update
are never used. None of complicated things required.
    In my testing , Search is wonderful , but index is somewhat slow.
Please
advice me how to improve indexing speed?
I played with MergeFactor and MaxBufferedDocs. Norms are disabled.
Is Lucene by default doing some more things more than my requirement?
I'm also testing with FastAnalyzer which improves indexing speed. I
appreciate more useful solutions?

Regards
RSK

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 06 12:12:45 2007
Return-Path: <java-user-return-29659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74216 invoked from network); 6 Aug 2007 12:12:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2007 12:12:45 -0000
Received: (qmail 30751 invoked by uid 500); 6 Aug 2007 12:12:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30716 invoked by uid 500); 6 Aug 2007 12:12:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30705 invoked by uid 99); 6 Aug 2007 12:12:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 05:12:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of avp@imente.com designates 62.97.113.150 as permitted sender)
Received: from [62.97.113.150] (HELO mail.imente.com) (62.97.113.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 12:12:35 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.imente.com (Postfix) with ESMTP id D2B989BD1
	for <java-user@lucene.apache.org>; Mon,  6 Aug 2007 14:12:05 +0200 (CEST)
Received: from mail.imente.com ([127.0.0.1])
	by localhost (peggy [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 06149-02 for <java-user@lucene.apache.org>;
	Mon, 6 Aug 2007 14:12:04 +0200 (CEST)
Received: from [192.168.0.41] (239.Red-213-96-32.staticIP.rima-tde.net [213.96.32.239])
	by mail.imente.com (Postfix) with ESMTP id BA9979BBB
	for <java-user@lucene.apache.org>; Mon,  6 Aug 2007 14:12:04 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <8A291790-57CD-4AB8-B7F3-AA9CE791A663@imente.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Albert Vila <avp@imente.com>
Subject: Multiple fields vs one field
Date: Mon, 6 Aug 2007 14:12:14 +0200
X-Mailer: Apple Mail (2.752.2)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at imente.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all

  My data looks like:

	Document 1
		code, title, content, type, language, date, ...
	Document 2
		code, title, content, type, language, date, ...
	...
	Document n
		code, title, content, type, language, date, ...

  Now all document types share the same fields, but in a future we  
need to add more document types with specific fields. I allways sort  
documents by date. I have 200.000 new documents each day and 130  
million documents. The janaury index size is 4.2Gb (the data size is  
about 10Gb).

  I was wondering how to index the new document types.
	Option 1: One index for each document type. Each index will have its  
fields.
		Problem: I will have to perfom a search for each index, and sort  
results by date.
	Option 2: One big index containing all fields. A field could be  
empty if the field is not applicable for that document type.
	Option 3: One big index containing all common fields, and adding and  
extra field named metadata. Inside this field I will add all specific  
fields (field1:value1 field2:value2).

Comments, pros and contras will be appreciated. I don't know exactly  
the diference between option 2 and option 3.

Thanks

Albert

  

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 06 12:23:42 2007
Return-Path: <java-user-return-29660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78133 invoked from network); 6 Aug 2007 12:23:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2007 12:23:42 -0000
Received: (qmail 51213 invoked by uid 500); 6 Aug 2007 12:23:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50772 invoked by uid 500); 6 Aug 2007 12:23:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50761 invoked by uid 99); 6 Aug 2007 12:23:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 05:23:35 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [80.67.64.10] (HELO smtp1.akamai.com) (80.67.64.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 12:23:32 +0000
Received: from smtp2.akamai.com (vwall.kendall.corp.akamai.com [172.17.4.35])
	by smtp1.akamai.com (8.13.8/8.12.10) with ESMTP id l76CM5lR014382
	for <java-user@lucene.apache.org>; Mon, 6 Aug 2007 08:22:05 -0400 (EDT)
Received: from USMA1EX-GATE1.kendall.corp.akamai.com (usma1ex-gate1.kendall.corp.akamai.com [172.17.0.215])
	by smtp2.akamai.com (8.13.8/8.12.10) with ESMTP id l76CNCQV012922
	for <java-user@lucene.apache.org>; Mon, 6 Aug 2007 08:23:12 -0400 (EDT)
Received: from MAVS2.kendall.corp.akamai.com ([172.17.33.20]) by USMA1EX-GATE1.kendall.corp.akamai.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 6 Aug 2007 08:23:09 -0400
Received: from INVS1.bangalore.corp.akamai.com ([172.21.20.14]) by MAVS2.kendall.corp.akamai.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 6 Aug 2007 08:23:09 -0400
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: Multiple fields vs one field
Date: Mon, 6 Aug 2007 17:53:06 +0530
Message-ID: <4FA8C6AEE609B644B38DE471A3657A62015478D8@INVS1.bangalore.corp.akamai.com>
In-Reply-To: <8A291790-57CD-4AB8-B7F3-AA9CE791A663@imente.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Multiple fields vs one field
Thread-Index: AcfYIybRzVh/uhhpS26X/kgEfxAPLgAAP+Dw
References: <8A291790-57CD-4AB8-B7F3-AA9CE791A663@imente.com>
From: "Chhabra, Kapil" <kchhabra@akamai.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 06 Aug 2007 12:23:09.0208 (UTC) FILETIME=[8C90F180:01C7D824]
X-Virus-Checked: Checked by ClamAV on apache.org

Hey Albert,
Just to remind you, that the fields in Lucene are per document and not
per index. This means that you can have documents in an index which have
different fields altogether.
So, in effect, you can all your document types to your existing index.
And guess what, you don't need to change anything for this.

All the best.

Regards,
kapilChhabra

-----Original Message-----
From: Albert Vila [mailto:avp@imente.com]=20
Sent: Monday, August 06, 2007 5:42 PM
To: java-user@lucene.apache.org
Subject: Multiple fields vs one field

Hi all

  My data looks like:

	Document 1
		code, title, content, type, language, date, ...
	Document 2
		code, title, content, type, language, date, ...
	...
	Document n
		code, title, content, type, language, date, ...

  Now all document types share the same fields, but in a future we =20
need to add more document types with specific fields. I allways sort =20
documents by date. I have 200.000 new documents each day and 130 =20
million documents. The janaury index size is 4.2Gb (the data size is =20
about 10Gb).

  I was wondering how to index the new document types.
	Option 1: One index for each document type. Each index will have
its =20
fields.
		Problem: I will have to perfom a search for each index,
and sort =20
results by date.
	Option 2: One big index containing all fields. A field could be

empty if the field is not applicable for that document type.
	Option 3: One big index containing all common fields, and adding
and =20
extra field named metadata. Inside this field I will add all specific =20
fields (field1:value1 field2:value2).

Comments, pros and contras will be appreciated. I don't know exactly =20
the diference between option 2 and option 3.

Thanks

Albert

 =20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 06 12:51:04 2007
Return-Path: <java-user-return-29661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84658 invoked from network); 6 Aug 2007 12:51:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2007 12:51:03 -0000
Received: (qmail 82415 invoked by uid 500); 6 Aug 2007 12:50:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82375 invoked by uid 500); 6 Aug 2007 12:50:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82364 invoked by uid 99); 6 Aug 2007 12:50:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 05:50:56 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 12:50:42 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1II22Y-0005vn-3P
	for java-user@lucene.apache.org; Mon, 06 Aug 2007 05:50:30 -0700
Message-ID: <12015687.post@talk.nabble.com>
Date: Mon, 6 Aug 2007 05:50:30 -0700 (PDT)
From: tierecke <nir.nussbaum@gmail.com>
To: java-user@lucene.apache.org
Subject: indexing and searching in the same time
In-Reply-To: <12014472.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: nir.nussbaum@gmail.com
References: <12009334.post@talk.nabble.com> <200708060911.40377@danielnaber.de> <12014472.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Does Lucene allow searching and indexing simultaneously?

Yes. However, an IndexReader only searches the index as of the "point in
time" that it was opened. Any updates to the index, either added or deleted
documents, will not be visible until the IndexReader is re-opened. So your
application must periodically re-open its IndexReaders to see the latest
updates. The [WWW] IndexReader.isCurrent() method allows you to test whether
any updates have occurred to the index since your IndexReader was opened. 

[from Lucene FAQ]

Still I need to speed this process.


Thanks Daniel, you are completely right.
I changed the code - but it doesn't make it [noticeably faster] - probably
behind the scene it does run on the enum.
I added some kind of hash table that keeps the docfreq already read so if I
meet it again in another document I can retrieve it quickly - is there
another solution? Maybe have a separate Lucene index for this? (In this case
- can I read and write to the same index without closing it and reopening
it? I want to read from it and if I don't find the docfreq there, calculate
it and put it in the index).

10x Nir.


Daniel Naber-10 wrote:
> 
> On Monday 06 August 2007 01:40, tierecke wrote:
> 
>>         Term term=new Term("contents", termstr);
>>         TermEnum termenum=multireader.terms(term);
>>         int freq=termenum.docFreq();
> 
> IndexReader has a docFreq() method, no need to get a Term enumeration.
> 
> regards
>  Daniel
> 
> 

-- 
View this message in context: http://www.nabble.com/docFreq-takes-long-time-to-execute-in-a-multiple-index-environment-tf4221604.html#a12015687
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 06 13:16:19 2007
Return-Path: <java-user-return-29662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94017 invoked from network); 6 Aug 2007 13:16:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2007 13:16:17 -0000
Received: (qmail 23242 invoked by uid 500); 6 Aug 2007 13:16:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22823 invoked by uid 500); 6 Aug 2007 13:16:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22812 invoked by uid 99); 6 Aug 2007 13:16:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 06:16:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of avp@imente.com designates 62.97.113.150 as permitted sender)
Received: from [62.97.113.150] (HELO mail.imente.com) (62.97.113.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 13:16:07 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.imente.com (Postfix) with ESMTP id 70F6E9C1C
	for <java-user@lucene.apache.org>; Mon,  6 Aug 2007 15:15:37 +0200 (CEST)
Received: from mail.imente.com ([127.0.0.1])
	by localhost (peggy [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 11035-06 for <java-user@lucene.apache.org>;
	Mon, 6 Aug 2007 15:15:36 +0200 (CEST)
Received: from [192.168.0.41] (239.Red-213-96-32.staticIP.rima-tde.net [213.96.32.239])
	by mail.imente.com (Postfix) with ESMTP id 2E1BD9C11
	for <java-user@lucene.apache.org>; Mon,  6 Aug 2007 15:15:36 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <4FA8C6AEE609B644B38DE471A3657A62015478D8@INVS1.bangalore.corp.akamai.com>
References: <8A291790-57CD-4AB8-B7F3-AA9CE791A663@imente.com> <4FA8C6AEE609B644B38DE471A3657A62015478D8@INVS1.bangalore.corp.akamai.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <AF1CA53A-4452-4A5A-B32B-6189815378D3@imente.com>
Content-Transfer-Encoding: quoted-printable
From: Albert Vila <avp@imente.com>
Subject: Re: Multiple fields vs one field
Date: Mon, 6 Aug 2007 15:15:46 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at imente.com
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you very much, that is right :)

El 06/08/2007, a las 14:23, Chhabra, Kapil escribi=F3:

> Hey Albert,
> Just to remind you, that the fields in Lucene are per document and not
> per index. This means that you can have documents in an index which =20=

> have
> different fields altogether.
> So, in effect, you can all your document types to your existing index.
> And guess what, you don't need to change anything for this.
>
> All the best.
>
> Regards,
> kapilChhabra
>
> -----Original Message-----
> From: Albert Vila [mailto:avp@imente.com]
> Sent: Monday, August 06, 2007 5:42 PM
> To: java-user@lucene.apache.org
> Subject: Multiple fields vs one field
>
> Hi all
>
>   My data looks like:
>
> 	Document 1
> 		code, title, content, type, language, date, ...
> 	Document 2
> 		code, title, content, type, language, date, ...
> 	...
> 	Document n
> 		code, title, content, type, language, date, ...
>
>   Now all document types share the same fields, but in a future we
> need to add more document types with specific fields. I allways sort
> documents by date. I have 200.000 new documents each day and 130
> million documents. The janaury index size is 4.2Gb (the data size is
> about 10Gb).
>
>   I was wondering how to index the new document types.
> 	Option 1: One index for each document type. Each index will have
> its
> fields.
> 		Problem: I will have to perfom a search for each index,
> and sort
> results by date.
> 	Option 2: One big index containing all fields. A field could be
>
> empty if the field is not applicable for that document type.
> 	Option 3: One big index containing all common fields, and adding
> and
> extra field named metadata. Inside this field I will add all specific
> fields (field1:value1 field2:value2).
>
> Comments, pros and contras will be appreciated. I don't know exactly
> the diference between option 2 and option 3.
>
> Thanks
>
> Albert
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 06 16:02:53 2007
Return-Path: <java-user-return-29663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69066 invoked from network); 6 Aug 2007 16:02:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2007 16:02:53 -0000
Received: (qmail 95084 invoked by uid 500); 6 Aug 2007 16:02:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95053 invoked by uid 500); 6 Aug 2007 16:02:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95032 invoked by uid 99); 6 Aug 2007 16:02:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 09:02:45 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.21] (HELO smtp-vbr1.xs4all.nl) (194.109.24.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 16:02:30 +0000
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr1.xs4all.nl (8.13.8/8.13.8) with ESMTP id l76G2IVC058875
	for <java-user@lucene.apache.org>; Mon, 6 Aug 2007 18:02:19 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: You are right but it doesn't make it faster.
Date: Mon, 6 Aug 2007 18:02:18 +0200
User-Agent: KMail/1.8.2
References: <12009334.post@talk.nabble.com> <200708060911.40377@danielnaber.de> <12014472.post@talk.nabble.com>
In-Reply-To: <12014472.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200708061802.18241.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Nir,

You can speed this up (maybe a lot) by moving the disk head(s)
as little as possible.

Have a look at the file formats of Lucene to get the idea.

In your outer loop iterate over the readers of the multireader.
For each reader iterate over the terms in sorted order.
And don't access the index in any other way while doing this,
that is, do no query searches and no updates.

A bit of bookkeeping per term it will make it straightforward
to compute the total document frequencies.

Regards,
Paul Elschot



On Monday 06 August 2007 13:12, tierecke wrote:
> 
> Thanks Daniel, you are completely right.
> I changed the code - but it doesn't make it [noticeably faster] - probably
> behind the scene it does run on the enum.
> I added some kind of hash table that keeps the docfreq already read so if I
> meet it again in another document I can retrieve it quickly - is there
> another solution? Maybe have a separate Lucene index for this? (In this case
> - can I read and write to the same index without closing it and reopening
> it? I want to read from it and if I don't find the docfreq there, calculate
> it and put it in the index).
> 
> 10x Nir.
> 
> 
> On Monday 06 August 2007 01:40, tierecke wrote:
> 
> >         Term term=new Term("contents", termstr);
> >         TermEnum termenum=multireader.terms(term);
> >         int freq=termenum.docFreq();
> 
> IndexReader has a docFreq() method, no need to get a Term enumeration.
> 
> regards
>  Daniel
> 
> -- 
> View this message in context: 
http://www.nabble.com/docFreq-takes-long-time-to-execute-in-a-multiple-index-environment-tf4221604.html#a12014472
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 06 17:34:24 2007
Return-Path: <java-user-return-29664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35045 invoked from network); 6 Aug 2007 17:34:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2007 17:34:24 -0000
Received: (qmail 56587 invoked by uid 500); 6 Aug 2007 17:34:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56556 invoked by uid 500); 6 Aug 2007 17:34:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56545 invoked by uid 99); 6 Aug 2007 17:34:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 10:34:17 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 17:34:14 +0000
Received: by wa-out-1112.google.com with SMTP id j40so2015686wah
        for <java-user@lucene.apache.org>; Mon, 06 Aug 2007 10:33:54 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=T7N9atvhXj+JLBtvQYnuZ6cGQV1y3ErnfoPQa/SwBxq67dr3LXOG/i4Nbkn8CxLB5c8rl7lJEK4joh4lwZ13hdZVAGJr22s+mDbHrxi6Yo7iOot9CDWHPpxSdx7/majiiiQJLMqPtBlVx3z7VDVG5XC44Q8thnahKMoQXAvyrWE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=OUWLkIW6HlkjhFHqCs1UCU98OfCBmY/kGAMlEGggV0bWwqna7XkE3GSpor/ncApNMCdnS9j1ExGzqHKZgFRTyTRWQaLRRlEbiZMWakKcftfHq1ltldFAJnlUo+EKSr6kWKzmUoz6dR/U9pz2H5ZWiZl8YnnsO+VrdNcHo/4pXfs=
Received: by 10.115.107.1 with SMTP id j1mr5874075wam.1186421633981;
        Mon, 06 Aug 2007 10:33:53 -0700 (PDT)
Received: by 10.114.135.8 with HTTP; Mon, 6 Aug 2007 10:33:53 -0700 (PDT)
Message-ID: <e994873a0708061033j7db884feyfbcfceddfa48e287@mail.gmail.com>
Date: Mon, 6 Aug 2007 13:33:53 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user <java-user@lucene.apache.org>
Subject: Mixing SpanQuery and BooleanQuery
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_107946_10748336.1186421633960"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_107946_10748336.1186421633960
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm trying to create a fairly complex SpanQuery from a binary parse tree.
I create SpanOrQueries from SpanTermQueries and combine SpanOrQueries into
BooleanQueries. So far, so good.
The problem is that I don't see how to create a SpanNotQuery from a
BooleanQuery and a SpanTermQuery. I want the BooleanQuery to be the
'include' span and the SpanTermQuery to be the 'exclude' span.
Unfortunately, the BooleanQuery cannot be cast to a SpanQuery.

I thought that SpanQuery and BooleanQuery could be freely intermixed, but
this doesn't seem to be the case. It seems that what's really needed is a
'SpanAndQuery'.

Is there another way to build this type of query?

Thanks,
Peter

------=_Part_107946_10748336.1186421633960--

From java-user-return-29665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 06 19:01:00 2007
Return-Path: <java-user-return-29665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64412 invoked from network); 6 Aug 2007 19:00:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2007 19:00:59 -0000
Received: (qmail 78107 invoked by uid 500); 6 Aug 2007 19:00:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78066 invoked by uid 500); 6 Aug 2007 19:00:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78055 invoked by uid 99); 6 Aug 2007 19:00:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 12:00:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 19:00:48 +0000
Received: by nf-out-0910.google.com with SMTP id d3so387034nfc
        for <java-user@lucene.apache.org>; Mon, 06 Aug 2007 12:00:27 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=hIvqWZHsREJqmvuljm1UQL2aC2OgC3XSX7JqJb/ZpHUhyh7V+Ka/hUfVmDyLWNQ4oMvm1KRI2ZWNlZQve2V1kWPsdl/IMPZ6Si+P+bf5LLx4pbTjLcB7oFywRk6mVxZEL8pf5zz2ZyvnVG1PqeUVaiklwKTKiknc2cLWps0k6i0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=EhS/ZdzontbZEUZs45cZs6QvzLGOGeTK15CbVPkdZrE9kfZsfwewgFy0POzz0pSep6BG6YkV360e5rDYzJJOyNpnGYkoDkxiNrtKcyQSxrJn+wPb30jtMRJ8oM65f5zRhiVik+JBDSPWteBAta+m+c0XWcjFtOS/llCGtFuLPjA=
Received: by 10.82.158.12 with SMTP id g12mr5991667bue.1186426827501;
        Mon, 06 Aug 2007 12:00:27 -0700 (PDT)
Received: by 10.82.190.14 with HTTP; Mon, 6 Aug 2007 12:00:22 -0700 (PDT)
Message-ID: <359a92830708061200u69a6a000yf46ca421b3ea52ad@mail.gmail.com>
Date: Mon, 6 Aug 2007 15:00:22 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Mixing SpanQuery and BooleanQuery
In-Reply-To: <e994873a0708061033j7db884feyfbcfceddfa48e287@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_88099_11435434.1186426822475"
References: <e994873a0708061033j7db884feyfbcfceddfa48e287@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_88099_11435434.1186426822475
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Isn't a SpanAndQuery the same as a SpanNearQuery? Perhaps
with "interesting" slops......

Erick

On 8/6/07, Peter Keegan <peterlkeegan@gmail.com> wrote:
>
> I'm trying to create a fairly complex SpanQuery from a binary parse tree.
> I create SpanOrQueries from SpanTermQueries and combine SpanOrQueries into
> BooleanQueries. So far, so good.
> The problem is that I don't see how to create a SpanNotQuery from a
> BooleanQuery and a SpanTermQuery. I want the BooleanQuery to be the
> 'include' span and the SpanTermQuery to be the 'exclude' span.
> Unfortunately, the BooleanQuery cannot be cast to a SpanQuery.
>
> I thought that SpanQuery and BooleanQuery could be freely intermixed, but
> this doesn't seem to be the case. It seems that what's really needed is a
> 'SpanAndQuery'.
>
> Is there another way to build this type of query?
>
> Thanks,
> Peter
>

------=_Part_88099_11435434.1186426822475--

From java-user-return-29666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 06 19:19:04 2007
Return-Path: <java-user-return-29666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68019 invoked from network); 6 Aug 2007 19:19:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Aug 2007 19:19:02 -0000
Received: (qmail 97825 invoked by uid 500); 6 Aug 2007 19:18:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97778 invoked by uid 500); 6 Aug 2007 19:18:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97767 invoked by uid 99); 6 Aug 2007 19:18:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 12:18:56 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 209.85.146.179 as permitted sender)
Received: from [209.85.146.179] (HELO wa-out-1112.google.com) (209.85.146.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 19:18:53 +0000
Received: by wa-out-1112.google.com with SMTP id j40so2046135wah
        for <java-user@lucene.apache.org>; Mon, 06 Aug 2007 12:18:32 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=nZH0eJWJ186TQJLu5z0qabauVknw+8VUs/FglwPTjPTbw85TrThzwuYlyf4tt4A4FnAM5VG5ixjQmZgSOvyh6T/LFHNBxkohzwHZyx9eJ4ymyAWdulsgXhTONqqM7ZRpcvB9C9CbhZk0czoAoUMZu0BKqNhQErS0+YoDqhhtVbE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Cw3jjwViO4O/f/SCNJJzGl4cgbq4zCYqMmfcDFaVGpKL8bLb5yPTkIX7e/x8NUAV7q5MmBQH05BssCHDpfzv7ZiR0+lP8ffkrqYTvWlXTOIyG1x5R//TyUyivZkKVBjP50zYPAiOqzRxPrfJ1bDyqtBPjsanIHCNwwJ6h2rV8XA=
Received: by 10.114.81.1 with SMTP id e1mr5933214wab.1186427912082;
        Mon, 06 Aug 2007 12:18:32 -0700 (PDT)
Received: by 10.114.135.8 with HTTP; Mon, 6 Aug 2007 12:18:32 -0700 (PDT)
Message-ID: <e994873a0708061218q4d7e6c27w168fbb80a714a1b0@mail.gmail.com>
Date: Mon, 6 Aug 2007 15:18:32 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Mixing SpanQuery and BooleanQuery
In-Reply-To: <359a92830708061200u69a6a000yf46ca421b3ea52ad@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_109535_16246997.1186427912009"
References: <e994873a0708061033j7db884feyfbcfceddfa48e287@mail.gmail.com>
	 <359a92830708061200u69a6a000yf46ca421b3ea52ad@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_109535_16246997.1186427912009
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Even without 'interesting' slops, it does appear that SpanNearQuery is a
logical AND of all its clauses.
I was distracted by the BooleanQuery examples in the javadocs :)

thanks,
Peter

On 8/6/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Isn't a SpanAndQuery the same as a SpanNearQuery? Perhaps
> with "interesting" slops......
>
> Erick
>
> On 8/6/07, Peter Keegan <peterlkeegan@gmail.com> wrote:
> >
> > I'm trying to create a fairly complex SpanQuery from a binary parse
> tree.
> > I create SpanOrQueries from SpanTermQueries and combine SpanOrQueries
> into
> > BooleanQueries. So far, so good.
> > The problem is that I don't see how to create a SpanNotQuery from a
> > BooleanQuery and a SpanTermQuery. I want the BooleanQuery to be the
> > 'include' span and the SpanTermQuery to be the 'exclude' span.
> > Unfortunately, the BooleanQuery cannot be cast to a SpanQuery.
> >
> > I thought that SpanQuery and BooleanQuery could be freely intermixed,
> but
> > this doesn't seem to be the case. It seems that what's really needed is
> a
> > 'SpanAndQuery'.
> >
> > Is there another way to build this type of query?
> >
> > Thanks,
> > Peter
> >
>

------=_Part_109535_16246997.1186427912009--

From java-user-return-29667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 07 00:37:29 2007
Return-Path: <java-user-return-29667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85898 invoked from network); 7 Aug 2007 00:37:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2007 00:37:28 -0000
Received: (qmail 51813 invoked by uid 500); 7 Aug 2007 00:37:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51782 invoked by uid 500); 7 Aug 2007 00:37:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51770 invoked by uid 99); 7 Aug 2007 00:37:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 17:37:21 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Aug 2007 00:37:08 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IID4A-0000aY-Pa
	for java-user@lucene.apache.org; Mon, 06 Aug 2007 17:36:54 -0700
Message-ID: <12026678.post@talk.nabble.com>
Date: Mon, 6 Aug 2007 17:36:54 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: speedup indexing
In-Reply-To: <4628d2a90708060439m19539f85h47288d92b4ca5d4a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
References: <4628d2a90708060439m19539f85h47288d92b4ca5d4a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


1. If you only search on docId field only, database might be a better
solution in this case.
2. To improve indexing speed, you can consider using the trunk code which
includes LUCENE-834. The indexing speed will be faster by almost an order of
magnitude.


SK R wrote:
> 
> Hi,
>     I have indexed 5 fields  and stored 2 of them(field Length is around
> 10000). My index is growing in nature and it is in GB. I need to get
> search
> result based on docID only. Scoring, additional sorting, delete and update
> are never used. None of complicated things required.
>     In my testing , Search is wonderful , but index is somewhat slow.
> Please
> advice me how to improve indexing speed?
> I played with MergeFactor and MaxBufferedDocs. Norms are disabled.
> Is Lucene by default doing some more things more than my requirement?
> I'm also testing with FastAnalyzer which improves indexing speed. I
> appreciate more useful solutions?
> 
> Regards
> RSK
> 
> 

-- 
View this message in context: http://www.nabble.com/speedup-indexing-tf4223630.html#a12026678
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 07 00:49:41 2007
Return-Path: <java-user-return-29668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90131 invoked from network); 7 Aug 2007 00:49:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2007 00:49:38 -0000
Received: (qmail 64076 invoked by uid 500); 7 Aug 2007 00:49:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64036 invoked by uid 500); 7 Aug 2007 00:49:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64025 invoked by uid 99); 7 Aug 2007 00:49:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 17:49:30 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Aug 2007 00:49:23 +0000
Received: by nf-out-0910.google.com with SMTP id d3so407332nfc
        for <java-user@lucene.apache.org>; Mon, 06 Aug 2007 17:49:02 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=e0zyw/58GLWBAdgqy5Q7b5J48ymhlCvRbQhqgwNn8oJ9ix/858iaJcxHxUcdi8+d3hFxLp+JUYpQOEWJ7Z0rOw4/AX+D274EAXm8Z46OdbEkL0ZGKzq8LOD11t19GJ4ZWI/v4KxgiwziQygNaY2PVGNWaJpVWkI7CE2trLjbo18=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=UjAvWfAmwZd1lb/tMK1P1bOLvQlNMd/QlPBaizP/ct1LisJ1uGMwvwNk8JmR2JydRI42q1R8YWaenjf6Wp1zcXLMaXvM3fpGu3MfUem7SeJclWGtxxcLBAHVI0HByq13crjlex0tnJeE0qB6Yzq6k6UCwamEFxR3+AHn1xVNMZ8=
Received: by 10.78.193.5 with SMTP id q5mr1589039huf.1186447741132;
        Mon, 06 Aug 2007 17:49:01 -0700 (PDT)
Received: by 10.78.155.16 with HTTP; Mon, 6 Aug 2007 17:49:01 -0700 (PDT)
Message-ID: <6e3ae6310708061749u2013246qf75fc01228b14096@mail.gmail.com>
Date: Mon, 6 Aug 2007 17:49:01 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: speedup indexing
In-Reply-To: <12026678.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4628d2a90708060439m19539f85h47288d92b4ca5d4a@mail.gmail.com>
	 <12026678.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Seems this issue,LUCENE-834, is about query payload
https://issues.apache.org/jira/browse/LUCENE-834

Can it help on indexing speed?

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes

On 8/6/07, testn <test1@doramail.com> wrote:
>
> 1. If you only search on docId field only, database might be a better
> solution in this case.
> 2. To improve indexing speed, you can consider using the trunk code which
> includes LUCENE-834. The indexing speed will be faster by almost an order of
> magnitude.
>
>
> SK R wrote:
> >
> > Hi,
> >     I have indexed 5 fields  and stored 2 of them(field Length is around
> > 10000). My index is growing in nature and it is in GB. I need to get
> > search
> > result based on docID only. Scoring, additional sorting, delete and update
> > are never used. None of complicated things required.
> >     In my testing , Search is wonderful , but index is somewhat slow.
> > Please
> > advice me how to improve indexing speed?
> > I played with MergeFactor and MaxBufferedDocs. Norms are disabled.
> > Is Lucene by default doing some more things more than my requirement?
> > I'm also testing with FastAnalyzer which improves indexing speed. I
> > appreciate more useful solutions?
> >
> > Regards
> > RSK
> >
> >
>
> --
> View this message in context: http://www.nabble.com/speedup-indexing-tf4223630.html#a12026678
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 07 00:57:17 2007
Return-Path: <java-user-return-29669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91887 invoked from network); 7 Aug 2007 00:57:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2007 00:57:16 -0000
Received: (qmail 73210 invoked by uid 500); 7 Aug 2007 00:57:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73178 invoked by uid 500); 7 Aug 2007 00:57:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73167 invoked by uid 99); 7 Aug 2007 00:57:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 17:57:09 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Aug 2007 00:56:55 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IIDNK-0000wL-Ic
	for java-user@lucene.apache.org; Mon, 06 Aug 2007 17:56:42 -0700
Message-ID: <12026814.post@talk.nabble.com>
Date: Mon, 6 Aug 2007 17:56:42 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: You are right but it doesn't make it faster.
In-Reply-To: <12014472.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
References: <12009334.post@talk.nabble.com> <200708060911.40377@danielnaber.de> <12014472.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Does it mean you already reuse IndexReader without reopening it? If you
haven't done so, please try it out. docFreq() should be really quick.


Thanks Daniel, you are completely right.
I changed the code - but it doesn't make it [noticeably faster] - probably
behind the scene it does run on the enum.
I added some kind of hash table that keeps the docfreq already read so if I
meet it again in another document I can retrieve it quickly - is there
another solution? Maybe have a separate Lucene index for this? (In this case
- can I read and write to the same index without closing it and reopening
it? I want to read from it and if I don't find the docfreq there, calculate
it and put it in the index).

10x Nir.


Daniel Naber-10 wrote:
> 
> On Monday 06 August 2007 01:40, tierecke wrote:
> 
>>         Term term=new Term("contents", termstr);
>>         TermEnum termenum=multireader.terms(term);
>>         int freq=termenum.docFreq();
> 
> IndexReader has a docFreq() method, no need to get a Term enumeration.
> 
> regards
>  Daniel
> 
> 

-- 
View this message in context: http://www.nabble.com/docFreq-takes-long-time-to-execute-in-a-multiple-index-environment-tf4221604.html#a12026814
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 07 01:14:43 2007
Return-Path: <java-user-return-29670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97693 invoked from network); 7 Aug 2007 01:14:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2007 01:14:43 -0000
Received: (qmail 85217 invoked by uid 500); 7 Aug 2007 01:14:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85188 invoked by uid 500); 7 Aug 2007 01:14:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85177 invoked by uid 99); 7 Aug 2007 01:14:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 18:14:35 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mike.klaas@gmail.com designates 209.85.198.185 as permitted sender)
Received: from [209.85.198.185] (HELO rv-out-0910.google.com) (209.85.198.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Aug 2007 01:14:28 +0000
Received: by rv-out-0910.google.com with SMTP id k20so1042414rvb
        for <java-user@lucene.apache.org>; Mon, 06 Aug 2007 18:14:08 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=RNQfuGJ/T+DDHMhF8Ftr4XukFQGAKLGZohV0kP4Jp6ZVfukS/1gTMvMVuiJpVFMl8sJ1I9oqLGVWG22gSrecwCQMwH/u6euv3lXLl7ge5OStorZTUJE+FX4w+r56lt9gHZIEXGQnmGAD5czS+1/MWvmaNLtceGuEZ8UW8MLDYss=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=V/IiCl0kTVSHkVdktKmbmvaG6lSUhdWWyttWri9RbJF10J0ph153/pVPIAB5rUxxWqwbe3CoSdLMMCcdWb7xdgOfQn857xHUtsYTGIVEBEb1ySXGh09Klu+2Op1fMg2tZ03g7c6fnUiKGl0LQcGHRfqoVQqRP6lthqM++9Wgrdw=
Received: by 10.115.16.1 with SMTP id t1mr6182949wai.1186449248145;
        Mon, 06 Aug 2007 18:14:08 -0700 (PDT)
Received: from ?192.168.1.103? ( [24.82.155.191])
        by mx.google.com with ESMTPS id k23sm10025431waf.2007.08.06.18.14.06
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 06 Aug 2007 18:14:06 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <6e3ae6310708061749u2013246qf75fc01228b14096@mail.gmail.com>
References: <4628d2a90708060439m19539f85h47288d92b4ca5d4a@mail.gmail.com> <12026678.post@talk.nabble.com> <6e3ae6310708061749u2013246qf75fc01228b14096@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7160683B-E403-4D5D-84C7-A86077DDF91D@gmail.com>
Content-Transfer-Encoding: 7bit
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: speedup indexing
Date: Mon, 6 Aug 2007 18:13:57 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On 6-Aug-07, at 5:49 PM, Chris Lu wrote:

> Seems this issue,LUCENE-834, is about query payload
> https://issues.apache.org/jira/browse/LUCENE-834
>
> Can it help on indexing speed?

That should be:
> https://issues.apache.org/jira/browse/LUCENE-843


> On 8/6/07, testn <test1@doramail.com> wrote:
>>
>> 2. To improve indexing speed, you can consider using the trunk  
>> code which
>> includes LUCENE-834. The indexing speed will be faster by almost  
>> an order of
>> magnitude.

While a speedup should be expected, I don't know that an order of  
magnitude is a realistic expectation to convey.  Unless, of course,  
you're speaking in base two ;)

-Mike

> -- 
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php? 
> title=Create_Lucene_Database_Search_in_3_minutes
>
> On 8/6/07, testn <test1@doramail.com> wrote:
>>
>> 1. If you only search on docId field only, database might be a better
>> solution in this case.
>> 2. To improve indexing speed, you can consider using the trunk  
>> code which
>> includes LUCENE-834. The indexing speed will be faster by almost  
>> an order of
>> magnitude.
>>
>>
>> SK R wrote:
>>>
>>> Hi,
>>>     I have indexed 5 fields  and stored 2 of them(field Length is  
>>> around
>>> 10000). My index is growing in nature and it is in GB. I need to get
>>> search
>>> result based on docID only. Scoring, additional sorting, delete  
>>> and update
>>> are never used. None of complicated things required.
>>>     In my testing , Search is wonderful , but index is somewhat  
>>> slow.
>>> Please
>>> advice me how to improve indexing speed?
>>> I played with MergeFactor and MaxBufferedDocs. Norms are disabled.
>>> Is Lucene by default doing some more things more than my  
>>> requirement?
>>> I'm also testing with FastAnalyzer which improves indexing speed. I
>>> appreciate more useful solutions?
>>>
>>> Regards
>>> RSK
>>>
>>>
>>
>> --
>> View this message in context: http://www.nabble.com/speedup- 
>> indexing-tf4223630.html#a12026678
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 07 05:05:01 2007
Return-Path: <java-user-return-29671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54539 invoked from network); 7 Aug 2007 05:05:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2007 05:05:01 -0000
Received: (qmail 25814 invoked by uid 500); 7 Aug 2007 05:04:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25776 invoked by uid 500); 7 Aug 2007 05:04:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25765 invoked by uid 99); 7 Aug 2007 05:04:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 22:04:53 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of kai.hu@dusee.cn designates 222.66.106.38 as permitted sender)
Received: from [222.66.106.38] (HELO mx01.dusee.cn) (222.66.106.38)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Aug 2007 05:04:38 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: =?gb2312?B?tPC4tDogtPC4tDogQWJvdXQgbXV0aS1UaHJlYWRzIGluIEx1Y2VuZQ==?=
Date: Tue, 7 Aug 2007 13:04:16 +0800
Message-ID: <8E5BA7FAF994C6409A8E074B78EB4677013650E1@14sha-msg02.zm.sd.mediazone.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: =?gb2312?B?tPC4tDogQWJvdXQgbXV0aS1UaHJlYWRzIGluIEx1Y2VuZQ==?=
Thread-Index: AcfYGRuzmkLItokrTSOinG+WETW/swAh7c+w
From: "Kai Hu" <kai.hu@dusee.cn>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,Patrick
	I tested use a map , get a single LuceneIndexAccessor,and get a cached =
IndexWriter ,but after do operation of update,delete,add documents,I =
should close the IndexWriter to release the Lock,it will throw =
Exceptions" this IndexWriter is closed" when other threads execute  =
add,update,delete operations.should I synchronized the IndexWriter =
object? It's better if you can  send me a demo ,thanks .

kai

>Hi Kai
>
>We keep a synchronized map of LuceneIndexAccessor instances, one =
instance per
>Directory.  The map is keyed on the directory path.  We then re-use
>the accessor rather than creating a new one each time.
>
>Patrick
>
On 06/08/07, Kai Hu <kai.hu@dusee.cn> wrote:
> Thanks , Patrick,
>
> It is useful. But I found a problem that I use
>
> "new LuceneIndexAccessor(accessProvider);" when a request comes in =
B/S,the LuceneIndexAccessor.getWriter() will lose its sense,it will new =
an IndexWriter.
>
> public IndexWriter getWriter() throws IOException {
>
>        IndexWriter result;
>
>        synchronized (this) {//here "synchronized" will lose its sense
>
>            checkClosed();
>
>            ...
>
>        if (cachedWriter !=3D null) {
>
>               log.debug("returning cached writer");
>
>               result =3D cachedWriter;
>
>               writerUseCount++;
>
>            } else {
>
>               log.debug("opening new writer and caching it");
>
>               result =3D accessProvider.getWriter();// when new a =
LuceneIndexAccessor Object ,it will new an IndexWriter Object
>
>               cachedWriter =3D result;
>
>               writerUseCount =3D 1;
>
>            }
>
>     }
>
> }
>
> It will also throw a Exception "cann't obtain the Lock",should I use a =
single instance of LuceneIndexAccessor? Suppose I use a single instance =
of LuceneIndexAccessor,how to set a different Directory or Analyzer at =
one time.
>
>
>
> kai
>
>
> ///////////////////////////////////////////////////////////
>
> ///////////////////////////////////////////////////////////
>
>
>
> >Hi Kai
>
> >
>
> >We use the Lucene Index Accessor contribution:
>
> >
>
> =
>http://www.nabble.com/Fwd%3A-Contribution%3A-LuceneIndexAccessor-t17416.=
html#a47049
>
> >
>
> >Patrick
>
>
>
> On 06/08/07, Kai Hu <kai.hu@dusee.cn> wrote:
>
> > Hi,
>
> >
>
> >          How do you solve the problems when add,update,delete =
documents
>
> > in muti-threads,use synchronized ?
>
> >
>
> >
>
>
>
> ---------------------------------------------------------------------
>
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 07 05:22:34 2007
Return-Path: <java-user-return-29672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60696 invoked from network); 7 Aug 2007 05:22:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2007 05:22:33 -0000
Received: (qmail 36217 invoked by uid 500); 7 Aug 2007 05:22:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36170 invoked by uid 500); 7 Aug 2007 05:22:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36159 invoked by uid 99); 7 Aug 2007 05:22:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 22:22:27 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kai.hu@dusee.cn designates 222.66.106.38 as permitted sender)
Received: from [222.66.106.38] (HELO mx01.dusee.cn) (222.66.106.38)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Aug 2007 05:22:20 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: =?gb2312?B?tPC4tDogtPC4tDogQWJvdXQgbXV0aS1UaHJlYWRzIGluIEx1Y2VuZQ==?=
Date: Tue, 7 Aug 2007 13:21:47 +0800
Message-ID: <8E5BA7FAF994C6409A8E074B78EB4677013650E8@14sha-msg02.zm.sd.mediazone.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: =?gb2312?B?tPC4tDogQWJvdXQgbXV0aS1UaHJlYWRzIGluIEx1Y2VuZQ==?=
Thread-Index: AcfYGRuzmkLItokrTSOinG+WETW/swAl2lSA
From: "Kai Hu" <kai.hu@dusee.cn>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

By the way, Patrick,did you have a problem that =
IndexSearcher.search(Query query) cann't get the all matched hits.it =
only return a part of matched hits.
my test code is:
	String key =3D "title:good";
	Directory directory =3D FSDirectory.getDirectory("d:\\index\\");
	IndexSearcher searcher =3D new IndexSearcher(directory);
	QueryParser queryParser =3D new QueryParser("",analyzer);
	Query query =3D queryParser.parse(key);
	hits =3D searcher.search(query,sort);
there are two documents indexed which "title" value is "good",but when I =
searched by key"title:good",it returned only one documents.is it a bug?

kai

>Hi Kai
>We keep a synchronized map of LuceneIndexAccessor instances, one =
instance per
>The map is keyed on the directory path.  We then re-use
>the accessor rather than creating a new one each time.
>
>Patrick
On 06/08/07, Kai Hu <kai.hu@dusee.cn> wrote:
> Thanks , Patrick,
>
> It is useful. But I found a problem that I use
>
> "new LuceneIndexAccessor(accessProvider);" when a request comes in =
B/S,the LuceneIndexAccessor.getWriter() will lose its sense,it will new =
an IndexWriter.
>
> public IndexWriter getWriter() throws IOException {
>
>        IndexWriter result;
>
>        synchronized (this) {//here "synchronized" will lose its sense
>
>            checkClosed();
>
>            ...
>
>        if (cachedWriter !=3D null) {
>
>               log.debug("returning cached writer");
>
>               result =3D cachedWriter;
>
>               writerUseCount++;
>
>            } else {
>
>               log.debug("opening new writer and caching it");
>
>               result =3D accessProvider.getWriter();// when new a =
LuceneIndexAccessor Object ,it will new an IndexWriter Object
>
>               cachedWriter =3D result;
>
>               writerUseCount =3D 1;
>
>            }
>
>     }
>
> }
>
> It will also throw a Exception "cann't obtain the Lock",should I use a =
single instance of LuceneIndexAccessor? Suppose I use a single instance =
of LuceneIndexAccessor,how to set a different Directory or Analyzer at =
one time.
>
>
>
> kai
>
>
> ///////////////////////////////////////////////////////////
>
> ///////////////////////////////////////////////////////////
>
>
>
> >Hi Kai
>
> >
>
> >We use the Lucene Index Accessor contribution:
>
> >
>
> =
>http://www.nabble.com/Fwd%3A-Contribution%3A-LuceneIndexAccessor-t17416.=
html#a47049
>
> >
>
> >Patrick
>
>
>
> On 06/08/07, Kai Hu <kai.hu@dusee.cn> wrote:
>
> > Hi,
>
> >
>
> >          How do you solve the problems when add,update,delete =
documents
>
> > in muti-threads,use synchronized ?
>
> >
>
> >
>
>
>
> ---------------------------------------------------------------------
>
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 07 06:57:35 2007
Return-Path: <java-user-return-29673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88848 invoked from network); 7 Aug 2007 06:57:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2007 06:57:34 -0000
Received: (qmail 3500 invoked by uid 500); 7 Aug 2007 06:57:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3463 invoked by uid 500); 7 Aug 2007 06:57:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3452 invoked by uid 99); 7 Aug 2007 06:57:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Aug 2007 23:57:27 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Aug 2007 06:57:22 +0000
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id EDBAD95A02; Mon,  6 Aug 2007 23:57:00 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id E160643137
	for <java-user@lucene.apache.org>; Mon,  6 Aug 2007 23:57:00 -0700 (PDT)
Date: Mon, 6 Aug 2007 23:57:00 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: About muti-Threads in Lucene
In-Reply-To: <8E5BA7FAF994C6409A8E074B78EB467701364FFD@14sha-msg02.zm.sd.mediazone.com>
Message-ID: <Pine.LNX.4.58.0708062355070.12853@hal.rescomp.berkeley.edu>
References: <8E5BA7FAF994C6409A8E074B78EB467701364FFD@14sha-msg02.zm.sd.mediazone.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


:          How do you solve the problems when add,update,delete documents
: in muti-threads,use synchronized ?

IndexWriter is thread safe, so there are no problems.  construct one
instance, use it in all of your threads, no need for external
synchronization.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 07 07:12:51 2007
Return-Path: <java-user-return-29674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93037 invoked from network); 7 Aug 2007 07:12:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2007 07:12:50 -0000
Received: (qmail 23409 invoked by uid 500); 7 Aug 2007 07:12:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23374 invoked by uid 500); 7 Aug 2007 07:12:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23363 invoked by uid 99); 7 Aug 2007 07:12:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Aug 2007 00:12:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kai.hu@dusee.cn designates 222.66.106.38 as permitted sender)
Received: from [222.66.106.38] (HELO mx01.dusee.cn) (222.66.106.38)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Aug 2007 07:12:41 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: =?gb2312?B?tPC4tDogQWJvdXQgbXV0aS1UaHJlYWRzIGluIEx1Y2VuZQ==?=
Date: Tue, 7 Aug 2007 15:12:16 +0800
Message-ID: <8E5BA7FAF994C6409A8E074B78EB467701365107@14sha-msg02.zm.sd.mediazone.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: About muti-Threads in Lucene
Thread-Index: AcfYwECk9ejTFAIMT6yHFUvGQVTOUAAAOzfg
From: "Kai Hu" <kai.hu@dusee.cn>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, Hoss
	when do add,update,delete operations in muti-threads,we should execute =
IndexWriter.close() to release the Lock ,How do you control it to avoid =
Lucene throw an Exception of "this IndexWriter is closed".Thanks.

kai

>=20

>:          How do you solve the problems when add,update,delete =
documents
>: in muti-threads,use synchronized ?
>
>IndexWriter is thread safe, so there are no problems.  construct one
>instance, use it in all of your threads, no need for external
>synchronization.
>
>
>-Hoss
>
>
---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 07 07:17:42 2007
Return-Path: <java-user-return-29675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94176 invoked from network); 7 Aug 2007 07:17:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2007 07:17:41 -0000
Received: (qmail 30827 invoked by uid 500); 7 Aug 2007 07:17:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30795 invoked by uid 500); 7 Aug 2007 07:17:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30784 invoked by uid 99); 7 Aug 2007 07:17:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Aug 2007 00:17:35 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mailing.patrick.kimber@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Aug 2007 07:17:28 +0000
Received: by wa-out-1112.google.com with SMTP id j40so2223913wah
        for <java-user@lucene.apache.org>; Tue, 07 Aug 2007 00:17:07 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=eTrNY6VniyF8JDIqGM8jCIyGLhUW3VQdr4o4715iYSLdvUfPnvnvH5xSQLPE/pZRGePSLGXmB/Fzs2TTRRP4ieAU2+l55l9+P4mxqfU0SXLBKdXox4bQxeTE12IuDujQVM5wZsL4DcIJadr2OYXDS3PMQ/QDv67NOMuBCJBZKCI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=LuSZ4Lgw9zICJfQoci5Z7HJ31sSgpkum0bo6AEAziGN0WQ3nzoDTHJoeemi5oLhyuFKu5UlkvBp9ZnuOuJVFdA3so7gM9asN7EaN6VDSoju+4GN9zjDETyJIZT++tCuR0TOJsMmMWT5qe2SAAL5+frlZFu76ohPVQyck07l1qww=
Received: by 10.114.192.1 with SMTP id p1mr6457392waf.1186471027691;
        Tue, 07 Aug 2007 00:17:07 -0700 (PDT)
Received: by 10.115.55.4 with HTTP; Tue, 7 Aug 2007 00:17:07 -0700 (PDT)
Message-ID: <4f9b23800708070017w79d4a82n9be66375c6468ed5@mail.gmail.com>
Date: Tue, 7 Aug 2007 08:17:07 +0100
From: "Patrick Kimber" <mailing.patrick.kimber@gmail.com>
To: java-user@lucene.apache.org
Subject: =?GB2312?B?UmU6ILTwuLQ6ILTwuLQ6IEFib3V0IG11dGktVGhyZWFkcyBpbiBMdWNlbmU=?=
In-Reply-To: <8E5BA7FAF994C6409A8E074B78EB4677013650E8@14sha-msg02.zm.sd.mediazone.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <8E5BA7FAF994C6409A8E074B78EB4677013650E8@14sha-msg02.zm.sd.mediazone.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Kai

No, I have no problem returning hits.

When I do have problems like this, I usually find I have something
more to learn about Lucene indexing.  Try looking at the data and
query in Luke.  I usually find this is the best way to understand what
is going on.

Here is the link to Luke:
http://www.getopt.org/luke/

I hope you get it sorted.

Patrick

On 07/08/07, Kai Hu <kai.hu@dusee.cn> wrote:
> By the way, Patrick,did you have a problem that IndexSearcher.search(Query query) cann't get the all matched hits.it only return a part of matched hits.
> my test code is:
>         String key = "title:good";
>         Directory directory = FSDirectory.getDirectory("d:\\index\\");
>         IndexSearcher searcher = new IndexSearcher(directory);
>         QueryParser queryParser = new QueryParser("",analyzer);
>         Query query = queryParser.parse(key);
>         hits = searcher.search(query,sort);
> there are two documents indexed which "title" value is "good",but when I searched by key"title:good",it returned only one documents.is it a bug?
>
> kai
>
> >Hi Kai
> >We keep a synchronized map of LuceneIndexAccessor instances, one instance per
> >The map is keyed on the directory path.  We then re-use
> >the accessor rather than creating a new one each time.
> >
> >Patrick
> On 06/08/07, Kai Hu <kai.hu@dusee.cn> wrote:
> > Thanks , Patrick,
> >
> > It is useful. But I found a problem that I use
> >
> > "new LuceneIndexAccessor(accessProvider);" when a request comes in B/S,the LuceneIndexAccessor.getWriter() will lose its sense,it will new an IndexWriter.
> >
> > public IndexWriter getWriter() throws IOException {
> >
> >        IndexWriter result;
> >
> >        synchronized (this) {//here "synchronized" will lose its sense
> >
> >            checkClosed();
> >
> >            ...
> >
> >        if (cachedWriter != null) {
> >
> >               log.debug("returning cached writer");
> >
> >               result = cachedWriter;
> >
> >               writerUseCount++;
> >
> >            } else {
> >
> >               log.debug("opening new writer and caching it");
> >
> >               result = accessProvider.getWriter();// when new a LuceneIndexAccessor Object ,it will new an IndexWriter Object
> >
> >               cachedWriter = result;
> >
> >               writerUseCount = 1;
> >
> >            }
> >
> >     }
> >
> > }
> >
> > It will also throw a Exception "cann't obtain the Lock",should I use a single instance of LuceneIndexAccessor? Suppose I use a single instance of LuceneIndexAccessor,how to set a different Directory or Analyzer at one time.
> >
> >
> >
> > kai
> >
> >
> > ///////////////////////////////////////////////////////////
> >
> > ///////////////////////////////////////////////////////////
> >
> >
> >
> > >Hi Kai
> >
> > >
> >
> > >We use the Lucene Index Accessor contribution:
> >
> > >
> >
> > >http://www.nabble.com/Fwd%3A-Contribution%3A-LuceneIndexAccessor-t17416.html#a47049
> >
> > >
> >
> > >Patrick
> >
> >
> >
> > On 06/08/07, Kai Hu <kai.hu@dusee.cn> wrote:
> >
> > > Hi,
> >
> > >
> >
> > >          How do you solve the problems when add,update,delete documents
> >
> > > in muti-threads,use synchronized ?
> >
> > >
> >
> > >
> >
> >
> >
> > ---------------------------------------------------------------------
> >
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 07 08:48:26 2007
Return-Path: <java-user-return-29676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25756 invoked from network); 7 Aug 2007 08:48:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2007 08:48:24 -0000
Received: (qmail 57567 invoked by uid 500); 7 Aug 2007 08:48:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56500 invoked by uid 500); 7 Aug 2007 08:48:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56489 invoked by uid 99); 7 Aug 2007 08:48:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Aug 2007 01:48:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Aug 2007 08:48:14 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 92ADECA6D
	for <java-user@lucene.apache.org>; Tue,  7 Aug 2007 04:47:52 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Tue, 07 Aug 2007 04:47:52 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 72A162315B; Tue,  7 Aug 2007 04:47:52 -0400 (EDT)
Message-Id: <1186476472.13993.1204119225@webmail.messagingengine.com>
X-Sasl-Enc: wJfGQ4gOt+Vq4F/JdQGnfP67lQrc7NEsMD7KzOovIkg9 1186476472
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <4628d2a90708060439m19539f85h47288d92b4ca5d4a@mail.gmail.com>
   <12026678.post@talk.nabble.com>
   <6e3ae6310708061749u2013246qf75fc01228b14096@mail.gmail.com>
   <7160683B-E403-4D5D-84C7-A86077DDF91D@gmail.com>
Subject: Re: speedup indexing
In-Reply-To: <7160683B-E403-4D5D-84C7-A86077DDF91D@gmail.com>
Date: Tue, 07 Aug 2007 04:47:52 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


"Mike Klaas" <mike.klaas@gmail.com> wrote:

> > On 8/6/07, testn <test1@doramail.com> wrote:
> >>
> >> 2. To improve indexing speed, you can consider using the trunk  
> >> code which
> >> includes LUCENE-843. The indexing speed will be faster by almost  
> >> an order of
> >> magnitude.
> 
> While a speedup should be expected, I don't know that an order of  
> magnitude is a realistic expectation to convey.  Unless, of course,  
> you're speaking in base two ;)

Right, it's important to not overstate things here...

First off, the speedups in LUCENE-843 *only* apply to the actual time
spent in Lucene's indexing code.  Ie, time spent retrieving the doc,
running the analyzer, etc., will not get any faster (though there is
ongoing work to speed up the core analyzers...) so if the bulk of the
time in an application is not in Lucene's indexing then the speedups
will be minor.

Second off, the speedups are best for smaller docs, and, at present
you still need to either change your writer to flush by RAM or set a
large "maxBufferedDocs" in order to see the best gains.

It's also important to try these suggestions too -- they can
potentially make even more difference than LUCENE-843:

  http://wiki.apache.org/lucene-java/ImproveIndexingSpeed

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 07 09:40:47 2007
Return-Path: <java-user-return-29677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39910 invoked from network); 7 Aug 2007 09:40:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2007 09:40:46 -0000
Received: (qmail 26954 invoked by uid 500); 7 Aug 2007 09:40:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26921 invoked by uid 500); 7 Aug 2007 09:40:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26910 invoked by uid 99); 7 Aug 2007 09:40:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Aug 2007 02:40:40 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kai.hu@dusee.cn designates 222.66.106.38 as permitted sender)
Received: from [222.66.106.38] (HELO mx01.dusee.cn) (222.66.106.38)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Aug 2007 09:40:33 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: =?gb2312?B?tPC4tDogtPC4tDogtPC4tDogQWJvdXQgbXV0aS1UaHJlYWRzIGluIEx1Y2U=?=
	=?gb2312?B?bmU=?=
Date: Tue, 7 Aug 2007 17:40:07 +0800
Message-ID: <8E5BA7FAF994C6409A8E074B78EB467701365138@14sha-msg02.zm.sd.mediazone.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: =?gb2312?B?tPC4tDogtPC4tDogQWJvdXQgbXV0aS1UaHJlYWRzIGluIEx1Y2VuZQ==?=
Thread-Index: AcfYww6RUhJcmdhkTi+pyXCE8NMvnQAEECFg
From: "Kai Hu" <kai.hu@dusee.cn>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Patrick
Thanks for your soonest reply these days.
Luke is convenient to query the data .
Thanks again.

kai
------------------------------------------
> Hi Kai
>
> No, I have no problem returning hits.
>
> When I do have problems like this, I usually find I have something
> more to learn about Lucene indexing.  Try looking at the data and
> query in Luke.  I usually find this is the best way to understand what
> is going on.
>
> Here is the link to Luke:
> http://www.getopt.org/luke/
>
> I hope you get it sorted.
>
> Patrick

On 07/08/07, Kai Hu <kai.hu@dusee.cn> wrote:
> By the way, Patrick,did you have a problem that =
IndexSearcher.search(Query query) cann't get the all matched hits.it =
only return a part of matched hits.
> my test code is:
>         String key =3D "title:good";
>         Directory directory =3D =
FSDirectory.getDirectory("d:\\index\\");
>         IndexSearcher searcher =3D new IndexSearcher(directory);
>         QueryParser queryParser =3D new QueryParser("",analyzer);
>         Query query =3D queryParser.parse(key);
>         hits =3D searcher.search(query,sort);
> there are two documents indexed which "title" value is "good",but when =
I searched by key"title:good",it returned only one documents.is it a =
bug?
>
> kai
>
> >Hi Kai
> >We keep a synchronized map of LuceneIndexAccessor instances, one =
instance per
> >The map is keyed on the directory path.  We then re-use
> >the accessor rather than creating a new one each time.
> >
> >Patrick
> On 06/08/07, Kai Hu <kai.hu@dusee.cn> wrote:
> > Thanks , Patrick,
> >
> > It is useful. But I found a problem that I use
> >
> > "new LuceneIndexAccessor(accessProvider);" when a request comes in =
B/S,the LuceneIndexAccessor.getWriter() will lose its sense,it will new =
an IndexWriter.
> >
> > public IndexWriter getWriter() throws IOException {
> >
> >        IndexWriter result;
> >
> >        synchronized (this) {//here "synchronized" will lose its =
sense
> >
> >            checkClosed();
> >
> >            ...
> >
> >        if (cachedWriter !=3D null) {
> >
> >               log.debug("returning cached writer");
> >
> >               result =3D cachedWriter;
> >
> >               writerUseCount++;
> >
> >            } else {
> >
> >               log.debug("opening new writer and caching it");
> >
> >               result =3D accessProvider.getWriter();// when new a =
LuceneIndexAccessor Object ,it will new an IndexWriter Object
> >
> >               cachedWriter =3D result;
> >
> >               writerUseCount =3D 1;
> >
> >            }
> >
> >     }
> >
> > }
> >
> > It will also throw a Exception "cann't obtain the Lock",should I use =
a single instance of LuceneIndexAccessor? Suppose I use a single =
instance of LuceneIndexAccessor,how to set a different Directory or =
Analyzer at one time.
> >
> >
> >
> > kai
> >
> >
> > ///////////////////////////////////////////////////////////
> >
> > ///////////////////////////////////////////////////////////
> >
> >
> >
> > >Hi Kai
> >
> > >
> >
> > >We use the Lucene Index Accessor contribution:
> >
> > >
> >
> > =
>http://www.nabble.com/Fwd%3A-Contribution%3A-LuceneIndexAccessor-t17416.=
html#a47049
> >
> > >
> >
> > >Patrick
> >
> >
> >
> > On 06/08/07, Kai Hu <kai.hu@dusee.cn> wrote:
> >
> > > Hi,
> >
> > >
> >
> > >          How do you solve the problems when add,update,delete =
documents
> >
> > > in muti-threads,use synchronized ?
> >
> > >
> >
> > >
> >
> >
> >
> > =
---------------------------------------------------------------------
> >
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 07 10:24:09 2007
Return-Path: <java-user-return-29678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48260 invoked from network); 7 Aug 2007 10:24:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2007 10:24:07 -0000
Received: (qmail 85684 invoked by uid 500); 7 Aug 2007 10:24:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85642 invoked by uid 500); 7 Aug 2007 10:24:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85631 invoked by uid 99); 7 Aug 2007 10:24:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Aug 2007 03:24:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rsk.sen@gmail.com designates 209.85.198.189 as permitted sender)
Received: from [209.85.198.189] (HELO rv-out-0910.google.com) (209.85.198.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Aug 2007 10:23:57 +0000
Received: by rv-out-0910.google.com with SMTP id k20so1118623rvb
        for <java-user@lucene.apache.org>; Tue, 07 Aug 2007 03:23:36 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FisPzsSz1Ej10ca+rbW3Qx4I1PVsdS/bgNGOYGHttaqFXqnCT/EM7SL7gToGE2quJdMx09pf+62V8QQsZ6ayj6Q1x+m0TXoh+sHsOZfH7twnFp1xDPd12RERNyKaY9QQ212e3SqaxG3D/sp/xGizfUUpbMOUTHTysEY0GJu2WUE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=PpZiYpm8A0HscZHnJvxrqf58Ggh1FHuH6ItKNkF+uknpEmloehK/jlk0bLJioDTKYwobXbn2SyDVi82ilVkhJQiCjtohdz93RGq20xbWMYqHsLL48Z2jjtojX5g7wxZhhr3DIWrQpvknoCXO2Zh6X19yghm9cHvPOYpYSi2UtTY=
Received: by 10.114.149.2 with SMTP id w2mr6593662wad.1186482216564;
        Tue, 07 Aug 2007 03:23:36 -0700 (PDT)
Received: by 10.114.93.18 with HTTP; Tue, 7 Aug 2007 03:23:36 -0700 (PDT)
Message-ID: <4628d2a90708070323p6f5dcd63o6edbe04e7dd988b5@mail.gmail.com>
Date: Tue, 7 Aug 2007 15:53:36 +0530
From: "SK R" <rsk.sen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: speedup indexing
In-Reply-To: <1186476472.13993.1204119225@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_107625_32625174.1186482216516"
References: <4628d2a90708060439m19539f85h47288d92b4ca5d4a@mail.gmail.com>
	 <12026678.post@talk.nabble.com>
	 <6e3ae6310708061749u2013246qf75fc01228b14096@mail.gmail.com>
	 <7160683B-E403-4D5D-84C7-A86077DDF91D@gmail.com>
	 <1186476472.13993.1204119225@webmail.messagingengine.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_107625_32625174.1186482216516
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
    Thanks for this valuable informations.
    I'm using Lucene2.1 now. Do I need to apply the patch  "LUCENE-843" with
existing one or i have to move the latest? Do i need to use flushByRam
instead of flushbydoc to work with this patch?


Regards
RSK

On 8/7/07, Michael McCandless <lucene@mikemccandless.com> wrote:
>
>
> "Mike Klaas" <mike.klaas@gmail.com> wrote:
>
> > > On 8/6/07, testn <test1@doramail.com> wrote:
> > >>
> > >> 2. To improve indexing speed, you can consider using the trunk
> > >> code which
> > >> includes LUCENE-843. The indexing speed will be faster by almost
> > >> an order of
> > >> magnitude.
> >
> > While a speedup should be expected, I don't know that an order of
> > magnitude is a realistic expectation to convey.  Unless, of course,
> > you're speaking in base two ;)
>
> Right, it's important to not overstate things here...
>
> First off, the speedups in LUCENE-843 *only* apply to the actual time
> spent in Lucene's indexing code.  Ie, time spent retrieving the doc,
> running the analyzer, etc., will not get any faster (though there is
> ongoing work to speed up the core analyzers...) so if the bulk of the
> time in an application is not in Lucene's indexing then the speedups
> will be minor.
>
> Second off, the speedups are best for smaller docs, and, at present
> you still need to either change your writer to flush by RAM or set a
> large "maxBufferedDocs" in order to see the best gains.
>
> It's also important to try these suggestions too -- they can
> potentially make even more difference than LUCENE-843:
>
>   http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_107625_32625174.1186482216516--

From java-user-return-29679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 07 10:35:58 2007
Return-Path: <java-user-return-29679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52198 invoked from network); 7 Aug 2007 10:35:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2007 10:35:57 -0000
Received: (qmail 4878 invoked by uid 500); 7 Aug 2007 10:35:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4833 invoked by uid 500); 7 Aug 2007 10:35:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4822 invoked by uid 99); 7 Aug 2007 10:35:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Aug 2007 03:35:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [60.52.184.45] (HELO tecforte.com) (60.52.184.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Aug 2007 10:35:39 +0000
Received: from DFPYWL2S [192.168.2.96] by tecforte.com with ESMTP
  (SMTPD32-8.03) id AADB2180078; Tue, 07 Aug 2007 18:35:07 +0800
From: "Chew Yee Chuang" <yeechuang@tecforte.com>
To: <java-user@lucene.apache.org>
References: <004201c7d322$69c8bae0$3d5a30a0$@com> <4E0025CD-A1FF-44E4-8322-2A71F9F26332@gmail.com> <003501c7d3e3$ca58e990$5f0abcb0$@com> <D0F005F8-F115-45C9-A5F6-A3F758EE5514@gmail.com>
In-Reply-To: <D0F005F8-F115-45C9-A5F6-A3F758EE5514@gmail.com>
Subject: RE: High CPU usage duing index and search
Date: Tue, 7 Aug 2007 18:35:49 +0800
Message-ID: <000901c7d8de$bc2be0c0$3483a240$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="windows-1250"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcfUkeT1s5XHenX5S1e0zDcWdDAR4gES4Afw
Content-Language: en-us
X-Virus-Checked: Checked by ClamAV on apache.org

Greetings,

Yes, process a little bit and stop for a while really reduce the CPU =
usage,
but I need to find out a balance so that the indexing or searching will =
not
have so much delay.

Execute 20,000 queries at a time is because the process is generating =
the
aggregation data for reporting,
E.g Gender (M,F), Department (Accounting, R&D, Financial,...etc),=20
1Q - Gender:M AND Department: Accounting
2Q - Gender:M AND Department: R&D
3Q - Gender:M AND Department: Financial
4Q - Gender:F AND Department: Accounting
5Q - ....
Thus, the more combination, the more query need to run. For now, I still
can't get any idea on how to reduce it, just thinking maybe there is a
different way to index it so that I can get It easily.

Any help would be appreciated.

Thanks
eChuang, Chew

-----Original Message-----
From: karl wettin [mailto:karl.wettin@gmail.com]=20
Sent: Thursday, August 02, 2007 7:11 AM
To: java-user@lucene.apache.org
Subject: Re: High CPU usage duing index and search

It sounds like you have a fairly busy system, perhaps 100% load on the
process is not that strange, at least not during short periods of time.

A simpler solution would be to nice the process a little bit in order to
give your background jobs some more time to think.

Running a profiler is still the best advice I can think of. It should
clearly show you what is going on when you run out of CPU.

-- =20
karl

1 aug 2007 kl. 04.29 skrev Chew Yee Chuang:

> Hi,
>
> Thanks for the link provided, actually I've go through those =20
> article when I
> developing the index and search function for my application. I =20
> haven=92t try
> profiler yet, but I monitor the CPU usage and notice that whatever =20
> index or
> search performing, the CPU usage raise to 100%. Below I will try to
> elaborate more on what my application is doing and how I index and =20
> search.
>
> There are many concurrent process running, first, the application =20
> will write
> records that received into a text file with tab separated each =20
> different
> field. Application will point to a new file every 10mins and start =20
> writing
> to it. So every file will contains only 10mins record, approximate =20
> 600,000
> records per file. Then, the indexing process will check whether =20
> there is a
> text file to be index, if it is, the thread will wake up and start =20
> perform
> indexing.
>
> The indexing process will first add documents to RAMDir, Then =20
> later, add
> RAMDir into FSDir by calling addIndexNoOptimize() when there is =20
> 100,000
> documents(32 fields per doc) in RAMDir. There is only 1 IndexWriter=20
> (FSDir)
> was created but a few IndexWriter(RAMDir) was created during the whole
> process. Below are some configuration for IndexWriters that I =20
> mentioned:-
>
> IndexWriter (RAMDir)
> - SimpleAnalyzer
> - setMaxBufferedDocs(10000)
> - Filed.Store.YES
> - Field.Index.NO_NORMS
>
> IndexWriter (FSDir)
> - SimpleAnalyzer
> - setMergeFactor(20)
> - addIndexesNoOptimize()
>
> For the searching, because there are many queries(20,000) run =20
> continuously
> to generate the aggregate table for reporting purpose. All this =20
> queries is
> run in nested loop, and there is only 1 Searcher created, I try =20
> searcher and
> filter as well, filter give me better result, but both also utilize =20
> lots of
> CPU resources.
>
> Hope this info will help and sorry for my bad English.
>
> Thanks
> eChuang, Chew
>
> -----Original Message-----
> From: karl wettin [mailto:karl.wettin@gmail.com]
> Sent: Tuesday, July 31, 2007 5:54 PM
> To: java-user@lucene.apache.org
> Subject: Re: High CPU usage duing index and search
>
>
> 31 jul 2007 kl. 05.25 skrev Chew Yee Chuang:
>> But just notice that when Lucene performing search or index,
>> the CPU usage on my machine raise to 100%, because of this issue,
>> some of my
>> others backend process will slow down eventually. Just want to know
>> does
>> anyone face this problem before ? and is it any idea on how to
>> overcome this
>> problem ?
>
> Did you run a profiler to see what it is that consume all the =20
> resources?
> It is very hard to guess based on the information you supplied. Start
> here:
>
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
> http://wiki.apache.org/lucene-java/ImproveSearchingSpeed
>
>
> --=20
> karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> No virus found in this incoming message.
> Checked by AVG Free Edition.
> Version: 7.5.476 / Virus Database: 269.11.0/927 - Release Date: =20
> 7/30/2007
> 5:02 PM
>
>
> No virus found in this outgoing message.
> Checked by AVG Free Edition.
> Version: 7.5.476 / Virus Database: 269.11.0/929 - Release Date: =20
> 7/31/2007
> 5:26 PM
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


No virus found in this incoming message.
Checked by AVG Free Edition.=20
Version: 7.5.476 / Virus Database: 269.11.2/933 - Release Date: 8/2/2007
2:22 PM
=20

No virus found in this outgoing message.
Checked by AVG Free Edition.=20
Version: 7.5.476 / Virus Database: 269.11.8/940 - Release Date: 8/6/2007
4:53 PM
=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 07 11:11:08 2007
Return-Path: <java-user-return-29680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70580 invoked from network); 7 Aug 2007 11:11:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2007 11:11:06 -0000
Received: (qmail 46559 invoked by uid 500); 7 Aug 2007 11:11:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46527 invoked by uid 500); 7 Aug 2007 11:11:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46514 invoked by uid 99); 7 Aug 2007 11:11:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Aug 2007 04:11:00 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 66.249.82.226 as permitted sender)
Received: from [66.249.82.226] (HELO wx-out-0506.google.com) (66.249.82.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Aug 2007 11:10:53 +0000
Received: by wx-out-0506.google.com with SMTP id i28so1311846wxd
        for <java-user@lucene.apache.org>; Tue, 07 Aug 2007 04:10:32 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=r2HFs9Si25qDo2TjaqagyM75WaH4lb+xTF/NJw76aKtH8lOQVbtNETCpVfwNpbFd6onsU4Y5ig1+APHmQo5IUK3FdwF9cOSDxZyAM4cLQuLBl7B41DGErbTc+Z9IAAJdIP2+3WbbKbQVSDI8rDG6oC6RuRKBVHyhrSfxJhWL4u4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=nlu8qZx40YRmkLJh9iUSbeBSxpiIEayyG/zDVRPXBn/OKZ4qxxKAGKIDsmEUdlHkZCjsilSFMTzkC9f1FwoeVWbqV2ngW8yWJL/Mk0vGe+GFd0nohroNWAMtXqAJGnCmb33/8gA9y/+Kn+D268g6SEAy9yhlE5l56dILD2htfok=
Received: by 10.90.104.14 with SMTP id b14mr5617923agc.1186485032353;
        Tue, 07 Aug 2007 04:10:32 -0700 (PDT)
Received: from ?192.168.1.105? ( [216.66.114.204])
        by mx.google.com with ESMTPS id 26sm7841243wra.2007.08.07.04.10.29
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 07 Aug 2007 04:10:30 -0700 (PDT)
Message-ID: <46B85322.7090503@gmail.com>
Date: Tue, 07 Aug 2007 07:10:26 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: =?GB2312?B?tPC4tDogtPC4tDogQWJvdXQgbXV0aS1UaHJlYWRzIGluIEx1Yw==?=
 =?GB2312?B?ZW5l?=
References: <8E5BA7FAF994C6409A8E074B78EB4677013650E1@14sha-msg02.zm.sd.mediazone.com>
In-Reply-To: <8E5BA7FAF994C6409A8E074B78EB4677013650E1@14sha-msg02.zm.sd.mediazone.com>
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

You don't close the indexwriter (or readers or searchers) with the
accessor code. You release them, and the accessor code will close them
when appropriate.

- Mark

Kai Hu wrote:
> Hi,Patrick
> 	I tested use a map , get a single LuceneIndexAccessor,and get a cached IndexWriter ,but after do operation of update,delete,add documents,I should close the IndexWriter to release the Lock,it will throw Exceptions" this IndexWriter is closed" when other threads execute  add,update,delete operations.should I synchronized the IndexWriter object? It's better if you can  send me a demo ,thanks .
>
> kai
>
>   
>> Hi Kai
>>
>> We keep a synchronized map of LuceneIndexAccessor instances, one instance per
>> Directory.  The map is keyed on the directory path.  We then re-use
>> the accessor rather than creating a new one each time.
>>
>> Patrick
>>
>>     
> On 06/08/07, Kai Hu <kai.hu@dusee.cn> wrote:
>   
>> Thanks , Patrick,
>>
>> It is useful. But I found a problem that I use
>>
>> "new LuceneIndexAccessor(accessProvider);" when a request comes in B/S,the LuceneIndexAccessor.getWriter() will lose its sense,it will new an IndexWriter.
>>
>> public IndexWriter getWriter() throws IOException {
>>
>>        IndexWriter result;
>>
>>        synchronized (this) {//here "synchronized" will lose its sense
>>
>>            checkClosed();
>>
>>            ...
>>
>>        if (cachedWriter != null) {
>>
>>               log.debug("returning cached writer");
>>
>>               result = cachedWriter;
>>
>>               writerUseCount++;
>>
>>            } else {
>>
>>               log.debug("opening new writer and caching it");
>>
>>               result = accessProvider.getWriter();// when new a LuceneIndexAccessor Object ,it will new an IndexWriter Object
>>
>>               cachedWriter = result;
>>
>>               writerUseCount = 1;
>>
>>            }
>>
>>     }
>>
>> }
>>
>> It will also throw a Exception "cann't obtain the Lock",should I use a single instance of LuceneIndexAccessor? Suppose I use a single instance of LuceneIndexAccessor,how to set a different Directory or Analyzer at one time.
>>
>>
>>
>> kai
>>
>>
>> ///////////////////////////////////////////////////////////
>>
>> ///////////////////////////////////////////////////////////
>>
>>
>>
>>     
>>> Hi Kai
>>>       
>>> We use the Lucene Index Accessor contribution:
>>>       
>>> http://www.nabble.com/Fwd%3A-Contribution%3A-LuceneIndexAccessor-t17416.html#a47049
>>>       
>>> Patrick
>>>       
>>
>> On 06/08/07, Kai Hu <kai.hu@dusee.cn> wrote:
>>
>>     
>>> Hi,
>>>       
>>>          How do you solve the problems when add,update,delete documents
>>>       
>>> in muti-threads,use synchronized ?
>>>       
>>
>> ---------------------------------------------------------------------
>>
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 07 12:25:25 2007
Return-Path: <java-user-return-29681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14093 invoked from network); 7 Aug 2007 12:25:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2007 12:25:23 -0000
Received: (qmail 49071 invoked by uid 500); 7 Aug 2007 12:25:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49026 invoked by uid 500); 7 Aug 2007 12:25:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49014 invoked by uid 99); 7 Aug 2007 12:25:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Aug 2007 05:25:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Aug 2007 12:25:06 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 82B54BB78
	for <java-user@lucene.apache.org>; Tue,  7 Aug 2007 08:24:49 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Tue, 07 Aug 2007 08:24:49 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 6711E15BFF; Tue,  7 Aug 2007 08:24:49 -0400 (EDT)
Message-Id: <1186489489.20386.1204149105@webmail.messagingengine.com>
X-Sasl-Enc: j1Ifu8raN7v79kJu90DXs2omJyayeZPTj5FHdklLP5F5 1186489489
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <4628d2a90708060439m19539f85h47288d92b4ca5d4a@mail.gmail.com>
   <12026678.post@talk.nabble.com>
   <6e3ae6310708061749u2013246qf75fc01228b14096@mail.gmail.com>
   <7160683B-E403-4D5D-84C7-A86077DDF91D@gmail.com>
   <1186476472.13993.1204119225@webmail.messagingengine.com>
   <4628d2a90708070323p6f5dcd63o6edbe04e7dd988b5@mail.gmail.com>
Subject: Re: speedup indexing
In-Reply-To: <4628d2a90708070323p6f5dcd63o6edbe04e7dd988b5@mail.gmail.com>
Date: Tue, 07 Aug 2007 08:24:49 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


"SK R" <rsk.sen@gmail.com> wrote:
> Hi,
>     Thanks for this valuable informations.
>     I'm using Lucene2.1 now. Do I need to apply the patch  "LUCENE-843"
>     with
> existing one or i have to move the latest?

It's probably best to use a nightly build JAR of Lucene to play with
LUCENE-843.  But, please realize this is an unreleased version of
Lucene so "use at your own risk"!  You can get nightly builds here:

  http://people.apache.org/builds/lucene/java/nightly/

> Do i need to use flushByRam
> instead of flushbydoc to work with this patch?

You don't have to flush by ram to work with this patch; it's just that
doing so will get you best performance, when your docs have variable
sizes.  You could likewise set a large maxBufferedDocs instead (if docs
are typically the same size).  The idea is you can flush far less often
than you were before because LUCENE-843 greatly improves RAM
efficiency of buffered docs...

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 07 14:38:00 2007
Return-Path: <java-user-return-29682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64780 invoked from network); 7 Aug 2007 14:37:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2007 14:37:59 -0000
Received: (qmail 38351 invoked by uid 500); 7 Aug 2007 14:37:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37597 invoked by uid 500); 7 Aug 2007 14:37:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37586 invoked by uid 99); 7 Aug 2007 14:37:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Aug 2007 07:37:51 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Aug 2007 14:37:45 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IIQBY-0003PK-M0
	for java-user@lucene.apache.org; Tue, 07 Aug 2007 07:37:24 -0700
Message-ID: <12035676.post@talk.nabble.com>
Date: Tue, 7 Aug 2007 07:37:24 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: RE: High CPU usage duing index and search
In-Reply-To: <000901c7d8de$bc2be0c0$3483a240$@com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: test1@doramail.com
References: <004201c7d322$69c8bae0$3d5a30a0$@com> <4E0025CD-A1FF-44E4-8322-2A71F9F26332@gmail.com> <003501c7d3e3$ca58e990$5f0abcb0$@com> <D0F005F8-F115-45C9-A5F6-A3F758EE5514@gmail.com> <000901c7d8de$bc2be0c0$3483a240$@com>
X-Virus-Checked: Checked by ClamAV on apache.org


Check out Filter class. You can create a separate filter for each field and
then chain them together using ChainFilter. If you cache the filter, it wil=
l
be pretty fast.=20


Chew Yee Chuang wrote:
>=20
> Greetings,
>=20
> Yes, process a little bit and stop for a while really reduce the CPU
> usage,
> but I need to find out a balance so that the indexing or searching will
> not
> have so much delay.
>=20
> Execute 20,000 queries at a time is because the process is generating the
> aggregation data for reporting,
> E.g Gender (M,F), Department (Accounting, R&D, Financial,...etc),=20
> 1Q - Gender:M AND Department: Accounting
> 2Q - Gender:M AND Department: R&D
> 3Q - Gender:M AND Department: Financial
> 4Q - Gender:F AND Department: Accounting
> 5Q - ....
> Thus, the more combination, the more query need to run. For now, I still
> can't get any idea on how to reduce it, just thinking maybe there is a
> different way to index it so that I can get It easily.
>=20
> Any help would be appreciated.
>=20
> Thanks
> eChuang, Chew
>=20
> -----Original Message-----
> From: karl wettin [mailto:karl.wettin@gmail.com]=20
> Sent: Thursday, August 02, 2007 7:11 AM
> To: java-user@lucene.apache.org
> Subject: Re: High CPU usage duing index and search
>=20
> It sounds like you have a fairly busy system, perhaps 100% load on the
> process is not that strange, at least not during short periods of time.
>=20
> A simpler solution would be to nice the process a little bit in order to
> give your background jobs some more time to think.
>=20
> Running a profiler is still the best advice I can think of. It should
> clearly show you what is going on when you run out of CPU.
>=20
> -- =20
> karl
>=20
> 1 aug 2007 kl. 04.29 skrev Chew Yee Chuang:
>=20
>> Hi,
>>
>> Thanks for the link provided, actually I've go through those =20
>> article when I
>> developing the index and search function for my application. I =20
>> haven=E2=80=99t try
>> profiler yet, but I monitor the CPU usage and notice that whatever =20
>> index or
>> search performing, the CPU usage raise to 100%. Below I will try to
>> elaborate more on what my application is doing and how I index and =20
>> search.
>>
>> There are many concurrent process running, first, the application =20
>> will write
>> records that received into a text file with tab separated each =20
>> different
>> field. Application will point to a new file every 10mins and start =20
>> writing
>> to it. So every file will contains only 10mins record, approximate =20
>> 600,000
>> records per file. Then, the indexing process will check whether =20
>> there is a
>> text file to be index, if it is, the thread will wake up and start =20
>> perform
>> indexing.
>>
>> The indexing process will first add documents to RAMDir, Then =20
>> later, add
>> RAMDir into FSDir by calling addIndexNoOptimize() when there is =20
>> 100,000
>> documents(32 fields per doc) in RAMDir. There is only 1 IndexWriter=20
>> (FSDir)
>> was created but a few IndexWriter(RAMDir) was created during the whole
>> process. Below are some configuration for IndexWriters that I =20
>> mentioned:-
>>
>> IndexWriter (RAMDir)
>> - SimpleAnalyzer
>> - setMaxBufferedDocs(10000)
>> - Filed.Store.YES
>> - Field.Index.NO_NORMS
>>
>> IndexWriter (FSDir)
>> - SimpleAnalyzer
>> - setMergeFactor(20)
>> - addIndexesNoOptimize()
>>
>> For the searching, because there are many queries(20,000) run =20
>> continuously
>> to generate the aggregate table for reporting purpose. All this =20
>> queries is
>> run in nested loop, and there is only 1 Searcher created, I try =20
>> searcher and
>> filter as well, filter give me better result, but both also utilize =20
>> lots of
>> CPU resources.
>>
>> Hope this info will help and sorry for my bad English.
>>
>> Thanks
>> eChuang, Chew
>>
>> -----Original Message-----
>> From: karl wettin [mailto:karl.wettin@gmail.com]
>> Sent: Tuesday, July 31, 2007 5:54 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: High CPU usage duing index and search
>>
>>
>> 31 jul 2007 kl. 05.25 skrev Chew Yee Chuang:
>>> But just notice that when Lucene performing search or index,
>>> the CPU usage on my machine raise to 100%, because of this issue,
>>> some of my
>>> others backend process will slow down eventually. Just want to know
>>> does
>>> anyone face this problem before ? and is it any idea on how to
>>> overcome this
>>> problem ?
>>
>> Did you run a profiler to see what it is that consume all the =20
>> resources?
>> It is very hard to guess based on the information you supplied. Start
>> here:
>>
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
>> http://wiki.apache.org/lucene-java/ImproveSearchingSpeed
>>
>>
>> --=20
>> karl
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> No virus found in this incoming message.
>> Checked by AVG Free Edition.
>> Version: 7.5.476 / Virus Database: 269.11.0/927 - Release Date: =20
>> 7/30/2007
>> 5:02 PM
>>
>>
>> No virus found in this outgoing message.
>> Checked by AVG Free Edition.
>> Version: 7.5.476 / Virus Database: 269.11.0/929 - Release Date: =20
>> 7/31/2007
>> 5:26 PM
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> No virus found in this incoming message.
> Checked by AVG Free Edition.=20
> Version: 7.5.476 / Virus Database: 269.11.2/933 - Release Date: 8/2/2007
> 2:22 PM
> =20
>=20
> No virus found in this outgoing message.
> Checked by AVG Free Edition.=20
> Version: 7.5.476 / Virus Database: 269.11.8/940 - Release Date: 8/6/2007
> 4:53 PM
> =20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/High-CPU-usage-duing-in=
dex-and-search-tf4190756.html#a12035676
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 07 23:22:43 2007
Return-Path: <java-user-return-29683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82277 invoked from network); 7 Aug 2007 23:22:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2007 23:22:42 -0000
Received: (qmail 95737 invoked by uid 500); 7 Aug 2007 23:22:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95700 invoked by uid 500); 7 Aug 2007 23:22:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95689 invoked by uid 99); 7 Aug 2007 23:22:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Aug 2007 16:22:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.196.101.43] (HELO web59302.mail.re1.yahoo.com) (66.196.101.43)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 07 Aug 2007 23:22:31 +0000
Received: (qmail 91278 invoked by uid 60001); 7 Aug 2007 23:22:10 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=PI4Muit9XOTW0JCqxYws3vWKSml+gMaxNRZkHk52B055VRx8MHfe63lSElrTDzQX4sGeKh+7KNTBajNjMkO1amH0p0m+kLp/j+eg9YydJFahq4vJZJ+wNgETBhPBKIsW7UUeSMoWKT94eb1VqEI8d2YYSFHOTo3pTPQvQDl6sas=;
X-YMail-OSG: f135wGAVM1nxPZDe2ICz0ofXW7pqVDCQ.1p2bDIJSv2we0ingPLuL_MffG8DrhHOEGNVrP3rhjFpxK8VajoaIK6OmC78D49eevxl5NOTWIKhnN2yiqWXjZc1sp40rQLL
Received: from [64.81.54.56] by web59302.mail.re1.yahoo.com via HTTP; Tue, 07 Aug 2007 16:22:09 PDT
Date: Tue, 7 Aug 2007 16:22:09 -0700 (PDT)
From: Kai_testing Middleton <kai_testing@yahoo.com>
Subject: StandardAnalyzer vs KeywordAnalyzer in Luke
To: lucene user <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <871114.88742.qm@web59302.mail.re1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I'm invoking Luke like this: 
   java -jar lukeall-0.7.1.jar
I run this query:
   content:Nyarubuye

When I use the StandardAnalyzer I get results but when I use the
KeywordAnalyzer I don't get results.  Can someone explain this?  

My corpus was crawled and indexed using a nightly build of nutch (with Lucene
2.2, just like my Luke 0.7.1), crawling a bunch of news sites.  A legitimate
result page would be:
http://news.bbc.co.uk/2/hi/programmes/panorama/3582267.stm

SimpleAnalyzer also works as does StopAnalyzer.  WhitespaceAnalyzer fails.
(SnowballAnalyzer gives me a ClassDefNotFound exception).  PerfieldAnalyzer
gives me a PerfieldAnalyzerWrapper error.




       
____________________________________________________________________________________
Looking for a deal? Find great prices on flights and hotels with Yahoo! FareChase.
http://farechase.yahoo.com/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 07 23:30:31 2007
Return-Path: <java-user-return-29684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86130 invoked from network); 7 Aug 2007 23:30:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Aug 2007 23:30:30 -0000
Received: (qmail 2740 invoked by uid 500); 7 Aug 2007 23:30:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2542 invoked by uid 500); 7 Aug 2007 23:30:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2531 invoked by uid 99); 7 Aug 2007 23:30:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Aug 2007 16:30:23 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.191 as permitted sender)
Received: from [209.85.128.191] (HELO fk-out-0910.google.com) (209.85.128.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Aug 2007 23:30:21 +0000
Received: by fk-out-0910.google.com with SMTP id z23so1787799fkz
        for <java-user@lucene.apache.org>; Tue, 07 Aug 2007 16:30:00 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DdWjF5gnbnDKSZsqJym6eeo4CbiCqFFVWnH1XY+HnZ2yRVfnKujcRCT9rIunD326JI2/aq1LnEzJXHdfh/dQI7et1O3XIORqfMBr1MPSQYSVmMuHvTq58x6aZcPV+xIymfkpKBGEBfrukMrTDdD6WQKu8uzgBSTq0Tibh6bR/9U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=rUjaS0KwYK8w7CFuDVDnw3dH+fEfp3JRQbNh0mDHB5n87Y+NPbWl34GHtYf4O5J3+Itj9hbOyK+YqyA2xSxTLS4TctYgtO9SClk33XzdYLrQYa+FdcZuRQrSUgrKCz3yaDWh2hfHFeJJdKDDYFjZGB+uh9co/IQv+bjkYEoALhk=
Received: by 10.82.189.6 with SMTP id m6mr740705buf.1186529399948;
        Tue, 07 Aug 2007 16:29:59 -0700 (PDT)
Received: by 10.82.190.14 with HTTP; Tue, 7 Aug 2007 16:29:59 -0700 (PDT)
Message-ID: <359a92830708071629ne65cf3pf43d3d4992e6497f@mail.gmail.com>
Date: Tue, 7 Aug 2007 19:29:59 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: StandardAnalyzer vs KeywordAnalyzer in Luke
In-Reply-To: <871114.88742.qm@web59302.mail.re1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_100440_30758315.1186529399929"
References: <871114.88742.qm@web59302.mail.re1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_100440_30758315.1186529399929
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>From the documentation for both SimpleAnalyzer and
StopAnalyzer...

...with LowerCaseFilter...

So I assume that your problem is the capital "N"...

Erick

On 8/7/07, Kai_testing Middleton <kai_testing@yahoo.com> wrote:
>
> I'm invoking Luke like this:
>    java -jar lukeall-0.7.1.jar
> I run this query:
>    content:Nyarubuye
>
> When I use the StandardAnalyzer I get results but when I use the
> KeywordAnalyzer I don't get results.  Can someone explain this?
>
> My corpus was crawled and indexed using a nightly build of nutch (with
> Lucene
> 2.2, just like my Luke 0.7.1), crawling a bunch of news sites.  A
> legitimate
> result page would be:
> http://news.bbc.co.uk/2/hi/programmes/panorama/3582267.stm
>
> SimpleAnalyzer also works as does StopAnalyzer.  WhitespaceAnalyzer fails.
> (SnowballAnalyzer gives me a ClassDefNotFound
> exception).  PerfieldAnalyzer
> gives me a PerfieldAnalyzerWrapper error.
>
>
>
>
>
>
> ____________________________________________________________________________________
> Looking for a deal? Find great prices on flights and hotels with Yahoo!
> FareChase.
> http://farechase.yahoo.com/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_100440_30758315.1186529399929--

From java-user-return-29685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 08 00:52:35 2007
Return-Path: <java-user-return-29685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16698 invoked from network); 8 Aug 2007 00:52:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2007 00:52:35 -0000
Received: (qmail 62455 invoked by uid 500); 8 Aug 2007 00:52:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62422 invoked by uid 500); 8 Aug 2007 00:52:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62405 invoked by uid 99); 8 Aug 2007 00:52:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Aug 2007 17:52:28 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Aug 2007 00:52:19 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id D6E76131A21
	for <java-user@lucene.apache.org>; Tue,  7 Aug 2007 17:51:59 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <871114.88742.qm@web59302.mail.re1.yahoo.com>
References: <871114.88742.qm@web59302.mail.re1.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C7CEC88D-6653-450A-A78B-2851073513AA@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: StandardAnalyzer vs KeywordAnalyzer in Luke
Date: Tue, 7 Aug 2007 20:51:43 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Nutch uses it's own Analyzer.  You should use the Analyzer that Nutch  
uses in order to get proper results.  That may mean adding the Nutch  
Analyzer to your Luke classpath.

-Grant

On Aug 7, 2007, at 7:22 PM, Kai_testing Middleton wrote:

> I'm invoking Luke like this:
>    java -jar lukeall-0.7.1.jar
> I run this query:
>    content:Nyarubuye
>
> When I use the StandardAnalyzer I get results but when I use the
> KeywordAnalyzer I don't get results.  Can someone explain this?
>
> My corpus was crawled and indexed using a nightly build of nutch  
> (with Lucene
> 2.2, just like my Luke 0.7.1), crawling a bunch of news sites.  A  
> legitimate
> result page would be:
> http://news.bbc.co.uk/2/hi/programmes/panorama/3582267.stm
>
> SimpleAnalyzer also works as does StopAnalyzer.  WhitespaceAnalyzer  
> fails.
> (SnowballAnalyzer gives me a ClassDefNotFound exception).   
> PerfieldAnalyzer
> gives me a PerfieldAnalyzerWrapper error.
>
>
>
>
>
> ______________________________________________________________________ 
> ______________
> Looking for a deal? Find great prices on flights and hotels with  
> Yahoo! FareChase.
> http://farechase.yahoo.com/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 08 02:57:33 2007
Return-Path: <java-user-return-29686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47653 invoked from network); 8 Aug 2007 02:57:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2007 02:57:33 -0000
Received: (qmail 53206 invoked by uid 500); 8 Aug 2007 02:57:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53167 invoked by uid 500); 8 Aug 2007 02:57:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53155 invoked by uid 99); 8 Aug 2007 02:57:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Aug 2007 19:57:25 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kai.hu@dusee.cn designates 222.66.106.38 as permitted sender)
Received: from [222.66.106.38] (HELO mx01.dusee.cn) (222.66.106.38)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Aug 2007 02:57:15 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: =?gb2312?B?tPC4tDogtPC4tDogtPC4tDogQWJvdXQgbXV0aS1UaHJlYWRzIGluIEx1Y2U=?=
	=?gb2312?B?bmU=?=
Date: Wed, 8 Aug 2007 10:56:53 +0800
Message-ID: <8E5BA7FAF994C6409A8E074B78EB467701365167@14sha-msg02.zm.sd.mediazone.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: =?gb2312?B?tPC4tDogtPC4tDogQWJvdXQgbXV0aS1UaHJlYWRzIGluIEx1Y2VuZQ==?=
Thread-Index: AcfY46ol0GinxchdQkiNif00xsPrgwAfracg
From: "Kai Hu" <kai.hu@dusee.cn>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,mark
You are right ,using accessor.release(indexwriter) avoid  throwing the =
indexwriter closed exception .
Thanks.
kai

-----=D3=CA=BC=FE=D4=AD=BC=FE-----
=B7=A2=BC=FE=C8=CB: Mark Miller [mailto:markrmiller@gmail.com]=20
=B7=A2=CB=CD=CA=B1=BC=E4: 2007=C4=EA8=D4=C27=C8=D5 =D0=C7=C6=DA=B6=FE =
19:10
=CA=D5=BC=FE=C8=CB: java-user@lucene.apache.org
=D6=F7=CC=E2: Re: =B4=F0=B8=B4: =B4=F0=B8=B4: About muti-Threads in =
Lucene

You don't close the indexwriter (or readers or searchers) with the
accessor code. You release them, and the accessor code will close them
when appropriate.

- Mark

Kai Hu wrote:
> Hi,Patrick
> 	I tested use a map , get a single LuceneIndexAccessor,and get a =
cached IndexWriter ,but after do operation of update,delete,add =
documents,I should close the IndexWriter to release the Lock,it will =
throw Exceptions" this IndexWriter is closed" when other threads execute =
 add,update,delete operations.should I synchronized the IndexWriter =
object? It's better if you can  send me a demo ,thanks .
>
> kai
>
>  =20
>> Hi Kai
>>
>> We keep a synchronized map of LuceneIndexAccessor instances, one =
instance per
>> Directory.  The map is keyed on the directory path.  We then re-use
>> the accessor rather than creating a new one each time.
>>
>> Patrick
>>
>>    =20
> On 06/08/07, Kai Hu <kai.hu@dusee.cn> wrote:
>  =20
>> Thanks , Patrick,
>>
>> It is useful. But I found a problem that I use
>>
>> "new LuceneIndexAccessor(accessProvider);" when a request comes in =
B/S,the LuceneIndexAccessor.getWriter() will lose its sense,it will new =
an IndexWriter.
>>
>> public IndexWriter getWriter() throws IOException {
>>
>>        IndexWriter result;
>>
>>        synchronized (this) {//here "synchronized" will lose its sense
>>
>>            checkClosed();
>>
>>            ...
>>
>>        if (cachedWriter !=3D null) {
>>
>>               log.debug("returning cached writer");
>>
>>               result =3D cachedWriter;
>>
>>               writerUseCount++;
>>
>>            } else {
>>
>>               log.debug("opening new writer and caching it");
>>
>>               result =3D accessProvider.getWriter();// when new a =
LuceneIndexAccessor Object ,it will new an IndexWriter Object
>>
>>               cachedWriter =3D result;
>>
>>               writerUseCount =3D 1;
>>
>>            }
>>
>>     }
>>
>> }
>>
>> It will also throw a Exception "cann't obtain the Lock",should I use =
a single instance of LuceneIndexAccessor? Suppose I use a single =
instance of LuceneIndexAccessor,how to set a different Directory or =
Analyzer at one time.
>>
>>
>>
>> kai
>>
>>
>> ///////////////////////////////////////////////////////////
>>
>> ///////////////////////////////////////////////////////////
>>
>>
>>
>>    =20
>>> Hi Kai
>>>      =20
>>> We use the Lucene Index Accessor contribution:
>>>      =20
>>> =
http://www.nabble.com/Fwd%3A-Contribution%3A-LuceneIndexAccessor-t17416.h=
tml#a47049
>>>      =20
>>> Patrick
>>>      =20
>>
>> On 06/08/07, Kai Hu <kai.hu@dusee.cn> wrote:
>>
>>    =20
>>> Hi,
>>>      =20
>>>          How do you solve the problems when add,update,delete =
documents
>>>      =20
>>> in muti-threads,use synchronized ?
>>>      =20
>>
>> ---------------------------------------------------------------------
>>
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>    =20
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  =20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 08 05:32:33 2007
Return-Path: <java-user-return-29687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85313 invoked from network); 8 Aug 2007 05:32:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2007 05:32:32 -0000
Received: (qmail 92159 invoked by uid 500); 8 Aug 2007 05:32:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92120 invoked by uid 500); 8 Aug 2007 05:32:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92109 invoked by uid 99); 8 Aug 2007 05:32:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Aug 2007 22:32:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of raghuram.nadiminti@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Aug 2007 05:32:18 +0000
Received: by nf-out-0910.google.com with SMTP id d3so13196nfc
        for <java-user@lucene.apache.org>; Tue, 07 Aug 2007 22:31:57 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=UQZCM8ZZNu356CPQYVQeI+6SPkVWna/R5iGsT5khCNkr+7xMN+gsIAN+D+3hxubTrLmkPowfMuMeLhl75/f/us9xX06SeFZz7br1+dJnu7QuDuflnpS0mth49i83MixX1aeuS1bs3WS74BpwVWzJ5zUayGoYsNpYOY7deMlwReA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=QYS9BKx4Sgniu98XWt38vclXPuxjVY2gDUwEg0lSNmAkRy01rEMeAJdd+kzacrCL5hZAhmFSSUEMGDOvc0PvaVSCSwQfh92dYry1ha00kk3UqEFSyLPRQcfyNVfpVvCx1DOCHw+waZHw6ic5qvPTzQ8+eS6GFkoJiw6v9BoeR0s=
Received: by 10.78.168.1 with SMTP id q1mr377096hue.1186551117401;
        Tue, 07 Aug 2007 22:31:57 -0700 (PDT)
Received: by 10.78.163.8 with HTTP; Tue, 7 Aug 2007 22:31:57 -0700 (PDT)
Message-ID: <1e68ba6b0708072231j21f52653v2184181775bff902@mail.gmail.com>
Date: Wed, 8 Aug 2007 11:01:57 +0530
From: "Raghu Ram" <raghuram.nadiminti@gmail.com>
To: java-user@lucene.apache.org
Subject: Updating an Index
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_129557_28765985.1186551117365"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_129557_28765985.1186551117365
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,
 I am new to lucene. I would like to know if there can be any performance
issues if we update the boost of a document often. Does this scale linearly
with index size?

------=_Part_129557_28765985.1186551117365--

From java-user-return-29688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 08 08:28:46 2007
Return-Path: <java-user-return-29688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53715 invoked from network); 8 Aug 2007 08:28:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2007 08:28:44 -0000
Received: (qmail 72316 invoked by uid 500); 8 Aug 2007 08:28:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72278 invoked by uid 500); 8 Aug 2007 08:28:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72267 invoked by uid 99); 8 Aug 2007 08:28:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Aug 2007 01:28:36 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Aug 2007 08:28:23 +0000
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 21005329 for java-user@lucene.apache.org; Wed, 08 Aug 2007 10:28:06 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: Fastest way to perform 'like' searches
Date: Wed, 8 Aug 2007 10:28:06 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01ECDB75@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Fastest way to perform 'like' searches
Thread-Index: AcfZlgsuGB+Oi4nRQGyjAYCujnKtoA==
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I need to do a search that is capable to also match on substrings, for =
example:

*oo bar the qu*

should find a document that contains 'foo bar the quux' and 'foo bar the =
qux'. Now, should I index the text as UN_TOKENIZED also, and do a =
WildCardQuery on this field? Obviously, then every blobtext is added as =
a single term in lucene. Clearly, this doesn't scale at all, and =
searching becomes very slow.=20

Does anybody know a more efficient way? A PhraseQuery might get me =
somewhere, isn't? Does PhraseQuery allow wildcards in the phrase? But, =
as a phrase is analyzed according some analyzer it might strip the 'the' =
as a stopword, implying that *oo bar qu* would also match, right?

I know the requirements is a little strange, but it is part of the =
JSR-170 specification (sql 'like' or xpath 'jcr:like' which mimics the =
sql like in db)

Thanks for any pointers=20

Ard

--=20

Hippo
Oosteinde 11
1017WT Amsterdam
The Netherlands
Tel  +31 (0)20 5224466
-------------------------------------------------------------
a.schrijvers@hippo.nl / ard@apache.org / http://www.hippo.nl
--------------------------------------------------------------=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 08 09:04:44 2007
Return-Path: <java-user-return-29689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75314 invoked from network); 8 Aug 2007 09:04:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2007 09:04:43 -0000
Received: (qmail 19410 invoked by uid 500); 8 Aug 2007 09:04:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19377 invoked by uid 500); 8 Aug 2007 09:04:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19359 invoked by uid 99); 8 Aug 2007 09:04:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Aug 2007 02:04:35 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [203.122.35.129] (HELO EVS01EMS01.Evalueserve.com) (203.122.35.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Aug 2007 09:04:30 +0000
Received: from EVSMAIL.Evalueserve.com ([172.16.5.61]) by EVS01EMS01.Evalueserve.com with Microsoft SMTPSVC(6.0.3790.3959); Wed, 8 Aug 2007 14:34:02 +0530
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4073
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: configuration of lucene with jsp
Date: Wed, 8 Aug 2007 14:34:02 +0530
Message-ID: <810FE46AADEF62478AAB09DB687D824302633ABA@EVSMAIL.Evalueserve.com>
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7C01ECDB75@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: configuration of lucene with jsp
thread-index: AcfZlgsuGB+Oi4nRQGyjAYCujnKtoAABJITw
Importance: normal
Priority: normal
References: <A955EA1F8FE31749AEC8C998082F6C7C01ECDB75@hai01.hippo.local>
From: "Neha Modi" <neha.modi@evalueserve.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 08 Aug 2007 09:04:02.0635 (UTC) FILETIME=[10AE11B0:01C7D99B]
X-TM-AS-Product-Ver: SMEX-7.0.0.1345-5.0.1021-15348.003
X-TM-AS-Result: No--8.103800-0.000000-4
X-Virus-Checked: Checked by ClamAV on apache.org

Hi.

I am new to jsp and I have to integrate lucene with a jsp web
application.  I am facing problems in configuring lucene in my web
application. Can someone please provide me with the correct
configuration and installations steps to do the same?

Regards,=20


Neha Modi


=20


The information in this e-mail is the property of Evalueserve and is =
confidential and privileged. It is intended solely for the addressee. =
Access to this email by anyone else is unauthorized. If you are not the =
intended recipient, any disclosure, copying, distribution or any action =
taken in reliance on it is prohibited and will be unlawful. If you =
receive this message in error, please notify the sender immediately and =
delete all copies of this message.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 08 09:49:57 2007
Return-Path: <java-user-return-29690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90275 invoked from network); 8 Aug 2007 09:49:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2007 09:49:55 -0000
Received: (qmail 86788 invoked by uid 500); 8 Aug 2007 09:49:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86739 invoked by uid 500); 8 Aug 2007 09:49:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86728 invoked by uid 99); 8 Aug 2007 09:49:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Aug 2007 02:49:48 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [203.122.35.129] (HELO EVS01EMS01.Evalueserve.com) (203.122.35.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Aug 2007 09:49:41 +0000
Received: from EVSMAIL.Evalueserve.com ([172.16.5.61]) by EVS01EMS01.Evalueserve.com with Microsoft SMTPSVC(6.0.3790.3959); Wed, 8 Aug 2007 15:18:05 +0530
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4073
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: error while configuring lucene
Date: Wed, 8 Aug 2007 15:17:38 +0530
Message-ID: <810FE46AADEF62478AAB09DB687D824302633B06@EVSMAIL.Evalueserve.com>
In-Reply-To: <1e68ba6b0708072231j21f52653v2184181775bff902@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: error while configuring lucene
thread-index: AcfZfa2k0pdWieVUTc650WcJUc8gFgAI01/A
Importance: normal
Priority: normal
References: <1e68ba6b0708072231j21f52653v2184181775bff902@mail.gmail.com>
From: "Neha Modi" <neha.modi@evalueserve.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 08 Aug 2007 09:48:05.0529 (UTC) FILETIME=[37F7B090:01C7D9A1]
X-TM-AS-Product-Ver: SMEX-7.0.0.1345-5.0.1021-15348.003
X-TM-AS-Result: No--10.654000-0.000000-4
X-Virus-Checked: Checked by ClamAV on apache.org



=EF=BB=BF=20

Hi,

I am getting the following error in my page:

Only a type can be imported. =
org.apache.lucene.analysis.standard.StandardAnalyzer resolves to a =
package.

I am trying to configure lucene with my web application. Please help

Regards,

Neha Modi



The information in this e-mail is the property of Evalueserve and is =
confidential and privileged. It is intended solely for the addressee. =
Access to this email by anyone else is unauthorized. If you are not the =
intended recipient, any disclosure, copying, distribution or any action =
taken in reliance on it is prohibited and will be unlawful. If you =
receive this message in error, please notify the sender immediately and =
delete all copies of this message.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 08 10:02:33 2007
Return-Path: <java-user-return-29691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94450 invoked from network); 8 Aug 2007 10:02:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2007 10:02:32 -0000
Received: (qmail 3994 invoked by uid 500); 8 Aug 2007 10:02:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3948 invoked by uid 500); 8 Aug 2007 10:02:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3937 invoked by uid 99); 8 Aug 2007 10:02:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Aug 2007 03:02:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.197.35.8] (HELO rediff.co.in) (203.197.35.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Aug 2007 10:02:21 +0000
Received: (qmail 7576 invoked from network); 8 Aug 2007 15:23:18 +0530
Received: from unknown (HELO bhavin) (202.137.232.130)
  by mailserver with SMTP; 8 Aug 2007 15:23:18 +0530
Message-ID: <00a301c7d9a3$ae1c5ee0$150410ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
References: <1e68ba6b0708072231j21f52653v2184181775bff902@mail.gmail.com> <810FE46AADEF62478AAB09DB687D824302633B06@EVSMAIL.Evalueserve.com>
Subject: Re: error while configuring lucene
Date: Wed, 8 Aug 2007 15:35:42 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 8bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Hi neha,

check whether lucene jar file is there in your classpath...
You can keep jar file in WEB-INF/lib directory.

Regards.
Bhavin pandya


----- Original Message ----- 
From: "Neha Modi" <neha.modi@evalueserve.com>
To: <java-user@lucene.apache.org>
Sent: Wednesday, August 08, 2007 3:17 PM
Subject: error while configuring lucene






Hi,

I am getting the following error in my page:

Only a type can be imported. 
org.apache.lucene.analysis.standard.StandardAnalyzer resolves to a package.

I am trying to configure lucene with my web application. Please help

Regards,

Neha Modi



The information in this e-mail is the property of Evalueserve and is 
confidential and privileged. It is intended solely for the addressee. Access 
to this email by anyone else is unauthorized. If you are not the intended 
recipient, any disclosure, copying, distribution or any action taken in 
reliance on it is prohibited and will be unlawful. If you receive this 
message in error, please notify the sender immediately and delete all copies 
of this message.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 08 10:20:52 2007
Return-Path: <java-user-return-29692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2702 invoked from network); 8 Aug 2007 10:20:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2007 10:20:51 -0000
Received: (qmail 25875 invoked by uid 500); 8 Aug 2007 10:20:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25831 invoked by uid 500); 8 Aug 2007 10:20:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25800 invoked by uid 99); 8 Aug 2007 10:20:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Aug 2007 03:20:31 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Aug 2007 10:20:23 +0000
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 21013978 for java-user@lucene.apache.org; Wed, 08 Aug 2007 12:20:04 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: What is the contrib/surround/src/java purpose
Date: Wed, 8 Aug 2007 12:20:04 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01AC12DA@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: What is the contrib/surround/src/java purpose
Thread-Index: AcfZpa9qljXF9wFUS6e+WORLljnquw==
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

without having to dive into the code, I was hoping somebody could tell =
me what this contrib block does? I can't seem to find any documentation =
or relevant hits when searching for it,

Thanks in advance,

Regards Ard


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 08 10:42:13 2007
Return-Path: <java-user-return-29693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10804 invoked from network); 8 Aug 2007 10:42:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2007 10:42:11 -0000
Received: (qmail 53255 invoked by uid 500); 8 Aug 2007 10:42:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53216 invoked by uid 500); 8 Aug 2007 10:42:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53201 invoked by uid 99); 8 Aug 2007 10:42:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Aug 2007 03:42:04 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [203.197.35.8] (HELO rediff.co.in) (203.197.35.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Aug 2007 10:41:56 +0000
Received: (qmail 28921 invoked from network); 8 Aug 2007 16:02:55 +0530
Received: from unknown (HELO bhavin) (203.197.35.2)
  by mailserver with SMTP; 8 Aug 2007 16:02:55 +0530
Message-ID: <00ce01c7d9a9$370d7e00$150410ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
Subject: How to implement cut of score ?
Date: Wed, 8 Aug 2007 16:15:19 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00CB_01C7D9D7.50AB7B40"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_00CB_01C7D9D7.50AB7B40
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi guys,

I want to cut of records which has score below a threshold.

Without DocCollector.

is there any way ???

Thanks.
Bhavin pandya
------=_NextPart_000_00CB_01C7D9D7.50AB7B40--


From java-user-return-29694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 08 18:00:47 2007
Return-Path: <java-user-return-29694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27010 invoked from network); 8 Aug 2007 18:00:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2007 18:00:46 -0000
Received: (qmail 77905 invoked by uid 500); 8 Aug 2007 18:00:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77762 invoked by uid 500); 8 Aug 2007 18:00:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77750 invoked by uid 99); 8 Aug 2007 18:00:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Aug 2007 11:00:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.29.28 as permitted sender)
Received: from [80.67.29.28] (HELO smtprelay11.ispgateway.de) (80.67.29.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Aug 2007 18:00:29 +0000
Received: (qmail 3559 invoked from network); 8 Aug 2007 18:00:11 -0000
Received: from unknown (HELO p54bfd2f0.dip.t-dialin.net) ([pbs]695637@[84.191.210.240])
          (envelope-sender <lucenelist2007@danielnaber.de>)
          by smtprelay11.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 8 Aug 2007 18:00:11 -0000
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Fastest way to perform 'like' searches
Date: Wed, 8 Aug 2007 20:02:39 +0200
User-Agent: KMail/1.8.2
References: <A955EA1F8FE31749AEC8C998082F6C7C01ECDB75@hai01.hippo.local>
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7C01ECDB75@hai01.hippo.local>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200708082002.39256@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wednesday 08 August 2007 10:28, Ard Schrijvers wrote:

> Does anybody know a more efficient way? A PhraseQuery might get me
> somewhere, isn't? 

No, you need to use MultiPhraseQuery, and you will need to first epxand the 
terms with the "*" yourself (e.g. using term enumeration).

> as a phrase is analyzed according some analyzer it might strip the 'the'
> as a stopword, implying that *oo bar qu* would also match, right?

Stopwords need to be removed everywhere, i.e. also from phrases, this way 
they generally work as expected.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 08 22:17:34 2007
Return-Path: <java-user-return-29695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19160 invoked from network); 8 Aug 2007 22:17:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2007 22:17:33 -0000
Received: (qmail 60629 invoked by uid 500); 8 Aug 2007 22:17:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60593 invoked by uid 500); 8 Aug 2007 22:17:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60562 invoked by uid 99); 8 Aug 2007 22:17:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Aug 2007 15:17:22 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [68.142.236.47] (HELO n9a.bullet.mail.re3.yahoo.com) (68.142.236.47)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 08 Aug 2007 22:17:14 +0000
Received: from [68.142.230.28] by n9.bullet.re3.yahoo.com with NNFMP; 08 Aug 2007 22:16:55 -0000
Received: from [66.196.101.133] by t1.bullet.re2.yahoo.com with NNFMP; 08 Aug 2007 22:16:55 -0000
Received: from [127.0.0.1] by rrr4.mail.re1.yahoo.com with NNFMP; 08 Aug 2007 22:16:55 -0000
X-Yahoo-Newman-Property: ymail-5
X-Yahoo-Newman-Id: 426858.69155.bm@rrr4.mail.re1.yahoo.com
Received: (qmail 71409 invoked by uid 60001); 8 Aug 2007 22:16:54 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=J+6zV0Kf/jM7aZIcyJb4n2Cfl95BzG8Vrc7EnaJdImLsmMvqlxznpzC+qdvlBFq8VBfPvWB0R8JjgZBiCCm9eG1NcEZcjw6uT+zi7nrYwRXOJNB0Fc6Z95s3u56f957h+mHPnvjA8lwbosQmUNYvPf9XkzM5IXMHhJbE0w8vWEA=;
X-YMail-OSG: 1WihfzMVM1lCc8R_XjNSRKhwajHe.HwPmF5aHi1rBogh6S5g_aFgs3ADTwnA844U_UkWUY1qfg2BqcRxFenFvMdrIj6W0SDU9sc-
Received: from [198.4.83.52] by web45415.mail.sp1.yahoo.com via HTTP; Wed, 08 Aug 2007 15:16:54 PDT
Date: Wed, 8 Aug 2007 15:16:54 -0700 (PDT)
From: Kevin Chen <chen_k80@yahoo.com>
Subject: term location in doc
To: java-user@lucene.apache.org
In-Reply-To: <200708082002.39256@danielnaber.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1500803440-1186611414=:67744"
Content-Transfer-Encoding: 8bit
Message-ID: <310962.67744.qm@web45415.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1500803440-1186611414=:67744
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

I can see that termpositions gives an enum with all positions of term in document. I want to do the opposite. Given a position , can I query the document for term at that position in document?



       
---------------------------------
Ready for the edge of your seat? Check out tonight's top picks on Yahoo! TV. 
--0-1500803440-1186611414=:67744--


From java-user-return-29696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 08 22:24:49 2007
Return-Path: <java-user-return-29696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21398 invoked from network); 8 Aug 2007 22:24:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Aug 2007 22:24:48 -0000
Received: (qmail 67170 invoked by uid 500); 8 Aug 2007 22:24:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67129 invoked by uid 500); 8 Aug 2007 22:24:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67118 invoked by uid 99); 8 Aug 2007 22:24:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Aug 2007 15:24:41 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a1.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Aug 2007 22:24:33 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a1.g.dreamhost.com (Postfix) with ESMTP id B5253FEA4D
	for <java-user@lucene.apache.org>; Wed,  8 Aug 2007 15:24:13 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <310962.67744.qm@web45415.mail.sp1.yahoo.com>
References: <310962.67744.qm@web45415.mail.sp1.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9BE2D1B2-728F-4FD9-8127-87FBC35A5545@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: term location in doc
Date: Wed, 8 Aug 2007 18:24:11 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

If you like term vectors, using the latest Trunk version of Lucene  
and are willing to be a guinea pig.  :-)  See https:// 
issues.apache.org/jira/browse/LUCENE-975

Of course, you can always reanalyze the document as well and keep  
track of the positions as you go.  Maybe take a look at how contrib/ 
highlighter does things.

Or maybe I am misunderstanding things...

-Grant

On Aug 8, 2007, at 6:16 PM, Kevin Chen wrote:

> I can see that termpositions gives an enum with all positions of  
> term in document. I want to do the opposite. Given a position , can  
> I query the document for term at that position in document?
>
>
>
>
> ---------------------------------
> Ready for the edge of your seat? Check out tonight's top picks on  
> Yahoo! TV.

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 09 07:33:38 2007
Return-Path: <java-user-return-29697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23328 invoked from network); 9 Aug 2007 07:33:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Aug 2007 07:33:37 -0000
Received: (qmail 33045 invoked by uid 500); 9 Aug 2007 07:33:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32999 invoked by uid 500); 9 Aug 2007 07:33:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32988 invoked by uid 99); 9 Aug 2007 07:33:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Aug 2007 00:33:30 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Aug 2007 07:33:22 +0000
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 21083212 for java-user@lucene.apache.org; Thu, 09 Aug 2007 09:33:02 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Fastest way to perform 'like' searches
Date: Thu, 9 Aug 2007 09:33:01 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01ECDB7C@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Fastest way to perform 'like' searches
Thread-Index: AcfZ5gzUiwsVY5S6TuSOw5r+9Iy9DgAcO2zA
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Daniel,=20

I understand how it can be done. The only things that bothers me is that =
expanding the "*" might result in many phrases, and that in turn might =
imply a performance hit. I'll see what the impact is,

Regards Ard

>=20
> On Wednesday 08 August 2007 10:28, Ard Schrijvers wrote:
>=20
> > Does anybody know a more efficient way? A PhraseQuery might get me
> > somewhere, isn't?=20
>=20
> No, you need to use MultiPhraseQuery, and you will need to=20
> first epxand the=20
> terms with the "*" yourself (e.g. using term enumeration).
>=20
> > as a phrase is analyzed according some analyzer it might=20
> strip the 'the'
> > as a stopword, implying that *oo bar qu* would also match, right?
>=20
> Stopwords need to be removed everywhere, i.e. also from=20
> phrases, this way=20
> they generally work as expected.
>=20
> Regards
>  Daniel
>=20
> --=20
> http://www.danielnaber.de
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 09 07:35:32 2007
Return-Path: <java-user-return-29698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23862 invoked from network); 9 Aug 2007 07:35:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Aug 2007 07:35:30 -0000
Received: (qmail 39365 invoked by uid 500); 9 Aug 2007 07:35:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39324 invoked by uid 500); 9 Aug 2007 07:35:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39312 invoked by uid 99); 9 Aug 2007 07:35:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Aug 2007 00:35:22 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of akanksha.baid@gmail.com designates 209.85.128.186 as permitted sender)
Received: from [209.85.128.186] (HELO fk-out-0910.google.com) (209.85.128.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Aug 2007 07:35:18 +0000
Received: by fk-out-0910.google.com with SMTP id z23so341281fkz
        for <java-user@lucene.apache.org>; Thu, 09 Aug 2007 00:34:56 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=MBfcHLqbP+Q+16bALJY+n658ZvTWmJW/cxC/1C3L9OUNR3kD9mVG9l7keo7GaC6y+TQEwS+LETboj0nHm58IGGtA6RnZjMoI9pDofVuG5FRTMa3DDkEMCMN9UW24POqi3Ar3xrAfdJ8IP5OC+yZQzdPnJB3KcRDJwHkRdVhWwlI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=nS4dPxBilnwvMRBouV1zYrujsLa0WWhR8IrSU05ToJll3jCBFeRqxKhJ6ZREtfkWXX/WUdfK2qU+yNe+LFK7V7p3Io4kzRma1Z0LXygXbR2Se5hNc8Z+XwgOxGYShuu65yoU1O95zvAiCtSkTKMPYj7vVPoaxi0mEnyVN18YM00=
Received: by 10.82.158.12 with SMTP id g12mr2747469bue.1186644895721;
        Thu, 09 Aug 2007 00:34:55 -0700 (PDT)
Received: by 10.82.157.20 with HTTP; Thu, 9 Aug 2007 00:34:55 -0700 (PDT)
Message-ID: <2b98f9010708090034m1bf38ba9u9951e82414d1388c@mail.gmail.com>
Date: Thu, 9 Aug 2007 00:34:55 -0700
From: "Akanksha Baid" <akanksha.baid@gmail.com>
To: java-user@lucene.apache.org
Subject: frequent phrases
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2793_19322886.1186644895691"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2793_19322886.1186644895691
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I was wondering if there is a "search based" method to find the top-k
frequent phrases in a set of documents.( I do not have a particular phrase
in mind so PhraseQuery can probably be ruled out).
I have implemented something that works using termvectors and termpositions
but the performance is not great so far since I am basically iterating
multiple times and hacking my way around. I was wondering if an API exists
for finding frequent phrases and/or if someone could point me to some code
for the same.

Thanks.

------=_Part_2793_19322886.1186644895691--

From java-user-return-29699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 09 10:21:52 2007
Return-Path: <java-user-return-29699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56847 invoked from network); 9 Aug 2007 10:21:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Aug 2007 10:21:52 -0000
Received: (qmail 25954 invoked by uid 500); 9 Aug 2007 10:21:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24962 invoked by uid 500); 9 Aug 2007 10:21:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24951 invoked by uid 99); 9 Aug 2007 10:21:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Aug 2007 03:21:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 209.85.134.189 as permitted sender)
Received: from [209.85.134.189] (HELO mu-out-0910.google.com) (209.85.134.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Aug 2007 10:21:39 +0000
Received: by mu-out-0910.google.com with SMTP id g7so457805muf
        for <java-user@lucene.apache.org>; Thu, 09 Aug 2007 03:21:17 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=G+JCJhSzmoeUFB+VZrYcf/t2saRy9Lpv9MrS6lgxWtaYOwI+fWKVY1sYa1JitZ2ARbHCnbTJyQHNq8GIEDMBTgQiJN6VNHIqR7NIoJxKGvVR34CShFZ3pUfmxw10UqEirgvGoszm9suc4iAI1DBxTXV/OVXtIuoCCA+XJJVoeK4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=QzJHZEbnuvS0/0B8E2L7I66vE+5DZtRnLD6VhJd48Yh/YYfTtQ6yumXhSVR0XW16/w/Zawh2YDR45rvDOMWEjKPvnH2uzP96ITWTDKjCfJaO/VZDVKGCAflSnfyDEcT8TOcM2Qr+Y5r68c6N4cztIf0DRYcMDWQgaJiRhB2d67w=
Received: by 10.86.68.16 with SMTP id q16mr1380016fga.1186654876694;
        Thu, 09 Aug 2007 03:21:16 -0700 (PDT)
Received: from ?192.168.2.101? ( [83.249.118.113])
        by mx.google.com with ESMTPS id b17sm3043064fka.2007.08.09.03.21.15
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 09 Aug 2007 03:21:15 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <2b98f9010708090034m1bf38ba9u9951e82414d1388c@mail.gmail.com>
References: <2b98f9010708090034m1bf38ba9u9951e82414d1388c@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A6B074CC-85B6-45E0-B0C4-906F8AB5872B@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: frequent phrases
Date: Thu, 9 Aug 2007 12:16:35 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


9 aug 2007 kl. 09.34 skrev Akanksha Baid:

> I was wondering if there is a "search based" method to find the top-k
> frequent phrases in a set of documents.( I do not have a particular  
> phrase
> in mind so PhraseQuery can probably be ruled out).
> I have implemented something that works using termvectors and  
> termpositions
> but the performance is not great so far since I am basically iterating
> multiple times and hacking my way around. I was wondering if an API  
> exists
> for finding frequent phrases and/or if someone could point me to  
> some code
> for the same.

I think this is the closest thing available in the issue tracker:

https://issues.apache.org/jira/browse/LUCENE-725

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 09 10:30:53 2007
Return-Path: <java-user-return-29700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59099 invoked from network); 9 Aug 2007 10:30:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Aug 2007 10:30:51 -0000
Received: (qmail 34235 invoked by uid 500); 9 Aug 2007 10:30:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34194 invoked by uid 500); 9 Aug 2007 10:30:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34181 invoked by uid 99); 9 Aug 2007 10:30:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Aug 2007 03:30:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 209.85.134.185 as permitted sender)
Received: from [209.85.134.185] (HELO mu-out-0910.google.com) (209.85.134.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Aug 2007 10:30:39 +0000
Received: by mu-out-0910.google.com with SMTP id g7so459843muf
        for <java-user@lucene.apache.org>; Thu, 09 Aug 2007 03:30:18 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=KnGVFvvxWAKMLHaqvXMm/z461CRIKekKwRvH9QdsKeHO4sOfE2jy/QyIUn3dHE7ht2X8pf2/gkg1+BwaZ7W/Amy1sHHxDL7qNfBvmART+Zd0YH1bEoxM+9QZuqmIbQ6xrhrFP30x9kZolxr0ZW5nCBWs5Bn92YOElK4O72FonAo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=HDC1nqc/iAC8Ko7IuzLCiO2dPAb+mtoW7yGhjtDnDyH7VtJNxazAItmAqmUjsWWk2igcmPjk0iXUfaSrBcpxiBTHgL8lejdHoSwvgcR5UA2SWEpbL7N3te0/cT8syWrgOvAIzJ/SVdSmlNd+kyc5G2ZcBWBJeI1yYWtrFiRMeqI=
Received: by 10.86.60.7 with SMTP id i7mr1434656fga.1186655417801;
        Thu, 09 Aug 2007 03:30:17 -0700 (PDT)
Received: from ?192.168.2.101? ( [83.249.118.113])
        by mx.google.com with ESMTPS id 13sm3074942fks.2007.08.09.03.30.16
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 09 Aug 2007 03:30:16 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <2b98f9010708090034m1bf38ba9u9951e82414d1388c@mail.gmail.com>
References: <2b98f9010708090034m1bf38ba9u9951e82414d1388c@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9BA837EF-2953-417E-91DD-AFA35D35DE42@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: frequent phrases
Date: Thu, 9 Aug 2007 12:25:36 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


9 aug 2007 kl. 09.34 skrev Akanksha Baid:

> I was wondering if there is a "search based" method to find the top-k
> frequent phrases in a set of documents.( I do not have a particular  
> phrase
> in mind so PhraseQuery can probably be ruled out).
> I have implemented something that works using termvectors and  
> termpositions
> but the performance is not great so far since I am basically iterating
> multiple times and hacking my way around. I was wondering if an API  
> exists
> for finding frequent phrases and/or if someone could point me to  
> some code
> for the same.

By the way, if you explain what you aim to use it for, then you might  
get
more elaborate responses.


-- 
karl



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 09 11:53:31 2007
Return-Path: <java-user-return-29701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94236 invoked from network); 9 Aug 2007 11:53:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Aug 2007 11:53:30 -0000
Received: (qmail 34767 invoked by uid 500); 9 Aug 2007 11:53:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34725 invoked by uid 500); 9 Aug 2007 11:53:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34714 invoked by uid 99); 9 Aug 2007 11:53:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Aug 2007 04:53:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.87] (HELO web26013.mail.ukl.yahoo.com) (217.12.10.87)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 09 Aug 2007 11:53:18 +0000
Received: (qmail 63924 invoked by uid 60001); 9 Aug 2007 11:52:57 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=YIwPX48knA6OiAFUxhvtOJ4jXg/S519jBl9JgBV/Q4Lwjj8tavfdjdjtkUvIlIhb+jOLKk+161llYX673EDaULOX1NGfUeiUsRNzaCq3NAJqvy+OnXydoPqUTvmsF3B/Z+gJ8AvhSMrH+0vND+if5Gc7dhOyIxTJwQeIaAn9ivU=;
X-YMail-OSG: Mg92aJUVM1nzRUXI1Qwt5WBlN38bssUVsage92PWHPKONd11pG8qwfwaF_HUYer3BwEweudHl9mxoAjb_tnOFO5ekkZwxm9hySNbO_HFQoQO6HXGyLMSTMjahTw-
Received: from [193.36.230.96] by web26013.mail.ukl.yahoo.com via HTTP; Thu, 09 Aug 2007 11:52:57 GMT
X-Mailer: YahooMailRC/651.48 YahooMailWebService/0.7.119
Date: Thu, 9 Aug 2007 11:52:57 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: frequent phrases
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <873215.63141.qm@web26013.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

The "CollocationFinder" code attached to this may be more suited....=0Ahttp=
://issues.apache.org/jira/browse/LUCENE-474=0A=0AAgain, not exactly sure of=
 your use case.=0A=0ACheers=0AMark=0A=0A----- Original Message ----=0AFrom:=
 karl wettin <karl.wettin@gmail.com>=0ATo: java-user@lucene.apache.org=0ASe=
nt: Thursday, 9 August, 2007 11:16:35 AM=0ASubject: Re: frequent phrases=0A=
=0A=0A9 aug 2007 kl. 09.34 skrev Akanksha Baid:=0A=0A> I was wondering if t=
here is a "search based" method to find the top-k=0A> frequent phrases in a=
 set of documents.( I do not have a particular  =0A> phrase=0A> in mind so =
PhraseQuery can probably be ruled out).=0A> I have implemented something th=
at works using termvectors and  =0A> termpositions=0A> but the performance =
is not great so far since I am basically iterating=0A> multiple times and h=
acking my way around. I was wondering if an API  =0A> exists=0A> for findin=
g frequent phrases and/or if someone could point me to  =0A> some code=0A> =
for the same.=0A=0AI think this is the closest thing available in the issue=
 tracker:=0A=0Ahttps://issues.apache.org/jira/browse/LUCENE-725=0A=0A-- =0A=
karl=0A=0A-----------------------------------------------------------------=
----=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFo=
r additional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A=
=0A=0A=0A      ___________________________________________________________ =
=0AYahoo! Mail is the world's favourite email. Don't settle for less, sign =
up for=0Ayour free account today http://uk.rd.yahoo.com/evt=3D44106/*http:/=
/uk.docs.yahoo.com/mail/winter07.html 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 09 14:37:33 2007
Return-Path: <java-user-return-29702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73153 invoked from network); 9 Aug 2007 14:37:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Aug 2007 14:37:31 -0000
Received: (qmail 26137 invoked by uid 500); 9 Aug 2007 14:37:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26111 invoked by uid 500); 9 Aug 2007 14:37:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25897 invoked by uid 99); 9 Aug 2007 14:37:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Aug 2007 07:37:14 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gresh@us.ibm.com designates 32.97.182.144 as permitted sender)
Received: from [32.97.182.144] (HELO e4.ny.us.ibm.com) (32.97.182.144)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Aug 2007 14:37:07 +0000
Received: from d01relay04.pok.ibm.com (d01relay04.pok.ibm.com [9.56.227.236])
	by e4.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id l79EajD7016361
	for <java-user@lucene.apache.org>; Thu, 9 Aug 2007 10:36:45 -0400
Received: from d01av04.pok.ibm.com (d01av04.pok.ibm.com [9.56.224.64])
	by d01relay04.pok.ibm.com (8.13.8/8.13.8/NCO v8.4) with ESMTP id l79Eai0P530458
	for <java-user@lucene.apache.org>; Thu, 9 Aug 2007 10:36:44 -0400
Received: from d01av04.pok.ibm.com (loopback [127.0.0.1])
	by d01av04.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l79Eaiv4004356
	for <java-user@lucene.apache.org>; Thu, 9 Aug 2007 10:36:44 -0400
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av04.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l79EafFn004136
	for <java-user@lucene.apache.org>; Thu, 9 Aug 2007 10:36:41 -0400
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: special handling of certain terms with embedded periods
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OFD9715FF9.69BAD308-ON85257332.004F3806-85257332.00504372@us.ibm.com>
Date: Thu, 9 Aug 2007 10:36:44 -0400
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Build V80_M5_05202007|May 20, 2007) at
 08/09/2007 10:36:44,
	Serialize complete at 08/09/2007 10:36:44
Content-Type: multipart/alternative; boundary="=_alternative 005042AC85257332_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 005042AC85257332_=
Content-Type: text/plain; charset="US-ASCII"

Is there a good way to handle the following scenario:

I have certain terms with embedded periods for which I want to leave them 
intact (not split at the periods). For 
example in my application a particular skill might be SAP.FIN (SAP 
financial), and it should not be split into
SAP and FIN. Is there a way to specify a list of terms such as these which 
should not be split? I am 
currently using my own "SynonymAnalyzer" for which the token stream looks 
like below
 (pretty standard I think) and where engine is a custom SynonymEngine 
where I provide the synonyms. 
Is there a typical way to handle this situation?

public TokenStream tokenStream(String fieldName, Reader reader) {
 
TokenStream result = new SnowballFilter(
   new SynonymFilter(
        new StopFilter(
           new LowerCaseFilter(
             new StandardFilter(
               new StandardTokenizer(reader))),
                  StandardAnalyzer.STOP_WORDS),
          engine),"English"
);
return result;
}

Donna L. Gresh
Services Research, Mathematical Sciences Department
IBM T.J. Watson Research Center
(914) 945-2472
http://www.research.ibm.com/people/g/donnagresh
gresh@us.ibm.com

--=_alternative 005042AC85257332_=--

From java-user-return-29703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 09 15:01:32 2007
Return-Path: <java-user-return-29703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81727 invoked from network); 9 Aug 2007 15:01:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Aug 2007 15:01:31 -0000
Received: (qmail 65698 invoked by uid 500); 9 Aug 2007 15:01:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65636 invoked by uid 500); 9 Aug 2007 15:01:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65615 invoked by uid 99); 9 Aug 2007 15:01:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Aug 2007 08:01:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Aug 2007 15:01:18 +0000
Received: by nf-out-0910.google.com with SMTP id d3so143385nfc
        for <java-user@lucene.apache.org>; Thu, 09 Aug 2007 08:00:56 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=bUJP31SMS6b9yOaOSLzYvN3d9w4g61J6EcqFvmZUcNfe/UxdxuUU6m79iKmoHoxTVN1hOULpL3lo0CwPw7XaicGECH5P+v3I8XSJ7XXPeUDvPhR/b28x7axuyRBf8gZNnPqZxE/xh2sneAYWypB0xBiRApkVnfjCj9ADJTQ+MQI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=gP1CQq70t2dVQTh4F7OYONUwyqiJkjKf2DNbfuDHAky2yFI91uN6KyzhseGuen5sbiQS+yyeRPwfnEWgC3CW2XL+Hbyx/YTcyRxtR3oEhAjPJBlgnPIuuyoj6j2QHxceqKtqkpOVos2r0QSNjIVOQS5WA5/85iwgB3cQulABq2U=
Received: by 10.86.84.5 with SMTP id h5mr1223180fgb.1186671656475;
        Thu, 09 Aug 2007 08:00:56 -0700 (PDT)
Received: from ?192.168.2.101? ( [83.249.118.113])
        by mx.google.com with ESMTPS id m1sm3558884fke.2007.08.09.08.00.54
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 09 Aug 2007 08:00:55 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <OFD9715FF9.69BAD308-ON85257332.004F3806-85257332.00504372@us.ibm.com>
References: <OFD9715FF9.69BAD308-ON85257332.004F3806-85257332.00504372@us.ibm.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <162487FA-6BA8-44BE-8A38-6196CB330A3E@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: special handling of certain terms with embedded periods
Date: Thu, 9 Aug 2007 16:56:14 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


9 aug 2007 kl. 16.36 skrev Donna L Gresh:

> Is there a good way to handle the following scenario:
>
> I have certain terms with embedded periods for which I want to  
> leave them
> intact (not split at the periods). For example in my application a
> particular skill might be SAP.FIN (SAP financial), and it should  
> not be
> split into SAP and FIN. Is there a way to specify a list of terms  
> such as
> these which should not be split?

Updating the standard analyzer BNF to allow terms with punctuation is  
not a
big deal. If there is a list of terms you want to allow, you would  
handle
them in a TokenFilter. See StandadardTokenizer and StandardFilter.

You might save a couple of clock ticks by implementing a BNF rule rather
than a filter though.


-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 09 16:09:51 2007
Return-Path: <java-user-return-29704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99645 invoked from network); 9 Aug 2007 16:09:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Aug 2007 16:09:49 -0000
Received: (qmail 31910 invoked by uid 500); 9 Aug 2007 16:09:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31877 invoked by uid 500); 9 Aug 2007 16:09:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31866 invoked by uid 99); 9 Aug 2007 16:09:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Aug 2007 09:09:41 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.188 as permitted sender)
Received: from [209.85.134.188] (HELO mu-out-0910.google.com) (209.85.134.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Aug 2007 16:09:37 +0000
Received: by mu-out-0910.google.com with SMTP id g7so544981muf
        for <java-user@lucene.apache.org>; Thu, 09 Aug 2007 09:09:16 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jnjZ8RlYIiPe10MinEDyvbUu8ppTGO9jy+rG99Spy1jCSIut/0r64ilrsLJyppH0col2k/ZLLm+DXylOJ/EzojL08haZwUmAJwFbZR0Xogvi09kV0tLFUzn+2gWawujOzQ/qi4d+Ket6t25ZaKtkYRXXc7MopKuxfd5CADY3Wuo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=H9FvBfxzpykf5hpfur5JLepsLjrwh4YNBLJbAsfsbUsp0kapq7rItPbxlXtr0FBx+OhbfQFwSyfQMCBLDjsmcfRiNHi5OPaUB3hF+BobTydg41dr/L3KRzWVa/A7RKbv3DDAENFKJDsi8fbS2Kw+I0LWy6ddCaARkN+WOkP+ixU=
Received: by 10.82.175.17 with SMTP id x17mr2645418bue.1186675755417;
        Thu, 09 Aug 2007 09:09:15 -0700 (PDT)
Received: by 10.82.190.14 with HTTP; Thu, 9 Aug 2007 09:09:15 -0700 (PDT)
Message-ID: <359a92830708090909v21584066w66bad7abed442ad@mail.gmail.com>
Date: Thu, 9 Aug 2007 12:09:15 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: special handling of certain terms with embedded periods
In-Reply-To: <OFD9715FF9.69BAD308-ON85257332.004F3806-85257332.00504372@us.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5647_20431606.1186675755391"
References: <OFD9715FF9.69BAD308-ON85257332.004F3806-85257332.00504372@us.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5647_20431606.1186675755391
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Some possibilities...
> write your own tokenizer and/or filter. If you alter your BNF,
     you'll have to maintain it in later releases.
> use some simple transformations for the input *before* tokenizing.
> there's been some discussion that StandardAnalyzer (and, I assume,
   the Standard* beasts) are slower than the other analyzers, so you
   may be better off eschewing them.

Best
Erick


On 8/9/07, Donna L Gresh <gresh@us.ibm.com> wrote:
>
> Is there a good way to handle the following scenario:
>
> I have certain terms with embedded periods for which I want to leave them
> intact (not split at the periods). For
> example in my application a particular skill might be SAP.FIN (SAP
> financial), and it should not be split into
> SAP and FIN. Is there a way to specify a list of terms such as these which
> should not be split? I am
> currently using my own "SynonymAnalyzer" for which the token stream looks
> like below
> (pretty standard I think) and where engine is a custom SynonymEngine
> where I provide the synonyms.
> Is there a typical way to handle this situation?
>
> public TokenStream tokenStream(String fieldName, Reader reader) {
>
> TokenStream result = new SnowballFilter(
>    new SynonymFilter(
>         new StopFilter(
>            new LowerCaseFilter(
>              new StandardFilter(
>                new StandardTokenizer(reader))),
>                   StandardAnalyzer.STOP_WORDS),
>           engine),"English"
> );
> return result;
> }
>
> Donna L. Gresh
> Services Research, Mathematical Sciences Department
> IBM T.J. Watson Research Center
> (914) 945-2472
> http://www.research.ibm.com/people/g/donnagresh
> gresh@us.ibm.com
>

------=_Part_5647_20431606.1186675755391--

From java-user-return-29705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 09 16:54:30 2007
Return-Path: <java-user-return-29705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55970 invoked from network); 9 Aug 2007 16:54:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Aug 2007 16:54:29 -0000
Received: (qmail 46536 invoked by uid 500); 9 Aug 2007 16:54:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46498 invoked by uid 500); 9 Aug 2007 16:54:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46487 invoked by uid 99); 9 Aug 2007 16:54:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Aug 2007 09:54:21 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gresh@us.ibm.com designates 32.97.182.143 as permitted sender)
Received: from [32.97.182.143] (HELO e3.ny.us.ibm.com) (32.97.182.143)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Aug 2007 16:54:14 +0000
Received: from d01relay02.pok.ibm.com (d01relay02.pok.ibm.com [9.56.227.234])
	by e3.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id l79Fn7ql004278
	for <java-user@lucene.apache.org>; Thu, 9 Aug 2007 11:49:08 -0400
Received: from d01av02.pok.ibm.com (d01av02.pok.ibm.com [9.56.224.216])
	by d01relay02.pok.ibm.com (8.13.8/8.13.8/NCO v8.4) with ESMTP id l79Grr0R478136
	for <java-user@lucene.apache.org>; Thu, 9 Aug 2007 12:53:53 -0400
Received: from d01av02.pok.ibm.com (loopback [127.0.0.1])
	by d01av02.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l79GrrCi018758
	for <java-user@lucene.apache.org>; Thu, 9 Aug 2007 12:53:53 -0400
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av02.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l79Grqsv018753
	for <java-user@lucene.apache.org>; Thu, 9 Aug 2007 12:53:52 -0400
In-Reply-To: <359a92830708090909v21584066w66bad7abed442ad@mail.gmail.com>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Re: special handling of certain terms with embedded periods
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OF2A69B0BA.EC092253-ON85257332.005A0D55-85257332.005CD252@us.ibm.com>
Date: Thu, 9 Aug 2007 12:53:54 -0400
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Build V80_M5_05202007|May 20, 2007) at
 08/09/2007 12:53:56,
	Serialize complete at 08/09/2007 12:53:56
Content-Type: multipart/alternative; boundary="=_alternative 005CD1EF85257332_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 005CD1EF85257332_=
Content-Type: text/plain; charset="US-ASCII"

thanks.
In this case it actually looks like I was trying to solve a problem
that doesn't exist (not an unusual occurrence in my experience)
since the StandardAnalyzer does not appear to split the terms
if the period has no white space following. I was a bit misled by
the additional complication that I am using the MoreLikeThis
class to construct the query, and it seemed to be dropping the
SAP.FIN term, apparently because it actually never appears in
my index to be searched, only in my input queries. In fact I may
decide to do some acronym expansion of this to allow it to
match things that *do* appear in my index.

But your point about the StandardAnalyzer being slow is 
well-taken, and I'll keep that in mind. Also, the straighforward
substitution before indexing and searching is a reasonable
approach to keep in mind.

Thanks-
Donna

Donna L. Gresh
Services Research, Mathematical Sciences Department
IBM T.J. Watson Research Center
(914) 945-2472
http://www.research.ibm.com/people/g/donnagresh
gresh@us.ibm.com




"Erick Erickson" <erickerickson@gmail.com> 
08/09/2007 12:09 PM
Please respond to
java-user@lucene.apache.org


To
java-user@lucene.apache.org
cc

Subject
Re: special handling of certain terms with embedded periods






Some possibilities...
> write your own tokenizer and/or filter. If you alter your BNF,
     you'll have to maintain it in later releases.
> use some simple transformations for the input *before* tokenizing.
> there's been some discussion that StandardAnalyzer (and, I assume,
   the Standard* beasts) are slower than the other analyzers, so you
   may be better off eschewing them.

Best
Erick


On 8/9/07, Donna L Gresh <gresh@us.ibm.com> wrote:
>
> Is there a good way to handle the following scenario:
>
> I have certain terms with embedded periods for which I want to leave 
them
> intact (not split at the periods). For
> example in my application a particular skill might be SAP.FIN (SAP
> financial), and it should not be split into
> SAP and FIN. Is there a way to specify a list of terms such as these 
which
> should not be split? I am
> currently using my own "SynonymAnalyzer" for which the token stream 
looks
> like below
> (pretty standard I think) and where engine is a custom SynonymEngine
> where I provide the synonyms.
> Is there a typical way to handle this situation?
>
> public TokenStream tokenStream(String fieldName, Reader reader) {
>
> TokenStream result = new SnowballFilter(
>    new SynonymFilter(
>         new StopFilter(
>            new LowerCaseFilter(
>              new StandardFilter(
>                new StandardTokenizer(reader))),
>                   StandardAnalyzer.STOP_WORDS),
>           engine),"English"
> );
> return result;
> }
>
> Donna L. Gresh
> Services Research, Mathematical Sciences Department
> IBM T.J. Watson Research Center
> (914) 945-2472
> http://www.research.ibm.com/people/g/donnagresh
> gresh@us.ibm.com
>


--=_alternative 005CD1EF85257332_=--

From java-user-return-29706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 09 17:29:35 2007
Return-Path: <java-user-return-29706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79643 invoked from network); 9 Aug 2007 17:29:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Aug 2007 17:29:34 -0000
Received: (qmail 9940 invoked by uid 500); 9 Aug 2007 17:29:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9909 invoked by uid 500); 9 Aug 2007 17:29:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9898 invoked by uid 99); 9 Aug 2007 17:29:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Aug 2007 10:29:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Aug 2007 17:29:22 +0000
Received: by py-out-1112.google.com with SMTP id f31so1646890pyh
        for <java-user@lucene.apache.org>; Thu, 09 Aug 2007 10:29:01 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=cfCrrnwy+MOMnoupl/yTTcNpr5kW5QbtbtGnoothy40vbuutlsOBGQZ6DWqYyF12zyCfu40vX176AXCmeEfRq8b15jp0jDcJvrKDg9dhZMjz+KzSxZ+SlJ6f16kBrtZsYFN/eMOetlSk32sy6LmJRT0CIR7En9KAgEWIP/EINi8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=RLpKJNvlblKUxVZes2FzV2eFmgVGRGjAl+YpKztwdR1SXyWynIdFiQnPn7C/rgT5/KRzssU89/tFC+hYDt4f8WTCyHvRyzvvpkJqnfGb2p7n32U2K7eurDBjYN4R7t3tLbzlyjUMlugH1WL+OB4BZqfZhet4G91cgS3NmteT838=
Received: by 10.90.98.3 with SMTP id v3mr2200985agb.1186680540902;
        Thu, 09 Aug 2007 10:29:00 -0700 (PDT)
Received: from ?192.168.1.105? ( [216.66.114.204])
        by mx.google.com with ESMTPS id 38sm3174746agd.2007.08.09.10.28.59
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 09 Aug 2007 10:29:00 -0700 (PDT)
Message-ID: <46BB4EC4.4010704@gmail.com>
Date: Thu, 09 Aug 2007 13:28:36 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: special handling of certain terms with embedded periods
References: <OF2A69B0BA.EC092253-ON85257332.005A0D55-85257332.005CD252@us.ibm.com>
In-Reply-To: <OF2A69B0BA.EC092253-ON85257332.005A0D55-85257332.005CD252@us.ibm.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Donna L Gresh wrote:
>
> But your point about the StandardAnalyzer being slow is 
> well-taken, and I'll keep that in mind. 
A new StandardAnalyzer that is 6x faster was recently committed on the 
trunk. Should be in next release.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 09 18:26:59 2007
Return-Path: <java-user-return-29707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14794 invoked from network); 9 Aug 2007 18:26:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Aug 2007 18:26:57 -0000
Received: (qmail 15901 invoked by uid 500); 9 Aug 2007 18:26:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15857 invoked by uid 500); 9 Aug 2007 18:26:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15846 invoked by uid 99); 9 Aug 2007 18:26:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Aug 2007 11:26:50 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.26] (HELO smtp-vbr6.xs4all.nl) (194.109.24.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Aug 2007 18:26:45 +0000
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr6.xs4all.nl (8.13.8/8.13.8) with ESMTP id l79IQMTX067972
	for <java-user@lucene.apache.org>; Thu, 9 Aug 2007 20:26:23 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: What is the contrib/surround/src/java purpose
Date: Thu, 9 Aug 2007 20:26:16 +0200
User-Agent: KMail/1.8.2
References: <A955EA1F8FE31749AEC8C998082F6C7C01AC12DA@hai01.hippo.local>
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7C01AC12DA@hai01.hippo.local>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200708092026.17959.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Ard,

It's the source code of an alternative query language on top of Lucene 
that allows boolean queries and span (distance) queries.
The minimal documentation is in the Java API documentation
on the lucene java site under contrib: Surround Parser, and in 
the surround.txt file here:
http://svn.apache.org/viewvc/lucene/java/trunk/contrib/surround/surround.txt?view=log

Groeten,
Paul Elschot


On Wednesday 08 August 2007 12:20, Ard Schrijvers wrote:
> Hello,
> 
> without having to dive into the code, I was hoping somebody could tell me 
what this contrib block does? I can't seem to find any documentation or 
relevant hits when searching for it,
> 
> Thanks in advance,
> 
> Regards Ard
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 09 20:11:47 2007
Return-Path: <java-user-return-29708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47966 invoked from network); 9 Aug 2007 20:11:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Aug 2007 20:11:45 -0000
Received: (qmail 25978 invoked by uid 500); 9 Aug 2007 20:11:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25680 invoked by uid 500); 9 Aug 2007 20:11:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 20325 invoked by uid 99); 9 Aug 2007 20:09:06 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
X-Virus-Scanned: amavisd-new at 
X-Spam-Score: -4.398
X-Spam-Level: 
Mime-Version: 1.0 (Apple Message framework v752.3)
To: java-user@lucene.apache.org
Message-Id: <3D51E833-F974-4B7F-87B4-57A088EC5C65@quimbik.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-1-77007693
From: Jami Kapla <jkapla@quimbik.com>
Subject: Help Regarding Fuzzy Scoring
Date: Thu, 9 Aug 2007 13:08:41 -0700
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-4.398 tagged_above=-10 required=6.6
	tests=[ALL_TRUSTED=-1.8, BAYES_00=-2.599, HTML_MESSAGE=0.001]

--Apple-Mail-1-77007693
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed

Hello,

I have been using Lucene recently (newbie) and reading about scoring.
However, have a result that of course still does not make sense to me.

I have an index created from a single field (entree) in one table in  
my DB.
I Index it with the StandardAnalyzer.

I also Query it with the StandardAnalyzer as simple as possible like:

             QueryParser qp = new QueryParser("title", new  
StandardAnalyzer());
             org.apache.lucene.search.Query query = qp.parse( qStr );
             hits = searcher.search( query );

Here is the possible responses that I know are in the index.

Chicken
Lemon chicken
Chicken parmesan
Chicken marsala
Chicken cordon blue
Chicken and dumplings
chickpeas
Bbq chicken
Garlic chicken
Teriyaki chicken
Chlcken picatta


If qStr="Chicken" thus basic TermQuery it works as expected and  
returns the result:

Chicken  			score=0.99999994   (sort of thought this would be 1.0 but  
at least it found and scored the right one)
Lemon chicken 		score=0.625Chicken parmesan	score=0.625
.... so on


However, if I make it a Fuzzy search by setting qStr="Chicken~" the  
results I get are

Chlcken picatta		score=1.0
Chicken 			score=0.4026232
Lemon chicken		score=0.2516395
Chicken parmesan	score=0.2516395
....so on

Most likely this is a lack of my understanding of the fundamentals  
but I would think
it should come up with Chicken as the highest score still considering  
it is an exact match.

Any clue as to why this is is greatly appreciated.

Meanwhile I am still reading docs and searching the web.

-Jami


--Apple-Mail-1-77007693--

From java-user-return-29709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 09 20:47:16 2007
Return-Path: <java-user-return-29709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57811 invoked from network); 9 Aug 2007 20:47:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Aug 2007 20:47:06 -0000
Received: (qmail 96899 invoked by uid 500); 9 Aug 2007 20:46:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96863 invoked by uid 500); 9 Aug 2007 20:46:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96851 invoked by uid 99); 9 Aug 2007 20:46:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Aug 2007 13:46:58 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Aug 2007 20:46:54 +0000
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 21150588 for java-user@lucene.apache.org; Thu, 09 Aug 2007 22:46:33 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: What is the contrib/surround/src/java purpose
Date: Thu, 9 Aug 2007 22:46:32 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01AC1307@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: What is the contrib/surround/src/java purpose
Thread-Index: Acfast4wPGEjJPXjR+Ogkm7vnWa5IAAE1q/Q
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Paul,

I didn't look at the surround.txt, though I must admit it is a pretty =
cryptic explanation :-)

Regards Ard

> Ard,
>=20
> It's the source code of an alternative query language on top=20
> of Lucene=20
> that allows boolean queries and span (distance) queries.
> The minimal documentation is in the Java API documentation
> on the lucene java site under contrib: Surround Parser, and in=20
> the surround.txt file here:
> http://svn.apache.org/viewvc/lucene/java/trunk/contrib/surroun
> d/surround.txt?view=3Dlog
>=20
> Groeten,
> Paul Elschot
>=20
>=20
> On Wednesday 08 August 2007 12:20, Ard Schrijvers wrote:
> > Hello,
> >=20
> > without having to dive into the code, I was hoping somebody=20
> could tell me=20
> what this contrib block does? I can't seem to find any=20
> documentation or=20
> relevant hits when searching for it,
> >=20
> > Thanks in advance,
> >=20
> > Regards Ard
> >=20
> >=20
> >=20
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >=20
> >=20
> >=20
> >=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 09 21:18:31 2007
Return-Path: <java-user-return-29710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66238 invoked from network); 9 Aug 2007 21:18:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Aug 2007 21:18:29 -0000
Received: (qmail 53683 invoked by uid 500); 9 Aug 2007 21:18:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53647 invoked by uid 500); 9 Aug 2007 21:18:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53636 invoked by uid 99); 9 Aug 2007 21:18:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Aug 2007 14:18:22 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Aug 2007 21:18:15 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id D413C21025
	for <java-user@lucene.apache.org>; Thu,  9 Aug 2007 14:17:52 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <3D51E833-F974-4B7F-87B4-57A088EC5C65@quimbik.com>
References: <3D51E833-F974-4B7F-87B4-57A088EC5C65@quimbik.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D1D4A594-30AA-40AE-AC51-F5BCC99EAB89@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Help Regarding Fuzzy Scoring
Date: Thu, 9 Aug 2007 17:17:49 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Try using the explain() method to give more insight.


On Aug 9, 2007, at 4:08 PM, Jami Kapla wrote:

> Hello,
>
> I have been using Lucene recently (newbie) and reading about scoring.
> However, have a result that of course still does not make sense to me.
>
> I have an index created from a single field (entree) in one table  
> in my DB.
> I Index it with the StandardAnalyzer.
>
> I also Query it with the StandardAnalyzer as simple as possible like:
>
>             QueryParser qp = new QueryParser("title", new  
> StandardAnalyzer());
>             org.apache.lucene.search.Query query = qp.parse( qStr );
>             hits = searcher.search( query );
>
> Here is the possible responses that I know are in the index.
>
> Chicken
> Lemon chicken
> Chicken parmesan
> Chicken marsala
> Chicken cordon blue
> Chicken and dumplings
> chickpeas
> Bbq chicken
> Garlic chicken
> Teriyaki chicken
> Chlcken picatta
>
>
> If qStr="Chicken" thus basic TermQuery it works as expected and  
> returns the result:
>
> Chicken  			score=0.99999994   (sort of thought this would be 1.0  
> but at least it found and scored the right one)
> Lemon chicken 		score=0.625Chicken parmesan	score=0.625
> .... so on
>
>
> However, if I make it a Fuzzy search by setting qStr="Chicken~" the  
> results I get are
>
> Chlcken picatta		score=1.0
> Chicken 			score=0.4026232
> Lemon chicken		score=0.2516395
> Chicken parmesan	score=0.2516395
> ....so on
>
> Most likely this is a lack of my understanding of the fundamentals  
> but I would think
> it should come up with Chicken as the highest score still  
> considering it is an exact match.
>
> Any clue as to why this is is greatly appreciated.
>
> Meanwhile I am still reading docs and searching the web.
>
> -Jami
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 02:54:27 2007
Return-Path: <java-user-return-29711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91565 invoked from network); 10 Aug 2007 02:54:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 02:54:26 -0000
Received: (qmail 90713 invoked by uid 500); 10 Aug 2007 02:54:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90679 invoked by uid 500); 10 Aug 2007 02:54:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90666 invoked by uid 99); 10 Aug 2007 02:54:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Aug 2007 19:54:19 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of kai.hu@dusee.cn designates 222.66.106.38 as permitted sender)
Received: from [222.66.106.38] (HELO mx01.dusee.cn) (222.66.106.38)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 02:54:15 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: =?gb2312?B?tPC4tDogTmVzdGVkIEZpZWxkcw==?=
Date: Fri, 10 Aug 2007 10:53:55 +0800
Message-ID: <8E5BA7FAF994C6409A8E074B78EB4677013652C7@14sha-msg02.zm.sd.mediazone.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Nested Fields
Thread-Index: AcfWGdVPpUQI0CCzTRqWyecQ25St7AE3v2pQ
From: "Kai Hu" <kai.hu@dusee.cn>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, Spencer
Why not translating a xml to an object when indexing,and translating the =
object to a xml when searching.

kai

-----=D3=CA=BC=FE=D4=AD=BC=FE-----
=B7=A2=BC=FE=C8=CB: Spencer Tickner [mailto:spencertickner@gmail.com]=20
=B7=A2=CB=CD=CA=B1=BC=E4: 2007=C4=EA8=D4=C24=C8=D5 =D0=C7=C6=DA=C1=F9 =
6:01
=CA=D5=BC=FE=C8=CB: java-user@lucene.apache.org
=D6=F7=CC=E2: Nested Fields

Hi, and thanks in advace for any help.

I'm fairly new to lucene so excuse the ignorance. I'm attempting to
field an XML documents with nested fields. So:

<foo>
  <bar>This</bar>
  <bat>That</bat>
</foo>

would give me hits for:

bar:This
bat:That
foo:ThisThat

The only way I can see a way of doing this now is to field each
element I want to field and all of it's descendant text, repeating the
same text multiple times for nested fields, then finally have a <root>
field that would field the text for all the document so users not
doing field searches would programmically be forced to search on
<root> to not get multiple hits. This seems inefficent to me and am
hopeing that someone has some advice or can point me to a better way.

Thanks,

Spencer

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 03:59:39 2007
Return-Path: <java-user-return-29712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4288 invoked from network); 10 Aug 2007 03:59:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 03:59:38 -0000
Received: (qmail 26701 invoked by uid 500); 10 Aug 2007 03:59:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26657 invoked by uid 500); 10 Aug 2007 03:59:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26646 invoked by uid 99); 10 Aug 2007 03:59:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Aug 2007 20:59:31 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mrrohitsaini@gmail.com designates 209.85.132.248 as permitted sender)
Received: from [209.85.132.248] (HELO an-out-0708.google.com) (209.85.132.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 03:59:29 +0000
Received: by an-out-0708.google.com with SMTP id c5so130210anc
        for <java-user@lucene.apache.org>; Thu, 09 Aug 2007 20:59:06 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=J+6CdE3z/S8RTDADIRQRYcy9X4SnUcDSBEdM4dpqY9QERWWHy0Q9CkrqRIA/RirPpCQz/zFskyGcyAkKCen9EJiCEvYxvVXHM8DnjWQBcnYX3nWg13y2qHYh9Xf0UKUc3rssbunATBKkOMoa5uPU/SR9EYMITvCUSx/kZm3Fxs8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=SzGNs96T3lpqbEv66wZyGf2iLu+bBtDzitF8oNHjjAONARxENi8FqxkDGARAt/6UfcXHehHctZsuhCypsYxE9SpqKGrUrnE8FxMrD2BLqqaqFhT1U5B9MIwWjLEykWpwRoVWXLOTWu3nKfSgQYMHtqg5pTsp/n2aJR36GftHhK0=
Received: by 10.100.132.16 with SMTP id f16mr2955480and.1186718346806;
        Thu, 09 Aug 2007 20:59:06 -0700 (PDT)
Received: by 10.100.58.11 with HTTP; Thu, 9 Aug 2007 20:59:06 -0700 (PDT)
Message-ID: <3cb8ef760708092059w4aa4a6dl19d96b1c19a75765@mail.gmail.com>
Date: Fri, 10 Aug 2007 09:29:06 +0530
From: "rohit saini" <mrrohitsaini@gmail.com>
To: java-user@lucene.apache.org
Subject: Update boost factor for indexed document using setBoost()
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15832_17741249.1186718346759"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15832_17741249.1186718346759
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
could u pl. tell me how to update boost factor of already indexed document
using setBoost.

Thanks & regards,
Rohit

-- 
VANDE - MATRAM

------=_Part_15832_17741249.1186718346759--

From java-user-return-29713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 04:21:29 2007
Return-Path: <java-user-return-29713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7674 invoked from network); 10 Aug 2007 04:21:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 04:21:27 -0000
Received: (qmail 45193 invoked by uid 500); 10 Aug 2007 04:21:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45153 invoked by uid 500); 10 Aug 2007 04:21:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45142 invoked by uid 99); 10 Aug 2007 04:21:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Aug 2007 21:21:20 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of montaqa@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 04:21:18 +0000
Received: by nf-out-0910.google.com with SMTP id d3so197722nfc
        for <java-user@lucene.apache.org>; Thu, 09 Aug 2007 21:20:57 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=jpxg4RNmLhPAQPVcmCs123sYZPAn5xznWoR75DAkUvNMBeIFPEpd14VxRIA04E7sWi6JPwuxLD3h6FbOrRsPOV+xNqwCAjeZdUzDURon0PrLntlPo61XBrvTdVZ+RaFZw9W4dmtSAfsR6uzV0r0us/R0J86O92r1o2uxQMrynEM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=KtkU1tyfehxngUHYqy3pKUdGwJdeUSx13MRMP8LNSrMiPyq1zRZC2ZJNUsQW1ZGdOvWQ27iWKxy2hWvHyEy75PbVSDZrN5udiuchAQppqj/SsOb3vcvK02snVDvmk29OakraY+FT7GA/EURizsPu6oTj/nfxPiskmc25iHdAXxE=
Received: by 10.78.172.20 with SMTP id u20mr777452hue.1186719656864;
        Thu, 09 Aug 2007 21:20:56 -0700 (PDT)
Received: by 10.78.81.10 with HTTP; Thu, 9 Aug 2007 21:20:56 -0700 (PDT)
Message-ID: <4479cfa0708092120u761b383w4655ae5dd2195e1b@mail.gmail.com>
Date: Fri, 10 Aug 2007 08:20:56 +0400
From: "Abu Abdulla alhanbali" <montaqa@gmail.com>
To: java-user@lucene.apache.org
Subject: formalizing a query
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24296_7412292.1186719656850"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24296_7412292.1186719656850
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I need your help in formalizing this query:

(field1:query1 AND field2:query2) OR
(field1:query3 AND field2:query4) OR
(field1:query5 AND field2:query6) OR
(field1:query7 AND field2:query8) ... etc

Please give the code since I'm new to lucene
how we can use MultiFieldQueryParser or any parser to do the job

greatly appreciated

------=_Part_24296_7412292.1186719656850--

From java-user-return-29714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 04:38:02 2007
Return-Path: <java-user-return-29714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11263 invoked from network); 10 Aug 2007 04:38:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 04:38:00 -0000
Received: (qmail 85087 invoked by uid 500); 10 Aug 2007 04:37:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85044 invoked by uid 500); 10 Aug 2007 04:37:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85033 invoked by uid 99); 10 Aug 2007 04:37:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Aug 2007 21:37:53 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 04:37:49 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IJMFd-0007kH-5L
	for java-user@lucene.apache.org; Thu, 09 Aug 2007 21:37:29 -0700
Message-ID: <12085200.post@talk.nabble.com>
Date: Thu, 9 Aug 2007 21:37:29 -0700 (PDT)
From: Jeff French <jeff@mdbconsulting.com>
To: java-user@lucene.apache.org
Subject: Re: Nested Fields
In-Reply-To: <2d72c9c50708031500n4b1900b7saca85a4fb1dca743@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jeff@mdbconsulting.com
References: <2d72c9c50708031500n4b1900b7saca85a4fb1dca743@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Spencer, it seems inefficient to me too, but that's pretty much what I did
for tables embedded within a document. 

I used a SAX parser to parse the document and kept track of the table
elements I saw. When I received an endElement, I added the text I had
buffered up in the characters() method to the buffer for each parent
element. Then I removed the current element and added its content as a
Field.

I should add that I am also fairly new to Lucene, so just because I did it
that way doesn't mean it's the best or even a good way.

    Jeff


Spencer Tickner wrote:
> 
> I'm fairly new to lucene so excuse the ignorance. I'm attempting to
> field an XML documents with nested fields. So:
> 
> <foo>
>   <bar>This</bar>
>   <bat>That</bat>
> </foo>
> 
> ...
> 
> The only way I can see a way of doing this now is to field each
> element I want to field and all of it's descendant text, ...
> 

-- 
View this message in context: http://www.nabble.com/Nested-Fields-tf4214959.html#a12085200
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 06:06:34 2007
Return-Path: <java-user-return-29715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40391 invoked from network); 10 Aug 2007 06:06:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 06:06:34 -0000
Received: (qmail 38021 invoked by uid 500); 10 Aug 2007 06:06:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37976 invoked by uid 500); 10 Aug 2007 06:06:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37965 invoked by uid 99); 10 Aug 2007 06:06:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Aug 2007 23:06:26 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lukas.vlcek@gmail.com designates 209.85.198.186 as permitted sender)
Received: from [209.85.198.186] (HELO rv-out-0910.google.com) (209.85.198.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 06:06:20 +0000
Received: by rv-out-0910.google.com with SMTP id k20so478382rvb
        for <java-user@lucene.apache.org>; Thu, 09 Aug 2007 23:06:00 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KYqwlPRrt2NbPUYmOqmCs+8lHI9Xps+Qa9+UqEO3S+V4Lt3to7TpAh7BMy10DWLXvDIuW6WOiPwyLeRBBJnMxcgTlnfLrqHiuFPrTRVehc3VhbKYWYzV4vO0Rzwph0M5iVCq3znMMKzjRHIlhXpV+I0m/pyrHl/uPk5bVFdYVQ8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QulMOX+HjidjguwyPwc94lTM5kxHdGOoupkV+9peXOAivfogzQEhRvg7f+3xZAtNRstdVxadWsS79iSYDEScVD/Lmvp75v+ZCOu9VMKm25weEjqRDhwfQ9t3ryVlh8DYq4lWfq9TCUXkctbJyKSiEgM2a5LZtFTV7PRdtH6+phc=
Received: by 10.141.155.5 with SMTP id h5mr1241910rvo.1186725960381;
        Thu, 09 Aug 2007 23:06:00 -0700 (PDT)
Received: by 10.141.210.7 with HTTP; Thu, 9 Aug 2007 23:06:00 -0700 (PDT)
Message-ID: <52c3ddca0708092306m25ab75f6y2724b1db134a6621@mail.gmail.com>
Date: Fri, 10 Aug 2007 08:06:00 +0200
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Nested Fields
In-Reply-To: <12085200.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4225_10148178.1186725960361"
References: <2d72c9c50708031500n4b1900b7saca85a4fb1dca743@mail.gmail.com>
	 <12085200.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4225_10148178.1186725960361
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

Have you checked Compass <http://www.opensymphony.com/compass/> framework
(built on top of Lucene)? This might be interesting for you:
http://www.opensymphony.com/compass/versions/1.2M3/html/core-xsem.html

BR
Lukas


On 8/10/07, Jeff French <jeff@mdbconsulting.com> wrote:
>
>
> Spencer, it seems inefficient to me too, but that's pretty much what I did
> for tables embedded within a document.
>
> I used a SAX parser to parse the document and kept track of the table
> elements I saw. When I received an endElement, I added the text I had
> buffered up in the characters() method to the buffer for each parent
> element. Then I removed the current element and added its content as a
> Field.
>
> I should add that I am also fairly new to Lucene, so just because I did it
> that way doesn't mean it's the best or even a good way.
>
>     Jeff
>
>
> Spencer Tickner wrote:
> >
> > I'm fairly new to lucene so excuse the ignorance. I'm attempting to
> > field an XML documents with nested fields. So:
> >
> > <foo>
> >   <bar>This</bar>
> >   <bat>That</bat>
> > </foo>
> >
> > ...
> >
> > The only way I can see a way of doing this now is to field each
> > element I want to field and all of it's descendant text, ...
> >
>
> --
> View this message in context:
> http://www.nabble.com/Nested-Fields-tf4214959.html#a12085200
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4225_10148178.1186725960361--

From java-user-return-29716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 07:28:49 2007
Return-Path: <java-user-return-29716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71177 invoked from network); 10 Aug 2007 07:28:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 07:28:49 -0000
Received: (qmail 24142 invoked by uid 500); 10 Aug 2007 07:28:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23950 invoked by uid 500); 10 Aug 2007 07:28:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23939 invoked by uid 99); 10 Aug 2007 07:28:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 00:28:41 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lukas.vlcek@gmail.com designates 209.85.198.188 as permitted sender)
Received: from [209.85.198.188] (HELO rv-out-0910.google.com) (209.85.198.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 07:28:38 +0000
Received: by rv-out-0910.google.com with SMTP id k20so489398rvb
        for <java-user@lucene.apache.org>; Fri, 10 Aug 2007 00:28:17 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=oryGjvTFbMGJ9dCVm7FMXKdBVFn0YHU4gFT0gtThzTzdwWki0f+7bAmLe8Z6oF4KVpYwyw/uUZAJLGCj9MR5oHwQZdR2evJu1tU3qy9EqtrtNqi9ryzXqkvCk7Tj3odDhm3JwJl2g0MxC/TlWNWC2lfj+1tXRmPhLCSTUF/oL5E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=jbNqJyoLc9gePd7YjtCuIEK1mi0dXF/OI6ZHVF44DTsGpw8DJy3NeOd7yVxysjdVibXcrmJFzwsNZymDO0+zzHAE4+5yGQLJRCE+ezq+fUKsEV4YQ95qev6xFy+ZqGcpC/nR2Vwfzbg6VvdpCx8Tb6R19jdd13VgQcInlQouuMc=
Received: by 10.141.210.5 with SMTP id m5mr1300522rvq.1186730897626;
        Fri, 10 Aug 2007 00:28:17 -0700 (PDT)
Received: by 10.141.210.7 with HTTP; Fri, 10 Aug 2007 00:28:17 -0700 (PDT)
Message-ID: <52c3ddca0708100028qfcbd303m9d7e89b81692ff3b@mail.gmail.com>
Date: Fri, 10 Aug 2007 09:28:17 +0200
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Subject: How to keep user search history and how to turn it into information?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4533_1937499.1186730897607"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4533_1937499.1186730897607
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I would like to keep user search history data and I am looking for some
ideas/advices/recommendations. In general I would like to talk about methods
of storing such data, its structure and how to turn it into valuable
information.

As for the structure:
==============
For now I don't have exact idea about what kind of information I should
keep. I know that this is application specific but I believe there can be
some common general patterns. as of now I think can be useful to keep is the
following:

1) system time (time of issuing the query) and userid
2) original user query in raw form (untokenized)
3) expanded user query (both tokenized and untokenized can be useful)
4) query execution time
5) # of objects retrieved from index
6) # of total object count in index (this can change during time)
7) and possibly if user clicked some result and if so then which one (the
hit number) and system time

As for the information I can get from this:
=============================
Such minimal data collection could show if the search engine serves users
well or not (generally said). I should note that for the users in this case
the only other option is to not use the search engine at all (so the data
should not be biased by the fact that users are using alternative search
method). I should be able to learn if:

1) there are bottleneck queries (Prefix,Fuzzy,Proximity queries...)
2) users are finding what they want (they can find it fast and results are
ordered by properly defined relevance [my model is well tuned in terms of
term weights] so the result they click is among first hits)
3) user can formulate queries well (do they issue queries which return all
index documents or they can issue queries which return just a couple of
documents)
4) ...?... etc...

As for the storage method:
===================
I was planning to keep such data in database but now it seems to me that it
will be better to keep it directly in index (Lucene index). It seems to me
that this approach would allow me for better fuzzy searches across history
and extracting relevant objects and their count more efficiently (with
benefit of the relevance based search on top of history search corpus).

I think that more scalable solution would be to keep such data in pure flat
file and then periodically recreate search history index (or more indices)
from it (for example by Map-Reduce like task). Event better the flat file
could be stored in distributer file system. However, for now I would like to
start with something simple.

I know this is a complex topic...

Regards,
Lukas

------=_Part_4533_1937499.1186730897607--

From java-user-return-29717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 07:46:47 2007
Return-Path: <java-user-return-29717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76743 invoked from network); 10 Aug 2007 07:46:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 07:46:46 -0000
Received: (qmail 48262 invoked by uid 500); 10 Aug 2007 07:46:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48219 invoked by uid 500); 10 Aug 2007 07:46:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48208 invoked by uid 99); 10 Aug 2007 07:46:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 00:46:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dmitrytkach1@hotmail.com designates 65.54.246.210 as permitted sender)
Received: from [65.54.246.210] (HELO BAY0-OMC3-S10.bay0.hotmail.com) (65.54.246.210)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 07:46:31 +0000
Received: from hotmail.com ([65.54.169.74]) by BAY0-OMC3-S10.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Fri, 10 Aug 2007 00:46:11 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Fri, 10 Aug 2007 00:46:11 -0700
Message-ID: <BAY114-DAV2DED6D32B1F38DB03897994E10@phx.gbl>
Received: from 24.12.157.130 by BAY114-DAV2.phx.gbl with DAV;
	Fri, 10 Aug 2007 07:46:09 +0000
X-Originating-IP: [24.12.157.130]
X-Originating-Email: [dmitrytkach1@hotmail.com]
X-Sender: dmitrytkach1@hotmail.com
From: "Dmitry" <dmitrytkach1@hotmail.com>
To: <java-user@lucene.apache.org>
References: <52c3ddca0708100028qfcbd303m9d7e89b81692ff3b@mail.gmail.com>
Subject: Re: How to keep user search history and how to turn it into information?
Date: Fri, 10 Aug 2007 02:47:02 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3028
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-OriginalArrivalTime: 10 Aug 2007 07:46:11.0389 (UTC) FILETIME=[8539FED0:01C7DB22]
X-Virus-Checked: Checked by ClamAV on apache.org

Lucas,
Probably one of the solution will be to use database  - like my sql and 
setup Lucene against MySQL  - in thi scase you don't need to think less 
concerning implementaiton based on the content sotrage. ALso you need to 
create middle tier to catch all event concerning Users Search / Hostory/ 
Retrieval History/Cache Management...
Thanks,
dt
www.ejinz.com
Search News

----- Original Message ----- 
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Friday, August 10, 2007 2:28 AM
Subject: How to keep user search history and how to turn it into 
information?


> Hi,
>
> I would like to keep user search history data and I am looking for some
> ideas/advices/recommendations. In general I would like to talk about 
> methods
> of storing such data, its structure and how to turn it into valuable
> information.
>
> As for the structure:
> ==============
> For now I don't have exact idea about what kind of information I should
> keep. I know that this is application specific but I believe there can be
> some common general patterns. as of now I think can be useful to keep is 
> the
> following:
>
> 1) system time (time of issuing the query) and userid
> 2) original user query in raw form (untokenized)
> 3) expanded user query (both tokenized and untokenized can be useful)
> 4) query execution time
> 5) # of objects retrieved from index
> 6) # of total object count in index (this can change during time)
> 7) and possibly if user clicked some result and if so then which one (the
> hit number) and system time
>
> As for the information I can get from this:
> =============================
> Such minimal data collection could show if the search engine serves users
> well or not (generally said). I should note that for the users in this 
> case
> the only other option is to not use the search engine at all (so the data
> should not be biased by the fact that users are using alternative search
> method). I should be able to learn if:
>
> 1) there are bottleneck queries (Prefix,Fuzzy,Proximity queries...)
> 2) users are finding what they want (they can find it fast and results are
> ordered by properly defined relevance [my model is well tuned in terms of
> term weights] so the result they click is among first hits)
> 3) user can formulate queries well (do they issue queries which return all
> index documents or they can issue queries which return just a couple of
> documents)
> 4) ...?... etc...
>
> As for the storage method:
> ===================
> I was planning to keep such data in database but now it seems to me that 
> it
> will be better to keep it directly in index (Lucene index). It seems to me
> that this approach would allow me for better fuzzy searches across history
> and extracting relevant objects and their count more efficiently (with
> benefit of the relevance based search on top of history search corpus).
>
> I think that more scalable solution would be to keep such data in pure 
> flat
> file and then periodically recreate search history index (or more indices)
> from it (for example by Map-Reduce like task). Event better the flat file
> could be stored in distributer file system. However, for now I would like 
> to
> start with something simple.
>
> I know this is a complex topic...
>
> Regards,
> Lukas
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 08:14:34 2007
Return-Path: <java-user-return-29718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89783 invoked from network); 10 Aug 2007 08:14:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 08:14:32 -0000
Received: (qmail 81408 invoked by uid 500); 10 Aug 2007 08:14:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81366 invoked by uid 500); 10 Aug 2007 08:14:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81355 invoked by uid 99); 10 Aug 2007 08:14:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 01:14:25 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lukas.vlcek@gmail.com designates 209.85.198.184 as permitted sender)
Received: from [209.85.198.184] (HELO rv-out-0910.google.com) (209.85.198.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 08:14:17 +0000
Received: by rv-out-0910.google.com with SMTP id k20so495496rvb
        for <java-user@lucene.apache.org>; Fri, 10 Aug 2007 01:13:57 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gRxts3BYqHfMZKt10L106ijaKGlLbOz47H53Lv7yVkdK9ZX++HiWYMP05wtv9i81EPRj+ljOT2xKGtZydUAeogYCrJBk2GrITYVyi8G8zyX0pW6igUTCVnm4b8v5ZXVvjobLCUb2OJm1llTT7YakKZcpVgePYtSRUGexsZSeEL8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=iTZNVNldkU27CPtTD8NPmwGi5U347vLBdAx8uGYuvoI9sbGoJidnaZa7MmFF2WUi2lr3FQJknc7bP9+HNA6DFwwYOHAPHGitBSaBODVt+Fw2H0nKxvDIGL9bxQ4tb/ugIXRF7Fxc1WjRTARJ2AxlKRm9AEzm8O7UQbKSz5cX+xk=
Received: by 10.141.85.13 with SMTP id n13mr1317891rvl.1186733637277;
        Fri, 10 Aug 2007 01:13:57 -0700 (PDT)
Received: by 10.141.210.7 with HTTP; Fri, 10 Aug 2007 01:13:52 -0700 (PDT)
Message-ID: <52c3ddca0708100113q690b371xd7380d55cbfb5310@mail.gmail.com>
Date: Fri, 10 Aug 2007 10:13:52 +0200
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to keep user search history and how to turn it into information?
In-Reply-To: <BAY114-DAV2DED6D32B1F38DB03897994E10@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4581_3268370.1186733632236"
References: <52c3ddca0708100028qfcbd303m9d7e89b81692ff3b@mail.gmail.com>
	 <BAY114-DAV2DED6D32B1F38DB03897994E10@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4581_3268370.1186733632236
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Dmitry,

My middle tier is Compass in this case (it is easy extensible so catching
all events should be easy). Also it allows for index to be stored in DB as
well.

The main question is *what* is important to catch and *how* to get maximum
information out of it later.

Lukas

On 8/10/07, Dmitry <dmitrytkach1@hotmail.com> wrote:
>
> Lucas,
> Probably one of the solution will be to use database  - like my sql and
> setup Lucene against MySQL  - in thi scase you don't need to think less
> concerning implementaiton based on the content sotrage. ALso you need to
> create middle tier to catch all event concerning Users Search / Hostory/
> Retrieval History/Cache Management...
> Thanks,
> dt
> www.ejinz.com
> Search News
>
> ----- Original Message -----
> From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Friday, August 10, 2007 2:28 AM
> Subject: How to keep user search history and how to turn it into
> information?
>
>
> > Hi,
> >
> > I would like to keep user search history data and I am looking for some
> > ideas/advices/recommendations. In general I would like to talk about
> > methods
> > of storing such data, its structure and how to turn it into valuable
> > information.
> >
> > As for the structure:
> > ==============
> > For now I don't have exact idea about what kind of information I should
> > keep. I know that this is application specific but I believe there can
> be
> > some common general patterns. as of now I think can be useful to keep is
> > the
> > following:
> >
> > 1) system time (time of issuing the query) and userid
> > 2) original user query in raw form (untokenized)
> > 3) expanded user query (both tokenized and untokenized can be useful)
> > 4) query execution time
> > 5) # of objects retrieved from index
> > 6) # of total object count in index (this can change during time)
> > 7) and possibly if user clicked some result and if so then which one
> (the
> > hit number) and system time
> >
> > As for the information I can get from this:
> > =============================
> > Such minimal data collection could show if the search engine serves
> users
> > well or not (generally said). I should note that for the users in this
> > case
> > the only other option is to not use the search engine at all (so the
> data
> > should not be biased by the fact that users are using alternative search
> > method). I should be able to learn if:
> >
> > 1) there are bottleneck queries (Prefix,Fuzzy,Proximity queries...)
> > 2) users are finding what they want (they can find it fast and results
> are
> > ordered by properly defined relevance [my model is well tuned in terms
> of
> > term weights] so the result they click is among first hits)
> > 3) user can formulate queries well (do they issue queries which return
> all
> > index documents or they can issue queries which return just a couple of
> > documents)
> > 4) ...?... etc...
> >
> > As for the storage method:
> > ===================
> > I was planning to keep such data in database but now it seems to me that
> > it
> > will be better to keep it directly in index (Lucene index). It seems to
> me
> > that this approach would allow me for better fuzzy searches across
> history
> > and extracting relevant objects and their count more efficiently (with
> > benefit of the relevance based search on top of history search corpus).
> >
> > I think that more scalable solution would be to keep such data in pure
> > flat
> > file and then periodically recreate search history index (or more
> indices)
> > from it (for example by Map-Reduce like task). Event better the flat
> file
> > could be stored in distributer file system. However, for now I would
> like
> > to
> > start with something simple.
> >
> > I know this is a complex topic...
> >
> > Regards,
> > Lukas
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4581_3268370.1186733632236--

From java-user-return-29719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 09:09:44 2007
Return-Path: <java-user-return-29719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2866 invoked from network); 10 Aug 2007 09:09:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 09:09:43 -0000
Received: (qmail 68352 invoked by uid 500); 10 Aug 2007 09:09:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68323 invoked by uid 500); 10 Aug 2007 09:09:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68304 invoked by uid 99); 10 Aug 2007 09:09:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 02:09:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of antonelloprov@gmail.com designates 209.85.146.177 as permitted sender)
Received: from [209.85.146.177] (HELO wa-out-1112.google.com) (209.85.146.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 09:09:33 +0000
Received: by wa-out-1112.google.com with SMTP id j40so908989wah
        for <java-user@lucene.apache.org>; Fri, 10 Aug 2007 02:09:13 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=IaSDdbQPaZNigLUYxAzKVvkELOxeyd7jWZ3hqOnUXbKs1+DzxsCEczTfgzwryM2tb/dPzpjMQ/3hp9LVGwlJk6Q94IzDpeMaZVAc6ZJpfbE9Yjf4SPso8AASoI2VcMeTsy1LZj2vNMQw48UNjDSvDZpl62SlBTYd8nm/CvouKcQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=ETWa8hm3mJvgR7sgSCRgteU/FtguuhfzI8Jbh+wzaO1G3z9L6B6u9lsiL1vMvKy/T6+ooylCw4tC2TNW8+SGsUifF+mO8kKqNlXzGCzkAatQH8fKYj+0AP7pes6tPJRmgGVjMMWte8s0uF+7WgoDNIlf7q/Alkep4tGCD4Vo+Ms=
Received: by 10.114.25.3 with SMTP id 3mr2344152way.1186736953425;
        Fri, 10 Aug 2007 02:09:13 -0700 (PDT)
Received: by 10.114.167.11 with HTTP; Fri, 10 Aug 2007 02:09:13 -0700 (PDT)
Message-ID: <dadfe18a0708100209t28925682mc769e69e4a1f796b@mail.gmail.com>
Date: Fri, 10 Aug 2007 11:09:13 +0200
From: "Antonello Provenzano" <antonelloprov@gmail.com>
Reply-To: antonello@deveel.com
To: java-user@lucene.apache.org
Subject: Lucene in large database contexts
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi There!

I've been working for a while on the implementation of a website
oriented to contents that would contain millions of entries, most of
them indexable (such as descriptions, texts, names, etc.).
The ideal solution to make them searchable would be to use Lucene as
index and search engine.

The reason I'm posting the mailing list is the following: since all
the entries will be stored in a database (most likely MySQL InnoDB or
Oracle), what's the best technique to implement a system that indexes
in "real time" (eg. when an entry is inserted into the databsse) the
content and make it searchable? Based on my understanding of Lucene,
such this thing is not possible, since the index must be re-created to
be able to search the indexed contents. Is this true?

Eventually, could anyone point me to a working example about how to
implement such a similar context?


Thank you for the support.
Antonello

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 09:30:58 2007
Return-Path: <java-user-return-29720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7411 invoked from network); 10 Aug 2007 09:30:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 09:30:57 -0000
Received: (qmail 97634 invoked by uid 500); 10 Aug 2007 09:30:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97358 invoked by uid 500); 10 Aug 2007 09:30:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97347 invoked by uid 99); 10 Aug 2007 09:30:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 02:30:50 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lukas.vlcek@gmail.com designates 209.85.198.189 as permitted sender)
Received: from [209.85.198.189] (HELO rv-out-0910.google.com) (209.85.198.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 09:30:45 +0000
Received: by rv-out-0910.google.com with SMTP id k20so505935rvb
        for <java-user@lucene.apache.org>; Fri, 10 Aug 2007 02:30:25 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=B35YnZiY1kqyI7RIDQFXEVSAhNQ0qH1cXzd084GsqSjlxzk9pqNqFLr+6bg8tNvovFzkU4tNyye8r30fTp5DmK3J8Yi2fqg3yVpXBm0yqxdjCxH3SnKpqK8D06kg3WNDpiiekaMz+GPD2YseZk15eVX5oK8JfoOyroO2N8D3Txw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lgUDt1kQQc9YSs8gATG9sqw7Coa7zuIDkYQe11s+ao8anVA0XvEr+zjTEQCrqgWrL60bXfVAWljLOV95MruHXNiE6RiqrwdzgCFJHcN/nfjEZU4vGFBICD6r2nq46NkOV50qzW7pVkDxFO5r0uYrd4xmn8qrh5EyxiZWCmsAIiw=
Received: by 10.141.88.3 with SMTP id q3mr1297343rvl.1186738225191;
        Fri, 10 Aug 2007 02:30:25 -0700 (PDT)
Received: by 10.141.210.7 with HTTP; Fri, 10 Aug 2007 02:30:25 -0700 (PDT)
Message-ID: <52c3ddca0708100230w34fd0ad0qa01abbdc6a1ed5f7@mail.gmail.com>
Date: Fri, 10 Aug 2007 11:30:25 +0200
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org, antonello@deveel.com
Subject: Re: Lucene in large database contexts
In-Reply-To: <dadfe18a0708100209t28925682mc769e69e4a1f796b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4713_18587515.1186738225124"
References: <dadfe18a0708100209t28925682mc769e69e4a1f796b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4713_18587515.1186738225124
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
did you have a chance to look at Compass<http://www.opensymphony.com/compass/>?
It can do exactly what you want.
Lukas

On 8/10/07, Antonello Provenzano <antonelloprov@gmail.com> wrote:
>
> Hi There!
>
> I've been working for a while on the implementation of a website
> oriented to contents that would contain millions of entries, most of
> them indexable (such as descriptions, texts, names, etc.).
> The ideal solution to make them searchable would be to use Lucene as
> index and search engine.
>
> The reason I'm posting the mailing list is the following: since all
> the entries will be stored in a database (most likely MySQL InnoDB or
> Oracle), what's the best technique to implement a system that indexes
> in "real time" (eg. when an entry is inserted into the databsse) the
> content and make it searchable? Based on my understanding of Lucene,
> such this thing is not possible, since the index must be re-created to
> be able to search the indexed contents. Is this true?
>
> Eventually, could anyone point me to a working example about how to
> implement such a similar context?
>
>
> Thank you for the support.
> Antonello
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4713_18587515.1186738225124--

From java-user-return-29721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 09:37:15 2007
Return-Path: <java-user-return-29721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9005 invoked from network); 10 Aug 2007 09:37:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 09:37:14 -0000
Received: (qmail 13716 invoked by uid 500); 10 Aug 2007 09:37:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13188 invoked by uid 500); 10 Aug 2007 09:37:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13177 invoked by uid 99); 10 Aug 2007 09:37:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 02:37:06 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lukas.vlcek@gmail.com designates 209.85.198.185 as permitted sender)
Received: from [209.85.198.185] (HELO rv-out-0910.google.com) (209.85.198.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 09:36:58 +0000
Received: by rv-out-0910.google.com with SMTP id k20so506779rvb
        for <java-user@lucene.apache.org>; Fri, 10 Aug 2007 02:36:38 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ULvKwC0Q0ifoRHYAa4WpjpmiBBzjjd+rNZ3UvAsoBZ3hqszx0T9plj4sWmytJztdYG0K+CnbK3uGB9GkpoO6Y7nJ7Zg//kxpCLr5h9sD7Ps963/Uh4RLyysJvARXbMwea16ShK037TtgLJB6zi7fwuXjXp4NL2FB0D8vF+liBQQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XLYY04MhzSOSs0LOrS4jbAU+SiCt331XdoAZcBHEkO0ayW+yJNgaYhQbFwULji8X3rMJNW9smiq5/U9WDUrn3tj0LXao5hDq5vKDuPnNa5xg/WQcAzGAXUBPHUp818Q9iSgKFOuyHGlcjNixOyQzLcIA3tmEYDlNwbbgfatpf7Q=
Received: by 10.141.50.17 with SMTP id c17mr925928rvk.1186738598088;
        Fri, 10 Aug 2007 02:36:38 -0700 (PDT)
Received: by 10.141.210.7 with HTTP; Fri, 10 Aug 2007 02:36:38 -0700 (PDT)
Message-ID: <52c3ddca0708100236n25d0bb3cofc9bd211b88df6ea@mail.gmail.com>
Date: Fri, 10 Aug 2007 11:36:38 +0200
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org, antonello@deveel.com
Subject: Re: Lucene in large database contexts
In-Reply-To: <52c3ddca0708100230w34fd0ad0qa01abbdc6a1ed5f7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4737_15912765.1186738598039"
References: <dadfe18a0708100209t28925682mc769e69e4a1f796b@mail.gmail.com>
	 <52c3ddca0708100230w34fd0ad0qa01abbdc6a1ed5f7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4737_15912765.1186738598039
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Also you can look at Hibernate Search <http://search.hibernate.org/>.
BR
Lukas

On 8/10/07, Lukas Vlcek <lukas.vlcek@gmail.com> wrote:
>
> Hi,
> did you have a chance to look at Compass<http://www.opensymphony.com/compass/>?
> It can do exactly what you want.
> Lukas
>
> On 8/10/07, Antonello Provenzano <antonelloprov@gmail.com> wrote:
> >
> > Hi There!
> >
> > I've been working for a while on the implementation of a website
> > oriented to contents that would contain millions of entries, most of
> > them indexable (such as descriptions, texts, names, etc.).
> > The ideal solution to make them searchable would be to use Lucene as
> > index and search engine.
> >
> > The reason I'm posting the mailing list is the following: since all
> > the entries will be stored in a database (most likely MySQL InnoDB or
> > Oracle), what's the best technique to implement a system that indexes
> > in "real time" (eg. when an entry is inserted into the databsse) the
> > content and make it searchable? Based on my understanding of Lucene,
> > such this thing is not possible, since the index must be re-created to
> > be able to search the indexed contents. Is this true?
> >
> > Eventually, could anyone point me to a working example about how to
> > implement such a similar context?
> >
> >
> > Thank you for the support.
> > Antonello
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_4737_15912765.1186738598039--

From java-user-return-29722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 09:54:31 2007
Return-Path: <java-user-return-29722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12898 invoked from network); 10 Aug 2007 09:54:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 09:54:30 -0000
Received: (qmail 41735 invoked by uid 500); 10 Aug 2007 09:54:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41702 invoked by uid 500); 10 Aug 2007 09:54:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41684 invoked by uid 99); 10 Aug 2007 09:54:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 02:54:21 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kai.hu@dusee.cn designates 222.66.106.38 as permitted sender)
Received: from [222.66.106.38] (HELO mx01.dusee.cn) (222.66.106.38)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 09:54:19 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: =?gb2312?B?tPC4tDogTHVjZW5lIGluIGxhcmdlIGRhdGFiYXNlIGNvbnRleHRz?=
Date: Fri, 10 Aug 2007 17:53:47 +0800
Message-ID: <8E5BA7FAF994C6409A8E074B78EB467701365331@14sha-msg02.zm.sd.mediazone.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene in large database contexts
Thread-Index: AcfbLjThF7BCUZcjTsCgSs+ftMPm5gABbxEw
From: "Kai Hu" <kai.hu@dusee.cn>
To: <java-user@lucene.apache.org>,
	<antonello@deveel.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, Antonello
	You can use IndexWriter.addDocument(Document document) to add single =
document,same to update,delete operation.

kai

-----=D3=CA=BC=FE=D4=AD=BC=FE-----
=B7=A2=BC=FE=C8=CB: Antonello Provenzano =
[mailto:antonelloprov@gmail.com]=20
=B7=A2=CB=CD=CA=B1=BC=E4: 2007=C4=EA8=D4=C210=C8=D5 =D0=C7=C6=DA=CE=E5 =
17:09
=CA=D5=BC=FE=C8=CB: java-user@lucene.apache.org
=D6=F7=CC=E2: Lucene in large database contexts

Hi There!

I've been working for a while on the implementation of a website
oriented to contents that would contain millions of entries, most of
them indexable (such as descriptions, texts, names, etc.).
The ideal solution to make them searchable would be to use Lucene as
index and search engine.

The reason I'm posting the mailing list is the following: since all
the entries will be stored in a database (most likely MySQL InnoDB or
Oracle), what's the best technique to implement a system that indexes
in "real time" (eg. when an entry is inserted into the databsse) the
content and make it searchable? Based on my understanding of Lucene,
such this thing is not possible, since the index must be re-created to
be able to search the indexed contents. Is this true?

Eventually, could anyone point me to a working example about how to
implement such a similar context?


Thank you for the support.
Antonello

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 09:57:33 2007
Return-Path: <java-user-return-29723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13503 invoked from network); 10 Aug 2007 09:57:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 09:57:32 -0000
Received: (qmail 47418 invoked by uid 500); 10 Aug 2007 09:57:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47369 invoked by uid 500); 10 Aug 2007 09:57:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47358 invoked by uid 99); 10 Aug 2007 09:57:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 02:57:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of antonelloprov@gmail.com designates 209.85.146.181 as permitted sender)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 09:57:20 +0000
Received: by wa-out-1112.google.com with SMTP id j40so921397wah
        for <java-user@lucene.apache.org>; Fri, 10 Aug 2007 02:56:59 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=H56mkfVyB7baBQAyAyZD/ONwuZHf45gsASUFqDpBY6oRdfBkxS4ebXJ866mKfxW3+jSXtGydIJ+eKobD9AhIyqFnJyQFP2SXbZdM3HIgW3BAD8+1toCaDyNEJpemHBSPh5dRMP3KDPNh/g4bYNeJ+s6tsTM9R3i5sFycGbQsMdQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=nlQkBw/LdDrJ/zrctTnkWfEmy8M3ul6QvJM7NoP+bsyWgViR5Z8+fN4VGpG73zMzYtVxAmgSq3QhkYsZg/z1KxB1gBl3shI1vsp/uI9Q8jnl0YPhGeeJXDzgpg+AZ5E0ZKWTdr8b4ziOeOWp27ySMPJjHn2z9kv1+f0//f1uuj0=
Received: by 10.114.14.1 with SMTP id 1mr2700426wan.1186739819303;
        Fri, 10 Aug 2007 02:56:59 -0700 (PDT)
Received: by 10.114.167.11 with HTTP; Fri, 10 Aug 2007 02:56:59 -0700 (PDT)
Message-ID: <dadfe18a0708100256o1ac75991yef0393643aa332d7@mail.gmail.com>
Date: Fri, 10 Aug 2007 11:56:59 +0200
From: "Antonello Provenzano" <antonello@deveel.com>
Sender: antonelloprov@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Lucene in large database contexts
In-Reply-To: <52c3ddca0708100230w34fd0ad0qa01abbdc6a1ed5f7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <dadfe18a0708100209t28925682mc769e69e4a1f796b@mail.gmail.com>
	 <52c3ddca0708100230w34fd0ad0qa01abbdc6a1ed5f7@mail.gmail.com>
X-Google-Sender-Auth: 7244c272bf854d3d
X-Virus-Checked: Checked by ClamAV on apache.org

Lukas,

Thanks for the fast and clarifying response. Something I haven't
specified is I'm working on Mono, that means I use Lucene.Net version.
The reason I'm posting to the Java User list is that this is a more
active one and with people who could have had my same requirements.

Since Lucene and Lucene.Net are identical, working on different
frameworks, I assumed the answer to my inquiry could have been
applicable either to a context where the second one where involved.
Unfortunately, the solutions you gave me are oriented just to java
developers and users: to use Compass, in fact, I should port it to C#
(I don't exclude to make such this move, but it's a complex job and
the result is not assured to be of quality).

Thank you anyway.
Antonello

PS. Since I created an ORM for .NET that is a competitor of
Hibernate/NHibernate, I want to analyze the sources of Hibernate
Search to understand how they implemented it and try to do the same
for my project.


On 8/10/07, Lukas Vlcek <lukas.vlcek@gmail.com> wrote:
> Hi,
> did you have a chance to look at Compass<http://www.opensymphony.com/compass/>?
> It can do exactly what you want.
> Lukas
>
> On 8/10/07, Antonello Provenzano <antonelloprov@gmail.com> wrote:
> >
> > Hi There!
> >
> > I've been working for a while on the implementation of a website
> > oriented to contents that would contain millions of entries, most of
> > them indexable (such as descriptions, texts, names, etc.).
> > The ideal solution to make them searchable would be to use Lucene as
> > index and search engine.
> >
> > The reason I'm posting the mailing list is the following: since all
> > the entries will be stored in a database (most likely MySQL InnoDB or
> > Oracle), what's the best technique to implement a system that indexes
> > in "real time" (eg. when an entry is inserted into the databsse) the
> > content and make it searchable? Based on my understanding of Lucene,
> > such this thing is not possible, since the index must be re-created to
> > be able to search the indexed contents. Is this true?
> >
> > Eventually, could anyone point me to a working example about how to
> > implement such a similar context?
> >
> >
> > Thank you for the support.
> > Antonello
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 10:00:01 2007
Return-Path: <java-user-return-29724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14286 invoked from network); 10 Aug 2007 10:00:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 10:00:00 -0000
Received: (qmail 52939 invoked by uid 500); 10 Aug 2007 09:59:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52905 invoked by uid 500); 10 Aug 2007 09:59:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52894 invoked by uid 99); 10 Aug 2007 09:59:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 02:59:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of antonelloprov@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 09:59:49 +0000
Received: by wa-out-1112.google.com with SMTP id j40so922052wah
        for <java-user@lucene.apache.org>; Fri, 10 Aug 2007 02:59:28 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=IiRYgp7KUvIsOA43A9oGi5uo9BfK8jfD/wHwyPIt7TQF2n+Mq8LIb8rzOXEkVxM+n2XNlea8ZOlwgXRZ64Edm8QSq4xKBJ1c26MXJxtRMVT3OFFFLRtWvxRQe8hbrxwMXSY53s/RRwKsDln4P2q90sCt/Ma0uJbtnHPhlyfobjM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=T8pH9TokXAe+bhm2GBC60P4v1J4m9wr6WahxUEfi0yJT3MOl4aOHjPpHKc3fZkLGuYTX8P+w6AWvfPy7WLg4PU4YGsC3jfBLV+ibw/5osvfQjafHFc5bqnCFb0IlzkHOZbquI45R3wlvvGq5mCtst3BrW7ldDKTCCKaNchcUROo=
Received: by 10.114.175.16 with SMTP id x16mr2375748wae.1186739968234;
        Fri, 10 Aug 2007 02:59:28 -0700 (PDT)
Received: by 10.114.167.11 with HTTP; Fri, 10 Aug 2007 02:59:28 -0700 (PDT)
Message-ID: <dadfe18a0708100259i2d75f43ere5440e46c48e9872@mail.gmail.com>
Date: Fri, 10 Aug 2007 11:59:28 +0200
From: "Antonello Provenzano" <antonello@deveel.com>
Sender: antonelloprov@gmail.com
To: java-user@lucene.apache.org
Subject: =?GB2312?B?UmU6ILTwuLQ6IEx1Y2VuZSBpbiBsYXJnZSBkYXRhYmFzZSBjb250ZXh0cw==?=
In-Reply-To: <8E5BA7FAF994C6409A8E074B78EB467701365331@14sha-msg02.zm.sd.mediazone.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <8E5BA7FAF994C6409A8E074B78EB467701365331@14sha-msg02.zm.sd.mediazone.com>
X-Google-Sender-Auth: 64f6a26b12830739
X-Virus-Checked: Checked by ClamAV on apache.org

S2FpLAoKVGhhbmtzLiBUaGUgcHJvYmxlbSBJIHNlZSBpdCdzIHRoYXQgYWx0aG91Z2ggSSBjYW4g
YWRkIGEgRG9jdW1lbnQKdGhyb3VnaCBJbmRleFdyaXRlciBvciBJbmRleE1vZGlmaWVyLCB0aGlz
IHdvbid0IGJlIHNlYXJjaGFibGUgdW50aWwKdGhlIGluZGV4IGlzIGNsb3NlZCBhbmQsIHBvc3Np
Ymx5LCBvcHRpbWl6ZWQsIHNpbmNlIHRoZSBzY29yZSBvZiB0aGUKZG9jdW1lbnQgaW4gdGhlIGlu
ZGV4IGNvbnRleHQgbXVzdCBiZSByZS1jYWxjdWxhdGVkIG9uIHRoZSBiYXNpcyBvZgp0aGUgd2hv
bGUgY29udGV4dC4KCklzIHRoaXMgYXNzdW1wdGlvbiB0cnVlPyBvciBhbSBJIGNvbXBsZXRlbHkg
d3Jvbmc/CgpDaGVlcnMuCkFudG9uZWxsbwoKCk9uIDgvMTAvMDcsIEthaSBIdSA8a2FpLmh1QGR1
c2VlLmNuPiB3cm90ZToKPiBIaSwgQW50b25lbGxvCj4gICAgICAgICBZb3UgY2FuIHVzZSBJbmRl
eFdyaXRlci5hZGREb2N1bWVudChEb2N1bWVudCBkb2N1bWVudCkgdG8gYWRkIHNpbmdsZSBkb2N1
bWVudCxzYW1lIHRvIHVwZGF0ZSxkZWxldGUgb3BlcmF0aW9uLgo+Cj4ga2FpCj4KPiAtLS0tLdPK
vP7Urbz+LS0tLS0KPiC3orz+yMs6IEFudG9uZWxsbyBQcm92ZW56YW5vIFttYWlsdG86YW50b25l
bGxvcHJvdkBnbWFpbC5jb21dCj4gt6LLzcqxvOQ6IDIwMDfE6jjUwjEwyNUg0MfG2s7lIDE3OjA5
Cj4gytW8/sjLOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcKPiDW98ziOiBMdWNlbmUgaW4g
bGFyZ2UgZGF0YWJhc2UgY29udGV4dHMKPgo+IEhpIFRoZXJlIQo+Cj4gSSd2ZSBiZWVuIHdvcmtp
bmcgZm9yIGEgd2hpbGUgb24gdGhlIGltcGxlbWVudGF0aW9uIG9mIGEgd2Vic2l0ZQo+IG9yaWVu
dGVkIHRvIGNvbnRlbnRzIHRoYXQgd291bGQgY29udGFpbiBtaWxsaW9ucyBvZiBlbnRyaWVzLCBt
b3N0IG9mCj4gdGhlbSBpbmRleGFibGUgKHN1Y2ggYXMgZGVzY3JpcHRpb25zLCB0ZXh0cywgbmFt
ZXMsIGV0Yy4pLgo+IFRoZSBpZGVhbCBzb2x1dGlvbiB0byBtYWtlIHRoZW0gc2VhcmNoYWJsZSB3
b3VsZCBiZSB0byB1c2UgTHVjZW5lIGFzCj4gaW5kZXggYW5kIHNlYXJjaCBlbmdpbmUuCj4KPiBU
aGUgcmVhc29uIEknbSBwb3N0aW5nIHRoZSBtYWlsaW5nIGxpc3QgaXMgdGhlIGZvbGxvd2luZzog
c2luY2UgYWxsCj4gdGhlIGVudHJpZXMgd2lsbCBiZSBzdG9yZWQgaW4gYSBkYXRhYmFzZSAobW9z
dCBsaWtlbHkgTXlTUUwgSW5ub0RCIG9yCj4gT3JhY2xlKSwgd2hhdCdzIHRoZSBiZXN0IHRlY2hu
aXF1ZSB0byBpbXBsZW1lbnQgYSBzeXN0ZW0gdGhhdCBpbmRleGVzCj4gaW4gInJlYWwgdGltZSIg
KGVnLiB3aGVuIGFuIGVudHJ5IGlzIGluc2VydGVkIGludG8gdGhlIGRhdGFic3NlKSB0aGUKPiBj
b250ZW50IGFuZCBtYWtlIGl0IHNlYXJjaGFibGU/IEJhc2VkIG9uIG15IHVuZGVyc3RhbmRpbmcg
b2YgTHVjZW5lLAo+IHN1Y2ggdGhpcyB0aGluZyBpcyBub3QgcG9zc2libGUsIHNpbmNlIHRoZSBp
bmRleCBtdXN0IGJlIHJlLWNyZWF0ZWQgdG8KPiBiZSBhYmxlIHRvIHNlYXJjaCB0aGUgaW5kZXhl
ZCBjb250ZW50cy4gSXMgdGhpcyB0cnVlPwo+Cj4gRXZlbnR1YWxseSwgY291bGQgYW55b25lIHBv
aW50IG1lIHRvIGEgd29ya2luZyBleGFtcGxlIGFib3V0IGhvdyB0bwo+IGltcGxlbWVudCBzdWNo
IGEgc2ltaWxhciBjb250ZXh0Pwo+Cj4KPiBUaGFuayB5b3UgZm9yIHRoZSBzdXBwb3J0Lgo+IEFu
dG9uZWxsbwo+Cj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11
c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gRm9yIGFkZGl0aW9uYWwgY29tbWFu
ZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPgo+Cj4gLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1
Y2VuZS5hcGFjaGUub3JnCj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11
c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPgo+Cg==


From java-user-return-29725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 10:17:15 2007
Return-Path: <java-user-return-29725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17938 invoked from network); 10 Aug 2007 10:17:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 10:17:13 -0000
Received: (qmail 73248 invoked by uid 500); 10 Aug 2007 10:17:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73209 invoked by uid 500); 10 Aug 2007 10:17:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73197 invoked by uid 99); 10 Aug 2007 10:17:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 03:17:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of kai.hu@dusee.cn designates 222.66.106.38 as permitted sender)
Received: from [222.66.106.38] (HELO mx01.dusee.cn) (222.66.106.38)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 10:17:00 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: =?gb2312?B?tPC4tDogtPC4tDogTHVjZW5lIGluIGxhcmdlIGRhdGFiYXNlIGNvbnRleHRz?=
Date: Fri, 10 Aug 2007 18:16:33 +0800
Message-ID: <8E5BA7FAF994C6409A8E074B78EB46770136533B@14sha-msg02.zm.sd.mediazone.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: =?gb2312?B?tPC4tDogTHVjZW5lIGluIGxhcmdlIGRhdGFiYXNlIGNvbnRleHRz?=
Thread-Index: AcfbNTkK5QKDrC+ORDWXxSN+5pnLFAAAJ7Pw
From: "Kai Hu" <kai.hu@dusee.cn>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Antonello,
	You are right,I think lucene indexsearcher will search the old =
information if IndexWriter was not closed(I think lucene release the =
Lock here),so I only add a few documents every time from buffer to =
implement index "real time".

kai


=B7=A2=BC=FE=C8=CB: antonelloprov@gmail.com =
[mailto:antonelloprov@gmail.com] =B4=FA=B1=ED Antonello Provenzano
=B7=A2=CB=CD=CA=B1=BC=E4: 2007=C4=EA8=D4=C210=C8=D5 =D0=C7=C6=DA=CE=E5 =
17:59
=CA=D5=BC=FE=C8=CB: java-user@lucene.apache.org
=D6=F7=CC=E2: Re: =B4=F0=B8=B4: Lucene in large database contexts

Kai,

Thanks. The problem I see it's that although I can add a Document
through IndexWriter or IndexModifier, this won't be searchable until
the index is closed and, possibly, optimized, since the score of the
document in the index context must be re-calculated on the basis of
the whole context.

Is this assumption true? or am I completely wrong?

Cheers.
Antonello


On 8/10/07, Kai Hu <kai.hu@dusee.cn> wrote:
> Hi, Antonello
>         You can use IndexWriter.addDocument(Document document) to add =
single document,same to update,delete operation.
>
> kai
>
> -----=D3=CA=BC=FE=D4=AD=BC=FE-----
> =B7=A2=BC=FE=C8=CB: Antonello Provenzano =
[mailto:antonelloprov@gmail.com]
> =B7=A2=CB=CD=CA=B1=BC=E4: 2007=C4=EA8=D4=C210=C8=D5 =D0=C7=C6=DA=CE=E5 =
17:09
> =CA=D5=BC=FE=C8=CB: java-user@lucene.apache.org
> =D6=F7=CC=E2: Lucene in large database contexts
>
> Hi There!
>
> I've been working for a while on the implementation of a website
> oriented to contents that would contain millions of entries, most of
> them indexable (such as descriptions, texts, names, etc.).
> The ideal solution to make them searchable would be to use Lucene as
> index and search engine.
>
> The reason I'm posting the mailing list is the following: since all
> the entries will be stored in a database (most likely MySQL InnoDB or
> Oracle), what's the best technique to implement a system that indexes
> in "real time" (eg. when an entry is inserted into the databsse) the
> content and make it searchable? Based on my understanding of Lucene,
> such this thing is not possible, since the index must be re-created to
> be able to search the indexed contents. Is this true?
>
> Eventually, could anyone point me to a working example about how to
> implement such a similar context?
>
>
> Thank you for the support.
> Antonello
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 10:25:27 2007
Return-Path: <java-user-return-29726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19875 invoked from network); 10 Aug 2007 10:25:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 10:25:26 -0000
Received: (qmail 87236 invoked by uid 500); 10 Aug 2007 10:25:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86242 invoked by uid 500); 10 Aug 2007 10:25:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86231 invoked by uid 99); 10 Aug 2007 10:25:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 03:25:19 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of antonelloprov@gmail.com designates 209.85.146.179 as permitted sender)
Received: from [209.85.146.179] (HELO wa-out-1112.google.com) (209.85.146.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 10:25:15 +0000
Received: by wa-out-1112.google.com with SMTP id j40so928389wah
        for <java-user@lucene.apache.org>; Fri, 10 Aug 2007 03:24:54 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=b9l4pzfbmtx/TVUQym2iJD7RbP3e5whY7S8w3JTMagSChA+v21Fz7w05W6Ty1LvDcTA3sRlGOGFWErF4NqtEByA5KaKZO5PP6HYN0BqQHb3sFVjJ0JmfeSVnJz6Lubc3sznCXG+lhTzCKgOR++zDsDGhKH7t+IY5H/Cd0yxseFE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=QTcFkrvsBKKiNCajwEX7nLF4E52jXolq2H3l9rTs3c7dyTEluDi0Iv3bXfLPf6dzWF9qSzF4j2mLC27fiM/5dqrXlSJMNx1LhzxnCiH0CGNw2zKWO64mXj+eyo10NrUtqeEMdcNem8PvzjtpdtPgpGfwvIz8Dz2SJb01uC9z7NU=
Received: by 10.115.109.1 with SMTP id l1mr2402665wam.1186741494266;
        Fri, 10 Aug 2007 03:24:54 -0700 (PDT)
Received: by 10.114.167.11 with HTTP; Fri, 10 Aug 2007 03:24:54 -0700 (PDT)
Message-ID: <dadfe18a0708100324m21a679dbo8f2720cb6f268fa6@mail.gmail.com>
Date: Fri, 10 Aug 2007 12:24:54 +0200
From: "Antonello Provenzano" <antonello@deveel.com>
Sender: antonelloprov@gmail.com
To: java-user@lucene.apache.org
Subject: =?GB2312?B?UmU6ILTwuLQ6ILTwuLQ6IEx1Y2VuZSBpbiA=?= =?GB2312?B?bGFyZ2UgZGF0YWJhc2UgY29udGV4dHM=?=
In-Reply-To: <8E5BA7FAF994C6409A8E074B78EB46770136533B@14sha-msg02.zm.sd.mediazone.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <8E5BA7FAF994C6409A8E074B78EB46770136533B@14sha-msg02.zm.sd.mediazone.com>
X-Google-Sender-Auth: 9daa0f604620faf4
X-Virus-Checked: Checked by ClamAV on apache.org

S2FpLAoKVGhlIGNvbnRleHQgSSdtIGdvaW5nIHRvIHdvcmsgd2l0aCByZXF1aXJlcyBhIGNvbnRp
bnVvdXMgYWRkaXRpb24gb2YKZG9jdW1lbnRzIHRvIHRoZSBpbmRleGVzLCBzaW5jZSBpdCdzIHVz
ZXItZHJpdmVuIGNvbnRlbnQsIGFuZCB0aGlzCndvdWxkIHJlcXVpcmUgdGhlIGNvbnRlbnQgdG8g
YmUgYWx3YXlzIHVwLXRvLWRhdGUuClRoaXMgaXMgdGhlIHByb2JsZW0gSSdtIGZhY2luZywgc2lu
Y2UgSSBjYW5ub3QgcmVidWlsZCBhIDFHYiAoYXQKbGVhc3QpIGluZGV4IGV2ZXJ5IHRpbWUgYSB1
c2VyIGluc2VydHMgYSBuZXcgZW50cnkgaW50byB0aGUgZGF0YWJhc2UuCgpJIGtub3cgRGlnZywg
Zm9yIGluc3RhbmNlLCBpcyB1c2luZyBMdWNlbmUgYXMgc2VhcmNoIGVuZ2luZTogc2luY2UgdGhl
CmFtb3VudCBvZiBkYXRhIHRoZXkncmUgZGVhbGluZyB3aXRoIGlzIG11Y2ggaGlnaGVyIHRoYW4g
bWluZSwgSSB3b3VsZApsaWtlIHRvIHVuZGVyc3RhbmQgdGhlIHdheSB0aGV5IHVzZWQgdG8gaW1w
bGVtZW50IHRoaXMga2luZCBvZgpzb2x1dGlvbi4KClRoYW5rIHlvdSBhZ2Fpbi4KQW50b25lbGxv
CgoKT24gOC8xMC8wNywgS2FpIEh1IDxrYWkuaHVAZHVzZWUuY24+IHdyb3RlOgo+IEFudG9uZWxs
bywKPiAgICAgICAgIFlvdSBhcmUgcmlnaHQsSSB0aGluayBsdWNlbmUgaW5kZXhzZWFyY2hlciB3
aWxsIHNlYXJjaCB0aGUgb2xkIGluZm9ybWF0aW9uIGlmIEluZGV4V3JpdGVyIHdhcyBub3QgY2xv
c2VkKEkgdGhpbmsgbHVjZW5lIHJlbGVhc2UgdGhlIExvY2sgaGVyZSksc28gSSBvbmx5IGFkZCBh
IGZldyBkb2N1bWVudHMgZXZlcnkgdGltZSBmcm9tIGJ1ZmZlciB0byBpbXBsZW1lbnQgaW5kZXgg
InJlYWwgdGltZSIuCj4KPiBrYWkKPgo+Cj4gt6K8/sjLOiBhbnRvbmVsbG9wcm92QGdtYWlsLmNv
bSBbbWFpbHRvOmFudG9uZWxsb3Byb3ZAZ21haWwuY29tXSC0+rHtIEFudG9uZWxsbyBQcm92ZW56
YW5vCj4gt6LLzcqxvOQ6IDIwMDfE6jjUwjEwyNUg0MfG2s7lIDE3OjU5Cj4gytW8/sjLOiBqYXZh
LXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcKPiDW98ziOiBSZTogtPC4tDogTHVjZW5lIGluIGxhcmdl
IGRhdGFiYXNlIGNvbnRleHRzCj4KPiBLYWksCj4KPiBUaGFua3MuIFRoZSBwcm9ibGVtIEkgc2Vl
IGl0J3MgdGhhdCBhbHRob3VnaCBJIGNhbiBhZGQgYSBEb2N1bWVudAo+IHRocm91Z2ggSW5kZXhX
cml0ZXIgb3IgSW5kZXhNb2RpZmllciwgdGhpcyB3b24ndCBiZSBzZWFyY2hhYmxlIHVudGlsCj4g
dGhlIGluZGV4IGlzIGNsb3NlZCBhbmQsIHBvc3NpYmx5LCBvcHRpbWl6ZWQsIHNpbmNlIHRoZSBz
Y29yZSBvZiB0aGUKPiBkb2N1bWVudCBpbiB0aGUgaW5kZXggY29udGV4dCBtdXN0IGJlIHJlLWNh
bGN1bGF0ZWQgb24gdGhlIGJhc2lzIG9mCj4gdGhlIHdob2xlIGNvbnRleHQuCj4KPiBJcyB0aGlz
IGFzc3VtcHRpb24gdHJ1ZT8gb3IgYW0gSSBjb21wbGV0ZWx5IHdyb25nPwo+Cj4gQ2hlZXJzLgo+
IEFudG9uZWxsbwo+Cj4KPiBPbiA4LzEwLzA3LCBLYWkgSHUgPGthaS5odUBkdXNlZS5jbj4gd3Jv
dGU6Cj4gPiBIaSwgQW50b25lbGxvCj4gPiAgICAgICAgIFlvdSBjYW4gdXNlIEluZGV4V3JpdGVy
LmFkZERvY3VtZW50KERvY3VtZW50IGRvY3VtZW50KSB0byBhZGQgc2luZ2xlIGRvY3VtZW50LHNh
bWUgdG8gdXBkYXRlLGRlbGV0ZSBvcGVyYXRpb24uCj4gPgo+ID4ga2FpCj4gPgo+ID4gLS0tLS3T
yrz+1K28/i0tLS0tCj4gPiC3orz+yMs6IEFudG9uZWxsbyBQcm92ZW56YW5vIFttYWlsdG86YW50
b25lbGxvcHJvdkBnbWFpbC5jb21dCj4gPiC3osvNyrG85DogMjAwN8TqONTCMTDI1SDQx8bazuUg
MTc6MDkKPiA+IMrVvP7IyzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnCj4gPiDW98ziOiBM
dWNlbmUgaW4gbGFyZ2UgZGF0YWJhc2UgY29udGV4dHMKPiA+Cj4gPiBIaSBUaGVyZSEKPiA+Cj4g
PiBJJ3ZlIGJlZW4gd29ya2luZyBmb3IgYSB3aGlsZSBvbiB0aGUgaW1wbGVtZW50YXRpb24gb2Yg
YSB3ZWJzaXRlCj4gPiBvcmllbnRlZCB0byBjb250ZW50cyB0aGF0IHdvdWxkIGNvbnRhaW4gbWls
bGlvbnMgb2YgZW50cmllcywgbW9zdCBvZgo+ID4gdGhlbSBpbmRleGFibGUgKHN1Y2ggYXMgZGVz
Y3JpcHRpb25zLCB0ZXh0cywgbmFtZXMsIGV0Yy4pLgo+ID4gVGhlIGlkZWFsIHNvbHV0aW9uIHRv
IG1ha2UgdGhlbSBzZWFyY2hhYmxlIHdvdWxkIGJlIHRvIHVzZSBMdWNlbmUgYXMKPiA+IGluZGV4
IGFuZCBzZWFyY2ggZW5naW5lLgo+ID4KPiA+IFRoZSByZWFzb24gSSdtIHBvc3RpbmcgdGhlIG1h
aWxpbmcgbGlzdCBpcyB0aGUgZm9sbG93aW5nOiBzaW5jZSBhbGwKPiA+IHRoZSBlbnRyaWVzIHdp
bGwgYmUgc3RvcmVkIGluIGEgZGF0YWJhc2UgKG1vc3QgbGlrZWx5IE15U1FMIElubm9EQiBvcgo+
ID4gT3JhY2xlKSwgd2hhdCdzIHRoZSBiZXN0IHRlY2huaXF1ZSB0byBpbXBsZW1lbnQgYSBzeXN0
ZW0gdGhhdCBpbmRleGVzCj4gPiBpbiAicmVhbCB0aW1lIiAoZWcuIHdoZW4gYW4gZW50cnkgaXMg
aW5zZXJ0ZWQgaW50byB0aGUgZGF0YWJzc2UpIHRoZQo+ID4gY29udGVudCBhbmQgbWFrZSBpdCBz
ZWFyY2hhYmxlPyBCYXNlZCBvbiBteSB1bmRlcnN0YW5kaW5nIG9mIEx1Y2VuZSwKPiA+IHN1Y2gg
dGhpcyB0aGluZyBpcyBub3QgcG9zc2libGUsIHNpbmNlIHRoZSBpbmRleCBtdXN0IGJlIHJlLWNy
ZWF0ZWQgdG8KPiA+IGJlIGFibGUgdG8gc2VhcmNoIHRoZSBpbmRleGVkIGNvbnRlbnRzLiBJcyB0
aGlzIHRydWU/Cj4gPgo+ID4gRXZlbnR1YWxseSwgY291bGQgYW55b25lIHBvaW50IG1lIHRvIGEg
d29ya2luZyBleGFtcGxlIGFib3V0IGhvdyB0bwo+ID4gaW1wbGVtZW50IHN1Y2ggYSBzaW1pbGFy
IGNvbnRleHQ/Cj4gPgo+ID4KPiA+IFRoYW5rIHlvdSBmb3IgdGhlIHN1cHBvcnQuCj4gPiBBbnRv
bmVsbG8KPiA+Cj4gPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiA+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGph
dmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+ID4gRm9yIGFkZGl0aW9uYWwg
Y29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPiA+Cj4g
Pgo+ID4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tCj4gPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXIt
dW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiA+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRz
LCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4gPgo+ID4KPgo+IC0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmli
ZUBsdWNlbmUuYXBhY2hlLm9yZwo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGph
dmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4KPgo=


From java-user-return-29727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 10:25:39 2007
Return-Path: <java-user-return-29727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19947 invoked from network); 10 Aug 2007 10:25:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 10:25:38 -0000
Received: (qmail 87777 invoked by uid 500); 10 Aug 2007 10:25:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87743 invoked by uid 500); 10 Aug 2007 10:25:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87732 invoked by uid 99); 10 Aug 2007 10:25:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 03:25:30 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a2.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 10:25:26 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a2.g.dreamhost.com (Postfix) with ESMTP id 4AB4C87D22
	for <java-user@lucene.apache.org>; Fri, 10 Aug 2007 03:25:03 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <3cb8ef760708092059w4aa4a6dl19d96b1c19a75765@mail.gmail.com>
References: <3cb8ef760708092059w4aa4a6dl19d96b1c19a75765@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <4F005160-BCA3-4298-9445-924B4897D4A0@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Update boost factor for indexed document using setBoost()
Date: Fri, 10 Aug 2007 06:24:59 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

You can't.  You have to delete and reindex the document with the new  
boost.

On Aug 9, 2007, at 11:59 PM, rohit saini wrote:

> Hi,
> could u pl. tell me how to update boost factor of already indexed  
> document
> using setBoost.
>
> Thanks & regards,
> Rohit
>
> -- 
> VANDE - MATRAM

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 10:30:12 2007
Return-Path: <java-user-return-29728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20578 invoked from network); 10 Aug 2007 10:30:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 10:30:11 -0000
Received: (qmail 90774 invoked by uid 500); 10 Aug 2007 10:30:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90730 invoked by uid 500); 10 Aug 2007 10:30:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90719 invoked by uid 99); 10 Aug 2007 10:30:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 03:30:03 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mrrohitsaini@gmail.com designates 209.85.132.241 as permitted sender)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 10:29:57 +0000
Received: by an-out-0708.google.com with SMTP id c5so141869anc
        for <java-user@lucene.apache.org>; Fri, 10 Aug 2007 03:29:36 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tm09znfljObSIGBD9T0Dx2JOBupAEeJOH2q1j4oCoJRCMIfQbCz9B60HEIGIxp60p9QRJA6hefZN92Wmxxf9w2jCqIbuErlntve8ceqqV6peVUScNicppNpSQxWjOPfp5rFK1Zh880lTI8Dl/UITgcVVBxTVT+Oz5BOj1HnQen0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UhlE3u3IXMkkmYYuPNxcRJvUzO1Qpm8+B8yE+tyMg+QE3DNFTsm6DqoY8P3oFXx6QDTFwCkzjBj0efVoQr0vNSyLkaqMKy8IzP8Qb5k2esYNrE2TS8OkPn6BQer7S1mJ8ycY1ERrHSzchQFiiO1RSOPBKzb2d8oefwDmBnxdT1A=
Received: by 10.100.93.5 with SMTP id q5mr2963939anb.1186741776443;
        Fri, 10 Aug 2007 03:29:36 -0700 (PDT)
Received: by 10.100.58.11 with HTTP; Fri, 10 Aug 2007 03:29:36 -0700 (PDT)
Message-ID: <3cb8ef760708100329v739cac4bm646891ca48e0bcf3@mail.gmail.com>
Date: Fri, 10 Aug 2007 15:59:36 +0530
From: "rohit saini" <mrrohitsaini@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Update boost factor for indexed document using setBoost()
In-Reply-To: <4F005160-BCA3-4298-9445-924B4897D4A0@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18816_19857230.1186741776411"
References: <3cb8ef760708092059w4aa4a6dl19d96b1c19a75765@mail.gmail.com>
	 <4F005160-BCA3-4298-9445-924B4897D4A0@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18816_19857230.1186741776411
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks a lot Grant
I have been trying to do so....could u please send me example of doing the
way u r talking .....

Again thanks so much...
Regards,
Rohit


On 8/10/07, Grant Ingersoll <gsingers@apache.org> wrote:
>
> You can't.  You have to delete and reindex the document with the new
> boost.
>
> On Aug 9, 2007, at 11:59 PM, rohit saini wrote:
>
> > Hi,
> > could u pl. tell me how to update boost factor of already indexed
> > document
> > using setBoost.
> >
> > Thanks & regards,
> > Rohit
> >
> > --
> > VANDE - MATRAM
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
VANDE - MATRAM

------=_Part_18816_19857230.1186741776411--

From java-user-return-29729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 10:31:02 2007
Return-Path: <java-user-return-29729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21523 invoked from network); 10 Aug 2007 10:31:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 10:31:02 -0000
Received: (qmail 93847 invoked by uid 500); 10 Aug 2007 10:30:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93820 invoked by uid 500); 10 Aug 2007 10:30:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93809 invoked by uid 99); 10 Aug 2007 10:30:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 03:30:53 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 212.174.130.108 is neither permitted nor denied by domain of enis.soz.nutch@gmail.com)
Received: from [212.174.130.108] (HELO mail.agmlab.com) (212.174.130.108)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 10:30:51 +0000
Received: from mail.agmlab.com (localhost [127.0.0.1])
	by mail.agmlab.com (Postfix) with ESMTP id 34DD6D428D
	for <java-user@lucene.apache.org>; Fri, 10 Aug 2007 13:30:41 +0300 (EEST)
Received: from [192.168.15.18] (unknown [192.168.15.18])
	by mail.agmlab.com (Postfix) with ESMTP id 11879D428A
	for <java-user@lucene.apache.org>; Fri, 10 Aug 2007 13:30:41 +0300 (EEST)
Message-ID: <46BC3E44.3020705@gmail.com>
Date: Fri, 10 Aug 2007 13:30:28 +0300
From: Enis Soztutar <enis.soz.nutch@gmail.com>
User-Agent: Thunderbird 1.5.0.12 (X11/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: How to keep user search history and how to turn it into information?
References: <52c3ddca0708100028qfcbd303m9d7e89b81692ff3b@mail.gmail.com>
In-Reply-To: <52c3ddca0708100028qfcbd303m9d7e89b81692ff3b@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: ClamAV using ClamSMTP
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Lukas Vlcek wrote:
> Hi,
>
> I would like to keep user search history data and I am looking for some
> ideas/advices/recommendations. In general I would like to talk about methods
> of storing such data, its structure and how to turn it into valuable
> information.
>
> As for the structure:
> ==============
> For now I don't have exact idea about what kind of information I should
> keep. I know that this is application specific but I believe there can be
> some common general patterns. as of now I think can be useful to keep is the
> following:
>
> 1) system time (time of issuing the query) and userid
> 2) original user query in raw form (untokenized)
> 3) expanded user query (both tokenized and untokenized can be useful)
> 4) query execution time
> 5) # of objects retrieved from index
> 6) # of total object count in index (this can change during time)
> 7) and possibly if user clicked some result and if so then which one (the
> hit number) and system time
>
>   
Remember that you may not want to store all the information available at 
runtime of the query, since it may result in great performance burden. 
For example you  may want to store the raw form of the query, but not 
parsed form since you can later parse the query anayway (unless you have 
some architecture change). Similarly 6 seemed not a good choice for 
me(again you can store the info externally). You can look at the common 
and extended log formats which are stored by the web server.

> As for the information I can get from this:
> =============================
> Such minimal data collection could show if the search engine serves users
> well or not (generally said). I should note that for the users in this case
> the only other option is to not use the search engine at all (so the data
> should not be biased by the fact that users are using alternative search
> method). I should be able to learn if:
>
> 1) there are bottleneck queries (Prefix,Fuzzy,Proximity queries...)
> 2) users are finding what they want (they can find it fast and results are
> ordered by properly defined relevance [my model is well tuned in terms of
> term weights] so the result they click is among first hits)
> 3) user can formulate queries well (do they issue queries which return all
> index documents or they can issue queries which return just a couple of
> documents)
> 4) ...?... etc...
>
>   
Web server log analysis is a very popular topic nowadays, and you can 
check for the literature, especially clickthrough data anaysis. All the 
major search engines has to interpret the data to improve their 
algorithms, and to learn from the latent "collective knowlege" hidden in 
web server logs.

> As for the storage method:
> ===================
> I was planning to keep such data in database but now it seems to me that it
> will be better to keep it directly in index (Lucene index). It seems to me
> that this approach would allow me for better fuzzy searches across history
> and extracting relevant objects and their count more efficiently (with
> benefit of the relevance based search on top of history search corpus).
>
> I think that more scalable solution would be to keep such data in pure flat
> file and then periodically recreate search history index (or more indices)
> from it (for example by Map-Reduce like task). Event better the flat file
> could be stored in distributer file system. However, for now I would like to
> start with something simple.
>   
I would rather suggest you to keep the logs in rolling flat files. An 
access to the database for each search will take lots of time. Then you 
may want to flush those logs to the db once a day if you indeed want to 
store the data in a relational way.

I infer that you want to mine the data, but you do not know what to 
mine, right? I suggest you to look at hadoop and pig. Pig is a is 
designed especially for this purpose.

> I know this is a complex topic...
>
> Regards,
> Lukas
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 11:07:46 2007
Return-Path: <java-user-return-29730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34243 invoked from network); 10 Aug 2007 11:07:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 11:07:45 -0000
Received: (qmail 25645 invoked by uid 500); 10 Aug 2007 11:07:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25157 invoked by uid 500); 10 Aug 2007 11:07:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25146 invoked by uid 99); 10 Aug 2007 11:07:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 04:07:37 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lukas.vlcek@gmail.com designates 209.85.198.189 as permitted sender)
Received: from [209.85.198.189] (HELO rv-out-0910.google.com) (209.85.198.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 11:07:34 +0000
Received: by rv-out-0910.google.com with SMTP id k20so519542rvb
        for <java-user@lucene.apache.org>; Fri, 10 Aug 2007 04:07:14 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Uqs8v9/kADToqm3irZqmsdN38p5mSnUDXgV8vAotxQ5MY/RpyLz9rdqqL5Im31PBY5N/WL4IRjd8cbTm4ZYTbSGP3iOeutaU7winV7k5zWKjVuAcNus7Ktwgwcj4UsUyT4r2zI4n9rbyQKgHn3s+pZxAp1JHZ/7vA7RjbKPZ4k8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=AGyZEjKwbf7yPooB6ONEByFug80Rr6JALVvCA6nNKevm1mfnVqSjIlQrDC7QoQlpjT5ZgdgjiNjzLhhMfEm+mPpL9AnDAQkxv+WA4Mcg88PQ0dmYt9tQCcbk7DpS2GcotvbxVHSZcvoU++D1rsyvA1bYHHu4hLr6G8QqevsRnH4=
Received: by 10.140.144.4 with SMTP id r4mr1349253rvd.1186744032929;
        Fri, 10 Aug 2007 04:07:12 -0700 (PDT)
Received: by 10.141.210.7 with HTTP; Fri, 10 Aug 2007 04:07:12 -0700 (PDT)
Message-ID: <52c3ddca0708100407x6a5aa303le32b0e058a7981f9@mail.gmail.com>
Date: Fri, 10 Aug 2007 13:07:12 +0200
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to keep user search history and how to turn it into information?
In-Reply-To: <46BC3E44.3020705@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5077_430685.1186744032892"
References: <52c3ddca0708100028qfcbd303m9d7e89b81692ff3b@mail.gmail.com>
	 <46BC3E44.3020705@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5077_430685.1186744032892
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Enis,

On 8/10/07, Enis Soztutar <enis.soz.nutch@gmail.com> wrote:
>
> Hi,
>
> Lukas Vlcek wrote:
> > Hi,
> >
> > I would like to keep user search history data and I am looking for some
> > ideas/advices/recommendations. In general I would like to talk about
> methods
> > of storing such data, its structure and how to turn it into valuable
> > information.
> >
> > As for the structure:
> > ==============
> > For now I don't have exact idea about what kind of information I should
> > keep. I know that this is application specific but I believe there can
> be
> > some common general patterns. as of now I think can be useful to keep is
> the
> > following:
> >
> > 1) system time (time of issuing the query) and userid
> > 2) original user query in raw form (untokenized)
> > 3) expanded user query (both tokenized and untokenized can be useful)
> > 4) query execution time
> > 5) # of objects retrieved from index
> > 6) # of total object count in index (this can change during time)
> > 7) and possibly if user clicked some result and if so then which one
> (the
> > hit number) and system time
> >
> >
> Remember that you may not want to store all the information available at
> runtime of the query, since it may result in great performance burden.
> For example you  may want to store the raw form of the query, but not
> parsed form since you can later parse the query anayway (unless you have
> some architecture change). Similarly 6 seemed not a good choice for
> me(again you can store the info externally). You can look at the common
> and extended log formats which are stored by the web server.


The problem is that all the information do chance in time. The index is
updated continuously which means that expanded queries and total number of
documents in index do change as well. But you are right that getting some of
this info can cause extra performance expenses (then it would be question of
later optimization of architecture design).


> > As for the information I can get from this:
> > =============================
> > Such minimal data collection could show if the search engine serves
> users
> > well or not (generally said). I should note that for the users in this
> case
> > the only other option is to not use the search engine at all (so the
> data
> > should not be biased by the fact that users are using alternative search
> > method). I should be able to learn if:
> >
> > 1) there are bottleneck queries (Prefix,Fuzzy,Proximity queries...)
> > 2) users are finding what they want (they can find it fast and results
> are
> > ordered by properly defined relevance [my model is well tuned in terms
> of
> > term weights] so the result they click is among first hits)
> > 3) user can formulate queries well (do they issue queries which return
> all
> > index documents or they can issue queries which return just a couple of
> > documents)
> > 4) ...?... etc...
> >
> >
> Web server log analysis is a very popular topic nowadays, and you can
> check for the literature, especially clickthrough data anaysis. All the
> major search engines has to interpret the data to improve their
> algorithms, and to learn from the latent "collective knowlege" hidden in
> web server logs.


It seems I have to do my homework and check CiteSeer for some papers :-)
Is there any paper you can recommend me? Some good one to start with?
What I want to achieve is far beyond the scope of the project I am working
on right now thus I cannot spend all my time on research (in spite of the
fact I would love to) so I can either a) use some tool which is already
available (open sourced) and directly fits my needs (I don't think there is
any tool which I could use out-of-box) or b) implement something new from
scratch but with just very limited functionality.

> As for the storage method:
> > ===================
> > I was planning to keep such data in database but now it seems to me that
> it
> > will be better to keep it directly in index (Lucene index). It seems to
> me
> > that this approach would allow me for better fuzzy searches across
> history
> > and extracting relevant objects and their count more efficiently (with
> > benefit of the relevance based search on top of history search corpus).
> >
> > I think that more scalable solution would be to keep such data in pure
> flat
> > file and then periodically recreate search history index (or more
> indices)
> > from it (for example by Map-Reduce like task). Event better the flat
> file
> > could be stored in distributer file system. However, for now I would
> like to
> > start with something simple.
> >
> I would rather suggest you to keep the logs in rolling flat files. An
> access to the database for each search will take lots of time. Then you
> may want to flush those logs to the db once a day if you indeed want to
> store the data in a relational way.
>
> I infer that you want to mine the data, but you do not know what to
> mine, right? I suggest you to look at hadoop and pig. Pig is a is
> designed especially for this purpose.


You've hit the nail on the head! I am very curious about how one can use
such data to improve user experience with search engine (given my project
schedule time constraints).

> I know this is a complex topic...
> >
> > Regards,
> > Lukas
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
Anyway, thanks for your reply!

BR
Lukas

------=_Part_5077_430685.1186744032892--

From java-user-return-29731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 11:21:14 2007
Return-Path: <java-user-return-29731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40560 invoked from network); 10 Aug 2007 11:21:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 11:21:12 -0000
Received: (qmail 37053 invoked by uid 500); 10 Aug 2007 11:21:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37008 invoked by uid 500); 10 Aug 2007 11:21:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36997 invoked by uid 99); 10 Aug 2007 11:21:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 04:21:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.224.39.197] (HELO mail.asahi-net.or.jp) (202.224.39.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 11:20:59 +0000
Received: from [127.0.0.1] (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail.asahi-net.or.jp (Postfix) with ESMTP id 1C300512D0
	for <java-user@lucene.apache.org>; Fri, 10 Aug 2007 20:20:38 +0900 (JST)
Message-ID: <46BC49A2.5090102@r.email.ne.jp>
Date: Fri, 10 Aug 2007 20:18:58 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Update boost factor for indexed document using setBoost()
References: <3cb8ef760708092059w4aa4a6dl19d96b1c19a75765@mail.gmail.com>	 <4F005160-BCA3-4298-9445-924B4897D4A0@apache.org> <3cb8ef760708100329v739cac4bm646891ca48e0bcf3@mail.gmail.com>
In-Reply-To: <3cb8ef760708100329v739cac4bm646891ca48e0bcf3@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Or, you can use FieldNormModifier class to modify existing fieldNorm:

$ java org.apache.lucene.index.FieldNormModifier path-to-index
your.Similarity field1 [field2 ...]

To do this, you have to write your own Similarity class to adjust boost,
via lengthNorm().

Thank you,

Koji

rohit saini wrote:
> Thanks a lot Grant
> I have been trying to do so....could u please send me example of doing the
> way u r talking .....
>
> Again thanks so much...
> Regards,
> Rohit
>
>
> On 8/10/07, Grant Ingersoll <gsingers@apache.org> wrote:
>   
>> You can't.  You have to delete and reindex the document with the new
>> boost.
>>
>> On Aug 9, 2007, at 11:59 PM, rohit saini wrote:
>>
>>     
>>> Hi,
>>> could u pl. tell me how to update boost factor of already indexed
>>> document
>>> using setBoost.
>>>
>>> Thanks & regards,
>>> Rohit
>>>
>>> --
>>> VANDE - MATRAM
>>>       
>> --------------------------
>> Grant Ingersoll
>> http://lucene.grantingersoll.com
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>
>   



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 11:24:08 2007
Return-Path: <java-user-return-29732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42503 invoked from network); 10 Aug 2007 11:24:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 11:24:07 -0000
Received: (qmail 45228 invoked by uid 500); 10 Aug 2007 11:23:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45194 invoked by uid 500); 10 Aug 2007 11:23:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45183 invoked by uid 99); 10 Aug 2007 11:23:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 04:23:59 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mrrohitsaini@gmail.com designates 209.85.132.249 as permitted sender)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 11:23:52 +0000
Received: by an-out-0708.google.com with SMTP id c5so143494anc
        for <java-user@lucene.apache.org>; Fri, 10 Aug 2007 04:23:31 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=BdFl4KhrCo2qj59lZSQ35D26IqKLqEHzh2nQ8QbbXQ51Zgk5TcE8vYA9MPJ3qnz4mqWRf/emfBG5NaKs9UWoshIVY2mqLBf0dEntZP+NnX8bkMtBADB9WVHy78PSin2/NJhawWS8qvsgvqZdC03GDHcuwKziYhnnDgkCfJy4F1E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KIRbJSuPvi7IGwn53HqUsio50x/yK2KsAbPZY2mFEjkzBCrKa5sujcqxCrvJORTwQ/ia9VIcdOF2Dgoh89Aa0zUPA1W5FbIawgWMQzI7vipVWT0P/Ezsry/9T+IO7Gza/igaZq8217RiK0uNatqHen9w0YtW9L3uF1WioPvyfIo=
Received: by 10.100.14.19 with SMTP id 19mr3040454ann.1186745011024;
        Fri, 10 Aug 2007 04:23:31 -0700 (PDT)
Received: by 10.100.58.11 with HTTP; Fri, 10 Aug 2007 04:23:30 -0700 (PDT)
Message-ID: <3cb8ef760708100423v2461f1d7q40be278fc1834cd6@mail.gmail.com>
Date: Fri, 10 Aug 2007 16:53:30 +0530
From: "rohit saini" <mrrohitsaini@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Update boost factor for indexed document using setBoost()
In-Reply-To: <46BC49A2.5090102@r.email.ne.jp>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19056_28663276.1186745010987"
References: <3cb8ef760708092059w4aa4a6dl19d96b1c19a75765@mail.gmail.com>
	 <4F005160-BCA3-4298-9445-924B4897D4A0@apache.org>
	 <3cb8ef760708100329v739cac4bm646891ca48e0bcf3@mail.gmail.com>
	 <46BC49A2.5090102@r.email.ne.jp>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19056_28663276.1186745010987
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

thanks koji but can u give me a example......it will be so nice of you...

thanks & regards
Rohit


On 8/10/07, Koji Sekiguchi <koji@r.email.ne.jp> wrote:
>
> Or, you can use FieldNormModifier class to modify existing fieldNorm:
>
> $ java org.apache.lucene.index.FieldNormModifier path-to-index
> your.Similarity field1 [field2 ...]
>
> To do this, you have to write your own Similarity class to adjust boost,
> via lengthNorm().
>
> Thank you,
>
> Koji
>
> rohit saini wrote:
> > Thanks a lot Grant
> > I have been trying to do so....could u please send me example of doing
> the
> > way u r talking .....
> >
> > Again thanks so much...
> > Regards,
> > Rohit
> >
> >
> > On 8/10/07, Grant Ingersoll <gsingers@apache.org> wrote:
> >
> >> You can't.  You have to delete and reindex the document with the new
> >> boost.
> >>
> >> On Aug 9, 2007, at 11:59 PM, rohit saini wrote:
> >>
> >>
> >>> Hi,
> >>> could u pl. tell me how to update boost factor of already indexed
> >>> document
> >>> using setBoost.
> >>>
> >>> Thanks & regards,
> >>> Rohit
> >>>
> >>> --
> >>> VANDE - MATRAM
> >>>
> >> --------------------------
> >> Grant Ingersoll
> >> http://lucene.grantingersoll.com
> >>
> >> Lucene Helpful Hints:
> >> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> >> http://wiki.apache.org/lucene-java/LuceneFAQ
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >
> >
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
VANDE - MATRAM

------=_Part_19056_28663276.1186745010987--

From java-user-return-29733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 12:00:47 2007
Return-Path: <java-user-return-29733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62519 invoked from network); 10 Aug 2007 12:00:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 12:00:45 -0000
Received: (qmail 95583 invoked by uid 500); 10 Aug 2007 12:00:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95546 invoked by uid 500); 10 Aug 2007 12:00:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95529 invoked by uid 99); 10 Aug 2007 12:00:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 05:00:37 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 212.174.130.108 is neither permitted nor denied by domain of enis.soz.nutch@gmail.com)
Received: from [212.174.130.108] (HELO mail.agmlab.com) (212.174.130.108)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 12:00:35 +0000
Received: from mail.agmlab.com (localhost [127.0.0.1])
	by mail.agmlab.com (Postfix) with ESMTP id 3F8ADD428D
	for <java-user@lucene.apache.org>; Fri, 10 Aug 2007 15:00:23 +0300 (EEST)
Received: from [192.168.15.18] (unknown [192.168.15.18])
	by mail.agmlab.com (Postfix) with ESMTP id 199B2D428A
	for <java-user@lucene.apache.org>; Fri, 10 Aug 2007 15:00:23 +0300 (EEST)
Message-ID: <46BC534A.207@gmail.com>
Date: Fri, 10 Aug 2007 15:00:10 +0300
From: Enis Soztutar <enis.soz.nutch@gmail.com>
User-Agent: Thunderbird 1.5.0.12 (X11/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: How to keep user search history and how to turn it into information?
References: <52c3ddca0708100028qfcbd303m9d7e89b81692ff3b@mail.gmail.com>	 <46BC3E44.3020705@gmail.com> <52c3ddca0708100407x6a5aa303le32b0e058a7981f9@mail.gmail.com>
In-Reply-To: <52c3ddca0708100407x6a5aa303le32b0e058a7981f9@mail.gmail.com>
Content-Type: multipart/alternative;
 boundary="------------000508000203060305020004"
X-Virus-Scanned: ClamAV using ClamSMTP
X-Virus-Checked: Checked by ClamAV on apache.org

--------------000508000203060305020004
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit



Lukas Vlcek wrote:
> Hi Enis,
>   
Hi again,
> On 8/10/07, Enis Soztutar <enis.soz.nutch@gmail.com> wrote:
>   
>> Hi,
>>
>> Lukas Vlcek wrote:
>>     
>>> Hi,
>>>
>>> I would like to keep user search history data and I am looking for some
>>> ideas/advices/recommendations. In general I would like to talk about
>>>       
>> methods
>>     
>>> of storing such data, its structure and how to turn it into valuable
>>> information.
>>>
>>> As for the structure:
>>> ==============
>>> For now I don't have exact idea about what kind of information I should
>>> keep. I know that this is application specific but I believe there can
>>>       
>> be
>>     
>>> some common general patterns. as of now I think can be useful to keep is
>>>       
>> the
>>     
>>> following:
>>>
>>> 1) system time (time of issuing the query) and userid
>>> 2) original user query in raw form (untokenized)
>>> 3) expanded user query (both tokenized and untokenized can be useful)
>>> 4) query execution time
>>> 5) # of objects retrieved from index
>>> 6) # of total object count in index (this can change during time)
>>> 7) and possibly if user clicked some result and if so then which one
>>>       
>> (the
>>     
>>> hit number) and system time
>>>
>>>
>>>       
>> Remember that you may not want to store all the information available at
>> runtime of the query, since it may result in great performance burden.
>> For example you  may want to store the raw form of the query, but not
>> parsed form since you can later parse the query anayway (unless you have
>> some architecture change). Similarly 6 seemed not a good choice for
>> me(again you can store the info externally). You can look at the common
>> and extended log formats which are stored by the web server.
>>     
>
>
> The problem is that all the information do chance in time. The index is
> updated continuously which means that expanded queries and total number of
> documents in index do change as well. But you are right that getting some of
> this info can cause extra performance expenses (then it would be question of
> later optimization of architecture design).
>   
Well i think you can at least store the size of the index in another 
file, and log to the changes in the index size from there. The 
motivation for this comes from storage efficiency. You may not want to 
store the same index size over and over again in n queries before the 
index size changes, but store it once, with the time, per change.
>
>   
>>> As for the information I can get from this:
>>> =============================
>>> Such minimal data collection could show if the search engine serves
>>>       
>> users
>>     
>>> well or not (generally said). I should note that for the users in this
>>>       
>> case
>>     
>>> the only other option is to not use the search engine at all (so the
>>>       
>> data
>>     
>>> should not be biased by the fact that users are using alternative search
>>> method). I should be able to learn if:
>>>
>>> 1) there are bottleneck queries (Prefix,Fuzzy,Proximity queries...)
>>> 2) users are finding what they want (they can find it fast and results
>>>       
>> are
>>     
>>> ordered by properly defined relevance [my model is well tuned in terms
>>>       
>> of
>>     
>>> term weights] so the result they click is among first hits)
>>> 3) user can formulate queries well (do they issue queries which return
>>>       
>> all
>>     
>>> index documents or they can issue queries which return just a couple of
>>> documents)
>>> 4) ...?... etc...
>>>
>>>
>>>       
>> Web server log analysis is a very popular topic nowadays, and you can
>> check for the literature, especially clickthrough data anaysis. All the
>> major search engines has to interpret the data to improve their
>> algorithms, and to learn from the latent "collective knowlege" hidden in
>> web server logs.
>>     
>
>
> It seems I have to do my homework and check CiteSeer for some papers :-)
> Is there any paper you can recommend me? Some good one to start with?
> What I want to achieve is far beyond the scope of the project I am working
> on right now thus I cannot spend all my time on research (in spite of the
> fact I would love to) so I can either a) use some tool which is already
> available (open sourced) and directly fits my needs (I don't think there is
> any tool which I could use out-of-box) or b) implement something new from
> scratch but with just very limited functionality.
>   
You do not have to implement this from scratch. You just have to specify 
your data mining tasks, then write scripts(in pig latin) or write 
map-reduce programs (in hadoop). Either of these are not that hard. I do 
not think that there is any tool which may satisfy all you information 
needs. So at the risk of repeating myself i suggest you to look at pig 
at write some scripts to mine the data. 

Coming to literature, i can hardly suggest any specific paper, since i 
am not very into the subject either. But i suggest you to skip this 
step, first build you data structures (log format), then start 
extracting some naive statistical information from the data. For 
example, initially you may want to know
1. avarage query execution time
2. avarage query execution time per query type(boolean, fuzzy, etc.)
3. histogram of query types (how many boolean queries, etc.)
4. avarage #of queries per user session.
5. etc.

The list can go on and on depending on the data you have and information 
you want. These kind of simple statistical analysis can be very easy to 
extract and relatively easy to interpret.

>   
>> As for the storage method:
>>     
>>> ===================
>>> I was planning to keep such data in database but now it seems to me that
>>>       
>> it
>>     
>>> will be better to keep it directly in index (Lucene index). It seems to
>>>       
>> me
>>     
>>> that this approach would allow me for better fuzzy searches across
>>>       
>> history
>>     
>>> and extracting relevant objects and their count more efficiently (with
>>> benefit of the relevance based search on top of history search corpus).
>>>
>>> I think that more scalable solution would be to keep such data in pure
>>>       
>> flat
>>     
>>> file and then periodically recreate search history index (or more
>>>       
>> indices)
>>     
>>> from it (for example by Map-Reduce like task). Event better the flat
>>>       
>> file
>>     
>>> could be stored in distributer file system. However, for now I would
>>>       
>> like to
>>     
>>> start with something simple.
>>>
>>>       
>> I would rather suggest you to keep the logs in rolling flat files. An
>> access to the database for each search will take lots of time. Then you
>> may want to flush those logs to the db once a day if you indeed want to
>> store the data in a relational way.
>>
>> I infer that you want to mine the data, but you do not know what to
>> mine, right? I suggest you to look at hadoop and pig. Pig is a is
>> designed especially for this purpose.
>>     
>
>
> You've hit the nail on the head! I am very curious about how one can use
> such data to improve user experience with search engine (given my project
> schedule time constraints).
>
>   
>> I know this is a complex topic...
>>     
>>> Regards,
>>> Lukas
>>>
>>>
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
> Anyway, thanks for your reply!
>
> BR
> Lukas
>
>   

--------------000508000203060305020004--

From java-user-return-29734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 12:57:23 2007
Return-Path: <java-user-return-29734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80393 invoked from network); 10 Aug 2007 12:57:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 12:57:22 -0000
Received: (qmail 83842 invoked by uid 500); 10 Aug 2007 12:57:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83805 invoked by uid 500); 10 Aug 2007 12:57:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83787 invoked by uid 99); 10 Aug 2007 12:57:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 05:57:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lukas.vlcek@gmail.com designates 209.85.198.187 as permitted sender)
Received: from [209.85.198.187] (HELO rv-out-0910.google.com) (209.85.198.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 12:56:56 +0000
Received: by rv-out-0910.google.com with SMTP id k20so535406rvb
        for <java-user@lucene.apache.org>; Fri, 10 Aug 2007 05:56:35 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=q+H2XGxKADhM0t9EiSmshAudF9+AqKY1QbMFqvCExGazNIDvYrDw9eypQKOpbIv5dpXPdMH5l9BjKzm5xL+sRQ44WM7RgKj5yNbSHx2LSn2VKcPjwGRMa051NFFVciq8rXwZsUy3gZ62MGYOKF3fddNWwgLuDLUbUL9M8Rs12Ks=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DT2ShYNhKMvmvdkGTevEL+Xu1kW/5LAGspUL6JWwu3H5WAsbJAKqo+pOIIOnOdij0ivHFpQAkyZ7X/wCNHxQ758qEzmeHG1Txwu/tBcG+pfG7CvD9BYGhmhm199qiTCIpxpE3uzKR4HDLaddRhAC90iwgDO4jFSvT7qGs4yGwVo=
Received: by 10.141.63.20 with SMTP id q20mr1379003rvk.1186750595672;
        Fri, 10 Aug 2007 05:56:35 -0700 (PDT)
Received: by 10.141.210.7 with HTTP; Fri, 10 Aug 2007 05:56:35 -0700 (PDT)
Message-ID: <52c3ddca0708100556w14b9f852yde1357f8de2b72d3@mail.gmail.com>
Date: Fri, 10 Aug 2007 14:56:35 +0200
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to keep user search history and how to turn it into information?
In-Reply-To: <46BC534A.207@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5537_17048307.1186750595634"
References: <52c3ddca0708100028qfcbd303m9d7e89b81692ff3b@mail.gmail.com>
	 <46BC3E44.3020705@gmail.com>
	 <52c3ddca0708100407x6a5aa303le32b0e058a7981f9@mail.gmail.com>
	 <46BC534A.207@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5537_17048307.1186750595634
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Enis,

Thanks for your time.
I gave a quick glance at Pig and it seems good (seems it is directly based
on Hadoop which I am starting to play with :-). It obvious that a huge
amount of data (like user queries or access logs) should be stored in flat
files which makes it convenient for further analysis by Pig (or directly by
Hadoop based tasks) or other tools. And I agree with you that size of the
index can be tracked in journal based style in separated log rather then
with every since user query. That is for the easier part of my original
question :-)

The true art starts with the mining tasks itself. How to efficiently use
such data for bettering user experience with the search engine... one potion
is to use such data for search engine tuning, which is more technical
oriented application (speeding up slow queries, reshaping the index, ...).
But I am looking for more IR oriented application of this information. I
remember that once I read on Lucene mail list that somebody suggested
utilization of previously issued user queries for suggestions of
similar/other/related queries or for typo checking. While there are well
discussed methods (moreLikeThis, did you mean, similarity, ... etc) in
Lucene community I am still wondering if once can use user search history
data for such purpose and if the answer is yes then how (practical examples
are welcomed).

Lukas

On 8/10/07, Enis Soztutar <enis.soz.nutch@gmail.com> wrote:
>
>
>
> Lukas Vlcek wrote:
> > Hi Enis,
> >
> Hi again,
> > On 8/10/07, Enis Soztutar <enis.soz.nutch@gmail.com> wrote:
> >
> >> Hi,
> >>
> >> Lukas Vlcek wrote:
> >>
> >>> Hi,
> >>>
> >>> I would like to keep user search history data and I am looking for
> some
> >>> ideas/advices/recommendations. In general I would like to talk about
> >>>
> >> methods
> >>
> >>> of storing such data, its structure and how to turn it into valuable
> >>> information.
> >>>
> >>> As for the structure:
> >>> ==============
> >>> For now I don't have exact idea about what kind of information I
> should
> >>> keep. I know that this is application specific but I believe there can
> >>>
> >> be
> >>
> >>> some common general patterns. as of now I think can be useful to keep
> is
> >>>
> >> the
> >>
> >>> following:
> >>>
> >>> 1) system time (time of issuing the query) and userid
> >>> 2) original user query in raw form (untokenized)
> >>> 3) expanded user query (both tokenized and untokenized can be useful)
> >>> 4) query execution time
> >>> 5) # of objects retrieved from index
> >>> 6) # of total object count in index (this can change during time)
> >>> 7) and possibly if user clicked some result and if so then which one
> >>>
> >> (the
> >>
> >>> hit number) and system time
> >>>
> >>>
> >>>
> >> Remember that you may not want to store all the information available
> at
> >> runtime of the query, since it may result in great performance burden.
> >> For example you  may want to store the raw form of the query, but not
> >> parsed form since you can later parse the query anayway (unless you
> have
> >> some architecture change). Similarly 6 seemed not a good choice for
> >> me(again you can store the info externally). You can look at the common
> >> and extended log formats which are stored by the web server.
> >>
> >
> >
> > The problem is that all the information do chance in time. The index is
> > updated continuously which means that expanded queries and total number
> of
> > documents in index do change as well. But you are right that getting
> some of
> > this info can cause extra performance expenses (then it would be
> question of
> > later optimization of architecture design).
> >
> Well i think you can at least store the size of the index in another
> file, and log to the changes in the index size from there. The
> motivation for this comes from storage efficiency. You may not want to
> store the same index size over and over again in n queries before the
> index size changes, but store it once, with the time, per change.
> >
> >
> >>> As for the information I can get from this:
> >>> =============================
> >>> Such minimal data collection could show if the search engine serves
> >>>
> >> users
> >>
> >>> well or not (generally said). I should note that for the users in this
> >>>
> >> case
> >>
> >>> the only other option is to not use the search engine at all (so the
> >>>
> >> data
> >>
> >>> should not be biased by the fact that users are using alternative
> search
> >>> method). I should be able to learn if:
> >>>
> >>> 1) there are bottleneck queries (Prefix,Fuzzy,Proximity queries...)
> >>> 2) users are finding what they want (they can find it fast and results
> >>>
> >> are
> >>
> >>> ordered by properly defined relevance [my model is well tuned in terms
> >>>
> >> of
> >>
> >>> term weights] so the result they click is among first hits)
> >>> 3) user can formulate queries well (do they issue queries which return
> >>>
> >> all
> >>
> >>> index documents or they can issue queries which return just a couple
> of
> >>> documents)
> >>> 4) ...?... etc...
> >>>
> >>>
> >>>
> >> Web server log analysis is a very popular topic nowadays, and you can
> >> check for the literature, especially clickthrough data anaysis. All the
> >> major search engines has to interpret the data to improve their
> >> algorithms, and to learn from the latent "collective knowlege" hidden
> in
> >> web server logs.
> >>
> >
> >
> > It seems I have to do my homework and check CiteSeer for some papers :-)
> > Is there any paper you can recommend me? Some good one to start with?
> > What I want to achieve is far beyond the scope of the project I am
> working
> > on right now thus I cannot spend all my time on research (in spite of
> the
> > fact I would love to) so I can either a) use some tool which is already
> > available (open sourced) and directly fits my needs (I don't think there
> is
> > any tool which I could use out-of-box) or b) implement something new
> from
> > scratch but with just very limited functionality.
> >
> You do not have to implement this from scratch. You just have to specify
> your data mining tasks, then write scripts(in pig latin) or write
> map-reduce programs (in hadoop). Either of these are not that hard. I do
> not think that there is any tool which may satisfy all you information
> needs. So at the risk of repeating myself i suggest you to look at pig
> at write some scripts to mine the data.
>
> Coming to literature, i can hardly suggest any specific paper, since i
> am not very into the subject either. But i suggest you to skip this
> step, first build you data structures (log format), then start
> extracting some naive statistical information from the data. For
> example, initially you may want to know
> 1. avarage query execution time
> 2. avarage query execution time per query type(boolean, fuzzy, etc.)
> 3. histogram of query types (how many boolean queries, etc.)
> 4. avarage #of queries per user session.
> 5. etc.
>
> The list can go on and on depending on the data you have and information
> you want. These kind of simple statistical analysis can be very easy to
> extract and relatively easy to interpret.
>
> >
> >> As for the storage method:
> >>
> >>> ===================
> >>> I was planning to keep such data in database but now it seems to me
> that
> >>>
> >> it
> >>
> >>> will be better to keep it directly in index (Lucene index). It seems
> to
> >>>
> >> me
> >>
> >>> that this approach would allow me for better fuzzy searches across
> >>>
> >> history
> >>
> >>> and extracting relevant objects and their count more efficiently (with
> >>> benefit of the relevance based search on top of history search
> corpus).
> >>>
> >>> I think that more scalable solution would be to keep such data in pure
> >>>
> >> flat
> >>
> >>> file and then periodically recreate search history index (or more
> >>>
> >> indices)
> >>
> >>> from it (for example by Map-Reduce like task). Event better the flat
> >>>
> >> file
> >>
> >>> could be stored in distributer file system. However, for now I would
> >>>
> >> like to
> >>
> >>> start with something simple.
> >>>
> >>>
> >> I would rather suggest you to keep the logs in rolling flat files. An
> >> access to the database for each search will take lots of time. Then you
> >> may want to flush those logs to the db once a day if you indeed want to
> >> store the data in a relational way.
> >>
> >> I infer that you want to mine the data, but you do not know what to
> >> mine, right? I suggest you to look at hadoop and pig. Pig is a is
> >> designed especially for this purpose.
> >>
> >
> >
> > You've hit the nail on the head! I am very curious about how one can use
> > such data to improve user experience with search engine (given my
> project
> > schedule time constraints).
> >
> >
> >> I know this is a complex topic...
> >>
> >>> Regards,
> >>> Lukas
> >>>
> >>>
> >>>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> > Anyway, thanks for your reply!
> >
> > BR
> > Lukas
> >
> >
>

------=_Part_5537_17048307.1186750595634--

From java-user-return-29735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 13:34:35 2007
Return-Path: <java-user-return-29735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97464 invoked from network); 10 Aug 2007 13:34:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 13:34:21 -0000
Received: (qmail 51467 invoked by uid 500); 10 Aug 2007 13:34:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51427 invoked by uid 500); 10 Aug 2007 13:34:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51416 invoked by uid 99); 10 Aug 2007 13:34:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 06:34:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.189 as permitted sender)
Received: from [209.85.134.189] (HELO mu-out-0910.google.com) (209.85.134.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 13:34:09 +0000
Received: by mu-out-0910.google.com with SMTP id g7so829521muf
        for <java-user@lucene.apache.org>; Fri, 10 Aug 2007 06:33:47 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FKj8IMY4gN+dF7cQBiurjgHkLie/ls3nTlU6ob6NL9ECCvo8qEgFgWDaopY0Bd8vlLf2Hyd550VmoQn+GAcdH/3zLKarqb4YCWs7eme/K2Gfau8YpgXNQ6MmYT6GpYVtFVgm7RhFNKb26RI6EStN76mV3VfQKOF9HXeFi+0tU5I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=iqArjcysoyXo04IhonWUu+lUJeScCrBzRWjVVc1RzmMlYsvFPbk65BLBBelqket2Itx+yciuix0+HnJaQIxE27thcubRYY2au1yulE+xa0u61kNpeznu2Koza2CukQ6VdTO9IJ4wMvuWUWTXY1dd8efHjkkKo0uxchzAKmgOZJQ=
Received: by 10.82.134.12 with SMTP id h12mr3858463bud.1186752827446;
        Fri, 10 Aug 2007 06:33:47 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Fri, 10 Aug 2007 06:33:47 -0700 (PDT)
Message-ID: <359a92830708100633u43c96e50se5e69cec623b371a@mail.gmail.com>
Date: Fri, 10 Aug 2007 09:33:47 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: formalizing a query
In-Reply-To: <4479cfa0708092120u761b383w4655ae5dd2195e1b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10970_20441747.1186752827419"
References: <4479cfa0708092120u761b383w4655ae5dd2195e1b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10970_20441747.1186752827419
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I *strongly* suggest you get a copy of Luke. It'll allow you to form queries
and see the results and you can then answer this kind of question as well
as many others.

Meanwhile, please see
http://lucene.apache.org/java/docs/queryparsersyntax.html

Erick

On 8/10/07, Abu Abdulla alhanbali <montaqa@gmail.com> wrote:
>
> Hi,
>
> I need your help in formalizing this query:
>
> (field1:query1 AND field2:query2) OR
> (field1:query3 AND field2:query4) OR
> (field1:query5 AND field2:query6) OR
> (field1:query7 AND field2:query8) ... etc
>
> Please give the code since I'm new to lucene
> how we can use MultiFieldQueryParser or any parser to do the job
>
> greatly appreciated
>

------=_Part_10970_20441747.1186752827419--

From java-user-return-29736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 13:47:24 2007
Return-Path: <java-user-return-29736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1713 invoked from network); 10 Aug 2007 13:47:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 13:47:22 -0000
Received: (qmail 81554 invoked by uid 500); 10 Aug 2007 13:47:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80985 invoked by uid 500); 10 Aug 2007 13:47:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80974 invoked by uid 99); 10 Aug 2007 13:47:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 06:47:14 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 13:47:10 +0000
Received: by nf-out-0910.google.com with SMTP id d3so254898nfc
        for <java-user@lucene.apache.org>; Fri, 10 Aug 2007 06:46:49 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Sde1xrWztlPa4Po3EGq/ujMFxXcuaFgzfJsvpU1NyaKo/Y4kkrXzNMVNMzpsxL95bBMKMKrtfetv2xAh+Nxv85QstuuvwgBQBhqqUXqvCgrfu5dgjOOmkNlPVkw0ZYWQHt33QD7LhpcHQmQeia7kqfQSyCnpPaqW2gzoTyi+mBE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=CCZ8M57c80XstebWSHBHdmapS79LAPIA9jC2NwAr9u96eerEIqHOMBUtSaVJ5ZvL6Po0lDTYBtan7egcdTprvVvfIZTmt/bcu/1EUTDo/PYY9lU0pVx9hYzUYerrR76OcJX91oFIDXTcU+Bmq2TRKSHnHN4hoh9tiSOmIy8w28A=
Received: by 10.82.105.13 with SMTP id d13mr563265buc.1186753608555;
        Fri, 10 Aug 2007 06:46:48 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Fri, 10 Aug 2007 06:46:48 -0700 (PDT)
Message-ID: <359a92830708100646u65fcf633o107a36ae3a04834f@mail.gmail.com>
Date: Fri, 10 Aug 2007 09:46:48 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: =?GB2312?B?UmU6ILTwuLQ6ILTwuLQ6IEx1Y2VuZSBpbiA=?= =?GB2312?B?bGFyZ2UgZGF0YWJhc2UgY29udGV4dHM=?=
In-Reply-To: <dadfe18a0708100324m21a679dbo8f2720cb6f268fa6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11118_29606395.1186753608511"
References: <8E5BA7FAF994C6409A8E074B78EB46770136533B@14sha-msg02.zm.sd.mediazone.com>
	 <dadfe18a0708100324m21a679dbo8f2720cb6f268fa6@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11118_29606395.1186753608511
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: base64
Content-Disposition: inline

V2VsbCwgY2xvc2luZy9vcGVuaW5nIGFuIGluZGV4IGlzIE1VQ0ggbGVzcyBleHBlbnNpdmUgdGhh
bgpyZWJ1aWxkaW5nIHRoZSB3aG9sZSB0aGluZywgc28gSSBkb24ndCB1bmRlcnN0YW5kIHBhcnQg
b2YgeW91cgpzdGF0ZW1lbnRzLi4uLgoKSXQgKm1heSogKGJ1dCBJIGhhdmVuJ3QgdHJpZWQgaXQp
IGJlIHBvc3NpYmxlIHRvIGZsdXNoIHRoZSB3cml0ZXIgcmF0aGVyCnRoYW4KY2xvc2Uvb3BlbiBp
dC4gQnV0LCB5b3UgTVVTVCBjbG9zZS9yZW9wZW4gdGhlIHJlYWRlciB5b3Ugc2VhcmNoIHdpdGgK
ZXZlbiBpZiBmbHVzaCB3b3JrcyBsaWtlIEkgdGhpbmsgaXQgZG9lcy4KCkJ1dCBpdCdzIGFsc28g
cG9zc2libGUgdG8gdXNlIGEgdHdvIHRpZXJlZCBhcHByb2FjaC4gMUcgaXNuJ3QgYWxsIHRoYXQg
YmlnLgpDb3VsZAp5b3UgcmVhZCBpdCBpbnRvIGEgUkFNRGlyIGFuZCB1c2UgdGhhdCBmb3IgeW91
ciBzZWFyY2hlcz8gVGhlbiwgd2hlbiB5b3UgYWRkCmRhdGEsIHlvdSBhZGQgaXQgdG8gKmJvdGgq
IGluZGV4ZXMsIGJ1dCBjbG9zZS9vcGVuIHRoZSBSQU1kaXIgZm9yIHNlYXJjaGluZy4KCkl0J3Mg
YWxzbyBwb3NzaWJsZSB0byBrZWVwIHRoZSBSQU1kaXIgYXMgdGhlIGRlbHRhIGJldHdlZW4gdGhl
IEZTZGlyIGFuZAoiY3VycmVudCIgc3RhdGVzIG9mIHlvdXIgaW5kZXguIEFkZCB0byBib3RoIGFu
ZCBzZWFyY2ggYm90aC4gQWx0aG91Z2gKZGVsZXRlcyBtYXkgYmUgYSBwcm9ibGVtIGhlcmUuCgpZ
b3UgaGF2ZW4ndCBzcGVjaWZpZWQgaG93IG9mdGVuIHlvdSBleHBlY3QgY2hhbmdlcywgdGhvdWdo
LiAxMDAvc2Vjb25kPwoxL21pbnV0ZT8gSG93IHJlYWwgaXMgInJlYWwgdGltZSI/IFlvdSBjb3Vs
ZCBkbyBzb21ldGhpbmcgbGlrZSB3YXJtIHVwCmEgbmV3IHJlYWRlciBpbiB0aGUgYmFja2dyb3Vu
ZCB3aGVuZXZlciB5b3UgZGVjaWRlZCB5b3UgbmVlZGVkIHRvIGJlCmFic29sdXRlbHkgdXAgdG8g
ZGF0ZSBhbmQgc3dhcCB5b3VyICJsaXZlIiByZWFkZXIgZm9yIHRoZSBuZXdseSB3YXJtZWQgdXAK
b25lIHdoZW5ldmVyIHlvdSBkZWVtZWQgaXQgd2lzZS4KCk9yIHlvdSBjb3VsZCBqdXN0IGNsb3Nl
L29wZW4geW91ciByZWFkZXIgYWZ0ZXIgZWFjaCBtb2RpZmljYXRpb24sIGZpcmUgb2ZmIGEKCmNv
dXBsZSBvZiB3YXJtdXAgcXVlcmllcyBhdCBpdCBhbmQgbGV0IHRoZSB1c2VycyBsaXZlIHdpdGgg
c2xvdyByZXNwb25zZXMKaWYgdGhleSBoYXBwZW4gdG8gc2VhcmNoIGJlZm9yZSB5b3VyIHdhcm0t
dXAgcXVlcmllcyBjb21wbGV0ZWQuCgpUaGUgcG9pbnQgaXMgdGhhdCB0aGVyZSBhcmUgbWFueSBv
cHRpb25zLCBidXQgdG8gc3VnZ2VzdCB0aGUgYmVzdCBvbmUsIHdlCm5lZWQgc29tZSB0aHJvdWdo
cHV0IG51bWJlcnMgYW5kIGEgYmV0dGVyIGRlZmluaXRpb24gb2Ygd2hhdCAicmVhbCB0aW1lIgpt
ZWFucy4gSXMgYSBvbmUgbWludXRlIGRlbGF5IGFjY2VwdGFibGU/IDEwIHNlY29uZHM/IGEgbWls
bGlzZWNvbmQ/CnRoZSBhbnN3ZXIgZGVmaW5lcyB0aGUgc2NvcGUgb2YgcmVhc29uYWJsZSBzb2x1
dGlvbnMuLi4uLgoKQmVzdApFcmljawoKT24gOC8xMC8wNywgQW50b25lbGxvIFByb3Zlbnphbm8g
PGFudG9uZWxsb0BkZXZlZWwuY29tPiB3cm90ZToKPgo+IEthaSwKPgo+IFRoZSBjb250ZXh0IEkn
bSBnb2luZyB0byB3b3JrIHdpdGggcmVxdWlyZXMgYSBjb250aW51b3VzIGFkZGl0aW9uIG9mCj4g
ZG9jdW1lbnRzIHRvIHRoZSBpbmRleGVzLCBzaW5jZSBpdCdzIHVzZXItZHJpdmVuIGNvbnRlbnQs
IGFuZCB0aGlzCj4gd291bGQgcmVxdWlyZSB0aGUgY29udGVudCB0byBiZSBhbHdheXMgdXAtdG8t
ZGF0ZS4KPiBUaGlzIGlzIHRoZSBwcm9ibGVtIEknbSBmYWNpbmcsIHNpbmNlIEkgY2Fubm90IHJl
YnVpbGQgYSAxR2IgKGF0Cj4gbGVhc3QpIGluZGV4IGV2ZXJ5IHRpbWUgYSB1c2VyIGluc2VydHMg
YSBuZXcgZW50cnkgaW50byB0aGUgZGF0YWJhc2UuCj4KPiBJIGtub3cgRGlnZywgZm9yIGluc3Rh
bmNlLCBpcyB1c2luZyBMdWNlbmUgYXMgc2VhcmNoIGVuZ2luZTogc2luY2UgdGhlCj4gYW1vdW50
IG9mIGRhdGEgdGhleSdyZSBkZWFsaW5nIHdpdGggaXMgbXVjaCBoaWdoZXIgdGhhbiBtaW5lLCBJ
IHdvdWxkCj4gbGlrZSB0byB1bmRlcnN0YW5kIHRoZSB3YXkgdGhleSB1c2VkIHRvIGltcGxlbWVu
dCB0aGlzIGtpbmQgb2YKPiBzb2x1dGlvbi4KPgo+IFRoYW5rIHlvdSBhZ2Fpbi4KPiBBbnRvbmVs
bG8KPgo+Cj4gT24gOC8xMC8wNywgS2FpIEh1IDxrYWkuaHVAZHVzZWUuY24+IHdyb3RlOgo+ID4g
QW50b25lbGxvLAo+ID4gICAgICAgICBZb3UgYXJlIHJpZ2h0LEkgdGhpbmsgbHVjZW5lIGluZGV4
c2VhcmNoZXIgd2lsbCBzZWFyY2ggdGhlIG9sZAo+IGluZm9ybWF0aW9uIGlmIEluZGV4V3JpdGVy
IHdhcyBub3QgY2xvc2VkKEkgdGhpbmsgbHVjZW5lIHJlbGVhc2UgdGhlIExvY2sKPiBoZXJlKSxz
byBJIG9ubHkgYWRkIGEgZmV3IGRvY3VtZW50cyBldmVyeSB0aW1lIGZyb20gYnVmZmVyIHRvIGlt
cGxlbWVudAo+IGluZGV4ICJyZWFsIHRpbWUiLgo+ID4KPiA+IGthaQo+ID4KPiA+Cj4gPiC3orz+
yMs6IGFudG9uZWxsb3Byb3ZAZ21haWwuY29tIFttYWlsdG86YW50b25lbGxvcHJvdkBnbWFpbC5j
b21dILT6se0KPiBBbnRvbmVsbG8gUHJvdmVuemFubwo+ID4gt6LLzcqxvOQ6IDIwMDfE6jjUwjEw
yNUg0MfG2s7lIDE3OjU5Cj4gPiDK1bz+yMs6IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZwo+
ID4g1vfM4jogUmU6ILTwuLQ6IEx1Y2VuZSBpbiBsYXJnZSBkYXRhYmFzZSBjb250ZXh0cwo+ID4K
PiA+IEthaSwKPiA+Cj4gPiBUaGFua3MuIFRoZSBwcm9ibGVtIEkgc2VlIGl0J3MgdGhhdCBhbHRo
b3VnaCBJIGNhbiBhZGQgYSBEb2N1bWVudAo+ID4gdGhyb3VnaCBJbmRleFdyaXRlciBvciBJbmRl
eE1vZGlmaWVyLCB0aGlzIHdvbid0IGJlIHNlYXJjaGFibGUgdW50aWwKPiA+IHRoZSBpbmRleCBp
cyBjbG9zZWQgYW5kLCBwb3NzaWJseSwgb3B0aW1pemVkLCBzaW5jZSB0aGUgc2NvcmUgb2YgdGhl
Cj4gPiBkb2N1bWVudCBpbiB0aGUgaW5kZXggY29udGV4dCBtdXN0IGJlIHJlLWNhbGN1bGF0ZWQg
b24gdGhlIGJhc2lzIG9mCj4gPiB0aGUgd2hvbGUgY29udGV4dC4KPiA+Cj4gPiBJcyB0aGlzIGFz
c3VtcHRpb24gdHJ1ZT8gb3IgYW0gSSBjb21wbGV0ZWx5IHdyb25nPwo+ID4KPiA+IENoZWVycy4K
PiA+IEFudG9uZWxsbwo+ID4KPiA+Cj4gPiBPbiA4LzEwLzA3LCBLYWkgSHUgPGthaS5odUBkdXNl
ZS5jbj4gd3JvdGU6Cj4gPiA+IEhpLCBBbnRvbmVsbG8KPiA+ID4gICAgICAgICBZb3UgY2FuIHVz
ZSBJbmRleFdyaXRlci5hZGREb2N1bWVudChEb2N1bWVudCBkb2N1bWVudCkgdG8gYWRkCj4gc2lu
Z2xlIGRvY3VtZW50LHNhbWUgdG8gdXBkYXRlLGRlbGV0ZSBvcGVyYXRpb24uCj4gPiA+Cj4gPiA+
IGthaQo+ID4gPgo+ID4gPiAtLS0tLdPKvP7Urbz+LS0tLS0KPiA+ID4gt6K8/sjLOiBBbnRvbmVs
bG8gUHJvdmVuemFubyBbbWFpbHRvOmFudG9uZWxsb3Byb3ZAZ21haWwuY29tXQo+ID4gPiC3osvN
yrG85DogMjAwN8TqONTCMTDI1SDQx8bazuUgMTc6MDkKPiA+ID4gytW8/sjLOiBqYXZhLXVzZXJA
bHVjZW5lLmFwYWNoZS5vcmcKPiA+ID4g1vfM4jogTHVjZW5lIGluIGxhcmdlIGRhdGFiYXNlIGNv
bnRleHRzCj4gPiA+Cj4gPiA+IEhpIFRoZXJlIQo+ID4gPgo+ID4gPiBJJ3ZlIGJlZW4gd29ya2lu
ZyBmb3IgYSB3aGlsZSBvbiB0aGUgaW1wbGVtZW50YXRpb24gb2YgYSB3ZWJzaXRlCj4gPiA+IG9y
aWVudGVkIHRvIGNvbnRlbnRzIHRoYXQgd291bGQgY29udGFpbiBtaWxsaW9ucyBvZiBlbnRyaWVz
LCBtb3N0IG9mCj4gPiA+IHRoZW0gaW5kZXhhYmxlIChzdWNoIGFzIGRlc2NyaXB0aW9ucywgdGV4
dHMsIG5hbWVzLCBldGMuKS4KPiA+ID4gVGhlIGlkZWFsIHNvbHV0aW9uIHRvIG1ha2UgdGhlbSBz
ZWFyY2hhYmxlIHdvdWxkIGJlIHRvIHVzZSBMdWNlbmUgYXMKPiA+ID4gaW5kZXggYW5kIHNlYXJj
aCBlbmdpbmUuCj4gPiA+Cj4gPiA+IFRoZSByZWFzb24gSSdtIHBvc3RpbmcgdGhlIG1haWxpbmcg
bGlzdCBpcyB0aGUgZm9sbG93aW5nOiBzaW5jZSBhbGwKPiA+ID4gdGhlIGVudHJpZXMgd2lsbCBi
ZSBzdG9yZWQgaW4gYSBkYXRhYmFzZSAobW9zdCBsaWtlbHkgTXlTUUwgSW5ub0RCIG9yCj4gPiA+
IE9yYWNsZSksIHdoYXQncyB0aGUgYmVzdCB0ZWNobmlxdWUgdG8gaW1wbGVtZW50IGEgc3lzdGVt
IHRoYXQgaW5kZXhlcwo+ID4gPiBpbiAicmVhbCB0aW1lIiAoZWcuIHdoZW4gYW4gZW50cnkgaXMg
aW5zZXJ0ZWQgaW50byB0aGUgZGF0YWJzc2UpIHRoZQo+ID4gPiBjb250ZW50IGFuZCBtYWtlIGl0
IHNlYXJjaGFibGU/IEJhc2VkIG9uIG15IHVuZGVyc3RhbmRpbmcgb2YgTHVjZW5lLAo+ID4gPiBz
dWNoIHRoaXMgdGhpbmcgaXMgbm90IHBvc3NpYmxlLCBzaW5jZSB0aGUgaW5kZXggbXVzdCBiZSBy
ZS1jcmVhdGVkIHRvCj4gPiA+IGJlIGFibGUgdG8gc2VhcmNoIHRoZSBpbmRleGVkIGNvbnRlbnRz
LiBJcyB0aGlzIHRydWU/Cj4gPiA+Cj4gPiA+IEV2ZW50dWFsbHksIGNvdWxkIGFueW9uZSBwb2lu
dCBtZSB0byBhIHdvcmtpbmcgZXhhbXBsZSBhYm91dCBob3cgdG8KPiA+ID4gaW1wbGVtZW50IHN1
Y2ggYSBzaW1pbGFyIGNvbnRleHQ/Cj4gPiA+Cj4gPiA+Cj4gPiA+IFRoYW5rIHlvdSBmb3IgdGhl
IHN1cHBvcnQuCj4gPiA+IEFudG9uZWxsbwo+ID4gPgo+ID4gPiAtLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiA+ID4g
VG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFj
aGUub3JnCj4gPiA+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1o
ZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4gPiA+Cj4gPiA+Cj4gPiA+IC0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+ID4g
PiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFw
YWNoZS5vcmcKPiA+ID4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2Vy
LWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPiA+ID4KPiA+ID4KPiA+Cj4gPiAtLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0K
PiA+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUu
YXBhY2hlLm9yZwo+ID4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2Vy
LWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPiA+Cj4gPgo+Cg==
------=_Part_11118_29606395.1186753608511--

From java-user-return-29737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 13:53:25 2007
Return-Path: <java-user-return-29737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3968 invoked from network); 10 Aug 2007 13:53:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 13:53:24 -0000
Received: (qmail 90721 invoked by uid 500); 10 Aug 2007 13:53:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90676 invoked by uid 500); 10 Aug 2007 13:53:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90665 invoked by uid 99); 10 Aug 2007 13:53:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 06:53:15 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of askar.zaidi@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 13:53:12 +0000
Received: by ug-out-1314.google.com with SMTP id c2so487681ugf
        for <java-user@lucene.apache.org>; Fri, 10 Aug 2007 06:52:48 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Bk+QOUfk9lgIntbS/7Z+dH3/2vcn5/Fju5/KcRMX2kt3UjgSmS9mSUIhTGpHXPkYNXNFt7bDyqCrhQV5Sg2ddlDXXCkRn3V7pBbcduln4G1VM17f8BJKTOTT1k1tzDn53l1Wlvg4N8EwdeZXsxvh/JeEwBs5OEIvIMhoEJuBgnA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZzZMV8YERh+UETqjTsftBwooTYZ3mcdS/Ko5Ifj9dDsj/ACYVlFq9ztDGjMmWiZpr0G0E5z+Mn8f5ZRk4sa0lISdyKpTdcq0ZUICe7MosxxnmuaT9yl3fLjsiZQA4m8BSN/BGFIDfwOPGo6SA/OPEKz4+6P96xGGtjwBd9JUsTU=
Received: by 10.66.240.12 with SMTP id n12mr3116037ugh.1186753968634;
        Fri, 10 Aug 2007 06:52:48 -0700 (PDT)
Received: by 10.66.233.3 with HTTP; Fri, 10 Aug 2007 06:52:48 -0700 (PDT)
Message-ID: <c0c0e1d40708100652x42a5eb48l5f67f7ddcbe5dd5e@mail.gmail.com>
Date: Fri, 10 Aug 2007 09:52:48 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org
Subject: =?GB2312?B?UmU6ILTwuLQ6ILTwuLQ6IEx1Y2VuZSBpbiA=?= =?GB2312?B?bGFyZ2UgZGF0YWJhc2UgY29udGV4dHM=?=
In-Reply-To: <359a92830708100646u65fcf633o107a36ae3a04834f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_79509_26504312.1186753968580"
References: <8E5BA7FAF994C6409A8E074B78EB46770136533B@14sha-msg02.zm.sd.mediazone.com>
	 <dadfe18a0708100324m21a679dbo8f2720cb6f268fa6@mail.gmail.com>
	 <359a92830708100646u65fcf633o107a36ae3a04834f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_79509_26504312.1186753968580
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: base64
Content-Disposition: inline

SGV5IEd1eXMsCgpJIGFtIHRyeWluZyB0byBkbyBzb21ldGhpbmcgc2ltaWxhci4gTWFrZSB0aGUg
Y29udGVudCBzZWFyY2gtYWJsZSBhcyBzb29uIGFzCml0IGlzIGFkZGVkIHRvIHRoZSB3ZWJzaXRl
LiBUaGUgd2F5IGl0IGNhbiB3b3JrIGluIG15IHNjZW5hcmlvIGlzIHRoYXQgLCBJCmNyZWF0ZSB0
aGUgSW5kZXggZm9yIGEgZXZlcnkgbmV3IHVzZXIgYWNjb3VudCBjcmVhdGVkLgoKVGhlbiwgd2hl
bmV2ZXIgYSBuZXcgZG9jdW1lbnQgaXMgdXBsb2FkZWQsIGl0cyBjb250ZW50cyBhcmUgYWRkZWQg
dG8gdGhlCnVzZXJzIEluZGV4IHVzaW5nIHdyaXRlci5hZGREb2N1bWVudCguLi4pCgpBcyAgZm9y
IGNsb3NpbmcgdGhlIHdyaXRlciwgeWVzICEgSSdsbCBjbG9zZSB0aGUgd3JpdGVyIGFuZCBvcHRp
bWl6ZSBhZnRlcgppdHMgYWRkZWQgdG8gdGhlIGluZGV4LgoKSSByZWFsbHkgdGhpbmsgdGhpcyBz
aG91bGQgd29yay4gRG9uJ3QgeW91ID8KCnRoYW5rcwpBWgoKT24gOC8xMC8wNywgRXJpY2sgRXJp
Y2tzb24gPGVyaWNrZXJpY2tzb25AZ21haWwuY29tPiB3cm90ZToKPgo+IFdlbGwsIGNsb3Npbmcv
b3BlbmluZyBhbiBpbmRleCBpcyBNVUNIIGxlc3MgZXhwZW5zaXZlIHRoYW4KPiByZWJ1aWxkaW5n
IHRoZSB3aG9sZSB0aGluZywgc28gSSBkb24ndCB1bmRlcnN0YW5kIHBhcnQgb2YgeW91cgo+IHN0
YXRlbWVudHMuLi4uCj4KPiBJdCAqbWF5KiAoYnV0IEkgaGF2ZW4ndCB0cmllZCBpdCkgYmUgcG9z
c2libGUgdG8gZmx1c2ggdGhlIHdyaXRlciByYXRoZXIKPiB0aGFuCj4gY2xvc2Uvb3BlbiBpdC4g
QnV0LCB5b3UgTVVTVCBjbG9zZS9yZW9wZW4gdGhlIHJlYWRlciB5b3Ugc2VhcmNoIHdpdGgKPiBl
dmVuIGlmIGZsdXNoIHdvcmtzIGxpa2UgSSB0aGluayBpdCBkb2VzLgo+Cj4gQnV0IGl0J3MgYWxz
byBwb3NzaWJsZSB0byB1c2UgYSB0d28gdGllcmVkIGFwcHJvYWNoLiAxRyBpc24ndCBhbGwgdGhh
dAo+IGJpZy4KPiBDb3VsZAo+IHlvdSByZWFkIGl0IGludG8gYSBSQU1EaXIgYW5kIHVzZSB0aGF0
IGZvciB5b3VyIHNlYXJjaGVzPyBUaGVuLCB3aGVuIHlvdQo+IGFkZAo+IGRhdGEsIHlvdSBhZGQg
aXQgdG8gKmJvdGgqIGluZGV4ZXMsIGJ1dCBjbG9zZS9vcGVuIHRoZSBSQU1kaXIgZm9yCj4gc2Vh
cmNoaW5nLgo+Cj4gSXQncyBhbHNvIHBvc3NpYmxlIHRvIGtlZXAgdGhlIFJBTWRpciBhcyB0aGUg
ZGVsdGEgYmV0d2VlbiB0aGUgRlNkaXIgYW5kCj4gImN1cnJlbnQiIHN0YXRlcyBvZiB5b3VyIGlu
ZGV4LiBBZGQgdG8gYm90aCBhbmQgc2VhcmNoIGJvdGguIEFsdGhvdWdoCj4gZGVsZXRlcyBtYXkg
YmUgYSBwcm9ibGVtIGhlcmUuCj4KPiBZb3UgaGF2ZW4ndCBzcGVjaWZpZWQgaG93IG9mdGVuIHlv
dSBleHBlY3QgY2hhbmdlcywgdGhvdWdoLiAxMDAvc2Vjb25kPwo+IDEvbWludXRlPyBIb3cgcmVh
bCBpcyAicmVhbCB0aW1lIj8gWW91IGNvdWxkIGRvIHNvbWV0aGluZyBsaWtlIHdhcm0gdXAKPiBh
IG5ldyByZWFkZXIgaW4gdGhlIGJhY2tncm91bmQgd2hlbmV2ZXIgeW91IGRlY2lkZWQgeW91IG5l
ZWRlZCB0byBiZQo+IGFic29sdXRlbHkgdXAgdG8gZGF0ZSBhbmQgc3dhcCB5b3VyICJsaXZlIiBy
ZWFkZXIgZm9yIHRoZSBuZXdseSB3YXJtZWQgdXAKPiBvbmUgd2hlbmV2ZXIgeW91IGRlZW1lZCBp
dCB3aXNlLgo+Cj4gT3IgeW91IGNvdWxkIGp1c3QgY2xvc2Uvb3BlbiB5b3VyIHJlYWRlciBhZnRl
ciBlYWNoIG1vZGlmaWNhdGlvbiwgZmlyZSBvZmYKPiBhCj4KPiBjb3VwbGUgb2Ygd2FybXVwIHF1
ZXJpZXMgYXQgaXQgYW5kIGxldCB0aGUgdXNlcnMgbGl2ZSB3aXRoIHNsb3cgcmVzcG9uc2VzCj4g
aWYgdGhleSBoYXBwZW4gdG8gc2VhcmNoIGJlZm9yZSB5b3VyIHdhcm0tdXAgcXVlcmllcyBjb21w
bGV0ZWQuCj4KPiBUaGUgcG9pbnQgaXMgdGhhdCB0aGVyZSBhcmUgbWFueSBvcHRpb25zLCBidXQg
dG8gc3VnZ2VzdCB0aGUgYmVzdCBvbmUsIHdlCj4gbmVlZCBzb21lIHRocm91Z2hwdXQgbnVtYmVy
cyBhbmQgYSBiZXR0ZXIgZGVmaW5pdGlvbiBvZiB3aGF0ICJyZWFsIHRpbWUiCj4gbWVhbnMuIElz
IGEgb25lIG1pbnV0ZSBkZWxheSBhY2NlcHRhYmxlPyAxMCBzZWNvbmRzPyBhIG1pbGxpc2Vjb25k
Pwo+IHRoZSBhbnN3ZXIgZGVmaW5lcyB0aGUgc2NvcGUgb2YgcmVhc29uYWJsZSBzb2x1dGlvbnMu
Li4uLgo+Cj4gQmVzdAo+IEVyaWNrCj4KPiBPbiA4LzEwLzA3LCBBbnRvbmVsbG8gUHJvdmVuemFu
byA8YW50b25lbGxvQGRldmVlbC5jb20+IHdyb3RlOgo+ID4KPiA+IEthaSwKPiA+Cj4gPiBUaGUg
Y29udGV4dCBJJ20gZ29pbmcgdG8gd29yayB3aXRoIHJlcXVpcmVzIGEgY29udGludW91cyBhZGRp
dGlvbiBvZgo+ID4gZG9jdW1lbnRzIHRvIHRoZSBpbmRleGVzLCBzaW5jZSBpdCdzIHVzZXItZHJp
dmVuIGNvbnRlbnQsIGFuZCB0aGlzCj4gPiB3b3VsZCByZXF1aXJlIHRoZSBjb250ZW50IHRvIGJl
IGFsd2F5cyB1cC10by1kYXRlLgo+ID4gVGhpcyBpcyB0aGUgcHJvYmxlbSBJJ20gZmFjaW5nLCBz
aW5jZSBJIGNhbm5vdCByZWJ1aWxkIGEgMUdiIChhdAo+ID4gbGVhc3QpIGluZGV4IGV2ZXJ5IHRp
bWUgYSB1c2VyIGluc2VydHMgYSBuZXcgZW50cnkgaW50byB0aGUgZGF0YWJhc2UuCj4gPgo+ID4g
SSBrbm93IERpZ2csIGZvciBpbnN0YW5jZSwgaXMgdXNpbmcgTHVjZW5lIGFzIHNlYXJjaCBlbmdp
bmU6IHNpbmNlIHRoZQo+ID4gYW1vdW50IG9mIGRhdGEgdGhleSdyZSBkZWFsaW5nIHdpdGggaXMg
bXVjaCBoaWdoZXIgdGhhbiBtaW5lLCBJIHdvdWxkCj4gPiBsaWtlIHRvIHVuZGVyc3RhbmQgdGhl
IHdheSB0aGV5IHVzZWQgdG8gaW1wbGVtZW50IHRoaXMga2luZCBvZgo+ID4gc29sdXRpb24uCj4g
Pgo+ID4gVGhhbmsgeW91IGFnYWluLgo+ID4gQW50b25lbGxvCj4gPgo+ID4KPiA+IE9uIDgvMTAv
MDcsIEthaSBIdSA8a2FpLmh1QGR1c2VlLmNuPiB3cm90ZToKPiA+ID4gQW50b25lbGxvLAo+ID4g
PiAgICAgICAgIFlvdSBhcmUgcmlnaHQsSSB0aGluayBsdWNlbmUgaW5kZXhzZWFyY2hlciB3aWxs
IHNlYXJjaCB0aGUgb2xkCj4gPiBpbmZvcm1hdGlvbiBpZiBJbmRleFdyaXRlciB3YXMgbm90IGNs
b3NlZChJIHRoaW5rIGx1Y2VuZSByZWxlYXNlIHRoZQo+IExvY2sKPiA+IGhlcmUpLHNvIEkgb25s
eSBhZGQgYSBmZXcgZG9jdW1lbnRzIGV2ZXJ5IHRpbWUgZnJvbSBidWZmZXIgdG8gaW1wbGVtZW50
Cj4gPiBpbmRleCAicmVhbCB0aW1lIi4KPiA+ID4KPiA+ID4ga2FpCj4gPiA+Cj4gPiA+Cj4gPiA+
ILeivP7IyzogYW50b25lbGxvcHJvdkBnbWFpbC5jb20gW21haWx0bzphbnRvbmVsbG9wcm92QGdt
YWlsLmNvbV0gtPqx7Qo+ID4gQW50b25lbGxvIFByb3Zlbnphbm8KPiA+ID4gt6LLzcqxvOQ6IDIw
MDfE6jjUwjEwyNUg0MfG2s7lIDE3OjU5Cj4gPiA+IMrVvP7IyzogamF2YS11c2VyQGx1Y2VuZS5h
cGFjaGUub3JnCj4gPiA+INb3zOI6IFJlOiC08Li0OiBMdWNlbmUgaW4gbGFyZ2UgZGF0YWJhc2Ug
Y29udGV4dHMKPiA+ID4KPiA+ID4gS2FpLAo+ID4gPgo+ID4gPiBUaGFua3MuIFRoZSBwcm9ibGVt
IEkgc2VlIGl0J3MgdGhhdCBhbHRob3VnaCBJIGNhbiBhZGQgYSBEb2N1bWVudAo+ID4gPiB0aHJv
dWdoIEluZGV4V3JpdGVyIG9yIEluZGV4TW9kaWZpZXIsIHRoaXMgd29uJ3QgYmUgc2VhcmNoYWJs
ZSB1bnRpbAo+ID4gPiB0aGUgaW5kZXggaXMgY2xvc2VkIGFuZCwgcG9zc2libHksIG9wdGltaXpl
ZCwgc2luY2UgdGhlIHNjb3JlIG9mIHRoZQo+ID4gPiBkb2N1bWVudCBpbiB0aGUgaW5kZXggY29u
dGV4dCBtdXN0IGJlIHJlLWNhbGN1bGF0ZWQgb24gdGhlIGJhc2lzIG9mCj4gPiA+IHRoZSB3aG9s
ZSBjb250ZXh0Lgo+ID4gPgo+ID4gPiBJcyB0aGlzIGFzc3VtcHRpb24gdHJ1ZT8gb3IgYW0gSSBj
b21wbGV0ZWx5IHdyb25nPwo+ID4gPgo+ID4gPiBDaGVlcnMuCj4gPiA+IEFudG9uZWxsbwo+ID4g
Pgo+ID4gPgo+ID4gPiBPbiA4LzEwLzA3LCBLYWkgSHUgPGthaS5odUBkdXNlZS5jbj4gd3JvdGU6
Cj4gPiA+ID4gSGksIEFudG9uZWxsbwo+ID4gPiA+ICAgICAgICAgWW91IGNhbiB1c2UgSW5kZXhX
cml0ZXIuYWRkRG9jdW1lbnQoRG9jdW1lbnQgZG9jdW1lbnQpIHRvCj4gYWRkCj4gPiBzaW5nbGUg
ZG9jdW1lbnQsc2FtZSB0byB1cGRhdGUsZGVsZXRlIG9wZXJhdGlvbi4KPiA+ID4gPgo+ID4gPiA+
IGthaQo+ID4gPiA+Cj4gPiA+ID4gLS0tLS3Tyrz+1K28/i0tLS0tCj4gPiA+ID4gt6K8/sjLOiBB
bnRvbmVsbG8gUHJvdmVuemFubyBbbWFpbHRvOmFudG9uZWxsb3Byb3ZAZ21haWwuY29tXQo+ID4g
PiA+ILeiy83KsbzkOiAyMDA3xOo41MIxMMjVINDHxtrO5SAxNzowOQo+ID4gPiA+IMrVvP7Iyzog
amF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnCj4gPiA+ID4g1vfM4jogTHVjZW5lIGluIGxhcmdl
IGRhdGFiYXNlIGNvbnRleHRzCj4gPiA+ID4KPiA+ID4gPiBIaSBUaGVyZSEKPiA+ID4gPgo+ID4g
PiA+IEkndmUgYmVlbiB3b3JraW5nIGZvciBhIHdoaWxlIG9uIHRoZSBpbXBsZW1lbnRhdGlvbiBv
ZiBhIHdlYnNpdGUKPiA+ID4gPiBvcmllbnRlZCB0byBjb250ZW50cyB0aGF0IHdvdWxkIGNvbnRh
aW4gbWlsbGlvbnMgb2YgZW50cmllcywgbW9zdCBvZgo+ID4gPiA+IHRoZW0gaW5kZXhhYmxlIChz
dWNoIGFzIGRlc2NyaXB0aW9ucywgdGV4dHMsIG5hbWVzLCBldGMuKS4KPiA+ID4gPiBUaGUgaWRl
YWwgc29sdXRpb24gdG8gbWFrZSB0aGVtIHNlYXJjaGFibGUgd291bGQgYmUgdG8gdXNlIEx1Y2Vu
ZSBhcwo+ID4gPiA+IGluZGV4IGFuZCBzZWFyY2ggZW5naW5lLgo+ID4gPiA+Cj4gPiA+ID4gVGhl
IHJlYXNvbiBJJ20gcG9zdGluZyB0aGUgbWFpbGluZyBsaXN0IGlzIHRoZSBmb2xsb3dpbmc6IHNp
bmNlIGFsbAo+ID4gPiA+IHRoZSBlbnRyaWVzIHdpbGwgYmUgc3RvcmVkIGluIGEgZGF0YWJhc2Ug
KG1vc3QgbGlrZWx5IE15U1FMIElubm9EQgo+IG9yCj4gPiA+ID4gT3JhY2xlKSwgd2hhdCdzIHRo
ZSBiZXN0IHRlY2huaXF1ZSB0byBpbXBsZW1lbnQgYSBzeXN0ZW0gdGhhdAo+IGluZGV4ZXMKPiA+
ID4gPiBpbiAicmVhbCB0aW1lIiAoZWcuIHdoZW4gYW4gZW50cnkgaXMgaW5zZXJ0ZWQgaW50byB0
aGUgZGF0YWJzc2UpIHRoZQo+ID4gPiA+IGNvbnRlbnQgYW5kIG1ha2UgaXQgc2VhcmNoYWJsZT8g
QmFzZWQgb24gbXkgdW5kZXJzdGFuZGluZyBvZiBMdWNlbmUsCj4gPiA+ID4gc3VjaCB0aGlzIHRo
aW5nIGlzIG5vdCBwb3NzaWJsZSwgc2luY2UgdGhlIGluZGV4IG11c3QgYmUgcmUtY3JlYXRlZAo+
IHRvCj4gPiA+ID4gYmUgYWJsZSB0byBzZWFyY2ggdGhlIGluZGV4ZWQgY29udGVudHMuIElzIHRo
aXMgdHJ1ZT8KPiA+ID4gPgo+ID4gPiA+IEV2ZW50dWFsbHksIGNvdWxkIGFueW9uZSBwb2ludCBt
ZSB0byBhIHdvcmtpbmcgZXhhbXBsZSBhYm91dCBob3cgdG8KPiA+ID4gPiBpbXBsZW1lbnQgc3Vj
aCBhIHNpbWlsYXIgY29udGV4dD8KPiA+ID4gPgo+ID4gPiA+Cj4gPiA+ID4gVGhhbmsgeW91IGZv
ciB0aGUgc3VwcG9ydC4KPiA+ID4gPiBBbnRvbmVsbG8KPiA+ID4gPgo+ID4gPiA+Cj4gLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tCj4gPiA+ID4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2Ny
aWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gPiA+ID4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUt
bWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPiA+ID4gPgo+ID4gPiA+Cj4g
PiA+ID4KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0KPiA+ID4gPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZh
LXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiA+ID4gPiBGb3IgYWRkaXRpb25h
bCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+ID4g
PiA+Cj4gPiA+ID4KPiA+ID4KPiA+ID4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gPiA+IFRvIHVuc3Vic2NyaWJl
LCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+ID4gPiBG
b3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBh
Y2hlLm9yZwo+ID4gPgo+ID4gPgo+ID4KPgo=
------=_Part_79509_26504312.1186753968580--

From java-user-return-29738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 14:46:35 2007
Return-Path: <java-user-return-29738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21811 invoked from network); 10 Aug 2007 14:46:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 14:46:34 -0000
Received: (qmail 69455 invoked by uid 500); 10 Aug 2007 14:46:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69423 invoked by uid 500); 10 Aug 2007 14:46:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69412 invoked by uid 99); 10 Aug 2007 14:46:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 07:46:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.67] (HELO mx5.syr.edu) (128.230.18.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 14:46:18 +0000
Received: from [128.230.84.100] (ist-h335-d03.syr.edu [128.230.84.100])
	by mx5.syr.edu (8.13.7/8.13.7) with ESMTP id l7AEjuH9008218
	for <java-user@lucene.apache.org>; Fri, 10 Aug 2007 10:45:56 -0400
Message-ID: <46BC79EF.10706@syr.edu>
Date: Fri, 10 Aug 2007 10:45:03 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Thunderbird 2.0.0.4-GroupWise-IMAP-fix (Windows/20070719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene in large database contexts
References: <dadfe18a0708100209t28925682mc769e69e4a1f796b@mail.gmail.com>
In-Reply-To: <dadfe18a0708100209t28925682mc769e69e4a1f796b@mail.gmail.com>
X-Enigmail-Version: 0.95.2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Scanner: InterScan AntiVirus for Sendmail
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Antonello,

Antonello Provenzano wrote:
> I've been working for a while on the implementation of a website
> oriented to contents that would contain millions of entries, most of
> them indexable (such as descriptions, texts, names, etc.).
> The ideal solution to make them searchable would be to use Lucene as
> index and search engine.
> 
> The reason I'm posting the mailing list is the following: since all
> the entries will be stored in a database (most likely MySQL InnoDB or
> Oracle), what's the best technique to implement a system that indexes
> in "real time" (eg. when an entry is inserted into the databsse) the
> content and make it searchable? Based on my understanding of Lucene,
> such this thing is not possible, since the index must be re-created to
> be able to search the indexed contents. Is this true?
> 
> Eventually, could anyone point me to a working example about how to
> implement such a similar context?

Do you know about Marcello Ochoa's Oracle-Lucene integration?:

   <https://issues.apache.org/jira/browse/LUCENE-724>

Steve

-- 
Steve Rowe
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 16:40:42 2007
Return-Path: <java-user-return-29739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89633 invoked from network); 10 Aug 2007 16:40:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 16:40:40 -0000
Received: (qmail 86420 invoked by uid 500); 10 Aug 2007 16:40:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86058 invoked by uid 500); 10 Aug 2007 16:40:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86046 invoked by uid 99); 10 Aug 2007 16:40:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 09:40:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of chris.lu@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 16:40:26 +0000
Received: by ug-out-1314.google.com with SMTP id c2so508733ugf
        for <java-user@lucene.apache.org>; Fri, 10 Aug 2007 09:40:02 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=UNukoK8Pv4bqVChxxY7ETAW8DR0R/FmH29OpFWk6tTSsdlWzDC7GxYfz1aiT1XhsLoZV+pl6Q5StNkWDEpXb037iDAENK6q5IkZlgwX+ySwVuDuAhycvIEA9CBwrtjiFtG55Hc4hr/hiKzsxMtGanY72ksQtenVKc9qHvGRZ14w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=MI+x4BeME+TN16FgfLkUOOrZ38r858H5uUAldglpvbKa0C6CpjC7UMWmlNh2nFz0XmMSr19w8uRlTF/W+fwsDyIQm8RdWfoVtv6Y0a+PESSEI1tJs22GTi5ABDIoxZQU9WbxI0EH8g3PxjsqhcYMSgxbXH2QsdM/NTPLG0xiIf8=
Received: by 10.78.183.8 with SMTP id g8mr1409507huf.1186764002065;
        Fri, 10 Aug 2007 09:40:02 -0700 (PDT)
Received: by 10.78.155.16 with HTTP; Fri, 10 Aug 2007 09:40:01 -0700 (PDT)
Message-ID: <6e3ae6310708100940n70c5a7b0p1650844c3338ed29@mail.gmail.com>
Date: Fri, 10 Aug 2007 09:40:01 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org, antonello@deveel.com
Subject: Re: Lucene in large database contexts
In-Reply-To: <dadfe18a0708100209t28925682mc769e69e4a1f796b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <dadfe18a0708100209t28925682mc769e69e4a1f796b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, Antonello,

I think you should try DBSight. Although it's a Java implementation,
you don't need to worry about java coding at all. Just point the
connection string to a database, and specify by you SQL, then you will
have scheduling, incremental indexing, recreating indexes, sync with
deleted records, and you can use Lucene query syntax directly, use
existing templates or XML/JSON/HTML/JSP to render your results.

It's an instant and scalable solution. Check out Lucene Database
Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes

You can use it on any databases.

Thanks!

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes


On 8/10/07, Antonello Provenzano <antonelloprov@gmail.com> wrote:
> Hi There!
>
> I've been working for a while on the implementation of a website
> oriented to contents that would contain millions of entries, most of
> them indexable (such as descriptions, texts, names, etc.).
> The ideal solution to make them searchable would be to use Lucene as
> index and search engine.
>
> The reason I'm posting the mailing list is the following: since all
> the entries will be stored in a database (most likely MySQL InnoDB or
> Oracle), what's the best technique to implement a system that indexes
> in "real time" (eg. when an entry is inserted into the databsse) the
> content and make it searchable? Based on my understanding of Lucene,
> such this thing is not possible, since the index must be re-created to
> be able to search the indexed contents. Is this true?
>
> Eventually, could anyone point me to a working example about how to
> implement such a similar context?
>
>
> Thank you for the support.
> Antonello
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 16:41:15 2007
Return-Path: <java-user-return-29740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90118 invoked from network); 10 Aug 2007 16:41:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 16:41:15 -0000
Received: (qmail 88108 invoked by uid 500); 10 Aug 2007 16:41:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88066 invoked by uid 500); 10 Aug 2007 16:41:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88055 invoked by uid 99); 10 Aug 2007 16:41:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 09:41:06 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.27.42.28] (HELO smtp2-g19.free.fr) (212.27.42.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 16:41:02 +0000
Received: from smtp2-g19.free.fr (localhost.localdomain [127.0.0.1])
	by smtp2-g19.free.fr (Postfix) with ESMTP id 884BD990B0
	for <java-user@lucene.apache.org>; Fri, 10 Aug 2007 18:40:38 +0200 (CEST)
Received: from [192.168.1.102] (dau94-4-82-227-122-98.fbx.proxad.net [82.227.122.98])
	by smtp2-g19.free.fr (Postfix) with ESMTP id 58A6A9908A
	for <java-user@lucene.apache.org>; Fri, 10 Aug 2007 18:40:38 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <2b98f9010708090034m1bf38ba9u9951e82414d1388c@mail.gmail.com>
References: <2b98f9010708090034m1bf38ba9u9951e82414d1388c@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <1A0694DC-B460-4C4B-B990-03FDEB8D2FFB@garambrogne.net>
Content-Transfer-Encoding: quoted-printable
X-Image-Url: http://homepage.mac.com/rdupond/.cv/thumbs/me.thumbnail
From: Mathieu Lecarme <mathieu@garambrogne.net>
Subject: Re: frequent phrases
Date: Fri, 10 Aug 2007 18:40:36 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

some tools exist for finding duplicated parts in document.
You split document in phrase, and build ngram with word. If you wont =20
complete phrase, work with all words, for a partial, work with 5 =20
words ngram, for example. ngram list is convert to hash, and hash is =20
used as an indexed Field for the document. With this trick, you can =20
use phrase as you use to do with word, without using too much space.

I'm not sure to be as clear as I want.

M.

Le 9 ao=FBt 07 =E0 09:34, Akanksha Baid a =E9crit :

> I was wondering if there is a "search based" method to find the top-k
> frequent phrases in a set of documents.( I do not have a particular =20=

> phrase
> in mind so PhraseQuery can probably be ruled out).
> I have implemented something that works using termvectors and =20
> termpositions
> but the performance is not great so far since I am basically iterating
> multiple times and hacking my way around. I was wondering if an API =20=

> exists
> for finding frequent phrases and/or if someone could point me to =20
> some code
> for the same.
>
> Thanks.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 17:30:45 2007
Return-Path: <java-user-return-29741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20863 invoked from network); 10 Aug 2007 17:30:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 17:30:43 -0000
Received: (qmail 84461 invoked by uid 500); 10 Aug 2007 17:30:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84407 invoked by uid 500); 10 Aug 2007 17:30:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84374 invoked by uid 99); 10 Aug 2007 17:30:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 10:30:34 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spencertickner@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 17:30:27 +0000
Received: by nf-out-0910.google.com with SMTP id d3so297929nfc
        for <java-user@lucene.apache.org>; Fri, 10 Aug 2007 10:30:06 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=lMjcvy5V4NB53BsTOX/VXlA/csErRaQvj6RsTe6IWXHkcYay6tTlZISlL/4jaJyh2CTtabaRnu9xBqe6ykurPZX07BXvo/wt4XSBOFSEmmlRUpyavjdvZJKKgAsPztZUfPloBUvmW56bBrrcMmCsprbP+IeLUYVGW5i0LzN48nY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=r2K+fLOh6RfTR94n3/o8+tHkhpZ+wXE94OlLd4Ybe3JSZMEMLTlPNHF5f9AyxgUHylOGMusuyAvBFWjvblpGeS9hyNH+UU2myGHfYp8U9dvxrmoM3ovL1keb4awQ0ngGS5DEMyuXFsTssVI0iEa5o/djU+mGZKGZ+LdjUsQnSpA=
Received: by 10.78.150.7 with SMTP id x7mr1438347hud.1186767002469;
        Fri, 10 Aug 2007 10:30:02 -0700 (PDT)
Received: by 10.78.186.10 with HTTP; Fri, 10 Aug 2007 10:30:02 -0700 (PDT)
Message-ID: <2d72c9c50708101030l49da7bcdlf22b318aae36b04c@mail.gmail.com>
Date: Fri, 10 Aug 2007 10:30:02 -0700
From: "Spencer Tickner" <spencertickner@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Nested Fields
In-Reply-To: <52c3ddca0708092306m25ab75f6y2724b1db134a6621@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <2d72c9c50708031500n4b1900b7saca85a4fb1dca743@mail.gmail.com>
	 <12085200.post@talk.nabble.com>
	 <52c3ddca0708092306m25ab75f6y2724b1db134a6621@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi everyone,

Thanks so much for the responses. So far I use an xslt identity
transform with templates to match the fields I want to capture that
turns the xml document into a flat text file with duplicated text for
nested fields. The compass framework looks really interesting though,
I'll spend some time looking into it.

Thanks again,

Spencer

On 8/9/07, Lukas Vlcek <lukas.vlcek@gmail.com> wrote:
> Hi,
>
> Have you checked Compass <http://www.opensymphony.com/compass/> framework
> (built on top of Lucene)? This might be interesting for you:
> http://www.opensymphony.com/compass/versions/1.2M3/html/core-xsem.html
>
> BR
> Lukas
>
>
> On 8/10/07, Jeff French <jeff@mdbconsulting.com> wrote:
> >
> >
> > Spencer, it seems inefficient to me too, but that's pretty much what I did
> > for tables embedded within a document.
> >
> > I used a SAX parser to parse the document and kept track of the table
> > elements I saw. When I received an endElement, I added the text I had
> > buffered up in the characters() method to the buffer for each parent
> > element. Then I removed the current element and added its content as a
> > Field.
> >
> > I should add that I am also fairly new to Lucene, so just because I did it
> > that way doesn't mean it's the best or even a good way.
> >
> >     Jeff
> >
> >
> > Spencer Tickner wrote:
> > >
> > > I'm fairly new to lucene so excuse the ignorance. I'm attempting to
> > > field an XML documents with nested fields. So:
> > >
> > > <foo>
> > >   <bar>This</bar>
> > >   <bat>That</bat>
> > > </foo>
> > >
> > > ...
> > >
> > > The only way I can see a way of doing this now is to field each
> > > element I want to field and all of it's descendant text, ...
> > >
> >
> > --
> > View this message in context:
> > http://www.nabble.com/Nested-Fields-tf4214959.html#a12085200
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 17:48:48 2007
Return-Path: <java-user-return-29742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32314 invoked from network); 10 Aug 2007 17:48:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 17:48:47 -0000
Received: (qmail 14813 invoked by uid 500); 10 Aug 2007 17:48:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14779 invoked by uid 500); 10 Aug 2007 17:48:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14768 invoked by uid 99); 10 Aug 2007 17:48:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 10:48:39 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 17:48:35 +0000
Received: by nf-out-0910.google.com with SMTP id d3so301218nfc
        for <java-user@lucene.apache.org>; Fri, 10 Aug 2007 10:48:14 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=g1LVu1hzEglKIUSV8ZfGZTGaGSPoW7dA+/THftcPTLbsFhwsVjx5zMGTz/wQaW3bUg1dwk+dgSQsHwH0OkoXYHPHr0qZx7K1BHsB9f1id57uUV+D33StlO2SalkImq7frYn+lWkjamQQIa25jaBEB1xfk9w0YjCcIqiAG+PiQMo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=HhIWWI4ljef4Sn1wugxE4QwhObgUrSoSQqsM/yOWVifHpQHh+4BEDYb4GtXWaRrCS5uN1eEDAls2IrFhb7jKbDQ184pQfm6Am2RFDvWSClex8Opue8YBy4//MI6Bl2/jF4ZZSuqdyga3nlYedJ18bQgUwyGzqoY4EJmE3GlSgDQ=
Received: by 10.86.26.11 with SMTP id 11mr2482029fgz.1186768093905;
        Fri, 10 Aug 2007 10:48:13 -0700 (PDT)
Received: by 10.86.57.14 with HTTP; Fri, 10 Aug 2007 10:48:13 -0700 (PDT)
Message-ID: <8837fb770708101048m6f524bc6w3931ca8c8f190775@mail.gmail.com>
Date: Fri, 10 Aug 2007 10:48:13 -0700
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: scorers and filters
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23495_32996543.1186768093633"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_23495_32996543.1186768093633
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Lucene Gurus:

    More of a performance question:

When you pass a Filter to a searcher to do a search, the searcher is
basically doing the full search and then intersect against the bitset given
by the filter. This seems wasteful when there are lotsa hits returned by the
scorer and filter only has only a few docs, e.g.

     Running a MatchAllDocsQuery given a Filter with only 1 doc.

    Right now Scorers don't know about filters, only the searchers do. And
scorers are doing most of the computation, but it seems scorers should make
use of the filters as the corpus before doing any score computation.

    Seems to me this is an area that deserves some attention.

Thoughts?

Thanks

-John

------=_Part_23495_32996543.1186768093633--

From java-user-return-29743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 18:28:00 2007
Return-Path: <java-user-return-29743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47924 invoked from network); 10 Aug 2007 18:27:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 18:27:59 -0000
Received: (qmail 78914 invoked by uid 500); 10 Aug 2007 18:27:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78540 invoked by uid 500); 10 Aug 2007 18:27:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78529 invoked by uid 99); 10 Aug 2007 18:27:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 11:27:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 64.233.162.237 as permitted sender)
Received: from [64.233.162.237] (HELO nz-out-0506.google.com) (64.233.162.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 18:27:47 +0000
Received: by nz-out-0506.google.com with SMTP id i28so375681nzi
        for <java-user@lucene.apache.org>; Fri, 10 Aug 2007 11:27:26 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=Hy1li4nIWcGFwutVObQYhLWK9i5RKzIcUEZpcydnEopaZW/wbeGJatfo54RzefrTdPllDNv2C6YWSEJntFKPDQkLlxHNipOWFA0wTVgcMb3cPldc82zRARfdXFwy5fOq1T8oLLvJ57KaUDkdLBYlC5cnG3mqGPfh9Q+cj+De/JM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=dZn54z+AYwKh3RE7PixckC42F/ongUMLxjsUjWJsmP0UNY5dK7SItggE3/RlV2MRfiUc4TUJKHNDwlFchLyf9gdDAUsqMEyQnyywk3qnPfhdEj1AHf4VBK/M2Mjga37Aefz1X3Xdl4Y2tv2PtUN2DFtb3+f1SfF1pi/ookKbWA4=
Received: by 10.142.154.20 with SMTP id b20mr143462wfe.1186770445778;
        Fri, 10 Aug 2007 11:27:25 -0700 (PDT)
Received: by 10.143.167.8 with HTTP; Fri, 10 Aug 2007 11:27:25 -0700 (PDT)
Message-ID: <c68e39170708101127tffc723bw12e5c7cf6df6c547@mail.gmail.com>
Date: Fri, 10 Aug 2007 14:27:25 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: scorers and filters
In-Reply-To: <8837fb770708101048m6f524bc6w3931ca8c8f190775@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <8837fb770708101048m6f524bc6w3931ca8c8f190775@mail.gmail.com>
X-Google-Sender-Auth: b6d9691dcf7b9ff8
X-Virus-Checked: Checked by ClamAV on apache.org

On 8/10/07, John Wang <john.wang@gmail.com> wrote:
> Hi Lucene Gurus:
>
>     More of a performance question:
>
> When you pass a Filter to a searcher to do a search, the searcher is
> basically doing the full search and then intersect against the bitset given
> by the filter. This seems wasteful when there are lotsa hits returned by the
> scorer and filter only has only a few docs, e.g.
>
>      Running a MatchAllDocsQuery given a Filter with only 1 doc.
>
>     Right now Scorers don't know about filters, only the searchers do. And
> scorers are doing most of the computation, but it seems scorers should make
> use of the filters as the corpus before doing any score computation.
>
>     Seems to me this is an area that deserves some attention.

Skip based on the filter and the query...
See the comments in FilteredQuery, and see
https://issues.apache.org/jira/browse/LUCENE-584

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 19:34:14 2007
Return-Path: <java-user-return-29744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71022 invoked from network); 10 Aug 2007 19:34:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 19:34:13 -0000
Received: (qmail 84837 invoked by uid 500); 10 Aug 2007 19:34:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84797 invoked by uid 500); 10 Aug 2007 19:34:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84784 invoked by uid 99); 10 Aug 2007 19:34:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 12:34:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.26] (HELO smtp-vbr6.xs4all.nl) (194.109.24.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 19:34:04 +0000
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr6.xs4all.nl (8.13.8/8.13.8) with ESMTP id l7AJXe3k010673
	for <java-user@lucene.apache.org>; Fri, 10 Aug 2007 21:33:41 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: scorers and filters
Date: Fri, 10 Aug 2007 21:33:40 +0200
User-Agent: KMail/1.8.2
References: <8837fb770708101048m6f524bc6w3931ca8c8f190775@mail.gmail.com> <c68e39170708101127tffc723bw12e5c7cf6df6c547@mail.gmail.com>
In-Reply-To: <c68e39170708101127tffc723bw12e5c7cf6df6c547@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200708102133.40433.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

On Friday 10 August 2007 20:27, Yonik Seeley wrote:
> On 8/10/07, John Wang <john.wang@gmail.com> wrote:
> > Hi Lucene Gurus:
> >
> >     More of a performance question:
> >
> > When you pass a Filter to a searcher to do a search, the searcher is
> > basically doing the full search and then intersect against the bitset 
given
> > by the filter. This seems wasteful when there are lotsa hits returned by 
the
> > scorer and filter only has only a few docs, e.g.
> >
> >      Running a MatchAllDocsQuery given a Filter with only 1 doc.
> >
> >     Right now Scorers don't know about filters, only the searchers do. And
> > scorers are doing most of the computation, but it seems scorers should 
make
> > use of the filters as the corpus before doing any score computation.
> >
> >     Seems to me this is an area that deserves some attention.

Yet another way to formulate the need for a common superclass.
The patch at the issue indicated below is an "extract superclass"
refactoring.
And the latest discussion on it is on java-dev today.

Regards,
Paul Elschot.

> 
> Skip based on the filter and the query...
> See the comments in FilteredQuery, and see
> https://issues.apache.org/jira/browse/LUCENE-584
> 
> -Yonik
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 10 22:41:24 2007
Return-Path: <java-user-return-29745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21900 invoked from network); 10 Aug 2007 22:41:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Aug 2007 22:41:23 -0000
Received: (qmail 37748 invoked by uid 500); 10 Aug 2007 22:41:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37691 invoked by uid 500); 10 Aug 2007 22:41:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37676 invoked by uid 99); 10 Aug 2007 22:41:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 15:41:14 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.196.101.43] (HELO web59302.mail.re1.yahoo.com) (66.196.101.43)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 10 Aug 2007 22:41:05 +0000
Received: (qmail 31614 invoked by uid 60001); 10 Aug 2007 22:40:43 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=mJygb7/S6iVWfdlmr/8+bKfhUZOB9qMMhoH1AGyz6NyE4a2f/kKNF8cCPShNgQ1BfA5ByxFXMq4MaF3EaTyVYR/DSdS5dCDsSfvGud5mHtTGHe0I8uKPd5t/E+IogqI6bhqfjhYljvLiLa0APC4b4DnYivtqQ1GLSPiYpublcak=;
X-YMail-OSG: R.dIcjQVM1n2fR.oTl3TE8LPymsHJpd_fkFltvCccELi1MOLeuZ4V1g_qrVLHJ_Tuj.nCuswH6bUnvFB9.Vn.C5fQEEKqA.Sa.wL
Received: from [64.81.54.56] by web59302.mail.re1.yahoo.com via HTTP; Fri, 10 Aug 2007 15:40:43 PDT
X-Mailer: YahooMailRC/651.48 YahooMailWebService/0.7.119
Date: Fri, 10 Aug 2007 15:40:43 -0700 (PDT)
From: Kai_testing Middleton <kai_testing@yahoo.com>
Subject: Re: StandardAnalyzer vs KeywordAnalyzer in Luke
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-573699075-1186785643=:30875"
Message-ID: <392247.30875.qm@web59302.mail.re1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-573699075-1186785643=:30875
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

The nutch analyzer is NutchDocumentAnalyzer.  Does anyone know how to add t=
his to the Luke classpath?  I tried this kind of thing but it didn't work:=
=0A=0Anote that the last line is=0A   java -jar lukeall-0.7.1.jar=0A=0A=0Ae=
xport CLASSPATH=3D$NUTCH_HOME/lib/jetty-ext/ant.jar=0Aexport CLASSPATH=3D$C=
LASSPATH:$NUTCH_HOME/lib/jetty-ext/commons-el.jar=0Aexport CLASSPATH=3D$CLA=
SSPATH:$NUTCH_HOME/lib/jetty-ext/jasper-compiler.jar=0Aexport CLASSPATH=3D$=
CLASSPATH:$NUTCH_HOME/lib/jetty-ext/jasper-runtime.jar=0Aexport CLASSPATH=
=3D$CLASSPATH:$NUTCH_HOME/lib/jetty-ext/jsp-api.jar=0Aexport CLASSPATH=3D$C=
LASSPATH:$NUTCH_HOME/lib/pmd-ext/jakarta-oro-2.0.8.jar=0Aexport CLASSPATH=
=3D$CLASSPATH:$NUTCH_HOME/lib/pmd-ext/jaxen-1.1-beta-7.jar=0Aexport CLASSPA=
TH=3D$CLASSPATH:$NUTCH_HOME/lib/pmd-ext/pmd-3.6.jar=0Aexport CLASSPATH=3D$C=
LASSPATH:$NUTCH_HOME/lib/commons-cli-2.0-SNAPSHOT.jar=0Aexport CLASSPATH=3D=
$CLASSPATH:$NUTCH_HOME/lib/commons-codec-1.3.jar=0Aexport CLASSPATH=3D$CLAS=
SPATH:$NUTCH_HOME/lib/commons-httpclient-3.0.1.jar=0Aexport CLASSPATH=3D$CL=
ASSPATH:$NUTCH_HOME/lib/commons-lang-2.1.jar=0Aexport CLASSPATH=3D$CLASSPAT=
H:$NUTCH_HOME/lib/commons-logging-1.0.4.jar=0Aexport CLASSPATH=3D$CLASSPATH=
:$NUTCH_HOME/lib/commons-logging-api-1.0.4.jar=0Aexport CLASSPATH=3D$CLASSP=
ATH:$NUTCH_HOME/lib/hadoop-0.12.3-core.jar=0Aexport CLASSPATH=3D$CLASSPATH:=
$NUTCH_HOME/lib/jakarta-oro-2.0.7.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTC=
H_HOME/lib/jets3t-0.5.0.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/lib=
/jetty-5.1.4.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/lib/junit-3.8.=
1.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/lib/log4j-1.2.13.jar=0Aex=
port CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/lib/lucene-core-2.2.0.jar=0Aexport =
CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/lib/lucene-misc-2.2.0.jar=0Aexport CLASS=
PATH=3D$CLASSPATH:$NUTCH_HOME/lib/servlet-api.jar=0Aexport CLASSPATH=3D$CLA=
SSPATH:$NUTCH_HOME/lib/taglibs-i18n.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NU=
TCH_HOME/lib/xerces-2_6_2-apis.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_H=
OME/lib/xerces-2_6_2.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugin=
s/clustering-carrot2/Jama-1.0.1-patched.jar=0Aexport CLASSPATH=3D$CLASSPATH=
:$NUTCH_HOME/plugins/clustering-carrot2/carrot2-filter-lingo.jar=0Aexport C=
LASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugins/clustering-carrot2/carrot2-local-=
core.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugins/clustering-car=
rot2/carrot2-snowball-stemmers.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_H=
OME/plugins/clustering-carrot2/carrot2-util-common.jar=0Aexport CLASSPATH=
=3D$CLASSPATH:$NUTCH_HOME/plugins/clustering-carrot2/carrot2-util-tokenizer=
.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugins/clustering-carrot2=
/clustering-carrot2.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugins=
/clustering-carrot2/commons-collections-3.1-patched.jar=0Aexport CLASSPATH=
=3D$CLASSPATH:$NUTCH_HOME/plugins/clustering-carrot2/commons-pool-1.1.jar=
=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugins/clustering-carrot2/vio=
linstrings-1.0.2.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugins/cr=
eativecommons/creativecommons.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HO=
ME/plugins/feed/feed.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugin=
s/feed/rome-0.9.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugins/ind=
ex-basic/index-basic.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugin=
s/index-more/index-more.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plu=
gins/language-identifier/language-identifier.jar=0Aexport CLASSPATH=3D$CLAS=
SPATH:$NUTCH_HOME/plugins/lib-http/lib-http.jar=0Aexport CLASSPATH=3D$CLASS=
PATH:$NUTCH_HOME/plugins/lib-jakarta-poi/poi-3.0-alpha1-20050704.jar=0Aexpo=
rt CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugins/lib-jakarta-poi/poi-scratchpa=
d-3.0-alpha1-20050704.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugi=
ns/lib-lucene-analyzers/lucene-analyzers-2.2.0.jar=0Aexport CLASSPATH=3D$CL=
ASSPATH:$NUTCH_HOME/plugins/lib-nekohtml/nekohtml-0.9.4.jar=0Aexport CLASSP=
ATH=3D$CLASSPATH:$NUTCH_HOME/plugins/lib-parsems/lib-parsems.jar=0Aexport C=
LASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugins/lib-regex-filter/lib-regex-filter=
.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugins/lib-xml/jaxen-core=
.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugins/lib-xml/jaxen-jdom=
.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugins/lib-xml/jdom.jar=
=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugins/lib-xml/saxpath.jar=0A=
export CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugins/lib-xml/xercesImpl.jar=0A=
export CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugins/microformats-reltag/micro=
formats-reltag.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugins/nutc=
h-extensionpoints/nutch-extensionpoints.jar=0Aexport CLASSPATH=3D$CLASSPATH=
:$NUTCH_HOME/plugins/ontology/icu4j_2_6_1.jar=0Aexport CLASSPATH=3D$CLASSPA=
TH:$NUTCH_HOME/plugins/ontology/jena-2.1.jar=0Aexport CLASSPATH=3D$CLASSPAT=
H:$NUTCH_HOME/plugins/ontology/ontology.jar=0Aexport CLASSPATH=3D$CLASSPATH=
:$NUTCH_HOME/plugins/parse-ext/parse-ext.jar=0Aexport CLASSPATH=3D$CLASSPAT=
H:$NUTCH_HOME/plugins/parse-html/parse-html.jar=0Aexport CLASSPATH=3D$CLASS=
PATH:$NUTCH_HOME/plugins/parse-html/tagsoup-1.0rc3.jar=0Aexport CLASSPATH=
=3D$CLASSPATH:$NUTCH_HOME/plugins/parse-js/parse-js.jar=0Aexport CLASSPATH=
=3D$CLASSPATH:$NUTCH_HOME/plugins/parse-msexcel/parse-msexcel.jar=0Aexport =
CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugins/parse-msword/parse-msword.jar=0A=
export CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugins/parse-mspowerpoint/parse-=
mspowerpoint.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugins/parse-=
oo/parse-oo.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugins/parse-p=
df/PDFBox-0.7.2-log4j.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugi=
ns/parse-pdf/parse-pdf.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plug=
ins/parse-rss/commons-feedparser-0.6-fork.jar=0Aexport CLASSPATH=3D$CLASSPA=
TH:$NUTCH_HOME/plugins/parse-rss/parse-rss.jar=0Aexport CLASSPATH=3D$CLASSP=
ATH:$NUTCH_HOME/plugins/parse-rss/xmlrpc-1.2.jar=0Aexport CLASSPATH=3D$CLAS=
SPATH:$NUTCH_HOME/plugins/parse-swf/javaswf.jar=0Aexport CLASSPATH=3D$CLASS=
PATH:$NUTCH_HOME/plugins/parse-swf/parse-swf.jar=0Aexport CLASSPATH=3D$CLAS=
SPATH:$NUTCH_HOME/plugins/parse-text/parse-text.jar=0Aexport CLASSPATH=3D$C=
LASSPATH:$NUTCH_HOME/plugins/parse-zip/parse-zip.jar=0Aexport CLASSPATH=3D$=
CLASSPATH:$NUTCH_HOME/plugins/protocol-file/protocol-file.jar=0Aexport CLAS=
SPATH=3D$CLASSPATH:$NUTCH_HOME/plugins/protocol-ftp/commons-net-1.2.0-dev.j=
ar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugins/protocol-ftp/protoco=
l-ftp.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugins/protocol-http=
/protocol-http.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugins/prot=
ocol-httpclient/protocol-httpclient.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NU=
TCH_HOME/plugins/query-basic/query-basic.jar=0Aexport CLASSPATH=3D$CLASSPAT=
H:$NUTCH_HOME/plugins/query-more/query-more.jar=0Aexport CLASSPATH=3D$CLASS=
PATH:$NUTCH_HOME/plugins/query-site/query-site.jar=0Aexport CLASSPATH=3D$CL=
ASSPATH:$NUTCH_HOME/plugins/query-url/query-url.jar=0Aexport CLASSPATH=3D$C=
LASSPATH:$NUTCH_HOME/plugins/scoring-opic/scoring-opic.jar=0Aexport CLASSPA=
TH=3D$CLASSPATH:$NUTCH_HOME/plugins/subcollection/subcollection.jar=0Aexpor=
t CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugins/summary-basic/summary-basic.ja=
r=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugins/summary-lucene/lucene=
-highlighter-2.2.0.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugins/=
summary-lucene/summary-lucene.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HO=
ME/plugins/urlfilter-automaton/automaton.jar=0Aexport CLASSPATH=3D$CLASSPAT=
H:$NUTCH_HOME/plugins/urlfilter-automaton/urlfilter-automaton.jar=0Aexport =
CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugins/urlfilter-prefix/urlfilter-prefi=
x.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugins/urlfilter-regex/u=
rlfilter-regex.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugins/urlf=
ilter-suffix/urlfilter-suffix.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HO=
ME/plugins/urlnormalizer-basic/urlnormalizer-basic.jar=0Aexport CLASSPATH=
=3D$CLASSPATH:$NUTCH_HOME/plugins/urlnormalizer-pass/urlnormalizer-pass.jar=
=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/plugins/urlnormalizer-regex/ur=
lnormalizer-regex.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/src/plugi=
n/clustering-carrot2/lib/Jama-1.0.1-patched.jar=0Aexport CLASSPATH=3D$CLASS=
PATH:$NUTCH_HOME/src/plugin/clustering-carrot2/lib/carrot2-filter-lingo.jar=
=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/src/plugin/clustering-carrot2/=
lib/carrot2-local-core.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/src/=
plugin/clustering-carrot2/lib/carrot2-snowball-stemmers.jar=0Aexport CLASSP=
ATH=3D$CLASSPATH:$NUTCH_HOME/src/plugin/clustering-carrot2/lib/carrot2-util=
-common.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/src/plugin/clusteri=
ng-carrot2/lib/carrot2-util-tokenizer.jar=0Aexport CLASSPATH=3D$CLASSPATH:$=
NUTCH_HOME/src/plugin/clustering-carrot2/lib/commons-collections-3.1-patche=
d.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/src/plugin/clustering-car=
rot2/lib/commons-pool-1.1.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/s=
rc/plugin/clustering-carrot2/lib/violinstrings-1.0.2.jar=0Aexport CLASSPATH=
=3D$CLASSPATH:$NUTCH_HOME/src/plugin/feed/lib/rome-0.9.jar=0Aexport CLASSPA=
TH=3D$CLASSPATH:$NUTCH_HOME/src/plugin/lib-jakarta-poi/lib/poi-3.0-alpha1-2=
0050704.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/src/plugin/lib-jaka=
rta-poi/lib/poi-scratchpad-3.0-alpha1-20050704.jar=0Aexport CLASSPATH=3D$CL=
ASSPATH:$NUTCH_HOME/src/plugin/lib-lucene-analyzers/lib/lucene-analyzers-2.=
2.0.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/src/plugin/lib-nekohtml=
/lib/nekohtml-0.9.4.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/src/plu=
gin/lib-xml/lib/jaxen-core.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/=
src/plugin/lib-xml/lib/jaxen-jdom.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTC=
H_HOME/src/plugin/lib-xml/lib/jdom.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUT=
CH_HOME/src/plugin/lib-xml/lib/saxpath.jar=0Aexport CLASSPATH=3D$CLASSPATH:=
$NUTCH_HOME/src/plugin/lib-xml/lib/xercesImpl.jar=0Aexport CLASSPATH=3D$CLA=
SSPATH:$NUTCH_HOME/src/plugin/ontology/lib/icu4j_2_6_1.jar=0Aexport CLASSPA=
TH=3D$CLASSPATH:$NUTCH_HOME/src/plugin/ontology/lib/jena-2.1.jar=0Aexport C=
LASSPATH=3D$CLASSPATH:$NUTCH_HOME/src/plugin/parse-html/lib/tagsoup-1.0rc3.=
jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/src/plugin/parse-pdf/lib/PD=
FBox-0.7.2-log4j.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/src/plugin=
/parse-rss/lib/commons-feedparser-0.6-fork.jar=0Aexport CLASSPATH=3D$CLASSP=
ATH:$NUTCH_HOME/src/plugin/parse-rss/lib/xmlrpc-1.2.jar=0Aexport CLASSPATH=
=3D$CLASSPATH:$NUTCH_HOME/src/plugin/parse-swf/lib/javaswf.jar=0Aexport CLA=
SSPATH=3D$CLASSPATH:$NUTCH_HOME/src/plugin/protocol-ftp/lib/commons-net-1.2=
.0-dev.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/src/plugin/summary-l=
ucene/lib/lucene-highlighter-2.2.0.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUT=
CH_HOME/src/plugin/urlfilter-automaton/lib/automaton.jar=0Aexport CLASSPATH=
=3D$CLASSPATH:$NUTCH_HOME/nutch-2007-06-27_06-52-44.jar=0Aexport CLASSPATH=
=3D$CLASSPATH:$NUTCH_HOME/build/clustering-carrot2/clustering-carrot2.jar=
=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/lib-nekohtml/nekohtml-0.=
9.4.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/plugins/lib-nekoh=
tml/nekohtml-0.9.4.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/pl=
ugins/nutch-extensionpoints/nutch-extensionpoints.jar=0Aexport CLASSPATH=3D=
$CLASSPATH:$NUTCH_HOME/build/plugins/clustering-carrot2/clustering-carrot2.=
jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/plugins/clustering-ca=
rrot2/Jama-1.0.1-patched.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/bu=
ild/plugins/clustering-carrot2/commons-collections-3.1-patched.jar=0Aexport=
 CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/plugins/clustering-carrot2/carrot=
2-util-common.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/plugins=
/clustering-carrot2/violinstrings-1.0.2.jar=0Aexport CLASSPATH=3D$CLASSPATH=
:$NUTCH_HOME/build/plugins/clustering-carrot2/carrot2-util-tokenizer.jar=0A=
export CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/plugins/clustering-carrot2/=
carrot2-filter-lingo.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/=
plugins/clustering-carrot2/carrot2-local-core.jar=0Aexport CLASSPATH=3D$CLA=
SSPATH:$NUTCH_HOME/build/plugins/clustering-carrot2/carrot2-snowball-stemme=
rs.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/plugins/clustering=
-carrot2/commons-pool-1.1.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/b=
uild/plugins/parse-html/parse-html.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUT=
CH_HOME/build/plugins/parse-html/tagsoup-1.0rc3.jar=0Aexport CLASSPATH=3D$C=
LASSPATH:$NUTCH_HOME/build/plugins/creativecommons/creativecommons.jar=0Aex=
port CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/plugins/protocol-file/protoco=
l-file.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/plugins/feed/f=
eed.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/plugins/feed/rome=
-0.9.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/plugins/index-ba=
sic/index-basic.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/plugi=
ns/index-more/index-more.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/bu=
ild/plugins/language-identifier/language-identifier.jar=0Aexport CLASSPATH=
=3D$CLASSPATH:$NUTCH_HOME/build/plugins/lib-http/lib-http.jar=0Aexport CLAS=
SPATH=3D$CLASSPATH:$NUTCH_HOME/build/plugins/lib-jakarta-poi/poi-3.0-alpha1=
-20050704.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/plugins/lib=
-jakarta-poi/poi-scratchpad-3.0-alpha1-20050704.jar=0Aexport CLASSPATH=3D$C=
LASSPATH:$NUTCH_HOME/build/plugins/lib-lucene-analyzers/lucene-analyzers-2.=
2.0.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/plugins/lib-parse=
ms/lib-parsems.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/plugin=
s/lib-regex-filter/lib-regex-filter.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NU=
TCH_HOME/build/plugins/lib-xml/jaxen-core.jar=0Aexport CLASSPATH=3D$CLASSPA=
TH:$NUTCH_HOME/build/plugins/lib-xml/jdom.jar=0Aexport CLASSPATH=3D$CLASSPA=
TH:$NUTCH_HOME/build/plugins/lib-xml/xercesImpl.jar=0Aexport CLASSPATH=3D$C=
LASSPATH:$NUTCH_HOME/build/plugins/lib-xml/saxpath.jar=0Aexport CLASSPATH=
=3D$CLASSPATH:$NUTCH_HOME/build/plugins/lib-xml/jaxen-jdom.jar=0Aexport CLA=
SSPATH=3D$CLASSPATH:$NUTCH_HOME/build/plugins/microformats-reltag/microform=
ats-reltag.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/plugins/on=
tology/ontology.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/plugi=
ns/ontology/jena-2.1.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/=
plugins/ontology/icu4j_2_6_1.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOM=
E/build/plugins/protocol-ftp/protocol-ftp.jar=0Aexport CLASSPATH=3D$CLASSPA=
TH:$NUTCH_HOME/build/plugins/protocol-ftp/commons-net-1.2.0-dev.jar=0Aexpor=
t CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/plugins/protocol-http/protocol-h=
ttp.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/plugins/protocol-=
httpclient/protocol-httpclient.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_H=
OME/build/plugins/parse-ext/parse-ext.jar=0Aexport CLASSPATH=3D$CLASSPATH:$=
NUTCH_HOME/build/plugins/parse-js/parse-js.jar=0Aexport CLASSPATH=3D$CLASSP=
ATH:$NUTCH_HOME/build/plugins/parse-msexcel/parse-msexcel.jar=0Aexport CLAS=
SPATH=3D$CLASSPATH:$NUTCH_HOME/build/plugins/parse-mspowerpoint/parse-mspow=
erpoint.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/plugins/parse=
-msword/parse-msword.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/=
plugins/parse-oo/parse-oo.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/b=
uild/plugins/parse-pdf/parse-pdf.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH=
_HOME/build/plugins/parse-pdf/PDFBox-0.7.2-log4j.jar=0Aexport CLASSPATH=3D$=
CLASSPATH:$NUTCH_HOME/build/plugins/parse-rss/parse-rss.jar=0Aexport CLASSP=
ATH=3D$CLASSPATH:$NUTCH_HOME/build/plugins/parse-rss/xmlrpc-1.2.jar=0Aexpor=
t CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/plugins/parse-rss/commons-feedpa=
rser-0.6-fork.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/plugins=
/parse-swf/parse-swf.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/=
plugins/parse-swf/javaswf.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/b=
uild/plugins/parse-text/parse-text.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUT=
CH_HOME/build/plugins/parse-zip/parse-zip.jar=0Aexport CLASSPATH=3D$CLASSPA=
TH:$NUTCH_HOME/build/plugins/query-basic/query-basic.jar=0Aexport CLASSPATH=
=3D$CLASSPATH:$NUTCH_HOME/build/plugins/query-more/query-more.jar=0Aexport =
CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/plugins/query-site/query-site.jar=
=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/plugins/query-url/query-=
url.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/plugins/scoring-o=
pic/scoring-opic.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/plug=
ins/summary-basic/summary-basic.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_=
HOME/build/plugins/subcollection/subcollection.jar=0Aexport CLASSPATH=3D$CL=
ASSPATH:$NUTCH_HOME/build/plugins/summary-lucene/summary-lucene.jar=0Aexpor=
t CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/plugins/summary-lucene/lucene-hi=
ghlighter-2.2.0.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/plugi=
ns/urlfilter-automaton/urlfilter-automaton.jar=0Aexport CLASSPATH=3D$CLASSP=
ATH:$NUTCH_HOME/build/plugins/urlfilter-automaton/automaton.jar=0Aexport CL=
ASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/plugins/urlfilter-prefix/urlfilter-p=
refix.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/plugins/urlfilt=
er-regex/urlfilter-regex.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/bu=
ild/plugins/urlfilter-suffix/urlfilter-suffix.jar=0Aexport CLASSPATH=3D$CLA=
SSPATH:$NUTCH_HOME/build/plugins/urlnormalizer-basic/urlnormalizer-basic.ja=
r=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/plugins/urlnormalizer-p=
ass/urlnormalizer-pass.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/buil=
d/plugins/urlnormalizer-regex/urlnormalizer-regex.jar=0Aexport CLASSPATH=3D=
$CLASSPATH:$NUTCH_HOME/build/nutch-extensionpoints/nutch-extensionpoints.ja=
r=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/creativecommons/creativ=
ecommons.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/parse-html/p=
arse-html.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/feed/feed.j=
ar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/lib-xml/jaxen-core.jar=
=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/lib-xml/jdom.jar=0Aexpor=
t CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/lib-xml/xercesImpl.jar=0Aexport =
CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/lib-xml/saxpath.jar=0Aexport CLASS=
PATH=3D$CLASSPATH:$NUTCH_HOME/build/lib-xml/jaxen-jdom.jar=0Aexport CLASSPA=
TH=3D$CLASSPATH:$NUTCH_HOME/build/protocol-file/protocol-file.jar=0Aexport =
CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/index-basic/index-basic.jar=0Aexpo=
rt CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/index-more/index-more.jar=0Aexp=
ort CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/language-identifier/language-i=
dentifier.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/lib-http/li=
b-http.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/lib-jakarta-po=
i/poi-3.0-alpha1-20050704.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/b=
uild/lib-jakarta-poi/poi-scratchpad-3.0-alpha1-20050704.jar=0Aexport CLASSP=
ATH=3D$CLASSPATH:$NUTCH_HOME/build/lib-lucene-analyzers/lucene-analyzers-2.=
2.0.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/lib-parsems/lib-p=
arsems.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/lib-regex-filt=
er/lib-regex-filter.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/m=
icroformats-reltag/microformats-reltag.jar=0Aexport CLASSPATH=3D$CLASSPATH:=
$NUTCH_HOME/build/ontology/ontology.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NU=
TCH_HOME/build/protocol-ftp/protocol-ftp.jar=0Aexport CLASSPATH=3D$CLASSPAT=
H:$NUTCH_HOME/build/protocol-http/protocol-http.jar=0Aexport CLASSPATH=3D$C=
LASSPATH:$NUTCH_HOME/build/protocol-httpclient/protocol-httpclient.jar=0Aex=
port CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/parse-ext/parse-ext.jar=0Aexp=
ort CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/parse-js/parse-js.jar=0Aexport=
 CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/parse-msexcel/parse-msexcel.jar=
=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/parse-mspowerpoint/parse=
-mspowerpoint.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/parse-m=
sword/parse-msword.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/pa=
rse-oo/parse-oo.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/parse=
-pdf/parse-pdf.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/parse-=
rss/parse-rss.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/parse-s=
wf/parse-swf.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/parse-te=
xt/parse-text.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/parse-z=
ip/parse-zip.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/query-ba=
sic/query-basic.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/query=
-more/query-more.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/quer=
y-site/query-site.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/que=
ry-url/query-url.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/scor=
ing-opic/scoring-opic.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build=
/summary-basic/summary-basic.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOM=
E/build/subcollection/subcollection.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NU=
TCH_HOME/build/summary-lucene/summary-lucene.jar=0Aexport CLASSPATH=3D$CLAS=
SPATH:$NUTCH_HOME/build/urlfilter-automaton/urlfilter-automaton.jar=0Aexpor=
t CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/urlfilter-prefix/urlfilter-prefi=
x.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/urlfilter-regex/url=
filter-regex.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/urlfilte=
r-suffix/urlfilter-suffix.jar=0Aexport CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/b=
uild/urlnormalizer-basic/urlnormalizer-basic.jar=0Aexport CLASSPATH=3D$CLAS=
SPATH:$NUTCH_HOME/build/urlnormalizer-pass/urlnormalizer-pass.jar=0Aexport =
CLASSPATH=3D$CLASSPATH:$NUTCH_HOME/build/urlnormalizer-regex/urlnormalizer-=
regex.jar=0Ajava -jar lukeall-0.7.1.jar=0A=0A=0A----- Original Message ----=
=0AFrom: Grant Ingersoll <gsingers@apache.org>=0ATo: java-user@lucene.apach=
e.org=0ASent: Tuesday, August 7, 2007 5:51:43 PM=0ASubject: Re: StandardAna=
lyzer vs KeywordAnalyzer in Luke=0A=0ANutch uses it's own Analyzer.  You sh=
ould use the Analyzer that Nutch  =0Auses in order to get proper results.  =
That may mean adding the Nutch  =0AAnalyzer to your Luke classpath.=0A=0A-G=
rant=0A=0AOn Aug 7, 2007, at 7:22 PM, Kai_testing Middleton wrote:=0A=0A> I=
'm invoking Luke like this:=0A>    java -jar lukeall-0.7.1.jar=0A> I run th=
is query:=0A>    content:Nyarubuye=0A>=0A> When I use the StandardAnalyzer =
I get results but when I use the=0A> KeywordAnalyzer I don't get results.  =
Can someone explain this?=0A>=0A> My corpus was crawled and indexed using a=
 nightly build of nutch  =0A> (with Lucene=0A> 2.2, just like my Luke 0.7.1=
), crawling a bunch of news sites.  A  =0A> legitimate=0A> result page woul=
d be:=0A> http://news.bbc.co.uk/2/hi/programmes/panorama/3582267.stm=0A>=0A=
> SimpleAnalyzer also works as does StopAnalyzer.  WhitespaceAnalyzer  =0A>=
 fails.=0A> (SnowballAnalyzer gives me a ClassDefNotFound exception).   =0A=
> PerfieldAnalyzer=0A> gives me a PerfieldAnalyzerWrapper error.=0A--------=
------------------=0AGrant Ingersoll=0Ahttp://lucene.grantingersoll.com=0A=
=0A=0A=0A=0A=0A=0A=0A       =0A____________________________________________=
________________________________________=0ATake the Internet to Go: Yahoo!G=
o puts the Internet in your pocket: mail, news, photos & more. =0Ahttp://mo=
bile.yahoo.com/go?refer=3D1GNXIC
--0-573699075-1186785643=:30875--

From java-user-return-29746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 11 00:21:05 2007
Return-Path: <java-user-return-29746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62242 invoked from network); 11 Aug 2007 00:21:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Aug 2007 00:21:04 -0000
Received: (qmail 13321 invoked by uid 500); 11 Aug 2007 00:20:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13275 invoked by uid 500); 11 Aug 2007 00:20:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13264 invoked by uid 99); 11 Aug 2007 00:20:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 17:20:56 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Aug 2007 00:20:51 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IJeiV-0006e3-5B
	for java-user@lucene.apache.org; Fri, 10 Aug 2007 17:20:31 -0700
Message-ID: <12101239.post@talk.nabble.com>
Date: Fri, 10 Aug 2007 17:20:31 -0700 (PDT)
From: Aleesh <neerajkv@gmail.com>
To: java-user@lucene.apache.org
Subject: Reading Existing index
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: neerajkv@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,

 Need your help regarding reading existing index. Actually I am trying to
read an existing index ans just wanted to know, is there a way to identify
type of 'Analyzer' which was used at the index creation time?

thanks in advanced,
Neeraj
-- 
View this message in context: http://www.nabble.com/Reading-Existing-index-tf4251960.html#a12101239
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 11 06:55:39 2007
Return-Path: <java-user-return-29747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41482 invoked from network); 11 Aug 2007 06:55:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Aug 2007 06:55:38 -0000
Received: (qmail 82748 invoked by uid 500); 11 Aug 2007 06:55:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82704 invoked by uid 500); 11 Aug 2007 06:55:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82693 invoked by uid 99); 11 Aug 2007 06:55:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Aug 2007 23:55:30 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of nachitech@gmail.com designates 66.249.82.239 as permitted sender)
Received: from [66.249.82.239] (HELO wx-out-0506.google.com) (66.249.82.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Aug 2007 06:55:29 +0000
Received: by wx-out-0506.google.com with SMTP id i28so664398wxd
        for <java-user@lucene.apache.org>; Fri, 10 Aug 2007 23:55:03 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=QDBvuz3mKx7MSGgxYcyh0923FqdQAfC01FrsrTdNzGMmbuDedI1sSsJ+UqJALG4NTVa+BD8DNIkYTVVlR2PTncTlUiz2fcVQGLjMQ5DTFI0wfxbhRnReandGLlBrphRKb8oVEtYoPwNLBCzljJO49rV+bmP3KDdL1NrGdya5Vdw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=CAiwXsPVjLLRRn3frImz8tm9m0DRH7Le28E9Xc6XUqeccAia8AjUukdzhKIYeXDGk9IMk5M1OQKdgDEL96/zgypL6xc9WCAEW+0z3Sv0mHCMvdvVn/KjkfJvd4nJfA336HEGTqsCHrzpjDQERetfZTjMRIPSQx0xz/oNdem8WFk=
Received: by 10.90.34.3 with SMTP id h3mr5192190agh.1186815303712;
        Fri, 10 Aug 2007 23:55:03 -0700 (PDT)
Received: by 10.90.74.16 with HTTP; Fri, 10 Aug 2007 23:55:03 -0700 (PDT)
Message-ID: <2c716d580708102355l5ee12494nb8d298eeb2d4788d@mail.gmail.com>
Date: Sat, 11 Aug 2007 12:25:03 +0530
From: nachi <nachitech@gmail.com>
To: java-user@lucene.apache.org
Subject: indexing going wrong
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23331_184266.1186815303687"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_23331_184266.1186815303687
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

all,

No sure if earlier mail went thru..so resending...

Im new lucene and Im trying to develope a textual search module. I have
written the following code ( this is research code) -


 File dir = new File("c:/test");
  IndexWriter writer = new IndexWriter(dir, new StandardAnalyzer(), true);
  Document doc = new Document();
  File[] file = dir.listFiles();
  for (File f: file) {
   if (f.isFile() && f.canRead()) {
    System.out.println(f.getName());
    doc.add(new Field("filename",f.getName(),Field.Store.YES,
Field.Index.UN_TOKENIZED));
    doc.add(new Field("contents", new FileReader(f)));
    writer.addDocument(doc);
   }
  }

  System.out.println("count=" + writer.docCount());
     writer.optimize();
  writer.close();



I'm trying to index the contents of test diretory which has only txt files.

When I search the index for an particular word, I get the same filename
everytime.

Here is the code for searching -

File dir = new File("D:\\test");
  FSDirectory fsdir = FSDirectory.getDirectory(dir);
  IndexSearcher d = new IndexSearcher(fsdir);
  QueryParser p = new QueryParser("contents",new StandardAnalyzer());
  Query q = p.parse("ERROR");
  Hits hits = d.search(q);

  for (int i = 0; i < hits.length(); i++) {
   Document doc = hits.doc(i);
   System.out.println(doc.get("filename"));
   }
  d.close();
 }

Can somebody tell me what I'm doing wrong ? I suspect that there is
something wrong in the way I index.




-- 
-nachi

------=_Part_23331_184266.1186815303687--

From java-user-return-29748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 11 07:22:48 2007
Return-Path: <java-user-return-29748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49966 invoked from network); 11 Aug 2007 07:22:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Aug 2007 07:22:45 -0000
Received: (qmail 95451 invoked by uid 500); 11 Aug 2007 07:22:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95407 invoked by uid 500); 11 Aug 2007 07:22:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95396 invoked by uid 99); 11 Aug 2007 07:22:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Aug 2007 00:22:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.29.8 as permitted sender)
Received: from [80.67.29.8] (HELO smtprelay08.ispgateway.de) (80.67.29.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Aug 2007 07:22:33 +0000
Received: (qmail 773 invoked from network); 11 Aug 2007 07:22:10 -0000
Received: from unknown (HELO p54bfe4f1.dip.t-dialin.net) ([pbs]695637@[84.191.228.241])
          (envelope-sender <lucenelist2007@danielnaber.de>)
          by smtprelay08.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 11 Aug 2007 07:22:10 -0000
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Reading Existing index
Date: Sat, 11 Aug 2007 09:24:51 +0200
User-Agent: KMail/1.8.2
References: <12101239.post@talk.nabble.com>
In-Reply-To: <12101239.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200708110924.52126@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Saturday 11 August 2007 02:20, Aleesh wrote:

> =C2=A0Need your help regarding reading existing index. Actually I am tryi=
ng
> to read an existing index ans just wanted to know, is there a way to
> identify type of 'Analyzer' which was used at the index creation time?

That information is not part of the index. You will need to use Luke's=20
"reconstruct & edit" feature to look at the tokenized text and guess what=20
analyzer was used.

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 11 13:21:37 2007
Return-Path: <java-user-return-29749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83536 invoked from network); 11 Aug 2007 13:21:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Aug 2007 13:21:37 -0000
Received: (qmail 74871 invoked by uid 500); 11 Aug 2007 13:21:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74841 invoked by uid 500); 11 Aug 2007 13:21:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74828 invoked by uid 99); 11 Aug 2007 13:21:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Aug 2007 06:21:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of antonelloprov@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Aug 2007 13:21:22 +0000
Received: by wa-out-1112.google.com with SMTP id j40so1328924wah
        for <java-user@lucene.apache.org>; Sat, 11 Aug 2007 06:21:02 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=VoEMdP8RyxBmXVz2u8iihzUtUPeKl34r5Q5HWhDjlUpXQM8HOEhF/9F/v3bevvmKUC+XYv6IwEzQK+lk11wll3QpMw6au4/r3s096fz3XQuXL90UsUiqlGnXQoP0IiobKhP0vvFu1jPC/0Z5BTJiGyQg2jpe3UPYiTwPLAI+H5w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=iahKmhiScAsGD25bbahJ5Q3N1mlPmCC1XlFT8KpaXtwyJ0nkSoq+FSiET27etrqelQzeU0lzJAFIbkpEGxjYaeUG3FqBKTSJnbEAOt0LfBuWH0nHaGnoPq7pLNz7qRtaB+jAgxOsnxKvYNcegRFCxrzpklkqjbiqLB3B3N2Orms=
Received: by 10.114.149.2 with SMTP id w2mr547253wad.1186838461766;
        Sat, 11 Aug 2007 06:21:01 -0700 (PDT)
Received: by 10.114.167.11 with HTTP; Sat, 11 Aug 2007 06:21:01 -0700 (PDT)
Message-ID: <dadfe18a0708110621p582d0f4crbe8420e937c09fe2@mail.gmail.com>
Date: Sat, 11 Aug 2007 15:21:01 +0200
From: "Antonello Provenzano" <antonello@deveel.com>
Sender: antonelloprov@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Lucene in large database contexts
In-Reply-To: <6e3ae6310708100940n70c5a7b0p1650844c3338ed29@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <dadfe18a0708100209t28925682mc769e69e4a1f796b@mail.gmail.com>
	 <6e3ae6310708100940n70c5a7b0p1650844c3338ed29@mail.gmail.com>
X-Google-Sender-Auth: 6c3c85cd814c6fe8
X-Virus-Checked: Checked by ClamAV on apache.org

Chris,

Your solution is very interesting and I would like to consider it. At
the moment I'm going to focus on (N)Hibernate Search (in the .NET
version is released in the SVN), which also covers the requirement of
persistence.

If the result of the tests won't be successful, I will immediately
focus on DBSight.

Thanks again to all of you.
Antonello


On 8/10/07, Chris Lu <chris.lu@gmail.com> wrote:
> Hi, Antonello,
>
> I think you should try DBSight. Although it's a Java implementation,
> you don't need to worry about java coding at all. Just point the
> connection string to a database, and specify by you SQL, then you will
> have scheduling, incremental indexing, recreating indexes, sync with
> deleted records, and you can use Lucene query syntax directly, use
> existing templates or XML/JSON/HTML/JSP to render your results.
>
> It's an instant and scalable solution. Check out Lucene Database
> Search in 3 minutes:
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>
> You can use it on any databases.
>
> Thanks!
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>
>
> On 8/10/07, Antonello Provenzano <antonelloprov@gmail.com> wrote:
> > Hi There!
> >
> > I've been working for a while on the implementation of a website
> > oriented to contents that would contain millions of entries, most of
> > them indexable (such as descriptions, texts, names, etc.).
> > The ideal solution to make them searchable would be to use Lucene as
> > index and search engine.
> >
> > The reason I'm posting the mailing list is the following: since all
> > the entries will be stored in a database (most likely MySQL InnoDB or
> > Oracle), what's the best technique to implement a system that indexes
> > in "real time" (eg. when an entry is inserted into the databsse) the
> > content and make it searchable? Based on my understanding of Lucene,
> > such this thing is not possible, since the index must be re-created to
> > be able to search the indexed contents. Is this true?
> >
> > Eventually, could anyone point me to a working example about how to
> > implement such a similar context?
> >
> >
> > Thank you for the support.
> > Antonello
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 11 15:56:31 2007
Return-Path: <java-user-return-29750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95096 invoked from network); 11 Aug 2007 15:56:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Aug 2007 15:56:31 -0000
Received: (qmail 53679 invoked by uid 500); 11 Aug 2007 15:56:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53634 invoked by uid 500); 11 Aug 2007 15:56:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53623 invoked by uid 99); 11 Aug 2007 15:56:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Aug 2007 08:56:24 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.184 as permitted sender)
Received: from [209.85.128.184] (HELO fk-out-0910.google.com) (209.85.128.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Aug 2007 15:56:22 +0000
Received: by fk-out-0910.google.com with SMTP id z23so977374fkz
        for <java-user@lucene.apache.org>; Sat, 11 Aug 2007 08:56:00 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ch2aAEgfe7xb7jiJWk/spc9DXW7Os1hGKvnFsMRg/XSIAP0A2yI/F87dPcd2TLoPBhL8X+IykDTwQ7buFyPp3hD/tYrlGuPcNq+PlZQW8Kfp4PnrakmDo9kvEDyEXFXBF0g+7LON1enecMBGfYzsK83b/5zGWHG2bMVnQdt2Z+k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lg3AK+X4kidwxOqd4N30Ebi92bNbdNm4f5f+SBh3bI506jsy31v7pKwaIL6dCwfa9ynwQzdGMvZUkEUVmPs9A6wmHDswpKakCLJoLMtwFg3MdRRpnojRjR+fyt3hItqDEH1Agt7sfIgl0ruySeR5RrOPAkQ7tov7BLpKYeffu6o=
Received: by 10.82.190.2 with SMTP id n2mr5240630buf.1186847760219;
        Sat, 11 Aug 2007 08:56:00 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Sat, 11 Aug 2007 08:56:00 -0700 (PDT)
Message-ID: <359a92830708110856ydd64334p9b03818d09f861bd@mail.gmail.com>
Date: Sat, 11 Aug 2007 11:56:00 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: indexing going wrong
In-Reply-To: <2c716d580708102355l5ee12494nb8d298eeb2d4788d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17084_27353027.1186847760184"
References: <2c716d580708102355l5ee12494nb8d298eeb2d4788d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17084_27353027.1186847760184
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

A couple of things come to mind. But before I get to them, really, really,
really get a copy of Luke. It'll allow you to examine your index and
see if what's in there is really what you expect. It'll save you a world
of hurt <G>.... Google luke lucene....

Also, use query.toString to see what the query actually looks like.

Your index and the files you're trying to put into that index are both
"c:/test". Are there really files to start with in that directory?
And Lucene creates a new index when you specify true in the
IndexWriter, and I'm not sure how many files it blows away in the process.


But none of that matters, because your searcher opens "d:/test" and
you're indexing into "c:/test" <G>.....


Best
Erick


On 8/11/07, nachi <nachitech@gmail.com> wrote:
>
> all,
>
> No sure if earlier mail went thru..so resending...
>
> Im new lucene and Im trying to develope a textual search module. I have
> written the following code ( this is research code) -
>
>
> File dir = new File("c:/test");
>   IndexWriter writer = new IndexWriter(dir, new StandardAnalyzer(), true);
>   Document doc = new Document();
>   File[] file = dir.listFiles();
>   for (File f: file) {
>    if (f.isFile() && f.canRead()) {
>     System.out.println(f.getName());
>     doc.add(new Field("filename",f.getName(),Field.Store.YES,
> Field.Index.UN_TOKENIZED));
>     doc.add(new Field("contents", new FileReader(f)));
>     writer.addDocument(doc);
>    }
>   }
>
>   System.out.println("count=" + writer.docCount());
>      writer.optimize();
>   writer.close();
>
>
>
> I'm trying to index the contents of test diretory which has only txt
> files.
>
> When I search the index for an particular word, I get the same filename
> everytime.
>
> Here is the code for searching -
>
> File dir = new File("D:\\test");
>   FSDirectory fsdir = FSDirectory.getDirectory(dir);
>   IndexSearcher d = new IndexSearcher(fsdir);
>   QueryParser p = new QueryParser("contents",new StandardAnalyzer());
>   Query q = p.parse("ERROR");
>   Hits hits = d.search(q);
>
>   for (int i = 0; i < hits.length(); i++) {
>    Document doc = hits.doc(i);
>    System.out.println(doc.get("filename"));
>    }
>   d.close();
> }
>
> Can somebody tell me what I'm doing wrong ? I suspect that there is
> something wrong in the way I index.
>
>
>
>
> --
> -nachi
>

------=_Part_17084_27353027.1186847760184--

From java-user-return-29751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 11 17:06:20 2007
Return-Path: <java-user-return-29751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57246 invoked from network); 11 Aug 2007 17:06:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Aug 2007 17:06:19 -0000
Received: (qmail 96671 invoked by uid 500); 11 Aug 2007 17:06:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96627 invoked by uid 500); 11 Aug 2007 17:06:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96616 invoked by uid 99); 11 Aug 2007 17:06:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Aug 2007 10:06:11 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jpsondag@gmail.com designates 209.85.198.185 as permitted sender)
Received: from [209.85.198.185] (HELO rv-out-0910.google.com) (209.85.198.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Aug 2007 17:06:07 +0000
Received: by rv-out-0910.google.com with SMTP id k20so717695rvb
        for <java-user@lucene.apache.org>; Sat, 11 Aug 2007 10:05:46 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:mime-version:content-type:x-google-sender-auth;
        b=qaM2Rh211uvHZYIyKP46G5Ul/9v+khfgPF1aI1W5BgESp0grscSTEo8wq7W1V49FodBfRA3jXs5jfwU87Xz9DJALMWQbDmmV5T9QAy1NnnjlzQ1wdAREiyaMpLgnXR8vpIYwTA5+hQgH7KufXWj2BK2a2BPeOFogDfywZsXuulU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:mime-version:content-type:x-google-sender-auth;
        b=qwfPzl4UsNGbzDpQsXwLrh+JJswKJ9r+KDjk5CMfX/vviBkGa4Kj4oMQSouf38ckUNJmx5y8Y35MvQAHZrfOzsAKRss7gFdkKSUgWMEPgXkFocNURXR2Uv3A756vAYlHZpXA+mfJBoIxHRDZgzgz94Em7TabHQALU23XMalOEzM=
Received: by 10.141.153.14 with SMTP id f14mr1500612rvo.1186851946544;
        Sat, 11 Aug 2007 10:05:46 -0700 (PDT)
Received: by 10.140.200.19 with HTTP; Sat, 11 Aug 2007 10:05:46 -0700 (PDT)
Message-ID: <bd67edef0708111005r39ce2c46v218cd6c4eefe7d4d@mail.gmail.com>
Date: Sat, 11 Aug 2007 12:05:46 -0500
From: "John Paul Sondag" <jsondag2@uiuc.edu>
Sender: jpsondag@gmail.com
To: java-user@lucene.apache.org
Subject: Indexing correctly?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1377_30747869.1186851946515"
X-Google-Sender-Auth: 5ca5083b3e7733c8
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1377_30747869.1186851946515
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I was hoping that maybe you guys could see if I'm somehow indexing
inefficiently.  I'm putting relevant parts of my code below.  I've looked at
the "benchmarks" page on Lucene and my indexing time is taking a substantial
amount of time more than what I see posted.  I'm not sure when I should call
flush() ( I saw that I should be doing that on the ImproveIndexingSpeed
page).  I'd really appreciate any advice.

Here's my code:

      File directory = new File( "/mounts/falcon5/disks/0/tcheng3/Dataset");
      File[] theFiles = directory.listFiles();

          //go through each file inside the directory and index it
          for(int curFile = 0; curFile < theFiles.length; curFile++)
          {
              File fin=theFiles[curFile];

              //open up the file
              FileInputStream inf = new FileInputStream(fin);
              InputStreamReader isr = new InputStreamReader(inf,
"US-ASCII");
              BufferedReader in = new BufferedReader(isr);
              String text="";
              String docid="";

            while (true) {

            //read in the file one line at a time, and act accordingly
                String line = in.readLine();
                if (line == null) { break;}

                 if (line.startsWith("<DOC>") ) {
                    //get docID
                    line = in.readLine();
                    String tempStr = line.substring(8,line.length());
                    int pos = tempStr.indexOf(' ');
                    docid = tempStr.substring(0,pos);
                    }else if (line.startsWith("</DOC>")) {

                    Document doc = new Document();

                      doc.add(new Field("contents",text, Field.Store.NO,
Field.Index.TOKENIZED, Field.TermVector.WITH_POSITIONS ));
                    doc.add(new Field("DocID",docid, Field.Store.YES,
Field.Index.NO));
                      writer.addDocument(doc);
                    text="";
                } else {
                    text = text + "\n" + line;
                }
            }

        }


          int numIndexed = writer.docCount();

          writer.optimize();
          writer.close();


Thanks,

--JP

------=_Part_1377_30747869.1186851946515--

From java-user-return-29752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 11 17:16:25 2007
Return-Path: <java-user-return-29752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59723 invoked from network); 11 Aug 2007 17:16:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Aug 2007 17:16:24 -0000
Received: (qmail 331 invoked by uid 500); 11 Aug 2007 17:16:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 291 invoked by uid 500); 11 Aug 2007 17:16:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 280 invoked by uid 99); 11 Aug 2007 17:16:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Aug 2007 10:16:17 -0700
X-ASF-Spam-Status: No, hits=3.0 required=10.0
	tests=MIME_QP_LONG_LINE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.27.42.28] (HELO smtp2-g19.free.fr) (212.27.42.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Aug 2007 17:16:12 +0000
Received: from smtp2-g19.free.fr (localhost.localdomain [127.0.0.1])
	by smtp2-g19.free.fr (Postfix) with ESMTP id B857598FD5
	for <java-user@lucene.apache.org>; Sat, 11 Aug 2007 19:15:49 +0200 (CEST)
Received: from [192.168.1.102] (dau94-4-82-227-122-98.fbx.proxad.net [82.227.122.98])
	by smtp2-g19.free.fr (Postfix) with ESMTP id 5779A98EE2
	for <java-user@lucene.apache.org>; Sat, 11 Aug 2007 19:15:49 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <dadfe18a0708100324m21a679dbo8f2720cb6f268fa6@mail.gmail.com>
References: <8E5BA7FAF994C6409A8E074B78EB46770136533B@14sha-msg02.zm.sd.mediazone.com> <dadfe18a0708100324m21a679dbo8f2720cb6f268fa6@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; delsp=yes; format=flowed
Message-Id: <DA907EAE-1231-49AD-9E78-B73D69B8A2B8@garambrogne.net>
Content-Transfer-Encoding: quoted-printable
X-Image-Url: http://homepage.mac.com/rdupond/.cv/thumbs/me.thumbnail
From: Mathieu Lecarme <mathieu@garambrogne.net>
Subject: =?UTF-8?Q?Re:_=E7=AD=94=E5=A4=8D:_=E7=AD=94=E5=A4=8D:_Lucene_in_?=
 =?UTF-8?Q?large_database_contexts?=
Date: Sat, 11 Aug 2007 19:15:47 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

With Compass, indexing is linked to your database transaction, when =20
your object is persisted, it's indexed too.
All your questions are managed cleanly and silently by Compass, just =20
have a look to the source code if you don't wont to use this product.

M.

Le 10 ao=C3=BBt 07 =C3=A0 12:24, Antonello Provenzano a =C3=A9crit :

> Kai,
>
> The context I'm going to work with requires a continuous addition of
> documents to the indexes, since it's user-driven content, and this
> would require the content to be always up-to-date.
> This is the problem I'm facing, since I cannot rebuild a 1Gb (at
> least) index every time a user inserts a new entry into the database.
>
> I know Digg, for instance, is using Lucene as search engine: since the
> amount of data they're dealing with is much higher than mine, I would
> like to understand the way they used to implement this kind of
> solution.
>
> Thank you again.
> Antonello
>
>
> On 8/10/07, Kai Hu <kai.hu@dusee.cn> wrote:
>> Antonello,
>>         You are right,I think lucene indexsearcher will search the =20=

>> old information if IndexWriter was not closed(I think lucene =20
>> release the Lock here),so I only add a few documents every time =20
>> from buffer to implement index "real time".
>>
>> kai
>>
>>
>> =E5=8F=91=E4=BB=B6=E4=BA=BA: antonelloprov@gmail.com =20
>> [mailto:antonelloprov@gmail.com] =E4=BB=A3=E8=A1=A8 Antonello =
Provenzano
>> =E5=8F=91=E9=80=81=E6=97=B6=E9=97=B4: 2007=E5=B9=B48=E6=9C=8810=E6=97=A5=
 =E6=98=9F=E6=9C=9F=E4=BA=94 17:59
>> =E6=94=B6=E4=BB=B6=E4=BA=BA: java-user@lucene.apache.org
>> =E4=B8=BB=E9=A2=98: Re: =E7=AD=94=E5=A4=8D: Lucene in large database =
contexts
>>
>> Kai,
>>
>> Thanks. The problem I see it's that although I can add a Document
>> through IndexWriter or IndexModifier, this won't be searchable until
>> the index is closed and, possibly, optimized, since the score of the
>> document in the index context must be re-calculated on the basis of
>> the whole context.
>>
>> Is this assumption true? or am I completely wrong?
>>
>> Cheers.
>> Antonello
>>
>>
>> On 8/10/07, Kai Hu <kai.hu@dusee.cn> wrote:
>>> Hi, Antonello
>>>         You can use IndexWriter.addDocument(Document document) to =20=

>>> add single document,same to update,delete operation.
>>>
>>> kai
>>>
>>> -----=E9=82=AE=E4=BB=B6=E5=8E=9F=E4=BB=B6-----
>>> =E5=8F=91=E4=BB=B6=E4=BA=BA: Antonello Provenzano =
[mailto:antonelloprov@gmail.com]
>>> =E5=8F=91=E9=80=81=E6=97=B6=E9=97=B4: 2007=E5=B9=B48=E6=9C=8810=E6=97=A5=
 =E6=98=9F=E6=9C=9F=E4=BA=94 17:09
>>> =E6=94=B6=E4=BB=B6=E4=BA=BA: java-user@lucene.apache.org
>>> =E4=B8=BB=E9=A2=98: Lucene in large database contexts
>>>
>>> Hi There!
>>>
>>> I've been working for a while on the implementation of a website
>>> oriented to contents that would contain millions of entries, most of
>>> them indexable (such as descriptions, texts, names, etc.).
>>> The ideal solution to make them searchable would be to use Lucene as
>>> index and search engine.
>>>
>>> The reason I'm posting the mailing list is the following: since all
>>> the entries will be stored in a database (most likely MySQL =20
>>> InnoDB or
>>> Oracle), what's the best technique to implement a system that =20
>>> indexes
>>> in "real time" (eg. when an entry is inserted into the databsse) the
>>> content and make it searchable? Based on my understanding of Lucene,
>>> such this thing is not possible, since the index must be re-=20
>>> created to
>>> be able to search the indexed contents. Is this true?
>>>
>>> Eventually, could anyone point me to a working example about how to
>>> implement such a similar context?
>>>
>>>
>>> Thank you for the support.
>>> Antonello
>>>
>>> --------------------------------------------------------------------=20=

>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>> --------------------------------------------------------------------=20=

>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 11 18:42:19 2007
Return-Path: <java-user-return-29753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82032 invoked from network); 11 Aug 2007 18:42:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Aug 2007 18:42:18 -0000
Received: (qmail 44917 invoked by uid 500); 11 Aug 2007 18:42:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44883 invoked by uid 500); 11 Aug 2007 18:42:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44872 invoked by uid 99); 11 Aug 2007 18:42:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Aug 2007 11:42:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 209.85.128.190 as permitted sender)
Received: from [209.85.128.190] (HELO fk-out-0910.google.com) (209.85.128.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Aug 2007 18:42:06 +0000
Received: by fk-out-0910.google.com with SMTP id z23so1005345fkz
        for <java-user@lucene.apache.org>; Sat, 11 Aug 2007 11:41:44 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=WtpA8XFvjvmyySdod5v4aDCRDYuRT2aW13VjjNjOaNsIwW9y2/Wpz0IJl9aPnJezamisMfoW+mfe/PKDxo9rj0TujjwsfoGSq3thab9KBCj2dYtvi8QvQ8vdXGzzujFA614M5oR0whWUFiRpTdxAQ420MkJ805skFFB1Tq3Lvno=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=XhEqBiZsuzT2BmOvCwd0Dys3nObF3BmV8QQc0HYVc0+algLIZwgwzajTrla+abAcggLHSJvXZ+G5qpUcHnlpi0YqtAeGElVu+RrbyRLUDTuaEjZdcd+Vx/S5Zbne9TLTX0YSmEqS2EmoEKtjfim1Nc7aoc8xYbWvqebq5hHUIqM=
Received: by 10.86.70.8 with SMTP id s8mr3379648fga.1186857703095;
        Sat, 11 Aug 2007 11:41:43 -0700 (PDT)
Received: from ?192.168.2.101? ( [83.249.118.113])
        by mx.google.com with ESMTPS id f19sm7991295fka.2007.08.11.11.41.41
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sat, 11 Aug 2007 11:41:42 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <bd67edef0708111005r39ce2c46v218cd6c4eefe7d4d@mail.gmail.com>
References: <bd67edef0708111005r39ce2c46v218cd6c4eefe7d4d@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <AC04E160-CC85-432B-81E3-409812AE4EE0@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Indexing correctly?
Date: Sat, 11 Aug 2007 20:36:58 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

How much slower than anticipated is it?

I would start by using a StringBuffer/Builder rather than appending
(immutable) strings to each other.


11 aug 2007 kl. 19.05 skrev John Paul Sondag:

> Hi,
>
> I was hoping that maybe you guys could see if I'm somehow indexing
> inefficiently.  I'm putting relevant parts of my code below.  I've  
> looked at
> the "benchmarks" page on Lucene and my indexing time is taking a  
> substantial
> amount of time more than what I see posted.  I'm not sure when I  
> should call
> flush() ( I saw that I should be doing that on the  
> ImproveIndexingSpeed
> page).  I'd really appreciate any advice.
>
> Here's my code:
>
>       File directory = new File( "/mounts/falcon5/disks/0/tcheng3/ 
> Dataset");
>       File[] theFiles = directory.listFiles();
>
>           //go through each file inside the directory and index it
>           for(int curFile = 0; curFile < theFiles.length; curFile++)
>           {
>               File fin=theFiles[curFile];
>
>               //open up the file
>               FileInputStream inf = new FileInputStream(fin);
>               InputStreamReader isr = new InputStreamReader(inf,
> "US-ASCII");
>               BufferedReader in = new BufferedReader(isr);
>               String text="";
>               String docid="";
>
>             while (true) {
>
>             //read in the file one line at a time, and act accordingly
>                 String line = in.readLine();
>                 if (line == null) { break;}
>
>                  if (line.startsWith("<DOC>") ) {
>                     //get docID
>                     line = in.readLine();
>                     String tempStr = line.substring(8,line.length());
>                     int pos = tempStr.indexOf(' ');
>                     docid = tempStr.substring(0,pos);
>                     }else if (line.startsWith("</DOC>")) {
>
>                     Document doc = new Document();
>
>                       doc.add(new Field("contents",text,  
> Field.Store.NO,
> Field.Index.TOKENIZED, Field.TermVector.WITH_POSITIONS ));
>                     doc.add(new Field("DocID",docid, Field.Store.YES,
> Field.Index.NO));
>                       writer.addDocument(doc);
>                     text="";
>                 } else {
>                     text = text + "\n" + line;
>                 }
>             }
>
>         }
>
>
>           int numIndexed = writer.docCount();
>
>           writer.optimize();
>           writer.close();
>
>
> Thanks,
>
> --JP


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 11 20:27:40 2007
Return-Path: <java-user-return-29754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8149 invoked from network); 11 Aug 2007 20:27:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Aug 2007 20:27:39 -0000
Received: (qmail 86911 invoked by uid 500); 11 Aug 2007 20:27:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86867 invoked by uid 500); 11 Aug 2007 20:27:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86856 invoked by uid 99); 11 Aug 2007 20:27:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Aug 2007 13:27:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nileshbansal@gmail.com designates 209.85.132.244 as permitted sender)
Received: from [209.85.132.244] (HELO an-out-0708.google.com) (209.85.132.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Aug 2007 20:27:26 +0000
Received: by an-out-0708.google.com with SMTP id c5so201178anc
        for <java-user@lucene.apache.org>; Sat, 11 Aug 2007 13:27:05 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=BPCM0kAzJ2TdWkY4EGDbVrm/7nSq/6p/BN0JEjmWvnokGBB/fbQ3lMoKFx58aUCfeSItmC3Qrs63cWS3SWYXg1kG7Drfyv9Azwyfaj1fDY90abKFDr2FGuokmNm7arxqC+gSI5X7lL3f3woAS7KevfHhq+AzkSqBiR/mcNd5CBQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=nV47iTnQuqagblgjFqh+/wx6klpwR8Pfe2uQfzCBrt2N2XJgeo0FArNB6j/aQAwvHQz5QkUnqB3EI9zmJVpeqTMp5S61821R9d+IePu+ic3i2alDHYX9dIXMNXetvWo1cOjygQs/MGm6HTGZvrF6WyXj3Fu/MeY/dWb0CZTszCk=
Received: by 10.100.3.20 with SMTP id 20mr891195anc.1186864025339;
        Sat, 11 Aug 2007 13:27:05 -0700 (PDT)
Received: by 10.100.127.12 with HTTP; Sat, 11 Aug 2007 13:27:05 -0700 (PDT)
Message-ID: <f36128690708111327v5750d19cnbf3a2c435936e8ba@mail.gmail.com>
Date: Sat, 11 Aug 2007 16:27:05 -0400
From: "Nilesh Bansal" <nileshbansal@gmail.com>
To: java-user@lucene.apache.org
Subject: Range queries in Lucene - numerical or lexicographical
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

Lucene query parser synax page
(http://lucene.apache.org/java/docs/queryparsersyntax.html) provides
the following two examples of range query:
mod_date:[20020101 TO 20030101]
and
title:{Aida TO Carmen}

Now my question is, numerically 10 is greater than 2, but in
string-only comparison 2 is greater than 10. So if I search for
field:[10 TO 30]
will a document with field=2 will be in result or not.

And if I search for a string field,
field:[AA TO CC]
will document with field="B" will be in result or not.

The semantics of range is not clear (numerical or lexicographical)
from the documentation.

thanks
Nilesh

-- 
Nilesh Bansal.
http://queens.db.toronto.edu/~nilesh/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 12 01:32:49 2007
Return-Path: <java-user-return-29755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83785 invoked from network); 12 Aug 2007 01:32:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2007 01:32:48 -0000
Received: (qmail 35883 invoked by uid 500); 12 Aug 2007 01:32:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35845 invoked by uid 500); 12 Aug 2007 01:32:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35834 invoked by uid 99); 12 Aug 2007 01:32:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Aug 2007 18:32:40 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nachitech@gmail.com designates 66.249.82.225 as permitted sender)
Received: from [66.249.82.225] (HELO wx-out-0506.google.com) (66.249.82.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Aug 2007 01:32:39 +0000
Received: by wx-out-0506.google.com with SMTP id i28so793676wxd
        for <java-user@lucene.apache.org>; Sat, 11 Aug 2007 18:32:18 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gSTK2oOavDTq4P/Gen/7o1/h1jWIPVGuwsNg/MenutENXtez/H0qmWxCtCX/G6uehFSY5xNgWXiKSUd8mnWkme0/NXcqFh4NUllkpY21LYvhuLY9xLxcm2KPq3Feu0W/ojHTuomx2yQpUBDZPTlOs/2nbGdcMk/mbGLPwiX0pmc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=siShqBlGKN+XzzTCyZeXEfTbtIuniuFFRpgkECpjbZOsebOCLmPcCjsmud0pBB1GHQrvvXKcYLOOrBUlrXdQx8zn845uCWrf+1CyeK0igSmLirdfsZmE3UY81ohG1FYpcFD6088YwytaY0VXf7VEUz5TxMW2BkijK5ML+iYhDUA=
Received: by 10.90.116.6 with SMTP id o6mr5422203agc.1186882338045;
        Sat, 11 Aug 2007 18:32:18 -0700 (PDT)
Received: by 10.90.74.16 with HTTP; Sat, 11 Aug 2007 18:32:18 -0700 (PDT)
Message-ID: <2c716d580708111832n3b6f2bffped06aa250617fd2e@mail.gmail.com>
Date: Sun, 12 Aug 2007 07:02:18 +0530
From: nachi <nachitech@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: indexing going wrong
In-Reply-To: <359a92830708110856ydd64334p9b03818d09f861bd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28124_22322567.1186882338013"
References: <2c716d580708102355l5ee12494nb8d298eeb2d4788d@mail.gmail.com>
	 <359a92830708110856ydd64334p9b03818d09f861bd@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28124_22322567.1186882338013
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

oops...that was a control-c control-v error. Im indexing directory "c:\test"
and using the
index in c:\test for searching. I found the problem to be this - Im reusing
the same document
object in the for loop. I solved it by creating new document each time the
loop runs...
actually when if statement becomes true.

-nachi




On 8/11/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> A couple of things come to mind. But before I get to them, really, really,
> really get a copy of Luke. It'll allow you to examine your index and
> see if what's in there is really what you expect. It'll save you a world
> of hurt <G>.... Google luke lucene....
>
> Also, use query.toString to see what the query actually looks like.
>
> Your index and the files you're trying to put into that index are both
> "c:/test". Are there really files to start with in that directory?
> And Lucene creates a new index when you specify true in the
> IndexWriter, and I'm not sure how many files it blows away in the process.
>
>
> But none of that matters, because your searcher opens "d:/test" and
> you're indexing into "c:/test" <G>.....
>
>
> Best
> Erick
>
>
> On 8/11/07, nachi <nachitech@gmail.com> wrote:
> >
> > all,
> >
> > No sure if earlier mail went thru..so resending...
> >
> > Im new lucene and Im trying to develope a textual search module. I have
> > written the following code ( this is research code) -
> >
> >
> > File dir = new File("c:/test");
> >   IndexWriter writer = new IndexWriter(dir, new StandardAnalyzer(),
> true);
> >   Document doc = new Document();
> >   File[] file = dir.listFiles();
> >   for (File f: file) {
> >    if (f.isFile() && f.canRead()) {
> >     System.out.println(f.getName());
> >     doc.add(new Field("filename",f.getName(),Field.Store.YES,
> > Field.Index.UN_TOKENIZED));
> >     doc.add(new Field("contents", new FileReader(f)));
> >     writer.addDocument(doc);
> >    }
> >   }
> >
> >   System.out.println("count=" + writer.docCount());
> >      writer.optimize();
> >   writer.close();
> >
> >
> >
> > I'm trying to index the contents of test diretory which has only txt
> > files.
> >
> > When I search the index for an particular word, I get the same filename
> > everytime.
> >
> > Here is the code for searching -
> >
> > File dir = new File("D:\\test");
> >   FSDirectory fsdir = FSDirectory.getDirectory(dir);
> >   IndexSearcher d = new IndexSearcher(fsdir);
> >   QueryParser p = new QueryParser("contents",new StandardAnalyzer());
> >   Query q = p.parse("ERROR");
> >   Hits hits = d.search(q);
> >
> >   for (int i = 0; i < hits.length(); i++) {
> >    Document doc = hits.doc(i);
> >    System.out.println(doc.get("filename"));
> >    }
> >   d.close();
> > }
> >
> > Can somebody tell me what I'm doing wrong ? I suspect that there is
> > something wrong in the way I index.
> >
> >
> >
> >
> > --
> > -nachi
> >
>



-- 
-nachi

------=_Part_28124_22322567.1186882338013--

From java-user-return-29756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 12 03:33:57 2007
Return-Path: <java-user-return-29756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96179 invoked from network); 12 Aug 2007 03:33:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2007 03:33:56 -0000
Received: (qmail 79293 invoked by uid 500); 12 Aug 2007 03:33:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79242 invoked by uid 500); 12 Aug 2007 03:33:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79231 invoked by uid 99); 12 Aug 2007 03:33:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Aug 2007 20:33:48 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Aug 2007 03:33:46 +0000
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 4FEB595A04; Sat, 11 Aug 2007 20:33:25 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 4213C4313B;
	Sat, 11 Aug 2007 20:33:25 -0700 (PDT)
Date: Sat, 11 Aug 2007 20:33:25 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org, Bhavin Pandya <bhavinp@rediff.co.in>
Subject: Re: How to implement cut of score ?
In-Reply-To: <00ce01c7d9a9$370d7e00$150410ac@bhavin>
Message-ID: <Pine.LNX.4.58.0708112032070.23693@hal.rescomp.berkeley.edu>
References: <00ce01c7d9a9$370d7e00$150410ac@bhavin>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I want to cut of records which has score below a threshold.
:
: Without DocCollector.

this would be meaningless even if it were easier...

http://wiki.apache.org/lucene-java/LuceneFAQ#head-912c1f237bb00259185353182948e5935f0c2f03
FAQ: "Can I filter by score?"


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 12 03:45:22 2007
Return-Path: <java-user-return-29757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97959 invoked from network); 12 Aug 2007 03:45:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2007 03:45:21 -0000
Received: (qmail 85342 invoked by uid 500); 12 Aug 2007 03:45:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85303 invoked by uid 500); 12 Aug 2007 03:45:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85292 invoked by uid 99); 12 Aug 2007 03:45:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Aug 2007 20:45:13 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jpsondag@gmail.com designates 209.85.198.187 as permitted sender)
Received: from [209.85.198.187] (HELO rv-out-0910.google.com) (209.85.198.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Aug 2007 03:45:09 +0000
Received: by rv-out-0910.google.com with SMTP id k20so754740rvb
        for <java-user@lucene.apache.org>; Sat, 11 Aug 2007 20:44:49 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=IRulnWaBt9VEq02O5ezkL4oTsK37zy37dDX/sYy8B1DqeaYXEY44wcHXqfCIkHqG4h0p4gU/LfjWczEybRlDnc9mZJIdPJvZMvcGnco8Mbhz/VKc6ymVClqzaawaT1cSKyHgcBXODhAX+JI6HLRB+fnVanYjm1CTmKysXIgbGcs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=ZT5GUhiOY2a+nduvUjnrU6jdXjG0mEPAeN1lPWRvk+sCSz/DvBXwbVKqSdSOLA47s/O9298Ao9lYZi67U7mghahFgesw2Mx/ntQToOpPBfltmMg9StBNwROzN5UliKLX+/yKJXchCH5fKbuDjtPkhyWJGTcbcxJAXffp5c0zw+Y=
Received: by 10.141.122.20 with SMTP id z20mr1960984rvm.1186890289035;
        Sat, 11 Aug 2007 20:44:49 -0700 (PDT)
Received: by 10.140.200.19 with HTTP; Sat, 11 Aug 2007 20:44:49 -0700 (PDT)
Message-ID: <bd67edef0708112044k4757fd01k3a86df06f7270902@mail.gmail.com>
Date: Sat, 11 Aug 2007 22:44:49 -0500
From: "John Paul Sondag" <jsondag2@uiuc.edu>
Sender: jpsondag@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Indexing correctly?
In-Reply-To: <AC04E160-CC85-432B-81E3-409812AE4EE0@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1478_103139.1186890289008"
References: <bd67edef0708111005r39ce2c46v218cd6c4eefe7d4d@mail.gmail.com>
	 <AC04E160-CC85-432B-81E3-409812AE4EE0@gmail.com>
X-Google-Sender-Auth: 2a9c1d18e5f98cec
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1478_103139.1186890289008
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It takes roughly 6 hours for me to index a Gig of data.  The benchmarks take
quite a bit less if I'm reading it correctly.  I'll try out the
StringBuffer/Builder and let you know.  Thanks for the quick response and if
you have any more suggestions please let me know.

--JP

On 8/11/07, karl wettin <karl.wettin@gmail.com> wrote:
>
> How much slower than anticipated is it?
>
> I would start by using a StringBuffer/Builder rather than appending
> (immutable) strings to each other.
>
>
> 11 aug 2007 kl. 19.05 skrev John Paul Sondag:
>
> > Hi,
> >
> > I was hoping that maybe you guys could see if I'm somehow indexing
> > inefficiently.  I'm putting relevant parts of my code below.  I've
> > looked at
> > the "benchmarks" page on Lucene and my indexing time is taking a
> > substantial
> > amount of time more than what I see posted.  I'm not sure when I
> > should call
> > flush() ( I saw that I should be doing that on the
> > ImproveIndexingSpeed
> > page).  I'd really appreciate any advice.
> >
> > Here's my code:
> >
> >       File directory = new File( "/mounts/falcon5/disks/0/tcheng3/
> > Dataset");
> >       File[] theFiles = directory.listFiles();
> >
> >           //go through each file inside the directory and index it
> >           for(int curFile = 0; curFile < theFiles.length; curFile++)
> >           {
> >               File fin=theFiles[curFile];
> >
> >               //open up the file
> >               FileInputStream inf = new FileInputStream(fin);
> >               InputStreamReader isr = new InputStreamReader(inf,
> > "US-ASCII");
> >               BufferedReader in = new BufferedReader(isr);
> >               String text="";
> >               String docid="";
> >
> >             while (true) {
> >
> >             //read in the file one line at a time, and act accordingly
> >                 String line = in.readLine();
> >                 if (line == null) { break;}
> >
> >                  if (line.startsWith("<DOC>") ) {
> >                     //get docID
> >                     line = in.readLine();
> >                     String tempStr = line.substring(8,line.length());
> >                     int pos = tempStr.indexOf(' ');
> >                     docid = tempStr.substring(0,pos);
> >                     }else if (line.startsWith("</DOC>")) {
> >
> >                     Document doc = new Document();
> >
> >                       doc.add(new Field("contents",text,
> > Field.Store.NO,
> > Field.Index.TOKENIZED, Field.TermVector.WITH_POSITIONS ));
> >                     doc.add(new Field("DocID",docid, Field.Store.YES,
> > Field.Index.NO));
> >                       writer.addDocument(doc);
> >                     text="";
> >                 } else {
> >                     text = text + "\n" + line;
> >                 }
> >             }
> >
> >         }
> >
> >
> >           int numIndexed = writer.docCount();
> >
> >           writer.optimize();
> >           writer.close();
> >
> >
> > Thanks,
> >
> > --JP
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1478_103139.1186890289008--

From java-user-return-29758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 12 03:55:35 2007
Return-Path: <java-user-return-29758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99153 invoked from network); 12 Aug 2007 03:55:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2007 03:55:35 -0000
Received: (qmail 88259 invoked by uid 500); 12 Aug 2007 03:55:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88218 invoked by uid 500); 12 Aug 2007 03:55:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88205 invoked by uid 99); 12 Aug 2007 03:55:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Aug 2007 20:55:27 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Aug 2007 03:55:28 +0000
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 98A1D95A04; Sat, 11 Aug 2007 20:54:56 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 894224313B
	for <java-user@lucene.apache.org>; Sat, 11 Aug 2007 20:54:56 -0700 (PDT)
Date: Sat, 11 Aug 2007 20:54:56 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: configuration of lucene with jsp
In-Reply-To: <810FE46AADEF62478AAB09DB687D824302633ABA@EVSMAIL.Evalueserve.com>
Message-ID: <Pine.LNX.4.58.0708112052580.23693@hal.rescomp.berkeley.edu>
References: <A955EA1F8FE31749AEC8C998082F6C7C01ECDB75@hai01.hippo.local>
 <810FE46AADEF62478AAB09DB687D824302633ABA@EVSMAIL.Evalueserve.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Message-ID:
:     <810FE46AADEF62478AAB09DB687D824302633ABA@EVSMAIL.Evalueserve.com>
: In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7C01ECDB75@hai01.hippo.local>

http://people.apache.org/~hossman/#threadhijack

When starting a new discussion on a mailing list, please do not reply to
an existing message, instead start a fresh email.  Even if you change the
subject line of your email, other mail headers still track which thread
you replied to and your question is "hidden" in that thread and gets less
attention.   It makes following discussions in the mailing list archives
particularly difficult.
See Also:  http://en.wikipedia.org/wiki/Thread_hijacking





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 12 03:57:59 2007
Return-Path: <java-user-return-29759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99468 invoked from network); 12 Aug 2007 03:57:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2007 03:57:58 -0000
Received: (qmail 89885 invoked by uid 500); 12 Aug 2007 03:57:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89849 invoked by uid 500); 12 Aug 2007 03:57:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89838 invoked by uid 99); 12 Aug 2007 03:57:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Aug 2007 20:57:51 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Aug 2007 03:57:52 +0000
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id CB03495A04; Sat, 11 Aug 2007 20:57:23 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id AF4094313B
	for <java-user@lucene.apache.org>; Sat, 11 Aug 2007 20:57:23 -0700 (PDT)
Date: Sat, 11 Aug 2007 20:57:23 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: term location in doc
In-Reply-To: <310962.67744.qm@web45415.mail.sp1.yahoo.com>
Message-ID: <Pine.LNX.4.58.0708112056280.23693@hal.rescomp.berkeley.edu>
References: <310962.67744.qm@web45415.mail.sp1.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: In-Reply-To: <200708082002.39256@danielnaber.de>

http://people.apache.org/~hossman/#threadhijack

When starting a new discussion on a mailing list, please do not reply to
an existing message, instead start a fresh email.  Even if you change the
subject line of your email, other mail headers still track which thread
you replied to and your question is "hidden" in that thread and gets less
attention.   It makes following discussions in the mailing list archives
particularly difficult.
See Also:  http://en.wikipedia.org/wiki/Thread_hijacking




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 12 07:04:20 2007
Return-Path: <java-user-return-29760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40199 invoked from network); 12 Aug 2007 07:04:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2007 07:04:20 -0000
Received: (qmail 27413 invoked by uid 500); 12 Aug 2007 07:04:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27380 invoked by uid 500); 12 Aug 2007 07:04:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27369 invoked by uid 99); 12 Aug 2007 07:04:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Aug 2007 00:04:12 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of luz290@gmail.com designates 209.85.132.250 as permitted sender)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Aug 2007 07:04:10 +0000
Received: by an-out-0708.google.com with SMTP id c5so211257anc
        for <java-user@lucene.apache.org>; Sun, 12 Aug 2007 00:03:49 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=O6y5nRcQiY4tcr+POxz7fkyjJS0fIEesbIXsa+KLhqPcQ9UmoSRCa71xnND0HaA5rUIAxg9WTWt2Cg7kSKF0nDUqYZoG5iDYm44GWxj07PNcfGRDFsTztOrJP0Eld4v9wInKhn5Cofc0wxp5K2ZpsV3Xaotz6AUfy0ZGohnW/HI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=Bwdsxu6vmo6cem5uD+dOzPHfbmPsblwOVM5Ox8ns1NSMxkLwBmK9tcf12P63y1VZq/9LswvdJ/EOAPTIyduRizoi2m3Ex6k1K+UrLhEzr1VR7XPtnc6BlGbaz5cakxUqxzu/jJrxh8Qh1I6sCaQmlVh3DEayrRJKaTmlIstPE0A=
Received: by 10.100.140.6 with SMTP id n6mr743938and.1186902229011;
        Sun, 12 Aug 2007 00:03:49 -0700 (PDT)
Received: by 10.100.33.20 with HTTP; Sun, 12 Aug 2007 00:03:48 -0700 (PDT)
Message-ID: <cec089090708120003j48c2e253yca5a814e86f5b8ad@mail.gmail.com>
Date: Sun, 12 Aug 2007 03:03:48 -0400
From: "lucene user" <luz290@gmail.com>
To: java-user@lucene.apache.org
Subject: Amount of RAM needed to support a growing lucene index?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_33094_15464478.1186902228981"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_33094_15464478.1186902228981
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi, Folks -

Two quick questions - need to size a server to run our new index.

If I have an index with 111k articles and 90 million words indexed, how much
RAM should I have to get really fast access speeds?

If I have an index with 290k articles and 234 million words indexed, how
much RAM should I have to get really fast access speeds?

Any other advice about sizing a server?

What other info do you need to have to help size the server?

Does it matter if the server has a 64 bit processor?

Speed of processor important? Speed of disks?

Thanks!

------=_Part_33094_15464478.1186902228981--

From java-user-return-29761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 12 11:14:39 2007
Return-Path: <java-user-return-29761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85810 invoked from network); 12 Aug 2007 11:14:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2007 11:14:38 -0000
Received: (qmail 21171 invoked by uid 500); 12 Aug 2007 11:14:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21139 invoked by uid 500); 12 Aug 2007 11:14:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21128 invoked by uid 99); 12 Aug 2007 11:14:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Aug 2007 04:14:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 209.85.128.184 as permitted sender)
Received: from [209.85.128.184] (HELO fk-out-0910.google.com) (209.85.128.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Aug 2007 11:14:27 +0000
Received: by fk-out-0910.google.com with SMTP id z23so1161742fkz
        for <java-user@lucene.apache.org>; Sun, 12 Aug 2007 04:14:06 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=Bl3AH9nz1a8DCjYaBmaa2Vf6NfINvaYMLL9nIYYhGgH53Ff344hrWNm2zvSSx++WJftU8MoBSsfB1oPuQtOneFF2GPn79fU9xIpVqktkK8+6E6vElTvIKqT2LRqQio5hvuKpW3WvcVlFZ1lldoKMvRPj8FemxsMJew8jeh7e4nQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=O+mF5NfdyaDfQIW4rxXJF5pbqg2O/X6Urc/c7LmdmunoP/rvPHWTdRuw18BnleDJ8TJr1KFNIvjkgFW4TaxGtRojV1D5Spe5P+abXPN++CjYf1bmxk0Od81w3dKuf8erDIaKKyynBiC9Wj05kaHqek5tTW4f8a4mdBjBZ9BIROI=
Received: by 10.86.100.7 with SMTP id x7mr3849646fgb.1186917246421;
        Sun, 12 Aug 2007 04:14:06 -0700 (PDT)
Received: from ?192.168.2.101? ( [83.249.118.113])
        by mx.google.com with ESMTPS id p38sm9238732fke.2007.08.12.04.14.03
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sun, 12 Aug 2007 04:14:03 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <cec089090708120003j48c2e253yca5a814e86f5b8ad@mail.gmail.com>
References: <cec089090708120003j48c2e253yca5a814e86f5b8ad@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F2EB50D7-0F87-47A2-8A7A-6C4CD282DB4E@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Amount of RAM needed to support a growing lucene index?
Date: Sun, 12 Aug 2007 13:09:13 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


12 aug 2007 kl. 09.03 skrev lucene user:

> If I have an index with 111k articles and 90 million words indexed,  
> how much
> RAM should I have to get really fast access speeds?
>
> If I have an index with 290k articles and 234 million words  
> indexed, how
> much RAM should I have to get really fast access speeds?

Define really fast.

I say you need 1.3x as much RAM as the size of your FSDirectory to  
ensure that the file system cache is never flushed out. But it also  
depends on user load. Each thread consumes RAM and CPU.

In order to really find out, setup the benchmarker to run on your  
index, and limit the amount of memory your file system chache and JVM  
is allowed.

> Any other advice about sizing a server?
> What other info do you need to have to help size the server?

Sizing?

> Does it matter if the server has a 64 bit processor?

In a 64 bit environment a reference to an instance consumes twice as  
much RAM as in a 32 bit environment. It should not affect a file  
centric Lucene store (Directory), Your OS and your application that  
use Lucene might be consuming some more resources though. Again,  
benchmark.

> Speed of processor important?

Yes.

> Speed of disks?

May or may not be intersting depending on how much RAM you have.



-- 
karl


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 12 12:01:59 2007
Return-Path: <java-user-return-29762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16175 invoked from network); 12 Aug 2007 12:01:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2007 12:01:58 -0000
Received: (qmail 48777 invoked by uid 500); 12 Aug 2007 12:01:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48732 invoked by uid 500); 12 Aug 2007 12:01:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48721 invoked by uid 99); 12 Aug 2007 12:01:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Aug 2007 05:01:51 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of luz290@gmail.com designates 209.85.132.248 as permitted sender)
Received: from [209.85.132.248] (HELO an-out-0708.google.com) (209.85.132.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Aug 2007 12:01:49 +0000
Received: by an-out-0708.google.com with SMTP id c5so215637anc
        for <java-user@lucene.apache.org>; Sun, 12 Aug 2007 05:01:28 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=EKKlpwsf+vv2C0w36sbmzMl/nWGwa8gs7Fk0VcfaJDSBe9Vs59d2wdXdq73+XyMmbpTwLffgkZ95Zrjy5QOIL0OpOpd8hBOStlZp1XtmMgI6nNwJbOfw5+3WDYxoSCbjU2TWWIGCa1hJh02wirUwILmhTV/u6JHBqTBrLk35jv0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gP5NdPkNQt9QNNdhO4/Ir2R7MHOWrqjiPSa4XcAf1PbBQDmtfRK1KOo4WX5a0YnkFAZlnENyqF6nwZBufo/qqsVGglOFBnwKJKht3CsSz+l3+5yBv9QTSZ4nAlhuOcvPAHk7yHBkKtVzI6UKtectT4WSCFzqxT1S8TCSYEpqcFA=
Received: by 10.100.196.3 with SMTP id t3mr3226856anf.1186920088273;
        Sun, 12 Aug 2007 05:01:28 -0700 (PDT)
Received: by 10.100.33.20 with HTTP; Sun, 12 Aug 2007 05:01:28 -0700 (PDT)
Message-ID: <cec089090708120501y407c49dci87265f0a9b8149b8@mail.gmail.com>
Date: Sun, 12 Aug 2007 08:01:28 -0400
From: "lucene user" <luz290@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Amount of RAM needed to support a growing lucene index?
In-Reply-To: <F2EB50D7-0F87-47A2-8A7A-6C4CD282DB4E@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34187_26954178.1186920088246"
References: <cec089090708120003j48c2e253yca5a814e86f5b8ad@mail.gmail.com>
	 <F2EB50D7-0F87-47A2-8A7A-6C4CD282DB4E@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_34187_26954178.1186920088246
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks, Karl.

Do you know if 290k articles and 234 million words is a large lucene index
or a medium one? Do people build them this big all the time?

Thanks!

On 8/12/07, karl wettin <karl.wettin@gmail.com> wrote:
>
>
> 12 aug 2007 kl. 09.03 skrev lucene user:
>
> > If I have an index with 111k articles and 90 million words indexed,
> > how much
> > RAM should I have to get really fast access speeds?
> >
> > If I have an index with 290k articles and 234 million words
> > indexed, how
> > much RAM should I have to get really fast access speeds?
>
> Define really fast.
>
> I say you need 1.3x as much RAM as the size of your FSDirectory to
> ensure that the file system cache is never flushed out. But it also
> depends on user load. Each thread consumes RAM and CPU.
>
> In order to really find out, setup the benchmarker to run on your
> index, and limit the amount of memory your file system chache and JVM
> is allowed.
>
> > Any other advice about sizing a server?
> > What other info do you need to have to help size the server?
>
> Sizing?
>
> > Does it matter if the server has a 64 bit processor?
>
> In a 64 bit environment a reference to an instance consumes twice as
> much RAM as in a 32 bit environment. It should not affect a file
> centric Lucene store (Directory), Your OS and your application that
> use Lucene might be consuming some more resources though. Again,
> benchmark.
>
> > Speed of processor important?
>
> Yes.
>
> > Speed of disks?
>
> May or may not be intersting depending on how much RAM you have.
>
>
>
> --
> karl
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_34187_26954178.1186920088246--

From java-user-return-29763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 12 12:27:57 2007
Return-Path: <java-user-return-29763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25076 invoked from network); 12 Aug 2007 12:27:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2007 12:27:56 -0000
Received: (qmail 72480 invoked by uid 500); 12 Aug 2007 12:27:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72444 invoked by uid 500); 12 Aug 2007 12:27:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72433 invoked by uid 99); 12 Aug 2007 12:27:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Aug 2007 05:27:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 209.85.128.184 as permitted sender)
Received: from [209.85.128.184] (HELO fk-out-0910.google.com) (209.85.128.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Aug 2007 12:27:46 +0000
Received: by fk-out-0910.google.com with SMTP id z23so1177030fkz
        for <java-user@lucene.apache.org>; Sun, 12 Aug 2007 05:27:24 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=X1e6sQCs4uUDOpdPIn5S0Pzmt/eZC3ctpyVc2tf9Lm4gNo6pMX5ExS8KHSb4UG5fE8qiEzB+G/OEJHq2WBDZDLm6AZDgglpAoq7dOWHBnCLPMML9HVUnjsS5LtlYe5grL1jRoRp/TaIIIwxPx7ZXgWWdPK/2USYxMk5e/2dGGIY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=pC4h8VKgFEtlE30f8toCrQ12n/u3nn2LxZ8xe0D1aIewTvy7CJPBaL/17/eGINISY0aSOhnsbVRqcoLac3n1EeNqRkZ9/bu17GfrKEpYTX+glQURYG4uWhNeHvSIoyklO1OLIcLUKQV5bCiXj/uAd6c7LB3r6FjQEIllmYKiOtA=
Received: by 10.86.80.5 with SMTP id d5mr3880951fgb.1186921643792;
        Sun, 12 Aug 2007 05:27:23 -0700 (PDT)
Received: from ?192.168.2.101? ( [83.249.118.113])
        by mx.google.com with ESMTPS id o11sm9344111fkf.2007.08.12.05.27.21
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sun, 12 Aug 2007 05:27:22 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <cec089090708120501y407c49dci87265f0a9b8149b8@mail.gmail.com>
References: <cec089090708120003j48c2e253yca5a814e86f5b8ad@mail.gmail.com> <F2EB50D7-0F87-47A2-8A7A-6C4CD282DB4E@gmail.com> <cec089090708120501y407c49dci87265f0a9b8149b8@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <660294A7-84DF-4E1D-BFC6-C4E4CB659515@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Amount of RAM needed to support a growing lucene index?
Date: Sun, 12 Aug 2007 14:22:28 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


12 aug 2007 kl. 14.01 skrev lucene user:

> Do you know if 290k articles and 234 million words is a large  
> lucene index
> or a medium one? Do people build them this big all the time?

If the calculator in my head works you have 300k documents at 4k text  
each.

I say your corpus is borderline small.


-- 
karl

> Thanks!
>
> On 8/12/07, karl wettin <karl.wettin@gmail.com> wrote:
>>
>>
>> 12 aug 2007 kl. 09.03 skrev lucene user:
>>
>>> If I have an index with 111k articles and 90 million words indexed,
>>> how much
>>> RAM should I have to get really fast access speeds?
>>>
>>> If I have an index with 290k articles and 234 million words
>>> indexed, how
>>> much RAM should I have to get really fast access speeds?
>>
>> Define really fast.
>>
>> I say you need 1.3x as much RAM as the size of your FSDirectory to
>> ensure that the file system cache is never flushed out. But it also
>> depends on user load. Each thread consumes RAM and CPU.
>>
>> In order to really find out, setup the benchmarker to run on your
>> index, and limit the amount of memory your file system chache and JVM
>> is allowed.
>>
>>> Any other advice about sizing a server?
>>> What other info do you need to have to help size the server?
>>
>> Sizing?
>>
>>> Does it matter if the server has a 64 bit processor?
>>
>> In a 64 bit environment a reference to an instance consumes twice as
>> much RAM as in a 32 bit environment. It should not affect a file
>> centric Lucene store (Directory), Your OS and your application that
>> use Lucene might be consuming some more resources though. Again,
>> benchmark.
>>
>>> Speed of processor important?
>>
>> Yes.
>>
>>> Speed of disks?
>>
>> May or may not be intersting depending on how much RAM you have.
>>
>>
>>
>> --
>> karl
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 12 12:40:18 2007
Return-Path: <java-user-return-29764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27372 invoked from network); 12 Aug 2007 12:40:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2007 12:40:15 -0000
Received: (qmail 85668 invoked by uid 500); 12 Aug 2007 12:40:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85630 invoked by uid 500); 12 Aug 2007 12:40:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85619 invoked by uid 99); 12 Aug 2007 12:40:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Aug 2007 05:40:06 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [87.248.115.136] (HELO rrr5.mail.ird.yahoo.com) (87.248.115.136)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 12 Aug 2007 12:40:08 +0000
Received: (qmail 36620 invoked from network); 12 Aug 2007 12:39:39 -0000
Received: from web23003.mail.ird.yahoo.com (217.146.189.28)
  by rrr5.mail.ird.yahoo.com with SMTP; 12 Aug 2007 12:39:39 -0000
Received: (qmail 71929 invoked by uid 60001); 12 Aug 2007 12:39:38 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=gBN3belNluOQm2l3pLfhj78EvnxLMuJWGQBs0j4t1T/Dw3wLGDCeV6V0itumu8siTF92wFY95msi7NruUaeTZa8QsLfI8iIQDecrl9+pQcHqzzEoo4E/ptgIIzwBOYpTAHJfj3kQyB50egMjsFU9sTThnDoVbVf6nCF5WygMx5U=;
X-YMail-OSG: eUeT_v0VM1kPCdBlvVIRpsy8khhTgaMyUYYRxqU2SnRYJ5VwS_7vtIOefpbMzOBKLGwo2wUz.MviB_eXLKU2zKnyeF.7Ox0lwhmnGSDZ49V.L_F4445xngC7Pfs-
Received: from [84.131.247.244] by web23003.mail.ird.yahoo.com via HTTP; Sun, 12 Aug 2007 12:39:38 GMT
X-Mailer: YahooMailRC/651.48 YahooMailWebService/0.7.119
Date: Sun, 12 Aug 2007 12:39:38 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: Amount of RAM needed to support a growing lucene index?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <912132.70951.qm@web23003.mail.ird.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

300k documents is something I would consider very small. Anything under 10M=
io documents IMHO is small for Lucene (meaning, commodity hardware, 1G RAM =
should give you well under second response times).=0AThe number of words is=
 not all that important, much more important would be the number of unique =
words.=0A=0A----- Original Message ----=0AFrom: lucene user <luz290@gmail.c=
om>=0ATo: java-user@lucene.apache.org=0ASent: Sunday, 12 August, 2007 2:01:=
28 PM=0ASubject: Re: Amount of RAM needed to support a growing lucene index=
?=0A=0AThanks, Karl.=0A=0ADo you know if 290k articles and 234 million word=
s is a large lucene index=0Aor a medium one? Do people build them this big =
all the time?=0A=0AThanks!=0A=0AOn 8/12/07, karl wettin <karl.wettin@gmail.=
com> wrote:=0A>=0A>=0A> 12 aug 2007 kl. 09.03 skrev lucene user:=0A>=0A> > =
If I have an index with 111k articles and 90 million words indexed,=0A> > h=
ow much=0A> > RAM should I have to get really fast access speeds?=0A> >=0A>=
 > If I have an index with 290k articles and 234 million words=0A> > indexe=
d, how=0A> > much RAM should I have to get really fast access speeds?=0A>=
=0A> Define really fast.=0A>=0A> I say you need 1.3x as much RAM as the siz=
e of your FSDirectory to=0A> ensure that the file system cache is never flu=
shed out. But it also=0A> depends on user load. Each thread consumes RAM an=
d CPU.=0A>=0A> In order to really find out, setup the benchmarker to run on=
 your=0A> index, and limit the amount of memory your file system chache and=
 JVM=0A> is allowed.=0A>=0A> > Any other advice about sizing a server?=0A> =
> What other info do you need to have to help size the server?=0A>=0A> Sizi=
ng?=0A>=0A> > Does it matter if the server has a 64 bit processor?=0A>=0A> =
In a 64 bit environment a reference to an instance consumes twice as=0A> mu=
ch RAM as in a 32 bit environment. It should not affect a file=0A> centric =
Lucene store (Directory), Your OS and your application that=0A> use Lucene =
might be consuming some more resources though. Again,=0A> benchmark.=0A>=0A=
> > Speed of processor important?=0A>=0A> Yes.=0A>=0A> > Speed of disks?=0A=
>=0A> May or may not be intersting depending on how much RAM you have.=0A>=
=0A>=0A>=0A> --=0A> karl=0A>=0A>=0A> --------------------------------------=
-------------------------------=0A> To unsubscribe, e-mail: java-user-unsub=
scribe@lucene.apache.org=0A> For additional commands, e-mail: java-user-hel=
p@lucene.apache.org=0A>=0A>=0A=0A=0A=0A=0A=0A      ________________________=
___________________________________=0AYahoo! Answers - Got a question? Some=
one out there knows the answer. Try it=0Anow.=0Ahttp://uk.answers.yahoo.com=
/ 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 12 17:52:00 2007
Return-Path: <java-user-return-29765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23866 invoked from network); 12 Aug 2007 17:51:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2007 17:51:59 -0000
Received: (qmail 82063 invoked by uid 500); 12 Aug 2007 17:51:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82026 invoked by uid 500); 12 Aug 2007 17:51:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82010 invoked by uid 99); 12 Aug 2007 17:51:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Aug 2007 10:51:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.186 as permitted sender)
Received: from [209.85.128.186] (HELO fk-out-0910.google.com) (209.85.128.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Aug 2007 17:51:44 +0000
Received: by fk-out-0910.google.com with SMTP id z23so1226090fkz
        for <java-user@lucene.apache.org>; Sun, 12 Aug 2007 10:51:22 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=hq1KuVEPQ7S7g9mEwOlHHPAQLp4tIHgf6rMofsSIoljlpwpf+JWlgiPO/gSh9Bes7s3yuHU4yTWRUIJX9shasUwGijC23AIE7cDNrVydufQZ8jkj/FYPlBn4SGRx+80eMGU60MfhvbJKgClQ4KiM3tAZ7rx+mAa9hn+YmC4MqME=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QYcB9YW8vhmmV1UnTdmbXoL+fRLdjf2VYTWHF1BE4myXm85JtRdxW+TgtbDdFwJ2ivs2ZF6dV/OB3j8AFShw/N+Q6R1X9l8KjPomuPTV9mHBc+sD6JiLhmrop7FOHthrGSxwBIQrbZUyRsOhu2Xx7+YOcW4EGX5qR97sf1aFgxA=
Received: by 10.82.175.17 with SMTP id x17mr6056773bue.1186941082136;
        Sun, 12 Aug 2007 10:51:22 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Sun, 12 Aug 2007 10:51:22 -0700 (PDT)
Message-ID: <359a92830708121051s13ee2939v574b5eeed39b234c@mail.gmail.com>
Date: Sun, 12 Aug 2007 13:51:22 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Range queries in Lucene - numerical or lexicographical
In-Reply-To: <f36128690708111327v5750d19cnbf3a2c435936e8ba@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22290_21226247.1186941082093"
References: <f36128690708111327v5750d19cnbf3a2c435936e8ba@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22290_21226247.1186941082093
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

As has been discussed several times, Lucene is a string-only engine, and
has no native understanding of numerical values. You have to normalize
them for string searches. See NumberTools.

Best
Erick

On 8/11/07, Nilesh Bansal <nileshbansal@gmail.com> wrote:
>
> Hi all,
>
> Lucene query parser synax page
> (http://lucene.apache.org/java/docs/queryparsersyntax.html) provides
> the following two examples of range query:
> mod_date:[20020101 TO 20030101]
> and
> title:{Aida TO Carmen}
>
> Now my question is, numerically 10 is greater than 2, but in
> string-only comparison 2 is greater than 10. So if I search for
> field:[10 TO 30]
> will a document with field=2 will be in result or not.
>
> And if I search for a string field,
> field:[AA TO CC]
> will document with field="B" will be in result or not.
>
> The semantics of range is not clear (numerical or lexicographical)
> from the documentation.
>
> thanks
> Nilesh
>
> --
> Nilesh Bansal.
> http://queens.db.toronto.edu/~nilesh/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_22290_21226247.1186941082093--

From java-user-return-29766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 12 17:57:44 2007
Return-Path: <java-user-return-29766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26255 invoked from network); 12 Aug 2007 17:57:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Aug 2007 17:57:43 -0000
Received: (qmail 85403 invoked by uid 500); 12 Aug 2007 17:57:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85356 invoked by uid 500); 12 Aug 2007 17:57:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85345 invoked by uid 99); 12 Aug 2007 17:57:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Aug 2007 10:57:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.188 as permitted sender)
Received: from [209.85.128.188] (HELO fk-out-0910.google.com) (209.85.128.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Aug 2007 17:57:30 +0000
Received: by fk-out-0910.google.com with SMTP id z23so1226747fkz
        for <java-user@lucene.apache.org>; Sun, 12 Aug 2007 10:57:08 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gZUAswFG4Y2p2lo0zNNX0k6EooM5ptnGeY7NjtjkvE8yWdKI7oz/JN0D5d81VHzAiT1qY6T2RNSlR4QfLGrqBgQUlCRq5PA4KXGMTVHFbambhIyBeVnJLNgGrnvItV0xbgFH46KdwlvzLpvj8jslAyKr8HwkHIeM/lLtzeA5KMA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=BDWypYNoPpze8+w3cyDNDGBvZTyHbLXhUPS7AJM5O9CVi9ctxWvk635Y27XMegUf2qnWckSqXWL3nD0PlyR9aS6hK3WLhvIqyvMlNXUfhspZrD8e/FqkUbOUSoV/Mh2PmauqVjPDVD1h1581xiQ2OxDrIJ9UDzpquQIcLm0YPK4=
Received: by 10.82.111.8 with SMTP id j8mr6066085buc.1186941428452;
        Sun, 12 Aug 2007 10:57:08 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Sun, 12 Aug 2007 10:57:08 -0700 (PDT)
Message-ID: <359a92830708121057o653ba813hfecd556b5601846d@mail.gmail.com>
Date: Sun, 12 Aug 2007 13:57:08 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing correctly?
In-Reply-To: <bd67edef0708112044k4757fd01k3a86df06f7270902@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22330_26443935.1186941428420"
References: <bd67edef0708111005r39ce2c46v218cd6c4eefe7d4d@mail.gmail.com>
	 <AC04E160-CC85-432B-81E3-409812AE4EE0@gmail.com>
	 <bd67edef0708112044k4757fd01k3a86df06f7270902@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22330_26443935.1186941428420
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Where are your source files and index? If they're somewhere
out there on the network, you may be having some slowdown
because of network latency (the part about "/mount/....." leads
me to ask this one).

If this is the case, you might get an improvement if all the files are
local...

Best
Erick

On 8/11/07, John Paul Sondag <jsondag2@uiuc.edu> wrote:
>
> It takes roughly 6 hours for me to index a Gig of data.  The benchmarks
> take
> quite a bit less if I'm reading it correctly.  I'll try out the
> StringBuffer/Builder and let you know.  Thanks for the quick response and
> if
> you have any more suggestions please let me know.
>
> --JP
>
> On 8/11/07, karl wettin <karl.wettin@gmail.com> wrote:
> >
> > How much slower than anticipated is it?
> >
> > I would start by using a StringBuffer/Builder rather than appending
> > (immutable) strings to each other.
> >
> >
> > 11 aug 2007 kl. 19.05 skrev John Paul Sondag:
> >
> > > Hi,
> > >
> > > I was hoping that maybe you guys could see if I'm somehow indexing
> > > inefficiently.  I'm putting relevant parts of my code below.  I've
> > > looked at
> > > the "benchmarks" page on Lucene and my indexing time is taking a
> > > substantial
> > > amount of time more than what I see posted.  I'm not sure when I
> > > should call
> > > flush() ( I saw that I should be doing that on the
> > > ImproveIndexingSpeed
> > > page).  I'd really appreciate any advice.
> > >
> > > Here's my code:
> > >
> > >       File directory = new File( "/mounts/falcon5/disks/0/tcheng3/
> > > Dataset");
> > >       File[] theFiles = directory.listFiles();
> > >
> > >           //go through each file inside the directory and index it
> > >           for(int curFile = 0; curFile < theFiles.length; curFile++)
> > >           {
> > >               File fin=theFiles[curFile];
> > >
> > >               //open up the file
> > >               FileInputStream inf = new FileInputStream(fin);
> > >               InputStreamReader isr = new InputStreamReader(inf,
> > > "US-ASCII");
> > >               BufferedReader in = new BufferedReader(isr);
> > >               String text="";
> > >               String docid="";
> > >
> > >             while (true) {
> > >
> > >             //read in the file one line at a time, and act accordingly
> > >                 String line = in.readLine();
> > >                 if (line == null) { break;}
> > >
> > >                  if (line.startsWith("<DOC>") ) {
> > >                     //get docID
> > >                     line = in.readLine();
> > >                     String tempStr = line.substring(8,line.length());
> > >                     int pos = tempStr.indexOf(' ');
> > >                     docid = tempStr.substring(0,pos);
> > >                     }else if (line.startsWith("</DOC>")) {
> > >
> > >                     Document doc = new Document();
> > >
> > >                       doc.add(new Field("contents",text,
> > > Field.Store.NO,
> > > Field.Index.TOKENIZED, Field.TermVector.WITH_POSITIONS ));
> > >                     doc.add(new Field("DocID",docid, Field.Store.YES,
> > > Field.Index.NO));
> > >                       writer.addDocument(doc);
> > >                     text="";
> > >                 } else {
> > >                     text = text + "\n" + line;
> > >                 }
> > >             }
> > >
> > >         }
> > >
> > >
> > >           int numIndexed = writer.docCount();
> > >
> > >           writer.optimize();
> > >           writer.close();
> > >
> > >
> > > Thanks,
> > >
> > > --JP
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_22330_26443935.1186941428420--

From java-user-return-29767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 13 01:26:43 2007
Return-Path: <java-user-return-29767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37514 invoked from network); 13 Aug 2007 01:26:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2007 01:26:41 -0000
Received: (qmail 97863 invoked by uid 500); 13 Aug 2007 01:26:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97829 invoked by uid 500); 13 Aug 2007 01:26:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97818 invoked by uid 99); 13 Aug 2007 01:26:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Aug 2007 18:26:32 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [60.52.184.45] (HELO tecforte.com) (60.52.184.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 01:26:35 +0000
Received: from DFPYWL2S [192.168.2.96] by tecforte.com with ESMTP
  (SMTPD32-8.03) id A320BE2008A; Mon, 13 Aug 2007 09:25:52 +0800
From: "Chew Yee Chuang" <yeechuang@tecforte.com>
To: <java-user@lucene.apache.org>
References: <004201c7d322$69c8bae0$3d5a30a0$@com> <4E0025CD-A1FF-44E4-8322-2A71F9F26332@gmail.com> <003501c7d3e3$ca58e990$5f0abcb0$@com> <D0F005F8-F115-45C9-A5F6-A3F758EE5514@gmail.com> <000901c7d8de$bc2be0c0$3483a240$@com> <12035676.post@talk.nabble.com>
In-Reply-To: <12035676.post@talk.nabble.com>
Subject: RE: High CPU usage duing index and search
Date: Mon, 13 Aug 2007 09:26:43 +0800
Message-ID: <005401c7dd49$01cafda0$0560f8e0$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcfZAI6oiKNL5QDUSVWiLgL+W7SoAgESB3/A
Content-Language: en-us
X-Virus-Checked: Checked by ClamAV on apache.org

Hi testn,

I have tested Filter, it is pretty fast, but still take a lot of CPU =
resource, Maybe it could due to the number of filter I run.

Thank you
eChuang, Chew


-----Original Message-----
From: testn [mailto:test1@doramail.com]=20
Sent: Tuesday, August 07, 2007 10:37 PM
To: java-user@lucene.apache.org
Subject: RE: High CPU usage duing index and search


Check out Filter class. You can create a separate filter for each field =
and
then chain them together using ChainFilter. If you cache the filter, it =
will
be pretty fast.=20


Chew Yee Chuang wrote:
>=20
> Greetings,
>=20
> Yes, process a little bit and stop for a while really reduce the CPU
> usage,
> but I need to find out a balance so that the indexing or searching =
will
> not
> have so much delay.
>=20
> Execute 20,000 queries at a time is because the process is generating =
the
> aggregation data for reporting,
> E.g Gender (M,F), Department (Accounting, R&D, Financial,...etc),=20
> 1Q - Gender:M AND Department: Accounting
> 2Q - Gender:M AND Department: R&D
> 3Q - Gender:M AND Department: Financial
> 4Q - Gender:F AND Department: Accounting
> 5Q - ....
> Thus, the more combination, the more query need to run. For now, I =
still
> can't get any idea on how to reduce it, just thinking maybe there is a
> different way to index it so that I can get It easily.
>=20
> Any help would be appreciated.
>=20
> Thanks
> eChuang, Chew
>=20
> -----Original Message-----
> From: karl wettin [mailto:karl.wettin@gmail.com]=20
> Sent: Thursday, August 02, 2007 7:11 AM
> To: java-user@lucene.apache.org
> Subject: Re: High CPU usage duing index and search
>=20
> It sounds like you have a fairly busy system, perhaps 100% load on the
> process is not that strange, at least not during short periods of =
time.
>=20
> A simpler solution would be to nice the process a little bit in order =
to
> give your background jobs some more time to think.
>=20
> Running a profiler is still the best advice I can think of. It should
> clearly show you what is going on when you run out of CPU.
>=20
> -- =20
> karl
>=20
> 1 aug 2007 kl. 04.29 skrev Chew Yee Chuang:
>=20
>> Hi,
>>
>> Thanks for the link provided, actually I've go through those =20
>> article when I
>> developing the index and search function for my application. I =20
>> haven=E2=80=99t try
>> profiler yet, but I monitor the CPU usage and notice that whatever =20
>> index or
>> search performing, the CPU usage raise to 100%. Below I will try to
>> elaborate more on what my application is doing and how I index and =20
>> search.
>>
>> There are many concurrent process running, first, the application =20
>> will write
>> records that received into a text file with tab separated each =20
>> different
>> field. Application will point to a new file every 10mins and start =20
>> writing
>> to it. So every file will contains only 10mins record, approximate =20
>> 600,000
>> records per file. Then, the indexing process will check whether =20
>> there is a
>> text file to be index, if it is, the thread will wake up and start =20
>> perform
>> indexing.
>>
>> The indexing process will first add documents to RAMDir, Then =20
>> later, add
>> RAMDir into FSDir by calling addIndexNoOptimize() when there is =20
>> 100,000
>> documents(32 fields per doc) in RAMDir. There is only 1 IndexWriter=20
>> (FSDir)
>> was created but a few IndexWriter(RAMDir) was created during the =
whole
>> process. Below are some configuration for IndexWriters that I =20
>> mentioned:-
>>
>> IndexWriter (RAMDir)
>> - SimpleAnalyzer
>> - setMaxBufferedDocs(10000)
>> - Filed.Store.YES
>> - Field.Index.NO_NORMS
>>
>> IndexWriter (FSDir)
>> - SimpleAnalyzer
>> - setMergeFactor(20)
>> - addIndexesNoOptimize()
>>
>> For the searching, because there are many queries(20,000) run =20
>> continuously
>> to generate the aggregate table for reporting purpose. All this =20
>> queries is
>> run in nested loop, and there is only 1 Searcher created, I try =20
>> searcher and
>> filter as well, filter give me better result, but both also utilize =20
>> lots of
>> CPU resources.
>>
>> Hope this info will help and sorry for my bad English.
>>
>> Thanks
>> eChuang, Chew
>>
>> -----Original Message-----
>> From: karl wettin [mailto:karl.wettin@gmail.com]
>> Sent: Tuesday, July 31, 2007 5:54 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: High CPU usage duing index and search
>>
>>
>> 31 jul 2007 kl. 05.25 skrev Chew Yee Chuang:
>>> But just notice that when Lucene performing search or index,
>>> the CPU usage on my machine raise to 100%, because of this issue,
>>> some of my
>>> others backend process will slow down eventually. Just want to know
>>> does
>>> anyone face this problem before ? and is it any idea on how to
>>> overcome this
>>> problem ?
>>
>> Did you run a profiler to see what it is that consume all the =20
>> resources?
>> It is very hard to guess based on the information you supplied. Start
>> here:
>>
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
>> http://wiki.apache.org/lucene-java/ImproveSearchingSpeed
>>
>>
>> --=20
>> karl
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> No virus found in this incoming message.
>> Checked by AVG Free Edition.
>> Version: 7.5.476 / Virus Database: 269.11.0/927 - Release Date: =20
>> 7/30/2007
>> 5:02 PM
>>
>>
>> No virus found in this outgoing message.
>> Checked by AVG Free Edition.
>> Version: 7.5.476 / Virus Database: 269.11.0/929 - Release Date: =20
>> 7/31/2007
>> 5:26 PM
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> No virus found in this incoming message.
> Checked by AVG Free Edition.=20
> Version: 7.5.476 / Virus Database: 269.11.2/933 - Release Date: =
8/2/2007
> 2:22 PM
> =20
>=20
> No virus found in this outgoing message.
> Checked by AVG Free Edition.=20
> Version: 7.5.476 / Virus Database: 269.11.8/940 - Release Date: =
8/6/2007
> 4:53 PM
> =20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: =
http://www.nabble.com/High-CPU-usage-duing-index-and-search-tf4190756.htm=
l#a12035676
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


No virus found in this incoming message.
Checked by AVG Free Edition.=20
Version: 7.5.476 / Virus Database: 269.11.8/940 - Release Date: 8/6/2007 =
4:53 PM
=20

No virus found in this outgoing message.
Checked by AVG Free Edition.=20
Version: 7.5.476 / Virus Database: 269.11.15/949 - Release Date: =
8/12/2007 11:03 AM
=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 13 03:27:23 2007
Return-Path: <java-user-return-29768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49940 invoked from network); 13 Aug 2007 03:27:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2007 03:27:22 -0000
Received: (qmail 46436 invoked by uid 500); 13 Aug 2007 03:27:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46391 invoked by uid 500); 13 Aug 2007 03:27:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46380 invoked by uid 99); 13 Aug 2007 03:27:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Aug 2007 20:27:14 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 03:27:19 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IKQZs-0001eD-7w
	for java-user@lucene.apache.org; Sun, 12 Aug 2007 20:26:48 -0700
Message-ID: <12120367.post@talk.nabble.com>
Date: Sun, 12 Aug 2007 20:26:48 -0700 (PDT)
From: Jeff French <jeff@mdbconsulting.com>
To: java-user@lucene.apache.org
Subject: Nested concept fields
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jeff@mdbconsulting.com
X-Virus-Checked: Checked by ClamAV on apache.org


I'm trying to index concepts within a document, and search them within the
context of a multivalued field. I'm not even sure it's possible with the
QueryParser or QsolParser syntax. Does anyone know if it is / is not
possible? If not, is it conceptually possible using the Query API?

What I'd like to do: I'm currently indexing sentences as individual 'sent'
fields. I plan to create indices on other information I parse out of a
document (e.g. numerics, people names, company names). Suppose I call my
numeric index 'num'. Then I would like to do something like this (in search
pseudocode):

	sent:(expired num[1 TO 5] "days ago")

I don't see how to do this using either Lucene's QueryParser or the
QsolParser. Is it possible to do it using the Query API (and the appropriate
indexing changes)?

Thanks for any pointers.

    Jeff
-- 
View this message in context: http://www.nabble.com/Nested-concept-fields-tf4258984.html#a12120367
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 13 04:18:29 2007
Return-Path: <java-user-return-29769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57152 invoked from network); 13 Aug 2007 04:18:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2007 04:18:28 -0000
Received: (qmail 64308 invoked by uid 500); 13 Aug 2007 04:18:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64265 invoked by uid 500); 13 Aug 2007 04:18:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64254 invoked by uid 99); 13 Aug 2007 04:18:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Aug 2007 21:18:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cedric.ho@gmail.com designates 209.85.198.189 as permitted sender)
Received: from [209.85.198.189] (HELO rv-out-0910.google.com) (209.85.198.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 04:18:12 +0000
Received: by rv-out-0910.google.com with SMTP id k20so865300rvb
        for <java-user@lucene.apache.org>; Sun, 12 Aug 2007 21:17:52 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=Ashn4hrgQyKlJYQBxsGA2efKhC54JNurjIbo98P7HX/Fnk1Xk/nUf4Xnm1OltD/+2CGRyYJL7EpxxNMFFfYep7iKazJM5c0qz8e9ull06V7LpMrZ9X4XJUUhOllu36V7Ro8+1KKaxo0xY85oTmWUevFNW2vVPeoHkwCjRsuZqHI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=P8J+EsbfEg/Ex8WcVQJfRD5Jb/lIiSsGVNLaTaR4hdRZDirQujCrF+IlU+sOqjkQ0CxibczLdhQpyqNmpcVGNgfMjs0OC5YLK97hfAJDFwUxujFTzYC1S9s/IDQrWVF0nIM5d5CRUuMzYYgAYXDuJ5cckQyvIqNkUhjk7oaLahk=
Received: by 10.142.156.13 with SMTP id d13mr645147wfe.1186978672178;
        Sun, 12 Aug 2007 21:17:52 -0700 (PDT)
Received: by 10.143.18.1 with HTTP; Sun, 12 Aug 2007 21:17:52 -0700 (PDT)
Message-ID: <839ba01c0708122117v4a2f3c8fk4c95149a25062e2f@mail.gmail.com>
Date: Mon, 13 Aug 2007 12:17:52 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: performance on filtering against thousands of different publications
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

My problem is as follows:

Our documents each comes from a different publication. And we
currently have > 5000 different publication sources.

Our clients can choose arbitrarily a subset of the publications while
performing search. It is not  uncommon that a search will have to
match hundreds or thousands of publications.

I currently try to index the publication information as a field in
each document. and use a TermsFilter when performing search. However
the performance is less than satisfactory. Many simple searches takes
more than 2-3 seconds. (our goal: < 0.5seconds).

Using the CachingWrapperFilter is great for search speed. But I've
done some calculation and figured that it is basically impossible to
cache all combination of publications or even some common
combinations.


Is there any other more effective way to do the filtering?

(I know that the slowness is not purely due to the publication filter,
we also have some other things that will slow down the search. But
this one definitely contributed quite a lot to the overall search
time)

Regards,
Cedric

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 13 05:02:21 2007
Return-Path: <java-user-return-29770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71959 invoked from network); 13 Aug 2007 05:02:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2007 05:02:21 -0000
Received: (qmail 89781 invoked by uid 500); 13 Aug 2007 05:02:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89750 invoked by uid 500); 13 Aug 2007 05:02:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89739 invoked by uid 99); 13 Aug 2007 05:02:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Aug 2007 22:02:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of nileshbansal@gmail.com designates 209.85.132.249 as permitted sender)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 05:02:06 +0000
Received: by an-out-0708.google.com with SMTP id c5so239959anc
        for <java-user@lucene.apache.org>; Sun, 12 Aug 2007 22:01:45 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=FrdhOusFKADr8OA0nE9YPc/ookouzRPLuaBJS5C0m/Iecs+PfJ6f0wdMYQtJOEfBqzBNQIfQRwSVBOEonaFCF30TdCnhxFE2qmeYMrL4gPAYX2LqMcN5lKMEiZLYTaSOBRDdBH8s3ihQotOGCUrSX2SIJIR8nvgKjoP3Pt7IIQs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Lu8MKAwCpDfpBlS+FJOcOy2kKs5nJ5xjfNq5RglRrclpepXe9lGVj3qIkWCGb7TIkIg6z2rTuMLUIOLtIJf55j4fU9A8S9jnGIT1so0LaGEX6kaZLr0qXwf09j/tEB7XLeFfMJBeJ7kWecnnO+F6fWxzEIBrLl12sGTt2FpwJVw=
Received: by 10.100.106.5 with SMTP id e5mr4637815anc.1186981305576;
        Sun, 12 Aug 2007 22:01:45 -0700 (PDT)
Received: by 10.100.127.12 with HTTP; Sun, 12 Aug 2007 22:01:45 -0700 (PDT)
Message-ID: <f36128690708122201w7606653ambfd80c00a928b243@mail.gmail.com>
Date: Mon, 13 Aug 2007 01:01:45 -0400
From: "Nilesh Bansal" <nileshbansal@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Range queries in Lucene - numerical or lexicographical
In-Reply-To: <359a92830708121051s13ee2939v574b5eeed39b234c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f36128690708111327v5750d19cnbf3a2c435936e8ba@mail.gmail.com>
	 <359a92830708121051s13ee2939v574b5eeed39b234c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks. Probably this should be mentioned on the documentation page.

-Nilesh

On 8/12/07, Erick Erickson <erickerickson@gmail.com> wrote:
> As has been discussed several times, Lucene is a string-only engine, and
> has no native understanding of numerical values. You have to normalize
> them for string searches. See NumberTools.
>
> Best
> Erick
>
> On 8/11/07, Nilesh Bansal <nileshbansal@gmail.com> wrote:
> >
> > Hi all,
> >
> > Lucene query parser synax page
> > (http://lucene.apache.org/java/docs/queryparsersyntax.html) provides
> > the following two examples of range query:
> > mod_date:[20020101 TO 20030101]
> > and
> > title:{Aida TO Carmen}
> >
> > Now my question is, numerically 10 is greater than 2, but in
> > string-only comparison 2 is greater than 10. So if I search for
> > field:[10 TO 30]
> > will a document with field=2 will be in result or not.
> >
> > And if I search for a string field,
> > field:[AA TO CC]
> > will document with field="B" will be in result or not.
> >
> > The semantics of range is not clear (numerical or lexicographical)
> > from the documentation.
> >
> > thanks
> > Nilesh
> >
> > --
> > Nilesh Bansal.
> > http://queens.db.toronto.edu/~nilesh/
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>


-- 
Nilesh Bansal.
http://queens.db.toronto.edu/~nilesh/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 13 05:11:02 2007
Return-Path: <java-user-return-29771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78445 invoked from network); 13 Aug 2007 05:11:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2007 05:11:01 -0000
Received: (qmail 1370 invoked by uid 500); 13 Aug 2007 05:10:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1334 invoked by uid 500); 13 Aug 2007 05:10:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1323 invoked by uid 99); 13 Aug 2007 05:10:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Aug 2007 22:10:53 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mnrz57@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 05:10:46 +0000
Received: by py-out-1112.google.com with SMTP id f31so3939107pyh
        for <java-user@lucene.apache.org>; Sun, 12 Aug 2007 22:10:23 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=O5H1ul3rjCuA3GeeYAx51dLwMO8SEMYCYHugC6FI6kfjFNq+opcIq59TpYd8p23oQAY8zmV0pyQeZy4uU/M22CCGUtqKXrabAwWYjsWyrmBCyhRPRVFTtM+soxLan3yx3ykzCkC84u6zHpq6oWILNLN4wrGanh0PvevMxvCPf6Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=f9mlUYSTi0HszhmDnYG7G7498bkvK9e1HJIuDtR2ZSX4xZ8OVvKZRlnx5Qk6n0Jm4u/5DqMGi/ouRYGDMibHlTM+SUS+6rGg9jVUpop9dqhM2fTwh7FAWgG+UveeZN2X0M0Kpd8IH1kQnImIiNfCgX0Ye0DrT0tTMq2hUlp56lo=
Received: by 10.64.153.4 with SMTP id a4mr8632755qbe.1186981822649;
        Sun, 12 Aug 2007 22:10:22 -0700 (PDT)
Received: by 10.65.180.12 with HTTP; Sun, 12 Aug 2007 22:10:22 -0700 (PDT)
Message-ID: <34b8543c0708122210g48aa90a9u690b94ea6beffc1f@mail.gmail.com>
Date: Mon, 13 Aug 2007 08:40:22 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Range queries in Lucene - numerical or lexicographical
In-Reply-To: <f36128690708122201w7606653ambfd80c00a928b243@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27573_27708274.1186981822604"
References: <f36128690708111327v5750d19cnbf3a2c435936e8ba@mail.gmail.com>
	 <359a92830708121051s13ee2939v574b5eeed39b234c@mail.gmail.com>
	 <f36128690708122201w7606653ambfd80c00a928b243@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27573_27708274.1186981822604
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Erick but unfortunately NumberTools works only with long primitive
type I am wondering why you didn't put some method for double and float.



On 8/13/07, Nilesh Bansal <nileshbansal@gmail.com> wrote:
>
> Thanks. Probably this should be mentioned on the documentation page.
>
> -Nilesh
>
> On 8/12/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > As has been discussed several times, Lucene is a string-only engine, and
> > has no native understanding of numerical values. You have to normalize
> > them for string searches. See NumberTools.
> >
> > Best
> > Erick
> >
> > On 8/11/07, Nilesh Bansal <nileshbansal@gmail.com> wrote:
> > >
> > > Hi all,
> > >
> > > Lucene query parser synax page
> > > (http://lucene.apache.org/java/docs/queryparsersyntax.html) provides
> > > the following two examples of range query:
> > > mod_date:[20020101 TO 20030101]
> > > and
> > > title:{Aida TO Carmen}
> > >
> > > Now my question is, numerically 10 is greater than 2, but in
> > > string-only comparison 2 is greater than 10. So if I search for
> > > field:[10 TO 30]
> > > will a document with field=2 will be in result or not.
> > >
> > > And if I search for a string field,
> > > field:[AA TO CC]
> > > will document with field="B" will be in result or not.
> > >
> > > The semantics of range is not clear (numerical or lexicographical)
> > > from the documentation.
> > >
> > > thanks
> > > Nilesh
> > >
> > > --
> > > Nilesh Bansal.
> > > http://queens.db.toronto.edu/~nilesh/
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>
>
> --
> Nilesh Bansal.
> http://queens.db.toronto.edu/~nilesh/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/
another in Persian: http://fekre-motefavet.blogspot.com/

------=_Part_27573_27708274.1186981822604--

From java-user-return-29772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 13 05:31:25 2007
Return-Path: <java-user-return-29772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87397 invoked from network); 13 Aug 2007 05:31:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2007 05:31:24 -0000
Received: (qmail 21767 invoked by uid 500); 13 Aug 2007 05:31:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21727 invoked by uid 500); 13 Aug 2007 05:31:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21716 invoked by uid 99); 13 Aug 2007 05:31:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Aug 2007 22:31:14 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mrrohitsaini@gmail.com designates 209.85.132.247 as permitted sender)
Received: from [209.85.132.247] (HELO an-out-0708.google.com) (209.85.132.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 05:31:13 +0000
Received: by an-out-0708.google.com with SMTP id c5so240651anc
        for <java-user@lucene.apache.org>; Sun, 12 Aug 2007 22:30:53 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:cc:mime-version:content-type;
        b=nvEIkE7mUCGpm4J9i663+8pj5sqmGp1PCj2VTWbkgEBlrBO194KxvZjh1gOlVYOOVl5fmuKnBbBfW/iEL/2izfLqE5m5IJB88BGCmUZ8Hgemr+v9Fzl5OlhS1dD9IYK71ePQ29hiGuU3AmshiIPQK4jlz7eF0bRvJjiOkcnZNls=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:cc:mime-version:content-type;
        b=KChCJ5Zur0aH08++EZTRpOkNZzLKNGv+AKwgRUin+EXrQHHvG/3o4XpMBqp0yUJhrJYrcORFwzefhAR88rDbNhVwMuII7tvW7OcAdKi53X5s4EuxQZPpR7xTrhcEUVXgZ0s2nXNJl53pKqa8spNBGYdh9ZXtcfcel29dhIFD7zA=
Received: by 10.100.13.12 with SMTP id 12mr4644930anm.1186983052962;
        Sun, 12 Aug 2007 22:30:52 -0700 (PDT)
Received: by 10.100.58.11 with HTTP; Sun, 12 Aug 2007 22:30:52 -0700 (PDT)
Message-ID: <3cb8ef760708122230k1b3c8bb6h6785c04dabbe1f75@mail.gmail.com>
Date: Mon, 13 Aug 2007 11:00:52 +0530
From: "rohit saini" <mrrohitsaini@gmail.com>
To: java-user@lucene.apache.org
Subject: Index file size limitation of 2GB
Cc: mrrohitsaini@gmail.com
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_44085_12390428.1186983052947"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_44085_12390428.1186983052947
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

I have bulk of data to be indexed and that may cross index file size of 2GB.
As lucene faq tells that if index file size increses to 2GB there will be
problems. but faq tells to make index subdirectory in this case. I have
tried to do so made a index subdirectory in index main directory when index
file size increses to 2GB but during search I don't get any result from
index subdirectory. do I need to search recursively but in that case there
will be more than "hits" object then how to combine them and return a single
result to the user? Please tell me ....

Thanks & Regards,

Rohit

------=_Part_44085_12390428.1186983052947--

From java-user-return-29773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 13 06:31:28 2007
Return-Path: <java-user-return-29773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96909 invoked from network); 13 Aug 2007 06:31:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2007 06:31:27 -0000
Received: (qmail 89813 invoked by uid 500); 13 Aug 2007 06:31:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89777 invoked by uid 500); 13 Aug 2007 06:31:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89766 invoked by uid 99); 13 Aug 2007 06:31:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Aug 2007 23:31:20 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 06:31:28 +0000
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 9B6B895A04; Sun, 12 Aug 2007 23:30:56 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 8EC4C43139
	for <java-user@lucene.apache.org>; Sun, 12 Aug 2007 23:30:56 -0700 (PDT)
Date: Sun, 12 Aug 2007 23:30:56 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Range queries in Lucene - numerical or lexicographical
In-Reply-To: <f36128690708122201w7606653ambfd80c00a928b243@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0708122327030.5233@hal.rescomp.berkeley.edu>
References: <f36128690708111327v5750d19cnbf3a2c435936e8ba@mail.gmail.com> 
 <359a92830708121051s13ee2939v574b5eeed39b234c@mail.gmail.com>
 <f36128690708122201w7606653ambfd80c00a928b243@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Subject: Re: Range queries in Lucene - numerical or lexicographical
:
: Thanks. Probably this should be mentioned on the documentation page.

it does say right above the "date" example: "....  Sorting is done
lexicographically."

(Admitedly I'm not sure why the word "Sorting" is used in that sentence,
but it should make it clear that it's a lexicographical comparison)

patches to improve documentation are always appreciated!




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 13 07:02:35 2007
Return-Path: <java-user-return-29774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3817 invoked from network); 13 Aug 2007 07:02:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2007 07:02:34 -0000
Received: (qmail 20504 invoked by uid 500); 13 Aug 2007 07:02:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20460 invoked by uid 500); 13 Aug 2007 07:02:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20449 invoked by uid 99); 13 Aug 2007 07:02:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 00:02:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stachoo@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 07:02:23 +0000
Received: by nf-out-0910.google.com with SMTP id d3so441931nfc
        for <java-user@lucene.apache.org>; Mon, 13 Aug 2007 00:02:02 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:mime-version:content-type:x-google-sender-auth;
        b=DIZsdPO+cKLu7+I1h7J/FSWzawpFucE+ALmoS4kkJ2DERoszHVCraVgt1rFG2PHOO0HjnerV1A3l6oIA8rxZFIKQjffxxFM75jT26CBIc/iPgPvtIctKIw7RunX3tzAluRTQQ8U+D9Aul2jbxrG5OUgU+05SCLS+rxEtIe/jhi0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:mime-version:content-type:x-google-sender-auth;
        b=Kl1Z9wGPveWhhl4JCPBNMZEkJ5h5iwxpXlYZ+C3vcipUbyqJSYPP9oi9MtFKEOZYjB7+shnYjNhzkytlhFSFBK38aBmkbOpi6Cb7Vz3FvEAfDvNoQJpPSisaU6ILr9846Gm09BYkUmzw7BCrMojJ9LLtx3zvoIqVSjiMDHIoCFg=
Received: by 10.78.21.7 with SMTP id 7mr1629285huu.1186988517716;
        Mon, 13 Aug 2007 00:01:57 -0700 (PDT)
Received: by 10.78.35.17 with HTTP; Mon, 13 Aug 2007 00:01:57 -0700 (PDT)
Message-ID: <5af106d60708130001j2a11acc6o4cb0e5eb60120d42@mail.gmail.com>
Date: Mon, 13 Aug 2007 09:01:57 +0200
From: "Stanislaw Osinski" <stanislaw.osinski@man.poznan.pl>
Sender: stachoo@gmail.com
To: lucene-user <java-user@lucene.apache.org>, nutch-user@lucene.apache.org, 
	solr-user@lucene.apache.org
Subject: [release announcement] Carrot2 version 2.1 released
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17807_9886493.1186988517520"
X-Google-Sender-Auth: 4ab9d464f4fd04cf
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17807_9886493.1186988517520
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,

A bit of self-promotion again :) I hope you don't find it out of topic,
after all, some folks are using Carrot2 with Lucene and Solr, and Nutch has
a Carrot2-based clustering plugin.

Staszek
stanislaw.osinski@carrot2.org

________________________________________________________________________________

Carrot2 Search Results Clustering Engine version 2.1 released

Version 2.1 of the Java-based Open Source Search Results Clustering Engine
called Carrot2 has been released. Carrot2 can fetch search results from a
variety of sources and automatically organize (cluster) them into thematic
categories using one of its specialized search results clustering
algorithms.

The 2.1 release comes with the Document Clustering Server that exposes
Carrot2 clustering as an XML-RPC or REST service with convenient XML or JSON
data formats enabling e.g. quick PHP, .NET or Ruby integration. The new
release also adds new search results sources and many other improvements (
http://project.carrot2.org/release-2.1-notes.html).

At the same time Carrot Search, the Carrot2 spin-off company, released
version 1.2 of Lingo3G -- a high-performance document clustering engine
offering hierarchical clustering, synonyms, label filtering and advanced
tuning capabilities.

For more information, please check

Carrot2 live demo -- http://www.carrot2.org
Carrot2 project website -- http://project.carrot2.org
Release 2.1 notes -- http://project.carrot2.org/release-2.1-notes.html

Carrot Search -- http://www.carrot-search.com

------=_Part_17807_9886493.1186988517520--

From java-user-return-29775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 13 07:02:49 2007
Return-Path: <java-user-return-29775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3977 invoked from network); 13 Aug 2007 07:02:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2007 07:02:48 -0000
Received: (qmail 21879 invoked by uid 500); 13 Aug 2007 07:02:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21848 invoked by uid 500); 13 Aug 2007 07:02:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21823 invoked by uid 99); 13 Aug 2007 07:02:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 00:02:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kai.hu@dusee.cn designates 222.66.106.38 as permitted sender)
Received: from [222.66.106.38] (HELO mx01.dusee.cn) (222.66.106.38)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 07:02:25 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: =?gb2312?B?tPC4tDogSW5kZXhpbmcgY29ycmVjdGx5Pw==?=
Date: Mon, 13 Aug 2007 15:01:49 +0800
Message-ID: <8E5BA7FAF994C6409A8E074B78EB4677013653B4@14sha-msg02.zm.sd.mediazone.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Indexing correctly?
Thread-Index: AcfdCku5T7YdCeTwTBuyVEnRPyW/NgAbNR5Q
From: "Kai Hu" <kai.hu@dusee.cn>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, John
	I think you cost too much time in I/O,and if you use RAMDirectory first =
will better.see http://wiki.apache.org/lucene-java/ImproveIndexingSpeed

kai

-----=D3=CA=BC=FE=D4=AD=BC=FE-----
=B7=A2=BC=FE=C8=CB: Erick Erickson [mailto:erickerickson@gmail.com]=20
=B7=A2=CB=CD=CA=B1=BC=E4: 2007=C4=EA8=D4=C213=C8=D5 =D0=C7=C6=DA=D2=BB =
1:57
=CA=D5=BC=FE=C8=CB: java-user@lucene.apache.org
=D6=F7=CC=E2: Re: Indexing correctly?

Where are your source files and index? If they're somewhere
out there on the network, you may be having some slowdown
because of network latency (the part about "/mount/....." leads
me to ask this one).

If this is the case, you might get an improvement if all the files are
local...

Best
Erick

On 8/11/07, John Paul Sondag <jsondag2@uiuc.edu> wrote:
>
> It takes roughly 6 hours for me to index a Gig of data.  The =
benchmarks
> take
> quite a bit less if I'm reading it correctly.  I'll try out the
> StringBuffer/Builder and let you know.  Thanks for the quick response =
and
> if
> you have any more suggestions please let me know.
>
> --JP
>
> On 8/11/07, karl wettin <karl.wettin@gmail.com> wrote:
> >
> > How much slower than anticipated is it?
> >
> > I would start by using a StringBuffer/Builder rather than appending
> > (immutable) strings to each other.
> >
> >
> > 11 aug 2007 kl. 19.05 skrev John Paul Sondag:
> >
> > > Hi,
> > >
> > > I was hoping that maybe you guys could see if I'm somehow indexing
> > > inefficiently.  I'm putting relevant parts of my code below.  I've
> > > looked at
> > > the "benchmarks" page on Lucene and my indexing time is taking a
> > > substantial
> > > amount of time more than what I see posted.  I'm not sure when I
> > > should call
> > > flush() ( I saw that I should be doing that on the
> > > ImproveIndexingSpeed
> > > page).  I'd really appreciate any advice.
> > >
> > > Here's my code:
> > >
> > >       File directory =3D new File( =
"/mounts/falcon5/disks/0/tcheng3/
> > > Dataset");
> > >       File[] theFiles =3D directory.listFiles();
> > >
> > >           //go through each file inside the directory and index it
> > >           for(int curFile =3D 0; curFile < theFiles.length; =
curFile++)
> > >           {
> > >               File fin=3DtheFiles[curFile];
> > >
> > >               //open up the file
> > >               FileInputStream inf =3D new FileInputStream(fin);
> > >               InputStreamReader isr =3D new InputStreamReader(inf,
> > > "US-ASCII");
> > >               BufferedReader in =3D new BufferedReader(isr);
> > >               String text=3D"";
> > >               String docid=3D"";
> > >
> > >             while (true) {
> > >
> > >             //read in the file one line at a time, and act =
accordingly
> > >                 String line =3D in.readLine();
> > >                 if (line =3D=3D null) { break;}
> > >
> > >                  if (line.startsWith("<DOC>") ) {
> > >                     //get docID
> > >                     line =3D in.readLine();
> > >                     String tempStr =3D =
line.substring(8,line.length());
> > >                     int pos =3D tempStr.indexOf(' ');
> > >                     docid =3D tempStr.substring(0,pos);
> > >                     }else if (line.startsWith("</DOC>")) {
> > >
> > >                     Document doc =3D new Document();
> > >
> > >                       doc.add(new Field("contents",text,
> > > Field.Store.NO,
> > > Field.Index.TOKENIZED, Field.TermVector.WITH_POSITIONS ));
> > >                     doc.add(new Field("DocID",docid, =
Field.Store.YES,
> > > Field.Index.NO));
> > >                       writer.addDocument(doc);
> > >                     text=3D"";
> > >                 } else {
> > >                     text =3D text + "\n" + line;
> > >                 }
> > >             }
> > >
> > >         }
> > >
> > >
> > >           int numIndexed =3D writer.docCount();
> > >
> > >           writer.optimize();
> > >           writer.close();
> > >
> > >
> > > Thanks,
> > >
> > > --JP
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 13 08:12:19 2007
Return-Path: <java-user-return-29776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26166 invoked from network); 13 Aug 2007 08:12:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2007 08:12:19 -0000
Received: (qmail 51138 invoked by uid 500); 13 Aug 2007 08:12:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51104 invoked by uid 500); 13 Aug 2007 08:12:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51093 invoked by uid 99); 13 Aug 2007 08:12:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 01:12:10 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 212.174.130.108 is neither permitted nor denied by domain of enis.soz.nutch@gmail.com)
Received: from [212.174.130.108] (HELO mail.agmlab.com) (212.174.130.108)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 08:12:08 +0000
Received: from mail.agmlab.com (localhost [127.0.0.1])
	by mail.agmlab.com (Postfix) with ESMTP id 0BDA6D4295
	for <java-user@lucene.apache.org>; Mon, 13 Aug 2007 11:12:00 +0300 (EEST)
Received: from [192.168.15.18] (unknown [192.168.15.18])
	by mail.agmlab.com (Postfix) with ESMTP id D3EC4D4294
	for <java-user@lucene.apache.org>; Mon, 13 Aug 2007 11:11:59 +0300 (EEST)
Message-ID: <46C01240.7010802@gmail.com>
Date: Mon, 13 Aug 2007 11:11:44 +0300
From: Enis Soztutar <enis.soz.nutch@gmail.com>
User-Agent: Thunderbird 1.5.0.12 (X11/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: How to keep user search history and how to turn it into information?
References: <52c3ddca0708100028qfcbd303m9d7e89b81692ff3b@mail.gmail.com>	 <46BC3E44.3020705@gmail.com>	 <52c3ddca0708100407x6a5aa303le32b0e058a7981f9@mail.gmail.com>	 <46BC534A.207@gmail.com> <52c3ddca0708100556w14b9f852yde1357f8de2b72d3@mail.gmail.com>
In-Reply-To: <52c3ddca0708100556w14b9f852yde1357f8de2b72d3@mail.gmail.com>
Content-Type: multipart/alternative;
 boundary="------------000307050107090605020108"
X-Virus-Scanned: ClamAV using ClamSMTP
X-Virus-Checked: Checked by ClamAV on apache.org

--------------000307050107090605020108
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi,

Lukas Vlcek wrote:
> Enis,
>
> Thanks for your time.
> I gave a quick glance at Pig and it seems good (seems it is directly based
> on Hadoop which I am starting to play with :-). It obvious that a huge
> amount of data (like user queries or access logs) should be stored in flat
> files which makes it convenient for further analysis by Pig (or directly by
> Hadoop based tasks) or other tools. And I agree with you that size of the
> index can be tracked in journal based style in separated log rather then
> with every since user query. That is for the easier part of my original
> question :-)
>
> The true art starts with the mining tasks itself. How to efficiently use
> such data for bettering user experience with the search engine... one potion
> is to use such data for search engine tuning, which is more technical
> oriented application (speeding up slow queries, reshaping the index, ...).
> But I am looking for more IR oriented application of this information. I
> remember that once I read on Lucene mail list that somebody suggested
> utilization of previously issued user queries for suggestions of
> similar/other/related queries or for typo checking. While there are well
> discussed methods (moreLikeThis, did you mean, similarity, ... etc) in
> Lucene community I am still wondering if once can use user search history
> data for such purpose and if the answer is yes then how (practical examples
> are welcomed).
>
>   
Well, the logs of the search engine is used to improve the search engine 
in several ways. All the major search engines including google, yahoo 
and ms uses the logs to deliver more relevant results to the user. How 
they do this is a big research area. Although google tends to not 
publish it's algorithms, yahoo and MS do.

The logs can be used to improve various components of the search engine. 
For example the suggesters (google suggest, yahoo suggest ) and the 
spell checkers. Most of the spell checkers uses the noisy channel error 
model. In this model, the user emits word w with a probability p(w). But 
due to the error in the channel (that is misspelling) the user emits w' 
instead. Spelling correction deals with correcting w' to w. The 
calculation involves edit distance, prior probabilities of words, 
probabilities of errors(prob. of writing "spel" instead of  "spell" ) 
and a predefined lexicon. But in the word of internet, there in no 
lexicon, so given a word w' you may not know exactly if w' is misspelled 
or not. The logs can be used for calculating the probabilities, building 
the lexicon, and generating possible suggestions(in case of a misspelled 
word).

For spell checking you can consult :

An improved Error model for noisy channel spelling correction, Brin et.al.
Learning a spelling error model for search query logs, Ahmad et.al.
spelling correction for search engine queries. Martis. et.al
techniques for authomatically correcting words in text. Kukish (an 
excellent review of topic)
Spelling correction as an iterative process that exploits the collective 
knowledge of web users. Brill et.al. (This MS paper is very good)

For the query suggestion, yahoo has a paper about using Machine learning 
methods using the log data, for query suggestion. The basic idea behind 
is that, the user submits a query, then if not satisfied with the 
results, refines the query and resubmits it. Looking at all the 
collective data we can find possible better suggestions for a submitted 
query, classify them as useful or not useful or irrelevant, then display 
the useful ones. You can find the paper at yahoo research site.

using the web log for improving search engine quality is a much harder 
problem. Unfortunately, i could not find time to read more about this 
topic yet. I know that MS uses a method based on neural nets, called 
ranknet, which ranks the search results. The net is trained with the 
server logs. Below i list some papers, but i have not read all of them 
so i cannot say anything further about them :

Accurately Interpretting Cilckthrough Data as Implicit Feedback
A Simulated Study of Implicit Feedback Models
Identifying "Best Bet" Web Search Results by Mining Past User Behavior
Improving Web Search Ranking by Incorporating User behaviour Information
Learning User Interaction Models for Predicting Web Search Result 
Preferences
Optimizing_search_engines_using_clickthrough_data
Query Chains: Learning to Rank from Implicit Feedback




> Lukas
>
> On 8/10/07, Enis Soztutar <enis.soz.nutch@gmail.com> wrote:
>   
>>
>> Lukas Vlcek wrote:
>>     
>>> Hi Enis,
>>>
>>>       
>> Hi again,
>>     
>>> On 8/10/07, Enis Soztutar <enis.soz.nutch@gmail.com> wrote:
>>>
>>>       
>>>> Hi,
>>>>
>>>> Lukas Vlcek wrote:
>>>>
>>>>         
>>>>> Hi,
>>>>>
>>>>> I would like to keep user search history data and I am looking for
>>>>>           
>> some
>>     
>>>>> ideas/advices/recommendations. In general I would like to talk about
>>>>>
>>>>>           
>>>> methods
>>>>
>>>>         
>>>>> of storing such data, its structure and how to turn it into valuable
>>>>> information.
>>>>>
>>>>> As for the structure:
>>>>> ==============
>>>>> For now I don't have exact idea about what kind of information I
>>>>>           
>> should
>>     
>>>>> keep. I know that this is application specific but I believe there can
>>>>>
>>>>>           
>>>> be
>>>>
>>>>         
>>>>> some common general patterns. as of now I think can be useful to keep
>>>>>           
>> is
>>     
>>>> the
>>>>
>>>>         
>>>>> following:
>>>>>
>>>>> 1) system time (time of issuing the query) and userid
>>>>> 2) original user query in raw form (untokenized)
>>>>> 3) expanded user query (both tokenized and untokenized can be useful)
>>>>> 4) query execution time
>>>>> 5) # of objects retrieved from index
>>>>> 6) # of total object count in index (this can change during time)
>>>>> 7) and possibly if user clicked some result and if so then which one
>>>>>
>>>>>           
>>>> (the
>>>>
>>>>         
>>>>> hit number) and system time
>>>>>
>>>>>
>>>>>
>>>>>           
>>>> Remember that you may not want to store all the information available
>>>>         
>> at
>>     
>>>> runtime of the query, since it may result in great performance burden.
>>>> For example you  may want to store the raw form of the query, but not
>>>> parsed form since you can later parse the query anayway (unless you
>>>>         
>> have
>>     
>>>> some architecture change). Similarly 6 seemed not a good choice for
>>>> me(again you can store the info externally). You can look at the common
>>>> and extended log formats which are stored by the web server.
>>>>
>>>>         
>>> The problem is that all the information do chance in time. The index is
>>> updated continuously which means that expanded queries and total number
>>>       
>> of
>>     
>>> documents in index do change as well. But you are right that getting
>>>       
>> some of
>>     
>>> this info can cause extra performance expenses (then it would be
>>>       
>> question of
>>     
>>> later optimization of architecture design).
>>>
>>>       
>> Well i think you can at least store the size of the index in another
>> file, and log to the changes in the index size from there. The
>> motivation for this comes from storage efficiency. You may not want to
>> store the same index size over and over again in n queries before the
>> index size changes, but store it once, with the time, per change.
>>     
>>>       
>>>>> As for the information I can get from this:
>>>>> =============================
>>>>> Such minimal data collection could show if the search engine serves
>>>>>
>>>>>           
>>>> users
>>>>
>>>>         
>>>>> well or not (generally said). I should note that for the users in this
>>>>>
>>>>>           
>>>> case
>>>>
>>>>         
>>>>> the only other option is to not use the search engine at all (so the
>>>>>
>>>>>           
>>>> data
>>>>
>>>>         
>>>>> should not be biased by the fact that users are using alternative
>>>>>           
>> search
>>     
>>>>> method). I should be able to learn if:
>>>>>
>>>>> 1) there are bottleneck queries (Prefix,Fuzzy,Proximity queries...)
>>>>> 2) users are finding what they want (they can find it fast and results
>>>>>
>>>>>           
>>>> are
>>>>
>>>>         
>>>>> ordered by properly defined relevance [my model is well tuned in terms
>>>>>
>>>>>           
>>>> of
>>>>
>>>>         
>>>>> term weights] so the result they click is among first hits)
>>>>> 3) user can formulate queries well (do they issue queries which return
>>>>>
>>>>>           
>>>> all
>>>>
>>>>         
>>>>> index documents or they can issue queries which return just a couple
>>>>>           
>> of
>>     
>>>>> documents)
>>>>> 4) ...?... etc...
>>>>>
>>>>>
>>>>>
>>>>>           
>>>> Web server log analysis is a very popular topic nowadays, and you can
>>>> check for the literature, especially clickthrough data anaysis. All the
>>>> major search engines has to interpret the data to improve their
>>>> algorithms, and to learn from the latent "collective knowlege" hidden
>>>>         
>> in
>>     
>>>> web server logs.
>>>>
>>>>         
>>> It seems I have to do my homework and check CiteSeer for some papers :-)
>>> Is there any paper you can recommend me? Some good one to start with?
>>> What I want to achieve is far beyond the scope of the project I am
>>>       
>> working
>>     
>>> on right now thus I cannot spend all my time on research (in spite of
>>>       
>> the
>>     
>>> fact I would love to) so I can either a) use some tool which is already
>>> available (open sourced) and directly fits my needs (I don't think there
>>>       
>> is
>>     
>>> any tool which I could use out-of-box) or b) implement something new
>>>       
>> from
>>     
>>> scratch but with just very limited functionality.
>>>
>>>       
>> You do not have to implement this from scratch. You just have to specify
>> your data mining tasks, then write scripts(in pig latin) or write
>> map-reduce programs (in hadoop). Either of these are not that hard. I do
>> not think that there is any tool which may satisfy all you information
>> needs. So at the risk of repeating myself i suggest you to look at pig
>> at write some scripts to mine the data.
>>
>> Coming to literature, i can hardly suggest any specific paper, since i
>> am not very into the subject either. But i suggest you to skip this
>> step, first build you data structures (log format), then start
>> extracting some naive statistical information from the data. For
>> example, initially you may want to know
>> 1. avarage query execution time
>> 2. avarage query execution time per query type(boolean, fuzzy, etc.)
>> 3. histogram of query types (how many boolean queries, etc.)
>> 4. avarage #of queries per user session.
>> 5. etc.
>>
>> The list can go on and on depending on the data you have and information
>> you want. These kind of simple statistical analysis can be very easy to
>> extract and relatively easy to interpret.
>>
>>     
>>>> As for the storage method:
>>>>
>>>>         
>>>>> ===================
>>>>> I was planning to keep such data in database but now it seems to me
>>>>>           
>> that
>>     
>>>> it
>>>>
>>>>         
>>>>> will be better to keep it directly in index (Lucene index). It seems
>>>>>           
>> to
>>     
>>>> me
>>>>
>>>>         
>>>>> that this approach would allow me for better fuzzy searches across
>>>>>
>>>>>           
>>>> history
>>>>
>>>>         
>>>>> and extracting relevant objects and their count more efficiently (with
>>>>> benefit of the relevance based search on top of history search
>>>>>           
>> corpus).
>>     
>>>>> I think that more scalable solution would be to keep such data in pure
>>>>>
>>>>>           
>>>> flat
>>>>
>>>>         
>>>>> file and then periodically recreate search history index (or more
>>>>>
>>>>>           
>>>> indices)
>>>>
>>>>         
>>>>> from it (for example by Map-Reduce like task). Event better the flat
>>>>>
>>>>>           
>>>> file
>>>>
>>>>         
>>>>> could be stored in distributer file system. However, for now I would
>>>>>
>>>>>           
>>>> like to
>>>>
>>>>         
>>>>> start with something simple.
>>>>>
>>>>>
>>>>>           
>>>> I would rather suggest you to keep the logs in rolling flat files. An
>>>> access to the database for each search will take lots of time. Then you
>>>> may want to flush those logs to the db once a day if you indeed want to
>>>> store the data in a relational way.
>>>>
>>>> I infer that you want to mine the data, but you do not know what to
>>>> mine, right? I suggest you to look at hadoop and pig. Pig is a is
>>>> designed especially for this purpose.
>>>>
>>>>         
>>> You've hit the nail on the head! I am very curious about how one can use
>>> such data to improve user experience with search engine (given my
>>>       
>> project
>>     
>>> schedule time constraints).
>>>
>>>
>>>       
>>>> I know this is a complex topic...
>>>>
>>>>         
>>>>> Regards,
>>>>> Lukas
>>>>>
>>>>>
>>>>>
>>>>>           
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>         
>>> Anyway, thanks for your reply!
>>>
>>> BR
>>> Lukas
>>>
>>>
>>>       
>
>   

--------------000307050107090605020108--

From java-user-return-29777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 13 08:34:44 2007
Return-Path: <java-user-return-29777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33228 invoked from network); 13 Aug 2007 08:34:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2007 08:34:43 -0000
Received: (qmail 83400 invoked by uid 500); 13 Aug 2007 08:34:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83349 invoked by uid 500); 13 Aug 2007 08:34:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83335 invoked by uid 99); 13 Aug 2007 08:34:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 01:34:36 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 08:34:40 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IKVNI-0008Hz-LQ
	for java-user@lucene.apache.org; Mon, 13 Aug 2007 01:34:08 -0700
Message-ID: <12122714.post@talk.nabble.com>
Date: Mon, 13 Aug 2007 01:34:08 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: RE: High CPU usage duing index and search
In-Reply-To: <005401c7dd49$01cafda0$0560f8e0$@com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: test1@doramail.com
References: <004201c7d322$69c8bae0$3d5a30a0$@com> <4E0025CD-A1FF-44E4-8322-2A71F9F26332@gmail.com> <003501c7d3e3$ca58e990$5f0abcb0$@com> <D0F005F8-F115-45C9-A5F6-A3F758EE5514@gmail.com> <000901c7d8de$bc2be0c0$3483a240$@com> <12035676.post@talk.nabble.com> <005401c7dd49$01cafda0$0560f8e0$@com>
X-Virus-Checked: Checked by ClamAV on apache.org


To me, it looks like what you are trying to achieve is more suitable to be
the database where it can help you do grouping and sorting, etc. But if you
still want to achieve it using lucene, you might want to post some code so
that I can go through it and see why it uses so much resource then.


Chew Yee Chuang wrote:
>=20
> Hi testn,
>=20
> I have tested Filter, it is pretty fast, but still take a lot of CPU
> resource, Maybe it could due to the number of filter I run.
>=20
> Thank you
> eChuang, Chew
>=20
>=20
> -----Original Message-----
> From: testn [mailto:test1@doramail.com]=20
> Sent: Tuesday, August 07, 2007 10:37 PM
> To: java-user@lucene.apache.org
> Subject: RE: High CPU usage duing index and search
>=20
>=20
> Check out Filter class. You can create a separate filter for each field
> and
> then chain them together using ChainFilter. If you cache the filter, it
> will
> be pretty fast.=20
>=20
>=20
> Chew Yee Chuang wrote:
>>=20
>> Greetings,
>>=20
>> Yes, process a little bit and stop for a while really reduce the CPU
>> usage,
>> but I need to find out a balance so that the indexing or searching will
>> not
>> have so much delay.
>>=20
>> Execute 20,000 queries at a time is because the process is generating th=
e
>> aggregation data for reporting,
>> E.g Gender (M,F), Department (Accounting, R&D, Financial,...etc),=20
>> 1Q - Gender:M AND Department: Accounting
>> 2Q - Gender:M AND Department: R&D
>> 3Q - Gender:M AND Department: Financial
>> 4Q - Gender:F AND Department: Accounting
>> 5Q - ....
>> Thus, the more combination, the more query need to run. For now, I still
>> can't get any idea on how to reduce it, just thinking maybe there is a
>> different way to index it so that I can get It easily.
>>=20
>> Any help would be appreciated.
>>=20
>> Thanks
>> eChuang, Chew
>>=20
>> -----Original Message-----
>> From: karl wettin [mailto:karl.wettin@gmail.com]=20
>> Sent: Thursday, August 02, 2007 7:11 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: High CPU usage duing index and search
>>=20
>> It sounds like you have a fairly busy system, perhaps 100% load on the
>> process is not that strange, at least not during short periods of time.
>>=20
>> A simpler solution would be to nice the process a little bit in order to
>> give your background jobs some more time to think.
>>=20
>> Running a profiler is still the best advice I can think of. It should
>> clearly show you what is going on when you run out of CPU.
>>=20
>> -- =20
>> karl
>>=20
>> 1 aug 2007 kl. 04.29 skrev Chew Yee Chuang:
>>=20
>>> Hi,
>>>
>>> Thanks for the link provided, actually I've go through those =20
>>> article when I
>>> developing the index and search function for my application. I =20
>>> haven=E2=80=99t try
>>> profiler yet, but I monitor the CPU usage and notice that whatever =20
>>> index or
>>> search performing, the CPU usage raise to 100%. Below I will try to
>>> elaborate more on what my application is doing and how I index and =20
>>> search.
>>>
>>> There are many concurrent process running, first, the application =20
>>> will write
>>> records that received into a text file with tab separated each =20
>>> different
>>> field. Application will point to a new file every 10mins and start =20
>>> writing
>>> to it. So every file will contains only 10mins record, approximate =20
>>> 600,000
>>> records per file. Then, the indexing process will check whether =20
>>> there is a
>>> text file to be index, if it is, the thread will wake up and start =20
>>> perform
>>> indexing.
>>>
>>> The indexing process will first add documents to RAMDir, Then =20
>>> later, add
>>> RAMDir into FSDir by calling addIndexNoOptimize() when there is =20
>>> 100,000
>>> documents(32 fields per doc) in RAMDir. There is only 1 IndexWriter=20
>>> (FSDir)
>>> was created but a few IndexWriter(RAMDir) was created during the whole
>>> process. Below are some configuration for IndexWriters that I =20
>>> mentioned:-
>>>
>>> IndexWriter (RAMDir)
>>> - SimpleAnalyzer
>>> - setMaxBufferedDocs(10000)
>>> - Filed.Store.YES
>>> - Field.Index.NO_NORMS
>>>
>>> IndexWriter (FSDir)
>>> - SimpleAnalyzer
>>> - setMergeFactor(20)
>>> - addIndexesNoOptimize()
>>>
>>> For the searching, because there are many queries(20,000) run =20
>>> continuously
>>> to generate the aggregate table for reporting purpose. All this =20
>>> queries is
>>> run in nested loop, and there is only 1 Searcher created, I try =20
>>> searcher and
>>> filter as well, filter give me better result, but both also utilize =20
>>> lots of
>>> CPU resources.
>>>
>>> Hope this info will help and sorry for my bad English.
>>>
>>> Thanks
>>> eChuang, Chew
>>>
>>> -----Original Message-----
>>> From: karl wettin [mailto:karl.wettin@gmail.com]
>>> Sent: Tuesday, July 31, 2007 5:54 PM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: High CPU usage duing index and search
>>>
>>>
>>> 31 jul 2007 kl. 05.25 skrev Chew Yee Chuang:
>>>> But just notice that when Lucene performing search or index,
>>>> the CPU usage on my machine raise to 100%, because of this issue,
>>>> some of my
>>>> others backend process will slow down eventually. Just want to know
>>>> does
>>>> anyone face this problem before ? and is it any idea on how to
>>>> overcome this
>>>> problem ?
>>>
>>> Did you run a profiler to see what it is that consume all the =20
>>> resources?
>>> It is very hard to guess based on the information you supplied. Start
>>> here:
>>>
>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>> http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
>>> http://wiki.apache.org/lucene-java/ImproveSearchingSpeed
>>>
>>>
>>> --=20
>>> karl
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>> No virus found in this incoming message.
>>> Checked by AVG Free Edition.
>>> Version: 7.5.476 / Virus Database: 269.11.0/927 - Release Date: =20
>>> 7/30/2007
>>> 5:02 PM
>>>
>>>
>>> No virus found in this outgoing message.
>>> Checked by AVG Free Edition.
>>> Version: 7.5.476 / Virus Database: 269.11.0/929 - Release Date: =20
>>> 7/31/2007
>>> 5:26 PM
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>> No virus found in this incoming message.
>> Checked by AVG Free Edition.=20
>> Version: 7.5.476 / Virus Database: 269.11.2/933 - Release Date: 8/2/2007
>> 2:22 PM
>> =20
>>=20
>> No virus found in this outgoing message.
>> Checked by AVG Free Edition.=20
>> Version: 7.5.476 / Virus Database: 269.11.8/940 - Release Date: 8/6/2007
>> 4:53 PM
>> =20
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>>=20
>=20
> --=20
> View this message in context:
> http://www.nabble.com/High-CPU-usage-duing-index-and-search-tf4190756.htm=
l#a12035676
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> No virus found in this incoming message.
> Checked by AVG Free Edition.=20
> Version: 7.5.476 / Virus Database: 269.11.8/940 - Release Date: 8/6/2007
> 4:53 PM
> =20
>=20
> No virus found in this outgoing message.
> Checked by AVG Free Edition.=20
> Version: 7.5.476 / Virus Database: 269.11.15/949 - Release Date: 8/12/200=
7
> 11:03 AM
> =20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/High-CPU-usage-duing-in=
dex-and-search-tf4190756.html#a12122714
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 13 09:08:54 2007
Return-Path: <java-user-return-29778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43593 invoked from network); 13 Aug 2007 09:08:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2007 09:08:53 -0000
Received: (qmail 22507 invoked by uid 500); 13 Aug 2007 09:08:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22479 invoked by uid 500); 13 Aug 2007 09:08:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22468 invoked by uid 99); 13 Aug 2007 09:08:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 02:08:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 09:08:38 +0000
Received: by nf-out-0910.google.com with SMTP id d3so454444nfc
        for <java-user@lucene.apache.org>; Mon, 13 Aug 2007 02:08:17 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=HrK4FBP1X4S+Kg3JmaSB+PqIcs7Vx+AvBDpSK+SbTxnG5UiDnoNqIBINWUvahLmTmnVGYzPcSVBxgz6aUL97WmdqWo4/+4h+wkg8/KTf4XSdL1v4EMW8O/3TZpPTco6Axe1MzlhScQNB/BY+QkvIS96cBjlawsk2HH4A5EmWm8k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=omwHV6AijRU//v+4fD1vjY75BwFN+SRyK0z11nymi2u7Ufczf8afntXKcWROAlXwiHxGvd46Z/+sLohcylDCyaOmil0+uv+3kg6OeVceIEhAkYRFwd7jBuYoeDCacrv1Mk0sJpnU6Jtia38SL1MkSOQzqBT+dyEcDKVVpsiW8Vg=
Received: by 10.78.146.11 with SMTP id t11mr1683360hud.1186996096405;
        Mon, 13 Aug 2007 02:08:16 -0700 (PDT)
Received: by 10.78.140.12 with HTTP; Mon, 13 Aug 2007 02:08:16 -0700 (PDT)
Message-ID: <6e3ae6310708130208m78074a3cs406c78b12b1f6b0a@mail.gmail.com>
Date: Mon, 13 Aug 2007 02:08:16 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index file size limitation of 2GB
In-Reply-To: <3cb8ef760708122230k1b3c8bb6h6785c04dabbe1f75@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <3cb8ef760708122230k1b3c8bb6h6785c04dabbe1f75@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, Rohit,

You need to create index reader in the sub directory where you created
the index files. Lucene's IndexReader won't find your index if you
simply move the index to a sub directory.

Yes, if you have several index directory, you need to combine them
together. But you can achieve this by using MultiReader.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes


On 8/12/07, rohit saini <mrrohitsaini@gmail.com> wrote:
> Hi all,
>
> I have bulk of data to be indexed and that may cross index file size of 2GB.
> As lucene faq tells that if index file size increses to 2GB there will be
> problems. but faq tells to make index subdirectory in this case. I have
> tried to do so made a index subdirectory in index main directory when index
> file size increses to 2GB but during search I don't get any result from
> index subdirectory. do I need to search recursively but in that case there
> will be more than "hits" object then how to combine them and return a single
> result to the user? Please tell me ....
>
> Thanks & Regards,
>
> Rohit
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 13 10:50:12 2007
Return-Path: <java-user-return-29779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95625 invoked from network); 13 Aug 2007 10:50:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2007 10:50:09 -0000
Received: (qmail 24554 invoked by uid 500); 13 Aug 2007 10:50:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24513 invoked by uid 500); 13 Aug 2007 10:50:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24502 invoked by uid 99); 13 Aug 2007 10:50:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 03:50:01 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lukas.vlcek@gmail.com designates 209.85.198.187 as permitted sender)
Received: from [209.85.198.187] (HELO rv-out-0910.google.com) (209.85.198.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 10:49:59 +0000
Received: by rv-out-0910.google.com with SMTP id k20so919069rvb
        for <java-user@lucene.apache.org>; Mon, 13 Aug 2007 03:49:38 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Aex2/0THe58xXcY2wnk28nkHcqD1N38p9RBHfJiUD1nNUfxhXofUXhD7nQ5AVPYGScV2T7hEdZnOghn8UGO6pbfqcT29wGTlhRz5TiB6Q/O9llQKy0b84Hg/VwHz9qk9urLcfdDEJ75NpY9cbRwWG0BrweLillB0IYsV71J92DQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TCHMtsNtp7pE+PO7v2fFNzltLPAFj7hBU+BrEfJ+toXLI2A5Iqt+1QAx0+g0oRfVROEjIxB76ASY2EW3R7PBCi+mXoDr1h0ogQIxnkfJF9Np1zkGqwreME9MKvfrSFPEEoDnEWoEjn+HyuW4DP+d7YJl4BdsjjPtgfiave+TtlI=
Received: by 10.141.159.13 with SMTP id l13mr2489564rvo.1187002178718;
        Mon, 13 Aug 2007 03:49:38 -0700 (PDT)
Received: by 10.141.210.7 with HTTP; Mon, 13 Aug 2007 03:49:38 -0700 (PDT)
Message-ID: <52c3ddca0708130349i6bf36539l63b2de8a462462c3@mail.gmail.com>
Date: Mon, 13 Aug 2007 12:49:38 +0200
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to keep user search history and how to turn it into information?
In-Reply-To: <46C01240.7010802@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12258_27747746.1187002178611"
References: <52c3ddca0708100028qfcbd303m9d7e89b81692ff3b@mail.gmail.com>
	 <46BC3E44.3020705@gmail.com>
	 <52c3ddca0708100407x6a5aa303le32b0e058a7981f9@mail.gmail.com>
	 <46BC534A.207@gmail.com>
	 <52c3ddca0708100556w14b9f852yde1357f8de2b72d3@mail.gmail.com>
	 <46C01240.7010802@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12258_27747746.1187002178611
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Enis,
thanks for excellent answer!
Lukas

On 8/13/07, Enis Soztutar <enis.soz.nutch@gmail.com> wrote:
>
> Hi,
>
> Lukas Vlcek wrote:
> > Enis,
> >
> > Thanks for your time.
> > I gave a quick glance at Pig and it seems good (seems it is directly
> based
> > on Hadoop which I am starting to play with :-). It obvious that a huge
> > amount of data (like user queries or access logs) should be stored in
> flat
> > files which makes it convenient for further analysis by Pig (or directly
> by
> > Hadoop based tasks) or other tools. And I agree with you that size of
> the
> > index can be tracked in journal based style in separated log rather then
> > with every since user query. That is for the easier part of my original
> > question :-)
> >
> > The true art starts with the mining tasks itself. How to efficiently use
> > such data for bettering user experience with the search engine... one
> potion
> > is to use such data for search engine tuning, which is more technical
> > oriented application (speeding up slow queries, reshaping the index,
> ...).
> > But I am looking for more IR oriented application of this information. I
> > remember that once I read on Lucene mail list that somebody suggested
> > utilization of previously issued user queries for suggestions of
> > similar/other/related queries or for typo checking. While there are well
> > discussed methods (moreLikeThis, did you mean, similarity, ... etc) in
> > Lucene community I am still wondering if once can use user search
> history
> > data for such purpose and if the answer is yes then how (practical
> examples
> > are welcomed).
> >
> >
> Well, the logs of the search engine is used to improve the search engine
> in several ways. All the major search engines including google, yahoo
> and ms uses the logs to deliver more relevant results to the user. How
> they do this is a big research area. Although google tends to not
> publish it's algorithms, yahoo and MS do.
>
> The logs can be used to improve various components of the search engine.
> For example the suggesters (google suggest, yahoo suggest ) and the
> spell checkers. Most of the spell checkers uses the noisy channel error
> model. In this model, the user emits word w with a probability p(w). But
> due to the error in the channel (that is misspelling) the user emits w'
> instead. Spelling correction deals with correcting w' to w. The
> calculation involves edit distance, prior probabilities of words,
> probabilities of errors(prob. of writing "spel" instead of  "spell" )
> and a predefined lexicon. But in the word of internet, there in no
> lexicon, so given a word w' you may not know exactly if w' is misspelled
> or not. The logs can be used for calculating the probabilities, building
> the lexicon, and generating possible suggestions(in case of a misspelled
> word).
>
> For spell checking you can consult :
>
> An improved Error model for noisy channel spelling correction, Brin et.al.
> Learning a spelling error model for search query logs, Ahmad et.al.
> spelling correction for search engine queries. Martis. et.al
> techniques for authomatically correcting words in text. Kukish (an
> excellent review of topic)
> Spelling correction as an iterative process that exploits the collective
> knowledge of web users. Brill et.al. (This MS paper is very good)
>
> For the query suggestion, yahoo has a paper about using Machine learning
> methods using the log data, for query suggestion. The basic idea behind
> is that, the user submits a query, then if not satisfied with the
> results, refines the query and resubmits it. Looking at all the
> collective data we can find possible better suggestions for a submitted
> query, classify them as useful or not useful or irrelevant, then display
> the useful ones. You can find the paper at yahoo research site.
>
> using the web log for improving search engine quality is a much harder
> problem. Unfortunately, i could not find time to read more about this
> topic yet. I know that MS uses a method based on neural nets, called
> ranknet, which ranks the search results. The net is trained with the
> server logs. Below i list some papers, but i have not read all of them
> so i cannot say anything further about them :
>
> Accurately Interpretting Cilckthrough Data as Implicit Feedback
> A Simulated Study of Implicit Feedback Models
> Identifying "Best Bet" Web Search Results by Mining Past User Behavior
> Improving Web Search Ranking by Incorporating User behaviour Information
> Learning User Interaction Models for Predicting Web Search Result
> Preferences
> Optimizing_search_engines_using_clickthrough_data
> Query Chains: Learning to Rank from Implicit Feedback
>
>
>
>
> > Lukas
> >
> > On 8/10/07, Enis Soztutar <enis.soz.nutch@gmail.com> wrote:
> >
> >>
> >> Lukas Vlcek wrote:
> >>
> >>> Hi Enis,
> >>>
> >>>
> >> Hi again,
> >>
> >>> On 8/10/07, Enis Soztutar <enis.soz.nutch@gmail.com> wrote:
> >>>
> >>>
> >>>> Hi,
> >>>>
> >>>> Lukas Vlcek wrote:
> >>>>
> >>>>
> >>>>> Hi,
> >>>>>
> >>>>> I would like to keep user search history data and I am looking for
> >>>>>
> >> some
> >>
> >>>>> ideas/advices/recommendations. In general I would like to talk about
> >>>>>
> >>>>>
> >>>> methods
> >>>>
> >>>>
> >>>>> of storing such data, its structure and how to turn it into valuable
> >>>>> information.
> >>>>>
> >>>>> As for the structure:
> >>>>> ==============
> >>>>> For now I don't have exact idea about what kind of information I
> >>>>>
> >> should
> >>
> >>>>> keep. I know that this is application specific but I believe there
> can
> >>>>>
> >>>>>
> >>>> be
> >>>>
> >>>>
> >>>>> some common general patterns. as of now I think can be useful to
> keep
> >>>>>
> >> is
> >>
> >>>> the
> >>>>
> >>>>
> >>>>> following:
> >>>>>
> >>>>> 1) system time (time of issuing the query) and userid
> >>>>> 2) original user query in raw form (untokenized)
> >>>>> 3) expanded user query (both tokenized and untokenized can be
> useful)
> >>>>> 4) query execution time
> >>>>> 5) # of objects retrieved from index
> >>>>> 6) # of total object count in index (this can change during time)
> >>>>> 7) and possibly if user clicked some result and if so then which one
> >>>>>
> >>>>>
> >>>> (the
> >>>>
> >>>>
> >>>>> hit number) and system time
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>> Remember that you may not want to store all the information available
> >>>>
> >> at
> >>
> >>>> runtime of the query, since it may result in great performance
> burden.
> >>>> For example you  may want to store the raw form of the query, but not
> >>>> parsed form since you can later parse the query anayway (unless you
> >>>>
> >> have
> >>
> >>>> some architecture change). Similarly 6 seemed not a good choice for
> >>>> me(again you can store the info externally). You can look at the
> common
> >>>> and extended log formats which are stored by the web server.
> >>>>
> >>>>
> >>> The problem is that all the information do chance in time. The index
> is
> >>> updated continuously which means that expanded queries and total
> number
> >>>
> >> of
> >>
> >>> documents in index do change as well. But you are right that getting
> >>>
> >> some of
> >>
> >>> this info can cause extra performance expenses (then it would be
> >>>
> >> question of
> >>
> >>> later optimization of architecture design).
> >>>
> >>>
> >> Well i think you can at least store the size of the index in another
> >> file, and log to the changes in the index size from there. The
> >> motivation for this comes from storage efficiency. You may not want to
> >> store the same index size over and over again in n queries before the
> >> index size changes, but store it once, with the time, per change.
> >>
> >>>
> >>>>> As for the information I can get from this:
> >>>>> =============================
> >>>>> Such minimal data collection could show if the search engine serves
> >>>>>
> >>>>>
> >>>> users
> >>>>
> >>>>
> >>>>> well or not (generally said). I should note that for the users in
> this
> >>>>>
> >>>>>
> >>>> case
> >>>>
> >>>>
> >>>>> the only other option is to not use the search engine at all (so the
> >>>>>
> >>>>>
> >>>> data
> >>>>
> >>>>
> >>>>> should not be biased by the fact that users are using alternative
> >>>>>
> >> search
> >>
> >>>>> method). I should be able to learn if:
> >>>>>
> >>>>> 1) there are bottleneck queries (Prefix,Fuzzy,Proximity queries...)
> >>>>> 2) users are finding what they want (they can find it fast and
> results
> >>>>>
> >>>>>
> >>>> are
> >>>>
> >>>>
> >>>>> ordered by properly defined relevance [my model is well tuned in
> terms
> >>>>>
> >>>>>
> >>>> of
> >>>>
> >>>>
> >>>>> term weights] so the result they click is among first hits)
> >>>>> 3) user can formulate queries well (do they issue queries which
> return
> >>>>>
> >>>>>
> >>>> all
> >>>>
> >>>>
> >>>>> index documents or they can issue queries which return just a couple
> >>>>>
> >> of
> >>
> >>>>> documents)
> >>>>> 4) ...?... etc...
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>> Web server log analysis is a very popular topic nowadays, and you can
> >>>> check for the literature, especially clickthrough data anaysis. All
> the
> >>>> major search engines has to interpret the data to improve their
> >>>> algorithms, and to learn from the latent "collective knowlege" hidden
> >>>>
> >> in
> >>
> >>>> web server logs.
> >>>>
> >>>>
> >>> It seems I have to do my homework and check CiteSeer for some papers
> :-)
> >>> Is there any paper you can recommend me? Some good one to start with?
> >>> What I want to achieve is far beyond the scope of the project I am
> >>>
> >> working
> >>
> >>> on right now thus I cannot spend all my time on research (in spite of
> >>>
> >> the
> >>
> >>> fact I would love to) so I can either a) use some tool which is
> already
> >>> available (open sourced) and directly fits my needs (I don't think
> there
> >>>
> >> is
> >>
> >>> any tool which I could use out-of-box) or b) implement something new
> >>>
> >> from
> >>
> >>> scratch but with just very limited functionality.
> >>>
> >>>
> >> You do not have to implement this from scratch. You just have to
> specify
> >> your data mining tasks, then write scripts(in pig latin) or write
> >> map-reduce programs (in hadoop). Either of these are not that hard. I
> do
> >> not think that there is any tool which may satisfy all you information
> >> needs. So at the risk of repeating myself i suggest you to look at pig
> >> at write some scripts to mine the data.
> >>
> >> Coming to literature, i can hardly suggest any specific paper, since i
> >> am not very into the subject either. But i suggest you to skip this
> >> step, first build you data structures (log format), then start
> >> extracting some naive statistical information from the data. For
> >> example, initially you may want to know
> >> 1. avarage query execution time
> >> 2. avarage query execution time per query type(boolean, fuzzy, etc.)
> >> 3. histogram of query types (how many boolean queries, etc.)
> >> 4. avarage #of queries per user session.
> >> 5. etc.
> >>
> >> The list can go on and on depending on the data you have and
> information
> >> you want. These kind of simple statistical analysis can be very easy to
> >> extract and relatively easy to interpret.
> >>
> >>
> >>>> As for the storage method:
> >>>>
> >>>>
> >>>>> ===================
> >>>>> I was planning to keep such data in database but now it seems to me
> >>>>>
> >> that
> >>
> >>>> it
> >>>>
> >>>>
> >>>>> will be better to keep it directly in index (Lucene index). It seems
> >>>>>
> >> to
> >>
> >>>> me
> >>>>
> >>>>
> >>>>> that this approach would allow me for better fuzzy searches across
> >>>>>
> >>>>>
> >>>> history
> >>>>
> >>>>
> >>>>> and extracting relevant objects and their count more efficiently
> (with
> >>>>> benefit of the relevance based search on top of history search
> >>>>>
> >> corpus).
> >>
> >>>>> I think that more scalable solution would be to keep such data in
> pure
> >>>>>
> >>>>>
> >>>> flat
> >>>>
> >>>>
> >>>>> file and then periodically recreate search history index (or more
> >>>>>
> >>>>>
> >>>> indices)
> >>>>
> >>>>
> >>>>> from it (for example by Map-Reduce like task). Event better the flat
> >>>>>
> >>>>>
> >>>> file
> >>>>
> >>>>
> >>>>> could be stored in distributer file system. However, for now I would
> >>>>>
> >>>>>
> >>>> like to
> >>>>
> >>>>
> >>>>> start with something simple.
> >>>>>
> >>>>>
> >>>>>
> >>>> I would rather suggest you to keep the logs in rolling flat files. An
> >>>> access to the database for each search will take lots of time. Then
> you
> >>>> may want to flush those logs to the db once a day if you indeed want
> to
> >>>> store the data in a relational way.
> >>>>
> >>>> I infer that you want to mine the data, but you do not know what to
> >>>> mine, right? I suggest you to look at hadoop and pig. Pig is a is
> >>>> designed especially for this purpose.
> >>>>
> >>>>
> >>> You've hit the nail on the head! I am very curious about how one can
> use
> >>> such data to improve user experience with search engine (given my
> >>>
> >> project
> >>
> >>> schedule time constraints).
> >>>
> >>>
> >>>
> >>>> I know this is a complex topic...
> >>>>
> >>>>
> >>>>> Regards,
> >>>>> Lukas
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>> ---------------------------------------------------------------------
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>>>
> >>>>
> >>> Anyway, thanks for your reply!
> >>>
> >>> BR
> >>> Lukas
> >>>
> >>>
> >>>
> >
> >
>

------=_Part_12258_27747746.1187002178611--

From java-user-return-29780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 13 11:53:14 2007
Return-Path: <java-user-return-29780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38271 invoked from network); 13 Aug 2007 11:53:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2007 11:53:12 -0000
Received: (qmail 98409 invoked by uid 500); 13 Aug 2007 11:53:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98375 invoked by uid 500); 13 Aug 2007 11:53:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98364 invoked by uid 99); 13 Aug 2007 11:53:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 04:53:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 11:52:59 +0000
Received: by nf-out-0910.google.com with SMTP id d3so472794nfc
        for <java-user@lucene.apache.org>; Mon, 13 Aug 2007 04:52:38 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=jPnUYUJWBWhSGu4fJb+VL4RD+Acz9wwXq/sRNZbkIBc85z0/MKbTpwQ7CSmHCurVmSENpjuZ9nAovIh2a9WIq7kgQC14y6MGYIYjYQ1sb6T9xbPfma7BawTGGyty5S1cOk+t49Kj3uM/pA3SWSGmGLw+aTgYdcbQnxrMVflh+m0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=C5UOhEPZhuu+EMB3Z0z+Wk+7jicQnp80K5C0ZswI3Pf4s3QYMo9IsG7kWXcUi8HXTDfeevehLgPM5fgn+qhFcZy4HIMNoTUPhKAbfQbgccP0JyRqECd2HtToRFp8e5Jt2O/RdFrS6JHNLsWIcEfAgGFUEliUC4UkyYmHyyLOD/c=
Received: by 10.86.86.12 with SMTP id j12mr4302272fgb.1187005958299;
        Mon, 13 Aug 2007 04:52:38 -0700 (PDT)
Received: from ?192.168.2.101? ( [83.249.118.113])
        by mx.google.com with ESMTPS id 13sm134623fks.2007.08.13.04.52.36
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 13 Aug 2007 04:52:37 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <52c3ddca0708130349i6bf36539l63b2de8a462462c3@mail.gmail.com>
References: <52c3ddca0708100028qfcbd303m9d7e89b81692ff3b@mail.gmail.com> <46BC3E44.3020705@gmail.com> <52c3ddca0708100407x6a5aa303le32b0e058a7981f9@mail.gmail.com> <46BC534A.207@gmail.com> <52c3ddca0708100556w14b9f852yde1357f8de2b72d3@mail.gmail.com> <46C01240.7010802@gmail.com> <52c3ddca0708130349i6bf36539l63b2de8a462462c3@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <CE54066C-9CEB-42FF-A22E-7CFF435C6696@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: How to keep user search history and how to turn it into information?
Date: Mon, 13 Aug 2007 13:47:45 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


13 aug 2007 kl. 12.49 skrev Lukas Vlcek:

>>> But I am looking for more IR oriented application of this  
>>> information. I
>>> remember that once I read on Lucene mail list that somebody  
>>> suggested
>>> utilization of previously issued user queries for suggestions of
>>> similar/other/related queries or for typo checking. While there  
>>> are well
>>> discussed methods (moreLikeThis, did you mean, similarity, ...  
>>> etc) in
>>> Lucene community I am still wondering if once can use user search
>>> history data for such purpose and if the answer is yes then how
>>> (practical examples are welcomed).

I've implemented an adaptive didyoumean-thing that somewhat resembles
reinforcement learning: <http://issues.apache.org/jira/browse/ 
LUCENE-626>

It sort of depends of old stuff, but should start up given you patch the
right trunk revision with the right version of the dependencies.


-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 13 13:18:25 2007
Return-Path: <java-user-return-29781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83754 invoked from network); 13 Aug 2007 13:18:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2007 13:18:23 -0000
Received: (qmail 10156 invoked by uid 500); 13 Aug 2007 13:18:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10112 invoked by uid 500); 13 Aug 2007 13:18:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10101 invoked by uid 99); 13 Aug 2007 13:18:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 06:18:15 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.191 as permitted sender)
Received: from [209.85.128.191] (HELO fk-out-0910.google.com) (209.85.128.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 13:18:11 +0000
Received: by fk-out-0910.google.com with SMTP id z23so1418419fkz
        for <java-user@lucene.apache.org>; Mon, 13 Aug 2007 06:17:50 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FkZ3i+wc3TAJQlTwacHX5SH8iuK4ECKVdHg5EFUrEiiDnvulf82JwQRDQI7dz9aYH7t9HLV34RCrjVjAVefx3Ain5oIAcy/FxwXFVBkg0vlK+8WSf0OgMIMdQ7fzJoQn4gj78rCXSohpAyetIwMAIBZhEfLeLP7EeEI7OBvu42U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gUo64C5fbWLqoUm8vn9TLhJA8xMHHYjSPUZA7E/ZKh/B2F4eLipHOUXGvJCJc7EdBzw5sI6IvC11dnINSS4xFdBJzk8RN7VhaWYpdj7UMgiEw1LNeheMYuhfmWqIqiCNuJtV0s5WUiwcMvAMpGfT664I1RUR8mTelA4gL3eZGqE=
Received: by 10.82.127.14 with SMTP id z14mr8147338buc.1187011069562;
        Mon, 13 Aug 2007 06:17:49 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Mon, 13 Aug 2007 06:17:49 -0700 (PDT)
Message-ID: <359a92830708130617ide2cd6ao9c71794ec8ddf46@mail.gmail.com>
Date: Mon, 13 Aug 2007 09:17:49 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: performance on filtering against thousands of different publications
In-Reply-To: <839ba01c0708122117v4a2f3c8fk4c95149a25062e2f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26856_16463644.1187011069533"
References: <839ba01c0708122117v4a2f3c8fk4c95149a25062e2f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26856_16463644.1187011069533
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Have you tried the very simple techinque if just making an OR clause
containing all the sources for a particular query and just letting
it run? I was surprised at the speed...

But before doing *any* of that, you need to find out, and tell us, what
exactly is taking the time. Are you opening a new IndexReader for
each query? Are you iterating through a Hits object that has more than
100 (maybe it's 200 now) entries? Are you loading each document that
satisfies the query? Etc. Etc.

Put some simple timers in your code and measure exactly what's taking the
time before tuning your code. Time the call to search. Time the call for
parsing. Time the assembly of the responses, in, say, blocks of 100.

You simply cannot improve your code without knowing, through
measurement, what is taking the time. Virtually every time I've tried to
improve speed without measuring first, I've been wrong <G>..

BTW, have you looked over the suggestions here?

http://wiki.apache.org/lucene-java/ImproveSearchingSpeed


Best
Erick

On 8/13/07, Cedric Ho <cedric.ho@gmail.com> wrote:
>
> Hi all,
>
> My problem is as follows:
>
> Our documents each comes from a different publication. And we
> currently have > 5000 different publication sources.
>
> Our clients can choose arbitrarily a subset of the publications while
> performing search. It is not  uncommon that a search will have to
> match hundreds or thousands of publications.
>
> I currently try to index the publication information as a field in
> each document. and use a TermsFilter when performing search. However
> the performance is less than satisfactory. Many simple searches takes
> more than 2-3 seconds. (our goal: < 0.5seconds).
>
> Using the CachingWrapperFilter is great for search speed. But I've
> done some calculation and figured that it is basically impossible to
> cache all combination of publications or even some common
> combinations.
>
>
> Is there any other more effective way to do the filtering?
>
> (I know that the slowness is not purely due to the publication filter,
> we also have some other things that will slow down the search. But
> this one definitely contributed quite a lot to the overall search
> time)
>
> Regards,
> Cedric
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_26856_16463644.1187011069533--

From java-user-return-29782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 13 13:20:01 2007
Return-Path: <java-user-return-29782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84045 invoked from network); 13 Aug 2007 13:20:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2007 13:20:00 -0000
Received: (qmail 13260 invoked by uid 500); 13 Aug 2007 13:19:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12773 invoked by uid 500); 13 Aug 2007 13:19:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12762 invoked by uid 99); 13 Aug 2007 13:19:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 06:19:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.189 as permitted sender)
Received: from [209.85.128.189] (HELO fk-out-0910.google.com) (209.85.128.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 13:19:46 +0000
Received: by fk-out-0910.google.com with SMTP id z23so1418696fkz
        for <java-user@lucene.apache.org>; Mon, 13 Aug 2007 06:19:24 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=rUQq9i7oOgkqo7GbHmfRIWaM35FN8RMSnwg5cQcA1LLdtjUOrCqZ4GnYfvqsVuGlKxOyiLKG2NGXvjmqcRbUPYg68hzUMnTvaW1FjmbX3vfjatuFftOE1n/VkJg7fUYl9fpSObc36XtQFbdwVnQnane9nEB/PBi6M7bQrqau/G8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=AHk0I2LcD6vD1zquuhb2r76uVYEeZ+j2cdTy63u1hEHRSD6/epAX3p9Z667tVj0qhm5DC/zdgcUChxTiwJo2FVLoKyI0tAUNUKMwM2Bwpjk7r4fDmsjvokMFrEl38+hvKfSGJWRwSSJXlROZCb4vwqtvw6LKH5L8FbYibYWjl8s=
Received: by 10.82.111.8 with SMTP id j8mr7006265buc.1187011164160;
        Mon, 13 Aug 2007 06:19:24 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Mon, 13 Aug 2007 06:19:20 -0700 (PDT)
Message-ID: <359a92830708130619s20f9925ej2fa239cf3876f583@mail.gmail.com>
Date: Mon, 13 Aug 2007 09:19:24 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Range queries in Lucene - numerical or lexicographical
In-Reply-To: <34b8543c0708122210g48aa90a9u690b94ea6beffc1f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26868_22748307.1187011164005"
References: <f36128690708111327v5750d19cnbf3a2c435936e8ba@mail.gmail.com>
	 <359a92830708121051s13ee2939v574b5eeed39b234c@mail.gmail.com>
	 <f36128690708122201w7606653ambfd80c00a928b243@mail.gmail.com>
	 <34b8543c0708122210g48aa90a9u690b94ea6beffc1f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26868_22748307.1187011164005
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Uhhhh, because I didn't write the code? You can always contribute a patch.

On 8/13/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
>
> Thanks Erick but unfortunately NumberTools works only with long primitive
> type I am wondering why you didn't put some method for double and float.
>
>
>
> On 8/13/07, Nilesh Bansal <nileshbansal@gmail.com> wrote:
> >
> > Thanks. Probably this should be mentioned on the documentation page.
> >
> > -Nilesh
> >
> > On 8/12/07, Erick Erickson <erickerickson@gmail.com> wrote:
> > > As has been discussed several times, Lucene is a string-only engine,
> and
> > > has no native understanding of numerical values. You have to normalize
> > > them for string searches. See NumberTools.
> > >
> > > Best
> > > Erick
> > >
> > > On 8/11/07, Nilesh Bansal <nileshbansal@gmail.com> wrote:
> > > >
> > > > Hi all,
> > > >
> > > > Lucene query parser synax page
> > > > (http://lucene.apache.org/java/docs/queryparsersyntax.html) provides
> > > > the following two examples of range query:
> > > > mod_date:[20020101 TO 20030101]
> > > > and
> > > > title:{Aida TO Carmen}
> > > >
> > > > Now my question is, numerically 10 is greater than 2, but in
> > > > string-only comparison 2 is greater than 10. So if I search for
> > > > field:[10 TO 30]
> > > > will a document with field=2 will be in result or not.
> > > >
> > > > And if I search for a string field,
> > > > field:[AA TO CC]
> > > > will document with field="B" will be in result or not.
> > > >
> > > > The semantics of range is not clear (numerical or lexicographical)
> > > > from the documentation.
> > > >
> > > > thanks
> > > > Nilesh
> > > >
> > > > --
> > > > Nilesh Bansal.
> > > > http://queens.db.toronto.edu/~nilesh/
> > > >
> > > >
> ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> >
> >
> > --
> > Nilesh Bansal.
> > http://queens.db.toronto.edu/~nilesh/
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Regards,
> Mohammad
> --------------------------
> see my blog: http://brainable.blogspot.com/
> another in Persian: http://fekre-motefavet.blogspot.com/
>

------=_Part_26868_22748307.1187011164005--

From java-user-return-29783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 13 13:25:10 2007
Return-Path: <java-user-return-29783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92091 invoked from network); 13 Aug 2007 13:25:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2007 13:25:08 -0000
Received: (qmail 25315 invoked by uid 500); 13 Aug 2007 13:25:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24858 invoked by uid 500); 13 Aug 2007 13:24:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24844 invoked by uid 99); 13 Aug 2007 13:24:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 06:24:59 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.188 as permitted sender)
Received: from [209.85.134.188] (HELO mu-out-0910.google.com) (209.85.134.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 13:24:55 +0000
Received: by mu-out-0910.google.com with SMTP id g7so1681516muf
        for <java-user@lucene.apache.org>; Mon, 13 Aug 2007 06:24:34 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:references;
        b=NQO76pr7waDmCCggH6KTc9yZsmAFr/Al27jGOF8MUO7E736lmvZT0wqZnhMm5R4ihOb4tRov9ZaU4FouYCa4CXzmnBYuSIUbsvzMx9aimxL+t8GFs9c/Ivu381/Pr4xrfoJhM6m/Oo8ik/VgOMIFMq7utCs0OnqduIBVyhk/O+U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:references;
        b=HElVdWDpHn4SSeO/UfkaQCvFvmnVywQKUdL5j/0M/jTVdp0ZEjppqIpEEZIXSmT3kcd5tiqJdspSoqKUe4BWAhPOdnK/ydVsOjxnAhguAxYUCDj/2G22bwT7j2ythXcKzILwNV6ghbE0RQFpWVG7RylT/8sKMYbomqDXoKZt7Y8=
Received: by 10.82.127.14 with SMTP id z14mr8159304buc.1187011474072;
        Mon, 13 Aug 2007 06:24:34 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Mon, 13 Aug 2007 06:24:34 -0700 (PDT)
Message-ID: <359a92830708130624t7e679c59kf961822d7fb84bf4@mail.gmail.com>
Date: Mon, 13 Aug 2007 09:24:34 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index file size limitation of 2GB
Cc: mrrohitsaini@gmail.com
In-Reply-To: <3cb8ef760708122230k1b3c8bb6h6785c04dabbe1f75@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26932_14752397.1187011474047"
References: <3cb8ef760708122230k1b3c8bb6h6785c04dabbe1f75@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26932_14752397.1187011474047
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

There is no *lucene* limitation of a 2GB index file. I've had no trouble
with single indexes over 8G. If you're referring to this page...
http://wiki.apache.org/lucene-java/LuceneFAQ?highlight=%282gb%29

then it's talking about an *operating system* limitation. So I wouldn't
worry about this unless your op system is a problem. What are you
running on?

Erick

On 8/13/07, rohit saini <mrrohitsaini@gmail.com> wrote:
>
> Hi all,
>
> I have bulk of data to be indexed and that may cross index file size of
> 2GB.
> As lucene faq tells that if index file size increses to 2GB there will be
> problems. but faq tells to make index subdirectory in this case. I have
> tried to do so made a index subdirectory in index main directory when
> index
> file size increses to 2GB but during search I don't get any result from
> index subdirectory. do I need to search recursively but in that case there
> will be more than "hits" object then how to combine them and return a
> single
> result to the user? Please tell me ....
>
> Thanks & Regards,
>
> Rohit
>

------=_Part_26932_14752397.1187011474047--

From java-user-return-29784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 13 14:18:35 2007
Return-Path: <java-user-return-29784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13099 invoked from network); 13 Aug 2007 14:18:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2007 14:18:34 -0000
Received: (qmail 15549 invoked by uid 500); 13 Aug 2007 14:18:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15515 invoked by uid 500); 13 Aug 2007 14:18:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15504 invoked by uid 99); 13 Aug 2007 14:18:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 07:18:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.218] (HELO web26007.mail.ukl.yahoo.com) (217.12.10.218)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 13 Aug 2007 14:18:30 +0000
Received: (qmail 73820 invoked by uid 60001); 13 Aug 2007 14:17:58 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=VFJr4IgpNwkAjO8Ueqhu5qXbeM81icV7GnxuqAJmPgSL+scn8NeOhZq/1J9tWXeR8gJMTqMnEELt3X9BGqBnSeiTnle0kjAR0yfMDfwujhMIjyuGxNkNSGJEQhEFF2IOGA6jaWbFKXvfkJXavXUC+NSQgMsPQk0p+iwVvuSzwDM=;
X-YMail-OSG: AkAOS3AVM1kMY5RYd5PdXp4AK.57wlJip_NGgbBtJKcJT33ceLC2nC7Hlil.MWIuYhMY4_LT2PF84W2CocrQpDXyfGacxTYD2rpt7rk.QbCS4mpd51w8CM9i4ys-
Received: from [193.36.230.96] by web26007.mail.ukl.yahoo.com via HTTP; Mon, 13 Aug 2007 14:17:58 GMT
X-Mailer: YahooMailRC/651.48 YahooMailWebService/0.7.119
Date: Mon, 13 Aug 2007 14:17:58 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: performance on filtering against thousands of different publications
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <244235.73314.qm@web26007.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I would presume that (like a lot of things) there is power-law at play in t=
he popularity of publication sources (i.e. a small number of popular source=
s and a lot of unpopular ones).=0AThe "Zipf" plugin in Luke can be used to =
illustrate this distribution for the values in your "publication source" fi=
eld.=0A=0AGiven this disparity, it makes sense to only cache Filters for th=
e most popular publication sources. Reading a large list of doc ids (the Te=
rmDocs) for these popular terms takes a lot of time so it makes sense to ca=
che them whereas it clearly is not valuable to use exactly the same amount =
of memory (i.e. a new Bitset(reader.maxDoc) ) to cache an unpopular term wh=
ose TermDocs can be read from disk quickly.=0AI would use BooleanFilter to =
combine the user's choices of publication source terms and use CachingWrapp=
erFilter around (popular) individual Term Filters added to the BooleanFilte=
r rather than using CachingWrapperFilter around the BooleanFilter as a whol=
e. This is because your are much more likely to get cache hits on the popul=
ar individual terms than on a user's particular selection of publication so=
urces and these cached items can be combined together in the BooleanFilter =
super fast.=0A=0AHope this makes sense=0AMark=0A=0A----- Original Message -=
---=0AFrom: Cedric Ho <cedric.ho@gmail.com>=0ATo: java-user@lucene.apache.o=
rg=0ASent: Monday, 13 August, 2007 5:17:52 AM=0ASubject: performance on fil=
tering against thousands of different publications=0A=0AHi all,=0A=0AMy pro=
blem is as follows:=0A=0AOur documents each comes from a different publicat=
ion. And we=0Acurrently have > 5000 different publication sources.=0A=0AOur=
 clients can choose arbitrarily a subset of the publications while=0Aperfor=
ming search. It is not  uncommon that a search will have to=0Amatch hundred=
s or thousands of publications.=0A=0AI currently try to index the publicati=
on information as a field in=0Aeach document. and use a TermsFilter when pe=
rforming search. However=0Athe performance is less than satisfactory. Many =
simple searches takes=0Amore than 2-3 seconds. (our goal: < 0.5seconds).=0A=
=0AUsing the CachingWrapperFilter is great for search speed. But I've=0Adon=
e some calculation and figured that it is basically impossible to=0Acache a=
ll combination of publications or even some common=0Acombinations.=0A=0A=0A=
Is there any other more effective way to do the filtering?=0A=0A(I know tha=
t the slowness is not purely due to the publication filter,=0Awe also have =
some other things that will slow down the search. But=0Athis one definitely=
 contributed quite a lot to the overall search=0Atime)=0A=0ARegards,=0ACedr=
ic=0A=0A-------------------------------------------------------------------=
--=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor =
additional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A=
=0A=0A=0A      ___________________________________________________________=
=0AYahoo! Answers - Got a question? Someone out there knows the answer. Try=
 it=0Anow.=0Ahttp://uk.answers.yahoo.com/ 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 13 18:20:53 2007
Return-Path: <java-user-return-29785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54309 invoked from network); 13 Aug 2007 18:20:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2007 18:20:51 -0000
Received: (qmail 92628 invoked by uid 500); 13 Aug 2007 18:20:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91764 invoked by uid 500); 13 Aug 2007 18:20:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91753 invoked by uid 99); 13 Aug 2007 18:20:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 11:20:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of walt.stoneburner@gmail.com designates 64.233.162.238 as permitted sender)
Received: from [64.233.162.238] (HELO nz-out-0506.google.com) (64.233.162.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 18:20:35 +0000
Received: by nz-out-0506.google.com with SMTP id i28so474152nzi
        for <java-user@lucene.apache.org>; Mon, 13 Aug 2007 11:20:14 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=jkQAjzoNIk/cMXpRHcXZnPsZyUTFq7RWD1AxLczBOw4BqiiBPD0TNJsYNJLZOqQmsKnArnyQ0LyEYlb8HUv9vd7S/qa04XC+iBW81kOPSkrudktVdweLv36LdumR1s8E8hlkSeYbVFEJUA/v8u3jnB5Zoq1VTSDBSPhAKKTOFjk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=NuaIJey3a2Sscoz6SzxKaZBF3YsOPTF+Ghc3NC0lCEPyY+RCOSlDY8czXKJ/f5yS/Vxy5L77DiafqfPtwDAcX65+Sms731jw+9PWG0V/02WiXk4XydtWmSNiXVTmjxSmYDhZUJDoRvdjhHMS/Fg1Wg+RxA0BCJ+Dsc1eul11s2w=
Received: by 10.142.234.12 with SMTP id g12mr697122wfh.1187029213037;
        Mon, 13 Aug 2007 11:20:13 -0700 (PDT)
Received: by 10.143.42.2 with HTTP; Mon, 13 Aug 2007 11:20:13 -0700 (PDT)
Message-ID: <ae6f38f60708131120j2a23e04en85a2d8576c3d580d@mail.gmail.com>
Date: Mon, 13 Aug 2007 14:20:13 -0400
From: "Walt Stoneburner" <walt.stoneburner@gmail.com>
To: java-user@lucene.apache.org
Subject: Rank based on lists.
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Here's a scenario I just ran into, though I don't know how to make
Lucene do it (or even if it can).

I have two lists; to keep things simply lets assume (A B C D E F G) and (X Y).

I want to form a query so that when matches appear from both lists,
results rank higher, than if many elements matched from just one.

That is, a document that matches a many terms of list one, such as A B
C D E F, ranks lower than a document that matches just one term from
each list, A X.

It is not the case that the second list weights more.  It's just as
equal as the first.

So, for instance, a match of X Y, all of list two, would rank less
than a match of A X, which had hits in both.


Is this even possible, or does Lucene not have facilities for lists,
sets, groups, or whatever makes sense to call them?

-Walt Stoneburner, wls@wwco.com
 http://www.wwco.com/~wls/blog/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 13 18:34:12 2007
Return-Path: <java-user-return-29786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58693 invoked from network); 13 Aug 2007 18:34:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2007 18:34:11 -0000
Received: (qmail 20153 invoked by uid 500); 13 Aug 2007 18:34:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20125 invoked by uid 500); 13 Aug 2007 18:34:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20114 invoked by uid 99); 13 Aug 2007 18:34:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 11:34:02 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 209.85.146.179 as permitted sender)
Received: from [209.85.146.179] (HELO wa-out-1112.google.com) (209.85.146.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 18:33:58 +0000
Received: by wa-out-1112.google.com with SMTP id j40so2136537wah
        for <java-user@lucene.apache.org>; Mon, 13 Aug 2007 11:33:37 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=tVs9oXMBnRq1w/E/8M6CoBS2Rf2yGJRhGGnlnvzNrVoA6Ym/eKut+ZAahYYcYjgDrXwkR9QydpLlyiupX5Cy/Xv5rxnLQl1xWFQneXBopx6o52t4Jbc9LkwQ9R4F7zH+CihBrhR8cBI7tBt0zlHrEJZr45E525M/j+GRNLA8GhM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=HmQu81xCh4XNlWbHnn9TQ9zo9NBSdpkk/NnCkZCjcYz30287jXezHlkWFKbriY0/v1KAiCuc/mN0rAcrvSzFaaONo5lTuU5zRgk9/w7u0ynaHU+NZsT0SvuL854PY8IYETf3wPtKidFAqmpXcg774u0yV2vkO2HhNG0csvrePgo=
Received: by 10.114.152.17 with SMTP id z17mr2022415wad.1187030017257;
        Mon, 13 Aug 2007 11:33:37 -0700 (PDT)
Received: by 10.115.94.16 with HTTP; Mon, 13 Aug 2007 11:33:37 -0700 (PDT)
Message-ID: <e994873a0708131133r785d5d52i87a5b1aaba6cbac7@mail.gmail.com>
Date: Mon, 13 Aug 2007 14:33:37 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user <java-user@lucene.apache.org>
Subject: SpanQuery and database join
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_188998_12322085.1187030017151"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_188998_12322085.1187030017151
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I've been experimenting with using SpanQuery to perform what is essentially
a limited type of database 'join'. Each document in the index contains 1 or
more 'rows' of meta data from another 'table'. The meta data are simple
tokens representing a column name/value pair ( e.g. color$red or
location$123).  Each row is represented by a span with a maximum token
length equal to the maximum number of meta data columns. If a column has
multiple values, they are all indexed at the same position ( e.g. color$red,
color$blue). All rows are added to a single field. The spans are 'separated'
from each other by introducing a position gap between them via '
Analyzer.getPositionIncrementGap'. This gap should be greater than the
number of columns in each span.

At query time, a SpanNearQuery is constructed to represent the meta data to
join. The 'slop' value is set to the maximum number of meta data columns
(minus 1). Using a simple Antlr parser, boolean span queries with AND, OR,
NOT can be constructed fairly easily. The SpanQuery is And'd to the main
query to build the final query.

This approach is flexible and pretty efficient because no stored fields or
external data are accessed at query time. Span queries are more expensive
compared than other queries, though. We measure performance via throughput
(as opposed to the response time for a single query), and the addition of a
SpanQuery reduced throughput by 5X for ordered spans and 10X for unordered
spans. Still, this may be acceptable for some applications, especially if
spans are not used on every query.

I thought this might interest some of you.

Peter

------=_Part_188998_12322085.1187030017151--

From java-user-return-29787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 13 18:41:14 2007
Return-Path: <java-user-return-29787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60179 invoked from network); 13 Aug 2007 18:41:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2007 18:41:12 -0000
Received: (qmail 34786 invoked by uid 500); 13 Aug 2007 18:41:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34449 invoked by uid 500); 13 Aug 2007 18:41:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34420 invoked by uid 99); 13 Aug 2007 18:41:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 11:41:04 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gresh@us.ibm.com designates 32.97.182.141 as permitted sender)
Received: from [32.97.182.141] (HELO e1.ny.us.ibm.com) (32.97.182.141)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 18:41:09 +0000
Received: from d01relay04.pok.ibm.com (d01relay04.pok.ibm.com [9.56.227.236])
	by e1.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id l7DIeah4018943
	for <java-user@lucene.apache.org>; Mon, 13 Aug 2007 14:40:36 -0400
Received: from d01av01.pok.ibm.com (d01av01.pok.ibm.com [9.56.224.215])
	by d01relay04.pok.ibm.com (8.13.8/8.13.8/NCO v8.4) with ESMTP id l7DIeaJa558066
	for <java-user@lucene.apache.org>; Mon, 13 Aug 2007 14:40:36 -0400
Received: from d01av01.pok.ibm.com (loopback [127.0.0.1])
	by d01av01.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l7DIeaMa012535
	for <java-user@lucene.apache.org>; Mon, 13 Aug 2007 14:40:36 -0400
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av01.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l7DIeas4012529
	for <java-user@lucene.apache.org>; Mon, 13 Aug 2007 14:40:36 -0400
In-Reply-To: <Pine.LNX.4.58.0708112032070.23693@hal.rescomp.berkeley.edu>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Re: How to implement cut of score ?
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OF6D027BCD.4FE2A386-ON85257336.00659D6B-85257336.00669759@us.ibm.com>
Date: Mon, 13 Aug 2007 14:40:37 -0400
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Release 8.0|August 02, 2007) at 08/13/2007
 14:40:35,
	Serialize complete at 08/13/2007 14:40:35
Content-Type: multipart/alternative; boundary="=_alternative 006696D685257336_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 006696D685257336_=
Content-Type: text/plain; charset="US-ASCII"

Hoss wrote:
this would be meaningless even if it were easier...

http://wiki.apache.org/lucene-java/LuceneFAQ#head-912c1f237bb00259185353182948e5935f0c2f03

FAQ: "Can I filter by score?"


-Hoss

I've read the warnings referenced there; but still have a problem to 
solve. We have "fact-based" information about
people and the jobs they might fill (availability dates, experience level, 
languages spoken, etc.) and we have textual
information about both the jobs and the people (e.g. resumes). We'd like 
to use the "goodness of match" of the
textual description of the job to the person's resume as a way to suggest, 
for example, additional people who
should be considered for the job, even if, say, their specific job title 
does not match the requested job title.

I can use the job description to construct a query (and I've done it in a 
variety of ways), but how best to choose which
of the returned people to allow to "fit" the job? An obviously desirable 
way to do it is using the score, but all discussion
seems to say "don't do that, since absolute score isn't meaningful" (and I 
don't use the normalized score, BTW, I use the
raw score, but the same caveats apply). Certainly the relative scores for 
a single query can be used to rank the goodness
of fit to that particular job, but that doesn't solve the problem in 
general. 

Should I just give up and return the "25 best" fits to the job, and only 
use score to rank them relative to one another? This
then means that a job description that has very few words that match 
*anything* in the collection of resumes will still
produce 25 people that "match". In practice (anecdotally) it does appear 
to me that when the highest score for a 
particular job description is fairly small (say 0.10) that there's a good 
reason for that, and when the highest score is 
something like 0.60, there's a good reason for that as well. That is, 
queries that yield a small "best score" are queries
for which I would not expect good matches, and vice versa. So it does seem 
(again anecdotally) that the score has
*some* relevance. What are the experts' thoughts on this?



Donna L. Gresh
Services Research, Mathematical Sciences Department
IBM T.J. Watson Research Center
(914) 945-2472
http://www.research.ibm.com/people/g/donnagresh
gresh@us.ibm.com

--=_alternative 006696D685257336_=--

From java-user-return-29788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 13 19:10:39 2007
Return-Path: <java-user-return-29788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69485 invoked from network); 13 Aug 2007 19:10:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2007 19:10:39 -0000
Received: (qmail 9570 invoked by uid 500); 13 Aug 2007 19:10:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9328 invoked by uid 500); 13 Aug 2007 19:10:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9317 invoked by uid 99); 13 Aug 2007 19:10:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 12:10:31 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.187 as permitted sender)
Received: from [209.85.128.187] (HELO fk-out-0910.google.com) (209.85.128.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 19:10:19 +0000
Received: by fk-out-0910.google.com with SMTP id z23so1487470fkz
        for <java-user@lucene.apache.org>; Mon, 13 Aug 2007 12:09:56 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pnYw8qOHOXGN4z//t94+Y3c11C8NSi99PxvbP1uRq+a1Kh3j5iF1V5Ze9FcpDtDfI6tzguDmmh4jknQXq/+juaiVdUZfckVWIAxe9HQywJQ5qTZtjYG6xRsF2QBQI2erhWS/rSjKzfriYpoa3t5VJVHg3r0xtb+lWIclvPTs6rY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OV+d+u6zKc2HmYrqul56ecK1Ln9eMhmzKF37FXH5sbiKXopUyvoUlFL7SJRvIb1RLw9zOImIyXN1Vw52zIrAPc0KPX7Jcmf8q1iSQORiC9g3mB9a1J6njGIVwznt83Pr5UhUfvaIfoU9hMrQDHTfRbwh/rhrM2IzFnSdoO95l68=
Received: by 10.82.100.1 with SMTP id x1mr7642020bub.1187032195920;
        Mon, 13 Aug 2007 12:09:55 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Mon, 13 Aug 2007 12:09:55 -0700 (PDT)
Message-ID: <359a92830708131209p62e9988bw9416d9af0fcf2711@mail.gmail.com>
Date: Mon, 13 Aug 2007 15:09:55 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: SpanQuery and database join
In-Reply-To: <e994873a0708131133r785d5d52i87a5b1aaba6cbac7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30050_5942179.1187032195883"
References: <e994873a0708131133r785d5d52i87a5b1aaba6cbac7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30050_5942179.1187032195883
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks for writing this up. Do you think this is an appropriate subject
for the Wiki performance page?

Erick

On 8/13/07, Peter Keegan <peterlkeegan@gmail.com> wrote:
>
> I've been experimenting with using SpanQuery to perform what is
> essentially
> a limited type of database 'join'. Each document in the index contains 1
> or
> more 'rows' of meta data from another 'table'. The meta data are simple
> tokens representing a column name/value pair ( e.g. color$red or
> location$123).  Each row is represented by a span with a maximum token
> length equal to the maximum number of meta data columns. If a column has
> multiple values, they are all indexed at the same position ( e.g.
> color$red,
> color$blue). All rows are added to a single field. The spans are
> 'separated'
> from each other by introducing a position gap between them via '
> Analyzer.getPositionIncrementGap'. This gap should be greater than the
> number of columns in each span.
>
> At query time, a SpanNearQuery is constructed to represent the meta data
> to
> join. The 'slop' value is set to the maximum number of meta data columns
> (minus 1). Using a simple Antlr parser, boolean span queries with AND, OR,
> NOT can be constructed fairly easily. The SpanQuery is And'd to the main
> query to build the final query.
>
> This approach is flexible and pretty efficient because no stored fields or
> external data are accessed at query time. Span queries are more expensive
> compared than other queries, though. We measure performance via throughput
> (as opposed to the response time for a single query), and the addition of
> a
> SpanQuery reduced throughput by 5X for ordered spans and 10X for unordered
> spans. Still, this may be acceptable for some applications, especially if
> spans are not used on every query.
>
> I thought this might interest some of you.
>
> Peter
>

------=_Part_30050_5942179.1187032195883--

From java-user-return-29789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 13 19:27:33 2007
Return-Path: <java-user-return-29789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80773 invoked from network); 13 Aug 2007 19:27:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2007 19:27:31 -0000
Received: (qmail 31437 invoked by uid 500); 13 Aug 2007 19:27:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31175 invoked by uid 500); 13 Aug 2007 19:27:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31164 invoked by uid 99); 13 Aug 2007 19:27:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 12:27:23 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 19:27:19 +0000
Received: by wa-out-1112.google.com with SMTP id j40so2149931wah
        for <java-user@lucene.apache.org>; Mon, 13 Aug 2007 12:26:59 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=l99c7KHBscnbVyAXnWl12uWPYom9bNvzj1PCPxtyS+zqVyFT8u1z0mKNth091Td2AgsCSnznHt7pr0Kja4IcNckYWw479zWJmN2sjbSm7cQMTVH+bM1bSl0345/kZI3UWwM3pybfsgKRnqmG7CHLoaMh5moJng85m2NMOAvl4wA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=T3DcIWZfb2CO1Q1zm0QFkxhaN6Ujg2cjTTebpbE2pgB53UsThyWOCWdb/Sw+LBOu3id5XVtELqwICTyK0/n33FV4r9nuc6HQS74qQR/7m6d0pvq6mzFS3vJ/HqNBOJ8qYCb3IvRqz8PCbhvZVGtRrT/yuxBHcrxGCl5iH+aqQR8=
Received: by 10.114.199.1 with SMTP id w1mr3999018waf.1187033218906;
        Mon, 13 Aug 2007 12:26:58 -0700 (PDT)
Received: by 10.115.94.16 with HTTP; Mon, 13 Aug 2007 12:26:58 -0700 (PDT)
Message-ID: <e994873a0708131226w4f13b182jade375839da4d353@mail.gmail.com>
Date: Mon, 13 Aug 2007 15:26:58 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: SpanQuery and database join
In-Reply-To: <359a92830708131209p62e9988bw9416d9af0fcf2711@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_189971_26262805.1187033218638"
References: <e994873a0708131133r785d5d52i87a5b1aaba6cbac7@mail.gmail.com>
	 <359a92830708131209p62e9988bw9416d9af0fcf2711@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_189971_26262805.1187033218638
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I suppose it could go under performance or HowTo/Interesting uses of
SpanQuery.

Peter

On 8/13/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Thanks for writing this up. Do you think this is an appropriate subject
> for the Wiki performance page?
>
> Erick
>
> On 8/13/07, Peter Keegan <peterlkeegan@gmail.com> wrote:
> >
> > I've been experimenting with using SpanQuery to perform what is
> > essentially
> > a limited type of database 'join'. Each document in the index contains 1
> > or
> > more 'rows' of meta data from another 'table'. The meta data are simple
> > tokens representing a column name/value pair ( e.g. color$red or
> > location$123).  Each row is represented by a span with a maximum token
> > length equal to the maximum number of meta data columns. If a column has
> > multiple values, they are all indexed at the same position ( e.g.
> > color$red,
> > color$blue). All rows are added to a single field. The spans are
> > 'separated'
> > from each other by introducing a position gap between them via '
> > Analyzer.getPositionIncrementGap'. This gap should be greater than the
> > number of columns in each span.
> >
> > At query time, a SpanNearQuery is constructed to represent the meta data
> > to
> > join. The 'slop' value is set to the maximum number of meta data columns
> > (minus 1). Using a simple Antlr parser, boolean span queries with AND,
> OR,
> > NOT can be constructed fairly easily. The SpanQuery is And'd to the main
> > query to build the final query.
> >
> > This approach is flexible and pretty efficient because no stored fields
> or
> > external data are accessed at query time. Span queries are more
> expensive
> > compared than other queries, though. We measure performance via
> throughput
> > (as opposed to the response time for a single query), and the addition
> of
> > a
> > SpanQuery reduced throughput by 5X for ordered spans and 10X for
> unordered
> > spans. Still, this may be acceptable for some applications, especially
> if
> > spans are not used on every query.
> >
> > I thought this might interest some of you.
> >
> > Peter
> >
>

------=_Part_189971_26262805.1187033218638--

From java-user-return-29790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 13 19:44:24 2007
Return-Path: <java-user-return-29790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92047 invoked from network); 13 Aug 2007 19:44:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2007 19:44:23 -0000
Received: (qmail 52003 invoked by uid 500); 13 Aug 2007 19:44:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51972 invoked by uid 500); 13 Aug 2007 19:44:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51961 invoked by uid 99); 13 Aug 2007 19:44:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 12:44:15 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [69.147.102.68] (HELO smtp105.plus.mail.re1.yahoo.com) (69.147.102.68)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 13 Aug 2007 19:44:10 +0000
Received: (qmail 33439 invoked from network); 13 Aug 2007 19:43:47 -0000
Received: from unknown (HELO ?192.168.1.101?) (nhira@cognocys.com@75.168.19.27 with plain)
  by smtp105.plus.mail.re1.yahoo.com with SMTP; 13 Aug 2007 19:43:47 -0000
X-YMail-OSG: 1EtYsssVM1lNcWM_y9oYcociHhJfPkkq6dP_dBwIcwu2C_s32NqYDl_Sd3TEhaFBo8NWoFdmxxjp8EbYhAzDc8gHYw2mg3CoKIz5Jyhh1Cskc0G2SZRNif1XuKDw
Subject: Re: How to implement cut of score ?
From: "N. Hira" <nhira@cognocys.com>
Reply-To: nhira@cognocys.com
To: java-user@lucene.apache.org
In-Reply-To: <OF6D027BCD.4FE2A386-ON85257336.00659D6B-85257336.00669759@us.ibm.com>
References:
	 <OF6D027BCD.4FE2A386-ON85257336.00659D6B-85257336.00669759@us.ibm.com>
Content-Type: text/plain
Organization: Cognocys, Inc.
Date: Mon, 13 Aug 2007 14:43:45 -0500
Message-Id: <1187034225.3954.83.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.8.3 (2.8.3-2.fc6) 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Donna,

If I understand the problem correctly, it is:  given a [job
description], find [candidates] that we would not otherwise find.  That
seems to be a "user-weighted similarity" problem more than a simple
search problem.

IOW:
1.  Given a [job description], create a set of queries that look for
"the most important terms" that match these specific terms, or synonyms.
2.  Use these queries to create a UNION SET of Documents.
3.  Show "the most relevant" documents.

The way I see it, Lucene only helps with 2. above.  For 3., using score
would result in "documents that match", but not "better candidates".
For example, when I'm trying to fill a Junior Java programmer position
and looking for someone with 2-years of Java experience, whether someone
with 15-years of Java experience is a "good fit" is subjective.

If I was had to get this done quickly, one approach is to simply cluster
the documents found at 2. using Carrot2.  This would allow the user to
explore the "fuzzy" results.  Better than nothing, but not really the
right solution.

Another approach would be to parse the resumes to tabulate attributes
like:
1.  overall experience
2.  skills mentioned
3.  experience with a particular skill
4.  ...

Then, you could use this information to evaluate similarity with respect
to the hard criteria and, for example, inform that ranking with tf-idfs
for the skills that are being sought.

Good luck!

-h
----------------------------------------------------------------------------
Hira, N.R.
Solutions Architect
Cognocys, Inc.

On Mon, 2007-08-13 at 14:40 -0400, Donna L Gresh wrote:
> Hoss wrote:
> this would be meaningless even if it were easier...
> 
> http://wiki.apache.org/lucene-java/LuceneFAQ#head-912c1f237bb00259185353182948e5935f0c2f03
> 
> FAQ: "Can I filter by score?"
> 
> 
> -Hoss
> 
> I've read the warnings referenced there; but still have a problem to 
> solve. We have "fact-based" information about
> people and the jobs they might fill (availability dates, experience level, 
> languages spoken, etc.) and we have textual
> information about both the jobs and the people (e.g. resumes). We'd like 
> to use the "goodness of match" of the
> textual description of the job to the person's resume as a way to suggest, 
> for example, additional people who
> should be considered for the job, even if, say, their specific job title 
> does not match the requested job title.
> 
> I can use the job description to construct a query (and I've done it in a 
> variety of ways), but how best to choose which
> of the returned people to allow to "fit" the job? An obviously desirable 
> way to do it is using the score, but all discussion
> seems to say "don't do that, since absolute score isn't meaningful" (and I 
> don't use the normalized score, BTW, I use the
> raw score, but the same caveats apply). Certainly the relative scores for 
> a single query can be used to rank the goodness
> of fit to that particular job, but that doesn't solve the problem in 
> general. 
> 
> Should I just give up and return the "25 best" fits to the job, and only 
> use score to rank them relative to one another? This
> then means that a job description that has very few words that match 
> *anything* in the collection of resumes will still
> produce 25 people that "match". In practice (anecdotally) it does appear 
> to me that when the highest score for a 
> particular job description is fairly small (say 0.10) that there's a good 
> reason for that, and when the highest score is 
> something like 0.60, there's a good reason for that as well. That is, 
> queries that yield a small "best score" are queries
> for which I would not expect good matches, and vice versa. So it does seem 
> (again anecdotally) that the score has
> *some* relevance. What are the experts' thoughts on this?
> 
> 
> 
> Donna L. Gresh
> Services Research, Mathematical Sciences Department
> IBM T.J. Watson Research Center
> (914) 945-2472
> http://www.research.ibm.com/people/g/donnagresh
> gresh@us.ibm.com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 13 20:17:33 2007
Return-Path: <java-user-return-29791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10481 invoked from network); 13 Aug 2007 20:17:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2007 20:17:31 -0000
Received: (qmail 97009 invoked by uid 500); 13 Aug 2007 20:17:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96980 invoked by uid 500); 13 Aug 2007 20:17:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96969 invoked by uid 99); 13 Aug 2007 20:17:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 13:17:23 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a14.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 20:17:16 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a14.g.dreamhost.com (Postfix) with ESMTP id E72B7190E26
	for <java-user@lucene.apache.org>; Mon, 13 Aug 2007 13:16:54 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <e994873a0708131226w4f13b182jade375839da4d353@mail.gmail.com>
References: <e994873a0708131133r785d5d52i87a5b1aaba6cbac7@mail.gmail.com> <359a92830708131209p62e9988bw9416d9af0fcf2711@mail.gmail.com> <e994873a0708131226w4f13b182jade375839da4d353@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <25254169-18CF-4334-8C32-62BEA10C2770@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: SpanQuery and database join
Date: Mon, 13 Aug 2007 16:16:41 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

There is also a Use Cases item on the Wiki...

On Aug 13, 2007, at 3:26 PM, Peter Keegan wrote:

> I suppose it could go under performance or HowTo/Interesting uses of
> SpanQuery.
>
> Peter
>
> On 8/13/07, Erick Erickson <erickerickson@gmail.com> wrote:
>>
>> Thanks for writing this up. Do you think this is an appropriate  
>> subject
>> for the Wiki performance page?
>>
>> Erick
>>
>> On 8/13/07, Peter Keegan <peterlkeegan@gmail.com> wrote:
>>>
>>> I've been experimenting with using SpanQuery to perform what is
>>> essentially
>>> a limited type of database 'join'. Each document in the index  
>>> contains 1
>>> or
>>> more 'rows' of meta data from another 'table'. The meta data are  
>>> simple
>>> tokens representing a column name/value pair ( e.g. color$red or
>>> location$123).  Each row is represented by a span with a maximum  
>>> token
>>> length equal to the maximum number of meta data columns. If a  
>>> column has
>>> multiple values, they are all indexed at the same position ( e.g.
>>> color$red,
>>> color$blue). All rows are added to a single field. The spans are
>>> 'separated'
>>> from each other by introducing a position gap between them via '
>>> Analyzer.getPositionIncrementGap'. This gap should be greater  
>>> than the
>>> number of columns in each span.
>>>
>>> At query time, a SpanNearQuery is constructed to represent the  
>>> meta data
>>> to
>>> join. The 'slop' value is set to the maximum number of meta data  
>>> columns
>>> (minus 1). Using a simple Antlr parser, boolean span queries with  
>>> AND,
>> OR,
>>> NOT can be constructed fairly easily. The SpanQuery is And'd to  
>>> the main
>>> query to build the final query.
>>>
>>> This approach is flexible and pretty efficient because no stored  
>>> fields
>> or
>>> external data are accessed at query time. Span queries are more
>> expensive
>>> compared than other queries, though. We measure performance via
>> throughput
>>> (as opposed to the response time for a single query), and the  
>>> addition
>> of
>>> a
>>> SpanQuery reduced throughput by 5X for ordered spans and 10X for
>> unordered
>>> spans. Still, this may be acceptable for some applications,  
>>> especially
>> if
>>> spans are not used on every query.
>>>
>>> I thought this might interest some of you.
>>>
>>> Peter
>>>
>>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 13 22:17:46 2007
Return-Path: <java-user-return-29792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64041 invoked from network); 13 Aug 2007 22:17:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2007 22:17:42 -0000
Received: (qmail 36228 invoked by uid 500); 13 Aug 2007 22:17:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36187 invoked by uid 500); 13 Aug 2007 22:17:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36176 invoked by uid 99); 13 Aug 2007 22:17:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 15:17:34 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of luz290@gmail.com designates 209.85.132.244 as permitted sender)
Received: from [209.85.132.244] (HELO an-out-0708.google.com) (209.85.132.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 22:17:32 +0000
Received: by an-out-0708.google.com with SMTP id c5so282911anc
        for <java-user@lucene.apache.org>; Mon, 13 Aug 2007 15:17:11 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IGj19QwP3wbb1gx5pGJNxlY+uUSOk3hxVq7blZ2SYVdWl3xuITKJpsmyyEPW+CAu9EMMarwcXyyVppjr6GQdZPvOLgFfLSe3xYGepRPSiG4VeFvpcTBsh9Ef+fa+iac1FPUXLtoBbemgggQvpO1IU8IyYvsgBXQGnvBUyVTh8WM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=l+Pof5+c+Jg/s2oD+QkdS6XUcUcEz9JNwGOu6GpN+a+1J5EtRLRLywb3G5OU/def3HiFsaYKn/7ihkcq77XP9nZO29uRzt5/elAZ5z6qQqf1rU1t2TXkN3FsENQum4nCzDijZYnxWwM4qhasaHhUU2VEUeDRi/8173OgI46FEsA=
Received: by 10.100.174.16 with SMTP id w16mr254045ane.1187043431142;
        Mon, 13 Aug 2007 15:17:11 -0700 (PDT)
Received: by 10.100.33.20 with HTTP; Mon, 13 Aug 2007 15:17:11 -0700 (PDT)
Message-ID: <cec089090708131517v9956d3m91c7bd31fbe89cbf@mail.gmail.com>
Date: Mon, 13 Aug 2007 18:17:11 -0400
From: "lucene user" <luz290@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Amount of RAM needed to support a growing lucene index?
In-Reply-To: <660294A7-84DF-4E1D-BFC6-C4E4CB659515@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_51107_21113336.1187043431064"
References: <cec089090708120003j48c2e253yca5a814e86f5b8ad@mail.gmail.com>
	 <F2EB50D7-0F87-47A2-8A7A-6C4CD282DB4E@gmail.com>
	 <cec089090708120501y407c49dci87265f0a9b8149b8@mail.gmail.com>
	 <660294A7-84DF-4E1D-BFC6-C4E4CB659515@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_51107_21113336.1187043431064
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

That is wonderful to hear. (I love that I am not stressing the technology
near its limits.)

What if my concern is more in terms of having a large number of requests per
second? When should I start to be worried and start thinking about more than
low end hardware?

Thanks!

On 8/12/07, karl wettin <karl.wettin@gmail.com> wrote:
>
>
> 12 aug 2007 kl. 14.01 skrev lucene user:
>
> > Do you know if 290k articles and 234 million words is a large
> > lucene index
> > or a medium one? Do people build them this big all the time?
>
> If the calculator in my head works you have 300k documents at 4k text
> each.
>
> I say your corpus is borderline small.
>
>
> --
> karl
>
> > Thanks!
> >
> > On 8/12/07, karl wettin <karl.wettin@gmail.com> wrote:
> >>
> >>
> >> 12 aug 2007 kl. 09.03 skrev lucene user:
> >>
> >>> If I have an index with 111k articles and 90 million words indexed,
> >>> how much
> >>> RAM should I have to get really fast access speeds?
> >>>
> >>> If I have an index with 290k articles and 234 million words
> >>> indexed, how
> >>> much RAM should I have to get really fast access speeds?
> >>
> >> Define really fast.
> >>
> >> I say you need 1.3x as much RAM as the size of your FSDirectory to
> >> ensure that the file system cache is never flushed out. But it also
> >> depends on user load. Each thread consumes RAM and CPU.
> >>
> >> In order to really find out, setup the benchmarker to run on your
> >> index, and limit the amount of memory your file system chache and JVM
> >> is allowed.
> >>
> >>> Any other advice about sizing a server?
> >>> What other info do you need to have to help size the server?
> >>
> >> Sizing?
> >>
> >>> Does it matter if the server has a 64 bit processor?
> >>
> >> In a 64 bit environment a reference to an instance consumes twice as
> >> much RAM as in a 32 bit environment. It should not affect a file
> >> centric Lucene store (Directory), Your OS and your application that
> >> use Lucene might be consuming some more resources though. Again,
> >> benchmark.
> >>
> >>> Speed of processor important?
> >>
> >> Yes.
> >>
> >>> Speed of disks?
> >>
> >> May or may not be intersting depending on how much RAM you have.
> >>
> >>
> >>
> >> --
> >> karl
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_51107_21113336.1187043431064--

From java-user-return-29793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 13 22:23:00 2007
Return-Path: <java-user-return-29793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65462 invoked from network); 13 Aug 2007 22:22:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2007 22:22:59 -0000
Received: (qmail 47551 invoked by uid 500); 13 Aug 2007 22:22:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47222 invoked by uid 500); 13 Aug 2007 22:22:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47210 invoked by uid 99); 13 Aug 2007 22:22:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 15:22:50 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.196.101.55] (HELO web59314.mail.re1.yahoo.com) (66.196.101.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 13 Aug 2007 22:22:48 +0000
Received: (qmail 4940 invoked by uid 60001); 13 Aug 2007 22:22:26 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=l7B2pSt/0DlHs8X4aywoE3Oi2jewObDnUaspgNs1EYcSEvoiWguMQeu2CxsckyuvhcFAUnuNz6luByb7L1G0gIgTzPFm37F/r+fVzc8rd8hXQokm5xWZirHPoCHSVthVkt7+08VFgl/IB6zi5uh3qLhkFXp1EvtP69AKzwXfubA=;
X-YMail-OSG: d13suOUVM1kOqPyzUugZ9D4G7SkxDFeSpKJSH.sNfSshR05vOf.uwRk2n8vgaNEAG55A7ZIy9pvCHJcyojVqaP8bq5kTDScU11H.
Received: from [64.81.54.56] by web59314.mail.re1.yahoo.com via HTTP; Mon, 13 Aug 2007 15:22:26 PDT
X-Mailer: YahooMailRC/651.48 YahooMailWebService/0.7.119
Date: Mon, 13 Aug 2007 15:22:26 -0700 (PDT)
From: Kai_testing Middleton <kai_testing@yahoo.com>
Subject: Re: Amount of RAM needed to support a growing lucene index?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1234979093-1187043746=:4673"
Message-ID: <513362.4673.qm@web59314.mail.re1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1234979093-1187043746=:4673
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

I don't think that's all that large, though I have only been working with L=
ucene for a short while.  I have two corpuses with 445834 documents (3.43M =
terms) and 132217 documents (1.6M terms).  I don't have trouble querying ei=
ther of these with Luke.=0A=0A----- Original Message ----=0AFrom: lucene us=
er <luz290@gmail.com>=0ATo: java-user@lucene.apache.org=0ASent: Sunday, Aug=
ust 12, 2007 5:01:28 AM=0ASubject: Re: Amount of RAM needed to support a gr=
owing lucene index?=0A=0AThanks, Karl.=0A=0ADo you know if 290k articles an=
d 234 million words is a large lucene index=0Aor a medium one? Do people bu=
ild them this big all the time?=0A=0AThanks!=0A=0AOn 8/12/07, karl wettin <=
karl.wettin@gmail.com> wrote:=0A>=0A>=0A> 12 aug 2007 kl. 09.03 skrev lucen=
e user:=0A>=0A> > If I have an index with 111k articles and 90 million word=
s indexed,=0A> > how much=0A> > RAM should I have to get really fast access=
 speeds?=0A> >=0A> > If I have an index with 290k articles and 234 million =
words=0A> > indexed, how=0A> > much RAM should I have to get really fast ac=
cess speeds?=0A>=0A> Define really fast.=0A>=0A> I say you need 1.3x as muc=
h RAM as the size of your FSDirectory to=0A> ensure that the file system ca=
che is never flushed out. But it also=0A> depends on user load. Each thread=
 consumes RAM and CPU.=0A>=0A> In order to really find out, setup the bench=
marker to run on your=0A> index, and limit the amount of memory your file s=
ystem chache and JVM=0A> is allowed.=0A>=0A> > Any other advice about sizin=
g a server?=0A> > What other info do you need to have to help size the serv=
er?=0A>=0A> Sizing?=0A>=0A> > Does it matter if the server has a 64 bit pro=
cessor?=0A>=0A> In a 64 bit environment a reference to an instance consumes=
 twice as=0A> much RAM as in a 32 bit environment. It should not affect a f=
ile=0A> centric Lucene store (Directory), Your OS and your application that=
=0A> use Lucene might be consuming some more resources though. Again,=0A> b=
enchmark.=0A>=0A> > Speed of processor important?=0A>=0A> Yes.=0A>=0A> > Sp=
eed of disks?=0A>=0A> May or may not be intersting depending on how much RA=
M you have.=0A>=0A>=0A>=0A> --=0A> karl=0A>=0A>=0A> -----------------------=
----------------------------------------------=0A> To unsubscribe, e-mail: =
java-user-unsubscribe@lucene.apache.org=0A> For additional commands, e-mail=
: java-user-help@lucene.apache.org=0A>=0A>=0A=0A=0A=0A=0A=0A=0A=0A       =
=0A________________________________________________________________________=
____________=0ABe a better Heartthrob. Get better relationship answers from=
 someone who knows. Yahoo! Answers - Check it out. =0Ahttp://answers.yahoo.=
com/dir/?link=3Dlist&sid=3D396545433
--0-1234979093-1187043746=:4673--

From java-user-return-29794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 13 22:33:06 2007
Return-Path: <java-user-return-29794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68281 invoked from network); 13 Aug 2007 22:33:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2007 22:33:05 -0000
Received: (qmail 58813 invoked by uid 500); 13 Aug 2007 22:32:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58775 invoked by uid 500); 13 Aug 2007 22:32:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58764 invoked by uid 99); 13 Aug 2007 22:32:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 15:32:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 22:32:53 +0000
Received: by nf-out-0910.google.com with SMTP id d3so598048nfc
        for <java-user@lucene.apache.org>; Mon, 13 Aug 2007 15:32:32 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=nR9gwKb440Um4wffpIoQtO1TN/QlbxYtWcRb+VwvREKJ7kfWonfWL6Yt9GlzG+HeLN88b06pg19xSkab2sLE6e4CPpidMS1b5O14Czmr03n0OyLX3dldTVDRnj3kwQvpUXE4pwVkmHu0YXtwLXAwr8Fader/qJMdUkz5jnsAe28=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=R9lp8HPYaSMOg1b80k2CzYwNRKOMJD9g+WBK8pjv7O3sKmjPYTSmmWE8abICykkE26+2cA8pW1u0Vm0KdQFOygeVoYxi+3sDXjGEJ9/jqJTU/BKhOmcBan9jTLFMxCtfNNKkBrUKRBzOfJYdc81dGyyerkv+wnbknyq4M1TIIhU=
Received: by 10.86.4.2 with SMTP id 2mr5010923fgd.1187044352244;
        Mon, 13 Aug 2007 15:32:32 -0700 (PDT)
Received: from ?192.168.2.101? ( [83.249.118.113])
        by mx.google.com with ESMTPS id v23sm1326943fkd.2007.08.13.15.32.30
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 13 Aug 2007 15:32:31 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <cec089090708131517v9956d3m91c7bd31fbe89cbf@mail.gmail.com>
References: <cec089090708120003j48c2e253yca5a814e86f5b8ad@mail.gmail.com> <F2EB50D7-0F87-47A2-8A7A-6C4CD282DB4E@gmail.com> <cec089090708120501y407c49dci87265f0a9b8149b8@mail.gmail.com> <660294A7-84DF-4E1D-BFC6-C4E4CB659515@gmail.com> <cec089090708131517v9956d3m91c7bd31fbe89cbf@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <511CBBBA-1BE0-47E9-BB3A-C3A4F6FE7207@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Amount of RAM needed to support a growing lucene index?
Date: Tue, 14 Aug 2007 00:27:36 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


14 aug 2007 kl. 00.17 skrev lucene user:

> What if my concern is more in terms of having a large number of  
> requests per
> second? When should I start to be worried and start thinking about  
> more than
> low end hardware?

I have served one request every 10th millisecond, 24/7 on a single  
machine
with a corpus similar to yours using Lucene, Solaris, dual core and  
8GB RAM.

If you follow the recommendations available on the Wiki you do not  
need to
worry about Lucene. You might need to consider tweaking your JVM with  
some
memory related parameters though. Heap per thread, et c.

http://wiki.apache.org/lucene-java/BasicsOfPerformance


-- 
karl

>
> Thanks!
>
> On 8/12/07, karl wettin <karl.wettin@gmail.com> wrote:
>>
>>
>> 12 aug 2007 kl. 14.01 skrev lucene user:
>>
>>> Do you know if 290k articles and 234 million words is a large
>>> lucene index
>>> or a medium one? Do people build them this big all the time?
>>
>> If the calculator in my head works you have 300k documents at 4k text
>> each.
>>
>> I say your corpus is borderline small.
>>
>>
>> --
>> karl
>>
>>> Thanks!
>>>
>>> On 8/12/07, karl wettin <karl.wettin@gmail.com> wrote:
>>>>
>>>>
>>>> 12 aug 2007 kl. 09.03 skrev lucene user:
>>>>
>>>>> If I have an index with 111k articles and 90 million words  
>>>>> indexed,
>>>>> how much
>>>>> RAM should I have to get really fast access speeds?
>>>>>
>>>>> If I have an index with 290k articles and 234 million words
>>>>> indexed, how
>>>>> much RAM should I have to get really fast access speeds?
>>>>
>>>> Define really fast.
>>>>
>>>> I say you need 1.3x as much RAM as the size of your FSDirectory to
>>>> ensure that the file system cache is never flushed out. But it also
>>>> depends on user load. Each thread consumes RAM and CPU.
>>>>
>>>> In order to really find out, setup the benchmarker to run on your
>>>> index, and limit the amount of memory your file system chache  
>>>> and JVM
>>>> is allowed.
>>>>
>>>>> Any other advice about sizing a server?
>>>>> What other info do you need to have to help size the server?
>>>>
>>>> Sizing?
>>>>
>>>>> Does it matter if the server has a 64 bit processor?
>>>>
>>>> In a 64 bit environment a reference to an instance consumes  
>>>> twice as
>>>> much RAM as in a 32 bit environment. It should not affect a file
>>>> centric Lucene store (Directory), Your OS and your application that
>>>> use Lucene might be consuming some more resources though. Again,
>>>> benchmark.
>>>>
>>>>> Speed of processor important?
>>>>
>>>> Yes.
>>>>
>>>>> Speed of disks?
>>>>
>>>> May or may not be intersting depending on how much RAM you have.
>>>>
>>>>
>>>>
>>>> --
>>>> karl
>>>>
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 13 23:35:05 2007
Return-Path: <java-user-return-29795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96872 invoked from network); 13 Aug 2007 23:35:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Aug 2007 23:35:04 -0000
Received: (qmail 17246 invoked by uid 500); 13 Aug 2007 23:34:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17215 invoked by uid 500); 13 Aug 2007 23:34:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17204 invoked by uid 99); 13 Aug 2007 23:34:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 16:34:55 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 23:35:04 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IKjQc-0000rv-WA
	for java-user@lucene.apache.org; Mon, 13 Aug 2007 16:34:30 -0700
Message-ID: <12136012.post@talk.nabble.com>
Date: Mon, 13 Aug 2007 16:34:30 -0700 (PDT)
From: "Srinivas.N." <nsp1974@yahoo.com>
To: java-user@lucene.apache.org
Subject: Question on custom scoring
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: nsp1974@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


A few questions on custom score queries:

[1] I need to rank matches by some combination of keyword match, popularity
and recency of the doc. I read the docs about CustomScoreQuery and seems to
be a resonable fit. An alternate way of achieving my goals is  to use a
custom sort. What are the trade-offs between these two approaches?

[2] I implemented the CustomScoreQuery using FieldScoreQuery, but the scores
I get from FieldScoreQuery dont match what I stored in the index. Here is
roughly what my code looks like:

/** At indexing time **/
int popularity = ...;
doc.add(new Field("popularity", Integer.toString(popularity),
Field.Store.YES, Field.Index.UN_TOKENIZED));

int creationTime = ...; // say this is the number of hours since a standard
start time
doc.add(new Field("creationTime", Integer.toString(creationTime),
Field.Store.YES, Field.Index.UN_TOKENIZED));

/** At query time **/
FieldScoreQuery fsQuery = new FieldScoreQuery("popularity",
FieldScoreQuery.Type.INT);
		
CustomScoreQuery cq = new CustomScoreQuery(baseQuery, fsQuery) {
	 public float customScore(int doc, float subQueryScore, float valSrcScore)
{
	        System.out.println("base score =  " + subQueryScore + " valSrcScore
= " + valSrcScore);
                  
		 return (subQueryScore + valSrcScore) / 2;
	 }

Questions:
[a] I was expecting the valSrcScore in the print statement to return the
value I stored in the popularity field in the index. Instead, I get a
different value each time based on the query. And I dont know how to
interpret the value that is returned. Am I doing something strange?

[b] The subQueryScore that is returned in the customScore() API doesnt seem
to be normalized. This makes it difficult for me to weight the different
scores properly. Is there an easy way to get the normalized "text index"
score in customScore() API so I can easaily weigh in the other factors
relative to it?

Thanks a lot in advance,
Srinivas


	
-- 
View this message in context: http://www.nabble.com/Question-on-custom-scoring-tf4264305.html#a12136012
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 14 01:57:08 2007
Return-Path: <java-user-return-29796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51901 invoked from network); 14 Aug 2007 01:57:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2007 01:57:06 -0000
Received: (qmail 31216 invoked by uid 500); 14 Aug 2007 01:56:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31176 invoked by uid 500); 14 Aug 2007 01:56:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31165 invoked by uid 99); 14 Aug 2007 01:56:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 18:56:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cedric.ho@gmail.com designates 209.85.146.177 as permitted sender)
Received: from [209.85.146.177] (HELO wa-out-1112.google.com) (209.85.146.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 01:56:57 +0000
Received: by wa-out-1112.google.com with SMTP id j40so2239505wah
        for <java-user@lucene.apache.org>; Mon, 13 Aug 2007 18:56:37 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=K2yUXZ+5tlu3C3dPwQUWMJp8DjViV0FP38HEqFkU4l0rWWBW0agFhkPDMPjZbuxyvuQ1zxfpDR+j3/FQSq/ZvAYMBlZnAoMpVVu6vAdRp9zdgrKtGZP68Xj8r5ICvXIawYKMvSIQ5hAGHxY2b+ITjwluU5IE48SK+EKFKVbNbac=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=fGRVQUG55OP4BKrjiB5Wss7UsgqWEnGGb5hQZbuNc91YOK+HLT1ws4gJzv8dUIBvC+hGjECOgovWjvfJ/zxXwvWlOIpd5oc2ZwXDuZCSY2YlLM25A6rA7UZ3Tiw1uBNFPMgIB16DCCEmYTR1Yjd287/kJdzwZ7M0VHB0Ax4ASVw=
Received: by 10.114.107.19 with SMTP id f19mr327618wac.1187056596928;
        Mon, 13 Aug 2007 18:56:36 -0700 (PDT)
Received: by 10.114.52.18 with HTTP; Mon, 13 Aug 2007 18:56:36 -0700 (PDT)
Message-ID: <839ba01c0708131856g5496c96bu42882cd26126cc3f@mail.gmail.com>
Date: Tue, 14 Aug 2007 09:56:36 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: performance on filtering against thousands of different publications
In-Reply-To: <359a92830708130617ide2cd6ao9c71794ec8ddf46@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <839ba01c0708122117v4a2f3c8fk4c95149a25062e2f@mail.gmail.com>
	 <359a92830708130617ide2cd6ao9c71794ec8ddf46@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

T24gOC8xMy8wNywgRXJpY2sgRXJpY2tzb24gPGVyaWNrZXJpY2tzb25AZ21haWwuY29tPiB3cm90
ZToKPiBIYXZlIHlvdSB0cmllZCB0aGUgdmVyeSBzaW1wbGUgdGVjaGlucXVlIGlmIGp1c3QgbWFr
aW5nIGFuIE9SIGNsYXVzZQo+IGNvbnRhaW5pbmcgYWxsIHRoZSBzb3VyY2VzIGZvciBhIHBhcnRp
Y3VsYXIgcXVlcnkgYW5kIGp1c3QgbGV0dGluZwo+IGl0IHJ1bj8gSSB3YXMgc3VycHJpc2VkIGF0
IHRoZSBzcGVlZC4uLgoKSSB0aGluayB0aGUgVGVybXNGaWx0ZXIgdGhhdCBJIHVzZSBkb2VzIGV4
YWN0bHkgdGhhdC4KCj4KPiBCdXQgYmVmb3JlIGRvaW5nICphbnkqIG9mIHRoYXQsIHlvdSBuZWVk
IHRvIGZpbmQgb3V0LCBhbmQgdGVsbCB1cywgd2hhdAo+IGV4YWN0bHkgaXMgdGFraW5nIHRoZSB0
aW1lLiBBcmUgeW91IG9wZW5pbmcgYSBuZXcgSW5kZXhSZWFkZXIgZm9yCj4gZWFjaCBxdWVyeT8K
Tm8uCgo+IEFyZSB5b3UgaXRlcmF0aW5nIHRocm91Z2ggYSBIaXRzIG9iamVjdCB0aGF0IGhhcyBt
b3JlIHRoYW4KPiAxMDAgKG1heWJlIGl0J3MgMjAwIG5vdykgZW50cmllcz8gQXJlIHlvdSBsb2Fk
aW5nIGVhY2ggZG9jdW1lbnQgdGhhdAo+IHNhdGlzZmllcyB0aGUgcXVlcnk/IEV0Yy4gRXRjLgoK
VW5mb3J0dW5hdGVseSwgeWVzLiBBbmQgSSBrbm93IHRoaXMgaXMgYW5vdGhlciBiaWcgc291cmNl
IGZvcgpzbG93bmVzcy4gQnV0IGR1ZSB0byBzb21lIG90aGVyIHJlYXNvbiB0aGF0IGNhbm5vdCBi
ZSB3b3JrZWQgYXJvdW5kIGF0CnRoaXMgc3RhZ2UuIEknbGwgaGF2ZSB0byByZXR1cm4gYWxsIGhp
dHMgZm9yIGEgc2VhcmNoIGZvciBub3cuCkZvciBlYWNoIGRvY3VtZW50IEkgZ2V0IHRoZSBkb2Np
ZCAobm90IHRoZSBpbnRlcm5hbCBvbmUgaW4gbHVjZW5lKSwKZGF0ZSBhbmQgcHVibGljYXRpb24u
IEkndmUgYWxyZWFkeSB1c2VkIEZpZWxkQ2FjaGUgdG8gY2FjaGUgYWxsIHRoZSAzCmZpZWxkcy4K
Cj4KPiBQdXQgc29tZSBzaW1wbGUgdGltZXJzIGluIHlvdXIgY29kZSBhbmQgbWVhc3VyZSBleGFj
dGx5IHdoYXQncyB0YWtpbmcgdGhlCj4gdGltZSBiZWZvcmUgdHVuaW5nIHlvdXIgY29kZS4gVGlt
ZSB0aGUgY2FsbCB0byBzZWFyY2guIFRpbWUgdGhlIGNhbGwgZm9yCj4gcGFyc2luZy4gVGltZSB0
aGUgYXNzZW1ibHkgb2YgdGhlIHJlc3BvbnNlcywgaW4sIHNheSwgYmxvY2tzIG9mIDEwMC4KClRp
bWUgZm9yIHBhcnNpbmcgPCAwLjAxIHNlYywKVGltZSBmb3IgYXNzZW1ibHkgb2YgdGhlIHJlc3Bv
bnNlLCBzZW50IG92ZXIgbmV0d29yaywgZXRjOiBpZ25vcmVkLgpUaGUgMi0zIHNlY29uZHMgaXMg
b25seSB0aGUgdGltZSB0byBjYWxsIFNlYXJjaGVyLnNlYXJjaChxdWVyeSwKZmlsdGVyLCBuLCBz
b3J0KS4KCj4KPiBZb3Ugc2ltcGx5IGNhbm5vdCBpbXByb3ZlIHlvdXIgY29kZSB3aXRob3V0IGtu
b3dpbmcsIHRocm91Z2gKPiBtZWFzdXJlbWVudCwgd2hhdCBpcyB0YWtpbmcgdGhlIHRpbWUuIFZp
cnR1YWxseSBldmVyeSB0aW1lIEkndmUgdHJpZWQgdG8KPiBpbXByb3ZlIHNwZWVkIHdpdGhvdXQg
bWVhc3VyaW5nIGZpcnN0LCBJJ3ZlIGJlZW4gd3JvbmcgPEc+Li4KCkknbGwgaGF2ZSB0byBjb25m
ZXNzLCBpZiBJIG9ubHkgdGFrZSBmaXJzdCAxMDAgaGl0cywgc2VhcmNoIHRpbWUgY2FuCmJlIGJy
aW5nIGRvd24gdG8gYXJvdW5kIDEgc2Vjb25kLiBCdXQgYmVpbmcgdW5hYmxlIHRvIGRvIHRoaXMs
IEkndmUKYWxzbyB0cmllZCB0byBtZWFzdXJlIHRoZSBwZXJmb3JtYW5jZSB0YWtpbmcgb3V0IGVh
Y2ggaW5kaXZpZHVhbApmYWN0b3IsIGUuZy4gc29ydCwgZmlsdGVyIGJ5IGRhdGUsIGZpbHRlciBi
eSBwdWJsaWNhdGlvbnMuIGFuZCBJIGZvdW5kCnRoYXQgZmlsdGVyIGJ5IHB1YmxpY2F0aW9uIGdl
bmVyYWxseSB0YWtlcyB0aGUgbW9zdCB0aW1lLiBJIGZvcmdvdCB0aGUKZXhhY3QgbWVhc3VyZXMs
IGJ1dCBhcm91bmQgMC41fjEgc2Vjb25kcyBpbXByb3ZlbWVudHMgdGFraW5nIGl0IG91dC4KCj4K
PiBCVFcsIGhhdmUgeW91IGxvb2tlZCBvdmVyIHRoZSBzdWdnZXN0aW9ucyBoZXJlPwo+Cj4gaHR0
cDovL3dpa2kuYXBhY2hlLm9yZy9sdWNlbmUtamF2YS9JbXByb3ZlU2VhcmNoaW5nU3BlZWQKWWVz
LCBJJ3ZlIGxvb2tlZCBvdmVyIGl0IGEgY291cGxlIG9mIHRpbWVzIGFscmVhZHkgPSkgR2V0IGZh
c3RlcgpoYXJkd2FyZSwgYWRkIFJBTXMgYXJlIGFsbCBnb29kIHN1Z2dlc3Rpb25zIGluIG15IGNh
c2UuIFdlIHdpbGwKZXZlbnR1YWxseSBzcHJlYWQgb3VyIGluZGV4ZXMgdG8gYSBudW1iZXIgb2Yg
bWFjaGluZXMuIEJ1dCBJIHdvdWxkCnN0aWxsIGxpa2UgdG8gZWxpbWluYXRlIGFueSBpbmVmZmlj
aWVuY2llcyBpbiBvdXIgc2VhcmNoCmltcGxlbWVudGF0aW9uIGZpcnN0LgoKPgo+Cj4gQmVzdAo+
IEVyaWNrCj4KPiBPbiA4LzEzLzA3LCBDZWRyaWMgSG8gPGNlZHJpYy5ob0BnbWFpbC5jb20+IHdy
b3RlOgo+ID4KPiA+IEhpIGFsbCwKPiA+Cj4gPiBNeSBwcm9ibGVtIGlzIGFzIGZvbGxvd3M6Cj4g
Pgo+ID4gT3VyIGRvY3VtZW50cyBlYWNoIGNvbWVzIGZyb20gYSBkaWZmZXJlbnQgcHVibGljYXRp
b24uIEFuZCB3ZQo+ID4gY3VycmVudGx5IGhhdmUgPiA1MDAwIGRpZmZlcmVudCBwdWJsaWNhdGlv
biBzb3VyY2VzLgo+ID4KPiA+IE91ciBjbGllbnRzIGNhbiBjaG9vc2UgYXJiaXRyYXJpbHkgYSBz
dWJzZXQgb2YgdGhlIHB1YmxpY2F0aW9ucyB3aGlsZQo+ID4gcGVyZm9ybWluZyBzZWFyY2guIEl0
IGlzIG5vdCAgdW5jb21tb24gdGhhdCBhIHNlYXJjaCB3aWxsIGhhdmUgdG8KPiA+IG1hdGNoIGh1
bmRyZWRzIG9yIHRob3VzYW5kcyBvZiBwdWJsaWNhdGlvbnMuCj4gPgo+ID4gSSBjdXJyZW50bHkg
dHJ5IHRvIGluZGV4IHRoZSBwdWJsaWNhdGlvbiBpbmZvcm1hdGlvbiBhcyBhIGZpZWxkIGluCj4g
PiBlYWNoIGRvY3VtZW50LiBhbmQgdXNlIGEgVGVybXNGaWx0ZXIgd2hlbiBwZXJmb3JtaW5nIHNl
YXJjaC4gSG93ZXZlcgo+ID4gdGhlIHBlcmZvcm1hbmNlIGlzIGxlc3MgdGhhbiBzYXRpc2ZhY3Rv
cnkuIE1hbnkgc2ltcGxlIHNlYXJjaGVzIHRha2VzCj4gPiBtb3JlIHRoYW4gMi0zIHNlY29uZHMu
IChvdXIgZ29hbDogPCAwLjVzZWNvbmRzKS4KPiA+Cj4gPiBVc2luZyB0aGUgQ2FjaGluZ1dyYXBw
ZXJGaWx0ZXIgaXMgZ3JlYXQgZm9yIHNlYXJjaCBzcGVlZC4gQnV0IEkndmUKPiA+IGRvbmUgc29t
ZSBjYWxjdWxhdGlvbiBhbmQgZmlndXJlZCB0aGF0IGl0IGlzIGJhc2ljYWxseSBpbXBvc3NpYmxl
IHRvCj4gPiBjYWNoZSBhbGwgY29tYmluYXRpb24gb2YgcHVibGljYXRpb25zIG9yIGV2ZW4gc29t
ZSBjb21tb24KPiA+IGNvbWJpbmF0aW9ucy4KPiA+Cj4gPgo+ID4gSXMgdGhlcmUgYW55IG90aGVy
IG1vcmUgZWZmZWN0aXZlIHdheSB0byBkbyB0aGUgZmlsdGVyaW5nPwo+ID4KPiA+IChJIGtub3cg
dGhhdCB0aGUgc2xvd25lc3MgaXMgbm90IHB1cmVseSBkdWUgdG8gdGhlIHB1YmxpY2F0aW9uIGZp
bHRlciwKPiA+IHdlIGFsc28gaGF2ZSBzb21lIG90aGVyIHRoaW5ncyB0aGF0IHdpbGwgc2xvdyBk
b3duIHRoZSBzZWFyY2guIEJ1dAo+ID4gdGhpcyBvbmUgZGVmaW5pdGVseSBjb250cmlidXRlZCBx
dWl0ZSBhIGxvdCB0byB0aGUgb3ZlcmFsbCBzZWFyY2gKPiA+IHRpbWUpCj4gPgo+ID4gUmVnYXJk
cywKPiA+IENlZHJpYwo+ID4KPiA+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+ID4gVG8gdW5zdWJzY3JpYmUsIGUt
bWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gPiBGb3IgYWRk
aXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9y
Zwo+ID4KPiA+Cj4KCgotLSAK5oSbQOS4ii5LZXlib2FyZAo=


From java-user-return-29797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 14 02:01:02 2007
Return-Path: <java-user-return-29797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52985 invoked from network); 14 Aug 2007 02:01:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2007 02:01:01 -0000
Received: (qmail 39114 invoked by uid 500); 14 Aug 2007 02:00:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39054 invoked by uid 500); 14 Aug 2007 02:00:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39032 invoked by uid 99); 14 Aug 2007 02:00:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 19:00:50 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 02:00:57 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IKlho-0003xs-2R
	for java-user@lucene.apache.org; Mon, 13 Aug 2007 19:00:24 -0700
Message-ID: <12137476.post@talk.nabble.com>
Date: Mon, 13 Aug 2007 19:00:24 -0700 (PDT)
From: "Srinivas.N." <nsp1974@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Question on custom scoring
In-Reply-To: <12136012.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: nsp1974@yahoo.com
References: <12136012.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I figured out the answer to 2[a] - its because by default CustomScoreQuery
does weight normalization. To disable that, one should use
customQuery.setStrict(true). Once I do this, I get the original values that
I stored during the indexing process.

Help with the other two questions ([1] and [2]b) still appreciated. I'm also
starting to look at the code to understand the weight normalization process.
If I find something useful, I'll post it here. I hope this thread becomes
useful to others that are figuring out how to best weigh in different
factors while doing custom scoring. So, any experiences related to this
issue is welcome.
-- 
View this message in context: http://www.nabble.com/Question-on-custom-scoring-tf4264305.html#a12137476
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 14 02:35:25 2007
Return-Path: <java-user-return-29798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64899 invoked from network); 14 Aug 2007 02:35:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2007 02:35:24 -0000
Received: (qmail 82860 invoked by uid 500); 14 Aug 2007 02:35:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82824 invoked by uid 500); 14 Aug 2007 02:35:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82813 invoked by uid 99); 14 Aug 2007 02:35:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 19:35:15 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a5.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 02:35:20 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a5.g.dreamhost.com (Postfix) with ESMTP id 6BBAB14D6B1
	for <java-user@lucene.apache.org>; Mon, 13 Aug 2007 19:34:46 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <ae6f38f60708131120j2a23e04en85a2d8576c3d580d@mail.gmail.com>
References: <ae6f38f60708131120j2a23e04en85a2d8576c3d580d@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A565AC55-B6C3-4DC5-B561-795CBF9DA1A8@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Rank based on lists.
Date: Mon, 13 Aug 2007 22:34:31 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Have a look at the DisjunctionMaxQuery class.  I don't think it is  
exactly what you are looking for, but it might give you some ideas on  
how to proceed, as it sounds similar to what you are trying to do.

Hope this helps,
Grant

On Aug 13, 2007, at 2:20 PM, Walt Stoneburner wrote:

> Here's a scenario I just ran into, though I don't know how to make
> Lucene do it (or even if it can).
>
> I have two lists; to keep things simply lets assume (A B C D E F G)  
> and (X Y).
>
> I want to form a query so that when matches appear from both lists,
> results rank higher, than if many elements matched from just one.
>
> That is, a document that matches a many terms of list one, such as A B
> C D E F, ranks lower than a document that matches just one term from
> each list, A X.
>
> It is not the case that the second list weights more.  It's just as
> equal as the first.
>
> So, for instance, a match of X Y, all of list two, would rank less
> than a match of A X, which had hits in both.
>
>
> Is this even possible, or does Lucene not have facilities for lists,
> sets, groups, or whatever makes sense to call them?
>
> -Walt Stoneburner, wls@wwco.com
>  http://www.wwco.com/~wls/blog/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 14 02:39:43 2007
Return-Path: <java-user-return-29799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66155 invoked from network); 14 Aug 2007 02:39:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2007 02:39:42 -0000
Received: (qmail 87421 invoked by uid 500); 14 Aug 2007 02:39:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87387 invoked by uid 500); 14 Aug 2007 02:39:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87376 invoked by uid 99); 14 Aug 2007 02:39:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 19:39:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cedric.ho@gmail.com designates 209.85.146.179 as permitted sender)
Received: from [209.85.146.179] (HELO wa-out-1112.google.com) (209.85.146.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 02:39:32 +0000
Received: by wa-out-1112.google.com with SMTP id j40so2248637wah
        for <java-user@lucene.apache.org>; Mon, 13 Aug 2007 19:39:11 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=AMw79jvM1kH7aa7hnfqbedV7xX5bS5bJuRO+CDOn5pxS5ekob+X0QNtKQJ4jZsTIq7+QJixGhJIADazMnKCNrZInRs4jO3iX/ANkWRJflJyoSRtqNd1TYAYDEIMx6MPLU9mzvs6+ZeCgj2G2qDGeZjLZRyTFVrp3PDG49zhUVCk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=a8/hQgmP8WdRMpmBppJNTupBPhObiHYbcdd4yp1sl7ekitfdrZMe5CpMueEfzl6GEHhyKhJbL5moNuzrlgoU0YWe4k1LBcyBMAeorw7o9OLmFRfL/bQ+q9dbkYNc54HG44U2y61Gz/i2yJIfwPXhCqnpbv+M3SkNjERrWH8pFcE=
Received: by 10.115.23.12 with SMTP id a12mr2148322waj.1187059150474;
        Mon, 13 Aug 2007 19:39:10 -0700 (PDT)
Received: by 10.114.52.18 with HTTP; Mon, 13 Aug 2007 19:39:10 -0700 (PDT)
Message-ID: <839ba01c0708131939h786039cdg4eaecbc4bedddfdc@mail.gmail.com>
Date: Tue, 14 Aug 2007 10:39:10 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: performance on filtering against thousands of different publications
In-Reply-To: <244235.73314.qm@web26007.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <244235.73314.qm@web26007.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On 8/13/07, mark harwood <markharw00d@yahoo.co.uk> wrote:
> I would presume that (like a lot of things) there is power-law at play in the popularity of publication sources (i.e. a small number of popular sources and a lot of unpopular ones).
> The "Zipf" plugin in Luke can be used to illustrate this distribution for the values in your "publication source" field.

Do u mean it will count the number of documents for each publication source ?

>
> Given this disparity, it makes sense to only cache Filters for the most popular publication sources. Reading a large list of doc ids (the TermDocs) for these popular terms takes a lot of time so it makes sense to cache them whereas it clearly is not valuable to use exactly the same amount of memory (i.e. a new Bitset(reader.maxDoc) ) to cache an unpopular term whose TermDocs can be read from disk quickly.
> I would use BooleanFilter to combine the user's choices of publication source terms and use CachingWrapperFilter around (popular) individual Term Filters added to the BooleanFilter rather than using CachingWrapperFilter around the BooleanFilter as a whole. This is because your are much more likely to get cache hits on the popular individual terms than on a user's particular selection of publication sources and these cached items can be combined together in the BooleanFilter super fast.

We are also thinking about similar methods. i.e. caching some common
filters. Let me give a little more detail here.

Our clients usually search with only the default publication set.
However the default set of publications vary a lot for different
clients and each set can be quite large (hundreds to thousands of
publications).

So we are thinking we may want to use a cache of TermsFilter, where
each TermsFilter filter for a set of publications and maybe use some
LRU policy to manage the cache of filters.

This may eventually work, be we are also looking for other better alternatives.

Thanks,
Cedric

>
> Hope this makes sense
> Mark
>
> ----- Original Message ----
> From: Cedric Ho <cedric.ho@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Monday, 13 August, 2007 5:17:52 AM
> Subject: performance on filtering against thousands of different publications
>
> Hi all,
>
> My problem is as follows:
>
> Our documents each comes from a different publication. And we
> currently have > 5000 different publication sources.
>
> Our clients can choose arbitrarily a subset of the publications while
> performing search. It is not  uncommon that a search will have to
> match hundreds or thousands of publications.
>
> I currently try to index the publication information as a field in
> each document. and use a TermsFilter when performing search. However
> the performance is less than satisfactory. Many simple searches takes
> more than 2-3 seconds. (our goal: < 0.5seconds).
>
> Using the CachingWrapperFilter is great for search speed. But I've
> done some calculation and figured that it is basically impossible to
> cache all combination of publications or even some common
> combinations.
>
>
> Is there any other more effective way to do the filtering?
>
> (I know that the slowness is not purely due to the publication filter,
> we also have some other things that will slow down the search. But
> this one definitely contributed quite a lot to the overall search
> time)
>
> Regards,
> Cedric
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
>       ___________________________________________________________
> Yahoo! Answers - Got a question? Someone out there knows the answer. Try it
> now.
> http://uk.answers.yahoo.com/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 14 04:37:59 2007
Return-Path: <java-user-return-29800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94109 invoked from network); 14 Aug 2007 04:37:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2007 04:37:58 -0000
Received: (qmail 92782 invoked by uid 500); 14 Aug 2007 04:37:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92746 invoked by uid 500); 14 Aug 2007 04:37:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92735 invoked by uid 99); 14 Aug 2007 04:37:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 21:37:50 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mrrohitsaini@gmail.com designates 209.85.132.250 as permitted sender)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 04:37:48 +0000
Received: by an-out-0708.google.com with SMTP id c5so296104anc
        for <java-user@lucene.apache.org>; Mon, 13 Aug 2007 21:37:27 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=A6H1BXe7SY6r7+pa+3W/9KJJOuN+SWqk49/qxcjVo2PwjhXcMd8kgl5Zd7Qzs+OmPUIAZ73EYEHr4HGLtF8VOuBLppkC0PNbSDv4kzJ0opMpsocvORBfXtiAelFztRHjFYstQYor8No8US7sEyg4ES4JmmVWsiEAm2Tz7wrKjhQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=QTjwVH5yCump0p7qOM9iCDNJ+NQFIpujBUzex9rjrwSiy4hg0892iLcXgcodZLV+tS00W9g8g+gCC1ygl/20ZbX0fPgkjm3o01yrZeDcvLINfJw2m2RmMmJ79c+tCd4ALqDm0u01rzzQV5DGbEzCK/D4HybZaLQn/EwA68bUwNQ=
Received: by 10.100.144.11 with SMTP id r11mr4498577and.1187066247380;
        Mon, 13 Aug 2007 21:37:27 -0700 (PDT)
Received: by 10.100.58.11 with HTTP; Mon, 13 Aug 2007 21:37:27 -0700 (PDT)
Message-ID: <3cb8ef760708132137r62777b03rc6acd68336f6af0c@mail.gmail.com>
Date: Tue, 14 Aug 2007 10:07:27 +0530
From: "rohit saini" <mrrohitsaini@gmail.com>
To: java-user@lucene.apache.org
Subject: File decriptors
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_61052_22285014.1187066247353"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_61052_22285014.1187066247353
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

Lucene says if we use compound file format than it greatly increase the
number of file descriptors used by indexing and by searching. Can you please
tell me what does it mean. Which file are opened by during indexing and
searching. I know something but still not very clear. I have some other
issues also like:

when we search then what does lucene do? whether It loads all the index
result into the memory? In this case if I have very large index than
definitely run out of memory.
Please reply me.

Thanks & Regards,

Rohit

------=_Part_61052_22285014.1187066247353--

From java-user-return-29801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 14 06:29:07 2007
Return-Path: <java-user-return-29801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38883 invoked from network); 14 Aug 2007 06:29:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2007 06:29:06 -0000
Received: (qmail 66157 invoked by uid 500); 14 Aug 2007 06:28:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66109 invoked by uid 500); 14 Aug 2007 06:28:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66098 invoked by uid 99); 14 Aug 2007 06:28:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Aug 2007 23:28:58 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [160.85.104.50] (HELO mx1.zhwin.ch) (160.85.104.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 06:29:08 +0000
Received: from orwell.zhaw.ch ([160.85.104.31] helo=orwell.zhwin.ch)
	by mx1.zhwin.ch with esmtp (Exim 4.54)
	id 1IKptK-0003Qs-CJ
	for java-user@lucene.apache.org; Tue, 14 Aug 2007 08:28:34 +0200
Received: from [127.0.0.1] (Not Verified[160.85.232.144]) by orwell.zhwin.ch with NetIQ MailMarshal 6.0 Service Pack 1a (v6,0,3,33)
	id <B46c14b4a0001>; Tue, 14 Aug 2007 08:27:22 +0200
Message-ID: <46C14B90.5030605@zhwin.ch>
Date: Tue, 14 Aug 2007 08:28:32 +0200
From: Thomas Arni <art@zhwin.ch>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Indexing PDF documents with structure information
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Luceners

I have started a new project and need to index pdf documents.
There are several projects around, which allow to extract the content,
like pdfbox, xpdf and pjclassic.

As far as I studied the FAQ's and examples, all these
tools allow simple text extraction.

Which of these open source tool can you recommend the most?

My pdf documents are quite long (in average more than 60 pages long).
Therefore I would like to have additional structure information for 
indexing.
This allows that the user not only gets the whole document as a result,
he also gets additional information like the page or the chapter, where
the relevant information is.

As anyone have similar requirements? Which of these tools
are the best to fit my requirements?

Thanks for your help
Thomas


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 14 08:27:40 2007
Return-Path: <java-user-return-29802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82551 invoked from network); 14 Aug 2007 08:27:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2007 08:27:39 -0000
Received: (qmail 7061 invoked by uid 500); 14 Aug 2007 08:27:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7029 invoked by uid 500); 14 Aug 2007 08:27:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7018 invoked by uid 99); 14 Aug 2007 08:27:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 01:27:31 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 212.174.130.108 is neither permitted nor denied by domain of enis.soz.nutch@gmail.com)
Received: from [212.174.130.108] (HELO mail.agmlab.com) (212.174.130.108)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 08:27:40 +0000
Received: from mail.agmlab.com (localhost [127.0.0.1])
	by mail.agmlab.com (Postfix) with ESMTP id 0B558D42AC
	for <java-user@lucene.apache.org>; Tue, 14 Aug 2007 11:27:22 +0300 (EEST)
Received: from [192.168.15.18] (unknown [192.168.15.18])
	by mail.agmlab.com (Postfix) with ESMTP id EFE5BD429A
	for <java-user@lucene.apache.org>; Tue, 14 Aug 2007 11:27:21 +0300 (EEST)
Message-ID: <46C16759.4040500@gmail.com>
Date: Tue, 14 Aug 2007 11:27:05 +0300
From: Enis Soztutar <enis.soz.nutch@gmail.com>
User-Agent: Thunderbird 1.5.0.12 (X11/20070604)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Similarity
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: ClamAV using ClamSMTP
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I want to define different implementations for the functions in 
Similarity class. For example i need to define sloppyFreq() different 
for fields "foo" and "bar". Is there a way around this?

Also i wonder why the fieldname is passed to some of the functions in 
Similarity (such as Similarity#lengthNorm()) but not all of them. Does 
anybody know the reason for this?

Thanks.

Enis Soztutar

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 14 08:50:10 2007
Return-Path: <java-user-return-29803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88559 invoked from network); 14 Aug 2007 08:50:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2007 08:50:10 -0000
Received: (qmail 39106 invoked by uid 500); 14 Aug 2007 08:50:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39070 invoked by uid 500); 14 Aug 2007 08:50:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39059 invoked by uid 99); 14 Aug 2007 08:50:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 01:50:02 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mrrohitsaini@gmail.com designates 209.85.132.250 as permitted sender)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 08:49:56 +0000
Received: by an-out-0708.google.com with SMTP id c5so303497anc
        for <java-user@lucene.apache.org>; Tue, 14 Aug 2007 01:49:35 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=fXzyaqvnEG765Cam3XKuysPelKfOXXlfvafcCe+Ik6WDBbp19UsfV6pQE90cZHEWt1n50yLCpqa6dtz3/g53cjKNMhCHuqsYLmH32YuJOz9C0Smxj3zF7wq/AjN5eKTz+vJa3vZSg2sI1ZqTVr86BXUYiaMoafSiKPQgxhmccqA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=iTIluJWOLlU1VVmODMIxXyHD+0Fke32USS9srYsUuqU8FyhaiEQAkvrxvpQp28gSIZ2dwhQCC4UpIjql3gVlNvPvB+fowNMJMRKq+WKdloAdnye2L9XN/xep+LppS1CtkXHn22z3qCNoS5VL4V14umjcM9GTk2qgtAjhkOfmrX4=
Received: by 10.100.105.18 with SMTP id d18mr123083anc.1187081375420;
        Tue, 14 Aug 2007 01:49:35 -0700 (PDT)
Received: by 10.100.58.11 with HTTP; Tue, 14 Aug 2007 01:49:35 -0700 (PDT)
Message-ID: <3cb8ef760708140149o28041292t2554332dc4639157@mail.gmail.com>
Date: Tue, 14 Aug 2007 14:19:35 +0530
From: "rohit saini" <mrrohitsaini@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Update boost factor for indexed document using setBoost()
In-Reply-To: <46BC49A2.5090102@r.email.ne.jp>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_62584_17269360.1187081375373"
References: <3cb8ef760708092059w4aa4a6dl19d96b1c19a75765@mail.gmail.com>
	 <4F005160-BCA3-4298-9445-924B4897D4A0@apache.org>
	 <3cb8ef760708100329v739cac4bm646891ca48e0bcf3@mail.gmail.com>
	 <46BC49A2.5090102@r.email.ne.jp>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_62584_17269360.1187081375373
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi koji,
please give me an example.  Let me explain what I want to do:
I have indexed some documents. Now I want to update the ranking of the
documents based on following criteria:

1.) The documents which come into search result should get one point
2.) The documents which are viewed by the user should get one point
3.) Boost the document as per the rating (suppose 1-5) given by the user.

I have only one field in my index that is content of the document.

Now how to update the boost factor of the indexed docuements without
deleting them first from the index.

Thanks & Regards,
Rohit


On 8/10/07, Koji Sekiguchi <koji@r.email.ne.jp> wrote:
>
> Or, you can use FieldNormModifier class to modify existing fieldNorm:
>
> $ java org.apache.lucene.index.FieldNormModifier path-to-index
> your.Similarity field1 [field2 ...]
>
> To do this, you have to write your own Similarity class to adjust boost,
> via lengthNorm().
>
> Thank you,
>
> Koji
>
> rohit saini wrote:
> > Thanks a lot Grant
> > I have been trying to do so....could u please send me example of doing
> the
> > way u r talking .....
> >
> > Again thanks so much...
> > Regards,
> > Rohit
> >
> >
> > On 8/10/07, Grant Ingersoll <gsingers@apache.org> wrote:
> >
> >> You can't.  You have to delete and reindex the document with the new
> >> boost.
> >>
> >> On Aug 9, 2007, at 11:59 PM, rohit saini wrote:
> >>
> >>
> >>> Hi,
> >>> could u pl. tell me how to update boost factor of already indexed
> >>> document
> >>> using setBoost.
> >>>
> >>> Thanks & regards,
> >>> Rohit
> >>>
> >>> --
> >>> VANDE - MATRAM
> >>>
> >> --------------------------
> >> Grant Ingersoll
> >> http://lucene.grantingersoll.com
> >>
> >> Lucene Helpful Hints:
> >> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> >> http://wiki.apache.org/lucene-java/LuceneFAQ
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >
> >
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
VANDE - MATRAM

------=_Part_62584_17269360.1187081375373--

From java-user-return-29804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 14 09:05:15 2007
Return-Path: <java-user-return-29804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93857 invoked from network); 14 Aug 2007 09:05:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2007 09:05:09 -0000
Received: (qmail 58667 invoked by uid 500); 14 Aug 2007 09:04:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58619 invoked by uid 500); 14 Aug 2007 09:04:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58596 invoked by uid 99); 14 Aug 2007 09:04:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 02:04:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.220] (HELO web26009.mail.ukl.yahoo.com) (217.12.10.220)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 14 Aug 2007 09:04:45 +0000
Received: (qmail 62993 invoked by uid 60001); 14 Aug 2007 09:04:23 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=0RAwSDuOS13QUp3yPQcU3Az3sj0mpDNBVcUgj0+Q3RD0x+Xk2btlBd5AOpuTPYuDaBc2TsDnoUk8vzT2v++BN6qyBq/QOwJv20gkcXC+ESaeVQKKTjf2mt6mK01xSN7xSp4G9e69oHszIvMNON41+UC38W0ITlB7bFf+btchxNY=;
X-YMail-OSG: FLNFeD8VM1n_Ireh5DWiHNO6RoQ142ZGCGTEvEh79UaBP2UNtsU2clbnb0kY4dxy4rs9Omh4CguwAK7d_qudEGLByC7zMBiYjL38nOshT47KDtzNV_fJI6QHkVc-
Received: from [193.36.230.96] by web26009.mail.ukl.yahoo.com via HTTP; Tue, 14 Aug 2007 09:04:23 GMT
X-Mailer: YahooMailRC/651.48 YahooMailWebService/0.7.119
Date: Tue, 14 Aug 2007 09:04:23 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: performance on filtering against thousands of different publications
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <847760.60235.qm@web26009.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

>>Do u mean it will count the number of documents for each publication sour=
ce ?=0A=0ALucene does that for all terms. The Luke plugin simply offers a v=
isualisation of the variance in term frequencies for a field. It looks some=
thing like this: http://www.ucl.ac.uk/~ucbplrd/zipf.png=0A=0A=0A>>each set =
can be quite large (hundreds to thousands of publications=0A=0AAh. Filterin=
g based on thousands of terms is likely to slow things down, even if they a=
re unpopular terms. I'd assumed the performance problem was due to a small =
number of popular terms.=0A=0ASome options:=0A1) Try minimise leaping aroun=
d the disk - maybe sorting your selected terms will help. Look at methods i=
n TermEnum and TermDocs which you can use to build your own bitset from you=
r (sorted) list of terms.=0A2) Can you add higher-level terms to your index=
? Are the publications sources grouped into stable "sets"? If so, why not i=
ndex the content with a "publicationSet" field too and use that in filters =
instead of querying using the members of the set (individual publication so=
urces). =0A3) The <CachedFilter> tag in contrib's XMLQueryParser already im=
plements an LRU policy for caching nested filters or queries.=0A=0ACheers=
=0AMark=0A----- Original Message ----=0AFrom: Cedric Ho <cedric.ho@gmail.co=
m>=0ATo: java-user@lucene.apache.org=0ASent: Tuesday, 14 August, 2007 3:39:=
10 AM=0ASubject: Re: performance on filtering against thousands of differen=
t publications=0A=0AOn 8/13/07, mark harwood <markharw00d@yahoo.co.uk> wrot=
e:=0A> I would presume that (like a lot of things) there is power-law at pl=
ay in the popularity of publication sources (i.e. a small number of popular=
 sources and a lot of unpopular ones).=0A> The "Zipf" plugin in Luke can be=
 used to illustrate this distribution for the values in your "publication s=
ource" field.=0A=0ADo u mean it will count the number of documents for each=
 publication source ?=0A=0A>=0A> Given this disparity, it makes sense to on=
ly cache Filters for the most popular publication sources. Reading a large =
list of doc ids (the TermDocs) for these popular terms takes a lot of time =
so it makes sense to cache them whereas it clearly is not valuable to use e=
xactly the same amount of memory (i.e. a new Bitset(reader.maxDoc) ) to cac=
he an unpopular term whose TermDocs can be read from disk quickly.=0A> I wo=
uld use BooleanFilter to combine the user's choices of publication source t=
erms and use CachingWrapperFilter around (popular) individual Term Filters =
added to the BooleanFilter rather than using CachingWrapperFilter around th=
e BooleanFilter as a whole. This is because your are much more likely to ge=
t cache hits on the popular individual terms than on a user's particular se=
lection of publication sources and these cached items can be combined toget=
her in the BooleanFilter super fast.=0A=0AWe are also thinking about simila=
r methods. i.e. caching some common=0Afilters. Let me give a little more de=
tail here.=0A=0AOur clients usually search with only the default publicatio=
n set.=0AHowever the default set of publications vary a lot for different=
=0Aclients and each set can be quite large (hundreds to thousands of=0Apubl=
ications).=0A=0ASo we are thinking we may want to use a cache of TermsFilte=
r, where=0Aeach TermsFilter filter for a set of publications and maybe use =
some=0ALRU policy to manage the cache of filters.=0A=0AThis may eventually =
work, be we are also looking for other better alternatives.=0A=0AThanks,=0A=
Cedric=0A=0A>=0A> Hope this makes sense=0A> Mark=0A>=0A> ----- Original Mes=
sage ----=0A> From: Cedric Ho <cedric.ho@gmail.com>=0A> To: java-user@lucen=
e.apache.org=0A> Sent: Monday, 13 August, 2007 5:17:52 AM=0A> Subject: perf=
ormance on filtering against thousands of different publications=0A>=0A> Hi=
 all,=0A>=0A> My problem is as follows:=0A>=0A> Our documents each comes fr=
om a different publication. And we=0A> currently have > 5000 different publ=
ication sources.=0A>=0A> Our clients can choose arbitrarily a subset of the=
 publications while=0A> performing search. It is not  uncommon that a searc=
h will have to=0A> match hundreds or thousands of publications.=0A>=0A> I c=
urrently try to index the publication information as a field in=0A> each do=
cument. and use a TermsFilter when performing search. However=0A> the perfo=
rmance is less than satisfactory. Many simple searches takes=0A> more than =
2-3 seconds. (our goal: < 0.5seconds).=0A>=0A> Using the CachingWrapperFilt=
er is great for search speed. But I've=0A> done some calculation and figure=
d that it is basically impossible to=0A> cache all combination of publicati=
ons or even some common=0A> combinations.=0A>=0A>=0A> Is there any other mo=
re effective way to do the filtering?=0A>=0A> (I know that the slowness is =
not purely due to the publication filter,=0A> we also have some other thing=
s that will slow down the search. But=0A> this one definitely contributed q=
uite a lot to the overall search=0A> time)=0A>=0A> Regards,=0A> Cedric=0A>=
=0A> ---------------------------------------------------------------------=
=0A> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> Fo=
r additional commands, e-mail: java-user-help@lucene.apache.org=0A>=0A>=0A>=
=0A>=0A>=0A>=0A>       ____________________________________________________=
_______=0A> Yahoo! Answers - Got a question? Someone out there knows the an=
swer. Try it=0A> now.=0A> http://uk.answers.yahoo.com/=0A>=0A> ------------=
---------------------------------------------------------=0A> To unsubscrib=
e, e-mail: java-user-unsubscribe@lucene.apache.org=0A> For additional comma=
nds, e-mail: java-user-help@lucene.apache.org=0A>=0A>=0A=0A----------------=
-----------------------------------------------------=0ATo unsubscribe, e-m=
ail: java-user-unsubscribe@lucene.apache.org=0AFor additional commands, e-m=
ail: java-user-help@lucene.apache.org=0A=0A=0A=0A=0A=0A=0A      ___________=
________________________________________________=0AYahoo! Answers - Got a q=
uestion? Someone out there knows the answer. Try it=0Anow.=0Ahttp://uk.answ=
ers.yahoo.com/ 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 14 09:43:34 2007
Return-Path: <java-user-return-29805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4748 invoked from network); 14 Aug 2007 09:43:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2007 09:43:34 -0000
Received: (qmail 24410 invoked by uid 500); 14 Aug 2007 09:43:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24375 invoked by uid 500); 14 Aug 2007 09:43:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24364 invoked by uid 99); 14 Aug 2007 09:43:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 02:43:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of montaqa@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 09:43:22 +0000
Received: by nf-out-0910.google.com with SMTP id d3so656019nfc
        for <java-user@lucene.apache.org>; Tue, 14 Aug 2007 02:43:00 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=iHDxQIrO+TUvB3CjlFGgHjmncSX7UKDErJHxi3qweDC+3sha+F+hI9s6DLdsrDHWPx1lLIxYoOomMWz3FJ9d6LkXaMJC8G7fhMCdyDJbxqKmbQOE1gT4KDKb+gwUiuYfW5sYeVvgcM95Bq19plR+Hw2XPr6of8BuMThsj8d6Z9Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZDAtq2onyhh7I7wHC9dcEDdA3dQhHCevE4GMnstbUZOyg3/FQl/60nua8oXUTP8zero9+6fVZOPOGaHSIYhaGQOClGU8COU0s4+UKZqmb+chR5wG/EXhT3i9Mak/PPpmkFuIEIzNlolUkYc8RruBnzDTYjrOKXPdKzYsj9X2fYk=
Received: by 10.78.193.5 with SMTP id q5mr2630924huf.1187084580225;
        Tue, 14 Aug 2007 02:43:00 -0700 (PDT)
Received: by 10.78.129.4 with HTTP; Tue, 14 Aug 2007 02:42:59 -0700 (PDT)
Message-ID: <4479cfa0708140242n2cee338cv44b8ea7cd1056f4c@mail.gmail.com>
Date: Tue, 14 Aug 2007 13:42:59 +0400
From: "Abu Abdulla alhanbali" <montaqa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: formalizing a query
In-Reply-To: <359a92830708100633u43c96e50se5e69cec623b371a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_122664_10429816.1187084579911"
References: <4479cfa0708092120u761b383w4655ae5dd2195e1b@mail.gmail.com>
	 <359a92830708100633u43c96e50se5e69cec623b371a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_122664_10429816.1187084579911
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks for the help,

please provide the code to do that.

I tried with this one but it didn't work:

Query filterQuery = MultiFieldQueryParser.parse(new String{query1, query2,
query3, query4, .... }, new String{field1, field2, field1, field2, ... },
new KeywordAnalyzer());

this results in:

field1:query1 OR field2:query2 OR
field1:query3 OR field2:query4 ... etc

and NOT:

(field1:query1 AND field2:query2) OR
(field1:query3 AND field2:query4) ... etc

please help.


On 8/10/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> I *strongly* suggest you get a copy of Luke. It'll allow you to form
> queries
> and see the results and you can then answer this kind of question as well
> as many others.
>
> Meanwhile, please see
> http://lucene.apache.org/java/docs/queryparsersyntax.html
>
> Erick
>
> On 8/10/07, Abu Abdulla alhanbali <montaqa@gmail.com> wrote:
> >
> > Hi,
> >
> > I need your help in formalizing this query:
> >
> > (field1:query1 AND field2:query2) OR
> > (field1:query3 AND field2:query4) OR
> > (field1:query5 AND field2:query6) OR
> > (field1:query7 AND field2:query8) ... etc
> >
> > Please give the code since I'm new to lucene
> > how we can use MultiFieldQueryParser or any parser to do the job
> >
> > greatly appreciated
> >
>

------=_Part_122664_10429816.1187084579911--

From java-user-return-29806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 14 10:45:10 2007
Return-Path: <java-user-return-29806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25866 invoked from network); 14 Aug 2007 10:45:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2007 10:45:08 -0000
Received: (qmail 32459 invoked by uid 500); 14 Aug 2007 10:45:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32412 invoked by uid 500); 14 Aug 2007 10:45:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32401 invoked by uid 99); 14 Aug 2007 10:45:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 03:45:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.224.39.198] (HELO mail.asahi-net.or.jp) (202.224.39.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 10:44:56 +0000
Received: from [127.0.0.1] (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail.asahi-net.or.jp (Postfix) with ESMTP id 73171425DB
	for <java-user@lucene.apache.org>; Tue, 14 Aug 2007 19:44:34 +0900 (JST)
Message-ID: <46C18725.1030008@r.email.ne.jp>
Date: Tue, 14 Aug 2007 19:42:45 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Update boost factor for indexed document using setBoost()
References: <3cb8ef760708092059w4aa4a6dl19d96b1c19a75765@mail.gmail.com>	 <4F005160-BCA3-4298-9445-924B4897D4A0@apache.org>	 <3cb8ef760708100329v739cac4bm646891ca48e0bcf3@mail.gmail.com>	 <46BC49A2.5090102@r.email.ne.jp> <3cb8ef760708140149o28041292t2554332dc4639157@mail.gmail.com>
In-Reply-To: <3cb8ef760708140149o28041292t2554332dc4639157@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Rohit,

The way I showed you doesn't suit your need, because FieldNormModifier
should be used for modifying all fieldNorm values of the field specified 
at the
command line parameter in batch mode.

You can have an extra field other than content and register the point
to the field. Then use FunctionQuery to boost the document.
Note that in order to see the registered point, you have to close
and reopen your searcher instance when modifying the point field.

regards,

Koji

rohit saini wrote:
> Hi koji,
> please give me an example.  Let me explain what I want to do:
> I have indexed some documents. Now I want to update the ranking of the
> documents based on following criteria:
>
> 1.) The documents which come into search result should get one point
> 2.) The documents which are viewed by the user should get one point
> 3.) Boost the document as per the rating (suppose 1-5) given by the user.
>
> I have only one field in my index that is content of the document.
>
> Now how to update the boost factor of the indexed docuements without
> deleting them first from the index.
>
> Thanks & Regards,
> Rohit
>
>
> On 8/10/07, Koji Sekiguchi <koji@r.email.ne.jp> wrote:
>   
>> Or, you can use FieldNormModifier class to modify existing fieldNorm:
>>
>> $ java org.apache.lucene.index.FieldNormModifier path-to-index
>> your.Similarity field1 [field2 ...]
>>
>> To do this, you have to write your own Similarity class to adjust boost,
>> via lengthNorm().
>>
>> Thank you,
>>
>> Koji
>>
>>     


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 14 13:05:49 2007
Return-Path: <java-user-return-29807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99155 invoked from network); 14 Aug 2007 13:05:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2007 13:05:48 -0000
Received: (qmail 85504 invoked by uid 500); 14 Aug 2007 13:05:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85240 invoked by uid 500); 14 Aug 2007 13:05:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85229 invoked by uid 99); 14 Aug 2007 13:05:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 06:05:40 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 13:05:49 +0000
Received: from [192.168.3.101] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 4EB905DD2
	for <java-user@lucene.apache.org>; Tue, 14 Aug 2007 15:05:12 +0200 (CEST)
Message-ID: <46C1A884.9080003@garambrogne.net>
Date: Tue, 14 Aug 2007 15:05:08 +0200
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.6 (X11/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Indexing PDF documents with structure information
References: <46C14B90.5030605@zhwin.ch>
In-Reply-To: <46C14B90.5030605@zhwin.ch>
X-Enigmail-Version: 0.95.3
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thomas Arni a crit :
> Hello Luceners
>
> I have started a new project and need to index pdf documents.
> There are several projects around, which allow to extract the content,
> like pdfbox, xpdf and pjclassic.
>
> As far as I studied the FAQ's and examples, all these
> tools allow simple text extraction.
>
> Which of these open source tool can you recommend the most?
pdftk or iText?
>
> My pdf documents are quite long (in average more than 60 pages long).
> Therefore I would like to have additional structure information for
> indexing.
> This allows that the user not only gets the whole document as a result,
> he also gets additional information like the page or the chapter, where
> the relevant information is.
page is simple to extract, chapter should be more tricky, if the
document got internal links.
PDF reader accept argument like in http to open a page.
>
> As anyone have similar requirements? Which of these tools
> are the best to fit my requirements?

Have a look to "PDF hacks" (ISBN: 0596006551). When your document will
be split, it will be easy to index it.

M.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 14 15:19:28 2007
Return-Path: <java-user-return-29808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92805 invoked from network); 14 Aug 2007 15:19:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2007 15:19:27 -0000
Received: (qmail 57550 invoked by uid 500); 14 Aug 2007 15:19:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57518 invoked by uid 500); 14 Aug 2007 15:19:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57507 invoked by uid 99); 14 Aug 2007 15:19:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 08:19:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [62.97.113.150] (HELO mail.imente.com) (62.97.113.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 15:19:12 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.imente.com (Postfix) with ESMTP id 3D0ED9BA2
	for <java-user@lucene.apache.org>; Tue, 14 Aug 2007 17:16:48 +0200 (CEST)
Received: from mail.imente.com ([127.0.0.1])
	by localhost (peggy [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 06859-05 for <java-user@lucene.apache.org>;
	Tue, 14 Aug 2007 17:16:45 +0200 (CEST)
Received: from [192.168.0.41] (239.Red-213-96-32.staticIP.rima-tde.net [213.96.32.239])
	by mail.imente.com (Postfix) with ESMTP id 3A21F9C31
	for <java-user@lucene.apache.org>; Tue, 14 Aug 2007 17:16:31 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <64281BD1-FF62-403E-BA5A-5EA1037AA497@imente.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Albert Vila <avp@imente.com>
Subject: Best index architecture
Date: Tue, 14 Aug 2007 17:16:53 +0200
X-Mailer: Apple Mail (2.752.2)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at imente.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

	We have a system like 'google news'. We currently parse and index  
over 180.000 headlines per day. One month data is 10Gb and the  
indexation process takes 2 hours +/-, the index size is 6Gb +/-  
(We're using mergeFactor 40, setMaxBufferedDocs 100000,  
setRAMBufferSizeMb 500 and useCompoundFile false, the computer has  
2CPUs and 4Gb RAM).

We have headlines since 2002, 130million headlines, and we need to be  
able to search all these history. The most used indexes are the  
recent ones.
All indexed data never change. We have indexes per year and per  
month, and we mantain a daily index incrementally. We always sort  
results by date, using the internal lucene id.

We also have users. Earch user has folders, the headlines are  
automatically assigned to folders according to users preferences. The  
users can add/delete the assigned headlines. Now, We want to  
implement searches per folder.

We discussed the same structure as the main index, but there is a  
problem with add/delete actions. If we have indexes per month, or per  
year, a single user action means we need to reindex the whole index,  
because we use the internal lucene id as sort method.
We thought to use a single index containing all folder data, but we  
need to reindex the whole index as well.
If we don't use the lucene internal id as sorting method, we can  
index old documents with newer lucene's internal ids, and use a  
timestamp field to sort results, but we will pay at searching time.
To save index size, we thought to add all folder information in the  
main index. For instance:
	Headline 1, content, language, ...
	Headline 2, content, language, ...
	Headline 3, content, language, ...

	Folder 1 contains headline 1 and 2
	Folder 2 contains headline 2 and 3

Using the firsts approaches, we will have these structure
	main_index/year/month/
	main_index/current/
		headline 1
		headline 2
		headline 3

	folders_index/folder1
		headline 1
		headline 2
	folders_index/folder2
		headline 2
		headline 3
	(the folder's index structure may change if we use year/month  
indexes or all in the same index).

On the other hand, we can also store the information like:
	main_index/year/month
	main_index/current
		headline 1, content, language, folder:1
		headline 2, content, language, folder:1,2
		headline 3, content, language, folder:2
The problem we see with these approach is we have to constantly  
update the main index, adding, deleting and updating folder fields.  
It is more problematic with failures, because we have all information  
in the same index, but we save Gb becasuse we don't duplicate  
headlines across indexes.

Users add and delete actions are unusual, but headlines are  
automatically assigned to folders earch minute.

Anyone has a better approach to this problem?

Thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 14 15:58:12 2007
Return-Path: <java-user-return-29809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62223 invoked from network); 14 Aug 2007 15:58:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2007 15:58:11 -0000
Received: (qmail 56858 invoked by uid 500); 14 Aug 2007 15:57:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56827 invoked by uid 500); 14 Aug 2007 15:57:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56807 invoked by uid 99); 14 Aug 2007 15:57:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 08:57:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of walt.stoneburner@gmail.com designates 64.233.162.227 as permitted sender)
Received: from [64.233.162.227] (HELO nz-out-0506.google.com) (64.233.162.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 15:57:53 +0000
Received: by nz-out-0506.google.com with SMTP id i28so595790nzi
        for <java-user@lucene.apache.org>; Tue, 14 Aug 2007 08:57:32 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=ip0u89imb2Y9NBa51aJLWg2eJt7qIDqWZSz0BCvcz+wWbTuoqTofbDLuqxKW6GvYsM2gQyhkzxWnpKwgccHZm0KhqZU0GlhsWaiZCgp6yk+LF9I46b4gJqKz3KUlkCgdZsJvNxKPsmoK0Xe2GjHI3eI0HBpfqfQkfmETPRDbgc0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=lZpf2rrGwRLC9oJsxOtNByy0b2gDiyDBtaT2DC8cAqhurBVkV7qCe+IM5xTOLIKGRnKW1F4p+Ou+MM5U9PjYtd1Uqo/2q5umS6O8O1bz+jbem2wezJKWAOTHz/FjaJ9TssMfdW0pyDNoOjHTn9h9q6FsR6U4VTv4EONiXWRegKg=
Received: by 10.114.60.19 with SMTP id i19mr2789083waa.1187107050294;
        Tue, 14 Aug 2007 08:57:30 -0700 (PDT)
Received: by 10.115.32.18 with HTTP; Tue, 14 Aug 2007 08:57:30 -0700 (PDT)
Message-ID: <ae6f38f60708140857i3c9c8364qe61031f707fdfc72@mail.gmail.com>
Date: Tue, 14 Aug 2007 11:57:30 -0400
From: "Walt Stoneburner" <walt.stoneburner@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Rank based on lists.
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Grant,

  Thanks for pointing me at the DisjunctionMaxQuery, though you're
correct, this is close but not exactly what I want.

  I think the difference lies in that it's not which subexpression had
the greater score, but that a normally lower scoring document should
get its rank elevated because it appears in the results of different
subexpressions.

  Suppose I have three queries and in each case I got the same
document back with a result of 0.000001.

  While in the context of any given query, the document in totally
insignificant.

  However, for my use case, because it showed up in all three queries,
this has substantial meaning to me, and it now becomes the most
important document.

  I'd ideally like to have the union of all the query results
returned, but with my document ranked at the top.

  I'm getting this sinking feeling of post-processing a returned Hits list.

-Walt Stoneburner,
 http://www.wwco.com/~wls/blog

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 14 16:05:53 2007
Return-Path: <java-user-return-29810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79579 invoked from network); 14 Aug 2007 16:05:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2007 16:05:53 -0000
Received: (qmail 74542 invoked by uid 500); 14 Aug 2007 16:05:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74506 invoked by uid 500); 14 Aug 2007 16:05:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74495 invoked by uid 99); 14 Aug 2007 16:05:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 09:05:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.67] (HELO mx5.syr.edu) (128.230.18.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 16:05:50 +0000
Received: from [128.230.84.100] (ist-h335-d03.syr.edu [128.230.84.100])
	by mx5.syr.edu (8.13.7/8.13.7) with ESMTP id l7EG5E2R001364
	for <java-user@lucene.apache.org>; Tue, 14 Aug 2007 12:05:14 -0400
Message-ID: <46C1D293.5030003@syr.edu>
Date: Tue, 14 Aug 2007 12:04:35 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Thunderbird 2.0.0.4-GroupWise-IMAP-fix (Windows/20070719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: performance on filtering against thousands of different publications
References: <839ba01c0708122117v4a2f3c8fk4c95149a25062e2f@mail.gmail.com>	 <359a92830708130617ide2cd6ao9c71794ec8ddf46@mail.gmail.com> <839ba01c0708131856g5496c96bu42882cd26126cc3f@mail.gmail.com>
In-Reply-To: <839ba01c0708131856g5496c96bu42882cd26126cc3f@mail.gmail.com>
X-Enigmail-Version: 0.95.2
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Scanner: InterScan AntiVirus for Sendmail
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Cedric,

Cedric Ho wrote:
> On 8/13/07, Erick Erickson <erickerickson@gmail.com> wrote:
>> Are you iterating through a Hits object that has more than
>> 100 (maybe it's 200 now) entries? Are you loading each document that
>> satisfies the query? Etc. Etc.
> 
> Unfortunately, yes. And I know this is another big source for
> slowness. But due to some other reason that cannot be worked around at
> this stage. I'll have to return all hits for a search for now.
> For each document I get the docid (not the internal one in lucene),
> date and publication. I've already used FieldCache to cache all the 3
> fields.

I think you misunderstood Erick.  He was not telling you that you should
not retrieve all hits; instead, he was pointing out that there are more
efficient ways of doing so than using the search() method that returns a
Hits object.

>From <http://wiki.apache.org/lucene-java/ImproveSearchingSpeed>:

    Iterating over all hits is slow for two reasons.
    Firstly, the search() method that returns a Hits
    object re-executes the search internally when you
    need more than 100 hits. Solution: use the search
    method that takes a HitCollector instead.

Upon construction, a Hits object collects (at most) the top 100 hits'
scores and document IDs.  Each time you ask the Hits object for
information about a hit beyond what it has collected info for, it will
re-execute the search, collecting info on as many as double the
requested position, as long as there are further hits.  (And this is
Erick's point: you shouldn't be using an API that executes the same
search more than once.)

So for example, if you are iterating over the hits from a search
resulting in over 100 hits, when you ask for info on the 101st document
(n=100 in zero-based notation), the Hits object will re-execute the
search to collect info on the top 200 (n*2) documents; at the 201st
document, the top 400 documents' info will be collected; and so on.

There is another form of potential inefficiency resulting from usage of
the Hits object: it maintains an LRU cache of 200 Documents' stored
fields.  If you are already doing this elsewhere in your application, or
if you will only visit each Document once, then maintaining the cache
will only slow you down.

Steve

-- 
Steve Rowe
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 14 19:00:36 2007
Return-Path: <java-user-return-29811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85497 invoked from network); 14 Aug 2007 19:00:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2007 19:00:34 -0000
Received: (qmail 21551 invoked by uid 500); 14 Aug 2007 19:00:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21506 invoked by uid 500); 14 Aug 2007 19:00:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21493 invoked by uid 99); 14 Aug 2007 19:00:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 12:00:26 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [142.36.155.3] (HELO qpmailserv.qp.gov.bc.ca) (142.36.155.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 19:00:22 +0000
Received: from QPC122006 (qpc122006.qp.local [142.36.155.137])
	by qpmailserv.qp.gov.bc.ca (8.12.10/8.12.10) with ESMTP id l7EIoJdO026651
	for <java-user@lucene.apache.org>; Tue, 14 Aug 2007 11:50:22 -0700 (PDT)
From: "Spencer Tickner" <spencer.tickner@qp.gov.bc.ca>
To: <java-user@lucene.apache.org>
Subject: MultiSearcher with mulitple filter
Date: Tue, 14 Aug 2007 11:59:14 -0700
Message-ID: <003e01c7dea5$356e7530$899b248e@QP.local>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_003F_01C7DE6A.890F9D30"
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcfepTVWp1+WaQeUSdSy6MwjdUbWNQ==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_003F_01C7DE6A.890F9D30
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi List,

 

Thanks in advance for the help. I can't wrap my head around the
MultiSearcher. I need to search across multiple indexes, but also need to
filter documents from users based on Access. The problem seems to be that
MultiSearcher takes in 1 filter, however my filter varies from one index to
another. Any advice on implementing this would be a huge help.

 

Thanks,

 

Spencer

 


------=_NextPart_000_003F_01C7DE6A.890F9D30--



From java-user-return-29812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 14 19:15:05 2007
Return-Path: <java-user-return-29812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92562 invoked from network); 14 Aug 2007 19:15:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2007 19:15:04 -0000
Received: (qmail 41313 invoked by uid 500); 14 Aug 2007 19:14:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40422 invoked by uid 500); 14 Aug 2007 19:14:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40411 invoked by uid 99); 14 Aug 2007 19:14:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 12:14:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 19:14:50 +0000
Received: by py-out-1112.google.com with SMTP id f31so5448549pyh
        for <java-user@lucene.apache.org>; Tue, 14 Aug 2007 12:14:28 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=DyNX8HVpbB3yy2EzfRUsMyx9FzXn+fA+JLehH3kjAztiJG/zrl7N34Ie9zM2EQ8bFsVsmzeSRNjz+73a2tpWl1FJVEidRxziLeNlj7/iLP5XwPuCw4CvUJ1htNC0kcw1BLVasd6o/gYc4/5UsCNZjYSdd4kAbmZdDQSyzI2Pduc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=clO6IaRWTXGvA2EV7kQ/ogqZybm4DoJStY8FCCtwsU1MApxO3NMQ7moxSjmDSq3o1Ps4/BtIP0A5B9R9CRkMJRr2I5OI4ldNiHlIbApue+q+NE9k9vHPbnkC9OSw2g49Mg/UmhRB+nE31SNCh6lx0oZL6QPXa6Gsh9rHqg/t/20=
Received: by 10.65.254.5 with SMTP id g5mr12347842qbs.1187118475353;
        Tue, 14 Aug 2007 12:07:55 -0700 (PDT)
Received: from ?192.168.1.108? ( [69.120.105.246])
        by mx.google.com with ESMTPS id d12sm3783165qbc.2007.08.14.12.07.54
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 14 Aug 2007 12:07:54 -0700 (PDT)
Message-ID: <46C1FD6F.2010102@gmail.com>
Date: Tue, 14 Aug 2007 15:07:27 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: MultiSearcher with mulitple filter
References: <003e01c7dea5$356e7530$899b248e@QP.local>
In-Reply-To: <003e01c7dea5$356e7530$899b248e@QP.local>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Here is a hint:

package org.apache.lucene.search;


import java.io.IOException;

/**
* Implements search over a set of <code>Searchables</code> using 
multiple filters.
 */
public class MultiFilterMultiSearcher extends MultiSearcher {

    public MultiFilterMultiSearcher(Searchable[] searchables)
        throws IOException {
        super(searchables);

    }
   

/**
 * Pass filter for Searchable[i] as filter[i].
 */
    public TopDocs search(Weight weight, Filter[] filters, int nDocs)
        throws IOException {
        HitQueue hq = new HitQueue(nDocs);
        int totalHits = 0;

        int[] starts = getStarts();
        Searchable[] searchables = getSearchables();
        for (int i = 0; i < searchables.length; i++) { // search each 
searcher
            TopDocs docs = searchables[i].search(weight, filters[i], nDocs);
            totalHits += docs.totalHits; // update totalHits

            ScoreDoc[] scoreDocs = docs.scoreDocs;

            for (int j = 0; j < scoreDocs.length; j++) { // merge 
scoreDocs into hq

                ScoreDoc scoreDoc = scoreDocs[j];
                scoreDoc.doc += starts[i]; // convert doc

                if (!hq.insert(scoreDoc)) {
                    break; // no more scores > minScore
                }
            }
        }

        ScoreDoc[] scoreDocs = new ScoreDoc[hq.size()];

        for (int i = hq.size() - 1; i >= 0; i--) // put docs in array

            scoreDocs[i] = (ScoreDoc) hq.pop();

        float maxScore = (totalHits == 0) ? Float.NEGATIVE_INFINITY
                                          : scoreDocs[0].score;

        return new TopDocs(totalHits, scoreDocs, maxScore);
    }

    public TopFieldDocs search(Weight weight , Filter[] filters, int n, 
Sort sort)
        throws IOException {
        FieldDocSortedHitQueue hq = null;
        int totalHits = 0;

        float maxScore = Float.NEGATIVE_INFINITY;
        int[] starts = getStarts();
        Searchable[] searchables = getSearchables();

        for (int i = 0; i < searchables.length; i++) { // search each 
searcher

            TopFieldDocs docs = searchables[i].search(weight, 
filters[i], n, sort);

            if (hq == null) {
                hq = new FieldDocSortedHitQueue(docs.fields, n);
            }

            totalHits += docs.totalHits; // update totalHits
            maxScore = Math.max(maxScore, docs.getMaxScore());

            ScoreDoc[] scoreDocs = docs.scoreDocs;

            for (int j = 0; j < scoreDocs.length; j++) { // merge 
scoreDocs into hq

                ScoreDoc scoreDoc = scoreDocs[j];
                scoreDoc.doc += starts[i]; // convert doc

                if (!hq.insert(scoreDoc)) {
                    break; // no more scores > minScore
                }
            }
        }

        ScoreDoc[] scoreDocs = new ScoreDoc[hq.size()];

        for (int i = hq.size() - 1; i >= 0; i--) // put docs in array

            scoreDocs[i] = (ScoreDoc) hq.pop();

        return new TopFieldDocs(totalHits, scoreDocs, hq.getFields(), 
maxScore);
    }
 
}

- Mark

Spencer Tickner wrote:
> Hi List,
>
>  
>
> Thanks in advance for the help. I can't wrap my head around the
> MultiSearcher. I need to search across multiple indexes, but also need to
> filter documents from users based on Access. The problem seems to be that
> MultiSearcher takes in 1 filter, however my filter varies from one index to
> another. Any advice on implementing this would be a huge help.
>
>  
>
> Thanks,
>
>  
>
> Spencer
>
>  
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 14 19:31:00 2007
Return-Path: <java-user-return-29813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8301 invoked from network); 14 Aug 2007 19:30:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2007 19:30:57 -0000
Received: (qmail 59136 invoked by uid 500); 14 Aug 2007 19:30:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59098 invoked by uid 500); 14 Aug 2007 19:30:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59087 invoked by uid 99); 14 Aug 2007 19:30:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 12:30:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [142.36.155.3] (HELO qpmailserv.qp.gov.bc.ca) (142.36.155.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 19:30:59 +0000
Received: from QPC122006 (qpc122006.qp.local [142.36.155.137])
	by qpmailserv.qp.gov.bc.ca (8.12.10/8.12.10) with ESMTP id l7EJKedO027241
	for <java-user@lucene.apache.org>; Tue, 14 Aug 2007 12:20:42 -0700 (PDT)
From: "Spencer Tickner" <spencer.tickner@qp.gov.bc.ca>
To: <java-user@lucene.apache.org>
References: <003e01c7dea5$356e7530$899b248e@QP.local> <46C1FD6F.2010102@gmail.com>
Subject: RE: MultiSearcher with mulitple filter
Date: Tue, 14 Aug 2007 12:29:35 -0700
Message-ID: <004601c7dea9$72a56630$899b248e@QP.local>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Acfepg7xI9iixQWIRlGBZCT+jgH0fgAA0+hA
In-Reply-To: <46C1FD6F.2010102@gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Wow Mark, quite the hint. Thanks so much.

Spencer

-----Original Message-----
From: Mark Miller [mailto:markrmiller@gmail.com] 
Sent: August 14, 2007 12:07 PM
To: java-user@lucene.apache.org
Subject: Re: MultiSearcher with mulitple filter

Here is a hint:

package org.apache.lucene.search;


import java.io.IOException;

/**
* Implements search over a set of <code>Searchables</code> using 
multiple filters.
 */
public class MultiFilterMultiSearcher extends MultiSearcher {

    public MultiFilterMultiSearcher(Searchable[] searchables)
        throws IOException {
        super(searchables);

    }
   

/**
 * Pass filter for Searchable[i] as filter[i].
 */
    public TopDocs search(Weight weight, Filter[] filters, int nDocs)
        throws IOException {
        HitQueue hq = new HitQueue(nDocs);
        int totalHits = 0;

        int[] starts = getStarts();
        Searchable[] searchables = getSearchables();
        for (int i = 0; i < searchables.length; i++) { // search each 
searcher
            TopDocs docs = searchables[i].search(weight, filters[i], nDocs);
            totalHits += docs.totalHits; // update totalHits

            ScoreDoc[] scoreDocs = docs.scoreDocs;

            for (int j = 0; j < scoreDocs.length; j++) { // merge 
scoreDocs into hq

                ScoreDoc scoreDoc = scoreDocs[j];
                scoreDoc.doc += starts[i]; // convert doc

                if (!hq.insert(scoreDoc)) {
                    break; // no more scores > minScore
                }
            }
        }

        ScoreDoc[] scoreDocs = new ScoreDoc[hq.size()];

        for (int i = hq.size() - 1; i >= 0; i--) // put docs in array

            scoreDocs[i] = (ScoreDoc) hq.pop();

        float maxScore = (totalHits == 0) ? Float.NEGATIVE_INFINITY
                                          : scoreDocs[0].score;

        return new TopDocs(totalHits, scoreDocs, maxScore);
    }

    public TopFieldDocs search(Weight weight , Filter[] filters, int n, 
Sort sort)
        throws IOException {
        FieldDocSortedHitQueue hq = null;
        int totalHits = 0;

        float maxScore = Float.NEGATIVE_INFINITY;
        int[] starts = getStarts();
        Searchable[] searchables = getSearchables();

        for (int i = 0; i < searchables.length; i++) { // search each 
searcher

            TopFieldDocs docs = searchables[i].search(weight, 
filters[i], n, sort);

            if (hq == null) {
                hq = new FieldDocSortedHitQueue(docs.fields, n);
            }

            totalHits += docs.totalHits; // update totalHits
            maxScore = Math.max(maxScore, docs.getMaxScore());

            ScoreDoc[] scoreDocs = docs.scoreDocs;

            for (int j = 0; j < scoreDocs.length; j++) { // merge 
scoreDocs into hq

                ScoreDoc scoreDoc = scoreDocs[j];
                scoreDoc.doc += starts[i]; // convert doc

                if (!hq.insert(scoreDoc)) {
                    break; // no more scores > minScore
                }
            }
        }

        ScoreDoc[] scoreDocs = new ScoreDoc[hq.size()];

        for (int i = hq.size() - 1; i >= 0; i--) // put docs in array

            scoreDocs[i] = (ScoreDoc) hq.pop();

        return new TopFieldDocs(totalHits, scoreDocs, hq.getFields(), 
maxScore);
    }
 
}

- Mark

Spencer Tickner wrote:
> Hi List,
>
>  
>
> Thanks in advance for the help. I can't wrap my head around the
> MultiSearcher. I need to search across multiple indexes, but also need to
> filter documents from users based on Access. The problem seems to be that
> MultiSearcher takes in 1 filter, however my filter varies from one index
to
> another. Any advice on implementing this would be a huge help.
>
>  
>
> Thanks,
>
>  
>
> Spencer
>
>  
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 14 19:41:40 2007
Return-Path: <java-user-return-29814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17413 invoked from network); 14 Aug 2007 19:41:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2007 19:41:39 -0000
Received: (qmail 83146 invoked by uid 500); 14 Aug 2007 19:41:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83009 invoked by uid 500); 14 Aug 2007 19:41:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82998 invoked by uid 99); 14 Aug 2007 19:41:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 12:41:30 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a12.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 19:41:23 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a12.g.dreamhost.com (Postfix) with ESMTP id 1AA847FBC
	for <java-user@lucene.apache.org>; Tue, 14 Aug 2007 12:41:02 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <ae6f38f60708140857i3c9c8364qe61031f707fdfc72@mail.gmail.com>
References: <ae6f38f60708140857i3c9c8364qe61031f707fdfc72@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <CF130F8A-BB54-4621-80F0-BCBD907914E0@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Rank based on lists.
Date: Tue, 14 Aug 2007 15:40:44 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Aug 14, 2007, at 11:57 AM, Walt Stoneburner wrote:

> Grant,
>
>   Thanks for pointing me at the DisjunctionMaxQuery, though you're
> correct, this is close but not exactly what I want.
>
>   I think the difference lies in that it's not which subexpression had
> the greater score, but that a normally lower scoring document should
> get its rank elevated because it appears in the results of different
> subexpressions.
>
>   Suppose I have three queries and in each case I got the same
> document back with a result of 0.000001.
>
>   While in the context of any given query, the document in totally
> insignificant.
>
>   However, for my use case, because it showed up in all three queries,
> this has substantial meaning to me, and it now becomes the most
> important document.

Do you know which subqueries this should happen for or is it just any  
three subqueries out of X number of queries?  And how do you know it  
showed up in the three queries?  Are you running the queries separately?

Could you provide an example or two of your queries?


>
>   I'd ideally like to have the union of all the query results
> returned, but with my document ranked at the top.
>
>   I'm getting this sinking feeling of post-processing a returned  
> Hits list.
>


Sounds that way to me, but maybe if you got creative you could create  
your own Query, but don't hold me to that.  Do try to fill us in with  
more info on what you are doing, as there might still be a solution  
out there...

Cheers,
Grant


--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 14 19:41:54 2007
Return-Path: <java-user-return-29815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17611 invoked from network); 14 Aug 2007 19:41:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2007 19:41:53 -0000
Received: (qmail 84997 invoked by uid 500); 14 Aug 2007 19:41:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84967 invoked by uid 500); 14 Aug 2007 19:41:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84956 invoked by uid 99); 14 Aug 2007 19:41:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 12:41:44 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jpsondag@gmail.com designates 209.85.198.186 as permitted sender)
Received: from [209.85.198.186] (HELO rv-out-0910.google.com) (209.85.198.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 19:41:38 +0000
Received: by rv-out-0910.google.com with SMTP id k20so1226370rvb
        for <java-user@lucene.apache.org>; Tue, 14 Aug 2007 12:41:18 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=gCM+KXPuSUJCto/rKloWjq5THVFnU1macKFghZoQ+Y4Kkvo0IVbnB6vzTrLF+afSqR3abzMVPTOGj7/+Bf9z7Bs49qSnyXJdoVNRcjAy4LxOT5fK+aPHq0W1Y4+4ESaPFQq6XDhnaPLKKMBhZlT8bqjJU+QU27G3w7mhbXPZPUE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=KvVjecumOb04RGYAo8nnmCefBb+1eP4jJWO5ATaAN6rsaU1v2SYQ8mdhUO1JUA3bBgbFbim3bsGCKdENziquz3GqJwgMGonz5Xa7Cp2b2X8lB3rk6GETigg6qIkNG7bSmIOP4DhwJMSuFWnLIca2hp1XNpyCb5V8GZz4wtfk5vM=
Received: by 10.141.74.17 with SMTP id b17mr774190rvl.1187120049035;
        Tue, 14 Aug 2007 12:34:09 -0700 (PDT)
Received: by 10.140.200.19 with HTTP; Tue, 14 Aug 2007 12:34:08 -0700 (PDT)
Message-ID: <bd67edef0708141234u7e9ee531s2d80b399b20ee983@mail.gmail.com>
Date: Tue, 14 Aug 2007 14:34:08 -0500
From: "John Paul Sondag" <jsondag2@uiuc.edu>
Sender: jpsondag@gmail.com
To: java-user@lucene.apache.org
Subject: =?GB2312?B?UmU6ILTwuLQ6IEluZGV4aW5nIGNvcnJlY3RseT8=?=
In-Reply-To: <8E5BA7FAF994C6409A8E074B78EB4677013653B4@14sha-msg02.zm.sd.mediazone.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2714_11433664.1187120048986"
References: <8E5BA7FAF994C6409A8E074B78EB4677013653B4@14sha-msg02.zm.sd.mediazone.com>
X-Google-Sender-Auth: c78365626b21fd56
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2714_11433664.1187120048986
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: base64
Content-Disposition: inline

SGVsbG8gYWdhaW4sCgpUaGUgZmlsZSBhcmUgbG9jYWwsIHNvcnJ5IGZvciB1c2luZyB0aGUgY29u
ZnVzaW5nIC9tb3VudHMuLi4uLCBJIGNhbiBzZWUKd2hlcmUgdGhhdCBpcyBjb25mdXNpbmcuCgpX
aGF0IGV4YWN0bHkgaXMgYSBSQU1EaXJlY3RvcnksIEkgZGlkbid0IHNlZSBpdCBtZW50aW9uZWQg
b24gdGhhdCBwYWdlLiAgSXMKdGhlcmUgZXhhbXBsZSBjb2RlIG9mIHVzaW5nIGl0PyAgIERvIEkg
anVzdCBjcmVhdGUgYSBSYW0gRGlyZWN0b3J5IGFuZCB0aGVuCnVzZSBpdCBsaWtlIGl0J3MgYSBu
b3JtYWwgZGlyZWN0b3J5PwoKLS1KUAoKT24gOC8xMy8wNywgS2FpIEh1IDxrYWkuaHVAZHVzZWUu
Y24+IHdyb3RlOgo+Cj4gSGksIEpvaG4KPiAgICAgICAgIEkgdGhpbmsgeW91IGNvc3QgdG9vIG11
Y2ggdGltZSBpbiBJL08sYW5kIGlmIHlvdSB1c2UgUkFNRGlyZWN0b3J5Cj4gZmlyc3Qgd2lsbCBi
ZXR0ZXIuc2VlCj4gaHR0cDovL3dpa2kuYXBhY2hlLm9yZy9sdWNlbmUtamF2YS9JbXByb3ZlSW5k
ZXhpbmdTcGVlZAo+Cj4ga2FpCj4KPiAtLS0tLdPKvP7Urbz+LS0tLS0KPiC3orz+yMs6IEVyaWNr
IEVyaWNrc29uIFttYWlsdG86ZXJpY2tlcmlja3NvbkBnbWFpbC5jb21dCj4gt6LLzcqxvOQ6IDIw
MDfE6jjUwjEzyNUg0MfG2tK7IDE6NTcKPiDK1bz+yMs6IGphdmEtdXNlckBsdWNlbmUuYXBhY2hl
Lm9yZwo+INb3zOI6IFJlOiBJbmRleGluZyBjb3JyZWN0bHk/Cj4KPiBXaGVyZSBhcmUgeW91ciBz
b3VyY2UgZmlsZXMgYW5kIGluZGV4PyBJZiB0aGV5J3JlIHNvbWV3aGVyZQo+IG91dCB0aGVyZSBv
biB0aGUgbmV0d29yaywgeW91IG1heSBiZSBoYXZpbmcgc29tZSBzbG93ZG93bgo+IGJlY2F1c2Ug
b2YgbmV0d29yayBsYXRlbmN5ICh0aGUgcGFydCBhYm91dCAiL21vdW50Ly4uLi4uIiBsZWFkcwo+
IG1lIHRvIGFzayB0aGlzIG9uZSkuCj4KPiBJZiB0aGlzIGlzIHRoZSBjYXNlLCB5b3UgbWlnaHQg
Z2V0IGFuIGltcHJvdmVtZW50IGlmIGFsbCB0aGUgZmlsZXMgYXJlCj4gbG9jYWwuLi4KPgo+IEJl
c3QKPiBFcmljawo+Cj4gT24gOC8xMS8wNywgSm9obiBQYXVsIFNvbmRhZyA8anNvbmRhZzJAdWl1
Yy5lZHU+IHdyb3RlOgo+ID4KPiA+IEl0IHRha2VzIHJvdWdobHkgNiBob3VycyBmb3IgbWUgdG8g
aW5kZXggYSBHaWcgb2YgZGF0YS4gIFRoZSBiZW5jaG1hcmtzCj4gPiB0YWtlCj4gPiBxdWl0ZSBh
IGJpdCBsZXNzIGlmIEknbSByZWFkaW5nIGl0IGNvcnJlY3RseS4gIEknbGwgdHJ5IG91dCB0aGUK
PiA+IFN0cmluZ0J1ZmZlci9CdWlsZGVyIGFuZCBsZXQgeW91IGtub3cuICBUaGFua3MgZm9yIHRo
ZSBxdWljayByZXNwb25zZQo+IGFuZAo+ID4gaWYKPiA+IHlvdSBoYXZlIGFueSBtb3JlIHN1Z2dl
c3Rpb25zIHBsZWFzZSBsZXQgbWUga25vdy4KPiA+Cj4gPiAtLUpQCj4gPgo+ID4gT24gOC8xMS8w
Nywga2FybCB3ZXR0aW4gPGthcmwud2V0dGluQGdtYWlsLmNvbT4gd3JvdGU6Cj4gPiA+Cj4gPiA+
IEhvdyBtdWNoIHNsb3dlciB0aGFuIGFudGljaXBhdGVkIGlzIGl0Pwo+ID4gPgo+ID4gPiBJIHdv
dWxkIHN0YXJ0IGJ5IHVzaW5nIGEgU3RyaW5nQnVmZmVyL0J1aWxkZXIgcmF0aGVyIHRoYW4gYXBw
ZW5kaW5nCj4gPiA+IChpbW11dGFibGUpIHN0cmluZ3MgdG8gZWFjaCBvdGhlci4KPiA+ID4KPiA+
ID4KPiA+ID4gMTEgYXVnIDIwMDcga2wuIDE5LjA1IHNrcmV2IEpvaG4gUGF1bCBTb25kYWc6Cj4g
PiA+Cj4gPiA+ID4gSGksCj4gPiA+ID4KPiA+ID4gPiBJIHdhcyBob3BpbmcgdGhhdCBtYXliZSB5
b3UgZ3V5cyBjb3VsZCBzZWUgaWYgSSdtIHNvbWVob3cgaW5kZXhpbmcKPiA+ID4gPiBpbmVmZmlj
aWVudGx5LiAgSSdtIHB1dHRpbmcgcmVsZXZhbnQgcGFydHMgb2YgbXkgY29kZSBiZWxvdy4gIEkn
dmUKPiA+ID4gPiBsb29rZWQgYXQKPiA+ID4gPiB0aGUgImJlbmNobWFya3MiIHBhZ2Ugb24gTHVj
ZW5lIGFuZCBteSBpbmRleGluZyB0aW1lIGlzIHRha2luZyBhCj4gPiA+ID4gc3Vic3RhbnRpYWwK
PiA+ID4gPiBhbW91bnQgb2YgdGltZSBtb3JlIHRoYW4gd2hhdCBJIHNlZSBwb3N0ZWQuICBJJ20g
bm90IHN1cmUgd2hlbiBJCj4gPiA+ID4gc2hvdWxkIGNhbGwKPiA+ID4gPiBmbHVzaCgpICggSSBz
YXcgdGhhdCBJIHNob3VsZCBiZSBkb2luZyB0aGF0IG9uIHRoZQo+ID4gPiA+IEltcHJvdmVJbmRl
eGluZ1NwZWVkCj4gPiA+ID4gcGFnZSkuICBJJ2QgcmVhbGx5IGFwcHJlY2lhdGUgYW55IGFkdmlj
ZS4KPiA+ID4gPgo+ID4gPiA+IEhlcmUncyBteSBjb2RlOgo+ID4gPiA+Cj4gPiA+ID4gICAgICAg
RmlsZSBkaXJlY3RvcnkgPSBuZXcgRmlsZSggIi9tb3VudHMvZmFsY29uNS9kaXNrcy8wL3RjaGVu
ZzMvCj4gPiA+ID4gRGF0YXNldCIpOwo+ID4gPiA+ICAgICAgIEZpbGVbXSB0aGVGaWxlcyA9IGRp
cmVjdG9yeS5saXN0RmlsZXMoKTsKPiA+ID4gPgo+ID4gPiA+ICAgICAgICAgICAvL2dvIHRocm91
Z2ggZWFjaCBmaWxlIGluc2lkZSB0aGUgZGlyZWN0b3J5IGFuZCBpbmRleCBpdAo+ID4gPiA+ICAg
ICAgICAgICBmb3IoaW50IGN1ckZpbGUgPSAwOyBjdXJGaWxlIDwgdGhlRmlsZXMubGVuZ3RoOyBj
dXJGaWxlKyspCj4gPiA+ID4gICAgICAgICAgIHsKPiA+ID4gPiAgICAgICAgICAgICAgIEZpbGUg
ZmluPXRoZUZpbGVzW2N1ckZpbGVdOwo+ID4gPiA+Cj4gPiA+ID4gICAgICAgICAgICAgICAvL29w
ZW4gdXAgdGhlIGZpbGUKPiA+ID4gPiAgICAgICAgICAgICAgIEZpbGVJbnB1dFN0cmVhbSBpbmYg
PSBuZXcgRmlsZUlucHV0U3RyZWFtKGZpbik7Cj4gPiA+ID4gICAgICAgICAgICAgICBJbnB1dFN0
cmVhbVJlYWRlciBpc3IgPSBuZXcgSW5wdXRTdHJlYW1SZWFkZXIoaW5mLAo+ID4gPiA+ICJVUy1B
U0NJSSIpOwo+ID4gPiA+ICAgICAgICAgICAgICAgQnVmZmVyZWRSZWFkZXIgaW4gPSBuZXcgQnVm
ZmVyZWRSZWFkZXIoaXNyKTsKPiA+ID4gPiAgICAgICAgICAgICAgIFN0cmluZyB0ZXh0PSIiOwo+
ID4gPiA+ICAgICAgICAgICAgICAgU3RyaW5nIGRvY2lkPSIiOwo+ID4gPiA+Cj4gPiA+ID4gICAg
ICAgICAgICAgd2hpbGUgKHRydWUpIHsKPiA+ID4gPgo+ID4gPiA+ICAgICAgICAgICAgIC8vcmVh
ZCBpbiB0aGUgZmlsZSBvbmUgbGluZSBhdCBhIHRpbWUsIGFuZCBhY3QKPiBhY2NvcmRpbmdseQo+
ID4gPiA+ICAgICAgICAgICAgICAgICBTdHJpbmcgbGluZSA9IGluLnJlYWRMaW5lKCk7Cj4gPiA+
ID4gICAgICAgICAgICAgICAgIGlmIChsaW5lID09IG51bGwpIHsgYnJlYWs7fQo+ID4gPiA+Cj4g
PiA+ID4gICAgICAgICAgICAgICAgICBpZiAobGluZS5zdGFydHNXaXRoKCI8RE9DPiIpICkgewo+
ID4gPiA+ICAgICAgICAgICAgICAgICAgICAgLy9nZXQgZG9jSUQKPiA+ID4gPiAgICAgICAgICAg
ICAgICAgICAgIGxpbmUgPSBpbi5yZWFkTGluZSgpOwo+ID4gPiA+ICAgICAgICAgICAgICAgICAg
ICAgU3RyaW5nIHRlbXBTdHIgPSBsaW5lLnN1YnN0cmluZyg4LGxpbmUubGVuZ3RoCj4gKCkpOwo+
ID4gPiA+ICAgICAgICAgICAgICAgICAgICAgaW50IHBvcyA9IHRlbXBTdHIuaW5kZXhPZignICcp
Owo+ID4gPiA+ICAgICAgICAgICAgICAgICAgICAgZG9jaWQgPSB0ZW1wU3RyLnN1YnN0cmluZygw
LHBvcyk7Cj4gPiA+ID4gICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZiAobGluZS5zdGFydHNX
aXRoKCI8L0RPQz4iKSkgewo+ID4gPiA+Cj4gPiA+ID4gICAgICAgICAgICAgICAgICAgICBEb2N1
bWVudCBkb2MgPSBuZXcgRG9jdW1lbnQoKTsKPiA+ID4gPgo+ID4gPiA+ICAgICAgICAgICAgICAg
ICAgICAgICBkb2MuYWRkKG5ldyBGaWVsZCgiY29udGVudHMiLHRleHQsCj4gPiA+ID4gRmllbGQu
U3RvcmUuTk8sCj4gPiA+ID4gRmllbGQuSW5kZXguVE9LRU5JWkVELCBGaWVsZC5UZXJtVmVjdG9y
LldJVEhfUE9TSVRJT05TICkpOwo+ID4gPiA+ICAgICAgICAgICAgICAgICAgICAgZG9jLmFkZChu
ZXcgRmllbGQoIkRvY0lEIixkb2NpZCwgRmllbGQuU3RvcmUuWUVTCj4gLAo+ID4gPiA+IEZpZWxk
LkluZGV4Lk5PKSk7Cj4gPiA+ID4gICAgICAgICAgICAgICAgICAgICAgIHdyaXRlci5hZGREb2N1
bWVudChkb2MpOwo+ID4gPiA+ICAgICAgICAgICAgICAgICAgICAgdGV4dD0iIjsKPiA+ID4gPiAg
ICAgICAgICAgICAgICAgfSBlbHNlIHsKPiA+ID4gPiAgICAgICAgICAgICAgICAgICAgIHRleHQg
PSB0ZXh0ICsgIlxuIiArIGxpbmU7Cj4gPiA+ID4gICAgICAgICAgICAgICAgIH0KPiA+ID4gPiAg
ICAgICAgICAgICB9Cj4gPiA+ID4KPiA+ID4gPiAgICAgICAgIH0KPiA+ID4gPgo+ID4gPiA+Cj4g
PiA+ID4gICAgICAgICAgIGludCBudW1JbmRleGVkID0gd3JpdGVyLmRvY0NvdW50KCk7Cj4gPiA+
ID4KPiA+ID4gPiAgICAgICAgICAgd3JpdGVyLm9wdGltaXplKCk7Cj4gPiA+ID4gICAgICAgICAg
IHdyaXRlci5jbG9zZSgpOwo+ID4gPiA+Cj4gPiA+ID4KPiA+ID4gPiBUaGFua3MsCj4gPiA+ID4K
PiA+ID4gPiAtLUpQCj4gPiA+Cj4gPiA+Cj4gPiA+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+ID4gPiBUbyB1bnN1
YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcK
PiA+ID4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVj
ZW5lLmFwYWNoZS5vcmcKPiA+ID4KPiA+ID4KPiA+Cj4KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiBUbyB1bnN1
YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcK
PiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUu
YXBhY2hlLm9yZwo+Cj4K
------=_Part_2714_11433664.1187120048986--

From java-user-return-29816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 14 20:17:23 2007
Return-Path: <java-user-return-29816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26489 invoked from network); 14 Aug 2007 20:17:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2007 20:17:22 -0000
Received: (qmail 34607 invoked by uid 500); 14 Aug 2007 20:17:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34574 invoked by uid 500); 14 Aug 2007 20:17:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34563 invoked by uid 99); 14 Aug 2007 20:17:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 13:17:13 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 20:17:26 +0000
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 6DED995A0E; Tue, 14 Aug 2007 13:16:48 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 52F6323701
	for <java-user@lucene.apache.org>; Tue, 14 Aug 2007 13:16:48 -0700 (PDT)
Date: Tue, 14 Aug 2007 13:16:48 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Rank based on lists.
In-Reply-To: <ae6f38f60708140857i3c9c8364qe61031f707fdfc72@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0708141312370.4844@hal.rescomp.berkeley.edu>
References: <ae6f38f60708140857i3c9c8364qe61031f707fdfc72@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

:   Thanks for pointing me at the DisjunctionMaxQuery, though you're
: correct, this is close but not exactly what I want.
:
:   I think the difference lies in that it's not which subexpression had
: the greater score, but that a normally lower scoring document should
: get its rank elevated because it appears in the results of different
: subexpressions.

i'm not following you -- i think if you use an outermost BooleanQuery with
a very strict coord factor which contains DisjunctionSumQuery inner
queries with a tie breaker value of "0.0" then the score should be
dominately affected by how many clauses of the outermost query are matched
-- the number of clauses matched by the inner query will be largely
irrelevant.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 14 20:23:40 2007
Return-Path: <java-user-return-29817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28493 invoked from network); 14 Aug 2007 20:23:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2007 20:23:39 -0000
Received: (qmail 40881 invoked by uid 500); 14 Aug 2007 20:23:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40839 invoked by uid 500); 14 Aug 2007 20:23:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40828 invoked by uid 99); 14 Aug 2007 20:23:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 13:23:32 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 20:23:44 +0000
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 6177795A10; Tue, 14 Aug 2007 13:23:08 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 4C09823701
	for <java-user@lucene.apache.org>; Tue, 14 Aug 2007 13:23:08 -0700 (PDT)
Date: Tue, 14 Aug 2007 13:23:08 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Question on custom scoring
In-Reply-To: <12136012.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0708141319080.4844@hal.rescomp.berkeley.edu>
References: <12136012.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: [1] I need to rank matches by some combination of keyword match, popularity
: and recency of the doc. I read the docs about CustomScoreQuery and seems to
: be a resonable fit. An alternate way of achieving my goals is  to use a
: custom sort. What are the trade-offs between these two approaches?

it's kind of an apples vs orange juice question -- CustomScoreQuery is
about influencing the scores matching documents get as they are collected,
custom sorting is about ordering the results of a search by an arbitrary
criteria after they are collected.  if you want to write some code that
can generally be reusable for influencing hte score no matter what other
types of queries (or boosts on those queries) it's combined with, that
would be a CustomScoreQuery -- if you want to write something that will
give you docs in a particular ordering no matter what kind of underlying
query/boosts are used, that's a custom sort.

the tradeoffs are your goals.

: [b] The subQueryScore that is returned in the customScore() API doesnt seem
: to be normalized. This makes it difficult for me to weight the different
: scores properly. Is there an easy way to get the normalized "text index"
: score in customScore() API so I can easaily weigh in the other factors
: relative to it?

normalized relative to what?



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 14 20:29:47 2007
Return-Path: <java-user-return-29818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29618 invoked from network); 14 Aug 2007 20:29:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2007 20:29:45 -0000
Received: (qmail 51659 invoked by uid 500); 14 Aug 2007 20:29:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51620 invoked by uid 500); 14 Aug 2007 20:29:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51609 invoked by uid 99); 14 Aug 2007 20:29:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 13:29:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.104.95.4] (HELO listing.marketingbrokers.com) (66.104.95.4)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 14 Aug 2007 20:29:47 +0000
Received: from ip66-104-95-21.z95-104-66.customer.algx.net ([66.104.95.21])
          by listing.marketingbrokers.com (JAMES SMTP Server 2.2.0) with SMTP ID 1021
          for <java-user@lucene.apache.org>;
          Tue, 14 Aug 2007 13:28:48 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <52c3ddca0708100556w14b9f852yde1357f8de2b72d3@mail.gmail.com>
References: <52c3ddca0708100028qfcbd303m9d7e89b81692ff3b@mail.gmail.com> <46BC3E44.3020705@gmail.com> <52c3ddca0708100407x6a5aa303le32b0e058a7981f9@mail.gmail.com> <46BC534A.207@gmail.com> <52c3ddca0708100556w14b9f852yde1357f8de2b72d3@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D19D9FEE-F1A0-4ABD-A423-69AC87374B8C@marketingbrokers.com>
Content-Transfer-Encoding: 7bit
From: "Peter W." <peter@marketingbrokers.com>
Subject: Re: How to keep user search history and how to turn it into information?
Date: Tue, 14 Aug 2007 13:28:47 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hey Lukas,

You can get a basic demo of this working in Lucene
first then make a more advanced and efficient version.

First, give each document in your index a score field
using NumberTools so it's sortable. When users perform
a search, log the unique document_id, IP address and
result position for the next step.

Use Hadoop to simplifiy your logs by mapping the id
and emitting IP's as intermediate values. Have
reduce collect unique document_id[IP addresses].

Read thru final output file, increment score value for
each IP who clicked on the document_id, re-index
Lucene and sort results (reverse order) by score field.

A more advanced version could store previous result
positions as Payloads but I don't understand this
new Lucene concept.

Regards,

Peter W.

On Aug 10, 2007, at 5:56 AM, Lukas Vlcek wrote:

> Enis,
>
> Thanks for your time.
> I gave a quick glance at Pig and it seems good (seems it is  
> directly based
> on Hadoop which I am starting to play with :-). It obvious that a huge
> amount of data (like user queries or access logs) should be stored  
> in flat
> files which makes it convenient for further analysis by Pig (or  
> directly by
> Hadoop based tasks) or other tools. And I agree with you that size  
> of the
> index can be tracked in journal based style in separated log rather  
> then
> with every since user query. That is for the easier part of my  
> original
> question :-)
>
> The true art starts with the mining tasks itself. How to  
> efficiently use
> such data for bettering user experience with the search engine...
>
> On 8/10/07, Enis Soztutar <enis.soz.nutch@gmail.com> wrote:
>>>> ...

>>>> Web server log analysis is a very popular topic nowadays, and  
>>>> you can
>>>> check for the literature, especially clickthrough data anaysis.  
>>>> All the
>>>> major search engines has to interpret the data to improve their
>>>> algorithms, and to learn from the latent "collective knowlege"  
>>>> hidden
>>>> in web server logs.
>>>> ...

>> ...
>> You do not have to implement this from scratch. You just have to  
>> specify
>> your data mining tasks, then write scripts(in pig latin) or write
>> map-reduce programs (in hadoop). Either of these are not that  
>> hard. I do
>> not think that there is any tool which may satisfy all you  
>> information
>> needs. So at the risk of repeating myself i suggest you to look at  
>> pig
>> at write some scripts to mine the data...

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 14 20:53:13 2007
Return-Path: <java-user-return-29819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35736 invoked from network); 14 Aug 2007 20:53:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2007 20:53:10 -0000
Received: (qmail 87692 invoked by uid 500); 14 Aug 2007 20:53:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87334 invoked by uid 500); 14 Aug 2007 20:53:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87318 invoked by uid 99); 14 Aug 2007 20:53:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 13:53:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.104.95.4] (HELO listing.marketingbrokers.com) (66.104.95.4)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 14 Aug 2007 20:52:57 +0000
Received: from ip66-104-95-21.z95-104-66.customer.algx.net ([66.104.95.21])
          by listing.marketingbrokers.com (JAMES SMTP Server 2.2.0) with SMTP ID 349
          for <java-user@lucene.apache.org>;
          Tue, 14 Aug 2007 13:52:16 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <D19D9FEE-F1A0-4ABD-A423-69AC87374B8C@marketingbrokers.com>
References: <52c3ddca0708100028qfcbd303m9d7e89b81692ff3b@mail.gmail.com> <46BC3E44.3020705@gmail.com> <52c3ddca0708100407x6a5aa303le32b0e058a7981f9@mail.gmail.com> <46BC534A.207@gmail.com> <52c3ddca0708100556w14b9f852yde1357f8de2b72d3@mail.gmail.com> <D19D9FEE-F1A0-4ABD-A423-69AC87374B8C@marketingbrokers.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <45429329-B792-43CA-950F-A6981DB013C7@marketingbrokers.com>
Content-Transfer-Encoding: 7bit
From: "Peter W." <peter@marketingbrokers.com>
Subject: Re: How to keep user search history and how to turn it into information?
Date: Tue, 14 Aug 2007 13:52:15 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Lukas,

One last thing, be sure to log only when a user clicks on a result
and in Hadoop document_id will be a key in the map phase.

Lucene related steps are the same.

Best,

Peter W.


On Aug 14, 2007, at 1:28 PM, Peter W. wrote:

> When users perform
> a search, log the unique document_id, IP address and
> result position for the next step.
>
> Use Hadoop to simplifiy your logs by mapping the id
> and emitting IP's as intermediate values. Have
> reduce collect unique document_id[IP addresses].

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 14 23:26:14 2007
Return-Path: <java-user-return-29820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99979 invoked from network); 14 Aug 2007 23:26:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Aug 2007 23:26:13 -0000
Received: (qmail 25447 invoked by uid 500); 14 Aug 2007 23:26:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25409 invoked by uid 500); 14 Aug 2007 23:26:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25398 invoked by uid 99); 14 Aug 2007 23:26:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 16:26:05 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 80.76.149.212 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.212] (HELO ch-smtp01.sth.basefarm.net) (80.76.149.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 23:26:01 +0000
Received: from c83-249-118-113.bredband.comhem.se ([83.249.118.113]:55620 helo=[192.168.2.101])
	by ch-smtp01.sth.basefarm.net with esmtp (Exim 4.66)
	(envelope-from <karl.wettin@gmail.com>)
	id 1IL5lc-00045Q-4m
	for java-user@lucene.apache.org; Wed, 15 Aug 2007 01:25:40 +0200
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <bd67edef0708141234u7e9ee531s2d80b399b20ee983@mail.gmail.com>
References: <8E5BA7FAF994C6409A8E074B78EB4677013653B4@14sha-msg02.zm.sd.mediazone.com> <bd67edef0708141234u7e9ee531s2d80b399b20ee983@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B1723B32-8AC1-457A-BFEC-69C63DD3484A@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: =?UTF-8?Q?Re:_=E7=AD=94=E5=A4=8D:_Indexing_correctly=3F?=
Date: Wed, 15 Aug 2007 01:20:45 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Originating-IP: 83.249.118.113
X-Scan-Result: No virus found in message 1IL5lc-00045Q-4m.
X-Scan-Signature: ch-smtp01.sth.basefarm.net 1IL5lc-00045Q-4m dafa710007db82d256026f1dc522fcb9
X-Virus-Checked: Checked by ClamAV on apache.org


14 aug 2007 kl. 21.34 skrev John Paul Sondag:

> What exactly is a RAMDirectory, I didn't see it mentioned on that  
> page.  Is
> there example code of using it?   Do I just create a Ram Directory  
> and then
> use it like it's a normal directory?

Yes, it is just like FSDirectory, but resides in RAM and is not  
persistent.

<http://www.google.com/search?q=RAMDirectory>

-- 
karl





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 15 00:02:46 2007
Return-Path: <java-user-return-29821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13787 invoked from network); 15 Aug 2007 00:02:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Aug 2007 00:02:44 -0000
Received: (qmail 49683 invoked by uid 500); 15 Aug 2007 00:02:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49637 invoked by uid 500); 15 Aug 2007 00:02:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49626 invoked by uid 99); 15 Aug 2007 00:02:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 17:02:36 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 00:02:29 +0000
Received: by wa-out-1112.google.com with SMTP id j40so2575622wah
        for <java-user@lucene.apache.org>; Tue, 14 Aug 2007 17:02:09 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=CjsO7f1shsbHg/3+lDrPwEowh10vdvczLk+FRphKjN1wKn3ssE192T0LGUCKusGdrvqAc838wSPp+vpmLMeAzE4DN8hfKMBQhs6nK/xyDkXZG8EXGt0yVDIH4cuqQnTqGgG8/ha4F8RMEoBdFVDchpw2696BhkdaJ+CMDJFDHd8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WooSogLVZiySG9o6rtlPvB3CEctx3d5//NUfH3kH6udeGSINFVXu/Civfa47afDM4NfCq6YHMX60fsFQzRMceQk0HumnlJBCBFiP35WKiGVqxdG8GSIV6mUFJS/Kk3WsyDKtAP3FLPrnRCr5M4iLkyqPD3x0SS5FPYfv6SHgc4Q=
Received: by 10.115.74.1 with SMTP id b1mr2382220wal.1187136129526;
        Tue, 14 Aug 2007 17:02:09 -0700 (PDT)
Received: by 10.115.94.16 with HTTP; Tue, 14 Aug 2007 17:02:09 -0700 (PDT)
Message-ID: <e994873a0708141702k1aaa19ddg421ae3b5764c1a7d@mail.gmail.com>
Date: Tue, 14 Aug 2007 20:02:09 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: SpanQuery and database join
In-Reply-To: <25254169-18CF-4334-8C32-62BEA10C2770@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_208132_4465247.1187136129493"
References: <e994873a0708131133r785d5d52i87a5b1aaba6cbac7@mail.gmail.com>
	 <359a92830708131209p62e9988bw9416d9af0fcf2711@mail.gmail.com>
	 <e994873a0708131226w4f13b182jade375839da4d353@mail.gmail.com>
	 <25254169-18CF-4334-8C32-62BEA10C2770@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_208132_4465247.1187136129493
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I added this under Use Cases. Thanks for the suggestion.

Peter


On 8/13/07, Grant Ingersoll <gsingers@apache.org> wrote:
>
> There is also a Use Cases item on the Wiki...
>
> On Aug 13, 2007, at 3:26 PM, Peter Keegan wrote:
>
> > I suppose it could go under performance or HowTo/Interesting uses of
> > SpanQuery.
> >
> > Peter
> >
> > On 8/13/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >>
> >> Thanks for writing this up. Do you think this is an appropriate
> >> subject
> >> for the Wiki performance page?
> >>
> >> Erick
> >>
> >> On 8/13/07, Peter Keegan <peterlkeegan@gmail.com> wrote:
> >>>
> >>> I've been experimenting with using SpanQuery to perform what is
> >>> essentially
> >>> a limited type of database 'join'. Each document in the index
> >>> contains 1
> >>> or
> >>> more 'rows' of meta data from another 'table'. The meta data are
> >>> simple
> >>> tokens representing a column name/value pair ( e.g. color$red or
> >>> location$123).  Each row is represented by a span with a maximum
> >>> token
> >>> length equal to the maximum number of meta data columns. If a
> >>> column has
> >>> multiple values, they are all indexed at the same position ( e.g.
> >>> color$red,
> >>> color$blue). All rows are added to a single field. The spans are
> >>> 'separated'
> >>> from each other by introducing a position gap between them via '
> >>> Analyzer.getPositionIncrementGap'. This gap should be greater
> >>> than the
> >>> number of columns in each span.
> >>>
> >>> At query time, a SpanNearQuery is constructed to represent the
> >>> meta data
> >>> to
> >>> join. The 'slop' value is set to the maximum number of meta data
> >>> columns
> >>> (minus 1). Using a simple Antlr parser, boolean span queries with
> >>> AND,
> >> OR,
> >>> NOT can be constructed fairly easily. The SpanQuery is And'd to
> >>> the main
> >>> query to build the final query.
> >>>
> >>> This approach is flexible and pretty efficient because no stored
> >>> fields
> >> or
> >>> external data are accessed at query time. Span queries are more
> >> expensive
> >>> compared than other queries, though. We measure performance via
> >> throughput
> >>> (as opposed to the response time for a single query), and the
> >>> addition
> >> of
> >>> a
> >>> SpanQuery reduced throughput by 5X for ordered spans and 10X for
> >> unordered
> >>> spans. Still, this may be acceptable for some applications,
> >>> especially
> >> if
> >>> spans are not used on every query.
> >>>
> >>> I thought this might interest some of you.
> >>>
> >>> Peter
> >>>
> >>
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_208132_4465247.1187136129493--

From java-user-return-29822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 15 01:08:21 2007
Return-Path: <java-user-return-29822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22219 invoked from network); 15 Aug 2007 01:08:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Aug 2007 01:08:19 -0000
Received: (qmail 90709 invoked by uid 500); 15 Aug 2007 01:08:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90666 invoked by uid 500); 15 Aug 2007 01:08:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90655 invoked by uid 99); 15 Aug 2007 01:08:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 18:08:11 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 01:08:22 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IL7MP-0007P2-9q
	for java-user@lucene.apache.org; Tue, 14 Aug 2007 18:07:45 -0700
Message-ID: <12154865.post@talk.nabble.com>
Date: Tue, 14 Aug 2007 18:07:45 -0700 (PDT)
From: "Srinivas.N." <nsp1974@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Question on custom scoring
In-Reply-To: <Pine.LNX.4.58.0708141319080.4844@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: nsp1974@yahoo.com
References: <12136012.post@talk.nabble.com> <Pine.LNX.4.58.0708141319080.4844@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org


Could be normalized relative to the max score among the matching documents -
but I realize that this can only be done AFTER collecting the documents (as
the Hits class does currently). It could also be normalized to some
"absolute relevance score" that is comparable across queries, but there is
no notion of absolute score in Lucene, is there?

Let me explain the problem I am trying to solve:

I need to weigh in multiple factors when returing matching documents for a
query. Lets say there are 2 factors - one is "relevance" as determined by
the IR score (tf, idf, norms etc.) from lucene and another is say
"popularity". For example, lets say 2 documents match a query "paris
hilton". One document maybe much more popular than another but very close in
"relevance". I'd like to find some way of including the popularity of the
document in the scoring formula, and I thought the CustomScoreQuery would be
useful, but I am realizing that it may not be easy because the "relevance"
score from Lucene has no absolute meaning. The relevance score could be 5 or
500 and there is no way for me gauge what that number means and how much I
should weigh he "popularity" value relative to it when computing the custom
score.

So, the best way I can think of doing this right now is as follows:

If I need to return n docs as the result, use the Hits API to get a much
larger number say 2n or 3n (or till the normalized score relative to the
maximum score falls below a certain threshold), and then sort the results by
own algorithm which combines the normalized score returned by the Hits API
and the popularity.

Comments?

Thanks
Srinivas



hossman wrote:
> 
> 
> : [b] The subQueryScore that is returned in the customScore() API doesnt
> seem
> : to be normalized. This makes it difficult for me to weight the different
> : scores properly. Is there an easy way to get the normalized "text index"
> : score in customScore() API so I can easaily weigh in the other factors
> : relative to it?
> 
> normalized relative to what?
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Question-on-custom-scoring-tf4264305.html#a12154865
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 15 05:19:00 2007
Return-Path: <java-user-return-29823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79050 invoked from network); 15 Aug 2007 05:18:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Aug 2007 05:18:59 -0000
Received: (qmail 90717 invoked by uid 500); 15 Aug 2007 05:18:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90679 invoked by uid 500); 15 Aug 2007 05:18:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90668 invoked by uid 99); 15 Aug 2007 05:18:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 22:18:51 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mnrz57@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 05:18:49 +0000
Received: by py-out-1112.google.com with SMTP id f31so5864271pyh
        for <java-user@lucene.apache.org>; Tue, 14 Aug 2007 22:18:28 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=uPSKKZFGG0IMPXeLDxBTcZD9+EI15LRpuNM+OoLtYjQDEi0O32GX8c19p0pP/a02cusK9xpB2kX2n+KQpcxQIu4sm1azkVjRW6Jo+jh+GjkkjtTH3e/mVhVHKlGGfJ7l44lI2tVJh5W8YwFCh0zxyxTK9Ttppe81N8B97I1UzrQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=VkL4+e6lxtYb9WmrmSMWTv+NUP/vgR/+UCTtl30bmnjmlTTdjf5a49DCu9cLXu/LhSZJh9EisKqLOLv0hPmFqO5jY2YkO6KiDFITEBfbP/3LnxvnOqtyuNb9Rs3OZAEyCY8aE42uM1dGCE8Kpaew6M0iVKlCZRIoVUh6NiMeUFk=
Received: by 10.65.210.18 with SMTP id m18mr221297qbq.1187155108463;
        Tue, 14 Aug 2007 22:18:28 -0700 (PDT)
Received: by 10.65.180.12 with HTTP; Tue, 14 Aug 2007 22:18:28 -0700 (PDT)
Message-ID: <34b8543c0708142218u654d3da1v30002db3f3cf2b57@mail.gmail.com>
Date: Wed, 15 Aug 2007 08:48:28 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: query question
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_49190_20403273.1187155108423"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_49190_20403273.1187155108423
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi

I am using WhitespaceAnalyzer and the query is " icdCode:H* " but there is
no result however I know that there are many documents with this field value
such as H20, H20.5 etc.     this field is tokenized and indexed what is
wrong with this?
when I test this query with Luke it will return no result as well.  I am not
sure whether the query parser change the word into lowercase internally or
not. but I have extended my own query parser and I am sure no change on
input query will be made.

any help would be appreciated

-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/
another in Persian: http://fekre-motefavet.blogspot.com/

------=_Part_49190_20403273.1187155108423--

From java-user-return-29824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 15 05:51:41 2007
Return-Path: <java-user-return-29824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92494 invoked from network); 15 Aug 2007 05:51:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Aug 2007 05:51:39 -0000
Received: (qmail 14998 invoked by uid 500); 15 Aug 2007 05:51:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14949 invoked by uid 500); 15 Aug 2007 05:51:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14938 invoked by uid 99); 15 Aug 2007 05:51:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 22:51:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of cedric.ho@gmail.com designates 209.85.198.188 as permitted sender)
Received: from [209.85.198.188] (HELO rv-out-0910.google.com) (209.85.198.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 05:51:45 +0000
Received: by rv-out-0910.google.com with SMTP id k20so1313439rvb
        for <java-user@lucene.apache.org>; Tue, 14 Aug 2007 22:51:07 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=qAvk2uGSuCtEC3K++Vz6o7lYo2AHgWJ+WoQ3tNl4GZgvgIeCt0YMmZLZc+R6m9Wfoj2qEObvg3TCMnphyOTYB9zoTglqZp90qb1U8cMJ7Ec7/kkAa1wXog4WUMz7jyptfl25PDfLItblvR+kRF8WYOu4ydWVSc1o6UFvm85AvAo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=puJxLuEvAI9zvVi3tXA5IAFDaVykvoW+zUQ4cZ8kaZ/IxUtlFa/HHa/EsfKnFIPXO8UPV/6nqDBaciyhb5EEi2KaGhpe+H0GkSK+E/2PcrNA94aZO/9VMu7QLYFkL9rhNlFnsZEnNBu6/cRMTwV+b2YcWpcuGvzrS2MQnu60dAI=
Received: by 10.115.72.1 with SMTP id z1mr184756wak.1187157067742;
        Tue, 14 Aug 2007 22:51:07 -0700 (PDT)
Received: by 10.114.52.18 with HTTP; Tue, 14 Aug 2007 22:51:07 -0700 (PDT)
Message-ID: <839ba01c0708142251scddb8ffr11af5cacbeb01a04@mail.gmail.com>
Date: Wed, 15 Aug 2007 13:51:07 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: performance on filtering against thousands of different publications
In-Reply-To: <847760.60235.qm@web26009.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <847760.60235.qm@web26009.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

>
> Some options:
> 1) Try minimise leaping around the disk - maybe sorting your selected terms will help. Look at methods in TermEnum and TermDocs which you can use to build your own bitset from your (sorted) list of terms.

Thanks, I'll try this method.


> 2) Can you add higher-level terms to your index? Are the publications sources grouped into stable "sets"? If so, why not index the content with a "publicationSet" field too and use that in filters instead of querying using the members of the set (individual publication sources).

Although some sets are stable. They do change from time to time. Then
we would have to reindex at least those documents that change sets.
This is something we would like to avoid.


> 3) The <CachedFilter> tag in contrib's XMLQueryParser already implements an LRU policy for caching nested filters or queries.

I would definitely look into this one as well.

Thanks,
Cedric

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 15 05:52:50 2007
Return-Path: <java-user-return-29825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93286 invoked from network); 15 Aug 2007 05:52:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Aug 2007 05:52:47 -0000
Received: (qmail 18772 invoked by uid 500); 15 Aug 2007 05:52:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18075 invoked by uid 500); 15 Aug 2007 05:52:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18064 invoked by uid 99); 15 Aug 2007 05:52:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Aug 2007 22:52:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cedric.ho@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 05:52:32 +0000
Received: by wa-out-1112.google.com with SMTP id j40so2658738wah
        for <java-user@lucene.apache.org>; Tue, 14 Aug 2007 22:52:11 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=fa/j5L6VrAjZuzTHL9qkmst9MGfNVJTohYiNKriGRO5S2QIC5blQlqEpWBwnXy6+hjlK1YTpDncWQXfshdVgmX5Dy7xDsqcrTgdx2ZLlerlh2bkwC80ypdqIVEZ+0ciTAFbShMwwpacIVjvazb++wIqqsYM+zDwFXIzvQTJVNTw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=lY/bwkCOuT818dLJ6F3njRG+hZCIUh0Uf+RvpGuFx/dsREXbmAqxKy527VXo1SjsSz8gJ/tmCSC0AKf5PyQWyoIIQTH6lYirVndTFYwMtcOcULBYpTCB+maEr84KCEXKCW9XjiNH/qKBy/5O9qx373PRbqACnBgBWrfCraYPRa4=
Received: by 10.114.148.1 with SMTP id v1mr183930wad.1187157131762;
        Tue, 14 Aug 2007 22:52:11 -0700 (PDT)
Received: by 10.114.52.18 with HTTP; Tue, 14 Aug 2007 22:52:11 -0700 (PDT)
Message-ID: <839ba01c0708142252x52b403f1w2737bb6924c1d1bf@mail.gmail.com>
Date: Wed, 15 Aug 2007 13:52:11 +0800
From: "Cedric Ho" <cedric.ho@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: performance on filtering against thousands of different publications
In-Reply-To: <46C1D293.5030003@syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <839ba01c0708122117v4a2f3c8fk4c95149a25062e2f@mail.gmail.com>
	 <359a92830708130617ide2cd6ao9c71794ec8ddf46@mail.gmail.com>
	 <839ba01c0708131856g5496c96bu42882cd26126cc3f@mail.gmail.com>
	 <46C1D293.5030003@syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgU3RldmVuLAoKVGhhbmtzIGZvciB5b3VyIGNsYXJpZmljYXRpb24uCgpJIGFtIHVzaW5nIHRo
ZSBTZWFyY2hlci5zZWFyY2gocXVlcnksIGZpbHRlciwgbiwgc29ydCkgbWV0aG9kLgpJIHByZXN1
bWUgdGhpcyBtZXRob2QgZG9lc24ndCBoYXZlIHRoZSBzYW1lIHByb2JsZW0sIHNpbmNlIEkgYWxy
ZWFkeQpwYXNzIGl0IHRoZSBtYXggbnVtYmVyIG9mIHJlc3VsdHMgcmV0dXJuZWQuCgpSZWdhcmRz
LApDZWRyaWMKCgpPbiA4LzE1LzA3LCBTdGV2ZW4gUm93ZSA8c2Fyb3dlQHN5ci5lZHU+IHdyb3Rl
Ogo+IEhpIENlZHJpYywKPgo+IENlZHJpYyBIbyB3cm90ZToKPiA+IE9uIDgvMTMvMDcsIEVyaWNr
IEVyaWNrc29uIDxlcmlja2VyaWNrc29uQGdtYWlsLmNvbT4gd3JvdGU6Cj4gPj4gQXJlIHlvdSBp
dGVyYXRpbmcgdGhyb3VnaCBhIEhpdHMgb2JqZWN0IHRoYXQgaGFzIG1vcmUgdGhhbgo+ID4+IDEw
MCAobWF5YmUgaXQncyAyMDAgbm93KSBlbnRyaWVzPyBBcmUgeW91IGxvYWRpbmcgZWFjaCBkb2N1
bWVudCB0aGF0Cj4gPj4gc2F0aXNmaWVzIHRoZSBxdWVyeT8gRXRjLiBFdGMuCj4gPgo+ID4gVW5m
b3J0dW5hdGVseSwgeWVzLiBBbmQgSSBrbm93IHRoaXMgaXMgYW5vdGhlciBiaWcgc291cmNlIGZv
cgo+ID4gc2xvd25lc3MuIEJ1dCBkdWUgdG8gc29tZSBvdGhlciByZWFzb24gdGhhdCBjYW5ub3Qg
YmUgd29ya2VkIGFyb3VuZCBhdAo+ID4gdGhpcyBzdGFnZS4gSSdsbCBoYXZlIHRvIHJldHVybiBh
bGwgaGl0cyBmb3IgYSBzZWFyY2ggZm9yIG5vdy4KPiA+IEZvciBlYWNoIGRvY3VtZW50IEkgZ2V0
IHRoZSBkb2NpZCAobm90IHRoZSBpbnRlcm5hbCBvbmUgaW4gbHVjZW5lKSwKPiA+IGRhdGUgYW5k
IHB1YmxpY2F0aW9uLiBJJ3ZlIGFscmVhZHkgdXNlZCBGaWVsZENhY2hlIHRvIGNhY2hlIGFsbCB0
aGUgMwo+ID4gZmllbGRzLgo+Cj4gSSB0aGluayB5b3UgbWlzdW5kZXJzdG9vZCBFcmljay4gIEhl
IHdhcyBub3QgdGVsbGluZyB5b3UgdGhhdCB5b3Ugc2hvdWxkCj4gbm90IHJldHJpZXZlIGFsbCBo
aXRzOyBpbnN0ZWFkLCBoZSB3YXMgcG9pbnRpbmcgb3V0IHRoYXQgdGhlcmUgYXJlIG1vcmUKPiBl
ZmZpY2llbnQgd2F5cyBvZiBkb2luZyBzbyB0aGFuIHVzaW5nIHRoZSBzZWFyY2goKSBtZXRob2Qg
dGhhdCByZXR1cm5zIGEKPiBIaXRzIG9iamVjdC4KPgo+IEZyb20gPGh0dHA6Ly93aWtpLmFwYWNo
ZS5vcmcvbHVjZW5lLWphdmEvSW1wcm92ZVNlYXJjaGluZ1NwZWVkPjoKPgo+ICAgICBJdGVyYXRp
bmcgb3ZlciBhbGwgaGl0cyBpcyBzbG93IGZvciB0d28gcmVhc29ucy4KPiAgICAgRmlyc3RseSwg
dGhlIHNlYXJjaCgpIG1ldGhvZCB0aGF0IHJldHVybnMgYSBIaXRzCj4gICAgIG9iamVjdCByZS1l
eGVjdXRlcyB0aGUgc2VhcmNoIGludGVybmFsbHkgd2hlbiB5b3UKPiAgICAgbmVlZCBtb3JlIHRo
YW4gMTAwIGhpdHMuIFNvbHV0aW9uOiB1c2UgdGhlIHNlYXJjaAo+ICAgICBtZXRob2QgdGhhdCB0
YWtlcyBhIEhpdENvbGxlY3RvciBpbnN0ZWFkLgo+Cj4gVXBvbiBjb25zdHJ1Y3Rpb24sIGEgSGl0
cyBvYmplY3QgY29sbGVjdHMgKGF0IG1vc3QpIHRoZSB0b3AgMTAwIGhpdHMnCj4gc2NvcmVzIGFu
ZCBkb2N1bWVudCBJRHMuICBFYWNoIHRpbWUgeW91IGFzayB0aGUgSGl0cyBvYmplY3QgZm9yCj4g
aW5mb3JtYXRpb24gYWJvdXQgYSBoaXQgYmV5b25kIHdoYXQgaXQgaGFzIGNvbGxlY3RlZCBpbmZv
IGZvciwgaXQgd2lsbAo+IHJlLWV4ZWN1dGUgdGhlIHNlYXJjaCwgY29sbGVjdGluZyBpbmZvIG9u
IGFzIG1hbnkgYXMgZG91YmxlIHRoZQo+IHJlcXVlc3RlZCBwb3NpdGlvbiwgYXMgbG9uZyBhcyB0
aGVyZSBhcmUgZnVydGhlciBoaXRzLiAgKEFuZCB0aGlzIGlzCj4gRXJpY2sncyBwb2ludDogeW91
IHNob3VsZG4ndCBiZSB1c2luZyBhbiBBUEkgdGhhdCBleGVjdXRlcyB0aGUgc2FtZQo+IHNlYXJj
aCBtb3JlIHRoYW4gb25jZS4pCj4KPiBTbyBmb3IgZXhhbXBsZSwgaWYgeW91IGFyZSBpdGVyYXRp
bmcgb3ZlciB0aGUgaGl0cyBmcm9tIGEgc2VhcmNoCj4gcmVzdWx0aW5nIGluIG92ZXIgMTAwIGhp
dHMsIHdoZW4geW91IGFzayBmb3IgaW5mbyBvbiB0aGUgMTAxc3QgZG9jdW1lbnQKPiAobj0xMDAg
aW4gemVyby1iYXNlZCBub3RhdGlvbiksIHRoZSBIaXRzIG9iamVjdCB3aWxsIHJlLWV4ZWN1dGUg
dGhlCj4gc2VhcmNoIHRvIGNvbGxlY3QgaW5mbyBvbiB0aGUgdG9wIDIwMCAobioyKSBkb2N1bWVu
dHM7IGF0IHRoZSAyMDFzdAo+IGRvY3VtZW50LCB0aGUgdG9wIDQwMCBkb2N1bWVudHMnIGluZm8g
d2lsbCBiZSBjb2xsZWN0ZWQ7IGFuZCBzbyBvbi4KPgo+IFRoZXJlIGlzIGFub3RoZXIgZm9ybSBv
ZiBwb3RlbnRpYWwgaW5lZmZpY2llbmN5IHJlc3VsdGluZyBmcm9tIHVzYWdlIG9mCj4gdGhlIEhp
dHMgb2JqZWN0OiBpdCBtYWludGFpbnMgYW4gTFJVIGNhY2hlIG9mIDIwMCBEb2N1bWVudHMnIHN0
b3JlZAo+IGZpZWxkcy4gIElmIHlvdSBhcmUgYWxyZWFkeSBkb2luZyB0aGlzIGVsc2V3aGVyZSBp
biB5b3VyIGFwcGxpY2F0aW9uLCBvcgo+IGlmIHlvdSB3aWxsIG9ubHkgdmlzaXQgZWFjaCBEb2N1
bWVudCBvbmNlLCB0aGVuIG1haW50YWluaW5nIHRoZSBjYWNoZQo+IHdpbGwgb25seSBzbG93IHlv
dSBkb3duLgo+Cj4gU3RldmUKPgo+IC0tCj4gU3RldmUgUm93ZQo+IENlbnRlciBmb3IgTmF0dXJh
bCBMYW5ndWFnZSBQcm9jZXNzaW5nCj4gaHR0cDovL3d3dy5jbmxwLm9yZy90ZWNoL2x1Y2VuZS5h
c3AKPgo+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11
bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBl
LW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4KPgoKCi0tIArmhJtA5LiK
LktleWJvYXJkCg==


From java-user-return-29826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 15 09:26:46 2007
Return-Path: <java-user-return-29826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54810 invoked from network); 15 Aug 2007 09:26:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Aug 2007 09:26:45 -0000
Received: (qmail 17299 invoked by uid 500); 15 Aug 2007 09:26:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17271 invoked by uid 500); 15 Aug 2007 09:26:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17260 invoked by uid 99); 15 Aug 2007 09:26:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 02:26:36 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [60.52.184.45] (HELO tecforte.com) (60.52.184.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 09:26:46 +0000
Received: from DFPYWL2S [192.168.2.96] by tecforte.com with ESMTP
  (SMTPD32-8.03) id A69F1491008A; Wed, 15 Aug 2007 17:25:51 +0800
From: "Chew Yee Chuang" <yeechuang@tecforte.com>
To: <java-user@lucene.apache.org>
References: <004201c7d322$69c8bae0$3d5a30a0$@com> <4E0025CD-A1FF-44E4-8322-2A71F9F26332@gmail.com> <003501c7d3e3$ca58e990$5f0abcb0$@com> <D0F005F8-F115-45C9-A5F6-A3F758EE5514@gmail.com> <000901c7d8de$bc2be0c0$3483a240$@com> <12035676.post@talk.nabble.com> <005401c7dd49$01cafda0$0560f8e0$@com> <12122714.post@talk.nabble.com>
In-Reply-To: <12122714.post@talk.nabble.com>
Subject: RE: High CPU usage duing index and search
Date: Wed, 15 Aug 2007 16:31:33 +0800
Message-ID: <001001c7df16$afeae570$0fc0b050$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcfdhM21IuCzi6bSSTG5cjLu9YzKKQBkYw3g
Content-Language: en-us
X-Virus-Checked: Checked by ClamAV on apache.org

Greetings,

I have tested with Mysql, the grouping is ok when there is not much =
records in the table, but when I come across to performed grouping in a =
table which have 3 millions of records, It really take a very long time =
to finish. Thus, Im looking at lucene and hope it can help.

Thank you
eChuang, Chew

-----Original Message-----
From: testn [mailto:test1@doramail.com]=20
Sent: Monday, August 13, 2007 4:34 PM
To: java-user@lucene.apache.org
Subject: RE: High CPU usage duing index and search


To me, it looks like what you are trying to achieve is more suitable to =
be
the database where it can help you do grouping and sorting, etc. But if =
you
still want to achieve it using lucene, you might want to post some code =
so
that I can go through it and see why it uses so much resource then.


Chew Yee Chuang wrote:
>=20
> Hi testn,
>=20
> I have tested Filter, it is pretty fast, but still take a lot of CPU
> resource, Maybe it could due to the number of filter I run.
>=20
> Thank you
> eChuang, Chew
>=20
>=20
> -----Original Message-----
> From: testn [mailto:test1@doramail.com]=20
> Sent: Tuesday, August 07, 2007 10:37 PM
> To: java-user@lucene.apache.org
> Subject: RE: High CPU usage duing index and search
>=20
>=20
> Check out Filter class. You can create a separate filter for each =
field
> and
> then chain them together using ChainFilter. If you cache the filter, =
it
> will
> be pretty fast.=20
>=20
>=20
> Chew Yee Chuang wrote:
>>=20
>> Greetings,
>>=20
>> Yes, process a little bit and stop for a while really reduce the CPU
>> usage,
>> but I need to find out a balance so that the indexing or searching =
will
>> not
>> have so much delay.
>>=20
>> Execute 20,000 queries at a time is because the process is generating =
the
>> aggregation data for reporting,
>> E.g Gender (M,F), Department (Accounting, R&D, Financial,...etc),=20
>> 1Q - Gender:M AND Department: Accounting
>> 2Q - Gender:M AND Department: R&D
>> 3Q - Gender:M AND Department: Financial
>> 4Q - Gender:F AND Department: Accounting
>> 5Q - ....
>> Thus, the more combination, the more query need to run. For now, I =
still
>> can't get any idea on how to reduce it, just thinking maybe there is =
a
>> different way to index it so that I can get It easily.
>>=20
>> Any help would be appreciated.
>>=20
>> Thanks
>> eChuang, Chew
>>=20
>> -----Original Message-----
>> From: karl wettin [mailto:karl.wettin@gmail.com]=20
>> Sent: Thursday, August 02, 2007 7:11 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: High CPU usage duing index and search
>>=20
>> It sounds like you have a fairly busy system, perhaps 100% load on =
the
>> process is not that strange, at least not during short periods of =
time.
>>=20
>> A simpler solution would be to nice the process a little bit in order =
to
>> give your background jobs some more time to think.
>>=20
>> Running a profiler is still the best advice I can think of. It should
>> clearly show you what is going on when you run out of CPU.
>>=20
>> -- =20
>> karl
>>=20
>> 1 aug 2007 kl. 04.29 skrev Chew Yee Chuang:
>>=20
>>> Hi,
>>>
>>> Thanks for the link provided, actually I've go through those =20
>>> article when I
>>> developing the index and search function for my application. I =20
>>> haven=E2=80=99t try
>>> profiler yet, but I monitor the CPU usage and notice that whatever =20
>>> index or
>>> search performing, the CPU usage raise to 100%. Below I will try to
>>> elaborate more on what my application is doing and how I index and =20
>>> search.
>>>
>>> There are many concurrent process running, first, the application =20
>>> will write
>>> records that received into a text file with tab separated each =20
>>> different
>>> field. Application will point to a new file every 10mins and start =20
>>> writing
>>> to it. So every file will contains only 10mins record, approximate =20
>>> 600,000
>>> records per file. Then, the indexing process will check whether =20
>>> there is a
>>> text file to be index, if it is, the thread will wake up and start =20
>>> perform
>>> indexing.
>>>
>>> The indexing process will first add documents to RAMDir, Then =20
>>> later, add
>>> RAMDir into FSDir by calling addIndexNoOptimize() when there is =20
>>> 100,000
>>> documents(32 fields per doc) in RAMDir. There is only 1 IndexWriter=20
>>> (FSDir)
>>> was created but a few IndexWriter(RAMDir) was created during the =
whole
>>> process. Below are some configuration for IndexWriters that I =20
>>> mentioned:-
>>>
>>> IndexWriter (RAMDir)
>>> - SimpleAnalyzer
>>> - setMaxBufferedDocs(10000)
>>> - Filed.Store.YES
>>> - Field.Index.NO_NORMS
>>>
>>> IndexWriter (FSDir)
>>> - SimpleAnalyzer
>>> - setMergeFactor(20)
>>> - addIndexesNoOptimize()
>>>
>>> For the searching, because there are many queries(20,000) run =20
>>> continuously
>>> to generate the aggregate table for reporting purpose. All this =20
>>> queries is
>>> run in nested loop, and there is only 1 Searcher created, I try =20
>>> searcher and
>>> filter as well, filter give me better result, but both also utilize  =

>>> lots of
>>> CPU resources.
>>>
>>> Hope this info will help and sorry for my bad English.
>>>
>>> Thanks
>>> eChuang, Chew
>>>
>>> -----Original Message-----
>>> From: karl wettin [mailto:karl.wettin@gmail.com]
>>> Sent: Tuesday, July 31, 2007 5:54 PM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: High CPU usage duing index and search
>>>
>>>
>>> 31 jul 2007 kl. 05.25 skrev Chew Yee Chuang:
>>>> But just notice that when Lucene performing search or index,
>>>> the CPU usage on my machine raise to 100%, because of this issue,
>>>> some of my
>>>> others backend process will slow down eventually. Just want to know
>>>> does
>>>> anyone face this problem before ? and is it any idea on how to
>>>> overcome this
>>>> problem ?
>>>
>>> Did you run a profiler to see what it is that consume all the =20
>>> resources?
>>> It is very hard to guess based on the information you supplied. =
Start
>>> here:
>>>
>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>> http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
>>> http://wiki.apache.org/lucene-java/ImproveSearchingSpeed
>>>
>>>
>>> --=20
>>> karl
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>> No virus found in this incoming message.
>>> Checked by AVG Free Edition.
>>> Version: 7.5.476 / Virus Database: 269.11.0/927 - Release Date: =20
>>> 7/30/2007
>>> 5:02 PM
>>>
>>>
>>> No virus found in this outgoing message.
>>> Checked by AVG Free Edition.
>>> Version: 7.5.476 / Virus Database: 269.11.0/929 - Release Date: =20
>>> 7/31/2007
>>> 5:26 PM
>>>
>>>
>>>
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>> No virus found in this incoming message.
>> Checked by AVG Free Edition.=20
>> Version: 7.5.476 / Virus Database: 269.11.2/933 - Release Date: =
8/2/2007
>> 2:22 PM
>> =20
>>=20
>> No virus found in this outgoing message.
>> Checked by AVG Free Edition.=20
>> Version: 7.5.476 / Virus Database: 269.11.8/940 - Release Date: =
8/6/2007
>> 4:53 PM
>> =20
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>>=20
>=20
> --=20
> View this message in context:
> =
http://www.nabble.com/High-CPU-usage-duing-index-and-search-tf4190756.htm=
l#a12035676
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> No virus found in this incoming message.
> Checked by AVG Free Edition.=20
> Version: 7.5.476 / Virus Database: 269.11.8/940 - Release Date: =
8/6/2007
> 4:53 PM
> =20
>=20
> No virus found in this outgoing message.
> Checked by AVG Free Edition.=20
> Version: 7.5.476 / Virus Database: 269.11.15/949 - Release Date: =
8/12/2007
> 11:03 AM
> =20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: =
http://www.nabble.com/High-CPU-usage-duing-index-and-search-tf4190756.htm=
l#a12122714
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


No virus found in this incoming message.
Checked by AVG Free Edition.=20
Version: 7.5.476 / Virus Database: 269.11.15/949 - Release Date: =
8/12/2007 11:03 AM
=20

No virus found in this outgoing message.
Checked by AVG Free Edition.=20
Version: 7.5.476 / Virus Database: 269.11.19/953 - Release Date: =
8/14/2007 5:19 PM
=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 15 09:39:21 2007
Return-Path: <java-user-return-29827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59672 invoked from network); 15 Aug 2007 09:39:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Aug 2007 09:39:21 -0000
Received: (qmail 34686 invoked by uid 500); 15 Aug 2007 09:39:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34652 invoked by uid 500); 15 Aug 2007 09:39:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34641 invoked by uid 99); 15 Aug 2007 09:39:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 02:39:12 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_FONT_FACE_BAD,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ridwanhabbal@hotmail.com designates 65.54.246.233 as permitted sender)
Received: from [65.54.246.233] (HELO bay0-omc3-s33.bay0.hotmail.com) (65.54.246.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 09:39:24 +0000
Received: from BAY105-W3 ([65.54.224.103]) by bay0-omc3-s33.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.2668);
	 Wed, 15 Aug 2007 02:38:46 -0700
Message-ID: <BAY105-W37038780802D8D2A25B8FCCDE0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_ad69df8f-a5db-479e-9ec0-91d59e6928d6_"
X-Originating-IP: [216.6.1.34]
From: Ridwan Habbal <ridwanhabbal@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: How to search over all fields in a clean way? 
Date: Wed, 15 Aug 2007 09:38:46 +0000
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 15 Aug 2007 09:38:46.0354 (UTC) FILETIME=[13909B20:01C7DF20]
X-Virus-Checked: Checked by ClamAV on apache.org

--_ad69df8f-a5db-479e-9ec0-91d59e6928d6_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hello all,=20
=20
when we search over an index docs we use code such:
=20
Analyzer analyzer =3D new StandardAnalyzer();
String defaultSearchField =3D "all";
QueryParser parser =3D new QueryParser(defaultSearchField, analyzer);
IndexSearcher indexSearcher =3D new IndexSearcher(this.indexDirectory);
Hits hits =3D indexSearcher.search(parser.parse(query));
=20
The problem is when you want to search over ALL fields in each doc. What's =
more is that the fields are created dynamically. In other words, The number=
 and identifiers of the fields of my docs vary from each other. so it's irr=
ational to type all fields names, further more i don't know them.=20
I thought of a primitive solution: copy all fields to one field, however th=
is doubles the index size, and it might conflict with some fields names sin=
ce the fields of docs are dynamic.=20
=20
could some one help me?=20
=20
Thanks in advance.=20
Ridwan
_________________________________________________________________
Explore the seven wonders of the world
http://search.msn.com/results.aspx?q=3D7+wonders+world&mkt=3Den-US&form=3DQ=
BRE=

--_ad69df8f-a5db-479e-9ec0-91d59e6928d6_--

From java-user-return-29828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 15 11:00:18 2007
Return-Path: <java-user-return-29828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82564 invoked from network); 15 Aug 2007 11:00:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Aug 2007 11:00:16 -0000
Received: (qmail 26866 invoked by uid 500); 15 Aug 2007 11:00:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26818 invoked by uid 500); 15 Aug 2007 11:00:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26807 invoked by uid 99); 15 Aug 2007 11:00:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 04:00:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 11:00:06 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 732BA30EFC16; Wed, 15 Aug 2007 04:59:45 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.5] (va-76-6-215-202.dhcp.embarqhsd.net [76.6.215.202])
	by ehatchersolutions.com (Postfix) with ESMTP id 1A98330EFC16
	for <java-user@lucene.apache.org>; Wed, 15 Aug 2007 04:59:41 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <BAY105-W37038780802D8D2A25B8FCCDE0@phx.gbl>
References: <BAY105-W37038780802D8D2A25B8FCCDE0@phx.gbl>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7EF9170A-1C61-44DD-BBD9-B0F7F04B9620@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: How to search over all fields in a clean way? 
Date: Wed, 15 Aug 2007 07:01:01 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.6 required=5.0 tests=BAYES_00,RCVD_IN_SORBS_DUL 
	autolearn=no version=3.1.1

copying all fields to a single searchable field is quite reasonable,  
and won't double your index size if you set the new field to be  
unstored.

	Erik


On Aug 15, 2007, at 5:38 AM, Ridwan Habbal wrote:

> Hello all,
>
> when we search over an index docs we use code such:
>
> Analyzer analyzer = new StandardAnalyzer();
> String defaultSearchField = "all";
> QueryParser parser = new QueryParser(defaultSearchField, analyzer);
> IndexSearcher indexSearcher = new IndexSearcher(this.indexDirectory);
> Hits hits = indexSearcher.search(parser.parse(query));
>
> The problem is when you want to search over ALL fields in each doc.  
> What's more is that the fields are created dynamically. In other  
> words, The number and identifiers of the fields of my docs vary  
> from each other. so it's irrational to type all fields names,  
> further more i don't know them.
> I thought of a primitive solution: copy all fields to one field,  
> however this doubles the index size, and it might conflict with  
> some fields names since the fields of docs are dynamic.
>
> could some one help me?
>
> Thanks in advance.
> Ridwan
> _________________________________________________________________
> Explore the seven wonders of the world
> http://search.msn.com/results.aspx?q=7+wonders+world&mkt=en- 
> US&form=QBRE


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 15 13:08:29 2007
Return-Path: <java-user-return-29829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40769 invoked from network); 15 Aug 2007 13:08:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Aug 2007 13:08:27 -0000
Received: (qmail 71787 invoked by uid 500); 15 Aug 2007 13:08:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71752 invoked by uid 500); 15 Aug 2007 13:08:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71740 invoked by uid 99); 15 Aug 2007 13:08:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 06:08:19 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 80.76.149.213 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.213] (HELO ch-smtp02.sth.basefarm.net) (80.76.149.213)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 13:08:16 +0000
Received: from c83-249-118-113.bredband.comhem.se ([83.249.118.113]:60029 helo=[192.168.2.101])
	by ch-smtp02.sth.basefarm.net with esmtp (Exim 4.66)
	(envelope-from <karl.wettin@gmail.com>)
	id 1ILIbK-0004z6-7N
	for java-user@lucene.apache.org; Wed, 15 Aug 2007 15:07:54 +0200
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <34b8543c0708142218u654d3da1v30002db3f3cf2b57@mail.gmail.com>
References: <34b8543c0708142218u654d3da1v30002db3f3cf2b57@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3D437013-4DFF-4596-B61E-06428480BC0F@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: query question
Date: Wed, 15 Aug 2007 15:02:57 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Originating-IP: 83.249.118.113
X-Scan-Result: No virus found in message 1ILIbK-0004z6-7N.
X-Scan-Signature: ch-smtp02.sth.basefarm.net 1ILIbK-0004z6-7N ffc54335a120079d3fa623498439f17e
X-Virus-Checked: Checked by ClamAV on apache.org


15 aug 2007 kl. 07.18 skrev Mohammad Norouzi:

> I am using WhitespaceAnalyzer and the query is " icdCode:H* " but  
> there is
> no result however I know that there are many documents with this  
> field value
> such as H20, H20.5 etc.     this field is tokenized and indexed  
> what is
> wrong with this?
> when I test this query with Luke it will return no result as well.

Can you also use Luke to inspect documents you know should contain these
terms and make sure it really is in there?

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 15 13:19:58 2007
Return-Path: <java-user-return-29830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45160 invoked from network); 15 Aug 2007 13:19:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Aug 2007 13:19:57 -0000
Received: (qmail 99347 invoked by uid 500); 15 Aug 2007 13:19:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99264 invoked by uid 500); 15 Aug 2007 13:19:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99252 invoked by uid 99); 15 Aug 2007 13:19:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 06:19:49 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jpsondag@gmail.com designates 209.85.198.190 as permitted sender)
Received: from [209.85.198.190] (HELO rv-out-0910.google.com) (209.85.198.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 13:19:47 +0000
Received: by rv-out-0910.google.com with SMTP id k20so1373795rvb
        for <java-user@lucene.apache.org>; Wed, 15 Aug 2007 06:19:27 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=oo7H75VVXStLU7qc4rKdntiwN5kOsHXsLXrD8R8eYs2RZkpXOlpJez83ySokpp/sYbi3LFsBZ3tAyVokOskxCTtbP3P5UIizg4SMuLTlUG+PSe98yUHGAdS/k9exhx3iDhCmsxOjHj7S1Qts8xb2wfx91ZMdmweRK7OwRTqc4Zg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=EhR3UiUrMm5CMYOM9eptbMWHQq1lVkmh14kxbnk/V/yw3qvK0zpNuTlNK/D9u/WMTKbup4rWk8miA+j4tXQi2aqXQqzmQKMBuk6+SDiPTjdiKBSV+AlayKlkO4IRqM1sabnM7RVir4txSfxI0CeokMtCtCgKcr9wJO1nWU7LcJ0=
Received: by 10.141.145.11 with SMTP id x11mr176681rvn.1187183966960;
        Wed, 15 Aug 2007 06:19:26 -0700 (PDT)
Received: by 10.140.200.19 with HTTP; Wed, 15 Aug 2007 06:19:26 -0700 (PDT)
Message-ID: <bd67edef0708150619u50c17ff8qa6cbf923f20a5307@mail.gmail.com>
Date: Wed, 15 Aug 2007 08:19:26 -0500
From: "John Paul Sondag" <jsondag2@uiuc.edu>
Sender: jpsondag@gmail.com
To: java-user@lucene.apache.org
Subject: =?GB2312?B?UmU6ILTwuLQ6IEluZGV4aW5nIGNvcnJlY3RseT8=?=
In-Reply-To: <B1723B32-8AC1-457A-BFEC-69C63DD3484A@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2946_4569017.1187183966921"
References: <8E5BA7FAF994C6409A8E074B78EB4677013653B4@14sha-msg02.zm.sd.mediazone.com>
	 <bd67edef0708141234u7e9ee531s2d80b399b20ee983@mail.gmail.com>
	 <B1723B32-8AC1-457A-BFEC-69C63DD3484A@gmail.com>
X-Google-Sender-Auth: ddf861ee35bb72d0
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2946_4569017.1187183966921
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It worked!  My indexing time went from over 6 hours to 592 seconds!  Thank
you guys so much!

--JP

On 8/14/07, karl wettin <karl.wettin@gmail.com> wrote:
>
>
> 14 aug 2007 kl. 21.34 skrev John Paul Sondag:
>
> > What exactly is a RAMDirectory, I didn't see it mentioned on that
> > page.  Is
> > there example code of using it?   Do I just create a Ram Directory
> > and then
> > use it like it's a normal directory?
>
> Yes, it is just like FSDirectory, but resides in RAM and is not
> persistent.
>
> <http://www.google.com/search?q=RAMDirectory>
>
> --
> karl
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2946_4569017.1187183966921--

From java-user-return-29831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 15 16:29:10 2007
Return-Path: <java-user-return-29831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82380 invoked from network); 15 Aug 2007 16:29:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Aug 2007 16:29:08 -0000
Received: (qmail 29590 invoked by uid 500); 15 Aug 2007 16:28:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29558 invoked by uid 500); 15 Aug 2007 16:28:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29547 invoked by uid 99); 15 Aug 2007 16:28:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 09:28:59 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.133.162.100] (HELO mail.visvo.com) (63.133.162.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 16:28:54 +0000
Received: from [192.168.1.229] (workstation04.visvo.com [192.168.1.229])
	by mail.visvo.com (Postfix) with ESMTP id D30C069BF8
	for <java-user@lucene.apache.org>; Wed, 15 Aug 2007 11:28:22 -0500 (CDT)
Message-ID: <46C329AB.5000000@visvo.com>
Date: Wed, 15 Aug 2007 11:28:27 -0500
From: Sagar Naik <sagar@visvo.com>
User-Agent: Thunderbird 1.5.0.12 (Windows/20070509)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: formalizing a query
References: <4479cfa0708092120u761b383w4655ae5dd2195e1b@mail.gmail.com>	 <359a92830708100633u43c96e50se5e69cec623b371a@mail.gmail.com> <4479cfa0708140242n2cee338cv44b8ea7cd1056f4c@mail.gmail.com>
In-Reply-To: <4479cfa0708140242n2cee338cv44b8ea7cd1056f4c@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-visvo.com-MailScanner-Information: Please contact the ISP for more information
X-visvo.com-MailScanner: Found to be clean
X-visvo.com-MailScanner-From: sagar@visvo.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No

Hey,

I think u can try :

MultiFieldQueryParser.parse(String[] queries, String[] fields, 
BooleanClause.Occur[] flags,
      Analyzer analyzer)

The flags arrray will get u ORs and ANDs in places u need

- Sagar Naik

Abu Abdulla alhanbali wrote:
> Thanks for the help,
>
> please provide the code to do that.
>
> I tried with this one but it didn't work:
>
> Query filterQuery = MultiFieldQueryParser.parse(new String{query1, query2,
> query3, query4, .... }, new String{field1, field2, field1, field2, ... },
> new KeywordAnalyzer());
>
> this results in:
>
> field1:query1 OR field2:query2 OR
> field1:query3 OR field2:query4 ... etc
>
> and NOT:
>
> (field1:query1 AND field2:query2) OR
> (field1:query3 AND field2:query4) ... etc
>
> please help.
>
>
> On 8/10/07, Erick Erickson <erickerickson@gmail.com> wrote:
>   
>> I *strongly* suggest you get a copy of Luke. It'll allow you to form
>> queries
>> and see the results and you can then answer this kind of question as well
>> as many others.
>>
>> Meanwhile, please see
>> http://lucene.apache.org/java/docs/queryparsersyntax.html
>>
>> Erick
>>
>> On 8/10/07, Abu Abdulla alhanbali <montaqa@gmail.com> wrote:
>>     
>>> Hi,
>>>
>>> I need your help in formalizing this query:
>>>
>>> (field1:query1 AND field2:query2) OR
>>> (field1:query3 AND field2:query4) OR
>>> (field1:query5 AND field2:query6) OR
>>> (field1:query7 AND field2:query8) ... etc
>>>
>>> Please give the code since I'm new to lucene
>>> how we can use MultiFieldQueryParser or any parser to do the job
>>>
>>> greatly appreciated
>>>
>>>       
>
>   


-- 
Always vizz it us @ visvo.com


-- 
This message has been scanned for viruses and
dangerous content and is believed to be clean.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 15 17:22:21 2007
Return-Path: <java-user-return-29832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24445 invoked from network); 15 Aug 2007 17:22:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Aug 2007 17:22:20 -0000
Received: (qmail 20997 invoked by uid 500); 15 Aug 2007 17:22:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20964 invoked by uid 500); 15 Aug 2007 17:22:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20953 invoked by uid 99); 15 Aug 2007 17:22:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 10:22:12 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gresh@us.ibm.com designates 32.97.182.143 as permitted sender)
Received: from [32.97.182.143] (HELO e3.ny.us.ibm.com) (32.97.182.143)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 17:22:24 +0000
Received: from d01relay04.pok.ibm.com (d01relay04.pok.ibm.com [9.56.227.236])
	by e3.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id l7FHLivY014315
	for <java-user@lucene.apache.org>; Wed, 15 Aug 2007 13:21:44 -0400
Received: from d01av02.pok.ibm.com (d01av02.pok.ibm.com [9.56.224.216])
	by d01relay04.pok.ibm.com (8.13.8/8.13.8/NCO v8.4) with ESMTP id l7FHLiHh549930
	for <java-user@lucene.apache.org>; Wed, 15 Aug 2007 13:21:44 -0400
Received: from d01av02.pok.ibm.com (loopback [127.0.0.1])
	by d01av02.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l7FHLiAh003964
	for <java-user@lucene.apache.org>; Wed, 15 Aug 2007 13:21:44 -0400
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av02.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l7FHLilh003956
	for <java-user@lucene.apache.org>; Wed, 15 Aug 2007 13:21:44 -0400
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Question about highlighting returning nothing
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OF1481F14A.6AB8D503-ON85257338.005ED9F3-85257338.005F5F21@us.ibm.com>
Date: Wed, 15 Aug 2007 13:21:42 -0400
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Release 8.0|August 02, 2007) at 08/15/2007
 13:21:43,
	Serialize complete at 08/15/2007 13:21:43
Content-Type: multipart/alternative; boundary="=_alternative 005F5EC985257338_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 005F5EC985257338_=
Content-Type: text/plain; charset="US-ASCII"

I'm working on refining my stopwords by looking at the highest scoring 
document returned for each search, and using the highlighter to show which 
terms were significant in choosing that document. This has been extremely 
helpful in improving my searches. I've noticed though that sometimes the 
highlighter returns nothing, even though there is a non-zero score for the 
match. Could someone explain why this is so? A recent discussion I found 
spoke about the usefulness of returning, say, the first bit of text when 
this happens, but there wasn't any discussion of *why* this occurs--
Thanks

Donna


--=_alternative 005F5EC985257338_=--

From java-user-return-29833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 15 18:02:11 2007
Return-Path: <java-user-return-29833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46462 invoked from network); 15 Aug 2007 18:02:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Aug 2007 18:02:10 -0000
Received: (qmail 69664 invoked by uid 500); 15 Aug 2007 18:02:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69633 invoked by uid 500); 15 Aug 2007 18:02:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69622 invoked by uid 99); 15 Aug 2007 18:02:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 11:02:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [216.252.121.61] (HELO web43131.mail.sp1.yahoo.com) (216.252.121.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 15 Aug 2007 18:02:15 +0000
Received: (qmail 85636 invoked by uid 60001); 15 Aug 2007 18:01:36 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=dApuIN45yzALGiIQ4wrX5tpuSgARvYyHc6j072nLD8wWwhCi6mVrUorSG1nGYrcx2Uvd0VbkR6Mo4iLLUSTPyiZJnL5IqlosA0xw5dcI3pwWrukp7CT4n2Par0YUQd4WHMZqy8GwrgOoXxtgvsOLhUu85Pir0nHSLe4+RRReuGg=;
X-YMail-OSG: fQ0A7YkVM1lOvzaPns3V6TVqKnFZXk60sJli2DGJNhtK1cTDhnOaY2FzrWWkCyHX.3v0x6hHyxnMFRazzMSCQmBJMYJbp.qOr0u0T.tgHaiIbWkiLI9GqDzqg_vg
Received: from [69.147.84.254] by web43131.mail.sp1.yahoo.com via HTTP; Wed, 15 Aug 2007 11:01:36 PDT
X-Mailer: YahooMailRC/651.48 YahooMailWebService/0.7.119
Date: Wed, 15 Aug 2007 11:01:36 -0700 (PDT)
From: Michael Bell <mikebell90@yahoo.com>
Subject: Seeking Advice
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Message-ID: <220672.84480.qm@web43131.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

We are writing a mail archiving program. Each piece of the message (eg each=
 attachment) is stored separately.=0A=0AI'll try to keep this short and swe=
et :)=0A=0ACurrently we index the main header fields, like=0A=0Asubject=0As=
ender=0Arecipients (space delimited)=0A=0Aetc.=0A=0AThis stuff is really on=
ly needed once per e-mail=0A=0AWe also index the attachment info:=0A=0Aatta=
chment size (changed to a range like "large", "medium", etc)=0Aattachment n=
ame=0Afull text index=0Aetc.=0A=0AThis stuff is needed to be distinct for e=
ach attachment in the e-mail=0A=0AOur current algorithm is wasteful, but I =
see no better way to do it.=0A=0AIn a loop, for each attachment (and once i=
f we have none), we add all the main header stuff and the attachment stuff,=
 as a separate Document per attachment. This is wasteful, because the main =
header stuff is needlessly repeated.=0A=0ANow, it would seem better and mor=
e efficient to have one Document for the whole e-mail, storing the main hea=
der stuff only once, and storing the Attachment stuff as multiple instances=
 of the same field. Lucene supports this.=0A=0A=0AThe problem is then a sea=
rch on attachment stuff will return cross cartesian results.=0A=0AExample=
=0A=0A if I have 2 attachments one named A.doc and one B.doc. And A.doc con=
tains the full text "turnip" and B.doc contains the text "dog".=0A=0A=0ANow=
 if the user enters a search requesting email that contains Attachment name=
 A.Doc, and contents dog, the results will be=0A=0AFor the Per-Document sto=
rage:=0A=0Ano results found (correct I'd argue)=0A=0AFor the Single Documen=
t storage:=0A=0A1 result found (because the full text and names of both are=
 stored in the same Document albeit different Field instances)=0A=0AWhile t=
empted by the siren call of the Single Document method, it seems like this =
would return unexpected results from the users point of view (although one =
could argue otherwise, since holistically searching the e-mail as a whole i=
t's returning the "right" results.=0A=0AWhat do you folks think? Any ideas =
for a better way to approach this?=0A=0AThanks=0A=0AMike=0A=0A=0A=0A=0A=0A=
=0A       =0A______________________________________________________________=
______________________Ready for the edge of your seat? =0ACheck out tonight=
's top picks on Yahoo! TV. =0Ahttp://tv.yahoo.com/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 15 18:04:34 2007
Return-Path: <java-user-return-29834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47777 invoked from network); 15 Aug 2007 18:04:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Aug 2007 18:04:32 -0000
Received: (qmail 74230 invoked by uid 500); 15 Aug 2007 18:04:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74084 invoked by uid 500); 15 Aug 2007 18:04:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74073 invoked by uid 99); 15 Aug 2007 18:04:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 11:04:24 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [128.218.33.11] (HELO gossamer.ckm.ucsf.edu) (128.218.33.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 18:04:19 +0000
Received: from CKMPC08 (tikal.library.ucsf.edu [128.218.15.151])
	by gossamer.ckm.ucsf.edu (8.13.8/8.13.8) with ESMTP id l7FI3qQp016680
	for <java-user@lucene.apache.org>; Wed, 15 Aug 2007 11:03:56 -0700 (PDT)
From: "Renaud Waldura" <renaud.waldura@library.ucsf.edu>
To: <java-user@lucene.apache.org>
Subject: LUCENE-423: thread pool implementation of parallel queries
Date: Wed, 15 Aug 2007 11:03:47 -0700
Message-ID: <001701c7df66$a35d56d0$970fda80@libraria.ucsf.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0018_01C7DF2B.F6FE7ED0"
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
Thread-Index: AcffZqAiHW66tcI0Tw6OFzCGXOqbWw==
X-Filter-Version: 1.15 (gossamer)
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0018_01C7DF2B.F6FE7ED0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Could someone who understands Lucene internals help me port
https://issues.apache.org/jira/browse/LUCENE-423 to Lucene 2.0? I have beefy
hardware (32 cores) and want to try this out, but it won't compile.
 
There are 2 issues: 
1- maxScore
On line 412 TopFieldDocs constructor now needs a maxScore. Same on line 328,
TopDocs constructor.
 
2- Weight vs. Query
Lines 202 and 206, the Searchable interface now wants a Weight instead of a
Query.
 
I understand the syntax changes I would have to make -- I can edit the file
and make the compiler errors go away -- but not the implications of these
changes in a multi-threaded context.
 
--Renaud
 

------=_NextPart_000_0018_01C7DF2B.F6FE7ED0--



From java-user-return-29835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 15 19:01:19 2007
Return-Path: <java-user-return-29835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80933 invoked from network); 15 Aug 2007 19:01:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Aug 2007 19:01:17 -0000
Received: (qmail 70598 invoked by uid 500); 15 Aug 2007 19:01:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70557 invoked by uid 500); 15 Aug 2007 19:01:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70546 invoked by uid 99); 15 Aug 2007 19:01:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 12:01:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [17.250.248.185] (HELO smtpout.mac.com) (17.250.248.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 19:01:05 +0000
Received: from mac.com (smtpin04-en2 [10.13.10.149])
	by smtpout.mac.com (Xserve/smtpout15/MantshX 4.0) with ESMTP id l7FJ0jni020865
	for <java-user@lucene.apache.org>; Wed, 15 Aug 2007 12:00:45 -0700 (PDT)
Received: from [192.168.1.100] (216-12-26-89.va.mvl.ntelos.net [216.12.26.89])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin04/MantshX 4.0) with ESMTP id l7FJ0hOO023625
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 15 Aug 2007 12:00:44 -0700 (PDT)
Message-ID: <46C34D5E.20803@mac.com>
Date: Wed, 15 Aug 2007 15:00:46 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Thunderbird 1.5.0.12 (Windows/20070509)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Seeking Advice
References: <220672.84480.qm@web43131.mail.sp1.yahoo.com>
In-Reply-To: <220672.84480.qm@web43131.mail.sp1.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hey Michael,

Are you writing this software for yourself or for reselling?  We built 
an email archiving service and we use lucene as our search engine.  We 
approach this a little differently.

BUT, i don't think it is wasteful to index the header information with 
the attachment.  Just don't store the fields.

-Michael



Michael Bell wrote:
> We are writing a mail archiving program. Each piece of the message (eg each attachment) is stored separately.
>
> I'll try to keep this short and sweet :)
>
> Currently we index the main header fields, like
>
> subject
> sender
> recipients (space delimited)
>
> etc.
>
> This stuff is really only needed once per e-mail
>
> We also index the attachment info:
>
> attachment size (changed to a range like "large", "medium", etc)
> attachment name
> full text index
> etc.
>
> This stuff is needed to be distinct for each attachment in the e-mail
>
> Our current algorithm is wasteful, but I see no better way to do it.
>
> In a loop, for each attachment (and once if we have none), we add all the main header stuff and the attachment stuff, as a separate Document per attachment. This is wasteful, because the main header stuff is needlessly repeated.
>
> Now, it would seem better and more efficient to have one Document for the whole e-mail, storing the main header stuff only once, and storing the Attachment stuff as multiple instances of the same field. Lucene supports this.
>
>
> The problem is then a search on attachment stuff will return cross cartesian results.
>
> Example
>
>  if I have 2 attachments one named A.doc and one B.doc. And A.doc contains the full text "turnip" and B.doc contains the text "dog".
>
>
> Now if the user enters a search requesting email that contains Attachment name A.Doc, and contents dog, the results will be
>
> For the Per-Document storage:
>
> no results found (correct I'd argue)
>
> For the Single Document storage:
>
> 1 result found (because the full text and names of both are stored in the same Document albeit different Field instances)
>
> While tempted by the siren call of the Single Document method, it seems like this would return unexpected results from the users point of view (although one could argue otherwise, since holistically searching the e-mail as a whole it's returning the "right" results.
>
> What do you folks think? Any ideas for a better way to approach this?
>
> Thanks
>
> Mike
>
>
>
>
>
>
>        
> ____________________________________________________________________________________Ready for the edge of your seat? 
> Check out tonight's top picks on Yahoo! TV. 
> http://tv.yahoo.com/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 15 19:02:28 2007
Return-Path: <java-user-return-29836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81471 invoked from network); 15 Aug 2007 19:02:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Aug 2007 19:02:27 -0000
Received: (qmail 75842 invoked by uid 500); 15 Aug 2007 19:02:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75813 invoked by uid 500); 15 Aug 2007 19:02:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75802 invoked by uid 99); 15 Aug 2007 19:02:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 12:02:18 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gresh@us.ibm.com designates 32.97.182.146 as permitted sender)
Received: from [32.97.182.146] (HELO e6.ny.us.ibm.com) (32.97.182.146)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 19:02:28 +0000
Received: from d01relay04.pok.ibm.com (d01relay04.pok.ibm.com [9.56.227.236])
	by e6.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id l7FJ39uI020244
	for <java-user@lucene.apache.org>; Wed, 15 Aug 2007 15:03:09 -0400
Received: from d01av04.pok.ibm.com (d01av04.pok.ibm.com [9.56.224.64])
	by d01relay04.pok.ibm.com (8.13.8/8.13.8/NCO v8.4) with ESMTP id l7FJ1liF529798
	for <java-user@lucene.apache.org>; Wed, 15 Aug 2007 15:01:49 -0400
Received: from d01av04.pok.ibm.com (loopback [127.0.0.1])
	by d01av04.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l7FJ1ltO010076
	for <java-user@lucene.apache.org>; Wed, 15 Aug 2007 15:01:47 -0400
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av04.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l7FJ1lOR010073
	for <java-user@lucene.apache.org>; Wed, 15 Aug 2007 15:01:47 -0400
In-Reply-To: <OF1481F14A.6AB8D503-ON85257338.005ED9F3-85257338.005F5F21@us.ibm.com>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Re: Question about highlighting returning nothing
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OFFFF1475A.8E0DC972-ON85257338.00682749-85257338.0068883A@us.ibm.com>
Date: Wed, 15 Aug 2007 15:01:45 -0400
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Release 8.0|August 02, 2007) at 08/15/2007
 15:01:46,
	Serialize complete at 08/15/2007 15:01:46
Content-Type: multipart/alternative; boundary="=_alternative 0068879F85257338_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0068879F85257338_=
Content-Type: text/plain; charset="US-ASCII"

Well, in my case the highlighting was returning nothing because of (my 
favorite acronym) PBCAK--

I don't store the text in the index, so I have to retrieve it separately 
(from a database) for the highlighting, and my database was not in sync 
with the index, so in a few cases the document in the index had been 
deleted from the database--thus a score, but no document text.

But I guess my original question remains; under what conditions would the 
highlighter return nothing? Only if no terms matched?

Donna 

--=_alternative 0068879F85257338_=--

From java-user-return-29837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 15 19:50:28 2007
Return-Path: <java-user-return-29837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 702 invoked from network); 15 Aug 2007 19:50:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Aug 2007 19:50:14 -0000
Received: (qmail 37870 invoked by uid 500); 15 Aug 2007 19:50:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37825 invoked by uid 500); 15 Aug 2007 19:50:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37787 invoked by uid 99); 15 Aug 2007 19:50:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 12:50:05 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lukas.vlcek@gmail.com designates 209.85.198.188 as permitted sender)
Received: from [209.85.198.188] (HELO rv-out-0910.google.com) (209.85.198.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 19:50:00 +0000
Received: by rv-out-0910.google.com with SMTP id k20so22812rvb
        for <java-user@lucene.apache.org>; Wed, 15 Aug 2007 12:49:40 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kn1mUhP37ckq9S8UdwlTtSxJPH2wsixEWi75iUsdsITeeUdaB3RgBwQQ1cBf5XVZiQoktYZgNG/DroA8igV3HgL0Xkt3D9t9a7oXpTTNv7QCVaSnmTXSBvgniEnpDfjiHldoDM4fQTjrc0qIuFoL4lOV7c4MtG89aPsIYRhYPvk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bJY7tOvceDj8okH6Sea14Tic1MqEZdyhyoqjwg96je3bCH8Y4mMs1NblfV6O8vHZeYXQXdo2mzhslw0Xe6GLmZq/senrTLKe435oyvDPfYpG3ZR2yKVkBFhzJZJnXm/g3oRDZzfHnDAT/YxS+vlapDFGYvlwWx7VDd9MuLd4mnU=
Received: by 10.141.161.6 with SMTP id n6mr362554rvo.1187207380596;
        Wed, 15 Aug 2007 12:49:40 -0700 (PDT)
Received: by 10.141.210.7 with HTTP; Wed, 15 Aug 2007 12:49:40 -0700 (PDT)
Message-ID: <52c3ddca0708151249q64243fc8x341e9112c7925677@mail.gmail.com>
Date: Wed, 15 Aug 2007 21:49:40 +0200
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Question about highlighting returning nothing
In-Reply-To: <OFFFF1475A.8E0DC972-ON85257338.00682749-85257338.0068883A@us.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_25614_21875392.1187207380578"
References: <OF1481F14A.6AB8D503-ON85257338.005ED9F3-85257338.005F5F21@us.ibm.com>
	 <OFFFF1475A.8E0DC972-ON85257338.00682749-85257338.0068883A@us.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_25614_21875392.1187207380578
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Donna,

I have been investigation highlighters in Lucene recently a bit. The humble
experience I've learned so far is that highlighting is completely different
task from indexing/searching tandem. This simple fact is not obvious to a
lot of people. In your particular casue it would be helpful if you can post
more technical details about your system settings. Not only it is important
if the field to be highlighted is stored but also it is important if you
allow for query rewrite and what king of queries you are using (Prefix,
Wildcard ... etc).

Just my 2 cents.

Lukas

On 8/15/07, Donna L Gresh <gresh@us.ibm.com> wrote:
>
> Well, in my case the highlighting was returning nothing because of (my
> favorite acronym) PBCAK--
>
> I don't store the text in the index, so I have to retrieve it separately
> (from a database) for the highlighting, and my database was not in sync
> with the index, so in a few cases the document in the index had been
> deleted from the database--thus a score, but no document text.
>
> But I guess my original question remains; under what conditions would the
> highlighter return nothing? Only if no terms matched?
>
> Donna
>

------=_Part_25614_21875392.1187207380578--

From java-user-return-29838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 15 23:01:44 2007
Return-Path: <java-user-return-29838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78076 invoked from network); 15 Aug 2007 23:01:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Aug 2007 23:01:44 -0000
Received: (qmail 51021 invoked by uid 500); 15 Aug 2007 23:01:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50661 invoked by uid 500); 15 Aug 2007 23:01:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50650 invoked by uid 99); 15 Aug 2007 23:01:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 16:01:36 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [153.96.1.22] (HELO mailgw10.fraunhofer.de) (153.96.1.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 23:01:50 +0000
Received: from mailgw10.fraunhofer.de (localhost [127.0.0.1])
	by mailgw10.fraunhofer.de (8.13.5+/8.13.4) with ESMTP id l7FMiFX3014681
	for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 00:44:15 +0200 (CEST)
Received: from pluto.fokus.fraunhofer.de (pluto.fokus.fraunhofer.de [195.37.77.164])
	by mailgw10.fraunhofer.de (8.13.5+/8.13.4) with ESMTP id l7FMiFEn014669
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=OK)
	for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 00:44:15 +0200 (CEST)
Received: from EXCHSRV.fokus.fraunhofer.de (bohr [10.147.9.231])
	by pluto.fokus.fraunhofer.de (8.13.7/8.13.7) with SMTP id l7FMiEhf020175
	for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 00:44:14 +0200 (MEST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C7DF8D.CE0D6397"
Subject: AW: High CPU usage duing index and search
Date: Thu, 16 Aug 2007 00:41:24 +0200
Message-ID: <79C0EA6E7AD7CE4A85EDAF482B5456B230E6C1@EXCHSRV.fokus.fraunhofer.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <79C0EA6E7AD7CE4A85EDAF482B5456B230E6C1@EXCHSRV.fokus.fraunhofer.de>
Thread-Topic: High CPU usage duing index and search
Thread-Index: AcfdhM21IuCzi6bSSTG5cjLu9YzKKQBkYw3gAB3Dww8=
References: <004201c7d322$69c8bae0$3d5a30a0$@com> <4E0025CD-A1FF-44E4-8322-2A71F9F26332@gmail.com> <003501c7d3e3$ca58e990$5f0abcb0$@com> <D0F005F8-F115-45C9-A5F6-A3F758EE5514@gmail.com> <000901c7d8de$bc2be0c0$3483a240$@com> <12035676.post@talk.nabble.com> <005401c7dd49$01cafda0$0560f8e0$@com> <12122714.post@talk.nabble.com> <001001c7df16$afeae570$0fc0b050$@com>
From: "Steinert, Fabian" <Fabian.Steinert@fokus.fraunhofer.de>
To: <java-user@lucene.apache.org>
X-Fraunhofer-Email-Policy: accepted
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7DF8D.CE0D6397
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi Chew,
=20
with Lucene you could try the following:
=20
Make one query for each single value in each category (each Term):
1Q - Gender:M
2Q - Department:Accounting
3Q - Department:R&D
4Q - ...
=20
with a custom HitCollector like the following example taken from =
org.apache.lucene.search.HitCollector API Spec:
=20
   Searcher searcher =3D new IndexSearcher(indexReader);
   final BitSet bits =3D new BitSet(indexReader.maxDoc());
   searcher.search(query, new HitCollector() {
       public void collect(int doc, float score) {
         bits.set(doc);
       }
     });
=20
Thus you'l get one BitSet for each Term with bits set at DocIDs =
containing the Term.
=20
Then do the combinatory part on these BitSets like:
=20
  BitSet FemaleAndRnD =3D ((BitSet) RnD.clone()).andNot(Male);

Cheers,
Fabian
=20

________________________________

Von: Chew Yee Chuang [mailto:yeechuang@tecforte.com]
Gesendet: Mi 15.08.2007 10:31
An: java-user@lucene.apache.org
Betreff: RE: High CPU usage duing index and search



Greetings,

I have tested with Mysql, the grouping is ok when there is not much =
records in the table, but when I come across to performed grouping in a =
table which have 3 millions of records, It really take a very long time =
to finish. Thus, Im looking at lucene and hope it can help.

Thank you
eChuang, Chew




------_=_NextPart_001_01C7DF8D.CE0D6397
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C7DF8D.CE0D6397--

From java-user-return-29839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 15 23:05:58 2007
Return-Path: <java-user-return-29839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81230 invoked from network); 15 Aug 2007 23:05:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Aug 2007 23:05:57 -0000
Received: (qmail 59359 invoked by uid 500); 15 Aug 2007 23:05:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59313 invoked by uid 500); 15 Aug 2007 23:05:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59302 invoked by uid 99); 15 Aug 2007 23:05:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 16:05:49 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 23:05:45 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ILRvY-0000ok-QJ
	for java-user@lucene.apache.org; Wed, 15 Aug 2007 16:05:24 -0700
Message-ID: <12172277.post@talk.nabble.com>
Date: Wed, 15 Aug 2007 16:05:24 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: out of order
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Using Lucene 2.2.0, I still sporadically got doc out of order error. I
indexed all of my stuff in one thread. Do you have any idea why it happens?

Thanks!
-- 
View this message in context: http://www.nabble.com/out-of-order-tf4276385.html#a12172277
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 15 23:13:31 2007
Return-Path: <java-user-return-29840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84295 invoked from network); 15 Aug 2007 23:13:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Aug 2007 23:13:30 -0000
Received: (qmail 62703 invoked by uid 500); 15 Aug 2007 23:13:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62669 invoked by uid 500); 15 Aug 2007 23:13:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62658 invoked by uid 99); 15 Aug 2007 23:13:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 16:13:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 23:13:20 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 89D4E12470
	for <java-user@lucene.apache.org>; Wed, 15 Aug 2007 19:12:59 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Wed, 15 Aug 2007 19:12:59 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 627B21864C; Wed, 15 Aug 2007 19:12:59 -0400 (EDT)
Message-Id: <1187219579.30380.1205611129@webmail.messagingengine.com>
X-Sasl-Enc: dOhIa+fwiB5v6jugXTPfimvIcavfb6zJ2x3Nj7PbS4Tl 1187219579
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org, java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <12172277.post@talk.nabble.com>
Subject: Re: out of order
In-Reply-To: <12172277.post@talk.nabble.com>
Date: Wed, 15 Aug 2007 19:12:59 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


"testn" <test1@doramail.com> wrote:
> 
> Using Lucene 2.2.0, I still sporadically got doc out of order error. I
> indexed all of my stuff in one thread. Do you have any idea why it
> happens?

Hmmmmm, that is not good.  I thought we had finally fixed this with
LUCENE-140.  Though un-corrected disk errors could in theory lead to
this too.

Are you able to easily reproduce it?  Can you post the full exception?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 00:31:11 2007
Return-Path: <java-user-return-29841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27026 invoked from network); 16 Aug 2007 00:31:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 00:31:11 -0000
Received: (qmail 43600 invoked by uid 500); 16 Aug 2007 00:31:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43569 invoked by uid 500); 16 Aug 2007 00:31:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43558 invoked by uid 99); 16 Aug 2007 00:31:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 17:31:03 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.191 as permitted sender)
Received: from [209.85.128.191] (HELO fk-out-0910.google.com) (209.85.128.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 00:31:01 +0000
Received: by fk-out-0910.google.com with SMTP id z23so70733fkz
        for <java-user@lucene.apache.org>; Wed, 15 Aug 2007 17:30:39 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=BGghUGlff5i9DUb7XoUo410zhD4l4Gv0oC0seMRyGZJPcobyTti+gJi7ADWM9otKVWl976IhRJOqgZ2WrF9vXYfGT7adIpSe2sMl0MzOfL7c0OiyVxoinnkn4ilPHRybO/VhKgoEb9FMt/kJLUvO1x2L0Zews46oG0sblWCm6uM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lZNiIQ4obcVa43O0qczkCX187yMNRBY7BxzUOJeD9P9rYQbTPiiETL2Aq4SnUkeMSPGZHeaWUBkiGMnMMCQA04BzkWcxZgWNNkzGNDwd41i/oL0giu8nTG9SuW0Nf5/Z9Yr8AhO8Qf2AMGiWulGsNjGX4BDEWHSwjozl/tOvLh0=
Received: by 10.82.126.5 with SMTP id y5mr1708298buc.1187224239387;
        Wed, 15 Aug 2007 17:30:39 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Wed, 15 Aug 2007 17:30:39 -0700 (PDT)
Message-ID: <359a92830708151730o4d98cbeai7768fc0402dbb64@mail.gmail.com>
Date: Wed, 15 Aug 2007 20:30:39 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: =?GB2312?B?UmU6ILTwuLQ6IEluZGV4aW5nIGNvcnJlY3RseT8=?=
In-Reply-To: <bd67edef0708150619u50c17ff8qa6cbf923f20a5307@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_48750_18011471.1187224239339"
References: <8E5BA7FAF994C6409A8E074B78EB4677013653B4@14sha-msg02.zm.sd.mediazone.com>
	 <bd67edef0708141234u7e9ee531s2d80b399b20ee983@mail.gmail.com>
	 <B1723B32-8AC1-457A-BFEC-69C63DD3484A@gmail.com>
	 <bd67edef0708150619u50c17ff8qa6cbf923f20a5307@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_48750_18011471.1187224239339
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

OK, what worked? Using a RAMDir?

Erick

On 8/15/07, John Paul Sondag <jsondag2@uiuc.edu> wrote:
>
> It worked!  My indexing time went from over 6 hours to 592 seconds!  Thank
> you guys so much!
>
> --JP
>
> On 8/14/07, karl wettin <karl.wettin@gmail.com> wrote:
> >
> >
> > 14 aug 2007 kl. 21.34 skrev John Paul Sondag:
> >
> > > What exactly is a RAMDirectory, I didn't see it mentioned on that
> > > page.  Is
> > > there example code of using it?   Do I just create a Ram Directory
> > > and then
> > > use it like it's a normal directory?
> >
> > Yes, it is just like FSDirectory, but resides in RAM and is not
> > persistent.
> >
> > <http://www.google.com/search?q=RAMDirectory>
> >
> > --
> > karl
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_48750_18011471.1187224239339--

From java-user-return-29842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 00:39:16 2007
Return-Path: <java-user-return-29842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29340 invoked from network); 16 Aug 2007 00:39:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 00:39:15 -0000
Received: (qmail 55204 invoked by uid 500); 16 Aug 2007 00:39:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55160 invoked by uid 500); 16 Aug 2007 00:39:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55149 invoked by uid 99); 16 Aug 2007 00:39:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 17:39:07 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.191 as permitted sender)
Received: from [209.85.128.191] (HELO fk-out-0910.google.com) (209.85.128.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 00:39:05 +0000
Received: by fk-out-0910.google.com with SMTP id z23so72082fkz
        for <java-user@lucene.apache.org>; Wed, 15 Aug 2007 17:38:42 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XZz+1Dql5Vk+FPMwcK+NU0kN6kEiQpSdwyzI9pqn2DJy+CM7RA53eO12eAFe1cfGRY3Xi+LdvDIm2IcsL49IlRxiyKQ6B3GkMPgTE7osiY579HQPl6E53AmcNXzxial959iwhiabtrRg5eXwZfHPHkq7aVJfU4nHohUbjxlJbV4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VE/qySNojYzoJM7UukItJe5vA+9FucO1KKfEgA9RWx4yVUpKWnmUpC1zZebWG0Xq5xBsnj1iZ3bcXqTvR+m7ecPLWL5xFMNppgH8WybbhAg6mqziB0Gk/XBFeMf+zq71dItUaEMiL9B5gJeWSFQxkfkfhc2Bw86O2xlopyFY1W0=
Received: by 10.82.100.1 with SMTP id x1mr1724564bub.1187224721074;
        Wed, 15 Aug 2007 17:38:41 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Wed, 15 Aug 2007 17:38:41 -0700 (PDT)
Message-ID: <359a92830708151738k5e88202h26780dc5c05d2616@mail.gmail.com>
Date: Wed, 15 Aug 2007 20:38:41 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Seeking Advice
In-Reply-To: <220672.84480.qm@web43131.mail.sp1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_48810_7188673.1187224721042"
References: <220672.84480.qm@web43131.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_48810_7188673.1187224721042
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Rather than use efficiency arguments to drive the behavior of the
app, I'd recommend that you define the expected behavior and
make that behavior happen as necessary.

What would you estimate is the ratio of meta-data to attachments?
And what is the ratio of documents that have multiple attachments?
I actually suspect that the number of e-mails that have multiple
attachments is small enough that storing the meta-data with each
document would result in a minuscule size increase,
but you'll only find that by gathering some statistics <G>....

Erick

On 8/15/07, Michael Bell <mikebell90@yahoo.com> wrote:
>
> We are writing a mail archiving program. Each piece of the message (eg
> each attachment) is stored separately.
>
> I'll try to keep this short and sweet :)
>
> Currently we index the main header fields, like
>
> subject
> sender
> recipients (space delimited)
>
> etc.
>
> This stuff is really only needed once per e-mail
>
> We also index the attachment info:
>
> attachment size (changed to a range like "large", "medium", etc)
> attachment name
> full text index
> etc.
>
> This stuff is needed to be distinct for each attachment in the e-mail
>
> Our current algorithm is wasteful, but I see no better way to do it.
>
> In a loop, for each attachment (and once if we have none), we add all the
> main header stuff and the attachment stuff, as a separate Document per
> attachment. This is wasteful, because the main header stuff is needlessly
> repeated.
>
> Now, it would seem better and more efficient to have one Document for the
> whole e-mail, storing the main header stuff only once, and storing the
> Attachment stuff as multiple instances of the same field. Lucene supports
> this.
>
>
> The problem is then a search on attachment stuff will return cross
> cartesian results.
>
> Example
>
> if I have 2 attachments one named A.doc and one B.doc. And A.doc contains
> the full text "turnip" and B.doc contains the text "dog".
>
>
> Now if the user enters a search requesting email that contains Attachment
> name A.Doc, and contents dog, the results will be
>
> For the Per-Document storage:
>
> no results found (correct I'd argue)
>
> For the Single Document storage:
>
> 1 result found (because the full text and names of both are stored in the
> same Document albeit different Field instances)
>
> While tempted by the siren call of the Single Document method, it seems
> like this would return unexpected results from the users point of view
> (although one could argue otherwise, since holistically searching the e-mail
> as a whole it's returning the "right" results.
>
> What do you folks think? Any ideas for a better way to approach this?
>
> Thanks
>
> Mike
>
>
>
>
>
>
>
> ____________________________________________________________________________________Ready
> for the edge of your seat?
> Check out tonight's top picks on Yahoo! TV.
> http://tv.yahoo.com/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_48810_7188673.1187224721042--

From java-user-return-29843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 01:02:10 2007
Return-Path: <java-user-return-29843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35751 invoked from network); 16 Aug 2007 01:02:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 01:02:09 -0000
Received: (qmail 71562 invoked by uid 500); 16 Aug 2007 01:02:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71524 invoked by uid 500); 16 Aug 2007 01:02:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71513 invoked by uid 99); 16 Aug 2007 01:02:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 18:02:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [17.250.248.171] (HELO smtpout.mac.com) (17.250.248.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 01:02:17 +0000
Received: from mac.com (smtpin06-en2 [10.13.10.151])
	by smtpout.mac.com (Xserve/smtpout01/MantshX 4.0) with ESMTP id l7G11bCT003074
	for <java-user@lucene.apache.org>; Wed, 15 Aug 2007 18:01:37 -0700 (PDT)
Received: from [192.168.1.100] (216-12-26-89.va.mvl.ntelos.net [216.12.26.89])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin06/MantshX 4.0) with ESMTP id l7G11ZmK001518
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 15 Aug 2007 18:01:37 -0700 (PDT)
Message-ID: <46C3A1F1.1000700@mac.com>
Date: Wed, 15 Aug 2007 21:01:37 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Thunderbird 1.5.0.12 (Windows/20070509)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Seeking Advice
References: <220672.84480.qm@web43131.mail.sp1.yahoo.com> <359a92830708151738k5e88202h26780dc5c05d2616@mail.gmail.com>
In-Reply-To: <359a92830708151738k5e88202h26780dc5c05d2616@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I actually know from experience.  Around 20% +/- 5% of emails will have 
attachments.  If that helps.  Again, I say index as much info as you 
can.  Store what you think it necessary.

Erick Erickson wrote:
> Rather than use efficiency arguments to drive the behavior of the
> app, I'd recommend that you define the expected behavior and
> make that behavior happen as necessary.
>
> What would you estimate is the ratio of meta-data to attachments?
> And what is the ratio of documents that have multiple attachments?
> I actually suspect that the number of e-mails that have multiple
> attachments is small enough that storing the meta-data with each
> document would result in a minuscule size increase,
> but you'll only find that by gathering some statistics <G>....
>
> Erick
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 01:24:22 2007
Return-Path: <java-user-return-29844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47669 invoked from network); 16 Aug 2007 01:24:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 01:24:22 -0000
Received: (qmail 89663 invoked by uid 500); 16 Aug 2007 01:24:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89630 invoked by uid 500); 16 Aug 2007 01:24:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89619 invoked by uid 99); 16 Aug 2007 01:24:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Aug 2007 18:24:14 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 01:24:11 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ILU5W-00040x-NU
	for java-user@lucene.apache.org; Wed, 15 Aug 2007 18:23:50 -0700
Message-ID: <12173705.post@talk.nabble.com>
Date: Wed, 15 Aug 2007 18:23:50 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: out of order
In-Reply-To: <1187219579.30380.1205611129@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
References: <12172277.post@talk.nabble.com> <1187219579.30380.1205611129@webmail.messagingengine.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I use RAMDirectory and the error often shows the low number. Last time it
happened with message "7<=7". Nest time it happens, I will try to capture
the stacktrace.



Michael McCandless-2 wrote:
> 
> 
> "testn" <test1@doramail.com> wrote:
>> 
>> Using Lucene 2.2.0, I still sporadically got doc out of order error. I
>> indexed all of my stuff in one thread. Do you have any idea why it
>> happens?
> 
> Hmmmmm, that is not good.  I thought we had finally fixed this with
> LUCENE-140.  Though un-corrected disk errors could in theory lead to
> this too.
> 
> Are you able to easily reproduce it?  Can you post the full exception?
> 
> Mike
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/out-of-order-tf4276385.html#a12173705
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 09:47:47 2007
Return-Path: <java-user-return-29845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97412 invoked from network); 16 Aug 2007 09:47:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 09:47:46 -0000
Received: (qmail 6156 invoked by uid 500); 16 Aug 2007 09:47:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6120 invoked by uid 500); 16 Aug 2007 09:47:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6109 invoked by uid 99); 16 Aug 2007 09:47:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 02:47:37 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mnrz57@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 09:47:33 +0000
Received: by py-out-1112.google.com with SMTP id f31so628188pyh
        for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 02:47:12 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=SoBur+Fhv/AdxJUQh/ChF9PZCn9repfk/5L+GTaNGYSqSnp/Exzr0QT84CPVP9p1y/OYRPkCHiMP77q3pI6P2Ajm7NS9s8zIEwJrM0Q8BRTTfOXE4Dd56qfzdTVPqjv43bp9N23EtS69TB8OmZdYBLhPPlhS5BvauCqIvJtA0NM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NS94dECLKRTOy4oXUCt83lrx1nlSCdQZWBXRXSO/PkQBm05muhxstLMi5Uro/AF4YitlkofbhD5N8BI2Zqa9L6hwljilkOa30lrXepLEcwC6o+Du+L3m0yzmm2uFgc1ruzUTkBbJTTNl5GdxUuI1joyByB9FyX368LBVuU3yVTs=
Received: by 10.65.59.11 with SMTP id m11mr2673484qbk.1187257631957;
        Thu, 16 Aug 2007 02:47:11 -0700 (PDT)
Received: by 10.65.180.12 with HTTP; Thu, 16 Aug 2007 02:47:11 -0700 (PDT)
Message-ID: <34b8543c0708160247g1c20a348pcb3084bf6a907e69@mail.gmail.com>
Date: Thu, 16 Aug 2007 13:17:11 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: query question
In-Reply-To: <3D437013-4DFF-4596-B61E-06428480BC0F@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_60917_22009155.1187257631912"
References: <34b8543c0708142218u654d3da1v30002db3f3cf2b57@mail.gmail.com>
	 <3D437013-4DFF-4596-B61E-06428480BC0F@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_60917_22009155.1187257631912
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes karl, when I explore the index by Luke I can see the terms
for example I have a field namely, patientResult, it contains value "Ca.
Oxalate:many" and also other values such as "Ca. Oxalate:few" etc.

the problems are when I put this query: patientResult:(Ca. Oxalate:few)
the result is
84329 Ca. Oxalate:few
112519 Ca. Oxalate:many
139141 Ca. Oxalate:many
394321 Ca. Oxalate:few
397671 Ca. Oxalate:nod
387549 Ca. Oxalate: mod

however this is not the required result but another problem is when I put
patientResult:Oxalate or patientResult:Oxalate* no result will return!!!

let me tell you that I am extended MultiFieldQueryParser to override its
methods and in getFieldQuery(...) method I return TermQuery

I don't know what I was made wrong?




On 8/15/07, karl wettin <karl.wettin@gmail.com> wrote:
>
>
> 15 aug 2007 kl. 07.18 skrev Mohammad Norouzi:
>
> > I am using WhitespaceAnalyzer and the query is " icdCode:H* " but
> > there is
> > no result however I know that there are many documents with this
> > field value
> > such as H20, H20.5 etc.     this field is tokenized and indexed
> > what is
> > wrong with this?
> > when I test this query with Luke it will return no result as well.
>
> Can you also use Luke to inspect documents you know should contain these
> terms and make sure it really is in there?
>
> --
> karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/
another in Persian: http://fekre-motefavet.blogspot.com/

------=_Part_60917_22009155.1187257631912--

From java-user-return-29846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 09:50:57 2007
Return-Path: <java-user-return-29846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98822 invoked from network); 16 Aug 2007 09:50:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 09:50:56 -0000
Received: (qmail 14567 invoked by uid 500); 16 Aug 2007 09:50:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14536 invoked by uid 500); 16 Aug 2007 09:50:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14525 invoked by uid 99); 16 Aug 2007 09:50:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 02:50:47 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [131.246.120.220] (HELO mailgw1.uni-kl.de) (131.246.120.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 09:50:39 +0000
Received: from dfki-1002.dfki.uni-kl.de (dfki-1002.dfki.uni-kl.de [131.246.195.2])
	by mailgw1.uni-kl.de (8.13.8/8.13.8/Debian-3) with ESMTP id l7G9o9k3022741
	for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 11:50:09 +0200
Received: from serv-4100.kl.dfki.de (serv-4100.kl.dfki.de [192.168.41.180])
	by dfki-1002.dfki.uni-kl.de (8.13.8+Sun/8.11.4) with ESMTP id l7G9o65v009554
	for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 11:50:06 +0200 (CEST)
Received: from [192.168.41.166] (pc-4176 [192.168.41.166])
	by serv-4100.kl.dfki.de (8.13.8+Sun/8.13.8) with ESMTP id l7G9oFXP021279
	for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 11:50:15 +0200 (CEST)
Message-ID: <46C41DD7.3020507@web.de>
Date: Thu, 16 Aug 2007 11:50:15 +0200
From: duiduder@web.de
User-Agent: Thunderbird 1.5.0.8 (X11/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: getting term offset information for fields with multiple value entiries
X-Enigmail-Version: 0.94.0.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hello,

I have an index with an 'actor' field, for each actor there exists an single field value entry, e.g.

stored/compressed,indexed,tokenized,termVector,termVectorOffsets,termVectorPosition <movie_actors>

movie_actors:Mayrata O'Wisiedo (as Mairata O'Wisiedo)
movie_actors:Miguel Bos
movie_actors:Anna Lizaran (as Ana Lizaran)
movie_actors:Raquel Sanchs
movie_actors:Angelina Llongueras

I try to get the term offset, e.g. for 'angelina' with

termPositionVector = (TermPositionVector) reader.getTermFreqVector(docNumber, "movie_actors");
int iTermIndex = termPositionVector.indexOf("angelina");
TermVectorOffsetInfo[] termOffsets = termPositionVector.getOffsets(iTermIndex);


I get one TermVectorOffsetInfo for the field - with offset numbers that are bigger than one single
Field entry.
I guessed that Lucene gives the offset number for the situation that all values were concatenated,
which is for the single (virtual) string:

movie_actors:Mayrata O'Wisiedo (as Mairata O'Wisiedo)Miguel BosAnna Lizaran (as Ana Lizaran)Raquel SanchsAngelina Llongueras

This fits in nearly no situation, so my second guess was that lucene adds some virtual delimiters between the single
field entries for offset calculation. I added a delimiter, so the result would be:

movie_actors:Mayrata O'Wisiedo (as Mairata O'Wisiedo) Miguel Bos Anna Lizaran (as Ana Lizaran) Raquel Sanchs Angelina Llongueras
(note the ' ' between each actor name)

..this also fits not for each situation - there are too much delimiters there now, so, further, I guessed that Lucene don't add
a delimiter in each situation. So I added only one when the last character of an entry was no alphanumerical one, with:
StringBuilder strbAttContent = new StringBuilder();
for (String strAttValue : m_luceneDocument.getValues(strFieldName))
{
   strbAttContent.append(strAttValue);
   if(strbAttContent.substring(strbAttContent.length() - 1).matches("\\w"))
      strbAttContent.append(' ');
}

where I get the result (virtual) entry:
movie_actors:Mayrata O'Wisiedo (as Mairata O'Wisiedo)Miguel BosAnna Lizaran (as Ana Lizaran)Raquel Sanchs Angelina Llongueras

this fits in ~96% of all my queries....but still its not 100% the way lucene calculates the offset value for fields with multiple
value entries.


..maybe the problem is that there are special characters inside my database (e.g. the '' at 'Bos'), where my '\w' don't matches.
I have looked to this specific situation, but considering this one character don't solves the problem.


How do Lucene calculates these offsets? I also searched inside the source code, but can't find the correct place.


Thanks in advance!

Christian Reuschling





- --
______________________________________________________________________________
Christian Reuschling, Dipl.-Ing.(BA)
Software Engineer

Knowledge Management Department
German Research Center for Artificial Intelligence DFKI GmbH
Trippstadter Strae 122, D-67663 Kaiserslautern, Germany

Phone: +49.631.20575-125
mailto:reuschling@dfki.de  http://www.dfki.uni-kl.de/~reuschling/

- ------------Legal Company Information Required by German Law------------------
Geschftsfhrung: Prof. Dr. Dr. h.c. mult. Wolfgang Wahlster (Vorsitzender)
                  Dr. Walter Olthoff
Vorsitzender des Aufsichtsrats: Prof. Dr. h.c. Hans A. Aukes
Amtsgericht Kaiserslautern, HRB 2313=
______________________________________________________________________________
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 (GNU/Linux)

iD8DBQFGxB3XQoTr50f1tpcRAti+AKCH0YgcHjA+bO9NTbuxaAlKb8dO5gCfSfSK
oVOiAdWYROqXOMqHv176xBY=
=b2jO
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 09:51:04 2007
Return-Path: <java-user-return-29847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98901 invoked from network); 16 Aug 2007 09:51:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 09:51:03 -0000
Received: (qmail 14731 invoked by uid 500); 16 Aug 2007 09:50:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14665 invoked by uid 500); 16 Aug 2007 09:50:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14643 invoked by uid 99); 16 Aug 2007 09:50:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 02:50:47 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 09:51:01 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 33C9812FF8
	for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 05:50:19 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Thu, 16 Aug 2007 05:50:19 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 1752456F0; Thu, 16 Aug 2007 05:50:19 -0400 (EDT)
Message-Id: <1187257819.26840.1205679653@webmail.messagingengine.com>
X-Sasl-Enc: KauRpFH/Uk8/edX/pGGwAfi8eF7xhv3Umv4iKATlfNXB 1187257819
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <12172277.post@talk.nabble.com>
   <1187219579.30380.1205611129@webmail.messagingengine.com>
   <12173705.post@talk.nabble.com>
Subject: Re: out of order
In-Reply-To: <12173705.post@talk.nabble.com>
Date: Thu, 16 Aug 2007 05:50:19 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


Well then that is particularly spooky!!

And, hopefully, possible/easy to reproduce.  Thanks.

Mike

"testn" <test1@doramail.com> wrote:
> 
> I use RAMDirectory and the error often shows the low number. Last time it
> happened with message "7<=7". Nest time it happens, I will try to capture
> the stacktrace.
> 
> 
> 
> Michael McCandless-2 wrote:
> > 
> > 
> > "testn" <test1@doramail.com> wrote:
> >> 
> >> Using Lucene 2.2.0, I still sporadically got doc out of order error. I
> >> indexed all of my stuff in one thread. Do you have any idea why it
> >> happens?
> > 
> > Hmmmmm, that is not good.  I thought we had finally fixed this with
> > LUCENE-140.  Though un-corrected disk errors could in theory lead to
> > this too.
> > 
> > Are you able to easily reproduce it?  Can you post the full exception?
> > 
> > Mike
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> > 
> 
> -- 
> View this message in context:
> http://www.nabble.com/out-of-order-tf4276385.html#a12173705
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 12:41:09 2007
Return-Path: <java-user-return-29848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68417 invoked from network); 16 Aug 2007 12:41:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 12:41:08 -0000
Received: (qmail 62314 invoked by uid 500); 16 Aug 2007 12:40:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62274 invoked by uid 500); 16 Aug 2007 12:40:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62263 invoked by uid 99); 16 Aug 2007 12:40:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 05:40:58 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 12:41:13 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ILeeO-0003J2-91
	for java-user@lucene.apache.org; Thu, 16 Aug 2007 05:40:32 -0700
Message-ID: <12180448.post@talk.nabble.com>
Date: Thu, 16 Aug 2007 05:40:32 -0700 (PDT)
From: vini <vandana.shukla@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Can I do boosting based on term postions?
In-Reply-To: <d27fa17e0708031227i1aacf483i272651ecd8c1908e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: vandana.shukla@gmail.com
References: <839ba01c0707312113p278da04bg636e2bfa853e6ff4@mail.gmail.com> <d27fa17e0707312306q5e517d7fyedbedc31094dc6c4@mail.gmail.com> <839ba01c0708011907v643faebbv57127e843700abf9@mail.gmail.com> <200708020922.55296.paul.elschot@xs4all.nl> <839ba01c0708022038r7bf26d50nf4756773b76a9bdd@mail.gmail.com> <200708031649.07438.paul.elschot@xs4all.nl> <d27fa17e0708031135i5692e3c6laf4328a09992dd80@mail.gmail.com> <200708032111.42593.paul.elschot@xs4all.nl> <d27fa17e0708031227i1aacf483i272651ecd8c1908e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Shailendra,

Could you pls send the same class file to my gmail a/c too ?

Regards
vini

Shailendra Sharma wrote:
>=20
> Ah, Good way !
>=20
> On 8/4/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
>>
>> On Friday 03 August 2007 20:35, Shailendra Sharma wrote:
>> > Paul,
>> >
>> > If I understand Cedric right, he wants to have different boosting
>> depending
>> > on search term positions in the document. By using SpanFirstQuery he
>> will
>> > only be able to consider in terms till particular position;
>>
>>
>> > but he won't be
>> > able to do something like following:
>> >   a) Give 100% boosting to matching in first 100 words.
>> >   b) Give 80% boosting to matching in next 100 words.
>> >   c) Give 60% boosting to matching in next 100 words.
>>
>> > Though it can be done by writing DisjunctionMaxQuery having multiple
>> > SpanFirstQuery with different boosting - but I see it as a workaround
>> only
>> > and not the direct and efficient solution.
>>
>> You're right, but SpanFirstQuery needs only a minor modification
>> for this to work.
>>
>> This modification to SpanFirstQuery would be that the Spans
>> returned by SpanFirstQuery.getSpans() must always return 0
>> from its start() method. Then the slop passed to sloppyFreq(slop)
>> would be the distance from the beginning of the indexed field
>> to the end of the Spans of the SpanQuery passed to SpanFirstQuery.
>>
>> Then the following should work:
>>
>> Term firstTerm =3D .... ;
>>
>> SpanFirstQuery sfq =3D new SpanFirstQuery(
>>   new SpanTermQuery( firstTerm),
>>   Integer.MAX_VALUE)) {
>> ...
>> public Similarity getSimilarity() {
>> return new Similarity() {
>> ...
>> float sloppyFreq(slop) {
>>   return (slop < 100)  ? 1.0f
>>            : (slop < 200) ? 0.8f
>>            : (slop < 300) ? 0.6f
>>            : 0.4f ; // etc. etc.
>> }}}}
>>
>>
>> Actually, I'm a bit surprised that SpanFirstQuery does not work that
>> way now.
>>
>> Regards,
>> Paul Elschot
>>
>>
>> >
>> > Cedric,
>> >
>> > I am sending you the implementation of SpanTermQuery to your gmail
>> > account (lucene
>> > mailing list is bouncing email with attachment). I have named the clas=
s
>> as
>> > VSpanTermQuery (I have followed the same package hierarchy as lucene).
>> You
>> > also need to extend VSimilarity class - which would require
>> implementation
>> > of method scoreSpan(..).
>> >
>> > Let me know how it went. Though I did a testing for it, but before
>> > submitting to contrib, I need to do extensive testing.
>> >
>> > Thanks,
>> > Shailendra
>> >
>> > On 8/3/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
>> > >
>> > > Cedric,
>> > >
>> > > You can choose the end limit for SpanFirstQuery yourself.
>> > >
>> > > Regards,
>> > > Paul Elschot
>> > >
>> > >
>> > > On Friday 03 August 2007 05:38, Cedric Ho wrote:
>> > > > Hi Paul,
>> > > >
>> > > > Isn't SpanFirstQuery only match those with position less than a
>> > > > certain end position?
>> > > >
>> > > > I am rather looking for a query that would score a document higher
>> for
>> > > > terms appear near the start but not totally discard those with
>> terms
>> > > > appear near the end.
>> > > >
>> > > > Regards,
>> > > > Cedric
>> > > >
>> > > > On 8/2/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
>> > > > > Cedric,
>> > > > >
>> > > > > SpanFirstQuery could be a solution without payloads.
>> > > > > You may want to give it your own Similarity.sloppyFreq() .
>> > > > >
>> > > > > Regards,
>> > > > > Paul Elschot
>> > > > >
>> > > > > On Thursday 02 August 2007 04:07, Cedric Ho wrote:
>> > > > > > Thanks for the quick response =3D)
>> > > > > >
>> > > > > > On 8/1/07, Shailendra Sharma <shailendra.sharma@gmail.com>
>> wrote:
>> > > > > > > Yes, it is easily doable through "Payload" facility. During
>> > > indexing
>> > > > > process
>> > > > > > > (mainly tokenization), you need to push this extra
>> information
>> in
>> > > each
>> > > > > > > token. And then you can use BoostingTermQuery for using
>> Payload
>> > > value
>> > > to
>> > > > > > > include Payload in the score. You also need to implement
>> > > Similarity
>> > > for
>> > > > > this
>> > > > > > > (mainly scorePayload method).
>> > > > > >
>> > > > > > If I store, say a custom boost factor as Payload, does it mean=
s
>> that
>> > > I
>> > > > > > will store one more byte per term per document in the index
>> file? So
>> > > > > > the index file would be much larger?
>> > > > > >
>> > > > > > >
>> > > > > > > Other way can be to extend SpanTermQuery, this already
>> calculates
>> > > the
>> > > > > > > position of match. You just need to do something to use this
>> > > position
>> > > > > value
>> > > > > > > in the score calculation.
>> > > > > >
>> > > > > > I see that SpanTermQuery takes a TermPositions from the
>> indexReader
>> > > > > > and I can get the term position from there. However I am not
>> sure
>> > > how
>> > > > > > to incorporate it into the score calculation. Would you mind
>> give a
>> > > > > > little more detail on this?
>> > > > > >
>> > > > > > >
>> > > > > > > One possible advantage of SpanTermQuery approach is that you
>> can
>> > > play
>> > > > > > > around, without re-creating indices everytime.
>> > > > > > >
>> > > > > > > Thanks,
>> > > > > > > Shailendra Sharma,
>> > > > > > > CTO, Ver se' Innovation Pvt. Ltd.
>> > > > > > > Bangalore, India
>> > > > > > >
>> > > > > > > On 8/1/07, Cedric Ho <cedric.ho@gmail.com> wrote:
>> > > > > > > >
>> > > > > > > > Hi all,
>> > > > > > > >
>> > > > > > > > I was wondering if it is possible to do boosting by search
>> > > terms'
>> > > > > > > > position in the document.
>> > > > > > > >
>> > > > > > > > for example:
>> > > > > > > > search terms appear in the first 100 words, or first 10%
>> words,
>> > > or
>> > > in
>> > > > > > > > first two paragraphs would be given higher score.
>> > > > > > > >
>> > > > > > > > Is it achievable through using the new Payload function in
>> > > lucene
>> > > 2.2?
>> > > > > > > > Or are there any easier ways to achieve these ?
>> > > > > > > >
>> > > > > > > >
>> > > > > > > > Regards,
>> > > > > > > > Cedric
>> > > > > > > >
>> > > > > > > >
>> > > --------------------------------------------------------------------=
-
>> > > > > > > > To unsubscribe, e-mail:
>> java-user-unsubscribe@lucene.apache.org
>> > > > > > > > For additional commands, e-mail:
>> > > java-user-help@lucene.apache.org
>> > > > > > > >
>> > > > > > > >
>> > > > > > >
>> > > > > >
>> > > > > > Thanks,
>> > > > > > Cedric
>> > > > > >
>> > > > > >
>> > > --------------------------------------------------------------------=
-
>> > > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.or=
g
>> > > > > > For additional commands, e-mail:
>> java-user-help@lucene.apache.org
>> > > > > >
>> > > > > >
>> > > > > >
>> > > > >
>> > > > >
>> ---------------------------------------------------------------------
>> > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > > > For additional commands, e-mail: java-user-help@lucene.apache.or=
g
>> > > > >
>> > > > >
>> > > >
>> > > >
>> > > > --
>> > > > =E6=84=9B@=E4=B8=8A.Keyboard
>> > > >
>> > > >
>> > > >
>> > >
>> > > --------------------------------------------------------------------=
-
>> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> > >
>> > >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Can-I-do-boosting-based=
-on-term-postions--tf4197947.html#a12180448
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 13:26:40 2007
Return-Path: <java-user-return-29849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93619 invoked from network); 16 Aug 2007 13:26:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 13:26:14 -0000
Received: (qmail 60278 invoked by uid 500); 16 Aug 2007 13:26:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60240 invoked by uid 500); 16 Aug 2007 13:26:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60229 invoked by uid 99); 16 Aug 2007 13:26:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 06:26:04 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gresh@us.ibm.com designates 32.97.182.146 as permitted sender)
Received: from [32.97.182.146] (HELO e6.ny.us.ibm.com) (32.97.182.146)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 13:25:58 +0000
Received: from d01relay04.pok.ibm.com (d01relay04.pok.ibm.com [9.56.227.236])
	by e6.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id l7GDQvUx021844
	for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 09:26:57 -0400
Received: from d01av03.pok.ibm.com (d01av03.pok.ibm.com [9.56.224.217])
	by d01relay04.pok.ibm.com (8.13.8/8.13.8/NCO v8.4) with ESMTP id l7GDPblY348524
	for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 09:25:37 -0400
Received: from d01av03.pok.ibm.com (loopback [127.0.0.1])
	by d01av03.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l7GDPbYa029635
	for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 09:25:37 -0400
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av03.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l7GDPaXk029632
	for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 09:25:36 -0400
In-Reply-To: <52c3ddca0708151249q64243fc8x341e9112c7925677@mail.gmail.com>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Re: Question about highlighting returning nothing
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OFDC4C2E77.149E3F63-ON85257339.00497F9F-85257339.0049C174@us.ibm.com>
Date: Thu, 16 Aug 2007 09:25:35 -0400
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Release 8.0|August 02, 2007) at 08/16/2007
 09:25:36,
	Serialize complete at 08/16/2007 09:25:36
Content-Type: multipart/alternative; boundary="=_alternative 0049C12B85257339_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0049C12B85257339_=
Content-Type: text/plain; charset="US-ASCII"

Actually I don't think I'm having trouble-- as I mentioned,
my text is *not* stored, so to do highlighting I retrieve the
text from the database, apply the appropriate analyzer, 
and do the highlighting. It seems to be working exactly as
it should. My problem was that in a few cases, the document
has been removed from the database (but not from the index)
so when I queried the database using the identifier for the "best
hit" from the index, nothing
was being returned. Passing "nothing" to the highlighter 
resulted in, of course, nothing, so I was getting no highlighted
text. Once I updated my index to be in synch with the database,
I no longer had any empty returns from the highlighter.

Donna L. Gresh
Services Research, Mathematical Sciences Department
IBM T.J. Watson Research Center
(914) 945-2472
http://www.research.ibm.com/people/g/donnagresh
gresh@us.ibm.com




"Lukas Vlcek" <lukas.vlcek@gmail.com> 
08/15/2007 03:49 PM
Please respond to
java-user@lucene.apache.org


To
java-user@lucene.apache.org
cc

Subject
Re: Question about highlighting returning nothing






Donna,

I have been investigation highlighters in Lucene recently a bit. The 
humble
experience I've learned so far is that highlighting is completely 
different
task from indexing/searching tandem. This simple fact is not obvious to a
lot of people. In your particular casue it would be helpful if you can 
post
more technical details about your system settings. Not only it is 
important
if the field to be highlighted is stored but also it is important if you
allow for query rewrite and what king of queries you are using (Prefix,
Wildcard ... etc).

Just my 2 cents.

Lukas

On 8/15/07, Donna L Gresh <gresh@us.ibm.com> wrote:
>
> Well, in my case the highlighting was returning nothing because of (my
> favorite acronym) PBCAK--
>
> I don't store the text in the index, so I have to retrieve it separately
> (from a database) for the highlighting, and my database was not in sync
> with the index, so in a few cases the document in the index had been
> deleted from the database--thus a score, but no document text.
>
> But I guess my original question remains; under what conditions would 
the
> highlighter return nothing? Only if no terms matched?
>
> Donna
>


--=_alternative 0049C12B85257339_=--

From java-user-return-29850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 14:01:57 2007
Return-Path: <java-user-return-29850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10974 invoked from network); 16 Aug 2007 14:01:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 14:01:56 -0000
Received: (qmail 67709 invoked by uid 500); 16 Aug 2007 14:01:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67679 invoked by uid 500); 16 Aug 2007 14:01:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67668 invoked by uid 99); 16 Aug 2007 14:01:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 07:01:46 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jpsondag@gmail.com designates 209.85.198.188 as permitted sender)
Received: from [209.85.198.188] (HELO rv-out-0910.google.com) (209.85.198.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 14:01:43 +0000
Received: by rv-out-0910.google.com with SMTP id k20so184387rvb
        for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 07:01:23 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=Skh97beOTikqjh2QBMtLn9vLS+NE5fM3i+x2WGu/Uq9bC7csEOBS95JaglSKSWsvvQ+K5KOhe8NsHODmUOsj0LSavFdqWfcEoCrZDrBhFmw5sH4pfXKzu4m/byX8y4NRXBvocUeew5hyUonWbzs98EHBJx05wXdH+z8bIrcWMYk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=ep+ZJoRyYCkkdU2DbJN4vOUVDJoghnVR32u40vCVN9fYO0G73tMQAg77vOHbjqOP98xiVjIESRdLULZpZfdwV9Odd99lTknaNBnGl/7sMLL7ElhPkiZcRdsU68IpaKTLanvfBn9nIOpByPn73MLBqsC0nEwNk6KBLDvUBlHWK5E=
Received: by 10.141.167.5 with SMTP id u5mr704177rvo.1187272883389;
        Thu, 16 Aug 2007 07:01:23 -0700 (PDT)
Received: by 10.140.200.19 with HTTP; Thu, 16 Aug 2007 07:01:23 -0700 (PDT)
Message-ID: <bd67edef0708160701k7e9a7faud8cb5c167039b6@mail.gmail.com>
Date: Thu, 16 Aug 2007 09:01:23 -0500
From: "John Paul Sondag" <jsondag2@uiuc.edu>
Sender: jpsondag@gmail.com
To: java-user@lucene.apache.org
Subject: =?GB2312?B?UmU6ILTwuLQ6IEluZGV4aW5nIGNvcnJlY3RseT8=?=
In-Reply-To: <359a92830708151730o4d98cbeai7768fc0402dbb64@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3963_18472468.1187272883334"
References: <8E5BA7FAF994C6409A8E074B78EB4677013653B4@14sha-msg02.zm.sd.mediazone.com>
	 <bd67edef0708141234u7e9ee531s2d80b399b20ee983@mail.gmail.com>
	 <B1723B32-8AC1-457A-BFEC-69C63DD3484A@gmail.com>
	 <bd67edef0708150619u50c17ff8qa6cbf923f20a5307@mail.gmail.com>
	 <359a92830708151730o4d98cbeai7768fc0402dbb64@mail.gmail.com>
X-Google-Sender-Auth: c4750642ebeaf7a2
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3963_18472468.1187272883334
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I've started to redo tests one at a time to see what exactly caused the
decreased index time.  Using the absolute path instead of the relative path
to the data doesn't seem to have made a significant difference, but using
StringBuffers (with a default of 250000) made a huge change.  I still have
to try having the RAMDir as the only change to see what happens.

--JP


On 8/15/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> OK, what worked? Using a RAMDir?
>
> Erick
>
> On 8/15/07, John Paul Sondag <jsondag2@uiuc.edu> wrote:
> >
> > It worked!  My indexing time went from over 6 hours to 592
> seconds!  Thank
> > you guys so much!
> >
> > --JP
> >
> > On 8/14/07, karl wettin <karl.wettin@gmail.com> wrote:
> > >
> > >
> > > 14 aug 2007 kl. 21.34 skrev John Paul Sondag:
> > >
> > > > What exactly is a RAMDirectory, I didn't see it mentioned on that
> > > > page.  Is
> > > > there example code of using it?   Do I just create a Ram Directory
> > > > and then
> > > > use it like it's a normal directory?
> > >
> > > Yes, it is just like FSDirectory, but resides in RAM and is not
> > > persistent.
> > >
> > > <http://www.google.com/search?q=RAMDirectory>
> > >
> > > --
> > > karl
> > >
> > >
> > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>

------=_Part_3963_18472468.1187272883334--

From java-user-return-29851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 14:19:25 2007
Return-Path: <java-user-return-29851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18257 invoked from network); 16 Aug 2007 14:19:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 14:19:23 -0000
Received: (qmail 15862 invoked by uid 500); 16 Aug 2007 14:19:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15836 invoked by uid 500); 16 Aug 2007 14:19:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15825 invoked by uid 99); 16 Aug 2007 14:19:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 07:19:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [72.249.39.145] (HELO hubmed.org) (72.249.39.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 14:19:29 +0000
Received: from [127.0.0.1] (hubmed.org [72.249.39.145])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by hubmed.org (Postfix) with ESMTP id 27D1F3C281
	for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 14:18:46 +0000 (UTC)
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Transfer-Encoding: 7bit
Message-Id: <5EEF8043-275C-44E9-A984-48F29FAC83E0@hubmed.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Alf Eaton <lists@hubmed.org>
Subject: Stemmed terms/common terms
Date: Thu, 16 Aug 2007 15:17:00 +0100
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

A couple of questions about term frequencies and stemming:

- What's the best way to get the most common unstemmed form of a  
Porter-stemmed word from the index? For example given the stem  
'walk', find that 'walking' is the most common full word in the index.

- Is there a way to get a list of all the terms in the index (or  
maybe just the top n) ordered by descending frequency of usage? I  
imagine it's related to docFreq, but can't see how to get a list of  
terms in all documents.

I'm using PyLucene and Solr, so if there are easy solutions in either  
of those that would be ideal.

Thanks,
alf.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 15:07:10 2007
Return-Path: <java-user-return-29852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45079 invoked from network); 16 Aug 2007 15:07:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 15:07:09 -0000
Received: (qmail 50993 invoked by uid 500); 16 Aug 2007 15:07:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50420 invoked by uid 500); 16 Aug 2007 15:07:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50409 invoked by uid 99); 16 Aug 2007 15:07:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 08:07:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lukas.vlcek@gmail.com designates 209.85.198.189 as permitted sender)
Received: from [209.85.198.189] (HELO rv-out-0910.google.com) (209.85.198.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 15:06:57 +0000
Received: by rv-out-0910.google.com with SMTP id k20so196434rvb
        for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 08:06:37 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=MMJeJPBDHM++TWLINl9mmt3jWNgbTzTGztmWIFfxOs0fttIupn8uFsscUK251JN5Y/8qnSBd1fG1sBWBmNqvGbO1XM7DI/4eP22WbSpS6/U7OlV5zLFoP2P9ooKqsDOkhz1KLPcWIEjj/6nOkWxL3uqxYbh8YAZbEYlHqty+uwU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bdmN5xrATXXHuZG9KGovVCGxXH7+ML8MPIH6e2liABU5qL4CTVpvWEgoShBXXvWe+R2jiwJNZGnGyAhWUL2fUkFhMN5u0afaDecINlYO5IQZNi6yquwnlOOAXUEbNooRAhkHYxC2mhWExgs+rXy88UNogv/v0398v87cWlrtlTE=
Received: by 10.141.18.14 with SMTP id v14mr739223rvi.1187276796896;
        Thu, 16 Aug 2007 08:06:36 -0700 (PDT)
Received: by 10.141.210.7 with HTTP; Thu, 16 Aug 2007 08:06:36 -0700 (PDT)
Message-ID: <52c3ddca0708160806j65580698q66c20bf899ff611c@mail.gmail.com>
Date: Thu, 16 Aug 2007 17:06:36 +0200
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Question about highlighting returning nothing
In-Reply-To: <OFDC4C2E77.149E3F63-ON85257339.00497F9F-85257339.0049C174@us.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_29000_6151897.1187276796871"
References: <52c3ddca0708151249q64243fc8x341e9112c7925677@mail.gmail.com>
	 <OFDC4C2E77.149E3F63-ON85257339.00497F9F-85257339.0049C174@us.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_29000_6151897.1187276796871
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Donna,

Now I understand what you are saying (seems that I had PBCAK as well ;-)

As for your last question: ...under what conditions would the highlighter
return nothing? Only if no terms matched?

I remember that I found that highlighter can return null or empty string in
different situations. I think it depends on the Analyzer used or something
like that...

BR
Lukas

On 8/16/07, Donna L Gresh <gresh@us.ibm.com> wrote:
>
> Actually I don't think I'm having trouble-- as I mentioned,
> my text is *not* stored, so to do highlighting I retrieve the
> text from the database, apply the appropriate analyzer,
> and do the highlighting. It seems to be working exactly as
> it should. My problem was that in a few cases, the document
> has been removed from the database (but not from the index)
> so when I queried the database using the identifier for the "best
> hit" from the index, nothing
> was being returned. Passing "nothing" to the highlighter
> resulted in, of course, nothing, so I was getting no highlighted
> text. Once I updated my index to be in synch with the database,
> I no longer had any empty returns from the highlighter.
>
> Donna L. Gresh
> Services Research, Mathematical Sciences Department
> IBM T.J. Watson Research Center
> (914) 945-2472
> http://www.research.ibm.com/people/g/donnagresh
> gresh@us.ibm.com
>
>
>
>
> "Lukas Vlcek" <lukas.vlcek@gmail.com>
> 08/15/2007 03:49 PM
> Please respond to
> java-user@lucene.apache.org
>
>
> To
> java-user@lucene.apache.org
> cc
>
> Subject
> Re: Question about highlighting returning nothing
>
>
>
>
>
>
> Donna,
>
> I have been investigation highlighters in Lucene recently a bit. The
> humble
> experience I've learned so far is that highlighting is completely
> different
> task from indexing/searching tandem. This simple fact is not obvious to a
> lot of people. In your particular casue it would be helpful if you can
> post
> more technical details about your system settings. Not only it is
> important
> if the field to be highlighted is stored but also it is important if you
> allow for query rewrite and what king of queries you are using (Prefix,
> Wildcard ... etc).
>
> Just my 2 cents.
>
> Lukas
>
> On 8/15/07, Donna L Gresh <gresh@us.ibm.com> wrote:
> >
> > Well, in my case the highlighting was returning nothing because of (my
> > favorite acronym) PBCAK--
> >
> > I don't store the text in the index, so I have to retrieve it separately
> > (from a database) for the highlighting, and my database was not in sync
> > with the index, so in a few cases the document in the index had been
> > deleted from the database--thus a score, but no document text.
> >
> > But I guess my original question remains; under what conditions would
> the
> > highlighter return nothing? Only if no terms matched?
> >
> > Donna
> >
>
>

------=_Part_29000_6151897.1187276796871--

From java-user-return-29853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 15:28:54 2007
Return-Path: <java-user-return-29853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80695 invoked from network); 16 Aug 2007 15:28:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 15:28:52 -0000
Received: (qmail 5707 invoked by uid 500); 16 Aug 2007 15:28:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5449 invoked by uid 500); 16 Aug 2007 15:28:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5438 invoked by uid 99); 16 Aug 2007 15:28:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 08:28:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.85] (HELO web26011.mail.ukl.yahoo.com) (217.12.10.85)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 16 Aug 2007 15:28:29 +0000
Received: (qmail 30476 invoked by uid 60001); 16 Aug 2007 15:28:07 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=QO1B519ZjjZ8NV493lHxoPiEGjzo9dHQf1v69KM97aKxw7eW+pDv3fw8E3C1Yi9G8zUPAaUSkxbrqHHPB/YdRX8i07q/FbaHDTUeLRmmr7bJ8WPjLXUzK44IGw5oDNpa3LkDFtJnljEeelXdRy5H+yUgp+qdEisbFgaSo4PgBHM=;
X-YMail-OSG: mByrN8gVM1k4NxGisgYsdQm69wzjFL9RMHXiCqFh1XSOHBLtTl37OTt0FxblDxMtHmx0kb8Cg2SsRqnMx32kT1loyk4olnaIdKn94H1k_7lB28Xwe_pWnjw4aMc-
Received: from [193.36.230.96] by web26011.mail.ukl.yahoo.com via HTTP; Thu, 16 Aug 2007 15:28:07 GMT
X-Mailer: YahooMailRC/651.48 YahooMailWebService/0.7.119
Date: Thu, 16 Aug 2007 15:28:07 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Question about highlighting returning nothing
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <713408.27318.qm@web26011.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Highlighter deliberately returns null so the calling app can tell when the =
text wasn't successfully highlighted.=0A=0ASituations when this can happen =
are:=0A=0A1) The text is out of synch with the index (the scenario you enco=
untered)=0A2) The choice of analyzer used to tokenize the text differs from=
 that used by the query parser=0A3) The document was matched on un-highligh=
table criteria e.g. a range query which the QueryParser will have turned in=
to a ConstantScoreQuery wrapping a filter for performance reasons - no term=
s in the range are visible to the highlighter under these circumstances as =
the criteria becomes a bitset rather than a list of terms in the rewritten =
query.=0A=0A=0ACheers=0AMark=0A=0A=0A----- Original Message ----=0AFrom: Lu=
kas Vlcek <lukas.vlcek@gmail.com>=0ATo: java-user@lucene.apache.org=0ASent:=
 Thursday, 16 August, 2007 4:06:36 PM=0ASubject: Re: Question about highlig=
hting returning nothing=0A=0ADonna,=0A=0ANow I understand what you are sayi=
ng (seems that I had PBCAK as well ;-)=0A=0AAs for your last question: ...u=
nder what conditions would the highlighter=0Areturn nothing? Only if no ter=
ms matched?=0A=0AI remember that I found that highlighter can return null o=
r empty string in=0Adifferent situations. I think it depends on the Analyze=
r used or something=0Alike that...=0A=0ABR=0ALukas=0A=0AOn 8/16/07, Donna L=
 Gresh <gresh@us.ibm.com> wrote:=0A>=0A> Actually I don't think I'm having =
trouble-- as I mentioned,=0A> my text is *not* stored, so to do highlightin=
g I retrieve the=0A> text from the database, apply the appropriate analyzer=
,=0A> and do the highlighting. It seems to be working exactly as=0A> it sho=
uld. My problem was that in a few cases, the document=0A> has been removed =
from the database (but not from the index)=0A> so when I queried the databa=
se using the identifier for the "best=0A> hit" from the index, nothing=0A> =
was being returned. Passing "nothing" to the highlighter=0A> resulted in, o=
f course, nothing, so I was getting no highlighted=0A> text. Once I updated=
 my index to be in synch with the database,=0A> I no longer had any empty r=
eturns from the highlighter.=0A>=0A> Donna L. Gresh=0A> Services Research, =
Mathematical Sciences Department=0A> IBM T.J. Watson Research Center=0A> (9=
14) 945-2472=0A> http://www.research.ibm.com/people/g/donnagresh=0A> gresh@=
us.ibm.com=0A>=0A>=0A>=0A>=0A> "Lukas Vlcek" <lukas.vlcek@gmail.com>=0A> 08=
/15/2007 03:49 PM=0A> Please respond to=0A> java-user@lucene.apache.org=0A>=
=0A>=0A> To=0A> java-user@lucene.apache.org=0A> cc=0A>=0A> Subject=0A> Re: =
Question about highlighting returning nothing=0A>=0A>=0A>=0A>=0A>=0A>=0A> D=
onna,=0A>=0A> I have been investigation highlighters in Lucene recently a b=
it. The=0A> humble=0A> experience I've learned so far is that highlighting =
is completely=0A> different=0A> task from indexing/searching tandem. This s=
imple fact is not obvious to a=0A> lot of people. In your particular casue =
it would be helpful if you can=0A> post=0A> more technical details about yo=
ur system settings. Not only it is=0A> important=0A> if the field to be hig=
hlighted is stored but also it is important if you=0A> allow for query rewr=
ite and what king of queries you are using (Prefix,=0A> Wildcard ... etc).=
=0A>=0A> Just my 2 cents.=0A>=0A> Lukas=0A>=0A> On 8/15/07, Donna L Gresh <=
gresh@us.ibm.com> wrote:=0A> >=0A> > Well, in my case the highlighting was =
returning nothing because of (my=0A> > favorite acronym) PBCAK--=0A> >=0A> =
> I don't store the text in the index, so I have to retrieve it separately=
=0A> > (from a database) for the highlighting, and my database was not in s=
ync=0A> > with the index, so in a few cases the document in the index had b=
een=0A> > deleted from the database--thus a score, but no document text.=0A=
> >=0A> > But I guess my original question remains; under what conditions w=
ould=0A> the=0A> > highlighter return nothing? Only if no terms matched?=0A=
> >=0A> > Donna=0A> >=0A>=0A>=0A=0A=0A=0A=0A=0A      ______________________=
_____________________________________ =0AWant ideas for reducing your carbo=
n footprint? Visit Yahoo! For Good  http://uk.promotions.yahoo.com/forgood/=
environment.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 15:55:57 2007
Return-Path: <java-user-return-29854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29834 invoked from network); 16 Aug 2007 15:55:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 15:55:54 -0000
Received: (qmail 70179 invoked by uid 500); 16 Aug 2007 15:55:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70112 invoked by uid 500); 16 Aug 2007 15:55:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70089 invoked by uid 99); 16 Aug 2007 15:55:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 08:55:50 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 15:56:05 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ILhgy-0001KH-N7
	for java-user@lucene.apache.org; Thu, 16 Aug 2007 08:55:24 -0700
Message-ID: <12184067.post@talk.nabble.com>
Date: Thu, 16 Aug 2007 08:55:24 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: out of order
In-Reply-To: <1187257819.26840.1205679653@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
References: <12172277.post@talk.nabble.com> <1187219579.30380.1205611129@webmail.messagingengine.com> <12173705.post@talk.nabble.com> <1187257819.26840.1205679653@webmail.messagingengine.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Here you go....

 -> Error during the indexing : docs out of order (0 <= 0 )
org.apache.lucene.index.CorruptIndexException: docs out of order (0 <= 0 )
        at
org.apache.lucene.index.SegmentMerger.appendPostings(SegmentMerger.java:368)
        at
org.apache.lucene.index.SegmentMerger.mergeTermInfo(SegmentMerger.java:325)
        at
org.apache.lucene.index.SegmentMerger.mergeTermInfos(SegmentMerger.java:297)
        at
org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:261)
        at
org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:98)
        at
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:1883)
        at
org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:1741)
        at
org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:1733)
        at
org.apache.lucene.index.IndexWriter.maybeFlushRamSegments(IndexWriter.java:1727)
        at
org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1004)
        at
org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:983)
        at
org.springmodules.lucene.index.factory.SimpleLuceneIndexWriter.addDocument(SimpleLuceneIndexWriter.java:44)
)
        at
org.springmodules.lucene.index.object.database.DefaultDatabaseIndexer.doHandleRequest(DefaultDatabaseIndexer.java:306)
        at
org.springmodules.lucene.index.object.database.DefaultDatabaseIndexer.index(DefaultDatabaseIndexer.java:354)


Michael McCandless-2 wrote:
> 
> 
> Well then that is particularly spooky!!
> 
> And, hopefully, possible/easy to reproduce.  Thanks.
> 
> Mike
> 
> "testn" <test1@doramail.com> wrote:
>> 
>> I use RAMDirectory and the error often shows the low number. Last time it
>> happened with message "7<=7". Nest time it happens, I will try to capture
>> the stacktrace.
>> 
>> 
>> 
>> Michael McCandless-2 wrote:
>> > 
>> > 
>> > "testn" <test1@doramail.com> wrote:
>> >> 
>> >> Using Lucene 2.2.0, I still sporadically got doc out of order error. I
>> >> indexed all of my stuff in one thread. Do you have any idea why it
>> >> happens?
>> > 
>> > Hmmmmm, that is not good.  I thought we had finally fixed this with
>> > LUCENE-140.  Though un-corrected disk errors could in theory lead to
>> > this too.
>> > 
>> > Are you able to easily reproduce it?  Can you post the full exception?
>> > 
>> > Mike
>> > 
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> > 
>> > 
>> > 
>> 
>> -- 
>> View this message in context:
>> http://www.nabble.com/out-of-order-tf4276385.html#a12173705
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/out-of-order-tf4276385.html#a12184067
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 16:07:09 2007
Return-Path: <java-user-return-29855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50616 invoked from network); 16 Aug 2007 16:07:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 16:07:07 -0000
Received: (qmail 92618 invoked by uid 500); 16 Aug 2007 16:06:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92576 invoked by uid 500); 16 Aug 2007 16:06:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92565 invoked by uid 99); 16 Aug 2007 16:06:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 09:06:59 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a17.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 16:07:12 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a17.g.dreamhost.com (Postfix) with ESMTP id D1E59741B3
	for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 09:06:29 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <5EEF8043-275C-44E9-A984-48F29FAC83E0@hubmed.org>
References: <5EEF8043-275C-44E9-A984-48F29FAC83E0@hubmed.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <84C35825-435B-44E8-9D4A-8DC99F6B8C73@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Stemmed terms/common terms
Date: Thu, 16 Aug 2007 12:06:10 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Aug 16, 2007, at 10:17 AM, Alf Eaton wrote:

> A couple of questions about term frequencies and stemming:
>
> - What's the best way to get the most common unstemmed form of a  
> Porter-stemmed word from the index? For example given the stem  
> 'walk', find that 'walking' is the most common full word in the index.

Are both in the index?  I would think this is going to take some  
application specific logic, since Lucene doesn't inherently track  
these relations.  You might be able to string something together  
using some of the regular expression/wildcard queries, but it is  
going to take some work on your part.

Another approach might be to put some mechanisms in place during  
analysis that track this information.

>
> - Is there a way to get a list of all the terms in the index (or  
> maybe just the top n) ordered by descending frequency of usage? I  
> imagine it's related to docFreq, but can't see how to get a list of  
> terms in all documents.

Have a look at Luke if you just want the info as part of a UI.  Also,  
I _believe_ Solr has added a LukeRequestHandler (see http:// 
wiki.apache.org/solr/LukeRequestHandler), not sure if it does  
everything you are looking for, but it might be a place to start.   
You might ask your question on the Solr mailing list.

>
> I'm using PyLucene and Solr, so if there are easy solutions in  
> either of those that would be ideal.
>
> Thanks,
> alf.
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 16:16:12 2007
Return-Path: <java-user-return-29856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61954 invoked from network); 16 Aug 2007 16:16:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 16:16:11 -0000
Received: (qmail 18208 invoked by uid 500); 16 Aug 2007 16:16:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18167 invoked by uid 500); 16 Aug 2007 16:16:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18132 invoked by uid 99); 16 Aug 2007 16:16:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 09:16:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [72.249.39.145] (HELO hubmed.org) (72.249.39.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 16:16:18 +0000
Received: from [127.0.0.1] (hubmed.org [72.249.39.145])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by hubmed.org (Postfix) with ESMTP id AFC4B3C2C2
	for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 16:15:33 +0000 (UTC)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <84C35825-435B-44E8-9D4A-8DC99F6B8C73@apache.org>
References: <5EEF8043-275C-44E9-A984-48F29FAC83E0@hubmed.org> <84C35825-435B-44E8-9D4A-8DC99F6B8C73@apache.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2D7499CC-33A3-45CD-A2D0-79E22CD560A1@hubmed.org>
Content-Transfer-Encoding: 7bit
From: Alf Eaton <lists@hubmed.org>
Subject: Re: Stemmed terms/common terms
Date: Thu, 16 Aug 2007 17:13:48 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On 16 Aug 2007, at 17:06, Grant Ingersoll wrote:

>
> On Aug 16, 2007, at 10:17 AM, Alf Eaton wrote:
>
>> A couple of questions about term frequencies and stemming:
>>
>> - What's the best way to get the most common unstemmed form of a  
>> Porter-stemmed word from the index? For example given the stem  
>> 'walk', find that 'walking' is the most common full word in the  
>> index.
>
> Are both in the index?  I would think this is going to take some  
> application specific logic, since Lucene doesn't inherently track  
> these relations.  You might be able to string something together  
> using some of the regular expression/wildcard queries, but it is  
> going to take some work on your part.

Hmm, no - the stemmed token is indexed and the full field is stored.  
I guess that means running a search for the stem and then using the  
same logic as a highlighter to find and extract the actual terms from  
each document.

> Another approach might be to put some mechanisms in place during  
> analysis that track this information.

How would you recommend doing this - using positionIncrement to store  
the stem and the original word at the same position, perhaps?

alf.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 16:17:01 2007
Return-Path: <java-user-return-29857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62655 invoked from network); 16 Aug 2007 16:17:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 16:17:00 -0000
Received: (qmail 20383 invoked by uid 500); 16 Aug 2007 16:16:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20050 invoked by uid 500); 16 Aug 2007 16:16:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20039 invoked by uid 99); 16 Aug 2007 16:16:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 09:16:51 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lukas.vlcek@gmail.com designates 209.85.198.186 as permitted sender)
Received: from [209.85.198.186] (HELO rv-out-0910.google.com) (209.85.198.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 16:16:47 +0000
Received: by rv-out-0910.google.com with SMTP id k20so209312rvb
        for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 09:16:27 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=piQMCrkGZrFlghp/AZs9fMraRJx5nL5E+NswkI5QX+oGhtNyYIkjmTPre+RmmFpU+xCIqB5PQCiMTBGu/t4cy6z9TTqMtLl7dF+aOF2DVaogk8NaRmVFbZQ9WfuBVU8zVDRO62W+V384SN0Ixu7DfNymyrGavkLAGzx0LP/fq/Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=C1jW/NvEbd6zXfSaDFHv7Jt4K9CnqxCCe+XfglFiM5y8zO788T6ozaWNLHhKARw9KHaGy3hd0FIV3DCM8yiwQhY2LWOlN3GiYrSRKXNIrYsop1fwAbU5YRddHawQbDV85uj8ODfQWoCL6H6EbBIJlQf6hOo+gNGF+QZ4uU5nLQU=
Received: by 10.141.202.12 with SMTP id e12mr789990rvq.1187280986891;
        Thu, 16 Aug 2007 09:16:26 -0700 (PDT)
Received: by 10.141.210.7 with HTTP; Thu, 16 Aug 2007 09:16:25 -0700 (PDT)
Message-ID: <52c3ddca0708160916h6013beddqa2e99efca1226b47@mail.gmail.com>
Date: Thu, 16 Aug 2007 18:16:25 +0200
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Question about highlighting returning nothing
In-Reply-To: <713408.27318.qm@web26011.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_29326_18664354.1187280985301"
References: <713408.27318.qm@web26011.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_29326_18664354.1187280985301
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

What I meant was that highlighter can return either null or empty string. So
one should check for the null first and then also for "". At least that is
my observation...

Lukas

On 8/16/07, mark harwood <markharw00d@yahoo.co.uk> wrote:
>
> Highlighter deliberately returns null so the calling app can tell when the
> text wasn't successfully highlighted.
>
> Situations when this can happen are:
>
> 1) The text is out of synch with the index (the scenario you encountered)
> 2) The choice of analyzer used to tokenize the text differs from that used
> by the query parser
> 3) The document was matched on un-highlightable criteria e.g. a range
> query which the QueryParser will have turned into a ConstantScoreQuery
> wrapping a filter for performance reasons - no terms in the range are
> visible to the highlighter under these circumstances as the criteria becomes
> a bitset rather than a list of terms in the rewritten query.
>
>
> Cheers
> Mark
>
>
> ----- Original Message ----
> From: Lukas Vlcek <lukas.vlcek@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, 16 August, 2007 4:06:36 PM
> Subject: Re: Question about highlighting returning nothing
>
> Donna,
>
> Now I understand what you are saying (seems that I had PBCAK as well ;-)
>
> As for your last question: ...under what conditions would the highlighter
> return nothing? Only if no terms matched?
>
> I remember that I found that highlighter can return null or empty string
> in
> different situations. I think it depends on the Analyzer used or something
> like that...
>
> BR
> Lukas
>
> On 8/16/07, Donna L Gresh <gresh@us.ibm.com> wrote:
> >
> > Actually I don't think I'm having trouble-- as I mentioned,
> > my text is *not* stored, so to do highlighting I retrieve the
> > text from the database, apply the appropriate analyzer,
> > and do the highlighting. It seems to be working exactly as
> > it should. My problem was that in a few cases, the document
> > has been removed from the database (but not from the index)
> > so when I queried the database using the identifier for the "best
> > hit" from the index, nothing
> > was being returned. Passing "nothing" to the highlighter
> > resulted in, of course, nothing, so I was getting no highlighted
> > text. Once I updated my index to be in synch with the database,
> > I no longer had any empty returns from the highlighter.
> >
> > Donna L. Gresh
> > Services Research, Mathematical Sciences Department
> > IBM T.J. Watson Research Center
> > (914) 945-2472
> > http://www.research.ibm.com/people/g/donnagresh
> > gresh@us.ibm.com
> >
> >
> >
> >
> > "Lukas Vlcek" <lukas.vlcek@gmail.com>
> > 08/15/2007 03:49 PM
> > Please respond to
> > java-user@lucene.apache.org
> >
> >
> > To
> > java-user@lucene.apache.org
> > cc
> >
> > Subject
> > Re: Question about highlighting returning nothing
> >
> >
> >
> >
> >
> >
> > Donna,
> >
> > I have been investigation highlighters in Lucene recently a bit. The
> > humble
> > experience I've learned so far is that highlighting is completely
> > different
> > task from indexing/searching tandem. This simple fact is not obvious to
> a
> > lot of people. In your particular casue it would be helpful if you can
> > post
> > more technical details about your system settings. Not only it is
> > important
> > if the field to be highlighted is stored but also it is important if you
> > allow for query rewrite and what king of queries you are using (Prefix,
> > Wildcard ... etc).
> >
> > Just my 2 cents.
> >
> > Lukas
> >
> > On 8/15/07, Donna L Gresh <gresh@us.ibm.com> wrote:
> > >
> > > Well, in my case the highlighting was returning nothing because of (my
> > > favorite acronym) PBCAK--
> > >
> > > I don't store the text in the index, so I have to retrieve it
> separately
> > > (from a database) for the highlighting, and my database was not in
> sync
> > > with the index, so in a few cases the document in the index had been
> > > deleted from the database--thus a score, but no document text.
> > >
> > > But I guess my original question remains; under what conditions would
> > the
> > > highlighter return nothing? Only if no terms matched?
> > >
> > > Donna
> > >
> >
> >
>
>
>
>
>
>       ___________________________________________________________
> Want ideas for reducing your carbon footprint? Visit Yahoo! For Good
> http://uk.promotions.yahoo.com/forgood/environment.html
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_29326_18664354.1187280985301--

From java-user-return-29858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 16:39:46 2007
Return-Path: <java-user-return-29858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 980 invoked from network); 16 Aug 2007 16:39:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 16:39:46 -0000
Received: (qmail 88010 invoked by uid 500); 16 Aug 2007 16:39:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87985 invoked by uid 500); 16 Aug 2007 16:39:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87974 invoked by uid 99); 16 Aug 2007 16:39:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 09:39:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of montgomerie@shaw.ca designates 24.71.223.10 as permitted sender)
Received: from [24.71.223.10] (HELO pd3mo2so.prod.shaw.ca) (24.71.223.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 16:39:52 +0000
Received: from pd3mr4so.prod.shaw.ca
 (pd3mr4so-qfe3.prod.shaw.ca [10.0.141.180]) by l-daemon
 (Sun ONE Messaging Server 6.0 HotFix 1.01 (built Mar 15 2004))
 with ESMTP id <0JMV00CKJKX8V300@l-daemon> for java-user@lucene.apache.org;
 Thu, 16 Aug 2007 10:39:08 -0600 (MDT)
Received: from pn2ml10so.prod.shaw.ca ([10.0.121.80])
 by pd3mr4so.prod.shaw.ca (Sun Java System Messaging Server 6.2-7.05 (built Sep
 5 2006)) with ESMTP id <0JMV001NCKX7YZ60@pd3mr4so.prod.shaw.ca> for
 java-user@lucene.apache.org; Thu, 16 Aug 2007 10:39:08 -0600 (MDT)
Received: from [192.168.1.105] ([68.148.7.15])
 by l-daemon (Sun ONE Messaging Server 6.0 HotFix 1.01 (built Mar 15 2004))
 with ESMTP id <0JMV004HEKX6NIB3@l-daemon> for java-user@lucene.apache.org;
 Thu, 16 Aug 2007 10:39:07 -0600 (MDT)
Date: Thu, 16 Aug 2007 10:39:06 -0600
From: Scott Montgomerie <montgomerie@shaw.ca>
Subject: [Fwd: Exception in MultiLevelSkipListReader$SkipBuffer.readByte]
To: java-user@lucene.apache.org
Message-id: <46C47DAA.9080609@shaw.ca>
MIME-version: 1.0
Content-type: text/plain; charset=ISO-8859-1
Content-transfer-encoding: 7bit
X-Enigmail-Version: 0.94.3.0
User-Agent: Thunderbird 2.0.0.0 (X11/20070411)
X-Virus-Checked: Checked by ClamAV on apache.org

I'm getting an ArrayIndexOutOfBoundsException in
MultiLevelSkipListReader$SkipBuffer. This happens sporadically, on a
fairly small index (18 MB, about 30,000 documents). The index is
subject to a lot of adds and deletes, some of them concurrently. It
happens after about 4 days of heavy usage. I was able to isolate a copy
of the index that causes the exception, and I can reproduce the
exception cleanly in a Junit test.
I can see that readByte(), where the error is occuring, has no bounds
checking, therefore I assume that the data in there must be correct?
Hence, the index has obviously become corrupted. Further, optimizing
the index fixes the problem.

The problem is reproducible in working system. As I said, around 4-5
days after optimization, the same error occurs sporadically.
Any ideas?

Oh and this is Lucene 2.2.0, jdk 1.5.0_12.

The code from the junit test that calls this is pretty simple:

Query profileQuery = new TermQuery(new
Term(IndexFields.bookmark_profile_id, "1"));
Hits h = searcher.search(profileQuery, filterPrivate());

search is a plain old IndexSearcher, and filterPrivate() returns a
QueryFilter based on a 2-term BooleanQuery.


Full stack trace:

Exception in thread "MultiSearcher thread #2"
java.lang.ArrayIndexOutOfBoundsException: 14
at
org.apache.lucene.index.MultiLevelSkipListReader$SkipBuffer.readByte(MultiLevelSkipListReader.java:258)
at org.apache.lucene.store.IndexInput.readVInt(IndexInput.java:57)
at
org.apache.lucene.index.DefaultSkipListReader.readSkipData(DefaultSkipListReader.java:110)
at
org.apache.lucene.index.MultiLevelSkipListReader.loadNextSkip(MultiLevelSkipListReader.java:140)
at
org.apache.lucene.index.MultiLevelSkipListReader.skipTo(MultiLevelSkipListReader.java:110)
at
org.apache.lucene.index.SegmentTermDocs.skipTo(SegmentTermDocs.java:164)
at org.apache.lucene.index.MultiTermDocs.skipTo(MultiReader.java:413)
at org.apache.lucene.search.TermScorer.skipTo(TermScorer.java:145)
at
org.apache.lucene.util.ScorerDocQueue.topSkipToAndAdjustElsePop(ScorerDocQueue.java:120)
at
org.apache.lucene.search.DisjunctionSumScorer.skipTo(DisjunctionSumScorer.java:229)
at
org.apache.lucene.search.BooleanScorer2.skipTo(BooleanScorer2.java:381)
at
org.apache.lucene.search.ConjunctionScorer.doNext(ConjunctionScorer.java:63)
at
org.apache.lucene.search.ConjunctionScorer.next(ConjunctionScorer.java:58)
at
org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java:327)
at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:146)
at org.apache.lucene.search.Searcher.search(Searcher.java:118)
at org.apache.lucene.search.Searcher.search(Searcher.java:97)
at
org.apache.lucene.search.QueryWrapperFilter.bits(QueryWrapperFilter.java:50)
at
org.apache.lucene.search.CachingWrapperFilter.bits(CachingWrapperFilter.java:58)
at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:133)
at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:113)
at
org.apache.lucene.search.MultiSearcherThread.run(ParallelMultiSearcher.java:250)

java.lang.NullPointerException
at
org.apache.lucene.search.MultiSearcherThread.hits(ParallelMultiSearcher.java:280)
at
org.apache.lucene.search.ParallelMultiSearcher.search(ParallelMultiSearcher.java:83)
at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:74)
at org.apache.lucene.search.Hits.<init>(Hits.java:53)
at org.apache.lucene.search.Searcher.search(Searcher.java:46)

Thanks.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 16:48:02 2007
Return-Path: <java-user-return-29859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9261 invoked from network); 16 Aug 2007 16:48:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 16:48:00 -0000
Received: (qmail 16085 invoked by uid 500); 16 Aug 2007 16:47:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16048 invoked by uid 500); 16 Aug 2007 16:47:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16021 invoked by uid 99); 16 Aug 2007 16:47:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 09:47:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 16:47:38 +0000
Received: by ug-out-1314.google.com with SMTP id c2so308328ugf
        for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 09:47:16 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=GWGYwj98H94xG/nXfFxo+slvcK9P2VTuuQapnhjmyyRXx8Mne75mfXofn3QcCu/CRiLm11D/yDJZ/mkA99xe0GdrysBCl0bOwt7FpZsro2ZancAsFleBUUVNydmziHTd3HZgbnxzeGBWGjSk1QvS9p+ZbhFCfSXgO4SMVxRaZOM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=tWCPvE8z1hcIt3/4mxlYb7S4tXKxP+U1cO0yQMR1IkmIFVFzqaINe0dJ6kku13oEvoZtetFSR2aJjSupEisLsgiWSFCGmx4IZUQExn/zrOab6qtHrK+8xpSjfXY+75d/B+47tzk0+cDx4o+Hm+ZxNrPwQHGFFIDBUGY0czkNZx8=
Received: by 10.142.158.17 with SMTP id g17mr122651wfe.1187282832931;
        Thu, 16 Aug 2007 09:47:12 -0700 (PDT)
Received: by 10.143.33.20 with HTTP; Thu, 16 Aug 2007 09:47:12 -0700 (PDT)
Message-ID: <c68e39170708160947p4c02c220qda02e8b886a51e9f@mail.gmail.com>
Date: Thu, 16 Aug 2007 12:47:12 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: [Fwd: Exception in MultiLevelSkipListReader$SkipBuffer.readByte]
In-Reply-To: <46C47DAA.9080609@shaw.ca>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <46C47DAA.9080609@shaw.ca>
X-Google-Sender-Auth: c9f06dacf5f1e01b
X-Virus-Checked: Checked by ClamAV on apache.org

I wonder if this is related to
https://issues.apache.org/jira/browse/LUCENE-951

If it's easy enough for you to reproduce, could you try the trunk
version of Lucene and see if it's fixed?

-Yonik

On 8/16/07, Scott Montgomerie <montgomerie@shaw.ca> wrote:
> I'm getting an ArrayIndexOutOfBoundsException in
> MultiLevelSkipListReader$SkipBuffer. This happens sporadically, on a
> fairly small index (18 MB, about 30,000 documents). The index is
> subject to a lot of adds and deletes, some of them concurrently. It
> happens after about 4 days of heavy usage. I was able to isolate a copy
> of the index that causes the exception, and I can reproduce the
> exception cleanly in a Junit test.
> I can see that readByte(), where the error is occuring, has no bounds
> checking, therefore I assume that the data in there must be correct?
> Hence, the index has obviously become corrupted. Further, optimizing
> the index fixes the problem.
>
> The problem is reproducible in working system. As I said, around 4-5
> days after optimization, the same error occurs sporadically.
> Any ideas?
>
> Oh and this is Lucene 2.2.0, jdk 1.5.0_12.
>
> The code from the junit test that calls this is pretty simple:
>
> Query profileQuery = new TermQuery(new
> Term(IndexFields.bookmark_profile_id, "1"));
> Hits h = searcher.search(profileQuery, filterPrivate());
>
> search is a plain old IndexSearcher, and filterPrivate() returns a
> QueryFilter based on a 2-term BooleanQuery.
>
>
> Full stack trace:
>
> Exception in thread "MultiSearcher thread #2"
> java.lang.ArrayIndexOutOfBoundsException: 14
> at
> org.apache.lucene.index.MultiLevelSkipListReader$SkipBuffer.readByte(MultiLevelSkipListReader.java:258)
> at org.apache.lucene.store.IndexInput.readVInt(IndexInput.java:57)
> at
> org.apache.lucene.index.DefaultSkipListReader.readSkipData(DefaultSkipListReader.java:110)
> at
> org.apache.lucene.index.MultiLevelSkipListReader.loadNextSkip(MultiLevelSkipListReader.java:140)
> at
> org.apache.lucene.index.MultiLevelSkipListReader.skipTo(MultiLevelSkipListReader.java:110)
> at
> org.apache.lucene.index.SegmentTermDocs.skipTo(SegmentTermDocs.java:164)
> at org.apache.lucene.index.MultiTermDocs.skipTo(MultiReader.java:413)
> at org.apache.lucene.search.TermScorer.skipTo(TermScorer.java:145)
> at
> org.apache.lucene.util.ScorerDocQueue.topSkipToAndAdjustElsePop(ScorerDocQueue.java:120)
> at
> org.apache.lucene.search.DisjunctionSumScorer.skipTo(DisjunctionSumScorer.java:229)
> at
> org.apache.lucene.search.BooleanScorer2.skipTo(BooleanScorer2.java:381)
> at
> org.apache.lucene.search.ConjunctionScorer.doNext(ConjunctionScorer.java:63)
> at
> org.apache.lucene.search.ConjunctionScorer.next(ConjunctionScorer.java:58)
> at
> org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java:327)
> at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:146)
> at org.apache.lucene.search.Searcher.search(Searcher.java:118)
> at org.apache.lucene.search.Searcher.search(Searcher.java:97)
> at
> org.apache.lucene.search.QueryWrapperFilter.bits(QueryWrapperFilter.java:50)
> at
> org.apache.lucene.search.CachingWrapperFilter.bits(CachingWrapperFilter.java:58)
> at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:133)
> at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:113)
> at
> org.apache.lucene.search.MultiSearcherThread.run(ParallelMultiSearcher.java:250)
>
> java.lang.NullPointerException
> at
> org.apache.lucene.search.MultiSearcherThread.hits(ParallelMultiSearcher.java:280)
> at
> org.apache.lucene.search.ParallelMultiSearcher.search(ParallelMultiSearcher.java:83)
> at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:74)
> at org.apache.lucene.search.Hits.<init>(Hits.java:53)
> at org.apache.lucene.search.Searcher.search(Searcher.java:46)
>
> Thanks.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 16:54:19 2007
Return-Path: <java-user-return-29860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11747 invoked from network); 16 Aug 2007 16:54:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 16:54:18 -0000
Received: (qmail 46214 invoked by uid 500); 16 Aug 2007 16:53:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45942 invoked by uid 500); 16 Aug 2007 16:53:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45931 invoked by uid 99); 16 Aug 2007 16:53:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 09:53:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [72.249.39.145] (HELO hubmed.org) (72.249.39.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 16:53:53 +0000
Received: from [127.0.0.1] (hubmed.org [72.249.39.145])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by hubmed.org (Postfix) with ESMTP id 07C1B3C2C7
	for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 16:53:32 +0000 (UTC)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <5EEF8043-275C-44E9-A984-48F29FAC83E0@hubmed.org>
References: <5EEF8043-275C-44E9-A984-48F29FAC83E0@hubmed.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A3509D36-144C-4A36-85B7-3A356092E705@hubmed.org>
Content-Transfer-Encoding: 7bit
From: Alf Eaton <lists@hubmed.org>
Subject: Re: Stemmed terms/common terms
Date: Thu, 16 Aug 2007 17:51:47 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

On 16 Aug 2007, at 15:17, Alf Eaton wrote:
>
> - Is there a way to get a list of all the terms in the index (or  
> maybe just the top n) ordered by descending frequency of usage? I  
> imagine it's related to docFreq, but can't see how to get a list of  
> terms in all documents.

Thanks to http://tinyurl.com/2gndww I worked out how to do this (to  
get a list of terms and their frequency) with PyLucene:

terms = reader.terms()
while terms.next():
   term = terms.term()
   if term.field() == 'title':
     print '%s - %d' % (term.text(), reader.docFreq(term))


alf.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 16:54:33 2007
Return-Path: <java-user-return-29861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11880 invoked from network); 16 Aug 2007 16:54:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 16:54:30 -0000
Received: (qmail 47066 invoked by uid 500); 16 Aug 2007 16:54:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47027 invoked by uid 500); 16 Aug 2007 16:54:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47015 invoked by uid 99); 16 Aug 2007 16:54:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 09:54:07 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mbarbarelli@gmail.com designates 209.85.132.245 as permitted sender)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 16:54:04 +0000
Received: by an-out-0708.google.com with SMTP id c5so29963anc
        for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 09:53:43 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=VZslC5NAC0oshnMhTJo+MF7obltMHJxwSX3DUcGWr+aUfS3ZRk8OLzLcl2FMSGJhUmSIwAV9qX/ECUNixOR1/Y3P1xbSJ0J+GuhyYO2x+/uzxtweLiZAu5qLThzDJt4pdWTugh1A7URY74ZUmrJFmGuuSk5SgcM0xRs8DG1Ly7g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=RGbplavqhQiB3PhsDh33Z6SEhj6dIqqoXueZ1mZvTi6ChwR63VlKoyvQnuAxAQqbjVF4eSc/DSeBdc7AA1sJmRnXIyNEu4We+Ftmpgaiuq7IRXXLx3edihU8nFhZLSQmHfyqyuOoQKDhHEdm5mtN+XWDFTH2HWeJExb4ECWP2l4=
Received: by 10.90.52.18 with SMTP id z18mr2938020agz.1187283223693;
        Thu, 16 Aug 2007 09:53:43 -0700 (PDT)
Received: by 10.100.198.5 with HTTP; Thu, 16 Aug 2007 09:53:43 -0700 (PDT)
Message-ID: <a258c0620708160953o7fc52828oee13e487636873a5@mail.gmail.com>
Date: Thu, 16 Aug 2007 17:53:43 +0100
From: "Michael Barbarelli" <mbarbarelli@gmail.com>
To: java-user@lucene.apache.org
Subject: Possible to expose similarity as a property in hits collection?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_122351_29543557.1187283223630"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_122351_29543557.1187283223630
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello all.

I am trying to get at the raw difference that Lucene uses -- the result of
the fail-fast Levenstein distance algorithm.  I believe that it is
calculated in FuzzyTermEnum.java (FuzzyTermEnum.cs).
In the application I have built upon Lucene, I would like to expose
similarity as the score, instead of the default score Lucene generates which
I believe is based on term frequency, etc.
Ideally, I would like to get at the FuzzyQuery/edit-distance-related numbers
from the Hits object, not just the normalized score.

Is it possible to do this?  Anyone have any experience with this?
Incidentally, I am using Lucene.NET.

Thanks,
Mike

------=_Part_122351_29543557.1187283223630--

From java-user-return-29862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 16:56:37 2007
Return-Path: <java-user-return-29862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12921 invoked from network); 16 Aug 2007 16:56:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 16:56:35 -0000
Received: (qmail 65068 invoked by uid 500); 16 Aug 2007 16:56:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65035 invoked by uid 500); 16 Aug 2007 16:56:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65019 invoked by uid 99); 16 Aug 2007 16:56:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 09:56:23 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 16:56:19 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ILida-0003Nb-Ea
	for java-user@lucene.apache.org; Thu, 16 Aug 2007 09:55:58 -0700
Message-ID: <12185271.post@talk.nabble.com>
Date: Thu, 16 Aug 2007 09:55:58 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: query question
In-Reply-To: <34b8543c0708160247g1c20a348pcb3084bf6a907e69@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
References: <34b8543c0708142218u654d3da1v30002db3f3cf2b57@mail.gmail.com> <3D437013-4DFF-4596-B61E-06428480BC0F@gmail.com> <34b8543c0708160247g1c20a348pcb3084bf6a907e69@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Can you post your code? Make sure that when you use wildcard in your custom
query parser, it will generate either WildcardQuery or PrefixQuery
correctly. 


is_maximum wrote:
> 
> Yes karl, when I explore the index by Luke I can see the terms
> for example I have a field namely, patientResult, it contains value "Ca.
> Oxalate:many" and also other values such as "Ca. Oxalate:few" etc.
> 
> the problems are when I put this query: patientResult:(Ca. Oxalate:few)
> the result is
> 84329 Ca. Oxalate:few
> 112519 Ca. Oxalate:many
> 139141 Ca. Oxalate:many
> 394321 Ca. Oxalate:few
> 397671 Ca. Oxalate:nod
> 387549 Ca. Oxalate: mod
> 
> however this is not the required result but another problem is when I put
> patientResult:Oxalate or patientResult:Oxalate* no result will return!!!
> 
> let me tell you that I am extended MultiFieldQueryParser to override its
> methods and in getFieldQuery(...) method I return TermQuery
> 
> I don't know what I was made wrong?
> 
> 
> 
> 
> On 8/15/07, karl wettin <karl.wettin@gmail.com> wrote:
>>
>>
>> 15 aug 2007 kl. 07.18 skrev Mohammad Norouzi:
>>
>> > I am using WhitespaceAnalyzer and the query is " icdCode:H* " but
>> > there is
>> > no result however I know that there are many documents with this
>> > field value
>> > such as H20, H20.5 etc.     this field is tokenized and indexed
>> > what is
>> > wrong with this?
>> > when I test this query with Luke it will return no result as well.
>>
>> Can you also use Luke to inspect documents you know should contain these
>> terms and make sure it really is in there?
>>
>> --
>> karl
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 
> -- 
> Regards,
> Mohammad
> --------------------------
> see my blog: http://brainable.blogspot.com/
> another in Persian: http://fekre-motefavet.blogspot.com/
> 
> 

-- 
View this message in context: http://www.nabble.com/query-question-tf4271198.html#a12185271
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 17:53:07 2007
Return-Path: <java-user-return-29863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48208 invoked from network); 16 Aug 2007 17:53:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 17:53:07 -0000
Received: (qmail 52128 invoked by uid 500); 16 Aug 2007 17:52:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52096 invoked by uid 500); 16 Aug 2007 17:52:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52085 invoked by uid 99); 16 Aug 2007 17:52:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 10:52:57 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 17:53:12 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id DD33A106F9
	for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 13:52:29 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Thu, 16 Aug 2007 13:52:29 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id B2C0215786; Thu, 16 Aug 2007 13:52:29 -0400 (EDT)
Message-Id: <1187286749.14646.1205757601@webmail.messagingengine.com>
X-Sasl-Enc: EO+/S9vkQccwRzovfvXMYZZs0Vk07jBjTqh40rfl0v8U 1187286749
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org, java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <12172277.post@talk.nabble.com>
   <1187219579.30380.1205611129@webmail.messagingengine.com>
   <12173705.post@talk.nabble.com>
   <1187257819.26840.1205679653@webmail.messagingengine.com>
   <12184067.post@talk.nabble.com>
Subject: Re: out of order
In-Reply-To: <12184067.post@talk.nabble.com>
Date: Thu, 16 Aug 2007 13:52:29 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


OK.  Is it possible to capture this as small test case?

Maybe also call IndexWriter.setInfoStream(System.out) and capture details on
what segments are being merged?

Can you shed some light on how the application is using Lucene?  Are you doing
deletes as well as adds?  Opening readers against this RAMDirectory?  Closing/
opening writers at different times?  Any changes to the default parameters
(mergeFactor, maxBufferedDocs, etc.)?

Mike

"testn" <test1@doramail.com> wrote:
> 
> Here you go....
> 
>  -> Error during the indexing : docs out of order (0 <= 0 )
> org.apache.lucene.index.CorruptIndexException: docs out of order (0 <= 0
> )
>         at
> org.apache.lucene.index.SegmentMerger.appendPostings(SegmentMerger.java:368)
>         at
> org.apache.lucene.index.SegmentMerger.mergeTermInfo(SegmentMerger.java:325)
>         at
> org.apache.lucene.index.SegmentMerger.mergeTermInfos(SegmentMerger.java:297)
>         at
> org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:261)
>         at
> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:98)
>         at
> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:1883)
>         at
> org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:1741)
>         at
> org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:1733)
>         at
> org.apache.lucene.index.IndexWriter.maybeFlushRamSegments(IndexWriter.java:1727)
>         at
> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1004)
>         at
> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:983)
>         at
> org.springmodules.lucene.index.factory.SimpleLuceneIndexWriter.addDocument(SimpleLuceneIndexWriter.java:44)
> )
>         at
> org.springmodules.lucene.index.object.database.DefaultDatabaseIndexer.doHandleRequest(DefaultDatabaseIndexer.java:306)
>         at
> org.springmodules.lucene.index.object.database.DefaultDatabaseIndexer.index(DefaultDatabaseIndexer.java:354)
> 
> 
> Michael McCandless-2 wrote:
> > 
> > 
> > Well then that is particularly spooky!!
> > 
> > And, hopefully, possible/easy to reproduce.  Thanks.
> > 
> > Mike
> > 
> > "testn" <test1@doramail.com> wrote:
> >> 
> >> I use RAMDirectory and the error often shows the low number. Last time it
> >> happened with message "7<=7". Nest time it happens, I will try to capture
> >> the stacktrace.
> >> 
> >> 
> >> 
> >> Michael McCandless-2 wrote:
> >> > 
> >> > 
> >> > "testn" <test1@doramail.com> wrote:
> >> >> 
> >> >> Using Lucene 2.2.0, I still sporadically got doc out of order error. I
> >> >> indexed all of my stuff in one thread. Do you have any idea why it
> >> >> happens?
> >> > 
> >> > Hmmmmm, that is not good.  I thought we had finally fixed this with
> >> > LUCENE-140.  Though un-corrected disk errors could in theory lead to
> >> > this too.
> >> > 
> >> > Are you able to easily reproduce it?  Can you post the full exception?
> >> > 
> >> > Mike
> >> > 
> >> > ---------------------------------------------------------------------
> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> > 
> >> > 
> >> > 
> >> 
> >> -- 
> >> View this message in context:
> >> http://www.nabble.com/out-of-order-tf4276385.html#a12173705
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >> 
> >> 
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> > 
> 
> -- 
> View this message in context:
> http://www.nabble.com/out-of-order-tf4276385.html#a12184067
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 18:08:42 2007
Return-Path: <java-user-return-29864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53779 invoked from network); 16 Aug 2007 18:08:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 18:08:40 -0000
Received: (qmail 75222 invoked by uid 500); 16 Aug 2007 18:08:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75172 invoked by uid 500); 16 Aug 2007 18:08:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75161 invoked by uid 99); 16 Aug 2007 18:08:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 11:08:31 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 18:08:47 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ILjlN-0005rO-Jl
	for java-user@lucene.apache.org; Thu, 16 Aug 2007 11:08:05 -0700
Message-ID: <12186579.post@talk.nabble.com>
Date: Thu, 16 Aug 2007 11:08:05 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: out of order
In-Reply-To: <1187286749.14646.1205757601@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
References: <12172277.post@talk.nabble.com> <1187219579.30380.1205611129@webmail.messagingengine.com> <12173705.post@talk.nabble.com> <1187257819.26840.1205679653@webmail.messagingengine.com> <12184067.post@talk.nabble.com> <1187286749.14646.1205757601@webmail.messagingengine.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Does it help you to find out if I create an empty index before start the real
operation?

            IndexWriter writer = new IndexWriter(directory, new
SimpleAnalyzer(), true);
            writer.close();
            /* add new index afterward */

This is to clean up the index since springmodules doesn't support the way to
clear up the existing index.



Michael McCandless-2 wrote:
> 
> 
> OK.  Is it possible to capture this as small test case?
> 
> Maybe also call IndexWriter.setInfoStream(System.out) and capture details
> on
> what segments are being merged?
> 
> Can you shed some light on how the application is using Lucene?  Are you
> doing
> deletes as well as adds?  Opening readers against this RAMDirectory? 
> Closing/
> opening writers at different times?  Any changes to the default parameters
> (mergeFactor, maxBufferedDocs, etc.)?
> 
> Mike
> 
> "testn" <test1@doramail.com> wrote:
>> 
>> Here you go....
>> 
>>  -> Error during the indexing : docs out of order (0 <= 0 )
>> org.apache.lucene.index.CorruptIndexException: docs out of order (0 <= 0
>> )
>>         at
>> org.apache.lucene.index.SegmentMerger.appendPostings(SegmentMerger.java:368)
>>         at
>> org.apache.lucene.index.SegmentMerger.mergeTermInfo(SegmentMerger.java:325)
>>         at
>> org.apache.lucene.index.SegmentMerger.mergeTermInfos(SegmentMerger.java:297)
>>         at
>> org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:261)
>>         at
>> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:98)
>>         at
>> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:1883)
>>         at
>> org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:1741)
>>         at
>> org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:1733)
>>         at
>> org.apache.lucene.index.IndexWriter.maybeFlushRamSegments(IndexWriter.java:1727)
>>         at
>> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1004)
>>         at
>> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:983)
>>         at
>> org.springmodules.lucene.index.factory.SimpleLuceneIndexWriter.addDocument(SimpleLuceneIndexWriter.java:44)
>> )
>>         at
>> org.springmodules.lucene.index.object.database.DefaultDatabaseIndexer.doHandleRequest(DefaultDatabaseIndexer.java:306)
>>         at
>> org.springmodules.lucene.index.object.database.DefaultDatabaseIndexer.index(DefaultDatabaseIndexer.java:354)
>> 
>> 
>> Michael McCandless-2 wrote:
>> > 
>> > 
>> > Well then that is particularly spooky!!
>> > 
>> > And, hopefully, possible/easy to reproduce.  Thanks.
>> > 
>> > Mike
>> > 
>> > "testn" <test1@doramail.com> wrote:
>> >> 
>> >> I use RAMDirectory and the error often shows the low number. Last time
>> it
>> >> happened with message "7<=7". Nest time it happens, I will try to
>> capture
>> >> the stacktrace.
>> >> 
>> >> 
>> >> 
>> >> Michael McCandless-2 wrote:
>> >> > 
>> >> > 
>> >> > "testn" <test1@doramail.com> wrote:
>> >> >> 
>> >> >> Using Lucene 2.2.0, I still sporadically got doc out of order
>> error. I
>> >> >> indexed all of my stuff in one thread. Do you have any idea why it
>> >> >> happens?
>> >> > 
>> >> > Hmmmmm, that is not good.  I thought we had finally fixed this with
>> >> > LUCENE-140.  Though un-corrected disk errors could in theory lead to
>> >> > this too.
>> >> > 
>> >> > Are you able to easily reproduce it?  Can you post the full
>> exception?
>> >> > 
>> >> > Mike
>> >> > 
>> >> >
>> ---------------------------------------------------------------------
>> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> > 
>> >> > 
>> >> > 
>> >> 
>> >> -- 
>> >> View this message in context:
>> >> http://www.nabble.com/out-of-order-tf4276385.html#a12173705
>> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> >> 
>> >> 
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> 
>> > 
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> > 
>> > 
>> > 
>> 
>> -- 
>> View this message in context:
>> http://www.nabble.com/out-of-order-tf4276385.html#a12184067
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/out-of-order-tf4276385.html#a12186579
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 18:20:51 2007
Return-Path: <java-user-return-29865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56687 invoked from network); 16 Aug 2007 18:20:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 18:20:50 -0000
Received: (qmail 92731 invoked by uid 500); 16 Aug 2007 18:20:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92694 invoked by uid 500); 16 Aug 2007 18:20:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92683 invoked by uid 99); 16 Aug 2007 18:20:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 11:20:41 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 18:20:37 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ILjxA-0006DD-IJ
	for java-user@lucene.apache.org; Thu, 16 Aug 2007 11:20:16 -0700
Message-ID: <12186723.post@talk.nabble.com>
Date: Thu, 16 Aug 2007 11:20:16 -0700 (PDT)
From: Lokeya <lokeya@gmail.com>
To: java-user@lucene.apache.org
Subject: Document Similarities lucene(particularly using doc id's)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: lokeya@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,

I have the following set up: a) Indexed set of docs. b) Ran 1st query and
got tops docs  c) Fetched the id's from that and stored in a data structure.
d) Ran 2nd query , got top docs , fetched id's and stored in a data
structure.

Now i have 2 sets of doc ids (set 1) and (set 1).

I want to find out the document content similarity between these 2 sets(just
using doc ids information which i have).

Qn 1: Is it possible using any lucene api's. In that case can you point me
to the appropriate API's. I did a search at
:http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/index.html
But couldn't find anything.

Qn 2: If this can't be done then whats the best way to do this using already
available Lucene Api's.

Thanks in Advance.
-- 
View this message in context: http://www.nabble.com/Document-Similarities-lucene%28particularly-using-doc-id%27s%29-tf4281286.html#a12186723
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 18:35:33 2007
Return-Path: <java-user-return-29866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60673 invoked from network); 16 Aug 2007 18:35:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 18:35:31 -0000
Received: (qmail 34636 invoked by uid 500); 16 Aug 2007 18:35:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34606 invoked by uid 500); 16 Aug 2007 18:35:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34595 invoked by uid 99); 16 Aug 2007 18:35:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 11:35:22 -0700
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gresh@us.ibm.com designates 32.97.182.145 as permitted sender)
Received: from [32.97.182.145] (HELO e5.ny.us.ibm.com) (32.97.182.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 18:35:16 +0000
Received: from d01relay04.pok.ibm.com (d01relay04.pok.ibm.com [9.56.227.236])
	by e5.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id l7GIYtAH013720
	for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 14:34:55 -0400
Received: from d01av01.pok.ibm.com (d01av01.pok.ibm.com [9.56.224.215])
	by d01relay04.pok.ibm.com (8.13.8/8.13.8/NCO v8.5) with ESMTP id l7GIYtXg523672
	for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 14:34:55 -0400
Received: from d01av01.pok.ibm.com (loopback [127.0.0.1])
	by d01av01.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id l7GIYsu4023866
	for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 14:34:55 -0400
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av01.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id l7GIYsgX023863
	for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 14:34:54 -0400
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: tell snowballfilter not to stem certain words?
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OFA1E56E87.460FD0BA-ON85257339.0065AC20-85257339.00661278@us.ibm.com>
Date: Thu, 16 Aug 2007 14:34:53 -0400
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Release 8.0|August 02, 2007) at 08/16/2007
 14:34:54,
	Serialize complete at 08/16/2007 14:34:54
Content-Type: multipart/alternative; boundary="=_alternative 006611CF85257339_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 006611CF85257339_=
Content-Type: text/plain; charset="US-ASCII"

Apologies if this is in the FAQ or elsewhere available but I could not 
find this.

Can I provide a list of words that should *not* be stemmed by the
SnowballFilter? My analyzer looks like this:

analyzer = new StandardAnalyzer(stopwords) {
        public TokenStream tokenStream(String fieldName, java.io.Reader 
reader) {
          return new SnowballFilter(super.tokenStream(fieldName,reader),
                "English");
        }
};

It is removing the trailing "S" from some words which I don't want to have 
this happen for--

Donna


--=_alternative 006611CF85257339_=--

From java-user-return-29867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 18:42:34 2007
Return-Path: <java-user-return-29867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62330 invoked from network); 16 Aug 2007 18:42:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 18:42:32 -0000
Received: (qmail 55275 invoked by uid 500); 16 Aug 2007 18:42:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55241 invoked by uid 500); 16 Aug 2007 18:42:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55230 invoked by uid 99); 16 Aug 2007 18:42:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 11:42:23 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.185 as permitted sender)
Received: from [209.85.128.185] (HELO fk-out-0910.google.com) (209.85.128.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 18:42:20 +0000
Received: by fk-out-0910.google.com with SMTP id z23so270667fkz
        for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 11:41:58 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uoeiiKjtr3ui/BCNZp1bj2wyIUe4OoL4jhK0I2bwPlbBDh6t4b+mvQOSn1r/CmL7ciJPOMpNsUPbug8ufdw/CiF3WgFbibmW+7nKGTqxJEoSc+Xk4tl0LBWuOndmKT0fVsqYdaq93sG4nWxRcjKmwTSA+ROH+eWlgAhIBd5DTOw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KtnUpMAr/sWIRnR0y513irRUR1hQG8tp73AmdngDRCmFFIREssFlfxVCEGg0p+dvrPu8Dr8R4+YWxg1RFO9UTBo5ppdk45z6sOJXk7X1igrRHW9em5aKgqJtczOI4+rTLjv3pYDeu1WcB/95Rb+9WCMY/uEqz5+utU7YNd+z17A=
Received: by 10.82.175.17 with SMTP id x17mr3041451bue.1187289712734;
        Thu, 16 Aug 2007 11:41:52 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Thu, 16 Aug 2007 11:41:52 -0700 (PDT)
Message-ID: <359a92830708161141h1ddc6854y8a9a94b280546d7@mail.gmail.com>
Date: Thu, 16 Aug 2007 14:41:52 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: tell snowballfilter not to stem certain words?
In-Reply-To: <OFA1E56E87.460FD0BA-ON85257339.0065AC20-85257339.00661278@us.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_54980_10167978.1187289712285"
References: <OFA1E56E87.460FD0BA-ON85257339.0065AC20-85257339.00661278@us.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_54980_10167978.1187289712285
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Not that I know of. I suspect you'll have to write a filter that returns
the stemmed or unstemmed based on membership in your list
of words not to stem.

Best
Erick

On 8/16/07, Donna L Gresh <gresh@us.ibm.com> wrote:
>
> Apologies if this is in the FAQ or elsewhere available but I could not
> find this.
>
> Can I provide a list of words that should *not* be stemmed by the
> SnowballFilter? My analyzer looks like this:
>
> analyzer = new StandardAnalyzer(stopwords) {
>         public TokenStream tokenStream(String fieldName, java.io.Reader
> reader) {
>           return new SnowballFilter(super.tokenStream(fieldName,reader),
>                 "English");
>         }
> };
>
> It is removing the trailing "S" from some words which I don't want to have
> this happen for--
>
> Donna
>
>

------=_Part_54980_10167978.1187289712285--

From java-user-return-29868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 18:43:21 2007
Return-Path: <java-user-return-29868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62518 invoked from network); 16 Aug 2007 18:43:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 18:43:20 -0000
Received: (qmail 60417 invoked by uid 500); 16 Aug 2007 18:43:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60382 invoked by uid 500); 16 Aug 2007 18:43:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60371 invoked by uid 99); 16 Aug 2007 18:43:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 11:43:11 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 18:43:26 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 9162512AD1
	for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 14:42:44 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Thu, 16 Aug 2007 14:42:44 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 7787A24579; Thu, 16 Aug 2007 14:42:44 -0400 (EDT)
Message-Id: <1187289764.23129.1205766907@webmail.messagingengine.com>
X-Sasl-Enc: XcJn/pXgXQgGcSv7uK4iEey9nTD4Hn2gnsXdbEhBLsTC 1187289764
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <12172277.post@talk.nabble.com>
   <1187219579.30380.1205611129@webmail.messagingengine.com>
   <12173705.post@talk.nabble.com>
   <1187257819.26840.1205679653@webmail.messagingengine.com>
   <12184067.post@talk.nabble.com>
   <1187286749.14646.1205757601@webmail.messagingengine.com>
   <12186579.post@talk.nabble.com>
Subject: Re: out of order
In-Reply-To: <12186579.post@talk.nabble.com>
Date: Thu, 16 Aug 2007 14:42:44 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


Hmmm.  It is interesting, because that specific call (using
IndexWriter to "create" an index) was one of the causes in
LUCENE-140.  But I'm pretty sure we fixed that cause.  As part of
LUCENE-140 we also added further checks to catch re-using of an old
.del file at a lower level, and you're not hitting those.

After you close that IndexWriter, can you list the files in your
directory (that's a RAMDirectory right?)?  Something like this:

    import java.util.Arrays;

    String[] l = directory.list();
    Arrays.sort(l);
    for(int i=0;i<l.length;i++)
      System.out.println("file " + i + " = " + l[i] + " " + directory.fileLength(l[i]) + " bytes");
    
Mike

"testn" <test1@doramail.com> wrote:
> 
> Does it help you to find out if I create an empty index before start the
> real
> operation?
> 
>             IndexWriter writer = new IndexWriter(directory, new
> SimpleAnalyzer(), true);
>             writer.close();
>             /* add new index afterward */
> 
> This is to clean up the index since springmodules doesn't support the way
> to
> clear up the existing index.
> 
> 
> 
> Michael McCandless-2 wrote:
> > 
> > 
> > OK.  Is it possible to capture this as small test case?
> > 
> > Maybe also call IndexWriter.setInfoStream(System.out) and capture details
> > on
> > what segments are being merged?
> > 
> > Can you shed some light on how the application is using Lucene?  Are you
> > doing
> > deletes as well as adds?  Opening readers against this RAMDirectory? 
> > Closing/
> > opening writers at different times?  Any changes to the default parameters
> > (mergeFactor, maxBufferedDocs, etc.)?
> > 
> > Mike
> > 
> > "testn" <test1@doramail.com> wrote:
> >> 
> >> Here you go....
> >> 
> >>  -> Error during the indexing : docs out of order (0 <= 0 )
> >> org.apache.lucene.index.CorruptIndexException: docs out of order (0 <= 0
> >> )
> >>         at
> >> org.apache.lucene.index.SegmentMerger.appendPostings(SegmentMerger.java:368)
> >>         at
> >> org.apache.lucene.index.SegmentMerger.mergeTermInfo(SegmentMerger.java:325)
> >>         at
> >> org.apache.lucene.index.SegmentMerger.mergeTermInfos(SegmentMerger.java:297)
> >>         at
> >> org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:261)
> >>         at
> >> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:98)
> >>         at
> >> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:1883)
> >>         at
> >> org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:1741)
> >>         at
> >> org.apache.lucene.index.IndexWriter.flushRamSegments(IndexWriter.java:1733)
> >>         at
> >> org.apache.lucene.index.IndexWriter.maybeFlushRamSegments(IndexWriter.java:1727)
> >>         at
> >> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1004)
> >>         at
> >> org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:983)
> >>         at
> >> org.springmodules.lucene.index.factory.SimpleLuceneIndexWriter.addDocument(SimpleLuceneIndexWriter.java:44)
> >> )
> >>         at
> >> org.springmodules.lucene.index.object.database.DefaultDatabaseIndexer.doHandleRequest(DefaultDatabaseIndexer.java:306)
> >>         at
> >> org.springmodules.lucene.index.object.database.DefaultDatabaseIndexer.index(DefaultDatabaseIndexer.java:354)
> >> 
> >> 
> >> Michael McCandless-2 wrote:
> >> > 
> >> > 
> >> > Well then that is particularly spooky!!
> >> > 
> >> > And, hopefully, possible/easy to reproduce.  Thanks.
> >> > 
> >> > Mike
> >> > 
> >> > "testn" <test1@doramail.com> wrote:
> >> >> 
> >> >> I use RAMDirectory and the error often shows the low number. Last time
> >> it
> >> >> happened with message "7<=7". Nest time it happens, I will try to
> >> capture
> >> >> the stacktrace.
> >> >> 
> >> >> 
> >> >> 
> >> >> Michael McCandless-2 wrote:
> >> >> > 
> >> >> > 
> >> >> > "testn" <test1@doramail.com> wrote:
> >> >> >> 
> >> >> >> Using Lucene 2.2.0, I still sporadically got doc out of order
> >> error. I
> >> >> >> indexed all of my stuff in one thread. Do you have any idea why it
> >> >> >> happens?
> >> >> > 
> >> >> > Hmmmmm, that is not good.  I thought we had finally fixed this with
> >> >> > LUCENE-140.  Though un-corrected disk errors could in theory lead to
> >> >> > this too.
> >> >> > 
> >> >> > Are you able to easily reproduce it?  Can you post the full
> >> exception?
> >> >> > 
> >> >> > Mike
> >> >> > 
> >> >> >
> >> ---------------------------------------------------------------------
> >> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >> > 
> >> >> > 
> >> >> > 
> >> >> 
> >> >> -- 
> >> >> View this message in context:
> >> >> http://www.nabble.com/out-of-order-tf4276385.html#a12173705
> >> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >> >> 
> >> >> 
> >> >> ---------------------------------------------------------------------
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >> 
> >> > 
> >> > ---------------------------------------------------------------------
> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> > 
> >> > 
> >> > 
> >> 
> >> -- 
> >> View this message in context:
> >> http://www.nabble.com/out-of-order-tf4276385.html#a12184067
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >> 
> >> 
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> > 
> 
> -- 
> View this message in context:
> http://www.nabble.com/out-of-order-tf4276385.html#a12186579
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 18:52:37 2007
Return-Path: <java-user-return-29869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64436 invoked from network); 16 Aug 2007 18:52:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 18:52:36 -0000
Received: (qmail 76580 invoked by uid 500); 16 Aug 2007 18:52:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76543 invoked by uid 500); 16 Aug 2007 18:52:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76532 invoked by uid 99); 16 Aug 2007 18:52:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 11:52:27 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 18:52:24 +0000
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id BCD2895A19; Thu, 16 Aug 2007 11:52:02 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id B1DB023702
	for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 11:52:02 -0700 (PDT)
Date: Thu, 16 Aug 2007 11:52:02 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: out of order
In-Reply-To: <1187289764.23129.1205766907@webmail.messagingengine.com>
Message-ID: <Pine.LNX.4.58.0708161150030.30083@hal.rescomp.berkeley.edu>
References: <12172277.post@talk.nabble.com>   <1187219579.30380.1205611129@webmail.messagingengine.com>
   <12173705.post@talk.nabble.com>   <1187257819.26840.1205679653@webmail.messagingengine.com>
   <12184067.post@talk.nabble.com>   <1187286749.14646.1205757601@webmail.messagingengine.com>
   <12186579.post@talk.nabble.com> <1187289764.23129.1205766907@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: After you close that IndexWriter, can you list the files in your
: directory (that's a RAMDirectory right?)?  Something like this:

The OP said this was a fairly small RAMDirectory index right?  would it be
worth while to just write the whole thing to disk and post it onlin so
people could see every byte of every file?

(i'm all thumbs when it comes to index internals and the file formats, but
i'm just tossig it out there as an idea)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 19:06:40 2007
Return-Path: <java-user-return-29870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67336 invoked from network); 16 Aug 2007 19:06:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 19:06:38 -0000
Received: (qmail 94340 invoked by uid 500); 16 Aug 2007 19:06:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94247 invoked by uid 500); 16 Aug 2007 19:06:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94225 invoked by uid 99); 16 Aug 2007 19:06:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 12:06:23 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 80.76.149.213 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.213] (HELO ch-smtp02.sth.basefarm.net) (80.76.149.213)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 19:06:18 +0000
Received: from c83-249-118-113.bredband.comhem.se ([83.249.118.113]:49605 helo=[192.168.2.101])
	by ch-smtp02.sth.basefarm.net with esmtp (Exim 4.66)
	(envelope-from <karl.wettin@gmail.com>)
	id 1ILkfL-0001SV-9b
	for java-user@lucene.apache.org; Thu, 16 Aug 2007 21:05:56 +0200
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <OFA1E56E87.460FD0BA-ON85257339.0065AC20-85257339.00661278@us.ibm.com>
References: <OFA1E56E87.460FD0BA-ON85257339.0065AC20-85257339.00661278@us.ibm.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F46AE9CD-4000-48D9-B875-4B7A29A6E018@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: tell snowballfilter not to stem certain words?
Date: Thu, 16 Aug 2007 21:00:50 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Originating-IP: 83.249.118.113
X-Scan-Result: No virus found in message 1ILkfL-0001SV-9b.
X-Scan-Signature: ch-smtp02.sth.basefarm.net 1ILkfL-0001SV-9b cf65c51554429d2b04c37d93f5010b10
X-Virus-Checked: Checked by ClamAV on apache.org


16 aug 2007 kl. 20.34 skrev Donna L Gresh:

> Apologies if this is in the FAQ or elsewhere available but I could not
> find this.
>
> Can I provide a list of words that should *not* be stemmed by the
> SnowballFilter?

If it is a static list, simply add it as an exception in the snowball  
code and recompile to Java.


-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 19:34:55 2007
Return-Path: <java-user-return-29871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85739 invoked from network); 16 Aug 2007 19:34:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 19:34:54 -0000
Received: (qmail 37758 invoked by uid 500); 16 Aug 2007 19:34:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37713 invoked by uid 500); 16 Aug 2007 19:34:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37699 invoked by uid 99); 16 Aug 2007 19:34:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 12:34:45 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 19:35:01 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ILl6q-0008Kx-2C
	for java-user@lucene.apache.org; Thu, 16 Aug 2007 12:34:20 -0700
Message-ID: <12187972.post@talk.nabble.com>
Date: Thu, 16 Aug 2007 12:34:20 -0700 (PDT)
From: testn <test1@doramail.com>
To: java-user@lucene.apache.org
Subject: Re: out of order
In-Reply-To: <Pine.LNX.4.58.0708161150030.30083@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: test1@doramail.com
References: <12172277.post@talk.nabble.com> <1187219579.30380.1205611129@webmail.messagingengine.com> <12173705.post@talk.nabble.com> <1187257819.26840.1205679653@webmail.messagingengine.com> <12184067.post@talk.nabble.com> <1187286749.14646.1205757601@webmail.messagingengine.com> <12186579.post@talk.nabble.com> <1187289764.23129.1205766907@webmail.messagingengine.com> <Pine.LNX.4.58.0708161150030.30083@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org


There are two files:
1. segments_2 [-1, -1, -3, 0, 0, 1, 20, 112, 39, 17, -80, 0, 0, 0, 0, 0, 0,
0, 0] 
2. segments.gen [-1, -1, -1, -2, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0,
0, 2]

but this one when the index is done done properly.


hossman wrote:
> 
> : After you close that IndexWriter, can you list the files in your
> : directory (that's a RAMDirectory right?)?  Something like this:
> 
> The OP said this was a fairly small RAMDirectory index right?  would it be
> worth while to just write the whole thing to disk and post it onlin so
> people could see every byte of every file?
> 
> (i'm all thumbs when it comes to index internals and the file formats, but
> i'm just tossig it out there as an idea)
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/out-of-order-tf4276385.html#a12187972
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 19:50:03 2007
Return-Path: <java-user-return-29872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94024 invoked from network); 16 Aug 2007 19:50:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 19:50:02 -0000
Received: (qmail 71302 invoked by uid 500); 16 Aug 2007 19:49:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71254 invoked by uid 500); 16 Aug 2007 19:49:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71243 invoked by uid 99); 16 Aug 2007 19:49:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 12:49:54 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 19:50:08 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id B86D110456
	for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 15:49:25 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Thu, 16 Aug 2007 15:49:25 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 1FA7A2474C; Thu, 16 Aug 2007 15:49:25 -0400 (EDT)
Message-Id: <1187293765.1806.1205777005@webmail.messagingengine.com>
X-Sasl-Enc: 95/K5sJx296MHWpccCGFYZBkaP7rPxA1JWjWg4AvNMdj 1187293765
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <12172277.post@talk.nabble.com>
   <1187219579.30380.1205611129@webmail.messagingengine.com>
   <12173705.post@talk.nabble.com>
   <1187257819.26840.1205679653@webmail.messagingengine.com>
   <12184067.post@talk.nabble.com>
   <1187286749.14646.1205757601@webmail.messagingengine.com>
   <12186579.post@talk.nabble.com>
   <1187289764.23129.1205766907@webmail.messagingengine.com>
   <Pine.LNX.4.58.0708161150030.30083@hal.rescomp.berkeley.edu>
   <12187972.post@talk.nabble.com>
Subject: Re: out of order
In-Reply-To: <12187972.post@talk.nabble.com>
Date: Thu, 16 Aug 2007 15:49:25 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


OK, that's clean (no leftover files).  So this cause does not seem to
be the same cause as LUCENE-140.

Can you capture the exact docs you are adding (all indexed fields) and
try to replay them to see if the same exception is reproducible?

Have you seen this happen on a different machine?  (Just in case, I
admit rather remote and hopeful on my part ;), that you have bad RAM
in your machine).

Mike

"testn" <test1@doramail.com> wrote:
> 
> There are two files:
> 1. segments_2 [-1, -1, -3, 0, 0, 1, 20, 112, 39, 17, -80, 0, 0, 0, 0, 0,
> 0,
> 0, 0] 
> 2. segments.gen [-1, -1, -1, -2, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0,
> 0,
> 0, 2]
> 
> but this one when the index is done done properly.
> 
> 
> hossman wrote:
> > 
> > : After you close that IndexWriter, can you list the files in your
> > : directory (that's a RAMDirectory right?)?  Something like this:
> > 
> > The OP said this was a fairly small RAMDirectory index right?  would it be
> > worth while to just write the whole thing to disk and post it onlin so
> > people could see every byte of every file?
> > 
> > (i'm all thumbs when it comes to index internals and the file formats, but
> > i'm just tossig it out there as an idea)
> > 
> > 
> > 
> > -Hoss
> > 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> > 
> 
> -- 
> View this message in context:
> http://www.nabble.com/out-of-order-tf4276385.html#a12187972
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 20:25:44 2007
Return-Path: <java-user-return-29873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8837 invoked from network); 16 Aug 2007 20:25:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 20:25:44 -0000
Received: (qmail 44916 invoked by uid 500); 16 Aug 2007 20:25:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44871 invoked by uid 500); 16 Aug 2007 20:25:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44859 invoked by uid 99); 16 Aug 2007 20:25:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 13:25:35 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 20:25:30 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ILlu2-0001ap-94
	for java-user@lucene.apache.org; Thu, 16 Aug 2007 13:25:10 -0700
Message-ID: <12188851.post@talk.nabble.com>
Date: Thu, 16 Aug 2007 13:25:10 -0700 (PDT)
From: dontspamterry <dontspamterry@yahoo.com>
To: java-user@lucene.apache.org
Subject: Location of SpanRegexQuery
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: dontspamterry@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

While researching support for wildcards in a PhraseQuery, I see various
references to SpanRegexQuery which is not part of the 2.2 distribution. I
checked the Lucene site to see if it's some add-on jar, but couldn't find
anything so I'm wondering where can I obtain the .class/jar file(s) for this
class?

Thanks,
-Terry
-- 
View this message in context: http://www.nabble.com/Location-of-SpanRegexQuery-tf4281915.html#a12188851
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 20:32:22 2007
Return-Path: <java-user-return-29874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10666 invoked from network); 16 Aug 2007 20:32:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 20:32:19 -0000
Received: (qmail 54423 invoked by uid 500); 16 Aug 2007 20:31:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54360 invoked by uid 500); 16 Aug 2007 20:31:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54328 invoked by uid 99); 16 Aug 2007 20:31:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 13:31:56 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.185 as permitted sender)
Received: from [209.85.134.185] (HELO mu-out-0910.google.com) (209.85.134.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 20:31:52 +0000
Received: by mu-out-0910.google.com with SMTP id g7so350294muf
        for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 13:31:30 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=m7OXwDLmNNhjqAVsbbrEdMf7wJeRSIgQis9W34vGbMbJpSa46dMYE7bCOoeDvpyDmFn5ZHZfKU5vzEWFs9nmkXz6Hcbes/3vK/hZF90N23faXi9JRS0WZr9GubvYFvwfX7Zey9rfbgjdqLvFNFYEyZKRNTA4uNzCsZHW9YK5DxI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jq+V6wuCvyFxoyCENDtg4J+MqGyiK74dF7Rm7L5vVKWBClIS1+7/OGKT7FB4GSfmnsIfOEZMwPap0cNr5VFl6+jIECSWHqjFGZzmW69dKNxO4C/q/RBrqJwijKrhJIKszwUt3vnILpFUgq9ypX8wvTsrOa9eO64UaPYupCVhheE=
Received: by 10.82.112.3 with SMTP id k3mr3239671buc.1187296290577;
        Thu, 16 Aug 2007 13:31:30 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Thu, 16 Aug 2007 13:31:30 -0700 (PDT)
Message-ID: <359a92830708161331l1e310d9ct7a433be171fc0b55@mail.gmail.com>
Date: Thu, 16 Aug 2007 16:31:30 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Location of SpanRegexQuery
In-Reply-To: <12188851.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_55688_13459800.1187296290556"
References: <12188851.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_55688_13459800.1187296290556
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It should already be on your disk with the distribution. Try
<your base lucene directory>/contrib/regex.

Lots of things are rooted in contrib, and I've never had to
find any other jars from the Lucene site, they've all
been in contrib....

Hope this helps
Erick

On 8/16/07, dontspamterry <dontspamterry@yahoo.com> wrote:
>
>
> Hi,
>
> While researching support for wildcards in a PhraseQuery, I see various
> references to SpanRegexQuery which is not part of the 2.2 distribution. I
> checked the Lucene site to see if it's some add-on jar, but couldn't find
> anything so I'm wondering where can I obtain the .class/jar file(s) for
> this
> class?
>
> Thanks,
> -Terry
> --
> View this message in context:
> http://www.nabble.com/Location-of-SpanRegexQuery-tf4281915.html#a12188851
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_55688_13459800.1187296290556--

From java-user-return-29875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 16 21:06:16 2007
Return-Path: <java-user-return-29875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22040 invoked from network); 16 Aug 2007 21:06:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Aug 2007 21:06:14 -0000
Received: (qmail 18995 invoked by uid 500); 16 Aug 2007 21:06:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18924 invoked by uid 500); 16 Aug 2007 21:06:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18913 invoked by uid 99); 16 Aug 2007 21:06:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 14:06:05 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 21:06:01 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1ILmXF-0002uN-0h
	for java-user@lucene.apache.org; Thu, 16 Aug 2007 14:05:41 -0700
Message-ID: <12189507.post@talk.nabble.com>
Date: Thu, 16 Aug 2007 14:05:40 -0700 (PDT)
From: dontspamterry <dontspamterry@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Location of SpanRegexQuery
In-Reply-To: <359a92830708161331l1e310d9ct7a433be171fc0b55@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: dontspamterry@yahoo.com
References: <12188851.post@talk.nabble.com> <359a92830708161331l1e310d9ct7a433be171fc0b55@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


And so it is! My bad - guess I should have paid more attention to the README
file which clearly explains the contents  :P

-Terry


Erick Erickson wrote:
> 
> It should already be on your disk with the distribution. Try
> <your base lucene directory>/contrib/regex.
> 
> Lots of things are rooted in contrib, and I've never had to
> find any other jars from the Lucene site, they've all
> been in contrib....
> 
> Hope this helps
> Erick
> 
> On 8/16/07, dontspamterry <dontspamterry@yahoo.com> wrote:
>>
>>
>> Hi,
>>
>> While researching support for wildcards in a PhraseQuery, I see various
>> references to SpanRegexQuery which is not part of the 2.2 distribution. I
>> checked the Lucene site to see if it's some add-on jar, but couldn't find
>> anything so I'm wondering where can I obtain the .class/jar file(s) for
>> this
>> class?
>>
>> Thanks,
>> -Terry
>> --
>> View this message in context:
>> http://www.nabble.com/Location-of-SpanRegexQuery-tf4281915.html#a12188851
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Location-of-SpanRegexQuery-tf4281915.html#a12189507
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 17 00:54:30 2007
Return-Path: <java-user-return-29876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18503 invoked from network); 17 Aug 2007 00:54:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Aug 2007 00:54:29 -0000
Received: (qmail 88335 invoked by uid 500); 17 Aug 2007 00:54:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88305 invoked by uid 500); 17 Aug 2007 00:54:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88294 invoked by uid 99); 17 Aug 2007 00:54:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 17:54:21 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 00:54:33 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id 2FE26131A48
	for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 17:53:45 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <46C41DD7.3020507@web.de>
References: <46C41DD7.3020507@web.de>
X-Gpgmail-State: !signed
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <F0A1B877-B56F-4BAF-BE41-1D9092AC7BE4@apache.org>
Content-Transfer-Encoding: quoted-printable
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: getting term offset information for fields with multiple value entiries
Date: Thu, 16 Aug 2007 20:53:29 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Christian,

Is there anyway you can post a complete, self-contained example =20
preferably as a JUnit test?  I think it would be useful to know more =20
about how you are indexing (i.e. what Analyzer, etc.)
The offsets should be taken from whatever is set in on the Token =20
during Analysis.  I, too, am trying to remember where in the code =20
this is taking place

Also, what version of Lucene are you using?

-Grant

On Aug 16, 2007, at 5:50 AM, duiduder@web.de wrote:

> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Hello,
>
> I have an index with an 'actor' field, for each actor there exists =20
> an single field value entry, e.g.
>
> stored/=20
> compressed,indexed,tokenized,termVector,termVectorOffsets,termVectorPo=20=

> sition <movie_actors>
>
> movie_actors:Mayrata O'Wisiedo (as Mairata O'Wisiedo)
> movie_actors:Miguel Bos=E9
> movie_actors:Anna Lizaran (as Ana Lizaran)
> movie_actors:Raquel Sanch=EDs
> movie_actors:Angelina Llongueras
>
> I try to get the term offset, e.g. for 'angelina' with
>
> termPositionVector =3D (TermPositionVector) reader.getTermFreqVector=20=

> (docNumber, "movie_actors");
> int iTermIndex =3D termPositionVector.indexOf("angelina");
> TermVectorOffsetInfo[] termOffsets =3D termPositionVector.getOffsets=20=

> (iTermIndex);
>
>
> I get one TermVectorOffsetInfo for the field - with offset numbers =20
> that are bigger than one single
> Field entry.
> I guessed that Lucene gives the offset number for the situation =20
> that all values were concatenated,
> which is for the single (virtual) string:
>
> movie_actors:Mayrata O'Wisiedo (as Mairata O'Wisiedo)Miguel =20
> Bos=E9Anna Lizaran (as Ana Lizaran)Raquel Sanch=EDsAngelina Llongueras
>
> This fits in nearly no situation, so my second guess was that =20
> lucene adds some virtual delimiters between the single
> field entries for offset calculation. I added a delimiter, so the =20
> result would be:
>
> movie_actors:Mayrata O'Wisiedo (as Mairata O'Wisiedo) Miguel Bos=E9 =20=

> Anna Lizaran (as Ana Lizaran) Raquel Sanch=EDs Angelina Llongueras
> (note the ' ' between each actor name)
>
> ..this also fits not for each situation - there are too much =20
> delimiters there now, so, further, I guessed that Lucene don't add
> a delimiter in each situation. So I added only one when the last =20
> character of an entry was no alphanumerical one, with:
> StringBuilder strbAttContent =3D new StringBuilder();
> for (String strAttValue : m_luceneDocument.getValues(strFieldName))
> {
>    strbAttContent.append(strAttValue);
>    if(strbAttContent.substring(strbAttContent.length() - 1).matches=20
> ("\\w"))
>       strbAttContent.append(' ');
> }
>
> where I get the result (virtual) entry:
> movie_actors:Mayrata O'Wisiedo (as Mairata O'Wisiedo)Miguel =20
> Bos=E9Anna Lizaran (as Ana Lizaran)Raquel Sanch=EDs Angelina =
Llongueras
>
> this fits in ~96% of all my queries....but still its not 100% the =20
> way lucene calculates the offset value for fields with multiple
> value entries.
>
>
> ..maybe the problem is that there are special characters inside my =20
> database (e.g. the '=E9' at 'Bos=E9'), where my '\w' don't matches.
> I have looked to this specific situation, but considering this one =20
> character don't solves the problem.
>
>
> How do Lucene calculates these offsets? I also searched inside the =20
> source code, but can't find the correct place.
>
>
> Thanks in advance!
>
> Christian Reuschling
>
>
>
>
>
> - --
> ______________________________________________________________________=20=

> ________
> Christian Reuschling, Dipl.-Ing.(BA)
> Software Engineer
>
> Knowledge Management Department
> German Research Center for Artificial Intelligence DFKI GmbH
> Trippstadter Stra=DFe 122, D-67663 Kaiserslautern, Germany
>
> Phone: +49.631.20575-125
> mailto:reuschling@dfki.de  http://www.dfki.uni-kl.de/~reuschling/
>
> - ------------Legal Company Information Required by German =20
> Law------------------
> Gesch=E4ftsf=FChrung: Prof. Dr. Dr. h.c. mult. Wolfgang Wahlster =20
> (Vorsitzender)
>                   Dr. Walter Olthoff
> Vorsitzender des Aufsichtsrats: Prof. Dr. h.c. Hans A. Aukes
> Amtsgericht Kaiserslautern, HRB 2313=3D
> ______________________________________________________________________=20=

> ________
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.2 (GNU/Linux)
>
> iD8DBQFGxB3XQoTr50f1tpcRAti+AKCH0YgcHjA+bO9NTbuxaAlKb8dO5gCfSfSK
> oVOiAdWYROqXOMqHv176xBY=3D
> =3Db2jO
> -----END PGP SIGNATURE-----
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 17 05:25:34 2007
Return-Path: <java-user-return-29877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1839 invoked from network); 17 Aug 2007 05:25:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Aug 2007 05:25:32 -0000
Received: (qmail 20039 invoked by uid 500); 17 Aug 2007 05:25:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19996 invoked by uid 500); 17 Aug 2007 05:25:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19985 invoked by uid 99); 17 Aug 2007 05:25:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 22:25:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of montgomerie@shaw.ca designates 24.71.223.10 as permitted sender)
Received: from [24.71.223.10] (HELO pd3mo3so.prod.shaw.ca) (24.71.223.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 05:25:42 +0000
Received: from pd3mr3so.prod.shaw.ca
 (pd3mr3so-qfe3.prod.shaw.ca [10.0.141.179]) by l-daemon
 (Sun ONE Messaging Server 6.0 HotFix 1.01 (built Mar 15 2004))
 with ESMTP id <0JMW00I82KDN9510@l-daemon> for java-user@lucene.apache.org;
 Thu, 16 Aug 2007 23:24:59 -0600 (MDT)
Received: from pn2ml2so.prod.shaw.ca ([10.0.121.146])
 by pd3mr3so.prod.shaw.ca (Sun Java System Messaging Server 6.2-7.05 (built Sep
 5 2006)) with ESMTP id <0JMW00J88KDMD610@pd3mr3so.prod.shaw.ca> for
 java-user@lucene.apache.org; Thu, 16 Aug 2007 23:24:59 -0600 (MDT)
Received: from [192.168.1.105] ([68.148.7.15])
 by l-daemon (Sun ONE Messaging Server 6.0 HotFix 1.01 (built Mar 15 2004))
 with ESMTP id <0JMW00GOHKDLH121@l-daemon> for java-user@lucene.apache.org;
 Thu, 16 Aug 2007 23:24:57 -0600 (MDT)
Date: Thu, 16 Aug 2007 23:24:57 -0600
From: Scott Montgomerie <montgomerie@shaw.ca>
Subject: Re: [Fwd: Exception in MultiLevelSkipListReader$SkipBuffer.readByte]
To: java-user@lucene.apache.org
Message-id: <46C53129.9010307@shaw.ca>
MIME-version: 1.0
Content-type: text/plain; charset=ISO-8859-1
Content-transfer-encoding: 7bit
X-Enigmail-Version: 0.94.3.0
User-Agent: Thunderbird 2.0.0.0 (X11/20070411)
X-Virus-Checked: Checked by ClamAV on apache.org

I just tried it with the latest nightly build, the problem still happens.

I think it must have to do with a corrupted index somehow.   I've also
noticed, as a separate issue, that after this period of time (4-5 days),
certain documents aren't indexed correctly.  For example, I will do a query:

Query for Field 1 with value A returns a list of documents.  In these
documents is a document with Field 2 with value B.
Query for Field 2 with value B, return 0 documents.

Therefore the index on Field 2 is somehow missing certain documents.  Is
this possible?

Yonik Seeley wrote:
> I wonder if this is related to
> https://issues.apache.org/jira/browse/LUCENE-951
>
> If it's easy enough for you to reproduce, could you try the trunk
> version of Lucene and see if it's fixed?
>
> -Yonik
>
> On 8/16/07, Scott Montgomerie <montgomerie@shaw.ca> wrote:
>   
>> I'm getting an ArrayIndexOutOfBoundsException in
>> MultiLevelSkipListReader$SkipBuffer. This happens sporadically, on a
>> fairly small index (18 MB, about 30,000 documents). The index is
>> subject to a lot of adds and deletes, some of them concurrently. It
>> happens after about 4 days of heavy usage. I was able to isolate a copy
>> of the index that causes the exception, and I can reproduce the
>> exception cleanly in a Junit test.
>> I can see that readByte(), where the error is occuring, has no bounds
>> checking, therefore I assume that the data in there must be correct?
>> Hence, the index has obviously become corrupted. Further, optimizing
>> the index fixes the problem.
>>
>> The problem is reproducible in working system. As I said, around 4-5
>> days after optimization, the same error occurs sporadically.
>> Any ideas?
>>
>> Oh and this is Lucene 2.2.0, jdk 1.5.0_12.
>>
>> The code from the junit test that calls this is pretty simple:
>>
>> Query profileQuery = new TermQuery(new
>> Term(IndexFields.bookmark_profile_id, "1"));
>> Hits h = searcher.search(profileQuery, filterPrivate());
>>
>> search is a plain old IndexSearcher, and filterPrivate() returns a
>> QueryFilter based on a 2-term BooleanQuery.
>>
>>
>> Full stack trace:
>>
>> Exception in thread "MultiSearcher thread #2"
>> java.lang.ArrayIndexOutOfBoundsException: 14
>> at
>> org.apache.lucene.index.MultiLevelSkipListReader$SkipBuffer.readByte(MultiLevelSkipListReader.java:258)
>> at org.apache.lucene.store.IndexInput.readVInt(IndexInput.java:57)
>> at
>> org.apache.lucene.index.DefaultSkipListReader.readSkipData(DefaultSkipListReader.java:110)
>> at
>> org.apache.lucene.index.MultiLevelSkipListReader.loadNextSkip(MultiLevelSkipListReader.java:140)
>> at
>> org.apache.lucene.index.MultiLevelSkipListReader.skipTo(MultiLevelSkipListReader.java:110)
>> at
>> org.apache.lucene.index.SegmentTermDocs.skipTo(SegmentTermDocs.java:164)
>> at org.apache.lucene.index.MultiTermDocs.skipTo(MultiReader.java:413)
>> at org.apache.lucene.search.TermScorer.skipTo(TermScorer.java:145)
>> at
>> org.apache.lucene.util.ScorerDocQueue.topSkipToAndAdjustElsePop(ScorerDocQueue.java:120)
>> at
>> org.apache.lucene.search.DisjunctionSumScorer.skipTo(DisjunctionSumScorer.java:229)
>> at
>> org.apache.lucene.search.BooleanScorer2.skipTo(BooleanScorer2.java:381)
>> at
>> org.apache.lucene.search.ConjunctionScorer.doNext(ConjunctionScorer.java:63)
>> at
>> org.apache.lucene.search.ConjunctionScorer.next(ConjunctionScorer.java:58)
>> at
>> org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java:327)
>> at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:146)
>> at org.apache.lucene.search.Searcher.search(Searcher.java:118)
>> at org.apache.lucene.search.Searcher.search(Searcher.java:97)
>> at
>> org.apache.lucene.search.QueryWrapperFilter.bits(QueryWrapperFilter.java:50)
>> at
>> org.apache.lucene.search.CachingWrapperFilter.bits(CachingWrapperFilter.java:58)
>> at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:133)
>> at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:113)
>> at
>> org.apache.lucene.search.MultiSearcherThread.run(ParallelMultiSearcher.java:250)
>>
>> java.lang.NullPointerException
>> at
>> org.apache.lucene.search.MultiSearcherThread.hits(ParallelMultiSearcher.java:280)
>> at
>> org.apache.lucene.search.ParallelMultiSearcher.search(ParallelMultiSearcher.java:83)
>> at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:74)
>> at org.apache.lucene.search.Hits.<init>(Hits.java:53)
>> at org.apache.lucene.search.Searcher.search(Searcher.java:46)
>>
>> Thanks.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 17 06:05:04 2007
Return-Path: <java-user-return-29878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20537 invoked from network); 17 Aug 2007 06:05:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Aug 2007 06:05:02 -0000
Received: (qmail 40960 invoked by uid 500); 17 Aug 2007 06:04:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40925 invoked by uid 500); 17 Aug 2007 06:04:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40910 invoked by uid 99); 17 Aug 2007 06:04:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 23:04:54 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 06:05:14 +0000
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 904D495A19; Thu, 16 Aug 2007 23:04:29 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 824C823702
	for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 23:04:29 -0700 (PDT)
Date: Thu, 16 Aug 2007 23:04:29 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Nested concept fields
In-Reply-To: <12120367.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0708162302080.32251@hal.rescomp.berkeley.edu>
References: <12120367.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: 	sent:(expired num[1 TO 5] "days ago")
:
: I don't see how to do this using either Lucene's QueryParser or the
: QsolParser. Is it possible to do it using the Query API (and the appropriate
: indexing changes)?

take a look at Span queries, particularly SpanNearQuery ... that can do
pretty much everything you describe assuming creative indexing.  the one
thing that's not quite ready made would be the range query -- you'd need
to write a kind of SpanRangeQuery that rewrite itself into a SpanOrQuery
containing all of the numbers in the range.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 17 06:08:36 2007
Return-Path: <java-user-return-29879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22813 invoked from network); 17 Aug 2007 06:08:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Aug 2007 06:08:35 -0000
Received: (qmail 43689 invoked by uid 500); 17 Aug 2007 06:08:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43653 invoked by uid 500); 17 Aug 2007 06:08:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43642 invoked by uid 99); 17 Aug 2007 06:08:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 23:08:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of buschmic@gmail.com designates 66.249.82.229 as permitted sender)
Received: from [66.249.82.229] (HELO wx-out-0506.google.com) (66.249.82.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 06:08:25 +0000
Received: by wx-out-0506.google.com with SMTP id i28so379045wxd
        for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 23:08:05 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=hn6L035Vw1fNBUpYFnlUSEJBSUs+kVs6SA9j+8+XIgILn/mQ1NSyTMcMWfZlaVCC65YNNp1X9OOv/mDfYZVKhHC3Fca6Fd9h6ovEf4ZtNTPg2nR7rhITCY70FjFrP4fJKTn0IAVfd3/Jl+dO8+kQkuYaFFkus1aTaICm7QS6aKc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=kPJQup2ivMp6JbL2Bd1dPUIqF977c3t/BWWp9enhZwDoMpFAJwUCeJC6/brqAvQTIJuIc8xvxaMVX7HpiPN81pHPgCKIJfGBVkEvJXlG278jwALDMFDjYUUSzyPB5Y00LwWPQIMFrxMKCiJRqhUaPBG9Oj5Y5sLst+ZQs0k1xQY=
Received: by 10.90.25.3 with SMTP id 3mr3851842agy.1187330884897;
        Thu, 16 Aug 2007 23:08:04 -0700 (PDT)
Received: from ?192.168.0.100? ( [24.80.67.88])
        by mx.google.com with ESMTPS id m6sm238452wrm.2007.08.16.23.08.03
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 16 Aug 2007 23:08:04 -0700 (PDT)
Message-ID: <46C53B13.4070202@gmail.com>
Date: Thu, 16 Aug 2007 23:07:15 -0700
From: Michael Busch <buschmic@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: [Fwd: Exception in MultiLevelSkipListReader$SkipBuffer.readByte]
References: <46C53129.9010307@shaw.ca>
In-Reply-To: <46C53129.9010307@shaw.ca>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Scott Montgomerie wrote:
> I just tried it with the latest nightly build, the problem still happens.
> 
> I think it must have to do with a corrupted index somehow.   I've also
> noticed, as a separate issue, that after this period of time (4-5 days),
> certain documents aren't indexed correctly.  For example, I will do a query:
> 
> Query for Field 1 with value A returns a list of documents.  In these
> documents is a document with Field 2 with value B.
> Query for Field 2 with value B, return 0 documents.
> 
> Therefore the index on Field 2 is somehow missing certain documents.  Is
> this possible?
> 

Hi Scott,

hmm that doesn't look good. I haven't seen this problem before. Could
you send the index (preferably compressed as .zip) to me (not the
mailing list), please? And your JUnit test that hits this exception, so
that I can debug it?

Thanks for your help!

- Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 17 06:50:53 2007
Return-Path: <java-user-return-29880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36372 invoked from network); 17 Aug 2007 06:50:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Aug 2007 06:50:51 -0000
Received: (qmail 85996 invoked by uid 500); 17 Aug 2007 06:50:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85862 invoked by uid 500); 17 Aug 2007 06:50:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85851 invoked by uid 99); 17 Aug 2007 06:50:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Aug 2007 23:50:43 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 06:51:02 +0000
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id B14AD95A11; Thu, 16 Aug 2007 23:50:19 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 9A96623702
	for <java-user@lucene.apache.org>; Thu, 16 Aug 2007 23:50:19 -0700 (PDT)
Date: Thu, 16 Aug 2007 23:50:18 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Question on custom scoring
In-Reply-To: <12154865.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0708162347290.32251@hal.rescomp.berkeley.edu>
References: <12136012.post@talk.nabble.com> <Pine.LNX.4.58.0708141319080.4844@hal.rescomp.berkeley.edu>
 <12154865.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: document in the scoring formula, and I thought the CustomScoreQuery would be
: useful, but I am realizing that it may not be easy because the "relevance"
: score from Lucene has no absolute meaning. The relevance score could be 5 or
: 500 and there is no way for me gauge what that number means and how much I
: should weigh he "popularity" value relative to it when computing the custom

it's definitely tricky, and not something that can be decided universally
regardless of your data (or query structure) -- like all "fuzzy" logic you
have to try lots of different use cases and find something that works
well.  And yes, you have to re-evaluate your choices over time sa you
index changes.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 17 10:33:40 2007
Return-Path: <java-user-return-29881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5483 invoked from network); 17 Aug 2007 10:33:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Aug 2007 10:33:38 -0000
Received: (qmail 52446 invoked by uid 500); 17 Aug 2007 10:33:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52408 invoked by uid 500); 17 Aug 2007 10:33:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52397 invoked by uid 99); 17 Aug 2007 10:33:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 03:33:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ramana.jelda@ciao-group.com designates 194.97.158.185 as permitted sender)
Received: from [194.97.158.185] (HELO pigeon.ciao.com) (194.97.158.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 10:33:49 +0000
Received: from Jelda (gateway.ciao.com [194.221.9.215])
	by pigeon.ciao.com (8.13.3/8.13.3) with ESMTP id l7HAWxm1011120
	for <java-user@lucene.apache.org>; Fri, 17 Aug 2007 12:33:00 +0200 (CEST)
	(envelope-from ramana.jelda@ciao-group.com)
Message-Id: <200708171033.l7HAWxm1011120@pigeon.ciao.com>
From: "Ramana Jelda" <ramana.jelda@ciao-group.com>
To: <java-user@lucene.apache.org>
Subject: Issue with indexed tokens position
Date: Fri, 17 Aug 2007 12:32:54 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <Pine.LNX.4.58.0708162347290.32251@hal.rescomp.berkeley.edu>
Thread-Index: Acfgmvj4aatPLo1NS2yRfcdJbBs48gAHf8Sw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-Scanned-By: MIMEDefang 2.61 on 194.97.158.185
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
Lucene doesn't find following value. Some issues with PhraseQuery.

indexed value: pink-I
Indexed tokens:1: [pink:0->5] 2: [pinki:0->5] 3: [i:5->6] (ex. explanation:
"pink" is a term "0->5" term-position)

And I have indexed in a field called "fieldName".
My lucene search with the query [fieldName:"pink i"] can't find above
indexed value.

Can anyone help me out here.

Thx in advance,
Jelda



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 17 10:46:14 2007
Return-Path: <java-user-return-29882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11112 invoked from network); 17 Aug 2007 10:46:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Aug 2007 10:46:12 -0000
Received: (qmail 66542 invoked by uid 500); 17 Aug 2007 10:46:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66502 invoked by uid 500); 17 Aug 2007 10:46:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66491 invoked by uid 99); 17 Aug 2007 10:46:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 03:46:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ramana.jelda@ciao-group.com designates 194.97.158.185 as permitted sender)
Received: from [194.97.158.185] (HELO pigeon.ciao.com) (194.97.158.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 10:46:02 +0000
Received: from Jelda (gateway.ciao.com [194.221.9.215])
	by pigeon.ciao.com (8.13.3/8.13.3) with ESMTP id l7HAjZHH021469
	for <java-user@lucene.apache.org>; Fri, 17 Aug 2007 12:45:35 +0200 (CEST)
	(envelope-from ramana.jelda@ciao-group.com)
Message-Id: <200708171045.l7HAjZHH021469@pigeon.ciao.com>
From: "Ramana Jelda" <ramana.jelda@ciao-group.com>
To: <java-user@lucene.apache.org>
Subject: RE: Issue with indexed tokens position
Date: Fri, 17 Aug 2007 12:45:30 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <200708171033.l7HAWxm1011120@pigeon.ciao.com>
Thread-Index: Acfgmvj4aatPLo1NS2yRfcdJbBs48gAHf8SwAACMghA=
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-Scanned-By: MIMEDefang 2.61 on 194.97.158.185
X-Virus-Checked: Checked by ClamAV on apache.org

Strangely..
My lucene query: fieldName:"pinki i"  finds document. (see "i" in  "pinki")

Jelda

> -----Original Message-----
> From: Ramana Jelda [mailto:ramana.jelda@ciao-group.com] 
> Sent: Friday, August 17, 2007 12:33 PM
> To: java-user@lucene.apache.org
> Subject: Issue with indexed tokens position
> 
> Hi,
> Lucene doesn't find following value. Some issues with PhraseQuery.
> 
> indexed value: pink-I
> Indexed tokens:1: [pink:0->5] 2: [pinki:0->5] 3: [i:5->6] 
> (ex. explanation:
> "pink" is a term "0->5" term-position)
> 
> And I have indexed in a field called "fieldName".
> My lucene search with the query [fieldName:"pink i"] can't 
> find above indexed value.
> 
> Can anyone help me out here.
> 
> Thx in advance,
> Jelda
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 17 13:31:17 2007
Return-Path: <java-user-return-29883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82677 invoked from network); 17 Aug 2007 13:31:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Aug 2007 13:31:16 -0000
Received: (qmail 67469 invoked by uid 500); 17 Aug 2007 13:31:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67444 invoked by uid 500); 17 Aug 2007 13:31:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67433 invoked by uid 99); 17 Aug 2007 13:31:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 06:31:07 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.186 as permitted sender)
Received: from [209.85.134.186] (HELO mu-out-0910.google.com) (209.85.134.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 13:31:06 +0000
Received: by mu-out-0910.google.com with SMTP id g7so571936muf
        for <java-user@lucene.apache.org>; Fri, 17 Aug 2007 06:30:44 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QpoyHtGOpZFAVquvd2UJ65GMDaTkrS3fToirfnLLN4p+IRypuWn+gZm0s8MiLgO6f7d5qO2Qpz1GAjqu2A254SjXoDmd3ty2pJv4M6jF+UpnBpaZYVOqAzDPL+6DMX9goBv7TfmPrdT/B9FubBWV+eG/Co/qCH7rIAdi7UFSvqQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Pj8y33auBEoFKB56SuSonRnmnfXDQAt2Zygtn5ZS4o1nWa97kQagYILRaDGW83K/mNN6GWVgASeZugn8dmbzdz7RpUks+vS58nBRbGDzpIJPjgvfENEhFZ7dpJjWF8NpeinlHDCDNLTK7KFMPe3EJNrnL3XdnylCaOmy0jQafXY=
Received: by 10.82.158.12 with SMTP id g12mr4408955bue.1187357444224;
        Fri, 17 Aug 2007 06:30:44 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Fri, 17 Aug 2007 06:30:44 -0700 (PDT)
Message-ID: <359a92830708170630q2675683bg45ac227a0a2fb099@mail.gmail.com>
Date: Fri, 17 Aug 2007 09:30:44 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Issue with indexed tokens position
In-Reply-To: <200708171045.l7HAjZHH021469@pigeon.ciao.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_60092_23501834.1187357444195"
References: <200708171033.l7HAWxm1011120@pigeon.ciao.com>
	 <200708171045.l7HAjZHH021469@pigeon.ciao.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_60092_23501834.1187357444195
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You'd get much better answers if you posted a concise example
(or possibly code snippets), especially including the analyzers you
used.

Have you used Luke to examine your index and see if it's indexed as
you expect?

Best
Erick

On 8/17/07, Ramana Jelda <ramana.jelda@ciao-group.com> wrote:
>
> Strangely..
> My lucene query: fieldName:"pinki i"  finds document. (see "i"
> in  "pinki")
>
> Jelda
>
> > -----Original Message-----
> > From: Ramana Jelda [mailto:ramana.jelda@ciao-group.com]
> > Sent: Friday, August 17, 2007 12:33 PM
> > To: java-user@lucene.apache.org
> > Subject: Issue with indexed tokens position
> >
> > Hi,
> > Lucene doesn't find following value. Some issues with PhraseQuery.
> >
> > indexed value: pink-I
> > Indexed tokens:1: [pink:0->5] 2: [pinki:0->5] 3: [i:5->6]
> > (ex. explanation:
> > "pink" is a term "0->5" term-position)
> >
> > And I have indexed in a field called "fieldName".
> > My lucene search with the query [fieldName:"pink i"] can't
> > find above indexed value.
> >
> > Can anyone help me out here.
> >
> > Thx in advance,
> > Jelda
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_60092_23501834.1187357444195--

From java-user-return-29884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 17 16:45:11 2007
Return-Path: <java-user-return-29884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92110 invoked from network); 17 Aug 2007 16:45:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Aug 2007 16:45:10 -0000
Received: (qmail 96149 invoked by uid 500); 17 Aug 2007 16:45:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95486 invoked by uid 500); 17 Aug 2007 16:44:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95475 invoked by uid 99); 17 Aug 2007 16:44:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 09:44:59 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [131.246.120.220] (HELO mailgw1.uni-kl.de) (131.246.120.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 16:45:14 +0000
Received: from dfki-1002.dfki.uni-kl.de (dfki-1002.dfki.uni-kl.de [131.246.195.2])
	by mailgw1.uni-kl.de (8.13.8/8.13.8/Debian-3) with ESMTP id l7HGiEbj001327
	for <java-user@lucene.apache.org>; Fri, 17 Aug 2007 18:44:14 +0200
Received: from serv-4100.kl.dfki.de (serv-4100.kl.dfki.de [192.168.41.180])
	by dfki-1002.dfki.uni-kl.de (8.13.8+Sun/8.11.4) with ESMTP id l7HGiAwh024444
	for <java-user@lucene.apache.org>; Fri, 17 Aug 2007 18:44:10 +0200 (CEST)
Received: from [192.168.41.166] (pc-4176 [192.168.41.166])
	by serv-4100.kl.dfki.de (8.13.8+Sun/8.13.8) with ESMTP id l7HGiKA1000865
	for <java-user@lucene.apache.org>; Fri, 17 Aug 2007 18:44:21 +0200 (CEST)
Message-ID: <46C5D064.1050407@web.de>
Date: Fri, 17 Aug 2007 18:44:20 +0200
From: duiduder@web.de
User-Agent: Thunderbird 1.5.0.8 (X11/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: getting term offset information for fields with multiple value
 entiries
References: <46C41DD7.3020507@web.de> <F0A1B877-B56F-4BAF-BE41-1D9092AC7BE4@apache.org>
In-Reply-To: <F0A1B877-B56F-4BAF-BE41-1D9092AC7BE4@apache.org>
X-Enigmail-Version: 0.94.0.0
Content-Type: multipart/mixed;
 boundary="------------090300000204000101080602"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------090300000204000101080602
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hello community, dear Grant

I have build a JUnit test case that illustrates the problem - there, I try to cut
out the right substring with the offset values given from Lucene - and fail :(

A few remarks:

In this example, the '' from 'Bos' makes that the '\w' pattern don't matches -
it is recognized, unlike in StandardAnalyzer - as delimiter sign.

Analysis: It seems that Lucene calculates the offset values by adding a virtual
delimiter between every field value.
But Lucene forgets the last characters of a field value when these are
analyzer-specific delimiter values. (I seem this because of DocumentWriter, line
245: 'if(lastToken != null) offset += lastToken.endOffset() + 1;)'
With this line of code, only the end offset of the last token is considered - by
forgetting potential, trimmed delimiter chars.

Thus, solving would be:
1. Add a single delimiter char between the field values
2. Substract (from the Lucene Offset) the count of analyzer-specific delimiters
   that are at the end of all field values before the match

For this, someone needs to know what a delimiter for an specific analyzer is.

The other possibility of course is to change the behaviour inside Lucene, because
the current offset values are more or less useless / hard to use (I currently have
no idea how to get analyzer-specific delimiter chars).

For me, this looks like a bug - am I wrong?

Any ideas/hints/remarks? I would be very lucky about :)

Greetings

Christian



Grant Ingersoll schrieb:
> Hi Christian,
> 
> Is there anyway you can post a complete, self-contained example
> preferably as a JUnit test?  I think it would be useful to know more
> about how you are indexing (i.e. what Analyzer, etc.)
> The offsets should be taken from whatever is set in on the Token during
> Analysis.  I, too, am trying to remember where in the code this is
> taking place
> 
> Also, what version of Lucene are you using?
> 
> -Grant
> 
> On Aug 16, 2007, at 5:50 AM, duiduder@web.de wrote:
> 
> Hello,
> 
> I have an index with an 'actor' field, for each actor there exists an
> single field value entry, e.g.
> 
> stored/compressed,indexed,tokenized,termVector,termVectorOffsets,termVectorPosition
> <movie_actors>
> 
> movie_actors:Mayrata O'Wisiedo (as Mairata O'Wisiedo)
> movie_actors:Miguel Bos
> movie_actors:Anna Lizaran (as Ana Lizaran)
> movie_actors:Raquel Sanchs
> movie_actors:Angelina Llongueras
> 
> I try to get the term offset, e.g. for 'angelina' with
> 
> termPositionVector = (TermPositionVector)
> reader.getTermFreqVector(docNumber, "movie_actors");
> int iTermIndex = termPositionVector.indexOf("angelina");
> TermVectorOffsetInfo[] termOffsets =
> termPositionVector.getOffsets(iTermIndex);
> 
> 
> I get one TermVectorOffsetInfo for the field - with offset numbers
> that are bigger than one single
> Field entry.
> I guessed that Lucene gives the offset number for the situation that
> all values were concatenated,
> which is for the single (virtual) string:
> 
> movie_actors:Mayrata O'Wisiedo (as Mairata O'Wisiedo)Miguel BosAnna
> Lizaran (as Ana Lizaran)Raquel SanchsAngelina Llongueras
> 
> This fits in nearly no situation, so my second guess was that lucene
> adds some virtual delimiters between the single
> field entries for offset calculation. I added a delimiter, so the
> result would be:
> 
> movie_actors:Mayrata O'Wisiedo (as Mairata O'Wisiedo) Miguel Bos Anna
> Lizaran (as Ana Lizaran) Raquel Sanchs Angelina Llongueras
> (note the ' ' between each actor name)
> 
> ..this also fits not for each situation - there are too much
> delimiters there now, so, further, I guessed that Lucene don't add
> a delimiter in each situation. So I added only one when the last
> character of an entry was no alphanumerical one, with:
> StringBuilder strbAttContent = new StringBuilder();
> for (String strAttValue : m_luceneDocument.getValues(strFieldName))
> {
>    strbAttContent.append(strAttValue);
>    if(strbAttContent.substring(strbAttContent.length() -
> 1).matches("\\w"))
>       strbAttContent.append(' ');
> }
> 
> where I get the result (virtual) entry:
> movie_actors:Mayrata O'Wisiedo (as Mairata O'Wisiedo)Miguel BosAnna
> Lizaran (as Ana Lizaran)Raquel Sanchs Angelina Llongueras
> 
> this fits in ~96% of all my queries....but still its not 100% the way
> lucene calculates the offset value for fields with multiple
> value entries.
> 
> 
> ..maybe the problem is that there are special characters inside my
> database (e.g. the '' at 'Bos'), where my '\w' don't matches.
> I have looked to this specific situation, but considering this one
> character don't solves the problem.
> 
> 
> How do Lucene calculates these offsets? I also searched inside the
> source code, but can't find the correct place.
> 
> 
> Thanks in advance!
> 
> Christian Reuschling
> 
> 
> 
> 
> 
> --
> ______________________________________________________________________________
> 
> Christian Reuschling, Dipl.-Ing.(BA)
> Software Engineer
> 
> Knowledge Management Department
> German Research Center for Artificial Intelligence DFKI GmbH
> Trippstadter Strae 122, D-67663 Kaiserslautern, Germany
> 
> Phone: +49.631.20575-125
> mailto:reuschling@dfki.de  http://www.dfki.uni-kl.de/~reuschling/
> 
> ------------Legal Company Information Required by German
> Law------------------
> Geschftsfhrung: Prof. Dr. Dr. h.c. mult. Wolfgang Wahlster
> (Vorsitzender)
>                   Dr. Walter Olthoff
> Vorsitzender des Aufsichtsrats: Prof. Dr. h.c. Hans A. Aukes
> Amtsgericht Kaiserslautern, HRB 2313=
> ______________________________________________________________________________
> 
>>
- ---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
>>

> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com

> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ



> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 (GNU/Linux)

iD8DBQFGxdBkQoTr50f1tpcRAjyHAJ9jvKORu0Ciepprg70z2qOdFhmnIgCgoaYA
nkji0oFq2UGEkh7H9YLdqbE=
=wKe1
-----END PGP SIGNATURE-----

--------------090300000204000101080602
Content-Type: text/x-java;
 name="TokenizerTest.java"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline;
 filename="TokenizerTest.java"

package org.dynaq.index;



import static org.junit.Assert.assertTrue;

import java.io.IOException;
import java.util.LinkedList;

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.CorruptIndexException;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.TermPositionVector;
import org.apache.lucene.index.TermVectorOffsetInfo;
import org.apache.lucene.queryParser.ParseException;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.search.Hits;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.Searcher;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.LockObtainFailedException;
import org.apache.lucene.store.RAMDirectory;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;



public class TokenizerTest
{

    IndexReader m_indexReader;

    Analyzer m_analyzer = new StandardAnalyzer();


    @Before
    public void createIndex() throws CorruptIndexException, LockObtainFailedException, IOException
    {
        Directory ramDirectory = new RAMDirectory();

        // we create a fist little set of actors names
        LinkedList<String> llActorNames = new LinkedList<String>();
        llActorNames.add("Mayrata O'Wisiedo (as Mairata O'Wisiedo)");
        llActorNames.add("Miguel Bos");
        llActorNames.add("Anna Lizaran (as Ana Lizaran)");
        llActorNames.add("Raquel Sanchs");
        llActorNames.add("Angelina Llongueras");
        

        // store them into a single document with multiple values for one Field
        Document testDoc = new Document();
        for (String strActorsName : llActorNames)
        {
            Field testEntry =
                    new Field("movie_actors", strActorsName, Field.Store.YES, Field.Index.TOKENIZED, Field.TermVector.WITH_POSITIONS_OFFSETS);

            testDoc.add(testEntry);
        }

        // now we write it into the index
        IndexWriter indexWriter = new IndexWriter(ramDirectory, true, m_analyzer, true);

        indexWriter.addDocument(testDoc);
        indexWriter.close();

        m_indexReader = IndexReader.open(ramDirectory);
    }



    @Test
    public void checkOffsetValues() throws ParseException, IOException
    {

        // first, we search for 'angelina'
        String strSearchTerm = "Angelina";

        
        Searcher searcher = new IndexSearcher(m_indexReader);

        QueryParser parser = new QueryParser("movie_actors", m_analyzer);
        Query query = parser.parse(strSearchTerm);

        Hits hits = searcher.search(query);
        Document resultDoc = hits.doc(0);

        String[] straValues = resultDoc.getValues("movie_actors");

        // now, we get the field values and build a single string value out of them
        StringBuilder strbSimplyConcatenated = new StringBuilder();
        StringBuilder strbWithDelimiters = new StringBuilder();
        StringBuilder strbWithDelimitersAfterAlphaNumChar = new StringBuilder();
        for (String strActorName : straValues)
        {
            // first situation: we simply concatenate all field value entries
            strbSimplyConcatenated.append(strActorName);
            // second: we add a single delimiter char between the field values
            strbWithDelimiters.append(strActorName).append('$');
            // third try: we add a single delimiter, but only if the last char of the actor before was a alphanum-char
            strbWithDelimitersAfterAlphaNumChar.append(strActorName);
            String strLastChar = strActorName.substring(strActorName.length() - 1, strActorName.length());
            if(strLastChar.matches("\\w")) strbWithDelimitersAfterAlphaNumChar.append('$');
        }


        // this is the offset value from lucene. This should be the place of 'angelina' in one of the concatenated value Strings above
        TermPositionVector termPositionVector = (TermPositionVector) m_indexReader.getTermFreqVector(0, "movie_actors");
        int iTermIndex = termPositionVector.indexOf(strSearchTerm.toLowerCase());
        TermVectorOffsetInfo[] termOffsets = termPositionVector.getOffsets(iTermIndex);
        int iStartOffset = termOffsets[0].getStartOffset();
        int iEndOffset = termOffsets[0].getEndOffset();
        
        //we create the substrings according to the offset value given from lucene
        String strSubString1 = strbSimplyConcatenated.substring(iStartOffset, iEndOffset);
        String strSubString2 = strbWithDelimiters.substring(iStartOffset, iEndOffset);
        String strSubString3 = strbWithDelimitersAfterAlphaNumChar.substring(iStartOffset, iEndOffset);
        
        System.out.println("Offset value: " + iStartOffset + "-" + iEndOffset);
        System.out.println("simply concatenated:");
        System.out.println(strbSimplyConcatenated);
        System.out.println("SubString for offset: '" + strSubString1 + "'");
        System.out.println();
        System.out.println("with delimiters:");
        System.out.println(strbWithDelimiters);
        System.out.println("SubString for offset: '" + strSubString2 + "'");
        System.out.println();
        System.out.println("with delimiter after alphanum character:");
        System.out.println(strbWithDelimitersAfterAlphaNumChar);
        System.out.println("SubString for offset: '" + strSubString3 + "'");
        
        
        //is the offset value correct for one of the concatenated strings?
        
        //this fails for all situations
        assertTrue(strSubString1.equals(strSearchTerm) || strSubString2.equals(strSearchTerm) || strSubString3.equals(strSearchTerm));
        
        /*
         * Comments: In this example, the '' from 'Bos' makes that the '\w' pattern don't matches - it is recognized, unlike in
         * StandardAnalyzer - as delimiter sign.
         *  
         * Analysis: It seems that Lucene calculates the offset values by adding a virtual delimiter between every field value.
         * But Lucene forgets the last characters of a field value when these are analyzer-specific delimiter values.
         * (I seem this because of DocumentWriter, line 245: 'if(lastToken != null) offset += lastToken.endOffset() + 1;)'
         * With this line of code, only the end offset of the last token is considered - by forgetting potential, trimmed delimiter
         * chars.
         * 
         * Thus, solving would be:
         * 1. Add a single delimiter char between the field values
         * 2. Substract (from the Lucene Offset) the count of analyzer-specific delimiters that are at the end of all field values before the match 
         * 
         * For this, someone needs to know what a delimiter for an specific analyzer is.
         */
        


    }



    @After
    public void closeIndex() throws CorruptIndexException, IOException
    {
        m_indexReader.close();
    }


}































--------------090300000204000101080602
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--------------090300000204000101080602--

From java-user-return-29885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 17 17:28:15 2007
Return-Path: <java-user-return-29885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10590 invoked from network); 17 Aug 2007 17:28:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Aug 2007 17:28:14 -0000
Received: (qmail 61808 invoked by uid 500); 17 Aug 2007 17:28:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61778 invoked by uid 500); 17 Aug 2007 17:28:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61762 invoked by uid 99); 17 Aug 2007 17:28:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 10:28:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ramana.jelda@ciao-group.com designates 194.97.158.185 as permitted sender)
Received: from [194.97.158.185] (HELO pigeon.ciao.com) (194.97.158.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 17:28:19 +0000
Received: from Jelda (gateway.ciao.com [194.221.9.215])
	by pigeon.ciao.com (8.13.3/8.13.3) with ESMTP id l7HHRWGp092813
	for <java-user@lucene.apache.org>; Fri, 17 Aug 2007 19:27:32 +0200 (CEST)
	(envelope-from ramana.jelda@ciao-group.com)
Message-Id: <200708171727.l7HHRWGp092813@pigeon.ciao.com>
From: "Ramana Jelda" <ramana.jelda@ciao-group.com>
To: <java-user@lucene.apache.org>
Subject: RE: Issue with indexed tokens position
Date: Fri, 17 Aug 2007 19:27:27 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <359a92830708170630q2675683bg45ac227a0a2fb099@mail.gmail.com>
Thread-Index: Acfg0uaa6OztXr5xR4O8ZJz5ZJhscQAHtPYg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
X-Scanned-By: MIMEDefang 2.61 on 194.97.158.185
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erick,
Thanks.
Here I try here my best to provide Pseudo code.

Indexed Value: "pink-i"

I have used a Custom Analyzer. My Analyzer looks a littlebit like
following..
public class KeyWordFilter extends TokenFilter{
	public KeyWordFilter(TokenStream in) {
        super(in);
        keywordStack = new LinkedList<Token>();
	}

	org.apache.lucene.analysis.Token next(){
		if(keywordStack.size() > 0){
            	return (Token) keywordStack.poll();
	        }
		//token = "pink-i"
		makeTokens(token);
	}

	void makeTokens(Token token){
		//make following tokens and add to stack..
		//[(pink,0,5,type=HYPENWORD_DIVIDED),
(pinki,0,5,type=HYPENWORD_DIVIDED,posIncr=0),
(i,5,6,type=HYPENWORD_DIVIDED)]	
	}
}


I am 100% sure that there is a problem with token-positions. And PhraseQuery
"pink i" is not working where as PhraseQuery "pinki i" works. 
And it seems positions are totally ignored by PhraseQuery. 

Any thoughts?

Thx,
Jelda
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com] 
> Sent: Friday, August 17, 2007 3:31 PM
> To: java-user@lucene.apache.org
> Subject: Re: Issue with indexed tokens position
> 
> You'd get much better answers if you posted a concise example 
> (or possibly code snippets), especially including the 
> analyzers you used.
> 
> Have you used Luke to examine your index and see if it's 
> indexed as you expect?
> 
> Best
> Erick
> 
> On 8/17/07, Ramana Jelda <ramana.jelda@ciao-group.com> wrote:
> >
> > Strangely..
> > My lucene query: fieldName:"pinki i"  finds document. (see "i"
> > in  "pinki")
> >
> > Jelda
> >
> > > -----Original Message-----
> > > From: Ramana Jelda [mailto:ramana.jelda@ciao-group.com]
> > > Sent: Friday, August 17, 2007 12:33 PM
> > > To: java-user@lucene.apache.org
> > > Subject: Issue with indexed tokens position
> > >
> > > Hi,
> > > Lucene doesn't find following value. Some issues with PhraseQuery.
> > >
> > > indexed value: pink-I
> > > Indexed tokens:1: [pink:0->5] 2: [pinki:0->5] 3: [i:5->6] (ex. 
> > > explanation:
> > > "pink" is a term "0->5" term-position)
> > >
> > > And I have indexed in a field called "fieldName".
> > > My lucene search with the query [fieldName:"pink i"] can't find 
> > > above indexed value.
> > >
> > > Can anyone help me out here.
> > >
> > > Thx in advance,
> > > Jelda
> > >
> > >
> > >
> > > 
> --------------------------------------------------------------------
> > > - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> >
> >
> > 
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 17 17:55:17 2007
Return-Path: <java-user-return-29886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27741 invoked from network); 17 Aug 2007 17:55:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Aug 2007 17:55:15 -0000
Received: (qmail 17118 invoked by uid 500); 17 Aug 2007 17:55:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17060 invoked by uid 500); 17 Aug 2007 17:55:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17041 invoked by uid 99); 17 Aug 2007 17:55:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 10:55:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of antonius@gmail.com designates 209.85.198.186 as permitted sender)
Received: from [209.85.198.186] (HELO rv-out-0910.google.com) (209.85.198.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 17:54:57 +0000
Received: by rv-out-0910.google.com with SMTP id k20so444727rvb
        for <java-user@lucene.apache.org>; Fri, 17 Aug 2007 10:54:37 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=SL0i1QOzW0EyIoZgB0q3lP/bJJEYuBCbhnynpULNlWQQdnaNu0ZfSQFoS2ETHQ0QzOV8EMPzvoae/hmXkD4rsyc15bkcbKtvOpP25ZzH7wG6k/g9yvGkGqxBidT2fzoCfDEJ5aAWX0j/D/Iv1aJ9L7sWR8Yin290SgZP0PsuDk4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=tfW2PCBSIF42N15KK9BPmIP1yYmY+Vh/aUE42tqhHKC3eGk7GsPHWKqZAnguArZclkAz1uZHI998621FHh6P3t1Wi7OGGru60K7x8J2cxwXyrB58Z32oVAWS8E/SqAtEN1KK5CHOoHO9ZgBzVn0v8jEgXmpCK6jYeofedcyNZu4=
Received: by 10.140.192.9 with SMTP id p9mr1361445rvf.1187373277490;
        Fri, 17 Aug 2007 10:54:37 -0700 (PDT)
Received: by 10.141.44.1 with HTTP; Fri, 17 Aug 2007 10:54:37 -0700 (PDT)
Message-ID: <51ad89b20708171054x605742b3t7d86b7b12da66f86@mail.gmail.com>
Date: Sat, 18 Aug 2007 01:54:37 +0800
From: "Antonius Ng" <antonius@gmail.com>
To: java-user@lucene.apache.org
Subject: Custom SynonymMap
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1224_12070395.1187373277475"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1224_12070395.1187373277475
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

I'd like to add more words into SynonymMap for my application, but the
HashMap that holds all the words is not visible (private).

Is there any other Class that I can use to implement SynonymAnalyzer? I am
using Lucene version 2.2.0

Antonius Ng

------=_Part_1224_12070395.1187373277475--

From java-user-return-29887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 17 17:58:54 2007
Return-Path: <java-user-return-29887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30050 invoked from network); 17 Aug 2007 17:58:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Aug 2007 17:58:54 -0000
Received: (qmail 28515 invoked by uid 500); 17 Aug 2007 17:58:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28486 invoked by uid 500); 17 Aug 2007 17:58:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28475 invoked by uid 99); 17 Aug 2007 17:58:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 10:58:45 -0700
X-ASF-Spam-Status: No, hits=3.9 required=10.0
	tests=SPF_NEUTRAL,TRACKER_ID
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 80.76.149.213 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.213] (HELO ch-smtp02.sth.basefarm.net) (80.76.149.213)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 17:59:04 +0000
Received: from c83-249-118-113.bredband.comhem.se ([83.249.118.113]:56316 helo=[192.168.2.101])
	by ch-smtp02.sth.basefarm.net with esmtp (Exim 4.66)
	(envelope-from <karl.wettin@gmail.com>)
	id 1IM65S-0002kU-6h
	for java-user@lucene.apache.org; Fri, 17 Aug 2007 19:58:20 +0200
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Transfer-Encoding: 7bit
Message-Id: <66D25ADB-0CA9-4D46-B68E-69B9184D3EB4@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: karl wettin <karl.wettin@gmail.com>
Subject: ArrayIndexOutOfBoundsException
Date: Fri, 17 Aug 2007 19:53:09 +0200
X-Mailer: Apple Mail (2.752.3)
X-Originating-IP: 83.249.118.113
X-Scan-Result: No virus found in message 1IM65S-0002kU-6h.
X-Scan-Signature: ch-smtp02.sth.basefarm.net 1IM65S-0002kU-6h 39e7461a0e2e727b144e9f0180ec3332
X-Virus-Checked: Checked by ClamAV on apache.org

When I add a field containing a really long term I get an AIOOBE. Is  
this a documented feature?

   public static void main(String[] args) throws Exception {
     RAMDirectory dir = new RAMDirectory();
     IndexWriter iw = new IndexWriter(dir, new StandardAnalyzer 
(Collections.emptySet()), true);
     StringBuffer buf = new StringBuffer(65535);
     for (int i=0; i<32767; i++) {
       buf.append("ha");
     }
     Document doc = new Document();
     doc.add(new Field("f", "three tokens here " + buf.toString(),  
Field.Store.NO, Field.Index.TOKENIZED));
     iw.addDocument(doc);
     iw.close();
     dir.close();
   }

Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException
	at java.lang.System.arraycopy(Native Method)
	at org.apache.lucene.index.DocumentsWriter$ThreadState 
$FieldData.addPosition(DocumentsWriter.java:1462)
	at org.apache.lucene.index.DocumentsWriter$ThreadState 
$FieldData.invertField(DocumentsWriter.java:1285)
	at org.apache.lucene.index.DocumentsWriter$ThreadState 
$FieldData.processField(DocumentsWriter.java:1215)
	at org.apache.lucene.index.DocumentsWriter 
$ThreadState.processDocument(DocumentsWriter.java:936)
	at org.apache.lucene.index.DocumentsWriter.addDocument 
(DocumentsWriter.java:2147)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 17 18:11:55 2007
Return-Path: <java-user-return-29888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34069 invoked from network); 17 Aug 2007 18:11:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Aug 2007 18:11:54 -0000
Received: (qmail 55665 invoked by uid 500); 17 Aug 2007 18:11:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55640 invoked by uid 500); 17 Aug 2007 18:11:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55629 invoked by uid 99); 17 Aug 2007 18:11:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 11:11:44 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.188 as permitted sender)
Received: from [209.85.128.188] (HELO fk-out-0910.google.com) (209.85.128.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 18:11:41 +0000
Received: by fk-out-0910.google.com with SMTP id z23so521666fkz
        for <java-user@lucene.apache.org>; Fri, 17 Aug 2007 11:11:20 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OuxRSTj0hPX95ZCVer9szQYn1FPAj6ppOVNgTjrW4W/C3QNrwLgYNKk/5mJTmJKj1eyYFtTs9QdwRf2Y1U3bVLu7bFNiODNMQYjVjgBZ8LW1RTmzIV2vYe6Jc1JQKo6nuVONZ7+v2u2jPK60fzRVPGLHuNB6aDf9bGOPPTNOwgo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DzXg104klIL3fApOwEyLgyDFGyEK/QUCfD8ksKza9F4ZyIfUWdasBNj/4e7ezux88C0O6SZ7zz8Ju8deBP7iZsJVIM4zLahMWy/EQ2WO0v+IfahMCXEGu8ofJH8n7eMS+lDOYlWFpIah+T4HKrNu/MT7cQ1S3x8EOIPzzzCKIJo=
Received: by 10.82.170.2 with SMTP id s2mr4843104bue.1187374278955;
        Fri, 17 Aug 2007 11:11:18 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Fri, 17 Aug 2007 11:11:18 -0700 (PDT)
Message-ID: <359a92830708171111h7fa266a8j5218c79fb4339e4e@mail.gmail.com>
Date: Fri, 17 Aug 2007 14:11:18 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Issue with indexed tokens position
In-Reply-To: <200708171727.l7HHRWGp092813@pigeon.ciao.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_61683_24534672.1187374278927"
References: <359a92830708170630q2675683bg45ac227a0a2fb099@mail.gmail.com>
	 <200708171727.l7HHRWGp092813@pigeon.ciao.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_61683_24534672.1187374278927
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sure. I'd recommend that you start by taking out our custom
tokenizer and looking at what Lucene does rather than what you've
tried to emulate. For instance, the StandardTokenizer returns
offsets that are one more than the end of the previous token. That is,
the following program (Lucene 2.1)


import java.io.Reader;
import java.io.StringReader;

import org.apache.lucene.analysis.Token;
import org.apache.lucene.analysis.Tokenizer;
import org.apache.lucene.analysis.standard.StandardTokenizer;


public class Analysis
{
    public static void main(String[] args)
    {
        try {
            Reader r = new StringReader("this is some text");
            Tokenizer tzer = new StandardTokenizer(r);

            Token t;

            while ((t = tzer.next()) != null) {
                System.out.println(
                        String.format(
                                "Text: %s, start: %d, end: %d",
                                t.termText(),
                                t.startOffset(),
                                t.endOffset()));
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}

outputs:
Text: this, start: 0, end: 4
Text: is, start: 5, end: 7
Text: some, start: 8, end: 12
Text: text, start: 13, end: 17


Which, if I'm reading your code correctly is different in that the end of
one
token is the same offset as the beginning of the next token in your
example. So the off-by-one error you're claiming is perhaps the result of
an off-by-one error of your tokenizer.

In general, a lot of people depend on offset positions and phrase queries,
so I'd be very surprised if something this basic is out there without anyone
being aware of it. But you never know.....

Of course, I may be way off. If so can you post a self-contained program
using standard analyzers/tokenizers illustrating the problem? Most often,
when I try to create such a thing I can't and it then points me back to
my own code..

Best
Erick

On 8/17/07, Ramana Jelda <ramana.jelda@ciao-group.com> wrote:
>
> Hi Erick,
> Thanks.
> Here I try here my best to provide Pseudo code.
>
> Indexed Value: "pink-i"
>
> I have used a Custom Analyzer. My Analyzer looks a littlebit like
> following..
> public class KeyWordFilter extends TokenFilter{
>         public KeyWordFilter(TokenStream in) {
>         super(in);
>         keywordStack = new LinkedList<Token>();
>         }
>
>         org.apache.lucene.analysis.Token next(){
>                 if(keywordStack.size() > 0){
>                 return (Token) keywordStack.poll();
>                 }
>                 //token = "pink-i"
>                 makeTokens(token);
>         }
>
>         void makeTokens(Token token){
>                 //make following tokens and add to stack..
>                 //[(pink,0,5,type=HYPENWORD_DIVIDED),
> (pinki,0,5,type=HYPENWORD_DIVIDED,posIncr=0),
> (i,5,6,type=HYPENWORD_DIVIDED)]
>         }
> }
>
>
> I am 100% sure that there is a problem with token-positions. And
> PhraseQuery
> "pink i" is not working where as PhraseQuery "pinki i" works.
> And it seems positions are totally ignored by PhraseQuery.
>
> Any thoughts?
>
> Thx,
> Jelda
> > -----Original Message-----
> > From: Erick Erickson [mailto:erickerickson@gmail.com]
> > Sent: Friday, August 17, 2007 3:31 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: Issue with indexed tokens position
> >
> > You'd get much better answers if you posted a concise example
> > (or possibly code snippets), especially including the
> > analyzers you used.
> >
> > Have you used Luke to examine your index and see if it's
> > indexed as you expect?
> >
> > Best
> > Erick
> >
> > On 8/17/07, Ramana Jelda <ramana.jelda@ciao-group.com> wrote:
> > >
> > > Strangely..
> > > My lucene query: fieldName:"pinki i"  finds document. (see "i"
> > > in  "pinki")
> > >
> > > Jelda
> > >
> > > > -----Original Message-----
> > > > From: Ramana Jelda [mailto:ramana.jelda@ciao-group.com]
> > > > Sent: Friday, August 17, 2007 12:33 PM
> > > > To: java-user@lucene.apache.org
> > > > Subject: Issue with indexed tokens position
> > > >
> > > > Hi,
> > > > Lucene doesn't find following value. Some issues with PhraseQuery.
> > > >
> > > > indexed value: pink-I
> > > > Indexed tokens:1: [pink:0->5] 2: [pinki:0->5] 3: [i:5->6] (ex.
> > > > explanation:
> > > > "pink" is a term "0->5" term-position)
> > > >
> > > > And I have indexed in a field called "fieldName".
> > > > My lucene search with the query [fieldName:"pink i"] can't find
> > > > above indexed value.
> > > >
> > > > Can anyone help me out here.
> > > >
> > > > Thx in advance,
> > > > Jelda
> > > >
> > > >
> > > >
> > > >
> > --------------------------------------------------------------------
> > > > - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > >
> > >
> > >
> > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_61683_24534672.1187374278927--

From java-user-return-29889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 17 18:31:26 2007
Return-Path: <java-user-return-29889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37672 invoked from network); 17 Aug 2007 18:31:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Aug 2007 18:31:25 -0000
Received: (qmail 73562 invoked by uid 500); 17 Aug 2007 18:31:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73511 invoked by uid 500); 17 Aug 2007 18:31:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73500 invoked by uid 99); 17 Aug 2007 18:31:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 11:31:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 18:31:25 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id CFA761223F
	for <java-user@lucene.apache.org>; Fri, 17 Aug 2007 14:30:40 -0400 (EDT)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Fri, 17 Aug 2007 14:30:40 -0400
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id B9E95C52; Fri, 17 Aug 2007 14:30:40 -0400 (EDT)
Message-Id: <1187375440.32250.1205947587@webmail.messagingengine.com>
X-Sasl-Enc: HTkta3Ajdl4fw8BOv1xs/AOUDohstfB/N/8WHJ7GLMkl 1187375440
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <66D25ADB-0CA9-4D46-B68E-69B9184D3EB4@gmail.com>
Subject: Re: ArrayIndexOutOfBoundsException
In-Reply-To: <66D25ADB-0CA9-4D46-B68E-69B9184D3EB4@gmail.com>
Date: Fri, 17 Aug 2007 14:30:40 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


Hmmm ... good catch.  With DocumentsWriter there is a max term length
(currently 16384 chars).  I think we should fix it to raise a clearer
exception?  I'll open an issue.

Mike

On Fri, 17 Aug 2007 19:53:09 +0200, "karl wettin" <karl.wettin@gmail.com> said:
> When I add a field containing a really long term I get an AIOOBE. Is  
> this a documented feature?
> 
>    public static void main(String[] args) throws Exception {
>      RAMDirectory dir = new RAMDirectory();
>      IndexWriter iw = new IndexWriter(dir, new StandardAnalyzer 
> (Collections.emptySet()), true);
>      StringBuffer buf = new StringBuffer(65535);
>      for (int i=0; i<32767; i++) {
>        buf.append("ha");
>      }
>      Document doc = new Document();
>      doc.add(new Field("f", "three tokens here " + buf.toString(),  
> Field.Store.NO, Field.Index.TOKENIZED));
>      iw.addDocument(doc);
>      iw.close();
>      dir.close();
>    }
> 
> Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException
> 	at java.lang.System.arraycopy(Native Method)
> 	at org.apache.lucene.index.DocumentsWriter$ThreadState 
> $FieldData.addPosition(DocumentsWriter.java:1462)
> 	at org.apache.lucene.index.DocumentsWriter$ThreadState 
> $FieldData.invertField(DocumentsWriter.java:1285)
> 	at org.apache.lucene.index.DocumentsWriter$ThreadState 
> $FieldData.processField(DocumentsWriter.java:1215)
> 	at org.apache.lucene.index.DocumentsWriter 
> $ThreadState.processDocument(DocumentsWriter.java:936)
> 	at org.apache.lucene.index.DocumentsWriter.addDocument 
> (DocumentsWriter.java:2147)
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 17 18:32:56 2007
Return-Path: <java-user-return-29890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38124 invoked from network); 17 Aug 2007 18:32:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Aug 2007 18:32:55 -0000
Received: (qmail 83634 invoked by uid 500); 17 Aug 2007 18:32:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83598 invoked by uid 500); 17 Aug 2007 18:32:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83582 invoked by uid 99); 17 Aug 2007 18:32:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 11:32:32 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.188 as permitted sender)
Received: from [209.85.128.188] (HELO fk-out-0910.google.com) (209.85.128.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 18:32:29 +0000
Received: by fk-out-0910.google.com with SMTP id z23so525275fkz
        for <java-user@lucene.apache.org>; Fri, 17 Aug 2007 11:32:08 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=HoXOoiSkgGSr+L+iB9tvVWc/uIYtu4zxdPJ/BTqjnpheKFBK2deDNpqN26GWIM6Dw1IDDnGLVgngFRrJv/G5Ynrje+K69/1uejueehzhrQ00tQ0zMSMmaU5N8uGfT304vHfZdogTQaarJjKp5jN1fSTbUZJJ+MIBth583+mOf7Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=hYWlXlpdjW0qwHxF7+cY3LasueHlYkqgzd6xxVrdlOerkazaWCx+w0Lqlh4qZDSrzTM8+0FyQhokCoMloyjzfPcosJut2nHEwvIDaMD3ThJiaTw0MvFV7etADYGmvLpEslUJ45utM8cowBpI8VPwS3VYHLTJRbfsKbcJkiSLTSk=
Received: by 10.82.156.12 with SMTP id d12mr4924677bue.1187375527961;
        Fri, 17 Aug 2007 11:32:07 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Fri, 17 Aug 2007 11:32:07 -0700 (PDT)
Message-ID: <359a92830708171132u1ba31c56x57ef3a346612cefa@mail.gmail.com>
Date: Fri, 17 Aug 2007 14:32:07 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Custom SynonymMap
In-Reply-To: <51ad89b20708171054x605742b3t7d86b7b12da66f86@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_61903_6376041.1187375527935"
References: <51ad89b20708171054x605742b3t7d86b7b12da66f86@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_61903_6376041.1187375527935
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Try searching the mail archives for SynonymMap, as I know this was
discussed a while ago but don't remember the specifics.

Erick



On 8/17/07, Antonius Ng <antonius@gmail.com> wrote:
>
> Hi all,
>
> I'd like to add more words into SynonymMap for my application, but the
> HashMap that holds all the words is not visible (private).
>
> Is there any other Class that I can use to implement SynonymAnalyzer? I am
> using Lucene version 2.2.0
>
> Antonius Ng
>

------=_Part_61903_6376041.1187375527935--

From java-user-return-29891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 17 18:40:26 2007
Return-Path: <java-user-return-29891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40000 invoked from network); 17 Aug 2007 18:40:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Aug 2007 18:40:25 -0000
Received: (qmail 550 invoked by uid 500); 17 Aug 2007 18:40:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 511 invoked by uid 500); 17 Aug 2007 18:40:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 498 invoked by uid 99); 17 Aug 2007 18:40:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 11:40:16 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.190 as permitted sender)
Received: from [209.85.128.190] (HELO fk-out-0910.google.com) (209.85.128.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 18:40:11 +0000
Received: by fk-out-0910.google.com with SMTP id z23so526628fkz
        for <java-user@lucene.apache.org>; Fri, 17 Aug 2007 11:39:49 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=PF/pEuxF5ddXMz112B4niDUVNKzERYcHk5nvQIiYxFcGKeeiPfH8T5V56lhVIh9k0tYNZOvFR7Qp8RmCWzxrW2EAjQmt9oEezZ9c0fFlQAw4DzaY2QsTOKLwDVEOLuETYfh2JuT5oDuTgiaZ9Qz7fFy9yM8IMrxxUavw1bIzhns=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZP369moKs4jft2WgTaSmI4+VymYrWRG4q2P6ZgG7v68xRumF1bag8KrNR/vHVNrK5GqQQIR2FRIn92uzsUmaHB5rNVA2corExInBysz/sTXkiy8e9r58IW+Kd7mwQUPHOM3jGRLzuv4Rj07IzDr38bySW8S5UgMt2aXcyGjAp6M=
Received: by 10.82.126.5 with SMTP id y5mr2591921buc.1187375988550;
        Fri, 17 Aug 2007 11:39:48 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Fri, 17 Aug 2007 11:39:48 -0700 (PDT)
Message-ID: <359a92830708171139nabe8637xdd9f46a71827602b@mail.gmail.com>
Date: Fri, 17 Aug 2007 14:39:48 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ArrayIndexOutOfBoundsException
In-Reply-To: <66D25ADB-0CA9-4D46-B68E-69B9184D3EB4@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_61975_22012264.1187375988528"
References: <66D25ADB-0CA9-4D46-B68E-69B9184D3EB4@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_61975_22012264.1187375988528
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I've added MUCH larger strings to a document without any problem,
but it was an FSDir. I admit that it is kind of "interesting" that this
happens just as you cross the magic number.

But I tried it on my machine and it works just fine, go figure <G>..

Erick

On 8/17/07, karl wettin <karl.wettin@gmail.com> wrote:
>
> When I add a field containing a really long term I get an AIOOBE. Is
> this a documented feature?
>
>    public static void main(String[] args) throws Exception {
>      RAMDirectory dir = new RAMDirectory();
>      IndexWriter iw = new IndexWriter(dir, new StandardAnalyzer
> (Collections.emptySet()), true);
>      StringBuffer buf = new StringBuffer(65535);
>      for (int i=0; i<32767; i++) {
>        buf.append("ha");
>      }
>      Document doc = new Document();
>      doc.add(new Field("f", "three tokens here " + buf.toString(),
> Field.Store.NO, Field.Index.TOKENIZED));
>      iw.addDocument(doc);
>      iw.close();
>      dir.close();
>    }
>
> Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException
>         at java.lang.System.arraycopy(Native Method)
>         at org.apache.lucene.index.DocumentsWriter$ThreadState
> $FieldData.addPosition(DocumentsWriter.java:1462)
>         at org.apache.lucene.index.DocumentsWriter$ThreadState
> $FieldData.invertField(DocumentsWriter.java:1285)
>         at org.apache.lucene.index.DocumentsWriter$ThreadState
> $FieldData.processField(DocumentsWriter.java:1215)
>         at org.apache.lucene.index.DocumentsWriter
> $ThreadState.processDocument(DocumentsWriter.java:936)
>         at org.apache.lucene.index.DocumentsWriter.addDocument
> (DocumentsWriter.java:2147)
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_61975_22012264.1187375988528--

From java-user-return-29892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 17 18:42:34 2007
Return-Path: <java-user-return-29892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40787 invoked from network); 17 Aug 2007 18:42:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Aug 2007 18:42:32 -0000
Received: (qmail 4367 invoked by uid 500); 17 Aug 2007 18:42:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4339 invoked by uid 500); 17 Aug 2007 18:42:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4328 invoked by uid 99); 17 Aug 2007 18:42:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 11:42:22 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.184 as permitted sender)
Received: from [209.85.128.184] (HELO fk-out-0910.google.com) (209.85.128.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 18:42:17 +0000
Received: by fk-out-0910.google.com with SMTP id z23so526987fkz
        for <java-user@lucene.apache.org>; Fri, 17 Aug 2007 11:41:56 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=RgrTO9rT77g50UeFivulMeFcls/PhUtBWIWNADRO3H+kHEotSARo7SS7JE1DivmWaYW72cg3/2KEuXPChnMEjtZg6IK53F+doGMuo7GqDZIJGti+e/dFq2GBtX2ZRLZQfH5TNtj2UIC03n351Lv5zKzi6WBqJv+Zvv7DlzPzHes=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ARK0ZWRdaZA+XsI7+bfOrKoJpAuiVjnVsRLF9Iv0eOAp1Me7n4EuiFkvaBUj8Iwh0wVXyQG1/rLu5e8TCkpFvVC+VFvCokwoRuCU8EXWQ8C56JUN/KDwmILTTzkkwmGwuFDDhZWyzmzNIckfpWwqsMcDRYX5bJFypoD5ngSfv3w=
Received: by 10.82.116.15 with SMTP id o15mr4886144buc.1187376115769;
        Fri, 17 Aug 2007 11:41:55 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Fri, 17 Aug 2007 11:41:55 -0700 (PDT)
Message-ID: <359a92830708171141w63519c5cu892c5a49138e3e12@mail.gmail.com>
Date: Fri, 17 Aug 2007 14:41:55 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ArrayIndexOutOfBoundsException
In-Reply-To: <1187375440.32250.1205947587@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_62007_11366936.1187376115728"
References: <66D25ADB-0CA9-4D46-B68E-69B9184D3EB4@gmail.com>
	 <1187375440.32250.1205947587@webmail.messagingengine.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_62007_11366936.1187376115728
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Ignore the part about "much longer strings", I overlooked that this
was a single term....

But it still works on my machine, Lucene 2.1...

Erick

On 8/17/07, Michael McCandless <lucene@mikemccandless.com> wrote:
>
>
> Hmmm ... good catch.  With DocumentsWriter there is a max term length
> (currently 16384 chars).  I think we should fix it to raise a clearer
> exception?  I'll open an issue.
>
> Mike
>
> On Fri, 17 Aug 2007 19:53:09 +0200, "karl wettin" <karl.wettin@gmail.com>
> said:
> > When I add a field containing a really long term I get an AIOOBE. Is
> > this a documented feature?
> >
> >    public static void main(String[] args) throws Exception {
> >      RAMDirectory dir = new RAMDirectory();
> >      IndexWriter iw = new IndexWriter(dir, new StandardAnalyzer
> > (Collections.emptySet()), true);
> >      StringBuffer buf = new StringBuffer(65535);
> >      for (int i=0; i<32767; i++) {
> >        buf.append("ha");
> >      }
> >      Document doc = new Document();
> >      doc.add(new Field("f", "three tokens here " + buf.toString(),
> > Field.Store.NO, Field.Index.TOKENIZED));
> >      iw.addDocument(doc);
> >      iw.close();
> >      dir.close();
> >    }
> >
> > Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException
> >       at java.lang.System.arraycopy(Native Method)
> >       at org.apache.lucene.index.DocumentsWriter$ThreadState
> > $FieldData.addPosition(DocumentsWriter.java:1462)
> >       at org.apache.lucene.index.DocumentsWriter$ThreadState
> > $FieldData.invertField(DocumentsWriter.java:1285)
> >       at org.apache.lucene.index.DocumentsWriter$ThreadState
> > $FieldData.processField(DocumentsWriter.java:1215)
> >       at org.apache.lucene.index.DocumentsWriter
> > $ThreadState.processDocument(DocumentsWriter.java:936)
> >       at org.apache.lucene.index.DocumentsWriter.addDocument
> > (DocumentsWriter.java:2147)
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_62007_11366936.1187376115728--

From java-user-return-29893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 17 19:03:46 2007
Return-Path: <java-user-return-29893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46677 invoked from network); 17 Aug 2007 19:03:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Aug 2007 19:03:44 -0000
Received: (qmail 31479 invoked by uid 500); 17 Aug 2007 19:03:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31443 invoked by uid 500); 17 Aug 2007 19:03:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31432 invoked by uid 99); 17 Aug 2007 19:03:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 12:03:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.191.69.177] (HELO web33814.mail.mud.yahoo.com) (209.191.69.177)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 17 Aug 2007 19:03:28 +0000
Received: (qmail 64938 invoked by uid 60001); 17 Aug 2007 19:03:07 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=dxHjcimnsbFoq0ETcIJ6F+aZvlCDuLEbU3gQthdqMJSlvQzz5YZhZzeR173Z/coVfDj1/9k/89i35q8fQrh7vBNgs0x3oYnn8tpUzH+haaA63eCkV2/SYCBQpheGShCBwKxcITSl1lVgwUubHpsrsSWePeQyUjMD2+d7of5MMRE=;
X-YMail-OSG: 0Y7vtLIVM1m0BCRaaSLhyoOODucckF34RY5g4hdnUBvQnt5jFkAqxWhZR5b0U7xAEgYqlZ_qcGapJNTa1ABpfdNE704iJfbIxTWYj72nSLfwrlOxp6mmLtPOtMHJBg--
Received: from [74.93.74.145] by web33814.mail.mud.yahoo.com via HTTP; Fri, 17 Aug 2007 12:03:07 PDT
X-Mailer: YahooMailRC/651.48 YahooMailWebService/0.7.119
Date: Fri, 17 Aug 2007 12:03:07 -0700 (PDT)
From: Jeff Gutierrez <jeffgoot@yahoo.com>
Reply-To: Jeff Gutierrez <jeff@mapua.org>
Subject: Lucene and DRBD
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Message-ID: <384965.62532.qm@web33814.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I'm currently trying to figure how I could provide a Lucene-based search fu=
nctionality to an existing system. Though the application is hosted in mult=
iple boxes, they do NOT share a SAN where we can put the index directory. E=
ach of the nodes need to update Lucene documents but it's not going to be a=
 common use case -- probably 100x a day from the 7-8M documents.=0A=0AHas a=
nyone here tried storing the Lucene index on top of DRBD? I'm curious to he=
ar your experience in setting up and maintaining such a solution. Were ther=
e any performance issues?=0A=0ADRBD=0Ahttp://en.wikipedia.org/wiki/DRBD=0A=
=0AThanks,=0A=0AJeff

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 17 20:23:32 2007
Return-Path: <java-user-return-29894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81138 invoked from network); 17 Aug 2007 20:23:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Aug 2007 20:23:31 -0000
Received: (qmail 86372 invoked by uid 500); 17 Aug 2007 20:23:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86340 invoked by uid 500); 17 Aug 2007 20:23:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86329 invoked by uid 99); 17 Aug 2007 20:23:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 13:23:22 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a12.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 20:23:39 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a12.g.dreamhost.com (Postfix) with ESMTP id C9D797F9E
	for <java-user@lucene.apache.org>; Fri, 17 Aug 2007 13:22:52 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <12186723.post@talk.nabble.com>
References: <12186723.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F0232E47-90C5-4024-9B3C-2813550BE649@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Document Similarities lucene(particularly using doc id's)
Date: Fri, 17 Aug 2007 16:22:30 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,


On Aug 16, 2007, at 2:20 PM, Lokeya wrote:

>
> Hi All,
>
> I have the following set up: a) Indexed set of docs. b) Ran 1st  
> query and
> got tops docs  c) Fetched the id's from that and stored in a data  
> structure.
> d) Ran 2nd query , got top docs , fetched id's and stored in a data
> structure.
>
> Now i have 2 sets of doc ids (set 1) and (set 1).
>
> I want to find out the document content similarity between these 2  
> sets(just
> using doc ids information which i have).
>

Not sure what you mean here.  What do the doc ids have to do with the  
content?

> Qn 1: Is it possible using any lucene api's. In that case can you  
> point me
> to the appropriate API's. I did a search at
> :http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/ 
> javadoc/index.html
> But couldn't find anything.
>

It is possible if you use Term Vectors (see  
IndexReader.getTermFreqVector).  You will need to store (when you  
construct your Field) and load the term vectors and then calculate  
the similarity.  A common way of doing this is by calculating the  
cosine of the angle between the two vectors.

-Grant

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 17 20:49:24 2007
Return-Path: <java-user-return-29895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92225 invoked from network); 17 Aug 2007 20:49:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Aug 2007 20:49:23 -0000
Received: (qmail 36032 invoked by uid 500); 17 Aug 2007 20:49:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35981 invoked by uid 500); 17 Aug 2007 20:49:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35970 invoked by uid 99); 17 Aug 2007 20:49:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 13:49:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of montgomerie@shaw.ca designates 24.71.223.10 as permitted sender)
Received: from [24.71.223.10] (HELO pd3mo1so.prod.shaw.ca) (24.71.223.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 20:49:34 +0000
Received: from pd3mr6so.prod.shaw.ca (pd3mr6so-qfe3.prod.shaw.ca [10.0.141.21])
 by l-daemon (Sun ONE Messaging Server 6.0 HotFix 1.01 (built Mar 15 2004))
 with ESMTP id <0JMX00M86R5D15A0@l-daemon> for java-user@lucene.apache.org;
 Fri, 17 Aug 2007 14:48:49 -0600 (MDT)
Received: from pn2ml9so.prod.shaw.ca ([10.0.121.7])
 by pd3mr6so.prod.shaw.ca (Sun Java System Messaging Server 6.2-7.05 (built Sep
 5 2006)) with ESMTP id <0JMX005H6R5CV670@pd3mr6so.prod.shaw.ca> for
 java-user@lucene.apache.org; Fri, 17 Aug 2007 14:48:50 -0600 (MDT)
Received: from [192.168.1.105] ([68.148.7.15])
 by l-daemon (Sun ONE Messaging Server 6.0 HotFix 1.01 (built Mar 15 2004))
 with ESMTP id <0JMX000QHR5CFII1@l-daemon> for java-user@lucene.apache.org;
 Fri, 17 Aug 2007 14:48:48 -0600 (MDT)
Date: Fri, 17 Aug 2007 14:48:47 -0600
From: Scott Montgomerie <montgomerie@shaw.ca>
Subject: Modification to IndexWriter / IndexReader
To: java-user@lucene.apache.org
Message-id: <46C609AF.5070208@shaw.ca>
MIME-version: 1.0
Content-type: multipart/mixed; boundary=------------050604020607090006050303
X-Enigmail-Version: 0.94.3.0
User-Agent: Thunderbird 2.0.0.0 (X11/20070411)
X-Virus-Checked: Checked by ClamAV on apache.org

--------------050604020607090006050303
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

I've noticed a few threads on this so far... maybe it's useful or maybe
somebody's already done this, or maybe it's insane and bug-prone.

Anyways, our application requires lucene to act as a non-critical
database, as in each record is composed of denormalized data derived
from the real DBMS.  The index can be regenerated at any time from the
database.  However, information added to the index must be searchable
immediately after being added.  The index is written to concurrently by
many users.  Therefore, flushing the IndexWriter to disk, and re-opening
a IndexReader is not really feasible.  Therefore, I worked up this hack
to compensate. 

Note that this solution precludes multiple readers from reading an
index.  Also, a reader cannot be allowed to delete documents (but
really, why can you delete using a reader, anyway?  Or has this been
deprecated?)

Essentially, a IndexWriter owns a IndexReader, and to obtain a reader,
you call Indexwriter.getReader().  Whenever the writer is written to, a
new reader is formed, composed of the IndexWriter's SegmentInfos (since
a reader and writer essentially share copies of both of these structures
anyways).  It's essentially an in-memory swap rather than reading the
segment infos back from disk after the writer has written them.

I've attached the patch based on the current dev code.  Basically it
implements doAfterFlush(), and adds getReader() and addNotifier()
methods.  The notifier is simply so that anybody using a Searcher can be
notified that the underlying reader has changed, and the Searcher should
be re-opened.

Something like this:

writer.addNotifier(new WriterUpdateNotifier()
            {
                public void onUpdate(IndexWriter writer, IndexReader r)
                {
                    // The reader and writer has been updated, rebuild
the searchers
                    readers[readers.length - 1] = r;
                    try
                    {
                        reader = new MultiReader(readers);
                    }
                    catch (IOException e)
                    {
                        e.printStackTrace();
                    }
                    reopenSearcher();
                }
            });

This is currently working well in a production system and is working
quite well.  It has been load tested, and well, our users are load
testing it for us as well :-).  However, see my previous post about the
ArrayIndexOutOfBoundsException, although I don't see how this could be
the cause... but maybe, since nobody else gets the problem.  However, I
haven't modified the writer at all, and I am never modifying the index
with the Reader.

So feel free to tell me this is crazy... I'm just throwing it out there.

Thanks

--------------050604020607090006050303
Content-Type: text/x-patch;
 name="IndexWriter.patch"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="IndexWriter.patch"

266,285d268
<     /** Zigtag added **/
<     private IndexReader reader;
< 
<     private List<WriterUpdateNotifier> notifiers = new ArrayList<WriterUpdateNotifier>();
< 
<     public IndexReader getReader() throws IOException
<     {
<         if (reader == null)
<         {
<             reader = IndexReader.open(directory);
<         }
<         return reader;
<     }
< 
<     public void addNotifier(WriterUpdateNotifier notifier)
<     {
<         notifiers.add(notifier);
<     }
<     /** END Zigtag added **/
< 
1857,1914c1840,1842
<   // Zigtag added to this class:
<     void doAfterFlush()
<             throws IOException
<     {
<         final boolean closeDirectory = false;
<         reader = (IndexReader) new SegmentInfos.FindSegmentsFile(directory)
<         {
< 
<             protected Object doBody(String segmentFileName) throws CorruptIndexException, IOException
<             {
< 
<                 SegmentInfos infos = segmentInfos;
<                 //infos.read(directory, segmentFileName);
< 
<                 IndexReader reader;
< 
<                 if (infos.size() == 1)
<                 {          // index is optimized
<                     reader = SegmentReader.get(infos, infos.info(0), closeDirectory);
<                 }
<                 else
<                 {
< 
<                     // To reduce the chance of hitting FileNotFound
<                     // (and having to retry), we open segments in
<                     // reverse because IndexWriter merges & deletes
<                     // the newest segments first.
< 
<                     IndexReader[] readers = new IndexReader[infos.size()];
<                     for (int i = infos.size() - 1; i >= 0; i--)
<                     {
<                         try
<                         {
<                             readers[i] = SegmentReader.get(infos.info(i));
<                         }
<                         catch (IOException e)
<                         {
<                             // Close all readers we had opened:
<                             for (i++; i < infos.size(); i++)
<                             {
<                                 readers[i].close();
<                             }
<                             throw e;
<                         }
<                     }
< 
<                     reader = new MultiReader(readers);
<                 }
<                 // reader.deletionPolicy = deletionPolicy;  It's null anyway
<                 return reader;
<             }
<         }.run();
< 
<         for ( WriterUpdateNotifier notifier : notifiers)
<         {
<             notifier.onUpdate(this, reader);
<         }
<     }
---
>   void doAfterFlush()
>     throws IOException {
>   }
2385,2386d2310
<       doAfterFlush();
< 


--------------050604020607090006050303
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--------------050604020607090006050303--

From java-user-return-29896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 17 21:19:20 2007
Return-Path: <java-user-return-29896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99849 invoked from network); 17 Aug 2007 21:19:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Aug 2007 21:19:18 -0000
Received: (qmail 83054 invoked by uid 500); 17 Aug 2007 21:19:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83005 invoked by uid 500); 17 Aug 2007 21:19:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82993 invoked by uid 99); 17 Aug 2007 21:19:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 14:19:07 -0700
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,TRACKER_ID
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of grant.ingersoll@gmail.com designates 64.233.184.226 as permitted sender)
Received: from [64.233.184.226] (HELO wr-out-0506.google.com) (64.233.184.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 21:19:00 +0000
Received: by wr-out-0506.google.com with SMTP id 41so460606wry
        for <java-user@lucene.apache.org>; Fri, 17 Aug 2007 14:18:39 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:x-gpgmail-state:content-type:message-id:from:subject:date:to:x-mailer;
        b=HWC7nqlAHBFY9pT3N97ESaf5N4Lh4xEmpXDfTleFMOwJhk2vC9gI92dv8pZIMzHq5vi337tJlTxQWCdczeJcCccSkhj3pyfcLGnck8jnVvQMIX9o5SlMfO0heCBDRfp6BPXON2JPXcKIsfwCyHbShAp785rLDtLbxJe/QeM+G2o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:x-gpgmail-state:content-type:message-id:from:subject:date:to:x-mailer;
        b=jD8GZn+Uj0caR/TYaTdVWzG8let4r13p+RwRMfivkuP2osjbdkUBxvwA7Tc/D7Ki5T8VCxTPVMUvMmoVXgTqZQr19oCtcnT3Wz9j7J+96BCDAY/BOMio5EHS4+J9fABAk6TdkDP3VnjcHFNhuPMvHePZMO7EdQnwhHIye7e1d4Q=
Received: by 10.90.75.10 with SMTP id x10mr5382532aga.1187385519007;
        Fri, 17 Aug 2007 14:18:39 -0700 (PDT)
Received: from ?192.168.0.3? ( [74.229.189.244])
        by mx.google.com with ESMTPS id 66sm3393840wra.2007.08.17.14.18.35
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 17 Aug 2007 14:18:37 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <46C5D064.1050407@web.de>
References: <46C41DD7.3020507@web.de> <F0A1B877-B56F-4BAF-BE41-1D9092AC7BE4@apache.org> <46C5D064.1050407@web.de>
X-Gpgmail-State: !signed
Content-Type: multipart/alternative; boundary=Apple-Mail-13-772378864
Message-Id: <C33DE6A4-5702-4177-84D4-D38ADE5EC471@gmail.com>
From: Grant Ingersoll <grant.ingersoll@gmail.com>
Subject: Re: getting term offset information for fields with multiple value entiries
Date: Fri, 17 Aug 2007 17:18:12 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-13-772378864
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=ISO-8859-1;
	delsp=yes;
	format=flowed

What version of Lucene are you using?


On Aug 17, 2007, at 12:44 PM, duiduder@web.de wrote:

> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Hello community, dear Grant
>
> I have build a JUnit test case that illustrates the problem - =20
> there, I try to cut
> out the right substring with the offset values given from Lucene - =20
> and fail :(
>
> A few remarks:
>
> In this example, the '=E9' from 'Bos=E9' makes that the '\w' pattern =20=

> don't matches -
> it is recognized, unlike in StandardAnalyzer - as delimiter sign.
>
> Analysis: It seems that Lucene calculates the offset values by =20
> adding a virtual
> delimiter between every field value.
> But Lucene forgets the last characters of a field value when these are
> analyzer-specific delimiter values. (I seem this because of =20
> DocumentWriter, line
> 245: 'if(lastToken !=3D null) offset +=3D lastToken.endOffset() + 1;)'
> With this line of code, only the end offset of the last token is =20
> considered - by
> forgetting potential, trimmed delimiter chars.
>
> Thus, solving would be:
> 1. Add a single delimiter char between the field values
> 2. Substract (from the Lucene Offset) the count of analyzer-=20
> specific delimiters
>    that are at the end of all field values before the match
>
> For this, someone needs to know what a delimiter for an specific =20
> analyzer is.
>
> The other possibility of course is to change the behaviour inside =20
> Lucene, because
> the current offset values are more or less useless / hard to use (I =20=

> currently have
> no idea how to get analyzer-specific delimiter chars).
>
> For me, this looks like a bug - am I wrong?
>
> Any ideas/hints/remarks? I would be very lucky about :)
>
> Greetings
>
> Christian
>
>
>
> Grant Ingersoll schrieb:
>> Hi Christian,
>>
>> Is there anyway you can post a complete, self-contained example
>> preferably as a JUnit test?  I think it would be useful to know more
>> about how you are indexing (i.e. what Analyzer, etc.)
>> The offsets should be taken from whatever is set in on the Token =20
>> during
>> Analysis.  I, too, am trying to remember where in the code this is
>> taking place
>>
>> Also, what version of Lucene are you using?
>>
>> -Grant
>>
>> On Aug 16, 2007, at 5:50 AM, duiduder@web.de wrote:
>>
>> Hello,
>>
>> I have an index with an 'actor' field, for each actor there exists an
>> single field value entry, e.g.
>>
>> stored/=20
>> compressed,indexed,tokenized,termVector,termVectorOffsets,termVectorP=20=

>> osition
>> <movie_actors>
>>
>> movie_actors:Mayrata O'Wisiedo (as Mairata O'Wisiedo)
>> movie_actors:Miguel Bos=E9
>> movie_actors:Anna Lizaran (as Ana Lizaran)
>> movie_actors:Raquel Sanch=EDs
>> movie_actors:Angelina Llongueras
>>
>> I try to get the term offset, e.g. for 'angelina' with
>>
>> termPositionVector =3D (TermPositionVector)
>> reader.getTermFreqVector(docNumber, "movie_actors");
>> int iTermIndex =3D termPositionVector.indexOf("angelina");
>> TermVectorOffsetInfo[] termOffsets =3D
>> termPositionVector.getOffsets(iTermIndex);
>>
>>
>> I get one TermVectorOffsetInfo for the field - with offset numbers
>> that are bigger than one single
>> Field entry.
>> I guessed that Lucene gives the offset number for the situation that
>> all values were concatenated,
>> which is for the single (virtual) string:
>>
>> movie_actors:Mayrata O'Wisiedo (as Mairata O'Wisiedo)Miguel Bos=E9Anna
>> Lizaran (as Ana Lizaran)Raquel Sanch=EDsAngelina Llongueras
>>
>> This fits in nearly no situation, so my second guess was that lucene
>> adds some virtual delimiters between the single
>> field entries for offset calculation. I added a delimiter, so the
>> result would be:
>>
>> movie_actors:Mayrata O'Wisiedo (as Mairata O'Wisiedo) Miguel Bos=E9 =20=

>> Anna
>> Lizaran (as Ana Lizaran) Raquel Sanch=EDs Angelina Llongueras
>> (note the ' ' between each actor name)
>>
>> ..this also fits not for each situation - there are too much
>> delimiters there now, so, further, I guessed that Lucene don't add
>> a delimiter in each situation. So I added only one when the last
>> character of an entry was no alphanumerical one, with:
>> StringBuilder strbAttContent =3D new StringBuilder();
>> for (String strAttValue : m_luceneDocument.getValues(strFieldName))
>> {
>>    strbAttContent.append(strAttValue);
>>    if(strbAttContent.substring(strbAttContent.length() -
>> 1).matches("\\w"))
>>       strbAttContent.append(' ');
>> }
>>
>> where I get the result (virtual) entry:
>> movie_actors:Mayrata O'Wisiedo (as Mairata O'Wisiedo)Miguel Bos=E9Anna
>> Lizaran (as Ana Lizaran)Raquel Sanch=EDs Angelina Llongueras
>>
>> this fits in ~96% of all my queries....but still its not 100% the way
>> lucene calculates the offset value for fields with multiple
>> value entries.
>>
>>
>> ..maybe the problem is that there are special characters inside my
>> database (e.g. the '=E9' at 'Bos=E9'), where my '\w' don't matches.
>> I have looked to this specific situation, but considering this one
>> character don't solves the problem.
>>
>>
>> How do Lucene calculates these offsets? I also searched inside the
>> source code, but can't find the correct place.
>>
>>
>> Thanks in advance!
>>
>> Christian Reuschling
>>
>>
>>
>>
>>
>> --
>> _____________________________________________________________________=20=

>> _________
>>
>> Christian Reuschling, Dipl.-Ing.(BA)
>> Software Engineer
>>
>> Knowledge Management Department
>> German Research Center for Artificial Intelligence DFKI GmbH
>> Trippstadter Stra=DFe 122, D-67663 Kaiserslautern, Germany
>>
>> Phone: +49.631.20575-125
>> mailto:reuschling@dfki.de  http://www.dfki.uni-kl.de/~reuschling/
>>
>> ------------Legal Company Information Required by German
>> Law------------------
>> Gesch=E4ftsf=FChrung: Prof. Dr. Dr. h.c. mult. Wolfgang Wahlster
>> (Vorsitzender)
>>                   Dr. Walter Olthoff
>> Vorsitzender des Aufsichtsrats: Prof. Dr. h.c. Hans A. Aukes
>> Amtsgericht Kaiserslautern, HRB 2313=3D
>> _____________________________________________________________________=20=

>> _________
>>
>>>
> - =20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>
>> --------------------------
>> Grant Ingersoll
>> http://lucene.grantingersoll.com
>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.2 (GNU/Linux)
>
> iD8DBQFGxdBkQoTr50f1tpcRAjyHAJ9jvKORu0Ciepprg70z2qOdFhmnIgCgoaYA
> nkji0oFq2UGEkh7H9YLdqbE=3D
> =3DwKe1
> -----END PGP SIGNATURE-----
> package org.dynaq.index;
>
>
>
> import static org.junit.Assert.assertTrue;
>
> import java.io.IOException;
> import java.util.LinkedList;
>
> import org.apache.lucene.analysis.Analyzer;
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
> import org.apache.lucene.index.CorruptIndexException;
> import org.apache.lucene.index.IndexReader;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.index.TermPositionVector;
> import org.apache.lucene.index.TermVectorOffsetInfo;
> import org.apache.lucene.queryParser.ParseException;
> import org.apache.lucene.queryParser.QueryParser;
> import org.apache.lucene.search.Hits;
> import org.apache.lucene.search.IndexSearcher;
> import org.apache.lucene.search.Query;
> import org.apache.lucene.search.Searcher;
> import org.apache.lucene.store.Directory;
> import org.apache.lucene.store.LockObtainFailedException;
> import org.apache.lucene.store.RAMDirectory;
> import org.junit.After;
> import org.junit.Before;
> import org.junit.Test;
>
>
>
> public class TokenizerTest
> {
>
>     IndexReader m_indexReader;
>
>     Analyzer m_analyzer =3D new StandardAnalyzer();
>
>
>     @Before
>     public void createIndex() throws CorruptIndexException, =20
> LockObtainFailedException, IOException
>     {
>         Directory ramDirectory =3D new RAMDirectory();
>
>         // we create a fist little set of actors names
>         LinkedList<String> llActorNames =3D new LinkedList<String>();
>         llActorNames.add("Mayrata O'Wisiedo (as Mairata O'Wisiedo)");
>         llActorNames.add("Miguel Bos=E9");
>         llActorNames.add("Anna Lizaran (as Ana Lizaran)");
>         llActorNames.add("Raquel Sanch=EDs");
>         llActorNames.add("Angelina Llongueras");
>
>
>         // store them into a single document with multiple values =20
> for one Field
>         Document testDoc =3D new Document();
>         for (String strActorsName : llActorNames)
>         {
>             Field testEntry =3D
>                     new Field("movie_actors", strActorsName, =20
> Field.Store.YES, Field.Index.TOKENIZED, =20
> Field.TermVector.WITH_POSITIONS_OFFSETS);
>
>             testDoc.add(testEntry);
>         }
>
>         // now we write it into the index
>         IndexWriter indexWriter =3D new IndexWriter(ramDirectory, =20
> true, m_analyzer, true);
>
>         indexWriter.addDocument(testDoc);
>         indexWriter.close();
>
>         m_indexReader =3D IndexReader.open(ramDirectory);
>     }
>
>
>
>     @Test
>     public void checkOffsetValues() throws ParseException, IOException
>     {
>
>         // first, we search for 'angelina'
>         String strSearchTerm =3D "Angelina";
>
>
>         Searcher searcher =3D new IndexSearcher(m_indexReader);
>
>         QueryParser parser =3D new QueryParser("movie_actors", =20
> m_analyzer);
>         Query query =3D parser.parse(strSearchTerm);
>
>         Hits hits =3D searcher.search(query);
>         Document resultDoc =3D hits.doc(0);
>
>         String[] straValues =3D resultDoc.getValues("movie_actors");
>
>         // now, we get the field values and build a single string =20
> value out of them
>         StringBuilder strbSimplyConcatenated =3D new StringBuilder();
>         StringBuilder strbWithDelimiters =3D new StringBuilder();
>         StringBuilder strbWithDelimitersAfterAlphaNumChar =3D new =20
> StringBuilder();
>         for (String strActorName : straValues)
>         {
>             // first situation: we simply concatenate all field =20
> value entries
>             strbSimplyConcatenated.append(strActorName);
>             // second: we add a single delimiter char between the =20
> field values
>             strbWithDelimiters.append(strActorName).append('$');
>             // third try: we add a single delimiter, but only if =20
> the last char of the actor before was a alphanum-char
>             strbWithDelimitersAfterAlphaNumChar.append(strActorName);
>             String strLastChar =3D strActorName.substring=20
> (strActorName.length() - 1, strActorName.length());
>             if(strLastChar.matches("\\w")) =20
> strbWithDelimitersAfterAlphaNumChar.append('$');
>         }
>
>
>         // this is the offset value from lucene. This should be the =20=

> place of 'angelina' in one of the concatenated value Strings above
>         TermPositionVector termPositionVector =3D =20
> (TermPositionVector) m_indexReader.getTermFreqVector(0, =20
> "movie_actors");
>         int iTermIndex =3D termPositionVector.indexOf=20
> (strSearchTerm.toLowerCase());
>         TermVectorOffsetInfo[] termOffsets =3D =20
> termPositionVector.getOffsets(iTermIndex);
>         int iStartOffset =3D termOffsets[0].getStartOffset();
>         int iEndOffset =3D termOffsets[0].getEndOffset();
>
>         //we create the substrings according to the offset value =20
> given from lucene
>         String strSubString1 =3D strbSimplyConcatenated.substring=20
> (iStartOffset, iEndOffset);
>         String strSubString2 =3D strbWithDelimiters.substring=20
> (iStartOffset, iEndOffset);
>         String strSubString3 =3D =20
> strbWithDelimitersAfterAlphaNumChar.substring(iStartOffset, =20
> iEndOffset);
>
>         System.out.println("Offset value: " + iStartOffset + "-" + =20
> iEndOffset);
>         System.out.println("simply concatenated:");
>         System.out.println(strbSimplyConcatenated);
>         System.out.println("SubString for offset: '" + =20
> strSubString1 + "'");
>         System.out.println();
>         System.out.println("with delimiters:");
>         System.out.println(strbWithDelimiters);
>         System.out.println("SubString for offset: '" + =20
> strSubString2 + "'");
>         System.out.println();
>         System.out.println("with delimiter after alphanum =20
> character:");
>         System.out.println(strbWithDelimitersAfterAlphaNumChar);
>         System.out.println("SubString for offset: '" + =20
> strSubString3 + "'");
>
>
>         //is the offset value correct for one of the concatenated =20
> strings?
>
>         //this fails for all situations
>         assertTrue(strSubString1.equals(strSearchTerm) || =20
> strSubString2.equals(strSearchTerm) || strSubString3.equals=20
> (strSearchTerm));
>
>         /*
>          * Comments: In this example, the '=E9' from 'Bos=E9' makes =20=

> that the '\w' pattern don't matches - it is recognized, unlike in
>          * StandardAnalyzer - as delimiter sign.
>          *
>          * Analysis: It seems that Lucene calculates the offset =20
> values by adding a virtual delimiter between every field value.
>          * But Lucene forgets the last characters of a field value =20
> when these are analyzer-specific delimiter values.
>          * (I seem this because of DocumentWriter, line 245: 'if=20
> (lastToken !=3D null) offset +=3D lastToken.endOffset() + 1;)'
>          * With this line of code, only the end offset of the last =20
> token is considered - by forgetting potential, trimmed delimiter
>          * chars.
>          *
>          * Thus, solving would be:
>          * 1. Add a single delimiter char between the field values
>          * 2. Substract (from the Lucene Offset) the count of =20
> analyzer-specific delimiters that are at the end of all field =20
> values before the match
>          *
>          * For this, someone needs to know what a delimiter for an =20
> specific analyzer is.
>          */
>
>
>
>     }
>
>
>
>     @After
>     public void closeIndex() throws CorruptIndexException, IOException
>     {
>         m_indexReader.close();
>     }
>
>
> }
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/
http://lucene.grantingersoll.com
http://www.paperoftheweek.com/



--Apple-Mail-13-772378864--

From java-user-return-29897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 17 21:41:02 2007
Return-Path: <java-user-return-29897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6630 invoked from network); 17 Aug 2007 21:41:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Aug 2007 21:41:02 -0000
Received: (qmail 15453 invoked by uid 500); 17 Aug 2007 21:40:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15418 invoked by uid 500); 17 Aug 2007 21:40:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15407 invoked by uid 99); 17 Aug 2007 21:40:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 14:40:53 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 21:40:52 +0000
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 123DD95A20; Fri, 17 Aug 2007 14:40:24 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id E0FEA23703
	for <java-user@lucene.apache.org>; Fri, 17 Aug 2007 14:40:23 -0700 (PDT)
Date: Fri, 17 Aug 2007 14:40:21 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: Issue with indexed tokens position
In-Reply-To: <200708171045.l7HAjZHH021469@pigeon.ciao.com>
Message-ID: <Pine.LNX.4.58.0708171437380.8718@hal.rescomp.berkeley.edu>
References: <200708171045.l7HAjZHH021469@pigeon.ciao.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: My lucene query: fieldName:"pinki i"  finds document. (see "i" in  "pinki")

i'm guessing that in this debuging output you provided...

: > indexed value: pink-I
: > Indexed tokens:1: [pink:0->5] 2: [pinki:0->5] 3: [i:5->6]
: > (ex. explanation:
: > "pink" is a term "0->5" term-position)

...that the "1" is the position of "pink", "2" is the position of "pinki",
and "3" is the position of "i" ... the numbers you are refering to as
term-positions actually look like start and end offsets.

the offsets aren't used in phrase queries -- only the positions, your
problem appears to be that you are using a non sloppy phrase query and
expecting it to match two tokens with a psotion gap of 1 between them.

you could either use sloppier queries (ie: "pink i"~2) or chnage your
analyzer so the position incriment between "pink" and "pinki" is 0




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 18 04:30:26 2007
Return-Path: <java-user-return-29898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2850 invoked from network); 18 Aug 2007 04:30:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2007 04:30:24 -0000
Received: (qmail 73294 invoked by uid 500); 18 Aug 2007 04:30:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73262 invoked by uid 500); 18 Aug 2007 04:30:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73251 invoked by uid 99); 18 Aug 2007 04:30:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 21:30:16 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Aug 2007 04:30:34 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IMFwa-0007cg-FU
	for java-user@lucene.apache.org; Fri, 17 Aug 2007 21:29:48 -0700
Message-ID: <12210481.post@talk.nabble.com>
Date: Fri, 17 Aug 2007 21:29:48 -0700 (PDT)
From: Abu Abdulla <montaqa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: formalizing a query
In-Reply-To: <46C329AB.5000000@visvo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: montaqa@gmail.com
References: <4479cfa0708092120u761b383w4655ae5dd2195e1b@mail.gmail.com> <359a92830708100633u43c96e50se5e69cec623b371a@mail.gmail.com> <4479cfa0708140242n2cee338cv44b8ea7cd1056f4c@mail.gmail.com> <46C329AB.5000000@visvo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I have done using this:

final QueryParser filterQueryParser = new QueryParser("", new
KeywordAnalyzer());
												hits = indexSearcher.search(query, new
QueryWrapperFilter(filterQueryParser.parse(filterQuery)));

where filterQuery= "(field1:query1 AND field2:query2) OR (field1:query3 AND
field2:query4)"

If there are other methods that can do it in a professional way. please
comment.

Thanks


Sagar Naik-2 wrote:
> 
> Hey,
> 
> I think u can try :
> 
> MultiFieldQueryParser.parse(String[] queries, String[] fields, 
> BooleanClause.Occur[] flags,
>       Analyzer analyzer)
> 
> The flags arrray will get u ORs and ANDs in places u need
> 
> - Sagar Naik
> 
> Abu Abdulla alhanbali wrote:
>> Thanks for the help,
>>
>> please provide the code to do that.
>>
>> I tried with this one but it didn't work:
>>
>> Query filterQuery = MultiFieldQueryParser.parse(new String{query1,
>> query2,
>> query3, query4, .... }, new String{field1, field2, field1, field2, ... },
>> new KeywordAnalyzer());
>>
>> this results in:
>>
>> field1:query1 OR field2:query2 OR
>> field1:query3 OR field2:query4 ... etc
>>
>> and NOT:
>>
>> (field1:query1 AND field2:query2) OR
>> (field1:query3 AND field2:query4) ... etc
>>
>> please help.
>>
>>
>> On 8/10/07, Erick Erickson <erickerickson@gmail.com> wrote:
>>   
>>> I *strongly* suggest you get a copy of Luke. It'll allow you to form
>>> queries
>>> and see the results and you can then answer this kind of question as
>>> well
>>> as many others.
>>>
>>> Meanwhile, please see
>>> http://lucene.apache.org/java/docs/queryparsersyntax.html
>>>
>>> Erick
>>>
>>> On 8/10/07, Abu Abdulla alhanbali <montaqa@gmail.com> wrote:
>>>     
>>>> Hi,
>>>>
>>>> I need your help in formalizing this query:
>>>>
>>>> (field1:query1 AND field2:query2) OR
>>>> (field1:query3 AND field2:query4) OR
>>>> (field1:query5 AND field2:query6) OR
>>>> (field1:query7 AND field2:query8) ... etc
>>>>
>>>> Please give the code since I'm new to lucene
>>>> how we can use MultiFieldQueryParser or any parser to do the job
>>>>
>>>> greatly appreciated
>>>>
>>>>       
>>
>>   
> 
> 
> -- 
> Always vizz it us @ visvo.com
> 
> 
> -- 
> This message has been scanned for viruses and
> dangerous content and is believed to be clean.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/formalizing-a-query-tf4246564.html#a12210481
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 18 05:34:26 2007
Return-Path: <java-user-return-29899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24360 invoked from network); 18 Aug 2007 05:34:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2007 05:34:25 -0000
Received: (qmail 97112 invoked by uid 500); 18 Aug 2007 05:34:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97072 invoked by uid 500); 18 Aug 2007 05:34:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97061 invoked by uid 99); 18 Aug 2007 05:34:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 22:34:16 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mnrz57@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Aug 2007 05:34:12 +0000
Received: by py-out-1112.google.com with SMTP id f31so2223241pyh
        for <java-user@lucene.apache.org>; Fri, 17 Aug 2007 22:33:51 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JZhdeg6KF1tjUyL7r+GYxXkQIRa8PPZ6+6kJajRGMrt7K3U2QCqfpu3ZOgFkzH5bXhF8IKHFvLbpTmE4uDIME2jIM/Vtpa/FqaQOv2rGYN+m2JBjSu28rqhCkMDi+oMb3HcYNyaOf1OZIK76Hu5TZymLMe7ebY8UI74lUuwicBs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=d4AheOFYSI43/VzE3ExMMY/kEfN7yIEb4bLtqrDzVqJsdz76pBrUOvjUoMv7Jk2LABNEK6xiF2t2Jbvo3pzQWodjJMhoo3und4x4gmsgGD1YfoQOOHVYjwxJ4jPZ4Ju9uaXVNLRC0o+9W56pSGGeH9+LC55VLb0OvkUxfeBAaMw=
Received: by 10.65.188.14 with SMTP id q14mr6619587qbp.1187415230810;
        Fri, 17 Aug 2007 22:33:50 -0700 (PDT)
Received: by 10.65.180.12 with HTTP; Fri, 17 Aug 2007 22:33:50 -0700 (PDT)
Message-ID: <34b8543c0708172233m67a6e4b7v8809af3bbfca2609@mail.gmail.com>
Date: Sat, 18 Aug 2007 09:03:50 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: query question
In-Reply-To: <12185271.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_81480_2876231.1187415230764"
References: <34b8543c0708142218u654d3da1v30002db3f3cf2b57@mail.gmail.com>
	 <3D437013-4DFF-4596-B61E-06428480BC0F@gmail.com>
	 <34b8543c0708160247g1c20a348pcb3084bf6a907e69@mail.gmail.com>
	 <12185271.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_81480_2876231.1187415230764
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

testn,

here is my code but the thing is strange is that by Luke I can't reach my
goal as well,

look, I have a field (Indexed, Tokenized and Stored) this field has a wide
variety of values from numbers to characters, I give the query
patientResult:oxalate but the result is no document (using
WhitespaceAnalyzer) but I expect to have values like Ca. Oxalate:few and Ca.
Oxalate:many

in following code, Context and Dispatcher are parts of interceptor pattern
in which I change the given values if they are number and has nothing to do
with queries with string values


public class ExtendedQueryParser extends MultiFieldQueryParser {
    private Log logger = LogFactory.getLog(ExtendedQueryParser.class);
    /**
     * if true, overrides the getRangeQuery() method and treat with dates
just like other strings, but
     * if false, everything will normally proceed just like its super class.

     */
    private boolean asString;
    private Class clazz;

    public ExtendedQueryParser(String[] fields,Analyzer analyzer,Class
clazz) {
        super(fields,analyzer);
        //this.asString = asString;
        this.clazz = clazz;
    }

    @Override
    protected org.apache.lucene.search.Query getRangeQuery(String field,
String part1, String part2, boolean inclusive) throws ParseException {
        String val1 = part1;
        String val2 = part2;
        String fieldName = field;
        try {
            Dispatcher dispatcher = Dispatcher.getInstance();
            Context c = new Context();
            c.setClazz(clazz);
            c.setFieldData(MetadataHelper.getIndexField(clazz,field));
            c.setValue(val1);
            dispatcher.beforeQuery(c);
            val1 = c.getWorkingValue();

            c.setValue(val2);
            dispatcher.beforeQuery(c);
            val2 = c.getWorkingValue();
            fieldName = c.getChangedFieldName();
            logger.debug("Query text translated to "+fieldName+":["+val1+ "
TO " + val2+"]");

        } catch (Exception e) {
            e.printStackTrace();
        }

        BooleanQuery.setMaxClauseCount(5120);//5 * 1024
        return new RangeQuery(new Term(fieldName, val1),new Term(fieldName,
val2),inclusive);
    }

    @Override
    protected org.apache.lucene.search.Query getFieldQuery(String field,
String queryText) throws ParseException {
        logger.debug("FieldQuery no slop:"+queryText);
        String val = queryText;
        String fieldName = field;
        try {
            Dispatcher dispatcher = Dispatcher.getInstance();
            Context c = new Context();
            c.setClazz(clazz);
            c.setFieldData(MetadataHelper.getIndexField(clazz,field));
            c.setValue(val);
            dispatcher.beforeQuery(c);
            val = c.getWorkingValue();
            fieldName = c.getChangedFieldName();
            logger.debug("Query text translated to "+fieldName+ ":" + val);

        } catch (Exception e) {
            e.printStackTrace();
        }

        logger.debug("TermQuery...");
        setLowercaseExpandedTerms(false);
        TermQuery termQuery = new TermQuery(new Term(fieldName, val));

        return termQuery;//(field,val);
    }

    @Override
    protected org.apache.lucene.search.Query getFuzzyQuery(String arg0,
String arg1, float arg2) throws ParseException {
        logger.debug("FuzzyQuery Text:"+arg1);
        return super.getFuzzyQuery(arg0, arg1, arg2);
    }

    @Override
    protected org.apache.lucene.search.Query getPrefixQuery(String field,
String text) throws ParseException {
        logger.debug("PrefixQuery Text:"+text);
        //PrefixQuery prefixQuery = new PrefixQuery(new Term(field,text));
        setLowercaseExpandedTerms(false);
        return super.getPrefixQuery(field,text);
    }

    @Override
    protected org.apache.lucene.search.Query getWildcardQuery(String field,
String text) throws ParseException {
        logger.debug("WildcardQuery:"+text);
        setLowercaseExpandedTerms(false);
        //WildcardQuery doesn't need to perform any translation on its
numbers
        return super.getWildcardQuery(field, text);
    }

    @Override
    protected Query getFieldQuery(String field, String queryText, int slop)
throws ParseException {
        logger.debug("PhraseQuery :"+queryText+" with slop:"+slop);
        String val = queryText;
        String fieldName = field;
        try {
            Dispatcher dispatcher = Dispatcher.getInstance();
            Context c = new Context();
            c.setClazz(clazz);
            c.setFieldData(MetadataHelper.getIndexField(clazz,field));
            c.setValue(val);
            dispatcher.beforeQuery(c);
            val = c.getWorkingValue();
            fieldName = c.getChangedFieldName();
            logger.debug("Query text translated to "+fieldName+":"+val+"");

        } catch (Exception e) {
            e.printStackTrace();
        }
        PhraseQuery phraseQuery = new PhraseQuery();
        phraseQuery.add(new Term(fieldName, val));
        phraseQuery.setSlop(slop);
        return phraseQuery;
    }


}
--------------------------

On 8/16/07, testn <test1@doramail.com> wrote:
>
>
> Can you post your code? Make sure that when you use wildcard in your
> custom
> query parser, it will generate either WildcardQuery or PrefixQuery
> correctly.
>
>
> is_maximum wrote:
> >
> > Yes karl, when I explore the index by Luke I can see the terms
> > for example I have a field namely, patientResult, it contains value "Ca.
> > Oxalate:many" and also other values such as "Ca. Oxalate:few" etc.
> >
> > the problems are when I put this query: patientResult:(Ca. Oxalate:few)
> > the result is
> > 84329 Ca. Oxalate:few
> > 112519 Ca. Oxalate:many
> > 139141 Ca. Oxalate:many
> > 394321 Ca. Oxalate:few
> > 397671 Ca. Oxalate:nod
> > 387549 Ca. Oxalate: mod
> >
> > however this is not the required result but another problem is when I
> put
> > patientResult:Oxalate or patientResult:Oxalate* no result will return!!!
> >
> > let me tell you that I am extended MultiFieldQueryParser to override its
> > methods and in getFieldQuery(...) method I return TermQuery
> >
> > I don't know what I was made wrong?
> >
> >
> >
> >
> > On 8/15/07, karl wettin <karl.wettin@gmail.com> wrote:
> >>
> >>
> >> 15 aug 2007 kl. 07.18 skrev Mohammad Norouzi:
> >>
> >> > I am using WhitespaceAnalyzer and the query is " icdCode:H* " but
> >> > there is
> >> > no result however I know that there are many documents with this
> >> > field value
> >> > such as H20, H20.5 etc.     this field is tokenized and indexed
> >> > what is
> >> > wrong with this?
> >> > when I test this query with Luke it will return no result as well.
> >>
> >> Can you also use Luke to inspect documents you know should contain
> these
> >> terms and make sure it really is in there?
> >>
> >> --
> >> karl
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
> > --
> > Regards,
> > Mohammad
> > --------------------------
> > see my blog: http://brainable.blogspot.com/
> > another in Persian: http://fekre-motefavet.blogspot.com/
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/query-question-tf4271198.html#a12185271
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/
another in Persian: http://fekre-motefavet.blogspot.com/

------=_Part_81480_2876231.1187415230764--

From java-user-return-29900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 18 06:40:31 2007
Return-Path: <java-user-return-29900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41817 invoked from network); 18 Aug 2007 06:40:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2007 06:40:30 -0000
Received: (qmail 23685 invoked by uid 500); 18 Aug 2007 06:40:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23649 invoked by uid 500); 18 Aug 2007 06:40:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23637 invoked by uid 99); 18 Aug 2007 06:40:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Aug 2007 23:40:21 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of montaqa@gmail.com designates 209.85.134.190 as permitted sender)
Received: from [209.85.134.190] (HELO mu-out-0910.google.com) (209.85.134.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Aug 2007 06:40:17 +0000
Received: by mu-out-0910.google.com with SMTP id g7so797245muf
        for <java-user@lucene.apache.org>; Fri, 17 Aug 2007 23:39:56 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=oaPOVcLtIa5O3VjUh/15wKi2HEF+v8NJleVHj1GJcgKyuvTcdVo6AGZ++IzZ2Uk4X25oFih/wHEeWZkm75n1Gu+I7drG0tKHA/s32q+i7brDwyDHuaTUTpENMw34P+h07TaSKBAGg2sT06PhHhsZeh940qVVtmDVZOkqG61GBxM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=As5zkLeMXUdYa6/CmE6CE3jwHq+eirnd7g7CK0W8qM1/RvXEXNSyHVeYFUzew7Yck+i1HBAfAyDRRvMfOYU7oP47Q/BBH1IG6JoygeRsDyA6LNIoQ4rgjS8dp5u038U7wWrSGuid/QZ6klOAWVJ38+Hcqc9Rmf447algRyjQ4VA=
Received: by 10.78.180.18 with SMTP id c18mr1234245huf.1187419195652;
        Fri, 17 Aug 2007 23:39:55 -0700 (PDT)
Received: by 10.78.129.4 with HTTP; Fri, 17 Aug 2007 23:39:55 -0700 (PDT)
Message-ID: <4479cfa0708172339u73c1dbf5ya2ac0b6f6961d9d3@mail.gmail.com>
Date: Sat, 18 Aug 2007 10:39:55 +0400
From: "Abu Abdulla alhanbali" <montaqa@gmail.com>
To: java-user@lucene.apache.org
Subject: Deleting the result from a query or a filter and not a documents specified by Term
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22642_28437632.1187419195627"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22642_28437632.1187419195627
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

Is there a way to delete the results from a query or a filter and not
documents specified by Term. I have seen some explanations here but i do not
know how to do it:

http://www.nabble.com/Batch-deletions-of-Records-from-index-tf615674.html#a1644740

Thanks in advanced

------=_Part_22642_28437632.1187419195627--

From java-user-return-29901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 18 13:40:13 2007
Return-Path: <java-user-return-29901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93238 invoked from network); 18 Aug 2007 13:40:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2007 13:40:11 -0000
Received: (qmail 48832 invoked by uid 500); 18 Aug 2007 13:40:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48791 invoked by uid 500); 18 Aug 2007 13:40:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48780 invoked by uid 99); 18 Aug 2007 13:40:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Aug 2007 06:40:01 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.188 as permitted sender)
Received: from [209.85.128.188] (HELO fk-out-0910.google.com) (209.85.128.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Aug 2007 13:39:57 +0000
Received: by fk-out-0910.google.com with SMTP id z23so735170fkz
        for <java-user@lucene.apache.org>; Sat, 18 Aug 2007 06:39:34 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=CH6ttnlra9SmpEO5uIjAK/DuqV3bDbu99tXiUEDXmyh+gFYw9m2ug6B6/opYXglYwZk7nL1XnqmDNFuRHgaXJWWQfprCax6kJ1rRWX8FIsZeQgyAEY6wH+QClvch3PbyQVR0vghLA8d0mkbmWqBZ1kEVo5lDv9U7EX+/VGew4x4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qeYDoFQaKmT9asjhiEJS/8fOtyn0UDaZZHgpZF/chSdoT/5JVmuyO23ya0J04V5/1XBbgEmGMtkreZp+KbfCc/LEckuRwl3ULqLVNlEn56H3p2mwbZ7nRc8N4qxriNaVtyr+q1K+qlHvj9X47sJ9RzHXip94M9re09Qiwr4MGYg=
Received: by 10.82.105.13 with SMTP id d13mr5474021buc.1187444374080;
        Sat, 18 Aug 2007 06:39:34 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Sat, 18 Aug 2007 06:39:34 -0700 (PDT)
Message-ID: <359a92830708180639h13508845nc515e5c5f607783b@mail.gmail.com>
Date: Sat, 18 Aug 2007 09:39:34 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: query question
In-Reply-To: <34b8543c0708172233m67a6e4b7v8809af3bbfca2609@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_65000_13299313.1187444374031"
References: <34b8543c0708142218u654d3da1v30002db3f3cf2b57@mail.gmail.com>
	 <3D437013-4DFF-4596-B61E-06428480BC0F@gmail.com>
	 <34b8543c0708160247g1c20a348pcb3084bf6a907e69@mail.gmail.com>
	 <12185271.post@talk.nabble.com>
	 <34b8543c0708172233m67a6e4b7v8809af3bbfca2609@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_65000_13299313.1187444374031
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I think you'll get much farther much faster if you concentrate on
a very simple test case for searching until you get the results you
expect.

It's particularly telling that you can't get your results from Luke.
All the rest of your code is irrelevant until you get what you expect
from Luke with a simple analyzer or with a stupid-simple bit of
test code. Until then, the rest of your code, in which bugs may
lurk, just gets in your way.

For instance.... you have colons in your term text. I believe you have
to escape these for query parsing to work correctly. You have mixed
case. Are you absolutely sure that the casing is consistent between
indexing and querying? You have other punctuation. Are you also sure
that it's not stripped by the query ananlyzers? The fragment above
doesn't show us what analyzer you use. I flat guarantee that if it's
StandardAnalyzer, lots of punctuation is stripped and the term text is
lowercased. Some innocent-seeming bit of code can mess you up in
any of these cases.

You'll get a log of mileage out of query.toString(), which shows you
exactly what the query you send to the searcher looks like. Just
copying this into Luke and playing around with it has been very helpful
to me.

I can't emphasize enough that I've been well served by simplifying the
code until it worked. Usually this results for me in a forehead-slapping
moment and after that putting the complexity back in is easy. And the
total time spent is MUCH shorter than trying to debug the complex case.

And if you only knew how many times I've said something similar to

"in following code, Context and Dispatcher are parts of interceptor pattern
in which I change the given values if they are number and has nothing to do
with queries with string values"

and been totally wrong <G>.....

Best
Erick

On 8/18/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
>
> testn,
>
> here is my code but the thing is strange is that by Luke I can't reach my
> goal as well,
>
> look, I have a field (Indexed, Tokenized and Stored) this field has a wide
> variety of values from numbers to characters, I give the query
> patientResult:oxalate but the result is no document (using
> WhitespaceAnalyzer) but I expect to have values like Ca. Oxalate:few and
> Ca.
> Oxalate:many
>
> in following code, Context and Dispatcher are parts of interceptor pattern
> in which I change the given values if they are number and has nothing to
> do
> with queries with string values
>
>
> public class ExtendedQueryParser extends MultiFieldQueryParser {
>     private Log logger = LogFactory.getLog(ExtendedQueryParser.class);
>     /**
>      * if true, overrides the getRangeQuery() method and treat with dates
> just like other strings, but
>      * if false, everything will normally proceed just like its super
> class.
>
>      */
>     private boolean asString;
>     private Class clazz;
>
>     public ExtendedQueryParser(String[] fields,Analyzer analyzer,Class
> clazz) {
>         super(fields,analyzer);
>         //this.asString = asString;
>         this.clazz = clazz;
>     }
>
>     @Override
>     protected org.apache.lucene.search.Query getRangeQuery(String field,
> String part1, String part2, boolean inclusive) throws ParseException {
>         String val1 = part1;
>         String val2 = part2;
>         String fieldName = field;
>         try {
>             Dispatcher dispatcher = Dispatcher.getInstance();
>             Context c = new Context();
>             c.setClazz(clazz);
>             c.setFieldData(MetadataHelper.getIndexField(clazz,field));
>             c.setValue(val1);
>             dispatcher.beforeQuery(c);
>             val1 = c.getWorkingValue();
>
>             c.setValue(val2);
>             dispatcher.beforeQuery(c);
>             val2 = c.getWorkingValue();
>             fieldName = c.getChangedFieldName();
>             logger.debug("Query text translated to "+fieldName+":["+val1+
> "
> TO " + val2+"]");
>
>         } catch (Exception e) {
>             e.printStackTrace();
>         }
>
>         BooleanQuery.setMaxClauseCount(5120);//5 * 1024
>         return new RangeQuery(new Term(fieldName, val1),new
> Term(fieldName,
> val2),inclusive);
>     }
>
>     @Override
>     protected org.apache.lucene.search.Query getFieldQuery(String field,
> String queryText) throws ParseException {
>         logger.debug("FieldQuery no slop:"+queryText);
>         String val = queryText;
>         String fieldName = field;
>         try {
>             Dispatcher dispatcher = Dispatcher.getInstance();
>             Context c = new Context();
>             c.setClazz(clazz);
>             c.setFieldData(MetadataHelper.getIndexField(clazz,field));
>             c.setValue(val);
>             dispatcher.beforeQuery(c);
>             val = c.getWorkingValue();
>             fieldName = c.getChangedFieldName();
>             logger.debug("Query text translated to "+fieldName+ ":" +
> val);
>
>         } catch (Exception e) {
>             e.printStackTrace();
>         }
>
>         logger.debug("TermQuery...");
>         setLowercaseExpandedTerms(false);
>         TermQuery termQuery = new TermQuery(new Term(fieldName, val));
>
>         return termQuery;//(field,val);
>     }
>
>     @Override
>     protected org.apache.lucene.search.Query getFuzzyQuery(String arg0,
> String arg1, float arg2) throws ParseException {
>         logger.debug("FuzzyQuery Text:"+arg1);
>         return super.getFuzzyQuery(arg0, arg1, arg2);
>     }
>
>     @Override
>     protected org.apache.lucene.search.Query getPrefixQuery(String field,
> String text) throws ParseException {
>         logger.debug("PrefixQuery Text:"+text);
>         //PrefixQuery prefixQuery = new PrefixQuery(new Term(field,text));
>         setLowercaseExpandedTerms(false);
>         return super.getPrefixQuery(field,text);
>     }
>
>     @Override
>     protected org.apache.lucene.search.Query getWildcardQuery(String
> field,
> String text) throws ParseException {
>         logger.debug("WildcardQuery:"+text);
>         setLowercaseExpandedTerms(false);
>         //WildcardQuery doesn't need to perform any translation on its
> numbers
>         return super.getWildcardQuery(field, text);
>     }
>
>     @Override
>     protected Query getFieldQuery(String field, String queryText, int
> slop)
> throws ParseException {
>         logger.debug("PhraseQuery :"+queryText+" with slop:"+slop);
>         String val = queryText;
>         String fieldName = field;
>         try {
>             Dispatcher dispatcher = Dispatcher.getInstance();
>             Context c = new Context();
>             c.setClazz(clazz);
>             c.setFieldData(MetadataHelper.getIndexField(clazz,field));
>             c.setValue(val);
>             dispatcher.beforeQuery(c);
>             val = c.getWorkingValue();
>             fieldName = c.getChangedFieldName();
>             logger.debug("Query text translated to
> "+fieldName+":"+val+"");
>
>         } catch (Exception e) {
>             e.printStackTrace();
>         }
>         PhraseQuery phraseQuery = new PhraseQuery();
>         phraseQuery.add(new Term(fieldName, val));
>         phraseQuery.setSlop(slop);
>         return phraseQuery;
>     }
>
>
> }
> --------------------------
>
> On 8/16/07, testn <test1@doramail.com> wrote:
> >
> >
> > Can you post your code? Make sure that when you use wildcard in your
> > custom
> > query parser, it will generate either WildcardQuery or PrefixQuery
> > correctly.
> >
> >
> > is_maximum wrote:
> > >
> > > Yes karl, when I explore the index by Luke I can see the terms
> > > for example I have a field namely, patientResult, it contains value
> "Ca.
> > > Oxalate:many" and also other values such as "Ca. Oxalate:few" etc.
> > >
> > > the problems are when I put this query: patientResult:(Ca.
> Oxalate:few)
> > > the result is
> > > 84329 Ca. Oxalate:few
> > > 112519 Ca. Oxalate:many
> > > 139141 Ca. Oxalate:many
> > > 394321 Ca. Oxalate:few
> > > 397671 Ca. Oxalate:nod
> > > 387549 Ca. Oxalate: mod
> > >
> > > however this is not the required result but another problem is when I
> > put
> > > patientResult:Oxalate or patientResult:Oxalate* no result will
> return!!!
> > >
> > > let me tell you that I am extended MultiFieldQueryParser to override
> its
> > > methods and in getFieldQuery(...) method I return TermQuery
> > >
> > > I don't know what I was made wrong?
> > >
> > >
> > >
> > >
> > > On 8/15/07, karl wettin <karl.wettin@gmail.com> wrote:
> > >>
> > >>
> > >> 15 aug 2007 kl. 07.18 skrev Mohammad Norouzi:
> > >>
> > >> > I am using WhitespaceAnalyzer and the query is " icdCode:H* " but
> > >> > there is
> > >> > no result however I know that there are many documents with this
> > >> > field value
> > >> > such as H20, H20.5 etc.     this field is tokenized and indexed
> > >> > what is
> > >> > wrong with this?
> > >> > when I test this query with Luke it will return no result as well.
> > >>
> > >> Can you also use Luke to inspect documents you know should contain
> > these
> > >> terms and make sure it really is in there?
> > >>
> > >> --
> > >> karl
> > >>
> > >> ---------------------------------------------------------------------
> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>
> > >>
> > >
> > >
> > > --
> > > Regards,
> > > Mohammad
> > > --------------------------
> > > see my blog: http://brainable.blogspot.com/
> > > another in Persian: http://fekre-motefavet.blogspot.com/
> > >
> > >
> >
> > --
> > View this message in context:
> > http://www.nabble.com/query-question-tf4271198.html#a12185271
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Regards,
> Mohammad
> --------------------------
> see my blog: http://brainable.blogspot.com/
> another in Persian: http://fekre-motefavet.blogspot.com/
>

------=_Part_65000_13299313.1187444374031--

From java-user-return-29902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 18 13:41:48 2007
Return-Path: <java-user-return-29902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93388 invoked from network); 18 Aug 2007 13:41:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Aug 2007 13:41:47 -0000
Received: (qmail 51165 invoked by uid 500); 18 Aug 2007 13:41:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51131 invoked by uid 500); 18 Aug 2007 13:41:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51120 invoked by uid 99); 18 Aug 2007 13:41:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Aug 2007 06:41:39 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.187 as permitted sender)
Received: from [209.85.128.187] (HELO fk-out-0910.google.com) (209.85.128.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Aug 2007 13:41:36 +0000
Received: by fk-out-0910.google.com with SMTP id z23so735468fkz
        for <java-user@lucene.apache.org>; Sat, 18 Aug 2007 06:41:15 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=HPGOOnTweG6Ht29aSzqsL08hvTsWCzB82C+zRTJpGYe5o5dmrITeHaRujeJzkRymuaG1Wl/p+aUQjiTlWkmxZFyYfkTmTiPoU6uLsCPzmAKBccQdgJGuarhy1xGOcUK7l6Tg8Bon0RgY80HrG4569VH+FuA0i35+iHwwJgztGr8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jVfYszCFssmQmG5G9lAoEqcTSIxWEeyo8xTodG+icSxUdJpVqklaRepab3wTMJUJvxcSjdi5coP/k8x9c2dBvKqlj6EkVJl01PwB/n0q2jSfd3SEP1k+vXhJWy5kVB2nExo5xKABjVCBxB5E3ncH44ufMf3R/3xvv6v2X6hdwg8=
Received: by 10.82.106.14 with SMTP id e14mr5448125buc.1187444474746;
        Sat, 18 Aug 2007 06:41:14 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Sat, 18 Aug 2007 06:41:14 -0700 (PDT)
Message-ID: <359a92830708180641m4e7168d2x38d7dc696ff902c4@mail.gmail.com>
Date: Sat, 18 Aug 2007 09:41:14 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Deleting the result from a query or a filter and not a documents specified by Term
In-Reply-To: <4479cfa0708172339u73c1dbf5ya2ac0b6f6961d9d3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_65016_26620973.1187444474725"
References: <4479cfa0708172339u73c1dbf5ya2ac0b6f6961d9d3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_65016_26620973.1187444474725
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I don't understand what you mean by that. Could you give a couple
of examples?

Best
Erick

On 8/18/07, Abu Abdulla alhanbali <montaqa@gmail.com> wrote:
>
> Hi,
>
> Is there a way to delete the results from a query or a filter and not
> documents specified by Term. I have seen some explanations here but i do
> not
> know how to do it:
>
>
> http://www.nabble.com/Batch-deletions-of-Records-from-index-tf615674.html#a1644740
>
> Thanks in advanced
>

------=_Part_65016_26620973.1187444474725--

From java-user-return-29903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 19 03:58:16 2007
Return-Path: <java-user-return-29903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2582 invoked from network); 19 Aug 2007 03:58:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2007 03:58:15 -0000
Received: (qmail 1144 invoked by uid 500); 19 Aug 2007 03:58:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1100 invoked by uid 500); 19 Aug 2007 03:58:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1088 invoked by uid 99); 19 Aug 2007 03:58:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Aug 2007 20:58:06 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of montaqa@gmail.com designates 209.85.134.185 as permitted sender)
Received: from [209.85.134.185] (HELO mu-out-0910.google.com) (209.85.134.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Aug 2007 03:58:03 +0000
Received: by mu-out-0910.google.com with SMTP id g7so1062483muf
        for <java-user@lucene.apache.org>; Sat, 18 Aug 2007 20:57:41 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OaAZoIhzNXEfBGUTo025rwNn+NHiKxXTsPvx3eoKrbj0xD4ed/GdcZVBHv/hxlPk729mUlug3ubDLI6WUoMLnhydp7AvXKEV5hDlyqHs/pX4zHAMrlL6L2/my1pA0fha78onqZz1KDLdHiu6/bgJQpUl+ciIxH4n0bka4Vi8K2Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mz5o8iC6gsRNwzJWee55ZXXwgM9ZYTNMbSzOUEv9rYoX3rG+TSZco4yBRX5pbOBz+I7F6KKdRvvCY6LR7vqAjvBgI8y8vdaZH+pJT+b+d9wlaT+0SOG00L1kT/BHIffM2dIrj1okvRxSLz3EFFWUeUcbPqnfMUPrB+lcmcgyURg=
Received: by 10.78.145.5 with SMTP id s5mr1435777hud.1187495861569;
        Sat, 18 Aug 2007 20:57:41 -0700 (PDT)
Received: by 10.78.129.4 with HTTP; Sat, 18 Aug 2007 20:57:41 -0700 (PDT)
Message-ID: <4479cfa0708182057y4fe6d533nebb5fa96a19d6333@mail.gmail.com>
Date: Sun, 19 Aug 2007 07:57:41 +0400
From: "Abu Abdulla alhanbali" <montaqa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Deleting the result from a query or a filter and not a documents specified by Term
In-Reply-To: <359a92830708180641m4e7168d2x38d7dc696ff902c4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26695_9446801.1187495861542"
References: <4479cfa0708172339u73c1dbf5ya2ac0b6f6961d9d3@mail.gmail.com>
	 <359a92830708180641m4e7168d2x38d7dc696ff902c4@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26695_9446801.1187495861542
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

sure.

I have this filter that has this query:

(field1:query1 AND field2:query2) OR (field1:query3 AND field2:query4)

I need to be able to delete the documents that are resulted from this query.
The normal deleting method can delete only this query (field:query) which is
resulted from:
IndexerReader.deleteDocuments(new Term(field, query));

I do not know how to do it.
Appreciate your help,


On 8/18/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> I don't understand what you mean by that. Could you give a couple
> of examples?
>
> Best
> Erick
>
> On 8/18/07, Abu Abdulla alhanbali <montaqa@gmail.com> wrote:
> >
> > Hi,
> >
> > Is there a way to delete the results from a query or a filter and not
> > documents specified by Term. I have seen some explanations here but i do
> > not
> > know how to do it:
> >
> >
> >
> http://www.nabble.com/Batch-deletions-of-Records-from-index-tf615674.html#a1644740
> >
> > Thanks in advanced
> >
>

------=_Part_26695_9446801.1187495861542--

From java-user-return-29904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 19 04:01:40 2007
Return-Path: <java-user-return-29904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3163 invoked from network); 19 Aug 2007 04:01:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2007 04:01:40 -0000
Received: (qmail 4075 invoked by uid 500); 19 Aug 2007 04:01:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4043 invoked by uid 500); 19 Aug 2007 04:01:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4032 invoked by uid 99); 19 Aug 2007 04:01:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Aug 2007 21:01:32 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Aug 2007 04:01:54 +0000
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D9A8E95A05; Sat, 18 Aug 2007 21:01:04 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id CDB6C23704
	for <java-user@lucene.apache.org>; Sat, 18 Aug 2007 21:01:04 -0700 (PDT)
Date: Sat, 18 Aug 2007 21:01:04 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Deleting the result from a query or a filter and not a documents
 specified by Term
In-Reply-To: <4479cfa0708172339u73c1dbf5ya2ac0b6f6961d9d3@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0708182058450.14063@hal.rescomp.berkeley.edu>
References: <4479cfa0708172339u73c1dbf5ya2ac0b6f6961d9d3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: Is there a way to delete the results from a query or a filter and not
: documents specified by Term. I have seen some explanations here but i do not
: know how to do it:
:
: http://www.nabble.com/Batch-deletions-of-Records-from-index-tf615674.html#a1644740

the simplest approach that will work in a general case:
  1) build you query object
  2) call rewrite on your query
  3) call extractTerms on the rewritten query
  4) iterate over all those terms and delete.

if you have Filter it's even easier...
  1) call the bits method on your filter
  2) iterate over each bit and call the delete method that takes a docid.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 19 05:52:06 2007
Return-Path: <java-user-return-29905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29001 invoked from network); 19 Aug 2007 05:52:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2007 05:52:06 -0000
Received: (qmail 35448 invoked by uid 500); 19 Aug 2007 05:51:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35409 invoked by uid 500); 19 Aug 2007 05:51:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35398 invoked by uid 99); 19 Aug 2007 05:51:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Aug 2007 22:51:57 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mnrz57@gmail.com designates 66.249.82.228 as permitted sender)
Received: from [66.249.82.228] (HELO wx-out-0506.google.com) (66.249.82.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Aug 2007 05:51:52 +0000
Received: by wx-out-0506.google.com with SMTP id i28so855002wxd
        for <java-user@lucene.apache.org>; Sat, 18 Aug 2007 22:51:32 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Oc88vLyPqTwNE3+9VwIWmeanPHiBZmNhBDxILcoUpN9zfPyJUucl1rqcZmoWDRWc4WGVzYkKZwJ7bRg9DrIkMBzx/oIE/SpQMg2Nak38Cw57Vhh0R6+C4sWfHfIp7mgr+k8ZTHfsi5d02histWfv0+ZGMaGZZSIM1SqnON9yz14=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FPrVDhCTWuRpq9wkggCT26flgIZIi968plnReOrXyyiEDltWOnJ7PkKz4wVKSMz/BVJvYnTdcDYiy70eTiFvTeorMBsepbUNCs66job1BL8czhwhqdRrWxePjZhtG0DHGSf0+42BbdZURo6y+v+MtiYFdfStPG8MNHC+DgyAWUs=
Received: by 10.90.116.6 with SMTP id o6mr1857101agc.1187502691648;
        Sat, 18 Aug 2007 22:51:31 -0700 (PDT)
Received: by 10.65.180.12 with HTTP; Sat, 18 Aug 2007 22:51:31 -0700 (PDT)
Message-ID: <34b8543c0708182251u31637ac9v692145dc95d6cc7b@mail.gmail.com>
Date: Sun, 19 Aug 2007 09:21:31 +0330
From: "Mohammad Norouzi" <mnrz57@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: query question
In-Reply-To: <359a92830708180639h13508845nc515e5c5f607783b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_86159_14844260.1187502691577"
References: <34b8543c0708142218u654d3da1v30002db3f3cf2b57@mail.gmail.com>
	 <3D437013-4DFF-4596-B61E-06428480BC0F@gmail.com>
	 <34b8543c0708160247g1c20a348pcb3084bf6a907e69@mail.gmail.com>
	 <12185271.post@talk.nabble.com>
	 <34b8543c0708172233m67a6e4b7v8809af3bbfca2609@mail.gmail.com>
	 <359a92830708180639h13508845nc515e5c5f607783b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_86159_14844260.1187502691577
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Erick,
I am using WhitespaceAnalyzer, and yes it's mixed case, in my application I
never change the entered information to lowercase because of some reasons,

the thing that I didn't consider was the punctuation in the indexes, but in
query I didn't use any punctuation.  now using Luke, when I put Ca\. (with
escaping dot) the result is 5 documents however I expect many more, the
question is do I have to remove all dots and special characters from the
indexed information while indexing?

>>And if you only knew how many times I've said something similar to ...
been totally wrong

Erick, I have to use this because we are writing an API to use object as the
source of indexes and we have to map objects to documents and vice versa,
would you tell me to make this what other way we should take?


On 8/18/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> I think you'll get much farther much faster if you concentrate on
> a very simple test case for searching until you get the results you
> expect.
>
> It's particularly telling that you can't get your results from Luke.
> All the rest of your code is irrelevant until you get what you expect
> from Luke with a simple analyzer or with a stupid-simple bit of
> test code. Until then, the rest of your code, in which bugs may
> lurk, just gets in your way.
>
> For instance.... you have colons in your term text. I believe you have
> to escape these for query parsing to work correctly. You have mixed
> case. Are you absolutely sure that the casing is consistent between
> indexing and querying? You have other punctuation. Are you also sure
> that it's not stripped by the query ananlyzers? The fragment above
> doesn't show us what analyzer you use. I flat guarantee that if it's
> StandardAnalyzer, lots of punctuation is stripped and the term text is
> lowercased. Some innocent-seeming bit of code can mess you up in
> any of these cases.
>
> You'll get a log of mileage out of query.toString(), which shows you
> exactly what the query you send to the searcher looks like. Just
> copying this into Luke and playing around with it has been very helpful
> to me.
>
> I can't emphasize enough that I've been well served by simplifying the
> code until it worked. Usually this results for me in a forehead-slapping
> moment and after that putting the complexity back in is easy. And the
> total time spent is MUCH shorter than trying to debug the complex case.
>
> And if you only knew how many times I've said something similar to
>
> "in following code, Context and Dispatcher are parts of interceptor
> pattern
> in which I change the given values if they are number and has nothing to
> do
> with queries with string values"
>
> and been totally wrong <G>.....
>
> Best
> Erick
>
> On 8/18/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> >
> > testn,
> >
> > here is my code but the thing is strange is that by Luke I can't reach
> my
> > goal as well,
> >
> > look, I have a field (Indexed, Tokenized and Stored) this field has a
> wide
> > variety of values from numbers to characters, I give the query
> > patientResult:oxalate but the result is no document (using
> > WhitespaceAnalyzer) but I expect to have values like Ca. Oxalate:few and
> > Ca.
> > Oxalate:many
> >
> > in following code, Context and Dispatcher are parts of interceptor
> pattern
> > in which I change the given values if they are number and has nothing to
> > do
> > with queries with string values
> >
> >
> > public class ExtendedQueryParser extends MultiFieldQueryParser {
> >     private Log logger = LogFactory.getLog(ExtendedQueryParser.class);
> >     /**
> >      * if true, overrides the getRangeQuery() method and treat with
> dates
> > just like other strings, but
> >      * if false, everything will normally proceed just like its super
> > class.
> >
> >      */
> >     private boolean asString;
> >     private Class clazz;
> >
> >     public ExtendedQueryParser(String[] fields,Analyzer analyzer,Class
> > clazz) {
> >         super(fields,analyzer);
> >         //this.asString = asString;
> >         this.clazz = clazz;
> >     }
> >
> >     @Override
> >     protected org.apache.lucene.search.Query getRangeQuery(String field,
> > String part1, String part2, boolean inclusive) throws ParseException {
> >         String val1 = part1;
> >         String val2 = part2;
> >         String fieldName = field;
> >         try {
> >             Dispatcher dispatcher = Dispatcher.getInstance();
> >             Context c = new Context();
> >             c.setClazz(clazz);
> >             c.setFieldData(MetadataHelper.getIndexField(clazz,field));
> >             c.setValue(val1);
> >             dispatcher.beforeQuery(c);
> >             val1 = c.getWorkingValue();
> >
> >             c.setValue(val2);
> >             dispatcher.beforeQuery(c);
> >             val2 = c.getWorkingValue();
> >             fieldName = c.getChangedFieldName();
> >             logger.debug("Query text translated to
> "+fieldName+":["+val1+
> > "
> > TO " + val2+"]");
> >
> >         } catch (Exception e) {
> >             e.printStackTrace();
> >         }
> >
> >         BooleanQuery.setMaxClauseCount(5120);//5 * 1024
> >         return new RangeQuery(new Term(fieldName, val1),new
> > Term(fieldName,
> > val2),inclusive);
> >     }
> >
> >     @Override
> >     protected org.apache.lucene.search.Query getFieldQuery(String field,
> > String queryText) throws ParseException {
> >         logger.debug("FieldQuery no slop:"+queryText);
> >         String val = queryText;
> >         String fieldName = field;
> >         try {
> >             Dispatcher dispatcher = Dispatcher.getInstance();
> >             Context c = new Context();
> >             c.setClazz(clazz);
> >             c.setFieldData(MetadataHelper.getIndexField(clazz,field));
> >             c.setValue(val);
> >             dispatcher.beforeQuery(c);
> >             val = c.getWorkingValue();
> >             fieldName = c.getChangedFieldName();
> >             logger.debug("Query text translated to "+fieldName+ ":" +
> > val);
> >
> >         } catch (Exception e) {
> >             e.printStackTrace();
> >         }
> >
> >         logger.debug("TermQuery...");
> >         setLowercaseExpandedTerms(false);
> >         TermQuery termQuery = new TermQuery(new Term(fieldName, val));
> >
> >         return termQuery;//(field,val);
> >     }
> >
> >     @Override
> >     protected org.apache.lucene.search.Query getFuzzyQuery(String arg0,
> > String arg1, float arg2) throws ParseException {
> >         logger.debug("FuzzyQuery Text:"+arg1);
> >         return super.getFuzzyQuery(arg0, arg1, arg2);
> >     }
> >
> >     @Override
> >     protected org.apache.lucene.search.Query getPrefixQuery(String
> field,
> > String text) throws ParseException {
> >         logger.debug("PrefixQuery Text:"+text);
> >         //PrefixQuery prefixQuery = new PrefixQuery(new
> Term(field,text));
> >         setLowercaseExpandedTerms(false);
> >         return super.getPrefixQuery(field,text);
> >     }
> >
> >     @Override
> >     protected org.apache.lucene.search.Query getWildcardQuery(String
> > field,
> > String text) throws ParseException {
> >         logger.debug("WildcardQuery:"+text);
> >         setLowercaseExpandedTerms(false);
> >         //WildcardQuery doesn't need to perform any translation on its
> > numbers
> >         return super.getWildcardQuery(field, text);
> >     }
> >
> >     @Override
> >     protected Query getFieldQuery(String field, String queryText, int
> > slop)
> > throws ParseException {
> >         logger.debug("PhraseQuery :"+queryText+" with slop:"+slop);
> >         String val = queryText;
> >         String fieldName = field;
> >         try {
> >             Dispatcher dispatcher = Dispatcher.getInstance();
> >             Context c = new Context();
> >             c.setClazz(clazz);
> >             c.setFieldData(MetadataHelper.getIndexField(clazz,field));
> >             c.setValue(val);
> >             dispatcher.beforeQuery(c);
> >             val = c.getWorkingValue();
> >             fieldName = c.getChangedFieldName();
> >             logger.debug("Query text translated to
> > "+fieldName+":"+val+"");
> >
> >         } catch (Exception e) {
> >             e.printStackTrace();
> >         }
> >         PhraseQuery phraseQuery = new PhraseQuery();
> >         phraseQuery.add(new Term(fieldName, val));
> >         phraseQuery.setSlop(slop);
> >         return phraseQuery;
> >     }
> >
> >
> > }
> > --------------------------
> >
> > On 8/16/07, testn <test1@doramail.com> wrote:
> > >
> > >
> > > Can you post your code? Make sure that when you use wildcard in your
> > > custom
> > > query parser, it will generate either WildcardQuery or PrefixQuery
> > > correctly.
> > >
> > >
> > > is_maximum wrote:
> > > >
> > > > Yes karl, when I explore the index by Luke I can see the terms
> > > > for example I have a field namely, patientResult, it contains value
> > "Ca.
> > > > Oxalate:many" and also other values such as "Ca. Oxalate:few" etc.
> > > >
> > > > the problems are when I put this query: patientResult:(Ca.
> > Oxalate:few)
> > > > the result is
> > > > 84329 Ca. Oxalate:few
> > > > 112519 Ca. Oxalate:many
> > > > 139141 Ca. Oxalate:many
> > > > 394321 Ca. Oxalate:few
> > > > 397671 Ca. Oxalate:nod
> > > > 387549 Ca. Oxalate: mod
> > > >
> > > > however this is not the required result but another problem is when
> I
> > > put
> > > > patientResult:Oxalate or patientResult:Oxalate* no result will
> > return!!!
> > > >
> > > > let me tell you that I am extended MultiFieldQueryParser to override
> > its
> > > > methods and in getFieldQuery(...) method I return TermQuery
> > > >
> > > > I don't know what I was made wrong?
> > > >
> > > >
> > > >
> > > >
> > > > On 8/15/07, karl wettin <karl.wettin@gmail.com> wrote:
> > > >>
> > > >>
> > > >> 15 aug 2007 kl. 07.18 skrev Mohammad Norouzi:
> > > >>
> > > >> > I am using WhitespaceAnalyzer and the query is " icdCode:H* " but
> > > >> > there is
> > > >> > no result however I know that there are many documents with this
> > > >> > field value
> > > >> > such as H20, H20.5 etc.     this field is tokenized and indexed
> > > >> > what is
> > > >> > wrong with this?
> > > >> > when I test this query with Luke it will return no result as
> well.
> > > >>
> > > >> Can you also use Luke to inspect documents you know should contain
> > > these
> > > >> terms and make sure it really is in there?
> > > >>
> > > >> --
> > > >> karl
> > > >>
> > > >>
> ---------------------------------------------------------------------
> > > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >>
> > > >>
> > > >
> > > >
> > > > --
> > > > Regards,
> > > > Mohammad
> > > > --------------------------
> > > > see my blog: http://brainable.blogspot.com/
> > > > another in Persian: http://fekre-motefavet.blogspot.com/
> > > >
> > > >
> > >
> > > --
> > > View this message in context:
> > > http://www.nabble.com/query-question-tf4271198.html#a12185271
> > > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > Regards,
> > Mohammad
> > --------------------------
> > see my blog: http://brainable.blogspot.com/
> > another in Persian: http://fekre-motefavet.blogspot.com/
> >
>



-- 
Regards,
Mohammad
--------------------------
see my blog: http://brainable.blogspot.com/
another in Persian: http://fekre-motefavet.blogspot.com/

------=_Part_86159_14844260.1187502691577--

From java-user-return-29906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 19 07:24:18 2007
Return-Path: <java-user-return-29906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46203 invoked from network); 19 Aug 2007 07:24:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2007 07:24:17 -0000
Received: (qmail 54423 invoked by uid 500); 19 Aug 2007 07:24:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54396 invoked by uid 500); 19 Aug 2007 07:24:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54384 invoked by uid 99); 19 Aug 2007 07:24:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Aug 2007 00:24:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of berlin.brown@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Aug 2007 07:24:03 +0000
Received: by wa-out-1112.google.com with SMTP id j5so446606wah
        for <java-user@lucene.apache.org>; Sun, 19 Aug 2007 00:23:42 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=eV0uivrpwPBFJTxX024wj5OBwBYONFAudZb5Kn0XpiBbRX9FzxP3qXqhRoX0zlntOWpC3bbaWkqrdJbk3CXTgYgWjsEV3OPulmCg4lLCEofW3FRNjb+jO4EGQyDWZTrCXeAKeU7BHo5M1h9aUsvqUPQQCb8Bfah/BI3UYUaJFO4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=Ddv7JZsKO1m1iING0gHLPu6uLLcxkwy8PqJqY4MRi+mNXQhw9Re9xuALoNtxWWZ0G/4fHIdZeLTuvWSEpvnWxdMiQjLnQinPIP/Tk6nrxGmtPP+CpLA8npmHwFsRveCebrBKHzdERsMc8a0wEYStwELPsTe4SP+YGOeKG+Ip+Rs=
Received: by 10.114.148.1 with SMTP id v1mr3103939wad.1187508222048;
        Sun, 19 Aug 2007 00:23:42 -0700 (PDT)
Received: by 10.114.38.4 with HTTP; Sun, 19 Aug 2007 00:23:42 -0700 (PDT)
Message-ID: <df27a55b0708190023jee74d3fk9d56a55c7ef23cc7@mail.gmail.com>
Date: Sun, 19 Aug 2007 03:23:42 -0400
From: "Berlin Brown" <berlin.brown@gmail.com>
To: java-user@lucene.apache.org
Subject: Strategy for date based searching and indexing
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

I am using the most basic lucene functionality but using against a
database.  For example, I may have a message forum and will index that
message text and message subject from the database.  But I haven't
figured out a way to index the date.  ideally, when I search I should
be able to return the most recent and the relevant searches.  Possibly
even filtering by the last couple of days or something similar.

Does anybody have an example on how they indexed a date and/or with a
record from a database.

-- 
Berlin Brown
http://www.newspiritcompany.com - newspirit technologies

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 19 07:51:34 2007
Return-Path: <java-user-return-29907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49035 invoked from network); 19 Aug 2007 07:51:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2007 07:51:33 -0000
Received: (qmail 63337 invoked by uid 500); 19 Aug 2007 07:51:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63294 invoked by uid 500); 19 Aug 2007 07:51:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63283 invoked by uid 99); 19 Aug 2007 07:51:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Aug 2007 00:51:25 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of montaqa@gmail.com designates 209.85.134.184 as permitted sender)
Received: from [209.85.134.184] (HELO mu-out-0910.google.com) (209.85.134.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Aug 2007 07:51:22 +0000
Received: by mu-out-0910.google.com with SMTP id g7so1102995muf
        for <java-user@lucene.apache.org>; Sun, 19 Aug 2007 00:51:00 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Iek9fTZvs6fMjI0xJRQI4EHlii9RAbV7pSnQL2H7N5C8AJXkwCmVvNQ/Obw13YXwcuDXcWHrc7o86awQQqgZrWsgdAtKAHXIrBBEVY2ZaDa8Dy/NFnjiUk0eogU/yAwZhn5HHzK0yOde1qWHGY1OIFTAR2TpCGSX8quuplB4HoM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bFyqe01lZDw+Y++olxHnXxqlkdmpSBp7nf5Y8LBQYHflsS3AIllS9VI7LUzftfMqS75PtpIyr3TQyovtfT8lowzrTqXhhqD/PsErrA7PBf9D1oD8FueDn9bBAxiUzXDgu0K63qsuEEMUoxg5nDh4KolXPiw6tfqEFGnzobADxGE=
Received: by 10.78.140.16 with SMTP id n16mr1468086hud.1187509860193;
        Sun, 19 Aug 2007 00:51:00 -0700 (PDT)
Received: by 10.78.129.4 with HTTP; Sun, 19 Aug 2007 00:51:00 -0700 (PDT)
Message-ID: <4479cfa0708190051w16603734m6e422fafec52fc37@mail.gmail.com>
Date: Sun, 19 Aug 2007 11:51:00 +0400
From: "Abu Abdulla alhanbali" <montaqa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Deleting the result from a query or a filter and not a documents specified by Term
In-Reply-To: <Pine.LNX.4.58.0708182058450.14063@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27495_5337581.1187509860168"
References: <4479cfa0708172339u73c1dbf5ya2ac0b6f6961d9d3@mail.gmail.com>
	 <Pine.LNX.4.58.0708182058450.14063@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27495_5337581.1187509860168
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Greatly appreciated.
It works perfect.

On 8/19/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
> : Is there a way to delete the results from a query or a filter and not
> : documents specified by Term. I have seen some explanations here but i do
> not
> : know how to do it:
> :
> :
> http://www.nabble.com/Batch-deletions-of-Records-from-index-tf615674.html#a1644740
>
> the simplest approach that will work in a general case:
>   1) build you query object
>   2) call rewrite on your query
>   3) call extractTerms on the rewritten query
>   4) iterate over all those terms and delete.
>
> if you have Filter it's even easier...
>   1) call the bits method on your filter
>   2) iterate over each bit and call the delete method that takes a docid.
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_27495_5337581.1187509860168--

From java-user-return-29908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 19 15:11:59 2007
Return-Path: <java-user-return-29908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69537 invoked from network); 19 Aug 2007 15:11:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2007 15:11:58 -0000
Received: (qmail 27415 invoked by uid 500); 19 Aug 2007 15:11:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27374 invoked by uid 500); 19 Aug 2007 15:11:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27363 invoked by uid 99); 19 Aug 2007 15:11:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Aug 2007 08:11:49 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a16.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Aug 2007 15:11:35 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a16.dreamhost.com (Postfix) with ESMTP id 03CF37CDFB
	for <java-user@lucene.apache.org>; Sun, 19 Aug 2007 08:11:09 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <df27a55b0708190023jee74d3fk9d56a55c7ef23cc7@mail.gmail.com>
References: <df27a55b0708190023jee74d3fk9d56a55c7ef23cc7@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7BF0F790-3E22-4287-AF0F-852213176AC2@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Strategy for date based searching and indexing
Date: Sun, 19 Aug 2007 11:10:46 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Have a look at the DateTools utility class.   Also, the Wiki has some  
HOWTOs on Dates: http://wiki.apache.org/lucene-java/HowTo

Search this archive for Date handling, plus I believe the Lucene In  
Action book covers dates as well, although it might be a bit dated.

Lucene also comes with sort functionality that can handle dates.   
Have a look at the search API methods that pass in a Sort object.

-Grant

On Aug 19, 2007, at 3:23 AM, Berlin Brown wrote:

> I am using the most basic lucene functionality but using against a
> database.  For example, I may have a message forum and will index that
> message text and message subject from the database.  But I haven't
> figured out a way to index the date.  ideally, when I search I should
> be able to return the most recent and the relevant searches.  Possibly
> even filtering by the last couple of days or something similar.
>
> Does anybody have an example on how they indexed a date and/or with a
> record from a database.
>
> -- 
> Berlin Brown
> http://www.newspiritcompany.com - newspirit technologies
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 19 15:15:33 2007
Return-Path: <java-user-return-29909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75201 invoked from network); 19 Aug 2007 15:15:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2007 15:15:31 -0000
Received: (qmail 29978 invoked by uid 500); 19 Aug 2007 15:15:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29933 invoked by uid 500); 19 Aug 2007 15:15:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29922 invoked by uid 99); 19 Aug 2007 15:15:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Aug 2007 08:15:21 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.185 as permitted sender)
Received: from [209.85.128.185] (HELO fk-out-0910.google.com) (209.85.128.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Aug 2007 15:15:17 +0000
Received: by fk-out-0910.google.com with SMTP id z23so971188fkz
        for <java-user@lucene.apache.org>; Sun, 19 Aug 2007 08:14:55 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DUc2ydx5wFP814W+XuX0yTwGDKqCeyMRiN1AIIos7/DVgWekda2v/lWIkku+5Hg37Syo+C/sEPRM1MDKQJ1HPT3AttJfBoqiO/e1Rnhu1mI5x1GPtKs8289P6xtqSSij6OaEzGeQaS9iN5UMZsq9MWz+lDUJkXfGj4/3+5Nbwig=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QgavjGnEHdsBVLXlJP7FfYYOiOPExyqvi9fRxh+IXvkCnA63izV1U0XmCMbwMZzaoAzKKITvBpDF8/AFpb0/WmS5DTRouNo9JKobWljMXdWe8fzEKeWHK8Rdggn8sI7E5aZ8m/ZcpGAwTb5MEaJVuXlfCRPVJgbzOIa6OhB5yyM=
Received: by 10.82.106.14 with SMTP id e14mr6131733buc.1187536494598;
        Sun, 19 Aug 2007 08:14:54 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Sun, 19 Aug 2007 08:14:54 -0700 (PDT)
Message-ID: <359a92830708190814j27d9702t9fb3bb270882f43@mail.gmail.com>
Date: Sun, 19 Aug 2007 11:14:54 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: query question
In-Reply-To: <34b8543c0708182251u31637ac9v692145dc95d6cc7b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_69270_23620591.1187536494552"
References: <34b8543c0708142218u654d3da1v30002db3f3cf2b57@mail.gmail.com>
	 <3D437013-4DFF-4596-B61E-06428480BC0F@gmail.com>
	 <34b8543c0708160247g1c20a348pcb3084bf6a907e69@mail.gmail.com>
	 <12185271.post@talk.nabble.com>
	 <34b8543c0708172233m67a6e4b7v8809af3bbfca2609@mail.gmail.com>
	 <359a92830708180639h13508845nc515e5c5f607783b@mail.gmail.com>
	 <34b8543c0708182251u31637ac9v692145dc95d6cc7b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_69270_23620591.1187536494552
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Mohammad:

See below....

On 8/19/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
>
> Erick,
> I am using WhitespaceAnalyzer, and yes it's mixed case, in my application
> I
> never change the entered information to lowercase because of some reasons,


I've found it waaaaaay easier to index things two different ways
rather than have to endlessly worry about case and special
characters. Especially since whatever you do will be wrong some
of the time. For instance, if you do index with case, "ca" wouldn't
match "Ca". And if I search for "ca" I'd get a  (potentially)
completely different set of responses than searching for "Ca",
which would confuse the users and result in endless bug reports.

Indexing the same data twice, once for search and once for
display isn't, I believe, any more expensive than indexing AND
storing the data. That is, say I'm indexing the text "This is some
text". I just add two fields to the doc, one stored but not indexed
and one indexed but not stored.

doc.add("field_search", "This is some text", Field.Store.NO,
        Field.Index.TOKENIZED);
doc.add("field_display", "This is some text", Field.Store.YES,
        Field.Index.NO);

With the appropriate analyzer and/or pre-processing, field_search
will be transformed into a "canonical" form, but the field_display
will be exactly what was entered, capitalization, punctuation,
etc. all in place.

I believe that this consumes pretty much the same resources
as indexing into a single field Field.Store.YES,
Field.Index.TOKENIZED. This makes your search behavior much
simpler. You "canonicalize" your  searchable
field. For instance, remove all punctuation, lowercase it, fold
characters perhaps (see below). My point here is that at *both*
index and search time, I "massage" the data to provide a better
user experience. Not to mention have to field fewer "Why didn't
my search return..... questions <G>.

But I still have my field_display which contains exactly what
was originally entered when I need it.

Of course I don't know whether this works for you, since your
problem space undoubtedly has its own constraints, but it's
something you should consider if possible.


BELOW: <G>> Folding: I have an English based application that
nevertheless has a very few foreign-language books. By folding all the
accented characters into their low-ASCII counterparts for indexing
and searching, but *displaying* the original text in the results, users
get what they expect.

the thing that I didn't consider was the punctuation in the indexes, but in
> query I didn't use any punctuation.  now using Luke, when I put Ca\. (with
> escaping dot) the result is 5 documents however I expect many more, the
> question is do I have to remove all dots and special characters from the
> indexed information while indexing?


See above. But I'd *start* by assuming that your searchable
fields should have all the extraneous stuff removed at *both*
index and search time. Which is pretty easy if you use the
same analyzer for the searchable fields during both operations.


>>And if you only knew how many times I've said something similar to ...
> been totally wrong
>
> Erick, I have to use this because we are writing an API to use object as
> the
> source of indexes and we have to map objects to documents and vice versa,
> would you tell me to make this what other way we should take?


What I was recommending is NOT that you do things a
different way in your *finished* application, but rather that
you simplify your use of Lucene, perhaps in a test or pilot
project, until you get the results you expect from indexing
and searching. Only when you start getting what you expect
from the simple cases should you try to get fancy.

Until then, my experience has been that I'm never sure
whether my problems are in my code or just that
I don't understand how the tool works.....

Best
Erick


On 8/18/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > I think you'll get much farther much faster if you concentrate on
> > a very simple test case for searching until you get the results you
> > expect.
> >
> > It's particularly telling that you can't get your results from Luke.
> > All the rest of your code is irrelevant until you get what you expect
> > from Luke with a simple analyzer or with a stupid-simple bit of
> > test code. Until then, the rest of your code, in which bugs may
> > lurk, just gets in your way.
> >
> > For instance.... you have colons in your term text. I believe you have
> > to escape these for query parsing to work correctly. You have mixed
> > case. Are you absolutely sure that the casing is consistent between
> > indexing and querying? You have other punctuation. Are you also sure
> > that it's not stripped by the query ananlyzers? The fragment above
> > doesn't show us what analyzer you use. I flat guarantee that if it's
> > StandardAnalyzer, lots of punctuation is stripped and the term text is
> > lowercased. Some innocent-seeming bit of code can mess you up in
> > any of these cases.
> >
> > You'll get a log of mileage out of query.toString(), which shows you
> > exactly what the query you send to the searcher looks like. Just
> > copying this into Luke and playing around with it has been very helpful
> > to me.
> >
> > I can't emphasize enough that I've been well served by simplifying the
> > code until it worked. Usually this results for me in a forehead-slapping
> > moment and after that putting the complexity back in is easy. And the
> > total time spent is MUCH shorter than trying to debug the complex case.
> >
> > And if you only knew how many times I've said something similar to
> >
> > "in following code, Context and Dispatcher are parts of interceptor
> > pattern
> > in which I change the given values if they are number and has nothing to
> > do
> > with queries with string values"
> >
> > and been totally wrong <G>.....
> >
> > Best
> > Erick
> >
> > On 8/18/07, Mohammad Norouzi <mnrz57@gmail.com> wrote:
> > >
> > > testn,
> > >
> > > here is my code but the thing is strange is that by Luke I can't reach
> > my
> > > goal as well,
> > >
> > > look, I have a field (Indexed, Tokenized and Stored) this field has a
> > wide
> > > variety of values from numbers to characters, I give the query
> > > patientResult:oxalate but the result is no document (using
> > > WhitespaceAnalyzer) but I expect to have values like Ca. Oxalate:few
> and
> > > Ca.
> > > Oxalate:many
> > >
> > > in following code, Context and Dispatcher are parts of interceptor
> > pattern
> > > in which I change the given values if they are number and has nothing
> to
> > > do
> > > with queries with string values
> > >
> > >
> > > public class ExtendedQueryParser extends MultiFieldQueryParser {
> > >     private Log logger = LogFactory.getLog(ExtendedQueryParser.class);
> > >     /**
> > >      * if true, overrides the getRangeQuery() method and treat with
> > dates
> > > just like other strings, but
> > >      * if false, everything will normally proceed just like its super
> > > class.
> > >
> > >      */
> > >     private boolean asString;
> > >     private Class clazz;
> > >
> > >     public ExtendedQueryParser(String[] fields,Analyzer analyzer,Class
> > > clazz) {
> > >         super(fields,analyzer);
> > >         //this.asString = asString;
> > >         this.clazz = clazz;
> > >     }
> > >
> > >     @Override
> > >     protected org.apache.lucene.search.Query getRangeQuery(String
> field,
> > > String part1, String part2, boolean inclusive) throws ParseException {
> > >         String val1 = part1;
> > >         String val2 = part2;
> > >         String fieldName = field;
> > >         try {
> > >             Dispatcher dispatcher = Dispatcher.getInstance();
> > >             Context c = new Context();
> > >             c.setClazz(clazz);
> > >             c.setFieldData(MetadataHelper.getIndexField(clazz,field));
> > >             c.setValue(val1);
> > >             dispatcher.beforeQuery(c);
> > >             val1 = c.getWorkingValue();
> > >
> > >             c.setValue(val2);
> > >             dispatcher.beforeQuery(c);
> > >             val2 = c.getWorkingValue();
> > >             fieldName = c.getChangedFieldName();
> > >             logger.debug("Query text translated to
> > "+fieldName+":["+val1+
> > > "
> > > TO " + val2+"]");
> > >
> > >         } catch (Exception e) {
> > >             e.printStackTrace();
> > >         }
> > >
> > >         BooleanQuery.setMaxClauseCount(5120);//5 * 1024
> > >         return new RangeQuery(new Term(fieldName, val1),new
> > > Term(fieldName,
> > > val2),inclusive);
> > >     }
> > >
> > >     @Override
> > >     protected org.apache.lucene.search.Query getFieldQuery(String
> field,
> > > String queryText) throws ParseException {
> > >         logger.debug("FieldQuery no slop:"+queryText);
> > >         String val = queryText;
> > >         String fieldName = field;
> > >         try {
> > >             Dispatcher dispatcher = Dispatcher.getInstance();
> > >             Context c = new Context();
> > >             c.setClazz(clazz);
> > >             c.setFieldData(MetadataHelper.getIndexField(clazz,field));
> > >             c.setValue(val);
> > >             dispatcher.beforeQuery(c);
> > >             val = c.getWorkingValue();
> > >             fieldName = c.getChangedFieldName();
> > >             logger.debug("Query text translated to "+fieldName+ ":" +
> > > val);
> > >
> > >         } catch (Exception e) {
> > >             e.printStackTrace();
> > >         }
> > >
> > >         logger.debug("TermQuery...");
> > >         setLowercaseExpandedTerms(false);
> > >         TermQuery termQuery = new TermQuery(new Term(fieldName, val));
> > >
> > >         return termQuery;//(field,val);
> > >     }
> > >
> > >     @Override
> > >     protected org.apache.lucene.search.Query getFuzzyQuery(String
> arg0,
> > > String arg1, float arg2) throws ParseException {
> > >         logger.debug("FuzzyQuery Text:"+arg1);
> > >         return super.getFuzzyQuery(arg0, arg1, arg2);
> > >     }
> > >
> > >     @Override
> > >     protected org.apache.lucene.search.Query getPrefixQuery(String
> > field,
> > > String text) throws ParseException {
> > >         logger.debug("PrefixQuery Text:"+text);
> > >         //PrefixQuery prefixQuery = new PrefixQuery(new
> > Term(field,text));
> > >         setLowercaseExpandedTerms(false);
> > >         return super.getPrefixQuery(field,text);
> > >     }
> > >
> > >     @Override
> > >     protected org.apache.lucene.search.Query getWildcardQuery(String
> > > field,
> > > String text) throws ParseException {
> > >         logger.debug("WildcardQuery:"+text);
> > >         setLowercaseExpandedTerms(false);
> > >         //WildcardQuery doesn't need to perform any translation on its
> > > numbers
> > >         return super.getWildcardQuery(field, text);
> > >     }
> > >
> > >     @Override
> > >     protected Query getFieldQuery(String field, String queryText, int
> > > slop)
> > > throws ParseException {
> > >         logger.debug("PhraseQuery :"+queryText+" with slop:"+slop);
> > >         String val = queryText;
> > >         String fieldName = field;
> > >         try {
> > >             Dispatcher dispatcher = Dispatcher.getInstance();
> > >             Context c = new Context();
> > >             c.setClazz(clazz);
> > >             c.setFieldData(MetadataHelper.getIndexField(clazz,field));
> > >             c.setValue(val);
> > >             dispatcher.beforeQuery(c);
> > >             val = c.getWorkingValue();
> > >             fieldName = c.getChangedFieldName();
> > >             logger.debug("Query text translated to
> > > "+fieldName+":"+val+"");
> > >
> > >         } catch (Exception e) {
> > >             e.printStackTrace();
> > >         }
> > >         PhraseQuery phraseQuery = new PhraseQuery();
> > >         phraseQuery.add(new Term(fieldName, val));
> > >         phraseQuery.setSlop(slop);
> > >         return phraseQuery;
> > >     }
> > >
> > >
> > > }
> > > --------------------------
> > >
> > > On 8/16/07, testn <test1@doramail.com> wrote:
> > > >
> > > >
> > > > Can you post your code? Make sure that when you use wildcard in your
> > > > custom
> > > > query parser, it will generate either WildcardQuery or PrefixQuery
> > > > correctly.
> > > >
> > > >
> > > > is_maximum wrote:
> > > > >
> > > > > Yes karl, when I explore the index by Luke I can see the terms
> > > > > for example I have a field namely, patientResult, it contains
> value
> > > "Ca.
> > > > > Oxalate:many" and also other values such as "Ca. Oxalate:few" etc.
> > > > >
> > > > > the problems are when I put this query: patientResult:(Ca.
> > > Oxalate:few)
> > > > > the result is
> > > > > 84329 Ca. Oxalate:few
> > > > > 112519 Ca. Oxalate:many
> > > > > 139141 Ca. Oxalate:many
> > > > > 394321 Ca. Oxalate:few
> > > > > 397671 Ca. Oxalate:nod
> > > > > 387549 Ca. Oxalate: mod
> > > > >
> > > > > however this is not the required result but another problem is
> when
> > I
> > > > put
> > > > > patientResult:Oxalate or patientResult:Oxalate* no result will
> > > return!!!
> > > > >
> > > > > let me tell you that I am extended MultiFieldQueryParser to
> override
> > > its
> > > > > methods and in getFieldQuery(...) method I return TermQuery
> > > > >
> > > > > I don't know what I was made wrong?
> > > > >
> > > > >
> > > > >
> > > > >
> > > > > On 8/15/07, karl wettin <karl.wettin@gmail.com> wrote:
> > > > >>
> > > > >>
> > > > >> 15 aug 2007 kl. 07.18 skrev Mohammad Norouzi:
> > > > >>
> > > > >> > I am using WhitespaceAnalyzer and the query is " icdCode:H* "
> but
> > > > >> > there is
> > > > >> > no result however I know that there are many documents with
> this
> > > > >> > field value
> > > > >> > such as H20, H20.5 etc.     this field is tokenized and indexed
> > > > >> > what is
> > > > >> > wrong with this?
> > > > >> > when I test this query with Luke it will return no result as
> > well.
> > > > >>
> > > > >> Can you also use Luke to inspect documents you know should
> contain
> > > > these
> > > > >> terms and make sure it really is in there?
> > > > >>
> > > > >> --
> > > > >> karl
> > > > >>
> > > > >>
> > ---------------------------------------------------------------------
> > > > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > > > >>
> > > > >>
> > > > >
> > > > >
> > > > > --
> > > > > Regards,
> > > > > Mohammad
> > > > > --------------------------
> > > > > see my blog: http://brainable.blogspot.com/
> > > > > another in Persian: http://fekre-motefavet.blogspot.com/
> > > > >
> > > > >
> > > >
> > > > --
> > > > View this message in context:
> > > > http://www.nabble.com/query-question-tf4271198.html#a12185271
> > > > Sent from the Lucene - Java Users mailing list archive at Nabble.com
> .
> > > >
> > > >
> > > >
> ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > >
> > > --
> > > Regards,
> > > Mohammad
> > > --------------------------
> > > see my blog: http://brainable.blogspot.com/
> > > another in Persian: http://fekre-motefavet.blogspot.com/
> > >
> >
>
>
>
> --
> Regards,
> Mohammad
> --------------------------
> see my blog: http://brainable.blogspot.com/
> another in Persian: http://fekre-motefavet.blogspot.com/
>

------=_Part_69270_23620591.1187536494552--

From java-user-return-29910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 19 17:12:07 2007
Return-Path: <java-user-return-29910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20471 invoked from network); 19 Aug 2007 17:12:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Aug 2007 17:12:05 -0000
Received: (qmail 29045 invoked by uid 500); 19 Aug 2007 17:11:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29013 invoked by uid 500); 19 Aug 2007 17:11:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29002 invoked by uid 99); 19 Aug 2007 17:11:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Aug 2007 10:11:55 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.185 as permitted sender)
Received: from [209.85.128.185] (HELO fk-out-0910.google.com) (209.85.128.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Aug 2007 17:11:44 +0000
Received: by fk-out-0910.google.com with SMTP id z23so989269fkz
        for <java-user@lucene.apache.org>; Sun, 19 Aug 2007 10:11:20 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=HeNOOxbFWSwoXUKFLjA6r8lwPKFaAS8G/Z2H/uoC5dkhBN0dCMwtOVw4T4hcdexfdwqZ/4zRQKSCu9HVFLugbYvYDvy2JGEDnVbin3u2hQ/ydH49am1q0/MfAkNWtTQjTlBCw0PNif2OcFCjk7Iva18+AQCmq8ubCY1c6h/lfeQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=BrdxRhWyc9tGqtfS6Xte1POP6kjDww5Cs0ebUMB3jjIX29rAxOB2XbtU6IWWDmZvzeHnycDN2qiadKi+VqsvlvwBZDvbN2uva5NK9qNsMVi/UllrZNXILWnjJNJPkEx6pOQb0MLtXA0C2uN9Z2W50zzFF2/fD6XUIYATQQcph18=
Received: by 10.82.174.20 with SMTP id w20mr6168057bue.1187543480118;
        Sun, 19 Aug 2007 10:11:20 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Sun, 19 Aug 2007 10:11:20 -0700 (PDT)
Message-ID: <359a92830708191011k1844fa7fr80f738f1485ca282@mail.gmail.com>
Date: Sun, 19 Aug 2007 13:11:20 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Deleting the result from a query or a filter and not a documents specified by Term
In-Reply-To: <Pine.LNX.4.58.0708182058450.14063@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_69726_20675886.1187543480095"
References: <4479cfa0708172339u73c1dbf5ya2ac0b6f6961d9d3@mail.gmail.com>
	 <Pine.LNX.4.58.0708182058450.14063@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_69726_20675886.1187543480095
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Chris:

I didn't understand how your first solution would work,
 so I tried it. The terms I extracted from the rewritten
query were just the four raw terms, i.e.

field1:query1
field1:query3
field2:query2
field2:query4.

So iterating over and deleting them term by term wouldn't
preserve the sense of the original query
(field1:query1 AND field2:query2) OR (field1:query3 AND field2:query4)
and would delete (presumably) more documents than just
the documents matching the query.

So what am I missing?

Thanks
Erick



On 8/19/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
> : Is there a way to delete the results from a query or a filter and not
> : documents specified by Term. I have seen some explanations here but i do
> not
> : know how to do it:
> :
> :
> http://www.nabble.com/Batch-deletions-of-Records-from-index-tf615674.html#a1644740
>
> the simplest approach that will work in a general case:
>   1) build you query object
>   2) call rewrite on your query
>   3) call extractTerms on the rewritten query
>   4) iterate over all those terms and delete.
>
> if you have Filter it's even easier...
>   1) call the bits method on your filter
>   2) iterate over each bit and call the delete method that takes a docid.
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_69726_20675886.1187543480095--

From java-user-return-29911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 20 02:46:46 2007
Return-Path: <java-user-return-29911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53670 invoked from network); 20 Aug 2007 02:46:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Aug 2007 02:46:45 -0000
Received: (qmail 14867 invoked by uid 500); 20 Aug 2007 02:46:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14830 invoked by uid 500); 20 Aug 2007 02:46:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14817 invoked by uid 99); 20 Aug 2007 02:46:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Aug 2007 19:46:36 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 80.76.149.212 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.212] (HELO ch-smtp01.sth.basefarm.net) (80.76.149.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Aug 2007 02:46:34 +0000
Received: from c83-249-118-113.bredband.comhem.se ([83.249.118.113]:50567 helo=[192.168.2.101])
	by ch-smtp01.sth.basefarm.net with esmtp (Exim 4.66)
	(envelope-from <karl.wettin@gmail.com>)
	id 1IMxHQ-0001xz-69
	for java-user@lucene.apache.org; Mon, 20 Aug 2007 04:46:13 +0200
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Transfer-Encoding: 7bit
Message-Id: <10E30051-CF4A-4F72-98BA-375487059F60@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: karl wettin <karl.wettin@gmail.com>
Subject: Lockless read-only deletions in IndexReader?
Date: Mon, 20 Aug 2007 04:40:55 +0200
X-Mailer: Apple Mail (2.752.3)
X-Originating-IP: 83.249.118.113
X-Scan-Result: No virus found in message 1IMxHQ-0001xz-69.
X-Scan-Signature: ch-smtp01.sth.basefarm.net 1IMxHQ-0001xz-69 f9b842bc3cf25417b31ab26c02faff41
X-Virus-Checked: Checked by ClamAV on apache.org

I want to set documents in my IndexReader as deleted, but I will  
never commit these deletions. Sort of a filter on a reader rather  
than on a searcher, and no write-locks.

Can I do that out of the box?

Perhaps I can pass down a IndexDeletionPolicy to my IndexWriter that  
ignores deletions from the IndexReader(s) to avoid the lock?

Changing the directory lock factory it will effect the IndexWriter  
locks too? So that would not be an option, or?

I could go hacking in IndexReader, definalizing it for decoration of  
deleteDocument(int), or something like that, but would really prefere  
not to.


This is for a transactional layer on top of Lucene, where I combine  
the system index with a transactional index. Updated documents that  
are represented in the transaction index must be filtered out from  
the system index at IndexReader level without creating write-locks.  
undeleteAll() would be an option if there was no locks -- more than  
one transaction could be updating documents at the same time.


-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 20 03:20:16 2007
Return-Path: <java-user-return-29912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58878 invoked from network); 20 Aug 2007 03:20:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Aug 2007 03:20:15 -0000
Received: (qmail 37923 invoked by uid 500); 20 Aug 2007 03:20:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37892 invoked by uid 500); 20 Aug 2007 03:20:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37881 invoked by uid 99); 20 Aug 2007 03:20:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Aug 2007 20:20:06 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Aug 2007 03:20:01 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IMxno-0005qT-RW
	for java-user@lucene.apache.org; Sun, 19 Aug 2007 20:19:40 -0700
Message-ID: <12229492.post@talk.nabble.com>
Date: Sun, 19 Aug 2007 20:19:40 -0700 (PDT)
From: Lokeya <lokeya@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Document Similarities lucene(particularly using doc id's)
In-Reply-To: <F0232E47-90C5-4024-9B3C-2813550BE649@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: lokeya@gmail.com
References: <12186723.post@talk.nabble.com> <F0232E47-90C5-4024-9B3C-2813550BE649@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

Thanks for your reply.

I can use the getTermFreqVector() on Index Reader and get it. But I am
wondering whats the API which has to be used to find the similarity between
2 such vectors which would give a score (doc-doc similairty in  essence). 

Thanks.



Grant Ingersoll-6 wrote:
> 
> Hi,
> 
> 
> On Aug 16, 2007, at 2:20 PM, Lokeya wrote:
> 
>>
>> Hi All,
>>
>> I have the following set up: a) Indexed set of docs. b) Ran 1st  
>> query and
>> got tops docs  c) Fetched the id's from that and stored in a data  
>> structure.
>> d) Ran 2nd query , got top docs , fetched id's and stored in a data
>> structure.
>>
>> Now i have 2 sets of doc ids (set 1) and (set 1).
>>
>> I want to find out the document content similarity between these 2  
>> sets(just
>> using doc ids information which i have).
>>
> 
> Not sure what you mean here.  What do the doc ids have to do with the  
> content?
> 
>> Qn 1: Is it possible using any lucene api's. In that case can you  
>> point me
>> to the appropriate API's. I did a search at
>> :http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/ 
>> javadoc/index.html
>> But couldn't find anything.
>>
> 
> It is possible if you use Term Vectors (see  
> IndexReader.getTermFreqVector).  You will need to store (when you  
> construct your Field) and load the term vectors and then calculate  
> the similarity.  A common way of doing this is by calculating the  
> cosine of the angle between the two vectors.
> 
> -Grant
> 
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
> 
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Document-Similarities-lucene%28particularly-using-doc-id%27s%29-tf4281286.html#a12229492
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 20 04:11:13 2007
Return-Path: <java-user-return-29913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65440 invoked from network); 20 Aug 2007 04:11:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Aug 2007 04:11:11 -0000
Received: (qmail 76634 invoked by uid 500); 20 Aug 2007 04:11:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76586 invoked by uid 500); 20 Aug 2007 04:11:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76575 invoked by uid 99); 20 Aug 2007 04:11:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Aug 2007 21:11:02 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 80.76.149.213 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.213] (HELO ch-smtp02.sth.basefarm.net) (80.76.149.213)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Aug 2007 04:11:29 +0000
Received: from c83-249-118-113.bredband.comhem.se ([83.249.118.113]:50987 helo=[192.168.2.101])
	by ch-smtp02.sth.basefarm.net with esmtp (Exim 4.66)
	(envelope-from <karl.wettin@gmail.com>)
	id 1IMyb6-0008Mh-6r
	for java-user@lucene.apache.org; Mon, 20 Aug 2007 06:10:38 +0200
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <12229492.post@talk.nabble.com>
References: <12186723.post@talk.nabble.com> <F0232E47-90C5-4024-9B3C-2813550BE649@apache.org> <12229492.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6561329E-C8CD-43D3-BE55-E98E0BE6634F@gmail.com>
Content-Transfer-Encoding: 7bit
From: Karl Wettin <karl.wettin@gmail.com>
Subject: Re: Document Similarities lucene(particularly using doc id's)
Date: Mon, 20 Aug 2007 06:05:20 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Originating-IP: 83.249.118.113
X-Scan-Result: No virus found in message 1IMyb6-0008Mh-6r.
X-Scan-Signature: ch-smtp02.sth.basefarm.net 1IMyb6-0008Mh-6r 12b8f4ef15d8728acaca6f53698983b2
X-Virus-Checked: Checked by ClamAV on apache.org


20 aug 2007 kl. 05.19 skrev Lokeya:
> Grant Ingersoll-6 wrote:
>> On Aug 16, 2007, at 2:20 PM, Lokeya wrote:
>>> I want to find out the document content similarity

>> A common way of doing this is by calculating the cosine of the angle
>> between the two vectors.

> I can use the getTermFreqVector() on Index Reader and get it. But I am
> wondering whats the API which has to be used to find the similarity  
> between
> 2 such vectors which would give a score (doc-doc similairty in   
> essence).

Bob Carpenter wrote an article on the subject for "Lucene in Action".  
He also
works on LingPipe, a semi-free peice of software that might be  
helpful if
your Greek kung fu is too weak.

<http://www.alias-i.com/lingpipe/docs/api/com/aliasi/spell/ 
TfIdfDistance.html>



-- 
karl





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 20 07:01:42 2007
Return-Path: <java-user-return-29914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24225 invoked from network); 20 Aug 2007 07:01:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Aug 2007 07:01:41 -0000
Received: (qmail 48102 invoked by uid 500); 20 Aug 2007 07:01:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47138 invoked by uid 500); 20 Aug 2007 07:01:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47127 invoked by uid 99); 20 Aug 2007 07:01:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Aug 2007 00:01:31 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [131.246.120.220] (HELO mailgw1.uni-kl.de) (131.246.120.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Aug 2007 07:01:54 +0000
Received: from dfki-1002.dfki.uni-kl.de (dfki-1002.dfki.uni-kl.de [131.246.195.2])
	by mailgw1.uni-kl.de (8.13.8/8.13.8/Debian-3) with ESMTP id l7K70qCV023575
	for <java-user@lucene.apache.org>; Mon, 20 Aug 2007 09:00:52 +0200
Received: from serv-4100.kl.dfki.de (serv-4100.kl.dfki.de [192.168.41.180])
	by dfki-1002.dfki.uni-kl.de (8.13.8+Sun/8.11.4) with ESMTP id l7K70lTa008773
	for <java-user@lucene.apache.org>; Mon, 20 Aug 2007 09:00:47 +0200 (CEST)
Received: from [192.168.41.166] (pc-4176 [192.168.41.166])
	by serv-4100.kl.dfki.de (8.13.8+Sun/8.13.8) with ESMTP id l7K710fe001455
	for <java-user@lucene.apache.org>; Mon, 20 Aug 2007 09:01:00 +0200 (CEST)
Message-ID: <46C93C2B.7070803@web.de>
Date: Mon, 20 Aug 2007 09:00:59 +0200
From: duiduder@web.de
User-Agent: Thunderbird 1.5.0.8 (X11/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: getting term offset information for fields with multiple value
 entiries
References: <46C41DD7.3020507@web.de> <F0A1B877-B56F-4BAF-BE41-1D9092AC7BE4@apache.org> <46C5D064.1050407@web.de> <C33DE6A4-5702-4177-84D4-D38ADE5EC471@gmail.com>
In-Reply-To: <C33DE6A4-5702-4177-84D4-D38ADE5EC471@gmail.com>
X-Enigmail-Version: 0.94.0.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

this is the 2.2.0 release




Grant Ingersoll schrieb:
> What version of Lucene are you using?
> 
> 
> On Aug 17, 2007, at 12:44 PM, duiduder@web.de wrote:
> 
> Hello community, dear Grant
> 
> I have build a JUnit test case that illustrates the problem - there, I
> try to cut
> out the right substring with the offset values given from Lucene - and
> fail :(
> 
> A few remarks:
> 
> In this example, the '' from 'Bos' makes that the '\w' pattern don't
> matches -
> it is recognized, unlike in StandardAnalyzer - as delimiter sign.
> 
> Analysis: It seems that Lucene calculates the offset values by adding
> a virtual
> delimiter between every field value.
> But Lucene forgets the last characters of a field value when these are
> analyzer-specific delimiter values. (I seem this because of
> DocumentWriter, line
> 245: 'if(lastToken != null) offset += lastToken.endOffset() + 1;)'
> With this line of code, only the end offset of the last token is
> considered - by
> forgetting potential, trimmed delimiter chars.
> 
> Thus, solving would be:
> 1. Add a single delimiter char between the field values
> 2. Substract (from the Lucene Offset) the count of analyzer-specific
> delimiters
>    that are at the end of all field values before the match
> 
> For this, someone needs to know what a delimiter for an specific
> analyzer is.
> 
> The other possibility of course is to change the behaviour inside
> Lucene, because
> the current offset values are more or less useless / hard to use (I
> currently have
> no idea how to get analyzer-specific delimiter chars).
> 
> For me, this looks like a bug - am I wrong?
> 
> Any ideas/hints/remarks? I would be very lucky about :)
> 
> Greetings
> 
> Christian
> 
> 
> 
> Grant Ingersoll schrieb:
>>>> Hi Christian,
>>>>
>>>> Is there anyway you can post a complete, self-contained example
>>>> preferably as a JUnit test?  I think it would be useful to know more
>>>> about how you are indexing (i.e. what Analyzer, etc.)
>>>> The offsets should be taken from whatever is set in on the Token during
>>>> Analysis.  I, too, am trying to remember where in the code this is
>>>> taking place
>>>>
>>>> Also, what version of Lucene are you using?
>>>>
>>>> -Grant
>>>>
>>>> On Aug 16, 2007, at 5:50 AM, duiduder@web.de wrote:
>>>>
>>>> Hello,
>>>>
>>>> I have an index with an 'actor' field, for each actor there exists an
>>>> single field value entry, e.g.
>>>>
>>>> stored/compressed,indexed,tokenized,termVector,termVectorOffsets,termVectorPosition
>>>>
>>>> <movie_actors>
>>>>
>>>> movie_actors:Mayrata O'Wisiedo (as Mairata O'Wisiedo)
>>>> movie_actors:Miguel Bos
>>>> movie_actors:Anna Lizaran (as Ana Lizaran)
>>>> movie_actors:Raquel Sanchs
>>>> movie_actors:Angelina Llongueras
>>>>
>>>> I try to get the term offset, e.g. for 'angelina' with
>>>>
>>>> termPositionVector = (TermPositionVector)
>>>> reader.getTermFreqVector(docNumber, "movie_actors");
>>>> int iTermIndex = termPositionVector.indexOf("angelina");
>>>> TermVectorOffsetInfo[] termOffsets =
>>>> termPositionVector.getOffsets(iTermIndex);
>>>>
>>>>
>>>> I get one TermVectorOffsetInfo for the field - with offset numbers
>>>> that are bigger than one single
>>>> Field entry.
>>>> I guessed that Lucene gives the offset number for the situation that
>>>> all values were concatenated,
>>>> which is for the single (virtual) string:
>>>>
>>>> movie_actors:Mayrata O'Wisiedo (as Mairata O'Wisiedo)Miguel BosAnna
>>>> Lizaran (as Ana Lizaran)Raquel SanchsAngelina Llongueras
>>>>
>>>> This fits in nearly no situation, so my second guess was that lucene
>>>> adds some virtual delimiters between the single
>>>> field entries for offset calculation. I added a delimiter, so the
>>>> result would be:
>>>>
>>>> movie_actors:Mayrata O'Wisiedo (as Mairata O'Wisiedo) Miguel Bos Anna
>>>> Lizaran (as Ana Lizaran) Raquel Sanchs Angelina Llongueras
>>>> (note the ' ' between each actor name)
>>>>
>>>> ..this also fits not for each situation - there are too much
>>>> delimiters there now, so, further, I guessed that Lucene don't add
>>>> a delimiter in each situation. So I added only one when the last
>>>> character of an entry was no alphanumerical one, with:
>>>> StringBuilder strbAttContent = new StringBuilder();
>>>> for (String strAttValue : m_luceneDocument.getValues(strFieldName))
>>>> {
>>>>    strbAttContent.append(strAttValue);
>>>>    if(strbAttContent.substring(strbAttContent.length() -
>>>> 1).matches("\\w"))
>>>>       strbAttContent.append(' ');
>>>> }
>>>>
>>>> where I get the result (virtual) entry:
>>>> movie_actors:Mayrata O'Wisiedo (as Mairata O'Wisiedo)Miguel BosAnna
>>>> Lizaran (as Ana Lizaran)Raquel Sanchs Angelina Llongueras
>>>>
>>>> this fits in ~96% of all my queries....but still its not 100% the way
>>>> lucene calculates the offset value for fields with multiple
>>>> value entries.
>>>>
>>>>
>>>> ..maybe the problem is that there are special characters inside my
>>>> database (e.g. the '' at 'Bos'), where my '\w' don't matches.
>>>> I have looked to this specific situation, but considering this one
>>>> character don't solves the problem.
>>>>
>>>>
>>>> How do Lucene calculates these offsets? I also searched inside the
>>>> source code, but can't find the correct place.
>>>>
>>>>
>>>> Thanks in advance!
>>>>
>>>> Christian Reuschling
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> -- 
>>>> ______________________________________________________________________________
>>>>
>>>>
>>>> Christian Reuschling, Dipl.-Ing.(BA)
>>>> Software Engineer
>>>>
>>>> Knowledge Management Department
>>>> German Research Center for Artificial Intelligence DFKI GmbH
>>>> Trippstadter Strae 122, D-67663 Kaiserslautern, Germany
>>>>
>>>> Phone: +49.631.20575-125
>>>> mailto:reuschling@dfki.de  http://www.dfki.uni-kl.de/~reuschling/
>>>>
>>>> ------------Legal Company Information Required by German
>>>> Law------------------
>>>> Geschftsfhrung: Prof. Dr. Dr. h.c. mult. Wolfgang Wahlster
>>>> (Vorsitzender)
>>>>                   Dr. Walter Olthoff
>>>> Vorsitzender des Aufsichtsrats: Prof. Dr. h.c. Hans A. Aukes
>>>> Amtsgericht Kaiserslautern, HRB 2313=
>>>> ______________________________________________________________________________
>>>>
>>>>
>>>>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
> 
>>>> --------------------------
>>>> Grant Ingersoll
>>>> http://lucene.grantingersoll.com
> 
>>>> Lucene Helpful Hints:
>>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>>> http://wiki.apache.org/lucene-java/LuceneFAQ
> 
> 
> 
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
package org.dynaq.index;
>>
>>
>>
import static org.junit.Assert.assertTrue;
>>
import java.io.IOException;
import java.util.LinkedList;
>>
import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.CorruptIndexException;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.TermPositionVector;
import org.apache.lucene.index.TermVectorOffsetInfo;
import org.apache.lucene.queryParser.ParseException;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.search.Hits;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.Searcher;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.LockObtainFailedException;
import org.apache.lucene.store.RAMDirectory;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;
>>
>>
>>
public class TokenizerTest
{
>>
    IndexReader m_indexReader;
>>
    Analyzer m_analyzer = new StandardAnalyzer();
>>
>>
    @Before
    public void createIndex() throws CorruptIndexException,
LockObtainFailedException, IOException
    {
        Directory ramDirectory = new RAMDirectory();
>>
        // we create a fist little set of actors names
        LinkedList<String> llActorNames = new LinkedList<String>();
        llActorNames.add("Mayrata O'Wisiedo (as Mairata O'Wisiedo)");
        llActorNames.add("Miguel Bos");
        llActorNames.add("Anna Lizaran (as Ana Lizaran)");
        llActorNames.add("Raquel Sanchs");
        llActorNames.add("Angelina Llongueras");
>>
>>
        // store them into a single document with multiple values for
one Field
        Document testDoc = new Document();
        for (String strActorsName : llActorNames)
        {
            Field testEntry =
                    new Field("movie_actors", strActorsName,
Field.Store.YES, Field.Index.TOKENIZED,
Field.TermVector.WITH_POSITIONS_OFFSETS);
>>
            testDoc.add(testEntry);
        }
>>
        // now we write it into the index
        IndexWriter indexWriter = new IndexWriter(ramDirectory, true,
m_analyzer, true);
>>
        indexWriter.addDocument(testDoc);
        indexWriter.close();
>>
        m_indexReader = IndexReader.open(ramDirectory);
    }
>>
>>
>>
    @Test
    public void checkOffsetValues() throws ParseException, IOException
    {
>>
        // first, we search for 'angelina'
        String strSearchTerm = "Angelina";
>>
>>
        Searcher searcher = new IndexSearcher(m_indexReader);
>>
        QueryParser parser = new QueryParser("movie_actors", m_analyzer);
        Query query = parser.parse(strSearchTerm);
>>
        Hits hits = searcher.search(query);
        Document resultDoc = hits.doc(0);
>>
        String[] straValues = resultDoc.getValues("movie_actors");
>>
        // now, we get the field values and build a single string
value out of them
        StringBuilder strbSimplyConcatenated = new StringBuilder();
        StringBuilder strbWithDelimiters = new StringBuilder();
        StringBuilder strbWithDelimitersAfterAlphaNumChar = new
StringBuilder();
        for (String strActorName : straValues)
        {
            // first situation: we simply concatenate all field value
entries
            strbSimplyConcatenated.append(strActorName);
            // second: we add a single delimiter char between the
field values
            strbWithDelimiters.append(strActorName).append('$');
            // third try: we add a single delimiter, but only if the
last char of the actor before was a alphanum-char
            strbWithDelimitersAfterAlphaNumChar.append(strActorName);
            String strLastChar =
strActorName.substring(strActorName.length() - 1, strActorName.length());
            if(strLastChar.matches("\\w"))
strbWithDelimitersAfterAlphaNumChar.append('$');
        }
>>
>>
        // this is the offset value from lucene. This should be the
place of 'angelina' in one of the concatenated value Strings above
        TermPositionVector termPositionVector = (TermPositionVector)
m_indexReader.getTermFreqVector(0, "movie_actors");
        int iTermIndex =
termPositionVector.indexOf(strSearchTerm.toLowerCase());
        TermVectorOffsetInfo[] termOffsets =
termPositionVector.getOffsets(iTermIndex);
        int iStartOffset = termOffsets[0].getStartOffset();
        int iEndOffset = termOffsets[0].getEndOffset();
>>
        //we create the substrings according to the offset value given
from lucene
        String strSubString1 =
strbSimplyConcatenated.substring(iStartOffset, iEndOffset);
        String strSubString2 =
strbWithDelimiters.substring(iStartOffset, iEndOffset);
        String strSubString3 =
strbWithDelimitersAfterAlphaNumChar.substring(iStartOffset, iEndOffset);
>>
        System.out.println("Offset value: " + iStartOffset + "-" +
iEndOffset);
        System.out.println("simply concatenated:");
        System.out.println(strbSimplyConcatenated);
        System.out.println("SubString for offset: '" + strSubString1 +
"'");
        System.out.println();
        System.out.println("with delimiters:");
        System.out.println(strbWithDelimiters);
        System.out.println("SubString for offset: '" + strSubString2 +
"'");
        System.out.println();
        System.out.println("with delimiter after alphanum character:");
        System.out.println(strbWithDelimitersAfterAlphaNumChar);
        System.out.println("SubString for offset: '" + strSubString3 +
"'");
>>
>>
        //is the offset value correct for one of the concatenated
strings?
>>
        //this fails for all situations
        assertTrue(strSubString1.equals(strSearchTerm) ||
strSubString2.equals(strSearchTerm) ||
strSubString3.equals(strSearchTerm));
>>
        /*
         * Comments: In this example, the '' from 'Bos' makes that
the '\w' pattern don't matches - it is recognized, unlike in
         * StandardAnalyzer - as delimiter sign.
         *
         * Analysis: It seems that Lucene calculates the offset values
by adding a virtual delimiter between every field value.
         * But Lucene forgets the last characters of a field value
when these are analyzer-specific delimiter values.
         * (I seem this because of DocumentWriter, line 245:
'if(lastToken != null) offset += lastToken.endOffset() + 1;)'
         * With this line of code, only the end offset of the last
token is considered - by forgetting potential, trimmed delimiter
         * chars.
         *
         * Thus, solving would be:
         * 1. Add a single delimiter char between the field values
         * 2. Substract (from the Lucene Offset) the count of
analyzer-specific delimiters that are at the end of all field values
before the match
         *
         * For this, someone needs to know what a delimiter for an
specific analyzer is.
         */
>>
>>
>>
    }
>>
>>
>>
    @After
    public void closeIndex() throws CorruptIndexException, IOException
    {
        m_indexReader.close();
    }
>>
>>
}
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
- ---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

> ------------------------------------------------------
> Grant Ingersoll
> http://www.grantingersoll.com/
> http://lucene.grantingersoll.com
> http://www.paperoftheweek.com/



-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 (GNU/Linux)

iD8DBQFGyTwrQoTr50f1tpcRAs+gAJ9Z+dTK2ikiZRtO3jKzG2kG9bImxgCdGjkl
zSLVw6GYrdFGZUa+YN+QzEc=
=kHZv
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 20 10:48:34 2007
Return-Path: <java-user-return-29915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10613 invoked from network); 20 Aug 2007 10:48:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Aug 2007 10:48:32 -0000
Received: (qmail 95926 invoked by uid 500); 20 Aug 2007 10:48:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95887 invoked by uid 500); 20 Aug 2007 10:48:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95876 invoked by uid 99); 20 Aug 2007 10:48:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Aug 2007 03:48:24 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a1.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Aug 2007 10:48:45 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a1.g.dreamhost.com (Postfix) with ESMTP id 60428FF23D
	for <java-user@lucene.apache.org>; Mon, 20 Aug 2007 03:47:51 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <12229492.post@talk.nabble.com>
References: <12186723.post@talk.nabble.com> <F0232E47-90C5-4024-9B3C-2813550BE649@apache.org> <12229492.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D7EDBC82-043E-44B7-AC55-53E87629C3E9@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Document Similarities lucene(particularly using doc id's)
Date: Mon, 20 Aug 2007 06:47:27 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

You would have write it, as it doesn't exist in Lucene (but could be  
a useful contribution).  The easiest version is probably the cosine  
similarity, described at http://en.wikipedia.org/wiki/Vector_space_model

Essentially, you have two vectors, and you need to calculate the  
cosine of the angle between them.  Then you can do this for each one  
in your set.

What is the bigger goal you are trying to get at?  What do you need  
the similarity score for?  Do you need to compare every item in set 1  
against every item in set 2?

On Aug 19, 2007, at 11:19 PM, Lokeya wrote:

>
> Hi,
>
> Thanks for your reply.
>
> I can use the getTermFreqVector() on Index Reader and get it. But I am
> wondering whats the API which has to be used to find the similarity  
> between
> 2 such vectors which would give a score (doc-doc similairty in   
> essence).
>
> Thanks.
>
>
>
> Grant Ingersoll-6 wrote:
>>
>> Hi,
>>
>>
>> On Aug 16, 2007, at 2:20 PM, Lokeya wrote:
>>
>>>
>>> Hi All,
>>>
>>> I have the following set up: a) Indexed set of docs. b) Ran 1st
>>> query and
>>> got tops docs  c) Fetched the id's from that and stored in a data
>>> structure.
>>> d) Ran 2nd query , got top docs , fetched id's and stored in a data
>>> structure.
>>>
>>> Now i have 2 sets of doc ids (set 1) and (set 1).
>>>
>>> I want to find out the document content similarity between these 2
>>> sets(just
>>> using doc ids information which i have).
>>>
>>
>> Not sure what you mean here.  What do the doc ids have to do with the
>> content?
>>
>>> Qn 1: Is it possible using any lucene api's. In that case can you
>>> point me
>>> to the appropriate API's. I did a search at
>>> :http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/
>>> javadoc/index.html
>>> But couldn't find anything.
>>>
>>
>> It is possible if you use Term Vectors (see
>> IndexReader.getTermFreqVector).  You will need to store (when you
>> construct your Field) and load the term vectors and then calculate
>> the similarity.  A common way of doing this is by calculating the
>> cosine of the angle between the two vectors.
>>
>> -Grant
>>
>> --------------------------
>> Grant Ingersoll
>> http://lucene.grantingersoll.com
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/Document- 
> Similarities-lucene%28particularly-using-doc-id%27s%29- 
> tf4281286.html#a12229492
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 20 11:27:29 2007
Return-Path: <java-user-return-29916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35854 invoked from network); 20 Aug 2007 11:27:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Aug 2007 11:27:28 -0000
Received: (qmail 57496 invoked by uid 500); 20 Aug 2007 11:27:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57433 invoked by uid 500); 20 Aug 2007 11:27:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57336 invoked by uid 99); 20 Aug 2007 11:27:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Aug 2007 04:27:12 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of srinivas.apache@gmail.com designates 66.249.90.181 as permitted sender)
Received: from [66.249.90.181] (HELO ik-out-1112.google.com) (66.249.90.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Aug 2007 11:27:08 +0000
Received: by ik-out-1112.google.com with SMTP id b32so160993ika
        for <java-user@lucene.apache.org>; Mon, 20 Aug 2007 04:26:47 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:cc:mime-version:content-type;
        b=qsey6CbGuot4N4OOBc42dfzJZ9CmU4//EcTC3daLPXwmUkd2t4WklT75r3A7UWH6Lua72k1PoESv0nKc3B9czPH4tA66GUrqMRScgPx5SgZy76z8ATwgwOFeVZ8DiP8SaF3456C2lYUFvFFsd4R7vznBjTRX91Nssuf5CXGxj5o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:cc:mime-version:content-type;
        b=sl8p2SEvSBFdTCKy6XPexzt+XIg7duCYAIcK+khjUrw9ezUX67pLZkODMtYJlFEu8EXUxlEw6FU++JzWWgAyjOVtj64M3G4R7A4Nn+JNfjDijDBzLxqiMDqntV4KNYNn98/dVvqrip19B/VNEhNY5X3yoAXegYWWU2SNfNH5rlM=
Received: by 10.78.193.5 with SMTP id q5mr1904818huf.1187609207336;
        Mon, 20 Aug 2007 04:26:47 -0700 (PDT)
Received: by 10.78.182.11 with HTTP; Mon, 20 Aug 2007 04:26:47 -0700 (PDT)
Message-ID: <b0ba206a0708200426o3017c6fepd619f97a5f935cae@mail.gmail.com>
Date: Mon, 20 Aug 2007 16:56:47 +0530
From: "Srinivasarao Vundavalli" <srinivas.apache@gmail.com>
To: nutch-agent@lucene.apache.org
Subject: Nutch Plugin
Cc: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_51185_29854167.1187609207320"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_51185_29854167.1187609207320
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello all,
             What should i do to write a plugin, that extends "QueryFiltes"
and which uses the search results for the given query, to expand the query.

------=_Part_51185_29854167.1187609207320--

From java-user-return-29917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 20 12:34:22 2007
Return-Path: <java-user-return-29917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71104 invoked from network); 20 Aug 2007 12:34:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Aug 2007 12:34:21 -0000
Received: (qmail 73815 invoked by uid 500); 20 Aug 2007 12:34:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73778 invoked by uid 500); 20 Aug 2007 12:34:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73767 invoked by uid 99); 20 Aug 2007 12:34:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Aug 2007 05:34:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Aug 2007 12:34:39 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id BFE78192AE
	for <java-user@lucene.apache.org>; Mon, 20 Aug 2007 08:33:46 -0400 (EDT)
Received: from web6.messagingengine.com ([10.202.2.215])
  by compute1.internal (MEProxy); Mon, 20 Aug 2007 08:33:46 -0400
Received: by web6.messagingengine.com (Postfix, from userid 99)
	id A11EC1B60; Mon, 20 Aug 2007 08:33:46 -0400 (EDT)
Message-Id: <1187613226.27279.1206273727@webmail.messagingengine.com>
X-Sasl-Enc: xQa5QbH4AC/5S9zlQqcLK3bP0fCczSDJ3yRbhy4LTw2n 1187613226
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <10E30051-CF4A-4F72-98BA-375487059F60@gmail.com>
Subject: Re: Lockless read-only deletions in IndexReader?
In-Reply-To: <10E30051-CF4A-4F72-98BA-375487059F60@gmail.com>
Date: Mon, 20 Aug 2007 08:33:46 -0400
X-Virus-Checked: Checked by ClamAV on apache.org


"karl wettin" <karl.wettin@gmail.com> wrote:

> I want to set documents in my IndexReader as deleted, but I will
> never commit these deletions. Sort of a filter on a reader rather
> than on a searcher, and no write-locks.

> Perhaps I can pass down a IndexDeletionPolicy to my IndexWriter that
> ignores deletions from the IndexReader(s) to avoid the lock?

I don't think this will easily work.  The IndexDeletionPolicy just has
control on which commits should be deleted.  So if you open a reader,
do deletes, and close it, a new commit (segments_N+1) is created.

You could have your deletion policy at this point preserve the
previous commit, but then there's no way to tell IndexWriter on
opening the index to open the previous commit (it always opens the
most recent commit).

I guess if IndexWriter/IndexReader could open old commits, and if your
app could separately keep track of which commits should be ignored
(because they were from readers), then you could do it?

The problem is the reader will still write the commit into the
directory on close...

> Changing the directory lock factory it will effect the IndexWriter
> locks too? So that would not be an option, or?

Could you just use a NullLockFactory on the reader?  This way when you
do deletes in the reader and it acquires a write lock it doesn't in
fact acquire the write lock (as seen by IndexWriter which would
presumably be using a "real" LockFactory)?

But, the reader will still write into the directory and stomp on any
IndexWriter that was also committing ....

> I could go hacking in IndexReader, definalizing it for decoration of
> deleteDocument(int), or something like that, but would really
> prefere not to.

Yeah I think it may just be cleanest to modify IndexReader to not
acquire the write lock nor commit its changes to the Directory on
close.

> This is for a transactional layer on top of Lucene, where I combine
> the system index with a transactional index. Updated documents that
> are represented in the transaction index must be filtered out from
> the system index at IndexReader level without creating
> write-locks. undeleteAll() would be an option if there was no locks
> -- more than one transaction could be updating documents at the same
> time.

Sounds wild!

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 20 14:00:08 2007
Return-Path: <java-user-return-29918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18492 invoked from network); 20 Aug 2007 14:00:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Aug 2007 14:00:05 -0000
Received: (qmail 39030 invoked by uid 500); 20 Aug 2007 13:59:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38990 invoked by uid 500); 20 Aug 2007 13:59:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38979 invoked by uid 99); 20 Aug 2007 13:59:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Aug 2007 06:59:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ramana.jelda@ciao-group.com designates 194.97.158.185 as permitted sender)
Received: from [194.97.158.185] (HELO pigeon.ciao.com) (194.97.158.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Aug 2007 13:59:51 +0000
Received: from Jelda (gateway.ciao.com [194.221.9.215])
	by pigeon.ciao.com (8.13.3/8.13.3) with ESMTP id l7KDxPII051694
	for <java-user@lucene.apache.org>; Mon, 20 Aug 2007 15:59:25 +0200 (CEST)
	(envelope-from ramana.jelda@ciao-group.com)
Message-Id: <200708201359.l7KDxPII051694@pigeon.ciao.com>
From: "Ramana Jelda" <ramana.jelda@ciao-group.com>
To: <java-user@lucene.apache.org>
Subject: RE: Issue with indexed tokens position
Date: Mon, 20 Aug 2007 15:59:20 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <Pine.LNX.4.58.0708171437380.8718@hal.rescomp.berkeley.edu>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028
Thread-Index: AcfhF1IGAxyFYHb5QCi2e/dM01bhLgCGNmcQ
X-Scanned-By: MIMEDefang 2.61 on 194.97.158.185
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Hoss & Erick,
Thx for your responses.
I found the bug in my code. It is not something todo with positions (As I
said in my first mail, I was using right position increments) and also
nothing to do with offsets. Offsets are just ignored, only useful for
Highlighter perhaps. Anyway I am not interested in Highlighting at the
moment.

The problem was order of the filters I use in my Analyzer. It is strange
anyhow. 

Thx a lot again,

Greetings
Jelda

> -----Original Message-----
> From: Chris Hostetter [mailto:hossman_lucene@fucit.org] 
> Sent: Friday, August 17, 2007 11:40 PM
> To: java-user@lucene.apache.org
> Subject: RE: Issue with indexed tokens position
> 
> 
> : My lucene query: fieldName:"pinki i"  finds document. (see 
> "i" in  "pinki")
> 
> i'm guessing that in this debuging output you provided...
> 
> : > indexed value: pink-I
> : > Indexed tokens:1: [pink:0->5] 2: [pinki:0->5] 3: [i:5->6]
> : > (ex. explanation:
> : > "pink" is a term "0->5" term-position)
> 
> ...that the "1" is the position of "pink", "2" is the 
> position of "pinki", and "3" is the position of "i" ... the 
> numbers you are refering to as term-positions actually look 
> like start and end offsets.
> 
> the offsets aren't used in phrase queries -- only the 
> positions, your problem appears to be that you are using a 
> non sloppy phrase query and expecting it to match two tokens 
> with a psotion gap of 1 between them.
> 
> you could either use sloppier queries (ie: "pink i"~2) or 
> chnage your analyzer so the position incriment between "pink" 
> and "pinki" is 0
> 
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 20 14:18:20 2007
Return-Path: <java-user-return-29919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26946 invoked from network); 20 Aug 2007 14:18:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Aug 2007 14:18:19 -0000
Received: (qmail 77971 invoked by uid 500); 20 Aug 2007 14:18:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77937 invoked by uid 500); 20 Aug 2007 14:18:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77925 invoked by uid 99); 20 Aug 2007 14:18:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Aug 2007 07:18:07 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [131.246.120.220] (HELO mailgw1.uni-kl.de) (131.246.120.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Aug 2007 14:18:00 +0000
Received: from dfki-1002.dfki.uni-kl.de (dfki-1002.dfki.uni-kl.de [131.246.195.2])
	by mailgw1.uni-kl.de (8.13.8/8.13.8/Debian-3) with ESMTP id l7KEHRU2021698
	for <java-user@lucene.apache.org>; Mon, 20 Aug 2007 16:17:27 +0200
Received: from serv-4100.kl.dfki.de (serv-4100.kl.dfki.de [192.168.41.180])
	by dfki-1002.dfki.uni-kl.de (8.13.8+Sun/8.11.4) with ESMTP id l7KEHLeG013921
	for <java-user@lucene.apache.org>; Mon, 20 Aug 2007 16:17:21 +0200 (CEST)
Received: from [192.168.41.166] (pc-4176 [192.168.41.166])
	by serv-4100.kl.dfki.de (8.13.8+Sun/8.13.8) with ESMTP id l7KEHY85024922
	for <java-user@lucene.apache.org>; Mon, 20 Aug 2007 16:17:34 +0200 (CEST)
Message-ID: <46C9A27E.7080005@web.de>
Date: Mon, 20 Aug 2007 16:17:34 +0200
From: duiduder@web.de
User-Agent: Thunderbird 1.5.0.8 (X11/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: getting term offset information for fields with multiple value
 entiries
References: <46C41DD7.3020507@web.de> <F0A1B877-B56F-4BAF-BE41-1D9092AC7BE4@apache.org> <46C5D064.1050407@web.de> <C33DE6A4-5702-4177-84D4-D38ADE5EC471@gmail.com>
In-Reply-To: <C33DE6A4-5702-4177-84D4-D38ADE5EC471@gmail.com>
X-Enigmail-Version: 0.94.0.0
Content-Type: multipart/mixed;
 boundary="------------060307050207020204020703"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------060307050207020204020703
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hello Grant, dear community

I have written some lines of code to adapt the offset values from Lucene to
values where the terms really appear in the concatenated field value entries.

My tests are successful :)

There are two additional methods inside the test:
1. calculateLuceneOffsetDiffs(String strFieldName, Document document2highlight, Analyzer analyzer)
2. adaptLuceneOffset(int luceneOffset, LinkedHashMap<Integer, Integer> hsEndOffset2EndDelimiterCount)

For calculating, I use the analyzer for the specific field, and concatenate the
values with a single (whitespace) delimiter in between.

It really looks like that Lucene forgets possibly trimmed delimiter chars at the
end of field values in order to calculate the offsets. The delimiter chars are
analyzer specific - thus I need the analyzer to calculate the corrections.

Lucene offsets are too low by forgetting these values- so I calculate the count
of delimiter chars that are before a given Lucene offset, and add them.

Hope this helps - maybe this behaviour is still known? I haven't found comments
on it, but I know that the origin highlighter from Lucene-contrib don't deals
with multiple field entries (at least a version from last year) - maybe this
behaviour was the reason.

greetings

Christian



- --
______________________________________________________________________________
Christian Reuschling, Dipl.-Ing.(BA)
Software Engineer

Knowledge Management Department
German Research Center for Artificial Intelligence DFKI GmbH
Trippstadter Strae 122, D-67663 Kaiserslautern, Germany

Phone: +49.631.20575-125
mailto:reuschling@dfki.de  http://www.dfki.uni-kl.de/~reuschling/

- ------------Legal Company Information Required by German Law------------------
Geschftsfhrung: Prof. Dr. Dr. h.c. mult. Wolfgang Wahlster (Vorsitzender)
                  Dr. Walter Olthoff
Vorsitzender des Aufsichtsrats: Prof. Dr. h.c. Hans A. Aukes
Amtsgericht Kaiserslautern, HRB 2313=
______________________________________________________________________________


Grant Ingersoll schrieb:
> What version of Lucene are you using?
> 
> 
> On Aug 17, 2007, at 12:44 PM, duiduder@web.de wrote:
> 
> Hello community, dear Grant
> 
> I have build a JUnit test case that illustrates the problem - there, I
> try to cut
> out the right substring with the offset values given from Lucene - and
> fail :(
> 
> A few remarks:
> 
> In this example, the '' from 'Bos' makes that the '\w' pattern don't
> matches -
> it is recognized, unlike in StandardAnalyzer - as delimiter sign.
> 
> Analysis: It seems that Lucene calculates the offset values by adding
> a virtual
> delimiter between every field value.
> But Lucene forgets the last characters of a field value when these are
> analyzer-specific delimiter values. (I seem this because of
> DocumentWriter, line
> 245: 'if(lastToken != null) offset += lastToken.endOffset() + 1;)'
> With this line of code, only the end offset of the last token is
> considered - by
> forgetting potential, trimmed delimiter chars.
> 
> Thus, solving would be:
> 1. Add a single delimiter char between the field values
> 2. Substract (from the Lucene Offset) the count of analyzer-specific
> delimiters
>    that are at the end of all field values before the match
> 
> For this, someone needs to know what a delimiter for an specific
> analyzer is.
> 
> The other possibility of course is to change the behaviour inside
> Lucene, because
> the current offset values are more or less useless / hard to use (I
> currently have
> no idea how to get analyzer-specific delimiter chars).
> 
> For me, this looks like a bug - am I wrong?
> 
> Any ideas/hints/remarks? I would be very lucky about :)
> 
> Greetings
> 
> Christian
> 
> 
> 
> Grant Ingersoll schrieb:
>>>> Hi Christian,
>>>>
>>>> Is there anyway you can post a complete, self-contained example
>>>> preferably as a JUnit test?  I think it would be useful to know more
>>>> about how you are indexing (i.e. what Analyzer, etc.)
>>>> The offsets should be taken from whatever is set in on the Token during
>>>> Analysis.  I, too, am trying to remember where in the code this is
>>>> taking place
>>>>
>>>> Also, what version of Lucene are you using?
>>>>
>>>> -Grant
>>>>
>>>> On Aug 16, 2007, at 5:50 AM, duiduder@web.de wrote:
>>>>
>>>> Hello,
>>>>
>>>> I have an index with an 'actor' field, for each actor there exists an
>>>> single field value entry, e.g.
>>>>
>>>> stored/compressed,indexed,tokenized,termVector,termVectorOffsets,termVectorPosition
>>>>
>>>> <movie_actors>
>>>>
>>>> movie_actors:Mayrata O'Wisiedo (as Mairata O'Wisiedo)
>>>> movie_actors:Miguel Bos
>>>> movie_actors:Anna Lizaran (as Ana Lizaran)
>>>> movie_actors:Raquel Sanchs
>>>> movie_actors:Angelina Llongueras
>>>>
>>>> I try to get the term offset, e.g. for 'angelina' with
>>>>
>>>> termPositionVector = (TermPositionVector)
>>>> reader.getTermFreqVector(docNumber, "movie_actors");
>>>> int iTermIndex = termPositionVector.indexOf("angelina");
>>>> TermVectorOffsetInfo[] termOffsets =
>>>> termPositionVector.getOffsets(iTermIndex);
>>>>
>>>>
>>>> I get one TermVectorOffsetInfo for the field - with offset numbers
>>>> that are bigger than one single
>>>> Field entry.
>>>> I guessed that Lucene gives the offset number for the situation that
>>>> all values were concatenated,
>>>> which is for the single (virtual) string:
>>>>
>>>> movie_actors:Mayrata O'Wisiedo (as Mairata O'Wisiedo)Miguel BosAnna
>>>> Lizaran (as Ana Lizaran)Raquel SanchsAngelina Llongueras
>>>>
>>>> This fits in nearly no situation, so my second guess was that lucene
>>>> adds some virtual delimiters between the single
>>>> field entries for offset calculation. I added a delimiter, so the
>>>> result would be:
>>>>
>>>> movie_actors:Mayrata O'Wisiedo (as Mairata O'Wisiedo) Miguel Bos Anna
>>>> Lizaran (as Ana Lizaran) Raquel Sanchs Angelina Llongueras
>>>> (note the ' ' between each actor name)
>>>>
>>>> ..this also fits not for each situation - there are too much
>>>> delimiters there now, so, further, I guessed that Lucene don't add
>>>> a delimiter in each situation. So I added only one when the last
>>>> character of an entry was no alphanumerical one, with:
>>>> StringBuilder strbAttContent = new StringBuilder();
>>>> for (String strAttValue : m_luceneDocument.getValues(strFieldName))
>>>> {
>>>>    strbAttContent.append(strAttValue);
>>>>    if(strbAttContent.substring(strbAttContent.length() -
>>>> 1).matches("\\w"))
>>>>       strbAttContent.append(' ');
>>>> }
>>>>
>>>> where I get the result (virtual) entry:
>>>> movie_actors:Mayrata O'Wisiedo (as Mairata O'Wisiedo)Miguel BosAnna
>>>> Lizaran (as Ana Lizaran)Raquel Sanchs Angelina Llongueras
>>>>
>>>> this fits in ~96% of all my queries....but still its not 100% the way
>>>> lucene calculates the offset value for fields with multiple
>>>> value entries.
>>>>
>>>>
>>>> ..maybe the problem is that there are special characters inside my
>>>> database (e.g. the '' at 'Bos'), where my '\w' don't matches.
>>>> I have looked to this specific situation, but considering this one
>>>> character don't solves the problem.
>>>>
>>>>
>>>> How do Lucene calculates these offsets? I also searched inside the
>>>> source code, but can't find the correct place.
>>>>
>>>>
>>>> Thanks in advance!
>>>>
>>>> Christian Reuschling
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> -- 
>>>> ______________________________________________________________________________
>>>>
>>>>
>>>> Christian Reuschling, Dipl.-Ing.(BA)
>>>> Software Engineer
>>>>
>>>> Knowledge Management Department
>>>> German Research Center for Artificial Intelligence DFKI GmbH
>>>> Trippstadter Strae 122, D-67663 Kaiserslautern, Germany
>>>>
>>>> Phone: +49.631.20575-125
>>>> mailto:reuschling@dfki.de  http://www.dfki.uni-kl.de/~reuschling/
>>>>
>>>> ------------Legal Company Information Required by German
>>>> Law------------------
>>>> Geschftsfhrung: Prof. Dr. Dr. h.c. mult. Wolfgang Wahlster
>>>> (Vorsitzender)
>>>>                   Dr. Walter Olthoff
>>>> Vorsitzender des Aufsichtsrats: Prof. Dr. h.c. Hans A. Aukes
>>>> Amtsgericht Kaiserslautern, HRB 2313=
>>>> ______________________________________________________________________________
>>>>
>>>>
>>>>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
> 
>>>> --------------------------
>>>> Grant Ingersoll
>>>> http://lucene.grantingersoll.com
> 
>>>> Lucene Helpful Hints:
>>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>>> http://wiki.apache.org/lucene-java/LuceneFAQ
> 
> 
> 
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
package org.dynaq.index;
>>
>>
>>
import static org.junit.Assert.assertTrue;
>>
import java.io.IOException;
import java.util.LinkedList;
>>
import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.CorruptIndexException;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.TermPositionVector;
import org.apache.lucene.index.TermVectorOffsetInfo;
import org.apache.lucene.queryParser.ParseException;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.search.Hits;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.Searcher;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.LockObtainFailedException;
import org.apache.lucene.store.RAMDirectory;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;
>>
>>
>>
public class TokenizerTest
{
>>
    IndexReader m_indexReader;
>>
    Analyzer m_analyzer = new StandardAnalyzer();
>>
>>
    @Before
    public void createIndex() throws CorruptIndexException,
LockObtainFailedException, IOException
    {
        Directory ramDirectory = new RAMDirectory();
>>
        // we create a fist little set of actors names
        LinkedList<String> llActorNames = new LinkedList<String>();
        llActorNames.add("Mayrata O'Wisiedo (as Mairata O'Wisiedo)");
        llActorNames.add("Miguel Bos");
        llActorNames.add("Anna Lizaran (as Ana Lizaran)");
        llActorNames.add("Raquel Sanchs");
        llActorNames.add("Angelina Llongueras");
>>
>>
        // store them into a single document with multiple values for
one Field
        Document testDoc = new Document();
        for (String strActorsName : llActorNames)
        {
            Field testEntry =
                    new Field("movie_actors", strActorsName,
Field.Store.YES, Field.Index.TOKENIZED,
Field.TermVector.WITH_POSITIONS_OFFSETS);
>>
            testDoc.add(testEntry);
        }
>>
        // now we write it into the index
        IndexWriter indexWriter = new IndexWriter(ramDirectory, true,
m_analyzer, true);
>>
        indexWriter.addDocument(testDoc);
        indexWriter.close();
>>
        m_indexReader = IndexReader.open(ramDirectory);
    }
>>
>>
>>
    @Test
    public void checkOffsetValues() throws ParseException, IOException
    {
>>
        // first, we search for 'angelina'
        String strSearchTerm = "Angelina";
>>
>>
        Searcher searcher = new IndexSearcher(m_indexReader);
>>
        QueryParser parser = new QueryParser("movie_actors", m_analyzer);
        Query query = parser.parse(strSearchTerm);
>>
        Hits hits = searcher.search(query);
        Document resultDoc = hits.doc(0);
>>
        String[] straValues = resultDoc.getValues("movie_actors");
>>
        // now, we get the field values and build a single string
value out of them
        StringBuilder strbSimplyConcatenated = new StringBuilder();
        StringBuilder strbWithDelimiters = new StringBuilder();
        StringBuilder strbWithDelimitersAfterAlphaNumChar = new
StringBuilder();
        for (String strActorName : straValues)
        {
            // first situation: we simply concatenate all field value
entries
            strbSimplyConcatenated.append(strActorName);
            // second: we add a single delimiter char between the
field values
            strbWithDelimiters.append(strActorName).append('$');
            // third try: we add a single delimiter, but only if the
last char of the actor before was a alphanum-char
            strbWithDelimitersAfterAlphaNumChar.append(strActorName);
            String strLastChar =
strActorName.substring(strActorName.length() - 1, strActorName.length());
            if(strLastChar.matches("\\w"))
strbWithDelimitersAfterAlphaNumChar.append('$');
        }
>>
>>
        // this is the offset value from lucene. This should be the
place of 'angelina' in one of the concatenated value Strings above
        TermPositionVector termPositionVector = (TermPositionVector)
m_indexReader.getTermFreqVector(0, "movie_actors");
        int iTermIndex =
termPositionVector.indexOf(strSearchTerm.toLowerCase());
        TermVectorOffsetInfo[] termOffsets =
termPositionVector.getOffsets(iTermIndex);
        int iStartOffset = termOffsets[0].getStartOffset();
        int iEndOffset = termOffsets[0].getEndOffset();
>>
        //we create the substrings according to the offset value given
from lucene
        String strSubString1 =
strbSimplyConcatenated.substring(iStartOffset, iEndOffset);
        String strSubString2 =
strbWithDelimiters.substring(iStartOffset, iEndOffset);
        String strSubString3 =
strbWithDelimitersAfterAlphaNumChar.substring(iStartOffset, iEndOffset);
>>
        System.out.println("Offset value: " + iStartOffset + "-" +
iEndOffset);
        System.out.println("simply concatenated:");
        System.out.println(strbSimplyConcatenated);
        System.out.println("SubString for offset: '" + strSubString1 +
"'");
        System.out.println();
        System.out.println("with delimiters:");
        System.out.println(strbWithDelimiters);
        System.out.println("SubString for offset: '" + strSubString2 +
"'");
        System.out.println();
        System.out.println("with delimiter after alphanum character:");
        System.out.println(strbWithDelimitersAfterAlphaNumChar);
        System.out.println("SubString for offset: '" + strSubString3 +
"'");
>>
>>
        //is the offset value correct for one of the concatenated
strings?
>>
        //this fails for all situations
        assertTrue(strSubString1.equals(strSearchTerm) ||
strSubString2.equals(strSearchTerm) ||
strSubString3.equals(strSearchTerm));
>>
        /*
         * Comments: In this example, the '' from 'Bos' makes that
the '\w' pattern don't matches - it is recognized, unlike in
         * StandardAnalyzer - as delimiter sign.
         *
         * Analysis: It seems that Lucene calculates the offset values
by adding a virtual delimiter between every field value.
         * But Lucene forgets the last characters of a field value
when these are analyzer-specific delimiter values.
         * (I seem this because of DocumentWriter, line 245:
'if(lastToken != null) offset += lastToken.endOffset() + 1;)'
         * With this line of code, only the end offset of the last
token is considered - by forgetting potential, trimmed delimiter
         * chars.
         *
         * Thus, solving would be:
         * 1. Add a single delimiter char between the field values
         * 2. Substract (from the Lucene Offset) the count of
analyzer-specific delimiters that are at the end of all field values
before the match
         *
         * For this, someone needs to know what a delimiter for an
specific analyzer is.
         */
>>
>>
>>
    }
>>
>>
>>
    @After
    public void closeIndex() throws CorruptIndexException, IOException
    {
        m_indexReader.close();
    }
>>
>>
}
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
- ---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

> ------------------------------------------------------
> Grant Ingersoll
> http://www.grantingersoll.com/
> http://lucene.grantingersoll.com
> http://www.paperoftheweek.com/



-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 (GNU/Linux)

iD8DBQFGyaJ+QoTr50f1tpcRAu+vAKCDLOKZXtp1j4qKmgHddustbkT+9wCfdai9
RmT0X0x9/T5SIWES1uZaOCM=
=sZMR
-----END PGP SIGNATURE-----

--------------060307050207020204020703
Content-Type: text/x-java;
 name="TokenizerTest.java"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline;
 filename="TokenizerTest.java"

package org.dynaq.index;



import static org.junit.Assert.assertTrue;

import java.io.IOException;
import java.io.StringReader;
import java.util.LinkedHashMap;
import java.util.LinkedList;
import java.util.Map;
import java.util.AbstractMap.SimpleEntry;
import java.util.Map.Entry;

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.Token;
import org.apache.lucene.analysis.TokenStream;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.CorruptIndexException;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.TermPositionVector;
import org.apache.lucene.index.TermVectorOffsetInfo;
import org.apache.lucene.queryParser.ParseException;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.search.Hits;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.Searcher;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.LockObtainFailedException;
import org.apache.lucene.store.RAMDirectory;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;



public class TokenizerTest
{

    IndexReader m_indexReader;

    Analyzer m_analyzer = new StandardAnalyzer();



    @Before
    public void createIndex() throws CorruptIndexException, LockObtainFailedException, IOException
    {
        Directory ramDirectory = new RAMDirectory();

        // we create a fist little set of actors names
        LinkedList<String> llActorNames = new LinkedList<String>();
        llActorNames.add("Mayrata O'Wisiedo (as Mairata O'Wisiedo)");
        llActorNames.add("Miguel Bos");
        llActorNames.add("Anna Lizaran (as Ana Lizaran)");
        llActorNames.add("Raquel Sanchs");
        llActorNames.add("Angelina Llongueras");


        // store them into a single document with multiple values for one Field
        Document testDoc = new Document();
        for (String strActorsName : llActorNames)
        {
            Field testEntry =
                    new Field("movie_actors", strActorsName, Field.Store.YES, Field.Index.TOKENIZED, Field.TermVector.WITH_POSITIONS_OFFSETS);

            testDoc.add(testEntry);
        }

        // now we write it into the index
        IndexWriter indexWriter = new IndexWriter(ramDirectory, true, m_analyzer, true);

        indexWriter.addDocument(testDoc);
        indexWriter.close();

        m_indexReader = IndexReader.open(ramDirectory);
    }



    /**
     * Determines the differences between the offset values calculated by Lucene and the offset where the terms really appears inside concatenated
     * values of multiple field entries.<br>
     * I assume the default behaviour of lucene is a bug - because there the (possibly trimmed) delimiters at the end of a field are ignored for
     * offset calculation. Thus, this is a workaround.<br>
     * The method offers all information necessary to provide adequate highlights for multiple field value entries:
     * 
     * <li>All field values concatenated to one String. These are separated with single delimiters between the values (These are still considered
     * from the Lucene offsets</li>
     * <li>A mapping table with the end offset of a field with analyzer-specific delimiters at the end as <b>keys</b>. (As it would calculated from
     * Lucene, to keep comparableness). The <b>values</b> are the related counts of end offset delimiters for this field entry.</li>
     * <br>
     * Provide adequate highlights by following these steps:
     * <li>Calculate the diffs for a specific field with calculateLuceneOffsetDiffs(..)</li>
     * <li>Get the term offset from Lucene (e.g. by a TermVectorOffsetInfo lookup)</li>
     * <li>Adapt the offset value with adaptLuceneOffset(..)</li>
     * <li>Use the content String as returned by calculateLuceneOffsetDiffs(..) for highlighting</li>
     * 
     * 
     * @return entry-key: the concatenated field values, with single-whitespace-delimiter between them<br>
     *         entry-value: the mapping table endOffset => endDelimiterCount
     * @throws IOException
     */
    static public Map.Entry<String, LinkedHashMap<Integer, Integer>> calculateLuceneOffsetDiffs(String strFieldName, Document document2highlight,
            Analyzer analyzer) throws IOException
    {
        LinkedHashMap<Integer, Integer> hsEndOffset2EndDelimiterCount = new LinkedHashMap<Integer, Integer>();

        StringBuilder strbValuesWithDelimiters = new StringBuilder();

        String[] straValues = document2highlight.getValues(strFieldName);


        int iCurrentValueLengthSum = 0;

        for (String strActorName : straValues)
        {
            // we add a single delimiter char between the field values
            strbValuesWithDelimiters.append(strActorName).append(' ');

            //in the case the Tokenizer eliminates the single Letter, it was a delimiter char 
            int iLocalDelimitersAtEnd = 0;
            Token token;
            do
            {
                String strLastChar =
                        strActorName.substring(strActorName.length() - iLocalDelimitersAtEnd - 1, strActorName.length() - iLocalDelimitersAtEnd);
                TokenStream tokenStream = analyzer.tokenStream(strFieldName, new StringReader(strLastChar));
                token = tokenStream.next();
                if(token == null) iLocalDelimitersAtEnd++;
            }
            while (token == null);

            // Lucene forgets the local delimiters - so we do it also, to be comparable
            iCurrentValueLengthSum += strActorName.length() + 1 - iLocalDelimitersAtEnd;

            if(iLocalDelimitersAtEnd != 0) hsEndOffset2EndDelimiterCount.put(iCurrentValueLengthSum - 1, iLocalDelimitersAtEnd);
        }


        SimpleEntry<String, LinkedHashMap<Integer, Integer>> entry =
                new SimpleEntry<String, LinkedHashMap<Integer, Integer>>(strbValuesWithDelimiters.toString(), hsEndOffset2EndDelimiterCount);

        return entry;
    }



    /**
     * Modifies an offset value from lucene accoring to previously determined LuceneOffset differences for a specific field.
     * 
     * @param luceneOffset the offset value from Lucene that we want to adapt
     * 
     * @return the correct, corresponding offset value
     */
    static public int adaptLuceneOffset(int luceneOffset, LinkedHashMap<Integer, Integer> hsEndOffset2EndDelimiterCount)
    {
        //we sum up the delimiters befor the given lucene offset value
        int iDelimiterSumBe4Offset = 0;
        for (Entry<Integer, Integer> entry : hsEndOffset2EndDelimiterCount.entrySet())
            if(entry.getKey() <= luceneOffset - 1) iDelimiterSumBe4Offset += entry.getValue();

        return luceneOffset + iDelimiterSumBe4Offset;
    }



    @Test
    public void checkOffsetValues() throws ParseException, IOException
    {

        // first, we search for 'angelina'
        String strSearchTerm = "Angelina";


        Searcher searcher = new IndexSearcher(m_indexReader);

        QueryParser parser = new QueryParser("movie_actors", m_analyzer);
        Query query = parser.parse(strSearchTerm);

        Hits hits = searcher.search(query);
        Document resultDoc = hits.doc(0);

        String[] straValues = resultDoc.getValues("movie_actors");

        // now, we get the field values and build a single string value out of them
        StringBuilder strbSimplyConcatenated = new StringBuilder();
        StringBuilder strbWithDelimiters = new StringBuilder();

        for (String strActorName : straValues)
        {
            // first situation: we simply concatenate all field value entries
            strbSimplyConcatenated.append(strActorName);
            // second: we add a single delimiter char between the field values
            strbWithDelimiters.append(strActorName).append('$');
        }




        // this is the offset value from lucene. This should be the place of 'angelina' in one of the concatenated value Strings above
        TermPositionVector termPositionVector = (TermPositionVector) m_indexReader.getTermFreqVector(0, "movie_actors");
        int iTermIndex = termPositionVector.indexOf(strSearchTerm.toLowerCase());
        TermVectorOffsetInfo[] termOffsets = termPositionVector.getOffsets(iTermIndex);
        int iStartOffset = termOffsets[0].getStartOffset();
        int iEndOffset = termOffsets[0].getEndOffset();

        // we create the substrings according to the offset value given from lucene
        String strSubString1 = strbSimplyConcatenated.substring(iStartOffset, iEndOffset);
        String strSubString2 = strbWithDelimiters.substring(iStartOffset, iEndOffset);

        System.out.println("Offset value: " + iStartOffset + "-" + iEndOffset);
        System.out.println("simply concatenated field values:");
        System.out.println(strbSimplyConcatenated);
        System.out.println("SubString for Lucene offset: '" + strSubString1 + "'");
        System.out.println();
        System.out.println("concatenated field values with single delimiter:");
        System.out.println(strbWithDelimiters);
        System.out.println("SubString for Lucene offset: '" + strSubString2 + "'");
        System.out.println();


        //now we try to correct the values
        Map.Entry<String, LinkedHashMap<Integer, Integer>>  entry = TokenizerTest.calculateLuceneOffsetDiffs("movie_actors", resultDoc, m_analyzer);
        String strConcatenatedContent = entry.getKey();
        LinkedHashMap<Integer, Integer> endOffset2endDelimiterCount = entry.getValue();

        iStartOffset = TokenizerTest.adaptLuceneOffset(iStartOffset, endOffset2endDelimiterCount);
        iEndOffset = TokenizerTest.adaptLuceneOffset(iEndOffset, endOffset2endDelimiterCount);

        String strSubString3 = strConcatenatedContent.substring(iStartOffset, iEndOffset);
        System.out.println("SubString for modified offset: '" + strSubString3 + "'");




        // is the offset value correct for one of the concatenated strings?

        // this fails for all situations
        assertTrue(strSubString1.equals(strSearchTerm) || strSubString2.equals(strSearchTerm) || strSubString3.equals(strSearchTerm));

         /* 
         * Analysis: It seems that Lucene calculates the offset values by adding a virtual delimiter between every field value. But Lucene forgets the
         * last characters of a field value when these are analyzer-specific delimiter values. (I seem this because of DocumentWriter, line 245:
         * 'if(lastToken != null) offset += lastToken.endOffset() + 1;)' With this line of code, only the end offset of the last token is considered -
         * by forgetting potential, trimmed delimiter chars.
         * 
         * Thus, solving is:
         * 1. Add a single delimiter char between the field values 
         * 2. Add (to the Lucene Offset) the count of analyzer-specific delimiters that are at the end of all field values before the match
         * 
         * For this, the analyzer is used
         */



    }



    @After
    public void closeIndex() throws CorruptIndexException, IOException
    {
        m_indexReader.close();
    }


}


--------------060307050207020204020703
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--------------060307050207020204020703--

From java-user-return-29920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 20 15:43:06 2007
Return-Path: <java-user-return-29920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16203 invoked from network); 20 Aug 2007 15:43:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Aug 2007 15:43:05 -0000
Received: (qmail 98791 invoked by uid 500); 20 Aug 2007 15:42:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98759 invoked by uid 500); 20 Aug 2007 15:42:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98730 invoked by uid 99); 20 Aug 2007 15:42:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Aug 2007 08:42:46 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Aug 2007 15:43:09 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IN9OS-0007zT-Fe
	for java-user@lucene.apache.org; Mon, 20 Aug 2007 08:42:16 -0700
Message-ID: <12238336.post@talk.nabble.com>
Date: Mon, 20 Aug 2007 08:42:16 -0700 (PDT)
From: Lokeya <lokeya@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Document Similarities lucene(particularly using doc id's)
In-Reply-To: <D7EDBC82-043E-44B7-AC55-53E87629C3E9@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: lokeya@gmail.com
References: <12186723.post@talk.nabble.com> <F0232E47-90C5-4024-9B3C-2813550BE649@apache.org> <12229492.post@talk.nabble.com> <D7EDBC82-043E-44B7-AC55-53E87629C3E9@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for your reply. I will answer your questions below one by one:

What is the bigger goal you are trying to get at? 

I am trying to implement a "Search System" where we have basically 2 input
queries and output should be chain of documents which connects the 2 input
queries. These chain of documents should be ranked according to
relevance.This has following steps:

1.Create 2 end point document sets (for 2 user queries)
2. Expand queries (using centroid terms)
3. Run that expanded query and get an intermediate document set(which will
have documents that would connect end points)
4. Having 2 end points and an intermediate set, try to find the
connections(doc-doc similarities) and get the pathways(chain of documents
that connect 1st and 2nd query). So a chain can have maximum of 4 and
minimum of 1( doc same in all 3 sets which is the highly relevant for 2
input queries)
5. We have in mind specific applications which could use this set up and
right now doing a prototype system using citeseer documents as sample data
set which is around a million documents.

I am done with the steps 1, 2 and 3. And trying to get the 4th module done.

What do you need  the similarity score for? 

This will be used to rank documents and make pathways (which is the ultimate
goal)

Do you need to compare every item in set 1 against every item in set 2?

Yes I should do this . Like i said i have 3 sets :Left set for user query 1,
Right set for user query 2, and intermediate set for expanded query. First i
have to do n X n comparison for all unique docs in intermediate set and
store compared doc ids , score info in a data structure. Then take set 1
docs and compare it with intermediate set and look for docs having scores
more than a  fixed threshold, do this for Intermediate set and right side
set also. At the end we can come up with the relevant chain of documents.

In your initial reply there was a qn :

What do the doc ids have to do with the content? , the reason why i asked
this question was i was wondering if there is some implementation which
already exists(to do a doc-doc comparision based on doc-id's which would be
a cool one for users.)


Grant Ingersoll-6 wrote:
> 
> You would have write it, as it doesn't exist in Lucene (but could be  
> a useful contribution).  The easiest version is probably the cosine  
> similarity, described at http://en.wikipedia.org/wiki/Vector_space_model
> 
> Essentially, you have two vectors, and you need to calculate the  
> cosine of the angle between them.  Then you can do this for each one  
> in your set.
> 
> What is the bigger goal you are trying to get at?  What do you need  
> the similarity score for?  Do you need to compare every item in set 1  
> against every item in set 2?
> 
> On Aug 19, 2007, at 11:19 PM, Lokeya wrote:
> 
>>
>> Hi,
>>
>> Thanks for your reply.
>>
>> I can use the getTermFreqVector() on Index Reader and get it. But I am
>> wondering whats the API which has to be used to find the similarity  
>> between
>> 2 such vectors which would give a score (doc-doc similairty in   
>> essence).
>>
>> Thanks.
>>
>>
>>
>> Grant Ingersoll-6 wrote:
>>>
>>> Hi,
>>>
>>>
>>> On Aug 16, 2007, at 2:20 PM, Lokeya wrote:
>>>
>>>>
>>>> Hi All,
>>>>
>>>> I have the following set up: a) Indexed set of docs. b) Ran 1st
>>>> query and
>>>> got tops docs  c) Fetched the id's from that and stored in a data
>>>> structure.
>>>> d) Ran 2nd query , got top docs , fetched id's and stored in a data
>>>> structure.
>>>>
>>>> Now i have 2 sets of doc ids (set 1) and (set 1).
>>>>
>>>> I want to find out the document content similarity between these 2
>>>> sets(just
>>>> using doc ids information which i have).
>>>>
>>>
>>> Not sure what you mean here.  What do the doc ids have to do with the
>>> content?
>>>
>>>> Qn 1: Is it possible using any lucene api's. In that case can you
>>>> point me
>>>> to the appropriate API's. I did a search at
>>>> :http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/
>>>> javadoc/index.html
>>>> But couldn't find anything.
>>>>
>>>
>>> It is possible if you use Term Vectors (see
>>> IndexReader.getTermFreqVector).  You will need to store (when you
>>> construct your Field) and load the term vectors and then calculate
>>> the similarity.  A common way of doing this is by calculating the
>>> cosine of the angle between the two vectors.
>>>
>>> -Grant
>>>
>>> --------------------------
>>> Grant Ingersoll
>>> http://lucene.grantingersoll.com
>>>
>>> Lucene Helpful Hints:
>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> -- 
>> View this message in context: http://www.nabble.com/Document- 
>> Similarities-lucene%28particularly-using-doc-id%27s%29- 
>> tf4281286.html#a12229492
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
> 
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Document-Similarities-lucene%28particularly-using-doc-id%27s%29-tf4281286.html#a12238336
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 20 18:44:58 2007
Return-Path: <java-user-return-29921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92452 invoked from network); 20 Aug 2007 18:44:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Aug 2007 18:44:57 -0000
Received: (qmail 58876 invoked by uid 500); 20 Aug 2007 18:44:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57912 invoked by uid 500); 20 Aug 2007 18:44:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57901 invoked by uid 99); 20 Aug 2007 18:44:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Aug 2007 11:44:49 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Aug 2007 18:44:46 +0000
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 500ED95A08; Mon, 20 Aug 2007 11:44:24 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 4395823704
	for <java-user@lucene.apache.org>; Mon, 20 Aug 2007 11:44:24 -0700 (PDT)
Date: Mon, 20 Aug 2007 11:44:24 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Deleting the result from a query or a filter and not a documents
 specified by Term
In-Reply-To: <359a92830708191011k1844fa7fr80f738f1485ca282@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0708201142060.12906@hal.rescomp.berkeley.edu>
References: <4479cfa0708172339u73c1dbf5ya2ac0b6f6961d9d3@mail.gmail.com> 
 <Pine.LNX.4.58.0708182058450.14063@hal.rescomp.berkeley.edu>
 <359a92830708191011k1844fa7fr80f738f1485ca282@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: So iterating over and deleting them term by term wouldn't
: preserve the sense of the original query
: (field1:query1 AND field2:query2) OR (field1:query3 AND field2:query4)

Doh! .. you are 100% correct, i am 100% wrong ... i don't know what i was
thinking when i typed that.

the Filter approach should still work though, and you could alwyas use a
QueryWrapperFilter to make it work for an arbitrary query.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 21 06:35:51 2007
Return-Path: <java-user-return-29922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48118 invoked from network); 21 Aug 2007 06:35:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Aug 2007 06:35:50 -0000
Received: (qmail 49442 invoked by uid 500); 21 Aug 2007 06:35:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49396 invoked by uid 500); 21 Aug 2007 06:35:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49385 invoked by uid 99); 21 Aug 2007 06:35:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Aug 2007 23:35:41 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sonusr@gmail.com designates 209.85.198.185 as permitted sender)
Received: from [209.85.198.185] (HELO rv-out-0910.google.com) (209.85.198.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Aug 2007 06:35:41 +0000
Received: by rv-out-0910.google.com with SMTP id k20so1001057rvb
        for <java-user@lucene.apache.org>; Mon, 20 Aug 2007 23:35:21 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=K+uxfOC/4Ezvd+AWzrtTnMFGCfyFLgteG5Cd/t1OxZzUCTns88kba++V5W/t7YmamXiacynGLxYOtyLQPnH3lCFwvuqHMgtJY2NkRn0VneYXIj0OPVx+q1qDNDtHceebF4Hf3SU+WJ8t115uYj/vzu/z3CvvFZ1htFNz1cQbSGA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=uBxGoyE2t6x/0eZc9EEbrLt13/PiKNKSKo/akcO93oKySyLVLD6HtSynhuJEg2VZOSQQIYEKhP7VAySiBgafCj4kQtnAkBITkro/FPW8L8cBiF5HvZhvEgg7cmbDbs2FNSYAheU9LCJaorxqfePUXMKyBvdDthaZUH/LyVk2/oc=
Received: by 10.141.5.3 with SMTP id h3mr3189129rvi.1187678120969;
        Mon, 20 Aug 2007 23:35:20 -0700 (PDT)
Received: by 10.141.146.17 with HTTP; Mon, 20 Aug 2007 23:35:20 -0700 (PDT)
Message-ID: <d5b3ea330708202335l7489e6d9rb514c875684b2214@mail.gmail.com>
Date: Tue, 21 Aug 2007 12:05:20 +0530
From: "Sonu SR" <sonusr@gmail.com>
To: java-user@lucene.apache.org
Subject: Problem In wild card search with NOT
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13141_19672950.1187678120956"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13141_19672950.1187678120956
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,

I have problem when searching terms with wild card and NOT.
Simple Example is,
The query TITLE:(test1234 OR test567)  return two results,
the query  TITLE:(test1234 OR test567) AND NOT TITLE:(test1234)  return one
result as my expectation,
the query  TITLE:(test1234 OR test567) AND NOT TITLE:(test1234)  return one
result as my expectation,
But the query TITLE:(test1234 OR test567)  AND NOT TITLE:(test*)  returns
the two results (In normal i expect nothing will be returned).

But the Query works correctly when giving as TITLE:(test1234 OR test567) AND
NOT TITLE:(test1234 OR test567).  ie:- returns nothing


Is it a bug in lucene?

Thanks,
Sonu

------=_Part_13141_19672950.1187678120956--

From java-user-return-29923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 21 08:10:58 2007
Return-Path: <java-user-return-29923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84804 invoked from network); 21 Aug 2007 08:10:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Aug 2007 08:10:57 -0000
Received: (qmail 96611 invoked by uid 500); 21 Aug 2007 08:10:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96574 invoked by uid 500); 21 Aug 2007 08:10:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96563 invoked by uid 99); 21 Aug 2007 08:10:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Aug 2007 01:10:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [62.159.88.170] (HELO ns1.hauk-sasko-backup.de) (62.159.88.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Aug 2007 08:11:17 +0000
Received: (from mail@localhost)
	by ns1.hauk-sasko-backup.de (8.9.3/8.9.3) id KAA25059
	for java-user@lucene.apache.org.KAV; Tue, 21 Aug 2007 10:10:22 +0200
Received: (from mail@localhost)
	by ns1.hauk-sasko-backup.de (8.9.3/8.9.3) id KAA25055
	for <java-user@lucene.apache.org>; Tue, 21 Aug 2007 10:10:22 +0200
Received: from UNKNOWN(172.19.1.103), claiming to be "homer.hauk-sasko.de"
 via SMTP by ns1, id smtpdELeAQg; Tue Aug 21 10:10:17 2007
Received: from core1 (localhost [127.0.0.1])
	by localhost (Postfix) with SMTP id 0D11A229DA
	for <java-user@lucene.apache.org>; Tue, 21 Aug 2007 10:10:17 +0200 (CEST)
Received: by homer.hauk-sasko.de (Postfix, from userid 1050)
	id F2468229D7; Tue, 21 Aug 2007 10:10:16 +0200 (CEST)
Received: from [172.19.4.123] (lx-el.hauk-sasko.de [172.19.4.123])
	by homer.hauk-sasko.de (Postfix) with ESMTP id C51C94601
	for <java-user@lucene.apache.org>; Tue, 21 Aug 2007 10:10:16 +0200 (CEST)
Message-ID: <46CA9DE8.6020903@hauk-sasko.de>
Date: Tue, 21 Aug 2007 10:10:16 +0200
From: Eric Louvard <eric.louvard@hauk-sasko.de>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; fr; rv:1.8.0.8) Gecko/20061029 SeaMonkey/1.0.6
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: NPE in IndexReader
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.55 (1.174.2.19-2003-05-19-exp)
X-Sanitizer: This message has been sanitized!
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by ns1.hauk-sasko-backup.de id KAA25055
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=-105.9 required=4.0
	tests=BAYES_01,SIGNATURE_LONG_SPARSE,USER_AGENT_MOZILLA_UA,
	      USER_IN_WHITELIST
	version=2.55

Hello while calling IndexReader.deletedoc(int) I am becomming a NPE.

java.lang.NullPointerException
        at 
org.apache.lucene.index.IndexReader.acquireWriteLock(IndexReader.java:658)
        at 
org.apache.lucene.index.IndexReader.deleteDocument(IndexReader.java:686)

In the acquireWriteLock methode there is call 
'segmentInfos.getVersion()', but segmentInfos should be 'null'.

I am working with the head revision from SVN.

May someone tell me a work arround.

regards, ric Louvard.

-- 
Mit freundlichen Gren

i. A. ric Louvard
HAUK & SASKO Ingenieurgesellschaft mbH
Zettachring 2
D-70567 Stuttgart

Phone: +49 7 11 7 25 89 - 19
Fax: +49 7 11 7 25 89 - 50
E-Mail: eric.louvard@hauk-sasko.de
www: www.hauk-sasko.de
Niederlassung Stuttgart
Firmensitz: Markstr. 77, 44801 Bochum
Registergericht: Amtsgericht Bochum, HRB 2532
Geschftsfhrer: Dr.-Ing. Pavol Sasko 





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 21 10:00:39 2007
Return-Path: <java-user-return-29924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15708 invoked from network); 21 Aug 2007 10:00:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Aug 2007 10:00:38 -0000
Received: (qmail 32255 invoked by uid 500); 21 Aug 2007 10:00:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32215 invoked by uid 500); 21 Aug 2007 10:00:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32204 invoked by uid 99); 21 Aug 2007 10:00:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Aug 2007 03:00:29 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [68.142.201.190] (HELO web31710.mail.mud.yahoo.com) (68.142.201.190)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 21 Aug 2007 10:01:01 +0000
Received: (qmail 88214 invoked by uid 60001); 21 Aug 2007 10:00:06 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=LwC4YxojP5g4Px+ESXFqGH2DW3tddfSvMKtKZwP2or/mTxRSFBCJptGmsnINsg2/CfZWanxWDnCw9nuPoJyUdGfd0oL5XqpBE3BaUH6JKXZ/auy6drh092W7mfD3p7eGXiYL/8KRUGcDV2bbf1Yas4QOTU+93eEULUpD+Ph5tJU=;
X-YMail-OSG: ntA.fKcVM1kNi1mO2zynvMz9fDwn1EXACy82O6cD2l2ns1DF8CSv2pYEMtXJ8_86OMUiYV.Ftqq7ishazEDWVrN8YP5J7gIOMGGjs5QtUHoT2ZFoMumMF0uWML2tSg--
Received: from [196.204.160.40] by web31710.mail.mud.yahoo.com via HTTP; Tue, 21 Aug 2007 03:00:06 PDT
Date: Tue, 21 Aug 2007 03:00:06 -0700 (PDT)
From: Heba Farouk <heba.farouk@yahoo.com>
Reply-To: heba.farouk@yahoo.com
Subject: lucene suggest
To: Lucene mailing list <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-956703971-1187690406=:87245"
Content-Transfer-Encoding: 8bit
Message-ID: <47952.87245.qm@web31710.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-956703971-1187690406=:87245
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hello
i would like to implement a suggest implementation (like google suggest) using lucene. i actually tried using lucene and it was successfull but i was stuck in some point which is returning a list of results to the user that have no duplicates. my question is: is there any way i can remove duplicates with that r returned from the search in the hits or i should manage it manually ??


thanks in advance


Yours 

Heba

       
---------------------------------
Moody friends. Drama queens. Your life? Nope! - their life, your story.
 Play Sims Stories at Yahoo! Games. 
--0-956703971-1187690406=:87245--

From java-user-return-29925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 21 10:16:41 2007
Return-Path: <java-user-return-29925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22921 invoked from network); 21 Aug 2007 10:16:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Aug 2007 10:16:40 -0000
Received: (qmail 53980 invoked by uid 500); 21 Aug 2007 10:16:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53912 invoked by uid 500); 21 Aug 2007 10:16:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53901 invoked by uid 99); 21 Aug 2007 10:16:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Aug 2007 03:16:29 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Aug 2007 10:16:27 +0000
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 22014284; Tue, 21 Aug 2007 12:16:03 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: lucene suggest
Date: Tue, 21 Aug 2007 12:16:02 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01AC1377@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: lucene suggest
Thread-Index: Acfj2h+8Ce2W7tSzR1ewXYhoCUYsqAAAfO3Q
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>,
	<heba.farouk@yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Heba,

you need some lucene field that serves as an identifier for your =
documents that are indexed. Then, when re-indexing some documents, you =
can first use the identifier to delete the old indexed documents. You =
have to take care of this yourself.=20

Regards Ard

>=20
> Hello
> i would like to implement a suggest implementation (like=20
> google suggest) using lucene. i actually tried using lucene=20
> and it was successfull but i was stuck in some point which is=20
> returning a list of results to the user that have no=20
> duplicates. my question is: is there any way i can remove=20
> duplicates with that r returned from the search in the hits=20
> or i should manage it manually ??
>=20
>=20
> thanks in advance
>=20
>=20
> Yours=20
>=20
> Heba
>=20
>       =20
> ---------------------------------
> Moody friends. Drama queens. Your life? Nope! - their life,=20
> your story.
>  Play Sims Stories at Yahoo! Games.=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 21 10:17:35 2007
Return-Path: <java-user-return-29926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23423 invoked from network); 21 Aug 2007 10:17:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Aug 2007 10:17:33 -0000
Received: (qmail 58493 invoked by uid 500); 21 Aug 2007 10:17:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58455 invoked by uid 500); 21 Aug 2007 10:17:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58440 invoked by uid 99); 21 Aug 2007 10:17:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Aug 2007 03:17:23 -0700
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [80.67.64.10] (HELO smtp2.akamai.com) (80.67.64.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Aug 2007 10:17:23 +0000
Received: from smtp2.akamai.com (vwall.kendall.corp.akamai.com [172.17.4.35])
	by smtp2.akamai.com (8.13.8/8.12.10) with ESMTP id l7LAHB24013195
	for <java-user@lucene.apache.org>; Tue, 21 Aug 2007 06:17:11 -0400 (EDT)
Received: from USMA1EX-GATE1.kendall.corp.akamai.com (usma1ex-gate1.kendall.corp.akamai.com [172.17.0.215])
	by smtp2.akamai.com (8.13.8/8.12.10) with ESMTP id l7LAHB7m013189;
	Tue, 21 Aug 2007 06:17:11 -0400 (EDT)
Received: from MAVS2.kendall.corp.akamai.com ([172.17.33.18]) by USMA1EX-GATE1.kendall.corp.akamai.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 21 Aug 2007 06:17:01 -0400
Received: from INVS1.bangalore.corp.akamai.com ([172.21.20.14]) by MAVS2.kendall.corp.akamai.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 21 Aug 2007 06:17:01 -0400
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: lucene suggest
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Tue, 21 Aug 2007 15:46:57 +0530
Message-ID: <4FA8C6AEE609B644B38DE471A3657A62016ADC4A@INVS1.bangalore.corp.akamai.com>
In-Reply-To: <47952.87245.qm@web31710.mail.mud.yahoo.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: lucene suggest
Thread-Index: Acfj2iUcRAZgn3yeRKaH0SXxwHSU6AAAYhVw
References: <47952.87245.qm@web31710.mail.mud.yahoo.com>
From: "Chhabra, Kapil" <kchhabra@akamai.com>
To: <java-user@lucene.apache.org>, <heba.farouk@yahoo.com>
X-OriginalArrivalTime: 21 Aug 2007 10:17:01.0313 (UTC) FILETIME=[69F20F10:01C7E3DC]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
Yes there are ways and workarounds to remove duplicates based on one
field. But, you should not need this if you don't index duplicates at
the first place. Just put a call to "delete" from index right before you
add the document to in.

Best Regards,
Kapil Chhabra

-----Original Message-----
From: Heba Farouk [mailto:heba.farouk@yahoo.com]=20
Sent: Tuesday, August 21, 2007 3:30 PM
To: Lucene mailing list
Subject: lucene suggest

Hello
i would like to implement a suggest implementation (like google suggest)
using lucene. i actually tried using lucene and it was successfull but i
was stuck in some point which is returning a list of results to the user
that have no duplicates. my question is: is there any way i can remove
duplicates with that r returned from the search in the hits or i should
manage it manually ??


thanks in advance


Yours=20

Heba

      =20
---------------------------------
Moody friends. Drama queens. Your life? Nope! - their life, your story.
 Play Sims Stories at Yahoo! Games.=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 21 10:36:18 2007
Return-Path: <java-user-return-29927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30855 invoked from network); 21 Aug 2007 10:36:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Aug 2007 10:36:16 -0000
Received: (qmail 76911 invoked by uid 500); 21 Aug 2007 10:36:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76853 invoked by uid 500); 21 Aug 2007 10:36:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76842 invoked by uid 99); 21 Aug 2007 10:36:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Aug 2007 03:36:07 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.142.201.191] (HELO web31711.mail.mud.yahoo.com) (68.142.201.191)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 21 Aug 2007 10:36:05 +0000
Received: (qmail 17336 invoked by uid 60001); 21 Aug 2007 10:35:44 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=JUsZoHrfvNz+1s2TLub798Z6McLkTxA9lSKf+N3t+9Y+6ktg41mgppXCgCLxSyPsEk2pCX87xz6d4nEaE6PwkguPH9J/DQC5IoNraKB1CwWfYaxMVD4daf23RLD3k/gQs6LQNHe/wYD81dIepjCUF/10nl0+ulEdQWJ6GG91o8c=;
X-YMail-OSG: nxVBfDkVM1mNLd58klTn_iRZBP_hpNFEHlc3Zv7eFaydyVBdbZn4bSlKuHvqLjufl3OhX4n.cl5LS71XcmsUuWTBWAxijn4_6h626OrAnP86SgdSvDwMNsRsbfHwuw--
Received: from [196.204.160.40] by web31711.mail.mud.yahoo.com via HTTP; Tue, 21 Aug 2007 03:35:44 PDT
Date: Tue, 21 Aug 2007 03:35:44 -0700 (PDT)
From: Heba Farouk <heba.farouk@yahoo.com>
Reply-To: heba.farouk@yahoo.com
Subject: RE: lucene suggest
To: java-user@lucene.apache.org
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7C01AC1377@hai01.hippo.local>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1601605367-1187692544=:24754"
Content-Transfer-Encoding: 8bit
Message-ID: <54690.24754.qm@web31711.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1601605367-1187692544=:24754
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

the documents are not duplicated, i mean the hits (assume that 2 documents have the same subject but with different authors, so if i'm searching the subject, the returned hits will have duplicates )
i was asking if i can remove duplicates from the hits??

thanks in advance

Ard Schrijvers <a.schrijvers@hippo.nl> wrote: Hello Heba,

you need some lucene field that serves as an identifier for your documents that are indexed. Then, when re-indexing some documents, you can first use the identifier to delete the old indexed documents. You have to take care of this yourself. 

Regards Ard

> 
> Hello
> i would like to implement a suggest implementation (like 
> google suggest) using lucene. i actually tried using lucene 
> and it was successfull but i was stuck in some point which is 
> returning a list of results to the user that have no 
> duplicates. my question is: is there any way i can remove 
> duplicates with that r returned from the search in the hits 
> or i should manage it manually ??
> 
> 
> thanks in advance
> 
> 
> Yours 
> 
> Heba
> 
>        
> ---------------------------------
> Moody friends. Drama queens. Your life? Nope! - their life, 
> your story.
>  Play Sims Stories at Yahoo! Games. 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




Yours 

Heba

       
---------------------------------
Shape Yahoo! in your own image.  Join our Network Research Panel today!
--0-1601605367-1187692544=:24754--

From java-user-return-29928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 21 10:40:41 2007
Return-Path: <java-user-return-29928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32426 invoked from network); 21 Aug 2007 10:40:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Aug 2007 10:40:39 -0000
Received: (qmail 79578 invoked by uid 500); 21 Aug 2007 10:40:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79543 invoked by uid 500); 21 Aug 2007 10:40:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79532 invoked by uid 99); 21 Aug 2007 10:40:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Aug 2007 03:40:31 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Aug 2007 10:41:02 +0000
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 22016002 for java-user@lucene.apache.org; Tue, 21 Aug 2007 12:40:07 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: lucene suggest
Date: Tue, 21 Aug 2007 12:40:07 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01AC1379@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: lucene suggest
Thread-Index: Acfj3xxItG0S6ldoSji9phhb4RBvbwAADQxQ
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

:S=20

If you have two hits, you have it two times in your index, simple as =
that. So, you have two lucene Documents with the same subject, but with =
different authors, and your search for subject, well, obviously you get =
2 hits.

Check out luke, it will help you understand your index. Furthermore, you =
probably want to index the document ones, and just add to times the same =
lucene field with a different user.

Ard

>=20
> the documents are not duplicated, i mean the hits (assume=20
> that 2 documents have the same subject but with different=20
> authors, so if i'm searching the subject, the returned hits=20
> will have duplicates )
> i was asking if i can remove duplicates from the hits??
>=20
> thanks in advance
>=20
> Ard Schrijvers <a.schrijvers@hippo.nl> wrote: Hello Heba,
>=20
> you need some lucene field that serves as an identifier for=20
> your documents that are indexed. Then, when re-indexing some=20
> documents, you can first use the identifier to delete the old=20
> indexed documents. You have to take care of this yourself.=20
>=20
> Regards Ard
>=20
> >=20
> > Hello
> > i would like to implement a suggest implementation (like=20
> > google suggest) using lucene. i actually tried using lucene=20
> > and it was successfull but i was stuck in some point which is=20
> > returning a list of results to the user that have no=20
> > duplicates. my question is: is there any way i can remove=20
> > duplicates with that r returned from the search in the hits=20
> > or i should manage it manually ??
> >=20
> >=20
> > thanks in advance
> >=20
> >=20
> > Yours=20
> >=20
> > Heba
> >=20
> >       =20
> > ---------------------------------
> > Moody friends. Drama queens. Your life? Nope! - their life,=20
> > your story.
> >  Play Sims Stories at Yahoo! Games.=20
> >=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
>=20
> Yours=20
>=20
> Heba
>=20
>       =20
> ---------------------------------
> Shape Yahoo! in your own image.  Join our Network Research=20
> Panel today!
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 21 12:26:46 2007
Return-Path: <java-user-return-29929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88264 invoked from network); 21 Aug 2007 12:26:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Aug 2007 12:26:44 -0000
Received: (qmail 47849 invoked by uid 500); 21 Aug 2007 12:26:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47715 invoked by uid 500); 21 Aug 2007 12:26:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 7533 invoked by uid 99); 21 Aug 2007 11:11:14 -0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Message-ID: <220555190708210410s7da93f36r2a61eaf99ba1c0c7@mail.gmail.com>
Date: Tue, 21 Aug 2007 13:10:50 +0200
From: "Jens Grivolla" <j+lucene@grivolla.net>
Sender: jens@grivolla.net
To: java-user@lucene.apache.org, heba.farouk@yahoo.com
Subject: Re: lucene suggest
In-Reply-To: <54690.24754.qm@web31711.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <A955EA1F8FE31749AEC8C998082F6C7C01AC1377@hai01.hippo.local>
	 <54690.24754.qm@web31711.mail.mud.yahoo.com>
X-Google-Sender-Auth: d313885cef19cdc0
X-Virus-Checked: Checked by ClamAV on apache.org

On 8/21/07, Heba Farouk <heba.farouk@yahoo.com> wrote:
> the documents are not duplicated, i mean the hits (assume that 2 documents have the same subject but with different authors, so if i'm searching the subject, the returned hits will have duplicates )
> i was asking if i can remove duplicates from the hits??

You may not want to work with documents at all (where you have the
duplicates), but rather with the terms in your index directly.  Take a
look at WildcardTermEnum etc.

Ciao,
    Jens

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 21 12:45:58 2007
Return-Path: <java-user-return-29930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95392 invoked from network); 21 Aug 2007 12:45:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Aug 2007 12:45:58 -0000
Received: (qmail 99874 invoked by uid 500); 21 Aug 2007 12:45:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99842 invoked by uid 500); 21 Aug 2007 12:45:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99831 invoked by uid 99); 21 Aug 2007 12:45:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Aug 2007 05:45:49 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of raghuram.nadiminti@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Aug 2007 12:45:48 +0000
Received: by nf-out-0910.google.com with SMTP id d3so848477nfc
        for <java-user@lucene.apache.org>; Tue, 21 Aug 2007 05:45:27 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=arQGEoz/ncPfRslEehNnDMZSOHrtOzslTFYbEmcFfb3LMWkg3FoL9IqwOnOG1KkQfVdEWrRxmcr1pFfNMg+PdBIOySXZ4l/boCyyIflAI3XtAp1wKsAeWrpBSWlPQGHaz0gKZSa/k/xJ6VGqj4dF058ukVMS57X5yRq42pGWb2w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=RyXSc8HK2bIlK+NKvbPtr4nxHqVib8wLOEEDC5fYGOGJ+GZ7NS5hxp44t22hM2TXKThe2eY8szDDdzQoVhVqVA193ejwx7h4kUgg+n/y/6azYfTLCv+NvrAs0e1siyEesWwy1KBGWzB1o3s8lP3HxRCuW2g4tCh2WudFq0ESqqo=
Received: by 10.78.118.5 with SMTP id q5mr2756284huc.1187700326878;
        Tue, 21 Aug 2007 05:45:26 -0700 (PDT)
Received: by 10.78.164.16 with HTTP; Tue, 21 Aug 2007 05:45:26 -0700 (PDT)
Message-ID: <1e68ba6b0708210545s3fbebd94oa796e55e705de5aa@mail.gmail.com>
Date: Tue, 21 Aug 2007 18:15:26 +0530
From: "Raghu Ram" <raghuram.nadiminti@gmail.com>
To: java-user@lucene.apache.org
Subject: Multiple Documents sharing a common boost
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_132501_9120021.1187700326861"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_132501_9120021.1187700326861
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Is it possible to have multiple documents share a common boost?

An example scenario is as follows. The set of documents are clustered into
some set of clusters. Each cluster has a unique clusterId. So each document
has a cluster Id field that associates each document with its cluster. Each
cluster has a property called cluster score. Each document has to be boosted
by its cluster score. The number of clusters is very small in comparison to
the number of documents (around 100 clusters).The cluster score is updated
on a continual basis. So the cluster score cant be stored as the document
boost for each individual document as we end up updating all the documents
boost daily which seems infeasible. We are trying to find out a solution
that is more efficient.

Thank you.

------=_Part_132501_9120021.1187700326861--

From java-user-return-29931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 21 14:52:04 2007
Return-Path: <java-user-return-29931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48720 invoked from network); 21 Aug 2007 14:52:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Aug 2007 14:52:03 -0000
Received: (qmail 26768 invoked by uid 500); 21 Aug 2007 14:51:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26739 invoked by uid 500); 21 Aug 2007 14:51:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26728 invoked by uid 99); 21 Aug 2007 14:51:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Aug 2007 07:51:53 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.187 as permitted sender)
Received: from [209.85.134.187] (HELO mu-out-0910.google.com) (209.85.134.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Aug 2007 14:51:52 +0000
Received: by mu-out-0910.google.com with SMTP id g7so1849137muf
        for <java-user@lucene.apache.org>; Tue, 21 Aug 2007 07:51:30 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WsK+TLWIP8bB3MkyMw3+ELzD7INUu4E5pF4vkYRYvXi0z4O2gXJrhndydMkqork8f2IgfYEEsSnjCs0iljDqlCElbDKBZ8n40Bv88qc6R24NdL1aiwVCpZ4CaxzEXoTxL1ZIVa46trXvqQn9zRtkV0zjAQOZ+OdMQkJlewgl3EU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=nbroxyia13ruhPa7Lod5zumo+YMMxjVAUKchvPCuVza10jg+EI4CevbMh0e2jQ/GIWHHSHXwGtL378VUkRdugjK6/kCclrhzJrZElbWVLjgnKpem3jzDTMDc078SRUxU4QG1m2z0rI5wRkTLAi1a6+PQ7jegDvjMd4dc4DATw7Y=
Received: by 10.82.111.8 with SMTP id j8mr10578582buc.1187707890073;
        Tue, 21 Aug 2007 07:51:30 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Tue, 21 Aug 2007 07:51:30 -0700 (PDT)
Message-ID: <359a92830708210751i37b1d082q50c137ba3ffa1348@mail.gmail.com>
Date: Tue, 21 Aug 2007 10:51:30 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multiple Documents sharing a common boost
In-Reply-To: <1e68ba6b0708210545s3fbebd94oa796e55e705de5aa@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_86445_13398094.1187707890043"
References: <1e68ba6b0708210545s3fbebd94oa796e55e705de5aa@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_86445_13398094.1187707890043
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

One solution is to keep meta-data in your index. Remember that
documents do not all have to have the same field. So you could
index a document with a single field
"metadatanotafieldinanyotherdoc" that contains, say, a list of
all of your clusters and their boosts. Read this document in at
startup time and cache it away in your server. Thereafter, you have
a set of boosts that can be applied at query time.

Of course this useless if you wanted to boost at index time.
But I know of no way to change the boost of a document
without deleting and readding it with the new boost.

Best
Erick

On 8/21/07, Raghu Ram <raghuram.nadiminti@gmail.com> wrote:
>
> Is it possible to have multiple documents share a common boost?
>
> An example scenario is as follows. The set of documents are clustered into
> some set of clusters. Each cluster has a unique clusterId. So each
> document
> has a cluster Id field that associates each document with its cluster.
> Each
> cluster has a property called cluster score. Each document has to be
> boosted
> by its cluster score. The number of clusters is very small in comparison
> to
> the number of documents (around 100 clusters).The cluster score is updated
> on a continual basis. So the cluster score cant be stored as the document
> boost for each individual document as we end up updating all the documents
> boost daily which seems infeasible. We are trying to find out a solution
> that is more efficient.
>
> Thank you.
>

------=_Part_86445_13398094.1187707890043--

From java-user-return-29932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 21 15:15:52 2007
Return-Path: <java-user-return-29932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76673 invoked from network); 21 Aug 2007 15:15:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Aug 2007 15:15:51 -0000
Received: (qmail 64986 invoked by uid 500); 21 Aug 2007 15:15:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64944 invoked by uid 500); 21 Aug 2007 15:15:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64933 invoked by uid 99); 21 Aug 2007 15:15:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Aug 2007 08:15:42 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of raghuram.nadiminti@gmail.com designates 66.249.90.177 as permitted sender)
Received: from [66.249.90.177] (HELO ik-out-1112.google.com) (66.249.90.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Aug 2007 15:15:41 +0000
Received: by ik-out-1112.google.com with SMTP id b32so347894ika
        for <java-user@lucene.apache.org>; Tue, 21 Aug 2007 08:15:20 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tmWE2pH7JCyjIiXTT/fS9tV5p+MPdPwHB1CDH2AzXciK9xBzf5ihgd9gpB5Fo/wQJ7bTSBBdQnlTmMb9l9ULovk8+ASeVuIjjQXu65PtyN3/vVnd8OGX93TXYidXSTruaBnLzezI9MmhHIemUugzzi7IK2VVge7/e0ENeye/x7E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kEtTRNiv8OkZOxLscvGkBJ4BZY9/N0UkUJK4fk6kekMjY9baZ73ekCerKVMEzyHs7A4q00tEDz8BNpVm+2tK3APjOjMwtYAQYtLY6YzIH946+aALr2yPfEv1fUASs18iFYOYQQU4+S2qDZz6fze3AuTeE5DRZfWIk1cW7ohm/Ec=
Received: by 10.78.201.10 with SMTP id y10mr2854990huf.1187709319813;
        Tue, 21 Aug 2007 08:15:19 -0700 (PDT)
Received: by 10.78.164.16 with HTTP; Tue, 21 Aug 2007 08:15:19 -0700 (PDT)
Message-ID: <1e68ba6b0708210815n6d3e11eaxc106b40c9b5f50b4@mail.gmail.com>
Date: Tue, 21 Aug 2007 20:45:19 +0530
From: "Raghu Ram" <raghuram.nadiminti@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multiple Documents sharing a common boost
In-Reply-To: <359a92830708210751i37b1d082q50c137ba3ffa1348@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_134328_23412150.1187709319804"
References: <1e68ba6b0708210545s3fbebd94oa796e55e705de5aa@mail.gmail.com>
	 <359a92830708210751i37b1d082q50c137ba3ffa1348@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_134328_23412150.1187709319804
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

do you mean to say that we generate a compound query by AND ing the original
query with a query like

( (cluster_id=0)^boost_cluster0 OR (cluster_id=1)^boost_cluster1...) )

But is this not inefficient considering that the number of clusters is in
hundreds ??????





On 8/21/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> One solution is to keep meta-data in your index. Remember that
> documents do not all have to have the same field. So you could
> index a document with a single field
> "metadatanotafieldinanyotherdoc" that contains, say, a list of
> all of your clusters and their boosts. Read this document in at
> startup time and cache it away in your server. Thereafter, you have
> a set of boosts that can be applied at query time.
>
> Of course this useless if you wanted to boost at index time.
> But I know of no way to change the boost of a document
> without deleting and readding it with the new boost.
>
> Best
> Erick
>
> On 8/21/07, Raghu Ram <raghuram.nadiminti@gmail.com> wrote:
> >
> > Is it possible to have multiple documents share a common boost?
> >
> > An example scenario is as follows. The set of documents are clustered
> into
> > some set of clusters. Each cluster has a unique clusterId. So each
> > document
> > has a cluster Id field that associates each document with its cluster.
> > Each
> > cluster has a property called cluster score. Each document has to be
> > boosted
> > by its cluster score. The number of clusters is very small in comparison
> > to
> > the number of documents (around 100 clusters).The cluster score is
> updated
> > on a continual basis. So the cluster score cant be stored as the
> document
> > boost for each individual document as we end up updating all the
> documents
> > boost daily which seems infeasible. We are trying to find out a solution
> > that is more efficient.
> >
> > Thank you.
> >
>

------=_Part_134328_23412150.1187709319804--

From java-user-return-29933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 21 16:01:16 2007
Return-Path: <java-user-return-29933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52379 invoked from network); 21 Aug 2007 16:01:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Aug 2007 16:01:14 -0000
Received: (qmail 67469 invoked by uid 500); 21 Aug 2007 16:01:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67423 invoked by uid 500); 21 Aug 2007 16:01:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67412 invoked by uid 99); 21 Aug 2007 16:01:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Aug 2007 09:01:04 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.186 as permitted sender)
Received: from [209.85.134.186] (HELO mu-out-0910.google.com) (209.85.134.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Aug 2007 16:01:03 +0000
Received: by mu-out-0910.google.com with SMTP id g7so1870265muf
        for <java-user@lucene.apache.org>; Tue, 21 Aug 2007 09:00:42 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jVARsU4vVtd8MOvyd948ug+9tqY4WDQmKrJop3GVpW8OjpnFlZXbSnC/QVDjabjPdl+no90fXN1/uMGZhJ1rZU7BWeMRJNf91sWWFOJdR+cM+kI5Pe9Rtf+NHTP1hA5FkM/5oDpH05wran1myveJepYOxR/8W8gpsBYjsju+/c8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ipIRdYjp9PlBy2U/hDoLnR/i53rqzB4mFOWmPL+GIz6StKKzmP4E5J5ifqakYkKZmip3Kv3sKLH75AzMTY0hcJWxv91smf25iM7ce3zoRV1i2FwpZnyds6kq80d7D8TES8LunR3xrYYC0pwtMC8HDdAHFWdC0DClr55OGQKH9XU=
Received: by 10.82.116.15 with SMTP id o15mr10667441buc.1187712041358;
        Tue, 21 Aug 2007 09:00:41 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Tue, 21 Aug 2007 09:00:41 -0700 (PDT)
Message-ID: <359a92830708210900g3928c36ev27484ecdd9dd33@mail.gmail.com>
Date: Tue, 21 Aug 2007 12:00:41 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multiple Documents sharing a common boost
In-Reply-To: <1e68ba6b0708210815n6d3e11eaxc106b40c9b5f50b4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_87089_2383029.1187712041324"
References: <1e68ba6b0708210545s3fbebd94oa796e55e705de5aa@mail.gmail.com>
	 <359a92830708210751i37b1d082q50c137ba3ffa1348@mail.gmail.com>
	 <1e68ba6b0708210815n6d3e11eaxc106b40c9b5f50b4@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_87089_2383029.1187712041324
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Ahhh, I was assuming you didn't need to look at all clusters.
Oops.

That said, the question is really whether this is "good enough"
compared to re-indexing, and only some tests will determine that.
I was surprised at how quickly a *large* number of ORs was
processed by Lucene.

You could also think about implementing a HitCollector that
boosted the raw score of each document based upon the
cluster ID, but be careful not to read the full document in
the HitCollector (you shouldn't have to though, either make
a map early or get creative with filters).

You might find useful information looking through the mail
archive for "faceting", as this seems like a similar
topic.

But I wouldn't go anywhere with anything custom until and
unless I'd satisfied myself that the simple approach of
letting Lucene handle a large set of OR clauses wasn't
performant. Several very bright people put significant
effort in to performance, I'd see if they've already done
the hard part <G>.....

Erick

On 8/21/07, Raghu Ram <raghuram.nadiminti@gmail.com> wrote:
>
> do you mean to say that we generate a compound query by AND ing the
> original
> query with a query like
>
> ( (cluster_id=0)^boost_cluster0 OR (cluster_id=1)^boost_cluster1...) )
>
> But is this not inefficient considering that the number of clusters is in
> hundreds ??????
>
>
>
>
>
> On 8/21/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > One solution is to keep meta-data in your index. Remember that
> > documents do not all have to have the same field. So you could
> > index a document with a single field
> > "metadatanotafieldinanyotherdoc" that contains, say, a list of
> > all of your clusters and their boosts. Read this document in at
> > startup time and cache it away in your server. Thereafter, you have
> > a set of boosts that can be applied at query time.
> >
> > Of course this useless if you wanted to boost at index time.
> > But I know of no way to change the boost of a document
> > without deleting and readding it with the new boost.
> >
> > Best
> > Erick
> >
> > On 8/21/07, Raghu Ram <raghuram.nadiminti@gmail.com> wrote:
> > >
> > > Is it possible to have multiple documents share a common boost?
> > >
> > > An example scenario is as follows. The set of documents are clustered
> > into
> > > some set of clusters. Each cluster has a unique clusterId. So each
> > > document
> > > has a cluster Id field that associates each document with its cluster.
> > > Each
> > > cluster has a property called cluster score. Each document has to be
> > > boosted
> > > by its cluster score. The number of clusters is very small in
> comparison
> > > to
> > > the number of documents (around 100 clusters).The cluster score is
> > updated
> > > on a continual basis. So the cluster score cant be stored as the
> > document
> > > boost for each individual document as we end up updating all the
> > documents
> > > boost daily which seems infeasible. We are trying to find out a
> solution
> > > that is more efficient.
> > >
> > > Thank you.
> > >
> >
>

------=_Part_87089_2383029.1187712041324--

From java-user-return-29934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 21 20:39:51 2007
Return-Path: <java-user-return-29934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34487 invoked from network); 21 Aug 2007 20:39:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Aug 2007 20:39:49 -0000
Received: (qmail 76012 invoked by uid 500); 21 Aug 2007 20:39:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75974 invoked by uid 500); 21 Aug 2007 20:39:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75963 invoked by uid 99); 21 Aug 2007 20:39:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Aug 2007 13:39:39 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [82.146.123.134] (HELO villon.taktik.be) (82.146.123.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Aug 2007 20:39:35 +0000
Received: from localhost (localhost [127.0.0.1])
	by villon.taktik.be (Postfix) with ESMTP id 4F9B92F96201
	for <java-user@lucene.apache.org>; Tue, 21 Aug 2007 22:42:04 +0200 (CEST)
Received: from villon.taktik.be ([127.0.0.1])
 by localhost (villon.taktik.be [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 19428-05 for <java-user@lucene.apache.org>;
 Tue, 21 Aug 2007 22:41:54 +0200 (CEST)
Received: from [192.168.1.3] (176.16-241-81.adsl-dyn.isp.belgacom.be [81.241.16.176])
	by villon.taktik.be (Postfix) with ESMTP id 7989B2F961C5
	for <java-user@lucene.apache.org>; Tue, 21 Aug 2007 22:41:54 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.3)
To: java-user@lucene.apache.org
Message-Id: <007FC342-778A-4148-B3CC-80F2AA5D2B73@taktik.be>
Content-Type: multipart/alternative; boundary=Apple-Mail-12--1031860279
From: Antoine Baudoux <ab@taktik.be>
Subject: benefit of combining fields into one vs. booleanQuery
Date: Tue, 21 Aug 2007 22:38:57 +0200
X-Mailer: Apple Mail (2.752.3)
X-Virus-Scanned: by amavisd-new at taktik.be
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-12--1031860279
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=ISO-8859-1;
	delsp=yes;
	format=flowed

	Hi everyone,

	My question : i have medias with a "title" field and a "caption" =
=20
field and a "keywords" field.

I want to be able to search in those 3 fields at the same time. For =20
example, if i search "black car" the boolean query looks like this =20
combination of termqueries:

(title=3Dblack or keywords=3Dblack or caption=3Dblack) and (title=3Dcar =
or =20
keywords=3D car or caption=3D car).

So if "black" is in caption and "car" is in title I must find the media.

I'm afraid that those boolean queries will be slow when there are a =20
lot of terms in the query.

I can, at index time add a "fulltext" field to each media that will =20
contains title, caption and keywords concatenated.

the query becomes :  (fulltext=3Dblack and fulltext=3Dcar), much =
simpler.

But i must still be able to search only in title or only in caption =20
or only in keywords, so I must still add the other fields, doubling =20
the indexed terms.

Has someone done a similar thing? Is it worth it, or will the First =20
boolean query remain fast enough?

Thx,

Antoine




--
Antoine Baudoux
Development Manager
ab@taktik.be
T=E9l.: +32 2 333 58 44
GSM: +32 499 534 538
Fax.: +32 2 648 16 53



--Apple-Mail-12--1031860279--

From java-user-return-29935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 21 20:48:22 2007
Return-Path: <java-user-return-29935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39558 invoked from network); 21 Aug 2007 20:48:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Aug 2007 20:48:21 -0000
Received: (qmail 536 invoked by uid 500); 21 Aug 2007 20:48:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99911 invoked by uid 500); 21 Aug 2007 20:48:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99900 invoked by uid 99); 21 Aug 2007 20:48:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Aug 2007 13:48:11 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Aug 2007 20:48:45 +0000
Received: by nf-out-0910.google.com with SMTP id d3so949972nfc
        for <java-user@lucene.apache.org>; Tue, 21 Aug 2007 13:47:50 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=B1gzl0AX1DeeZQddLxLNVzRs6Vm1j1g8KtF7cvAKUVr3/5pPCYBDnygaEaVNI1ayIGabB8r3aWOXhpFp6/5AJHRAth6r2y6oB1QdWwVm8E1XVavQCaqGWXVPyqs5V1LmGbeHeyEKGyJmvzvxbZV236Wk1P0znBzj4uxj/6xGojc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NHVR3jVZ5NUnHCNqhvZ65A/WJ2y0Jdc7qNc6jFblDAs6YIsQqF1Ve6H/z6wzx5QPLY4EFxNYl/a1mGD9abjiuWic0sjZ98MaFzI8gTDVEFrQ/EOrcvmx/re74N1TSDs8VRddGioCHB/PVRccF4y3DXzo/mDLjBShh3c36E2mlf0=
Received: by 10.82.178.11 with SMTP id a11mr11233435buf.1187729269557;
        Tue, 21 Aug 2007 13:47:49 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Tue, 21 Aug 2007 13:47:49 -0700 (PDT)
Message-ID: <359a92830708211347q461327aci8d3108aa1448cc81@mail.gmail.com>
Date: Tue, 21 Aug 2007 16:47:49 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: benefit of combining fields into one vs. booleanQuery
In-Reply-To: <007FC342-778A-4148-B3CC-80F2AA5D2B73@taktik.be>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_89509_19934750.1187729269513"
References: <007FC342-778A-4148-B3CC-80F2AA5D2B73@taktik.be>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_89509_19934750.1187729269513
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

A three field boolean query isn't very complex, so I don't
think that's a problem. Although it does depend a bit upon
how many terms you allow.

But I'd try the simplest thing first, which would be to put
all the terms in a fulltext field as well as in individual terms.

Then get some performance measurements and some
idea of what the total size of the index will be and make
some decisions at that point.

It's actually remarkably easy to switch from one
of those solutions to the other if performance isn't what
you need. In general, I've had better luck not worrying
about space and going for simple code, *then* changing
things around if there's a problem.

Best
Erick

On 8/21/07, Antoine Baudoux <ab@taktik.be> wrote:
>
>         Hi everyone,
>
>         My question : i have medias with a "title" field and a "caption"
> field and a "keywords" field.
>
> I want to be able to search in those 3 fields at the same time. For
> example, if i search "black car" the boolean query looks like this
> combination of termqueries:
>
> (title=3Dblack or keywords=3Dblack or caption=3Dblack) and (title=3Dcar o=
r
> keywords=3D car or caption=3D car).
>
> So if "black" is in caption and "car" is in title I must find the media.
>
> I'm afraid that those boolean queries will be slow when there are a
> lot of terms in the query.
>
> I can, at index time add a "fulltext" field to each media that will
> contains title, caption and keywords concatenated.
>
> the query becomes :  (fulltext=3Dblack and fulltext=3Dcar), much simpler.
>
> But i must still be able to search only in title or only in caption
> or only in keywords, so I must still add the other fields, doubling
> the indexed terms.
>
> Has someone done a similar thing? Is it worth it, or will the First
> boolean query remain fast enough?
>
> Thx,
>
> Antoine
>
>
>
>
> --
> Antoine Baudoux
> Development Manager
> ab@taktik.be
> T=E9l.: +32 2 333 58 44
> GSM: +32 499 534 538
> Fax.: +32 2 648 16 53
>
>
>

------=_Part_89509_19934750.1187729269513--

From java-user-return-29936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 21 21:42:09 2007
Return-Path: <java-user-return-29936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54084 invoked from network); 21 Aug 2007 21:42:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Aug 2007 21:42:07 -0000
Received: (qmail 80218 invoked by uid 500); 21 Aug 2007 21:41:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79954 invoked by uid 500); 21 Aug 2007 21:41:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79943 invoked by uid 99); 21 Aug 2007 21:41:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Aug 2007 14:41:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of buschmic@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Aug 2007 21:41:55 +0000
Received: by wa-out-1112.google.com with SMTP id j40so1406804wah
        for <java-user@lucene.apache.org>; Tue, 21 Aug 2007 14:41:35 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=dJ4YsRZD48p6V698lXNMxgoT4GxKX7qvhI9xU2h7v3f+qucwEMLKGWhv5pZQxmGysaQ76CqvCdcIKyB3/MtJSvlohJlfhbVES2PiZnocZv+cAxdU8BpjN6yLGypLsFUhudYWJYV590DDcSfhMwe5dLxXu2HfSbvSGQe6LMyFTiM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=uWuk93j+7rMhjKoCTQMIDYkgphaFeFXdIcYABBcYO4KcVAfuPomJ5G/NY6DzoDdr23R7hUvz4AuxDd1FmRm8PcqrR/a7z7N0eTNbFWlMPEuQaceBBfoHetvvku/p9A1/r1WSlq49d2Wr5rQAcDNa66YRqzs/l2gppX/fMs1VQ94=
Received: by 10.114.52.1 with SMTP id z1mr517193waz.1187732494674;
        Tue, 21 Aug 2007 14:41:34 -0700 (PDT)
Received: from ?192.168.0.100? ( [24.80.67.88])
        by mx.google.com with ESMTPS id 10sm9202324wrl.2007.08.21.14.41.33
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 21 Aug 2007 14:41:33 -0700 (PDT)
Message-ID: <46CB5BD7.4060204@gmail.com>
Date: Tue, 21 Aug 2007 14:40:39 -0700
From: Michael Busch <buschmic@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: NPE in IndexReader
References: <46CA9DE8.6020903@hauk-sasko.de>
In-Reply-To: <46CA9DE8.6020903@hauk-sasko.de>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Eric Louvard wrote:
> Hello while calling IndexReader.deletedoc(int) I am becomming a NPE.
> 
> java.lang.NullPointerException
>        at
> org.apache.lucene.index.IndexReader.acquireWriteLock(IndexReader.java:658)
>        at
> org.apache.lucene.index.IndexReader.deleteDocument(IndexReader.java:686)
> 
> In the acquireWriteLock methode there is call
> 'segmentInfos.getVersion()', but segmentInfos should be 'null'.
> 
> I am working with the head revision from SVN.
> 
> May someone tell me a work arround.
> 
> regards, ric Louvard.
> 

Hi Eric,

could you please provide more information about how exactly you create
the IndexReader? A unit test that hits this exception would be even better!

Thanks,
- Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 21 21:53:00 2007
Return-Path: <java-user-return-29937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56167 invoked from network); 21 Aug 2007 21:53:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Aug 2007 21:53:00 -0000
Received: (qmail 96851 invoked by uid 500); 21 Aug 2007 21:52:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96821 invoked by uid 500); 21 Aug 2007 21:52:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96802 invoked by uid 99); 21 Aug 2007 21:52:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Aug 2007 14:52:50 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 66.249.90.177 as permitted sender)
Received: from [66.249.90.177] (HELO ik-out-1112.google.com) (66.249.90.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Aug 2007 21:52:45 +0000
Received: by ik-out-1112.google.com with SMTP id b32so432326ika
        for <java-user@lucene.apache.org>; Tue, 21 Aug 2007 14:52:23 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ScbgDBq5AmXpUw+SvVfvn0kdC3LMEf0Ju43eBPy8nrSDTkoShgL9+PYPMKkEvGw2HWXVjdhtmR3u+DqC64cv4F5Wziqh6wStm3UXDoSJ2Unbwz2YZ6MPVek4aEWwRkJkBJb2Q8EcJ1d1Qha8lqXMHbgxHz5k+SV6CLsxg6r3W24=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Pw9Q1ACvb76oqZn21+vIz/mrVKZliUtOokbLpj+DcxN2XUncOYYREjJzKPE8gnOGhyrktjubOTrpBuJaUgWIVp9VMlxiR3q/8ccdA7UfqbuqPAqj3bFCymhmwDp4qNExvD4TdCMQZaSRLGsO34JUWdaDDxkInAsihxvC2smyyoU=
Received: by 10.78.132.2 with SMTP id f2mr3083213hud.1187733143359;
        Tue, 21 Aug 2007 14:52:23 -0700 (PDT)
Received: by 10.78.140.12 with HTTP; Tue, 21 Aug 2007 14:52:23 -0700 (PDT)
Message-ID: <6e3ae6310708211452k7601106s68519f80926cc1d9@mail.gmail.com>
Date: Tue, 21 Aug 2007 14:52:23 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: NPE in IndexReader
In-Reply-To: <46CB5BD7.4060204@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_97371_29082227.1187733143286"
References: <46CA9DE8.6020903@hauk-sasko.de> <46CB5BD7.4060204@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_97371_29082227.1187733143286
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi, Eric, I think I have the same problem.

I found out in latest MultiReader.java, the "SegmentInfos" is set to null.

  public MultiReader(IndexReader[] subReaders) throws IOException {
    super(subReaders.length =3D=3D 0 ? null : subReaders[0].directory(),
          null, false, subReaders);
  }

However, segmentInfos are used in several places, causing NPEs.
For example, in IndexReader.acquireWriteLock(),

      if (SegmentInfos.readCurrentVersion(directory) >
segmentInfos.getVersion())
{

So I think MultiReader.java need some adjustments.


--=20
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_in_=
3_minutes


On 8/21/07, Michael Busch <buschmic@gmail.com > wrote:
>
> Eric Louvard wrote:
> > Hello while calling IndexReader.deletedoc(int) I am becomming a NPE.
> >
> > java.lang.NullPointerException
> >        at
> > org.apache.lucene.index.IndexReader.acquireWriteLock(IndexReader.java
> :658)
> >        at
> > org.apache.lucene.index.IndexReader.deleteDocument (IndexReader.java
> :686)
> >
> > In the acquireWriteLock methode there is call
> > 'segmentInfos.getVersion()', but segmentInfos should be 'null'.
> >
> > I am working with the head revision from SVN.
> >
> > May someone tell me a work arround.
> >
> > regards, =C9ric Louvard.
> >
>
> Hi Eric,
>
> could you please provide more information about how exactly you create
> the IndexReader? A unit test that hits this exception would be even
> better!
>
> Thanks,
> - Michael
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_97371_29082227.1187733143286--

From java-user-return-29938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 22 00:07:11 2007
Return-Path: <java-user-return-29938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23042 invoked from network); 22 Aug 2007 00:07:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2007 00:07:10 -0000
Received: (qmail 71669 invoked by uid 500); 22 Aug 2007 00:07:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71184 invoked by uid 500); 22 Aug 2007 00:07:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71165 invoked by uid 99); 22 Aug 2007 00:07:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Aug 2007 17:07:01 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 00:07:00 +0000
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C74C895A09; Tue, 21 Aug 2007 17:06:39 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id AF3F423703
	for <java-user@lucene.apache.org>; Tue, 21 Aug 2007 17:06:39 -0700 (PDT)
Date: Tue, 21 Aug 2007 17:06:39 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: NPE in IndexReader
In-Reply-To: <6e3ae6310708211452k7601106s68519f80926cc1d9@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0708211703510.4258@hal.rescomp.berkeley.edu>
References: <46CA9DE8.6020903@hauk-sasko.de> <46CB5BD7.4060204@gmail.com>
 <6e3ae6310708211452k7601106s68519f80926cc1d9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I found out in latest MultiReader.java, the "SegmentInfos" is set to null.

: However, segmentInfos are used in several places, causing NPEs.
: For example, in IndexReader.acquireWriteLock(),

MultiReader was refactored into two classes: MultiReader which is now only
constructed from other readers, and MultiSegmentReader which is what
IndexReader.open returns when a directory contans multiple segments ...
segmentInfos shouldn't be needed in the first case -- and doesn't make
much sense at all.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 22 00:19:49 2007
Return-Path: <java-user-return-29939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25746 invoked from network); 22 Aug 2007 00:19:45 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.2)
  by 140.211.11.9 with SMTP; 22 Aug 2007 00:19:45 -0000
Received: (qmail 79743 invoked by uid 500); 22 Aug 2007 00:17:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79694 invoked by uid 500); 22 Aug 2007 00:17:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79681 invoked by uid 99); 22 Aug 2007 00:17:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Aug 2007 17:17:55 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 00:17:50 +0000
Received: by nf-out-0910.google.com with SMTP id d3so5034nfc
        for <java-user@lucene.apache.org>; Tue, 21 Aug 2007 17:17:29 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=osxClxHpnrZBbfrZrTwiuiTekNkzBrGfWu8wB4LvZYDwG9gYrMsx5liuQ9n/WaiQMhHfP0hapenaImH9oonHokqL/CYe8pfifvFHphdljW0dPiTQWKHjniRXMllxD09Di/OoUWLSB1l5JSBZeE3D2SsWBI3iKIIzZZex0KKwYlE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=i1plnchXNZfeWT4jLC8r3YdV3QILSGQA8yfmtzSy8NmZMh6OQ1yUcTvzLvb6EB7h+D9pMN8MUfc2X/I/acwwDkgfh9hVwQZvfw/Z8d4RoHjJpY9yEzers7f3p+LF3KIcqmwuVYxxlTDv2me6VoVU9E4aQ0NfahFR3nqbd86Jqg4=
Received: by 10.78.131.8 with SMTP id e8mr33873hud.1187741848726;
        Tue, 21 Aug 2007 17:17:28 -0700 (PDT)
Received: by 10.78.140.12 with HTTP; Tue, 21 Aug 2007 17:17:28 -0700 (PDT)
Message-ID: <6e3ae6310708211717x50f59edakfddd87c65f920558@mail.gmail.com>
Date: Tue, 21 Aug 2007 17:17:28 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: NPE in IndexReader
In-Reply-To: <Pine.LNX.4.58.0708211703510.4258@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_98983_13583925.1187741848695"
References: <46CA9DE8.6020903@hauk-sasko.de> <46CB5BD7.4060204@gmail.com>
	 <6e3ae6310708211452k7601106s68519f80926cc1d9@mail.gmail.com>
	 <Pine.LNX.4.58.0708211703510.4258@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_98983_13583925.1187741848695
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Right now I am very confused.

I agree segmentInfos are not needed in this case. But it's used in
aquireWriteLock(). What should we do?

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes

On 8/21/07, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : I found out in latest MultiReader.java, the "SegmentInfos" is set to
> null.
>
> : However, segmentInfos are used in several places, causing NPEs.
> : For example, in IndexReader.acquireWriteLock(),
>
> MultiReader was refactored into two classes: MultiReader which is now only
> constructed from other readers, and MultiSegmentReader which is what
> IndexReader.open returns when a directory contans multiple segments ...
> segmentInfos shouldn't be needed in the first case -- and doesn't make
> much sense at all.
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_98983_13583925.1187741848695--

From java-user-return-29940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 22 02:13:00 2007
Return-Path: <java-user-return-29940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72241 invoked from network); 22 Aug 2007 02:12:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2007 02:12:59 -0000
Received: (qmail 40786 invoked by uid 500); 22 Aug 2007 02:12:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40745 invoked by uid 500); 22 Aug 2007 02:12:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40733 invoked by uid 99); 22 Aug 2007 02:12:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Aug 2007 19:12:50 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [169.229.70.150] (HELO rescomp.berkeley.edu) (169.229.70.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 02:12:50 +0000
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 8A75795A09; Tue, 21 Aug 2007 19:12:30 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 7B0C523703
	for <java-user@lucene.apache.org>; Tue, 21 Aug 2007 19:12:30 -0700 (PDT)
Date: Tue, 21 Aug 2007 19:12:30 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: NPE in IndexReader
In-Reply-To: <6e3ae6310708211717x50f59edakfddd87c65f920558@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0708211842240.15046@hal.rescomp.berkeley.edu>
References: <46CA9DE8.6020903@hauk-sasko.de> <46CB5BD7.4060204@gmail.com> 
 <6e3ae6310708211452k7601106s68519f80926cc1d9@mail.gmail.com> 
 <Pine.LNX.4.58.0708211703510.4258@hal.rescomp.berkeley.edu>
 <6e3ae6310708211717x50f59edakfddd87c65f920558@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I agree segmentInfos are not needed in this case. But it's used in
: aquireWriteLock(). What should we do?

This is one of the reasons why i was suggesting in a java-dev thread that
*all* of the refrences to SegmentInfos be refactored out of IndexReader
and into the subclasses -- any attempt to access the SegmentInfos in a
MultiReader constructed from an IndexReader[] doesn't make sense -- and it
never has.  In past releases, any operation in a MultiReader constructed
from subReaders that attempted to use SegmentInfos (like aquireWriteLock)
would never work properly (at best it would lock the first subReader)

	...hmm, looking at this more and getting more confused...

I was going to say that this was all a red herring and couldn't cause the
NPE, since the only time acquireWriteLock is (or ever has been) called is
when the IndexReader knows it owns the directory, but a quick skim of
MultiReader on the trunk to try and find where it tells the super class it
doesn't own the directory made me realize it's not there ... MultiReader
extends MultiSegmentReader and passes info up the chain of super
constructors about ot closing the Directory on close, but there is no info
passed up about not owning the directory.

skimming 2.2 i don't see how this ever worked "corectly" ... it wouldn't
NPE, but it looks like any attempt at doing anything on a MultiReader
would always aqcuire the write lock on the *first* sub reader, then
delegate to the correct subreader.

it appears that this is yet another flaw in the old impl exposed via the
refactoring done so far (and further motivation for continued refactoring
untill IndexReader is a glorified abstract class with no meat in it)

(can someone sanity check my assessment ... i'm a little dizzy from
flipping back and forth between various versions of IndexReader,
MultiReader and MultiSegmentReader)




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 22 07:55:46 2007
Return-Path: <java-user-return-29941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75923 invoked from network); 22 Aug 2007 07:55:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2007 07:55:45 -0000
Received: (qmail 79935 invoked by uid 500); 22 Aug 2007 07:55:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79910 invoked by uid 500); 22 Aug 2007 07:55:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79899 invoked by uid 99); 22 Aug 2007 07:55:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 00:55:36 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [82.146.123.134] (HELO villon.taktik.be) (82.146.123.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 07:55:34 +0000
Received: from localhost (localhost [127.0.0.1])
	by villon.taktik.be (Postfix) with ESMTP id 632352FA1227
	for <java-user@lucene.apache.org>; Wed, 22 Aug 2007 09:58:05 +0200 (CEST)
Received: from villon.taktik.be ([127.0.0.1])
 by localhost (villon.taktik.be [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 26590-01 for <java-user@lucene.apache.org>;
 Wed, 22 Aug 2007 09:57:59 +0200 (CEST)
Received: from [192.168.63.11] (unknown [192.168.63.11])
	by villon.taktik.be (Postfix) with ESMTP id 535A42FA11E4
	for <java-user@lucene.apache.org>; Wed, 22 Aug 2007 09:57:59 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.3)
To: java-user@lucene.apache.org
Message-Id: <68D086C2-DB43-4CF4-8914-68C8DE709A65@taktik.be>
Content-Type: multipart/alternative; boundary=Apple-Mail-15--991297625
From: Antoine Baudoux <ab@taktik.be>
Subject: How to rename fields in an index
Date: Wed, 22 Aug 2007 09:54:59 +0200
X-Mailer: Apple Mail (2.752.3)
X-Virus-Scanned: by amavisd-new at taktik.be
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-15--991297625
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=ISO-8859-1;
	delsp=yes;
	format=flowed

Is it possible to rename fields in an existing index without having =20
to re-index all documents?

thx


--
Antoine Baudoux
Development Manager
ab@taktik.be
T=E9l.: +32 2 333 58 44
GSM: +32 499 534 538
Fax.: +32 2 648 16 53



--Apple-Mail-15--991297625--

From java-user-return-29942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 22 08:13:32 2007
Return-Path: <java-user-return-29942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79451 invoked from network); 22 Aug 2007 08:13:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2007 08:13:30 -0000
Received: (qmail 4734 invoked by uid 500); 22 Aug 2007 08:13:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4680 invoked by uid 500); 22 Aug 2007 08:13:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4669 invoked by uid 99); 22 Aug 2007 08:13:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 01:13:21 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of buschmic@gmail.com designates 64.233.184.224 as permitted sender)
Received: from [64.233.184.224] (HELO wr-out-0506.google.com) (64.233.184.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 08:13:19 +0000
Received: by wr-out-0506.google.com with SMTP id 41so68457wry
        for <java-user@lucene.apache.org>; Wed, 22 Aug 2007 01:12:59 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=TWwExJS01SNczQubgq40QSpMFFADU+e/B9/Wo1Uk1MkW8mQXMgJfbX6Cc09JijD6aNoYbrhKrDmj3BXL6kgzOzlz5XOMe9XRUDoJbpQ2fUmzhq3tB9tfoYEKft3jWZT0S1eHSxTeETfzcY0rJJ4lWIBku2i3LbRHTTF8kW36V1w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=LIgY3oc0sFIyK47ul7TOjMhFvlORW4FFgseFFuMg7TP+tf1rcZsxhABKJTFNz8vO7hKJ3ecIiSannnqzHYIGo+zG7VbDVEAnxkW8WHGBrLADF0GGf3Swn8mBHZZEV1tCBbBiDKmqLq6v3OhU/kqRgtmewYGWOKZq/xnVijqf1ic=
Received: by 10.90.49.1 with SMTP id w1mr3873965agw.1187770378656;
        Wed, 22 Aug 2007 01:12:58 -0700 (PDT)
Received: from ?192.168.0.100? ( [24.80.67.88])
        by mx.google.com with ESMTPS id 44sm480066wri.2007.08.22.01.12.50
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 22 Aug 2007 01:12:52 -0700 (PDT)
Message-ID: <46CBEFCB.1020505@gmail.com>
Date: Wed, 22 Aug 2007 01:11:55 -0700
From: Michael Busch <buschmic@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: NPE in IndexReader
References: <46CA9DE8.6020903@hauk-sasko.de> <46CB5BD7.4060204@gmail.com>  <6e3ae6310708211452k7601106s68519f80926cc1d9@mail.gmail.com>  <Pine.LNX.4.58.0708211703510.4258@hal.rescomp.berkeley.edu> <6e3ae6310708211717x50f59edakfddd87c65f920558@mail.gmail.com> <Pine.LNX.4.58.0708211842240.15046@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0708211842240.15046@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Chris Hostetter wrote:
> 
> This is one of the reasons why i was suggesting in a java-dev thread that
> *all* of the refrences to SegmentInfos be refactored out of IndexReader
> and into the subclasses -- any attempt to access the SegmentInfos in a

OK, I'm convinced that we should refactor segmentInfos into the
subclasses. I'll open a JIRA issue and take it.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 22 08:28:48 2007
Return-Path: <java-user-return-29943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84072 invoked from network); 22 Aug 2007 08:28:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2007 08:28:46 -0000
Received: (qmail 21805 invoked by uid 500); 22 Aug 2007 08:28:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21754 invoked by uid 500); 22 Aug 2007 08:28:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21743 invoked by uid 99); 22 Aug 2007 08:28:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 01:28:38 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.99.193.26] (HELO ctsintcosxib.cts.com) (203.99.193.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 08:28:35 +0000
Received: from CTSCNSHNSXUA.cts.com ([10.225.68.4]) by CTSINCHNSXUL.cts.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 22 Aug 2007 13:58:01 +0530
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
Subject: RE: How to rename fields in an index
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable
Date: Wed, 22 Aug 2007 16:27:59 +0800
Message-ID: <EAAF003CE5E5094DB92052DD646CAD8E018E2028@CTSCNSHNSXUA.cts.com>
In-Reply-To: <68D086C2-DB43-4CF4-8914-68C8DE709A65@taktik.be>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to rename fields in an index
Thread-Index: AcfkkgUhwj0TVwE0SiSgc9bDaADn3QABBo2w
From: <Jun.Chen@cognizant.com>
To: <java-user@lucene.apache.org>
Cc: <ab@taktik.be>
X-OriginalArrivalTime: 22 Aug 2007 08:28:01.0739 (UTC) FILETIME=[5A7801B0:01C7E496]
X-Virus-Checked: Checked by ClamAV on apache.org


Document.removefield()
Then, add() ?
Is this your mean?


-----Original Message-----
From: Antoine Baudoux [mailto:ab@taktik.be]=0D
Sent: 2007=C4=EA8=D4=C222=C8=D5 3:55 =CF=C2=CE=E7=BA=C3,Daniel
To: java-user@lucene.apache.org
Subject: How to rename fields in an index

Is it possible to rename fields in an existing index without having =0D
to re-index all documents?

thx


--
Antoine Baudoux
Development Manager
ab@taktik.be
T=A8=A6l.: +32 2 333 58 44
GSM: +32 499 534 538
Fax.: +32 2 648 16 53



This e-mail and any files transmitted with it are for the sole use of the=
 intended recipient(s) and may contain confidential and privileged=
 information.
If you are not the intended recipient, please contact the sender by reply=
 e-mail and destroy all copies of the original message.=0D
Any unauthorized review, use, disclosure, dissemination, forwarding,=
 printing or copying of this email or any action taken in reliance on this=
 e-mail is strictly=0D
prohibited and may be unlawful.

  Visit us at http://www.cognizant.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 22 08:39:38 2007
Return-Path: <java-user-return-29944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88131 invoked from network); 22 Aug 2007 08:39:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2007 08:39:37 -0000
Received: (qmail 40645 invoked by uid 500); 22 Aug 2007 08:39:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40092 invoked by uid 500); 22 Aug 2007 08:39:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40080 invoked by uid 99); 22 Aug 2007 08:39:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 01:39:28 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [82.146.123.134] (HELO villon.taktik.be) (82.146.123.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 08:39:25 +0000
Received: from localhost (localhost [127.0.0.1])
	by villon.taktik.be (Postfix) with ESMTP id 82F402FA2113;
	Wed, 22 Aug 2007 10:41:58 +0200 (CEST)
Received: from villon.taktik.be ([127.0.0.1])
 by localhost (villon.taktik.be [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 26993-07; Wed, 22 Aug 2007 10:41:51 +0200 (CEST)
Received: from [192.168.63.11] (unknown [192.168.63.11])
	by villon.taktik.be (Postfix) with ESMTP id 0F8E42FA20C5;
	Wed, 22 Aug 2007 10:41:51 +0200 (CEST)
In-Reply-To: <EAAF003CE5E5094DB92052DD646CAD8E018E2028@CTSCNSHNSXUA.cts.com>
References: <EAAF003CE5E5094DB92052DD646CAD8E018E2028@CTSCNSHNSXUA.cts.com>
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Type: multipart/alternative; boundary=Apple-Mail-17--988665927
Message-Id: <56583697-493C-47ED-A8BF-846DAE92B30B@taktik.be>
Cc: <java-user@lucene.apache.org>
From: Antoine Baudoux <ab@taktik.be>
Subject: Re: How to rename fields in an index
Date: Wed, 22 Aug 2007 10:38:51 +0200
To: <Jun.Chen@cognizant.com> <Jun.Chen@cognizant.com>
X-Mailer: Apple Mail (2.752.3)
X-Virus-Scanned: by amavisd-new at taktik.be
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-17--988665927
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=GB2312;
	delsp=yes;
	format=flowed

No, i just want to change the field labels.

For example, i have a "Keyword" field that i want to rename into "kw".
--
Antoine Baudoux
Development Manager
ab@taktik.be
T=A8=A6l.: +32 2 333 58 44
GSM: +32 499 534 538
Fax.: +32 2 648 16 53


On 22 Aug 2007, at 10:27, <Jun.Chen@cognizant.com> =20
<Jun.Chen@cognizant.com> wrote:

>
> Document.removefield()
> Then, add() ?
> Is this your mean?
>
>
> -----Original Message-----
> From: Antoine Baudoux [mailto:ab@taktik.be]
> Sent: 2007=C4=EA8=D4=C222=C8=D5 3:55 =CF=C2=CE=E7=BA=C3,Daniel
> To: java-user@lucene.apache.org
> Subject: How to rename fields in an index
>
> Is it possible to rename fields in an existing index without having
> to re-index all documents?
>
> thx
>
>
> --
> Antoine Baudoux
> Development Manager
> ab@taktik.be
> T=A8=A6l.: +32 2 333 58 44
> GSM: +32 499 534 538
> Fax.: +32 2 648 16 53
>
>
>
> This e-mail and any files transmitted with it are for the sole use =20
> of the intended recipient(s) and may contain confidential and =20
> privileged information.
> If you are not the intended recipient, please contact the sender by =20=

> reply e-mail and destroy all copies of the original message.
> Any unauthorized review, use, disclosure, dissemination, =20
> forwarding, printing or copying of this email or any action taken =20
> in reliance on this e-mail is strictly
> prohibited and may be unlawful.
>
>   Visit us at http://www.cognizant.com
>


--Apple-Mail-17--988665927--

From java-user-return-29945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 22 10:39:06 2007
Return-Path: <java-user-return-29945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15053 invoked from network); 22 Aug 2007 10:39:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2007 10:39:05 -0000
Received: (qmail 82040 invoked by uid 500); 22 Aug 2007 10:38:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82014 invoked by uid 500); 22 Aug 2007 10:38:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82003 invoked by uid 99); 22 Aug 2007 10:38:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 03:38:55 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [213.136.47.147] (HELO m2.polopoly.com) (213.136.47.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 10:39:30 +0000
Received: from [172.31.255.119] (loesh@dhcp-255-119.polopoly.com [172.31.255.119])
	by m2.polopoly.com (8.13.5/8.13.5) with ESMTP id l7MARJrF024346
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 22 Aug 2007 12:27:19 +0200
Message-ID: <46CC112C.8040200@kth.se>
Date: Wed, 22 Aug 2007 12:34:20 +0200
From: loesh <loesh@kth.se>
User-Agent: Icedove 1.5.0.12 (X11/20070607)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Query.toString() and QueryParser.parse()
References: <46CA9DE8.6020903@hauk-sasko.de> <46CB5BD7.4060204@gmail.com>  <6e3ae6310708211452k7601106s68519f80926cc1d9@mail.gmail.com>  <Pine.LNX.4.58.0708211703510.4258@hal.rescomp.berkeley.edu> <6e3ae6310708211717x50f59edakfddd87c65f920558@mail.gmail.com> <Pine.LNX.4.58.0708211842240.15046@hal.rescomp.berkeley.edu> <46CBEFCB.1020505@gmail.com>
In-Reply-To: <46CBEFCB.1020505@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

 Hi, I am wondering if QueryParser.parse(...) is supposed to be able to 
recreate any given query using something like:

Query query = //creating query somehow.
Queryparser qp = //creatign a query parser

String queryString = query.toString();

Query parsed = qp.parse(queryString);
String parsedString = parsed.toString();

boolean equals = parsedString().equals(queryString);

Maybe not the clearest of questions. but should "equals" in the above 
example allways be true for any Query?

Sincerley,
Fredrik Sthl


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 22 10:50:12 2007
Return-Path: <java-user-return-29946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19349 invoked from network); 22 Aug 2007 10:50:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2007 10:50:12 -0000
Received: (qmail 91177 invoked by uid 500); 22 Aug 2007 10:50:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91136 invoked by uid 500); 22 Aug 2007 10:50:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91125 invoked by uid 99); 22 Aug 2007 10:50:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 03:50:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 10:50:01 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 524C330EFC19; Wed, 22 Aug 2007 04:49:40 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.5] (va-76-6-215-202.dhcp.embarqhsd.net [76.6.215.202])
	by ehatchersolutions.com (Postfix) with ESMTP id C012230EFC18
	for <java-user@lucene.apache.org>; Wed, 22 Aug 2007 04:49:35 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <46CC112C.8040200@kth.se>
References: <46CA9DE8.6020903@hauk-sasko.de> <46CB5BD7.4060204@gmail.com>  <6e3ae6310708211452k7601106s68519f80926cc1d9@mail.gmail.com>  <Pine.LNX.4.58.0708211703510.4258@hal.rescomp.berkeley.edu> <6e3ae6310708211717x50f59edakfddd87c65f920558@mail.gmail.com> <Pine.LNX.4.58.0708211842240.15046@hal.rescomp.berkeley.edu> <46CBEFCB.1020505@gmail.com> <46CC112C.8040200@kth.se>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <BC135731-4ACB-472A-8D05-17945BAD1E05@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Query.toString() and QueryParser.parse()
Date: Wed, 22 Aug 2007 06:49:32 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.6 required=5.0 tests=BAYES_00,RCVD_IN_SORBS_DUL 
	autolearn=no version=3.1.1


On Aug 22, 2007, at 6:34 AM, loesh wrote:
> Query parsed = qp.parse(queryString);
> String parsedString = parsed.toString();
>
> boolean equals = parsedString().equals(queryString);
>
> Maybe not the clearest of questions. but should "equals" in the  
> above example allways be true for any Query?

No, that never has been a design goal of Query.toString(), and there  
many cases that it fails.  QueryParser only supports a fraction of  
the Query subclasses out there, so any Query subclass it does not  
support, of course, will fail to parse as you're expecting.

I understand the benefit such a feature would have, though.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 22 10:59:47 2007
Return-Path: <java-user-return-29947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22907 invoked from network); 22 Aug 2007 10:59:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2007 10:59:46 -0000
Received: (qmail 99251 invoked by uid 500); 22 Aug 2007 10:59:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98410 invoked by uid 500); 22 Aug 2007 10:59:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98399 invoked by uid 99); 22 Aug 2007 10:59:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 03:59:37 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [213.136.47.147] (HELO m2.polopoly.com) (213.136.47.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 11:00:12 +0000
Received: from [172.31.255.119] (loesh@dhcp-255-119.polopoly.com [172.31.255.119])
	by m2.polopoly.com (8.13.5/8.13.5) with ESMTP id l7MAm1v5025223
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 22 Aug 2007 12:48:01 +0200
Message-ID: <46CC1606.1070206@kth.se>
Date: Wed, 22 Aug 2007 12:55:02 +0200
From: loesh <loesh@kth.se>
User-Agent: Icedove 1.5.0.12 (X11/20070607)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Query.toString() and QueryParser.parse()
References: <46CA9DE8.6020903@hauk-sasko.de> <46CB5BD7.4060204@gmail.com>  <6e3ae6310708211452k7601106s68519f80926cc1d9@mail.gmail.com>  <Pine.LNX.4.58.0708211703510.4258@hal.rescomp.berkeley.edu> <6e3ae6310708211717x50f59edakfddd87c65f920558@mail.gmail.com> <Pine.LNX.4.58.0708211842240.15046@hal.rescomp.berkeley.edu> <46CBEFCB.1020505@gmail.com> <46CC112C.8040200@kth.se> <BC135731-4ACB-472A-8D05-17945BAD1E05@ehatchersolutions.com>
In-Reply-To: <BC135731-4ACB-472A-8D05-17945BAD1E05@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Erik Hatcher wrote:
>
> On Aug 22, 2007, at 6:34 AM, loesh wrote:
>> Query parsed = qp.parse(queryString);
>> String parsedString = parsed.toString();
>>
>> boolean equals = parsedString().equals(queryString);
>>
>> Maybe not the clearest of questions. but should "equals" in the above 
>> example allways be true for any Query?
>
> No, that never has been a design goal of Query.toString(), and there 
> many cases that it fails.  QueryParser only supports a fraction of the 
> Query subclasses out there, so any Query subclass it does not support, 
> of course, will fail to parse as you're expecting.
>
> I understand the benefit such a feature would have, though.
>
>     Erik
>
>
Ok, thanks for the fast reply. I kind of figured it was not supposed to 
be that way but it would have some benefits.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 22 11:50:28 2007
Return-Path: <java-user-return-29948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48829 invoked from network); 22 Aug 2007 11:50:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2007 11:50:25 -0000
Received: (qmail 63540 invoked by uid 500); 22 Aug 2007 11:50:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63497 invoked by uid 500); 22 Aug 2007 11:50:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63486 invoked by uid 99); 22 Aug 2007 11:50:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 04:50:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sand.chawla@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 11:50:15 +0000
Received: by wa-out-1112.google.com with SMTP id j5so173546wah
        for <java-user@lucene.apache.org>; Wed, 22 Aug 2007 04:49:55 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=fBUlshVJiXc0Iy2O9ng6j5yUTZIqj/jFB+CnHMgXz0eLcH5xV+BWywpOXwD2qoDG86CmdyAuXHSN8HR2F9mQM6H5uOKMVbyTpBjqWoqJEsCesMNWMZQ/B5TXYQ3xCQ+YT7+K9zK8k3aK0ULtnxHyW9gT035Nz/fO3Moa+a8HaEo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=Z0fCBNjrc7RfDATJeu8m9tiKP+KgRfhyLf8O6AAjimjUhgNvQU+92xFCqwPKJaXv+T8fiwOIlVYNmOYz5geKSvWdDhFQYmczEecDLJLhf/NjJSY3w80iDPzM3WZG6lwbB8uUg2LSjfRAZ4140XPBazjTKoe4JVAY52wGmDGGQMo=
Received: by 10.115.90.1 with SMTP id s1mr588376wal.1187783395038;
        Wed, 22 Aug 2007 04:49:55 -0700 (PDT)
Received: by 10.114.127.15 with HTTP; Wed, 22 Aug 2007 04:49:55 -0700 (PDT)
Message-ID: <a70e4c2b0708220449w572c04d9h562e5f6e571afb53@mail.gmail.com>
Date: Wed, 22 Aug 2007 17:19:55 +0530
From: "sandeep chawla" <sand.chawla@gmail.com>
To: java-user@lucene.apache.org
Subject: reg-ex based stop word removal
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi  ,

I am working on a search application . This application requires me to
implement a stop filter
using a stop word list. I have implemented a stop filter using lucene's API.

I want to take my application one step further.

I want to remove all the words which match a particular regular expression.

For Ex- if my  expression is a?d. I should be able to remove words
like  "and", "ad" ,"abd",
"acd"  etc etc.

I would appreciate any help/suggestions in this matter

thanks
sandeep

-- 
SANDEEP CHAWLA
House No- 23                     			
10th main 					
BTM 1st  Stage     					
Bangalore						Mobile: 91-9986150603

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 22 12:01:14 2007
Return-Path: <java-user-return-29949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54010 invoked from network); 22 Aug 2007 12:01:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2007 12:01:13 -0000
Received: (qmail 85833 invoked by uid 500); 22 Aug 2007 12:01:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84835 invoked by uid 500); 22 Aug 2007 12:01:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84824 invoked by uid 99); 22 Aug 2007 12:01:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 05:01:03 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.162.48.15] (HELO soufre.accelance.net) (213.162.48.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 12:01:02 +0000
Received: from [192.168.3.108] (LSt-Amand-152-32-31-90.w82-127.abo.wanadoo.fr [82.127.74.90])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by soufre.accelance.net (Postfix) with ESMTP id 3A6A85DF1
	for <java-user@lucene.apache.org>; Wed, 22 Aug 2007 14:00:37 +0200 (CEST)
Message-ID: <46CC2561.3060603@garambrogne.net>
Date: Wed, 22 Aug 2007 14:00:33 +0200
From: Mathieu Lecarme <mathieu@garambrogne.net>
User-Agent: Thunderbird 2.0.0.6 (X11/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: reg-ex based stop word removal
References: <a70e4c2b0708220449w572c04d9h562e5f6e571afb53@mail.gmail.com>
In-Reply-To: <a70e4c2b0708220449w572c04d9h562e5f6e571afb53@mail.gmail.com>
X-Enigmail-Version: 0.95.3
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

sandeep chawla a crit :
> Hi  ,
>
> I am working on a search application . This application requires me to
> implement a stop filter
> using a stop word list. I have implemented a stop filter using lucene's API.
>
> I want to take my application one step further.
>
> I want to remove all the words which match a particular regular expression.
>
> For Ex- if my  expression is a?d. I should be able to remove words
> like  "and", "ad" ,"abd",
> "acd"  etc etc.
>
> I would appreciate any help/suggestions in this matter
>
> thanks
> sandeep
>
>   
implement a TokenFilter
http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org/apache/lucene/analysis/TokenFilter.html

M.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 22 12:04:25 2007
Return-Path: <java-user-return-29950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56929 invoked from network); 22 Aug 2007 12:04:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2007 12:04:24 -0000
Received: (qmail 93780 invoked by uid 500); 22 Aug 2007 12:04:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93746 invoked by uid 500); 22 Aug 2007 12:04:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93735 invoked by uid 99); 22 Aug 2007 12:04:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 05:04:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 12:04:12 +0000
Received: from [192.168.0.254] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id l7MC3uN24929
	for <java-user@lucene.apache.org>; Wed, 22 Aug 2007 07:03:56 -0500
Message-ID: <46CC2621.7070508@getopt.org>
Date: Wed, 22 Aug 2007 14:03:45 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to rename fields in an index
References: <EAAF003CE5E5094DB92052DD646CAD8E018E2028@CTSCNSHNSXUA.cts.com> <56583697-493C-47ED-A8BF-846DAE92B30B@taktik.be>
In-Reply-To: <56583697-493C-47ED-A8BF-846DAE92B30B@taktik.be>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Antoine Baudoux wrote:
> No, i just want to change the field labels.
> 
> For example, i have a "Keyword" field that i want to rename into "kw".

(note: this is a low-level hack, you can damage your index beyond repair).

Take a look at FieldInfos class, and how it creates the *.fnm file for 
each segment. You can re-write these fnm files using new field names. In 
case of compound indexes you will need to "explode" them first to a 
non-compound format.

Make sure you write out these files using exactly the same order of 
fields, otherwise you will end up in big trouble ;)


-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 22 12:11:06 2007
Return-Path: <java-user-return-29951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61093 invoked from network); 22 Aug 2007 12:11:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2007 12:11:05 -0000
Received: (qmail 3008 invoked by uid 500); 22 Aug 2007 12:10:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2967 invoked by uid 500); 22 Aug 2007 12:10:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2956 invoked by uid 99); 22 Aug 2007 12:10:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 05:10:55 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 12:11:29 +0000
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 22153227 for java-user@lucene.apache.org; Wed, 22 Aug 2007 14:10:32 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C7E4B5.6FDFCC33"
Subject: RE: reg-ex based stop word removal
Date: Wed, 22 Aug 2007 14:10:32 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01ECDBC0@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <A955EA1F8FE31749AEC8C998082F6C7C01ECDBC0@hai01.hippo.local>
Thread-Topic: reg-ex based stop word removal
Thread-Index: AcfktCOEMgWNLGbXRvmbqD08C4NfbQAASNjh
References: <a70e4c2b0708220449w572c04d9h562e5f6e571afb53@mail.gmail.com> <46CC2561.3060603@garambrogne.net>
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7E4B5.6FDFCC33
Content-Type: text/plain;
	charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable


>
"implement a TokenFilter
http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org=
/apache/lucene/analysis/TokenFilter.html"


You might though want to check the performance implications :-)=20





------_=_NextPart_001_01C7E4B5.6FDFCC33
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C7E4B5.6FDFCC33--

From java-user-return-29952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 22 12:23:44 2007
Return-Path: <java-user-return-29952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67669 invoked from network); 22 Aug 2007 12:23:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2007 12:23:42 -0000
Received: (qmail 26347 invoked by uid 500); 22 Aug 2007 12:23:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26309 invoked by uid 500); 22 Aug 2007 12:23:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26298 invoked by uid 99); 22 Aug 2007 12:23:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 05:23:33 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [82.146.123.134] (HELO villon.taktik.be) (82.146.123.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 12:24:06 +0000
Received: from localhost (localhost [127.0.0.1])
	by villon.taktik.be (Postfix) with ESMTP id 93B7F2FA8DE5
	for <java-user@lucene.apache.org>; Wed, 22 Aug 2007 14:26:01 +0200 (CEST)
Received: from villon.taktik.be ([127.0.0.1])
 by localhost (villon.taktik.be [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 00333-09 for <java-user@lucene.apache.org>;
 Wed, 22 Aug 2007 14:25:54 +0200 (CEST)
Received: from [192.168.63.11] (unknown [192.168.63.11])
	by villon.taktik.be (Postfix) with ESMTP id AFD362FA8D96
	for <java-user@lucene.apache.org>; Wed, 22 Aug 2007 14:25:54 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <46CC2621.7070508@getopt.org>
References: <EAAF003CE5E5094DB92052DD646CAD8E018E2028@CTSCNSHNSXUA.cts.com> <56583697-493C-47ED-A8BF-846DAE92B30B@taktik.be> <46CC2621.7070508@getopt.org>
Content-Type: multipart/alternative; boundary=Apple-Mail-22--975223248
Message-Id: <EC8CF44C-ADB1-4DBE-AB4C-F4D035AB3632@taktik.be>
From: Antoine Baudoux <ab@taktik.be>
Subject: Re: How to rename fields in an index
Date: Wed, 22 Aug 2007 14:22:54 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Scanned: by amavisd-new at taktik.be
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-22--975223248
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=ISO-8859-1;
	delsp=yes;
	format=flowed

Thanks!
--
Antoine Baudoux
Development Manager
ab@taktik.be
T=E9l.: +32 2 333 58 44
GSM: +32 499 534 538
Fax.: +32 2 648 16 53


On 22 Aug 2007, at 14:03, Andrzej Bialecki wrote:

> Antoine Baudoux wrote:
>> No, i just want to change the field labels.
>> For example, i have a "Keyword" field that i want to rename into =20
>> "kw".
>
> (note: this is a low-level hack, you can damage your index beyond =20
> repair).
>
> Take a look at FieldInfos class, and how it creates the *.fnm file =20
> for each segment. You can re-write these fnm files using new field =20
> names. In case of compound indexes you will need to "explode" them =20
> first to a non-compound format.
>
> Make sure you write out these files using exactly the same order of =20=

> fields, otherwise you will end up in big trouble ;)
>
>
> --=20
> Best regards,
> Andrzej Bialecki     <><
>  ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--Apple-Mail-22--975223248--

From java-user-return-29953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 22 12:25:46 2007
Return-Path: <java-user-return-29953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68649 invoked from network); 22 Aug 2007 12:25:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2007 12:25:45 -0000
Received: (qmail 29212 invoked by uid 500); 22 Aug 2007 12:25:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28494 invoked by uid 500); 22 Aug 2007 12:25:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28483 invoked by uid 99); 22 Aug 2007 12:25:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 05:25:36 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 80.76.149.213 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.213] (HELO ch-smtp02.sth.basefarm.net) (80.76.149.213)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 12:26:10 +0000
Received: from [83.249.118.113] (port=62165 helo=[192.168.2.101])
	by ch-smtp02.sth.basefarm.net with esmtp (Exim 4.66)
	(envelope-from <karl.wettin@gmail.com>)
	id 1INpGn-0008CJ-9C
	for java-user@lucene.apache.org; Wed, 22 Aug 2007 14:25:13 +0200
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <1187613226.27279.1206273727@webmail.messagingengine.com>
References: <10E30051-CF4A-4F72-98BA-375487059F60@gmail.com> <1187613226.27279.1206273727@webmail.messagingengine.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <47CC6E2A-A3BB-412E-8020-F148B6C3458E@gmail.com>
Content-Transfer-Encoding: 7bit
From: Karl Wettin <karl.wettin@gmail.com>
Subject: Re: Lockless read-only deletions in IndexReader?
Date: Wed, 22 Aug 2007 14:19:26 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Originating-IP: 83.249.118.113
X-Scan-Result: No virus found in message 1INpGn-0008CJ-9C.
X-Scan-Signature: ch-smtp02.sth.basefarm.net 1INpGn-0008CJ-9C a468aaa0b6bab2d09f05ac677bd676b4
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Mike, I'll dig around a bit and report back what I did.


20 aug 2007 kl. 14.33 skrev Michael McCandless:

>
> "karl wettin" <karl.wettin@gmail.com> wrote:
>
>> I want to set documents in my IndexReader as deleted, but I will
>> never commit these deletions. Sort of a filter on a reader rather
>> than on a searcher, and no write-locks.
>
>> Perhaps I can pass down a IndexDeletionPolicy to my IndexWriter that
>> ignores deletions from the IndexReader(s) to avoid the lock?
>
> I don't think this will easily work.  The IndexDeletionPolicy just has
> control on which commits should be deleted.  So if you open a reader,
> do deletes, and close it, a new commit (segments_N+1) is created.
>
> You could have your deletion policy at this point preserve the
> previous commit, but then there's no way to tell IndexWriter on
> opening the index to open the previous commit (it always opens the
> most recent commit).
>
> I guess if IndexWriter/IndexReader could open old commits, and if your
> app could separately keep track of which commits should be ignored
> (because they were from readers), then you could do it?
>
> The problem is the reader will still write the commit into the
> directory on close...
>
>> Changing the directory lock factory it will effect the IndexWriter
>> locks too? So that would not be an option, or?
>
> Could you just use a NullLockFactory on the reader?  This way when you
> do deletes in the reader and it acquires a write lock it doesn't in
> fact acquire the write lock (as seen by IndexWriter which would
> presumably be using a "real" LockFactory)?
>
> But, the reader will still write into the directory and stomp on any
> IndexWriter that was also committing ....
>
>> I could go hacking in IndexReader, definalizing it for decoration of
>> deleteDocument(int), or something like that, but would really
>> prefere not to.
>
> Yeah I think it may just be cleanest to modify IndexReader to not
> acquire the write lock nor commit its changes to the Directory on
> close.
>
>> This is for a transactional layer on top of Lucene, where I combine
>> the system index with a transactional index. Updated documents that
>> are represented in the transaction index must be filtered out from
>> the system index at IndexReader level without creating
>> write-locks. undeleteAll() would be an option if there was no locks
>> -- more than one transaction could be updating documents at the same
>> time.
>
> Sounds wild!
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 22 12:38:45 2007
Return-Path: <java-user-return-29954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73697 invoked from network); 22 Aug 2007 12:38:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2007 12:38:44 -0000
Received: (qmail 53133 invoked by uid 500); 22 Aug 2007 12:38:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52767 invoked by uid 500); 22 Aug 2007 12:38:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52756 invoked by uid 99); 22 Aug 2007 12:38:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 05:38:35 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 80.76.149.212 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.212] (HELO ch-smtp01.sth.basefarm.net) (80.76.149.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 12:38:34 +0000
Received: from [83.249.118.113] (port=62198 helo=[192.168.2.101])
	by ch-smtp01.sth.basefarm.net with esmtp (Exim 4.66)
	(envelope-from <karl.wettin@gmail.com>)
	id 1INpTO-0006qK-6D
	for java-user@lucene.apache.org; Wed, 22 Aug 2007 14:38:13 +0200
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <220555190708210410s7da93f36r2a61eaf99ba1c0c7@mail.gmail.com>
References: <A955EA1F8FE31749AEC8C998082F6C7C01AC1377@hai01.hippo.local> <54690.24754.qm@web31711.mail.mud.yahoo.com> <220555190708210410s7da93f36r2a61eaf99ba1c0c7@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2DE01B52-04B8-49C7-9CC3-3B744B59A3EE@gmail.com>
Content-Transfer-Encoding: 7bit
From: Karl Wettin <karl.wettin@gmail.com>
Subject: Re: lucene suggest
Date: Wed, 22 Aug 2007 14:32:22 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Originating-IP: 83.249.118.113
X-Scan-Result: No virus found in message 1INpTO-0006qK-6D.
X-Scan-Signature: ch-smtp01.sth.basefarm.net 1INpTO-0006qK-6D 1664096ff99173f8c1dc95dabc791811
X-Virus-Checked: Checked by ClamAV on apache.org


21 aug 2007 kl. 13.10 skrev Jens Grivolla:

> On 8/21/07, Heba Farouk <heba.farouk@yahoo.com> wrote:
>> the documents are not duplicated, i mean the hits (assume that 2  
>> documents have the same subject but with different authors, so if  
>> i'm searching the subject, the returned hits will have duplicates )
>> i was asking if i can remove duplicates from the hits??
>
> You may not want to work with documents at all (where you have the
> duplicates), but rather with the terms in your index directly.  Take a
> look at WildcardTermEnum etc.

My favorite solution for this is a stand alone trie, and such a  
solution is available in LUCENE-625.

Another way is to create an ngram-index.

It is usually a good idea to create an "a priori" corpus with a  
limited set of data. I prefere common user queries rather than items  
in the index. Especially if your corpus is large and you have a lot  
of server load.

Try LUCENE-550 as a priori index. My guess is that it would  
outperform a RAMDirectory 20x at 25,000 title-sized (40 chars avg)  
documents.


-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 22 13:15:31 2007
Return-Path: <java-user-return-29955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88553 invoked from network); 22 Aug 2007 13:15:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2007 13:15:29 -0000
Received: (qmail 23918 invoked by uid 500); 22 Aug 2007 13:15:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23877 invoked by uid 500); 22 Aug 2007 13:15:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23866 invoked by uid 99); 22 Aug 2007 13:15:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 06:15:19 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ionathan@gmail.com designates 209.85.198.190 as permitted sender)
Received: from [209.85.198.190] (HELO rv-out-0910.google.com) (209.85.198.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 13:15:19 +0000
Received: by rv-out-0910.google.com with SMTP id k20so167574rvb
        for <java-user@lucene.apache.org>; Wed, 22 Aug 2007 06:14:59 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=YybUlm3MDMEtmbY7oUK/HdURmDWgbS/WDEDM7Xq2HDLbhuYxRup56LfmPc3SYUjN+t4DexWbzPSrKxD8d+C8BNKmvsqEzlnBJzsy/GiXEE2AFr0rdAkcXoU582JwtClm0YdyvH5rOkoWjUGt09ESKo2Kk8oqjG4eu38BoKxqSWo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=uRND9xodxrU1wBj1Yiz6mQQkS5NrfL0LLpSidwqSZ7YreIYYA45YRv2nLv4HR7eN9TiVuJUecNOwXc/2+f4yRJu0kAmUyM4PV0sZKHbiv2+8TUAWhY8g01g3cytECs2fu3OA66S7H3emGYzCdvcuGTOpKXEh9GzblqUBe8bmRv4=
Received: by 10.114.75.1 with SMTP id x1mr644790waa.1187788498979;
        Wed, 22 Aug 2007 06:14:58 -0700 (PDT)
Received: by 10.114.145.8 with HTTP; Wed, 22 Aug 2007 06:14:58 -0700 (PDT)
Message-ID: <6dd2bfeb0708220614y4944b166i1643f7d9f6e5bc3e@mail.gmail.com>
Date: Wed, 22 Aug 2007 10:14:58 -0300
From: "Jonathan Ariel" <ionathan@gmail.com>
To: java-user@lucene.apache.org
Subject: Indexing
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_105583_23923942.1187788498942"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_105583_23923942.1187788498942
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
I'm new to this list. So first of all Hello to everyone!

So right now I have a little issue I would like to discuss with you.
Suppose that your are in a really big application where the data in your
database is updated really fast. I reindex lucene every 5 min but since my
application lists everything from lucene there are like 5 minutes (in the
worse case) where I don't see new staff.
What do you think would be the best aproach to this problem?

Thanks!

Jonathan

------=_Part_105583_23923942.1187788498942--

From java-user-return-29956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 22 13:21:32 2007
Return-Path: <java-user-return-29956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96995 invoked from network); 22 Aug 2007 13:21:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2007 13:21:31 -0000
Received: (qmail 52882 invoked by uid 500); 22 Aug 2007 13:21:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52853 invoked by uid 500); 22 Aug 2007 13:21:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52842 invoked by uid 99); 22 Aug 2007 13:21:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 06:21:21 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of amit.hanchinamani@gmail.com designates 64.233.162.232 as permitted sender)
Received: from [64.233.162.232] (HELO nz-out-0506.google.com) (64.233.162.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 13:21:21 +0000
Received: by nz-out-0506.google.com with SMTP id i28so87905nzi
        for <java-user@lucene.apache.org>; Wed, 22 Aug 2007 06:21:01 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=mqLzJudvYw2UNDzg7dboG3BIAm4+HzW30orBqqUxELv2NOC3/j5wZ/wASBFyKGMwjdU9FRzYciZYr/YgUwQ25xJvxvmvxuy12gYb7+uZG2DMI8mlIRQI/4RLFSiZyn9+8Zv0smP9mRgWwqlOfVh8tY9MdUErtc65Tob87fJm6PQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=I0r+rKMDgLPOPt7/3jcxLgDSwx39HH9EF4sIiTBtvNSBSw/g0b0c1DhYUTLnLpYlgRCfxwpm6THFJnf6ylwKCupB3ia0twqs0bnR5aQLhlMy6QyMfiAIF7jnL8FNrn5kxDdtsMhuIea2qX9QHXlcqfZ7AEtRPf8lkSUtwgYAg5g=
Received: by 10.114.209.1 with SMTP id h1mr658531wag.1187788859725;
        Wed, 22 Aug 2007 06:20:59 -0700 (PDT)
Received: by 10.114.191.20 with HTTP; Wed, 22 Aug 2007 06:20:59 -0700 (PDT)
Message-ID: <49923b590708220620l311ee41flef2cdbfa58033445@mail.gmail.com>
Date: Wed, 22 Aug 2007 15:20:59 +0200
From: Amit <amit.hanchinamani@gmail.com>
To: java-user@lucene.apache.org
Subject: search returns always the first indexed name
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34119_1146668.1187788859704"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_34119_1146668.1187788859704
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi

I am using lucene to index xml. I have already managed to index the
elements. I am indexing the <name> element of xml which have multiple <name>
elements in a document.
The code is as follows

Directory directory = new RAMDirectory();
        Analyzer analyzer = new StandardAnalyzer();
        Rules.mainnn();
        List<String> names = Rules.getNames();
        IndexWriter writer = new IndexWriter(directory, analyzer, true);
        Document contactDocument  = new Document();
        for(String s:names){
        contactDocument.add(new Field("name", s, Field.Store.YES,
Field.Index.TOKENIZED));
        }
        writer.addDocument(contactDocument);
        writer.close();

        Searcher searcher = new IndexSearcher(directory);

        String queryString = "level";

        QueryParser parser = new QueryParser("name", new
StandardAnalyzer());
        Query query = parser.parse(queryString);

        Hits hits = searcher.search(query);

        int hitCount = hits.length();
        if (hitCount == 0)
        {
          System.out.println("No matches were found for \"" + queryString +
"\"");
        }
        else
        {
          System.out.println("Hits for \"" + queryString
              + "\" were found in");
          for (int i = 0; i < hitCount; i++)
          {
            Document doc = hits.doc(i);
            System.out.println(" " + (i + 1) + ". " + doc.get("name"));
          }
        }

what I expect from the search is to give me the name of the string I am
storing with respect to the search string, but everytime I search for a
string the doc.get("name") always returns the first stored string as name. I
dont understand where have I done wrong, or should I use a different
approach..
Any help appreciated.

Cheers
Amit

------=_Part_34119_1146668.1187788859704--

From java-user-return-29957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 22 13:23:41 2007
Return-Path: <java-user-return-29957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97726 invoked from network); 22 Aug 2007 13:23:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2007 13:23:41 -0000
Received: (qmail 64616 invoked by uid 500); 22 Aug 2007 13:23:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64467 invoked by uid 500); 22 Aug 2007 13:23:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64443 invoked by uid 99); 22 Aug 2007 13:23:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 06:23:30 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 13:24:04 +0000
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 22159954 for java-user@lucene.apache.org; Wed, 22 Aug 2007 15:23:06 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C7E4BF.92D7670F"
Subject: RE: Indexing
Date: Wed, 22 Aug 2007 15:23:05 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01ECDBC5@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <A955EA1F8FE31749AEC8C998082F6C7C01ECDBC5@hai01.hippo.local>
Thread-Topic: Indexing
Thread-Index: AcfkvoLfa1mqVjr6T2St+NIy0uoScgAAN3V/
References: <6dd2bfeb0708220614y4944b166i1643f7d9f6e5bc3e@mail.gmail.com>
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7E4BF.92D7670F
Content-Type: text/plain;
	charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable

Do you reindex everything every 5 minutes from scratch? Can't you keep =
track of what changes, and only add/remove the correct parts to the =
index?

Ard

I'm new to this list. So first of all Hello to everyone!

So right now I have a little issue I would like to discuss with you.
Suppose that your are in a really big application where the data in your
database is updated really fast. I reindex lucene every 5 min but since =
my
application lists everything from lucene there are like 5 minutes (in =
the
worse case) where I don't see new staff.
What do you think would be the best aproach to this problem?

Thanks!

Jonathan





------_=_NextPart_001_01C7E4BF.92D7670F
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C7E4BF.92D7670F--

From java-user-return-29958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 22 13:27:05 2007
Return-Path: <java-user-return-29958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98729 invoked from network); 22 Aug 2007 13:27:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2007 13:27:03 -0000
Received: (qmail 74911 invoked by uid 500); 22 Aug 2007 13:26:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74851 invoked by uid 500); 22 Aug 2007 13:26:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74827 invoked by uid 99); 22 Aug 2007 13:26:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 06:26:47 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 13:26:45 +0000
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 22160145 for java-user@lucene.apache.org; Wed, 22 Aug 2007 15:26:23 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C7E4C0.075884CC"
Subject: RE: search returns always the first indexed name
Date: Wed, 22 Aug 2007 15:26:21 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01ECDBC6@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <A955EA1F8FE31749AEC8C998082F6C7C01ECDBC6@hai01.hippo.local>
Thread-Topic: search returns always the first indexed name
Thread-Index: Acfkv1qb75+nI5PSQh+oOlSpTtm0FAAAIWpf
References: <49923b590708220620l311ee41flef2cdbfa58033445@mail.gmail.com>
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7E4C0.075884CC
Content-Type: text/plain;
	charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable

Use getValues("name"), see

http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/org=
/apache/lucene/document/Document.html#getValues(java.lang.String)

Regards Ard


Hi

I am using lucene to index xml. I have already managed to index the
elements. I am indexing the <name> element of xml which have multiple =
<name>
elements in a document.
The code is as follows

Directory directory =3D new RAMDirectory();
        Analyzer analyzer =3D new StandardAnalyzer();
        Rules.mainnn();
        List<String> names =3D Rules.getNames();
        IndexWriter writer =3D new IndexWriter(directory, analyzer, =
true);
        Document contactDocument  =3D new Document();
        for(String s:names){
        contactDocument.add(new Field("name", s, Field.Store.YES,
Field.Index.TOKENIZED));
        }
        writer.addDocument(contactDocument);
        writer.close();

        Searcher searcher =3D new IndexSearcher(directory);

        String queryString =3D "level";

        QueryParser parser =3D new QueryParser("name", new
StandardAnalyzer());
        Query query =3D parser.parse(queryString);

        Hits hits =3D searcher.search(query);

        int hitCount =3D hits.length();
        if (hitCount =3D=3D 0)
        {
          System.out.println("No matches were found for \"" + =
queryString +
"\"");
        }
        else
        {
          System.out.println("Hits for \"" + queryString
              + "\" were found in");
          for (int i =3D 0; i < hitCount; i++)
          {
            Document doc =3D hits.doc(i);
            System.out.println(" " + (i + 1) + ". " + doc.get("name"));
          }
        }

what I expect from the search is to give me the name of the string I am
storing with respect to the search string, but everytime I search for a
string the doc.get("name") always returns the first stored string as =
name. I
dont understand where have I done wrong, or should I use a different
approach..
Any help appreciated.

Cheers
Amit





------_=_NextPart_001_01C7E4C0.075884CC
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C7E4C0.075884CC--

From java-user-return-29959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 22 13:41:03 2007
Return-Path: <java-user-return-29959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5980 invoked from network); 22 Aug 2007 13:41:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2007 13:41:03 -0000
Received: (qmail 26429 invoked by uid 500); 22 Aug 2007 13:40:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26387 invoked by uid 500); 22 Aug 2007 13:40:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26322 invoked by uid 99); 22 Aug 2007 13:40:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 06:40:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of askar.zaidi@gmail.com designates 209.85.146.181 as permitted sender)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 13:41:26 +0000
Received: by wa-out-1112.google.com with SMTP id j5so204017wah
        for <java-user@lucene.apache.org>; Wed, 22 Aug 2007 06:40:27 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JB38fFdhZSOrpfGyVBg28ZPmo7mEjeN3mSqjVQD9qoonfgEiXVGAyDcc/XKoUpdtXZZbYRgeggtCUNuSTF5hOjnfavFT6hdYtnUMtCRh1poP8N/bT+zda+0Qi3iodlt2YCCiH04J4/oJJu/8vnfFw7UguSySTgrebDWqiGuS4jM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=oHLoJuLy8Ld/iFlfjJqf1ECcuh5q/QLaQgKVEosE+JBm4w7kSHxIfOcmKJ/rDB2zUyhTDb4NB78q0dQd8VK6YkJ2xQJI2pR9beL9v/DwD5JDyj7eyBFbNSKEVzGq7rq8XEx1ixClhG8VFNJxZcQOmWtR5dtuLllLMwReNHWQDX0=
Received: by 10.115.15.1 with SMTP id s1mr735095wai.1187790026896;
        Wed, 22 Aug 2007 06:40:26 -0700 (PDT)
Received: by 10.66.233.3 with HTTP; Wed, 22 Aug 2007 06:40:26 -0700 (PDT)
Message-ID: <c0c0e1d40708220640y686fc5b5ld4adca84bb967642@mail.gmail.com>
Date: Wed, 22 Aug 2007 09:40:26 -0400
From: "Askar Zaidi" <askar.zaidi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7C01ECDBC5@hai01.hippo.local>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_871_22486759.1187790026714"
References: <6dd2bfeb0708220614y4944b166i1643f7d9f6e5bc3e@mail.gmail.com>
	 <A955EA1F8FE31749AEC8C998082F6C7C01ECDBC5@hai01.hippo.local>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_871_22486759.1187790026714
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thats exactly what I do. The moment something is added to the database , I
add it to the lucene index of the user. Upon new account creation, open a
new lucene index for this new user. Whenever something is uploaded, just add
it to the index.

-
Askar

On 8/22/07, Ard Schrijvers <a.schrijvers@hippo.nl> wrote:
>
> Do you reindex everything every 5 minutes from scratch? Can't you keep
> track of what changes, and only add/remove the correct parts to the index?
>
> Ard
>
> I'm new to this list. So first of all Hello to everyone!
>
> So right now I have a little issue I would like to discuss with you.
> Suppose that your are in a really big application where the data in your
> database is updated really fast. I reindex lucene every 5 min but since my
> application lists everything from lucene there are like 5 minutes (in the
> worse case) where I don't see new staff.
> What do you think would be the best aproach to this problem?
>
> Thanks!
>
> Jonathan
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

------=_Part_871_22486759.1187790026714--

From java-user-return-29960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 22 14:03:15 2007
Return-Path: <java-user-return-29960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15224 invoked from network); 22 Aug 2007 14:03:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2007 14:03:13 -0000
Received: (qmail 84952 invoked by uid 500); 22 Aug 2007 14:03:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84091 invoked by uid 500); 22 Aug 2007 14:03:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84080 invoked by uid 99); 22 Aug 2007 14:03:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 07:03:04 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.189 as permitted sender)
Received: from [209.85.128.189] (HELO fk-out-0910.google.com) (209.85.128.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 14:03:02 +0000
Received: by fk-out-0910.google.com with SMTP id z23so156568fkz
        for <java-user@lucene.apache.org>; Wed, 22 Aug 2007 07:02:41 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KWWh1FJnHkUENm6zea2043AKvWrm93JUFf0MUACyU9BnWInWx8WNEoqLlsx9/geTE9kw6Q4Kjy9YF3NfL2vMriOWgG+QOg5xNH7YODKzbV9kKHvgDPTu4aD934sIzX93SUBn7BAHp3iZ15N19E0YzE0EvwUiWjHu5d85RHvH5q4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Jn8nZG9EpXkWFsdf9jMk3eMY09K822p1AinRnEsFeTKAOa3XAUx7ScYn9NqY7pgF3/fvYvMrFgFpXXxgIdDaie7+OdW3rj+syNZS2tYm3OLgLaUHfMvyMd5NKWOPnr7buML7qkuVuO5zB2DPsW5w+d3zkeMtckkFNj7iMKrC3IY=
Received: by 10.82.158.12 with SMTP id g12mr1593877bue.1187791360830;
        Wed, 22 Aug 2007 07:02:40 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Wed, 22 Aug 2007 07:02:40 -0700 (PDT)
Message-ID: <359a92830708220702r5d7e4964wd5abfaf05b1aec4@mail.gmail.com>
Date: Wed, 22 Aug 2007 10:02:40 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to rename fields in an index
In-Reply-To: <EC8CF44C-ADB1-4DBE-AB4C-F4D035AB3632@taktik.be>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_95788_30233959.1187791360792"
References: <EAAF003CE5E5094DB92052DD646CAD8E018E2028@CTSCNSHNSXUA.cts.com>
	 <56583697-493C-47ED-A8BF-846DAE92B30B@taktik.be>
	 <46CC2621.7070508@getopt.org>
	 <EC8CF44C-ADB1-4DBE-AB4C-F4D035AB3632@taktik.be>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_95788_30233959.1187791360792
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Unless it's really, really, really prohibitive or impossible,
I'd recommend regenerating your index. Messing around in
the low-level file formats is just asking for trouble. Not to
mention that you'll probably have to remanufcture your
index sometime, somewhere and hack all over again or
*hope* that your code changes would match your new
index. Whereas if you remanufacture with "kw", you'll
be sure things are consistent

Or worst of all, regenerate the index and have some other
poor soul try to figure out what the heck is going on with the
application. "It doesn't work whenever I search on the 'kw' field".

I guess, if I were looking at it, I'd have to say that either
making a new index so I could use "kw" rather than
"keyword" was valuable enough to remanufacture the
index or not valuable enough to do <G>...

Best
Erick

On 8/22/07, Antoine Baudoux <ab@taktik.be> wrote:
>
> Thanks!
> --
> Antoine Baudoux
> Development Manager
> ab@taktik.be
> T=E9l.: +32 2 333 58 44
> GSM: +32 499 534 538
> Fax.: +32 2 648 16 53
>
>
> On 22 Aug 2007, at 14:03, Andrzej Bialecki wrote:
>
> > Antoine Baudoux wrote:
> >> No, i just want to change the field labels.
> >> For example, i have a "Keyword" field that i want to rename into
> >> "kw".
> >
> > (note: this is a low-level hack, you can damage your index beyond
> > repair).
> >
> > Take a look at FieldInfos class, and how it creates the *.fnm file
> > for each segment. You can re-write these fnm files using new field
> > names. In case of compound indexes you will need to "explode" them
> > first to a non-compound format.
> >
> > Make sure you write out these files using exactly the same order of
> > fields, otherwise you will end up in big trouble ;)
> >
> >
> > --
> > Best regards,
> > Andrzej Bialecki     <><
> >  ___. ___ ___ ___ _ _   __________________________________
> > [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> > ___|||__||  \|  ||  |  Embedded Unix, System Integration
> > http://www.sigram.com  Contact: info at sigram dot com
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>

------=_Part_95788_30233959.1187791360792--

From java-user-return-29961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 22 14:13:23 2007
Return-Path: <java-user-return-29961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20058 invoked from network); 22 Aug 2007 14:13:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2007 14:13:21 -0000
Received: (qmail 6481 invoked by uid 500); 22 Aug 2007 14:13:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6428 invoked by uid 500); 22 Aug 2007 14:13:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6400 invoked by uid 99); 22 Aug 2007 14:13:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 07:13:11 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.191 as permitted sender)
Received: from [209.85.128.191] (HELO fk-out-0910.google.com) (209.85.128.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 14:13:10 +0000
Received: by fk-out-0910.google.com with SMTP id z23so158891fkz
        for <java-user@lucene.apache.org>; Wed, 22 Aug 2007 07:12:48 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JtJHouunO1y5OulqY1s0TZNQA5Ikwuqh4aXynOenIB3V2P76rlz4G1S7oR9BIhen435NYjWzfYrAcucYIZwWcXRYa3Aq/DOjnJp91YYUPHBQZiS+5kcKc/J28IWSarUL1943+MmfpaDfr6H4sjdIGvbZ4NSUwQqiP/V7yzfRp7g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=EgBTA3hDvLHCrmtGUpg/URlHmpXt8VWRK+7ycBw5C9LKfKS5/YPo49a2LKZF4rDNTCsaZ2gJtXypBOGfCMmrcfHknz5YAvrseHx/LAw9dU2cqKCwAc659GIsESeljZQWi3ELXHEtaB006ClGT/13E/QBd5/PFjOjpDG36SdJQYs=
Received: by 10.82.134.12 with SMTP id h12mr1539162bud.1187791968066;
        Wed, 22 Aug 2007 07:12:48 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Wed, 22 Aug 2007 07:12:48 -0700 (PDT)
Message-ID: <359a92830708220712g11d459c2t30f2963be2854000@mail.gmail.com>
Date: Wed, 22 Aug 2007 10:12:48 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing
In-Reply-To: <6dd2bfeb0708220614y4944b166i1643f7d9f6e5bc3e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_95892_1080413.1187791968040"
References: <6dd2bfeb0708220614y4944b166i1643f7d9f6e5bc3e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_95892_1080413.1187791968040
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

There are several approaches. First, is your index small
enough to fit in RAM? You might consider just putting it all in
RAM and searching that.

A more complex solution would be to keep the increments
in a separate RAMDir AND your FSDir, search both and
keep things coordinated. Something like

open FSDIr
create RAMDir
while (whatever) {
   get request
   if (modification) {
       write to FSDir and RAMDir
  }
   if (search) {
     search FSDir
     open RAMDir reader
     search RAMDir
     close RAMDir reader (but not writer!)
  }
}

close FSDIr
close RAMDir
start again from the top.



Warning: I haven't done this, but it *should* work. The sticky
part seems to me to be coordinating deletes since the
open FSDir may contain documents also in the RAMDir,
but that's "an exercise for the reader"<G>,

You could also define the problem away and just live
with a 5 minute latency.

Best
Erick

On 8/22/07, Jonathan Ariel <ionathan@gmail.com> wrote:
>
> Hi,
> I'm new to this list. So first of all Hello to everyone!
>
> So right now I have a little issue I would like to discuss with you.
> Suppose that your are in a really big application where the data in your
> database is updated really fast. I reindex lucene every 5 min but since my
> application lists everything from lucene there are like 5 minutes (in the
> worse case) where I don't see new staff.
> What do you think would be the best aproach to this problem?
>
> Thanks!
>
> Jonathan
>

------=_Part_95892_1080413.1187791968040--

From java-user-return-29962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 22 14:40:11 2007
Return-Path: <java-user-return-29962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31226 invoked from network); 22 Aug 2007 14:40:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2007 14:40:10 -0000
Received: (qmail 94189 invoked by uid 500); 22 Aug 2007 14:40:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94151 invoked by uid 500); 22 Aug 2007 14:40:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94140 invoked by uid 99); 22 Aug 2007 14:40:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 07:40:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ionathan@gmail.com designates 64.233.162.229 as permitted sender)
Received: from [64.233.162.229] (HELO nz-out-0506.google.com) (64.233.162.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 14:40:00 +0000
Received: by nz-out-0506.google.com with SMTP id i28so104393nzi
        for <java-user@lucene.apache.org>; Wed, 22 Aug 2007 07:39:39 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ubovRdmAZeWmXolVIqLIxb0+Z4fQfnahmgJVCI5S2J2PddZPK6iWaTzgs7gcJ52PLUcGhI7rQFnQWxncz2z5qhtf0owBCs+w07u+7oVhvtoYv5NfzIxOzG62gufBS003tTEohFSRIUgdGLTSluuDIUg15S4dc1R838j3sz9NBLM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=m7Z5MavJ9DZkrN1b8Iu4HdUAcBiqk7Sc1EjwJe06cMMQ0DerOeEOPG/4p2GTaIFoATh8xyaLU615chl2CjeYQkez+cFgvP6aMFmVG1yudyN/ek/hi2vmao75+0ydjJx2ynXyqBfkHGH43uyFT4yyErOol4SKB4XqcVyP0Xw5/F4=
Received: by 10.114.137.2 with SMTP id k2mr778065wad.1187793577119;
        Wed, 22 Aug 2007 07:39:37 -0700 (PDT)
Received: by 10.114.145.8 with HTTP; Wed, 22 Aug 2007 07:39:37 -0700 (PDT)
Message-ID: <6dd2bfeb0708220739s7c2a4581oa9e016623152305e@mail.gmail.com>
Date: Wed, 22 Aug 2007 11:39:37 -0300
From: "Jonathan Ariel" <ionathan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing
In-Reply-To: <359a92830708220712g11d459c2t30f2963be2854000@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_106821_22632871.1187793577071"
References: <6dd2bfeb0708220614y4944b166i1643f7d9f6e5bc3e@mail.gmail.com>
	 <359a92830708220712g11d459c2t30f2963be2854000@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_106821_22632871.1187793577071
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm not reindexing the entire index. I'm just commiting the updated. But I'm
not sure how it would affect performance to commit in real time. I think
right now I have like 10 updated per minute.

On 8/22/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> There are several approaches. First, is your index small
> enough to fit in RAM? You might consider just putting it all in
> RAM and searching that.
>
> A more complex solution would be to keep the increments
> in a separate RAMDir AND your FSDir, search both and
> keep things coordinated. Something like
>
> open FSDIr
> create RAMDir
> while (whatever) {
>    get request
>    if (modification) {
>        write to FSDir and RAMDir
>   }
>    if (search) {
>      search FSDir
>      open RAMDir reader
>      search RAMDir
>      close RAMDir reader (but not writer!)
>   }
> }
>
> close FSDIr
> close RAMDir
> start again from the top.
>
>
>
> Warning: I haven't done this, but it *should* work. The sticky
> part seems to me to be coordinating deletes since the
> open FSDir may contain documents also in the RAMDir,
> but that's "an exercise for the reader"<G>,
>
> You could also define the problem away and just live
> with a 5 minute latency.
>
> Best
> Erick
>
> On 8/22/07, Jonathan Ariel <ionathan@gmail.com> wrote:
> >
> > Hi,
> > I'm new to this list. So first of all Hello to everyone!
> >
> > So right now I have a little issue I would like to discuss with you.
> > Suppose that your are in a really big application where the data in your
> > database is updated really fast. I reindex lucene every 5 min but since
> my
> > application lists everything from lucene there are like 5 minutes (in
> the
> > worse case) where I don't see new staff.
> > What do you think would be the best aproach to this problem?
> >
> > Thanks!
> >
> > Jonathan
> >
>

------=_Part_106821_22632871.1187793577071--

From java-user-return-29963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 22 14:44:13 2007
Return-Path: <java-user-return-29963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32508 invoked from network); 22 Aug 2007 14:44:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2007 14:44:12 -0000
Received: (qmail 5757 invoked by uid 500); 22 Aug 2007 14:44:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5723 invoked by uid 500); 22 Aug 2007 14:44:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5712 invoked by uid 99); 22 Aug 2007 14:44:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 07:44:02 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.128.190 as permitted sender)
Received: from [209.85.128.190] (HELO fk-out-0910.google.com) (209.85.128.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 14:44:38 +0000
Received: by fk-out-0910.google.com with SMTP id z23so166454fkz
        for <java-user@lucene.apache.org>; Wed, 22 Aug 2007 07:43:41 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Rd2zw4aL+Cp6/e6tSr3OxTYq+uQIPG9ZasvhA45nhuM3xgb+uYxE7h92T8mXotgy/PBR6gmAyrJ5hmBqwyuYdRJi7FQ3xQQMGRP7kRxM34COVcllSzXdH2ecrbWHCnxcuGrYh2Yh12JCrVVNoLUrR/3UqCG5Igp7fassq00i9vE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=D7XJgppb1rx/72QoiJqFOVQ6h5X9Hfs2aC8hbjb1Z1aNCrvYpZKi6ooAQn2Yyh2N68c3qbbAz97lKim9HdwSOn+e0RS0kXqL1I5jv1zGLliO5au1BHVl74AugWnzMJwHKK84kbwHHhIoD1eCwbbNIAeOSa2ecjI3fgXNB5G8Ufw=
Received: by 10.82.156.12 with SMTP id d12mr1649864bue.1187793820433;
        Wed, 22 Aug 2007 07:43:40 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Wed, 22 Aug 2007 07:43:40 -0700 (PDT)
Message-ID: <359a92830708220743h68390e62u6a5d3c44ad42f35b@mail.gmail.com>
Date: Wed, 22 Aug 2007 10:43:40 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing
In-Reply-To: <6dd2bfeb0708220739s7c2a4581oa9e016623152305e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_96316_17400574.1187793820382"
References: <6dd2bfeb0708220614y4944b166i1643f7d9f6e5bc3e@mail.gmail.com>
	 <359a92830708220712g11d459c2t30f2963be2854000@mail.gmail.com>
	 <6dd2bfeb0708220739s7c2a4581oa9e016623152305e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_96316_17400574.1187793820382
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

There's nothing in the "complex" solution that
has anything to do with recreating the index..... The RAMDir
is really the delta between the FSDIr and the updates.

Keeping it all in RAM really consists of reading the FSDIR
into RAM and updating both.

Erick

On 8/22/07, Jonathan Ariel <ionathan@gmail.com> wrote:
>
> I'm not reindexing the entire index. I'm just commiting the updated. But
> I'm
> not sure how it would affect performance to commit in real time. I think
> right now I have like 10 updated per minute.
>
> On 8/22/07, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > There are several approaches. First, is your index small
> > enough to fit in RAM? You might consider just putting it all in
> > RAM and searching that.
> >
> > A more complex solution would be to keep the increments
> > in a separate RAMDir AND your FSDir, search both and
> > keep things coordinated. Something like
> >
> > open FSDIr
> > create RAMDir
> > while (whatever) {
> >    get request
> >    if (modification) {
> >        write to FSDir and RAMDir
> >   }
> >    if (search) {
> >      search FSDir
> >      open RAMDir reader
> >      search RAMDir
> >      close RAMDir reader (but not writer!)
> >   }
> > }
> >
> > close FSDIr
> > close RAMDir
> > start again from the top.
> >
> >
> >
> > Warning: I haven't done this, but it *should* work. The sticky
> > part seems to me to be coordinating deletes since the
> > open FSDir may contain documents also in the RAMDir,
> > but that's "an exercise for the reader"<G>,
> >
> > You could also define the problem away and just live
> > with a 5 minute latency.
> >
> > Best
> > Erick
> >
> > On 8/22/07, Jonathan Ariel <ionathan@gmail.com> wrote:
> > >
> > > Hi,
> > > I'm new to this list. So first of all Hello to everyone!
> > >
> > > So right now I have a little issue I would like to discuss with you.
> > > Suppose that your are in a really big application where the data in
> your
> > > database is updated really fast. I reindex lucene every 5 min but
> since
> > my
> > > application lists everything from lucene there are like 5 minutes (in
> > the
> > > worse case) where I don't see new staff.
> > > What do you think would be the best aproach to this problem?
> > >
> > > Thanks!
> > >
> > > Jonathan
> > >
> >
>

------=_Part_96316_17400574.1187793820382--

From java-user-return-29964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 22 14:44:22 2007
Return-Path: <java-user-return-29964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32582 invoked from network); 22 Aug 2007 14:44:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2007 14:44:21 -0000
Received: (qmail 7296 invoked by uid 500); 22 Aug 2007 14:44:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7262 invoked by uid 500); 22 Aug 2007 14:44:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7251 invoked by uid 99); 22 Aug 2007 14:44:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 07:44:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 14:44:08 +0000
Received: from [192.168.0.254] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id l7MEhuO01600
	for <java-user@lucene.apache.org>; Wed, 22 Aug 2007 09:43:56 -0500
Message-ID: <46CC4B9F.9060804@getopt.org>
Date: Wed, 22 Aug 2007 16:43:43 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to rename fields in an index
References: <EAAF003CE5E5094DB92052DD646CAD8E018E2028@CTSCNSHNSXUA.cts.com>	 <56583697-493C-47ED-A8BF-846DAE92B30B@taktik.be>	 <46CC2621.7070508@getopt.org>	 <EC8CF44C-ADB1-4DBE-AB4C-F4D035AB3632@taktik.be> <359a92830708220702r5d7e4964wd5abfaf05b1aec4@mail.gmail.com>
In-Reply-To: <359a92830708220702r5d7e4964wd5abfaf05b1aec4@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Erick Erickson wrote:
> Unless it's really, really, really prohibitive or impossible,
> I'd recommend regenerating your index. Messing around in
> the low-level file formats is just asking for trouble. Not to
> mention that you'll probably have to remanufcture your
> index sometime, somewhere and hack all over again or
> *hope* that your code changes would match your new
> index. Whereas if you remanufacture with "kw", you'll
> be sure things are consistent
> 
> Or worst of all, regenerate the index and have some other
> poor soul try to figure out what the heck is going on with the
> application. "It doesn't work whenever I search on the 'kw' field".
> 
> I guess, if I were looking at it, I'd have to say that either
> making a new index so I could use "kw" rather than
> "keyword" was valuable enough to remanufacture the
> index or not valuable enough to do <G>...

Alternatively, we could just take this code and add it to 
IndexReader.renameField(String old, String new) ... ;)


-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 22 14:46:56 2007
Return-Path: <java-user-return-29965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33197 invoked from network); 22 Aug 2007 14:46:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2007 14:46:54 -0000
Received: (qmail 13278 invoked by uid 500); 22 Aug 2007 14:46:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13086 invoked by uid 500); 22 Aug 2007 14:46:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13075 invoked by uid 99); 22 Aug 2007 14:46:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 07:46:44 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 14:47:19 +0000
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 22167405 for java-user@lucene.apache.org; Wed, 22 Aug 2007 16:46:21 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C7E4CB.343ED491"
Subject: RE: Indexing
Date: Wed, 22 Aug 2007 16:46:20 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01ECDBD1@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <A955EA1F8FE31749AEC8C998082F6C7C01ECDBD1@hai01.hippo.local>
Thread-Topic: Indexing
Thread-Index: Acfkyldtq8JDmYHlS5+AJ/KKJN5HqQAACJ/C
References: <6dd2bfeb0708220614y4944b166i1643f7d9f6e5bc3e@mail.gmail.com><359a92830708220712g11d459c2t30f2963be2854000@mail.gmail.com> <6dd2bfeb0708220739s7c2a4581oa9e016623152305e@mail.gmail.com>
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7E4CB.343ED491
Content-Type: text/plain;
	charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable

10 updates per minute is not very much? Why not invalidate your used =
reader after every commit, and reopen it? If your index is really big, =
you might want to reopen it fewer times, but this is very simple to do =
(reopen every x updated times)

Also the RAM and FS solution Erick suggests is possible, but this is =
only really neccessary for *big* indices. At [1] you can find an example =
of this RAM/FS methodoly working together (see VolatileIndex, =
PersitentIndex and SearchIndex)

Ard

[1] =
http://svn.apache.org/repos/asf/jackrabbit/trunk/jackrabbit-core/src/main=
/java/org/apache/jackrabbit/core/query/lucene/


I'm not reindexing the entire index. I'm just commiting the updated. But =
I'm
not sure how it would affect performance to commit in real time. I think
right now I have like 10 updated per minute.

On 8/22/07, Erick Erickson <erickerickson@gmail.com> wrote:
>
> There are several approaches. First, is your index small
> enough to fit in RAM? You might consider just putting it all in
> RAM and searching that.
>
> A more complex solution would be to keep the increments
> in a separate RAMDir AND your FSDir, search both and
> keep things coordinated. Something like
>
> open FSDIr
> create RAMDir
> while (whatever) {
>    get request
>    if (modification) {
>        write to FSDir and RAMDir
>   }
>    if (search) {
>      search FSDir
>      open RAMDir reader
>      search RAMDir
>      close RAMDir reader (but not writer!)
>   }
> }
>
> close FSDIr
> close RAMDir
> start again from the top.
>
>
>
> Warning: I haven't done this, but it *should* work. The sticky
> part seems to me to be coordinating deletes since the
> open FSDir may contain documents also in the RAMDir,
> but that's "an exercise for the reader"<G>,
>
> You could also define the problem away and just live
> with a 5 minute latency.
>
> Best
> Erick
>
> On 8/22/07, Jonathan Ariel <ionathan@gmail.com> wrote:
> >
> > Hi,
> > I'm new to this list. So first of all Hello to everyone!
> >
> > So right now I have a little issue I would like to discuss with you.
> > Suppose that your are in a really big application where the data in =
your
> > database is updated really fast. I reindex lucene every 5 min but =
since
> my
> > application lists everything from lucene there are like 5 minutes =
(in
> the
> > worse case) where I don't see new staff.
> > What do you think would be the best aproach to this problem?
> >
> > Thanks!
> >
> > Jonathan
> >
>





------_=_NextPart_001_01C7E4CB.343ED491
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C7E4CB.343ED491--

From java-user-return-29966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 22 15:03:00 2007
Return-Path: <java-user-return-29966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42615 invoked from network); 22 Aug 2007 15:02:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2007 15:02:59 -0000
Received: (qmail 69260 invoked by uid 500); 22 Aug 2007 15:02:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69231 invoked by uid 500); 22 Aug 2007 15:02:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69220 invoked by uid 99); 22 Aug 2007 15:02:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 08:02:49 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [82.146.123.134] (HELO villon.taktik.be) (82.146.123.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 15:03:21 +0000
Received: from localhost (localhost [127.0.0.1])
	by villon.taktik.be (Postfix) with ESMTP id 89FD52FAD812
	for <java-user@lucene.apache.org>; Wed, 22 Aug 2007 17:05:19 +0200 (CEST)
Received: from villon.taktik.be ([127.0.0.1])
 by localhost (villon.taktik.be [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 02430-08 for <java-user@lucene.apache.org>;
 Wed, 22 Aug 2007 17:05:13 +0200 (CEST)
Received: from [192.168.63.11] (unknown [192.168.63.11])
	by villon.taktik.be (Postfix) with ESMTP id BB8082FAD7E1
	for <java-user@lucene.apache.org>; Wed, 22 Aug 2007 17:05:12 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <359a92830708220702r5d7e4964wd5abfaf05b1aec4@mail.gmail.com>
References: <EAAF003CE5E5094DB92052DD646CAD8E018E2028@CTSCNSHNSXUA.cts.com> <56583697-493C-47ED-A8BF-846DAE92B30B@taktik.be> <46CC2621.7070508@getopt.org> <EC8CF44C-ADB1-4DBE-AB4C-F4D035AB3632@taktik.be> <359a92830708220702r5d7e4964wd5abfaf05b1aec4@mail.gmail.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-25--965666052
Message-Id: <91EFA9EF-6FEA-40A4-8410-CB836A26A271@taktik.be>
From: Antoine Baudoux <ab@taktik.be>
Subject: Re: How to rename fields in an index
Date: Wed, 22 Aug 2007 17:02:11 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Scanned: by amavisd-new at taktik.be
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-25--965666052
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=ISO-8859-1;
	delsp=yes;
	format=flowed

Re-indexing would take a lot of time.


In fact I need this change just for the Query parser class, to be =20
able to make queries such as kw:blah. Now my field is called =20
"org.mycompany.mediafield.keyword". Not very easy to make queries =20
with this field name!


  It would be cool if QueryParser had some sort of field name =20
aliasing functionality, so that kw:blah is automatically translated =20
into  org.mycompany.mediafield.keyword:blah


Antoine
--
Antoine Baudoux
Development Manager
ab@taktik.be
T=E9l.: +32 2 333 58 44
GSM: +32 499 534 538
Fax.: +32 2 648 16 53


On 22 Aug 2007, at 16:02, Erick Erickson wrote:

> Unless it's really, really, really prohibitive or impossible,
> I'd recommend regenerating your index. Messing around in
> the low-level file formats is just asking for trouble. Not to
> mention that you'll probably have to remanufcture your
> index sometime, somewhere and hack all over again or
> *hope* that your code changes would match your new
> index. Whereas if you remanufacture with "kw", you'll
> be sure things are consistent
>
> Or worst of all, regenerate the index and have some other
> poor soul try to figure out what the heck is going on with the
> application. "It doesn't work whenever I search on the 'kw' field".
>
> I guess, if I were looking at it, I'd have to say that either
> making a new index so I could use "kw" rather than
> "keyword" was valuable enough to remanufacture the
> index or not valuable enough to do <G>...
>
> Best
> Erick
>
> On 8/22/07, Antoine Baudoux <ab@taktik.be> wrote:
>>
>> Thanks!
>> --
>> Antoine Baudoux
>> Development Manager
>> ab@taktik.be
>> T=E9l.: +32 2 333 58 44
>> GSM: +32 499 534 538
>> Fax.: +32 2 648 16 53
>>
>>
>> On 22 Aug 2007, at 14:03, Andrzej Bialecki wrote:
>>
>>> Antoine Baudoux wrote:
>>>> No, i just want to change the field labels.
>>>> For example, i have a "Keyword" field that i want to rename into
>>>> "kw".
>>>
>>> (note: this is a low-level hack, you can damage your index beyond
>>> repair).
>>>
>>> Take a look at FieldInfos class, and how it creates the *.fnm file
>>> for each segment. You can re-write these fnm files using new field
>>> names. In case of compound indexes you will need to "explode" them
>>> first to a non-compound format.
>>>
>>> Make sure you write out these files using exactly the same order of
>>> fields, otherwise you will end up in big trouble ;)
>>>
>>>
>>> --
>>> Best regards,
>>> Andrzej Bialecki     <><
>>>  ___. ___ ___ ___ _ _   __________________________________
>>> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
>>> ___|||__||  \|  ||  |  Embedded Unix, System Integration
>>> http://www.sigram.com  Contact: info at sigram dot com
>>>
>>>
>>> --------------------------------------------------------------------=20=

>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>


--Apple-Mail-25--965666052--

From java-user-return-29967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 22 15:27:44 2007
Return-Path: <java-user-return-29967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79768 invoked from network); 22 Aug 2007 15:27:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2007 15:27:43 -0000
Received: (qmail 33252 invoked by uid 500); 22 Aug 2007 15:27:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33220 invoked by uid 500); 22 Aug 2007 15:27:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33200 invoked by uid 99); 22 Aug 2007 15:27:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 08:27:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 15:27:27 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 65C7A30EFC18; Wed, 22 Aug 2007 09:27:06 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.197.109] (d-128-197-109.bootp.Virginia.EDU [128.143.197.109])
	by ehatchersolutions.com (Postfix) with ESMTP id 3748F30EFC18
	for <java-user@lucene.apache.org>; Wed, 22 Aug 2007 09:27:00 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <91EFA9EF-6FEA-40A4-8410-CB836A26A271@taktik.be>
References: <EAAF003CE5E5094DB92052DD646CAD8E018E2028@CTSCNSHNSXUA.cts.com> <56583697-493C-47ED-A8BF-846DAE92B30B@taktik.be> <46CC2621.7070508@getopt.org> <EC8CF44C-ADB1-4DBE-AB4C-F4D035AB3632@taktik.be> <359a92830708220702r5d7e4964wd5abfaf05b1aec4@mail.gmail.com> <91EFA9EF-6FEA-40A4-8410-CB836A26A271@taktik.be>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <01C18B62-7F77-4F1F-B195-0ACFE4641D47@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: How to rename fields in an index
Date: Wed, 22 Aug 2007 11:26:58 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Aug 22, 2007, at 11:02 AM, Antoine Baudoux wrote:
> In fact I need this change just for the Query parser class, to be  
> able to make queries such as kw:blah. Now my field is called  
> "org.mycompany.mediafield.keyword". Not very easy to make queries  
> with this field name!
>
>
>  It would be cool if QueryParser had some sort of field name  
> aliasing functionality, so that kw:blah is automatically translated  
> into  org.mycompany.mediafield.keyword:blah

You could, instead, do a string substitution on the string the user  
enters and replace "kw:" with something else.  That'd be quick and  
dirty and probably pretty robust too.

However, it is a good point about allowing QueryParser a way to  
translate field names.  A patch along these lines would be well  
received, I think.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 22 15:45:22 2007
Return-Path: <java-user-return-29968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19597 invoked from network); 22 Aug 2007 15:45:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2007 15:45:21 -0000
Received: (qmail 6263 invoked by uid 500); 22 Aug 2007 15:45:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6231 invoked by uid 500); 22 Aug 2007 15:45:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6218 invoked by uid 99); 22 Aug 2007 15:45:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 08:45:11 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [82.146.123.134] (HELO villon.taktik.be) (82.146.123.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 15:45:10 +0000
Received: from localhost (localhost [127.0.0.1])
	by villon.taktik.be (Postfix) with ESMTP id 3558F2FAE611
	for <java-user@lucene.apache.org>; Wed, 22 Aug 2007 17:47:43 +0200 (CEST)
Received: from villon.taktik.be ([127.0.0.1])
 by localhost (villon.taktik.be [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 02904-07 for <java-user@lucene.apache.org>;
 Wed, 22 Aug 2007 17:47:37 +0200 (CEST)
Received: from [192.168.63.11] (unknown [192.168.63.11])
	by villon.taktik.be (Postfix) with ESMTP id 204772FAE5E3
	for <java-user@lucene.apache.org>; Wed, 22 Aug 2007 17:47:37 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <01C18B62-7F77-4F1F-B195-0ACFE4641D47@ehatchersolutions.com>
References: <EAAF003CE5E5094DB92052DD646CAD8E018E2028@CTSCNSHNSXUA.cts.com> <56583697-493C-47ED-A8BF-846DAE92B30B@taktik.be> <46CC2621.7070508@getopt.org> <EC8CF44C-ADB1-4DBE-AB4C-F4D035AB3632@taktik.be> <359a92830708220702r5d7e4964wd5abfaf05b1aec4@mail.gmail.com> <91EFA9EF-6FEA-40A4-8410-CB836A26A271@taktik.be> <01C18B62-7F77-4F1F-B195-0ACFE4641D47@ehatchersolutions.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-26--963121799
Message-Id: <CF3D8167-A8C2-4F27-BF0B-8E131E1874CF@taktik.be>
From: Antoine Baudoux <ab@taktik.be>
Subject: Re: How to rename fields in an index
Date: Wed, 22 Aug 2007 17:44:35 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Scanned: by amavisd-new at taktik.be
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-26--963121799
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=ISO-8859-1;
	delsp=yes;
	format=flowed

I really don't like the dirty solution ;-)

I could come up with a patch if many are interested in this.

What do you like be the best : patching QueryParser ,or a new =20
QueryParser subclass ?

--
Antoine Baudoux
Development Manager
ab@taktik.be
T=E9l.: +32 2 333 58 44
GSM: +32 499 534 538
Fax.: +32 2 648 16 53


On 22 Aug 2007, at 17:26, Erik Hatcher wrote:

>
> On Aug 22, 2007, at 11:02 AM, Antoine Baudoux wrote:
>> In fact I need this change just for the Query parser class, to be =20
>> able to make queries such as kw:blah. Now my field is called =20
>> "org.mycompany.mediafield.keyword". Not very easy to make queries =20
>> with this field name!
>>
>>
>>  It would be cool if QueryParser had some sort of field name =20
>> aliasing functionality, so that kw:blah is automatically =20
>> translated into  org.mycompany.mediafield.keyword:blah
>
> You could, instead, do a string substitution on the string the user =20=

> enters and replace "kw:" with something else.  That'd be quick and =20
> dirty and probably pretty robust too.
>
> However, it is a good point about allowing QueryParser a way to =20
> translate field names.  A patch along these lines would be well =20
> received, I think.
>
> 	Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--Apple-Mail-26--963121799--

From java-user-return-29969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 22 16:12:21 2007
Return-Path: <java-user-return-29969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72697 invoked from network); 22 Aug 2007 16:12:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Aug 2007 16:12:19 -0000
Received: (qmail 64648 invoked by uid 500); 22 Aug 2007 16:12:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64602 invoked by uid 500); 22 Aug 2007 16:12:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64591 invoked by uid 99); 22 Aug 2007 16:12:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 09:12:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.214] (HELO web26003.mail.ukl.yahoo.com) (217.12.10.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 22 Aug 2007 16:12:45 +0000
Received: (qmail 43969 invoked by uid 60001); 22 Aug 2007 16:11:46 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=osrELkXbrRraAbCQ/LnPvUbP6jAhxeJ1BYNnfZSI+fWJk8946KXl2UQTbYvY9/lbi7bDZOfNHmSTLnYBuv68kaRQtVUYCjPlgZBv95Zm7Qy0w73kqnpHcWIVaPW/xQL6JAvdQV+UYW4kUtQlQvmToulpb5IIVzzu5r6b7wCQtls=;
X-YMail-OSG: 3MCgs6gVM1l9.n54ZVL2V87nBO3nrWbnGgEgn_UFP_8_rdZRLAVTMAftzRXw.tYT64DZIki5hlBT6aJQaufNMpd6IeiEtw3ZYOMUCvIC.DpyukrKjHNPDCsBzpY-
Received: from [62.189.26.100] by web26003.mail.ukl.yahoo.com via HTTP; Wed, 22 Aug 2007 16:11:46 GMT
X-Mailer: YahooMailRC/651.48 YahooMailWebService/0.7.119.3
Date: Wed, 22 Aug 2007 16:11:46 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: How to rename fields in an index
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <415290.43932.qm@web26003.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Might another option be to wrap IndexReader?=0A=0ASomething similar to this=
 in principle:  https://issues.apache.org/jira/browse/LUCENE-835=0A=0A=0A=
=0A----- Original Message ----=0AFrom: Antoine Baudoux <ab@taktik.be>=0ATo:=
 java-user@lucene.apache.org=0ASent: Wednesday, 22 August, 2007 4:44:35 PM=
=0ASubject: Re: How to rename fields in an index=0A=0AI really don't like t=
he dirty solution ;-)=0A=0AI could come up with a patch if many are interes=
ted in this.=0A=0AWhat do you like be the best : patching QueryParser ,or a=
 new  =0AQueryParser subclass ?=0A=0A--=0AAntoine Baudoux=0ADevelopment Man=
ager=0Aab@taktik.be=0AT=E9l.: +32 2 333 58 44=0AGSM: +32 499 534 538=0AFax.=
: +32 2 648 16 53=0A=0A=0AOn 22 Aug 2007, at 17:26, Erik Hatcher wrote:=0A=
=0A>=0A> On Aug 22, 2007, at 11:02 AM, Antoine Baudoux wrote:=0A>> In fact =
I need this change just for the Query parser class, to be  =0A>> able to ma=
ke queries such as kw:blah. Now my field is called  =0A>> "org.mycompany.me=
diafield.keyword". Not very easy to make queries  =0A>> with this field nam=
e!=0A>>=0A>>=0A>>  It would be cool if QueryParser had some sort of field n=
ame  =0A>> aliasing functionality, so that kw:blah is automatically  =0A>> =
translated into  org.mycompany.mediafield.keyword:blah=0A>=0A> You could, i=
nstead, do a string substitution on the string the user  =0A> enters and re=
place "kw:" with something else.  That'd be quick and  =0A> dirty and proba=
bly pretty robust too.=0A>=0A> However, it is a good point about allowing Q=
ueryParser a way to  =0A> translate field names.  A patch along these lines=
 would be well  =0A> received, I think.=0A>=0A>     Erik=0A>=0A>=0A> ------=
---------------------------------------------------------------=0A> To unsu=
bscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> For additional=
 commands, e-mail: java-user-help@lucene.apache.org=0A>=0A>=0A=0A=0A=0A=0A=
=0A=0A      ___________________________________________________________ =0A=
Want ideas for reducing your carbon footprint? Visit Yahoo! For Good  http:=
//uk.promotions.yahoo.com/forgood/environment.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 23 01:50:33 2007
Return-Path: <java-user-return-29970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57152 invoked from network); 23 Aug 2007 01:50:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Aug 2007 01:50:32 -0000
Received: (qmail 87627 invoked by uid 500); 23 Aug 2007 01:50:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87198 invoked by uid 500); 23 Aug 2007 01:50:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87187 invoked by uid 99); 23 Aug 2007 01:50:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Aug 2007 18:50:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [203.99.193.26] (HELO ctsintcosxib.cts.com) (203.99.193.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Aug 2007 01:50:56 +0000
Received: from CTSCNSHNSXUA.cts.com ([10.225.68.4]) by CTSINCHNSXBC.cts.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 23 Aug 2007 07:19:55 +0530
Content-class: urn:content-classes:message
Subject: RE: How to rename fields in an index
Date: Thu, 23 Aug 2007 09:49:54 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable
Message-ID: <EAAF003CE5E5094DB92052DD646CAD8E018E224A@CTSCNSHNSXUA.cts.com>
In-Reply-To: <46CC2621.7070508@getopt.org>
X-MimeOLE: Produced By Microsoft Exchange V6.5
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to rename fields in an index
Thread-Index: AcfktJS9Js1ckcBwSCuSjVe5QTAtzQAcqYIg
From: <Jun.Chen@cognizant.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 23 Aug 2007 01:49:55.0431 (UTC) FILETIME=[E7886770:01C7E527]
X-Virus-Checked: Checked by ClamAV on apache.org


Dear Andrzej Bialecki

Can we change the field name in *.fnm directly by hand?

-----Original Message-----
From: Andrzej Bialecki [mailto:ab@getopt.org]=0D
Sent: 2007=C4=EA8=D4=C222=C8=D5 8:04 =CF=C2=CE=E7=BA=C3,Daniel
To: java-user@lucene.apache.org
Subject: Re: How to rename fields in an index

Antoine Baudoux wrote:
> No, i just want to change the field labels.
>=0D
> For example, i have a "Keyword" field that i want to rename into "kw".

(note: this is a low-level hack, you can damage your index beyond repair).

Take a look at FieldInfos class, and how it creates the *.fnm file for=0D
each segment. You can re-write these fnm files using new field names. In=0D
case of compound indexes you will need to "explode" them first to a=0D
non-compound format.

Make sure you write out these files using exactly the same order of=0D
fields, otherwise you will end up in big trouble ;)


--=0D
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


This e-mail and any files transmitted with it are for the sole use of the=
 intended recipient(s) and may contain confidential and privileged=
 information.
If you are not the intended recipient, please contact the sender by reply=
 e-mail and destroy all copies of the original message.=0D
Any unauthorized review, use, disclosure, dissemination, forwarding,=
 printing or copying of this email or any action taken in reliance on this=
 e-mail is strictly=0D
prohibited and may be unlawful.

  Visit us at http://www.cognizant.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 23 07:09:44 2007
Return-Path: <java-user-return-29971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30054 invoked from network); 23 Aug 2007 07:09:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Aug 2007 07:09:43 -0000
Received: (qmail 14876 invoked by uid 500); 23 Aug 2007 07:09:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14839 invoked by uid 500); 23 Aug 2007 07:09:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14828 invoked by uid 99); 23 Aug 2007 07:09:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Aug 2007 00:09:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Aug 2007 07:10:10 +0000
Received: from [192.168.0.254] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id l7N79Aj11631
	for <java-user@lucene.apache.org>; Thu, 23 Aug 2007 02:09:10 -0500
Message-ID: <46CD3290.1070202@getopt.org>
Date: Thu, 23 Aug 2007 09:09:04 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to rename fields in an index
References: <EAAF003CE5E5094DB92052DD646CAD8E018E224A@CTSCNSHNSXUA.cts.com>
In-Reply-To: <EAAF003CE5E5094DB92052DD646CAD8E018E224A@CTSCNSHNSXUA.cts.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Jun.Chen@cognizant.com wrote:
> Dear Andrzej Bialecki
> 
> Can we change the field name in *.fnm directly by hand?

Yes, but you need to be consistent about it, i.e. change it the same way 
for every segment that the index consists of. Also, fnm files are binary 
files, so you need to know the format (unless you preserve the length of 
the name, e.g. "secret" -> "public", then you can do it with a binary 
editor).

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 23 07:14:10 2007
Return-Path: <java-user-return-29972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31223 invoked from network); 23 Aug 2007 07:14:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Aug 2007 07:14:09 -0000
Received: (qmail 22369 invoked by uid 500); 23 Aug 2007 07:14:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22318 invoked by uid 500); 23 Aug 2007 07:14:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22306 invoked by uid 99); 23 Aug 2007 07:14:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Aug 2007 00:14:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.99.193.26] (HELO ctsintcosxib.cts.com) (203.99.193.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Aug 2007 07:13:57 +0000
Received: from CTSCNSHNSXUA.cts.com ([10.225.68.4]) by ctsinchnsxuk.cts.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 23 Aug 2007 12:43:34 +0530
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
Subject: RE: How to rename fields in an index
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: quoted-printable
Date: Thu, 23 Aug 2007 15:13:32 +0800
Message-ID: <EAAF003CE5E5094DB92052DD646CAD8E01911B97@CTSCNSHNSXUA.cts.com>
In-Reply-To: <46CD3290.1070202@getopt.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to rename fields in an index
Thread-Index: AcflVJiA5V6VVXmmTI64iJdcsqZaxQAAHjxg
From: <Jun.Chen@cognizant.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 23 Aug 2007 07:13:34.0373 (UTC) FILETIME=[1E1FCD50:01C7E555]
X-Virus-Checked: Checked by ClamAV on apache.org


Got it.
Thank you very much :)

-----Original Message-----
From: Andrzej Bialecki [mailto:ab@getopt.org]=0D
Sent: 2007=C4=EA8=D4=C223=C8=D5 3:09 =CF=C2=CE=E7=BA=C3,Daniel
To: java-user@lucene.apache.org
Subject: Re: How to rename fields in an index

Jun.Chen@cognizant.com wrote:
> Dear Andrzej Bialecki
>=0D
> Can we change the field name in *.fnm directly by hand?

Yes, but you need to be consistent about it, i.e. change it the same way=0D
for every segment that the index consists of. Also, fnm files are binary=0D
files, so you need to know the format (unless you preserve the length of=0D
the name, e.g. "secret" -> "public", then you can do it with a binary=0D
editor).

--=0D
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


This e-mail and any files transmitted with it are for the sole use of the=
 intended recipient(s) and may contain confidential and privileged=
 information.
If you are not the intended recipient, please contact the sender by reply=
 e-mail and destroy all copies of the original message.=0D
Any unauthorized review, use, disclosure, dissemination, forwarding,=
 printing or copying of this email or any action taken in reliance on this=
 e-mail is strictly=0D
prohibited and may be unlawful.

  Visit us at http://www.cognizant.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 23 09:48:42 2007
Return-Path: <java-user-return-29973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75901 invoked from network); 23 Aug 2007 09:48:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Aug 2007 09:48:41 -0000
Received: (qmail 22973 invoked by uid 500); 23 Aug 2007 09:48:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22924 invoked by uid 500); 23 Aug 2007 09:48:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22913 invoked by uid 99); 23 Aug 2007 09:48:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Aug 2007 02:48:32 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of bforrest10@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Aug 2007 09:48:30 +0000
Received: by nf-out-0910.google.com with SMTP id d3so331563nfc
        for <java-user@lucene.apache.org>; Thu, 23 Aug 2007 02:48:09 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=mSXfsZlvY8E1ZcfEVM7oM7Oxcj/209/7ewU5QwUmxF0JmPC505RrcMw14+2xkx9m5iRJFQ/0aEDux/BWcLUxTTncV/MgBJUoVJcDwa98jSlW7/iCxrrjomv6MskpGsLwyddUFAvpIfxOyRG03WmnIb91Q7qz0RR452+U24ARjE4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=SQhpy5bw4lzRpfTSFW0B9Opw3C/AzJvXujjQ81NaMtWhSr9Ht66mEafT8oZ5oTwugkP8wlJWIQJByxxcPC1HbvlA8nentYBOcn2tYYe3+FYHT5ayYRUr+IqmVfexFTh6EhD8c3RofSpx3EUyt4tWod0nDGTJ1vqys/XjqC7dumI=
Received: by 10.78.118.5 with SMTP id q5mr1095429huc.1187862489077;
        Thu, 23 Aug 2007 02:48:09 -0700 (PDT)
Received: by 10.78.50.13 with HTTP; Thu, 23 Aug 2007 02:48:09 -0700 (PDT)
Message-ID: <525c024b0708230248y14b78861g564374eecf26a941@mail.gmail.com>
Date: Thu, 23 Aug 2007 19:48:09 +1000
From: "Barry Forrest" <bforrest10@gmail.com>
To: java-user@lucene.apache.org
Subject: Indexing time linear?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_179025_4918832.1187862489055"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_179025_4918832.1187862489055
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi list,

I'm trying to estimate how long it will take to index 10 million documents.
If I measure how long it takes to index say 10,000 documents, can I
extrapolate?  Will it take roughly 1000 times longer to do the whole set?

Thanks
Barry

------=_Part_179025_4918832.1187862489055--

From java-user-return-29974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 23 12:36:30 2007
Return-Path: <java-user-return-29974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51001 invoked from network); 23 Aug 2007 12:36:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Aug 2007 12:36:29 -0000
Received: (qmail 23128 invoked by uid 500); 23 Aug 2007 12:36:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23073 invoked by uid 500); 23 Aug 2007 12:36:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23062 invoked by uid 99); 23 Aug 2007 12:36:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Aug 2007 05:36:19 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.186 as permitted sender)
Received: from [209.85.134.186] (HELO mu-out-0910.google.com) (209.85.134.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Aug 2007 12:36:19 +0000
Received: by mu-out-0910.google.com with SMTP id g7so515241muf
        for <java-user@lucene.apache.org>; Thu, 23 Aug 2007 05:35:58 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=A45KXh4RSqIRjC9ktLoiirkjKI/l2uzHJdLvqiHAGTYP/+0tVSsYx9xADeZ5e8KoVB7q2tFM5lL8oAtvDzgnomyDLw5d9tWaEKTfJZ0Hzs+aYl9Tt2K8vf/DIudrMhfV9mLisztCuknPeBufRhxX71YhcpD9Zx0rBNIHTi1xF4I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=AaVJN9OzrhCVkVt6jnyhwOxSN0XGnsFbnZvswIoAvynDX8CKZCyauM6xaSWB9b/GUdWuzxgVIzGfBaTQ1eyXVDH6RcQkqp4pWzdeoDv0olqssqbkQRuFAbsvE+4blx43V2c4kumAhzGKee2SaEZ4Zw5s/s3tEObbM44k9rA+hQo=
Received: by 10.82.178.11 with SMTP id a11mr2962304buf.1187872557499;
        Thu, 23 Aug 2007 05:35:57 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Thu, 23 Aug 2007 05:35:57 -0700 (PDT)
Message-ID: <359a92830708230535n5a158381ibda0038459fdc6e7@mail.gmail.com>
Date: Thu, 23 Aug 2007 08:35:57 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing time linear?
In-Reply-To: <525c024b0708230248y14b78861g564374eecf26a941@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_104899_28024876.1187872557474"
References: <525c024b0708230248y14b78861g564374eecf26a941@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_104899_28024876.1187872557474
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm pretty sure it's been relatively linear for me, but I haven't tracked it
in detail. The obvious question is whether all of your docs are about the
same size....

But you might look here for tips before you try extrapolating....

http://wiki.apache.org/lucene-java/ImproveIndexingSpeed

Best
Erick

On 8/23/07, Barry Forrest <bforrest10@gmail.com> wrote:
>
> Hi list,
>
> I'm trying to estimate how long it will take to index 10 million
> documents.
> If I measure how long it takes to index say 10,000 documents, can I
> extrapolate?  Will it take roughly 1000 times longer to do the whole set?
>
> Thanks
> Barry
>

------=_Part_104899_28024876.1187872557474--

From java-user-return-29975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 23 19:05:25 2007
Return-Path: <java-user-return-29975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62384 invoked from network); 23 Aug 2007 19:05:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Aug 2007 19:05:24 -0000
Received: (qmail 8393 invoked by uid 500); 23 Aug 2007 19:05:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8345 invoked by uid 500); 23 Aug 2007 19:05:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8334 invoked by uid 99); 23 Aug 2007 19:05:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Aug 2007 12:05:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spencertickner@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Aug 2007 19:05:12 +0000
Received: by nf-out-0910.google.com with SMTP id d3so442539nfc
        for <java-user@lucene.apache.org>; Thu, 23 Aug 2007 12:04:50 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=Zd5Y7QLwXzuZCHkR2xUV8zJDxPL1RxnKvG9nHLxrfVCfmA9iXKIdQlZIuy9mQI1uEfuh3Xm/ZSdvBZ/zjS+wfhAOyxptV0JKnZOz3R+aryer6cvSFiYmThfDd+orA9IyCMPRc77xlJNVj20HgI+6iK6n2d9pQulW+gedq0NB6T0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=IzSNr2Z42kva1rKV3drSdF9/SvIgk8zG1GPGr5Z8gc3o7gXwHfKhQr+RPPSnjh/zpKx9DntZtoTzUPGNsE5UuDBy8UfB5LE4NKnIVzM+OV7MkeoyGb2N1LdhcpqjPnS6FSlcmWdEz8aC4jMsgSZtcef+G7OcnJjtT7Uze8IRcYo=
Received: by 10.78.123.4 with SMTP id v4mr1426592huc.1187895890319;
        Thu, 23 Aug 2007 12:04:50 -0700 (PDT)
Received: by 10.78.186.10 with HTTP; Thu, 23 Aug 2007 12:04:50 -0700 (PDT)
Message-ID: <2d72c9c50708231204t3501cab1v68cd5dd12a15cbb4@mail.gmail.com>
Date: Thu, 23 Aug 2007 12:04:50 -0700
From: "Spencer Tickner" <spencertickner@gmail.com>
To: java-user@lucene.apache.org
Subject: Phrase Search not returning results
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi List,

Thanks in advance for the help. I'm creating a simple searching test
based on Query Parser and from what I've read it should have no
problems with a Phrase Search. However I can't seem to get any results
back.

I'm doing a simple index using the StandardAnalyzer. Output from the
indexing gives:
.......
 stored/uncompressed,indexed,tokenized<title:Auditor General Act>
......

I then have a simpleSearch class:

public class SimpleSearch {

	public Hits doSearch(String term, String field) throws IOException,
		CorruptIndexException, ParseException {
		FSDirectory directory = FSDirectory.getDirectory("<path_to_index>");
		IndexSearcher searcher = new IndexSearcher(directory);
		IndexReader reader;
		reader = IndexReader.open(directory);
		QueryParser parser = new QueryParser(field, new StandardAnalyzer());
		Query query =parser.parse(term);
		// Just a couple of tests to see if I can figure out what's going on
		System.out.println(query.toString() + "\n");
		System.out.println(query.rewrite(reader).toString() + "\n");
		return searcher.search(query);	
	}
	
	public static void main(String[] args) {
		SimpleSearch obj = new SimpleSearch();
		String strQuery = "Auditor General";
		Hits hits;
		try {
			hits = obj.doSearch(strQuery, "title");
		} catch (Exception e) {
			System.out.println("Error1: " + e.getMessage());
			return;
		}
		Document doc;
		for (int i = 0; i < hits.length(); i++) {
			
			try {
				doc = hits.doc(i);
			} catch (Exception e) {
				System.out.println("Error2: " + e.getMessage());
				return;
			}
			System.out.println(doc.get("title"));
		}
		
	}
}

When strQuery = "Auditor General" I get hits back as expected. However
when I change this to strQuery = "\"Auditor General\"" I get no
hits,,, and am confused. Anyone have any thoughts?

Thanks,

Spencer

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 23 20:00:06 2007
Return-Path: <java-user-return-29976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86010 invoked from network); 23 Aug 2007 20:00:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Aug 2007 20:00:04 -0000
Received: (qmail 89404 invoked by uid 500); 23 Aug 2007 19:59:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89364 invoked by uid 500); 23 Aug 2007 19:59:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89351 invoked by uid 99); 23 Aug 2007 19:59:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Aug 2007 12:59:55 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a15.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Aug 2007 20:00:28 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a15.dreamhost.com (Postfix) with ESMTP id 87D417F036
	for <java-user@lucene.apache.org>; Thu, 23 Aug 2007 12:58:37 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <2d72c9c50708231204t3501cab1v68cd5dd12a15cbb4@mail.gmail.com>
References: <2d72c9c50708231204t3501cab1v68cd5dd12a15cbb4@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B4F83283-7C3A-4206-9E57-A788AA088C23@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Phrase Search not returning results
Date: Thu, 23 Aug 2007 15:58:27 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

I would suggest starting with: http://wiki.apache.org/lucene-java/ 
LuceneFAQ#head-3558e5121806fb4fce80fc022d889484a9248b71 especially  
the part on Luke.

Luke will let you try out the various queries and show you what they  
look like before being submitted.

Cheers,
Grant

On Aug 23, 2007, at 3:04 PM, Spencer Tickner wrote:

> Hi List,
>
> Thanks in advance for the help. I'm creating a simple searching test
> based on Query Parser and from what I've read it should have no
> problems with a Phrase Search. However I can't seem to get any results
> back.
>
> I'm doing a simple index using the StandardAnalyzer. Output from the
> indexing gives:
> .......
>  stored/uncompressed,indexed,tokenized<title:Auditor General Act>
> ......
>
> I then have a simpleSearch class:
>
> public class SimpleSearch {
>
> 	public Hits doSearch(String term, String field) throws IOException,
> 		CorruptIndexException, ParseException {
> 		FSDirectory directory = FSDirectory.getDirectory("<path_to_index>");
> 		IndexSearcher searcher = new IndexSearcher(directory);
> 		IndexReader reader;
> 		reader = IndexReader.open(directory);
> 		QueryParser parser = new QueryParser(field, new StandardAnalyzer());
> 		Query query =parser.parse(term);
> 		// Just a couple of tests to see if I can figure out what's going on
> 		System.out.println(query.toString() + "\n");
> 		System.out.println(query.rewrite(reader).toString() + "\n");
> 		return searcher.search(query);	
> 	}
> 	
> 	public static void main(String[] args) {
> 		SimpleSearch obj = new SimpleSearch();
> 		String strQuery = "Auditor General";
> 		Hits hits;
> 		try {
> 			hits = obj.doSearch(strQuery, "title");
> 		} catch (Exception e) {
> 			System.out.println("Error1: " + e.getMessage());
> 			return;
> 		}
> 		Document doc;
> 		for (int i = 0; i < hits.length(); i++) {
> 			
> 			try {
> 				doc = hits.doc(i);
> 			} catch (Exception e) {
> 				System.out.println("Error2: " + e.getMessage());
> 				return;
> 			}
> 			System.out.println(doc.get("title"));
> 		}
> 		
> 	}
> }
>
> When strQuery = "Auditor General" I get hits back as expected. However
> when I change this to strQuery = "\"Auditor General\"" I get no
> hits,,, and am confused. Anyone have any thoughts?
>
> Thanks,
>
> Spencer
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 23 20:54:02 2007
Return-Path: <java-user-return-29977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5700 invoked from network); 23 Aug 2007 20:54:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Aug 2007 20:54:01 -0000
Received: (qmail 84697 invoked by uid 500); 23 Aug 2007 20:53:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84658 invoked by uid 500); 23 Aug 2007 20:53:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84647 invoked by uid 99); 23 Aug 2007 20:53:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Aug 2007 13:53:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spencertickner@gmail.com designates 66.249.90.179 as permitted sender)
Received: from [66.249.90.179] (HELO ik-out-1112.google.com) (66.249.90.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Aug 2007 20:53:44 +0000
Received: by ik-out-1112.google.com with SMTP id b32so276629ika
        for <java-user@lucene.apache.org>; Thu, 23 Aug 2007 13:53:22 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=atyBVNAmhQ1OFO6MxHwo0QFm6NMuyRXSq0Sj7pFfcAa4ug1/47qjKSsi/jyGuK5brGanv/rETeGsJBCzg5EzuiJJdHYw1QPJsPHyGsK+bE3LC66yC1GIUKsYfbbmQmKO+4YRXxGWNZ2adOqrEaHpMieFT7KfnSXg1oBzrx7Kzf4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=m6xh36YlFHgrIQxojbdPwSmtfCRTBwY9HFGq+paJKwpciwD8bon84Vd2NLIyvIu6lLoJ7nbsdWOhkQalaqsbJIVIH1b7yvMt45N/B1icZgyr2PVMJ4F7QAYlMijU3Cyq3G9RwaDNlsgLx8eCyiZLWkjqbWtef708f5pGrLIN6Q4=
Received: by 10.78.190.10 with SMTP id n10mr1484982huf.1187902401958;
        Thu, 23 Aug 2007 13:53:21 -0700 (PDT)
Received: by 10.78.186.10 with HTTP; Thu, 23 Aug 2007 13:53:21 -0700 (PDT)
Message-ID: <2d72c9c50708231353r107328edu10a91ffe71dfcaa0@mail.gmail.com>
Date: Thu, 23 Aug 2007 13:53:21 -0700
From: "Spencer Tickner" <spencertickner@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Phrase Search not returning results
In-Reply-To: <B4F83283-7C3A-4206-9E57-A788AA088C23@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <2d72c9c50708231204t3501cab1v68cd5dd12a15cbb4@mail.gmail.com>
	 <B4F83283-7C3A-4206-9E57-A788AA088C23@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Grant,

Thanks for the advice.. It turns out it was all my own stupidity,, I
had commented out (for whatever reason) setPositionIncrement(0) on my
synonym analyzer..

Cheers,

Spence

On 8/23/07, Grant Ingersoll <gsingers@apache.org> wrote:
> I would suggest starting with: http://wiki.apache.org/lucene-java/
> LuceneFAQ#head-3558e5121806fb4fce80fc022d889484a9248b71 especially
> the part on Luke.
>
> Luke will let you try out the various queries and show you what they
> look like before being submitted.
>
> Cheers,
> Grant
>
> On Aug 23, 2007, at 3:04 PM, Spencer Tickner wrote:
>
> > Hi List,
> >
> > Thanks in advance for the help. I'm creating a simple searching test
> > based on Query Parser and from what I've read it should have no
> > problems with a Phrase Search. However I can't seem to get any results
> > back.
> >
> > I'm doing a simple index using the StandardAnalyzer. Output from the
> > indexing gives:
> > .......
> >  stored/uncompressed,indexed,tokenized<title:Auditor General Act>
> > ......
> >
> > I then have a simpleSearch class:
> >
> > public class SimpleSearch {
> >
> >       public Hits doSearch(String term, String field) throws IOException,
> >               CorruptIndexException, ParseException {
> >               FSDirectory directory = FSDirectory.getDirectory("<path_to_index>");
> >               IndexSearcher searcher = new IndexSearcher(directory);
> >               IndexReader reader;
> >               reader = IndexReader.open(directory);
> >               QueryParser parser = new QueryParser(field, new StandardAnalyzer());
> >               Query query =parser.parse(term);
> >               // Just a couple of tests to see if I can figure out what's going on
> >               System.out.println(query.toString() + "\n");
> >               System.out.println(query.rewrite(reader).toString() + "\n");
> >               return searcher.search(query);
> >       }
> >
> >       public static void main(String[] args) {
> >               SimpleSearch obj = new SimpleSearch();
> >               String strQuery = "Auditor General";
> >               Hits hits;
> >               try {
> >                       hits = obj.doSearch(strQuery, "title");
> >               } catch (Exception e) {
> >                       System.out.println("Error1: " + e.getMessage());
> >                       return;
> >               }
> >               Document doc;
> >               for (int i = 0; i < hits.length(); i++) {
> >
> >                       try {
> >                               doc = hits.doc(i);
> >                       } catch (Exception e) {
> >                               System.out.println("Error2: " + e.getMessage());
> >                               return;
> >                       }
> >                       System.out.println(doc.get("title"));
> >               }
> >
> >       }
> > }
> >
> > When strQuery = "Auditor General" I get hits back as expected. However
> > when I change this to strQuery = "\"Auditor General\"" I get no
> > hits,,, and am confused. Anyone have any thoughts?
> >
> > Thanks,
> >
> > Spencer
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 24 05:20:29 2007
Return-Path: <java-user-return-29978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71338 invoked from network); 24 Aug 2007 05:20:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Aug 2007 05:20:29 -0000
Received: (qmail 2303 invoked by uid 500); 24 Aug 2007 05:20:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2271 invoked by uid 500); 24 Aug 2007 05:20:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2260 invoked by uid 99); 24 Aug 2007 05:20:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Aug 2007 22:20:20 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of kai.hu@dusee.cn designates 222.66.106.38 as permitted sender)
Received: from [222.66.106.38] (HELO mx01.dusee.cn) (222.66.106.38)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Aug 2007 05:20:56 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7E60E.62CE9621"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: how to implement searching "in time" efficiently 
Date: Fri, 24 Aug 2007 13:19:45 +0800
Message-ID: <8E5BA7FAF994C6409A8E074B78EB4677013CE69C@14sha-msg02.zm.sd.mediazone.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: how to implement searching "in time" efficiently 
Thread-Index: AcfmDmHuJWno0RoxSBSjRcbqbp6/RA==
From: "Kai Hu" <kai.hu@dusee.cn>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7E60E.62CE9621
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,all

         I want user could search record after he/she insert a record
immediately use lucene,

When user insert a record ,I add the document into the index files. When
search  I new an IndexSearcher instance everytime to search the new
records,but it is unefficient, because indexSearcher will cost much time
in read or sort documents. If I only use a single IndexSearcher , it
cannot search the newly committed changes . Is there any better way?
Help me ,thanks....=20

=20

kai

        =20


------_=_NextPart_001_01C7E60E.62CE9621--

From java-user-return-29979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 24 08:53:07 2007
Return-Path: <java-user-return-29979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42827 invoked from network); 24 Aug 2007 08:53:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Aug 2007 08:53:06 -0000
Received: (qmail 8524 invoked by uid 500); 24 Aug 2007 08:52:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8491 invoked by uid 500); 24 Aug 2007 08:52:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8474 invoked by uid 99); 24 Aug 2007 08:52:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Aug 2007 01:52:50 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lukas.vlcek@gmail.com designates 209.85.198.185 as permitted sender)
Received: from [209.85.198.185] (HELO rv-out-0910.google.com) (209.85.198.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Aug 2007 08:52:44 +0000
Received: by rv-out-0910.google.com with SMTP id k20so532125rvb
        for <java-user@lucene.apache.org>; Fri, 24 Aug 2007 01:52:24 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=gYj9Zydt3c638VbavxTLVrJZqalAjdo5M9CQav0WYG2zsdtiDMezXRVWzilOnI409I/7pKE5OW9xhEPR0WJQefn9M3oLl6m7+xph+EFTAw8nY9lzckH786PIeGkojcTNZIU7oq9tmeR6HxyS6NmEFtSf3Sk+9OoW7DxgZ1Jfito=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=H0JZa52MvfC9gN22k0Ee2su5AUbsSxhf6eqF+g2PQFLcpb5Rf1SoAYgrqZkyHR3Vfhqvib0qnLEqRa3wP5/efAgIjLwxuBvilLmFOo+ZpW3jcfNbHvqHtuKe5xKtkT1BtT/q8ld2lK33kVowMrgRrNMM9dtrXWeD25S6XoeOvQk=
Received: by 10.140.162.4 with SMTP id k4mr1303797rve.1187945543951;
        Fri, 24 Aug 2007 01:52:23 -0700 (PDT)
Received: by 10.141.210.7 with HTTP; Fri, 24 Aug 2007 01:52:23 -0700 (PDT)
Message-ID: <52c3ddca0708240152t5ae87321jdf6010cc8e9a1def@mail.gmail.com>
Date: Fri, 24 Aug 2007 10:52:23 +0200
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
To: java-user@lucene.apache.org
Subject: Search in SharePoint Server 2007
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_60988_22389573.1187945543932"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_60988_22389573.1187945543932
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

Does anybody here have any experience with Search technology used in
Microsoft Office SharePoint Server 2007?
(More info can be found here:
http://office.microsoft.com/en-us/sharepointserver/HA102261451033.aspx)

I am particularly interested in some comparison to Lucene technology.
Does it support the same rich query syntax as Lucene and what is the format
of the index itself (is it stored in form of binary file or is is stored in
database)? I was not able to find answers to these question using the
overview document form the above mentioned link.

Regards,
Lukas

------=_Part_60988_22389573.1187945543932--

From java-user-return-29980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 24 13:54:17 2007
Return-Path: <java-user-return-29980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61507 invoked from network); 24 Aug 2007 13:54:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Aug 2007 13:54:16 -0000
Received: (qmail 10436 invoked by uid 500); 24 Aug 2007 13:54:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10401 invoked by uid 500); 24 Aug 2007 13:54:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10390 invoked by uid 99); 24 Aug 2007 13:54:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Aug 2007 06:54:05 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.186 as permitted sender)
Received: from [209.85.128.186] (HELO fk-out-0910.google.com) (209.85.128.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Aug 2007 13:53:57 +0000
Received: by fk-out-0910.google.com with SMTP id z23so683899fkz
        for <java-user@lucene.apache.org>; Fri, 24 Aug 2007 06:53:36 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Yfzy49KQ0Ax1DQm4AAB5ThOhSMsZeeOJl53dUCd7VjJMKgbVOtVgWBZpsEpyQBWlIIyF/rT4uGwZ6+y+mePeOjJdkXBSMEGJ097WJnOUZAv411Ed//GfhQExO347BfTejm3jydFTz2v80n4wzbUEGpWEBWqgRNmEetAado+Wvpc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cXgLpf9yFLcgW3l8WfiIk0kYnv4PT1/ODdvlqrNK5gFNQwmCKk1XneNX+cSL/u9PQqEWBJyaTHBkagDEt1HDsfsz2t+5mhvdfLbG0vuRmQhIpflJaRFYTZz74QSq5yqalAWpzODQmxS2DrI7lxuBDtZeJ13OJf+EXlnLuNXjvXM=
Received: by 10.82.100.1 with SMTP id x1mr6895239bub.1187963615992;
        Fri, 24 Aug 2007 06:53:35 -0700 (PDT)
Received: by 10.82.167.3 with HTTP; Fri, 24 Aug 2007 06:53:35 -0700 (PDT)
Message-ID: <359a92830708240653v5cceb3f1rfd5664f574b0d57e@mail.gmail.com>
Date: Fri, 24 Aug 2007 09:53:35 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to implement searching "in time" efficiently
In-Reply-To: <8E5BA7FAF994C6409A8E074B78EB4677013CE69C@14sha-msg02.zm.sd.mediazone.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_114160_30079418.1187963615964"
References: <8E5BA7FAF994C6409A8E074B78EB4677013CE69C@14sha-msg02.zm.sd.mediazone.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_114160_30079418.1187963615964
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This topic has been discussed a number of times, I suggest you
search the mail archives as that will get you very complete answers
more quickly. See
http://www.gossamer-threads.com/lists/lucene/java-user/

If that doesn't get you any help, let us know.

Best
Erick

On 8/24/07, Kai Hu <kai.hu@dusee.cn> wrote:
>
> Hi,all
>
>          I want user could search record after he/she insert a record
> immediately use lucene,
>
> When user insert a record ,I add the document into the index files. When
> search  I new an IndexSearcher instance everytime to search the new
> records,but it is unefficient, because indexSearcher will cost much time
> in read or sort documents. If I only use a single IndexSearcher , it
> cannot search the newly committed changes . Is there any better way?
> Help me ,thanks....
>
>
>
> kai
>
>
>
>

------=_Part_114160_30079418.1187963615964--

From java-user-return-29981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 24 21:04:33 2007
Return-Path: <java-user-return-29981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62827 invoked from network); 24 Aug 2007 21:04:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Aug 2007 21:04:32 -0000
Received: (qmail 95384 invoked by uid 500); 24 Aug 2007 21:04:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95180 invoked by uid 500); 24 Aug 2007 21:04:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95169 invoked by uid 99); 24 Aug 2007 21:04:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Aug 2007 14:04:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of willjohnsonsearch@gmail.com designates 66.249.82.226 as permitted sender)
Received: from [66.249.82.226] (HELO wx-out-0506.google.com) (66.249.82.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Aug 2007 21:04:16 +0000
Received: by wx-out-0506.google.com with SMTP id i28so774486wxd
        for <java-user@lucene.apache.org>; Fri, 24 Aug 2007 14:03:55 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:content-transfer-encoding:message-id:content-type:to:from:subject:date:x-mailer;
        b=NzaUsxtOSgJPv9M5cYoPmOf/tys1t8jTskJVZny7X/F4uZOacNMBR2vYNB656aQDsiDL/mNbZX5gPkD1lxWlX2BJoTkZOnpnbmTSCbCzYgNprIY17MSnwvzGi935cr0tCsqriopyDbOOgXWP78TR0k9BCukUflK/8lUc0tcWU0s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:content-transfer-encoding:message-id:content-type:to:from:subject:date:x-mailer;
        b=BWyQtjOfBYiV0QC8CPhllgZM38Y9PcT7CzV0a2s3IO0nromYktD5xiUgkTz7YWj0GLTyay9HDTNltfP3H/uvDi3JDJ7vWYC6glTANv//5ZajtqfB7LxoXUk1C7BalbDjmlM36rdEHCO2DjHCd0rLNjkw7csZJhng8mdKgrEHr4s=
Received: by 10.70.96.3 with SMTP id t3mr5668059wxb.1187989435661;
        Fri, 24 Aug 2007 14:03:55 -0700 (PDT)
Received: from ?192.168.22.22? ( [209.6.112.29])
        by mx.google.com with ESMTPS id h13sm4943200wxd.2007.08.24.14.03.54
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 24 Aug 2007 14:03:55 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Transfer-Encoding: 7bit
Message-Id: <F239BEE0-C5DD-4C02-AEC1-095087A49CAE@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Will Johnson <willjohnsonsearch@gmail.com>
Subject: function query - get DocValues
Date: Fri, 24 Aug 2007 17:03:52 -0400
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

i'm looking at doing some statistical work with lucene searches and  
the function queries look like a nice starting point.  i found the  
DocValues.getMin/Max/Avg functions already however there doesn't seem  
to be a nice way to get to this information without doing a fair  
amount of subclassing.  it would seem possible to pass the DocValues  
or perhaps a new DocValuesStats object back up the chain to avoid  
having to do all of this extra work just to get some basic info from  
the query.  is there some reason why this might be a bad idea/design  
or would a patch be interesting to anyone other than me?

- will

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 24 21:05:43 2007
Return-Path: <java-user-return-29982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63200 invoked from network); 24 Aug 2007 21:05:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Aug 2007 21:05:42 -0000
Received: (qmail 99855 invoked by uid 500); 24 Aug 2007 21:05:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99460 invoked by uid 500); 24 Aug 2007 21:05:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99449 invoked by uid 99); 24 Aug 2007 21:05:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Aug 2007 14:05:33 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [206.125.223.72] (HELO mx02.mailboxcop.com) (206.125.223.72)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Aug 2007 21:06:08 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx02.mailboxcop.com (8.13.1/8.13.1) with ESMTP id l7OL4TBW014969
	for <java-user@lucene.apache.org>; Fri, 24 Aug 2007 16:04:31 -0500
Received: (qmail 15377 invoked by uid 0); 24 Aug 2007 16:04:29 -0500
Date: 24 Aug 2007 16:04:29 -0500
Message-ID: <20070824210429.15376.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: =?utf-8?Q?Re:_function_query_=2D_get_DocValues?=
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Bayes-Prob: 0.0001 (Score 0)
X-Spam-Score: 0.60 () [Hold at 6.00] NO_REAL_NAME,SUBJECT_EXCESS_QP
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: Bayes signature not available
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.4
X-Virus-Checked: Checked by ClamAV on apache.org

Tom Roberts is out of the office until 3rd September 2007 and will get back to you on his return.

http://www.luxonline.org.uk
http://www.lux.org.uk




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 24 21:07:03 2007
Return-Path: <java-user-return-29983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63603 invoked from network); 24 Aug 2007 21:07:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Aug 2007 21:07:02 -0000
Received: (qmail 3973 invoked by uid 500); 24 Aug 2007 21:06:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3458 invoked by uid 500); 24 Aug 2007 21:06:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3447 invoked by uid 99); 24 Aug 2007 21:06:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Aug 2007 14:06:52 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [206.125.223.72] (HELO mx02.mailboxcop.com) (206.125.223.72)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Aug 2007 21:06:44 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx02.mailboxcop.com (8.13.1/8.13.1) with ESMTP id l7OL5xnY018027
	for <java-user@lucene.apache.org>; Fri, 24 Aug 2007 16:06:01 -0500
Received: (qmail 16335 invoked by uid 0); 24 Aug 2007 16:05:38 -0500
Date: 24 Aug 2007 16:05:38 -0500
Message-ID: <20070824210538.16334.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: =?utf-8?Q?Re:_Re:_function_query_=2D_get_DocValues?=
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Bayes-Prob: 0.0001 (Score 0)
X-Spam-Score: 0.60 () [Hold at 6.00] NO_REAL_NAME,SUBJECT_EXCESS_QP
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: Bayes signature not available
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.4
X-Virus-Checked: Checked by ClamAV on apache.org

Tom Roberts is out of the office until 3rd September 2007 and will get back to you on his return.

http://www.luxonline.org.uk
http://www.lux.org.uk




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 24 21:18:27 2007
Return-Path: <java-user-return-29984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67276 invoked from network); 24 Aug 2007 21:18:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Aug 2007 21:18:26 -0000
Received: (qmail 37929 invoked by uid 500); 24 Aug 2007 21:18:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37894 invoked by uid 500); 24 Aug 2007 21:18:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37878 invoked by uid 99); 24 Aug 2007 21:18:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Aug 2007 14:18:11 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a11.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Aug 2007 21:18:03 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a11.g.dreamhost.com (Postfix) with ESMTP id 63704B7A51
	for <java-user@lucene.apache.org>; Fri, 24 Aug 2007 14:17:23 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <F239BEE0-C5DD-4C02-AEC1-095087A49CAE@gmail.com>
References: <F239BEE0-C5DD-4C02-AEC1-095087A49CAE@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <DE8C561E-A015-4E9B-9FC0-8CC530BDB558@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: function query - get DocValues
Date: Fri, 24 Aug 2007 17:17:10 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Can you provide more details on what you are trying to do?  Are you  
trying to collect information from the FunctionQuery after it is done?

-Grant

On Aug 24, 2007, at 5:03 PM, Will Johnson wrote:

> i'm looking at doing some statistical work with lucene searches and  
> the function queries look like a nice starting point.  i found the  
> DocValues.getMin/Max/Avg functions already however there doesn't  
> seem to be a nice way to get to this information without doing a  
> fair amount of subclassing.  it would seem possible to pass the  
> DocValues or perhaps a new DocValuesStats object back up the chain  
> to avoid having to do all of this extra work just to get some basic  
> info from the query.  is there some reason why this might be a bad  
> idea/design or would a patch be interesting to anyone other than me?
>
> - will
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 24 22:01:07 2007
Return-Path: <java-user-return-29985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75636 invoked from network); 24 Aug 2007 22:01:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Aug 2007 22:01:06 -0000
Received: (qmail 159 invoked by uid 500); 24 Aug 2007 22:00:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99532 invoked by uid 500); 24 Aug 2007 22:00:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99521 invoked by uid 99); 24 Aug 2007 22:00:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Aug 2007 15:00:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of willjohnsonsearch@gmail.com designates 66.249.82.236 as permitted sender)
Received: from [66.249.82.236] (HELO wx-out-0506.google.com) (66.249.82.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Aug 2007 22:00:49 +0000
Received: by wx-out-0506.google.com with SMTP id i28so784384wxd
        for <java-user@lucene.apache.org>; Fri, 24 Aug 2007 15:00:29 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=V+r10YiLmh5UkD5qFPxL3vF+yTeRXV3l7WLvwX7gMjrmO1NCktnD1hQnialyLquzesY5zuEEQ9r49o9lvGRH67uEOKB5kve7Qx+IQIlUQSW1oqMY+7gSMPmhv+SjaQrfeaE5uX/jtfcFqBiLpTqCC55rNirvjz1UUxfNdWcswGM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=AXbMrm7P0eazeeW+12SGG/VCsCsgMgIzdwP56FdrzM02wYf5k13CmzER9zxQICbtpftZ/o/Cf2MmO2yGHl7uLYzKEa7Dp5s7YM1C3aWlrJz4ur9YE6nyPmhXh6N32n9PP5xG49l5btcRzdyosCsWodc6uNoOz+33TtrG8VgL2HM=
Received: by 10.70.72.11 with SMTP id u11mr5701761wxa.1187992828007;
        Fri, 24 Aug 2007 15:00:28 -0700 (PDT)
Received: from ?192.168.22.22? ( [209.6.112.29])
        by mx.google.com with ESMTPS id h7sm5014173wxd.2007.08.24.15.00.25
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 24 Aug 2007 15:00:26 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <DE8C561E-A015-4E9B-9FC0-8CC530BDB558@apache.org>
References: <F239BEE0-C5DD-4C02-AEC1-095087A49CAE@gmail.com> <DE8C561E-A015-4E9B-9FC0-8CC530BDB558@apache.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <5A65D19B-AF17-4837-A329-BF3E1230E1F9@gmail.com>
Content-Transfer-Encoding: 7bit
From: Will Johnson <willjohnsonsearch@gmail.com>
Subject: Re: function query - get DocValues
Date: Fri, 24 Aug 2007 18:00:24 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

at a basic level yes, just getting the avg/min/max from a function  
query would be awesome.   once that is in place getting more complex  
stats would be gravy.  i need to do something in this area i just  
want to know if there is some more fundamental that i'm working against.

- will


On Aug 24, 2007, at 5:17 PM, Grant Ingersoll wrote:

> Can you provide more details on what you are trying to do?  Are you  
> trying to collect information from the FunctionQuery after it is done?
>
> -Grant
>
> On Aug 24, 2007, at 5:03 PM, Will Johnson wrote:
>
>> i'm looking at doing some statistical work with lucene searches  
>> and the function queries look like a nice starting point.  i found  
>> the DocValues.getMin/Max/Avg functions already however there  
>> doesn't seem to be a nice way to get to this information without  
>> doing a fair amount of subclassing.  it would seem possible to  
>> pass the DocValues or perhaps a new DocValuesStats object back up  
>> the chain to avoid having to do all of this extra work just to get  
>> some basic info from the query.  is there some reason why this  
>> might be a bad idea/design or would a patch be interesting to  
>> anyone other than me?
>>
>> - will
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 24 23:18:32 2007
Return-Path: <java-user-return-29986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2274 invoked from network); 24 Aug 2007 23:18:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Aug 2007 23:18:31 -0000
Received: (qmail 57040 invoked by uid 500); 24 Aug 2007 23:18:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56996 invoked by uid 500); 24 Aug 2007 23:18:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56984 invoked by uid 99); 24 Aug 2007 23:18:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Aug 2007 16:18:22 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 24.71.223.10 is neither permitted nor denied by domain of mike.klaas@gmail.com)
Received: from [24.71.223.10] (HELO pd4mo2so.prod.shaw.ca) (24.71.223.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Aug 2007 23:18:58 +0000
Received: from pd3mr5so.prod.shaw.ca (pd3mr5so-qfe3.prod.shaw.ca [10.0.141.12])
 by l-daemon (Sun ONE Messaging Server 6.0 HotFix 1.01 (built Mar 15 2004))
 with ESMTP id <0JNA00IESWPRR440@l-daemon> for java-user@lucene.apache.org;
 Fri, 24 Aug 2007 17:17:51 -0600 (MDT)
Received: from pn2ml2so.prod.shaw.ca ([10.0.121.146])
 by pd3mr5so.prod.shaw.ca (Sun Java System Messaging Server 6.2-7.05 (built Sep
 5 2006)) with ESMTP id <0JNA006LFWPQSB80@pd3mr5so.prod.shaw.ca> for
 java-user@lucene.apache.org; Fri, 24 Aug 2007 17:17:51 -0600 (MDT)
Received: from worio.com ([24.82.155.191])
 by l-daemon (Sun ONE Messaging Server 6.0 HotFix 1.01 (built Mar 15 2004))
 with ESMTP id <0JNA008OYWPQWID0@l-daemon> for java-user@lucene.apache.org;
 Fri, 24 Aug 2007 17:17:50 -0600 (MDT)
Received: from [192.168.1.104] (unknown [192.168.1.1])	by worio.com (Postfix)
 with ESMTP id 7D1741481B1	for <java-user@lucene.apache.org>; Fri,
 24 Aug 2007 16:17:50 -0700 (PDT)
Date: Fri, 24 Aug 2007 16:17:54 -0700
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: Indexing
In-reply-to: <6dd2bfeb0708220739s7c2a4581oa9e016623152305e@mail.gmail.com>
To: java-user@lucene.apache.org
Message-id: <8AF2AFF6-780F-42DD-9FF2-0FCCF7101206@gmail.com>
MIME-version: 1.0 (Apple Message framework v752.2)
X-Mailer: Apple Mail (2.752.2)
Content-type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Content-transfer-encoding: 7bit
References: <6dd2bfeb0708220614y4944b166i1643f7d9f6e5bc3e@mail.gmail.com>
 <359a92830708220712g11d459c2t30f2963be2854000@mail.gmail.com>
 <6dd2bfeb0708220739s7c2a4581oa9e016623152305e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Note that Solr is expressedly designed for this kind of thing:  every  
time you commit, a new searcher is opened in the background, warmed,  
and the swapped with the current one.  It also support autocommit  
after X updates, or after the oldest update passes X milliseconds  
without being committed.

-Mike

On 22-Aug-07, at 7:39 AM, Jonathan Ariel wrote:

> I'm not reindexing the entire index. I'm just commiting the  
> updated. But I'm
> not sure how it would affect performance to commit in real time. I  
> think
> right now I have like 10 updated per minute.
>
> On 8/22/07, Erick Erickson <erickerickson@gmail.com> wrote:
>>
>> There are several approaches. First, is your index small
>> enough to fit in RAM? You might consider just putting it all in
>> RAM and searching that.
>>
>> A more complex solution would be to keep the increments
>> in a separate RAMDir AND your FSDir, search both and
>> keep things coordinated. Something like
>>
>> open FSDIr
>> create RAMDir
>> while (whatever) {
>>    get request
>>    if (modification) {
>>        write to FSDir and RAMDir
>>   }
>>    if (search) {
>>      search FSDir
>>      open RAMDir reader
>>      search RAMDir
>>      close RAMDir reader (but not writer!)
>>   }
>> }
>>
>> close FSDIr
>> close RAMDir
>> start again from the top.
>>
>>
>>
>> Warning: I haven't done this, but it *should* work. The sticky
>> part seems to me to be coordinating deletes since the
>> open FSDir may contain documents also in the RAMDir,
>> but that's "an exercise for the reader"<G>,
>>
>> You could also define the problem away and just live
>> with a 5 minute latency.
>>
>> Best
>> Erick
>>
>> On 8/22/07, Jonathan Ariel <ionathan@gmail.com> wrote:
>>>
>>> Hi,
>>> I'm new to this list. So first of all Hello to everyone!
>>>
>>> So right now I have a little issue I would like to discuss with you.
>>> Suppose that your are in a really big application where the data  
>>> in your
>>> database is updated really fast. I reindex lucene every 5 min but  
>>> since
>> my
>>> application lists everything from lucene there are like 5 minutes  
>>> (in
>> the
>>> worse case) where I don't see new staff.
>>> What do you think would be the best aproach to this problem?
>>>
>>> Thanks!
>>>
>>> Jonathan
>>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Aug 25 00:24:45 2007
Return-Path: <java-user-return-29987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28272 invoked from network); 25 Aug 2007 00:24:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Aug 2007 00:24:44 -0000
Received: (qmail 11819 invoked by uid 500); 25 Aug 2007 00:24:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11786 invoked by uid 500); 25 Aug 2007 00:24:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11775 invoked by uid 99); 25 Aug 2007 00:24:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Aug 2007 17:24:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.182.205.198] (HELO fullcapture.com) (69.182.205.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Aug 2007 00:25:14 +0000
Content-class: urn:content-classes:message
Subject: RE: Indexing
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Date: Fri, 24 Aug 2007 20:24:04 -0400
Message-ID: <BCDAE44B3F60944CA89B2CA953698854270D1E@fcs01.FullCapture.local>
In-Reply-To: <8AF2AFF6-780F-42DD-9FF2-0FCCF7101206@gmail.com>
X-MimeOLE: Produced By Microsoft Exchange V6.5
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Indexing
Thread-Index: AcfmpRcd4oRGYmrHQGCMMDZ+1zeXXQACF70g
X-Priority: 1
Priority: Urgent
Importance: high
Sensitivity: Company-Confidential
From: "Charles Patridge" <chuck@fullcapture.com>
To: <java-user@lucene.apache.org>
Cc: <mike.klaas@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Mike,

Was Wondering if you could possibly post this to the Java-User Lucene
Forum.  I am not sure why but I can not seem to get this through
successfully.

I appreciate any assistance you can offer me - thanks.

To ALL LUCENE Experts,

We are seeking a LUCENE expert to do some contract work.

Can pay on a project basis or hrly. =20

Contractor can telecommute with periodic face-to-face meetings

Scope of First Project will be:

=20
Concept Search -=20

1.       For example - Would like to search documents for "Wild
Animals".  However, "Wild Animals" will consist of an unlimited number
of N-grams such as

FOX
DEER
MOOSE
BEAR
ELK
COYOTE
WOLF
RACOON
SQUIRREL
:
:

=20

2.       In addition, in order to get a higher accuracy of desired
results in #1 above, we would also like to be able to add another list
of N-grams such as "Wild Animals Remove" which might contain the
following

DOG
CAT
HORSE
COW
CATTLE
:
:

=20

And this second list, "Wild Animals Remove" would be used to exclude any
documents that contain the N-grams in this list with the idea that what
remains in the result set would be the true desired results.


This Concept search must work with an unlimited number of N-grams, a
variety of lists, and the ability to exclude the result set with other
lists.

If possible, it would be desireable to have multiple input sets for both
inclusion and exclusion lists.

Need a list of references and brief description of past projects

Will need to sign a NDA and Non-Compete contracts to protect our IP
developments

Either cost for Entire Project OR Hourly Rate

A Date when you can start the project

And provide contact information such as name, phone, address, email so
we can contact you.

We are looking to start and finish this project in the 4th quarter 2007.

Charles Patridge
Full Capture Solutions, Inc.
333 Roberts Street, Suite 400
East Hartford, CT 06108
Phone: 860-291-9517 x 106
Email: Chuck@fullcapture.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 26 01:52:51 2007
Return-Path: <java-user-return-29988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89876 invoked from network); 26 Aug 2007 01:52:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2007 01:52:50 -0000
Received: (qmail 96355 invoked by uid 500); 26 Aug 2007 01:52:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96320 invoked by uid 500); 26 Aug 2007 01:52:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96309 invoked by uid 99); 26 Aug 2007 01:52:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Aug 2007 18:52:40 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of varma.openssl@gmail.com designates 209.85.128.189 as permitted sender)
Received: from [209.85.128.189] (HELO fk-out-0910.google.com) (209.85.128.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Aug 2007 01:53:21 +0000
Received: by fk-out-0910.google.com with SMTP id z23so1048997fkz
        for <java-user@lucene.apache.org>; Sat, 25 Aug 2007 18:52:13 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=it8U78s2yrhffRc58TbiQ4ESi+FlOjiuSnRyddiPODrwvtBV8jPfzX9OR2dRu2Ksw3QoeFYnifrX5mUosryOOamgvdrTrpScn1R63Lw6wcY9dL9sjNApNhMOw2m5OwEaBSJkijG0iwB9B1CwRebTnWTvdyT6i54UX0Vm3FeXpx0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ah/X1ygIMHwZtOQH2dh9ngSmd5NWZALZzkskLd/4lfZ49hySPONkpiJTj+8NjEXDj3OkHMlwDu+5juieDb8kegNkq4qn4Rc7YGxFAKVFmKw4+v+lQWzN1+BQJqUtMWFDv31jWhrXAnH65GixU5ZutT4HX2imoby1uk9cJZmVdkc=
Received: by 10.82.178.11 with SMTP id a11mr9400746buf.1188093133076;
        Sat, 25 Aug 2007 18:52:13 -0700 (PDT)
Received: by 10.82.150.10 with HTTP; Sat, 25 Aug 2007 18:52:12 -0700 (PDT)
Message-ID: <f504cec00708251852v6b985e08td7362617c6550c75@mail.gmail.com>
Date: Sat, 25 Aug 2007 18:52:13 -0700
From: "varma d" <varma.openssl@gmail.com>
To: java-user@lucene.apache.org
Subject: How to distribute lucene using rsync
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_170661_33345710.1188093133055"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_170661_33345710.1188093133055
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Lucene gurus,
   I am newbie and i have a question on transfering index directories across
multiple machines. Whenever i update/add any new documents to the existing
index, then it is generating new .cfs file. Because of this , i ended up
doing complete transfer (instead of diff) as the file names got changed. Is
there any way to make the .cfs file name as fixed. I would like to know if
anyone successfully synced index directories using rsync.

Thanks for ur time
varma

------=_Part_170661_33345710.1188093133055--

From java-user-return-29989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 26 01:53:36 2007
Return-Path: <java-user-return-29989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90091 invoked from network); 26 Aug 2007 01:53:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2007 01:53:34 -0000
Received: (qmail 99005 invoked by uid 500); 26 Aug 2007 01:53:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97927 invoked by uid 500); 26 Aug 2007 01:53:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97916 invoked by uid 99); 26 Aug 2007 01:53:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Aug 2007 18:53:24 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [206.125.223.72] (HELO mx02.mailboxcop.com) (206.125.223.72)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Aug 2007 01:54:03 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx02.mailboxcop.com (8.13.1/8.13.1) with ESMTP id l7Q1qlN4031684
	for <java-user@lucene.apache.org>; Sat, 25 Aug 2007 20:52:48 -0500
Received: (qmail 8128 invoked by uid 0); 25 Aug 2007 20:52:47 -0500
Date: 25 Aug 2007 20:52:47 -0500
Message-ID: <20070826015247.8127.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: How to distribute lucene using rsync
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Bayes-Prob: 0.0001 (Score 0)
X-Spam-Score: 0.60 () [Hold at 6.00] NO_REAL_NAME
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: Bayes signature not available
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.4
X-Virus-Checked: Checked by ClamAV on apache.org

Tom Roberts is out of the office until 3rd September 2007 and will get back to you on his return.

http://www.luxonline.org.uk
http://www.lux.org.uk




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 26 01:54:23 2007
Return-Path: <java-user-return-29990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90237 invoked from network); 26 Aug 2007 01:54:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2007 01:54:21 -0000
Received: (qmail 239 invoked by uid 500); 26 Aug 2007 01:54:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99530 invoked by uid 500); 26 Aug 2007 01:54:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99519 invoked by uid 99); 26 Aug 2007 01:54:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Aug 2007 18:54:11 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [206.125.223.72] (HELO mx02.mailboxcop.com) (206.125.223.72)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Aug 2007 01:54:03 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx02.mailboxcop.com (8.13.1/8.13.1) with ESMTP id l7Q1rViV000935
	for <java-user@lucene.apache.org>; Sat, 25 Aug 2007 20:53:32 -0500
Received: (qmail 8585 invoked by uid 0); 25 Aug 2007 20:53:31 -0500
Date: 25 Aug 2007 20:53:31 -0500
Message-ID: <20070826015331.8584.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: How to distribute lucene using rsync
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Bayes-Prob: 0.0001 (Score 0)
X-Spam-Score: 0.60 () [Hold at 6.00] NO_REAL_NAME
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: Bayes signature not available
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.4
X-Virus-Checked: Checked by ClamAV on apache.org

Tom Roberts is out of the office until 3rd September 2007 and will get back to you on his return.

http://www.luxonline.org.uk
http://www.lux.org.uk




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 26 10:40:03 2007
Return-Path: <java-user-return-29991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76963 invoked from network); 26 Aug 2007 10:40:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2007 10:40:02 -0000
Received: (qmail 49105 invoked by uid 500); 26 Aug 2007 10:39:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49047 invoked by uid 500); 26 Aug 2007 10:39:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49036 invoked by uid 99); 26 Aug 2007 10:39:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Aug 2007 03:39:52 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Aug 2007 10:39:45 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id 75F952109F
	for <java-user@lucene.apache.org>; Sun, 26 Aug 2007 03:39:24 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <f504cec00708251852v6b985e08td7362617c6550c75@mail.gmail.com>
References: <f504cec00708251852v6b985e08td7362617c6550c75@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <067FB7B7-DC78-4103-9872-DCD1F9066D90@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: How to distribute lucene using rsync
Date: Sun, 26 Aug 2007 06:38:51 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, see Solr.  It takes care of all this, and then some, for you.

-Grant

On Aug 25, 2007, at 9:52 PM, varma d wrote:

> Hi Lucene gurus,
>    I am newbie and i have a question on transfering index  
> directories across
> multiple machines. Whenever i update/add any new documents to the  
> existing
> index, then it is generating new .cfs file. Because of this , i  
> ended up
> doing complete transfer (instead of diff) as the file names got  
> changed. Is
> there any way to make the .cfs file name as fixed. I would like to  
> know if
> anyone successfully synced index directories using rsync.
>
> Thanks for ur time
> varma

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 26 10:40:51 2007
Return-Path: <java-user-return-29992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77309 invoked from network); 26 Aug 2007 10:40:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2007 10:40:49 -0000
Received: (qmail 50716 invoked by uid 500); 26 Aug 2007 10:40:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50680 invoked by uid 500); 26 Aug 2007 10:40:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50669 invoked by uid 99); 26 Aug 2007 10:40:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Aug 2007 03:40:40 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [206.125.223.72] (HELO mx02.mailboxcop.com) (206.125.223.72)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Aug 2007 10:40:32 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx02.mailboxcop.com (8.13.1/8.13.1) with ESMTP id l7QAdxAQ023738
	for <java-user@lucene.apache.org>; Sun, 26 Aug 2007 05:40:01 -0500
Received: (qmail 2068 invoked by uid 0); 26 Aug 2007 05:39:59 -0500
Date: 26 Aug 2007 05:39:59 -0500
Message-ID: <20070826103959.2067.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: How to distribute lucene using rsync
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Bayes-Prob: 0.0001 (Score 0)
X-Spam-Score: 0.60 () [Hold at 6.00] NO_REAL_NAME
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: Bayes signature not available
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.4
X-Virus-Checked: Checked by ClamAV on apache.org

Tom Roberts is out of the office until 3rd September 2007 and will get back to you on his return.

http://www.luxonline.org.uk
http://www.lux.org.uk




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 26 10:41:55 2007
Return-Path: <java-user-return-29993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77960 invoked from network); 26 Aug 2007 10:41:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2007 10:41:55 -0000
Received: (qmail 53025 invoked by uid 500); 26 Aug 2007 10:41:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52957 invoked by uid 500); 26 Aug 2007 10:41:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52946 invoked by uid 99); 26 Aug 2007 10:41:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Aug 2007 03:41:45 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [206.125.223.71] (HELO mx01.mailboxcop.com) (206.125.223.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Aug 2007 10:42:24 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx01.mailboxcop.com (8.13.1/8.13.1) with ESMTP id l7QAel57014679
	for <java-user@lucene.apache.org>; Sun, 26 Aug 2007 05:40:48 -0500
Received: (qmail 2778 invoked by uid 0); 26 Aug 2007 05:40:47 -0500
Date: 26 Aug 2007 05:40:47 -0500
Message-ID: <20070826104047.2777.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Re: How to distribute lucene using rsync
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Bayes-Prob: 0.0001 (Score 0)
X-Spam-Score: 0.60 () [Hold at 6.00] NO_REAL_NAME
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: Bayes signature not available
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.3
X-Virus-Checked: Checked by ClamAV on apache.org

Tom Roberts is out of the office until 3rd September 2007 and will get back to you on his return.

http://www.luxonline.org.uk
http://www.lux.org.uk




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Aug 26 10:46:47 2007
Return-Path: <java-user-return-29994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80225 invoked from network); 26 Aug 2007 10:46:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Aug 2007 10:46:45 -0000
Received: (qmail 60340 invoked by uid 500); 26 Aug 2007 10:46:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60307 invoked by uid 500); 26 Aug 2007 10:46:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60293 invoked by uid 99); 26 Aug 2007 10:46:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Aug 2007 03:46:36 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [213.133.33.40] (HELO smtp.is.nl) (213.133.33.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Aug 2007 10:47:17 +0000
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by smtp.is.nl (CommuniGate Pro SMTP 5.0.10)
  with ESMTP id 22425279 for java-user@lucene.apache.org; Sun, 26 Aug 2007 12:46:08 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6619.12
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Indexing
Date: Sun, 26 Aug 2007 12:46:08 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C01AC13C2@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Indexing
Thread-Index: AcfmpRcd4oRGYmrHQGCMMDZ+1zeXXQACF70gAEgjbtA=
Sensitivity: Company-Confidential
From: "Ard Schrijvers" <a.schrijvers@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


> =20
> Concept Search -=20
>=20
> 1.       For example - Would like to search documents for "Wild
> Animals".  However, "Wild Animals" will consist of an unlimited number
> of N-grams such as

I am a bit confused. What is the point of N-grams regarding this concept =
search? I do not see how N-grams could help you out. Or am I missing =
something here? Where did you get the N-grams idea from?=20

Regards Ard

>=20
> FOX
> DEER
> MOOSE
> BEAR
> ELK
> COYOTE
> WOLF
> RACOON
> SQUIRREL
> :
> :
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 27 03:55:13 2007
Return-Path: <java-user-return-29995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76965 invoked from network); 27 Aug 2007 03:55:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2007 03:55:13 -0000
Received: (qmail 18535 invoked by uid 500); 27 Aug 2007 03:55:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18486 invoked by uid 500); 27 Aug 2007 03:55:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18472 invoked by uid 99); 27 Aug 2007 03:55:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Aug 2007 20:55:03 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 03:55:46 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IPVgR-00040v-4M
	for java-user@lucene.apache.org; Sun, 26 Aug 2007 20:54:35 -0700
Message-ID: <12341296.post@talk.nabble.com>
Date: Sun, 26 Aug 2007 20:54:34 -0700 (PDT)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Get results from partial search keyword
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi guys,

   How can I get the search result like "searching, searches, searcher,
searchers, searched" while I just key in search keyword? And the words
within the quotes will be highlighted as well.

   Thank you.
-- 
View this message in context: http://www.nabble.com/Get-results-from-partial-search-keyword-tf4333228.html#a12341296
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 27 06:27:13 2007
Return-Path: <java-user-return-29996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21876 invoked from network); 27 Aug 2007 06:27:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2007 06:27:12 -0000
Received: (qmail 11214 invoked by uid 500); 27 Aug 2007 06:27:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11172 invoked by uid 500); 27 Aug 2007 06:27:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11161 invoked by uid 99); 27 Aug 2007 06:27:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Aug 2007 23:27:02 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [82.146.123.134] (HELO villon.taktik.be) (82.146.123.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 06:27:45 +0000
Received: from localhost (localhost [127.0.0.1])
	by villon.taktik.be (Postfix) with ESMTP id ADF173035C6D
	for <java-user@lucene.apache.org>; Mon, 27 Aug 2007 08:29:50 +0200 (CEST)
Received: from villon.taktik.be ([127.0.0.1])
 by localhost (villon.taktik.be [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 24318-07 for <java-user@lucene.apache.org>;
 Mon, 27 Aug 2007 08:29:45 +0200 (CEST)
Received: from [192.168.1.3] (113.234-243-81.adsl-dyn.isp.belgacom.be [81.243.234.113])
	by villon.taktik.be (Postfix) with ESMTP id D9C1F3035C3D
	for <java-user@lucene.apache.org>; Mon, 27 Aug 2007 08:29:44 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.3)
To: java-user@lucene.apache.org
Message-Id: <0E17AEFA-06C2-495D-9741-0FC63765AE3F@taktik.be>
Content-Type: multipart/alternative; boundary=Apple-Mail-7--564617572
From: Antoine Baudoux <ab@taktik.be>
Subject: Maximum index size
Date: Mon, 27 Aug 2007 08:26:19 +0200
X-Mailer: Apple Mail (2.752.3)
X-Virus-Scanned: by amavisd-new at taktik.be
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-7--564617572
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=ISO-8859-1;
	delsp=yes;
	format=flowed

	Hello,

	I'm indexing 2,5 millions docs.

	I already have added 1,2 millions docs to the index and the =
indexing =20
speed becomes quite slow.

	my index directory is 1GB .

	Is there a limit to the indexing size?

	Is the indexing slow when the number of terms are big?
=09

--
Antoine Baudoux
Development Manager
ab@taktik.be
T=E9l.: +32 2 333 58 44
GSM: +32 499 534 538
Fax.: +32 2 648 16 53



--Apple-Mail-7--564617572--

From java-user-return-29997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 27 06:28:01 2007
Return-Path: <java-user-return-29997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22178 invoked from network); 27 Aug 2007 06:28:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2007 06:28:01 -0000
Received: (qmail 12844 invoked by uid 500); 27 Aug 2007 06:27:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12799 invoked by uid 500); 27 Aug 2007 06:27:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12788 invoked by uid 99); 27 Aug 2007 06:27:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Aug 2007 23:27:51 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [206.125.223.73] (HELO mx03.mailboxcop.com) (206.125.223.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 06:27:43 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx03.mailboxcop.com (8.13.1/8.13.1) with ESMTP id l7R6R9GS016648
	for <java-user@lucene.apache.org>; Mon, 27 Aug 2007 01:27:12 -0500
Received: (qmail 29317 invoked by uid 0); 27 Aug 2007 01:27:09 -0500
Date: 27 Aug 2007 01:27:09 -0500
Message-ID: <20070827062709.29316.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Maximum index size
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Bayes-Prob: 0.0001 (Score 0)
X-Spam-Score: 0.60 () [Hold at 6.00] NO_REAL_NAME
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: Bayes signature not available
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.5
X-Virus-Checked: Checked by ClamAV on apache.org

Tom Roberts is out of the office until 3rd September 2007 and will get back to you on his return.

http://www.luxonline.org.uk
http://www.lux.org.uk




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 27 06:28:54 2007
Return-Path: <java-user-return-29998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22691 invoked from network); 27 Aug 2007 06:28:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2007 06:28:52 -0000
Received: (qmail 15559 invoked by uid 500); 27 Aug 2007 06:28:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14505 invoked by uid 500); 27 Aug 2007 06:28:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14493 invoked by uid 99); 27 Aug 2007 06:28:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Aug 2007 23:28:42 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [206.125.223.73] (HELO mx03.mailboxcop.com) (206.125.223.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 06:29:24 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx03.mailboxcop.com (8.13.1/8.13.1) with ESMTP id l7R6RwZv017730
	for <java-user@lucene.apache.org>; Mon, 27 Aug 2007 01:28:04 -0500
Received: (qmail 30506 invoked by uid 0); 27 Aug 2007 01:27:58 -0500
Date: 27 Aug 2007 01:27:58 -0500
Message-ID: <20070827062758.30505.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Maximum index size
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Bayes-Prob: 0.0001 (Score 0)
X-Spam-Score: 0.60 () [Hold at 6.00] NO_REAL_NAME
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: Bayes signature not available
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.5
X-Virus-Checked: Checked by ClamAV on apache.org

Tom Roberts is out of the office until 3rd September 2007 and will get back to you on his return.

http://www.luxonline.org.uk
http://www.lux.org.uk




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-29999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 27 07:43:44 2007
Return-Path: <java-user-return-29999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43624 invoked from network); 27 Aug 2007 07:43:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2007 07:43:42 -0000
Received: (qmail 72348 invoked by uid 500); 27 Aug 2007 07:43:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72312 invoked by uid 500); 27 Aug 2007 07:43:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72301 invoked by uid 99); 27 Aug 2007 07:43:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 00:43:32 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stopman@gmail.com designates 64.233.184.238 as permitted sender)
Received: from [64.233.184.238] (HELO wr-out-0506.google.com) (64.233.184.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 07:43:28 +0000
Received: by wr-out-0506.google.com with SMTP id 41so579521wry
        for <java-user@lucene.apache.org>; Mon, 27 Aug 2007 00:43:07 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ANzQm3PXjN5yVgrPC9LJFWsPQqpd99pZKtYIJEn8SyZ149lye2E1eQPd0hVeG3KV+LY/tJ2cUqZ9ho2wGdtvZwGsxwRC5bYkVv/3pTuhvzB5xM/BqYwsirawZeysGD3JO7Wcn466hmlTHYfyICx5/22TuUHYRF2pS4N2CW3Bnok=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=o9EeaTtl4QbCzCSIQlkEgAv4j8R1aJ+HmC9wjpJdmt/jpZYMq6cNtWImFny/fKyfUnYNLLJL2+FDmY3CLV5Q/GyHqfHguPS39YlSM2fXtlIn31ti/bSF7wp1fghowteOTfxk0K2TusM0XUfxnNKkqaI46W/NzR+lY4/ANnUfzZs=
Received: by 10.142.128.6 with SMTP id a6mr182741wfd.1188200586381;
        Mon, 27 Aug 2007 00:43:06 -0700 (PDT)
Received: by 10.143.31.2 with HTTP; Mon, 27 Aug 2007 00:43:06 -0700 (PDT)
Message-ID: <652776090708270043j3045f300g28357edb380fbdb5@mail.gmail.com>
Date: Mon, 27 Aug 2007 00:43:06 -0700
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Highlighter that works with phrase and span queries
In-Reply-To: <4682BB5D.5030900@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_225742_2365908.1188200586312"
References: <699213.70878.qm@web26012.mail.ukl.yahoo.com>
	 <200706271744.45018.paul.elschot@xs4all.nl>
	 <4682BB5D.5030900@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_225742_2365908.1188200586312
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Is this jar going to be in the next release of lucene? Also, are these the
same as the changes in the following patch:
https://issues.apache.org/jira/secure/attachment/12362653/spanhighlighter10.patch

-M

On 6/27/07, Mark Miller <markrmiller@gmail.com> wrote:
>
>
> > I have not looked at any highlighting code yet. Is there already an
> extension
> > of PhraseQuery that has getSpans() ?
> >
> Currently I am using this code originally by M. Harwood:
>             Term[] phraseQueryTerms = ((PhraseQuery) query).getTerms();
>             int i;
>             SpanQuery[] clauses = new SpanQuery[phraseQueryTerms.length];
>
>             for (i = 0; i < phraseQueryTerms.length; i++) {
>                 clauses[i] = new SpanTermQuery(phraseQueryTerms[i]);
>             }
>
>             SpanNearQuery sp = new SpanNearQuery(clauses,
>                     ((PhraseQuery) query).getSlop(), false);
>             sp.setBoost(query.getBoost());
>
> I don't think it is perfect logic for PhraseQuery's edit distance, but
> it approximates extremely well in most cases.
>
> I wonder if this approach to Highlighting would be worth it in the end.
> Certainly, it would seem to require that you store offsets or you would
> have to re-tokenize anyway.
>
> Some more interesting "stuff" on the current Highlighter methods:
>
> We can gain a lot of speed on the implementation of the current
> Highlighter if we grab from the source text in bigger chunks. Ronnie's
> Highlighter appears to be faster than the original due to two things: he
> doesn't have to re-tokenize text and he rebuilds the original document
> in large pieces. Depending on how you want to look at it, he loses most
> of the speed gained from just looking at the Query tokens instead of all
> tokens to pulling the Term offset information (which appears pretty slow).
>
> If you use a SimpleAnalyzer on docs around 1800 tokens long, you can
> actually match the speed of Ronnies highlighter with the current
> highlighter if you just rebuild the highlighted documents in bigger
> pieces i.e. instead of going through each token and adding the source
> text that it covers, build up the offset information until you get
> another hit and then pull from the source text into the highlighted text
> in one big piece rather than a tokens worth at a time. Of course this is
> not compatible with the way the Fragmenter currently works. If you use
> the StandardAnalyzer instead of SimpleAnalyzer, Ronnie's highlighter
> wins because it takes so darn long to re-analyze.
>
> It is also interesting to note that it is very difficult to see in a
> gain in using TokenSources to build a TokenStream. Using the
> StandardAnalyzer, it takes docs that are 1800 tokens just to be as fast
> as re-analyzing. Notice I didn't say fast, but "as fast". Anything
> smaller, or if you're using a simpler analyzer, and TokenSources is
> certainly not worth it. It just takes too long to pull TermVector info.
>
> - Mark
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_225742_2365908.1188200586312--

From java-user-return-30000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 27 08:38:38 2007
Return-Path: <java-user-return-30000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59674 invoked from network); 27 Aug 2007 08:38:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2007 08:38:36 -0000
Received: (qmail 37572 invoked by uid 500); 27 Aug 2007 08:38:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37527 invoked by uid 500); 27 Aug 2007 08:38:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37511 invoked by uid 99); 27 Aug 2007 08:38:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 01:38:27 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=FH_MSGID_01C67,MSGID_MULTIPLE_AT,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of samir.abdou@unine.ch designates 130.125.1.52 as permitted sender)
Received: from [130.125.1.52] (HELO columba.unine.ch) (130.125.1.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 08:39:11 +0000
Received: from mail01.unine.ch [130.125.5.51]
	by columba.unine.ch
	with XWall v3.41 ;
	Mon, 27 Aug 2007 10:38:00 +0200
Received: from webmail.UNINE.CH ([130.125.1.20]) by mail01.UNINE.CH with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 27 Aug 2007 10:37:59 +0200
Received: from philosophe ([83.68.201.51]) by webmail.UNINE.CH over TLS secured channel with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 27 Aug 2007 10:37:58 +0200
From: "Samir Abdou" <samir.abdou@unine.ch>
To: <java-user@lucene.apache.org>
References: <12341296.post@talk.nabble.com>
In-Reply-To: <12341296.post@talk.nabble.com>
Subject: RE: Get results from partial search keyword
Date: Mon, 27 Aug 2007 10:38:17 +0200
Organization: =?iso-8859-1?Q?Universit=E9_de_Neuch=E2tel?=
Message-ID: <000001c7e885$9e32eb20$da98c160$@abdou@unine.ch>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcfoXhPLpC3z6gX9Q3SbBV5uYs4SPQAJrxPQ
Content-Language: fr-ch
X-OriginalArrivalTime: 27 Aug 2007 08:37:58.0986 (UTC) FILETIME=[92856AA0:01C7E885]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

To handle such a problem, you should use an analyzer with a stemmer =
(Porter
stemmer for example).  You have just to add the stemmer filter to your
analyser.=20

Hope this help,

Samir

-----Message d'origine-----
De=A0: spinergywmy [mailto:spinergywmy@gmail.com]=20
Envoy=E9=A0: lundi, 27. ao=FBt 2007 05:55
=C0=A0: java-user@lucene.apache.org
Objet=A0: Get results from partial search keyword


Hi guys,

   How can I get the search result like "searching, searches, searcher,
searchers, searched" while I just key in search keyword? And the words
within the quotes will be highlighted as well.

   Thank you.
--=20
View this message in context:
http://www.nabble.com/Get-results-from-partial-search-keyword-tf4333228.h=
tml
#a12341296
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 27 10:51:45 2007
Return-Path: <java-user-return-30001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96768 invoked from network); 27 Aug 2007 10:51:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2007 10:51:44 -0000
Received: (qmail 89093 invoked by uid 500); 27 Aug 2007 10:51:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88961 invoked by uid 500); 27 Aug 2007 10:51:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88949 invoked by uid 99); 27 Aug 2007 10:51:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 03:51:34 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 10:51:28 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IPcBY-0004eA-5H
	for java-user@lucene.apache.org; Mon, 27 Aug 2007 03:51:08 -0700
Message-ID: <12344878.post@talk.nabble.com>
Date: Mon, 27 Aug 2007 03:51:08 -0700 (PDT)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: RE: Get results from partial search keyword
In-Reply-To: <000001c7e885$9e32eb20$da98c160$@abdou@unine.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
References: <12341296.post@talk.nabble.com> <000001c7e885$9e32eb20$da98c160$@abdou@unine.ch>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

   Just wonder do you have any example that I can refer to on how to use the
stemmer filter?

   Thank you.
-- 
View this message in context: http://www.nabble.com/Get-results-from-partial-search-keyword-tf4333228.html#a12344878
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 27 11:00:52 2007
Return-Path: <java-user-return-30002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6100 invoked from network); 27 Aug 2007 11:00:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2007 11:00:50 -0000
Received: (qmail 99518 invoked by uid 500); 27 Aug 2007 11:00:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99413 invoked by uid 500); 27 Aug 2007 11:00:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99402 invoked by uid 99); 27 Aug 2007 11:00:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 04:00:40 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=FH_MSGID_01C67,MSGID_MULTIPLE_AT,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of samir.abdou@unine.ch designates 130.125.1.52 as permitted sender)
Received: from [130.125.1.52] (HELO columba.unine.ch) (130.125.1.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 11:00:32 +0000
Received: from mail01.unine.ch [130.125.5.51]
	by columba.unine.ch
	with XWall v3.41 ;
	Mon, 27 Aug 2007 13:00:10 +0200
Received: from webmail.UNINE.CH ([130.125.1.20]) by mail01.UNINE.CH with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 27 Aug 2007 13:00:10 +0200
Received: from philosophe ([83.68.201.51]) by webmail.UNINE.CH over TLS secured channel with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 27 Aug 2007 13:00:09 +0200
From: "Samir Abdou" <samir.abdou@unine.ch>
To: <java-user@lucene.apache.org>
References: <12341296.post@talk.nabble.com> <000001c7e885$9e32eb20$da98c160$@abdou@unine.ch> <12344878.post@talk.nabble.com>
In-Reply-To: <12344878.post@talk.nabble.com>
Subject: RE: Get results from partial search keyword
Date: Mon, 27 Aug 2007 13:00:28 +0200
Organization: =?iso-8859-1?Q?Universit=E9_de_Neuch=E2tel?=
Message-ID: <000001c7e899$7acd1750$706745f0$@abdou@unine.ch>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcfomEQvvnE7dPKFSgKyePLak+9//wAAL4lA
Content-Language: fr-ch
X-OriginalArrivalTime: 27 Aug 2007 11:00:09.0665 (UTC) FILETIME=[6F33BB10:01C7E899]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Here's an example of the analyzer main's method:

  public TokenStream tokenStream(String fieldName, Reader reader) {
    TokenStream result =3D new StandardTokenizer(reader);
    result =3D new StandardFilter(result);
    result =3D new LowerCaseFilter(result);
    result =3D new StopFilter(result, stopSet);
    result =3D new PorterStemFilter(result);
    return result;
  }


Samir


-----Message d'origine-----
De=A0: spinergywmy [mailto:spinergywmy@gmail.com]=20
Envoy=E9=A0: lundi, 27. ao=FBt 2007 12:51
=C0=A0: java-user@lucene.apache.org
Objet=A0: RE: Get results from partial search keyword


Hi,

   Just wonder do you have any example that I can refer to on how to use =
the
stemmer filter?

   Thank you.
--=20
View this message in context:
http://www.nabble.com/Get-results-from-partial-search-keyword-tf4333228.h=
tml
#a12344878
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 27 11:02:54 2007
Return-Path: <java-user-return-30003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6667 invoked from network); 27 Aug 2007 11:02:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2007 11:02:53 -0000
Received: (qmail 5950 invoked by uid 500); 27 Aug 2007 11:02:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5754 invoked by uid 500); 27 Aug 2007 11:02:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5743 invoked by uid 99); 27 Aug 2007 11:02:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 04:02:42 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 11:03:26 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id B8B87210AC
	for <java-user@lucene.apache.org>; Mon, 27 Aug 2007 04:02:12 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <0E17AEFA-06C2-495D-9741-0FC63765AE3F@taktik.be>
References: <0E17AEFA-06C2-495D-9741-0FC63765AE3F@taktik.be>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <645E0127-2E43-4762-9B2F-1E26A43E6130@apache.org>
Content-Transfer-Encoding: quoted-printable
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Maximum index size
Date: Mon, 27 Aug 2007 07:01:38 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Have a look at: http://wiki.apache.org/lucene-java/=20
BasicsOfPerformance and the section on indexing.

Please provide more details about what you are doing and your =20
hardware, memory, etc. if that doesn't help.


On Aug 27, 2007, at 2:26 AM, Antoine Baudoux wrote:

> 	Hello,
>
> 	I'm indexing 2,5 millions docs.
>
> 	I already have added 1,2 millions docs to the index and the =20
> indexing speed becomes quite slow.
>
> 	my index directory is 1GB .
>
> 	Is there a limit to the indexing size?
>
> 	Is the indexing slow when the number of terms are big?
> =09
>
> --
> Antoine Baudoux
> Development Manager
> ab@taktik.be
> T=E9l.: +32 2 333 58 44
> GSM: +32 499 534 538
> Fax.: +32 2 648 16 53
>
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 27 11:22:38 2007
Return-Path: <java-user-return-30004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16912 invoked from network); 27 Aug 2007 11:22:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2007 11:22:37 -0000
Received: (qmail 27395 invoked by uid 500); 27 Aug 2007 11:22:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26620 invoked by uid 500); 27 Aug 2007 11:22:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26609 invoked by uid 99); 27 Aug 2007 11:22:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 04:22:27 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 11:22:22 +0000
Received: by py-out-1112.google.com with SMTP id f31so1250163pyh
        for <java-user@lucene.apache.org>; Mon, 27 Aug 2007 04:22:01 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=Y7mKklvQFOHHuw6I9tCenxXwH4Fjalo4bokC/bV8+Ho/rew/Y87GBVf91pfhCJiwuyCAlZUpF+6HHfxVwgIEwCMmEBN4B67KXbtTTCTvp1BgS+N+bSdr1PUkqMHVAYRe8jlGOQZ1ismL+/c/cLpXXKUc/20e4ZkwCOogf36Cuvs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=FdFhsMsmy9HQ4WiFR8eMZCEny+jQT0e9BH39i2a46N0ukG9Sz9vAQrNz4Y2g2aMQrC8bqDMfDbCt18K6dwj9Nc616FK5I5bUyghJFCOEynhqtH5Fvo4CBnT6gdnjO5ekPk1GYpvkhM4L1qX7wRZtJ18Z4YwZDwBFOGYltUbjmeE=
Received: by 10.65.234.2 with SMTP id l2mr10565832qbr.1188213719900;
        Mon, 27 Aug 2007 04:21:59 -0700 (PDT)
Received: from ?192.168.1.108? ( [69.124.234.183])
        by mx.google.com with ESMTPS id c5sm3103587qbc.2007.08.27.04.21.57
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 27 Aug 2007 04:21:57 -0700 (PDT)
Message-ID: <46D2B3C1.4050201@gmail.com>
Date: Mon, 27 Aug 2007 07:21:37 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Highlighter that works with phrase and span queries
References: <699213.70878.qm@web26012.mail.ukl.yahoo.com>	 <200706271744.45018.paul.elschot@xs4all.nl>	 <4682BB5D.5030900@gmail.com> <652776090708270043j3045f300g28357edb380fbdb5@mail.gmail.com>
In-Reply-To: <652776090708270043j3045f300g28357edb380fbdb5@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I am a bit unclear about your question. The patch you mention extends 
the original Highlighter to support phrase and span queries. It does not 
include any major performance increases over the original Highlighter 
(in fact, it takes a bit longer to Highlight a Span or Phrase query than 
it does to just highlight Terms).

Will it be released with the next version of Lucene? Doesn't look like 
it, but anything is possible. A few people are using it, but there has 
not been widespread interest that I have seen. My guess is that there 
are just not enough people trying to highlight Span queries -- which I'd 
blame on a lack of Span support in the default Lucene Query syntax.

Whether it is included soon or not, the code works well and I will 
continue to support it.

- Mark

Michael Stoppelman wrote:
> Is this jar going to be in the next release of lucene? Also, are these the
> same as the changes in the following patch:
> https://issues.apache.org/jira/secure/attachment/12362653/spanhighlighter10.patch
>
> -M
>
> On 6/27/07, Mark Miller <markrmiller@gmail.com> wrote:
>   
>>     
>>> I have not looked at any highlighting code yet. Is there already an
>>>       
>> extension
>>     
>>> of PhraseQuery that has getSpans() ?
>>>
>>>       
>> Currently I am using this code originally by M. Harwood:
>>             Term[] phraseQueryTerms = ((PhraseQuery) query).getTerms();
>>             int i;
>>             SpanQuery[] clauses = new SpanQuery[phraseQueryTerms.length];
>>
>>             for (i = 0; i < phraseQueryTerms.length; i++) {
>>                 clauses[i] = new SpanTermQuery(phraseQueryTerms[i]);
>>             }
>>
>>             SpanNearQuery sp = new SpanNearQuery(clauses,
>>                     ((PhraseQuery) query).getSlop(), false);
>>             sp.setBoost(query.getBoost());
>>
>> I don't think it is perfect logic for PhraseQuery's edit distance, but
>> it approximates extremely well in most cases.
>>
>> I wonder if this approach to Highlighting would be worth it in the end.
>> Certainly, it would seem to require that you store offsets or you would
>> have to re-tokenize anyway.
>>
>> Some more interesting "stuff" on the current Highlighter methods:
>>
>> We can gain a lot of speed on the implementation of the current
>> Highlighter if we grab from the source text in bigger chunks. Ronnie's
>> Highlighter appears to be faster than the original due to two things: he
>> doesn't have to re-tokenize text and he rebuilds the original document
>> in large pieces. Depending on how you want to look at it, he loses most
>> of the speed gained from just looking at the Query tokens instead of all
>> tokens to pulling the Term offset information (which appears pretty slow).
>>
>> If you use a SimpleAnalyzer on docs around 1800 tokens long, you can
>> actually match the speed of Ronnies highlighter with the current
>> highlighter if you just rebuild the highlighted documents in bigger
>> pieces i.e. instead of going through each token and adding the source
>> text that it covers, build up the offset information until you get
>> another hit and then pull from the source text into the highlighted text
>> in one big piece rather than a tokens worth at a time. Of course this is
>> not compatible with the way the Fragmenter currently works. If you use
>> the StandardAnalyzer instead of SimpleAnalyzer, Ronnie's highlighter
>> wins because it takes so darn long to re-analyze.
>>
>> It is also interesting to note that it is very difficult to see in a
>> gain in using TokenSources to build a TokenStream. Using the
>> StandardAnalyzer, it takes docs that are 1800 tokens just to be as fast
>> as re-analyzing. Notice I didn't say fast, but "as fast". Anything
>> smaller, or if you're using a simpler analyzer, and TokenSources is
>> certainly not worth it. It just takes too long to pull TermVector info.
>>
>> - Mark
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 27 12:35:08 2007
Return-Path: <java-user-return-30005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57810 invoked from network); 27 Aug 2007 12:35:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2007 12:35:07 -0000
Received: (qmail 5692 invoked by uid 500); 27 Aug 2007 12:34:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5666 invoked by uid 500); 27 Aug 2007 12:34:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5654 invoked by uid 99); 27 Aug 2007 12:34:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 05:34:57 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [82.146.123.134] (HELO villon.taktik.be) (82.146.123.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 12:35:40 +0000
Received: from localhost (localhost [127.0.0.1])
	by villon.taktik.be (Postfix) with ESMTP id CAB373040CEA
	for <java-user@lucene.apache.org>; Mon, 27 Aug 2007 14:37:46 +0200 (CEST)
Received: from villon.taktik.be ([127.0.0.1])
 by localhost (villon.taktik.be [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 29799-02 for <java-user@lucene.apache.org>;
 Mon, 27 Aug 2007 14:37:40 +0200 (CEST)
Received: from [192.168.63.11] (unknown [192.168.63.11])
	by villon.taktik.be (Postfix) with ESMTP id 7B5C43040CB7
	for <java-user@lucene.apache.org>; Mon, 27 Aug 2007 14:37:40 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <645E0127-2E43-4762-9B2F-1E26A43E6130@apache.org>
References: <0E17AEFA-06C2-495D-9741-0FC63765AE3F@taktik.be> <645E0127-2E43-4762-9B2F-1E26A43E6130@apache.org>
Content-Type: multipart/alternative; boundary=Apple-Mail-8--542544043
Message-Id: <DDF85099-7596-4BFD-BED0-4C33AA1F6006@taktik.be>
From: Antoine Baudoux <ab@taktik.be>
Subject: Re: Maximum index size
Date: Mon, 27 Aug 2007 14:34:13 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Scanned: by amavisd-new at taktik.be
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-8--542544043
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=ISO-8859-1;
	delsp=yes;
	format=flowed

Ok, I will follow the documentation.

But appart from optimization tips, are there intrinsic limits in term =20=

of :

- Index size.
- number of distinct indexed terms.


--
Antoine Baudoux
Development Manager
ab@taktik.be
T=E9l.: +32 2 333 58 44
GSM: +32 499 534 538
Fax.: +32 2 648 16 53


On 27 Aug 2007, at 13:01, Grant Ingersoll wrote:

> Have a look at: http://wiki.apache.org/lucene-java/=20
> BasicsOfPerformance and the section on indexing.
>
> Please provide more details about what you are doing and your =20
> hardware, memory, etc. if that doesn't help.
>
>
> On Aug 27, 2007, at 2:26 AM, Antoine Baudoux wrote:
>
>> 	Hello,
>>
>> 	I'm indexing 2,5 millions docs.
>>
>> 	I already have added 1,2 millions docs to the index and the =20
>> indexing speed becomes quite slow.
>>
>> 	my index directory is 1GB .
>>
>> 	Is there a limit to the indexing size?
>>
>> 	Is the indexing slow when the number of terms are big?
>> =09
>>
>> --
>> Antoine Baudoux
>> Development Manager
>> ab@taktik.be
>> T=E9l.: +32 2 333 58 44
>> GSM: +32 499 534 538
>> Fax.: +32 2 648 16 53
>>
>>
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--Apple-Mail-8--542544043--

From java-user-return-30006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 27 12:58:46 2007
Return-Path: <java-user-return-30006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66820 invoked from network); 27 Aug 2007 12:58:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2007 12:58:45 -0000
Received: (qmail 30895 invoked by uid 500); 27 Aug 2007 12:58:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30859 invoked by uid 500); 27 Aug 2007 12:58:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30848 invoked by uid 99); 27 Aug 2007 12:58:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 05:58:36 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 80.76.149.213 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.213] (HELO ch-smtp02.sth.basefarm.net) (80.76.149.213)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 12:59:19 +0000
Received: from c83-249-118-113.bredband.comhem.se ([83.249.118.113]:51162 helo=[192.168.2.101])
	by ch-smtp02.sth.basefarm.net with esmtp (Exim 4.66)
	(envelope-from <karl.wettin@gmail.com>)
	id 1IPeAP-0006bV-8J
	for java-user@lucene.apache.org; Mon, 27 Aug 2007 14:58:07 +0200
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <DDF85099-7596-4BFD-BED0-4C33AA1F6006@taktik.be>
References: <0E17AEFA-06C2-495D-9741-0FC63765AE3F@taktik.be> <645E0127-2E43-4762-9B2F-1E26A43E6130@apache.org> <DDF85099-7596-4BFD-BED0-4C33AA1F6006@taktik.be>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <5C0A6EE7-328C-44AA-8BBF-E6E0886B2B8F@gmail.com>
Content-Transfer-Encoding: quoted-printable
From: Karl Wettin <karl.wettin@gmail.com>
Subject: Re: Maximum index size
Date: Mon, 27 Aug 2007 14:52:31 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Originating-IP: 83.249.118.113
X-Scan-Result: No virus found in message 1IPeAP-0006bV-8J.
X-Scan-Signature: ch-smtp02.sth.basefarm.net 1IPeAP-0006bV-8J d1dd37481460f148fce0a2648bd1fa4f
X-Virus-Checked: Checked by ClamAV on apache.org


27 aug 2007 kl. 14.34 skrev Antoine Baudoux:

> Ok, I will follow the documentation.
>
> But appart from optimization tips, are there intrinsic limits in =20
> term of :
>
> - Index size.

Integer.MAX_VALUE documents.

> - number of distinct indexed terms.

Integer.MAX_VALUE unique tokens per field.


http://www.nabble.com/How-many-documents-in-the-biggest-Lucene-index-=20
to-date--tf3120790.html

--=20
karl

>
>
> --
> Antoine Baudoux
> Development Manager
> ab@taktik.be
> T=E9l.: +32 2 333 58 44
> GSM: +32 499 534 538
> Fax.: +32 2 648 16 53
>
>
> On 27 Aug 2007, at 13:01, Grant Ingersoll wrote:
>
>> Have a look at: http://wiki.apache.org/lucene-java/=20
>> BasicsOfPerformance and the section on indexing.
>>
>> Please provide more details about what you are doing and your =20
>> hardware, memory, etc. if that doesn't help.
>>
>>
>> On Aug 27, 2007, at 2:26 AM, Antoine Baudoux wrote:
>>
>>> 	Hello,
>>>
>>> 	I'm indexing 2,5 millions docs.
>>>
>>> 	I already have added 1,2 millions docs to the index and the =20
>>> indexing speed becomes quite slow.
>>>
>>> 	my index directory is 1GB .
>>>
>>> 	Is there a limit to the indexing size?
>>>
>>> 	Is the indexing slow when the number of terms are big?
>>> =09
>>>
>>> --
>>> Antoine Baudoux
>>> Development Manager
>>> ab@taktik.be
>>> T=E9l.: +32 2 333 58 44
>>> GSM: +32 499 534 538
>>> Fax.: +32 2 648 16 53
>>>
>>>
>>
>> --------------------------
>> Grant Ingersoll
>> http://lucene.grantingersoll.com
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 27 13:43:47 2007
Return-Path: <java-user-return-30007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92168 invoked from network); 27 Aug 2007 13:43:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2007 13:43:46 -0000
Received: (qmail 22504 invoked by uid 500); 27 Aug 2007 13:43:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22462 invoked by uid 500); 27 Aug 2007 13:43:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22451 invoked by uid 99); 27 Aug 2007 13:43:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 06:43:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of willjohnsonsearch@gmail.com designates 66.249.82.238 as permitted sender)
Received: from [66.249.82.238] (HELO wx-out-0506.google.com) (66.249.82.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 13:43:28 +0000
Received: by wx-out-0506.google.com with SMTP id i28so1364018wxd
        for <java-user@lucene.apache.org>; Mon, 27 Aug 2007 06:43:07 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:from:subject:date:to:x-mailer;
        b=n7n/9bXRT3UCER4J7LdlxGIHAObpH14vA2Q5tScXeU4zAAsb1QjW2w+lQH7y6JeyFeCk/64M+Uj6kKcVW2K2uOkTfXi56blVkaoLV6h7ao2h/1a1Ru1DczWEdQDXYaIlTjb4Y6OL4xDzOGdDIFj1VN2P64d3VKyEr1Fv64R0qnY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:from:subject:date:to:x-mailer;
        b=FcBKQOkGMFlIThmGNQmV0CmQjKJdLbf7jrUWM4y/KHmvRxl4m+oRFGyJ0GFhcuC7afGnzQrCs+w/Qv3G3I+erIABDp8eXgsSvgTN8NaXiERvzGzUc0goEnRrbealgwEyMLsbIUKyn6hqzi0ztIQ2OQj94tsTkZi77wGOzgqgHqI=
Received: by 10.70.31.8 with SMTP id e8mr10269776wxe.1188222186092;
        Mon, 27 Aug 2007 06:43:06 -0700 (PDT)
Received: from ?192.168.22.22? ( [209.6.112.29])
        by mx.google.com with ESMTPS id i37sm14599643wxd.2007.08.27.06.43.04
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 27 Aug 2007 06:43:05 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <DE8C561E-A015-4E9B-9FC0-8CC530BDB558@apache.org>
References: <F239BEE0-C5DD-4C02-AEC1-095087A49CAE@gmail.com> <DE8C561E-A015-4E9B-9FC0-8CC530BDB558@apache.org>
Content-Type: multipart/alternative; boundary=Apple-Mail-1--538415212
Message-Id: <6EFBD8E6-59F7-409A-A4DC-1D73FD86B65E@gmail.com>
From: Will Johnson <willjohnsonsearch@gmail.com>
Subject: Re: function query - get DocValues
Date: Mon, 27 Aug 2007 09:43:02 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-1--538415212
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed

the patch i have worked out allows passing up the DocValues returned  
by the ValueSourceScorer to the ValueSourceQuery and then on up via a  
getDocValues().  am i missing any design/performance issues or does  
this sound generally useful?  i'll submit a patch to jira once  
everything is doc'd and tested appropriately.

this allows you do to things like:

FieldScoreQuery q = new FieldScoreQuery("qty",  
FieldScoreQuery.Type.INT);
Hits hits = searcher.search(q);
System.out.println(q.getDocValues().getAverageValue());
System.out.println(q.getDocValues().getMaxValue());
System.out.println(q.getDocValues().getMinValue());


- will


On Aug 24, 2007, at 5:17 PM, Grant Ingersoll wrote:

> Can you provide more details on what you are trying to do?  Are you  
> trying to collect information from the FunctionQuery after it is done?
>
> -Grant
>
> On Aug 24, 2007, at 5:03 PM, Will Johnson wrote:
>
>> i'm looking at doing some statistical work with lucene searches  
>> and the function queries look like a nice starting point.  i found  
>> the DocValues.getMin/Max/Avg functions already however there  
>> doesn't seem to be a nice way to get to this information without  
>> doing a fair amount of subclassing.  it would seem possible to  
>> pass the DocValues or perhaps a new DocValuesStats object back up  
>> the chain to avoid having to do all of this extra work just to get  
>> some basic info from the query.  is there some reason why this  
>> might be a bad idea/design or would a patch be interesting to  
>> anyone other than me?
>>
>> - will
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


--Apple-Mail-1--538415212--

From java-user-return-30008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 27 14:03:43 2007
Return-Path: <java-user-return-30008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99948 invoked from network); 27 Aug 2007 14:03:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2007 14:03:42 -0000
Received: (qmail 55928 invoked by uid 500); 27 Aug 2007 14:03:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55891 invoked by uid 500); 27 Aug 2007 14:03:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55880 invoked by uid 99); 27 Aug 2007 14:03:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 07:03:30 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 14:04:17 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IPfBJ-0001of-5v
	for java-user@lucene.apache.org; Mon, 27 Aug 2007 07:03:05 -0700
Message-ID: <12347529.post@talk.nabble.com>
Date: Mon, 27 Aug 2007 07:03:05 -0700 (PDT)
From: anorman <anorman@mun.ca>
To: java-user@lucene.apache.org
Subject: Searching Diacritics
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: anorman@mun.ca
X-Virus-Checked: Checked by ClamAV on apache.org


I have a searchable index of documents which contain french and spanish
diacritics (=C3=A8, =C3=A9, =C3=80) etc.  I would like to make the content =
searchable so
that when a user searches for a word such as "Am=C3=A8rique" or "Amerique"
(without diacritic) then it returns the same results.

Has anyone set up something similar?

Thanks,
Albert
--=20
View this message in context: http://www.nabble.com/Searching-Diacritics-tf=
4335454.html#a12347529
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 27 14:07:30 2007
Return-Path: <java-user-return-30009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1407 invoked from network); 27 Aug 2007 14:07:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2007 14:07:29 -0000
Received: (qmail 67041 invoked by uid 500); 27 Aug 2007 14:07:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67006 invoked by uid 500); 27 Aug 2007 14:07:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66995 invoked by uid 99); 27 Aug 2007 14:07:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 07:07:18 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 80.76.149.213 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.213] (HELO ch-smtp02.sth.basefarm.net) (80.76.149.213)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 14:07:13 +0000
Received: from c83-249-118-113.bredband.comhem.se ([83.249.118.113]:51675 helo=[192.168.2.101])
	by ch-smtp02.sth.basefarm.net with esmtp (Exim 4.66)
	(envelope-from <karl.wettin@gmail.com>)
	id 1IPfEx-00039T-6i
	for java-user@lucene.apache.org; Mon, 27 Aug 2007 16:06:51 +0200
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <12347529.post@talk.nabble.com>
References: <12347529.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <83A11BBA-2259-4166-9266-E1843B786F3C@gmail.com>
Content-Transfer-Encoding: quoted-printable
From: Karl Wettin <karl.wettin@gmail.com>
Subject: Re: Searching Diacritics
Date: Mon, 27 Aug 2007 16:01:18 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Originating-IP: 83.249.118.113
X-Scan-Result: No virus found in message 1IPfEx-00039T-6i.
X-Scan-Signature: ch-smtp02.sth.basefarm.net 1IPfEx-00039T-6i def3c3e30ec01e94668c3b507debc15f
X-Virus-Checked: Checked by ClamAV on apache.org


27 aug 2007 kl. 16.03 skrev anorman:

>
> I have a searchable index of documents which contain french and =20
> spanish
> diacritics (=E8, =E9, =C0) etc.  I would like to make the content =20
> searchable so
> that when a user searches for a word such as "Am=E8rique" or =
"Amerique"
> (without diacritic) then it returns the same results.
>
> Has anyone set up something similar?

ISOLatin1AccentFilter

--=20
karl=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 27 14:20:43 2007
Return-Path: <java-user-return-30010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6063 invoked from network); 27 Aug 2007 14:20:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2007 14:20:41 -0000
Received: (qmail 640 invoked by uid 500); 27 Aug 2007 14:20:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 610 invoked by uid 500); 27 Aug 2007 14:20:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 599 invoked by uid 99); 27 Aug 2007 14:20:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 07:20:30 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 14:21:17 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IPfRl-0002IY-8r
	for java-user@lucene.apache.org; Mon, 27 Aug 2007 07:20:05 -0700
Message-ID: <12347709.post@talk.nabble.com>
Date: Mon, 27 Aug 2007 07:20:05 -0700 (PDT)
From: anorman <anorman@mun.ca>
To: java-user@lucene.apache.org
Subject: Re: Searching Diacritics
In-Reply-To: <83A11BBA-2259-4166-9266-E1843B786F3C@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: anorman@mun.ca
References: <12347529.post@talk.nabble.com> <83A11BBA-2259-4166-9266-E1843B786F3C@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


This looks like exactly what I want.  Would I implement this along with
another analyzer such as the standard or stand alone?  Does anyone have any
code examples of implementing such a thing?

Thanks,
Albert




karl wettin-3 wrote:
>=20
>=20
> 27 aug 2007 kl. 16.03 skrev anorman:
>=20
>>
>> I have a searchable index of documents which contain french and =20
>> spanish
>> diacritics (=C3=A8, =C3=A9, =C3=80) etc.  I would like to make the conte=
nt =20
>> searchable so
>> that when a user searches for a word such as "Am=C3=A8rique" or "Ameriqu=
e"
>> (without diacritic) then it returns the same results.
>>
>> Has anyone set up something similar?
>=20
> ISOLatin1AccentFilter
>=20
> --=20
> karl
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Searching-Diacritics-tf=
4335454.html#a12347709
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 27 14:30:17 2007
Return-Path: <java-user-return-30011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11391 invoked from network); 27 Aug 2007 14:30:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2007 14:30:13 -0000
Received: (qmail 21800 invoked by uid 500); 27 Aug 2007 14:30:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21447 invoked by uid 500); 27 Aug 2007 14:30:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 13879 invoked by uid 99); 27 Aug 2007 14:26:31 -0000
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Message-ID: <46D2DEE6.4050502@zhaw.ch>
Date: Mon, 27 Aug 2007 16:25:42 +0200
From: thomas arni <arni@zhaw.ch>
User-Agent: Thunderbird 1.5.0.13 (X11/20070824)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Searching Diacritics
References: <12347529.post@talk.nabble.com> <83A11BBA-2259-4166-9266-E1843B786F3C@gmail.com> <12347709.post@talk.nabble.com>
In-Reply-To: <12347709.post@talk.nabble.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-PMX-Version: 5.3.3.310218, Antispam-Engine: 2.5.2.311128, Antispam-Data: 2007.8.27.70724
X-PerlMx-Spam: Gauge=IIIIIII, Probability=7%, Report='LEO_OBFU_SUBJ_RE 0.1, RDNS_NXDOMAIN 0, RDNS_SUSP 0, RDNS_SUSP_GENERIC 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

You can extend the DefaultAnalyzer.
The only thing you have to do, is to rewrite the method tokenStream like 
this:

  /** Constructs a {@link StandardTokenizer} filtered by a {@link
  StandardFilter}, a {@link LowerCaseFilter} and a {@link StopFilter}. */
  public TokenStream tokenStream(String fieldName, Reader reader) {
    TokenStream result = new StandardTokenizer(reader);
    result = new StandardFilter(result);
    result = new LowerCaseFilter(result);
    result = new StopFilter(result, stopSet);
    result = new ISOLatin1AccentFilter(result);
    return result;
  }


anorman wrote:
> This looks like exactly what I want.  Would I implement this along with
> another analyzer such as the standard or stand alone?  Does anyone have any
> code examples of implementing such a thing?
>
> Thanks,
> Albert
>
>
>
>
> karl wettin-3 wrote:
>   
>> 27 aug 2007 kl. 16.03 skrev anorman:
>>
>>     
>>> I have a searchable index of documents which contain french and  
>>> spanish
>>> diacritics (, , ) etc.  I would like to make the content  
>>> searchable so
>>> that when a user searches for a word such as "Amrique" or "Amerique"
>>> (without diacritic) then it returns the same results.
>>>
>>> Has anyone set up something similar?
>>>       
>> ISOLatin1AccentFilter
>>
>> -- 
>> karl
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>     
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 27 14:53:30 2007
Return-Path: <java-user-return-30012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22323 invoked from network); 27 Aug 2007 14:53:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2007 14:53:29 -0000
Received: (qmail 70203 invoked by uid 500); 27 Aug 2007 14:53:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70151 invoked by uid 500); 27 Aug 2007 14:53:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70140 invoked by uid 99); 27 Aug 2007 14:53:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 07:53:18 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [82.146.123.134] (HELO villon.taktik.be) (82.146.123.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 14:53:12 +0000
Received: from localhost (localhost [127.0.0.1])
	by villon.taktik.be (Postfix) with ESMTP id 679043045B4E
	for <java-user@lucene.apache.org>; Mon, 27 Aug 2007 16:56:05 +0200 (CEST)
Received: from villon.taktik.be ([127.0.0.1])
 by localhost (villon.taktik.be [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 01809-10 for <java-user@lucene.apache.org>;
 Mon, 27 Aug 2007 16:55:59 +0200 (CEST)
Received: from [192.168.63.11] (unknown [192.168.63.11])
	by villon.taktik.be (Postfix) with ESMTP id B85AF3045B1C
	for <java-user@lucene.apache.org>; Mon, 27 Aug 2007 16:55:59 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.3)
To: java-user@lucene.apache.org
Message-Id: <72F2CC78-70D7-4C5A-98DB-684C4AE4AAF9@taktik.be>
Content-Type: multipart/alternative; boundary=Apple-Mail-1--534237734
From: Antoine Baudoux <ab@taktik.be>
Subject: Reusing FIeld Cache when opening a new IndexSearcher
Date: Mon, 27 Aug 2007 16:52:39 +0200
X-Mailer: Apple Mail (2.752.3)
X-Virus-Scanned: by amavisd-new at taktik.be
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-1--534237734
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=ISO-8859-1;
	delsp=yes;
	format=flowed

	Hello

	I have a customScoreQuery that uses some FieldCaches to compute =20=

document scores.

	Every 5 minutes I open a new IndexSearcher. Is there a way to =
re-use =20
some the fieldCaches of the previous IndexSearcher?

	thx,

Antoine

--
Antoine Baudoux
Development Manager
ab@taktik.be
T=E9l.: +32 2 333 58 44
GSM: +32 499 534 538
Fax.: +32 2 648 16 53



--Apple-Mail-1--534237734--

From java-user-return-30013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 27 16:06:57 2007
Return-Path: <java-user-return-30013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25492 invoked from network); 27 Aug 2007 16:06:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2007 16:06:55 -0000
Received: (qmail 5281 invoked by uid 500); 27 Aug 2007 16:06:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5238 invoked by uid 500); 27 Aug 2007 16:06:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5224 invoked by uid 99); 27 Aug 2007 16:06:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 09:06:43 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stopman@gmail.com designates 66.249.82.232 as permitted sender)
Received: from [66.249.82.232] (HELO wx-out-0506.google.com) (66.249.82.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 16:06:39 +0000
Received: by wx-out-0506.google.com with SMTP id i28so1397295wxd
        for <java-user@lucene.apache.org>; Mon, 27 Aug 2007 09:06:18 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TX7k9rTpXd1v6cnsLVF/qWkbwa1WgWImixXrjnyrc0C0lcnCKw66D1sKzaZKg0StThR+cO7z/CfbmLrt2mLiJ8nV0p99gJTBactOJ/giz4CSHqNiFiln8nvOhnKgR2WibrOtUJ+IZOzU7Aizui4N+XIlsSkulXDCw8HOpxaWEtk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=J2YIlQKeWUuX4fvNrBWPdFxAGvpwzAYiFV517rDXSGZ2lohQtdgDue7F/TRzWzNmtfwRAIMkjlKT6b19ajJPXXtkMehtwgO2CQ5UVNXnclrNgPH6owbFWpo1bl3wCRsaOzsyqbNK4HvXCd/YmbuQ/k28DahY37uO4LRlIXEI5p0=
Received: by 10.90.54.4 with SMTP id c4mr11486514aga.1188230778153;
        Mon, 27 Aug 2007 09:06:18 -0700 (PDT)
Received: by 10.90.27.11 with HTTP; Mon, 27 Aug 2007 09:06:18 -0700 (PDT)
Message-ID: <652776090708270906w7735ec30w67bc5c3d5574170@mail.gmail.com>
Date: Mon, 27 Aug 2007 09:06:18 -0700
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Highlighter that works with phrase and span queries
In-Reply-To: <46D2B3C1.4050201@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_195764_3148673.1188230778106"
References: <699213.70878.qm@web26012.mail.ukl.yahoo.com>
	 <200706271744.45018.paul.elschot@xs4all.nl>
	 <4682BB5D.5030900@gmail.com>
	 <652776090708270043j3045f300g28357edb380fbdb5@mail.gmail.com>
	 <46D2B3C1.4050201@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_195764_3148673.1188230778106
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Ah, much clearer now. It seems that the jar file is just the class files. Is
the source/javadoc code somewhere else?

-M

On 8/27/07, Mark Miller <markrmiller@gmail.com> wrote:
>
> I am a bit unclear about your question. The patch you mention extends
> the original Highlighter to support phrase and span queries. It does not
> include any major performance increases over the original Highlighter
> (in fact, it takes a bit longer to Highlight a Span or Phrase query than
> it does to just highlight Terms).
>
> Will it be released with the next version of Lucene? Doesn't look like
> it, but anything is possible. A few people are using it, but there has
> not been widespread interest that I have seen. My guess is that there
> are just not enough people trying to highlight Span queries -- which I'd
> blame on a lack of Span support in the default Lucene Query syntax.
>
> Whether it is included soon or not, the code works well and I will
> continue to support it.
>
> - Mark
>
> Michael Stoppelman wrote:
> > Is this jar going to be in the next release of lucene? Also, are these
> the
> > same as the changes in the following patch:
> >
> https://issues.apache.org/jira/secure/attachment/12362653/spanhighlighter10.patch
> >
> > -M
> >
> > On 6/27/07, Mark Miller <markrmiller@gmail.com> wrote:
> >
> >>
> >>> I have not looked at any highlighting code yet. Is there already an
> >>>
> >> extension
> >>
> >>> of PhraseQuery that has getSpans() ?
> >>>
> >>>
> >> Currently I am using this code originally by M. Harwood:
> >>             Term[] phraseQueryTerms = ((PhraseQuery) query).getTerms();
> >>             int i;
> >>             SpanQuery[] clauses = new SpanQuery[phraseQueryTerms.length
> ];
> >>
> >>             for (i = 0; i < phraseQueryTerms.length; i++) {
> >>                 clauses[i] = new SpanTermQuery(phraseQueryTerms[i]);
> >>             }
> >>
> >>             SpanNearQuery sp = new SpanNearQuery(clauses,
> >>                     ((PhraseQuery) query).getSlop(), false);
> >>             sp.setBoost(query.getBoost());
> >>
> >> I don't think it is perfect logic for PhraseQuery's edit distance, but
> >> it approximates extremely well in most cases.
> >>
> >> I wonder if this approach to Highlighting would be worth it in the end.
> >> Certainly, it would seem to require that you store offsets or you would
> >> have to re-tokenize anyway.
> >>
> >> Some more interesting "stuff" on the current Highlighter methods:
> >>
> >> We can gain a lot of speed on the implementation of the current
> >> Highlighter if we grab from the source text in bigger chunks. Ronnie's
> >> Highlighter appears to be faster than the original due to two things:
> he
> >> doesn't have to re-tokenize text and he rebuilds the original document
> >> in large pieces. Depending on how you want to look at it, he loses most
> >> of the speed gained from just looking at the Query tokens instead of
> all
> >> tokens to pulling the Term offset information (which appears pretty
> slow).
> >>
> >> If you use a SimpleAnalyzer on docs around 1800 tokens long, you can
> >> actually match the speed of Ronnies highlighter with the current
> >> highlighter if you just rebuild the highlighted documents in bigger
> >> pieces i.e. instead of going through each token and adding the source
> >> text that it covers, build up the offset information until you get
> >> another hit and then pull from the source text into the highlighted
> text
> >> in one big piece rather than a tokens worth at a time. Of course this
> is
> >> not compatible with the way the Fragmenter currently works. If you use
> >> the StandardAnalyzer instead of SimpleAnalyzer, Ronnie's highlighter
> >> wins because it takes so darn long to re-analyze.
> >>
> >> It is also interesting to note that it is very difficult to see in a
> >> gain in using TokenSources to build a TokenStream. Using the
> >> StandardAnalyzer, it takes docs that are 1800 tokens just to be as fast
> >> as re-analyzing. Notice I didn't say fast, but "as fast". Anything
> >> smaller, or if you're using a simpler analyzer, and TokenSources is
> >> certainly not worth it. It just takes too long to pull TermVector info.
> >>
> >> - Mark
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_195764_3148673.1188230778106--

From java-user-return-30014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 27 16:48:17 2007
Return-Path: <java-user-return-30014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87051 invoked from network); 27 Aug 2007 16:48:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2007 16:48:16 -0000
Received: (qmail 83666 invoked by uid 500); 27 Aug 2007 16:48:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83387 invoked by uid 500); 27 Aug 2007 16:48:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83376 invoked by uid 99); 27 Aug 2007 16:48:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 09:48:06 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 16:48:00 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IPhkZ-00073x-R3
	for java-user@lucene.apache.org; Mon, 27 Aug 2007 09:47:39 -0700
Message-ID: <12353022.post@talk.nabble.com>
Date: Mon, 27 Aug 2007 09:47:39 -0700 (PDT)
From: anorman <anorman@mun.ca>
To: java-user@lucene.apache.org
Subject: Re: Searching Diacritics
In-Reply-To: <46D2DEE6.4050502@zhaw.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: anorman@mun.ca
References: <12347529.post@talk.nabble.com> <83A11BBA-2259-4166-9266-E1843B786F3C@gmail.com> <12347709.post@talk.nabble.com> <46D2DEE6.4050502@zhaw.ch>
X-Virus-Checked: Checked by ClamAV on apache.org


Can I do this at search time rather than index time?  Below is my code that
is handling the searching, where would I utilize such a filter?

Thanks for the help!




package search.lucene.search;
import org.apache.lucene.document.Document;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.analysis.ISOLatin1AccentFilter;
import org.apache.lucene.queryParser.ParseException;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.search.Hits;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.Query;

import search.lucene.index.IndexManager;

/**
 * This class is used to search the=20
 * Lucene index and return search results
 */

public class SearchManager {


private String searchWord;
   =20
    private IndexManager indexManager;
   =20
    private Analyzer analyzer;
   =20
    public SearchManager(String searchWord){
        this.searchWord   =3D searchWord;
        this.indexManager =3D new IndexManager();
        this.analyzer =3D new StandardAnalyzer();
    }
   =20
    /**
     * do search
     */
    public List search(){
        List searchResult =3D new ArrayList();
            =09
        IndexSearcher indexSearcher =3D null;

        try{
            indexSearcher =3D new IndexSearcher(indexManager.getIndexDir())=
;
        }catch(IOException ioe){
            ioe.printStackTrace();
        }

        QueryParser queryParser =3D new QueryParser("content",analyzer);
        Query query =3D null;
        try {
            query =3D queryParser.parse(searchWord);
        } catch (ParseException e) {
          e.printStackTrace();
        }
       =20
        if(null !=3D query && null !=3D indexSearcher){=09=09=09
            try {
                Hits hits =3D indexSearcher.search(query);
                for(int i =3D 0; i < hits.length(); i ++){
=09=09=09=09=09
=09=09=09=09=09Document doc =3D hits.doc(i);
      =09=09=09=09System.out.println(doc.get("filename"));
                   =20
=09=09=09=09=09SearchResultBean resultBean =3D new SearchResultBean();

                                      =20
resultBean.setXMLId(hits.doc(i).get("id"));
=09=09=09=09=09resultBean.setXMLTitle(hits.doc(i).get("title"));
=09=09=09=09=09resultBean.setXMLAuthor(hits.doc(i).get("author"));
=09=09=09=09=09resultBean.setXMLAbstract(hits.doc(i).get("abstract"));
=09=09=09=09=09resultBean.setScore(hits.score(i));
=09=09=09=09=09
=09=09=09=09=09searchResult.add(resultBean);
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return searchResult;  =20
       =20
    }






thomas arni-2 wrote:
>=20
> You can extend the DefaultAnalyzer.
> The only thing you have to do, is to rewrite the method tokenStream like=
=20
> this:
>=20
>   /** Constructs a {@link StandardTokenizer} filtered by a {@link
>   StandardFilter}, a {@link LowerCaseFilter} and a {@link StopFilter}. */
>   public TokenStream tokenStream(String fieldName, Reader reader) {
>     TokenStream result =3D new StandardTokenizer(reader);
>     result =3D new StandardFilter(result);
>     result =3D new LowerCaseFilter(result);
>     result =3D new StopFilter(result, stopSet);
>     result =3D new ISOLatin1AccentFilter(result);
>     return result;
>   }
>=20
>=20
> anorman wrote:
>> This looks like exactly what I want.  Would I implement this along with
>> another analyzer such as the standard or stand alone?  Does anyone have
>> any
>> code examples of implementing such a thing?
>>
>> Thanks,
>> Albert
>>
>>
>>
>>
>> karl wettin-3 wrote:
>>  =20
>>> 27 aug 2007 kl. 16.03 skrev anorman:
>>>
>>>    =20
>>>> I have a searchable index of documents which contain french and =20
>>>> spanish
>>>> diacritics (=C3=A8, =C3=A9, =C3=80) etc.  I would like to make the con=
tent =20
>>>> searchable so
>>>> that when a user searches for a word such as "Am=C3=A8rique" or "Ameri=
que"
>>>> (without diacritic) then it returns the same results.
>>>>
>>>> Has anyone set up something similar?
>>>>      =20
>>> ISOLatin1AccentFilter
>>>
>>> --=20
>>> karl
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>    =20
>>
>>  =20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Searching-Diacritics-tf=
4335454.html#a12353022
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 27 17:30:48 2007
Return-Path: <java-user-return-30015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26587 invoked from network); 27 Aug 2007 17:30:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2007 17:30:47 -0000
Received: (qmail 74592 invoked by uid 500); 27 Aug 2007 17:30:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74544 invoked by uid 500); 27 Aug 2007 17:30:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74533 invoked by uid 99); 27 Aug 2007 17:30:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 10:30:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mike.klaas@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 17:30:31 +0000
Received: by wa-out-1112.google.com with SMTP id j5so2132634wah
        for <java-user@lucene.apache.org>; Mon, 27 Aug 2007 10:30:10 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=pyipPOjntEWEicQiTzWvsMT9Any1UJgtiudoHkATpWMD0CSlJLtUzxjjeTixD0HEKcCaXhrcSAHMRi1nrOWKKG7NVR7WRFpoaeZmVy2Hx3QryONeImsRPz3FUe798QEs1e91alXq9Ulre90pVzbjWByhpawlDm8+eyJ1Nair0J0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=rXVKWU8K1KGSnO8wsAbBT3t2QPhTDv2o6+wdszu5UCd1n0XtsuwpKjnSbxp8ZuTNeStUwdZiFV3LXJm43osDSawYM/JiwlKzJuivIWcbpLelXtlO7z+QFQiGkhaLWjjCSkx5n57CJheUzck5tIbObNw6dXs6iy+Hu0NeOas7xtw=
Received: by 10.115.61.1 with SMTP id o1mr2458982wak.1188235810051;
        Mon, 27 Aug 2007 10:30:10 -0700 (PDT)
Received: from ?192.168.1.104? ( [24.82.155.191])
        by mx.google.com with ESMTPS id c26sm6964050waa.2007.08.27.10.30.08
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 27 Aug 2007 10:30:08 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <46D2B3C1.4050201@gmail.com>
References: <699213.70878.qm@web26012.mail.ukl.yahoo.com>	 <200706271744.45018.paul.elschot@xs4all.nl>	 <4682BB5D.5030900@gmail.com> <652776090708270043j3045f300g28357edb380fbdb5@mail.gmail.com> <46D2B3C1.4050201@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <1A97634D-142A-428A-A21E-AAB06E645781@gmail.com>
Content-Transfer-Encoding: 7bit
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: Highlighter that works with phrase and span queries
Date: Mon, 27 Aug 2007 10:30:13 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Mark,

I'm still interested in integrating this into Solr--this is a feature  
that has been requested a few times.  It would be easier to do so if  
it were a contrib/...

thanks for the great work,
-Mike

On 27-Aug-07, at 4:21 AM, Mark Miller wrote:

> I am a bit unclear about your question. The patch you mention  
> extends the original Highlighter to support phrase and span  
> queries. It does not include any major performance increases over  
> the original Highlighter (in fact, it takes a bit longer to  
> Highlight a Span or Phrase query than it does to just highlight  
> Terms).
>
> Will it be released with the next version of Lucene? Doesn't look  
> like it, but anything is possible. A few people are using it, but  
> there has not been widespread interest that I have seen. My guess  
> is that there are just not enough people trying to highlight Span  
> queries -- which I'd blame on a lack of Span support in the default  
> Lucene Query syntax.
>
> Whether it is included soon or not, the code works well and I will  
> continue to support it.
>
> - Mark
>
> Michael Stoppelman wrote:
>> Is this jar going to be in the next release of lucene? Also, are  
>> these the
>> same as the changes in the following patch:
>> https://issues.apache.org/jira/secure/attachment/12362653/ 
>> spanhighlighter10.patch
>>
>> -M
>>
>> On 6/27/07, Mark Miller <markrmiller@gmail.com> wrote:
>>
>>>
>>>> I have not looked at any highlighting code yet. Is there already an
>>>>
>>> extension
>>>
>>>> of PhraseQuery that has getSpans() ?
>>>>
>>>>
>>> Currently I am using this code originally by M. Harwood:
>>>             Term[] phraseQueryTerms = ((PhraseQuery)  
>>> query).getTerms();
>>>             int i;
>>>             SpanQuery[] clauses = new SpanQuery 
>>> [phraseQueryTerms.length];
>>>
>>>             for (i = 0; i < phraseQueryTerms.length; i++) {
>>>                 clauses[i] = new SpanTermQuery(phraseQueryTerms[i]);
>>>             }
>>>
>>>             SpanNearQuery sp = new SpanNearQuery(clauses,
>>>                     ((PhraseQuery) query).getSlop(), false);
>>>             sp.setBoost(query.getBoost());
>>>
>>> I don't think it is perfect logic for PhraseQuery's edit  
>>> distance, but
>>> it approximates extremely well in most cases.
>>>
>>> I wonder if this approach to Highlighting would be worth it in  
>>> the end.
>>> Certainly, it would seem to require that you store offsets or you  
>>> would
>>> have to re-tokenize anyway.
>>>
>>> Some more interesting "stuff" on the current Highlighter methods:
>>>
>>> We can gain a lot of speed on the implementation of the current
>>> Highlighter if we grab from the source text in bigger chunks.  
>>> Ronnie's
>>> Highlighter appears to be faster than the original due to two  
>>> things: he
>>> doesn't have to re-tokenize text and he rebuilds the original  
>>> document
>>> in large pieces. Depending on how you want to look at it, he  
>>> loses most
>>> of the speed gained from just looking at the Query tokens instead  
>>> of all
>>> tokens to pulling the Term offset information (which appears  
>>> pretty slow).
>>>
>>> If you use a SimpleAnalyzer on docs around 1800 tokens long, you can
>>> actually match the speed of Ronnies highlighter with the current
>>> highlighter if you just rebuild the highlighted documents in bigger
>>> pieces i.e. instead of going through each token and adding the  
>>> source
>>> text that it covers, build up the offset information until you get
>>> another hit and then pull from the source text into the  
>>> highlighted text
>>> in one big piece rather than a tokens worth at a time. Of course  
>>> this is
>>> not compatible with the way the Fragmenter currently works. If  
>>> you use
>>> the StandardAnalyzer instead of SimpleAnalyzer, Ronnie's highlighter
>>> wins because it takes so darn long to re-analyze.
>>>
>>> It is also interesting to note that it is very difficult to see in a
>>> gain in using TokenSources to build a TokenStream. Using the
>>> StandardAnalyzer, it takes docs that are 1800 tokens just to be  
>>> as fast
>>> as re-analyzing. Notice I didn't say fast, but "as fast". Anything
>>> smaller, or if you're using a simpler analyzer, and TokenSources is
>>> certainly not worth it. It just takes too long to pull TermVector  
>>> info.
>>>
>>> - Mark
>>>
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 27 18:19:05 2007
Return-Path: <java-user-return-30016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16438 invoked from network); 27 Aug 2007 18:19:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2007 18:19:04 -0000
Received: (qmail 61377 invoked by uid 500); 27 Aug 2007 18:18:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61351 invoked by uid 500); 27 Aug 2007 18:18:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61340 invoked by uid 99); 27 Aug 2007 18:18:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 11:18:53 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 80.76.149.212 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.212] (HELO ch-smtp01.sth.basefarm.net) (80.76.149.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 18:18:48 +0000
Received: from c83-249-118-113.bredband.comhem.se ([83.249.118.113]:53094 helo=[192.168.2.101])
	by ch-smtp01.sth.basefarm.net with esmtp (Exim 4.66)
	(envelope-from <karl.wettin@gmail.com>)
	id 1IPjAQ-0007xV-6H
	for java-user@lucene.apache.org; Mon, 27 Aug 2007 20:18:27 +0200
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <72F2CC78-70D7-4C5A-98DB-684C4AE4AAF9@taktik.be>
References: <72F2CC78-70D7-4C5A-98DB-684C4AE4AAF9@taktik.be>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6DFF0F20-6D98-44B4-BD06-CACC026E0E27@gmail.com>
Content-Transfer-Encoding: 7bit
From: Karl Wettin <karl.wettin@gmail.com>
Subject: Re: Reusing FIeld Cache when opening a new IndexSearcher
Date: Mon, 27 Aug 2007 20:12:51 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Originating-IP: 83.249.118.113
X-Scan-Result: No virus found in message 1IPjAQ-0007xV-6H.
X-Scan-Signature: ch-smtp01.sth.basefarm.net 1IPjAQ-0007xV-6H 79d5eb1dd6e9740fbd4ae1c7e7268256
X-Virus-Checked: Checked by ClamAV on apache.org


27 aug 2007 kl. 16.52 skrev Antoine Baudoux:

> Is there a way to re-use some the fieldCaches of the previous  
> IndexSearcher?

You can take a look at what Solr does:

http://wiki.apache.org/solr/SolrCaching


-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 27 18:30:45 2007
Return-Path: <java-user-return-30017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19014 invoked from network); 27 Aug 2007 18:30:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2007 18:30:44 -0000
Received: (qmail 78823 invoked by uid 500); 27 Aug 2007 18:30:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78768 invoked by uid 500); 27 Aug 2007 18:30:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78757 invoked by uid 99); 27 Aug 2007 18:30:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 11:30:34 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 18:30:29 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IPjLk-0001xF-GK
	for java-user@lucene.apache.org; Mon, 27 Aug 2007 11:30:08 -0700
Message-ID: <12354962.post@talk.nabble.com>
Date: Mon, 27 Aug 2007 11:30:08 -0700 (PDT)
From: anorman <anorman@mun.ca>
To: java-user@lucene.apache.org
Subject: Re: Searching Diacritics
In-Reply-To: <12353022.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: anorman@mun.ca
References: <12347529.post@talk.nabble.com> <83A11BBA-2259-4166-9266-E1843B786F3C@gmail.com> <12347709.post@talk.nabble.com> <46D2DEE6.4050502@zhaw.ch> <12353022.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I've tried to implement an analyzer with little different then using:

result =3D new ISOLatin1AccentFilter(result);  in the TokenStream method.

Everything appears to work, however my search will not work for any word
with diacritics with that change.  Without using it will find words such as
"c=C3=A8dulas" but not "cedulas", with the change it will find neither, it =
just
appears to be stripping it out altogether.

Any suggestions?




anorman wrote:
>=20
> Can I do this at search time rather than index time?  Below is my code
> that is handling the searching, where would I utilize such a filter?
>=20
> Thanks for the help!
>=20
>=20
>=20
>=20
> package search.lucene.search;
> import org.apache.lucene.document.Document;
> import java.io.IOException;
> import java.util.ArrayList;
> import java.util.List;
>=20
> import org.apache.lucene.analysis.Analyzer;
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> import org.apache.lucene.analysis.ISOLatin1AccentFilter;
> import org.apache.lucene.queryParser.ParseException;
> import org.apache.lucene.queryParser.QueryParser;
> import org.apache.lucene.search.Hits;
> import org.apache.lucene.search.IndexSearcher;
> import org.apache.lucene.search.Query;
>=20
> import search.lucene.index.IndexManager;
>=20
> /**
>  * This class is used to search the=20
>  * Lucene index and return search results
>  */
>=20
> public class SearchManager {
>=20
>=20
> private String searchWord;
>    =20
>     private IndexManager indexManager;
>    =20
>     private Analyzer analyzer;
>    =20
>     public SearchManager(String searchWord){
>         this.searchWord   =3D searchWord;
>         this.indexManager =3D new IndexManager();
>         this.analyzer =3D new StandardAnalyzer();
>     }
>    =20
>     /**
>      * do search
>      */
>     public List search(){
>         List searchResult =3D new ArrayList();
>             =09
>         IndexSearcher indexSearcher =3D null;
>=20
>         try{
>             indexSearcher =3D new IndexSearcher(indexManager.getIndexDir(=
));
>         }catch(IOException ioe){
>             ioe.printStackTrace();
>         }
>=20
>         QueryParser queryParser =3D new QueryParser("content",analyzer);
>         Query query =3D null;
>         try {
>             query =3D queryParser.parse(searchWord);
>         } catch (ParseException e) {
>           e.printStackTrace();
>         }
>        =20
>         if(null !=3D query && null !=3D indexSearcher){=09=09=09
>             try {
>                 Hits hits =3D indexSearcher.search(query);
>                 for(int i =3D 0; i < hits.length(); i ++){
> =09=09=09=09=09
> =09=09=09=09=09Document doc =3D hits.doc(i);
>       =09=09=09=09System.out.println(doc.get("filename"));
>                    =20
> =09=09=09=09=09SearchResultBean resultBean =3D new SearchResultBean();
>=20
>                                       =20
> resultBean.setXMLId(hits.doc(i).get("id"));
> =09=09=09=09=09resultBean.setXMLTitle(hits.doc(i).get("title"));
> =09=09=09=09=09resultBean.setXMLAuthor(hits.doc(i).get("author"));
> =09=09=09=09=09resultBean.setXMLAbstract(hits.doc(i).get("abstract"));
> =09=09=09=09=09resultBean.setScore(hits.score(i));
> =09=09=09=09=09
> =09=09=09=09=09searchResult.add(resultBean);
>                 }
>             } catch (IOException e) {
>                 e.printStackTrace();
>             }
>         }
>         return searchResult;  =20
>        =20
>     }
>=20
>=20
>=20
>=20
>=20
>=20
> thomas arni-2 wrote:
>>=20
>> You can extend the DefaultAnalyzer.
>> The only thing you have to do, is to rewrite the method tokenStream like=
=20
>> this:
>>=20
>>   /** Constructs a {@link StandardTokenizer} filtered by a {@link
>>   StandardFilter}, a {@link LowerCaseFilter} and a {@link StopFilter}. *=
/
>>   public TokenStream tokenStream(String fieldName, Reader reader) {
>>     TokenStream result =3D new StandardTokenizer(reader);
>>     result =3D new StandardFilter(result);
>>     result =3D new LowerCaseFilter(result);
>>     result =3D new StopFilter(result, stopSet);
>>     result =3D new ISOLatin1AccentFilter(result);
>>     return result;
>>   }
>>=20
>>=20
>> anorman wrote:
>>> This looks like exactly what I want.  Would I implement this along with
>>> another analyzer such as the standard or stand alone?  Does anyone have
>>> any
>>> code examples of implementing such a thing?
>>>
>>> Thanks,
>>> Albert
>>>
>>>
>>>
>>>
>>> karl wettin-3 wrote:
>>>  =20
>>>> 27 aug 2007 kl. 16.03 skrev anorman:
>>>>
>>>>    =20
>>>>> I have a searchable index of documents which contain french and =20
>>>>> spanish
>>>>> diacritics (=C3=A8, =C3=A9, =C3=80) etc.  I would like to make the co=
ntent =20
>>>>> searchable so
>>>>> that when a user searches for a word such as "Am=C3=A8rique" or "Amer=
ique"
>>>>> (without diacritic) then it returns the same results.
>>>>>
>>>>> Has anyone set up something similar?
>>>>>      =20
>>>> ISOLatin1AccentFilter
>>>>
>>>> --=20
>>>> karl
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>    =20
>>>
>>>  =20
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Searching-Diacritics-tf=
4335454.html#a12354962
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 27 18:48:40 2007
Return-Path: <java-user-return-30018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23007 invoked from network); 27 Aug 2007 18:48:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2007 18:48:39 -0000
Received: (qmail 20723 invoked by uid 500); 27 Aug 2007 18:48:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20685 invoked by uid 500); 27 Aug 2007 18:48:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20672 invoked by uid 99); 27 Aug 2007 18:48:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 11:48:28 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 80.76.149.213 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.213] (HELO ch-smtp02.sth.basefarm.net) (80.76.149.213)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 18:48:20 +0000
Received: from c83-249-118-113.bredband.comhem.se ([83.249.118.113]:53266 helo=[192.168.2.101])
	by ch-smtp02.sth.basefarm.net with esmtp (Exim 4.66)
	(envelope-from <karl.wettin@gmail.com>)
	id 1IPjcz-0004Mj-8T
	for java-user@lucene.apache.org; Mon, 27 Aug 2007 20:47:58 +0200
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <12354962.post@talk.nabble.com>
References: <12347529.post@talk.nabble.com> <83A11BBA-2259-4166-9266-E1843B786F3C@gmail.com> <12347709.post@talk.nabble.com> <46D2DEE6.4050502@zhaw.ch> <12353022.post@talk.nabble.com> <12354962.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <E69DF2B2-891F-4DB8-8180-7C772381B00E@gmail.com>
Content-Transfer-Encoding: quoted-printable
From: Karl Wettin <karl.wettin@gmail.com>
Subject: Re: Searching Diacritics
Date: Mon, 27 Aug 2007 20:42:24 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Originating-IP: 83.249.118.113
X-Scan-Result: No virus found in message 1IPjcz-0004Mj-8T.
X-Scan-Signature: ch-smtp02.sth.basefarm.net 1IPjcz-0004Mj-8T 2a07a2f307a6e9bde00a3a17caf88458
X-Virus-Checked: Checked by ClamAV on apache.org


27 aug 2007 kl. 20.30 skrev anorman:

>
> I've tried to implement an analyzer with little different then using:
>
> result =3D new ISOLatin1AccentFilter(result);  in the TokenStream =20
> method.
>
> Everything appears to work, however my search will not work for any =20=

> word
> with diacritics with that change.  Without using it will find words =20=

> such as
> "c=E8dulas" but not "cedulas", with the change it will find neither, =20=

> it just
> appears to be stripping it out altogether.

Do you use the same analyzer when searching as when creating the index?

--=20
karl


>
> Any suggestions?
>
>
>
>
> anorman wrote:
>>
>> Can I do this at search time rather than index time?  Below is my =20
>> code
>> that is handling the searching, where would I utilize such a filter?
>>
>> Thanks for the help!
>>
>>
>>
>>
>> package search.lucene.search;
>> import org.apache.lucene.document.Document;
>> import java.io.IOException;
>> import java.util.ArrayList;
>> import java.util.List;
>>
>> import org.apache.lucene.analysis.Analyzer;
>> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>> import org.apache.lucene.analysis.ISOLatin1AccentFilter;
>> import org.apache.lucene.queryParser.ParseException;
>> import org.apache.lucene.queryParser.QueryParser;
>> import org.apache.lucene.search.Hits;
>> import org.apache.lucene.search.IndexSearcher;
>> import org.apache.lucene.search.Query;
>>
>> import search.lucene.index.IndexManager;
>>
>> /**
>>  * This class is used to search the
>>  * Lucene index and return search results
>>  */
>>
>> public class SearchManager {
>>
>>
>> private String searchWord;
>>
>>     private IndexManager indexManager;
>>
>>     private Analyzer analyzer;
>>
>>     public SearchManager(String searchWord){
>>         this.searchWord   =3D searchWord;
>>         this.indexManager =3D new IndexManager();
>>         this.analyzer =3D new StandardAnalyzer();
>>     }
>>
>>     /**
>>      * do search
>>      */
>>     public List search(){
>>         List searchResult =3D new ArrayList();
>>             =09
>>         IndexSearcher indexSearcher =3D null;
>>
>>         try{
>>             indexSearcher =3D new IndexSearcher=20
>> (indexManager.getIndexDir());
>>         }catch(IOException ioe){
>>             ioe.printStackTrace();
>>         }
>>
>>         QueryParser queryParser =3D new QueryParser=20
>> ("content",analyzer);
>>         Query query =3D null;
>>         try {
>>             query =3D queryParser.parse(searchWord);
>>         } catch (ParseException e) {
>>           e.printStackTrace();
>>         }
>>
>>         if(null !=3D query && null !=3D indexSearcher){		=09=

>>             try {
>>                 Hits hits =3D indexSearcher.search(query);
>>                 for(int i =3D 0; i < hits.length(); i ++){
>> 				=09
>> 					Document doc =3D hits.doc(i);
>>       				=
System.out.println(doc.get("filename"));
>>
>> 					SearchResultBean resultBean =3D =
new SearchResultBean();
>>
>>
>> resultBean.setXMLId(hits.doc(i).get("id"));
>> 					=
resultBean.setXMLTitle(hits.doc(i).get("title"));
>> 					=
resultBean.setXMLAuthor(hits.doc(i).get("author"));
>> 					=
resultBean.setXMLAbstract(hits.doc(i).get("abstract"));
>> 					=
resultBean.setScore(hits.score(i));
>> 				=09
>> 					searchResult.add(resultBean);
>>                 }
>>             } catch (IOException e) {
>>                 e.printStackTrace();
>>             }
>>         }
>>         return searchResult;
>>
>>     }
>>
>>
>>
>>
>>
>>
>> thomas arni-2 wrote:
>>>
>>> You can extend the DefaultAnalyzer.
>>> The only thing you have to do, is to rewrite the method =20
>>> tokenStream like
>>> this:
>>>
>>>   /** Constructs a {@link StandardTokenizer} filtered by a {@link
>>>   StandardFilter}, a {@link LowerCaseFilter} and a {@link =20
>>> StopFilter}. */
>>>   public TokenStream tokenStream(String fieldName, Reader reader) {
>>>     TokenStream result =3D new StandardTokenizer(reader);
>>>     result =3D new StandardFilter(result);
>>>     result =3D new LowerCaseFilter(result);
>>>     result =3D new StopFilter(result, stopSet);
>>>     result =3D new ISOLatin1AccentFilter(result);
>>>     return result;
>>>   }
>>>
>>>
>>> anorman wrote:
>>>> This looks like exactly what I want.  Would I implement this =20
>>>> along with
>>>> another analyzer such as the standard or stand alone?  Does =20
>>>> anyone have
>>>> any
>>>> code examples of implementing such a thing?
>>>>
>>>> Thanks,
>>>> Albert
>>>>
>>>>
>>>>
>>>>
>>>> karl wettin-3 wrote:
>>>>
>>>>> 27 aug 2007 kl. 16.03 skrev anorman:
>>>>>
>>>>>
>>>>>> I have a searchable index of documents which contain french and
>>>>>> spanish
>>>>>> diacritics (=E8, =E9, =C0) etc.  I would like to make the content
>>>>>> searchable so
>>>>>> that when a user searches for a word such as "Am=E8rique" or =20
>>>>>> "Amerique"
>>>>>> (without diacritic) then it returns the same results.
>>>>>>
>>>>>> Has anyone set up something similar?
>>>>>>
>>>>> ISOLatin1AccentFilter
>>>>>
>>>>> --=20
>>>>> karl
>>>>> ------------------------------------------------------------------=20=

>>>>> ---
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>
>>>>
>>>>
>>>
>>>
>>> --------------------------------------------------------------------=20=

>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>>
>
> --=20
> View this message in context: http://www.nabble.com/Searching-=20
> Diacritics-tf4335454.html#a12354962
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 27 21:39:17 2007
Return-Path: <java-user-return-30019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70685 invoked from network); 27 Aug 2007 21:39:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Aug 2007 21:39:16 -0000
Received: (qmail 82591 invoked by uid 500); 27 Aug 2007 21:39:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82549 invoked by uid 500); 27 Aug 2007 21:39:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82538 invoked by uid 99); 27 Aug 2007 21:39:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 14:39:06 -0700
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Aug 2007 21:39:53 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IPmIC-0007uN-8e
	for java-user@lucene.apache.org; Mon, 27 Aug 2007 14:38:40 -0700
Message-ID: <12358339.post@talk.nabble.com>
Date: Mon, 27 Aug 2007 14:38:40 -0700 (PDT)
From: payo <payo22@yahoo.com>
To: java-user@lucene.apache.org
Subject: Searching in various Index
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: payo22@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi to all

i'm new with lucene

i create a directory for each document format, so , i create a directory for
HTML documents, and one directory for PDF documents, one document for XML
documents.

for each directory i create a index.

how i do for search in all my index in all directorys?

thanks
-- 
View this message in context: http://www.nabble.com/Searching-in-various-Index-tf4338538.html#a12358339
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 28 11:55:07 2007
Return-Path: <java-user-return-30020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81255 invoked from network); 28 Aug 2007 11:55:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2007 11:55:05 -0000
Received: (qmail 88282 invoked by uid 500); 28 Aug 2007 11:54:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88253 invoked by uid 500); 28 Aug 2007 11:54:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88242 invoked by uid 99); 28 Aug 2007 11:54:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Aug 2007 04:54:53 -0700
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Aug 2007 11:55:42 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IPzeM-0002mY-Qx
	for java-user@lucene.apache.org; Tue, 28 Aug 2007 04:54:26 -0700
Message-ID: <12366572.post@talk.nabble.com>
Date: Tue, 28 Aug 2007 04:54:26 -0700 (PDT)
From: anorman <anorman@mun.ca>
To: java-user@lucene.apache.org
Subject: Re: Searching Diacritics
In-Reply-To: <E69DF2B2-891F-4DB8-8180-7C772381B00E@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: anorman@mun.ca
References: <12347529.post@talk.nabble.com> <83A11BBA-2259-4166-9266-E1843B786F3C@gmail.com> <12347709.post@talk.nabble.com> <46D2DEE6.4050502@zhaw.ch> <12353022.post@talk.nabble.com> <12354962.post@talk.nabble.com> <E69DF2B2-891F-4DB8-8180-7C772381B00E@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


This was the problem, it worked excellent!

Thanks for the help!

-Albert




karl wettin-3 wrote:
>=20
>=20
> 27 aug 2007 kl. 20.30 skrev anorman:
>=20
>>
>> I've tried to implement an analyzer with little different then using:
>>
>> result =3D new ISOLatin1AccentFilter(result);  in the TokenStream =20
>> method.
>>
>> Everything appears to work, however my search will not work for any =20
>> word
>> with diacritics with that change.  Without using it will find words =20
>> such as
>> "c=C3=A8dulas" but not "cedulas", with the change it will find neither, =
=20
>> it just
>> appears to be stripping it out altogether.
>=20
> Do you use the same analyzer when searching as when creating the index?
>=20
> --=20
> karl
>=20
>=20
>>
>> Any suggestions?
>>
>>
>>
>>
>> anorman wrote:
>>>
>>> Can I do this at search time rather than index time?  Below is my =20
>>> code
>>> that is handling the searching, where would I utilize such a filter?
>>>
>>> Thanks for the help!
>>>
>>>
>>>
>>>
>>> package search.lucene.search;
>>> import org.apache.lucene.document.Document;
>>> import java.io.IOException;
>>> import java.util.ArrayList;
>>> import java.util.List;
>>>
>>> import org.apache.lucene.analysis.Analyzer;
>>> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>>> import org.apache.lucene.analysis.ISOLatin1AccentFilter;
>>> import org.apache.lucene.queryParser.ParseException;
>>> import org.apache.lucene.queryParser.QueryParser;
>>> import org.apache.lucene.search.Hits;
>>> import org.apache.lucene.search.IndexSearcher;
>>> import org.apache.lucene.search.Query;
>>>
>>> import search.lucene.index.IndexManager;
>>>
>>> /**
>>>  * This class is used to search the
>>>  * Lucene index and return search results
>>>  */
>>>
>>> public class SearchManager {
>>>
>>>
>>> private String searchWord;
>>>
>>>     private IndexManager indexManager;
>>>
>>>     private Analyzer analyzer;
>>>
>>>     public SearchManager(String searchWord){
>>>         this.searchWord   =3D searchWord;
>>>         this.indexManager =3D new IndexManager();
>>>         this.analyzer =3D new StandardAnalyzer();
>>>     }
>>>
>>>     /**
>>>      * do search
>>>      */
>>>     public List search(){
>>>         List searchResult =3D new ArrayList();
>>>             =09
>>>         IndexSearcher indexSearcher =3D null;
>>>
>>>         try{
>>>             indexSearcher =3D new IndexSearcher=20
>>> (indexManager.getIndexDir());
>>>         }catch(IOException ioe){
>>>             ioe.printStackTrace();
>>>         }
>>>
>>>         QueryParser queryParser =3D new QueryParser=20
>>> ("content",analyzer);
>>>         Query query =3D null;
>>>         try {
>>>             query =3D queryParser.parse(searchWord);
>>>         } catch (ParseException e) {
>>>           e.printStackTrace();
>>>         }
>>>
>>>         if(null !=3D query && null !=3D indexSearcher){=09=09=09
>>>             try {
>>>                 Hits hits =3D indexSearcher.search(query);
>>>                 for(int i =3D 0; i < hits.length(); i ++){
>>> =09=09=09=09=09
>>> =09=09=09=09=09Document doc =3D hits.doc(i);
>>>       =09=09=09=09System.out.println(doc.get("filename"));
>>>
>>> =09=09=09=09=09SearchResultBean resultBean =3D new SearchResultBean();
>>>
>>>
>>> resultBean.setXMLId(hits.doc(i).get("id"));
>>> =09=09=09=09=09resultBean.setXMLTitle(hits.doc(i).get("title"));
>>> =09=09=09=09=09resultBean.setXMLAuthor(hits.doc(i).get("author"));
>>> =09=09=09=09=09resultBean.setXMLAbstract(hits.doc(i).get("abstract"));
>>> =09=09=09=09=09resultBean.setScore(hits.score(i));
>>> =09=09=09=09=09
>>> =09=09=09=09=09searchResult.add(resultBean);
>>>                 }
>>>             } catch (IOException e) {
>>>                 e.printStackTrace();
>>>             }
>>>         }
>>>         return searchResult;
>>>
>>>     }
>>>
>>>
>>>
>>>
>>>
>>>
>>> thomas arni-2 wrote:
>>>>
>>>> You can extend the DefaultAnalyzer.
>>>> The only thing you have to do, is to rewrite the method =20
>>>> tokenStream like
>>>> this:
>>>>
>>>>   /** Constructs a {@link StandardTokenizer} filtered by a {@link
>>>>   StandardFilter}, a {@link LowerCaseFilter} and a {@link =20
>>>> StopFilter}. */
>>>>   public TokenStream tokenStream(String fieldName, Reader reader) {
>>>>     TokenStream result =3D new StandardTokenizer(reader);
>>>>     result =3D new StandardFilter(result);
>>>>     result =3D new LowerCaseFilter(result);
>>>>     result =3D new StopFilter(result, stopSet);
>>>>     result =3D new ISOLatin1AccentFilter(result);
>>>>     return result;
>>>>   }
>>>>
>>>>
>>>> anorman wrote:
>>>>> This looks like exactly what I want.  Would I implement this =20
>>>>> along with
>>>>> another analyzer such as the standard or stand alone?  Does =20
>>>>> anyone have
>>>>> any
>>>>> code examples of implementing such a thing?
>>>>>
>>>>> Thanks,
>>>>> Albert
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> karl wettin-3 wrote:
>>>>>
>>>>>> 27 aug 2007 kl. 16.03 skrev anorman:
>>>>>>
>>>>>>
>>>>>>> I have a searchable index of documents which contain french and
>>>>>>> spanish
>>>>>>> diacritics (=C3=A8, =C3=A9, =C3=80) etc.  I would like to make the =
content
>>>>>>> searchable so
>>>>>>> that when a user searches for a word such as "Am=C3=A8rique" or =20
>>>>>>> "Amerique"
>>>>>>> (without diacritic) then it returns the same results.
>>>>>>>
>>>>>>> Has anyone set up something similar?
>>>>>>>
>>>>>> ISOLatin1AccentFilter
>>>>>>
>>>>>> --=20
>>>>>> karl
>>>>>> ------------------------------------------------------------------=
=20
>>>>>> ---
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>>
>>>>
>>>>
>>>> --------------------------------------------------------------------=
=20
>>>> -
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>>>
>>
>> --=20
>> View this message in context: http://www.nabble.com/Searching-=20
>> Diacritics-tf4335454.html#a12354962
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Searching-Diacritics-tf=
4335454.html#a12366572
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 28 11:56:01 2007
Return-Path: <java-user-return-30021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81892 invoked from network); 28 Aug 2007 11:56:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2007 11:56:01 -0000
Received: (qmail 91027 invoked by uid 500); 28 Aug 2007 11:55:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90992 invoked by uid 500); 28 Aug 2007 11:55:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90981 invoked by uid 99); 28 Aug 2007 11:55:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Aug 2007 04:55:49 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [206.125.223.72] (HELO mx02.mailboxcop.com) (206.125.223.72)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Aug 2007 11:56:36 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx02.mailboxcop.com (8.13.1/8.13.1) with ESMTP id l7SBt2HI018462
	for <java-user@lucene.apache.org>; Tue, 28 Aug 2007 06:55:03 -0500
Received: (qmail 29945 invoked by uid 0); 28 Aug 2007 06:55:02 -0500
Date: 28 Aug 2007 06:55:02 -0500
Message-ID: <20070828115502.29944.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Searching Diacritics
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Bayes-Prob: 0.0001 (Score 0)
X-Spam-Score: 0.60 () [Hold at 6.00] NO_REAL_NAME
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: Bayes signature not available
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.4
X-Virus-Checked: Checked by ClamAV on apache.org

Tom Roberts is out of the office until 3rd September 2007 and will get back to you on his return.

http://www.luxonline.org.uk
http://www.lux.org.uk




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 28 11:56:53 2007
Return-Path: <java-user-return-30022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82486 invoked from network); 28 Aug 2007 11:56:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2007 11:56:51 -0000
Received: (qmail 93564 invoked by uid 500); 28 Aug 2007 11:56:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93535 invoked by uid 500); 28 Aug 2007 11:56:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93403 invoked by uid 99); 28 Aug 2007 11:56:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Aug 2007 04:56:32 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [206.125.223.73] (HELO mx03.mailboxcop.com) (206.125.223.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Aug 2007 11:56:23 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx03.mailboxcop.com (8.13.1/8.13.1) with ESMTP id l7SBtu4I030249
	for <java-user@lucene.apache.org>; Tue, 28 Aug 2007 06:55:57 -0500
Received: (qmail 30909 invoked by uid 0); 28 Aug 2007 06:55:56 -0500
Date: 28 Aug 2007 06:55:56 -0500
Message-ID: <20070828115556.30908.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Re: Searching Diacritics
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Bayes-Prob: 0.0001 (Score 0)
X-Spam-Score: 0.60 () [Hold at 6.00] NO_REAL_NAME
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: Bayes signature not available
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.5
X-Virus-Checked: Checked by ClamAV on apache.org

Tom Roberts is out of the office until 3rd September 2007 and will get back to you on his return.

http://www.luxonline.org.uk
http://www.lux.org.uk




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 28 14:59:44 2007
Return-Path: <java-user-return-30023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66987 invoked from network); 28 Aug 2007 14:59:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2007 14:59:28 -0000
Received: (qmail 25450 invoked by uid 500); 28 Aug 2007 14:59:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25417 invoked by uid 500); 28 Aug 2007 14:59:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25399 invoked by uid 99); 28 Aug 2007 14:59:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Aug 2007 07:59:16 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [203.59.1.108] (HELO webmail.icp-qv1-irony3.iinet.net.au) (203.59.1.108)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Aug 2007 14:59:09 +0000
Received: from unknown (HELO djc.id.au) ([124.171.163.89])
  by outbound.icp-qv1-irony-out1.iinet.net.au with ESMTP; 28 Aug 2007 22:55:30 +0800
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: Ao8CAEzV00Z8q6NZ/2dsb2JhbAA
X-IronPort-AV: i="4.19,316,1183305600"; 
   d="scan'208"; a="189849464:sNHT83136218388"
Received: from [192.168.1.10] (davis.djc.id.au [192.168.1.10])
	by djc.id.au (Postfix) with ESMTP id 4FAFAF4058
	for <java-user@lucene.apache.org>; Wed, 29 Aug 2007 00:55:30 +1000 (EST)
Message-ID: <46D43762.5080601@djc.id.au>
Date: Wed, 29 Aug 2007 00:55:30 +1000
From: Dan Callaghan <djc@djc.id.au>
User-Agent: Thunderbird 2.0.0.6 (X11/20070811)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Lucille, a (new) Python port of Lucene
X-Enigmail-Version: 0.95.2
OpenPGP: id=FB275B99;
	url=http://www.djc.id.au/static/8D2A6C2B.asc
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Dear list,

I have recently begun a Python port of Lucene, named Lucille. It is
still very much a work in progress, but I hope to have a
feature-complete release compatible with Lucene 2.1 done in the near future.

The project homepage is at: http://www.djc.id.au/lucille/

Contributions, feedback, and questions are most welcome!

P.S. A big thanks to the Lucene contributors for their hard work in
building a great piece of software.

-- 
Dan Callaghan <djc@djc.id.au>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 28 15:49:55 2007
Return-Path: <java-user-return-30024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51648 invoked from network); 28 Aug 2007 15:49:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2007 15:49:53 -0000
Received: (qmail 59477 invoked by uid 500); 28 Aug 2007 15:49:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59441 invoked by uid 500); 28 Aug 2007 15:49:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59430 invoked by uid 99); 28 Aug 2007 15:49:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Aug 2007 08:49:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=MISSING_MID,RCVD_DOUBLE_IP_LOOSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.112.185.159] (HELO retfs.replior.se) (212.112.185.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Aug 2007 15:49:37 +0000
Received: from  [192.168.100.246] by [192.168.100.241]
       with TFS Secure Messaging Server; Tue, 28 Aug 2007 17:49:06 +0200
X-Spam-Level: 
Received: from Tirion ([212.105.84.105])
	(authenticated user per@implior.com)
	by mail.replior.se
	(using TLSv1/SSLv3 with cipher RC4-MD5 (128 bits))
	for java-user@lucene.apache.org;
	Tue, 28 Aug 2007 17:49:04 +0200
From: "Per Lindberg" <per@implior.com>
To: <java-user@lucene.apache.org>
Subject: Find "latest" document (before a certain date)
Date: Tue, 28 Aug 2007 17:48:18 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Thread-Index: Acfpitop85w2FSxAQQmgtMpLmuO96Q==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=0.1 required=8.5
	tests=AWL: -1.461,BAYES_50: 1.567,TOTAL_SCORE: 0.106
Message-Id: <20070828154946.A7AE8724885@athena.apache.org>

Hi!

I have an index containing the following fields

   "id" (not to be confused with the internal Lucene id)
   "version"
   "date"

The combination of "id" and "version" is unique,
i.e. there may be serveral versions of each document
with the same id.

The "date" field indicates when the version was created.

There is also a tokenized "content" field.

Now, I want to search the content, and return only the
LATEST found document with each id. To complicate
things a bit, I want the latest before a given date. In other
words, for each id pick only the one with the highest date
less than x.

I guess I *could* sort the result hits on id and version,
and then write code to scan throgh the hits and pick out
the latest for each id. But I have a hunch that there is a
simpler way. 

Perhaps some homebrew Filter, or other trick. The query
syntax does not seem to support a question like "for each
vaule of the id field among the found hits, give me the one
with the highest date less than x"...

Cheers,
Per Lindberg



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 28 16:12:20 2007
Return-Path: <java-user-return-30025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84941 invoked from network); 28 Aug 2007 16:12:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2007 16:12:17 -0000
Received: (qmail 4602 invoked by uid 500); 28 Aug 2007 16:12:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4578 invoked by uid 500); 28 Aug 2007 16:12:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4567 invoked by uid 99); 28 Aug 2007 16:12:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Aug 2007 09:12:06 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 80.76.149.213 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.213] (HELO ch-smtp02.sth.basefarm.net) (80.76.149.213)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Aug 2007 16:12:01 +0000
Received: from c83-249-118-113.bredband.comhem.se ([83.249.118.113]:61269 helo=[192.168.2.101])
	by ch-smtp02.sth.basefarm.net with esmtp (Exim 4.66)
	(envelope-from <karl.wettin@gmail.com>)
	id 1IQ3fG-0007OE-8z
	for java-user@lucene.apache.org; Tue, 28 Aug 2007 18:11:39 +0200
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <20070828154946.A7AE8724885@athena.apache.org>
References: <20070828154946.A7AE8724885@athena.apache.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <DDF12F9A-7CEF-4F41-8C8C-DA51254A6490@gmail.com>
Content-Transfer-Encoding: 7bit
From: Karl Wettin <karl.wettin@gmail.com>
Subject: Re: Find "latest" document (before a certain date)
Date: Tue, 28 Aug 2007 18:06:01 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Originating-IP: 83.249.118.113
X-Scan-Result: No virus found in message 1IQ3fG-0007OE-8z.
X-Scan-Signature: ch-smtp02.sth.basefarm.net 1IQ3fG-0007OE-8z 3a48bf4fcc43f5e89af83a37f1cc167f
X-Virus-Checked: Checked by ClamAV on apache.org


28 aug 2007 kl. 17.48 skrev Per Lindberg:

>
> Now, I want to search the content, and return only the
> LATEST found document with each id. To complicate
> things a bit, I want the latest before a given date. In other
> words, for each id pick only the one with the highest date
> less than x.

Given you added documents with version time stamp in chronological
order, how about using a RangeQuery and pick the hit with the
greatest document number?


-- 
karl



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 28 19:29:54 2007
Return-Path: <java-user-return-30026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56121 invoked from network); 28 Aug 2007 19:29:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2007 19:29:53 -0000
Received: (qmail 80866 invoked by uid 500); 28 Aug 2007 19:29:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80285 invoked by uid 500); 28 Aug 2007 19:29:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80274 invoked by uid 99); 28 Aug 2007 19:29:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Aug 2007 12:29:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [64.81.62.48] (HELO mail01.apmindsf.com) (64.81.62.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Aug 2007 19:30:32 +0000
Received: from [10.8.0.122] (helo=[10.8.0.122])
	by mail01.apmindsf.com with esmtp (Exim 4.50)
	id 1IQ6kS-0002Yu-Kt
	for java-user@lucene.apache.org; Tue, 28 Aug 2007 12:29:12 -0700
Message-ID: <46D47A83.6010401@metaweb.com>
Date: Tue, 28 Aug 2007 12:41:55 -0700
From: Tim Sturge <tsturge@metaweb.com>
User-Agent: Mozilla Thunderbird 1.0.6 (X11/20050715)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: indexing fields with multiplicity
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have fields which have high multiplicity; for example I have a topic 
with 1000 names, 500 of which are "USA" and 200 are "United States of 
America".

Previously I was indexing "USA USA .(500x).. USA United States of 
America .(200x).. United States of America" as as single field. The 
problem is that this causes this field to be less weighted for "USA" 
than a topic with a single name "USA".

So what I am now going to do is call

for (i = 0 ; i < 500 ; i++) {
    document.add(new Field("anchor","USA"));
}

There must be a more efficient way than this; I surely don't need to 
tokenize the thing 500x for starters (and yes, I know the multiplicity 
in advance)

Can someone tell me the magic ingredient to get a new field that looks 
like 500 *seperate* names "USA"?

Thanks,

Tim

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Aug 28 21:16:35 2007
Return-Path: <java-user-return-30027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99631 invoked from network); 28 Aug 2007 21:16:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Aug 2007 21:16:34 -0000
Received: (qmail 29081 invoked by uid 500); 28 Aug 2007 21:16:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29043 invoked by uid 500); 28 Aug 2007 21:16:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29032 invoked by uid 99); 28 Aug 2007 21:16:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Aug 2007 14:16:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mike.klaas@gmail.com designates 209.85.162.182 as permitted sender)
Received: from [209.85.162.182] (HELO el-out-1112.google.com) (209.85.162.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Aug 2007 21:16:18 +0000
Received: by el-out-1112.google.com with SMTP id o28so438495ele
        for <java-user@lucene.apache.org>; Tue, 28 Aug 2007 14:15:57 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=gu0fXjbxM1XGCVuWwVx5OcMHdNix0ltUsduEM12a9395x6va7Uk4wH1KljN4CO8if5URBALC8PVBSjEz2RsLm9RTVgPFphKEallPVRPEmU4mTQ/APbWGfjKIrrFzokhj+Y1QpwYKer8tUgu0Cu5aN3ZCgfTCqsf0gYMe09ES9Eg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=rk23uc0YALfh/wZ2ZsAmiD6O/5/tQFMagOoLADQxGwXStoJRkGnq3r5n+4S+Va62juaQs55yjnXEKhYNGezL1uvmMKpEGFnIurqWAVPdOjF8229W11wRb0Cx1zhCh/qrwW71ioY8lQ5yxLM0jk4jPYdpD6K5/rJKfppgXoJNJZQ=
Received: by 10.114.197.1 with SMTP id u1mr2326236waf.1188335156089;
        Tue, 28 Aug 2007 14:05:56 -0700 (PDT)
Received: from ?192.168.1.104? ( [24.82.155.191])
        by mx.google.com with ESMTPS id m40sm11362708wag.2007.08.28.14.05.52
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 28 Aug 2007 14:05:53 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <525c024b0708230248y14b78861g564374eecf26a941@mail.gmail.com>
References: <525c024b0708230248y14b78861g564374eecf26a941@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <59591029-1076-4DEE-BC12-D59A12892673@gmail.com>
Content-Transfer-Encoding: 7bit
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: Indexing time linear?
Date: Tue, 28 Aug 2007 14:05:58 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

On 23-Aug-07, at 2:48 AM, Barry Forrest wrote:

> Hi list,
>
> I'm trying to estimate how long it will take to index 10 million  
> documents.
> If I measure how long it takes to index say 10,000 documents, can I
> extrapolate?  Will it take roughly 1000 times longer to do the  
> whole set?

Segment merging is logarithmic, so you will get some rare, large  
delays at high doc counts that would not manifest at 10k.

Analysis is linear.

-Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 00:34:30 2007
Return-Path: <java-user-return-30028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78980 invoked from network); 29 Aug 2007 00:34:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 00:34:29 -0000
Received: (qmail 10994 invoked by uid 500); 29 Aug 2007 00:34:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10948 invoked by uid 500); 29 Aug 2007 00:34:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10937 invoked by uid 99); 29 Aug 2007 00:34:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Aug 2007 17:34:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 00:34:11 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4DFEF30EFC1A; Tue, 28 Aug 2007 18:33:50 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-76-6-215-202.dhcp.embarqhsd.net [76.6.215.202])
	by ehatchersolutions.com (Postfix) with ESMTP id 18CB430EFC19
	for <java-user@lucene.apache.org>; Tue, 28 Aug 2007 18:33:41 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <46D43762.5080601@djc.id.au>
References: <46D43762.5080601@djc.id.au>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <CD04A5F6-2002-40D8-973D-6DE435F4F55D@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Lucille, a (new) Python port of Lucene
Date: Tue, 28 Aug 2007 20:33:38 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.6 required=5.0 tests=BAYES_00,RCVD_IN_SORBS_DUL 
	autolearn=no version=3.1.1

Why Lucille in light of PyLucene?

	Erik


On Aug 28, 2007, at 10:55 AM, Dan Callaghan wrote:

> Dear list,
>
> I have recently begun a Python port of Lucene, named Lucille. It is
> still very much a work in progress, but I hope to have a
> feature-complete release compatible with Lucene 2.1 done in the  
> near future.
>
> The project homepage is at: http://www.djc.id.au/lucille/
>
> Contributions, feedback, and questions are most welcome!
>
> P.S. A big thanks to the Lucene contributors for their hard work in
> building a great piece of software.
>
> -- 
> Dan Callaghan <djc@djc.id.au>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 01:21:43 2007
Return-Path: <java-user-return-30029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92661 invoked from network); 29 Aug 2007 01:21:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 01:21:42 -0000
Received: (qmail 32378 invoked by uid 500); 29 Aug 2007 01:21:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32336 invoked by uid 500); 29 Aug 2007 01:21:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32325 invoked by uid 99); 29 Aug 2007 01:21:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Aug 2007 18:21:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mike.klaas@gmail.com designates 64.233.184.225 as permitted sender)
Received: from [64.233.184.225] (HELO wr-out-0506.google.com) (64.233.184.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 01:21:25 +0000
Received: by wr-out-0506.google.com with SMTP id 41so24975wry
        for <java-user@lucene.apache.org>; Tue, 28 Aug 2007 18:21:04 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=DGXgdenKC6QhQJW2ADxVa2ofVLtfNIvtQcW9Nz+FUxhILbm7YyXWs0bXm4hE4NlNyw28HSi5nddAMyUfc4ob+1oGiawjON3J36iKw34FAlgPh2Sa2Ws4TuR02hVeavTYIg1GxaP1DMYltLEf40bWXeUsyiJlPCN1Ns1uUmV5RPA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=Yiyzx3dzINffV65zMGS0WG2xuqoS0Iw8JldXCjANU+c1bVX6xnw3+pqLa0h316hYMQFTdTQ8lGoIHoxGQgoD/ymTNPRxie2CeDYJnHOT7CH7/HO++BK1WDbk+zpAnOMo1hCpivEkUTtk2KtayLAXPNbozTI/gGAaXVpV0E2o16U=
Received: by 10.114.195.19 with SMTP id s19mr30619waf.1188350463355;
        Tue, 28 Aug 2007 18:21:03 -0700 (PDT)
Received: from ?192.168.1.104? ( [24.82.155.191])
        by mx.google.com with ESMTPS id k23sm11370868waf.2007.08.28.18.21.00
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 28 Aug 2007 18:21:01 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <CD04A5F6-2002-40D8-973D-6DE435F4F55D@ehatchersolutions.com>
References: <46D43762.5080601@djc.id.au> <CD04A5F6-2002-40D8-973D-6DE435F4F55D@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <72938985-6EC4-4899-9CA7-B4A30CD6FED0@gmail.com>
Content-Transfer-Encoding: 7bit
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: Lucille, a (new) Python port of Lucene
Date: Tue, 28 Aug 2007 18:21:05 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Not to mention Lupy.

Hasn't it been relatively well-established that trying to create a  
performant search engine in a dynamic interpreted language is a show- 
stopper?  After several failed ports of lucene (I can add to this my  
own, unreleased, attempt) I just don't see the point, except as an  
academic exercise.   This is true even with selective optimization in  
c.  I think that the core engine needs to be in c/java to achieve  
feasibility--there's nothing stopping a cool dynamic language  
wrapping the core (see Lucy).

good luck,
-Mike

On 28-Aug-07, at 5:33 PM, Erik Hatcher wrote:

> Why Lucille in light of PyLucene?
>
> 	Erik
>
>
> On Aug 28, 2007, at 10:55 AM, Dan Callaghan wrote:
>
>> Dear list,
>>
>> I have recently begun a Python port of Lucene, named Lucille. It is
>> still very much a work in progress, but I hope to have a
>> feature-complete release compatible with Lucene 2.1 done in the  
>> near future.
>>
>> The project homepage is at: http://www.djc.id.au/lucille/
>>
>> Contributions, feedback, and questions are most welcome!
>>
>> P.S. A big thanks to the Lucene contributors for their hard work in
>> building a great piece of software.
>>
>> -- 
>> Dan Callaghan <djc@djc.id.au>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 01:28:54 2007
Return-Path: <java-user-return-30030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93673 invoked from network); 29 Aug 2007 01:28:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 01:28:53 -0000
Received: (qmail 37531 invoked by uid 500); 29 Aug 2007 01:28:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37490 invoked by uid 500); 29 Aug 2007 01:28:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37479 invoked by uid 99); 29 Aug 2007 01:28:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Aug 2007 18:28:42 -0700
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 01:29:30 +0000
Received: from synergy1.parc.xerox.com ([13.1.101.60]) by alpha.xerox.com with SMTP id <144131(2)>; Tue, 28 Aug 2007 18:28:03 PDT
Received: from parc.com ([127.0.0.1]) by synergy1.parc.xerox.com with SMTP id <57996>; Tue, 28 Aug 2007 18:27:59 PDT
To: java-user@lucene.apache.org
Subject: Re: Lucille, a (new) Python port of Lucene 
In-reply-to: <CD04A5F6-2002-40D8-973D-6DE435F4F55D@ehatchersolutions.com> 
References: <46D43762.5080601@djc.id.au> <CD04A5F6-2002-40D8-973D-6DE435F4F55D@ehatchersolutions.com>
Comments: In-reply-to Erik Hatcher <erik@ehatchersolutions.com>
    message dated "Tue, 28 Aug 2007 17:33:38 -0700."
Date: Tue, 28 Aug 2007 18:27:56 PDT
From: Bill Janssen <janssen@parc.com>
Message-Id: <07Aug28.182759pdt."57996"@synergy1.parc.xerox.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Lucille apparently doesn't require gcj.

Bill

> Why Lucille in light of PyLucene?
> 
> 	Erik
> 
> 
> On Aug 28, 2007, at 10:55 AM, Dan Callaghan wrote:
> 
> > Dear list,
> >
> > I have recently begun a Python port of Lucene, named Lucille. It is
> > still very much a work in progress, but I hope to have a
> > feature-complete release compatible with Lucene 2.1 done in the  
> > near future.
> >
> > The project homepage is at: http://www.djc.id.au/lucille/
> >
> > Contributions, feedback, and questions are most welcome!
> >
> > P.S. A big thanks to the Lucene contributors for their hard work in
> > building a great piece of software.
> >
> > -- 
> > Dan Callaghan <djc@djc.id.au>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 10:31:33 2007
Return-Path: <java-user-return-30031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92923 invoked from network); 29 Aug 2007 10:31:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 10:31:31 -0000
Received: (qmail 68426 invoked by uid 500); 29 Aug 2007 10:31:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68387 invoked by uid 500); 29 Aug 2007 10:31:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68373 invoked by uid 99); 29 Aug 2007 10:31:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 03:31:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=MISSING_MID,RCVD_DOUBLE_IP_LOOSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [212.112.185.159] (HELO retfs.replior.se) (212.112.185.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 10:32:11 +0000
Received: from  [192.168.100.246] by [192.168.100.241]
       with TFS Secure Messaging Server; Wed, 29 Aug 2007 12:30:34 +0200
X-Spam-Level: 
Received: from Tirion ([212.105.84.105])
	(authenticated user per@implior.com)
	by mail.replior.se
	(using TLSv1/SSLv3 with cipher RC4-MD5 (128 bits))
	for java-user@lucene.apache.org;
	Wed, 29 Aug 2007 12:30:33 +0200
From: "Per Lindberg" <per@implior.com>
To: <java-user@lucene.apache.org>
Subject: SV: Find "latest" document (before a certain date)
Date: Wed, 29 Aug 2007 12:29:45 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Thread-Index: AcfpjkEWmOC0BoxZTEWTi1uy5QY/9gAmGivA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
In-Reply-To: <DDF12F9A-7CEF-4F41-8C8C-DA51254A6490@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=0.1 required=8.5
	tests=AWL: -1.451,BAYES_50: 1.567,TOTAL_SCORE: 0.116
Message-Id: <20070829103220.0FD754DA0A3@nike.apache.org>

=20
> Fr=E5n: Karl Wettin [mailto:karl.wettin@gmail.com]=20
> 28 aug 2007 kl. 17.48 skrev Per Lindberg:
>=20
> > Now, I want to search the content, and return only the
> > LATEST found document with each id. To complicate
> > things a bit, I want the latest before a given date. In other
> > words, for each id pick only the one with the highest date
> > less than x.
>=20
> Given you added documents with version time stamp in chronological
> order, how about using a RangeQuery and pick the hit with the
> greatest document number?

Yep, that did the trick! There seems to be no Filter that can do
the final picking of the highest date, so I had to do that after the
search.

I use IndexSearcher.search with a RangeFilter,
I presume that's just as efficient as a RangeQuery?

Thanks!
Per



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 10:32:18 2007
Return-Path: <java-user-return-30032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93199 invoked from network); 29 Aug 2007 10:32:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 10:32:16 -0000
Received: (qmail 70713 invoked by uid 500); 29 Aug 2007 10:32:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70350 invoked by uid 500); 29 Aug 2007 10:32:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70339 invoked by uid 99); 29 Aug 2007 10:32:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 03:32:05 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [206.125.223.73] (HELO mx03.mailboxcop.com) (206.125.223.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 10:32:54 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx03.mailboxcop.com (8.13.1/8.13.1) with ESMTP id l7TAVS3E013757
	for <java-user@lucene.apache.org>; Wed, 29 Aug 2007 05:31:29 -0500
Received: (qmail 15494 invoked by uid 0); 29 Aug 2007 05:31:28 -0500
Date: 29 Aug 2007 05:31:28 -0500
Message-ID: <20070829103128.15493.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: =?utf-8?Q?Re:_SV:_Find_=22latest=22_document_=28before_a_certain_date=29?=
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Bayes-Prob: 0.0001 (Score 0)
X-Spam-Score: 0.60 () [Hold at 6.00] NO_REAL_NAME,SUBJECT_EXCESS_QP
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: Bayes signature not available
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.5
X-Virus-Checked: Checked by ClamAV on apache.org

Tom Roberts is out of the office until 3rd September 2007 and will get back to you on his return.

http://www.luxonline.org.uk
http://www.lux.org.uk




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 10:33:14 2007
Return-Path: <java-user-return-30033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93535 invoked from network); 29 Aug 2007 10:33:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 10:33:13 -0000
Received: (qmail 72497 invoked by uid 500); 29 Aug 2007 10:33:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72204 invoked by uid 500); 29 Aug 2007 10:33:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72186 invoked by uid 99); 29 Aug 2007 10:33:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 03:33:02 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [206.125.223.71] (HELO mx01.mailboxcop.com) (206.125.223.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 10:32:55 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx01.mailboxcop.com (8.13.1/8.13.1) with ESMTP id l7TAWCmu017482
	for <java-user@lucene.apache.org>; Wed, 29 Aug 2007 05:32:13 -0500
Received: (qmail 16109 invoked by uid 0); 29 Aug 2007 05:32:12 -0500
Date: 29 Aug 2007 05:32:12 -0500
Message-ID: <20070829103212.16108.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: =?utf-8?Q?Re:_Re:_SV:_Find_=22latest=22_document_=28before_a_certain_date=29?=
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Bayes-Prob: 0.0001 (Score 0)
X-Spam-Score: 0.60 () [Hold at 6.00] NO_REAL_NAME,SUBJECT_EXCESS_QP
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: Bayes signature not available
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.3
X-Virus-Checked: Checked by ClamAV on apache.org

Tom Roberts is out of the office until 3rd September 2007 and will get back to you on his return.

http://www.luxonline.org.uk
http://www.lux.org.uk




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 10:49:20 2007
Return-Path: <java-user-return-30034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1659 invoked from network); 29 Aug 2007 10:49:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 10:49:19 -0000
Received: (qmail 98048 invoked by uid 500); 29 Aug 2007 10:49:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98012 invoked by uid 500); 29 Aug 2007 10:49:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98001 invoked by uid 99); 29 Aug 2007 10:49:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 03:49:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.4.36.66] (HELO mail.agderweb.no) (212.4.36.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 10:49:03 +0000
Received: from melkor [213.236.150.62] by mail.agderweb.no with ESMTP
  (SMTPD-8.22) id AEF80A7C; Wed, 29 Aug 2007 12:48:24 +0200
Date: Wed, 29 Aug 2007 12:48:24 +0200
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Indexer / Searcher holding deleted files
Reply-To: aleksander.stensby@integrasco.no
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Message-ID: <op.txthmyoaoftp72@melkor>
User-Agent: Opera Mail/9.20 (Win32)
X-IMAIL-SPAM-DNSBL: (v6net,4ef8082c000056a0,64.27.5.243)
X-IMAIL-SPAM-VALREVDNS: (4ef8082c000056a0)
X-Declude-Sender: aleksander.stensby@integrasco.no [213.236.150.62]
X-Declude-Spoolname: D4ef8082c000056a0.smd
X-Declude-RefID: 
X-Declude-Note: Scanned by Declude 4.3.46 "http://www.declude.com/x-note.htm"
X-Declude-Scan: Outgoing Score [4] at 12:48:39 on 29 Aug 2007
X-Declude-Tests: REVDNS [10]
X-Country-Chain: NORWAY->destination
X-Declude-Code: f
X-Declude-Recipcount: 1
Organization: Declude, Inc.
X-Helo: melkor
X-RevDNS: [No Reverse DNS]
X-Virus-Checked: Checked by ClamAV on apache.org

Hello everyone. I have a system where an indexing-process is running  
several times a day, adding documents, and performing an optimize() at the  
end of every run.
In addition, we have a web-application (running in tomcat) that is used to  
perform searches on the index(es).

The problem (probably because of my lack of knowledge) is that when the  
indexer has performed its optimize routine, marking the files as (deleted)  
in the filesystem (a unix system), the files are not deleted, because  
tomcat is keeping the files locked... SO as you can all imagine, the lvm  
is ever growing... Problem of course solves itself through a  
Tomcat-restart, but that's not a very ideal solution to perform restarts  
every other day or so...

I presume its the IndexReader and/or IndexSearcher that is keeping the  
files locked for deletion (in the web-application). So, i was wondering if  
any of you have any input on how I can release the files (or actually just  
delete them after the optimize routine in the indexer right away...

Than you very much for any feedback!

-- 
Aleksander M. Stensby
Senior Software Developer
Integrasco A/S

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 11:17:07 2007
Return-Path: <java-user-return-30035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16841 invoked from network); 29 Aug 2007 11:17:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 11:17:06 -0000
Received: (qmail 21448 invoked by uid 500); 29 Aug 2007 11:16:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20487 invoked by uid 500); 29 Aug 2007 11:16:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20476 invoked by uid 99); 29 Aug 2007 11:16:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 04:16:55 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.162.239 as permitted sender)
Received: from [64.233.162.239] (HELO nz-out-0506.google.com) (64.233.162.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 11:16:50 +0000
Received: by nz-out-0506.google.com with SMTP id i28so110754nzi
        for <java-user@lucene.apache.org>; Wed, 29 Aug 2007 04:16:29 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=VriQyI/31KfKf/d8QweF7SZf4qxlhI7nbvZmiTALx2ctuDUzlbKx1eCKyjC5se0AgpMcXw0Fya7yKOrDCPujFGKTGA+NEBTg3NxClFz5p4i+PzpklElbOscKdQmkKL9dYO/oHWx32mVQ6dYTf87H8ns28Gi+Yp01KFKe44UUrvc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=hZzM9re1spLZ/q6lBhEkU6LZxFRJ55pXtWdJ1+l54bXfriST5wDQdvIKja6/7I9ilh7iFrTFIsHrbDXOWKqOHiEsF9KKgvKbzxwlFkUO5/QLjtYqwa4oZLb7DHtrdQYUhWL9+zTIRo7sofqt1iJI6COKpb/v9i7qOkUfb+caal4=
Received: by 10.65.74.9 with SMTP id b9mr1245051qbl.1188386189518;
        Wed, 29 Aug 2007 04:16:29 -0700 (PDT)
Received: from ?192.168.1.108? ( [69.124.234.183])
        by mx.google.com with ESMTPS id z21sm4453045qbc.2007.08.29.04.16.27
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 29 Aug 2007 04:16:27 -0700 (PDT)
Message-ID: <46D55555.8000506@gmail.com>
Date: Wed, 29 Aug 2007 07:15:33 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Indexer / Searcher holding deleted files
References: <op.txthmyoaoftp72@melkor>
In-Reply-To: <op.txthmyoaoftp72@melkor>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Reopen the Searchers/Readers that are holding the files open.

Aleksander M. Stensby wrote:
> Hello everyone. I have a system where an indexing-process is running 
> several times a day, adding documents, and performing an optimize() at 
> the end of every run.
> In addition, we have a web-application (running in tomcat) that is 
> used to perform searches on the index(es).
>
> The problem (probably because of my lack of knowledge) is that when 
> the indexer has performed its optimize routine, marking the files as 
> (deleted) in the filesystem (a unix system), the files are not 
> deleted, because tomcat is keeping the files locked... SO as you can 
> all imagine, the lvm is ever growing... Problem of course solves 
> itself through a Tomcat-restart, but that's not a very ideal solution 
> to perform restarts every other day or so...
>
> I presume its the IndexReader and/or IndexSearcher that is keeping the 
> files locked for deletion (in the web-application). So, i was 
> wondering if any of you have any input on how I can release the files 
> (or actually just delete them after the optimize routine in the 
> indexer right away...
>
> Than you very much for any feedback!
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 11:45:58 2007
Return-Path: <java-user-return-30036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32430 invoked from network); 29 Aug 2007 11:45:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 11:45:57 -0000
Received: (qmail 57684 invoked by uid 500); 29 Aug 2007 11:45:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57638 invoked by uid 500); 29 Aug 2007 11:45:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56915 invoked by uid 99); 29 Aug 2007 11:45:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 04:45:41 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 80.76.149.212 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.212] (HELO ch-smtp01.sth.basefarm.net) (80.76.149.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 11:46:33 +0000
Received: from c83-249-118-113.bredband.comhem.se ([83.249.118.113]:50541 helo=[192.168.2.101])
	by ch-smtp01.sth.basefarm.net with esmtp (Exim 4.66)
	(envelope-from <karl.wettin@gmail.com>)
	id 1IQLz1-0004XZ-4Q
	for java-user@lucene.apache.org; Wed, 29 Aug 2007 13:45:15 +0200
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <20070829103220.0FD754DA0A3@nike.apache.org>
References: <20070829103220.0FD754DA0A3@nike.apache.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <79A49E54-0A90-46A2-A5A3-909F756AEA4A@gmail.com>
Content-Transfer-Encoding: 7bit
From: Karl Wettin <karl.wettin@gmail.com>
Subject: Re: Find "latest" document (before a certain date)
Date: Wed, 29 Aug 2007 13:39:27 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Originating-IP: 83.249.118.113
X-Scan-Result: No virus found in message 1IQLz1-0004XZ-4Q.
X-Scan-Signature: ch-smtp01.sth.basefarm.net 1IQLz1-0004XZ-4Q bfa20f811ff49f040bfec8b22766bd41
X-Virus-Checked: Checked by ClamAV on apache.org


29 aug 2007 kl. 12.29 skrev Per Lindberg:

>> how about using a RangeQuery and pick the hit with the
>> greatest document number?
>
> Yep, that did the trick! There seems to be no Filter that can do
> the final picking of the highest date, so I had to do that after the
> search.
>
> I use IndexSearcher.search with a RangeFilter,
> I presume that's just as efficient as a RangeQuery?

It depends, espescially on how you use reuse the filter.

Benchmark to be sure


-- 
kalle


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 11:59:57 2007
Return-Path: <java-user-return-30037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41853 invoked from network); 29 Aug 2007 11:59:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 11:59:57 -0000
Received: (qmail 86350 invoked by uid 500); 29 Aug 2007 11:59:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86071 invoked by uid 500); 29 Aug 2007 11:59:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86060 invoked by uid 99); 29 Aug 2007 11:59:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 04:59:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 11:59:40 +0000
Received: by py-out-1112.google.com with SMTP id d32so378983pye
        for <java-user@lucene.apache.org>; Wed, 29 Aug 2007 04:59:19 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=ZNWvRxvxSxQvrUFO0JDV1V5XgF1E3H6WtbiJ9kZsj9/pVgvXS7SDQpMNp4sZO75uOySzWAdRpLEZ+tds0hE5/Aw/dPnvMBgJiqgwsdaO6mq4JnsVRaA0UAYf0IvPZYqFB/CbzffXATKLnaByd0gHmCmDbAbxCYXxMr576fXQuYQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=givuXhT0TAOoxYTZ/tBbFQUIh5ytBAUHOJXAXzT5SjsopV2qxqfZ8whfi0AvThYsOluFfd5Z6rgfirKcmuhWzCohmXxWsHf/pkYOv7lPL8wFEpMSwODRXw4nvGlH3+UR41Mx0cIgt4ghT9qwSWcxQQUSmZPbJbbyYCzFEGUDH84=
Received: by 10.65.15.19 with SMTP id s19mr1317707qbi.1188388759066;
        Wed, 29 Aug 2007 04:59:19 -0700 (PDT)
Received: from ?192.168.1.108? ( [69.124.234.183])
        by mx.google.com with ESMTPS id e14sm4455272qba.2007.08.29.04.59.10
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 29 Aug 2007 04:59:11 -0700 (PDT)
Message-ID: <46D55F58.3070907@gmail.com>
Date: Wed, 29 Aug 2007 07:58:16 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Highlighter that works with phrase and span queries
References: <699213.70878.qm@web26012.mail.ukl.yahoo.com>	 <200706271744.45018.paul.elschot@xs4all.nl>	 <4682BB5D.5030900@gmail.com> <652776090708270043j3045f300g28357edb380fbdb5@mail.gmail.com> <46D2B3C1.4050201@gmail.com> <1A97634D-142A-428A-A21E-AAB06E645781@gmail.com>
In-Reply-To: <1A97634D-142A-428A-A21E-AAB06E645781@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

It kind of is a contrib -- its really just a new Scorer class (with some 
axillary helper classes) for the old contrib Highlighter. Since the 
contrib Highlighter is pretty hardened at this point, I figured that was 
the best way to go. Or do you mean something different?

- Mark

Mike Klaas wrote:
> Mark,
>
> I'm still interested in integrating this into Solr--this is a feature 
> that has been requested a few times.  It would be easier to do so if 
> it were a contrib/...
>
> thanks for the great work,
> -Mike
>
> On 27-Aug-07, at 4:21 AM, Mark Miller wrote:
>
>> I am a bit unclear about your question. The patch you mention extends 
>> the original Highlighter to support phrase and span queries. It does 
>> not include any major performance increases over the original 
>> Highlighter (in fact, it takes a bit longer to Highlight a Span or 
>> Phrase query than it does to just highlight Terms).
>>
>> Will it be released with the next version of Lucene? Doesn't look 
>> like it, but anything is possible. A few people are using it, but 
>> there has not been widespread interest that I have seen. My guess is 
>> that there are just not enough people trying to highlight Span 
>> queries -- which I'd blame on a lack of Span support in the default 
>> Lucene Query syntax.
>>
>> Whether it is included soon or not, the code works well and I will 
>> continue to support it.
>>
>> - Mark
>>
>> Michael Stoppelman wrote:
>>> Is this jar going to be in the next release of lucene? Also, are 
>>> these the
>>> same as the changes in the following patch:
>>> https://issues.apache.org/jira/secure/attachment/12362653/spanhighlighter10.patch 
>>>
>>>
>>> -M
>>>
>>> On 6/27/07, Mark Miller <markrmiller@gmail.com> wrote:
>>>
>>>>
>>>>> I have not looked at any highlighting code yet. Is there already an
>>>>>
>>>> extension
>>>>
>>>>> of PhraseQuery that has getSpans() ?
>>>>>
>>>>>
>>>> Currently I am using this code originally by M. Harwood:
>>>>             Term[] phraseQueryTerms = ((PhraseQuery) 
>>>> query).getTerms();
>>>>             int i;
>>>>             SpanQuery[] clauses = new 
>>>> SpanQuery[phraseQueryTerms.length];
>>>>
>>>>             for (i = 0; i < phraseQueryTerms.length; i++) {
>>>>                 clauses[i] = new SpanTermQuery(phraseQueryTerms[i]);
>>>>             }
>>>>
>>>>             SpanNearQuery sp = new SpanNearQuery(clauses,
>>>>                     ((PhraseQuery) query).getSlop(), false);
>>>>             sp.setBoost(query.getBoost());
>>>>
>>>> I don't think it is perfect logic for PhraseQuery's edit distance, but
>>>> it approximates extremely well in most cases.
>>>>
>>>> I wonder if this approach to Highlighting would be worth it in the 
>>>> end.
>>>> Certainly, it would seem to require that you store offsets or you 
>>>> would
>>>> have to re-tokenize anyway.
>>>>
>>>> Some more interesting "stuff" on the current Highlighter methods:
>>>>
>>>> We can gain a lot of speed on the implementation of the current
>>>> Highlighter if we grab from the source text in bigger chunks. Ronnie's
>>>> Highlighter appears to be faster than the original due to two 
>>>> things: he
>>>> doesn't have to re-tokenize text and he rebuilds the original document
>>>> in large pieces. Depending on how you want to look at it, he loses 
>>>> most
>>>> of the speed gained from just looking at the Query tokens instead 
>>>> of all
>>>> tokens to pulling the Term offset information (which appears pretty 
>>>> slow).
>>>>
>>>> If you use a SimpleAnalyzer on docs around 1800 tokens long, you can
>>>> actually match the speed of Ronnies highlighter with the current
>>>> highlighter if you just rebuild the highlighted documents in bigger
>>>> pieces i.e. instead of going through each token and adding the source
>>>> text that it covers, build up the offset information until you get
>>>> another hit and then pull from the source text into the highlighted 
>>>> text
>>>> in one big piece rather than a tokens worth at a time. Of course 
>>>> this is
>>>> not compatible with the way the Fragmenter currently works. If you use
>>>> the StandardAnalyzer instead of SimpleAnalyzer, Ronnie's highlighter
>>>> wins because it takes so darn long to re-analyze.
>>>>
>>>> It is also interesting to note that it is very difficult to see in a
>>>> gain in using TokenSources to build a TokenStream. Using the
>>>> StandardAnalyzer, it takes docs that are 1800 tokens just to be as 
>>>> fast
>>>> as re-analyzing. Notice I didn't say fast, but "as fast". Anything
>>>> smaller, or if you're using a simpler analyzer, and TokenSources is
>>>> certainly not worth it. It just takes too long to pull TermVector 
>>>> info.
>>>>
>>>> - Mark
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 12:01:29 2007
Return-Path: <java-user-return-30038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42784 invoked from network); 29 Aug 2007 12:01:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 12:01:29 -0000
Received: (qmail 89844 invoked by uid 500); 29 Aug 2007 12:01:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89806 invoked by uid 500); 29 Aug 2007 12:01:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89794 invoked by uid 99); 29 Aug 2007 12:01:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 05:01:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 12:01:12 +0000
Received: by py-out-1112.google.com with SMTP id d32so380133pye
        for <java-user@lucene.apache.org>; Wed, 29 Aug 2007 05:00:51 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=opKV7kWLrvH11uVY2ADRZiAV8X8/COoch2CCt5xOmRs3Jz/pKIs/xzkKAbpOeaIrGooydosBAwxGA47zWZUpqYYqXBa8lOh41D5P0eTgcnr11PMweGVhDFWPmc906YrEIylxa5zG3jfCQMHywUTMi5zaDXsi+O9FJnmqZ9fB/jw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=lsopn0i3Rn0wpS+QJJ6wEKJe6g6i9VAxpSvs+GqbjVOFRMP7S0YBqJBZwhgUHie+BsfM/YVNGLcNYPvuc+0cIZvQYQ2AXsfi8bVGW6zZ3XmbF1jhyvTrqIdBWdIsiJSRe4kxrqq33yP/TUJt8Ag+Qgw+NV/aOwt9RcUbYsfSY+Y=
Received: by 10.65.156.2 with SMTP id i2mr1270644qbo.1188388850455;
        Wed, 29 Aug 2007 05:00:50 -0700 (PDT)
Received: from ?192.168.1.108? ( [69.124.234.183])
        by mx.google.com with ESMTPS id c5sm4475740qbc.2007.08.29.05.00.48
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 29 Aug 2007 05:00:48 -0700 (PDT)
Message-ID: <46D55FBA.6010709@gmail.com>
Date: Wed, 29 Aug 2007 07:59:54 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Highlighter that works with phrase and span queries
References: <699213.70878.qm@web26012.mail.ukl.yahoo.com>	 <200706271744.45018.paul.elschot@xs4all.nl>	 <4682BB5D.5030900@gmail.com>	 <652776090708270043j3045f300g28357edb380fbdb5@mail.gmail.com>	 <46D2B3C1.4050201@gmail.com> <652776090708270906w7735ec30w67bc5c3d5574170@mail.gmail.com>
In-Reply-To: <652776090708270906w7735ec30w67bc5c3d5574170@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

The patch you refer to should include the javadoc/source code. If that 
is not sufficient, drop me a line privately and I will email you all of 
the source code / javadoc.

- Mark

Michael Stoppelman wrote:
> Ah, much clearer now. It seems that the jar file is just the class files. Is
> the source/javadoc code somewhere else?
>
> -M
>
> On 8/27/07, Mark Miller <markrmiller@gmail.com> wrote:
>   
>> I am a bit unclear about your question. The patch you mention extends
>> the original Highlighter to support phrase and span queries. It does not
>> include any major performance increases over the original Highlighter
>> (in fact, it takes a bit longer to Highlight a Span or Phrase query than
>> it does to just highlight Terms).
>>
>> Will it be released with the next version of Lucene? Doesn't look like
>> it, but anything is possible. A few people are using it, but there has
>> not been widespread interest that I have seen. My guess is that there
>> are just not enough people trying to highlight Span queries -- which I'd
>> blame on a lack of Span support in the default Lucene Query syntax.
>>
>> Whether it is included soon or not, the code works well and I will
>> continue to support it.
>>
>> - Mark
>>
>> Michael Stoppelman wrote:
>>     
>>> Is this jar going to be in the next release of lucene? Also, are these
>>>       
>> the
>>     
>>> same as the changes in the following patch:
>>>
>>>       
>> https://issues.apache.org/jira/secure/attachment/12362653/spanhighlighter10.patch
>>     
>>> -M
>>>
>>> On 6/27/07, Mark Miller <markrmiller@gmail.com> wrote:
>>>
>>>       
>>>>> I have not looked at any highlighting code yet. Is there already an
>>>>>
>>>>>           
>>>> extension
>>>>
>>>>         
>>>>> of PhraseQuery that has getSpans() ?
>>>>>
>>>>>
>>>>>           
>>>> Currently I am using this code originally by M. Harwood:
>>>>             Term[] phraseQueryTerms = ((PhraseQuery) query).getTerms();
>>>>             int i;
>>>>             SpanQuery[] clauses = new SpanQuery[phraseQueryTerms.length
>>>>         
>> ];
>>     
>>>>             for (i = 0; i < phraseQueryTerms.length; i++) {
>>>>                 clauses[i] = new SpanTermQuery(phraseQueryTerms[i]);
>>>>             }
>>>>
>>>>             SpanNearQuery sp = new SpanNearQuery(clauses,
>>>>                     ((PhraseQuery) query).getSlop(), false);
>>>>             sp.setBoost(query.getBoost());
>>>>
>>>> I don't think it is perfect logic for PhraseQuery's edit distance, but
>>>> it approximates extremely well in most cases.
>>>>
>>>> I wonder if this approach to Highlighting would be worth it in the end.
>>>> Certainly, it would seem to require that you store offsets or you would
>>>> have to re-tokenize anyway.
>>>>
>>>> Some more interesting "stuff" on the current Highlighter methods:
>>>>
>>>> We can gain a lot of speed on the implementation of the current
>>>> Highlighter if we grab from the source text in bigger chunks. Ronnie's
>>>> Highlighter appears to be faster than the original due to two things:
>>>>         
>> he
>>     
>>>> doesn't have to re-tokenize text and he rebuilds the original document
>>>> in large pieces. Depending on how you want to look at it, he loses most
>>>> of the speed gained from just looking at the Query tokens instead of
>>>>         
>> all
>>     
>>>> tokens to pulling the Term offset information (which appears pretty
>>>>         
>> slow).
>>     
>>>> If you use a SimpleAnalyzer on docs around 1800 tokens long, you can
>>>> actually match the speed of Ronnies highlighter with the current
>>>> highlighter if you just rebuild the highlighted documents in bigger
>>>> pieces i.e. instead of going through each token and adding the source
>>>> text that it covers, build up the offset information until you get
>>>> another hit and then pull from the source text into the highlighted
>>>>         
>> text
>>     
>>>> in one big piece rather than a tokens worth at a time. Of course this
>>>>         
>> is
>>     
>>>> not compatible with the way the Fragmenter currently works. If you use
>>>> the StandardAnalyzer instead of SimpleAnalyzer, Ronnie's highlighter
>>>> wins because it takes so darn long to re-analyze.
>>>>
>>>> It is also interesting to note that it is very difficult to see in a
>>>> gain in using TokenSources to build a TokenStream. Using the
>>>> StandardAnalyzer, it takes docs that are 1800 tokens just to be as fast
>>>> as re-analyzing. Notice I didn't say fast, but "as fast". Anything
>>>> smaller, or if you're using a simpler analyzer, and TokenSources is
>>>> certainly not worth it. It just takes too long to pull TermVector info.
>>>>
>>>> - Mark
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>         
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 12:34:34 2007
Return-Path: <java-user-return-30039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57142 invoked from network); 29 Aug 2007 12:34:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 12:34:17 -0000
Received: (qmail 57430 invoked by uid 500); 29 Aug 2007 12:34:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57393 invoked by uid 500); 29 Aug 2007 12:34:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57375 invoked by uid 99); 29 Aug 2007 12:34:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 05:34:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=MISSING_MID,RCVD_DOUBLE_IP_LOOSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [212.112.185.159] (HELO retfs.replior.se) (212.112.185.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 12:34:58 +0000
Received: from  [192.168.100.246] by [192.168.100.241]
       with TFS Secure Messaging Server; Wed, 29 Aug 2007 14:33:32 +0200
X-Spam-Level: 
Received: from Tirion ([212.105.84.105])
	(authenticated user per@implior.com)
	by mail.replior.se
	(using TLSv1/SSLv3 with cipher RC4-MD5 (128 bits))
	for java-user@lucene.apache.org;
	Wed, 29 Aug 2007 14:33:30 +0200
From: "Per Lindberg" <per@implior.com>
To: <java-user@lucene.apache.org>
Subject: Caching IndexSearcher in a webapp [was: Find "latest" document (before a certain date)]
Date: Wed, 29 Aug 2007 14:32:42 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Thread-Index: AcfqMjfft+w6M2CqQWyXu0n8Nco2MgABIXVw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
In-Reply-To: <79A49E54-0A90-46A2-A5A3-909F756AEA4A@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=0.0 required=8.5
	tests=AWL: 0.170,BAYES_00: -1.665,TOTAL_SCORE: -1.495
Message-Id: <20070829123506.B996C4DA0A3@nike.apache.org>


> Fr=E5n: Karl Wettin [mailto:karl.wettin@gmail.com]=20

> 29 aug 2007 kl. 12.29 skrev Per Lindberg:
>=20
> >> how about using a RangeQuery and pick the hit with the
> >> greatest document number?
> >
> > Yep, that did the trick! There seems to be no Filter that can do
> > the final picking of the highest date, so I had to do that after the
> > search.
> >
> > I use IndexSearcher.search with a RangeFilter,
> > I presume that's just as efficient as a RangeQuery?
>=20
> It depends, espescially on how you use reuse the filter.

For each search request (it's a webapp) I currently create
a new IndexSearcher, new Filter and new Sort, call
searcher.search(query, filter, sorter) and later searcher.close().

The literature says that it is desirable to cache the IndexSearcher,
but there's no mention of the memory cost! Since it is said to
take a long time to create, I presume that the IndexSearcher
reads the index files and keeps a lot of stuff in memory, so
the thought of caching one for each HttpSession gives me bad vibes.

(Also keeping open files; the file locking scheme in NTFS
can prevent Tomcat from doing hot redeploy if the webapp
has open files).

> Benchmark to be sure

So far searches with Lucene feel astonishingly fast! Yay! :-)




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 12:46:14 2007
Return-Path: <java-user-return-30040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60270 invoked from network); 29 Aug 2007 12:46:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 12:46:13 -0000
Received: (qmail 80716 invoked by uid 500); 29 Aug 2007 12:46:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80359 invoked by uid 500); 29 Aug 2007 12:46:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80348 invoked by uid 99); 29 Aug 2007 12:46:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 05:46:02 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 80.76.149.212 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.212] (HELO ch-smtp01.sth.basefarm.net) (80.76.149.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 12:46:54 +0000
Received: from c83-249-118-113.bredband.comhem.se ([83.249.118.113]:50805 helo=[192.168.2.101])
	by ch-smtp01.sth.basefarm.net with esmtp (Exim 4.66)
	(envelope-from <karl.wettin@gmail.com>)
	id 1IQMvP-0007pc-5z
	for java-user@lucene.apache.org; Wed, 29 Aug 2007 14:45:35 +0200
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <20070829123506.B996C4DA0A3@nike.apache.org>
References: <20070829123506.B996C4DA0A3@nike.apache.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <3A2CBCB8-3314-4FF4-B39C-726A1B992CB0@gmail.com>
Content-Transfer-Encoding: 7bit
From: Karl Wettin <karl.wettin@gmail.com>
Subject: Re: Caching IndexSearcher in a webapp [was: Find "latest" document (before a certain date)]
Date: Wed, 29 Aug 2007 14:39:49 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Originating-IP: 83.249.118.113
X-Scan-Result: No virus found in message 1IQMvP-0007pc-5z.
X-Scan-Signature: ch-smtp01.sth.basefarm.net 1IQMvP-0007pc-5z 71eb439957dd7b81b7a95e3a8b8b569d
X-Virus-Checked: Checked by ClamAV on apache.org


29 aug 2007 kl. 14.32 skrev Per Lindberg:

> For each search request (it's a webapp) I currently create
> a new IndexSearcher, new Filter and new Sort, call
> searcher.search(query, filter, sorter) and later searcher.close().

You really want to reuse the IndexSearcher until new data has
been added to the index. I suppose the same thing goes for filters
and perhaps even sorts?

Start here:

http://wiki.apache.org/lucene-java/ImproveSearchingSpeed


-- 
kalle



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 12:47:38 2007
Return-Path: <java-user-return-30041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60725 invoked from network); 29 Aug 2007 12:47:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 12:47:36 -0000
Received: (qmail 85491 invoked by uid 500); 29 Aug 2007 12:47:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85460 invoked by uid 500); 29 Aug 2007 12:47:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85449 invoked by uid 99); 29 Aug 2007 12:47:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 05:47:25 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of patrek@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 12:48:18 +0000
Received: by nf-out-0910.google.com with SMTP id d3so138174nfc
        for <java-user@lucene.apache.org>; Wed, 29 Aug 2007 05:47:01 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=QUDBbrR6GXH0SqoHqV8hyZsAxff5hzcVgONLUNvIwFUy9I4sRsaSc/4WHICbnSz8BFoEp04EnyKhaBB2+aUFpCC+9xPAfW2K+whIs92qLkKvRtr75r4P23ejCOAYZqp8+OjY4oqUD5zMbT0ndgnEfwlE+N7qas0UBtC19x7TsJ0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=XMldEuehg0yL+0bLWo7xRj+K9v3g7qbsDCi2JTe+V8G/22xYUijyCLakf9JQbMjJRDtIUKu9TYAXgzJTzX6AuLaoxdjfE2uokrJ+b2ZDprDo4AqajUYuAgEs+YEAcuBCjRLwACmHyt/kHi7//F77BcvLpWrndaAOwV5SXIKgDwg=
Received: by 10.78.180.16 with SMTP id c16mr336469huf.1188391619785;
        Wed, 29 Aug 2007 05:46:59 -0700 (PDT)
Received: by 10.78.26.4 with HTTP; Wed, 29 Aug 2007 05:46:59 -0700 (PDT)
Message-ID: <48b038c60708290546m50cbdeear616665b481bfac94@mail.gmail.com>
Date: Wed, 29 Aug 2007 08:46:59 -0400
From: "Patrick Turcotte" <patrek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Caching IndexSearcher in a webapp [was: Find "latest" document (before a certain date)]
In-Reply-To: <20070829123506.B996C4DA0A3@nike.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <79A49E54-0A90-46A2-A5A3-909F756AEA4A@gmail.com>
	 <20070829123506.B996C4DA0A3@nike.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Answers in the text.
> For each search request (it's a webapp) I currently create
> a new IndexSearcher, new Filter and new Sort, call
> searcher.search(query, filter, sorter) and later searcher.close().
>
> The literature says that it is desirable to cache the IndexSearcher,
> but there's no mention of the memory cost! Since it is said to
> take a long time to create, I presume that the IndexSearcher
> reads the index files and keeps a lot of stuff in memory, so
> the thought of caching one for each HttpSession gives me bad vibes.

Why don't you put into the context scope
[servletContext.setAttribute("index", IndexSearcher)] ?

You can have it initialized upon startup with init() and cleanup on
shutdown with destroy()

Hope this helps.

Patrick

>
> (Also keeping open files; the file locking scheme in NTFS
> can prevent Tomcat from doing hot redeploy if the webapp
> has open files).
>
> > Benchmark to be sure
>
> So far searches with Lucene feel astonishingly fast! Yay! :-)
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 13:00:14 2007
Return-Path: <java-user-return-30042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65624 invoked from network); 29 Aug 2007 13:00:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 13:00:12 -0000
Received: (qmail 3941 invoked by uid 500); 29 Aug 2007 13:00:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3904 invoked by uid 500); 29 Aug 2007 13:00:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3874 invoked by uid 99); 29 Aug 2007 13:00:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 06:00:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.4.36.66] (HELO mail.agderweb.no) (212.4.36.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 12:59:56 +0000
Received: from melkor [213.236.150.62] by mail.agderweb.no with ESMTP
  (SMTPD-8.22) id ADA10538; Wed, 29 Aug 2007 14:59:13 +0200
Date: Wed, 29 Aug 2007 14:59:10 +0200
To: java-user@lucene.apache.org
Subject: Re: Indexer / Searcher holding deleted files
Reply-To: aleksander.stensby@integrasco.no
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
References: <op.txthmyoaoftp72@melkor> <46D55555.8000506@gmail.com>
Content-Transfer-Encoding: Quoted-Printable
Message-ID: <op.txtnows5oftp72@melkor>
In-Reply-To: <46D55555.8000506@gmail.com>
User-Agent: Opera Mail/9.20 (Win32)
X-IMAIL-SPAM-DNSBL: (v6net,6d9f085900006a42,64.27.5.243)
X-IMAIL-SPAM-VALREVDNS: (6d9f085900006a42)
X-Declude-Sender: aleksander.stensby@integrasco.no [213.236.150.62]
X-Declude-Spoolname: D6d9f085900006a42.smd
X-Declude-RefID: 
X-Declude-Note: Scanned by Declude 4.3.46 "http://www.declude.com/x-note.htm"
X-Declude-Scan: Outgoing Score [4] at 14:59:33 on 29 Aug 2007
X-Declude-Tests: REVDNS [10]
X-Country-Chain: NORWAY->destination
X-Declude-Code: f
X-Declude-Recipcount: 1
Organization: Declude, Inc.
X-Helo: melkor
X-RevDNS: [No Reverse DNS]
X-Virus-Checked: Checked by ClamAV on apache.org

Hmm, yeah, well thats what I do now...
Shouldn't it be sufficient to do:

searcher.close();
(...)
searcher =3D new IndexSearcher(indexPath);


Or?

And maybe wrap that in
if(searcher.getIndexReader.hasDeletions())
and possibly (!searcher.getIndexReader.isCurrent())

thanks,
Aleksander


On Wed, 29 Aug 2007 13:15:33 +0200, Mark Miller <markrmiller@gmail.com> =
 =

wrote:

> Reopen the Searchers/Readers that are holding the files open.
>
> Aleksander M. Stensby wrote:
>> Hello everyone. I have a system where an indexing-process is running =
 =

>> several times a day, adding documents, and performing an optimize() a=
t  =

>> the end of every run.
>> In addition, we have a web-application (running in tomcat) that is us=
ed  =

>> to perform searches on the index(es).
>>
>> The problem (probably because of my lack of knowledge) is that when t=
he  =

>> indexer has performed its optimize routine, marking the files as  =

>> (deleted) in the filesystem (a unix system), the files are not delete=
d,  =

>> because tomcat is keeping the files locked... SO as you can all  =

>> imagine, the lvm is ever growing... Problem of course solves itself  =

>> through a Tomcat-restart, but that's not a very ideal solution to  =

>> perform restarts every other day or so...
>>
>> I presume its the IndexReader and/or IndexSearcher that is keeping th=
e  =

>> files locked for deletion (in the web-application). So, i was wonderi=
ng  =

>> if any of you have any input on how I can release the files (or  =

>> actually just delete them after the optimize routine in the indexer  =

>> right away...
>>
>> Than you very much for any feedback!
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- =

Aleksander M. Stensby
Senior Software Developer
Integrasco A/S
aleksander.stensby@integrasco.no
Tlf.: +47 41 22 82 72

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 13:41:00 2007
Return-Path: <java-user-return-30043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83147 invoked from network); 29 Aug 2007 13:40:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 13:40:59 -0000
Received: (qmail 82781 invoked by uid 500); 29 Aug 2007 13:40:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82746 invoked by uid 500); 29 Aug 2007 13:40:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82735 invoked by uid 99); 29 Aug 2007 13:40:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 06:40:47 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.188 as permitted sender)
Received: from [209.85.134.188] (HELO mu-out-0910.google.com) (209.85.134.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 13:40:44 +0000
Received: by mu-out-0910.google.com with SMTP id g7so209797muf
        for <java-user@lucene.apache.org>; Wed, 29 Aug 2007 06:40:22 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LsMsBa82V13a19zotSibQ7TFHy0sJf1qasSg7HcF/AAXoUP2gry8BxHZbZ+z98hz0t4psPduF9WBpEKGu2R3jT+K/UwoVsb8pwxmBWQl9RUJkCGHC67Ek8Pa8Bzij0Jz1FFPwFfsIUjLpiQZm1Dfmt8CDKQLizBawOHJwLvSHRY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OecRnqg/tTJB++b2X71qQ/GqLN/CRCsXIY1HAkeSccrnrwd/vdQgtp7AHkJcIdYvmPajkNzW62L4eNHYDJmwYj7I5B/T/3s91PhA5Syurx84//D6SMgnJKm1Dko9GMuVkNfssOLJAQdTf24xdwVDe+vGAz6fzR1L9EC0wtgoIT8=
Received: by 10.82.178.11 with SMTP id a11mr1365507buf.1188394821817;
        Wed, 29 Aug 2007 06:40:21 -0700 (PDT)
Received: by 10.82.190.14 with HTTP; Wed, 29 Aug 2007 06:40:21 -0700 (PDT)
Message-ID: <359a92830708290640w6fb94593w86c71003fe2717c4@mail.gmail.com>
Date: Wed, 29 Aug 2007 09:40:21 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, aleksander.stensby@integrasco.no
Subject: Re: Indexer / Searcher holding deleted files
In-Reply-To: <op.txtnows5oftp72@melkor>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_876_27122785.1188394821759"
References: <op.txthmyoaoftp72@melkor> <46D55555.8000506@gmail.com>
	 <op.txtnows5oftp72@melkor>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_876_27122785.1188394821759
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'd guess that you're not closing *all* of your searchers.
Which is reinforced somewhat by the fact that bouncing your
Tomcat instance cleans things up. Do you perhaps open
a reader in the initialization code that never gets closed?

Erick

On 8/29/07, Aleksander M. Stensby <aleksander.stensby@integrasco.no> wrote:
>
> Hmm, yeah, well thats what I do now...
> Shouldn't it be sufficient to do:
>
> searcher.close();
> (...)
> searcher = new IndexSearcher(indexPath);
>
>
> Or?
>
> And maybe wrap that in
> if(searcher.getIndexReader.hasDeletions())
> and possibly (!searcher.getIndexReader.isCurrent())
>
> thanks,
> Aleksander
>
>
> On Wed, 29 Aug 2007 13:15:33 +0200, Mark Miller <markrmiller@gmail.com>
> wrote:
>
> > Reopen the Searchers/Readers that are holding the files open.
> >
> > Aleksander M. Stensby wrote:
> >> Hello everyone. I have a system where an indexing-process is running
> >> several times a day, adding documents, and performing an optimize() at
> >> the end of every run.
> >> In addition, we have a web-application (running in tomcat) that is used
> >> to perform searches on the index(es).
> >>
> >> The problem (probably because of my lack of knowledge) is that when the
> >> indexer has performed its optimize routine, marking the files as
> >> (deleted) in the filesystem (a unix system), the files are not deleted,
> >> because tomcat is keeping the files locked... SO as you can all
> >> imagine, the lvm is ever growing... Problem of course solves itself
> >> through a Tomcat-restart, but that's not a very ideal solution to
> >> perform restarts every other day or so...
> >>
> >> I presume its the IndexReader and/or IndexSearcher that is keeping the
> >> files locked for deletion (in the web-application). So, i was wondering
> >> if any of you have any input on how I can release the files (or
> >> actually just delete them after the optimize routine in the indexer
> >> right away...
> >>
> >> Than you very much for any feedback!
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
> --
> Aleksander M. Stensby
> Senior Software Developer
> Integrasco A/S
> aleksander.stensby@integrasco.no
> Tlf.: +47 41 22 82 72
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_876_27122785.1188394821759--

From java-user-return-30044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 13:53:07 2007
Return-Path: <java-user-return-30044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86021 invoked from network); 29 Aug 2007 13:53:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 13:53:06 -0000
Received: (qmail 2942 invoked by uid 500); 29 Aug 2007 13:52:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2548 invoked by uid 500); 29 Aug 2007 13:52:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2537 invoked by uid 99); 29 Aug 2007 13:52:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 06:52:56 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.12.15.81] (HELO rsmtp1.corp.ukl.yahoo.com) (217.12.15.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 13:53:48 +0000
Received: from harpoon.grenoble.corp.yahoo.com (harpoon.grenoble.corp.yahoo.com [10.76.44.31])
	(authenticated bits=0)
	by rsmtp1.corp.ukl.yahoo.com (8.13.8/8.13.6/y.rout) with ESMTP id l7TDqFdh086599
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 29 Aug 2007 13:52:16 GMT
Message-ID: <46D57A0F.2090602@yahoo.fr>
Date: Wed, 29 Aug 2007 15:52:15 +0200
From: Emmanuel Franquemagne <kelkoofranquem@yahoo.fr>
Reply-To: kelkoofranquem@yahoo.fr
User-Agent: Thunderbird 2.0.0.5 (X11/20070719)
MIME-Version: 1.0
To: Lucene Java users ML <java-user@lucene.apache.org>
Subject: Custom normalization in Similarity
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I'd like to know if there is a way to perform custom correction to the 
similarity norm before it is written
At best, we wished we could do this by extending the Similarity class, 
but encodeNorm, that would be the best place to do it, is a static 
method and thus it's no use to override it.

Is there a reason why this method is static? And is there any solution 
that could allow us to do this value correction?

Thanks for any help,
Emmanuel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 14:11:40 2007
Return-Path: <java-user-return-30045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92605 invoked from network); 29 Aug 2007 14:11:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 14:11:40 -0000
Received: (qmail 34099 invoked by uid 500); 29 Aug 2007 14:11:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34052 invoked by uid 500); 29 Aug 2007 14:11:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34041 invoked by uid 99); 29 Aug 2007 14:11:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 07:11:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 14:11:19 +0000
Received: by py-out-1112.google.com with SMTP id d32so489860pye
        for <java-user@lucene.apache.org>; Wed, 29 Aug 2007 07:10:58 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=tVcVHSst+tTrAr5BO4Z+wuwg3eUM9mN3/Pcso9JUzDtGbBTS3nlIx8HLBlo18R70a0UDGeEie74CkhWqdnkMlDq43itFDJSk9E2o5KLR1BGYgoCwsnPzmA+bDYljITbYnAdS/kl1BllP5xMx/IyRmULHH4JDjAWHZyirn8Qb9VA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=W8ZKCdRfFw9CY73pHXJxxBt9Kd3xMwWYznrEknr1Geci532ITsHgM8Yo3bZ5a63aD0Q+LTrPoQ3yXDKaf8/fndCYTesYdcdzEqRUdj+SqFU23njRw4Zpw3BF4cat9yxNGZY+WYDwr3ALF349JA0iN9+nucj5PPa9G223EKbj18g=
Received: by 10.65.115.4 with SMTP id s4mr1535462qbm.1188396654805;
        Wed, 29 Aug 2007 07:10:54 -0700 (PDT)
Received: from ?192.168.1.108? ( [69.124.234.183])
        by mx.google.com with ESMTPS id q19sm4553954qbq.2007.08.29.07.10.54
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 29 Aug 2007 07:10:54 -0700 (PDT)
Message-ID: <46D57E35.3020303@gmail.com>
Date: Wed, 29 Aug 2007 10:09:57 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Custom normalization in Similarity
References: <46D57A0F.2090602@yahoo.fr>
In-Reply-To: <46D57A0F.2090602@yahoo.fr>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I think that encodeNorm and decodeNorm on Similarity are really just 
utility methods for norm encode/decode. It would be nice to be able to 
override those if you wanted to change the encode/decode method, but you 
should be able to modify the norm elsewhere. Actual access to the norm 
information is handled in IndexReader and this behavior can be 
overridden. This short example would hide the norms stored in the index 
and instead return 1.0f for each doc:

public class FakeNormsIndexReader extends FilterIndexReader {
    byte[] ones = SegmentReader.createFakeNorms(maxDoc());

    public FakeNormsIndexReader(IndexReader in) {
        super(in);
     
    }

    public synchronized byte[] norms(String field) throws IOException {

        return ones;
    }

    public synchronized void norms(String field, byte[] result, int 
offset) {

        System.arraycopy(ones, 0, result, offset, maxDoc());
    }
}

- Mark

Emmanuel Franquemagne wrote:
> Hello,
>
> I'd like to know if there is a way to perform custom correction to the 
> similarity norm before it is written
> At best, we wished we could do this by extending the Similarity class, 
> but encodeNorm, that would be the best place to do it, is a static 
> method and thus it's no use to override it.
>
> Is there a reason why this method is static? And is there any solution 
> that could allow us to do this value correction?
>
> Thanks for any help,
> Emmanuel
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 15:36:51 2007
Return-Path: <java-user-return-30046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69885 invoked from network); 29 Aug 2007 15:36:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 15:36:50 -0000
Received: (qmail 23490 invoked by uid 500); 29 Aug 2007 15:36:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23043 invoked by uid 500); 29 Aug 2007 15:36:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 87627 invoked by uid 99); 29 Aug 2007 15:15:45 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mike@musicware.com designates 66.249.92.175 as permitted sender)
Message-ID: <9527d4eb0708290815p3b9fb829r176181cabe20e1b0@mail.gmail.com>
Date: Wed, 29 Aug 2007 11:15:16 -0400
From: Mike <mike@musicware.com>
To: java-user@lucene.apache.org
Subject: Postal Code Radius Search
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2504_12928278.1188400516094"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2504_12928278.1188400516094
Content-Type: text/plain; charset=WINDOWS-1252
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I've searched the mailing list archives, the web, read the FAQ, etc and I
don't see anything relevant so here it goes=85

I'm trying to implement a radius based searching based on zip/postal codes.
 (The user enters their zip code and I show nearby matches under x miles
away sorted by linear distance.)  I already have the data required to pull
this off (zip codes, long/lat coordinates, etc.)   Extreme accuracy is not =
a
requirement.  It just needs to be an approximation (plus or minus a few
miles.)

What I'm looking for is a little direction.  How have others implemented
this type of search?  What are the pros/cons of various methods?  I have a
few ideas but obviously none of them are very good or I guess I wouldn't be
here asking.  ;)

By the way, my index is updated about every 10 minutes and holds about
25,000 records.  However, this may increase in the next year or so to
hundreds of thousands.  So whatever I do needs to be fairly scalable.  The
items being searched as well as the people searching will be located all
over the world.   Some areas may be busier than others so there is an
opportunity for caching more common locals.

Thank you for your time.  I'd appreciate any suggestions that you can give.

- Mike

------=_Part_2504_12928278.1188400516094--

From java-user-return-30047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 15:47:09 2007
Return-Path: <java-user-return-30047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90777 invoked from network); 29 Aug 2007 15:47:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 15:47:08 -0000
Received: (qmail 41790 invoked by uid 500); 29 Aug 2007 15:46:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41744 invoked by uid 500); 29 Aug 2007 15:46:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41733 invoked by uid 99); 29 Aug 2007 15:46:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 08:46:57 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of willjohnsonsearch@gmail.com designates 209.85.132.242 as permitted sender)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 15:46:52 +0000
Received: by an-out-0708.google.com with SMTP id c5so50237anc
        for <java-user@lucene.apache.org>; Wed, 29 Aug 2007 08:46:31 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:from:subject:date:to:x-mailer;
        b=QM23ZpPavfI4D+bY0Afe5e45deKwav4+BjV0xSy7VTwsYmww8FAUH5IdqJX5f8WkB7VO5rw/NTQ6e6HVzB2T1qKXxl6U0jhmAe80Pi0yVj70ycmB+5I8PFbuk0jbEFxmCekIAGqkc/552vWF8hNg/aEIe2kfgXtoldmCIIrQ6RM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:from:subject:date:to:x-mailer;
        b=nrlQQTJqlRpoLSasOTH+ytRDV9q3IstGpVEsOE0FXRXhAj8g3HgRgIfM5s5EcblYARBRGPWd9mbyUFEaVGpD0jz+kB95T0RLLidzohanDTSXmMQ7bB+qhsV6zDqWGakwErRmlcyI5bQW5YBOSJrf9z4LMPTxdABz90wRmukX1Nw=
Received: by 10.100.191.5 with SMTP id o5mr706625anf.1188402391762;
        Wed, 29 Aug 2007 08:46:31 -0700 (PDT)
Received: from ?10.1.1.93? ( [216.73.149.249])
        by mx.google.com with ESMTPS id h7sm11049169wxd.2007.08.29.08.46.27
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 29 Aug 2007 08:46:30 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <9527d4eb0708290815p3b9fb829r176181cabe20e1b0@mail.gmail.com>
References: <9527d4eb0708290815p3b9fb829r176181cabe20e1b0@mail.gmail.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-1--358214402
Message-Id: <5580377F-DB68-4B56-833F-28D19FDAF14E@gmail.com>
From: Will Johnson <willjohnsonsearch@gmail.com>
Subject: Re: Postal Code Radius Search
Date: Wed, 29 Aug 2007 11:46:23 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-1--358214402
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=WINDOWS-1252;
	delsp=yes;
	format=flowed

a CustomScoreQuery combined with a FieldCacheSource that holds the =20
the lat/lon might work.

- will


On Aug 29, 2007, at 11:15 AM, Mike wrote:

> I've searched the mailing list archives, the web, read the FAQ, etc =20=

> and I
> don't see anything relevant so here it goes=85
>
> I'm trying to implement a radius based searching based on zip/=20
> postal codes.
>  (The user enters their zip code and I show nearby matches under x =20
> miles
> away sorted by linear distance.)  I already have the data required =20
> to pull
> this off (zip codes, long/lat coordinates, etc.)   Extreme accuracy =20=

> is not a
> requirement.  It just needs to be an approximation (plus or minus a =20=

> few
> miles.)
>
> What I'm looking for is a little direction.  How have others =20
> implemented
> this type of search?  What are the pros/cons of various methods?  I =20=

> have a
> few ideas but obviously none of them are very good or I guess I =20
> wouldn't be
> here asking.  ;)
>
> By the way, my index is updated about every 10 minutes and holds about
> 25,000 records.  However, this may increase in the next year or so to
> hundreds of thousands.  So whatever I do needs to be fairly =20
> scalable.  The
> items being searched as well as the people searching will be =20
> located all
> over the world.   Some areas may be busier than others so there is an
> opportunity for caching more common locals.
>
> Thank you for your time.  I'd appreciate any suggestions that you =20
> can give.
>
> - Mike


--Apple-Mail-1--358214402--

From java-user-return-30048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 15:53:08 2007
Return-Path: <java-user-return-30048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 654 invoked from network); 29 Aug 2007 15:53:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 15:53:07 -0000
Received: (qmail 59130 invoked by uid 500); 29 Aug 2007 15:52:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58753 invoked by uid 500); 29 Aug 2007 15:52:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58742 invoked by uid 99); 29 Aug 2007 15:52:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 08:52:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=MISSING_MID,RCVD_DOUBLE_IP_LOOSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [212.112.185.159] (HELO retfs.replior.se) (212.112.185.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 15:53:48 +0000
Received: from  [192.168.100.246] by [192.168.100.241]
       with TFS Secure Messaging Server; Wed, 29 Aug 2007 17:52:18 +0200
X-Spam-Level: 
Received: from Tirion ([212.105.84.105])
	(authenticated user per@implior.com)
	by mail.replior.se
	(using TLSv1/SSLv3 with cipher RC4-MD5 (128 bits))
	for java-user@lucene.apache.org;
	Wed, 29 Aug 2007 17:52:16 +0200
From: "Per Lindberg" <per@implior.com>
To: <java-user@lucene.apache.org>
Subject: SV: Caching IndexSearcher in a webapp [was: Find "latest" document (before a certain date)]
Date: Wed, 29 Aug 2007 17:51:28 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Thread-Index: AcfqOqKUD7+0lB8kQGe5kqpA0Ddv5AAGPRgA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
In-Reply-To: <3A2CBCB8-3314-4FF4-B39C-726A1B992CB0@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=0.0 required=8.5
	tests=AWL: -0.203,BAYES_05: -0.925,TOTAL_SCORE: -1.128
Message-Id: <20070829155357.5AF1C4DA0A5@nike.apache.org>

Kalle and Patrick: many thanks for the suggestions!

Caching the IndexSearcher in the ServletContext sounds like a very good idea.
However, I have to index a number of databases, each with a different Lucene
index. So keeping an IndexSearcher for each may come with a prohibitive
memory cost. But as far as I can tell, speed is not a problem; creating a new
IndexSearcher for each new search is outweighed by HTTP protocol latency.

Thanks again!




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 15:59:47 2007
Return-Path: <java-user-return-30049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13607 invoked from network); 29 Aug 2007 15:59:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 15:59:45 -0000
Received: (qmail 75621 invoked by uid 500); 29 Aug 2007 15:59:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75584 invoked by uid 500); 29 Aug 2007 15:59:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75573 invoked by uid 99); 29 Aug 2007 15:59:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 08:59:34 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 80.76.149.213 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.213] (HELO ch-smtp02.sth.basefarm.net) (80.76.149.213)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 16:00:26 +0000
Received: from c83-249-118-113.bredband.comhem.se ([83.249.118.113]:51501 helo=[192.168.2.101])
	by ch-smtp02.sth.basefarm.net with esmtp (Exim 4.66)
	(envelope-from <karl.wettin@gmail.com>)
	id 1IQPwh-0005gK-9C
	for java-user@lucene.apache.org; Wed, 29 Aug 2007 17:59:08 +0200
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <46D47A83.6010401@metaweb.com>
References: <46D47A83.6010401@metaweb.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <96514DC9-051F-41E0-A872-3E3F8EE3E934@gmail.com>
Content-Transfer-Encoding: 7bit
From: Karl Wettin <karl.wettin@gmail.com>
Subject: Re: indexing fields with multiplicity
Date: Wed, 29 Aug 2007 17:53:22 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Originating-IP: 83.249.118.113
X-Scan-Result: No virus found in message 1IQPwh-0005gK-9C.
X-Scan-Signature: ch-smtp02.sth.basefarm.net 1IQPwh-0005gK-9C 83a986f324f4c571707f7c0355262353
X-Virus-Checked: Checked by ClamAV on apache.org


28 aug 2007 kl. 21.41 skrev Tim Sturge:

> Hi,
>
> I have fields which have high multiplicity; for example I have a  
> topic with 1000 names, 500 of which are "USA" and 200 are "United  
> States of America".
>
> Previously I was indexing "USA USA .(500x).. USA United States of  
> America .(200x).. United States of America" as as single field. The  
> problem is that this causes this field to be less weighted for  
> "USA" than a topic with a single name "USA".
>
> So what I am now going to do is call
>
> for (i = 0 ; i < 500 ; i++) {
>    document.add(new Field("anchor","USA"));
> }

Why do you do this? What is the effect you are looking for?


-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 16:38:33 2007
Return-Path: <java-user-return-30050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64343 invoked from network); 29 Aug 2007 16:38:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 16:38:31 -0000
Received: (qmail 38913 invoked by uid 500); 29 Aug 2007 16:38:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38878 invoked by uid 500); 29 Aug 2007 16:38:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38867 invoked by uid 99); 29 Aug 2007 16:38:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 09:38:21 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.67] (HELO mx5.syr.edu) (128.230.18.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 16:39:10 +0000
Received: from [128.230.84.100] (ist-h335-d03.syr.edu [128.230.84.100])
	by mx5.syr.edu (8.13.7/8.13.7) with ESMTP id l7TGbpAR024750
	for <java-user@lucene.apache.org>; Wed, 29 Aug 2007 12:37:51 -0400
Message-ID: <46D5A0C4.6060600@syr.edu>
Date: Wed, 29 Aug 2007 12:37:24 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Thunderbird 2.0.0.4-GroupWise-IMAP-fix (Windows/20070719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Postal Code Radius Search
References: <9527d4eb0708290815p3b9fb829r176181cabe20e1b0@mail.gmail.com>
In-Reply-To: <9527d4eb0708290815p3b9fb829r176181cabe20e1b0@mail.gmail.com>
X-Enigmail-Version: 0.95.2
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: 8bit
X-Scanner: InterScan AntiVirus for Sendmail
X-Virus-Checked: Checked by ClamAV on apache.org

Mike wrote:
> I've searched the mailing list archives, the web, read the FAQ, etc and I
> don't see anything relevant so here it goes
> 
> I'm trying to implement a radius based searching based on zip/postal codes.

Here is a selection of interesting threads from the Lucene ML with
relevant info:

<http://www.nabble.com/all-records-within-distance----small-index-tf3303731.html>

<http://www.nabble.com/Hacking-proximity-search%3A-looking-for-feedback-tf1201416.html>

<http://www.nabble.com/Announcement%3A-Lucene-powering-Monster-job-search-index-%28Beta%29-tf2522646.html>

The standard answer seems to be something like:

1. Index latitude and longitude fields with fixed length
(left-zero-padded) integral values - shift the decimal point to the
right to the desired level of discriminability.  (In your case, convert
the postal codes to lats/longs.)

2. Do a range query on both your lat and your long fields to collect
hits inside a bounding box with your target at the center and with sides
of length double the desired radius.

3. Optionally, sort (and filter) the results by distance from your
target, displaying only those within the desired radius.  If you leave
out this step, you'll get some hits that are outside of the desired
radius - inbetween the bounding circle and the bounding box.

Steve

-- 
Steve Rowe
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 17:01:05 2007
Return-Path: <java-user-return-30051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9764 invoked from network); 29 Aug 2007 17:01:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 17:01:04 -0000
Received: (qmail 66971 invoked by uid 500); 29 Aug 2007 17:00:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66938 invoked by uid 500); 29 Aug 2007 17:00:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66926 invoked by uid 99); 29 Aug 2007 17:00:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 10:00:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [64.81.62.48] (HELO mail01.apmindsf.com) (64.81.62.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 17:01:46 +0000
Received: from [10.8.0.122] (helo=[10.8.0.122])
	by mail01.apmindsf.com with esmtp (Exim 4.50)
	id 1IQQu3-00012I-5P
	for java-user@lucene.apache.org; Wed, 29 Aug 2007 10:00:27 -0700
Message-ID: <46D5A927.2020201@metaweb.com>
Date: Wed, 29 Aug 2007 10:13:11 -0700
From: Tim Sturge <tsturge@metaweb.com>
User-Agent: Mozilla Thunderbird 1.0.6 (X11/20050715)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: indexing fields with multiplicity
References: <46D47A83.6010401@metaweb.com> <96514DC9-051F-41E0-A872-3E3F8EE3E934@gmail.com>
In-Reply-To: <96514DC9-051F-41E0-A872-3E3F8EE3E934@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I'm looking for a boost when the anchor text is more commonly associated 
with one topic than another. For example the United States of America
is called "USA" by a lot of people. The United Space Alliance is also 
called "USA" but by many less people.

If I just index them both with "USA" once, they will rank equally. I 
want the United States of America to rank higher.

Tim

Karl Wettin wrote:
>
> 28 aug 2007 kl. 21.41 skrev Tim Sturge:
>
>> Hi,
>>
>> I have fields which have high multiplicity; for example I have a 
>> topic with 1000 names, 500 of which are "USA" and 200 are "United 
>> States of America".
>>
>> Previously I was indexing "USA USA .(500x).. USA United States of 
>> America .(200x).. United States of America" as as single field. The 
>> problem is that this causes this field to be less weighted for "USA" 
>> than a topic with a single name "USA".
>>
>> So what I am now going to do is call
>>
>> for (i = 0 ; i < 500 ; i++) {
>> document.add(new Field("anchor","USA"));
>> }
>
> Why do you do this? What is the effect you are looking for?
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 17:02:43 2007
Return-Path: <java-user-return-30052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11257 invoked from network); 29 Aug 2007 17:02:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 17:02:42 -0000
Received: (qmail 71520 invoked by uid 500); 29 Aug 2007 17:02:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71141 invoked by uid 500); 29 Aug 2007 17:02:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71130 invoked by uid 99); 29 Aug 2007 17:02:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 10:02:31 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.182.205.198] (HELO fullcapture.com) (69.182.205.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 17:03:21 +0000
Content-class: urn:content-classes:message
Subject: RE: Postal Code Radius Search
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Date: Wed, 29 Aug 2007 13:01:55 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Message-ID: <BCDAE44B3F60944CA89B2CA953698854270DD5@fcs01.FullCapture.local>
In-Reply-To: <46D5A0C4.6060600@syr.edu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Postal Code Radius Search
Thread-Index: AcfqWwlDmNwE+zp4Si2V4gJql2aqdAAAyIpQ
From: "Charles Patridge" <chuck@fullcapture.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Here is an example of getting all the zipcodes within a certain radius -


Something I did in SAS but I am sure you can convert the formula into
another language.

http://www.sconsig.com/sastips/tip00156.htm

Chuck Patridge

Charles Patridge
Full Capture Solutions, Inc.
333 Roberts Street, Suite 400
East Hartford, CT 06108
Phone: 860-291-9517 x 106
Email: Chuck@fullcapture.com
-----Original Message-----
From: Steven Rowe [mailto:sarowe@syr.edu]=20
Sent: Wednesday, August 29, 2007 12:37 PM
To: java-user@lucene.apache.org
Subject: Re: Postal Code Radius Search

Mike wrote:
> I've searched the mailing list archives, the web, read the FAQ, etc
and I
> don't see anything relevant so here it goes...
>=20
> I'm trying to implement a radius based searching based on zip/postal
codes.

Here is a selection of interesting threads from the Lucene ML with
relevant info:

<http://www.nabble.com/all-records-within-distance----small-index-tf3303
731.html>

<http://www.nabble.com/Hacking-proximity-search%3A-looking-for-feedback-
tf1201416.html>

<http://www.nabble.com/Announcement%3A-Lucene-powering-Monster-job-searc
h-index-%28Beta%29-tf2522646.html>

The standard answer seems to be something like:

1. Index latitude and longitude fields with fixed length
(left-zero-padded) integral values - shift the decimal point to the
right to the desired level of discriminability.  (In your case, convert
the postal codes to lats/longs.)

2. Do a range query on both your lat and your long fields to collect
hits inside a bounding box with your target at the center and with sides
of length double the desired radius.

3. Optionally, sort (and filter) the results by distance from your
target, displaying only those within the desired radius.  If you leave
out this step, you'll get some hits that are outside of the desired
radius - inbetween the bounding circle and the bounding box.

Steve

--=20
Steve Rowe
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 17:04:01 2007
Return-Path: <java-user-return-30053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12062 invoked from network); 29 Aug 2007 17:04:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 17:04:00 -0000
Received: (qmail 73148 invoked by uid 500); 29 Aug 2007 17:03:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73113 invoked by uid 500); 29 Aug 2007 17:03:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73102 invoked by uid 99); 29 Aug 2007 17:03:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 10:03:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.182.205.198] (HELO fullcapture.com) (69.182.205.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 17:03:44 +0000
Content-class: urn:content-classes:message
Subject: RE: Postal Code Radius Search
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Date: Wed, 29 Aug 2007 13:03:16 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Message-ID: <BCDAE44B3F60944CA89B2CA953698854270DD7@fcs01.FullCapture.local>
In-Reply-To: <5580377F-DB68-4B56-833F-28D19FDAF14E@gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Postal Code Radius Search
Thread-Index: AcfqU9q7jYoK224oSjuqwI+m1LdwUwACoWsw
From: "Charles Patridge" <chuck@fullcapture.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Will,

http://www.sconsig.com/sastips/tip00156.htm

This is an example I used written in SAS code which should be able to
convert to another language - to find all zipcodes within a certain
radius.

HTH,
Chuck P.

Charles Patridge
Full Capture Solutions, Inc.
333 Roberts Street, Suite 400
East Hartford, CT 06108
Phone: 860-291-9517 x 106
Email: Chuck@fullcapture.com

-----Original Message-----
From: Will Johnson [mailto:willjohnsonsearch@gmail.com]=20
Sent: Wednesday, August 29, 2007 11:46 AM
To: java-user@lucene.apache.org
Subject: Re: Postal Code Radius Search

a CustomScoreQuery combined with a FieldCacheSource that holds the =20
the lat/lon might work.

- will


On Aug 29, 2007, at 11:15 AM, Mike wrote:

> I've searched the mailing list archives, the web, read the FAQ, etc =20
> and I
> don't see anything relevant so here it goes...
>
> I'm trying to implement a radius based searching based on zip/=20
> postal codes.
>  (The user enters their zip code and I show nearby matches under x =20
> miles
> away sorted by linear distance.)  I already have the data required =20
> to pull
> this off (zip codes, long/lat coordinates, etc.)   Extreme accuracy =20
> is not a
> requirement.  It just needs to be an approximation (plus or minus a =20
> few
> miles.)
>
> What I'm looking for is a little direction.  How have others =20
> implemented
> this type of search?  What are the pros/cons of various methods?  I =20
> have a
> few ideas but obviously none of them are very good or I guess I =20
> wouldn't be
> here asking.  ;)
>
> By the way, my index is updated about every 10 minutes and holds about
> 25,000 records.  However, this may increase in the next year or so to
> hundreds of thousands.  So whatever I do needs to be fairly =20
> scalable.  The
> items being searched as well as the people searching will be =20
> located all
> over the world.   Some areas may be busier than others so there is an
> opportunity for caching more common locals.
>
> Thank you for your time.  I'd appreciate any suggestions that you =20
> can give.
>
> - Mike


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 17:17:00 2007
Return-Path: <java-user-return-30054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23973 invoked from network); 29 Aug 2007 17:16:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 17:16:58 -0000
Received: (qmail 87518 invoked by uid 500); 29 Aug 2007 17:16:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87490 invoked by uid 500); 29 Aug 2007 17:16:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87479 invoked by uid 99); 29 Aug 2007 17:16:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 10:16:48 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 80.76.149.212 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.212] (HELO ch-smtp01.sth.basefarm.net) (80.76.149.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 17:16:43 +0000
Received: from c83-249-118-113.bredband.comhem.se ([83.249.118.113]:51837 helo=[192.168.2.101])
	by ch-smtp01.sth.basefarm.net with esmtp (Exim 4.66)
	(envelope-from <karl.wettin@gmail.com>)
	id 1IQR9R-00069a-45
	for java-user@lucene.apache.org; Wed, 29 Aug 2007 19:16:21 +0200
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <46D5A927.2020201@metaweb.com>
References: <46D47A83.6010401@metaweb.com> <96514DC9-051F-41E0-A872-3E3F8EE3E934@gmail.com> <46D5A927.2020201@metaweb.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <44CF4B03-80CF-4ABD-BEAB-FE6DF1505ED2@gmail.com>
Content-Transfer-Encoding: 7bit
From: Karl Wettin <karl.wettin@gmail.com>
Subject: Re: indexing fields with multiplicity
Date: Wed, 29 Aug 2007 19:10:35 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Originating-IP: 83.249.118.113
X-Scan-Result: No virus found in message 1IQR9R-00069a-45.
X-Scan-Signature: ch-smtp01.sth.basefarm.net 1IQR9R-00069a-45 e63c9209bdd190c8d322f63a5e8b6a63
X-Virus-Checked: Checked by ClamAV on apache.org


29 aug 2007 kl. 19.13 skrev Tim Sturge:

> I'm looking for a boost when the anchor text is more commonly  
> associated with one topic than another. For example the United  
> States of America
> is called "USA" by a lot of people. The United Space Alliance is  
> also called "USA" but by many less people.
>
> If I just index them both with "USA" once, they will rank equally.  
> I want the United States of America to rank higher.

Why not use Field#setBoost(float)?


-- 
karl


>
> Tim
>
> Karl Wettin wrote:
>>
>> 28 aug 2007 kl. 21.41 skrev Tim Sturge:
>>
>>> Hi,
>>>
>>> I have fields which have high multiplicity; for example I have a  
>>> topic with 1000 names, 500 of which are "USA" and 200 are "United  
>>> States of America".
>>>
>>> Previously I was indexing "USA USA .(500x).. USA United States of  
>>> America .(200x).. United States of America" as as single field.  
>>> The problem is that this causes this field to be less weighted  
>>> for "USA" than a topic with a single name "USA".
>>>
>>> So what I am now going to do is call
>>>
>>> for (i = 0 ; i < 500 ; i++) {
>>> document.add(new Field("anchor","USA"));
>>> }
>>
>> Why do you do this? What is the effect you are looking for?
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 17:29:18 2007
Return-Path: <java-user-return-30055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30409 invoked from network); 29 Aug 2007 17:29:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 17:29:16 -0000
Received: (qmail 6994 invoked by uid 500); 29 Aug 2007 17:29:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6957 invoked by uid 500); 29 Aug 2007 17:29:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6946 invoked by uid 99); 29 Aug 2007 17:29:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 10:29:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mike.klaas@gmail.com designates 209.85.146.177 as permitted sender)
Received: from [209.85.146.177] (HELO wa-out-1112.google.com) (209.85.146.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 17:29:00 +0000
Received: by wa-out-1112.google.com with SMTP id j40so307488wah
        for <java-user@lucene.apache.org>; Wed, 29 Aug 2007 10:28:35 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=BHCLyzeKSdm7KjBJnGE8NXgpQPXw/8/SQAZURZH/6nwH60UCfHnwkVFM7+Ilu5Hwxe68katf+w4ZJAEsg+/JzWOOSE3pVLnfSaK3cI47yVbjA4leuP4DoORwJTkAAjeeucnFXJirBs30kBPMe4SUQ2o7C3wPvRfnW2rZ8Dei4sI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=NQiAgV5JplNhEJbZNxmK7YD0A/uY2DsOo3ufjlS3SQycnfnSvuBIv7tTCQx18Zr2IGeEG72XhkzNwxNvUz4IvrryXZnFbFIfV1NJuFEgQe5rUEqjYSxv4z9BokJQRvnjFWR8geRC+SI0fZP6vm+skbtpUjeDafjkNLZey6fEvsU=
Received: by 10.114.80.4 with SMTP id d4mr3914wab.1188408514602;
        Wed, 29 Aug 2007 10:28:34 -0700 (PDT)
Received: from ?192.168.1.104? ( [24.82.155.191])
        by mx.google.com with ESMTPS id j21sm12713352wah.2007.08.29.10.28.32
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 29 Aug 2007 10:28:33 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <46D55F58.3070907@gmail.com>
References: <699213.70878.qm@web26012.mail.ukl.yahoo.com>	 <200706271744.45018.paul.elschot@xs4all.nl>	 <4682BB5D.5030900@gmail.com> <652776090708270043j3045f300g28357edb380fbdb5@mail.gmail.com> <46D2B3C1.4050201@gmail.com> <1A97634D-142A-428A-A21E-AAB06E645781@gmail.com> <46D55F58.3070907@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <583143BF-0B2B-4EF3-AB3C-E28BAD6B6876@gmail.com>
Content-Transfer-Encoding: 7bit
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: Highlighter that works with phrase and span queries
Date: Wed, 29 Aug 2007 10:28:38 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I just meant whether it would live in a lucene release (somewhere  
under contrib/) or just in JIRA.  Would including the functionality  
in Solr help get it into lucene?

-Mike

On 29-Aug-07, at 4:58 AM, Mark Miller wrote:

> It kind of is a contrib -- its really just a new Scorer class (with  
> some axillary helper classes) for the old contrib Highlighter.  
> Since the contrib Highlighter is pretty hardened at this point, I  
> figured that was the best way to go. Or do you mean something  
> different?
>
> - Mark
>
> Mike Klaas wrote:
>> Mark,
>>
>> I'm still interested in integrating this into Solr--this is a  
>> feature that has been requested a few times.  It would be easier  
>> to do so if it were a contrib/...
>>
>> thanks for the great work,
>> -Mike
>>
>> On 27-Aug-07, at 4:21 AM, Mark Miller wrote:
>>
>>> I am a bit unclear about your question. The patch you mention  
>>> extends the original Highlighter to support phrase and span  
>>> queries. It does not include any major performance increases over  
>>> the original Highlighter (in fact, it takes a bit longer to  
>>> Highlight a Span or Phrase query than it does to just highlight  
>>> Terms).
>>>
>>> Will it be released with the next version of Lucene? Doesn't look  
>>> like it, but anything is possible. A few people are using it, but  
>>> there has not been widespread interest that I have seen. My guess  
>>> is that there are just not enough people trying to highlight Span  
>>> queries -- which I'd blame on a lack of Span support in the  
>>> default Lucene Query syntax.
>>>
>>> Whether it is included soon or not, the code works well and I  
>>> will continue to support it.
>>>
>>> - Mark
>>>
>>> Michael Stoppelman wrote:
>>>> Is this jar going to be in the next release of lucene? Also, are  
>>>> these the
>>>> same as the changes in the following patch:
>>>> https://issues.apache.org/jira/secure/attachment/12362653/ 
>>>> spanhighlighter10.patch
>>>>
>>>> -M
>>>>
>>>> On 6/27/07, Mark Miller <markrmiller@gmail.com> wrote:
>>>>
>>>>>
>>>>>> I have not looked at any highlighting code yet. Is there  
>>>>>> already an
>>>>>>
>>>>> extension
>>>>>
>>>>>> of PhraseQuery that has getSpans() ?
>>>>>>
>>>>>>
>>>>> Currently I am using this code originally by M. Harwood:
>>>>>             Term[] phraseQueryTerms = ((PhraseQuery)  
>>>>> query).getTerms();
>>>>>             int i;
>>>>>             SpanQuery[] clauses = new SpanQuery 
>>>>> [phraseQueryTerms.length];
>>>>>
>>>>>             for (i = 0; i < phraseQueryTerms.length; i++) {
>>>>>                 clauses[i] = new SpanTermQuery(phraseQueryTerms 
>>>>> [i]);
>>>>>             }
>>>>>
>>>>>             SpanNearQuery sp = new SpanNearQuery(clauses,
>>>>>                     ((PhraseQuery) query).getSlop(), false);
>>>>>             sp.setBoost(query.getBoost());
>>>>>
>>>>> I don't think it is perfect logic for PhraseQuery's edit  
>>>>> distance, but
>>>>> it approximates extremely well in most cases.
>>>>>
>>>>> I wonder if this approach to Highlighting would be worth it in  
>>>>> the end.
>>>>> Certainly, it would seem to require that you store offsets or  
>>>>> you would
>>>>> have to re-tokenize anyway.
>>>>>
>>>>> Some more interesting "stuff" on the current Highlighter methods:
>>>>>
>>>>> We can gain a lot of speed on the implementation of the current
>>>>> Highlighter if we grab from the source text in bigger chunks.  
>>>>> Ronnie's
>>>>> Highlighter appears to be faster than the original due to two  
>>>>> things: he
>>>>> doesn't have to re-tokenize text and he rebuilds the original  
>>>>> document
>>>>> in large pieces. Depending on how you want to look at it, he  
>>>>> loses most
>>>>> of the speed gained from just looking at the Query tokens  
>>>>> instead of all
>>>>> tokens to pulling the Term offset information (which appears  
>>>>> pretty slow).
>>>>>
>>>>> If you use a SimpleAnalyzer on docs around 1800 tokens long,  
>>>>> you can
>>>>> actually match the speed of Ronnies highlighter with the current
>>>>> highlighter if you just rebuild the highlighted documents in  
>>>>> bigger
>>>>> pieces i.e. instead of going through each token and adding the  
>>>>> source
>>>>> text that it covers, build up the offset information until you get
>>>>> another hit and then pull from the source text into the  
>>>>> highlighted text
>>>>> in one big piece rather than a tokens worth at a time. Of  
>>>>> course this is
>>>>> not compatible with the way the Fragmenter currently works. If  
>>>>> you use
>>>>> the StandardAnalyzer instead of SimpleAnalyzer, Ronnie's  
>>>>> highlighter
>>>>> wins because it takes so darn long to re-analyze.
>>>>>
>>>>> It is also interesting to note that it is very difficult to see  
>>>>> in a
>>>>> gain in using TokenSources to build a TokenStream. Using the
>>>>> StandardAnalyzer, it takes docs that are 1800 tokens just to be  
>>>>> as fast
>>>>> as re-analyzing. Notice I didn't say fast, but "as fast". Anything
>>>>> smaller, or if you're using a simpler analyzer, and  
>>>>> TokenSources is
>>>>> certainly not worth it. It just takes too long to pull  
>>>>> TermVector info.
>>>>>
>>>>> - Mark
>>>>>
>>>>>
>>>>>
>>>>> ------------------------------------------------------------------ 
>>>>> ---
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>
>>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 17:53:22 2007
Return-Path: <java-user-return-30056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41231 invoked from network); 29 Aug 2007 17:53:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 17:53:22 -0000
Received: (qmail 38183 invoked by uid 500); 29 Aug 2007 17:53:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37298 invoked by uid 500); 29 Aug 2007 17:53:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37281 invoked by uid 99); 29 Aug 2007 17:53:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 10:53:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [17.250.248.177] (HELO smtpout.mac.com) (17.250.248.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 17:54:04 +0000
Received: from mac.com (smtpin07-en2 [10.13.10.152])
	by smtpout.mac.com (Xserve/smtpout07/MantshX 4.0) with ESMTP id l7THqjWN014890
	for <java-user@lucene.apache.org>; Wed, 29 Aug 2007 10:52:45 -0700 (PDT)
Received: from [192.168.1.100] (216-12-26-89.va.mvl.ntelos.net [216.12.26.89])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin07/MantshX 4.0) with ESMTP id l7THqhql013991
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 29 Aug 2007 10:52:45 -0700 (PDT)
Message-ID: <46D5B26C.9000105@mac.com>
Date: Wed, 29 Aug 2007 13:52:44 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Large Index Architecture
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello All,

I want to hear from those out there that have large (i.e. 50 GB+) 
indexes on how they have designed their architecture.  I currently have 
an index for email that is 10 GB and growing.  Right now there are no 
issues with it but I am about to get into an even bigger use for the 
software which will surely require access to much larger indexes.  
Should I begin to break off indexes into separate chunks and then search 
across them as needed?

For example, maybe break it out by "Month_Year Or "Day_Month_Year"?  
Ideas and experienced practices welcome!

Thanks,
Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 19:25:14 2007
Return-Path: <java-user-return-30057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84123 invoked from network); 29 Aug 2007 19:25:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 19:25:12 -0000
Received: (qmail 12849 invoked by uid 500); 29 Aug 2007 19:25:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12806 invoked by uid 500); 29 Aug 2007 19:25:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12710 invoked by uid 99); 29 Aug 2007 19:25:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 12:25:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [64.81.62.48] (HELO mail01.apmindsf.com) (64.81.62.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 19:24:55 +0000
Received: from [10.8.0.122] (helo=[10.8.0.122])
	by mail01.apmindsf.com with esmtp (Exim 4.50)
	id 1IQT9W-0008CF-3s
	for java-user@lucene.apache.org; Wed, 29 Aug 2007 12:24:34 -0700
Message-ID: <46D5CAEE.4060303@metaweb.com>
Date: Wed, 29 Aug 2007 12:37:18 -0700
From: Tim Sturge <tsturge@metaweb.com>
User-Agent: Mozilla Thunderbird 1.0.6 (X11/20050715)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: indexing fields with multiplicity
References: <46D47A83.6010401@metaweb.com> <96514DC9-051F-41E0-A872-3E3F8EE3E934@gmail.com> <46D5A927.2020201@metaweb.com> <44CF4B03-80CF-4ABD-BEAB-FE6DF1505ED2@gmail.com>
In-Reply-To: <44CF4B03-80CF-4ABD-BEAB-FE6DF1505ED2@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

That's exactly my question. I feel like

for (i = 0 ; i < XXXX ; i++) {
document.add(new Field("anchor","USA"));
}

is exactly equivalent to

field = new Field("anchor","USA"));
field.setBoost(YYYY);
document.add(field);

but I don't know the function that relates XXXX and YYYY. I feel like 
there's a correct information-theorectical answer and I'd like to know 
what it is.

Tim

Karl Wettin wrote:
>
> 29 aug 2007 kl. 19.13 skrev Tim Sturge:
>
>> I'm looking for a boost when the anchor text is more commonly 
>> associated with one topic than another. For example the United States 
>> of America
>> is called "USA" by a lot of people. The United Space Alliance is also 
>> called "USA" but by many less people.
>>
>> If I just index them both with "USA" once, they will rank equally. I 
>> want the United States of America to rank higher.
>
> Why not use Field#setBoost(float)?
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 19:59:30 2007
Return-Path: <java-user-return-30058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94383 invoked from network); 29 Aug 2007 19:59:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 19:59:29 -0000
Received: (qmail 62388 invoked by uid 500); 29 Aug 2007 19:59:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62352 invoked by uid 500); 29 Aug 2007 19:59:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62341 invoked by uid 99); 29 Aug 2007 19:59:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 12:59:18 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 80.76.149.212 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.212] (HELO ch-smtp01.sth.basefarm.net) (80.76.149.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 20:00:11 +0000
Received: from c83-249-118-113.bredband.comhem.se ([83.249.118.113]:52721 helo=[192.168.2.101])
	by ch-smtp01.sth.basefarm.net with esmtp (Exim 4.66)
	(envelope-from <karl.wettin@gmail.com>)
	id 1IQTgi-0001gv-3b
	for java-user@lucene.apache.org; Wed, 29 Aug 2007 21:58:52 +0200
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <46D5CAEE.4060303@metaweb.com>
References: <46D47A83.6010401@metaweb.com> <96514DC9-051F-41E0-A872-3E3F8EE3E934@gmail.com> <46D5A927.2020201@metaweb.com> <44CF4B03-80CF-4ABD-BEAB-FE6DF1505ED2@gmail.com> <46D5CAEE.4060303@metaweb.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <4A36D07D-F495-461C-9447-FC623DBF7BF5@gmail.com>
Content-Transfer-Encoding: 7bit
From: Karl Wettin <karl.wettin@gmail.com>
Subject: Re: indexing fields with multiplicity
Date: Wed, 29 Aug 2007 21:53:07 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Originating-IP: 83.249.118.113
X-Scan-Result: No virus found in message 1IQTgi-0001gv-3b.
X-Scan-Signature: ch-smtp01.sth.basefarm.net 1IQTgi-0001gv-3b 9cb6b30383fcce8fc3a3db02b2b92a4a
X-Virus-Checked: Checked by ClamAV on apache.org


29 aug 2007 kl. 21.37 skrev Tim Sturge:

> That's exactly my question. I feel like
>
> for (i = 0 ; i < XXXX ; i++) {
> document.add(new Field("anchor","USA"));
> }
>
> is exactly equivalent to
>
> field = new Field("anchor","USA"));
> field.setBoost(YYYY);
> document.add(field);
>
> but I don't know the function that relates XXXX and YYYY. I feel  
> like there's a correct information-theorectical answer and I'd like  
> to know what it is.

You would have to refactor norm(t,d) in this computation:

http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/ 
org/apache/lucene/search/Similarity.html

However, field boost is merged in to the document boost, so it might  
not translate that easy as you want. Perhaps payloads and  
BoostingTermQuery fits your needs better.


-- 
karl



>
> Tim
>
> Karl Wettin wrote:
>>
>> 29 aug 2007 kl. 19.13 skrev Tim Sturge:
>>
>>> I'm looking for a boost when the anchor text is more commonly  
>>> associated with one topic than another. For example the United  
>>> States of America
>>> is called "USA" by a lot of people. The United Space Alliance is  
>>> also called "USA" but by many less people.
>>>
>>> If I just index them both with "USA" once, they will rank  
>>> equally. I want the United States of America to rank higher.
>>
>> Why not use Field#setBoost(float)?
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 20:04:19 2007
Return-Path: <java-user-return-30059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95290 invoked from network); 29 Aug 2007 20:04:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 20:04:18 -0000
Received: (qmail 68111 invoked by uid 500); 29 Aug 2007 20:04:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68069 invoked by uid 500); 29 Aug 2007 20:04:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68057 invoked by uid 99); 29 Aug 2007 20:04:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 13:04:08 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [82.146.123.134] (HELO villon.taktik.be) (82.146.123.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 20:05:00 +0000
Received: from localhost (localhost [127.0.0.1])
	by villon.taktik.be (Postfix) with ESMTP id 56D6B30963A4
	for <java-user@lucene.apache.org>; Wed, 29 Aug 2007 22:07:10 +0200 (CEST)
Received: from villon.taktik.be ([127.0.0.1])
 by localhost (villon.taktik.be [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 14914-01 for <java-user@lucene.apache.org>;
 Wed, 29 Aug 2007 22:07:04 +0200 (CEST)
Received: from [192.168.1.3] (12.238-243-81.adsl-dyn.isp.belgacom.be [81.243.238.12])
	by villon.taktik.be (Postfix) with ESMTP id 1C59F3096375
	for <java-user@lucene.apache.org>; Wed, 29 Aug 2007 22:07:04 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.3)
To: java-user@lucene.apache.org
Message-Id: <8BE7B818-F9B1-4483-BCA9-679133D9F422@taktik.be>
Content-Type: multipart/alternative; boundary=Apple-Mail-23--342790489
From: Antoine Baudoux <ab@taktik.be>
Subject: How to speed-up index opening
Date: Wed, 29 Aug 2007 22:03:26 +0200
X-Mailer: Apple Mail (2.752.3)
X-Virus-Scanned: by amavisd-new at taktik.be
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-23--342790489
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=ISO-8859-1;
	delsp=yes;
	format=flowed

	Hello,

	I have an application with a 2GB index. A lot of documents (up =
to =20
10.000 per day) are added/deleted to this index.

My customer would like to have a Maximum of 7 minutes delay between a =20=

media added to the system and its searchability through the index.

So each 7 minutes or so i have to re-open the index.

My index takes 1.5 minute to open. Its a long time compared to the 7 =20
minutes.

What are the key parameters influencing the opening time?

Is it proportional to the number of documents? to the number of =20
distinct terms? If i reduce the number of terms will it load faster?

Is there another way to improve index opening speed?


thanks!

Antoine

--
Antoine Baudoux
Development Manager
ab@taktik.be
T=E9l.: +32 2 333 58 44
GSM: +32 499 534 538
Fax.: +32 2 648 16 53



--Apple-Mail-23--342790489--

From java-user-return-30060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 21:34:26 2007
Return-Path: <java-user-return-30060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15930 invoked from network); 29 Aug 2007 21:34:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 21:34:25 -0000
Received: (qmail 84110 invoked by uid 500); 29 Aug 2007 21:34:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84079 invoked by uid 500); 29 Aug 2007 21:34:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84068 invoked by uid 99); 29 Aug 2007 21:34:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 14:34:14 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 21:34:07 +0000
Received: by nf-out-0910.google.com with SMTP id d3so272367nfc
        for <java-user@lucene.apache.org>; Wed, 29 Aug 2007 14:33:46 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uggYEh2hHubISiPX72t8U1z+gEIrJB1eSEeCK2748pUrTSWs2oABKDBh8vEYFsnKe1puiTIh+WzFVrBj5bbFdOD5LKXUW/x5Fow+RBC62xXC1Ig/tk7dzGXV1yj/54KqyH3gkZClibXVLsSNwz+kCEG9Phk3yxBfcPiPd7AowaU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=G2iwOL4h5PDmZSFzq1Wadox4ljSSz9M8jz1ojS+5rKHvd91OzIpMVPtcJkZCDhrc1MZTpNiupKF+tAw2yXeIIft1fF0tUsAAMwQZBj138AOvd+mm+bnKYBR1NhMsQxSNEhz9JQzj45NKVL/Z8AdHBYXgglkjK6HuRhStwM4IOV8=
Received: by 10.78.188.10 with SMTP id l10mr646078huf.1188423224965;
        Wed, 29 Aug 2007 14:33:44 -0700 (PDT)
Received: by 10.78.140.12 with HTTP; Wed, 29 Aug 2007 14:33:44 -0700 (PDT)
Message-ID: <6e3ae6310708291433j7dcab292ud724e142ce435eef@mail.gmail.com>
Date: Wed, 29 Aug 2007 14:33:44 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to speed-up index opening
In-Reply-To: <8BE7B818-F9B1-4483-BCA9-679133D9F422@taktik.be>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3077_29962446.1188423224923"
References: <8BE7B818-F9B1-4483-BCA9-679133D9F422@taktik.be>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3077_29962446.1188423224923
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi, Antoine,

It does take a long time to open the index reader.
One thing you could do is to put new documents into one smaller index and
re-open it, it should be much faster.

Also, you may need to have one index reader open, and open a new index
reader, then close the previous index reader, to ensure no service down
time.

--=20
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database_Search_in_=
3_minutes

On 8/29/07, Antoine Baudoux <ab@taktik.be> wrote:
>
>         Hello,
>
>         I have an application with a 2GB index. A lot of documents (up to
> 10.000 per day) are added/deleted to this index.
>
> My customer would like to have a Maximum of 7 minutes delay between a
> media added to the system and its searchability through the index.
>
> So each 7 minutes or so i have to re-open the index.
>
> My index takes 1.5 minute to open. Its a long time compared to the 7
> minutes.
>
> What are the key parameters influencing the opening time?
>
> Is it proportional to the number of documents? to the number of
> distinct terms? If i reduce the number of terms will it load faster?
>
> Is there another way to improve index opening speed?
>
>
> thanks!
>
> Antoine
>
> --
> Antoine Baudoux
> Development Manager
> ab@taktik.be
> T=E9l.: +32 2 333 58 44
> GSM: +32 499 534 538
> Fax.: +32 2 648 16 53
>
>
>

------=_Part_3077_29962446.1188423224923--

From java-user-return-30061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Aug 29 21:38:23 2007
Return-Path: <java-user-return-30061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18407 invoked from network); 29 Aug 2007 21:38:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Aug 2007 21:38:21 -0000
Received: (qmail 92451 invoked by uid 500); 29 Aug 2007 21:38:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92422 invoked by uid 500); 29 Aug 2007 21:38:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92410 invoked by uid 99); 29 Aug 2007 21:38:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 14:38:10 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 21:38:03 +0000
Received: by nf-out-0910.google.com with SMTP id d3so273123nfc
        for <java-user@lucene.apache.org>; Wed, 29 Aug 2007 14:37:42 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=hTc5tBULarACbKEjMOf61w5rTo3lmUjTe6eOyuYC5IQNF0nvw4C85A9tUsZ24eOIeV0guINhXVgkJOBXLAte5ldHzQiqwHWRWqv4a/NNe1KEG7mF5Sb2S9LNY/ThvG0d4MXYL/yjV5V06g+0DpuSOrqexHsNaYB8Oan89wYU69c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XlW0MyEogGk5C/73HHtmtjSD6jQ4FiKEX08pOfpAbaLMUNg0I3leJwP38iC65yK9bhE1KOwc4dXbUYS1RpUArhUOnd7wKjKulyjw+Vwf40QnRfmzkU6KnwAPvNKurlnsdHtHu95UtzluaH41AKQgF9DNnM1W4xJq/+TWaW2Nc8M=
Received: by 10.78.134.2 with SMTP id h2mr633792hud.1188423461673;
        Wed, 29 Aug 2007 14:37:41 -0700 (PDT)
Received: by 10.78.140.12 with HTTP; Wed, 29 Aug 2007 14:37:41 -0700 (PDT)
Message-ID: <6e3ae6310708291437k6d67ec8etf7c5ce3b5826fd3d@mail.gmail.com>
Date: Wed, 29 Aug 2007 14:37:41 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Large Index Architecture
In-Reply-To: <46D5B26C.9000105@mac.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3092_19146953.1188423461633"
References: <46D5B26C.9000105@mac.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3092_19146953.1188423461633
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Index Partitioning should be a good idea.
It'll save a lot of time on index merging, incremental indexing.

Just my experience, partition size really depends on CPU, hard disk speed,
and memory size. Nowadays with Core 2 Duo, 10G size for each chunk should be
good.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes

On 8/29/07, Michael J. Prichard <michael_prichard@mac.com> wrote:
>
> Hello All,
>
> I want to hear from those out there that have large (i.e. 50 GB+)
> indexes on how they have designed their architecture.  I currently have
> an index for email that is 10 GB and growing.  Right now there are no
> issues with it but I am about to get into an even bigger use for the
> software which will surely require access to much larger indexes.
> Should I begin to break off indexes into separate chunks and then search
> across them as needed?
>
> For example, maybe break it out by "Month_Year Or "Day_Month_Year"?
> Ideas and experienced practices welcome!
>
> Thanks,
> Michael
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_3092_19146953.1188423461633--

From java-user-return-30062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 30 02:03:28 2007
Return-Path: <java-user-return-30062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29577 invoked from network); 30 Aug 2007 02:03:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2007 02:03:27 -0000
Received: (qmail 52868 invoked by uid 500); 30 Aug 2007 02:03:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52821 invoked by uid 500); 30 Aug 2007 02:03:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52809 invoked by uid 99); 30 Aug 2007 02:03:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 19:03:17 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [72.172.130.4] (HELO ps02.vds2000.com) (72.172.130.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 02:04:10 +0000
Received: (qmail 20482 invoked from network); 29 Aug 2007 22:02:50 -0400
Received: from unknown (HELO aroushlt) (72.93.254.127)
  by aroush.net with SMTP; 29 Aug 2007 22:02:50 -0400
From: "George Aroush" <george@aroush.net>
To: <java-user@lucene.apache.org>
Subject: Can a Lucene field be renamed in a Lucene index?
Date: Wed, 29 Aug 2007 22:03:27 -0400
Message-ID: <084901c7eaa9$f4a42840$0301a8c0@aroushlt>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcfqqfRySfII+LcLSwGBxNH0CvDp5g==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Hi everyone,

I have the following need and I wander what are my options or if anyone run
into it and has a solution / suggestion.

I'm indexing a SQL database.  Each table is a Lucene index.  Now, in table
"A", I have a field called "Foo".  When I index it into Lucene, I also end
up with a field called "Foo".  Later on, the SQL database administrator,
will change the field name from "Foo" to "Bar".  Once this happens, any new
records added to table "A" will be indexed into Lucene as "Bar".

The issue is this, Lucene index for table "A" now has documents with some
having a field called "Foo" and others with "Bar".  This is problematic
because now a user can't just search for "Foo:dog", but must search for
"Foo:dog Bar:dog".

So, what are my options here?  No, I can't re-index.  Ideally, I would like
to be able to say to Lucene, "rename the field 'Foo' to 'Bar' in the index
'A'" (even if it means using private APIs).  Is this possible?  Have you run
into this problem?  What was your solution?

Regards,

-- George


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 30 02:11:12 2007
Return-Path: <java-user-return-30063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32353 invoked from network); 30 Aug 2007 02:11:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2007 02:11:10 -0000
Received: (qmail 61952 invoked by uid 500); 30 Aug 2007 02:10:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61916 invoked by uid 500); 30 Aug 2007 02:10:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61904 invoked by uid 99); 30 Aug 2007 02:10:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 19:10:59 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 02:11:52 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 5262030EFC19; Wed, 29 Aug 2007 20:10:32 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.5] (va-76-6-215-202.dhcp.embarqhsd.net [76.6.215.202])
	by ehatchersolutions.com (Postfix) with ESMTP id A01B830EFC19
	for <java-user@lucene.apache.org>; Wed, 29 Aug 2007 20:10:29 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <084901c7eaa9$f4a42840$0301a8c0@aroushlt>
References: <084901c7eaa9$f4a42840$0301a8c0@aroushlt>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <1AB68811-2A68-4295-9548-268BE41D7D38@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Can a Lucene field be renamed in a Lucene index?
Date: Wed, 29 Aug 2007 22:10:26 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.6 required=5.0 tests=BAYES_00,RCVD_IN_SORBS_DUL 
	autolearn=no version=3.1.1

there was just this thread here recently:

   <http://www.nabble.com/How-to-rename-fields-in-an-index- 
tf4310043.html#a12269902>

hope that helps.

	Erik


On Aug 29, 2007, at 10:03 PM, George Aroush wrote:

> Hi everyone,
>
> I have the following need and I wander what are my options or if  
> anyone run
> into it and has a solution / suggestion.
>
> I'm indexing a SQL database.  Each table is a Lucene index.  Now,  
> in table
> "A", I have a field called "Foo".  When I index it into Lucene, I  
> also end
> up with a field called "Foo".  Later on, the SQL database  
> administrator,
> will change the field name from "Foo" to "Bar".  Once this happens,  
> any new
> records added to table "A" will be indexed into Lucene as "Bar".
>
> The issue is this, Lucene index for table "A" now has documents  
> with some
> having a field called "Foo" and others with "Bar".  This is  
> problematic
> because now a user can't just search for "Foo:dog", but must search  
> for
> "Foo:dog Bar:dog".
>
> So, what are my options here?  No, I can't re-index.  Ideally, I  
> would like
> to be able to say to Lucene, "rename the field 'Foo' to 'Bar' in  
> the index
> 'A'" (even if it means using private APIs).  Is this possible?   
> Have you run
> into this problem?  What was your solution?
>
> Regards,
>
> -- George
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 30 02:33:35 2007
Return-Path: <java-user-return-30064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39144 invoked from network); 30 Aug 2007 02:33:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2007 02:33:34 -0000
Received: (qmail 80962 invoked by uid 500); 30 Aug 2007 02:33:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80702 invoked by uid 500); 30 Aug 2007 02:33:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80691 invoked by uid 99); 30 Aug 2007 02:33:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 19:33:21 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.172.130.4] (HELO ps02.vds2000.com) (72.172.130.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 02:33:13 +0000
Received: (qmail 3155 invoked from network); 29 Aug 2007 22:32:53 -0400
Received: from unknown (HELO aroushlt) (72.93.254.127)
  by aroush.net with SMTP; 29 Aug 2007 22:32:52 -0400
From: "George Aroush" <george@aroush.net>
To: <java-user@lucene.apache.org>
Subject: RE: Can a Lucene field be renamed in a Lucene index?
Date: Wed, 29 Aug 2007 22:33:28 -0400
Message-ID: <085101c7eaae$26582b30$0301a8c0@aroushlt>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcfqqweH45oyuegEQ0SdaTifDWxSaAAArPTQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
In-Reply-To: <1AB68811-2A68-4295-9548-268BE41D7D38@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Just read the thread.  Unfortunately, it doesn't offer a solution.

Is it possible to write a tool that will read the source index, and write it
to an output index with the field renamed?  No, the raw-text is not stored
in the Lucene index.

Thanks.

-- George

> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
> Sent: Wednesday, August 29, 2007 10:10 PM
> To: java-user@lucene.apache.org
> Subject: Re: Can a Lucene field be renamed in a Lucene index?
> 
> there was just this thread here recently:
> 
>    <http://www.nabble.com/How-to-rename-fields-in-an-index-
> tf4310043.html#a12269902>
> 
> hope that helps.
> 
> 	Erik
> 
> 
> On Aug 29, 2007, at 10:03 PM, George Aroush wrote:
> 
> > Hi everyone,
> >
> > I have the following need and I wander what are my options or if 
> > anyone run into it and has a solution / suggestion.
> >
> > I'm indexing a SQL database.  Each table is a Lucene index. 
>  Now, in 
> > table "A", I have a field called "Foo".  When I index it 
> into Lucene, 
> > I also end up with a field called "Foo".  Later on, the SQL 
> database 
> > administrator, will change the field name from "Foo" to 
> "Bar".  Once 
> > this happens, any new records added to table "A" will be 
> indexed into 
> > Lucene as "Bar".
> >
> > The issue is this, Lucene index for table "A" now has 
> documents with 
> > some having a field called "Foo" and others with "Bar".  This is 
> > problematic because now a user can't just search for "Foo:dog", but 
> > must search for "Foo:dog Bar:dog".
> >
> > So, what are my options here?  No, I can't re-index.  
> Ideally, I would 
> > like to be able to say to Lucene, "rename the field 'Foo' 
> to 'Bar' in 
> > the index
> > 'A'" (even if it means using private APIs).  Is this possible?   
> > Have you run
> > into this problem?  What was your solution?
> >
> > Regards,
> >
> > -- George
> >
> >
> > 
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 30 03:31:01 2007
Return-Path: <java-user-return-30065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47231 invoked from network); 30 Aug 2007 03:31:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2007 03:31:00 -0000
Received: (qmail 1338 invoked by uid 500); 30 Aug 2007 03:30:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1028 invoked by uid 500); 30 Aug 2007 03:30:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1017 invoked by uid 99); 30 Aug 2007 03:30:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 20:30:49 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 03:30:43 +0000
Received: by nf-out-0910.google.com with SMTP id d3so321278nfc
        for <java-user@lucene.apache.org>; Wed, 29 Aug 2007 20:30:21 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Ex3irYJFgrFo+2tJl8sH1fHxbgN+l6W8MG4JeCuxiCcrWPJ0rNVDsVRIW5yZh6l9ASnhwMTRSl4V36BhtJe2Pmo34shk18vvGNWLOlSYwVeND3fiasl6hF3aqlw5/TMTA1m4La/s3l8jQr+CRrYg81BzwnEwjcDQ3rP8/EaPEaM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Sb3I7i/fCs77nk1mUfAWEr8oqKuV3RdkFQcyPZanq/XVwGq2QDD9azLSw0uCMl1CTATrc69H8y5+D4cg8YAp3MtL1jzC1KlLZjFrvjbq/LlSC191muKh5OSAm75OS8QRlC1FvUpH+IBLypkcv+/2sq81dWb3BNUxN1dYck0Q2qI=
Received: by 10.78.132.2 with SMTP id f2mr21576hud.1188444620949;
        Wed, 29 Aug 2007 20:30:20 -0700 (PDT)
Received: by 10.78.140.12 with HTTP; Wed, 29 Aug 2007 20:30:20 -0700 (PDT)
Message-ID: <6e3ae6310708292030p6dd3486cs4d5bc176c8c31756@mail.gmail.com>
Date: Wed, 29 Aug 2007 20:30:20 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Can a Lucene field be renamed in a Lucene index?
In-Reply-To: <084901c7eaa9$f4a42840$0301a8c0@aroushlt>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4022_7204761.1188444620904"
References: <084901c7eaa9$f4a42840$0301a8c0@aroushlt>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4022_7204761.1188444620904
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The easiest solution would be to change the SQL to
 select Bar as Foo, ..., from your_table

Use an alias and maintain everything as before.

If it's not a solution, you may need to re-index everything.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes

On 8/29/07, George Aroush <george@aroush.net> wrote:
>
> Hi everyone,
>
> I have the following need and I wander what are my options or if anyone
> run
> into it and has a solution / suggestion.
>
> I'm indexing a SQL database.  Each table is a Lucene index.  Now, in table
> "A", I have a field called "Foo".  When I index it into Lucene, I also end
> up with a field called "Foo".  Later on, the SQL database administrator,
> will change the field name from "Foo" to "Bar".  Once this happens, any
> new
> records added to table "A" will be indexed into Lucene as "Bar".
>
> The issue is this, Lucene index for table "A" now has documents with some
> having a field called "Foo" and others with "Bar".  This is problematic
> because now a user can't just search for "Foo:dog", but must search for
> "Foo:dog Bar:dog".
>
> So, what are my options here?  No, I can't re-index.  Ideally, I would
> like
> to be able to say to Lucene, "rename the field 'Foo' to 'Bar' in the index
> 'A'" (even if it means using private APIs).  Is this possible?  Have you
> run
> into this problem?  What was your solution?
>
> Regards,
>
> -- George
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4022_7204761.1188444620904--

From java-user-return-30066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 30 03:39:45 2007
Return-Path: <java-user-return-30066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48115 invoked from network); 30 Aug 2007 03:39:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2007 03:39:45 -0000
Received: (qmail 5165 invoked by uid 500); 30 Aug 2007 03:39:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5137 invoked by uid 500); 30 Aug 2007 03:39:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5126 invoked by uid 99); 30 Aug 2007 03:39:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 20:39:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of buschmic@gmail.com designates 66.249.82.229 as permitted sender)
Received: from [66.249.82.229] (HELO wx-out-0506.google.com) (66.249.82.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 03:39:30 +0000
Received: by wx-out-0506.google.com with SMTP id i28so327702wxd
        for <java-user@lucene.apache.org>; Wed, 29 Aug 2007 20:39:08 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=ZEVABQq+MFHTNxXXEQM8i+c2HmHrSiWuvv8CgRyr+lZn2yT6olDzcMdg0Pd71rs1WIOyggD5/8wVe65vPX1RqG2/M+58kXDWV/e1XjzVp+XHtlzQe/NAGblhaOddF+e6Cd98AGACQYf8KhfPNDa+87QddfjHKkGYqSIOZEW1Hf0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=NjbG8tiAcXU9emdbNw2az9F1Ewhx0zkP2gVlCpsK95/mq/e0JpZrvtw7brZ7ngwBGRehhb3cStZ95h/TPgAsTsS1x20tT5eCjQrgKIBIjsPVizLaumlEvyMQ67/PItE1uec2LvxSInabEbgEOWUmXHo2GMAgcv68pGODPlBfoNA=
Received: by 10.70.113.16 with SMTP id l16mr84259wxc.1188445148647;
        Wed, 29 Aug 2007 20:39:08 -0700 (PDT)
Received: from ?192.168.0.100? ( [24.80.67.88])
        by mx.google.com with ESMTPS id g9sm43677wra.2007.08.29.20.39.07
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 29 Aug 2007 20:39:07 -0700 (PDT)
Message-ID: <46D63BA3.5010703@gmail.com>
Date: Wed, 29 Aug 2007 20:38:11 -0700
From: Michael Busch <buschmic@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: How to speed-up index opening
References: <8BE7B818-F9B1-4483-BCA9-679133D9F422@taktik.be> <6e3ae6310708291433j7dcab292ud724e142ce435eef@mail.gmail.com>
In-Reply-To: <6e3ae6310708291433j7dcab292ud724e142ce435eef@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Chris Lu wrote:
> Hi, Antoine,
> 
> It does take a long time to open the index reader.
> One thing you could do is to put new documents into one smaller index and
> re-open it, it should be much faster.
> 

We're planning to add a reopen() method to IndexReader that should
significantly speed up reopening a reader:
http://issues.apache.org/jira/browse/LUCENE-743.

This feature should be part of the next Lucene release.

- Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 30 04:01:38 2007
Return-Path: <java-user-return-30067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52841 invoked from network); 30 Aug 2007 04:01:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2007 04:01:37 -0000
Received: (qmail 27797 invoked by uid 500); 30 Aug 2007 04:01:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27761 invoked by uid 500); 30 Aug 2007 04:01:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27750 invoked by uid 99); 30 Aug 2007 04:01:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Aug 2007 21:01:27 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of tien.nguyenmanh@gmail.com designates 209.85.198.188 as permitted sender)
Received: from [209.85.198.188] (HELO rv-out-0910.google.com) (209.85.198.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 04:02:21 +0000
Received: by rv-out-0910.google.com with SMTP id k20so43544rvb
        for <java-user@lucene.apache.org>; Wed, 29 Aug 2007 21:01:01 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:reply-to:to:subject:mime-version:content-type;
        b=QUJumhubtS7hKF42hKtw1eQ+iugwh+suLjE6BFrP74S7hrTUCAWb0kakVZrQkDlcxyY7aiL1HSzjjGhnyAeQjeunfTbuDrGAXWrLKas84F5XU1uFJAH4NeWU9xZqUjLrFQQwFtZfiFAIXJJhgGUUwis9iahaDJeJ99UWiqDnmJQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type;
        b=H8SHvmFPZQwo4/slccVm8mRhQz+HdkPNMHWn5TPeKlpepNF1iWmSQDAFMFaTvcjd3IewSfkvGl9VOQerj4SFii6M9OiZmFYnEYfzKb2PFcqvDPNO9/e3A+LAqCsKFKGD8htg1b7qO/itev2Wd2f5/CTw+wV+sOebb5t994A9COU=
Received: by 10.141.5.3 with SMTP id h3mr38799rvi.1188446460964;
        Wed, 29 Aug 2007 21:01:00 -0700 (PDT)
Received: by 10.141.78.8 with HTTP; Wed, 29 Aug 2007 21:01:00 -0700 (PDT)
Message-ID: <8174d5d50708292101q7eddc4cckf8ee0b8998e57156@mail.gmail.com>
Date: Thu, 30 Aug 2007 11:01:00 +0700
From: "Nguyen Manh Tien" <tien.nguyenmanh@gmail.com>
Reply-To: tien.nguyenmanh@gmail.com
To: java-user@lucene.apache.org
Subject: Reduce copy error
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_959_11324566.1188446460925"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_959_11324566.1188446460925
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

When i run nutch, i alway met this error in reduce task and is run
very slow after this error.
Do any one know how to solve this problem.

Here is the log:
java.io.IOException: Insufficient space
	at org.apache.hadoop.fs.InMemoryFileSystem$RawInMemoryFileSystem$InMemoryOutputStream.write(InMemoryFileSystem.java:174)
	at org.apache.hadoop.fs.FSDataOutputStream$PositionCache.write(FSDataOutputStream.java:39)
	at java.io.DataOutputStream.write(DataOutputStream.java:90)
	at java.io.FilterOutputStream.write(FilterOutputStream.java:80)
	at org.apache.hadoop.fs.ChecksumFileSystem$ChecksumFSOutputSummer.writeChunk(ChecksumFileSystem.java:326)
	at org.apache.hadoop.fs.FSOutputSummer.writeChecksumChunk(FSOutputSummer.java:140)
	at org.apache.hadoop.fs.FSOutputSummer.flushBuffer(FSOutputSummer.java:122)
	at org.apache.hadoop.fs.ChecksumFileSystem$ChecksumFSOutputSummer.close(ChecksumFileSystem.java:310)
	at org.apache.hadoop.fs.FSDataOutputStream$PositionCache.close(FSDataOutputStream.java:49)
	at org.apache.hadoop.fs.FSDataOutputStream.close(FSDataOutputStream.java:64)
	at org.apache.hadoop.mapred.MapOutputLocation.getFile(MapOutputLocation.java:253)
	at org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.copyOutput(ReduceTask.java:673)
	at org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.run(ReduceTask.java:631)

------=_Part_959_11324566.1188446460925--

From java-user-return-30068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 30 08:33:12 2007
Return-Path: <java-user-return-30068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49269 invoked from network); 30 Aug 2007 08:33:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2007 08:33:11 -0000
Received: (qmail 76549 invoked by uid 500); 30 Aug 2007 08:33:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76505 invoked by uid 500); 30 Aug 2007 08:33:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76494 invoked by uid 99); 30 Aug 2007 08:33:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 01:33:00 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [82.146.123.134] (HELO villon.taktik.be) (82.146.123.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 08:32:56 +0000
Received: from localhost (localhost [127.0.0.1])
	by villon.taktik.be (Postfix) with ESMTP id F0ABB30A4DBE
	for <java-user@lucene.apache.org>; Thu, 30 Aug 2007 10:36:04 +0200 (CEST)
Received: from villon.taktik.be ([127.0.0.1])
 by localhost (villon.taktik.be [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 23974-07 for <java-user@lucene.apache.org>;
 Thu, 30 Aug 2007 10:35:58 +0200 (CEST)
Received: from [192.168.63.11] (unknown [192.168.63.11])
	by villon.taktik.be (Postfix) with ESMTP id B3DEB30A4D72
	for <java-user@lucene.apache.org>; Thu, 30 Aug 2007 10:35:58 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <6e3ae6310708291433j7dcab292ud724e142ce435eef@mail.gmail.com>
References: <8BE7B818-F9B1-4483-BCA9-679133D9F422@taktik.be> <6e3ae6310708291433j7dcab292ud724e142ce435eef@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <8E8784BD-BA98-4BF6-B851-278D0D28C651@taktik.be>
Content-Transfer-Encoding: quoted-printable
From: Antoine Baudoux <ab@taktik.be>
Subject: Re: How to speed-up index opening
Date: Thu, 30 Aug 2007 10:32:26 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Scanned: by amavisd-new at taktik.be
X-Virus-Checked: Checked by ClamAV on apache.org

Le 29 Aug 2007 =E0 23:33, Chris Lu a =E9crit :

> Hi, Antoine,
>
> It does take a long time to open the index reader.
> One thing you could do is to put new documents into one smaller =20
> index and
> re-open it, it should be much faster.
>

Yes, but there is the problem of deleted /updated documents. Your =20
solution is easy to implement only if I only Add new documents.
Or Am i missing something?=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 30 08:33:52 2007
Return-Path: <java-user-return-30069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49466 invoked from network); 30 Aug 2007 08:33:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2007 08:33:51 -0000
Received: (qmail 79788 invoked by uid 500); 30 Aug 2007 08:33:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79230 invoked by uid 500); 30 Aug 2007 08:33:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79219 invoked by uid 99); 30 Aug 2007 08:33:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 01:33:40 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [206.125.223.73] (HELO mx03.mailboxcop.com) (206.125.223.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 08:33:33 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx03.mailboxcop.com (8.13.1/8.13.1) with ESMTP id l7U8X86X019298
	for <java-user@lucene.apache.org>; Thu, 30 Aug 2007 03:33:10 -0500
Received: (qmail 24149 invoked by uid 0); 30 Aug 2007 03:33:08 -0500
Date: 30 Aug 2007 03:33:08 -0500
Message-ID: <20070830083308.24148.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: =?utf-8?Q?Re:_Re:_How_to_speed=2Dup_index_opening?=
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Bayes-Prob: 0.0001 (Score 0)
X-Spam-Score: 0.60 () [Hold at 6.00] NO_REAL_NAME,SUBJECT_EXCESS_QP
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: Bayes signature not available
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.5
X-Virus-Checked: Checked by ClamAV on apache.org

Tom Roberts is out of the office until 3rd September 2007 and will get back to you on his return.

http://www.luxonline.org.uk
http://www.lux.org.uk




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 30 08:34:45 2007
Return-Path: <java-user-return-30070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49717 invoked from network); 30 Aug 2007 08:34:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2007 08:34:43 -0000
Received: (qmail 82037 invoked by uid 500); 30 Aug 2007 08:34:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82001 invoked by uid 500); 30 Aug 2007 08:34:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81990 invoked by uid 99); 30 Aug 2007 08:34:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 01:34:33 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [206.125.223.71] (HELO mx01.mailboxcop.com) (206.125.223.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 08:35:24 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx01.mailboxcop.com (8.13.1/8.13.1) with ESMTP id l7U8XlRK024989
	for <java-user@lucene.apache.org>; Thu, 30 Aug 2007 03:33:48 -0500
Received: (qmail 24511 invoked by uid 0); 30 Aug 2007 03:33:47 -0500
Date: 30 Aug 2007 03:33:47 -0500
Message-ID: <20070830083347.24510.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: =?utf-8?Q?Re:_Re:_Re:_How_to_speed=2Dup_index_opening?=
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Bayes-Prob: 0.0001 (Score 0)
X-Spam-Score: 0.60 () [Hold at 6.00] NO_REAL_NAME,SUBJECT_EXCESS_QP
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: Bayes signature not available
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.3
X-Virus-Checked: Checked by ClamAV on apache.org

Tom Roberts is out of the office until 3rd September 2007 and will get back to you on his return.

http://www.luxonline.org.uk
http://www.lux.org.uk




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 30 08:54:27 2007
Return-Path: <java-user-return-30071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61361 invoked from network); 30 Aug 2007 08:54:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2007 08:54:25 -0000
Received: (qmail 18351 invoked by uid 500); 30 Aug 2007 08:54:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18314 invoked by uid 500); 30 Aug 2007 08:54:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18303 invoked by uid 99); 30 Aug 2007 08:54:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 01:54:14 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [82.146.123.134] (HELO villon.taktik.be) (82.146.123.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 08:54:10 +0000
Received: from localhost (localhost [127.0.0.1])
	by villon.taktik.be (Postfix) with ESMTP id 42A0830A5784
	for <java-user@lucene.apache.org>; Thu, 30 Aug 2007 10:57:19 +0200 (CEST)
Received: from villon.taktik.be ([127.0.0.1])
 by localhost (villon.taktik.be [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 24232-08 for <java-user@lucene.apache.org>;
 Thu, 30 Aug 2007 10:57:14 +0200 (CEST)
Received: from [192.168.63.11] (unknown [192.168.63.11])
	by villon.taktik.be (Postfix) with ESMTP id F127230A5754
	for <java-user@lucene.apache.org>; Thu, 30 Aug 2007 10:57:13 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <46D63BA3.5010703@gmail.com>
References: <8BE7B818-F9B1-4483-BCA9-679133D9F422@taktik.be> <6e3ae6310708291433j7dcab292ud724e142ce435eef@mail.gmail.com> <46D63BA3.5010703@gmail.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-1--296575904
Message-Id: <0F2A35F0-926D-4185-B57A-E0FA86A00749@taktik.be>
From: Antoine Baudoux <ab@taktik.be>
Subject: Re: How to speed-up index opening
Date: Thu, 30 Aug 2007 10:53:41 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Scanned: by amavisd-new at taktik.be
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-1--296575904
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=ISO-8859-1;
	delsp=yes;
	format=flowed



Le 30 Aug 2007 =E0 05:38, Michael Busch a =E9crit :

> Chris Lu wrote:
>> Hi, Antoine,
>>
>> It does take a long time to open the index reader.
>> One thing you could do is to put new documents into one smaller =20
>> index and
>> re-open it, it should be much faster.
>>
>
> We're planning to add a reopen() method to IndexReader that should
> significantly speed up reopening a reader:
> http://issues.apache.org/jira/browse/LUCENE-743.
>
> This feature should be part of the next Lucene release.
>
> - Michael


That's some good news!

Any idea on the release date for 2.3?=

--Apple-Mail-1--296575904--

From java-user-return-30072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 30 09:14:07 2007
Return-Path: <java-user-return-30072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72483 invoked from network); 30 Aug 2007 09:14:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2007 09:14:03 -0000
Received: (qmail 46421 invoked by uid 500); 30 Aug 2007 09:13:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46373 invoked by uid 500); 30 Aug 2007 09:13:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46362 invoked by uid 99); 30 Aug 2007 09:13:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 02:13:52 -0700
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (athena.apache.org: transitioning domain of madhu@sraindia.com does not designate 61.16.170.178 as permitted sender)
Received: from [61.16.170.178] (HELO pdc.sraindia.com) (61.16.170.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 09:13:48 +0000
Received: from srai10 (srai10.sraindia.com [192.168.5.247])
	by pdc.sraindia.com (8.12.10/8.12.10) with SMTP id l7U9CPmE016688
	for <java-user@lucene.apache.org>; Thu, 30 Aug 2007 14:42:31 +0530
Message-ID: <000a01c7eae7$949a65c0$f705a8c0@srai10>
From: "Madhu" <madhu@sraindia.com>
To: <java-user@lucene.apache.org>
References: <8BE7B818-F9B1-4483-BCA9-679133D9F422@taktik.be> <6e3ae6310708291433j7dcab292ud724e142ce435eef@mail.gmail.com> <46D63BA3.5010703@gmail.com> <0F2A35F0-926D-4185-B57A-E0FA86A00749@taktik.be>
Subject: Lucene indexing
Date: Thu, 30 Aug 2007 14:54:34 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ISO-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1807
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1807
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all..

I am trying to index 5Mb excel file ,but while indexing using poi 3..Its
giving me out of memory exception.

Can any one knows how to index large size excle files files.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 30 09:55:43 2007
Return-Path: <java-user-return-30073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86271 invoked from network); 30 Aug 2007 09:55:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2007 09:55:41 -0000
Received: (qmail 7972 invoked by uid 500); 30 Aug 2007 09:55:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7934 invoked by uid 500); 30 Aug 2007 09:55:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7923 invoked by uid 99); 30 Aug 2007 09:55:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 02:55:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 09:56:26 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id B66B530EFC19; Thu, 30 Aug 2007 03:55:04 -0600 (MDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.5] (va-76-6-215-202.dhcp.embarqhsd.net [76.6.215.202])
	by ehatchersolutions.com (Postfix) with ESMTP id 2355E30EFC19
	for <java-user@lucene.apache.org>; Thu, 30 Aug 2007 03:55:01 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <085101c7eaae$26582b30$0301a8c0@aroushlt>
References: <085101c7eaae$26582b30$0301a8c0@aroushlt>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E62A9DD3-343C-4772-AE55-F1B275B9E469@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Can a Lucene field be renamed in a Lucene index?
Date: Thu, 30 Aug 2007 05:54:58 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.6 required=5.0 tests=BAYES_00,RCVD_IN_SORBS_DUL 
	autolearn=no version=3.1.1


On Aug 29, 2007, at 10:33 PM, George Aroush wrote:
> Just read the thread.  Unfortunately, it doesn't offer a solution.

As I read it offered a number of solutions:

   * Twiddle the *.fnm files (carefully)

   * Use string substitution on the users query, so "foo:whatever" ->  
"bar:whatever" under the covers

   * Wrap IndexReader


> Is it possible to write a tool that will read the source index, and  
> write it
> to an output index with the field renamed?  No, the raw-text is not  
> stored
> in the Lucene index.

Effectively that process would only be changing the *.fnm files as  
mentioned in that thread.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 30 10:07:13 2007
Return-Path: <java-user-return-30074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88975 invoked from network); 30 Aug 2007 10:07:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2007 10:07:12 -0000
Received: (qmail 23739 invoked by uid 500); 30 Aug 2007 10:07:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23636 invoked by uid 500); 30 Aug 2007 10:07:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23609 invoked by uid 99); 30 Aug 2007 10:07:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 03:07:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prabin.meitei@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 10:06:56 +0000
Received: by nf-out-0910.google.com with SMTP id g16so396267nfd
        for <java-user@lucene.apache.org>; Thu, 30 Aug 2007 03:06:34 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=Q6ZNj2kZM7Qt/fm78Tam6p556p8s1TBhBHiyIEDHeUrtYLXub/8oMKlP9tz2ufYUFc0rfqEe7EA2LRa1XGhWBnSZ4dJv2PJgQlEOUrVbUVcJJiy+6KYr0Rn143U73Vn2F29QZKgBJbMrHyXAGuYIzK+6AxMrxZnhgue+NaOhqAA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=BjlQA4xX6uvcQeRYOyZVuKWCtKlU4xmMHqsXN8njrrxDCxWoRfw4iq0qnUNAOIay44i5xSfjHfcffEixGVSxtsfKK+3VT6WmgDr2qpJ8de3oB66Zpdz09lqXlV7ouEUiw37DDYYtFc1+ZdtMsW8A2Xrvxi6AziOBSHpX5lkZMmc=
Received: by 10.78.136.9 with SMTP id j9mr142925hud.1188468393668;
        Thu, 30 Aug 2007 03:06:33 -0700 (PDT)
Received: by 10.78.183.17 with HTTP; Thu, 30 Aug 2007 03:06:33 -0700 (PDT)
Message-ID: <295da8fe0708300306l34362e98p9090e794913ec5a2@mail.gmail.com>
Date: Thu, 30 Aug 2007 15:36:33 +0530
From: "prabin meitei" <prabin.meitei@gmail.com>
To: java-user@lucene.apache.org
Subject: unable to search from a string containing numbers seperated by comma.
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3696_9895340.1188468393650"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3696_9895340.1188468393650
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
  I am trying to search from an idlist (string containing comma seperated
numeric values)

eg:
QueryParser vParser = new QueryParser("idlist", new AlphanumAnalyzer()); //
analyzer using custom lettertokenizer which tokenize nuber also. class is
given below.
Query q = vParser.parse("55"); // example

now even if the field idlist contains say (44, 55, 66)
my search returns 0 hit. is there any alternative solution or is there some
problem with wat i am using.

Thanks in advance.

public class AlphanumericTokenizer extends LetterTokenizer {
  public AlphanumericTokenizer(Reader reader) {
    super(reader);
  }

  protected boolean isTokenChar(char c) {
    return super.isTokenChar(c) || Character.isDigit(c);
  }
}

------=_Part_3696_9895340.1188468393650--

From java-user-return-30075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 30 11:30:50 2007
Return-Path: <java-user-return-30075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16714 invoked from network); 30 Aug 2007 11:30:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2007 11:30:49 -0000
Received: (qmail 24838 invoked by uid 500); 30 Aug 2007 11:30:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24800 invoked by uid 500); 30 Aug 2007 11:30:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24788 invoked by uid 99); 30 Aug 2007 11:30:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 04:30:38 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 80.76.149.213 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.213] (HELO ch-smtp02.sth.basefarm.net) (80.76.149.213)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 11:31:33 +0000
Received: from c83-249-118-113.bredband.comhem.se ([83.249.118.113]:57509 helo=[192.168.2.101])
	by ch-smtp02.sth.basefarm.net with esmtp (Exim 4.66)
	(envelope-from <karl.wettin@gmail.com>)
	id 1IQiE0-0002Fu-7u
	for java-user@lucene.apache.org; Thu, 30 Aug 2007 13:30:12 +0200
In-Reply-To: <000a01c7eae7$949a65c0$f705a8c0@srai10>
References: <8BE7B818-F9B1-4483-BCA9-679133D9F422@taktik.be> <6e3ae6310708291433j7dcab292ud724e142ce435eef@mail.gmail.com> <46D63BA3.5010703@gmail.com> <0F2A35F0-926D-4185-B57A-E0FA86A00749@taktik.be> <000a01c7eae7$949a65c0$f705a8c0@srai10>
Mime-Version: 1.0 (Apple Message framework v752.3)
X-Priority: 3
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <26DD0E5D-2E8C-45E7-95E7-B990C1F490C4@gmail.com>
Content-Transfer-Encoding: 7bit
From: Karl Wettin <karl.wettin@gmail.com>
Subject: Re: Lucene indexing
Date: Thu, 30 Aug 2007 13:24:21 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Originating-IP: 83.249.118.113
X-Scan-Result: No virus found in message 1IQiE0-0002Fu-7u.
X-Scan-Signature: ch-smtp02.sth.basefarm.net 1IQiE0-0002Fu-7u 636aa54da2dede3df562bcdd9662d0b3
X-Virus-Checked: Checked by ClamAV on apache.org


30 aug 2007 kl. 11.24 skrev Madhu:

> Hi all..
>
> I am trying to index 5Mb excel file ,but while indexing using poi  
> 3..Its
> giving me out of memory exception.
>
> Can any one knows how to index large size excle files files.

Increase the maximum VM heap size?

http://blogs.sun.com/watt/resource/jvm-options-list.html


-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 30 12:43:26 2007
Return-Path: <java-user-return-30076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45556 invoked from network); 30 Aug 2007 12:43:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2007 12:43:26 -0000
Received: (qmail 35494 invoked by uid 500); 30 Aug 2007 12:43:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35385 invoked by uid 500); 30 Aug 2007 12:43:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35374 invoked by uid 99); 30 Aug 2007 12:43:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 05:43:14 -0700
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of madhu@sraindia.com does not designate 61.16.170.178 as permitted sender)
Received: from [61.16.170.178] (HELO pdc.sraindia.com) (61.16.170.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 12:44:10 +0000
Received: from srai10 (srai10.sraindia.com [192.168.5.247])
	by pdc.sraindia.com (8.12.10/8.12.10) with SMTP id l7UCfpmE024235
	for <java-user@lucene.apache.org>; Thu, 30 Aug 2007 18:11:58 +0530
Message-ID: <001901c7eb04$d738aa00$f705a8c0@srai10>
From: "Madhu" <madhu@sraindia.com>
To: <java-user@lucene.apache.org>
References: <8BE7B818-F9B1-4483-BCA9-679133D9F422@taktik.be> <6e3ae6310708291433j7dcab292ud724e142ce435eef@mail.gmail.com> <46D63BA3.5010703@gmail.com> <0F2A35F0-926D-4185-B57A-E0FA86A00749@taktik.be> <000a01c7eae7$949a65c0$f705a8c0@srai10> <26DD0E5D-2E8C-45E7-95E7-B990C1F490C4@gmail.com>
Subject: Lucene indexing for pdf files
Date: Thu, 30 Aug 2007 18:24:01 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1807
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1807
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all...

i am indexing pdf document using pdfbox 7.4, its working fine for some pdf
files. for japanese pdf files its giving the below exception.

caught a class java.io.IOException
 with message: Unknown encoding for 'UniJIS-UCS2-H'

Can any one help me , how to set the encoding while reading pdf files.

Regards,
Madhu



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 30 14:56:07 2007
Return-Path: <java-user-return-30077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97140 invoked from network); 30 Aug 2007 14:56:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2007 14:56:06 -0000
Received: (qmail 17319 invoked by uid 500); 30 Aug 2007 14:55:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17285 invoked by uid 500); 30 Aug 2007 14:55:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17272 invoked by uid 99); 30 Aug 2007 14:55:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 07:55:55 -0700
X-ASF-Spam-Status: No, hits=3.3 required=10.0
	tests=HTML_MESSAGE,PLING_QUERY,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 209.85.198.191 as permitted sender)
Received: from [209.85.198.191] (HELO rv-out-0910.google.com) (209.85.198.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 14:55:47 +0000
Received: by rv-out-0910.google.com with SMTP id k20so145123rvb
        for <java-user@lucene.apache.org>; Thu, 30 Aug 2007 07:55:27 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JwNHC9P70WL1m+xEMxb/vxhLfDlORM9hEDcg7+LTmsMiAykgGxCZMLbCiJbOj+Zfce22CP797/Z4mjrXpq2OhUp8T/sva80RHrCTyoiZJ2hRsskNTx0x6bZxOOgQclKlsE81QqcXQYD1+DWaCmR+38NRE8Dqxru8+bbSfJNWNDk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=eNLNWL0P+dIaTKy5ZVPGHlDHdTM8byhTyhvR3vLMIMJPkjh+4f2zq/7v1D24qU3uaMWdPewTk+Wmi6+bSQveuAhiZrOg5UAUj7kC0JPUT69GFdonxrrpLTTXXB6tGS9eGWYJPuth+Ktocsm7Jff6xYlxf6KCEbDBx5rf+4DsUfA=
Received: by 10.114.111.1 with SMTP id j1mr2427wac.1188485723468;
        Thu, 30 Aug 2007 07:55:23 -0700 (PDT)
Received: by 10.115.94.16 with HTTP; Thu, 30 Aug 2007 07:55:23 -0700 (PDT)
Message-ID: <e994873a0708300755g77ed3991o7583e02467ee52c6@mail.gmail.com>
Date: Thu, 30 Aug 2007 10:55:23 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Scoring results?!
In-Reply-To: <B4C1AE93-A783-4E02-9401-759867DE2075@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5596_23429999.1188485723377"
References: <9989930.post@talk.nabble.com>
	 <C2015614-FD5A-4C22-B2E5-9DE1D247DF06@gmail.com>
	 <dac893430704140555n726f91fcy4b65b5d4da829f7c@mail.gmail.com>
	 <10389201.post@talk.nabble.com>
	 <B4C1AE93-A783-4E02-9401-759867DE2075@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5596_23429999.1188485723377
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

If I use BoostingTermQuery on a query containing terms without payloads, I
get very different results than doing the same query with TermQuery.
Presumably, this is because the BoostingSpanScorer/SpanScorer compute scores
differently than TermScorer. Is there a way to make BoostingTermQuery behave
like TermQuery for terms without payloads?

Peter


On 5/9/07, Grant Ingersoll <gsingers@apache.org> wrote:
>
> Hi Eric,
>
> On May 9, 2007, at 2:39 AM, supereric wrote:
>
> >
> > How I can get the tag word score in lucene. suppose that you have
> > searched a
> > tag word and 3 hit documents
> > are now found.
> > 1 -How someone could find number of occurrences in any document so
> > it could
> > sort the results.
>
> Span Queries tell you where the matches occur in the document by
> offset, but I am not sure what your sorting criteria would be.  The
> explain method also can give you information about why a particular
> document scored a particular way.
>
>
> > Also I wan to have some other policies for ranking the results.
> > What should
> > I do to handle that. for example
> > I want to score boldfaced tag words in an html document twice
> > normal texts.
>
> Although totally experimental at this stage, the new Payload stuff in
> the trunk version of Lucene (or nightly builds) is designed for such
> a scenario.  Check out the BoostingTermQuery which can boost term
> scores based on the contents of a payload located at a particular
> term.  Feedback on the APIs is very much appreciated.
>
> > 2- How I can omit some tag words from the index?! for example
> > common words
> > in another language?
>
> See the StopFilter token filter and/or the StopwordAnalyzer
>
>
> >
> >
>
> HTH,
> Grant
>
> --------------------------
> Grant Ingersoll
> Center for Natural Language Processing
> http://www.cnlp.org/tech/lucene.asp
>
> Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/
> LuceneFAQ
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5596_23429999.1188485723377--

From java-user-return-30078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 30 19:19:31 2007
Return-Path: <java-user-return-30078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48406 invoked from network); 30 Aug 2007 19:19:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2007 19:19:29 -0000
Received: (qmail 83762 invoked by uid 500); 30 Aug 2007 19:19:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83039 invoked by uid 500); 30 Aug 2007 19:19:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83014 invoked by uid 99); 30 Aug 2007 19:19:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 12:19:14 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=MISSING_MID,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [194.217.242.88] (HELO anchor-post-30.mail.demon.net) (194.217.242.88)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 19:20:08 +0000
Received: from rselvaraj.demon.co.uk ([83.104.137.62] helo=Taurus)
	by anchor-post-30.mail.demon.net with esmtp (Exim 4.67)
	id 1IQpXR-0006qn-2H; Thu, 30 Aug 2007 19:18:46 +0000
Reply-To: <lucene@searchblox.com>
From: "Robert Selvaraj" <lucene@searchblox.com>
To: <java-user@lucene.apache.org>,
	<java-dev@lucene.apache.org>
Subject: SearchBlox Version 4.1 with Search Result Clustering released
Date: Thu, 30 Aug 2007 20:18:40 +0100
Organization: SearchBlox Software, Inc.
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
thread-index: AcfrOpKpi0lue61lSKGDbG5KoFuuow==
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20070830192017.EC53E4DA070@nike.apache.org>


SearchBlox uses the Lucene Search API and delivers out-of-the-box search
functionality for rapid deployment and easy administration. SearchBlox
provides integrated HTTP/HTTPS, File System and Feed crawlers, support for
various document formats including HTML, Word, PDF, PowerPoint and Excel,
support for indexing and searching content in 37 languages and customizable
search results, all controlled from a browser-based Admin Console. 

SearchBlox also provides a REST-API for integration with custom search
applications.

New features in Version 4.1: 
=============================
- Search results clustering using the Carrot2 clustering framework
- Browser-based editor for customizing the look & feel of search results
- Performance optimizations for use in vertical search applications

SearchBlox is 100% Java and is available as a Web Archive (WAR) for
deployment in all major J2EE Application Servers.  It is also available as
standalone servers for Windows, Linux/Unix and Mac OS X platforms. 

The SearchBlox FREE Edition is available free of charge and can index up to
1000 documents. 

The software can be downloaded from http://www.searchblox.com





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 30 19:41:40 2007
Return-Path: <java-user-return-30079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62441 invoked from network); 30 Aug 2007 19:41:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2007 19:41:38 -0000
Received: (qmail 28991 invoked by uid 500); 30 Aug 2007 19:41:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28958 invoked by uid 500); 30 Aug 2007 19:41:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28889 invoked by uid 99); 30 Aug 2007 19:41:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 12:41:18 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 209.85.146.180 as permitted sender)
Received: from [209.85.146.180] (HELO wa-out-1112.google.com) (209.85.146.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 19:41:14 +0000
Received: by wa-out-1112.google.com with SMTP id j40so755595wah
        for <java-user@lucene.apache.org>; Thu, 30 Aug 2007 12:40:54 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        b=UiMeE8WKGdHKBV7+w8DWanYX4EW6eQ2EXTd5taafK8Lw+kO5SfcHSBNF59X/zjvAGWHMJJqEyWiJkYJ1Ym2P+Sm8S9fgtMC8kz3X6M7KEHuD9SAGmwoQe/KHdTXvmx1efDipfjcXCmvhfH6uf4E9em3YIKDCwmykYWIYKHJhwhw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=uGHG7czQhBt5aG1eKVzsIZIjmI3dfaBlyQ0GMyBg0C6uKaiGUMUmQ7mCvlsz3VZTPv2N40QO4TM2rfjJt0wWXPkEn5Pu0Z9BKB6K6PUwXoQRCmjwRpO1XU0Q3MURxL+kMof88GkoKAHNMXq6ekP10GrkrBnYgOQYK8nUbFQj/rU=
Received: by 10.114.155.1 with SMTP id c1mr110517wae.1188502853958;
        Thu, 30 Aug 2007 12:40:53 -0700 (PDT)
Received: by 10.115.94.16 with HTTP; Thu, 30 Aug 2007 12:40:53 -0700 (PDT)
Message-ID: <e994873a0708301240u65b5fc2fm1d3c1b117002c62@mail.gmail.com>
Date: Thu, 30 Aug 2007 15:40:53 -0400
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user <java-user@lucene.apache.org>
Subject: BoostingTermQuery.explain() bugs
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6976_26744204.1188502853928"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6976_26744204.1188502853928
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

There are a couple of minor bugs in BoostingTermQuery.explain().

1. The computation of average payload score produces NaN if no payloads were
found. It should probably be:
float avgPayloadScore = super.score() * (payloadsSeen > 0 ? (payloadScore /
payloadsSeen) : 1);

2. If the average payload score is zero, the value of the explanation is 0:
result.setValue(nonPayloadExpl.getValue() * avgPayloadScore);
If the query is part of a BooleanClause, this results in:
"no match on required clause..."
"failure to meet condition(s) of required/prohibited clause(s)"

Let me know if I should open a JIRA issue.

Peter

------=_Part_6976_26744204.1188502853928--

From java-user-return-30080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 30 19:52:56 2007
Return-Path: <java-user-return-30080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65610 invoked from network); 30 Aug 2007 19:52:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2007 19:52:56 -0000
Received: (qmail 47817 invoked by uid 500); 30 Aug 2007 19:52:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47785 invoked by uid 500); 30 Aug 2007 19:52:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47774 invoked by uid 99); 30 Aug 2007 19:52:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 12:52:45 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 80.76.149.212 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.212] (HELO ch-smtp01.sth.basefarm.net) (80.76.149.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 19:52:40 +0000
Received: from c83-249-118-113.bredband.comhem.se ([83.249.118.113]:60347 helo=[192.168.2.101])
	by ch-smtp01.sth.basefarm.net with esmtp (Exim 4.66)
	(envelope-from <karl.wettin@gmail.com>)
	id 1IQq3t-00029u-5q
	for java-user@lucene.apache.org; Thu, 30 Aug 2007 21:52:18 +0200
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <1187613226.27279.1206273727@webmail.messagingengine.com>
References: <10E30051-CF4A-4F72-98BA-375487059F60@gmail.com> <1187613226.27279.1206273727@webmail.messagingengine.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <5ECBAD93-FCC4-475C-B0E9-CE97E165FB20@gmail.com>
Content-Transfer-Encoding: 7bit
From: Karl Wettin <karl.wettin@gmail.com>
Subject: Re: Lockless read-only deletions in IndexReader?
Date: Thu, 30 Aug 2007 21:46:30 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Originating-IP: 83.249.118.113
X-Scan-Result: No virus found in message 1IQq3t-00029u-5q.
X-Scan-Signature: ch-smtp01.sth.basefarm.net 1IQq3t-00029u-5q fdef40f69d5e7d4922f7d013e890b7c9
X-Virus-Checked: Checked by ClamAV on apache.org


20 aug 2007 kl. 14.33 skrev Michael McCandless:

> "karl wettin" <karl.wettin@gmail.com> wrote:
>
>> I want to set documents in my IndexReader as deleted, but I will
>> never commit these deletions. Sort of a filter on a reader rather
>> than on a searcher, and no write-locks.
>

>> I could go hacking in IndexReader, definalizing it for decoration of
>> deleteDocument(int), or something like that, but would really
>> prefere not to.
>
> Yeah I think it may just be cleanest to modify IndexReader to not
> acquire the write lock nor commit its changes to the Directory on
> close.

How about something simple as this:

public class DeleteFilteredIndexReader extends FilterIndexReader {

   public DeleteFilteredIndexReader(IndexReader in) {
     super(in);
     filter = new BitSet(in.maxDoc());
   }

   private BitSet filter;

   public boolean isDeleted(int n) {
     return filter.get(n) || super.isDeleted(n);
   }

   public boolean hasDeletions() {
     return filter.nextSetBit(0) > -1 || super.hasDeletions();
   }


I did not look in the classpath code of BitSet yet, but I suppose
the nextSetBit(0) could be optimized.


-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 30 20:07:12 2007
Return-Path: <java-user-return-30081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69477 invoked from network); 30 Aug 2007 20:07:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2007 20:07:10 -0000
Received: (qmail 63482 invoked by uid 500); 30 Aug 2007 20:07:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63442 invoked by uid 500); 30 Aug 2007 20:07:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63427 invoked by uid 99); 30 Aug 2007 20:07:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 13:07:00 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a18.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 20:06:55 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a18.g.dreamhost.com (Postfix) with ESMTP id 3A81A5B52F
	for <java-user@lucene.apache.org>; Thu, 30 Aug 2007 13:06:36 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <e994873a0708301240u65b5fc2fm1d3c1b117002c62@mail.gmail.com>
References: <e994873a0708301240u65b5fc2fm1d3c1b117002c62@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <87B22FD2-0641-494C-8763-4315914D2B9B@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: BoostingTermQuery.explain() bugs
Date: Thu, 30 Aug 2007 16:06:30 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Aug 30, 2007, at 3:40 PM, Peter Keegan wrote:

> There are a couple of minor bugs in BoostingTermQuery.explain().
>
> 1. The computation of average payload score produces NaN if no  
> payloads were
> found. It should probably be:
> float avgPayloadScore = super.score() * (payloadsSeen > 0 ?  
> (payloadScore /
> payloadsSeen) : 1);
>
> 2. If the average payload score is zero, the value of the  
> explanation is 0:
> result.setValue(nonPayloadExpl.getValue() * avgPayloadScore);
> If the query is part of a BooleanClause, this results in:
> "no match on required clause..."
> "failure to meet condition(s) of required/prohibited clause(s)"
>
> Let me know if I should open a JIRA issue.
>

Yes.  JUnit would also be good, if you have it.





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 30 20:24:52 2007
Return-Path: <java-user-return-30082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73685 invoked from network); 30 Aug 2007 20:24:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2007 20:24:51 -0000
Received: (qmail 87608 invoked by uid 500); 30 Aug 2007 20:24:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87563 invoked by uid 500); 30 Aug 2007 20:24:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87552 invoked by uid 99); 30 Aug 2007 20:24:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 13:24:40 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a19.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 20:25:35 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a19.g.dreamhost.com (Postfix) with ESMTP id E188D11B7F
	for <java-user@lucene.apache.org>; Thu, 30 Aug 2007 13:24:12 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <295da8fe0708300306l34362e98p9090e794913ec5a2@mail.gmail.com>
References: <295da8fe0708300306l34362e98p9090e794913ec5a2@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <04E5B8CE-FB1A-4BB2-B635-486D9C5C62C7@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: unable to search from a string containing numbers seperated by comma.
Date: Thu, 30 Aug 2007 16:24:09 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Give these tips a try to see if they help:
http://wiki.apache.org/lucene-java/ 
LuceneFAQ#head-3558e5121806fb4fce80fc022d889484a9248b71

Luke is your friend.

Cheers,
Grant

On Aug 30, 2007, at 6:06 AM, prabin meitei wrote:

> Hi,
>   I am trying to search from an idlist (string containing comma  
> seperated
> numeric values)
>
> eg:
> QueryParser vParser = new QueryParser("idlist", new AlphanumAnalyzer 
> ()); //
> analyzer using custom lettertokenizer which tokenize nuber also.  
> class is
> given below.
> Query q = vParser.parse("55"); // example
>
> now even if the field idlist contains say (44, 55, 66)
> my search returns 0 hit. is there any alternative solution or is  
> there some
> problem with wat i am using.
>
> Thanks in advance.
>
> public class AlphanumericTokenizer extends LetterTokenizer {
>   public AlphanumericTokenizer(Reader reader) {
>     super(reader);
>   }
>
>   protected boolean isTokenChar(char c) {
>     return super.isTokenChar(c) || Character.isDigit(c);
>   }
> }

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 30 21:04:52 2007
Return-Path: <java-user-return-30083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82906 invoked from network); 30 Aug 2007 21:04:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2007 21:04:50 -0000
Received: (qmail 49713 invoked by uid 500); 30 Aug 2007 21:04:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49670 invoked by uid 500); 30 Aug 2007 21:04:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49659 invoked by uid 99); 30 Aug 2007 21:04:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 14:04:40 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of buschmic@gmail.com designates 64.233.184.230 as permitted sender)
Received: from [64.233.184.230] (HELO wr-out-0506.google.com) (64.233.184.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 21:04:35 +0000
Received: by wr-out-0506.google.com with SMTP id 41so407265wry
        for <java-user@lucene.apache.org>; Thu, 30 Aug 2007 14:04:15 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=spkpPpKaTJEexKqnHV33TisNF/VXUa5185cWuHFwSkb7bG3OPl4t81Q4zFCbelnS19jGqIjOG+3wxsx3SG0cYO1APyz+CNJKqDXzSebQPPhn2dnvam9eMF6GLGI4BjerCj4OKzrifPi6kEIwWMmbEqaBlXvX3lvfvaDLdmMM+eA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=GMlkgBusXxf6FUnYkF8MgYJYbMyetySWMDfS8R9Kqhh8QsR1eS1mHrvnkyP6/ElaSngktZW9yIUJA4/LXkKzkaFig/LJovYGMrqxQC8i/YJ2u4nvZRAS6GCEvjn3hzTIwjvqNEctaiavgGFfTpGYYznpx9cgeGzMn2AYE8yw1Ww=
Received: by 10.90.29.18 with SMTP id c18mr1244281agc.1188507854153;
        Thu, 30 Aug 2007 14:04:14 -0700 (PDT)
Received: from ?192.168.0.100? ( [24.80.67.88])
        by mx.google.com with ESMTPS id 61sm1209725wry.2007.08.30.14.04.11
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 30 Aug 2007 14:04:12 -0700 (PDT)
Message-ID: <46D73091.4010400@gmail.com>
Date: Thu, 30 Aug 2007 14:03:13 -0700
From: Michael Busch <buschmic@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: How to speed-up index opening
References: <8BE7B818-F9B1-4483-BCA9-679133D9F422@taktik.be> <6e3ae6310708291433j7dcab292ud724e142ce435eef@mail.gmail.com> <46D63BA3.5010703@gmail.com> <0F2A35F0-926D-4185-B57A-E0FA86A00749@taktik.be>
In-Reply-To: <0F2A35F0-926D-4185-B57A-E0FA86A00749@taktik.be>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Antoine Baudoux wrote:
> 
> 
> That's some good news!
> 
> Any idea on the release date for 2.3?

We're aiming for a release in early October. Keep your fingers crossed ;)

- Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 30 21:52:37 2007
Return-Path: <java-user-return-30084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 844 invoked from network); 30 Aug 2007 21:52:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2007 21:52:18 -0000
Received: (qmail 26804 invoked by uid 500); 30 Aug 2007 21:52:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26764 invoked by uid 500); 30 Aug 2007 21:52:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26753 invoked by uid 99); 30 Aug 2007 21:52:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 14:52:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 21:53:04 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 89FC071C05C; Thu, 30 Aug 2007 14:51:42 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 6210271C054;
	Thu, 30 Aug 2007 14:51:42 -0700 (PDT)
Date: Thu, 30 Aug 2007 14:51:42 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org, tien.nguyenmanh@gmail.com
Subject: Re: Reduce copy error
In-Reply-To: <8174d5d50708292101q7eddc4cckf8ee0b8998e57156@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0708301450130.30682@radix.cryptio.net>
References: <8174d5d50708292101q7eddc4cckf8ee0b8998e57156@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org


you should probably send this question to the nutch user mailing (or 
perhaps hte hadoop user mailing list) ... this is the mailing list for the 
Lucene java API that is used by nutch ... nothing in your stack trace 
seems to indicate any problems in any Lucene Java code.

> When i run nutch, i alway met this error in reduce task and is run
> very slow after this error.
> Do any one know how to solve this problem.
>
> Here is the log:
> java.io.IOException: Insufficient space
> 	at org.apache.hadoop.fs.InMemoryFileSystem$RawInMemoryFileSystem$InMemoryOutputStream.write(InMemoryFileSystem.java:174)
> 	at org.apache.hadoop.fs.FSDataOutputStream$PositionCache.write(FSDataOutputStream.java:39)
> 	at java.io.DataOutputStream.write(DataOutputStream.java:90)
> 	at java.io.FilterOutputStream.write(FilterOutputStream.java:80)
> 	at org.apache.hadoop.fs.ChecksumFileSystem$ChecksumFSOutputSummer.writeChunk(ChecksumFileSystem.java:326)
> 	at org.apache.hadoop.fs.FSOutputSummer.writeChecksumChunk(FSOutputSummer.java:140)
> 	at org.apache.hadoop.fs.FSOutputSummer.flushBuffer(FSOutputSummer.java:122)
> 	at org.apache.hadoop.fs.ChecksumFileSystem$ChecksumFSOutputSummer.close(ChecksumFileSystem.java:310)
> 	at org.apache.hadoop.fs.FSDataOutputStream$PositionCache.close(FSDataOutputStream.java:49)
> 	at org.apache.hadoop.fs.FSDataOutputStream.close(FSDataOutputStream.java:64)
> 	at org.apache.hadoop.mapred.MapOutputLocation.getFile(MapOutputLocation.java:253)
> 	at org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.copyOutput(ReduceTask.java:673)
> 	at org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.run(ReduceTask.java:631)
>

-Hoss

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Aug 30 22:06:03 2007
Return-Path: <java-user-return-30085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3881 invoked from network); 30 Aug 2007 22:06:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Aug 2007 22:06:01 -0000
Received: (qmail 37859 invoked by uid 500); 30 Aug 2007 22:05:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37755 invoked by uid 500); 30 Aug 2007 22:05:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37740 invoked by uid 99); 30 Aug 2007 22:05:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 15:05:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 22:05:44 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id D2EF371C090; Thu, 30 Aug 2007 15:05:23 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id C040471C089
	for <java-user@lucene.apache.org>; Thu, 30 Aug 2007 15:05:23 -0700 (PDT)
Date: Thu, 30 Aug 2007 15:05:23 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: BoostingTermQuery.explain() bugs
In-Reply-To: <87B22FD2-0641-494C-8763-4315914D2B9B@apache.org>
Message-ID: <Pine.LNX.4.62.0708301500490.30682@radix.cryptio.net>
References: <e994873a0708301240u65b5fc2fm1d3c1b117002c62@mail.gmail.com>
 <87B22FD2-0641-494C-8763-4315914D2B9B@apache.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org


> Yes.  JUnit would also be good, if you have it.

if you want to write some there is a lot of good helper code already out 
there for making sure the hits and scores produced by a query match the 
explanations produced by that same query...

chrish@asimov:~/svn/lucene-clean$ ls src/test/org/apache/lucene/search/*Explan*
src/test/org/apache/lucene/search/TestComplexExplanations.java
src/test/org/apache/lucene/search/TestComplexExplanationsOfNonMatches.java
src/test/org/apache/lucene/search/TestExplanations.java
src/test/org/apache/lucene/search/TestSimpleExplanations.java
src/test/org/apache/lucene/search/TestSimpleExplanationsOfNonMatches.java

you could add directly to TestSimpleExplanations and 
TestComplexExplanations assuming you modify the index 
TestExplanations.setUp to include some payload data ... then you get the 
testing of NonMatches for free.



-Hoss

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 31 02:55:53 2007
Return-Path: <java-user-return-30086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 100 invoked from network); 31 Aug 2007 02:55:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Aug 2007 02:55:51 -0000
Received: (qmail 34576 invoked by uid 500); 31 Aug 2007 02:55:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34149 invoked by uid 500); 31 Aug 2007 02:55:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34138 invoked by uid 99); 31 Aug 2007 02:55:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 19:55:41 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 80.76.149.213 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [80.76.149.213] (HELO ch-smtp02.sth.basefarm.net) (80.76.149.213)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 02:56:38 +0000
Received: from c83-249-118-113.bredband.comhem.se ([83.249.118.113]:62761 helo=[192.168.2.101])
	by ch-smtp02.sth.basefarm.net with esmtp (Exim 4.66)
	(envelope-from <karl.wettin@gmail.com>)
	id 1IQwfC-0004HB-9F
	for java-user@lucene.apache.org; Fri, 31 Aug 2007 04:55:15 +0200
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Transfer-Encoding: 7bit
Message-Id: <EA6CC53A-B6A0-4FD0-8635-0E544045BEE6@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Karl Wettin <karl.wettin@gmail.com>
Subject: IndexReader#docFreq(Term)
Date: Fri, 31 Aug 2007 04:49:27 +0200
X-Mailer: Apple Mail (2.752.3)
X-Originating-IP: 83.249.118.113
X-Scan-Result: No virus found in message 1IQwfC-0004HB-9F.
X-Scan-Signature: ch-smtp02.sth.basefarm.net 1IQwfC-0004HB-9F 0254293d3f440d1b2f6522694ce70858
X-Virus-Checked: Checked by ClamAV on apache.org

I was running in to some problems that turned out to be a non- 
documented feature. Here is a javadoc suggestion:

-  /** Returns the number of documents containing the term <code>t</ 
code>.
+  /** Returns the number of documents, including deleted, containing  
the term <code>t</code>.
    * @throws IOException if there is a low-level IO error
    */
   public abstract int docFreq(Term t) throws IOException;


I understand why, but wonder wether or not this feature is actually  
used by something, if I need to mimic the behaviour in LUCENE-550 in  
order to ensure compabillity?


-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 31 06:43:35 2007
Return-Path: <java-user-return-30087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56186 invoked from network); 31 Aug 2007 06:43:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Aug 2007 06:43:33 -0000
Received: (qmail 77634 invoked by uid 500); 31 Aug 2007 06:43:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77607 invoked by uid 500); 31 Aug 2007 06:43:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77596 invoked by uid 99); 31 Aug 2007 06:43:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 23:43:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 06:44:20 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id D978E71C016; Thu, 30 Aug 2007 23:42:57 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id CB87271C00A
	for <java-user@lucene.apache.org>; Thu, 30 Aug 2007 23:42:57 -0700 (PDT)
Date: Thu, 30 Aug 2007 23:42:57 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: IndexReader#docFreq(Term)
In-Reply-To: <EA6CC53A-B6A0-4FD0-8635-0E544045BEE6@gmail.com>
Message-ID: <Pine.LNX.4.62.0708302328230.3036@radix.cryptio.net>
References: <EA6CC53A-B6A0-4FD0-8635-0E544045BEE6@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org


> -  /** Returns the number of documents containing the term <code>t</code>.
> +  /** Returns the number of documents, including deleted, containing the 
> term <code>t</code>.

there is a note about this in the javadocs for deleteDocument, but i agree 
it's not entirely clear ...

unless i'm mistaken, docFreq isn't the only method affected by deleted 
docs, things like termDocs, termPositions, terms, ... pretty much all of 
hte IndexReader methods work that way (even getFieldNames could be 
missleading if the only doc with a field of that name has been deleted)

rather then putting a specifc note about it in in each method, it might 
make more sense to elaborate on this in the class level docs, and then 
note only the exceptions (document(int) is hte only one i can think of ... 
it throws an exception)

> I understand why, but wonder wether or not this feature is actually used by 
> something, if I need to mimic the behaviour in LUCENE-550 in order to ensure 
> compabillity?

I don't know if i'd consider it a "feature" ... i think of it more as an 
caveat that lucene makes in order be able to optimize some things ... i 
don't think it's neccessary that alternate impls mimic this behavior 
exactly.

-Hoss

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 31 06:44:13 2007
Return-Path: <java-user-return-30088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56278 invoked from network); 31 Aug 2007 06:44:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Aug 2007 06:44:12 -0000
Received: (qmail 79642 invoked by uid 500); 31 Aug 2007 06:44:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79232 invoked by uid 500); 31 Aug 2007 06:44:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79221 invoked by uid 99); 31 Aug 2007 06:44:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 23:44:01 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [206.125.223.73] (HELO mx03.mailboxcop.com) (206.125.223.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 06:44:57 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx03.mailboxcop.com (8.13.1/8.13.1) with ESMTP id l7V6hUiu017466
	for <java-user@lucene.apache.org>; Fri, 31 Aug 2007 01:43:32 -0500
Received: (qmail 23052 invoked by uid 0); 31 Aug 2007 01:43:30 -0500
Date: 31 Aug 2007 01:43:30 -0500
Message-ID: <20070831064330.23051.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: =?utf-8?Q?Re:_Re:_IndexReader#docFreq=28Term=29?=
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Bayes-Prob: 0.0001 (Score 0)
X-Spam-Score: 0.60 () [Hold at 6.00] NO_REAL_NAME,SUBJECT_EXCESS_QP
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: Bayes signature not available
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.5
X-Virus-Checked: Checked by ClamAV on apache.org

Tom Roberts is out of the office until 3rd September 2007 and will get back to you on his return.

http://www.luxonline.org.uk
http://www.lux.org.uk




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 31 06:44:55 2007
Return-Path: <java-user-return-30089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56379 invoked from network); 31 Aug 2007 06:44:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Aug 2007 06:44:54 -0000
Received: (qmail 81792 invoked by uid 500); 31 Aug 2007 06:44:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80829 invoked by uid 500); 31 Aug 2007 06:44:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80818 invoked by uid 99); 31 Aug 2007 06:44:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 23:44:44 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [206.125.223.72] (HELO mx02.mailboxcop.com) (206.125.223.72)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 06:44:38 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx02.mailboxcop.com (8.13.1/8.13.1) with ESMTP id l7V6i8mK026204
	for <java-user@lucene.apache.org>; Fri, 31 Aug 2007 01:44:09 -0500
Received: (qmail 23449 invoked by uid 0); 31 Aug 2007 01:44:08 -0500
Date: 31 Aug 2007 01:44:08 -0500
Message-ID: <20070831064408.23448.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: =?utf-8?Q?Re:_Re:_Re:_IndexReader#docFreq=28Term=29?=
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Bayes-Prob: 0.0001 (Score 0)
X-Spam-Score: 0.60 () [Hold at 6.00] NO_REAL_NAME,SUBJECT_EXCESS_QP
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: Bayes signature not available
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.4
X-Virus-Checked: Checked by ClamAV on apache.org

Tom Roberts is out of the office until 3rd September 2007 and will get back to you on his return.

http://www.luxonline.org.uk
http://www.lux.org.uk




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 31 06:51:40 2007
Return-Path: <java-user-return-30090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57431 invoked from network); 31 Aug 2007 06:51:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Aug 2007 06:51:39 -0000
Received: (qmail 86428 invoked by uid 500); 31 Aug 2007 06:51:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86380 invoked by uid 500); 31 Aug 2007 06:51:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86369 invoked by uid 99); 31 Aug 2007 06:51:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Aug 2007 23:51:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of buschmic@gmail.com designates 66.249.82.236 as permitted sender)
Received: from [66.249.82.236] (HELO wx-out-0506.google.com) (66.249.82.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 06:51:23 +0000
Received: by wx-out-0506.google.com with SMTP id i28so603580wxd
        for <java-user@lucene.apache.org>; Thu, 30 Aug 2007 23:51:02 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=qQbUUDjtWqvDvbaoEf2SPN3xLmMDgzEUJAwav2ajzt8SJss07LiSO37E77NnALIe1lYBWXgGw4B8E7Rc2cLg9xoCDSf7Kwo3+QCZwdRd5U2Ukf7ZLowjfRNCbFF+cwG/v6BK04lFtsmKDTyR5O/jN8gy//iLLxRJlz/Ct7Tt3CQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=j7zdt+FB8QBMwVVA892wF5JCY7e/9rDZVfDy7hXvfRor5caObgLofwWmmsc4K91xQOvzt4OekJHTChVt+2e8K7HlWQpr5dmrxpGPR7HpkaD6UbNm7jYZ2G8oLl7ZY4cMuIKVODDSKQs16+HAknjGLWPSb2sj2uN1FeXR7fRdUF8=
Received: by 10.90.95.11 with SMTP id s11mr1477729agb.1188543062720;
        Thu, 30 Aug 2007 23:51:02 -0700 (PDT)
Received: from ?192.168.0.100? ( [24.80.67.88])
        by mx.google.com with ESMTPS id 5sm1487671wrh.2007.08.30.23.51.01
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 30 Aug 2007 23:51:01 -0700 (PDT)
Message-ID: <46D7BA1B.70000@gmail.com>
Date: Thu, 30 Aug 2007 23:50:03 -0700
From: Michael Busch <buschmic@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: IndexReader#docFreq(Term)
References: <EA6CC53A-B6A0-4FD0-8635-0E544045BEE6@gmail.com> <Pine.LNX.4.62.0708302328230.3036@radix.cryptio.net>
In-Reply-To: <Pine.LNX.4.62.0708302328230.3036@radix.cryptio.net>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Chris Hostetter wrote:

> 
> unless i'm mistaken, docFreq isn't the only method affected by deleted
> docs, things like termDocs, termPositions, terms, ... pretty much all of
> hte IndexReader methods work that way (even getFieldNames could be
> missleading if the only doc with a field of that name has been deleted)
> 

TermDocs and TermPositions do take deleted docs into account.

The problem with TermEnum and docFreq is that a term doesn't get deleted
from the dictionary, even if its posting list only contains deleted
docs. To avoid this would be quite inefficient.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 31 07:29:09 2007
Return-Path: <java-user-return-30091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71450 invoked from network); 31 Aug 2007 07:29:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Aug 2007 07:29:08 -0000
Received: (qmail 13137 invoked by uid 500); 31 Aug 2007 07:28:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13098 invoked by uid 500); 31 Aug 2007 07:28:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13087 invoked by uid 99); 31 Aug 2007 07:28:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 00:28:58 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [82.146.123.134] (HELO villon.taktik.be) (82.146.123.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 07:29:56 +0000
Received: from localhost (localhost [127.0.0.1])
	by villon.taktik.be (Postfix) with ESMTP id B9C3930C581C
	for <java-user@lucene.apache.org>; Fri, 31 Aug 2007 09:32:07 +0200 (CEST)
Received: from villon.taktik.be ([127.0.0.1])
 by localhost (villon.taktik.be [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 12304-06 for <java-user@lucene.apache.org>;
 Fri, 31 Aug 2007 09:31:51 +0200 (CEST)
Received: from [192.168.63.11] (unknown [192.168.63.11])
	by villon.taktik.be (Postfix) with ESMTP id 434C930C57DF
	for <java-user@lucene.apache.org>; Fri, 31 Aug 2007 09:31:51 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <46D73091.4010400@gmail.com>
References: <8BE7B818-F9B1-4483-BCA9-679133D9F422@taktik.be> <6e3ae6310708291433j7dcab292ud724e142ce435eef@mail.gmail.com> <46D63BA3.5010703@gmail.com> <0F2A35F0-926D-4185-B57A-E0FA86A00749@taktik.be> <46D73091.4010400@gmail.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-1--215305873
Message-Id: <E5892242-199E-44B5-8F21-AE314AC80785@taktik.be>
From: Antoine Baudoux <ab@taktik.be>
Subject: Re: How to speed-up index opening
Date: Fri, 31 Aug 2007 09:28:11 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Scanned: by amavisd-new at taktik.be
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-1--215305873
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=ISO-8859-1;
	delsp=yes;
	format=flowed

	=46rom what I have seen in the patch, It re-opens the segments =
tha =20
have changed.

	So Imagine I always change the biggest sement (because that's =
where =20
most docs are and i need to update them frequently) . Will there =20
still be a benefit of IndexReader.reopen()?

--
Antoine Baudoux
Development Manager
ab@taktik.be
T=E9l.: +32 2 333 58 44
GSM: +32 499 534 538
Fax.: +32 2 648 16 53


Le 30 Aug 2007 =E0 23:03, Michael Busch a =E9crit :

> Antoine Baudoux wrote:
>>
>>
>> That's some good news!
>>
>> Any idea on the release date for 2.3?
>
> We're aiming for a release in early October. Keep your fingers =20
> crossed ;)
>
> - Michael
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--Apple-Mail-1--215305873--

From java-user-return-30092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 31 07:47:15 2007
Return-Path: <java-user-return-30092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75074 invoked from network); 31 Aug 2007 07:47:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Aug 2007 07:47:14 -0000
Received: (qmail 26541 invoked by uid 500); 31 Aug 2007 07:47:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26510 invoked by uid 500); 31 Aug 2007 07:47:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26499 invoked by uid 99); 31 Aug 2007 07:47:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 00:47:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of buschmic@gmail.com designates 66.249.82.230 as permitted sender)
Received: from [66.249.82.230] (HELO wx-out-0506.google.com) (66.249.82.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 07:47:00 +0000
Received: by wx-out-0506.google.com with SMTP id i28so610869wxd
        for <java-user@lucene.apache.org>; Fri, 31 Aug 2007 00:46:39 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=UKLHP5LBCQ1NKgEcPoF6IYDsjmqfXlxh7wuYSFTUPdrOEQd3xgUux7dAND/gmILWEk9fH3ZJydfUM1kv1u8XdXvTDvsGIe81DN2m/YZXqg2Q2ERyxeuwtEbfroTyQ7ToiytYL49i7A+ey3df3drEN9GMAdD77n6umD/UnuKBpCQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=dmASlkxnyxtGd9m+/gnAmNiaRGxCyvuKP1nl+w+qmYDaJGf0FWTcd+ZWOIYqfVBtrQhM1WyMWLEdDLUYgU12R7jaoXdxsR0gjtCBD/Y+xKg2vMH8zhljsqJUqbIRMzbjU+ThcosncX6d5KlOZ4ANGnGM4aPiC3zNhyiuRnGTHRA=
Received: by 10.70.28.9 with SMTP id b9mr2382385wxb.1188546399677;
        Fri, 31 Aug 2007 00:46:39 -0700 (PDT)
Received: from ?192.168.0.100? ( [24.80.67.88])
        by mx.google.com with ESMTPS id 29sm1861795wrl.2007.08.31.00.46.38
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 31 Aug 2007 00:46:38 -0700 (PDT)
Message-ID: <46D7C724.1070705@gmail.com>
Date: Fri, 31 Aug 2007 00:45:40 -0700
From: Michael Busch <buschmic@gmail.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: How to speed-up index opening
References: <8BE7B818-F9B1-4483-BCA9-679133D9F422@taktik.be> <6e3ae6310708291433j7dcab292ud724e142ce435eef@mail.gmail.com> <46D63BA3.5010703@gmail.com> <0F2A35F0-926D-4185-B57A-E0FA86A00749@taktik.be> <46D73091.4010400@gmail.com> <E5892242-199E-44B5-8F21-AE314AC80785@taktik.be>
In-Reply-To: <E5892242-199E-44B5-8F21-AE314AC80785@taktik.be>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Antoine Baudoux wrote:
>     From what I have seen in the patch, It re-opens the segments tha
> have changed.
> 
>     So Imagine I always change the biggest sement (because that's where
> most docs are and i need to update them frequently) . Will there still
> be a benefit of IndexReader.reopen()?
> 

Yes, because the patch also improves how segments that have changed are
loaded. If documents were deleted from a segment since it was
(re)opened, then IndexReader.reopen() will only load the deleted docs
file from the disk, and won't load the other data structures again, like
the dictionary, that haven't changed.

There are actually some performance numbers in LUCENE-743. The index
size in these experiments was 4.5M docs in a single segment. In a loop
random docs were deleted and the IndexReader was reopened afterwards.
Compared to closing/opening the reader, reopen() was ~47 times faster.

It's likely that the improvement will be a little smaller in the final
version of the patch due to some changes that I have to make, but it
should still be significant.

- Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 31 07:55:07 2007
Return-Path: <java-user-return-30093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78410 invoked from network); 31 Aug 2007 07:55:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Aug 2007 07:55:05 -0000
Received: (qmail 36206 invoked by uid 500); 31 Aug 2007 07:54:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36162 invoked by uid 500); 31 Aug 2007 07:54:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36133 invoked by uid 99); 31 Aug 2007 07:54:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 00:54:54 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [82.146.123.134] (HELO villon.taktik.be) (82.146.123.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 07:55:52 +0000
Received: from localhost (localhost [127.0.0.1])
	by villon.taktik.be (Postfix) with ESMTP id C772B30C6534
	for <java-user@lucene.apache.org>; Fri, 31 Aug 2007 09:58:05 +0200 (CEST)
Received: from villon.taktik.be ([127.0.0.1])
 by localhost (villon.taktik.be [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 12674-07 for <java-user@lucene.apache.org>;
 Fri, 31 Aug 2007 09:58:00 +0200 (CEST)
Received: from [192.168.63.11] (unknown [192.168.63.11])
	by villon.taktik.be (Postfix) with ESMTP id 1E14A30C64FD
	for <java-user@lucene.apache.org>; Fri, 31 Aug 2007 09:58:00 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <46D7C724.1070705@gmail.com>
References: <8BE7B818-F9B1-4483-BCA9-679133D9F422@taktik.be> <6e3ae6310708291433j7dcab292ud724e142ce435eef@mail.gmail.com> <46D63BA3.5010703@gmail.com> <0F2A35F0-926D-4185-B57A-E0FA86A00749@taktik.be> <46D73091.4010400@gmail.com> <E5892242-199E-44B5-8F21-AE314AC80785@taktik.be> <46D7C724.1070705@gmail.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-2--213736939
Message-Id: <23866FB8-6A47-467B-B7D9-053189F6CEDA@taktik.be>
From: Antoine Baudoux <ab@taktik.be>
Subject: Re: How to speed-up index opening
Date: Fri, 31 Aug 2007 09:54:20 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Scanned: by amavisd-new at taktik.be
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-2--213736939
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=ISO-8859-1;
	delsp=yes;
	format=flowed

	Great!

	Thanks !
--
Antoine Baudoux
Development Manager
ab@taktik.be
T=E9l.: +32 2 333 58 44
GSM: +32 499 534 538
Fax.: +32 2 648 16 53


Le 31 Aug 2007 =E0 09:45, Michael Busch a =E9crit :

> Antoine Baudoux wrote:
>>     =46rom what I have seen in the patch, It re-opens the segments =
tha
>> have changed.
>>
>>     So Imagine I always change the biggest sement (because that's =20
>> where
>> most docs are and i need to update them frequently) . Will there =20
>> still
>> be a benefit of IndexReader.reopen()?
>>
>
> Yes, because the patch also improves how segments that have changed =20=

> are
> loaded. If documents were deleted from a segment since it was
> (re)opened, then IndexReader.reopen() will only load the deleted docs
> file from the disk, and won't load the other data structures again, =20=

> like
> the dictionary, that haven't changed.
>
> There are actually some performance numbers in LUCENE-743. The index
> size in these experiments was 4.5M docs in a single segment. In a loop
> random docs were deleted and the IndexReader was reopened afterwards.
> Compared to closing/opening the reader, reopen() was ~47 times faster.
>
> It's likely that the improvement will be a little smaller in the final
> version of the patch due to some changes that I have to make, but it
> should still be significant.
>
> - Michael
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--Apple-Mail-2--213736939--

From java-user-return-30094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 31 14:17:38 2007
Return-Path: <java-user-return-30094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19884 invoked from network); 31 Aug 2007 14:17:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Aug 2007 14:17:36 -0000
Received: (qmail 74744 invoked by uid 500); 31 Aug 2007 14:17:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74542 invoked by uid 500); 31 Aug 2007 14:17:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74531 invoked by uid 99); 31 Aug 2007 14:17:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 07:17:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=MISSING_MID,RCVD_DOUBLE_IP_LOOSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.112.185.159] (HELO retfs.replior.se) (212.112.185.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 14:17:20 +0000
Received: from  [192.168.100.246] by [192.168.100.241]
       with TFS Secure Messaging Server; Fri, 31 Aug 2007 16:16:48 +0200
X-Spam-Level: 
Received: from Tirion ([212.105.84.105])
	(authenticated user per@implior.com)
	by mail.replior.se
	(using TLSv1/SSLv3 with cipher RC4-MD5 (128 bits))
	for java-user@lucene.apache.org;
	Fri, 31 Aug 2007 16:16:47 +0200
From: "Per Lindberg" <per@implior.com>
To: <java-user@lucene.apache.org>
Subject: OutOfMemoryError tokenizing a boring text file
Date: Fri, 31 Aug 2007 16:15:56 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Thread-Index: Acfr2XK3KQXhB/H9TYCQXxU0XSV0Wg==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=0.0 required=8.5
	tests=AWL: -0.295,BAYES_20: -0.73,TOTAL_SCORE: -1.025
Message-Id: <20070831141729.0BCBE72494C@athena.apache.org>

I'm creating a tokenized "content" Field from a plain text file
using an InputStreamReader and new Field("content", in);

The text file is large, 20 MB, and contains zillions lines,
each with the the same 100-character token.

That causes an OutOfMemoryError.

Given that all tokens are the *same*,
why should this cause an OutOfMemoryError?
Shouldn't StandardAnalyzer just chug along
and just note "ho hum, this token is the same"?
That shouldn't take too much memory.

Or have I missed something?




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 31 16:08:22 2007
Return-Path: <java-user-return-30095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26500 invoked from network); 31 Aug 2007 16:08:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Aug 2007 16:08:21 -0000
Received: (qmail 546 invoked by uid 500); 31 Aug 2007 16:08:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 501 invoked by uid 500); 31 Aug 2007 16:08:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 489 invoked by uid 99); 31 Aug 2007 16:08:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 09:08:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.67] (HELO mx5.syr.edu) (128.230.18.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 16:09:04 +0000
Received: from [128.230.84.100] (ist-h335-d03.syr.edu [128.230.84.100])
	by mx5.syr.edu (8.13.7/8.13.7) with ESMTP id l7VG7daa006369
	for <java-user@lucene.apache.org>; Fri, 31 Aug 2007 12:07:39 -0400
Message-ID: <46D83CB3.2080108@syr.edu>
Date: Fri, 31 Aug 2007 12:07:15 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Thunderbird 2.0.0.4-GroupWise-IMAP-fix (Windows/20070719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene indexing for pdf files
References: <8BE7B818-F9B1-4483-BCA9-679133D9F422@taktik.be> <6e3ae6310708291433j7dcab292ud724e142ce435eef@mail.gmail.com> <46D63BA3.5010703@gmail.com> <0F2A35F0-926D-4185-B57A-E0FA86A00749@taktik.be> <000a01c7eae7$949a65c0$f705a8c0@srai10> <26DD0E5D-2E8C-45E7-95E7-B990C1F490C4@gmail.com> <001901c7eb04$d738aa00$f705a8c0@srai10>
In-Reply-To: <001901c7eb04$d738aa00$f705a8c0@srai10>
X-Enigmail-Version: 0.95.2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Scanner: InterScan AntiVirus for Sendmail
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Madhu,

Madhu wrote:
> i am indexing pdf document using pdfbox 7.4, its working fine for some pdf
> files. for japanese pdf files its giving the below exception.
> 
> caught a class java.io.IOException
>  with message: Unknown encoding for 'UniJIS-UCS2-H'
> 
> Can any one help me , how to set the encoding while reading pdf files.

This question will get much better and quicker answers from PDFBox
mailing lists/forums.  The SF forums look much more active than the
mailing lists:

   http://sourceforge.net/forum/?group_id=78314

Steve

-- 
Steve Rowe
Center for Natural Language Processing
http://www.cnlp.org/tech/lucene.asp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 31 16:09:01 2007
Return-Path: <java-user-return-30096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26891 invoked from network); 31 Aug 2007 16:08:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Aug 2007 16:08:59 -0000
Received: (qmail 4766 invoked by uid 500); 31 Aug 2007 16:08:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4724 invoked by uid 500); 31 Aug 2007 16:08:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4713 invoked by uid 99); 31 Aug 2007 16:08:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 09:08:47 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.198.185] (HELO rv-out-0910.google.com) (209.85.198.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 16:08:44 +0000
Received: by rv-out-0910.google.com with SMTP id k20so381529rvb
        for <java-user@lucene.apache.org>; Fri, 31 Aug 2007 09:08:24 -0700 (PDT)
Received: by 10.140.250.14 with SMTP id x14mr772153rvh.1188576503803;
        Fri, 31 Aug 2007 09:08:23 -0700 (PDT)
Received: by 10.141.83.11 with HTTP; Fri, 31 Aug 2007 09:08:23 -0700 (PDT)
Message-ID: <59f8402a0708310908x6f128863i2646d72c26fdc068@mail.gmail.com>
Date: Fri, 31 Aug 2007 17:08:23 +0100
From: "Kalvir Sandhu" <kalv@kalv.co.uk>
To: java-user@lucene.apache.org
Subject: Weighting Issue
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2205_13592162.1188576503777"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2205_13592162.1188576503777
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all.

I am working on building a lucene index to search names of people. I want to
be able to score things differently. Here is an example of the behaviour i
need.

Doc 1 with aliases
name: Bob Jones
alias: John Smith Andrew Jones

Doc 2 without aliases
name: John Andrew Smith
alias: none

When i run a search with the lucene query:
name:(John Smith) alias:(John Smith)

I get Doc 2 as higher scored result than Doc 1. And the score of Doc 2 is
quite low. I need the score to not reflect how many names were assigned to
the document. I have been playing with the DefaultSimilarity to override
certain fields but not getting anywhere.

I could use a ConstantScoreQuery but i want to be able to perfom Fuzzy query
options sometimes too.

Any Ideas?

Kalv.

------=_Part_2205_13592162.1188576503777--

From java-user-return-30097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 31 16:49:40 2007
Return-Path: <java-user-return-30097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71924 invoked from network); 31 Aug 2007 16:49:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Aug 2007 16:49:39 -0000
Received: (qmail 83536 invoked by uid 500); 31 Aug 2007 16:49:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83361 invoked by uid 500); 31 Aug 2007 16:49:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83350 invoked by uid 99); 31 Aug 2007 16:49:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 09:49:27 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stopman@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 16:49:23 +0000
Received: by ug-out-1314.google.com with SMTP id a2so334201ugf
        for <java-user@lucene.apache.org>; Fri, 31 Aug 2007 09:49:01 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=O6TPMhgdgMZlrrUKRR9/2AbcI7wn4QNU7xUnzvmHE1m7BsCGro0QiERjBNvnMsEOGBmw9YXET+rgxVMo33m8KE5S8fjr5Or7cSuG3xp8atB1asoMwXKvQnmJVi/8blAv6DR4wAcVmyJ2xwPJwLT9s5IA7NRndfErbtG793UAE5o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=eCZDgLJwrKsdNUdJxTbIFirb1lUjSxpJ4Vuz/QsJ5bMy8v2llwzcRiWnzPzQepDM7SRWOvMsJLnCWUuO2EZPphS4RyWThplFquK8ioPynhBMYmpmhectQAiyQT8ZbB2iGj7ZE4itcXD+xHPst8oOOHEw7FnTkY07v17zQoZOGHI=
Received: by 10.142.253.21 with SMTP id a21mr84222wfi.1188578940052;
        Fri, 31 Aug 2007 09:49:00 -0700 (PDT)
Received: by 10.143.31.2 with HTTP; Fri, 31 Aug 2007 09:48:59 -0700 (PDT)
Message-ID: <652776090708310948x4ebc7358u15c192c4b8729f7f@mail.gmail.com>
Date: Fri, 31 Aug 2007 09:48:59 -0700
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Weighting Issue
In-Reply-To: <59f8402a0708310908x6f128863i2646d72c26fdc068@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11848_26950448.1188578939962"
References: <59f8402a0708310908x6f128863i2646d72c26fdc068@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11848_26950448.1188578939962
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Kalvir,

Have you tried giving the name field a boost?  E.g. name:(John Smith)^10
alias:(John Smith)

-M

On 8/31/07, Kalvir Sandhu <kalv@kalv.co.uk> wrote:
>
> Hi all.
>
> I am working on building a lucene index to search names of people. I want
> to
> be able to score things differently. Here is an example of the behaviour i
> need.
>
> Doc 1 with aliases
> name: Bob Jones
> alias: John Smith Andrew Jones
>
> Doc 2 without aliases
> name: John Andrew Smith
> alias: none
>
> When i run a search with the lucene query:
> name:(John Smith) alias:(John Smith)
>
> I get Doc 2 as higher scored result than Doc 1. And the score of Doc 2 is
> quite low. I need the score to not reflect how many names were assigned to
> the document. I have been playing with the DefaultSimilarity to override
> certain fields but not getting anywhere.
>
> I could use a ConstantScoreQuery but i want to be able to perfom Fuzzy
> query
> options sometimes too.
>
> Any Ideas?
>
> Kalv.
>

------=_Part_11848_26950448.1188578939962--

From java-user-return-30098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 31 17:40:57 2007
Return-Path: <java-user-return-30098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36233 invoked from network); 31 Aug 2007 17:40:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Aug 2007 17:40:56 -0000
Received: (qmail 72858 invoked by uid 500); 31 Aug 2007 17:40:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72823 invoked by uid 500); 31 Aug 2007 17:40:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72812 invoked by uid 99); 31 Aug 2007 17:40:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 10:40:45 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.128.188] (HELO fk-out-0910.google.com) (209.85.128.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 17:40:41 +0000
Received: by fk-out-0910.google.com with SMTP id z23so659904fkz
        for <java-user@lucene.apache.org>; Fri, 31 Aug 2007 10:40:17 -0700 (PDT)
Received: by 10.82.165.13 with SMTP id n13mr4156660bue.1188582016370;
        Fri, 31 Aug 2007 10:40:16 -0700 (PDT)
Received: by 10.82.116.6 with HTTP; Fri, 31 Aug 2007 10:40:16 -0700 (PDT)
Message-ID: <7cbc67ff0708311040y692df8c3i78b5e28302fde4fe@mail.gmail.com>
Date: Fri, 31 Aug 2007 23:10:16 +0530
From: "Harini Raghavan" <harini.raghavan@insideview.com>
To: java-user@lucene.apache.org
Subject: Query Analyzer Issue
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9989_3902325.1188582016296"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9989_3902325.1188582016296
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Everyone,

I am facing some strange behaviour with Analyzers. I am using SimpleAnalyzer
for some fields in my Compass entity, but I also wrote a custom Analyzer
that is slightly different from the SimpleAnalyzer as I wanted to allow even
letters and digits in company name column.
So custom analyzer CompanyNameAnalyzer uses the following tokenizer.

public class CompanyNameTokenizer extends CharTokenizer {
  /** Construct a new CompanyNameTokenizer. */
  public CompanyNameTokenizer(Reader in) {
    super(in);
  }

  protected char normalize(char c) {
    return Character.toLowerCase(c);
  }

  /** Collects only characters which are numbers or letters */
  protected boolean isTokenChar(char c) {
    Character ch = new Character(c);
    // Exclude @ special character while tokenizing
    if(Character.isLetterOrDigit(c) || ch.equals('@'))
        return true;
    else
        return false;
  }
}

But for some reason when I search for +companyName:good +companyName:will,
the word 'will' is ignored in the search, I get results that match only
good. I guess this means that 'will' is being stripped off as it is a stop
word. I don't understand why this should happen because the custom Analyzer
I am using does not use the StopFilter. So why should it filter the stop
words?

I tried looking at the Lucene source too, but no luck. Any suggestions would
be appreciated.

Thanks,
Harini

------=_Part_9989_3902325.1188582016296--

From java-user-return-30099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 31 18:23:33 2007
Return-Path: <java-user-return-30099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62684 invoked from network); 31 Aug 2007 18:23:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Aug 2007 18:23:21 -0000
Received: (qmail 35038 invoked by uid 500); 31 Aug 2007 18:23:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34823 invoked by uid 500); 31 Aug 2007 18:23:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34812 invoked by uid 99); 31 Aug 2007 18:23:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 11:23:10 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.198.190] (HELO rv-out-0910.google.com) (209.85.198.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 18:23:06 +0000
Received: by rv-out-0910.google.com with SMTP id k20so402836rvb
        for <java-user@lucene.apache.org>; Fri, 31 Aug 2007 11:22:45 -0700 (PDT)
Received: by 10.140.207.2 with SMTP id e2mr808630rvg.1188584564945;
        Fri, 31 Aug 2007 11:22:44 -0700 (PDT)
Received: by 10.141.83.11 with HTTP; Fri, 31 Aug 2007 11:22:44 -0700 (PDT)
Message-ID: <59f8402a0708311122q6cfb9796lf2fb243a5479e001@mail.gmail.com>
Date: Fri, 31 Aug 2007 19:22:44 +0100
From: "Kalvir Sandhu" <kalv@kalv.co.uk>
To: java-user@lucene.apache.org
Subject: Re: Weighting Issue
In-Reply-To: <652776090708310948x4ebc7358u15c192c4b8729f7f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2433_22684448.1188584564908"
References: <59f8402a0708310908x6f128863i2646d72c26fdc068@mail.gmail.com>
	 <652776090708310948x4ebc7358u15c192c4b8729f7f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2433_22684448.1188584564908
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks for the reply - i have tried boosting but not like you stated. I have
tried to boost the Alias field so that it would score as high as a match on
the name field. But it didn't increase enough. like :

name:(John Smith) alias:(John Smith)^10

I think it has something to do with the fact that there is a lot of terms
stored in that document for alias, therefore weighting lower.

On 8/31/07, Michael Stoppelman <stopman@gmail.com> wrote:
>
> Kalvir,
>
> Have you tried giving the name field a boost?  E.g. name:(John Smith)^10
> alias:(John Smith)
>
> -M
>
> On 8/31/07, Kalvir Sandhu <kalv@kalv.co.uk> wrote:
> >
> > Hi all.
> >
> > I am working on building a lucene index to search names of people. I
> want
> > to
> > be able to score things differently. Here is an example of the behaviour
> i
> > need.
> >
> > Doc 1 with aliases
> > name: Bob Jones
> > alias: John Smith Andrew Jones
> >
> > Doc 2 without aliases
> > name: John Andrew Smith
> > alias: none
> >
> > When i run a search with the lucene query:
> > name:(John Smith) alias:(John Smith)
> >
> > I get Doc 2 as higher scored result than Doc 1. And the score of Doc 2
> is
> > quite low. I need the score to not reflect how many names were assigned
> to
> > the document. I have been playing with the DefaultSimilarity to override
> > certain fields but not getting anywhere.
> >
> > I could use a ConstantScoreQuery but i want to be able to perfom Fuzzy
> > query
> > options sometimes too.
> >
> > Any Ideas?
> >
> > Kalv.
> >
>

------=_Part_2433_22684448.1188584564908--

From java-user-return-30100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 31 18:28:53 2007
Return-Path: <java-user-return-30100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65186 invoked from network); 31 Aug 2007 18:28:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Aug 2007 18:28:52 -0000
Received: (qmail 40537 invoked by uid 500); 31 Aug 2007 18:28:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40129 invoked by uid 500); 31 Aug 2007 18:28:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40118 invoked by uid 99); 31 Aug 2007 18:28:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 11:28:40 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 18:28:37 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 319D471C0B0; Fri, 31 Aug 2007 11:28:17 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 2C09E71C08C
	for <java-user@lucene.apache.org>; Fri, 31 Aug 2007 11:28:17 -0700 (PDT)
Date: Fri, 31 Aug 2007 11:28:17 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Weighting Issue
In-Reply-To: <652776090708310948x4ebc7358u15c192c4b8729f7f@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0708311127260.3482@radix.cryptio.net>
References: <59f8402a0708310908x6f128863i2646d72c26fdc068@mail.gmail.com>
 <652776090708310948x4ebc7358u15c192c4b8729f7f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org


> Have you tried giving the name field a boost?  E.g. name:(John Smith)^10
> alias:(John Smith)

i'm also guessing youd be much happier with a sloppy phrase query then 
with the boolean queries you are currently using..

    name:"John Smith"~3^10 alias:"John Smith"~3


-Hoss

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 31 19:07:18 2007
Return-Path: <java-user-return-30101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80090 invoked from network); 31 Aug 2007 19:07:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Aug 2007 19:07:17 -0000
Received: (qmail 88945 invoked by uid 500); 31 Aug 2007 19:07:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88892 invoked by uid 500); 31 Aug 2007 19:07:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88881 invoked by uid 99); 31 Aug 2007 19:07:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 12:07:05 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.198.186] (HELO rv-out-0910.google.com) (209.85.198.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 19:06:57 +0000
Received: by rv-out-0910.google.com with SMTP id k20so409931rvb
        for <java-user@lucene.apache.org>; Fri, 31 Aug 2007 12:06:36 -0700 (PDT)
Received: by 10.141.79.12 with SMTP id g12mr836293rvl.1188587195758;
        Fri, 31 Aug 2007 12:06:35 -0700 (PDT)
Received: by 10.141.83.11 with HTTP; Fri, 31 Aug 2007 12:06:35 -0700 (PDT)
Message-ID: <59f8402a0708311206m67813efs8b54a639ad7ff7e1@mail.gmail.com>
Date: Fri, 31 Aug 2007 20:06:35 +0100
From: "Kalvir Sandhu" <kalv@kalv.co.uk>
To: java-user@lucene.apache.org
Subject: Re: Query Analyzer Issue
In-Reply-To: <7cbc67ff0708311040y692df8c3i78b5e28302fde4fe@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2575_10703487.1188587195733"
References: <7cbc67ff0708311040y692df8c3i78b5e28302fde4fe@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2575_10703487.1188587195733
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You should test your Analyzer to confirm what tokens are being produced. You
can do this by using a helper class, to save time there is one written in
the Lucene in Action book called AnalyzerUtils, you should be able to get it
out of the download of sourcecode from the book here:
http://www.lucenebook.com/LuceneInAction.zip

It's very easy to use. You give it an analyzer and some text and out will
pop the tokens.

You can also use Luke:
http://www.getopt.org/luke/ - To diagnose your index. Very useful tool. You
can see what terms you have stored against what document.

On 8/31/07, Harini Raghavan <harini.raghavan@insideview.com> wrote:
>
> Hi Everyone,
>
> I am facing some strange behaviour with Analyzers. I am using
> SimpleAnalyzer
> for some fields in my Compass entity, but I also wrote a custom Analyzer
> that is slightly different from the SimpleAnalyzer as I wanted to allow
> even
> letters and digits in company name column.
> So custom analyzer CompanyNameAnalyzer uses the following tokenizer.
>
> public class CompanyNameTokenizer extends CharTokenizer {
>   /** Construct a new CompanyNameTokenizer. */
>   public CompanyNameTokenizer(Reader in) {
>     super(in);
>   }
>
>   protected char normalize(char c) {
>     return Character.toLowerCase(c);
>   }
>
>   /** Collects only characters which are numbers or letters */
>   protected boolean isTokenChar(char c) {
>     Character ch = new Character(c);
>     // Exclude @ special character while tokenizing
>     if(Character.isLetterOrDigit(c) || ch.equals('@'))
>         return true;
>     else
>         return false;
>   }
> }
>
> But for some reason when I search for +companyName:good +companyName:will,
> the word 'will' is ignored in the search, I get results that match only
> good. I guess this means that 'will' is being stripped off as it is a stop
> word. I don't understand why this should happen because the custom
> Analyzer
> I am using does not use the StopFilter. So why should it filter the stop
> words?
>
> I tried looking at the Lucene source too, but no luck. Any suggestions
> would
> be appreciated.
>
> Thanks,
> Harini
>

------=_Part_2575_10703487.1188587195733--

From java-user-return-30102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 31 19:07:59 2007
Return-Path: <java-user-return-30102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80443 invoked from network); 31 Aug 2007 19:07:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Aug 2007 19:07:58 -0000
Received: (qmail 91986 invoked by uid 500); 31 Aug 2007 19:07:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91767 invoked by uid 500); 31 Aug 2007 19:07:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91756 invoked by uid 99); 31 Aug 2007 19:07:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 12:07:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sand.chawla@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 19:07:43 +0000
Received: by wa-out-1112.google.com with SMTP id j40so1124044wah
        for <java-user@lucene.apache.org>; Fri, 31 Aug 2007 12:07:22 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=N2MVk9qjiexEUO2dWxZQ6ZwBlufDpyJhSmy/b222l7A+wLhgfNhXAFMwyFb88pVpQCjRObVuF26EuwTX5kUu0exmQfrvaFwbPM8YXRX710dtd5Hc7ftf5pBjcydB7IWqRVmQ/RYi6faewudTERAGfXK3P8WmJGWxhMnW3xC0Q0E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=gBTFE39IKnHArVQf7IQdHWUue7Q57Bh71P1S9qzO6np45ggfX8ORX4eqxbSk1MF2Jf6tL8hFKBPEUPhGATUIuCI4L6scehQzidaAhW+1fGYWceJwlQG6x/XHRWZh4uPFGRPqyFWWLdEv+4hB4lz6vTC2TLVbIsxf27XzN0gXsqE=
Received: by 10.114.67.2 with SMTP id p2mr1112136waa.1188587241760;
        Fri, 31 Aug 2007 12:07:21 -0700 (PDT)
Received: by 10.114.127.15 with HTTP; Fri, 31 Aug 2007 12:07:21 -0700 (PDT)
Message-ID: <a70e4c2b0708311207q745b77c0vc0e64bc86a914b6@mail.gmail.com>
Date: Sat, 1 Sep 2007 00:37:21 +0530
From: "sandeep chawla" <sand.chawla@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Query Analyzer Issue
In-Reply-To: <7cbc67ff0708311040y692df8c3i78b5e28302fde4fe@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <7cbc67ff0708311040y692df8c3i78b5e28302fde4fe@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Which analyzer are you using in your query parser ?

can you share the one line of code in which you construct a QueryParser Object.

As you might be  parsing  a  query string made of different fields, I
suggest you use a

PerFieldAnalyzerWrapper  which lets you do unique analysis for different fields.


~sandeep


On 31/08/2007, Harini Raghavan <harini.raghavan@insideview.com> wrote:
> Hi Everyone,
>
> I am facing some strange behaviour with Analyzers. I am using SimpleAnalyzer
> for some fields in my Compass entity, but I also wrote a custom Analyzer
> that is slightly different from the SimpleAnalyzer as I wanted to allow even
> letters and digits in company name column.
> So custom analyzer CompanyNameAnalyzer uses the following tokenizer.
>
> public class CompanyNameTokenizer extends CharTokenizer {
>   /** Construct a new CompanyNameTokenizer. */
>   public CompanyNameTokenizer(Reader in) {
>     super(in);
>   }
>
>   protected char normalize(char c) {
>     return Character.toLowerCase(c);
>   }
>
>   /** Collects only characters which are numbers or letters */
>   protected boolean isTokenChar(char c) {
>     Character ch = new Character(c);
>     // Exclude @ special character while tokenizing
>     if(Character.isLetterOrDigit(c) || ch.equals('@'))
>         return true;
>     else
>         return false;
>   }
> }
>
> But for some reason when I search for +companyName:good +companyName:will,
> the word 'will' is ignored in the search, I get results that match only
> good. I guess this means that 'will' is being stripped off as it is a stop
> word. I don't understand why this should happen because the custom Analyzer
> I am using does not use the StopFilter. So why should it filter the stop
> words?
>
> I tried looking at the Lucene source too, but no luck. Any suggestions would
> be appreciated.
>
> Thanks,
> Harini
>


-- 
SANDEEP CHAWLA
House No- 23                     			
10th main 					
BTM 1st  Stage     					
Bangalore						Mobile: 91-9986150603

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 31 20:15:21 2007
Return-Path: <java-user-return-30103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3872 invoked from network); 31 Aug 2007 20:15:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Aug 2007 20:15:19 -0000
Received: (qmail 75952 invoked by uid 500); 31 Aug 2007 20:15:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75918 invoked by uid 500); 31 Aug 2007 20:15:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75907 invoked by uid 99); 31 Aug 2007 20:15:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 13:15:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [216.154.214.159] (HELO botspiritcompany.com) (216.154.214.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 20:16:05 +0000
Received: from www.botspiritcompany.com (botspiritcompany.com [127.0.0.1])
	by botspiritcompany.com (8.13.1/8.13.1) with ESMTP id l7VKEc23012184;
	Fri, 31 Aug 2007 16:14:38 -0400
From: "bbrown" <bbrown@botspiritcompany.com>
To: java-user@lucene.apache.org
Cc: berlin.brown@gmail.com
Subject: Indexing in pieces?
Date: Fri, 31 Aug 2007 16:14:38 -0400
Message-Id: <20070831201144.M23585@www.botspiritcompany.com>
X-Mailer: Open WebMail 2.51 20050228
X-OriginatingIP: 12.163.2.10 (bbrown)
MIME-Version: 1.0
Content-Type: text/plain;
	charset=iso-8859-1
Received-SPF: pass (botspiritcompany.com: domain of bbrown@www.botspiritcompany.com designates 127.0.0.1 as permitted sender) receiver=botspiritcompany.com; client-ip=127.0.0.1; helo=www.botspiritcompany.com; envelope-from=bbrown@www.botspiritcompany.com; x-software=spfmilter 0.97 http://www.acme.com/software/spfmilter/ with libspf2-1.0.0;
X-Virus-Checked: Checked by ClamAV on apache.org

I have been fine with my database (discussion forum) to lucene.  I am taking 
the simplest approach, eg; I have a discussion forum which are just text 
messages, I take those out of the databse and then index the content.

I am having troubling because I have hundreds of thousands of messages and it 
takes a while, eating my server cpu.  I was thinking I would just index say a 
portion of the database.  For example, index records 1-100 and then 101-200.  
Can I just index to that index directory without deleting the existing index 
segment files that are already there?  Or is it more complicated than that.

--
Berlin Brown
[berlin dot brown at gmail dot com]
http://botspiritcompany.com/botlist/?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 31 21:31:34 2007
Return-Path: <java-user-return-30104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19973 invoked from network); 31 Aug 2007 21:31:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Aug 2007 21:31:32 -0000
Received: (qmail 53976 invoked by uid 500); 31 Aug 2007 21:31:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53365 invoked by uid 500); 31 Aug 2007 21:31:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53354 invoked by uid 99); 31 Aug 2007 21:31:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 14:31:21 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 21:31:14 +0000
Received: by nf-out-0910.google.com with SMTP id g16so801797nfd
        for <java-user@lucene.apache.org>; Fri, 31 Aug 2007 14:30:53 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sIApwn4Kq5vadsu/m8h/w/kWeqT5iVu1fGufs6cFzCA88bFX/dz30OfPvqTY5DUwwPztw/iVW5vtL0EzO/WDaqkDWvwilT+HEeW1xeNoRrW3cTBf5xeYZZTopetBBuee1SMLof8lUbfAdRCHPfOdLHZ29U9nKAeZhNjIsJ/YsiY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=PmxyQspuoWrdngVlMH2JGI440qpSb+sMPsJ5bZJSdDAW3U+wdSSExfaEcQhzK0U1on6aPR+dSrklcDjp7LJur2JKfLPGwMxV2RnLqe/G5t2UeBLUGZbIM997/wu+NTAW0qlrRTQRwqhNF1Mg37X0d1f9yBTV+7TPw8z1Ica8AeM=
Received: by 10.78.165.16 with SMTP id n16mr1701347hue.1188595852341;
        Fri, 31 Aug 2007 14:30:52 -0700 (PDT)
Received: by 10.78.140.12 with HTTP; Fri, 31 Aug 2007 14:30:52 -0700 (PDT)
Message-ID: <6e3ae6310708311430p4a5731c7x68f60c38bf38aaa7@mail.gmail.com>
Date: Fri, 31 Aug 2007 14:30:52 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing in pieces?
In-Reply-To: <20070831201144.M23585@www.botspiritcompany.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12172_20412299.1188595852267"
References: <20070831201144.M23585@www.botspiritcompany.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12172_20412299.1188595852267
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I think you can simply change you sql to select only the recently updated
messages, and add to your existing index. Although adding to an existing
large index also takes a long time, it should be quicker than re-building
the whole index.

If your index continues to grow, you may need to have a dedicated server for
indexing and searching.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes

On 8/31/07, bbrown <bbrown@botspiritcompany.com> wrote:
>
> I have been fine with my database (discussion forum) to lucene.  I am
> taking
> the simplest approach, eg; I have a discussion forum which are just text
> messages, I take those out of the databse and then index the content.
>
> I am having troubling because I have hundreds of thousands of messages and
> it
> takes a while, eating my server cpu.  I was thinking I would just index
> say a
> portion of the database.  For example, index records 1-100 and then
> 101-200.
> Can I just index to that index directory without deleting the existing
> index
> segment files that are already there?  Or is it more complicated than
> that.
>
> --
> Berlin Brown
> [berlin dot brown at gmail dot com]
> http://botspiritcompany.com/botlist/?
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_12172_20412299.1188595852267--

From java-user-return-30105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Aug 31 22:44:05 2007
Return-Path: <java-user-return-30105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42762 invoked from network); 31 Aug 2007 22:44:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Aug 2007 22:44:03 -0000
Received: (qmail 197 invoked by uid 500); 31 Aug 2007 22:43:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 161 invoked by uid 500); 31 Aug 2007 22:43:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 150 invoked by uid 99); 31 Aug 2007 22:43:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 15:43:52 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tcheng3@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 22:43:48 +0000
Received: by py-out-1112.google.com with SMTP id d32so3041885pye
        for <java-user@lucene.apache.org>; Fri, 31 Aug 2007 15:43:28 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=e0o6e5M6AKtdBg8I6N+2Xwgr/j2ksmkKCPi0mpOs8CJ0Y+ssI0LXtAFQbi2StBqCU8VUgyvHheq4GWix3ZEYv4SwSl4UiJBBwK+iOYssDcRicbE1nV/YZiFGnEs/4pWf5s47Ouq1ObOl1Fk+muG1nVxCjGxxgwZ/sB/d4cqNuXI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=rpQihywJgAt41GRNI15zpTz7CkgPoQKnpjJJKhjZh4lmp5o5mvHyAG5y89AITzs3G/gKLtUfPY+ZY/30jJPCYYW9chqaJoH+TjsLqOUrRS+7PWTxjVcfta+TJlv4lawvZpUDfc2z28T+qPYn0lpI+yXG+R1sc4kWEnTMewTCxcg=
Received: by 10.64.153.4 with SMTP id a4mr4345469qbe.1188600207234;
        Fri, 31 Aug 2007 15:43:27 -0700 (PDT)
Received: by 10.66.233.9 with HTTP; Fri, 31 Aug 2007 15:43:27 -0700 (PDT)
Message-ID: <5d91badf0708311543y2053032r1926e78c02a1beae@mail.gmail.com>
Date: Fri, 31 Aug 2007 17:43:27 -0500
From: "Tao Cheng" <tcheng3@gmail.com>
To: java-user@lucene.apache.org
Subject: Is there a Term ID for each distinctive term indexed in Lucene?
In-Reply-To: <5d91badf0708311541y636c6a0dgfda912a3ec30463d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1375_23480204.1188600207153"
References: <5d91badf0708311541y636c6a0dgfda912a3ec30463d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1375_23480204.1188600207153
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

I found that instead of storing a term ID for a term in the index, Lucene
stores the actual term string value. I am wondering if there ever is such a
"term ID" for each distinctive term indexed in Lucne, similar as a "doc ID"
for each distinctive document indexed in Lucene.

In other words, I am looking for a method like " int termId(string term)" in
the IndexReader, such that it can return my an ID given a term's string
value.

Thanks a lot in advance.

-Tao

------=_Part_1375_23480204.1188600207153--

From java-user-return-30106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 01 02:52:49 2007
Return-Path: <java-user-return-30106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24297 invoked from network); 1 Sep 2007 02:52:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Sep 2007 02:52:47 -0000
Received: (qmail 27239 invoked by uid 500); 1 Sep 2007 02:52:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27193 invoked by uid 500); 1 Sep 2007 02:52:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27182 invoked by uid 99); 1 Sep 2007 02:52:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 19:52:36 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of berlin.brown@gmail.com designates 209.85.146.179 as permitted sender)
Received: from [209.85.146.179] (HELO wa-out-1112.google.com) (209.85.146.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Sep 2007 02:52:29 +0000
Received: by wa-out-1112.google.com with SMTP id j40so1249124wah
        for <java-user@lucene.apache.org>; Fri, 31 Aug 2007 19:52:09 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=qf9P9Lpcjo8JZEfsj7j0eWNqPb3jkBnOKyNsCKtwpA6uh4CLJimk5JiP+MlkFiEvL9i79mhsjzZIaiBRR11gyd5DePJBHKWUJlqes1KHpPJxq+nZ83HcWdA+ee91laIEVDm9MEJebwohkVWOLlNMcUVoLPMehWATFycn90OFebQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=XVF1YlDmJVhNquIfJL0LXtwNiDw4h7nK/jXyPi8SD41tRVwhHV/IoEyphk54PtoLC9ChROzYsKY98FQSpJrCavni7w+5t5wDmH4GIB5xXSBzOF7WXRzInWh7g0n+089C7xXixtpln9DCtm7dEib94vf7qlCQB/m4HS5lX5jug38=
Received: by 10.142.233.9 with SMTP id f9mr108649wfh.1188615128881;
        Fri, 31 Aug 2007 19:52:08 -0700 (PDT)
Received: by 10.143.157.21 with HTTP; Fri, 31 Aug 2007 19:52:08 -0700 (PDT)
Message-ID: <df27a55b0708311952n1d3d74d4s5b3c7f96565c2fd3@mail.gmail.com>
Date: Fri, 31 Aug 2007 22:52:08 -0400
From: "Berlin Brown" <berlin.brown@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing in pieces?
In-Reply-To: <6e3ae6310708311430p4a5731c7x68f60c38bf38aaa7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20070831201144.M23585@www.botspiritcompany.com>
	 <6e3ae6310708311430p4a5731c7x68f60c38bf38aaa7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

So I am assuming that is not just a matter of "indexing" to that same
directory as you "indexed" before.

So, based on what you are saying, you would have to reload the
previous index (eg, INDEX_DIR_OLD) and then index the new content.
When I mean "index", I am talking about actually invoking lucene to
merge the content.

For example, it isnt just a matter of indexing to index_dir_old and
then to index_dir_new and then copying the lucene index files into
another directory index_dir_cur.

On 8/31/07, Chris Lu <chris.lu@gmail.com> wrote:
> I think you can simply change you sql to select only the recently updated
> messages, and add to your existing index. Although adding to an existing
> large index also takes a long time, it should be quicker than re-building
> the whole index.
>
> If your index continues to grow, you may need to have a dedicated server for
> indexing and searching.
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>
> On 8/31/07, bbrown <bbrown@botspiritcompany.com> wrote:
> >
> > I have been fine with my database (discussion forum) to lucene.  I am
> > taking
> > the simplest approach, eg; I have a discussion forum which are just text
> > messages, I take those out of the databse and then index the content.
> >
> > I am having troubling because I have hundreds of thousands of messages and
> > it
> > takes a while, eating my server cpu.  I was thinking I would just index
> > say a
> > portion of the database.  For example, index records 1-100 and then
> > 101-200.
> > Can I just index to that index directory without deleting the existing
> > index
> > segment files that are already there?  Or is it more complicated than
> > that.
> >
> > --
> > Berlin Brown
> > [berlin dot brown at gmail dot com]
> > http://botspiritcompany.com/botlist/?
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>


-- 
Berlin Brown
http://www.newspiritcompany.com - newspirit technologies

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-30107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Sep 01 03:28:00 2007
Return-Path: <java-user-return-30107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28349 invoked from network); 1 Sep 2007 03:27:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Sep 2007 03:27:59 -0000
Received: (qmail 40751 invoked by uid 500); 1 Sep 2007 03:27:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40709 invoked by uid 500); 1 Sep 2007 03:27:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40698 invoked by uid 99); 1 Sep 2007 03:27:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Aug 2007 20:27:48 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Sep 2007 03:27:40 +0000
Received: by nf-out-0910.google.com with SMTP id g16so844766nfd
        for <java-user@lucene.apache.org>; Fri, 31 Aug 2007 20:27:19 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OoON0BNGyxHxrMcr+IeW4pXBVWMRF+uQuw4uc6W0uH2x5Rm6i+WNCjHhJg1EAyAzI/HqzsoaEo8dNZs/xKnIMDEw97nV6Me6dDSJylrRaxr9gmOl6cpLWsLu5J68eK+6904ksn+TgVSgv+k9HUl0E9eJv4snNEbvQBqdaP1OnZ4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gNz4RwnE7SldhCezbjyfQxj1eS/zqnIfRTuR0R/DJiM0qohht1vsA6cGbWP7Zni3qWju2JINxhBZZxXOhf/MaUXgRmE4xqL//PeKIReeMg55ueHPOpXKoLow5HCWbF/o04oFRN+nzPMS6l2jLC6tm91ZcXNz/cJeyLB8kH9gaWE=
Received: by 10.78.149.15 with SMTP id w15mr1909501hud.1188617238321;
        Fri, 31 Aug 2007 20:27:18 -0700 (PDT)
Received: by 10.78.140.12 with HTTP; Fri, 31 Aug 2007 20:27:18 -0700 (PDT)
Message-ID: <6e3ae6310708312027l760111cbn2526ade4f6671be4@mail.gmail.com>
Date: Fri, 31 Aug 2007 20:27:18 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing in pieces?
In-Reply-To: <df27a55b0708311952n1d3d74d4s5b3c7f96565c2fd3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12760_15506187.1188617238290"
References: <20070831201144.M23585@www.botspiritcompany.com>
	 <6e3ae6310708311430p4a5731c7x68f60c38bf38aaa7@mail.gmail.com>
	 <df27a55b0708311952n1d3d74d4s5b3c7f96565c2fd3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12760_15506187.1188617238290
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Generally you are right. Except not exactly copy old index, but first index
new content in a new directory, and merge old index with the new index.

There is a quicker merge index method, indexWriter.addIndexesNoOptimize(),
but in general, merging index is slow, although quicker than re-index.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes


On 8/31/07, Berlin Brown <berlin.brown@gmail.com> wrote:
>
> So I am assuming that is not just a matter of "indexing" to that same
> directory as you "indexed" before.
>
> So, based on what you are saying, you would have to reload the
> previous index (eg, INDEX_DIR_OLD) and then index the new content.
> When I mean "index", I am talking about actually invoking lucene to
> merge the content.
>
> For example, it isnt just a matter of indexing to index_dir_old and
> then to index_dir_new and then copying the lucene index files into
> another directory index_dir_cur.
>
> On 8/31/07, Chris Lu <chris.lu@gmail.com> wrote:
> > I think you can simply change you sql to select only the recently
> updated
> > messages, and add to your existing index. Although adding to an existing
> > large index also takes a long time, it should be quicker than
> re-building
> > the whole index.
> >
> > If your index continues to grow, you may need to have a dedicated server
> for
> > indexing and searching.
> >
> > --
> > Chris Lu
> > -------------------------
> > Instant Scalable Full-Text Search On Any Database/Application
> > site: http://www.dbsight.net
> > demo: http://search.dbsight.com
> > Lucene Database Search in 3 minutes:
> >
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> >
> > On 8/31/07, bbrown <bbrown@botspiritcompany.com> wrote:
> > >
> > > I have been fine with my database (discussion forum) to lucene.  I am
> > > taking
> > > the simplest approach, eg; I have a discussion forum which are just
> text
> > > messages, I take those out of the databse and then index the content.
> > >
> > > I am having troubling because I have hundreds of thousands of messages
> and
> > > it
> > > takes a while, eating my server cpu.  I was thinking I would just
> index
> > > say a
> > > portion of the database.  For example, index records 1-100 and then
> > > 101-200.
> > > Can I just index to that index directory without deleting the existing
> > > index
> > > segment files that are already there?  Or is it more complicated than
> > > that.
> > >
> > > --
> > > Berlin Brown
> > > [berlin dot brown at gmail dot com]
> > > http://botspiritcompany.com/botlist/?
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>
>
> --
> Berlin Brown
> http://www.newspiritcompany.com - newspirit technologies
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_12760_15506187.1188617238290--

