From lucene-user-return-10012-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 01 07:19:06 2004
Return-Path: <lucene-user-return-10012-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 55270 invoked from network); 1 Sep 2004 07:19:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Sep 2004 07:19:02 -0000
Received: (qmail 30505 invoked by uid 500); 1 Sep 2004 07:18:36 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 30474 invoked by uid 500); 1 Sep 2004 07:18:35 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 30458 invoked by uid 99); 1 Sep 2004 07:18:35 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [207.162.57.26] (HELO hercule.cirano.qc.ca) (207.162.57.26)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 01 Sep 2004 00:18:31 -0700
Received: from localhost (vauchers@localhost)
	by hercule.cirano.qc.ca (8.11.6/8.11.0) with ESMTP id i817ITZ18127
	for <lucene-user@jakarta.apache.org>; Wed, 1 Sep 2004 03:18:29 -0400
X-Authentication-Warning: hercule.cirano.qc.ca: vauchers owned process doing -bs
Date: Wed, 1 Sep 2004 03:18:28 -0400 (EDT)
From: Stephane James Vaucher <vauchers@cirano.qc.ca>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: indexing size
In-Reply-To: <01c901c48ff1$da596b00$b101a8c0@emacmillan.edu>
Message-ID: <Pine.LNX.4.33.0409010310460.15686-100000@hercule.cirano.qc.ca>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Niraj,

I'd rather respond to the list as others may be interested in your
questions, and since I don't consider myself a guru, I appreciate being
corrected.

For a title, I'd say yes, use the Field Text(String name, String value)
constructor. Not the others that use a reader as they do not store the
value.

You want for it to be:
1) tokenised (so to have its fragments saved for searching, not only the
totality of the text)
2) indexed so to make it searchable
3) store as to make the field retrievable from the index

hth,
sv
p.s. my name is Stephane, it's been a while since I've been in Oz
that I haven't been called James

On Wed, 1 Sep 2004, Niraj Alok wrote:

> Hi James,
>
> Since this would be a minor issue hence I am not posting it on the lucene.
>
> Lets say I have one field as "title" which has a value of "George Bush".
> I would need to search on that title and also retrieve its value. So you are
> saying that I should have it as Field.Text?
>
> Also, if I need to just search on that "title" but want to retrieve the
> value of another field "content", then title should be unstored while
> content should be stored?
>
> Regards,
> Niraj
> ----- Original Message -----
> From: "Stephane James Vaucher" <vauchers@cirano.qc.ca>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Wednesday, September 01, 2004 10:59 AM
> Subject: Re: indexing size
>
>
> > On Wed, 1 Sep 2004, Niraj Alok wrote
> > > I was also thinking on the same lines.
> > > Actually the original code was written by some one else who has left and
> so
> > > I have to own this.
> > >
> > > At almost all the places, it is Field.Text and at some few places its
> > > Field.UnIndexed.
> > > I looked at the javadocs and found that there is Field.UnStored also.
> > >
> > > The problem is I am not too sure which one to change to what. It would
> be
> > > really enlightening if you could point the differences
> > > between those three and what would I need to change in my search code.
> > >
> > > If I make some of them Field.Unstored, I can see from the javadocs that
> > > it will be indexed and tokenized but not stored. If it is not stored,
> > > how can I use it while searching? Basically what is meant by indexed and
> > > stored, indexed and not stored and not indexed and stored?
> >
> > If all you need is to seach a field, you do not need to store it. If it is
> > not stored it can still be tokenised and analysed by lucene. It will then
> > be only stored as a set of token, but not as whole. You can thus use it
> > for fields that you never need to retrieve from the index.
> >
> > For example:
> > the quick brown fox jumped over the lazy dog.
> >
> > will be store in lucene only as tokens, not as a whole, so using a
> > whitespace analyser using a stopword list {the}:
> >
> > You will have these tokens in lucene:
> > quick
> > brown
> > fox
> > jumped
> > over
> > dog
> >
> > You will NOT be able to retrieve the original text, but you will be able
> > to search it.
> >
> > HTH,
> > sv
> >
> > >
> > > Regards,
> > > Niraj
> > > ----- Original Message -----
> > > From: "petite_abeille" <petite_abeille@mac.com>
> > > To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> > > Sent: Tuesday, August 31, 2004 8:57 PM
> > > Subject: Re: indexing size
> > >
> > >
> > > >
> > > > On Aug 31, 2004, at 17:17, Otis Gospodnetic wrote:
> > > >
> > > > > You also have a large number of
> > > > > fields, and it looks like a lot (all?) of them are stored and
> indexed.
> > > > > That's what that large .fdt file indicated.  That file is > 206 MB
> in
> > > > > size.
> > > >
> > > > Try using Field.UnStored() to avoid storing all those data in your
> > > > indices as it's usually not necessary.
> > > >
> > > > PA.
> > > >
> > > >
> > > > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > > > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> > > >
> > > >
> > >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10013-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 01 07:26:44 2004
Return-Path: <lucene-user-return-10013-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 64837 invoked from network); 1 Sep 2004 07:26:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Sep 2004 07:26:43 -0000
Received: (qmail 40511 invoked by uid 500); 1 Sep 2004 07:26:31 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 40468 invoked by uid 500); 1 Sep 2004 07:26:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 40454 invoked by uid 99); 1 Sep 2004 07:26:30 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=HTML_40_50,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [65.61.157.209] (HELO www.emacmillan.org) (65.61.157.209)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 01 Sep 2004 00:26:27 -0700
Received: from mail.emacmillan.com ([203.200.41.230])
	by www.emacmillan.org (8.11.6/8.11.6) with ESMTP id i817QOl31959
	for <lucene-user@jakarta.apache.org>; Wed, 1 Sep 2004 02:26:24 -0500
Received: from NIRAJ [192.168.1.177] by emacmillan.com [192.168.1.7]
	with SMTP (MDaemon.v2.83.R)
	for <lucene-user@jakarta.apache.org>; Wed, 01 Sep 2004 12:58:46 +0530
Message-ID: <01ed01c48ff4$5cd74320$b101a8c0@emacmillan.edu>
From: "Niraj Alok" <niraj@emacmillan.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <Pine.LNX.4.33.0409010310460.15686-100000@hercule.cirano.qc.ca>
Subject: Re: indexing size
Date: Wed, 1 Sep 2004 12:51:47 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_01E9_01C49022.70E5E960"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-MDaemon-Deliver-To: lucene-user@jakarta.apache.org
X-Return-Path: niraj@emacmillan.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_01E9_01C49022.70E5E960
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

Thanks a lot Stephane and Otis for your detailed explanations. I am now on
the path to make a judicious choice between the different choices on offer
and hope to reduce the overall size. Will surely get back if there are any
more hiccups (hope not! )

Thanks again!

Niraj
----- Original Message -----
From: "Stephane James Vaucher" <vauchers@cirano.qc.ca>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Wednesday, September 01, 2004 12:48 PM
Subject: Re: indexing size


> Hi Niraj,
>
> I'd rather respond to the list as others may be interested in your
> questions, and since I don't consider myself a guru, I appreciate being
> corrected.
>
> For a title, I'd say yes, use the Field Text(String name, String value)
> constructor. Not the others that use a reader as they do not store the
> value.
>
> You want for it to be:
> 1) tokenised (so to have its fragments saved for searching, not only the
> totality of the text)
> 2) indexed so to make it searchable
> 3) store as to make the field retrievable from the index
>
> hth,
> sv
> p.s. my name is Stephane, it's been a while since I've been in Oz
> that I haven't been called James
>


------=_NextPart_000_01E9_01C49022.70E5E960--




From lucene-user-return-10014-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 01 07:44:36 2004
Return-Path: <lucene-user-return-10014-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 75523 invoked from network); 1 Sep 2004 07:44:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Sep 2004 07:44:36 -0000
Received: (qmail 63024 invoked by uid 500); 1 Sep 2004 07:44:23 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 62989 invoked by uid 500); 1 Sep 2004 07:44:22 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 62975 invoked by uid 99); 1 Sep 2004 07:44:22 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [17.250.248.84] (HELO smtpout.mac.com) (17.250.248.84)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 01 Sep 2004 00:44:20 -0700
Received: from mac.com (smtpin02-en2 [10.13.10.147])
	by smtpout.mac.com (8.12.6/MantshX 2.0) with ESMTP id i817iHu5002080
	for <lucene-user@jakarta.apache.org>; Wed, 1 Sep 2004 00:44:17 -0700 (PDT)
Received: from [10.0.1.201] (adsl-62-167-31-248.adslplus.ch [62.167.31.248])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin02/MantshX 4.0) with ESMTP id i817iCkj027071
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <lucene-user@jakarta.apache.org>; Wed, 1 Sep 2004 00:44:15 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <018001c48fde$7b4556f0$b101a8c0@emacmillan.edu>
References: <20040831151757.93978.qmail@web12702.mail.yahoo.com> <36712F40-FB62-11D8-AFB5-000393760B7E@mac.com> <018001c48fde$7b4556f0$b101a8c0@emacmillan.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B65C4CDE-FBEA-11D8-8A3D-000393760B7E@mac.com>
Content-Transfer-Encoding: 7bit
From: petite_abeille <petite_abeille@mac.com>
Subject: Re: indexing size
Date: Wed, 1 Sep 2004 09:44:10 +0200
To: Lucene Users List <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Niraj,

On Sep 01, 2004, at 06:45, Niraj Alok wrote:

> If I make some of them Field.Unstored, I can see from the javadocs  
> that it
> will be indexed and tokenized but not stored. If it is not stored, how  
> can I
> use it while searching?

The different type of fields don't impact how you do your search. This  
is always the same.

Using Unstored fields simply means that you use Lucene as a pure index  
for search purpose only, not for storing any data.

Specifically, the assumption is that your original data lives somewhere  
else, outside of Lucene. If this assumption is true, then you can index  
everything as Unstored with the addition of one Keyword per document.  
The Keyword field holds some sort of unique identifier which allows you  
to retrieve the original data if necessary (e.g. a primary key, an URI,  
what not).

Here is an example of this approach:

(1) For indexing, check the indexValuesWithID() method

http://cvs.sourceforge.net/viewcvs.py/zoe/ZOE/Frameworks/SZObject/ 
SZIndex.java?view=markup

Note the addition of a Field.Keyword for each document and the use of  
Field.UnStored for everything else

(2) For fetching, check objectsWithSpecificationAndHitsInStore()

http://cvs.sourceforge.net/viewcvs.py/zoe/ZOE/Frameworks/SZObject/ 
SZFinder.java?view=markup

HTH.

Cheers,

PA.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10015-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 01 08:59:49 2004
Return-Path: <lucene-user-return-10015-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 17389 invoked from network); 1 Sep 2004 08:59:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Sep 2004 08:59:49 -0000
Received: (qmail 94805 invoked by uid 500); 1 Sep 2004 08:59:37 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 94745 invoked by uid 500); 1 Sep 2004 08:59:35 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 94721 invoked by uid 99); 1 Sep 2004 08:59:35 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [65.61.157.209] (HELO www.emacmillan.org) (65.61.157.209)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 01 Sep 2004 01:59:31 -0700
Received: from mail.emacmillan.com ([203.200.41.230])
	by www.emacmillan.org (8.11.6/8.11.6) with ESMTP id i818xRl02913
	for <lucene-user@jakarta.apache.org>; Wed, 1 Sep 2004 03:59:28 -0500
Received: from NIRAJ [192.168.1.177] by emacmillan.com [192.168.1.7]
	with SMTP (MDaemon.v2.83.R)
	for <lucene-user@jakarta.apache.org>; Wed, 01 Sep 2004 14:31:47 +0530
Message-ID: <01fa01c49001$5bde9f60$b101a8c0@emacmillan.edu>
From: "Niraj Alok" <niraj@emacmillan.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <20040831151757.93978.qmail@web12702.mail.yahoo.com> <36712F40-FB62-11D8-AFB5-000393760B7E@mac.com> <018001c48fde$7b4556f0$b101a8c0@emacmillan.edu> <B65C4CDE-FBEA-11D8-8A3D-000393760B7E@mac.com>
Subject: Re: indexing size
Date: Wed, 1 Sep 2004 14:24:58 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_01F6_01C4902F.7583C890"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-MDaemon-Deliver-To: lucene-user@jakarta.apache.org
X-Return-Path: niraj@emacmillan.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_01F6_01C4902F.7583C890
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

Hi PA,

Thanks for the detail ! Since we are using lucene to store the data also, I
guess I would not be able to use it.

Regards,
Niraj
----- Original Message -----
From: "petite_abeille" <petite_abeille@mac.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Wednesday, September 01, 2004 1:14 PM
Subject: Re: indexing size


> Hi Niraj,
>
> On Sep 01, 2004, at 06:45, Niraj Alok wrote:
>
> > If I make some of them Field.Unstored, I can see from the javadocs
> > that it
> > will be indexed and tokenized but not stored. If it is not stored, how
> > can I
> > use it while searching?
>
> The different type of fields don't impact how you do your search. This
> is always the same.
>
> Using Unstored fields simply means that you use Lucene as a pure index
> for search purpose only, not for storing any data.
>
> Specifically, the assumption is that your original data lives somewhere
> else, outside of Lucene. If this assumption is true, then you can index
> everything as Unstored with the addition of one Keyword per document.
> The Keyword field holds some sort of unique identifier which allows you
> to retrieve the original data if necessary (e.g. a primary key, an URI,
> what not).
>
> Here is an example of this approach:
>
> (1) For indexing, check the indexValuesWithID() method
>
> http://cvs.sourceforge.net/viewcvs.py/zoe/ZOE/Frameworks/SZObject/
> SZIndex.java?view=markup
>
> Note the addition of a Field.Keyword for each document and the use of
> Field.UnStored for everything else
>
> (2) For fetching, check objectsWithSpecificationAndHitsInStore()
>
> http://cvs.sourceforge.net/viewcvs.py/zoe/ZOE/Frameworks/SZObject/
> SZFinder.java?view=markup
>
> HTH.
>
> Cheers,
>
> PA.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>

------=_NextPart_000_01F6_01C4902F.7583C890--




From lucene-user-return-10016-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 01 10:14:57 2004
Return-Path: <lucene-user-return-10016-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 56558 invoked from network); 1 Sep 2004 10:14:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Sep 2004 10:14:56 -0000
Received: (qmail 15886 invoked by uid 500); 1 Sep 2004 10:14:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 15805 invoked by uid 500); 1 Sep 2004 10:14:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 15791 invoked by uid 99); 1 Sep 2004 10:14:40 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [205.158.62.196] (HELO ws6-1.us4.outblaze.com) (205.158.62.196)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 01 Sep 2004 03:14:39 -0700
Received: (qmail 7260 invoked from network); 1 Sep 2004 10:14:33 -0000
Received: from unknown (HELO ?192.168.1.102?) (erik@hatcher.net@68.169.41.169)
  by ws6-1.us4.outblaze.com with SMTP; 1 Sep 2004 10:14:33 -0000
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <7B5AE0F68697BD44BD01648829182560014BDA@beexch01.Conviator.com>
References: <7B5AE0F68697BD44BD01648829182560014BDA@beexch01.Conviator.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <BA27C9A3-FBFF-11D8-AD7E-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: .net version - seperate mailinglist?
Date: Wed, 1 Sep 2004 06:14:36 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Aug 31, 2004, at 6:10 PM, Jan Agermose wrote:
> Im having some troble using Lucene - but is the .NET port. Should I 
> ask questions about the different analyzers and tokenizers on this 
> mailinglist or one some other?

This list is primarily for the Java version of Lucene, but I suspect 
the behavior of the analyzers is fair game to ask here.  Perhaps you 
could mock up examples of what you're asking about in Java (should be 
pretty trivial to convert from C# to Java, eh? :).

> Also - does anyone know the difference between the to .NET 
> implementations listed on the Lucene website?

This is something you'd have to ask in forums of each of the ports.  
PyLucene is exactly the Java version (at whatever point in time they 
built it).  CLucene and LuPy are surely playing catch-up with features 
and new index file formats.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10017-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 01 11:39:55 2004
Return-Path: <lucene-user-return-10017-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 93245 invoked from network); 1 Sep 2004 11:39:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Sep 2004 11:39:55 -0000
Received: (qmail 43343 invoked by uid 500); 1 Sep 2004 11:38:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 43009 invoked by uid 500); 1 Sep 2004 11:38:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 42839 invoked by uid 99); 1 Sep 2004 11:38:45 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.243] (HELO web12706.mail.yahoo.com) (216.136.173.243)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 01 Sep 2004 04:38:42 -0700
Message-ID: <20040901113838.61340.qmail@web12706.mail.yahoo.com>
Received: from [195.29.104.35] by web12706.mail.yahoo.com via HTTP; Wed, 01 Sep 2004 04:38:38 PDT
Date: Wed, 1 Sep 2004 04:38:38 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: .net version - seperate mailinglist?
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <7B5AE0F68697BD44BD01648829182560014BDA@beexch01.Conviator.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Lucene.Net is a separate project from the Java Lucene.

The difference between the 2 .Net ports is that one is actively
developed, and the other one is not. :)
This one is actively developed:
http://sourceforge.net/projects/lucenedotnet

Otis

--- Jan Agermose <jan@Agermose.dk> wrote:

> Hi
>  
> Im having some troble using Lucene - but is the .NET port. Should I
> ask questions about the different analyzers and tokenizers on this
> mailinglist or one some other?
>  
> Also - does anyone know the difference between the to .NET
> implementations listed on the Lucene website? 
>  
> http://jakarta.apache.org/lucene/docs/resources.html
>  
> Best Regards
> Jan Agermose
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10018-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 01 14:50:08 2004
Return-Path: <lucene-user-return-10018-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 11115 invoked from network); 1 Sep 2004 14:50:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Sep 2004 14:50:07 -0000
Received: (qmail 3424 invoked by uid 500); 1 Sep 2004 14:50:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 3228 invoked by uid 500); 1 Sep 2004 14:49:58 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 3214 invoked by uid 99); 1 Sep 2004 14:49:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [195.26.204.34] (HELO spp.at) (195.26.204.34)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 01 Sep 2004 07:49:57 -0700
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C49033.4682814A"
Subject: pdf indexing problem
Disposition-Notification-To: "Siegfried Puchbauer" <S.Puchbauer@spp.at>
X-MimeOLE: Produced By Microsoft Exchange V6.0.6375.0
Date: Wed, 1 Sep 2004 16:52:17 +0200
Message-ID: <108B7D893BFDE64A8E4744EC9265301C28D1E0@kirk.spp.at>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: pdf indexing problem
Thread-Index: AcSQMvLGTcdz2860SamD7OH9HLtPMg==
From: "Siegfried Puchbauer" <S.Puchbauer@spp.at>
To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C49033.4682814A
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

I have a PDF Parser which uses PDFBox libary to parse PDF documents into
plain text.

I have tried this parser by sending the output directly to the
commandline and it works, I=20
get the plain text, like I get it with my HTMLParser.

But there is a problem with the indexing, I think:

I can only find the document with lucene with words which occur before
the first dot. With
a word which occurs after the first "." Lucene doesn't find the related
document. So I think
these words are not indexed. I do not use any special analyzer and I
cannot understand
why it does not work.=20

=20

The indexing with html files work, there I can find words after the
first ".".

Its also possible that the missing indexing is not related to the "."
Character, but to

The first newline (\n). I don't know.

=20

Have you got any ideas for making pdf-index work?

=20

Siegfried Puchbauer

=20


------_=_NextPart_001_01C49033.4682814A--

From lucene-user-return-10019-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 01 15:32:51 2004
Return-Path: <lucene-user-return-10019-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 39032 invoked from network); 1 Sep 2004 15:32:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Sep 2004 15:32:50 -0000
Received: (qmail 15937 invoked by uid 500); 1 Sep 2004 15:32:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 15669 invoked by uid 500); 1 Sep 2004 15:32:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 15341 invoked by uid 99); 1 Sep 2004 15:32:24 -0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=UNDISC_RECIPS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 01 Sep 2004 08:32:21 -0700
Received: from ifit.uni-klu.ac.at ([143.205.118.100]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 1 Sep 2004 17:34:02 +0200
Message-ID: <4135EBE6.9000804@ifit.uni-klu.ac.at>
Date: Wed, 01 Sep 2004 17:33:58 +0200
From: Sergiu Gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.5) Gecko/20031007
X-Accept-Language: de-at, en, ro, it, en-us
MIME-Version: 1.0
To: undisclosed-recipients:;
Subject: I appologize for this email...
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 01 Sep 2004 15:34:02.0758 (UTC) FILETIME=[1BD33A60:01C49039]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


 Sory,

 I send this email to transfer my contacts between Mozilla and 
Thunderbird email client.

  Sergiu


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10020-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 01 17:30:56 2004
Return-Path: <lucene-user-return-10020-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 25561 invoked from network); 1 Sep 2004 17:30:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Sep 2004 17:30:55 -0000
Received: (qmail 51761 invoked by uid 500); 1 Sep 2004 17:30:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 51646 invoked by uid 500); 1 Sep 2004 17:30:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 51632 invoked by uid 99); 1 Sep 2004 17:30:48 -0000
X-ASF-Spam-Status: No, hits=2.7 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.148.227.85] (HELO rwcrmhc12.comcast.net) (216.148.227.85)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 01 Sep 2004 10:30:47 -0700
Received: from katesrlaptop (pcp0010061793pcs.tharpe01.fl.comcast.net[69.244.212.102])
          by comcast.net (rwcrmhc12) with SMTP
          id <20040901173045014008nu6ce>
          (Authid: patrickk79);
          Wed, 1 Sep 2004 17:30:45 +0000
Message-ID: <002801c49049$46721330$6501a8c0@katesrlaptop>
From: "Patrick Kates" <patrickk79@comcast.net>
To: <lucene-user@jakarta.apache.org>
Subject: too many open files
Date: Wed, 1 Sep 2004 13:29:44 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1158
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I am having two problems with my client's lucene indexes.

One, we are getting a FileNotFound exception (too many open files).  THis
would seem to indicate that I need to increase the number of open files on
our Suse 9.0 Pro box.  I have our sys admin working on this problem for me.

Two, because of this error and subsequent restarting of the box, we seem to
have lost an index segment or two.  My client's tape backups do not contain
the segments we know about.

I am concerned about the missing index segments as they seem to be
preventing any further update of the index.  Does anyone have any
suggestions as to how to fix this besides a full re-index of the problem
indexes?

I was wondering if maybe a merge of the index might solve the problem?  I
could move our nightly merge of the index files to sooner, but I am afraid
that the merge might make matters worse?

Any ideas or helpful speculation would be greatly appreciated.

Patrick




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10021-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 01 17:55:37 2004
Return-Path: <lucene-user-return-10021-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 45206 invoked from network); 1 Sep 2004 17:55:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Sep 2004 17:55:36 -0000
Received: (qmail 7392 invoked by uid 500); 1 Sep 2004 17:55:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 7295 invoked by uid 500); 1 Sep 2004 17:55:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 7279 invoked by uid 99); 1 Sep 2004 17:55:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [195.2.83.226] (HELO frontend3.aha.ru) (195.2.83.226)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 01 Sep 2004 10:55:26 -0700
Received: from [213.87.10.142] (account fckdp@ok.ru HELO pb)
  by frontend3.aha.ru (CommuniGate Pro SMTP 4.1.8)
  with ESMTP id 51640075 for lucene-user@jakarta.apache.org; Wed, 01 Sep 2004 21:55:10 +0400
Reply-To: <bizhan@aha.ru>
From: "Pasha Bizhan" <fckdp@ok.ru>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: .net version - seperate mailinglist?
Date: Wed, 1 Sep 2004 21:57:57 +0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <7B5AE0F68697BD44BD01648829182560014BDA@beexch01.Conviator.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
Thread-Index: AcSPp1Rc3epia2QcR8KMFT1xH/OucQApRD2g
Message-ID: <auto-000051640075@frontend3.aha.ru>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi, 

> From: Jan Agermose [mailto:jan@Agermose.dk] 
>  
> Im having some troble using Lucene - but is the .NET port. 
> Should I ask questions about the different analyzers and 
> tokenizers on this mailinglist or one some other?

Our users use forums on SF.NET (http://lucenedotnet.com)
Usually they receive the answer.

But the differences between Lucene.Net and java lucene are minimal. 
Basically it is syntax difference. If the question concerns to lucene the
answer usually 
approaches for both versions
  
> Also - does anyone know the difference between the to .NET 
> implementations listed on the Lucene website? 

Nlucene based on 1.2 lucene, Lucene.Net based on 1.3.rc3 lucene.

Pasha Bizhan
http://lucenedotnet.com


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10022-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 01 18:02:55 2004
Return-Path: <lucene-user-return-10022-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 49530 invoked from network); 1 Sep 2004 18:02:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Sep 2004 18:02:55 -0000
Received: (qmail 20746 invoked by uid 500); 1 Sep 2004 18:02:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 20533 invoked by uid 500); 1 Sep 2004 18:02:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 20520 invoked by uid 99); 1 Sep 2004 18:02:48 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.155.196.65] (HELO web60802.mail.yahoo.com) (216.155.196.65)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 01 Sep 2004 11:02:47 -0700
Message-ID: <20040901180245.68377.qmail@web60802.mail.yahoo.com>
Received: from [210.18.154.207] by web60802.mail.yahoo.com via HTTP; Wed, 01 Sep 2004 19:02:45 BST
Date: Wed, 1 Sep 2004 19:02:45 +0100 (BST)
From: =?iso-8859-1?q?Honey=20George?= <honey_george@yahoo.com>
Subject: Re: too many open files
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <002801c49049$46721330$6501a8c0@katesrlaptop>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Patrick,
  For your second problem, are you seeing a behavior
similar to the one discussed in the following thread?
http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg08952.html

If yes, you can see the solution there.

Thanks,
  George

 --- Patrick Kates <patrickk79@comcast.net> wrote: 
> I am having two problems with my client's lucene
> indexes.
> 
> One, we are getting a FileNotFound exception (too
> many open files).  THis
> would seem to indicate that I need to increase the
> number of open files on
> our Suse 9.0 Pro box.  I have our sys admin working
> on this problem for me.
> 
> Two, because of this error and subsequent restarting
> of the box, we seem to
> have lost an index segment or two.  My client's tape
> backups do not contain
> the segments we know about.
> 
> I am concerned about the missing index segments as
> they seem to be
> preventing any further update of the index.  Does
> anyone have any
> suggestions as to how to fix this besides a full
> re-index of the problem
> indexes?
> 
> I was wondering if maybe a merge of the index might
> solve the problem?  I
> could move our nightly merge of the index files to
> sooner, but I am afraid
> that the merge might make matters worse?
> 
> Any ideas or helpful speculation would be greatly
> appreciated.
> 
> Patrick
> 
> 
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> 
>  


	
	
		
___________________________________________________________ALL-NEW Yahoo! Messenger - all new features - even more fun!  http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10023-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 01 21:20:16 2004
Return-Path: <lucene-user-return-10023-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 97112 invoked from network); 1 Sep 2004 21:20:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Sep 2004 21:20:15 -0000
Received: (qmail 9247 invoked by uid 500); 1 Sep 2004 21:19:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 9115 invoked by uid 500); 1 Sep 2004 21:19:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 9045 invoked by uid 99); 1 Sep 2004 21:19:12 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=MSGID_FROM_MTA_HEADER,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.168.230.142] (HELO omr5.netsolmail.com) (216.168.230.142)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 01 Sep 2004 14:19:10 -0700
Received: from ms6.netsolmail.com (IDENT:mirapoint@[216.168.230.179])
	by omr5.netsolmail.com (8.12.10/8.12.10) with ESMTP id i81LJ7uo013505
	for <lucene-user@jakarta.apache.org>; Wed, 1 Sep 2004 17:19:07 -0400 (EDT)
Received: from ms6.netsolmail.com (localhost.netsolmail.com [127.0.0.1])
	by ms6.netsolmail.com (Mirapoint Messaging Server MOS 3.2.2-GA)
	with ESMTP id CBT27437;
	Wed, 1 Sep 2004 17:19:05 -0400 (EDT)
From: <dhatcher@webtads.com>
Message-Id: <200409012119.CBT27437@ms6.netsolmail.com>
Received: from 128.158.44.123
	by ms6.netsolmail.com (Mirapoint Messaging Server MOS 3.2.2-GA)
	with HTTP/1.1;
	Wed, 1 Sep 2004 17:19:05 -0400
Date: Wed, 1 Sep 2004 17:19:05 -0400
Subject: Building Lucene in Eclipse
To: Lucene Users List <lucene-user@jakarta.apache.org>
X-Mailer: Webmail Mirapoint Direct 3.2.2-GA
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I'm trying to use Ant to build Lucene within Eclipse, or 
rather trying to.  I've went to external tools and created a 
lucenebuild.xml entry.  Under location I have the build.xml 
file for lucene and the base directory is set to the lucene 
base directory.  Eclipse has the optional jar but I am 
getting the following error:

[Targets]: File: (mybasepath)/build.xml:11 :Unexpected 
element "tstamp"

Any ideas what is wrong/how to fix it?

Danny Hatcher

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10024-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 01 23:39:13 2004
Return-Path: <lucene-user-return-10024-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 57126 invoked from network); 1 Sep 2004 23:39:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Sep 2004 23:39:12 -0000
Received: (qmail 18366 invoked by uid 500); 1 Sep 2004 23:39:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 18320 invoked by uid 500); 1 Sep 2004 23:39:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 18307 invoked by uid 99); 1 Sep 2004 23:39:05 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.245] (HELO web12708.mail.yahoo.com) (216.136.173.245)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 01 Sep 2004 16:39:01 -0700
Message-ID: <20040901233900.21830.qmail@web12708.mail.yahoo.com>
Received: from [195.29.104.80] by web12708.mail.yahoo.com via HTTP; Wed, 01 Sep 2004 16:38:59 PDT
Date: Wed, 1 Sep 2004 16:38:59 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: pdf indexing problem
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <108B7D893BFDE64A8E4744EC9265301C28D1E0@kirk.spp.at>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Siegfried,

My guess is that the '.' is accidental and there is nothing special
about '.'.  I've used PDFBox+Lucene and it worked well.  Are you aware
of Lucene-specific classes included in the PDFBox distribution?  You
may be able to use those classes, or you could at least look at their
source, to make sure you're using both PDFBox and Lucene API correctly.

Also, how long is the extracted text?
See this:
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/index/IndexWriter.html#maxFieldLength
Maybe that's the problem.

Otis


--- Siegfried Puchbauer <S.Puchbauer@spp.at> wrote:

> Hi,
> 
>  
> 
> I have a PDF Parser which uses PDFBox libary to parse PDF documents
> into
> plain text.
> 
> I have tried this parser by sending the output directly to the
> commandline and it works, I 
> get the plain text, like I get it with my HTMLParser.
> 
> But there is a problem with the indexing, I think:
> 
> I can only find the document with lucene with words which occur
> before
> the first dot. With
> a word which occurs after the first "." Lucene doesn't find the
> related
> document. So I think
> these words are not indexed. I do not use any special analyzer and I
> cannot understand
> why it does not work. 
> 
>  
> 
> The indexing with html files work, there I can find words after the
> first ".".
> 
> Its also possible that the missing indexing is not related to the "."
> Character, but to
> 
> The first newline (\n). I don't know.
> 
>  
> 
> Have you got any ideas for making pdf-index work?
> 
>  
> 
> Siegfried Puchbauer
> 
>  
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10025-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 02 00:25:46 2004
Return-Path: <lucene-user-return-10025-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 71915 invoked from network); 2 Sep 2004 00:25:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Sep 2004 00:25:46 -0000
Received: (qmail 60700 invoked by uid 500); 2 Sep 2004 00:25:38 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 60668 invoked by uid 500); 2 Sep 2004 00:25:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 60654 invoked by uid 99); 2 Sep 2004 00:25:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [205.158.62.199] (HELO ws6-3.us4.outblaze.com) (205.158.62.199)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 01 Sep 2004 17:25:36 -0700
Received: (qmail 16616 invoked from network); 2 Sep 2004 00:25:28 -0000
Received: from unknown (HELO ?192.168.1.102?) (erik@hatcher.net@68.169.41.169)
  by ws6-3.us4.outblaze.com with SMTP; 2 Sep 2004 00:25:28 -0000
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <200409012119.CBT27437@ms6.netsolmail.com>
References: <200409012119.CBT27437@ms6.netsolmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <95721EEA-FC76-11D8-96AB-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Building Lucene in Eclipse
Date: Wed, 1 Sep 2004 20:25:25 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

You need to use a recent version of Ant - version 1.6.x.

	Erik


On Sep 1, 2004, at 5:19 PM, <dhatcher@webtads.com> wrote:

> I'm trying to use Ant to build Lucene within Eclipse, or
> rather trying to.  I've went to external tools and created a
> lucenebuild.xml entry.  Under location I have the build.xml
> file for lucene and the base directory is set to the lucene
> base directory.  Eclipse has the optional jar but I am
> getting the following error:
>
> [Targets]: File: (mybasepath)/build.xml:11 :Unexpected
> element "tstamp"
>
> Any ideas what is wrong/how to fix it?
>
> Danny Hatcher
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10026-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 03 13:21:27 2004
Return-Path: <lucene-user-return-10026-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21530 invoked from network); 3 Sep 2004 13:21:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Sep 2004 13:21:27 -0000
Received: (qmail 92592 invoked by uid 500); 3 Sep 2004 13:20:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 92483 invoked by uid 500); 3 Sep 2004 13:20:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 92396 invoked by uid 99); 3 Sep 2004 13:20:55 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_60_70,HTML_MESSAGE,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [160.62.1.169] (HELO fw-mail12.novartis.com) (160.62.1.169)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 03 Sep 2004 06:20:52 -0700
Received: from mtap2.is.chbs ([192.37.33.19])
	by fw-mail12.novartis.com (Switch-3.1.6/Switch-3.1.6) with ESMTP id i83DKmsg9797842
	for <lucene-user@jakarta.apache.org>; Fri, 3 Sep 2004 15:20:48 +0200
Received: from phchbs-s3025.EU.novartis.net (phchbs-s3025.eu.novartis.net [192.37.31.249])
	by mtap2.is.chbs (Switch-3.1.6/Switch-3.1.0) with ESMTP id i83DKluH11395244
	for <lucene-user@jakarta.apache.org>; Fri, 3 Sep 2004 15:20:48 +0200
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: RE: memory leek in lucene?
MIME-Version: 1.0
Message-ID: <OF0019646E.4F824EBA-ONC1256F04.00493873-C1256F04.00494F9B@EU.novartis.net>
From: iouli.golovatyi@group.novartis.com
Date: Fri, 3 Sep 2004 15:20:45 +0200
Content-Type: multipart/alternative; boundary="=_alternative 00494F98C1256F04_="
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--=_alternative 00494F98C1256F04_=
Content-Type: text/plain; charset="us-ascii"

Terence,

still had not not time to prepare a test case, but... I worked around it:

The idea is to replace the score with timestamp on populating hits (in 
case You are not interesting too much in real score), where the field_sort 
is in "yyyyMMddHHmm" etc. format.
Works fine, at least no outOfMemory crush until now.



  public TopDocs search(Query query, Filter filter, final int nDocs, final String field_sort)
       throws IOException {
    Scorer scorer = query.weight(this).scorer(reader);
    if (scorer == null)
      return new TopDocs(0, new ScoreDoc[0]);

    final BitSet bits = filter != null ? filter.bits(reader) : null;
    final HitQueue hq = new HitQueue(nDocs);
    final int[] totalHits = new int[1];
    scorer.score(new HitCollector() {
        public final void collect(int doc, float score) {
        // this bloody piece of code fakes scorer to deliver results sorted by 
date 
        // because valid way runs into outOfMemory problem:( JGO 2004/08/31
        // note: modules touched - 
        // 
Searcher,Searchable,Hits,ParallelMultiSearcher,MultiSearcher,RemoteSearchable 
(these for new field field_sort)
        // ScoreDoc, FieldSortedHitQueue,Hits,FieldScore (these for float -> 
double)
          double new_score = score;
          String fval="";
          if (field_sort!=null){      //if null, just sort as usual by real score
                try {
                        new_score= new Double("0."+reader.document(doc).get(field_sort)+"d").doubleValue(); 
                } catch (IOException e) {
                        e.printStackTrace();
                }
          } 
                if (score > 0.0f &&                         // ignore zeroed buckets
              (bits==null || bits.get(doc))) {     // skip docs not in bits
            totalHits[0]++;
            hq.insert(new ScoreDoc(doc, new_score));
          }
        }
      });

    ScoreDoc[] scoreDocs = new ScoreDoc[hq.size()];
    for (int i = hq.size()-1; i >= 0; i--)    // put docs in array
      scoreDocs[i] = (ScoreDoc)hq.pop();

    return new TopDocs(totalHits[0], scoreDocs);
  }
 






Hi Iouli,

Sorry, I am having a very tight schedule at work right now. I don't have 
time to come up the test case. The problem is really related to the 
search(query,sort) method call. If you can come up the test case, that 
would be great.

Thanks,
Terence


> back to biz.
> 
> Terence,
> 
> probably u prepared it already or should I do it?
> 
> Otis,
> 
> actually it's just a common way to execute a query.
> 
> If  the code is like 
> 
> hits = ms.search(query);
> 
> or
> 
>   sort = new Sort(SortField.FIELD_DOC);
>   hits = ms.search(query,sort);
> 
> or even 
> 
>   filter = DateFilter("published",stamp_from,stamp_to);
>   sort = new Sort(SortField.FIELD_DOC);
>   hits = ms.search(query,filter,sort);
> 
> everything is ok, memory is getting free (you see it with top -p pid)
> 
> The problem starts only in case:
> 
>   sort = new Sort(new SortField("published_short",SortField.FLOAT, 
true));
>   hits = ms.search(query,sort);
> 
> The memory never comes back  and grows up with every iteration even You 
> start garbage collector explicitly and code runs somehow into finalize()
> 
> Regards
> J.
> 
> 
> 
> 
> 
> 
> 
> Iouli & Terence,
> 
> Could you create a self-sufficient test case that demonstrates the
> memory leak?  If you can do that, please open a new bug entry in
> Bugzilla (the link to it is on Lucene's home page), and then attach
> your test case to it.
> 
> Thanks!
> Otis
> 
> --- iouli.golovatyi@group.novartis.com wrote:
> 
> > Yes Terence, it's exactly what I do
> > 
> > 
> > 
> > 
> > 
> > 
> > Terence Lai <tlai@trekspace.com>
> > 21.08.2004 01:50
> > Please respond to "Lucene Users List"
> > 
> > 
> >         To:     Lucene Users List <lucene-user@jakarta.apache.org>
> >         cc: 
> >         Subject:        RE: memory leek in lucene?
> >         Category: 
> > 
> > 
> > 
> > Are you calling ParallelMultiSearcher.search(Query query, Sort sort)
> > to do 
> > your search? If so, I am currently having a similar problem.
> > 
> > Terence
> > 
> > > 
> > > Doing query against lucene  I run into memomry problem, i.e. it's
> > look 
> > like
> > > it's not giving memory back after the
> > > query have been  executed.
> > > 
> > > I use ParallelMultiSearcher ant call close method after results are
> > > displayed.
> > > ....
> > > hits=null; // Hits class
> > > if (ms!=null) ms.close(); //ParallelMultiSearcher
> > > ....
> > > Doesn't help. The memory getting not free. On queries like "No*" I
> > get
> > > incremental memory consume of c. 20-70mb. per query.
> > > Imagine what happens with my web server...
> > > 
> > > I tried also from command line and got the similar result.
> > > 
> > > Am I doing wrong or miss something?
> > > 
> > > Please help, I use 1.4.1 on linux box.
> > > Joel
> > > 
> > > 
> > > 
> > > 
> > > 
> > >
> > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > > For additional commands, e-mail:
> > lucene-user-help@jakarta.apache.org
> > > 
> > 
> > 
> > 
> > 
> > ----------------------------------------------------------
> > Get your free email account from http://www.trekspace.com
> >           Your Internet Virtual Desktop!
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> > 
> > 
> > 
> > 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 
> 
> 




----------------------------------------------------------
Get your free email account from http://www.trekspace.com
          Your Internet Virtual Desktop!




--=_alternative 00494F98C1256F04_=--

From lucene-user-return-10027-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 03 13:55:59 2004
Return-Path: <lucene-user-return-10027-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 83766 invoked from network); 3 Sep 2004 13:55:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Sep 2004 13:55:59 -0000
Received: (qmail 84248 invoked by uid 500); 3 Sep 2004 13:55:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 84107 invoked by uid 500); 3 Sep 2004 13:55:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 83987 invoked by uid 99); 3 Sep 2004 13:55:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [160.62.1.169] (HELO fw-mail12.novartis.com) (160.62.1.169)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 03 Sep 2004 06:55:35 -0700
Received: from mtap1.is.chbs ([192.37.33.20])
	by fw-mail12.novartis.com (Switch-3.1.6/Switch-3.1.6) with ESMTP id i83DtW0n21135500
	for <lucene-user@jakarta.apache.org>; Fri, 3 Sep 2004 15:55:32 +0200
Received: from phchbs-s3025.EU.novartis.net (phchbs-s3025.eu.novartis.net [192.37.31.249])
	by mtap1.is.chbs (Switch-3.1.6/Switch-3.1.0) with ESMTP id i83DtVGZ8626338
	for <lucene-user@jakarta.apache.org>; Fri, 3 Sep 2004 15:55:31 +0200
Subject: Concatinated search string in not working!
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Message-ID: <OF6C1749EF.A3C35F6C-ONC1256F04.004A4131-C1256F04.004C7DA8@EU.novartis.net>
From: iouli.golovatyi@group.novartis.com
Date: Fri, 3 Sep 2004 15:55:29 +0200
MIME-Version: 1.0
Content-type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Trying to search by two fields I got nothing.

The fields where  created like:

String provider =....
doc.add(Field.Keyword("provider", provider));
...
InputStreamReader input = new InputStreamReader( new ByteArrayInputStream(
contents ) );
document.add(Field.Text("contents", input ));

Searching code looks like:


...
   public class NeisQueryParser extends QueryParser{
            NeisQueryParser(){
            super("contents", analyzer); // PorterStemAnalyzer is used
      }
    }
   ...
   line= "Diovan and provider:NewsEdge";

   NeisQueryParser nqp=new NeisQueryParser();
   if (and) nqp.setOperator(NeisQueryParser.DEFAULT_OPERATOR_AND);
   else     nqp.setOperator(NeisQueryParser.DEFAULT_OPERATOR_OR);
   Query query = nqp.parse(line);

   hits = ms.search(query, getCurrentTimeFilter());

The parsing query  comes like

+contents:diovan +provider:newsedg

what I realy not undestand, because the "provider" field should not be
tokenized.

In case the line ="Diovan" I see results. Provider field I see as well
containing  "NewsEdge".

What I do wrong? Please help.

J.




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10028-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 03 14:35:10 2004
Return-Path: <lucene-user-return-10028-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 4680 invoked from network); 3 Sep 2004 14:35:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Sep 2004 14:35:10 -0000
Received: (qmail 74341 invoked by uid 500); 3 Sep 2004 14:35:01 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 74251 invoked by uid 500); 3 Sep 2004 14:35:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 74236 invoked by uid 99); 3 Sep 2004 14:35:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [205.158.62.107] (HELO ws6-4.us4.outblaze.com) (205.158.62.107)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 03 Sep 2004 07:34:57 -0700
Received: (qmail 25706 invoked from network); 3 Sep 2004 14:34:56 -0000
Received: from unknown (HELO ?192.168.1.102?) (erik@hatcher.net@68.169.41.169)
  by mta5-2.us4.outblaze.com with SMTP; 3 Sep 2004 14:34:56 -0000
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <OF6C1749EF.A3C35F6C-ONC1256F04.004A4131-C1256F04.004C7DA8@EU.novartis.net>
References: <OF6C1749EF.A3C35F6C-ONC1256F04.004A4131-C1256F04.004C7DA8@EU.novartis.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <6ABB1300-FDB6-11D8-9E88-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Concatinated search string in not working!
Date: Fri, 3 Sep 2004 10:34:52 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

The "Keyword"-ness of a field is only at indexing time, and not 
something known about at query time.

You need to use a different analyzer for that field.  Check out posts 
on KeywordAnalyzer and PerFieldAnalyzerWrapper - this combination is 
the secret :)

	Erik



On Sep 3, 2004, at 9:55 AM, iouli.golovatyi@group.novartis.com wrote:

>
> Trying to search by two fields I got nothing.
>
> The fields where  created like:
>
> String provider =....
> doc.add(Field.Keyword("provider", provider));
> ...
> InputStreamReader input = new InputStreamReader( new 
> ByteArrayInputStream(
> contents ) );
> document.add(Field.Text("contents", input ));
>
> Searching code looks like:
>
>
> ...
>    public class NeisQueryParser extends QueryParser{
>             NeisQueryParser(){
>             super("contents", analyzer); // PorterStemAnalyzer is used
>       }
>     }
>    ...
>    line= "Diovan and provider:NewsEdge";
>
>    NeisQueryParser nqp=new NeisQueryParser();
>    if (and) nqp.setOperator(NeisQueryParser.DEFAULT_OPERATOR_AND);
>    else     nqp.setOperator(NeisQueryParser.DEFAULT_OPERATOR_OR);
>    Query query = nqp.parse(line);
>
>    hits = ms.search(query, getCurrentTimeFilter());
>
> The parsing query  comes like
>
> +contents:diovan +provider:newsedg
>
> what I realy not undestand, because the "provider" field should not be
> tokenized.
>
> In case the line ="Diovan" I see results. Provider field I see as well
> containing  "NewsEdge".
>
> What I do wrong? Please help.
>
> J.
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10029-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 03 18:51:36 2004
Return-Path: <lucene-user-return-10029-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 62456 invoked from network); 3 Sep 2004 18:51:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Sep 2004 18:51:36 -0000
Received: (qmail 42854 invoked by uid 500); 3 Sep 2004 18:51:27 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 42810 invoked by uid 500); 3 Sep 2004 18:51:27 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 42790 invoked by uid 99); 3 Sep 2004 18:51:26 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [12.43.53.196] (HELO mail.sofari.com) (12.43.53.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 03 Sep 2004 11:51:24 -0700
Received: from [192.168.1.103] ([12.43.53.196])
	by mail.sofari.com (8.12.11/8.12.3/Debian-6.6) with ESMTP id i83IpIHP028201
	for <lucene-user@jakarta.apache.org>; Fri, 3 Sep 2004 11:51:19 -0700
Message-ID: <4138BD16.1030007@newsmonster.org>
Date: Fri, 03 Sep 2004 11:51:02 -0700
From: "Kevin A. Burton" <burton@newsmonster.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7) Gecko/20040616
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Patch for IndexWriter.close which prevents NPE...
Content-Type: multipart/mixed;
 boundary="------------090506060105060209010106"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--------------090506060105060209010106
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

I just attached a patch which:

1. prevents multiple close() of an IndexWriter

2. prevents an NPE if the writeLock was null.

We have been noticing this from time to time and I haven't been able to 
come up with a hard test case.  This is just a bit of defensive 
programming to prevent it from happening in the first place.  It would 
happen from time to time without any reliable cause.

Anyway...

Thanks...

Kevin

-- 

Please reply using PGP.

    http://peerfear.org/pubkey.asc    
    
    NewsMonster - http://www.newsmonster.org/
    
Kevin A. Burton, Location - San Francisco, CA, Cell - 415.595.9965
       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
  IRC - freenode.net #infoanarchy | #p2p-hackers | #newsmonster


--------------090506060105060209010106
Content-Type: text/plain;
 name="index-writer-close.patch"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="index-writer-close.patch"

--- IndexWriter.java.bak.close	2004-09-03 11:27:37.000000000 -0700
+++ IndexWriter.java	2004-09-03 11:32:02.000000000 -0700
@@ -107,6 +107,11 @@
    */  
   private boolean useCompoundFile = false;
 
+  /**
+   * True when we have closed this IndexWriter
+   */
+  protected boolean isClosed = false;
+    
   /** Setting to turn on usage of a compound file. When on, multiple files
    *  for each segment are merged into a single file once the segment creation
    *  is finished. This is done regardless of what directory is in use.
@@ -183,15 +188,27 @@
         }.run();
     }
   }
-
+    
   /** Flushes all changes to an index, closes all associated files, and closes
     the directory that the index is stored in. */
   public synchronized void close() throws IOException {
+
+    if ( isClosed ) {
+      return;
+    }
+
     flushRamSegments();
     ramDirectory.close();
-    writeLock.release();                          // release write lock
+
+    if ( writeLock != null ) {
+      // release write lock
+      writeLock.release();
+    }
+
     writeLock = null;
     directory.close();
+    isClosed = true;
+      
   }
 
   /** Release the write lock, if needed. */


--------------090506060105060209010106
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
--------------090506060105060209010106--

From lucene-user-return-10030-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 03 18:53:58 2004
Return-Path: <lucene-user-return-10030-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 63748 invoked from network); 3 Sep 2004 18:53:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Sep 2004 18:53:58 -0000
Received: (qmail 49585 invoked by uid 500); 3 Sep 2004 18:53:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 49534 invoked by uid 500); 3 Sep 2004 18:53:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 49520 invoked by uid 99); 3 Sep 2004 18:53:49 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=MSGID_FROM_MTA_HEADER,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.168.230.140] (HELO omr4.netsolmail.com) (216.168.230.140)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 03 Sep 2004 11:53:48 -0700
Received: from ms6.netsolmail.com (IDENT:mirapoint@[216.168.230.179])
	by omr4.netsolmail.com (8.12.10/8.12.10) with ESMTP id i83IrhhC008685
	for <lucene-user@jakarta.apache.org>; Fri, 3 Sep 2004 14:53:45 -0400 (EDT)
Received: from ms6.netsolmail.com (localhost.netsolmail.com [127.0.0.1])
	by ms6.netsolmail.com (Mirapoint Messaging Server MOS 3.2.2-GA)
	with ESMTP id CCA14991;
	Fri, 3 Sep 2004 14:53:42 -0400 (EDT)
From: <dhatcher@webtads.com>
Message-Id: <200409031853.CCA14991@ms6.netsolmail.com>
Received: from 128.158.44.123
	by ms6.netsolmail.com (Mirapoint Messaging Server MOS 3.2.2-GA)
	with HTTP/1.1;
	Fri, 3 Sep 2004 14:53:42 -0400
Date: Fri, 3 Sep 2004 14:53:42 -0400
Subject: Build problems
To: Lucene Users List <lucene-user@jakarta.apache.org>
X-Mailer: Webmail Mirapoint Direct 3.2.2-GA
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I'm trying to build Lucene with ant (in XP) from the prompt  
I got the ant-optional.jar from 
http://archive.apache.org/dist/ant/binaries/ because I 
couldn't find it anywhere else.  I'm running the newest 
version of ant and when I go into the lucene base directory 
and type 'ant' it finds the build.xml file but then gives the 
following error:  

BUILD FAILED
C:\lucene\build.xml:140: srcdir "C:\lucene\src\java" does not 
exist!

What am I doing wrong?

Danny Hatcher

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10031-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 03 19:28:39 2004
Return-Path: <lucene-user-return-10031-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 92265 invoked from network); 3 Sep 2004 19:28:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Sep 2004 19:28:39 -0000
Received: (qmail 8521 invoked by uid 500); 3 Sep 2004 19:28:32 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 8387 invoked by uid 500); 3 Sep 2004 19:28:31 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 8369 invoked by uid 99); 3 Sep 2004 19:28:31 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.109.24.32] (HELO smtp-vbr12.xs4all.nl) (194.109.24.32)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 03 Sep 2004 12:28:29 -0700
Received: from k7l.local (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr12.xs4all.nl (8.12.11/8.12.11) with ESMTP id i83JSRga028523
	for <lucene-user@jakarta.apache.org>; Fri, 3 Sep 2004 21:28:27 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: lucene-user@jakarta.apache.org
Subject: Re: Build problems
Date: Fri, 3 Sep 2004 21:28:26 +0200
User-Agent: KMail/1.5.4
References: <200409031853.CCA14991@ms6.netsolmail.com>
In-Reply-To: <200409031853.CCA14991@ms6.netsolmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200409032128.26623.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Danny,

On Friday 03 September 2004 20:53, dhatcher@webtads.com wrote:
> I'm trying to build Lucene with ant (in XP) from the prompt
> I got the ant-optional.jar from
> http://archive.apache.org/dist/ant/binaries/ because I
> couldn't find it anywhere else.  I'm running the newest
> version of ant and when I go into the lucene base directory
> and type 'ant' it finds the build.xml file but then gives the
> following error:
>
> BUILD FAILED
> C:\lucene\build.xml:140: srcdir "C:\lucene\src\java" does not
> exist!
>

The src/java directory normally contains the java source files.

Since that directory doesn't exist you may want to create it
by installing the sources, eg. by checking out from cvs, or
from a jar or that contains the java sources here:
http://dist.apache.easynet.nl/jakarta/lucene/source/

Lucene 1.4.1 is out, but it's not available there yet.
In case you want that version please ask on lucene-dev.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10032-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 03 20:54:59 2004
Return-Path: <lucene-user-return-10032-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21246 invoked from network); 3 Sep 2004 20:54:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Sep 2004 20:54:59 -0000
Received: (qmail 52941 invoked by uid 500); 3 Sep 2004 20:54:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 52858 invoked by uid 500); 3 Sep 2004 20:54:52 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 52845 invoked by uid 99); 3 Sep 2004 20:54:52 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=HTML_90_100,HTML_MESSAGE,HTML_TEXT_AFTER_BODY,HTML_TEXT_AFTER_HTML
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [200.61.168.200] (HELO gandalf.xlnet.net.ar) (200.61.168.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 03 Sep 2004 13:54:51 -0700
Received: from exchange.xlnet.net.ar (10.0.0.3) by gandalf.xlnet.net.ar (NPlex 5.1.036)
        id 412BA52000035DD5 for lucene-user@jakarta.apache.org; Fri, 3 Sep 2004 17:57:00 -0300
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C491F8.8B8EF4A2"
Subject: about search sorting 
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Date: Fri, 3 Sep 2004 17:56:55 -0300
Message-ID: <DDD3F807D283B543B3396F7E00A2C7E125F2E0@exchange.xlnet.net.ar>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: about search sorting 
Thread-Index: AcSR+MIFtdnG9iXmQR6kWx62eQ+Bng==
From: "Wermus Fernando" <fernando.wermus@xlnet.net.ar>
To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C491F8.8B8EF4A2
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

=20
Luceners,
My app is creating, updating and deleting from the index and searching
too. I need some information about sorting by a field. Does any one
could send me a link related to sorting?
=20
Thanks in advance.
=20
=20

------_=_NextPart_001_01C491F8.8B8EF4A2--

From lucene-user-return-10033-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 03 21:34:59 2004
Return-Path: <lucene-user-return-10033-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 32183 invoked from network); 3 Sep 2004 21:34:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Sep 2004 21:34:58 -0000
Received: (qmail 94291 invoked by uid 500); 3 Sep 2004 21:34:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 94264 invoked by uid 500); 3 Sep 2004 21:34:52 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 94251 invoked by uid 99); 3 Sep 2004 21:34:52 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 03 Sep 2004 14:34:50 -0700
Received: (qmail 766 invoked by uid 532); 3 Sep 2004 21:32:35 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.119677 secs); 03 Sep 2004 21:32:35 -0000
Received: from unknown (HELO tropo.com) (127.0.0.1)
  by 0 with SMTP; 3 Sep 2004 21:32:35 -0000
Message-ID: <4138E375.6060308@tropo.com>
Date: Fri, 03 Sep 2004 14:34:45 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7b) Gecko/20040316
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: about search sorting
References: <DDD3F807D283B543B3396F7E00A2C7E125F2E0@exchange.xlnet.net.ar>
In-Reply-To: <DDD3F807D283B543B3396F7E00A2C7E125F2E0@exchange.xlnet.net.ar>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Wermus Fernando wrote:

>  
> Luceners,
> My app is creating, updating and deleting from the index and searching
> too. I need some information about sorting by a field. Does any one
> could send me a link related to sorting?
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/search/Sort.html

>  
> Thanks in advance.
>  
>  
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10034-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Sep 04 05:27:29 2004
Return-Path: <lucene-user-return-10034-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 1000 invoked from network); 4 Sep 2004 05:27:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Sep 2004 05:27:29 -0000
Received: (qmail 49093 invoked by uid 500); 4 Sep 2004 05:27:10 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 49067 invoked by uid 500); 4 Sep 2004 05:27:10 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 49052 invoked by uid 99); 4 Sep 2004 05:27:09 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of rociel.buico@gmail.com designates 64.233.170.207 as permitted sender)
Received: from [64.233.170.207] (HELO mproxy.gmail.com) (64.233.170.207)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 03 Sep 2004 22:27:06 -0700
Received: by mproxy.gmail.com with SMTP id 80so42123rnk
        for <lucene-user@jakarta.apache.org>; Fri, 03 Sep 2004 22:27:04 -0700 (PDT)
Received: by 10.38.179.6 with SMTP id b6mr548496rnf;
        Fri, 03 Sep 2004 22:27:04 -0700 (PDT)
Received: by 10.38.179.80 with HTTP; Fri, 3 Sep 2004 22:27:03 -0700 (PDT)
Message-ID: <1ff1ea2f04090322278b91c40@mail.gmail.com>
Date: Sat, 4 Sep 2004 13:27:03 +0800
From: "rociel.buico@gmail.com" <rociel.buico@gmail.com>
Reply-To: "rociel.buico@gmail.com" <rociel.buico@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: memory leek in lucene?
In-Reply-To: <OF0019646E.4F824EBA-ONC1256F04.00493873-C1256F04.00494F9B@EU.novartis.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <OF0019646E.4F824EBA-ONC1256F04.00493873-C1256F04.00494F9B@EU.novartis.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I also have problems regarding my application, 
what would be the ideal memory allocation for lucene
considering my application will serve at least 20 transactions per second?

tia
--buics


On Fri, 3 Sep 2004 15:20:45 +0200, iouli.golovatyi@group.novartis.com
<iouli.golovatyi@group.novartis.com> wrote:
> Terence,
> 
> still had not not time to prepare a test case, but... I worked around it:
> 
> The idea is to replace the score with timestamp on populating hits (in
> case You are not interesting too much in real score), where the field_sort
> is in "yyyyMMddHHmm" etc. format.
> Works fine, at least no outOfMemory crush until now.
> 
>   public TopDocs search(Query query, Filter filter, final int nDocs, final String field_sort)
>        throws IOException {
>     Scorer scorer = query.weight(this).scorer(reader);
>     if (scorer == null)
>       return new TopDocs(0, new ScoreDoc[0]);
> 
>     final BitSet bits = filter != null ? filter.bits(reader) : null;
>     final HitQueue hq = new HitQueue(nDocs);
>     final int[] totalHits = new int[1];
>     scorer.score(new HitCollector() {
>         public final void collect(int doc, float score) {
>         // this bloody piece of code fakes scorer to deliver results sorted by
> date
>         // because valid way runs into outOfMemory problem:( JGO 2004/08/31
>         // note: modules touched -
>         //
> Searcher,Searchable,Hits,ParallelMultiSearcher,MultiSearcher,RemoteSearchable
> (these for new field field_sort)
>         // ScoreDoc, FieldSortedHitQueue,Hits,FieldScore (these for float ->
> double)
>           double new_score = score;
>           String fval="";
>           if (field_sort!=null){      //if null, just sort as usual by real score
>                 try {
>                         new_score= new Double("0."+reader.document(doc).get(field_sort)+"d").doubleValue();
>                 } catch (IOException e) {
>                         e.printStackTrace();
>                 }
>           }
>                 if (score > 0.0f &&                         // ignore zeroed buckets
>               (bits==null || bits.get(doc))) {     // skip docs not in bits
>             totalHits[0]++;
>             hq.insert(new ScoreDoc(doc, new_score));
>           }
>         }
>       });
> 
>     ScoreDoc[] scoreDocs = new ScoreDoc[hq.size()];
>     for (int i = hq.size()-1; i >= 0; i--)    // put docs in array
>       scoreDocs[i] = (ScoreDoc)hq.pop();
> 
>     return new TopDocs(totalHits[0], scoreDocs);
>   }
> 
> Hi Iouli,
> 
> Sorry, I am having a very tight schedule at work right now. I don't have
> time to come up the test case. The problem is really related to the
> search(query,sort) method call. If you can come up the test case, that
> would be great.
> 
> Thanks,
> Terence
> 
> > back to biz.
> >
> > Terence,
> >
> > probably u prepared it already or should I do it?
> >
> > Otis,
> >
> > actually it's just a common way to execute a query.
> >
> > If  the code is like
> >
> > hits = ms.search(query);
> >
> > or
> >
> >   sort = new Sort(SortField.FIELD_DOC);
> >   hits = ms.search(query,sort);
> >
> > or even
> >
> >   filter = DateFilter("published",stamp_from,stamp_to);
> >   sort = new Sort(SortField.FIELD_DOC);
> >   hits = ms.search(query,filter,sort);
> >
> > everything is ok, memory is getting free (you see it with top -p pid)
> >
> > The problem starts only in case:
> >
> >   sort = new Sort(new SortField("published_short",SortField.FLOAT,
> true));
> >   hits = ms.search(query,sort);
> >
> > The memory never comes back  and grows up with every iteration even You
> > start garbage collector explicitly and code runs somehow into finalize()
> >
> > Regards
> > J.
> >
> >
> >
> >
> >
> >
> >
> > Iouli & Terence,
> >
> > Could you create a self-sufficient test case that demonstrates the
> > memory leak?  If you can do that, please open a new bug entry in
> > Bugzilla (the link to it is on Lucene's home page), and then attach
> > your test case to it.
> >
> > Thanks!
> > Otis
> >
> > --- iouli.golovatyi@group.novartis.com wrote:
> >
> > > Yes Terence, it's exactly what I do
> > >
> > >
> > >
> > >
> > >
> > >
> > > Terence Lai <tlai@trekspace.com>
> > > 21.08.2004 01:50
> > > Please respond to "Lucene Users List"
> > >
> > >
> > >         To:     Lucene Users List <lucene-user@jakarta.apache.org>
> > >         cc:
> > >         Subject:        RE: memory leek in lucene?
> > >         Category:
> > >
> > >
> > >
> > > Are you calling ParallelMultiSearcher.search(Query query, Sort sort)
> > > to do
> > > your search? If so, I am currently having a similar problem.
> > >
> > > Terence
> > >
> > > >
> > > > Doing query against lucene  I run into memomry problem, i.e. it's
> > > look
> > > like
> > > > it's not giving memory back after the
> > > > query have been  executed.
> > > >
> > > > I use ParallelMultiSearcher ant call close method after results are
> > > > displayed.
> > > > ....
> > > > hits=null; // Hits class
> > > > if (ms!=null) ms.close(); //ParallelMultiSearcher
> > > > ....
> > > > Doesn't help. The memory getting not free. On queries like "No*" I
> > > get
> > > > incremental memory consume of c. 20-70mb. per query.
> > > > Imagine what happens with my web server...
> > > >
> > > > I tried also from command line and got the similar result.
> > > >
> > > > Am I doing wrong or miss something?
> > > >
> > > > Please help, I use 1.4.1 on linux box.
> > > > Joel
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > > > For additional commands, e-mail:
> > > lucene-user-help@jakarta.apache.org
> > > >
> > >
> > >
> > >
> > >
> > > ----------------------------------------------------------
> > > Get your free email account from http://www.trekspace.com
> > >           Your Internet Virtual Desktop!
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> > >
> > >
> > >
> > >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
> >
> >
> 
> ----------------------------------------------------------
> Get your free email account from http://www.trekspace.com
>           Your Internet Virtual Desktop!
> 
> 



-- 
"Programs must be written for people to read, and only incidentally
for machines to execute."

- Abelson & Sussman, SICP, preface to the first edition

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10035-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Sep 05 03:06:14 2004
Return-Path: <lucene-user-return-10035-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 14535 invoked from network); 5 Sep 2004 03:06:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Sep 2004 03:06:13 -0000
Received: (qmail 30599 invoked by uid 500); 5 Sep 2004 03:06:07 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 30379 invoked by uid 500); 5 Sep 2004 03:06:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 30365 invoked by uid 99); 5 Sep 2004 03:06:05 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
  by apache.org (qpsmtpd/0.28) with SMTP; Sat, 04 Sep 2004 20:06:05 -0700
Received: from synergy1.parc.xerox.com ([13.1.101.60]) by alpha.xerox.com with SMTP id <221546(1)>; Sat, 4 Sep 2004 20:05:42 PDT
Received: by synergy1.parc.xerox.com id <58612>; Sat, 4 Sep 2004 20:05:36 PDT
Sender: Bill Janssen <janssen@parc.com>
From: Bill Janssen <janssen@parc.com>
To: lucene-user@jakarta.apache.org
Subject: telling one version of the index from another?
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Message-Id: <04Sep4.200536pdt."58612"@synergy1.parc.xerox.com>
Date: Sat, 4 Sep 2004 20:05:28 PDT
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi.

I've got a Lucene application that's been in use for about two years.
Some users are using Lucene 1.2, some 1.3, and some are moving to 1.4.
The indices seem to behave differently under each version.  I'd like
to add code to my application that checks the current user's index
version against the version of Lucene that they are using, and
automatically re-indexes their files if necessary.  However, I can't
figure out how to tell the version, from the index files.

The documentation on the file formats, at
http://jakarta.apache.org/lucene/docs/fileformats.html, directs me to
the "segments" file.  However, when I look at a version 1.3 segments
file, it seems to bear little relationship to the format described in
fileformats.html.  But the part of fileformats.html dealing with the
segments file contains no "compatibility notes", so I assume it hasn't
changed since 1.3.  Even if it had, what's the idea of using -1 as the
format number for 1.4?

So, anyone know a way to tell the difference between the various
versions of the index files?  Crufty hacks welcome :-).

Bill

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10036-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Sep 05 08:16:17 2004
Return-Path: <lucene-user-return-10036-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 96612 invoked from network); 5 Sep 2004 08:16:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Sep 2004 08:16:16 -0000
Received: (qmail 76373 invoked by uid 500); 5 Sep 2004 08:16:10 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 76347 invoked by uid 500); 5 Sep 2004 08:16:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 76330 invoked by uid 99); 5 Sep 2004 08:16:09 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [12.43.53.196] (HELO mail.sofari.com) (12.43.53.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 05 Sep 2004 01:16:07 -0700
Received: from [192.168.1.101] (dsl093-132-107.sfo4.dsl.speakeasy.net [66.93.132.107])
	by mail.sofari.com (8.12.11/8.12.3/Debian-6.6) with ESMTP id i858G3jn018807
	for <lucene-user@jakarta.apache.org>; Sun, 5 Sep 2004 01:16:04 -0700
Message-ID: <413ACB43.9050703@newsmonster.org>
Date: Sun, 05 Sep 2004 01:16:03 -0700
From: "Kevin A. Burton" <burton@newsmonster.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7) Gecko/20040616
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Possible to remove duplicate documents in sort API?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I want to sort a result set but perform a group by as well... IE remove 
duplicate items. 

Is this possible with the new API?  Seems like a huge drawback to lucene 
right now.

Kevin

-- 

Please reply using PGP.

    http://peerfear.org/pubkey.asc    
    
    NewsMonster - http://www.newsmonster.org/
    
Kevin A. Burton, Location - San Francisco, CA, Cell - 415.595.9965
       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
  IRC - freenode.net #infoanarchy | #p2p-hackers | #newsmonster


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10037-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Sep 05 14:41:53 2004
Return-Path: <lucene-user-return-10037-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 92810 invoked from network); 5 Sep 2004 14:41:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Sep 2004 14:41:53 -0000
Received: (qmail 67892 invoked by uid 500); 5 Sep 2004 14:41:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 67867 invoked by uid 500); 5 Sep 2004 14:41:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 67852 invoked by uid 99); 5 Sep 2004 14:41:45 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.109.24.25] (HELO smtp-vbr5.xs4all.nl) (194.109.24.25)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 05 Sep 2004 07:41:45 -0700
Received: from k7l.local (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr5.xs4all.nl (8.12.11/8.12.11) with ESMTP id i85EfgqB036004
	for <lucene-user@jakarta.apache.org>; Sun, 5 Sep 2004 16:41:43 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: lucene-user@jakarta.apache.org
Subject: Re: Possible to remove duplicate documents in sort API?
Date: Sun, 5 Sep 2004 16:41:42 +0200
User-Agent: KMail/1.5.4
References: <413ACB43.9050703@newsmonster.org>
In-Reply-To: <413ACB43.9050703@newsmonster.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200409051641.42913.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Kevin,

On Sunday 05 September 2004 10:16, Kevin A. Burton wrote:
> I want to sort a result set but perform a group by as well... IE remove
> duplicate items.

Could you be more precise?

> Is this possible with the new API?  Seems like a huge drawback to lucene
> right now.

In case you can define another field that defines what is a duplicate
by having the same value for duplicates, you can use it as one of the
SortField's for sorting.

Regards,
Paul Elschot



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10038-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Sep 05 21:03:22 2004
Return-Path: <lucene-user-return-10038-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 14943 invoked from network); 5 Sep 2004 21:03:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Sep 2004 21:03:22 -0000
Received: (qmail 25495 invoked by uid 500); 5 Sep 2004 21:03:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 25429 invoked by uid 500); 5 Sep 2004 21:03:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 25411 invoked by uid 99); 5 Sep 2004 21:03:15 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [209.133.52.163] (HELO www.zrnetservice.com) (209.133.52.163)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 05 Sep 2004 14:03:14 -0700
Received: from adsl-67-114-20-29.dsl.pltn13.pacbell.net ([67.114.20.29] helo=zrnet-Cole_Valley_Cafe.zrnetservice.com)
	by www.zrnetservice.com with asmtp (Exim 3.35 #1 (Debian))
	id 1C44AH-0003ew-00
	for <lucene-user@jakarta.apache.org>; Sun, 05 Sep 2004 14:03:09 -0700
Received: from [10.100.1.251] (helo=[10.100.1.251])
	by zrnet-Cole_Valley_Cafe.zrnetservice.com with esmtp (Exim 3.36 #1 (Debian))
	id 1C44AG-0005Xa-00
	for <lucene-user@jakarta.apache.org>; Sun, 05 Sep 2004 14:03:08 -0700
Message-ID: <413B7F0C.6080700@newsmonster.org>
Date: Sun, 05 Sep 2004 14:03:08 -0700
From: "Kevin A. Burton" <burton@newsmonster.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7) Gecko/20040616
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Why doesn't Document use a HashSet instead of a LinkedList (DocumentFieldList)
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

It looks like Document.java uses its own implementation of a LinkedList..

Why not use a HashMap to enable O(1) lookup... right now field lookup is 
O(N) which is certainly no fun.

Was this benchmarked?  Perhaps theres the assumption that since 
documents often have few fields the object overhead and hashcode 
overhead would have been less this way.

Kevin

-- 

Please reply using PGP.

    http://peerfear.org/pubkey.asc    
    
    NewsMonster - http://www.newsmonster.org/
    
Kevin A. Burton, Location - San Francisco, CA, Cell - 415.595.9965
       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
  IRC - freenode.net #infoanarchy | #p2p-hackers | #newsmonster


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10039-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Sep 05 21:14:11 2004
Return-Path: <lucene-user-return-10039-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 18278 invoked from network); 5 Sep 2004 21:14:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Sep 2004 21:14:11 -0000
Received: (qmail 33418 invoked by uid 500); 5 Sep 2004 21:14:10 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 32621 invoked by uid 500); 5 Sep 2004 21:13:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 32607 invoked by uid 99); 5 Sep 2004 21:13:55 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=FORGED_RCVD_HELO,HTML_40_50,HTML_MESSAGE,HTML_TITLE_EMPTY
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [209.133.52.163] (HELO www.zrnetservice.com) (209.133.52.163)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 05 Sep 2004 14:13:53 -0700
Received: from adsl-67-114-20-29.dsl.pltn13.pacbell.net ([67.114.20.29] helo=zrnet-Cole_Valley_Cafe.zrnetservice.com)
	by www.zrnetservice.com with asmtp (Exim 3.35 #1 (Debian))
	id 1C44Ke-0004Gs-00
	for <lucene-user@jakarta.apache.org>; Sun, 05 Sep 2004 14:13:52 -0700
Received: from [10.100.1.251] (helo=[10.100.1.251])
	by zrnet-Cole_Valley_Cafe.zrnetservice.com with esmtp (Exim 3.36 #1 (Debian))
	id 1C44Kd-0005dB-00
	for <lucene-user@jakarta.apache.org>; Sun, 05 Sep 2004 14:13:51 -0700
Message-ID: <413B818F.3070200@newsmonster.org>
Date: Sun, 05 Sep 2004 14:13:51 -0700
From: "Kevin A. Burton" <burton@newsmonster.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7) Gecko/20040616
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Possible to remove duplicate documents in sort API?
References: <413ACB43.9050703@newsmonster.org> <200409051641.42913.paul.elschot@xs4all.nl>
In-Reply-To: <200409051641.42913.paul.elschot@xs4all.nl>
Content-Type: multipart/alternative;
 boundary="------------090401060003050605060206"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--------------090401060003050605060206
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Paul Elschot wrote:

>Kevin,
>
>On Sunday 05 September 2004 10:16, Kevin A. Burton wrote:
>  
>
>>I want to sort a result set but perform a group by as well... IE remove
>>duplicate items.
>>    
>>
>
>Could you be more precise?
>
>  
>
My problem is that I have two machines... one for searching, one for 
indexing.

The searcher has an existing index.

The indexer found an UPDATED document and then adds it to a new index 
and pushes that new index over to the searcher.

The searcher then reloads and when someone performs a search BOTH 
documents could show up (including the stale document).

I can't do a delete() on the searcher because the indexer doesn't have 
the entire index as the searcher.

Therefore I wanted to group by the same document ID but this doesn't 
seem possible.  This should suppress the stale document and prefer the 
newer doc.

>>Is this possible with the new API?  Seems like a huge drawback to lucene
>>right now.
>>    
>>
>
>In case you can define another field that defines what is a duplicate
>by having the same value for duplicates, you can use it as one of the
>SortField's for sorting.
>
>  
>
I have this duplicate field...

Kevin


-- 

Please reply using PGP.

    http://peerfear.org/pubkey.asc    
    
    NewsMonster - http://www.newsmonster.org/
    
Kevin A. Burton, Location - San Francisco, CA, Cell - 415.595.9965
       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
  IRC - freenode.net #infoanarchy | #p2p-hackers | #newsmonster


--------------090401060003050605060206--

From lucene-user-return-10040-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Sep 05 21:17:23 2004
Return-Path: <lucene-user-return-10040-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 19822 invoked from network); 5 Sep 2004 21:17:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Sep 2004 21:17:23 -0000
Received: (qmail 37838 invoked by uid 500); 5 Sep 2004 21:17:18 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 37608 invoked by uid 500); 5 Sep 2004 21:17:16 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 37593 invoked by uid 99); 5 Sep 2004 21:17:16 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [209.133.52.163] (HELO www.zrnetservice.com) (209.133.52.163)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 05 Sep 2004 14:17:16 -0700
Received: from adsl-67-114-20-29.dsl.pltn13.pacbell.net ([67.114.20.29] helo=zrnet-Cole_Valley_Cafe.zrnetservice.com)
	by www.zrnetservice.com with asmtp (Exim 3.35 #1 (Debian))
	id 1C44Nv-0004WT-00
	for <lucene-user@jakarta.apache.org>; Sun, 05 Sep 2004 14:17:15 -0700
Received: from [10.100.1.251] (helo=[10.100.1.251])
	by zrnet-Cole_Valley_Cafe.zrnetservice.com with esmtp (Exim 3.36 #1 (Debian))
	id 1C44Nu-0005fh-00
	for <lucene-user@jakarta.apache.org>; Sun, 05 Sep 2004 14:17:14 -0700
Message-ID: <413B825A.7030801@newsmonster.org>
Date: Sun, 05 Sep 2004 14:17:14 -0700
From: "Kevin A. Burton" <burton@newsmonster.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7) Gecko/20040616
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Anyone avail for Lucene consulting or employment in the SF area?
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hope no one considers this spam ;)

We're hiring either someone full-time who has strong experience with 
Java, Lucene, and Jakarta technologies or someone to act as a consultant 
working on Lucene for about a month optimizing our search infra.

This is for a startup located in downtown SF.

Send me an email including your resume (html or text only) and I'll 
respond with full details.

Kevin

-- 

Please reply using PGP.

    http://peerfear.org/pubkey.asc    
    
    NewsMonster - http://www.newsmonster.org/
    
Kevin A. Burton, Location - San Francisco, CA, Cell - 415.595.9965
       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
  IRC - freenode.net #infoanarchy | #p2p-hackers | #newsmonster


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10041-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 06 09:24:29 2004
Return-Path: <lucene-user-return-10041-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 10926 invoked from network); 6 Sep 2004 09:24:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 6 Sep 2004 09:24:28 -0000
Received: (qmail 22148 invoked by uid 500); 6 Sep 2004 09:24:18 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 22041 invoked by uid 500); 6 Sep 2004 09:24:17 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 22028 invoked by uid 99); 6 Sep 2004 09:24:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of rociel.buico@gmail.com designates 64.233.170.207 as permitted sender)
Received: from [64.233.170.207] (HELO mproxy.gmail.com) (64.233.170.207)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 06 Sep 2004 02:24:17 -0700
Received: by mproxy.gmail.com with SMTP id 80so103299rnk
        for <lucene-user@jakarta.apache.org>; Mon, 06 Sep 2004 02:24:15 -0700 (PDT)
Received: by 10.38.179.6 with SMTP id b6mr1496584rnf;
        Mon, 06 Sep 2004 02:24:15 -0700 (PDT)
Received: by 10.38.179.80 with HTTP; Mon, 6 Sep 2004 02:24:15 -0700 (PDT)
Message-ID: <1ff1ea2f04090602241cecc006@mail.gmail.com>
Date: Mon, 6 Sep 2004 17:24:15 +0800
From: "rociel.buico@gmail.com" <rociel.buico@gmail.com>
Reply-To: "rociel.buico@gmail.com" <rociel.buico@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: problem in IndexSearcher
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

java.io.IOException: Lock obtain timed out

I was trying to create two instance of IndexSearcher with different index files

Is there something i've missed?

tia, 
buics

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10042-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 06 14:13:23 2004
Return-Path: <lucene-user-return-10042-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 74433 invoked from network); 6 Sep 2004 14:13:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 6 Sep 2004 14:13:23 -0000
Received: (qmail 85077 invoked by uid 500); 6 Sep 2004 14:13:15 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 85031 invoked by uid 500); 6 Sep 2004 14:13:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 85017 invoked by uid 99); 6 Sep 2004 14:13:13 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [160.62.1.169] (HELO fw-mail12.novartis.com) (160.62.1.169)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 06 Sep 2004 07:13:12 -0700
Received: from mtap1.is.chbs ([192.37.33.20])
	by fw-mail12.novartis.com (Switch-3.1.6/Switch-3.1.6) with ESMTP id i86ED84219996820
	for <lucene-user@jakarta.apache.org>; Mon, 6 Sep 2004 16:13:08 +0200
Received: from phchbs-s3025.EU.novartis.net (phchbs-s3025.eu.novartis.net [192.37.31.249])
	by mtap1.is.chbs (Switch-3.1.6/Switch-3.1.0) with ESMTP id i86ED8iJ13205562
	for <lucene-user@jakarta.apache.org>; Mon, 6 Sep 2004 16:13:08 +0200
Subject: Re: Concatinated search string in not working!
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Message-ID: <OFA5682077.6A6E425B-ONC1256F07.004E09BB-C1256F07.004E1AEF@EU.novartis.net>
From: iouli.golovatyi@group.novartis.com
Date: Mon, 6 Sep 2004 16:13:07 +0200
MIME-Version: 1.0
Content-type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Thanks Erik,

will try to play with it



                                                                                                                                       
                      Erik Hatcher                                                                                                     
                      <erik@ehatchersol        To:       "Lucene Users List" <lucene-user@jakarta.apache.org>                          
                      utions.com>              cc:                                                                                     
                                               Subject:  Re: Concatinated search string in not working!                                
                      03.09.2004 16:34                                                                                                 
                      Please respond to        Category:       |-------------------------|                                             
                      "Lucene Users                            | ( ) Action needed       |                                             
                      List"                                    | ( ) Decision needed     |                                             
                                                               | ( ) General Information |                                             
                                                               |-------------------------|                                             
                                                                                                                                       
                                                                                                                                       




The "Keyword"-ness of a field is only at indexing time, and not
something known about at query time.

You need to use a different analyzer for that field.  Check out posts
on KeywordAnalyzer and PerFieldAnalyzerWrapper - this combination is
the secret :)

             Erik



On Sep 3, 2004, at 9:55 AM, iouli.golovatyi@group.novartis.com wrote:

>
> Trying to search by two fields I got nothing.
>
> The fields where  created like:
>
> String provider =....
> doc.add(Field.Keyword("provider", provider));
> ...
> InputStreamReader input = new InputStreamReader( new
> ByteArrayInputStream(
> document.add(Field.Text("contents", input ));
>
> Searching code looks like:
>
>
> ...
>    public class NeisQueryParser extends QueryParser{
NeisQueryParser(){
PorterStemAnalyzer is used
>       }
>     }
>    ...
>    line= "Diovan and provider:NewsEdge";
>
>    NeisQueryParser nqp=new NeisQueryParser();
>    if (and) nqp.setOperator(NeisQueryParser.DEFAULT_OPERATOR_AND);
>    else     nqp.setOperator(NeisQueryParser.DEFAULT_OPERATOR_OR);
>    Query query = nqp.parse(line);
>
>    hits = ms.search(query, getCurrentTimeFilter());
>
> The parsing query  comes like
>
> +contents:diovan +provider:newsedg
>
> what I realy not undestand, because the "provider" field should not be
> tokenized.
>
> In case the line ="Diovan" I see results. Provider field I see as well
> containing  "NewsEdge".
>
> What I do wrong? Please help.
>
> J.
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org







---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10043-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 06 18:04:20 2004
Return-Path: <lucene-user-return-10043-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 71391 invoked from network); 6 Sep 2004 18:04:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 6 Sep 2004 18:04:19 -0000
Received: (qmail 66881 invoked by uid 500); 6 Sep 2004 18:04:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 66858 invoked by uid 500); 6 Sep 2004 18:04:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 66845 invoked by uid 99); 6 Sep 2004 18:04:12 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.109.24.31] (HELO smtp-vbr11.xs4all.nl) (194.109.24.31)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 06 Sep 2004 11:04:10 -0700
Received: from k7l.local (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr11.xs4all.nl (8.12.11/8.12.11) with ESMTP id i86I48Wr024853
	for <lucene-user@jakarta.apache.org>; Mon, 6 Sep 2004 20:04:08 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Possible to remove duplicate documents in sort API?
Date: Mon, 6 Sep 2004 20:04:08 +0200
User-Agent: KMail/1.5.4
References: <413ACB43.9050703@newsmonster.org> <200409051641.42913.paul.elschot@xs4all.nl> <413B818F.3070200@newsmonster.org>
In-Reply-To: <413B818F.3070200@newsmonster.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200409062004.08086.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Kevin,

On Sunday 05 September 2004 23:13, Kevin A. Burton wrote:
> Paul Elschot wrote:
> >Kevin,
> >
> >On Sunday 05 September 2004 10:16, Kevin A. Burton wrote:
> >>I want to sort a result set but perform a group by as well... IE remove
> >>duplicate items.
> >
> >Could you be more precise?
>
> My problem is that I have two machines... one for searching, one for
> indexing.
>
> The searcher has an existing index.
>
> The indexer found an UPDATED document and then adds it to a new index
> and pushes that new index over to the searcher.
>
> The searcher then reloads and when someone performs a search BOTH
> documents could show up (including the stale document).

What do you mean by reload?
You could try and delete the new documents from the old index beforehand.

I don't know to what extent you can do such updates atomically with
Lucene. One way might be to stop all searches, delete the
new docs from the old index, close the old index, then open a
MultiReader on the old and the new index together, and use this
to do further searches.
This writes the deleted bits for the old index, ie. one byte per 8 docs
and closes and reopens the index files, which takes an amount of  time
that is linear in the old index size. 
But there may be better ways.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10044-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 07 06:58:49 2004
Return-Path: <lucene-user-return-10044-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 30085 invoked from network); 7 Sep 2004 06:58:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Sep 2004 06:58:49 -0000
Received: (qmail 2716 invoked by uid 500); 7 Sep 2004 06:58:37 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 2693 invoked by uid 500); 7 Sep 2004 06:58:37 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 2678 invoked by uid 99); 7 Sep 2004 06:58:36 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.101.64.100] (HELO snchnm01.scandentgroup.com) (203.101.64.100)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 06 Sep 2004 23:58:36 -0700
Subject: Lucene Book
To: lucene-user@jakarta.apache.org
X-Mailer: Lotus Notes Release 5.0.8  June 18, 2001
Message-ID: <OFEC728C41.53E4B35A-ON65256F08.00266E5A@scandentgroup.com>
From: ebrahim.faisal@scandentgroup.com
Date: Tue, 7 Sep 2004 12:30:40 +0530
X-MIMETrack: Serialize by Router on SNCHNM01/Scandent(Release 5.0.8 |June 18, 2001) at
 09/07/2004 12:30:45 PM
MIME-Version: 1.0
Content-type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi

I am new to Lucene. Can anyone guide me from where i can download free
Lucene book.

Thanx & Regards
E.Faisal
Important Email Information :- The  information  in  this  email is
confidential and may  be  legally  privileged. It  is  intended  solely for
the addressee. Access to  this email  by anyone  else  is  unauthorized.
If you are not the intended recipient, any disclosure, copying,
distribution or any action taken or omitted to be taken in reliance on it,
is prohibited  and may be unlawful. If you are not the intended addressee
please contact the sender and dispose of this e-mail immediately.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10045-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 07 10:43:44 2004
Return-Path: <lucene-user-return-10045-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 68085 invoked from network); 7 Sep 2004 10:43:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Sep 2004 10:43:44 -0000
Received: (qmail 81379 invoked by uid 500); 7 Sep 2004 10:43:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 81349 invoked by uid 500); 7 Sep 2004 10:43:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 81335 invoked by uid 99); 7 Sep 2004 10:43:29 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [205.158.62.107] (HELO ws6-4.us4.outblaze.com) (205.158.62.107)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 07 Sep 2004 03:43:27 -0700
Received: (qmail 25043 invoked from network); 7 Sep 2004 10:43:27 -0000
Received: from unknown (HELO ?192.168.1.102?) (erik@hatcher.net@68.169.41.169)
  by mta5-2.us4.outblaze.com with SMTP; 7 Sep 2004 10:43:27 -0000
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <OFEC728C41.53E4B35A-ON65256F08.00266E5A@scandentgroup.com>
References: <OFEC728C41.53E4B35A-ON65256F08.00266E5A@scandentgroup.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <BF6034A4-00BA-11D9-B90E-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Lucene Book
Date: Tue, 7 Sep 2004 06:43:25 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Sep 7, 2004, at 3:00 AM, ebrahim.faisal@scandentgroup.com wrote:
> I am new to Lucene. Can anyone guide me from where i can download free
> Lucene book.

Free?!

http://www.manning.com/hatcher2 is the book Otis and I have spent the 
last year laboring on.  It has been a long hard effort that is about to 
come to fruition.  Lucene in Action is in copy/tech editing right now 
and will be pushed into production very shortly.  There will be some 
chapters, as always with Manning, available for free download once the 
book has been typeset (probably even before physical copies are 
available).  We have not decided which chapters we'll make available 
for free yet.

I hope a few folks buy it - it would be a shame for my kids to go 
without food ;)

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10046-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 07 11:10:33 2004
Return-Path: <lucene-user-return-10046-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 91329 invoked from network); 7 Sep 2004 11:10:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Sep 2004 11:10:33 -0000
Received: (qmail 21100 invoked by uid 500); 7 Sep 2004 11:10:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 21024 invoked by uid 500); 7 Sep 2004 11:10:20 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 21011 invoked by uid 99); 7 Sep 2004 11:10:20 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [68.230.240.29] (HELO lakermmtao10.cox.net) (68.230.240.29)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Sep 2004 04:10:17 -0700
Received: from POWERPACK ([68.100.190.210]) by lakermmtao10.cox.net
          (InterMail vM.6.01.03.02.01 201-2131-111-104-103-20040709)
          with SMTP
          id <20040907111015.GZKA16005.lakermmtao10.cox.net@POWERPACK>
          for <lucene-user@jakarta.apache.org>;
          Tue, 7 Sep 2004 07:10:15 -0400
Message-ID: <010b01c494cb$415c3390$1402a8c0@POWERPACK>
From: "Terry Steichen" <terry@net-frame.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <OFEC728C41.53E4B35A-ON65256F08.00266E5A@scandentgroup.com> <BF6034A4-00BA-11D9-B90E-000393A564E6@ehatchersolutions.com>
Subject: Re: Lucene Book
Date: Tue, 7 Sep 2004 07:10:16 -0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0108_01C494A9.B9EEDF00"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0108_01C494A9.B9EEDF00
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Jeez, Erik!  Where's your sense of public spirit ;-)

Terry

PS: Glad to hear you're (finally!) nearing publication. =20

  ----- Original Message -----=20
  From: Erik Hatcher=20
  To: Lucene Users List=20
  Sent: Tuesday, September 07, 2004 6:43 AM
  Subject: Re: Lucene Book


  On Sep 7, 2004, at 3:00 AM, ebrahim.faisal@scandentgroup.com wrote:
  > I am new to Lucene. Can anyone guide me from where i can download =
free
  > Lucene book.

  Free?!

  http://www.manning.com/hatcher2 is the book Otis and I have spent the=20
  last year laboring on.  It has been a long hard effort that is about =
to=20
  come to fruition.  Lucene in Action is in copy/tech editing right now=20
  and will be pushed into production very shortly.  There will be some=20
  chapters, as always with Manning, available for free download once the =

  book has been typeset (probably even before physical copies are=20
  available).  We have not decided which chapters we'll make available=20
  for free yet.

  I hope a few folks buy it - it would be a shame for my kids to go=20
  without food ;)

  Erik


  ---------------------------------------------------------------------
  To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  For additional commands, e-mail: lucene-user-help@jakarta.apache.org


------=_NextPart_000_0108_01C494A9.B9EEDF00--


From lucene-user-return-10047-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 07 12:38:06 2004
Return-Path: <lucene-user-return-10047-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 40082 invoked from network); 7 Sep 2004 12:38:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Sep 2004 12:38:06 -0000
Received: (qmail 26246 invoked by uid 500); 7 Sep 2004 12:37:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 26078 invoked by uid 500); 7 Sep 2004 12:37:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 26064 invoked by uid 99); 7 Sep 2004 12:37:57 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.245] (HELO web12708.mail.yahoo.com) (216.136.173.245)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 07 Sep 2004 05:37:55 -0700
Message-ID: <20040907123754.69209.qmail@web12708.mail.yahoo.com>
Received: from [195.29.102.102] by web12708.mail.yahoo.com via HTTP; Tue, 07 Sep 2004 05:37:54 PDT
Date: Tue, 7 Sep 2004 05:37:54 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene Book
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <OFEC728C41.53E4B35A-ON65256F08.00266E5A@scandentgroup.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello Ebrahim,

Like Erik said, the book about Lucene is coming soon.  Although it
won't be free, Erik, I, and a few other people already shared some of
our knowledge about Lucene in several articles about Lucene.  There is
a page on the Lucene Wiki that has links to all known Lucene articles. 
I suggest you take a look at those while we finish Lucene in Action.

Otis


--- ebrahim.faisal@scandentgroup.com wrote:

> Hi
> 
> I am new to Lucene. Can anyone guide me from where i can download
> free
> Lucene book.
> 
> Thanx & Regards
> E.Faisal
> Important Email Information :- The  information  in  this  email is
> confidential and may  be  legally  privileged. It  is  intended 
> solely for
> the addressee. Access to  this email  by anyone  else  is 
> unauthorized.
> If you are not the intended recipient, any disclosure, copying,
> distribution or any action taken or omitted to be taken in reliance
> on it,
> is prohibited  and may be unlawful. If you are not the intended
> addressee
> please contact the sender and dispose of this e-mail immediately.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10048-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 07 15:41:18 2004
Return-Path: <lucene-user-return-10048-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 51447 invoked from network); 7 Sep 2004 15:41:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Sep 2004 15:41:17 -0000
Received: (qmail 92783 invoked by uid 500); 7 Sep 2004 15:41:10 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 92723 invoked by uid 500); 7 Sep 2004 15:41:08 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 92709 invoked by uid 99); 7 Sep 2004 15:41:08 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [207.115.57.74] (HELO ylpvm43.prodigy.net) (207.115.57.74)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Sep 2004 08:41:07 -0700
Received: from [192.168.1.10] (adsl-66-141-52-145.dsl.austtx.swbell.net [66.141.52.145])
	by ylpvm43.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id i87FfArW031838
	for <lucene-user@jakarta.apache.org>; Tue, 7 Sep 2004 11:41:10 -0400
Mime-Version: 1.0 (Apple Message framework v619)
To: Lucene Users List <lucene-user@jakarta.apache.org>
Message-Id: <51BB6476-00E4-11D9-9A37-003065AB24D4@otherwise.com>
Content-Type: multipart/mixed; boundary=Apple-Mail-2-300343854
From: Bill Tschumy <bill@otherwise.com>
Subject: Use of "+" and "-" in queries
Date: Tue, 7 Sep 2004 10:41:00 -0500
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--Apple-Mail-2-300343854
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed

I don't understand the difference in using + and - in queries compared 
to using AND and NOT.  Even the Query Syntax document seems a bit 
confused.  In the section on the NOT operator it says:

 > To search for documents that contain "jakarta apache" but not 
"jakarta lucene" use the query:
 >
 > 
  
--Apple-Mail-2-300343854
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed

"jakarta apache" NOT "jakarta lucene"
 >

Then in the section on the - operator you read this:

 > To search for documents that contain "jakarta apache" but not 
"jakarta lucene" use the query:
 >
 > 
  
--Apple-Mail-2-300343854
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed

"jakarta apache" -"jakarta lucene"
 >

So what's the difference?

-- 
Bill Tschumy
Otherwise -- Austin, TX
http://www.otherwise.com


--Apple-Mail-2-300343854
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
--Apple-Mail-2-300343854--


From lucene-user-return-10049-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 07 15:48:33 2004
Return-Path: <lucene-user-return-10049-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 54530 invoked from network); 7 Sep 2004 15:48:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Sep 2004 15:48:33 -0000
Received: (qmail 5791 invoked by uid 500); 7 Sep 2004 15:48:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 5761 invoked by uid 500); 7 Sep 2004 15:48:24 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 5743 invoked by uid 99); 7 Sep 2004 15:48:24 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [63.100.163.74] (HELO mercury.corp.cyveillance.com) (63.100.163.74)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Sep 2004 08:48:22 -0700
Received: by mercury.corp.cyveillance.com with Internet Mail Service (5.5.2655.55)
	id <RTXVAP4X>; Tue, 7 Sep 2004 11:46:19 -0400
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA013A36@hermes.corp.cyveillance.com>
From: wallen@Cyveillance.com
To: lucene-user@jakarta.apache.org
Subject: RE: Spam:too many open files
Date: Tue, 7 Sep 2004 11:40:48 -0400 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I sent out an email to this list a few weeks ago about how to fix a corrupt
index.  I basically edited the segments file with a hex editor removing the
entry for the missing file and decremented the total count of files from the
file count that is near the beginning of the segments file.

-----Original Message-----
From: Patrick Kates [mailto:patrickk79@comcast.net]
Sent: Wednesday, September 01, 2004 1:30 PM
To: lucene-user@jakarta.apache.org
Subject: Spam:too many open files


I am having two problems with my client's lucene indexes.

One, we are getting a FileNotFound exception (too many open files).  THis
would seem to indicate that I need to increase the number of open files on
our Suse 9.0 Pro box.  I have our sys admin working on this problem for me.

Two, because of this error and subsequent restarting of the box, we seem to
have lost an index segment or two.  My client's tape backups do not contain
the segments we know about.

I am concerned about the missing index segments as they seem to be
preventing any further update of the index.  Does anyone have any
suggestions as to how to fix this besides a full re-index of the problem
indexes?

I was wondering if maybe a merge of the index might solve the problem?  I
could move our nightly merge of the index files to sooner, but I am afraid
that the merge might make matters worse?

Any ideas or helpful speculation would be greatly appreciated.

Patrick




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10050-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 07 15:48:42 2004
Return-Path: <lucene-user-return-10050-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 54625 invoked from network); 7 Sep 2004 15:48:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Sep 2004 15:48:41 -0000
Received: (qmail 5933 invoked by uid 500); 7 Sep 2004 15:48:25 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 5775 invoked by uid 500); 7 Sep 2004 15:48:24 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 5745 invoked by uid 99); 7 Sep 2004 15:48:24 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [63.100.163.74] (HELO mercury.corp.cyveillance.com) (63.100.163.74)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Sep 2004 08:48:22 -0700
Received: by mercury.corp.cyveillance.com with Internet Mail Service (5.5.2655.55)
	id <RTXVAP44>; Tue, 7 Sep 2004 11:46:19 -0400
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA013A37@hermes.corp.cyveillance.com>
From: wallen@Cyveillance.com
To: lucene-user@jakarta.apache.org
Subject: RE: Spam:too many open files
Date: Tue, 7 Sep 2004 11:41:19 -0400 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

A note to developers, the code checked into lucene CVS ~Aug 15th, post
1.4.1, was causing frequent index corruptions.  When I reverted back to
version 1.4 I no longer am getting the corruptions.

I was unable to trace the problem to anything specific, but was using the
newer code to take advantage of the sort fixes.

-----Original Message-----
From: Patrick Kates [mailto:patrickk79@comcast.net]
Sent: Wednesday, September 01, 2004 1:30 PM
To: lucene-user@jakarta.apache.org
Subject: Spam:too many open files


I am having two problems with my client's lucene indexes.

One, we are getting a FileNotFound exception (too many open files).  THis
would seem to indicate that I need to increase the number of open files on
our Suse 9.0 Pro box.  I have our sys admin working on this problem for me.

Two, because of this error and subsequent restarting of the box, we seem to
have lost an index segment or two.  My client's tape backups do not contain
the segments we know about.

I am concerned about the missing index segments as they seem to be
preventing any further update of the index.  Does anyone have any
suggestions as to how to fix this besides a full re-index of the problem
indexes?

I was wondering if maybe a merge of the index might solve the problem?  I
could move our nightly merge of the index files to sooner, but I am afraid
that the merge might make matters worse?

Any ideas or helpful speculation would be greatly appreciated.

Patrick




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10051-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 07 16:42:04 2004
Return-Path: <lucene-user-return-10051-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 89565 invoked from network); 7 Sep 2004 16:42:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Sep 2004 16:42:03 -0000
Received: (qmail 95839 invoked by uid 500); 7 Sep 2004 16:41:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 95806 invoked by uid 500); 7 Sep 2004 16:41:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 95793 invoked by uid 99); 7 Sep 2004 16:41:55 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Sep 2004 09:41:55 -0700
Received: (qmail 27738 invoked by uid 89); 7 Sep 2004 16:41:51 -0000
Received: from unknown (HELO ?192.168.168.81?) (postmaster@cottrell-cutting.net@24.5.163.156)
  by londo.swishmail.com with AES256-SHA encrypted SMTP; 7 Sep 2004 16:41:51 -0000
Message-ID: <413DE46E.2000901@apache.org>
Date: Tue, 07 Sep 2004 09:40:14 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.2) Gecko/20040806
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: telling one version of the index from another?
References: <04Sep4.200536pdt."58612"@synergy1.parc.xerox.com>
In-Reply-To: <04Sep4.200536pdt."58612"@synergy1.parc.xerox.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Bill Janssen wrote:
> Hi.

Hey, Bill.  It's been a long time!

> I've got a Lucene application that's been in use for about two years.
> Some users are using Lucene 1.2, some 1.3, and some are moving to 1.4.
> The indices seem to behave differently under each version.  I'd like
> to add code to my application that checks the current user's index
> version against the version of Lucene that they are using, and
> automatically re-indexes their files if necessary.  However, I can't
> figure out how to tell the version, from the index files.

Prior to 1.4, there were no format numbers in the index.  These are 
being added, file-by-file, as we change file formats.  As you've 
discovered, there is currently no public API to obtain the format number 
of an index.  Also, the formats of different files are revved at 
different times, so there may not be a single format number for the 
entire index.  (Perhaps we should remedy this, by, e.g., always revving 
the "segments" version whenever any file changes format.)

> The documentation on the file formats, at
> http://jakarta.apache.org/lucene/docs/fileformats.html, directs me to
> the "segments" file.  However, when I look at a version 1.3 segments
> file, it seems to bear little relationship to the format described in
> fileformats.html. 

Have a look at the version of fileformats.html that shipped with 1.3. 
You can find this by browsing CVS, looking for the 1.3-final tag.  But 
let me do it for you:

http://cvs.apache.org/viewcvs.cgi/*checkout*/jakarta-lucene/docs/fileformats.html?rev=1.15

According to CVS tags, that describes both the 1.3 and 1.2 index file 
formats.

> But the part of fileformats.html dealing with the
> segments file contains no "compatibility notes", so I assume it hasn't
> changed since 1.3. 

I wrote the bit about "compatibility notes" when I first documented file 
formats, and then promptly forgot about it.  So, until someone 
contributes them, there are no compatibility notes.  Sorry.

> Even if it had, what's the idea of using -1 as the
> format number for 1.4?

The idea is to promptly break 1.3 and 1.2 code which tries to read the 
index.  Those versions of Lucene don't check format numbers (because 
there were none).  Positive values would give unpredictable errors.  A 
negative value causes an immediate failure.

> So, anyone know a way to tell the difference between the various
> versions of the index files?  Crufty hacks welcome :-).

The first four bytes of the "segments" file will mostly do the trick. 
If it is zero or positive, then the index is a 1.2 or 1.3 index.  If it 
is -2, then it's a 1.4-final or later index.

There was a change in formats between 1.2 and 1.3, with no format number 
change.  This was in 1.3 RC1 (note #12 in CHANGES.txt).  The semantics 
of each byte in norm files (.f[0-9]) changed.  In 1.3 each byte 
represented 0.0-255.0 on a linear scale.  In 1.3 and later they're 
eight-bit floats (three-bit mantissa, five-bit exponent, no sign bit). 
The net result is that if you use a 1.2 index with 1.3 or later then the 
correct documents will be returned, but scores and rankings will be wacky.

With the exception of this last bit, 1.4 should be able to correctly 
handle indexes from earlier releases.  Please report if this is not the 
case.

Cheers,

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10052-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 07 16:51:21 2004
Return-Path: <lucene-user-return-10052-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 93232 invoked from network); 7 Sep 2004 16:51:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Sep 2004 16:51:21 -0000
Received: (qmail 10375 invoked by uid 500); 7 Sep 2004 16:51:15 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 10166 invoked by uid 500); 7 Sep 2004 16:51:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 10147 invoked by uid 99); 7 Sep 2004 16:51:13 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Sep 2004 09:51:12 -0700
Received: (qmail 42519 invoked by uid 89); 7 Sep 2004 16:51:10 -0000
Received: from unknown (HELO ?192.168.168.81?) (postmaster@cottrell-cutting.net@24.5.163.156)
  by londo.swishmail.com with AES256-SHA encrypted SMTP; 7 Sep 2004 16:51:10 -0000
Message-ID: <413DE69D.5050207@apache.org>
Date: Tue, 07 Sep 2004 09:49:33 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.2) Gecko/20040806
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Possible to remove duplicate documents in sort API?
References: <413ACB43.9050703@newsmonster.org> <200409051641.42913.paul.elschot@xs4all.nl> <413B818F.3070200@newsmonster.org>
In-Reply-To: <413B818F.3070200@newsmonster.org>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Kevin A. Burton wrote:
> My problem is that I have two machines... one for searching, one for 
> indexing.
> 
> The searcher has an existing index.
> 
> The indexer found an UPDATED document and then adds it to a new index 
> and pushes that new index over to the searcher.
> 
> The searcher then reloads and when someone performs a search BOTH 
> documents could show up (including the stale document).
> 
> I can't do a delete() on the searcher because the indexer doesn't have 
> the entire index as the searcher.

I can think of a couple ways to fix this.

If the indexer box kept copies of the indexes that it has already sent 
to the searcher, then it can mark updated documents as deleted in these 
old indexes.  Then you can, with the new index, also distribute new .del 
files for the old indexes.

Alternately, you could, on the searcher box, before you open the new 
index, open an IndexReader on all of the existing indexes and mark all 
new documents as deleted in the old indexes.  This shouldn't take more 
than a few seconds.

IndexReader.delete() just sets a bit in a bit vector that is written to 
file by IndexReader.close().  So it's quite fast.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10053-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 07 16:58:10 2004
Return-Path: <lucene-user-return-10053-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 96683 invoked from network); 7 Sep 2004 16:58:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Sep 2004 16:58:10 -0000
Received: (qmail 22161 invoked by uid 500); 7 Sep 2004 16:57:45 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 22107 invoked by uid 500); 7 Sep 2004 16:57:45 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 22000 invoked by uid 99); 7 Sep 2004 16:57:44 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Sep 2004 09:57:43 -0700
Received: (qmail 52427 invoked by uid 89); 7 Sep 2004 16:57:41 -0000
Received: from unknown (HELO ?192.168.168.81?) (postmaster@cottrell-cutting.net@24.5.163.156)
  by londo.swishmail.com with AES256-SHA encrypted SMTP; 7 Sep 2004 16:57:40 -0000
Message-ID: <413DE823.1060302@apache.org>
Date: Tue, 07 Sep 2004 09:56:03 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.2) Gecko/20040806
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Why doesn't Document use a HashSet instead of a LinkedList (DocumentFieldList)
References: <413B7F0C.6080700@newsmonster.org>
In-Reply-To: <413B7F0C.6080700@newsmonster.org>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Kevin A. Burton wrote:
> It looks like Document.java uses its own implementation of a LinkedList..
> 
> Why not use a HashMap to enable O(1) lookup... right now field lookup is 
> O(N) which is certainly no fun.
> 
> Was this benchmarked?  Perhaps theres the assumption that since 
> documents often have few fields the object overhead and hashcode 
> overhead would have been less this way.

I have never benchmarked this but would be surprised if it makes a 
measureable difference in any real application.  A linked list is used 
because it naturally supports multiple entries with the same key.  A 
home-grown linked list was used because, when Lucene was first written, 
java.util.LinkedList did not exist.

Please feel free to benchmark this against a HashMap of LinkedList of 
Field.  This would be slower to construct, which may offset any 
increased access speed.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10054-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 07 17:51:54 2004
Return-Path: <lucene-user-return-10054-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 22841 invoked from network); 7 Sep 2004 17:51:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Sep 2004 17:51:54 -0000
Received: (qmail 78641 invoked by uid 500); 7 Sep 2004 17:51:21 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 78584 invoked by uid 500); 7 Sep 2004 17:51:20 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 78546 invoked by uid 99); 7 Sep 2004 17:51:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.25.134.19] (HELO mailout06.sul.t-online.com) (194.25.134.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Sep 2004 10:51:16 -0700
Received: from fwd04.aul.t-online.de 
	by mailout06.sul.t-online.com with smtp 
	id 1C4k7e-0007gY-00; Tue, 07 Sep 2004 19:51:14 +0200
Received: from pD9EBE9C0.dip.t-dialin.net (rCDdjqZUZeCfEFHKFpYrvOf5KS3DW+-tyURq3v4n4aWIV13Cgoqwwe@[217.235.233.192]) by fmrl04.sul.t-online.com
	with esmtp id 1C4k7d-0OO7wO0; Tue, 7 Sep 2004 19:51:13 +0200
From: Daniel Naber <daniel.naber@t-online.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Spam:too many open files
Date: Tue, 7 Sep 2004 19:53:45 +0200
User-Agent: KMail/1.7
References: <63434C14F9A6F74CB36B85033E4C30CA013A37@hermes.corp.cyveillance.com>
In-Reply-To: <63434C14F9A6F74CB36B85033E4C30CA013A37@hermes.corp.cyveillance.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200409071953.45475@danielnaber.de>
X-ID: rCDdjqZUZeCfEFHKFpYrvOf5KS3DW+-tyURq3v4n4aWIV13Cgoqwwe@t-dialin.net
X-TOI-MSGID: 2822f192-26b3-450e-957c-16f1c0500583
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Tuesday 07 September 2004 17:41, wallen@Cyveillance.com wrote:

> A note to developers, the code checked into lucene CVS ~Aug 15th, post
> 1.4.1, was causing frequent index corruptions. =C2=A0When I reverted back=
 to
> version 1.4 I no longer am getting the corruptions.

Here are some changes from around that day:

http://cvs.apache.org/viewcvs.cgi/jakarta-lucene/src/java/org/apache/lucene=
/index/SegmentMerger.java
http://cvs.apache.org/viewcvs.cgi/jakarta-lucene/src/java/org/apache/lucene=
/index/SegmentReader.java
http://cvs.apache.org/viewcvs.cgi/jakarta-lucene/src/java/org/apache/lucene=
/index/IndexWriter.java

Could you check which of those might have caused the problem? I guess=20
there's not much the developers can do without the problem being=20
reproducible.

regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10055-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 07 17:57:18 2004
Return-Path: <lucene-user-return-10055-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 25136 invoked from network); 7 Sep 2004 17:57:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Sep 2004 17:57:18 -0000
Received: (qmail 88253 invoked by uid 500); 7 Sep 2004 17:56:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 88151 invoked by uid 500); 7 Sep 2004 17:56:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 88076 invoked by uid 99); 7 Sep 2004 17:56:42 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [63.100.163.74] (HELO mercury.corp.cyveillance.com) (63.100.163.74)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Sep 2004 10:56:41 -0700
Received: by mercury.corp.cyveillance.com with Internet Mail Service (5.5.2655.55)
	id <RTXVAPYC>; Tue, 7 Sep 2004 13:54:32 -0400
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA013A3D@hermes.corp.cyveillance.com>
From: wallen@Cyveillance.com
To: lucene-user@jakarta.apache.org
Subject: getting most common terms for a smaller set of documents
Date: Tue, 7 Sep 2004 13:56:31 -0400 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Dear Lucene Users:

What is the best way to get the most common terms for a subset of the total
documents in your index?

I know how to get the most common terms for a field for the entire index,
but what is the most efficient way to do this for a subset of documents?

Here is the code I am using to get the top "numberOfTerms" common terms for
the field "fieldName":

	public TermInfo[] mostCommonTerms(String fieldName, int
numberOfTerms)
	{
		//make sure min will get a positive number
		if (numberOfTerms < 1)
		{
			numberOfTerms = Integer.MAX_VALUE;
		}
		numberOfTerms = Math.min(numberOfTerms, 50);
		//String[] commonTerms = new String[numberOfTerms];
		try
		{
			IndexReader reader = IndexReader.open(indexPath);
			TermInfoQueue tiq = new
TermInfoQueue(numberOfTerms);
			TermEnum terms = reader.terms();

			int minFreq = 0;
			while (terms.next())
			{
	
if(fieldName.equalsIgnoreCase(terms.term().field()))
				{
					if (terms.docFreq() > minFreq)
					{
						tiq.put(new
TermInfo(terms.term(), terms.docFreq()));
						if (tiq.size() >=
numberOfTerms) // if tiq overfull
						{
							tiq.pop(); // remove
lowest in tiq
							minFreq =
((TermInfo) tiq.top()).docFreq; // reset
	
// minFreq
						}
					}

				}
			}
			TermInfo[] res = new TermInfo[tiq.size()];
			for (int i = 0; i < res.length; i++)
			{
				res[res.length - i - 1] = (TermInfo)
tiq.pop();
			}
			reader.close();
			return res;

		}
		catch (IOException ioe)
		{
			logger.error("IOException: " + ioe.getMessage());
		}
		return null;
	}

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10056-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 07 18:43:16 2004
Return-Path: <lucene-user-return-10056-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 49468 invoked from network); 7 Sep 2004 18:43:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Sep 2004 18:43:16 -0000
Received: (qmail 75855 invoked by uid 500); 7 Sep 2004 18:43:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 75810 invoked by uid 500); 7 Sep 2004 18:43:08 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 75797 invoked by uid 99); 7 Sep 2004 18:43:08 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 07 Sep 2004 11:43:08 -0700
Received: from synergy1.parc.xerox.com ([13.1.101.60]) by alpha.xerox.com with SMTP id <222051(2)>; Tue, 7 Sep 2004 11:42:36 PDT
Received: from parc.com ([127.0.0.1]) by synergy1.parc.xerox.com with SMTP id <58612>; Tue, 7 Sep 2004 11:42:10 PDT
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: telling one version of the index from another? 
In-Reply-To: Your message of "Tue, 07 Sep 2004 09:40:14 PDT."
             <413DE46E.2000901@apache.org> 
Date: Tue, 7 Sep 2004 11:42:09 PDT
From: Bill Janssen <janssen@parc.com>
Message-Id: <04Sep7.114210pdt."58612"@synergy1.parc.xerox.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks, Doug, much as I'd figured from looking at the code.

Here's a follow-up question:  Is there any programmatic way to tell
which version of the Lucene code a program is using?  A version number
or string would be great (perhaps an idea for the next release), but a
list of classes in one version but not in the previous one would do
for the moment.

> (Perhaps we should remedy this, by, e.g., always revving 
> the "segments" version whenever any file changes format.)

I think you mean the "segments" format, right?  And I highly recommend
doing so.

Bill

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10057-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 07 20:34:28 2004
Return-Path: <lucene-user-return-10057-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 6762 invoked from network); 7 Sep 2004 20:34:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Sep 2004 20:34:28 -0000
Received: (qmail 71877 invoked by uid 500); 7 Sep 2004 20:33:47 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 71777 invoked by uid 500); 7 Sep 2004 20:33:45 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 71594 invoked by uid 99); 7 Sep 2004 20:33:44 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of ivy.liu@gmail.com designates 64.233.170.200 as permitted sender)
Received: from [64.233.170.200] (HELO mproxy.gmail.com) (64.233.170.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Sep 2004 13:33:43 -0700
Received: by mproxy.gmail.com with SMTP id 80so160615rnk
        for <lucene-user@jakarta.apache.org>; Tue, 07 Sep 2004 13:33:40 -0700 (PDT)
Received: by 10.38.179.6 with SMTP id b6mr2410203rnf;
        Tue, 07 Sep 2004 13:33:40 -0700 (PDT)
Received: by 10.38.8.10 with HTTP; Tue, 7 Sep 2004 13:33:40 -0700 (PDT)
Message-ID: <aa57b9070409071333580c2603@mail.gmail.com>
Date: Tue, 7 Sep 2004 16:33:40 -0400
From: hui liu <ivy.liu@gmail.com>
Reply-To: hui liu <ivy.liu@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: lucene locks index, tomcat has to stop and restart
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi all,

I met with such a problem with lucene demo:

Each time when I create lucene index, I have to first stop tomcat, and
restart tomcat after the index is created. The reason is: the index is
locked when using IndexReader.open(index) method in the jsp file.

So, I tried to modify the jsp codes by adding close(), but it shows
error which said "close() is not a static method". I checked the
source codes of lucene IndexReader methods, and found that the close()
method is final not static. I tried to change it to static, but
resulted in many errors.

So, does anybody meet the similar problem as me? Do you have any solutions?

Thank you very very much.....!!

Ivy.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10058-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 07 20:35:07 2004
Return-Path: <lucene-user-return-10058-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 7284 invoked from network); 7 Sep 2004 20:35:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Sep 2004 20:35:07 -0000
Received: (qmail 76359 invoked by uid 500); 7 Sep 2004 20:34:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 76329 invoked by uid 500); 7 Sep 2004 20:34:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 76314 invoked by uid 99); 7 Sep 2004 20:34:55 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of bensinc@gmail.com designates 64.233.170.192 as permitted sender)
Received: from [64.233.170.192] (HELO mproxy.gmail.com) (64.233.170.192)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Sep 2004 13:34:54 -0700
Received: by mproxy.gmail.com with SMTP id 80so160659rnk
        for <lucene-user@jakarta.apache.org>; Tue, 07 Sep 2004 13:34:52 -0700 (PDT)
Received: by 10.38.179.6 with SMTP id b6mr2410890rnf;
        Tue, 07 Sep 2004 13:34:52 -0700 (PDT)
Received: by 10.38.8.35 with HTTP; Tue, 7 Sep 2004 13:34:52 -0700 (PDT)
Message-ID: <6237480704090713347b64daa7@mail.gmail.com>
Date: Tue, 7 Sep 2004 15:34:52 -0500
From: Ben Sinclair <bensinc@gmail.com>
Reply-To: Ben Sinclair <bensinc@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: Moving from a single server to a cluster
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

My application currently uses Lucene with an index living on the
filesystem, and it works fine. I'm moving to a clustered environment
soon and need to figure out how to keep my indexes together. Since the
index is on the filesystem, each machine in the cluster will end up
with a different index.

I looked into JDBC Directory, but it's not tested under Oracle and
doesn't seem like a very mature project.

What are other people doing to solve this problem?

-- 
Ben Sinclair
ben@bensinclair.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10059-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 07 20:36:09 2004
Return-Path: <lucene-user-return-10059-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 7573 invoked from network); 7 Sep 2004 20:36:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Sep 2004 20:36:09 -0000
Received: (qmail 77997 invoked by uid 500); 7 Sep 2004 20:35:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 77834 invoked by uid 500); 7 Sep 2004 20:35:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 77816 invoked by uid 99); 7 Sep 2004 20:35:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of ivy.liu@gmail.com designates 64.233.170.206 as permitted sender)
Received: from [64.233.170.206] (HELO mproxy.gmail.com) (64.233.170.206)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Sep 2004 13:35:37 -0700
Received: by mproxy.gmail.com with SMTP id 80so160685rnk
        for <lucene-user@jakarta.apache.org>; Tue, 07 Sep 2004 13:35:35 -0700 (PDT)
Received: by 10.38.2.80 with SMTP id 80mr837521rnb;
        Tue, 07 Sep 2004 13:35:35 -0700 (PDT)
Received: by 10.38.8.10 with HTTP; Tue, 7 Sep 2004 13:35:35 -0700 (PDT)
Message-ID: <aa57b907040907133556360857@mail.gmail.com>
Date: Tue, 7 Sep 2004 16:35:35 -0400
From: hui liu <ivy.liu@gmail.com>
Reply-To: hui liu <ivy.liu@gmail.com>
To: lucene-dev@jakarta.apache.org, lucene-user@jakarta.apache.org, 
	tomcat-dev@jakarta.apache.org, tomcat-user@jakarta.apache.org
Subject: lucene index parser problem
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

I have such a problem when creating lucene index for many html files:

It shows "aborted, expected<tagname>....<tagend>" for those html files
which contain java scripts. It seems it cannot parse the tags < \>.
Does anyone has any solution?

Thank you very very much...!!!

Ivy.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10060-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 07 20:38:53 2004
Return-Path: <lucene-user-return-10060-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 8615 invoked from network); 7 Sep 2004 20:38:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Sep 2004 20:38:53 -0000
Received: (qmail 85587 invoked by uid 500); 7 Sep 2004 20:37:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 85352 invoked by uid 500); 7 Sep 2004 20:37:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 85282 invoked by uid 99); 7 Sep 2004 20:37:45 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of ivy.liu@gmail.com designates 64.233.170.199 as permitted sender)
Received: from [64.233.170.199] (HELO mproxy.gmail.com) (64.233.170.199)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Sep 2004 13:37:44 -0700
Received: by mproxy.gmail.com with SMTP id 80so160812rnk
        for <lucene-user@jakarta.apache.org>; Tue, 07 Sep 2004 13:37:42 -0700 (PDT)
Received: by 10.38.179.6 with SMTP id b6mr2412586rnf;
        Tue, 07 Sep 2004 13:37:42 -0700 (PDT)
Received: by 10.38.8.10 with HTTP; Tue, 7 Sep 2004 13:37:42 -0700 (PDT)
Message-ID: <aa57b90704090713372af902f@mail.gmail.com>
Date: Tue, 7 Sep 2004 16:37:42 -0400
From: hui liu <ivy.liu@gmail.com>
Reply-To: hui liu <ivy.liu@gmail.com>
To: lucene-dev@jakarta.apache.org, lucene-user@jakarta.apache.org, 
	tomcat-dev@jakarta.apache.org, tomcat-user@jakarta.apache.org
Subject: lucene locks index, tomcat has to stop and restart
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

I met with such a problem with lucene demo:

Each time when I create lucene index, I have to first stop tomcat, and
restart tomcat after the index is created. The reason is: the index is
locked when using IndexReader.open(index) method in the jsp file.

So, I tried to modify the jsp codes by adding close(), but it shows
error which said "close() is not a static method". I checked the
source codes of lucene IndexReader methods, and found that the close()
method is final not static. I tried to change it to static, but
resulted in many errors.

So, does anybody meet the similar problem as me? Do you have any solutions?

Thank you very very much.....!!

Ivy.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10061-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 07 20:58:52 2004
Return-Path: <lucene-user-return-10061-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 17274 invoked from network); 7 Sep 2004 20:58:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Sep 2004 20:58:52 -0000
Received: (qmail 29827 invoked by uid 500); 7 Sep 2004 20:58:22 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 29713 invoked by uid 500); 7 Sep 2004 20:58:21 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 29625 invoked by uid 99); 7 Sep 2004 20:58:18 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of pburleson@gmail.com designates 64.233.170.194 as permitted sender)
Received: from [64.233.170.194] (HELO mproxy.gmail.com) (64.233.170.194)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Sep 2004 13:58:18 -0700
Received: by mproxy.gmail.com with SMTP id 79so472864rnl
        for <lucene-user@jakarta.apache.org>; Tue, 07 Sep 2004 13:58:16 -0700 (PDT)
Received: by 10.38.14.71 with SMTP id 71mr2242362rnn;
        Tue, 07 Sep 2004 13:58:16 -0700 (PDT)
Received: by 10.38.78.12 with HTTP; Tue, 7 Sep 2004 13:58:16 -0700 (PDT)
Message-ID: <be6a143b0409071358239997c6@mail.gmail.com>
Date: Tue, 7 Sep 2004 16:58:16 -0400
From: Patrick Burleson <pburleson@gmail.com>
Reply-To: Patrick Burleson <pburleson@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>, 
	hui liu <ivy.liu@gmail.com>
Subject: Re: lucene index parser problem
Cc: lucene-dev@jakarta.apache.org, tomcat-dev@jakarta.apache.org, 
	tomcat-user@jakarta.apache.org
In-Reply-To: <aa57b907040907133556360857@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <aa57b907040907133556360857@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Why oh why did you send this to the tomcat lists?

Don't cross post! Especially when the question doesn't even apply to
one of the lists.

Patrick

On Tue, 7 Sep 2004 16:35:35 -0400, hui liu <ivy.liu@gmail.com> wrote:
> Hi,
> 
> I have such a problem when creating lucene index for many html files:
> 
> It shows "aborted, expected<tagname>....<tagend>" for those html files
> which contain java scripts. It seems it cannot parse the tags < \>.
> Does anyone has any solution?
> 
> Thank you very very much...!!!
> 
> Ivy.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10062-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 07 21:03:14 2004
Return-Path: <lucene-user-return-10062-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 20350 invoked from network); 7 Sep 2004 21:03:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Sep 2004 21:03:13 -0000
Received: (qmail 41515 invoked by uid 500); 7 Sep 2004 21:03:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 41452 invoked by uid 500); 7 Sep 2004 21:03:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 41396 invoked by uid 99); 7 Sep 2004 21:03:02 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of pburleson@gmail.com designates 64.233.170.204 as permitted sender)
Received: from [64.233.170.204] (HELO mproxy.gmail.com) (64.233.170.204)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Sep 2004 14:03:02 -0700
Received: by mproxy.gmail.com with SMTP id 78so270554rnl
        for <lucene-user@jakarta.apache.org>; Tue, 07 Sep 2004 14:03:00 -0700 (PDT)
Received: by 10.38.82.8 with SMTP id f8mr2252173rnb;
        Tue, 07 Sep 2004 14:03:00 -0700 (PDT)
Received: by 10.38.78.12 with HTTP; Tue, 7 Sep 2004 14:03:00 -0700 (PDT)
Message-ID: <be6a143b040907140359f222fd@mail.gmail.com>
Date: Tue, 7 Sep 2004 17:03:00 -0400
From: Patrick Burleson <pburleson@gmail.com>
Reply-To: Patrick Burleson <pburleson@gmail.com>
To: lucene-user@jakarta.apache.org, hui liu <ivy.liu@gmail.com>
Subject: Re: lucene locks index, tomcat has to stop and restart
In-Reply-To: <aa57b90704090713372af902f@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <aa57b90704090713372af902f@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

This isn't a Tomcat specific problem, but sounds like a problem with
how you the reader is being used.

Somewhere in the JSP a IndexReader variable was probably assigned to.
A line something like:

IndexReader ir = IndexReader.open("somepath");

To close the reader, and thus solve the problem, somewhere later, you need:

ir.close();

with the needed try/catch in place. 

Again, please refrain from cross-posting...just because it happened on
Tomcat doesn't make it a Tomcat problem. This is clearly a lucene
usage problem.

Patrick

On Tue, 7 Sep 2004 16:37:42 -0400, hui liu <ivy.liu@gmail.com> wrote:
> Hi,
> 
> I met with such a problem with lucene demo:
> 
> Each time when I create lucene index, I have to first stop tomcat, and
> restart tomcat after the index is created. The reason is: the index is
> locked when using IndexReader.open(index) method in the jsp file.
> 
> So, I tried to modify the jsp codes by adding close(), but it shows
> error which said "close() is not a static method". I checked the
> source codes of lucene IndexReader methods, and found that the close()
> method is final not static. I tried to change it to static, but
> resulted in many errors.
> 
> So, does anybody meet the similar problem as me? Do you have any solutions?
> 
> Thank you very very much.....!!
> 
> Ivy.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: tomcat-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: tomcat-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10063-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 07 22:48:25 2004
Return-Path: <lucene-user-return-10063-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 58541 invoked from network); 7 Sep 2004 22:48:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Sep 2004 22:48:25 -0000
Received: (qmail 32315 invoked by uid 500); 7 Sep 2004 22:48:18 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 32294 invoked by uid 500); 7 Sep 2004 22:48:17 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 32281 invoked by uid 99); 7 Sep 2004 22:48:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of pburleson@gmail.com designates 64.233.170.207 as permitted sender)
Received: from [64.233.170.207] (HELO mproxy.gmail.com) (64.233.170.207)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Sep 2004 15:48:16 -0700
Received: by mproxy.gmail.com with SMTP id 78so278433rnl
        for <lucene-user@jakarta.apache.org>; Tue, 07 Sep 2004 15:48:15 -0700 (PDT)
Received: by 10.38.78.70 with SMTP id a70mr2314111rnb;
        Tue, 07 Sep 2004 15:48:15 -0700 (PDT)
Received: by 10.38.78.12 with HTTP; Tue, 7 Sep 2004 15:48:15 -0700 (PDT)
Message-ID: <be6a143b0409071548847d08e@mail.gmail.com>
Date: Tue, 7 Sep 2004 18:48:15 -0400
From: Patrick Burleson <pburleson@gmail.com>
Reply-To: Patrick Burleson <pburleson@gmail.com>
To: hui liu <ivy.liu@gmail.com>
Subject: Re: lucene locks index, tomcat has to stop and restart
Cc: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <aa57b9070409071538240207c2@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <aa57b90704090713372af902f@mail.gmail.com>
	 <be6a143b040907140359f222fd@mail.gmail.com>
	 <aa57b9070409071538240207c2@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Ah, I see your problem. From the Lucene Javadocs on IndexSearcher.close():

"Note that the underlying IndexReader is not closed, if IndexSearcher
was constructed with IndexSearcher(IndexReader r). If the IndexReader
was supplied implicitly by specifying a directory, then the
IndexReader gets closed."

Since you are explicitly passing in an IndexReader, the IndexSearcher
is not closing it. But since you created the IndexReader without
retaining a reference to it, you can not close it, thus you will
always have an open index.

You have a couple of options:

Either retain a reference to IndexReader by doing the following:

IndexReader ir = IndexReader.open(indexName);
IndexSearcher searcher = new IndexSearcher(ir);

or if indexName is just the path to the index, then just use:

IndexSearcher searcher = new IndexSearcher(indexName);

since that will manage the IndexReader for you.

Hope that helps.

Patrick

CCing list for archives.


On Tue, 7 Sep 2004 18:38:43 -0400, hui liu <ivy.liu@gmail.com> wrote:
> First of all, thanks for your reply:-)
> 
> But actually, I've already tried this and here is my code:
> 
> searcher = new IndexSearcher(IndexReader.open(indexName));
> 
> and at some later place I wrote:
> 
> IndexReader.close();
> 
> Both of them are within try and catch, and then I got such an error in
> IE by tomcat:
> 
> non-static method close() cannot be referenced from a static context.
> 
> I read the source code of IndexReader and found that the method
> close() is final not static. so I tried to change it to static, but
> got even more errors.
> 
> I am wondering how do you use lucene? Has anyone met with the same thing?
> 
> Thanks a lot.
> 
> Ivy.
> 
> 
> 
> 
> On Tue, 7 Sep 2004 17:03:00 -0400, Patrick Burleson <pburleson@gmail.com> wrote:
> > This isn't a Tomcat specific problem, but sounds like a problem with
> > how you the reader is being used.
> >
> > Somewhere in the JSP a IndexReader variable was probably assigned to.
> > A line something like:
> >
> > IndexReader ir = IndexReader.open("somepath");
> >
> > To close the reader, and thus solve the problem, somewhere later, you need:
> >
> > ir.close();
> >
> > with the needed try/catch in place.
> >
> > Again, please refrain from cross-posting...just because it happened on
> > Tomcat doesn't make it a Tomcat problem. This is clearly a lucene
> > usage problem.
> >
> > Patrick
> >
> >
> >
> > On Tue, 7 Sep 2004 16:37:42 -0400, hui liu <ivy.liu@gmail.com> wrote:
> > > Hi,
> > >
> > > I met with such a problem with lucene demo:
> > >
> > > Each time when I create lucene index, I have to first stop tomcat, and
> > > restart tomcat after the index is created. The reason is: the index is
> > > locked when using IndexReader.open(index) method in the jsp file.
> > >
> > > So, I tried to modify the jsp codes by adding close(), but it shows
> > > error which said "close() is not a static method". I checked the
> > > source codes of lucene IndexReader methods, and found that the close()
> > > method is final not static. I tried to change it to static, but
> > > resulted in many errors.
> > >
> > > So, does anybody meet the similar problem as me? Do you have any solutions?
> > >
> > > Thank you very very much.....!!
> > >
> > > Ivy.
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: tomcat-user-unsubscribe@jakarta.apache.org
> > > For additional commands, e-mail: tomcat-user-help@jakarta.apache.org
> > >
> > >
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10064-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 07 22:53:24 2004
Return-Path: <lucene-user-return-10064-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 59876 invoked from network); 7 Sep 2004 22:53:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Sep 2004 22:53:23 -0000
Received: (qmail 36353 invoked by uid 500); 7 Sep 2004 22:53:15 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 36323 invoked by uid 500); 7 Sep 2004 22:53:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 36309 invoked by uid 99); 7 Sep 2004 22:53:14 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.245] (HELO web12708.mail.yahoo.com) (216.136.173.245)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 07 Sep 2004 15:53:14 -0700
Message-ID: <20040907225312.60126.qmail@web12708.mail.yahoo.com>
Received: from [195.29.107.188] by web12708.mail.yahoo.com via HTTP; Tue, 07 Sep 2004 15:53:12 PDT
Date: Tue, 7 Sep 2004 15:53:12 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Use of "+" and "-" in queries
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <51BB6476-00E4-11D9-9A37-003065AB24D4@otherwise.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Bill,

No difference, it's just that Lucene's query syntax recognizes both
'NOT' and '-' and uses them the same way - to exclude certain documents
from sesrch results.

Otis

--- Bill Tschumy <bill@otherwise.com> wrote:

> I don't understand the difference in using + and - in queries
> compared 
> to using AND and NOT.  Even the Query Syntax document seems a bit 
> confused.  In the section on the NOT operator it says:
> 
>  > To search for documents that contain "jakarta apache" but not 
> "jakarta lucene" use the query:
>  >
>  > 
>   > "jakarta apache" NOT "jakarta lucene"
>  >
> 
> Then in the section on the - operator you read this:
> 
>  > To search for documents that contain "jakarta apache" but not 
> "jakarta lucene" use the query:
>  >
>  > 
>   > "jakarta apache" -"jakarta lucene"
>  >
> 
> So what's the difference?
> 
> -- 
> Bill Tschumy
> Otherwise -- Austin, TX
> http://www.otherwise.com
> 
> >
---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10065-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 07 22:55:55 2004
Return-Path: <lucene-user-return-10065-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 60349 invoked from network); 7 Sep 2004 22:55:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Sep 2004 22:55:55 -0000
Received: (qmail 38307 invoked by uid 500); 7 Sep 2004 22:55:36 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 38278 invoked by uid 500); 7 Sep 2004 22:55:36 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 38265 invoked by uid 99); 7 Sep 2004 22:55:36 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.242] (HELO web12705.mail.yahoo.com) (216.136.173.242)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 07 Sep 2004 15:55:34 -0700
Message-ID: <20040907225533.60982.qmail@web12705.mail.yahoo.com>
Received: from [195.29.107.188] by web12705.mail.yahoo.com via HTTP; Tue, 07 Sep 2004 15:55:33 PDT
Date: Tue, 7 Sep 2004 15:55:33 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Moving from a single server to a cluster
To: Lucene Users List <lucene-user@jakarta.apache.org>,
  Ben Sinclair <bensinc@gmail.com>
In-Reply-To: <6237480704090713347b64daa7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I've used scp and rsync successfully in the past.
Lucene now includes a remote searcher (RMI stuff), so you may want to
consider a single index, too.

Otis

--- Ben Sinclair <bensinc@gmail.com> wrote:

> My application currently uses Lucene with an index living on the
> filesystem, and it works fine. I'm moving to a clustered environment
> soon and need to figure out how to keep my indexes together. Since
> the
> index is on the filesystem, each machine in the cluster will end up
> with a different index.
> 
> I looked into JDBC Directory, but it's not tested under Oracle and
> doesn't seem like a very mature project.
> 
> What are other people doing to solve this problem?
> 
> -- 
> Ben Sinclair
> ben@bensinclair.com
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10066-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 07 23:19:39 2004
Return-Path: <lucene-user-return-10066-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 67897 invoked from network); 7 Sep 2004 23:19:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Sep 2004 23:19:39 -0000
Received: (qmail 75464 invoked by uid 500); 7 Sep 2004 23:19:32 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 75416 invoked by uid 500); 7 Sep 2004 23:19:32 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 75403 invoked by uid 99); 7 Sep 2004 23:19:31 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=MIME_BASE64_NO_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [63.100.163.104] (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Sep 2004 16:19:27 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Subject: RE: too many open files
Date: Tue, 7 Sep 2004 19:19:06 -0400
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA013A40@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Spam:too many open files
Thread-Index: AcSVA1l6Gm5gQjnJQwaxG123eAz0XAALSE+Q
From: "Will Allen" <wallen@Cyveillance.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

DQpJIHN1c3BlY3QgaXQgaGFzIHRvIGRvIHdpdGggdGhpcyBjaGFuZ2U6DQoNCi0tLSBqYWthcnRh
LWx1Y2VuZS9zcmMvamF2YS9vcmcvYXBhY2hlL2x1Y2VuZS9pbmRleC9TZWdtZW50TWVyZ2VyLmph
dmEJMjAwNC8wOC8wOCAxMzowMzo1OQkxLjEyDQorKysgamFrYXJ0YS1sdWNlbmUvc3JjL2phdmEv
b3JnL2FwYWNoZS9sdWNlbmUvaW5kZXgvU2VnbWVudE1lcmdlci5qYXZhCTIwMDQvMDgvMTEgMTc6
Mzc6NTIJMS4xMw0KDQpJIHdvdWxkbid0IGtub3cgd2hlcmUgdG8gc3RhcnQgdG8gcmVwcm9kdWNl
IHRoZSBwcm9ibGVtIGFzIGl0IHdhcyBoYXBwZW5pbmcganVzdCBvbmNlIGEgZGF5IG9yIHNvIG9u
IGFuIGluZGV4IHRoYXQgd2FzIGJlaW5nIGJvdGggcXVlcmllZCBhbmQgYWRkZWQgdG8gcmVhbCB0
aW1lIHRvIHRoZSB0dW5lIG9mIDEwMCwwMDAgZG9jcyBhIGRheSAvIDUwIHF1ZXJpZXMgYSBkYXku
DQoNClRoZSBjb3JydXB0aW9uIHdhcyBhbHdheXMgdGhlIHNhbWUgdGhpbmcsIHRoZSBzZWdtZW50
cyBmaWxlIGxpc3RlZCBhbiBlbnRyeSB0byBhIGZpbGUgdGhhdCB3YXMgbm90IHRoZXJlLg0KDQot
V2lsbA0KDQotLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KRnJvbTogRGFuaWVsIE5hYmVyIFtt
YWlsdG86ZGFuaWVsLm5hYmVyQHQtb25saW5lLmRlXQ0KU2VudDogVHVlc2RheSwgU2VwdGVtYmVy
IDA3LCAyMDA0IDE6NTQgUE0NClRvOiBMdWNlbmUgVXNlcnMgTGlzdA0KU3ViamVjdDogUmU6IFNw
YW06dG9vIG1hbnkgb3BlbiBmaWxlcw0KDQoNCk9uIFR1ZXNkYXkgMDcgU2VwdGVtYmVyIDIwMDQg
MTc6NDEsIHdhbGxlbkBDeXZlaWxsYW5jZS5jb20gd3JvdGU6DQoNCj4gQSBub3RlIHRvIGRldmVs
b3BlcnMsIHRoZSBjb2RlIGNoZWNrZWQgaW50byBsdWNlbmUgQ1ZTIH5BdWcgMTV0aCwgcG9zdA0K
PiAxLjQuMSwgd2FzIGNhdXNpbmcgZnJlcXVlbnQgaW5kZXggY29ycnVwdGlvbnMuIMKgV2hlbiBJ
IHJldmVydGVkIGJhY2sgdG8NCj4gdmVyc2lvbiAxLjQgSSBubyBsb25nZXIgYW0gZ2V0dGluZyB0
aGUgY29ycnVwdGlvbnMuDQoNCkhlcmUgYXJlIHNvbWUgY2hhbmdlcyBmcm9tIGFyb3VuZCB0aGF0
IGRheToNCg0KaHR0cDovL2N2cy5hcGFjaGUub3JnL3ZpZXdjdnMuY2dpL2pha2FydGEtbHVjZW5l
L3NyYy9qYXZhL29yZy9hcGFjaGUvbHVjZW5lL2luZGV4L1NlZ21lbnRNZXJnZXIuamF2YQ0KaHR0
cDovL2N2cy5hcGFjaGUub3JnL3ZpZXdjdnMuY2dpL2pha2FydGEtbHVjZW5lL3NyYy9qYXZhL29y
Zy9hcGFjaGUvbHVjZW5lL2luZGV4L1NlZ21lbnRSZWFkZXIuamF2YQ0KaHR0cDovL2N2cy5hcGFj
aGUub3JnL3ZpZXdjdnMuY2dpL2pha2FydGEtbHVjZW5lL3NyYy9qYXZhL29yZy9hcGFjaGUvbHVj
ZW5lL2luZGV4L0luZGV4V3JpdGVyLmphdmENCg0KQ291bGQgeW91IGNoZWNrIHdoaWNoIG9mIHRo
b3NlIG1pZ2h0IGhhdmUgY2F1c2VkIHRoZSBwcm9ibGVtPyBJIGd1ZXNzIA0KdGhlcmUncyBub3Qg
bXVjaCB0aGUgZGV2ZWxvcGVycyBjYW4gZG8gd2l0aG91dCB0aGUgcHJvYmxlbSBiZWluZyANCnJl
cHJvZHVjaWJsZS4NCg0KcmVnYXJkcw0KIERhbmllbA0KDQotLSANCmh0dHA6Ly93d3cuZGFuaWVs
bmFiZXIuZGUNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBsdWNlbmUt
dXNlci11bnN1YnNjcmliZUBqYWthcnRhLmFwYWNoZS5vcmcNCkZvciBhZGRpdGlvbmFsIGNvbW1h
bmRzLCBlLW1haWw6IGx1Y2VuZS11c2VyLWhlbHBAamFrYXJ0YS5hcGFjaGUub3JnDQoNCg==


From lucene-user-return-10067-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 00:38:50 2004
Return-Path: <lucene-user-return-10067-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 91052 invoked from network); 8 Sep 2004 00:38:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 00:38:49 -0000
Received: (qmail 52368 invoked by uid 500); 8 Sep 2004 00:38:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 52230 invoked by uid 500); 8 Sep 2004 00:38:21 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 52217 invoked by uid 99); 8 Sep 2004 00:38:21 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of dmitrys@earthlink.net designates 207.217.120.228 as permitted sender)
Received: from [207.217.120.228] (HELO mynah.mail.pas.earthlink.net) (207.217.120.228)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Sep 2004 17:38:20 -0700
Received: from [65.174.70.194] (helo=[192.168.12.20])
	by mynah.mail.pas.earthlink.net with asmtp (Exim 4.34)
	id 1C4qTb-0000US-CU
	for lucene-user@jakarta.apache.org; Tue, 07 Sep 2004 17:38:19 -0700
Message-ID: <413E54C6.1080107@earthlink.net>
Date: Tue, 07 Sep 2004 18:39:34 -0600
From: Dmitry Serebrennikov <dmitrys@earthlink.net>
User-Agent: Mozilla Thunderbird 0.7.1 (Windows/20040626)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Spam:too many open files
References: <63434C14F9A6F74CB36B85033E4C30CA013A37@hermes.corp.cyveillance.com> <200409071953.45475@danielnaber.de>
In-Reply-To: <200409071953.45475@danielnaber.de>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-ELNK-Trace: b9a8ec9b68c23176d780f4a490ca69564776905774d2ac4be7636fb5a53d1cfc89e26945eda70310350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c
X-Originating-IP: 65.174.70.194
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Wallen,

Actually, the files Daniel listed were modified on 8/11 and then again 
on 8/15. In the time between 8/11 to 8/15, I belive there could have 
been any number of problems, including corrupt indexes and poor 
multithreaded performance. However, I think after 8/15, the files should 
be in good working order. If you are not sure if you saw problems with 
pre-8/15 or post-8/15 version of the code, is it possible for you to try 
the latest CVS and see if the problem exists now? If it does, it will of 
course require urgent attention.

Thanks very much!
Dmitry.


Daniel Naber wrote:

>On Tuesday 07 September 2004 17:41, wallen@Cyveillance.com wrote:
>
>  
>
>>A note to developers, the code checked into lucene CVS ~Aug 15th, post
>>1.4.1, was causing frequent index corruptions.  When I reverted back to
>>version 1.4 I no longer am getting the corruptions.
>>    
>>
>
>Here are some changes from around that day:
>
>http://cvs.apache.org/viewcvs.cgi/jakarta-lucene/src/java/org/apache/lucene/index/SegmentMerger.java
>http://cvs.apache.org/viewcvs.cgi/jakarta-lucene/src/java/org/apache/lucene/index/SegmentReader.java
>http://cvs.apache.org/viewcvs.cgi/jakarta-lucene/src/java/org/apache/lucene/index/IndexWriter.java
>
>Could you check which of those might have caused the problem? I guess 
>there's not much the developers can do without the problem being 
>reproducible.
>
>regards
> Daniel
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10068-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 01:07:03 2004
Return-Path: <lucene-user-return-10068-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 98595 invoked from network); 8 Sep 2004 01:07:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 01:07:03 -0000
Received: (qmail 71248 invoked by uid 500); 8 Sep 2004 01:06:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 71224 invoked by uid 500); 8 Sep 2004 01:06:54 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 71211 invoked by uid 99); 8 Sep 2004 01:06:53 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 07 Sep 2004 18:06:53 -0700
Received: from synergy1.parc.xerox.com ([13.1.101.60]) by alpha.xerox.com with SMTP id <222140(4)>; Tue, 7 Sep 2004 18:06:21 PDT
Received: from parc.com ([127.0.0.1]) by synergy1.parc.xerox.com with SMTP id <58612>; Tue, 7 Sep 2004 18:05:51 PDT
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
cc: "Ali Rouhi" <ali.rouhi@hp.com>
Subject: MultiFieldQueryParser seems broken...  Fix attached.
Date: Tue, 7 Sep 2004 18:05:48 PDT
From: Bill Janssen <janssen@parc.com>
Message-Id: <04Sep7.180551pdt."58612"@synergy1.parc.xerox.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi!

I'm using Lucene for an application which has lots of fields/document,
in which the users can specify in their config files what fields they
wish to be included by default in a search.  I'd been happily using
MultiFieldQueryParser to do the searches, but the darn users started
demanding more Google-like searches; that is, they want the search
terms to be implicitly AND-ed instead of implicitly OR-ed.  No
problem, thinks I, I'll just set the "operator".

Only to find this has no effect on MultiFieldQueryParser.

Once I looked at the code, I find that MultiFieldQueryParser combines
the clauses at the wrong level -- it combines them at the outermost
level instead of the innermost level.  This means that if you have two
fields, "author" and "title", and the search string "cutting lucene",
you'll get the final query

   (title:cutting title:lucene) (author:cutting author:lucene)

If the search operator is "OR", this isn't a problem.  But if it is,
you have two problems.  The first is that MultiFieldQueryParser seems
to ignore the operator entirely.  But even if it didn't, the second
problem is that the query formed would be

   +(title:cutting title:lucene) +(author:cutting author:lucene)

That is, if the word "Lucene" was in both the author field and the
title field, the match would fit.  This clearly isn't what the
searcher intended.

You can re-write MultiFieldQueryParser, as I've done in the example
code which I append here.  This little program allows you to run
either my parser (-DSearchTest.QueryParser=new) or the old parser
(-DSearchTest.QueryParser=old).  It allows you to use either OR
(-DSearchTest.QueryDefaultOperator=or) or AND
(-DSearchTest.QueryDefaultOperator=and) as the operator.  And it
allows you to pick your favorite set of default search terms
(-DSearchTest.QueryDefaultFields=author:title:body, for example).  It
takes one argument, a query string, and outputs the re-written query
after running it through the query parser.  So to evaluate the above
query:

% java -classpath /import/lucene/lucene-1.4.1.jar:. \
       -DSearchTest.QueryDefaultFields="title:author" \
       -DSearchTest.QueryDefaultOperator=AND \
       -DSearchTest.QueryParser=old \
       SearchTest "cutting lucene"
query is (title:cutting title:lucene) (author:cutting author:lucene)
%

The class NewMultiFieldQueryParser does the combination at the inner
level, using an override of "addClause", instead of the outer level.
Note that it can't cover all cases (notably PhrasePrefixQuery, because
that class has no access methods which allow one to introspect over
it, and SpanQueries, because I don't understand them well enough :-).
I post it here in advance of filing a formal bug report for early
feedback.  But it will show up in a bug report in the near future.

Running the above query with the new parser gives:

% java -classpath /import/lucene/lucene-1.4.1.jar:. \
       -DSearchTest.QueryDefaultFields="title:author" \
       -DSearchTest.QueryDefaultOperator=AND \
       -DSearchTest.QueryParser=new \
       SearchTest "cutting lucene"
query is +(title:cutting author:cutting) +(title:lucene author:lucene)
%

which I claim is what the user is expecting.

In addition, the new class uses an API more similar to QueryParser, so
that the user has less to learn when using it.  The code in it could
probably just be folded into QueryParser, in fact.

Bill


the code for SearchTest:

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.Term;
import org.apache.lucene.index.TermDocs;
import org.apache.lucene.document.Document;
import org.apache.lucene.search.Searcher;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.TermQuery;
import org.apache.lucene.search.PhraseQuery;
import org.apache.lucene.search.FuzzyQuery;
import org.apache.lucene.search.WildcardQuery;
import org.apache.lucene.search.PrefixQuery;
import org.apache.lucene.search.PhraseQuery;
import org.apache.lucene.search.RangeQuery;
import org.apache.lucene.search.BooleanQuery;
import org.apache.lucene.search.Hits;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.queryParser.MultiFieldQueryParser;
import org.apache.lucene.queryParser.FastCharStream;
import org.apache.lucene.queryParser.TokenMgrError;
import org.apache.lucene.queryParser.ParseException;

import java.io.File;
import java.io.StringReader;
import java.util.Date;
import java.util.HashMap;
import java.util.Iterator;
import java.util.StringTokenizer;

class SearchTest {

    static class NewMultiFieldQueryParser extends QueryParser {

        static private final String DEFAULT_FIELD = "%%";

        private String[] fields = null;

        public NewMultiFieldQueryParser (String[] f, Analyzer a) {
            super(DEFAULT_FIELD, a);
            fields = f;
        }

        protected void addClause(java.util.Vector clauses, int conj, int mods, Query q) {

            /*
              System.err.println("addClause:  new query is " + q.toString());
              if (clauses.size() > 0) {
              System.err.println("            existing clauses are:");
              for (int i = 0;  i < clauses.size();  i++)
              System.err.println("                " + clauses.get(i).toString());
              }
            */

            if ((q instanceof TermQuery) && (((TermQuery)q).getTerm().field() == DEFAULT_FIELD)) {
                String text = ((TermQuery)q).getTerm().text();
                BooleanQuery q2 = new BooleanQuery();
                for (int i = 0;  i < fields.length;  i++) {
                    q2.add(new TermQuery(new Term(fields[i], text)), false, false);
                }
                q = q2;
            }

            else if ((q instanceof WildcardQuery) && (((WildcardQuery)q).getTerm().field() == DEFAULT_FIELD)) {
                String text = ((WildcardQuery)q).getTerm().text();
                BooleanQuery q2 = new BooleanQuery();
                for (int i = 0;  i < fields.length;  i++) {
                    q2.add(new WildcardQuery(new Term(fields[i], text)), false, false);
                }
                q = q2;
            }

            else if ((q instanceof FuzzyQuery) && (((FuzzyQuery)q).getTerm().field() == DEFAULT_FIELD)) {
                String text = ((FuzzyQuery)q).getTerm().text();
                BooleanQuery q2 = new BooleanQuery();
                for (int i = 0;  i < fields.length;  i++) {
                    q2.add(new FuzzyQuery(new Term(fields[i], text)), false, false);
                }
                q = q2;
            }

            else if ((q instanceof PrefixQuery) && (((PrefixQuery)q).getPrefix().field() == DEFAULT_FIELD)) {
                String text = ((PrefixQuery)q).getPrefix().text();
                BooleanQuery q2 = new BooleanQuery();
                for (int i = 0;  i < fields.length;  i++) {
                    q2.add(new PrefixQuery(new Term(fields[i], text)), false, false);
                }
                q = q2;
            }

            else if ((q instanceof RangeQuery) && (((RangeQuery)q).getField() == DEFAULT_FIELD)) {
                BooleanQuery q2 = new BooleanQuery();
                for (int i = 0;  i < fields.length;  i++) {
                    RangeQuery q3 = new RangeQuery(new Term(fields[i], ((RangeQuery)q).getLowerTerm().text()),
                                                   new Term(fields[i], ((RangeQuery)q).getUpperTerm().text()),
                                                   ((RangeQuery)q).isInclusive());
                    q2.add(q3, false, false);
                }
                q = q2;
            }

            else if ((q instanceof PhraseQuery) && (((PhraseQuery)q).getTerms()[0].field() == DEFAULT_FIELD)) {
                BooleanQuery q2 = new BooleanQuery();
                Term[] terms = ((PhraseQuery)q).getTerms();
                for (int i = 0;  i < fields.length;  i++) {
                    PhraseQuery q3 = new PhraseQuery();
                    for (int j = 0;  j < terms.length;  j++) {
                        q3.add(new Term(fields[i], terms[j].text()));
                    }
                    q2.add(q3, false, false);
                }
                q = q2;
            }

            super.addClause(clauses, conj, mods, q);
        }
    }

    private static void search (String querystring) {

        StringBuffer query_buffer = new StringBuffer();
        String[] query_default_fields = new String[] { "title", "authors", "contents" };
        int search_operator = QueryParser.DEFAULT_OPERATOR_AND;
        String query_parser = "new";
        Query query = null;

        try {
            StandardAnalyzer analyzer = new StandardAnalyzer();

            String z = System.getProperties().getProperty("SearchTest.QueryDefaultFields");
            if (z != null) {
                query_default_fields = z.split(":");
            }

            z = System.getProperties().getProperty("SearchTest.QueryDefaultOperator");
            if (z != null) {
                if (z.equalsIgnoreCase("or"))
                    search_operator = QueryParser.DEFAULT_OPERATOR_OR;
                else if (z.equalsIgnoreCase("and"))
                    search_operator = QueryParser.DEFAULT_OPERATOR_AND;
            }

            z = System.getProperties().getProperty("SearchTest.QueryParser");
            if (z != null) {
                if (z.equalsIgnoreCase("new"))
                    query_parser = "new";
                else if (z.equalsIgnoreCase("old"))
                    query_parser = "old";
            }

            // form the query
            query_buffer.append(querystring);
            
            // run the query
            if (query_parser.equals("new")) {
                NewMultiFieldQueryParser p = new NewMultiFieldQueryParser(query_default_fields, analyzer);
                p.setOperator(search_operator);
                query = p.parse(query_buffer.toString());
            } else {
                MultiFieldQueryParser p = new MultiFieldQueryParser(query_default_fields[0], analyzer);
                p.setOperator(search_operator);
                query = p.parse(query_buffer.toString(), query_default_fields, analyzer);
            }
            System.err.println("query is " + query.toString());
                
        } catch (ParseException e) {
            System.out.println("* Invalid search expression '" + query_buffer.toString() + "' specified");
            System.err.println(" caught a " + e.getClass() +
                               "\n with message: " + e.getMessage());
        } catch (Exception e) {
            System.out.println("* Lucene search engine raised " + e.getClass() + " with message " + e.getMessage());
            System.err.println(" 'search' caught a " + e.getClass() +
                               "\n with message: " + e.getMessage());
            e.printStackTrace(System.err);
        }
    }

    private static void usage () {
        // print usage message to stderr
        System.err.println("Usage:  SearchTest 'QUERY'");
    }

    public static void main(String[] args) {

        if (args.length != 1) {
            usage();
            return;
        }

        search (args[0]);

    }
}

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10069-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 01:40:38 2004
Return-Path: <lucene-user-return-10069-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 16991 invoked from network); 8 Sep 2004 01:40:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 01:40:38 -0000
Received: (qmail 4560 invoked by uid 500); 8 Sep 2004 01:40:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 4522 invoked by uid 500); 8 Sep 2004 01:40:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 4503 invoked by uid 99); 8 Sep 2004 01:40:29 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=MIME_BASE64_NO_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [63.100.163.104] (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Sep 2004 18:40:27 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Subject: RE: Spam:too many open files
Date: Tue, 7 Sep 2004 21:40:26 -0400
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA013A41@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Spam:too many open files
Thread-Index: AcSVPBy1oItXHR5oTPSmaycLSAsNUgACKG6g
From: "Will Allen" <wallen@Cyveillance.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

SSB3aWxsIGRlcGxveSBhbmQgdGVzdCB0aHJvdWdoIHRoZSBlbmQgb2YgdGhlIHdlZWsgYW5kIHJl
cG9ydCBiYWNrIEZyaWRheSBpZiB0aGUgcHJvYmxlbSBwZXJzaXN0cy4gIFRoYW5rIHlvdSENCg0K
LS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCkZyb206IERtaXRyeSBTZXJlYnJlbm5pa292IFtt
YWlsdG86ZG1pdHJ5c0BlYXJ0aGxpbmsubmV0XQ0KU2VudDogVHVlc2RheSwgU2VwdGVtYmVyIDA3
LCAyMDA0IDg6NDAgUE0NClRvOiBMdWNlbmUgVXNlcnMgTGlzdA0KU3ViamVjdDogUmU6IFNwYW06
dG9vIG1hbnkgb3BlbiBmaWxlcw0KDQoNCkhpIFdhbGxlbiwNCg0KQWN0dWFsbHksIHRoZSBmaWxl
cyBEYW5pZWwgbGlzdGVkIHdlcmUgbW9kaWZpZWQgb24gOC8xMSBhbmQgdGhlbiBhZ2FpbiANCm9u
IDgvMTUuIEluIHRoZSB0aW1lIGJldHdlZW4gOC8xMSB0byA4LzE1LCBJIGJlbGl2ZSB0aGVyZSBj
b3VsZCBoYXZlIA0KYmVlbiBhbnkgbnVtYmVyIG9mIHByb2JsZW1zLCBpbmNsdWRpbmcgY29ycnVw
dCBpbmRleGVzIGFuZCBwb29yIA0KbXVsdGl0aHJlYWRlZCBwZXJmb3JtYW5jZS4gSG93ZXZlciwg
SSB0aGluayBhZnRlciA4LzE1LCB0aGUgZmlsZXMgc2hvdWxkIA0KYmUgaW4gZ29vZCB3b3JraW5n
IG9yZGVyLiBJZiB5b3UgYXJlIG5vdCBzdXJlIGlmIHlvdSBzYXcgcHJvYmxlbXMgd2l0aCANCnBy
ZS04LzE1IG9yIHBvc3QtOC8xNSB2ZXJzaW9uIG9mIHRoZSBjb2RlLCBpcyBpdCBwb3NzaWJsZSBm
b3IgeW91IHRvIHRyeSANCnRoZSBsYXRlc3QgQ1ZTIGFuZCBzZWUgaWYgdGhlIHByb2JsZW0gZXhp
c3RzIG5vdz8gSWYgaXQgZG9lcywgaXQgd2lsbCBvZiANCmNvdXJzZSByZXF1aXJlIHVyZ2VudCBh
dHRlbnRpb24uDQoNClRoYW5rcyB2ZXJ5IG11Y2ghDQpEbWl0cnkuDQoNCg0KRGFuaWVsIE5hYmVy
IHdyb3RlOg0KDQo+T24gVHVlc2RheSAwNyBTZXB0ZW1iZXIgMjAwNCAxNzo0MSwgd2FsbGVuQEN5
dmVpbGxhbmNlLmNvbSB3cm90ZToNCj4NCj4gIA0KPg0KPj5BIG5vdGUgdG8gZGV2ZWxvcGVycywg
dGhlIGNvZGUgY2hlY2tlZCBpbnRvIGx1Y2VuZSBDVlMgfkF1ZyAxNXRoLCBwb3N0DQo+PjEuNC4x
LCB3YXMgY2F1c2luZyBmcmVxdWVudCBpbmRleCBjb3JydXB0aW9ucy4gIFdoZW4gSSByZXZlcnRl
ZCBiYWNrIHRvDQo+PnZlcnNpb24gMS40IEkgbm8gbG9uZ2VyIGFtIGdldHRpbmcgdGhlIGNvcnJ1
cHRpb25zLg0KPj4gICAgDQo+Pg0KPg0KPkhlcmUgYXJlIHNvbWUgY2hhbmdlcyBmcm9tIGFyb3Vu
ZCB0aGF0IGRheToNCj4NCj5odHRwOi8vY3ZzLmFwYWNoZS5vcmcvdmlld2N2cy5jZ2kvamFrYXJ0
YS1sdWNlbmUvc3JjL2phdmEvb3JnL2FwYWNoZS9sdWNlbmUvaW5kZXgvU2VnbWVudE1lcmdlci5q
YXZhDQo+aHR0cDovL2N2cy5hcGFjaGUub3JnL3ZpZXdjdnMuY2dpL2pha2FydGEtbHVjZW5lL3Ny
Yy9qYXZhL29yZy9hcGFjaGUvbHVjZW5lL2luZGV4L1NlZ21lbnRSZWFkZXIuamF2YQ0KPmh0dHA6
Ly9jdnMuYXBhY2hlLm9yZy92aWV3Y3ZzLmNnaS9qYWthcnRhLWx1Y2VuZS9zcmMvamF2YS9vcmcv
YXBhY2hlL2x1Y2VuZS9pbmRleC9JbmRleFdyaXRlci5qYXZhDQo+DQo+Q291bGQgeW91IGNoZWNr
IHdoaWNoIG9mIHRob3NlIG1pZ2h0IGhhdmUgY2F1c2VkIHRoZSBwcm9ibGVtPyBJIGd1ZXNzIA0K
PnRoZXJlJ3Mgbm90IG11Y2ggdGhlIGRldmVsb3BlcnMgY2FuIGRvIHdpdGhvdXQgdGhlIHByb2Js
ZW0gYmVpbmcgDQo+cmVwcm9kdWNpYmxlLg0KPg0KPnJlZ2FyZHMNCj4gRGFuaWVsDQo+DQo+ICAN
Cj4NCg0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGx1Y2VuZS11c2Vy
LXVuc3Vic2NyaWJlQGpha2FydGEuYXBhY2hlLm9yZw0KRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMs
IGUtbWFpbDogbHVjZW5lLXVzZXItaGVscEBqYWthcnRhLmFwYWNoZS5vcmcNCg0K


From lucene-user-return-10070-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 04:23:53 2004
Return-Path: <lucene-user-return-10070-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 84191 invoked from network); 8 Sep 2004 04:23:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 04:23:52 -0000
Received: (qmail 46482 invoked by uid 500); 8 Sep 2004 04:23:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 46437 invoked by uid 500); 8 Sep 2004 04:23:40 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 46420 invoked by uid 99); 8 Sep 2004 04:23:40 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [210.50.55.251] (HELO file1.syd.nuix.com.au) (210.50.55.251)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Sep 2004 21:23:39 -0700
Received: from [192.168.222.136] (host136.syd.nuix.com.au [192.168.222.136])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id B5339B6FE1
	for <lucene-user@jakarta.apache.org>; Wed,  8 Sep 2004 14:23:42 +1000 (EST)
Message-ID: <413E8A5F.2080302@nuix.com.au>
Date: Wed, 08 Sep 2004 14:28:15 +1000
From: Minh Kama Yie <minh@nuix.com.au>
User-Agent: Mozilla Thunderbird 0.7.3 (Windows/20040803)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: lucene-user@jakarta.apache.org
Subject: Use of explain() vs search()
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi all,


I was wondering if anyone could tell me what the expected behaviour is 
for calling an explain() without calling a search() first on a 
particular query. Would it effectively do a search and then I can 
examine the Explanation in order to check whether it matches?

I'm currently looking at some existing code to this effect:

Explanation  exp = searcher.explain(myQuery, docId)
// Where docId was _not_ returned by a search on myQuery

if (exp.getValue() > 0.0f)
{
    // Assuming document for docId matched query.
}

Is the assumption wrong?

I ask because the result of this code is inconsistent with

Hits h = searcher.search(myQuery);  // there are not hits returned.

Thanks in advance,

Minh




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10071-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 04:31:28 2004
Return-Path: <lucene-user-return-10071-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 86904 invoked from network); 8 Sep 2004 04:31:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 04:31:27 -0000
Received: (qmail 55977 invoked by uid 500); 8 Sep 2004 04:31:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 55927 invoked by uid 500); 8 Sep 2004 04:31:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 55913 invoked by uid 99); 8 Sep 2004 04:31:13 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [210.50.55.251] (HELO file1.syd.nuix.com.au) (210.50.55.251)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Sep 2004 21:31:13 -0700
Received: from [192.168.222.136] (host136.syd.nuix.com.au [192.168.222.136])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id B9E52B6FE1
	for <lucene-user@jakarta.apache.org>; Wed,  8 Sep 2004 14:31:17 +1000 (EST)
Message-ID: <413E8C26.6040604@nuix.com.au>
Date: Wed, 08 Sep 2004 14:35:50 +1000
From: Minh Kama Yie <minh@nuix.com.au>
User-Agent: Mozilla Thunderbird 0.7.3 (Windows/20040803)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Use of explain() vs search()
References: <413E8A5F.2080302@nuix.com.au>
In-Reply-To: <413E8A5F.2080302@nuix.com.au>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi all,

Sorry I should clarify my last point.

The search() would return no hits, but the explain() using the 
apparently invalid docId returns a value greater than 0.

For what it's worth it's performing a PhraseQuery.

Thanks in advance,

Minh

Minh Kama Yie wrote:

> Hi all,
>
>
> I was wondering if anyone could tell me what the expected behaviour is 
> for calling an explain() without calling a search() first on a 
> particular query. Would it effectively do a search and then I can 
> examine the Explanation in order to check whether it matches?
>
> I'm currently looking at some existing code to this effect:
>
> Explanation  exp = searcher.explain(myQuery, docId)
> // Where docId was _not_ returned by a search on myQuery
>
> if (exp.getValue() > 0.0f)
> {
>    // Assuming document for docId matched query.
> }
>
> Is the assumption wrong?
>
> I ask because the result of this code is inconsistent with
>
> Hits h = searcher.search(myQuery);  // there are not hits returned.
>
> Thanks in advance,
>
> Minh
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10072-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 05:37:28 2004
Return-Path: <lucene-user-return-10072-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 19462 invoked from network); 8 Sep 2004 05:37:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 05:37:27 -0000
Received: (qmail 52233 invoked by uid 500); 8 Sep 2004 05:37:15 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 52185 invoked by uid 500); 8 Sep 2004 05:37:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 52170 invoked by uid 99); 8 Sep 2004 05:37:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [220.248.1.114] (HELO itmail) (220.248.1.114)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Sep 2004 22:37:12 -0700
Received: from lithos [61.175.135.164] by itmail
  (SMTPD32-6.00) id ADCE4400182; Wed, 08 Sep 2004 13:51:10 +0800
Message-ID: <040b01c49566$a8ffb670$0f6ea8c0@lithos>
From: "WuDG@infoPro.cn" <wudg@infopro.cn>
To: <lucene-user@jakarta.apache.org>
Subject: pdf in Chinese
Date: Wed, 8 Sep 2004 13:42:41 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.3790.0
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.0
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi all,
    i use pdfbox to parse pdf file to lucene document.when i parse  Chinese
pdf file,pdfbox is not always success.
    Is anyone have some advice?


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10073-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 06:10:47 2004
Return-Path: <lucene-user-return-10073-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 32387 invoked from network); 8 Sep 2004 06:10:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 06:10:47 -0000
Received: (qmail 86911 invoked by uid 500); 8 Sep 2004 06:10:36 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 86859 invoked by uid 500); 8 Sep 2004 06:10:35 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 86842 invoked by uid 99); 8 Sep 2004 06:10:35 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 07 Sep 2004 23:10:34 -0700
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 8 Sep 2004 08:12:24 +0200
Message-ID: <413EA2C6.8070506@ifit.uni-klu.ac.at>
Date: Wed, 08 Sep 2004 08:12:22 +0200
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: lucene index parser problem
References: <aa57b907040907133556360857@mail.gmail.com> <be6a143b0409071358239997c6@mail.gmail.com>
In-Reply-To: <be6a143b0409071358239997c6@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 08 Sep 2004 06:12:24.0820 (UTC) FILETIME=[CF2E3340:01C4956A]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

maybe you should encode the html code ...

Patrick Burleson wrote:

>Why oh why did you send this to the tomcat lists?
>
>Don't cross post! Especially when the question doesn't even apply to
>one of the lists.
>
>Patrick
>
>On Tue, 7 Sep 2004 16:35:35 -0400, hui liu <ivy.liu@gmail.com> wrote:
>  
>
>>Hi,
>>
>>I have such a problem when creating lucene index for many html files:
>>
>>It shows "aborted, expected<tagname>....<tagend>" for those html files
>>which contain java scripts. It seems it cannot parse the tags < \>.
>>    
>>
?? is < \> a valid tag? I think it should be < />
Do you want to index the whole HTML file, or just the information i this 
files?
Maybe you should use a HTML2TXT converter, and then index the resulting 
text.

 
 All the best,

  Sergiu

>>Does anyone has any solution?
>>
>>Thank you very very much...!!!
>>
>>Ivy.
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>>    
>>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10074-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 08:15:54 2004
Return-Path: <lucene-user-return-10074-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 7085 invoked from network); 8 Sep 2004 08:15:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 08:15:54 -0000
Received: (qmail 64255 invoked by uid 500); 8 Sep 2004 08:15:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 64182 invoked by uid 500); 8 Sep 2004 08:15:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 64085 invoked by uid 99); 8 Sep 2004 08:15:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [202.51.64.130] (HELO idlewild.ccnep.com.np) (202.51.64.130)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 01:15:36 -0700
Received: from neplaptop ([202.51.64.153])
	by idlewild.ccnep.com.np (8.12.5/8.12.5) with SMTP id i888dpmt013951
	for <lucene-user@jakarta.apache.org>; Wed, 8 Sep 2004 14:24:58 +0545
Message-ID: <005d01c4957b$fc3feb60$994033ca@neplaptop>
From: "Chandan Tamrakar" <chandan@ccnep.com.np>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <040b01c49566$a8ffb670$0f6ea8c0@lithos>
Subject: Re: pdf in Chinese
Date: Wed, 8 Sep 2004 14:00:19 +0545
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

which analyzer you are using to index chinese pdf documents ?
I think you should use cjkanalyzer
----- Original Message ----- 
From: "WuDG@infoPro.cn" <wudg@infopro.cn>
To: <lucene-user@jakarta.apache.org>
Sent: Wednesday, September 08, 2004 11:27 AM
Subject: pdf in Chinese


> Hi all,
>     i use pdfbox to parse pdf file to lucene document.when i parse
Chinese
> pdf file,pdfbox is not always success.
>     Is anyone have some advice?
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10075-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 08:20:07 2004
Return-Path: <lucene-user-return-10075-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 8837 invoked from network); 8 Sep 2004 08:20:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 08:20:05 -0000
Received: (qmail 69302 invoked by uid 500); 8 Sep 2004 08:19:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 69138 invoked by uid 500); 8 Sep 2004 08:19:39 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 69101 invoked by uid 99); 8 Sep 2004 08:19:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [212.179.127.169] (HELO koutmail.amdocs.com) (212.179.127.169)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 01:19:35 -0700
Received: from omail2.amdocs.com ([212.179.127.133])
	by koutmail.amdocs.com (8.12.11/8.12.9) with ESMTP id i888HaAS006776
	for <lucene-user@jakarta.apache.org>; Wed, 8 Sep 2004 11:17:36 +0300
Received: from TLVMAIL6.corp.amdocs.com (localhost.localdomain [127.0.0.1])
	by omail2.amdocs.com (8.12.11/8.12.11) with ESMTP id i888JQii014262
	for <lucene-user@jakarta.apache.org>; Wed, 8 Sep 2004 11:19:26 +0300
X-MimeOLE: Produced By Microsoft Exchange V6.0.6556.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: pdf in Chinese
Date: Wed, 8 Sep 2004 11:19:26 +0300
Message-ID: <8BD2A3830969074D87B465C95A58AA31010F4A51@tlvmail6.corp.amdocs.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: pdf in Chinese
Thread-Index: AcSVfBl+nmH0AE41SnWaKj/NBA9J6QAAFQtA
From: "Alex Kiselevski" <ALEXKIS@Amdocs.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Hi,
Can you pls,advice me any solution for hebrew analyzer

-----Original Message-----
From: Chandan Tamrakar [mailto:chandan@ccnep.com.np]=0D
Sent: Wednesday, September 08, 2004 11:15 AM
To: Lucene Users List
Subject: Re: pdf in Chinese


which analyzer you are using to index chinese pdf documents ?
I think you should use cjkanalyzer
----- Original Message -----=0D
From: "WuDG@infoPro.cn" <wudg@infopro.cn>
To: <lucene-user@jakarta.apache.org>
Sent: Wednesday, September 08, 2004 11:27 AM
Subject: pdf in Chinese


> Hi all,
>     i use pdfbox to parse pdf file to lucene document.when i parse
Chinese
> pdf file,pdfbox is not always success.
>     Is anyone have some advice?
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


The information contained in this message is proprietary of Amdocs,
protected from disclosure, and may be privileged.
The information is intended to be conveyed only to the designated=
 recipient(s)
of the message. If the reader of this message is not the intended=
 recipient,
you are hereby notified that any dissemination, use, distribution or=
 copying of=0D
this communication is strictly prohibited and may be unlawful.=0D
If you have received this communication in error, please notify us=
 immediately
by replying to the message and deleting it from your computer.
Thank you.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10076-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 08:30:47 2004
Return-Path: <lucene-user-return-10076-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 14256 invoked from network); 8 Sep 2004 08:30:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 08:30:47 -0000
Received: (qmail 87560 invoked by uid 500); 8 Sep 2004 08:30:37 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 87531 invoked by uid 500); 8 Sep 2004 08:30:37 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 87517 invoked by uid 99); 8 Sep 2004 08:30:37 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of rene.a.hackl@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 08 Sep 2004 01:30:35 -0700
Received: (qmail 13646 invoked by uid 0); 8 Sep 2004 08:30:33 -0000
Received: from 141.66.16.25 by www15.gmx.net with HTTP;
	Wed, 8 Sep 2004 10:30:33 +0200 (MEST)
Date: Wed, 8 Sep 2004 10:30:33 +0200 (MEST)
From: =?ISO-8859-1?Q?=22Ren=E9_Hackl=22?= <rene.a.hackl@gmx.de>
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Subject: Re: MultiFieldQueryParser seems broken...  Fix attached.
X-Priority: 3 (Normal)
X-Authenticated: #24166002
Message-ID: <26192.1094632233@www15.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Bill,

-----
But even if it didn't, the second
problem is that the query formed would be

   +(title:cutting title:lucene) +(author:cutting author:lucene)

That is, if the word "Lucene" was in both the author field and the
title field, the match would fit.  This clearly isn't what the
searcher intended.
-----
AFA my understanding of the query syntax goes, this would be interpreted
as (A OR B) AND (C OR D) which would produce the same set as 
(A OR C) AND (B OR D) == +(title:cutting author:cutting) +(title:lucene
author:lucene). But it would only be true for this special case with 2 terms
and 2 fields.

I reckon there has been a discussion (and solution :-) on how to achieve the
functionality you've been
after:

http://issues.apache.org/eyebrowse/ReadMsg?listName=lucene-user@jakarta.apache.org&msgId=1798116

I'm not sure if this would be the same though.

Best regards,
Ren

-- 
Supergnstige DSL-Tarife + WLAN-Router fr 0,- EUR*
Jetzt zu GMX wechseln und sparen http://www.gmx.net/de/go/dsl


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10077-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 09:08:07 2004
Return-Path: <lucene-user-return-10077-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 32212 invoked from network); 8 Sep 2004 09:08:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 09:08:07 -0000
Received: (qmail 36274 invoked by uid 500); 8 Sep 2004 09:07:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 36249 invoked by uid 500); 8 Sep 2004 09:07:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 36234 invoked by uid 99); 8 Sep 2004 09:07:53 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [205.158.62.196] (HELO ws6-1.us4.outblaze.com) (205.158.62.196)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 08 Sep 2004 02:07:53 -0700
Received: (qmail 8784 invoked from network); 8 Sep 2004 09:07:39 -0000
Received: from unknown (HELO ?192.168.1.102?) (erik@hatcher.net@68.169.41.169)
  by ws6-1.us4.outblaze.com with SMTP; 8 Sep 2004 09:07:39 -0000
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <413E8C26.6040604@nuix.com.au>
References: <413E8A5F.2080302@nuix.com.au> <413E8C26.6040604@nuix.com.au>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <8D6AAF52-0176-11D9-A334-000393A564E6@hatcher.net>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@hatcher.net>
Subject: Re: Use of explain() vs search()
Date: Wed, 8 Sep 2004 05:07:47 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Could you create a simple piece of code (using a RAMDirectory) that 
demonstrates this issue?

	Erik

On Sep 8, 2004, at 12:35 AM, Minh Kama Yie wrote:

> Hi all,
>
> Sorry I should clarify my last point.
>
> The search() would return no hits, but the explain() using the 
> apparently invalid docId returns a value greater than 0.
>
> For what it's worth it's performing a PhraseQuery.
>
> Thanks in advance,
>
> Minh
>
> Minh Kama Yie wrote:
>
>> Hi all,
>>
>>
>> I was wondering if anyone could tell me what the expected behaviour 
>> is for calling an explain() without calling a search() first on a 
>> particular query. Would it effectively do a search and then I can 
>> examine the Explanation in order to check whether it matches?
>>
>> I'm currently looking at some existing code to this effect:
>>
>> Explanation  exp = searcher.explain(myQuery, docId)
>> // Where docId was _not_ returned by a search on myQuery
>>
>> if (exp.getValue() > 0.0f)
>> {
>>    // Assuming document for docId matched query.
>> }
>>
>> Is the assumption wrong?
>>
>> I ask because the result of this code is inconsistent with
>>
>> Hits h = searcher.search(myQuery);  // there are not hits returned.
>>
>> Thanks in advance,
>>
>> Minh
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10078-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 09:53:13 2004
Return-Path: <lucene-user-return-10078-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 58434 invoked from network); 8 Sep 2004 09:53:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 09:53:13 -0000
Received: (qmail 93001 invoked by uid 500); 8 Sep 2004 09:53:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 92893 invoked by uid 500); 8 Sep 2004 09:53:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 92878 invoked by uid 99); 8 Sep 2004 09:53:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [220.248.1.114] (HELO itmail) (220.248.1.114)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 02:52:56 -0700
Received: from lithos [61.175.135.164] by itmail
  (SMTPD32-6.00) id A9BC3EFD0022; Wed, 08 Sep 2004 18:06:52 +0800
Message-ID: <044d01c4958a$62058190$0f6ea8c0@lithos>
From: "WuDG@infoPro.cn" <wudg@infopro.cn>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <040b01c49566$a8ffb670$0f6ea8c0@lithos> <005d01c4957b$fc3feb60$994033ca@neplaptop>
Subject: Re: pdf in Chinese
Date: Wed, 8 Sep 2004 17:58:24 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="gb2312"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.3790.0
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.0
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

it is not about analyzer ,i  need to read text from pdf file first.

----- Original Message ----- 
From: "Chandan Tamrakar" <chandan@ccnep.com.np>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Wednesday, September 08, 2004 4:15 PM
Subject: Re: pdf in Chinese


> which analyzer you are using to index chinese pdf documents ?
> I think you should use cjkanalyzer
> ----- Original Message ----- 
> From: "WuDG@infoPro.cn" <wudg@infopro.cn>
> To: <lucene-user@jakarta.apache.org>
> Sent: Wednesday, September 08, 2004 11:27 AM
> Subject: pdf in Chinese
> 
> 
> > Hi all,
> >     i use pdfbox to parse pdf file to lucene document.when i parse
> Chinese
> > pdf file,pdfbox is not always success.
> >     Is anyone have some advice?
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10079-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 10:24:54 2004
Return-Path: <lucene-user-return-10079-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 75198 invoked from network); 8 Sep 2004 10:24:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 10:24:53 -0000
Received: (qmail 35438 invoked by uid 500); 8 Sep 2004 10:24:33 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 35410 invoked by uid 500); 8 Sep 2004 10:24:32 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 35395 invoked by uid 99); 8 Sep 2004 10:24:32 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 03:24:31 -0700
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 8 Sep 2004 12:26:21 +0200
Message-ID: <413EDE4A.4010406@ifit.uni-klu.ac.at>
Date: Wed, 08 Sep 2004 12:26:18 +0200
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: *term search
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 08 Sep 2004 10:26:21.0679 (UTC) FILETIME=[490E5FF0:01C4958E]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N



 Hi all,

I want to discuss a little problem, lucene doesn't support *Term like 
queries.
I know that this can bring a lot of results in the memory and therefore 
it is restricted.

I think that allowing this kind of search and limiting the amount of 
returned results would be
a more usefull aproach. Since the german language has a lot of words 
that are concatenated or
derivated from another words by using a prefix.

 I'm not a good german speaker but I can say that maybe a half of the 
german words are a part of the
category described above.

for example
Himbeer, Erdbeer, Johanesbeer -- all of them are fruits from a certain 
category. So it will make sense to search
for "*beer". Also ... I know that the word is ended in "beer" but I 
don't know the exact word ...
"*beer" will help me a lot.

also:
schreiben = to write
beschreiben = to describe
verschreiben = to subscribe ..

I would like to use "*schreiben".

 So my question is if there is a simple solution for implementing the 
funtionality mentioned above.
Maybe subclassing one class and overwriting some methods will sufice.


 Thank in advance,

 Sergiu



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10080-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 10:46:27 2004
Return-Path: <lucene-user-return-10080-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 84929 invoked from network); 8 Sep 2004 10:46:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 10:46:26 -0000
Received: (qmail 68442 invoked by uid 500); 8 Sep 2004 10:46:15 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 68419 invoked by uid 500); 8 Sep 2004 10:46:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 68405 invoked by uid 99); 8 Sep 2004 10:46:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [205.158.62.196] (HELO ws6-1.us4.outblaze.com) (205.158.62.196)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 08 Sep 2004 03:46:14 -0700
Received: (qmail 30210 invoked from network); 8 Sep 2004 10:46:03 -0000
Received: from unknown (HELO ?192.168.1.102?) (erik@hatcher.net@68.169.41.169)
  by ws6-1.us4.outblaze.com with SMTP; 8 Sep 2004 10:46:03 -0000
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <413EDE4A.4010406@ifit.uni-klu.ac.at>
References: <413EDE4A.4010406@ifit.uni-klu.ac.at>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <4C1DD2AD-0184-11D9-A334-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: *term search
Date: Wed, 8 Sep 2004 06:46:10 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Sep 8, 2004, at 6:26 AM, sergiu gordea wrote:
> I want to discuss a little problem, lucene doesn't support *Term like 
> queries.

First of all, this is untrue.  WildcardQuery itself most definitely 
supports wildcards at the beginning.

> I would like to use "*schreiben".

The dilemma you've encountered is that QueryParser prevents queries 
that begin with a wildcard.

> So my question is if there is a simple solution for implementing the 
> funtionality mentioned above.
> Maybe subclassing one class and overwriting some methods will sufice.

It will require more than that in this case.  You will need to create a 
custom parser that allows the grammar you'd like.  Feel free to use the 
JavaCC source code to QueryParser as a basis of your customizations.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10081-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 10:48:18 2004
Return-Path: <lucene-user-return-10081-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 85699 invoked from network); 8 Sep 2004 10:48:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 10:48:18 -0000
Received: (qmail 70977 invoked by uid 500); 8 Sep 2004 10:48:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 70953 invoked by uid 500); 8 Sep 2004 10:48:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 70940 invoked by uid 99); 8 Sep 2004 10:48:08 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 03:48:08 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id 39BB723BF4
	for <lucene-user@jakarta.apache.org>; Wed,  8 Sep 2004 12:49:26 +0200 (CEST)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 30992-07 for <lucene-user@jakarta.apache.org>;
 Wed,  8 Sep 2004 12:49:26 +0200 (CEST)
Received: from tucholsky.office.tanto.de (unknown [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP id 1BBF623BEE
	for <lucene-user@jakarta.apache.org>; Wed,  8 Sep 2004 12:49:26 +0200 (CEST)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id i88Am5GL011927
	for <lucene-user@jakarta.apache.org>; Wed, 8 Sep 2004 12:48:05 +0200
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id i88Am5lS011923;
	Wed, 8 Sep 2004 12:48:05 +0200
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16702.58213.498668.677048@tanto-xipolis.de>
Date: Wed, 8 Sep 2004 12:48:05 +0200
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: *term search
In-Reply-To: <413EDE4A.4010406@ifit.uni-klu.ac.at>
References: <413EDE4A.4010406@ifit.uni-klu.ac.at>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

sergiu gordea writes:
> 
> 
>  Hi all,
> 
> I want to discuss a little problem, lucene doesn't support *Term like 
> queries.
> I know that this can bring a lot of results in the memory and therefore 
> it is restricted.
> 
That's not the reason for the restriction. That's possible with a* also.
The problem is, that lucene has to check all terms to see if they end
with Term. That makes the performance pretty poor.
A prefix allows to restrict the search on words with this prefix 
efficiantly, since the wordlist is orderd.
> 
>  So my question is if there is a simple solution for implementing the 
> funtionality mentioned above.
Sure.
Just follow the way, wildcard query is implemented.

Actually I'm not sure if the restriction you mention is in the wildcard
query itself or only in the query parser. In the latter case, you might
just create the query yourself.

A better way for postfix queries is to create an additional search field
where all words are reversed and search for mreT* on that field.

Depends on the size of your index, how important such an optimization is.

Morus


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10082-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 11:16:32 2004
Return-Path: <lucene-user-return-10082-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 99407 invoked from network); 8 Sep 2004 11:16:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 11:16:32 -0000
Received: (qmail 12021 invoked by uid 500); 8 Sep 2004 11:16:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 11923 invoked by uid 500); 8 Sep 2004 11:16:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 11908 invoked by uid 99); 8 Sep 2004 11:16:18 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [160.62.1.169] (HELO fw-mail12.novartis.com) (160.62.1.169)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 04:16:17 -0700
Received: from mtap2.is.chbs ([192.37.33.19])
	by fw-mail12.novartis.com (Switch-3.1.6/Switch-3.1.6) with ESMTP id i88BGEsq20914254
	for <lucene-user@jakarta.apache.org>; Wed, 8 Sep 2004 13:16:14 +0200
Received: from phchbs-s3025.EU.novartis.net (phchbs-s3025.eu.novartis.net [192.37.31.249])
	by mtap2.is.chbs (Switch-3.1.6/Switch-3.1.0) with ESMTP id i88BGEZQ12239012
	for <lucene-user@jakarta.apache.org>; Wed, 8 Sep 2004 13:16:14 +0200
Subject: Re: *term search
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Message-ID: <OF218C504C.451143ED-ONC1256F09.003DC5A8-C1256F09.003DE844@EU.novartis.net>
From: iouli.golovatyi@group.novartis.com
Date: Wed, 8 Sep 2004 13:16:11 +0200
MIME-Version: 1.0
Content-type: multipart/mixed; 
	Boundary="0__=4EBBE59ADFAE43388f9e8a93df938690918c4EBBE59ADFAE4338"
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0__=4EBBE59ADFAE43388f9e8a93df938690918c4EBBE59ADFAE4338
Content-type: text/plain; charset=us-ascii


.. and here is the way to do it:
(See attached file: SUPPOR~1.RAR)



                                                                                                          
                      Erik Hatcher                                                                        
                      <erik@ehatchersol        To:       "Lucene Users List"                              
                      utions.com>               <lucene-user@jakarta.apache.org>                          
                                               cc:       (bcc: Iouli Golovatyi/X/GP/Novartis)             
                      08.09.2004 12:46         Subject:  Re: *term search                                 
                      Please respond to                                                                   
                      "Lucene Users            Category:       |-------------------------|                
                      List"                                    | ( ) Action needed       |                
                                                               | ( ) Decision needed     |                
                                                               | ( ) General Information |                
                                                               |-------------------------|                
                                                                                                          
                                                                                                          




On Sep 8, 2004, at 6:26 AM, sergiu gordea wrote:
> I want to discuss a little problem, lucene doesn't support *Term like
> queries.

First of all, this is untrue.  WildcardQuery itself most definitely
supports wildcards at the beginning.

> I would like to use "*schreiben".

The dilemma you've encountered is that QueryParser prevents queries
that begin with a wildcard.

> So my question is if there is a simple solution for implementing the
> funtionality mentioned above.
> Maybe subclassing one class and overwriting some methods will sufice.

It will require more than that in this case.  You will need to create a
custom parser that allows the grammar you'd like.  Feel free to use the
JavaCC source code to QueryParser as a basis of your customizations.

             Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org






--0__=4EBBE59ADFAE43388f9e8a93df938690918c4EBBE59ADFAE4338
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
--0__=4EBBE59ADFAE43388f9e8a93df938690918c4EBBE59ADFAE4338--


From lucene-user-return-10083-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 11:44:50 2004
Return-Path: <lucene-user-return-10083-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 14203 invoked from network); 8 Sep 2004 11:44:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 11:44:50 -0000
Received: (qmail 50089 invoked by uid 500); 8 Sep 2004 11:44:40 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 50061 invoked by uid 500); 8 Sep 2004 11:44:39 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 50047 invoked by uid 99); 8 Sep 2004 11:44:39 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of ben@csh.rit.edu designates 129.21.60.6 as permitted sender)
Received: from [129.21.60.6] (HELO blacksheep.csh.rit.edu) (129.21.60.6)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 04:44:37 -0700
Received: from fury.csh.rit.edu (fury.csh.rit.edu [IPv6:2001:470:1f00:135:a00:20ff:fe8d:5399])
	by blacksheep.csh.rit.edu (Postfix) with ESMTP id 40695912D
	for <lucene-user@jakarta.apache.org>; Wed,  8 Sep 2004 07:44:35 -0400 (EDT)
Received: by fury.csh.rit.edu (Postfix, from userid 38448)
	id 05D51149E; Wed,  8 Sep 2004 07:44:34 -0400 (EDT)
Received: from localhost (localhost [127.0.0.1])
	by fury.csh.rit.edu (Postfix) with ESMTP id D64AE130B
	for <lucene-user@jakarta.apache.org>; Wed,  8 Sep 2004 07:44:34 -0400 (EDT)
Date: Wed, 8 Sep 2004 07:44:34 -0400 (EDT)
From: Ben Litchfield <ben@csh.rit.edu>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: pdf in Chinese
In-Reply-To: <044d01c4958a$62058190$0f6ea8c0@lithos>
Message-ID: <Pine.GSO.4.53.0409080741370.7559@fury.csh.rit.edu>
References: <040b01c49566$a8ffb670$0f6ea8c0@lithos> <005d01c4957b$fc3feb60$994033ca@neplaptop>
 <044d01c4958a$62058190$0f6ea8c0@lithos>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


This appears to be more of a PDFBox issue than a lucene issue, please post
an issue to the PDFBox site.

Also note, that because of certain encodings that a PDF writer can use, it
is impossible to extract text from all PDF documents.

Ben

On Wed, 8 Sep 2004, WuDG@infoPro.cn wrote:

> it is not about analyzer ,i  need to read text from pdf file first.
>
> ----- Original Message -----
> From: "Chandan Tamrakar" <chandan@ccnep.com.np>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Wednesday, September 08, 2004 4:15 PM
> Subject: Re: pdf in Chinese
>
>
> > which analyzer you are using to index chinese pdf documents ?
> > I think you should use cjkanalyzer
> > ----- Original Message -----
> > From: "WuDG@infoPro.cn" <wudg@infopro.cn>
> > To: <lucene-user@jakarta.apache.org>
> > Sent: Wednesday, September 08, 2004 11:27 AM
> > Subject: pdf in Chinese
> >
> >
> > > Hi all,
> > >     i use pdfbox to parse pdf file to lucene document.when i parse
> > Chinese
> > > pdf file,pdfbox is not always success.
> > >     Is anyone have some advice?
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> > >
> > >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10084-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 12:58:07 2004
Return-Path: <lucene-user-return-10084-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 51817 invoked from network); 8 Sep 2004 12:58:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 12:58:06 -0000
Received: (qmail 97435 invoked by uid 500); 8 Sep 2004 12:57:15 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 97198 invoked by uid 500); 8 Sep 2004 12:57:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 97137 invoked by uid 99); 8 Sep 2004 12:57:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [200.61.168.200] (HELO gandalf.xlnet.net.ar) (200.61.168.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 05:57:07 -0700
Received: from exchange.xlnet.net.ar (10.0.0.3) by gandalf.xlnet.net.ar (NPlex 5.1.036)
        id 412BA5200004AFFB for lucene-user@jakarta.apache.org; Wed, 8 Sep 2004 09:59:11 -0300
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: MultiFieldQueryParser seems broken...  Fix attached.
Content-class: urn:content-classes:message
Date: Wed, 8 Sep 2004 09:59:01 -0300
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Message-ID: <DDD3F807D283B543B3396F7E00A2C7E125F2F6@exchange.xlnet.net.ar>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: MultiFieldQueryParser seems broken...  Fix attached.
Thread-Index: AcSVQHfFcOYxVdNGQk6B2V3yLZB8bAAY1K9A
From: "Wermus Fernando" <fernando.wermus@xlnet.net.ar>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Bill,
	I don't receive any .java. Could you send it again?

Thanks.

-----Mensaje original-----
De: Bill Janssen [mailto:janssen@parc.com]=20
Enviado el: Martes, 07 de Septiembre de 2004 10:06 p.m.
Para: Lucene Users List
CC: Ali Rouhi
Asunto: MultiFieldQueryParser seems broken... Fix attached.

Hi!

I'm using Lucene for an application which has lots of fields/document,
in which the users can specify in their config files what fields they
wish to be included by default in a search.  I'd been happily using
MultiFieldQueryParser to do the searches, but the darn users started
demanding more Google-like searches; that is, they want the search
terms to be implicitly AND-ed instead of implicitly OR-ed.  No
problem, thinks I, I'll just set the "operator".

Only to find this has no effect on MultiFieldQueryParser.

Once I looked at the code, I find that MultiFieldQueryParser combines
the clauses at the wrong level -- it combines them at the outermost
level instead of the innermost level.  This means that if you have two
fields, "author" and "title", and the search string "cutting lucene",
you'll get the final query

   (title:cutting title:lucene) (author:cutting author:lucene)

If the search operator is "OR", this isn't a problem.  But if it is,
you have two problems.  The first is that MultiFieldQueryParser seems
to ignore the operator entirely.  But even if it didn't, the second
problem is that the query formed would be

   +(title:cutting title:lucene) +(author:cutting author:lucene)

That is, if the word "Lucene" was in both the author field and the
title field, the match would fit.  This clearly isn't what the
searcher intended.

You can re-write MultiFieldQueryParser, as I've done in the example
code which I append here.  This little program allows you to run
either my parser (-DSearchTest.QueryParser=3Dnew) or the old parser
(-DSearchTest.QueryParser=3Dold).  It allows you to use either OR
(-DSearchTest.QueryDefaultOperator=3Dor) or AND
(-DSearchTest.QueryDefaultOperator=3Dand) as the operator.  And it
allows you to pick your favorite set of default search terms
(-DSearchTest.QueryDefaultFields=3Dauthor:title:body, for example).  It
takes one argument, a query string, and outputs the re-written query
after running it through the query parser.  So to evaluate the above
query:

% java -classpath /import/lucene/lucene-1.4.1.jar:. \
       -DSearchTest.QueryDefaultFields=3D"title:author" \
       -DSearchTest.QueryDefaultOperator=3DAND \
       -DSearchTest.QueryParser=3Dold \
       SearchTest "cutting lucene"
query is (title:cutting title:lucene) (author:cutting author:lucene)
%

The class NewMultiFieldQueryParser does the combination at the inner
level, using an override of "addClause", instead of the outer level.
Note that it can't cover all cases (notably PhrasePrefixQuery, because
that class has no access methods which allow one to introspect over
it, and SpanQueries, because I don't understand them well enough :-).
I post it here in advance of filing a formal bug report for early
feedback.  But it will show up in a bug report in the near future.

Running the above query with the new parser gives:

% java -classpath /import/lucene/lucene-1.4.1.jar:. \
       -DSearchTest.QueryDefaultFields=3D"title:author" \
       -DSearchTest.QueryDefaultOperator=3DAND \
       -DSearchTest.QueryParser=3Dnew \
       SearchTest "cutting lucene"
query is +(title:cutting author:cutting) +(title:lucene author:lucene)
%

which I claim is what the user is expecting.

In addition, the new class uses an API more similar to QueryParser, so
that the user has less to learn when using it.  The code in it could
probably just be folded into QueryParser, in fact.

Bill


the code for SearchTest:

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.Term;
import org.apache.lucene.index.TermDocs;
import org.apache.lucene.document.Document;
import org.apache.lucene.search.Searcher;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.TermQuery;
import org.apache.lucene.search.PhraseQuery;
import org.apache.lucene.search.FuzzyQuery;
import org.apache.lucene.search.WildcardQuery;
import org.apache.lucene.search.PrefixQuery;
import org.apache.lucene.search.PhraseQuery;
import org.apache.lucene.search.RangeQuery;
import org.apache.lucene.search.BooleanQuery;
import org.apache.lucene.search.Hits;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.queryParser.MultiFieldQueryParser;
import org.apache.lucene.queryParser.FastCharStream;
import org.apache.lucene.queryParser.TokenMgrError;
import org.apache.lucene.queryParser.ParseException;

import java.io.File;
import java.io.StringReader;
import java.util.Date;
import java.util.HashMap;
import java.util.Iterator;
import java.util.StringTokenizer;

class SearchTest {

    static class NewMultiFieldQueryParser extends QueryParser {

        static private final String DEFAULT_FIELD =3D "%%";

        private String[] fields =3D null;

        public NewMultiFieldQueryParser (String[] f, Analyzer a) {
            super(DEFAULT_FIELD, a);
            fields =3D f;
        }

        protected void addClause(java.util.Vector clauses, int conj, int
mods, Query q) {

            /*
              System.err.println("addClause:  new query is " +
q.toString());
              if (clauses.size() > 0) {
              System.err.println("            existing clauses are:");
              for (int i =3D 0;  i < clauses.size();  i++)
              System.err.println("                " +
clauses.get(i).toString());
              }
            */

            if ((q instanceof TermQuery) &&
(((TermQuery)q).getTerm().field() =3D=3D DEFAULT_FIELD)) {
                String text =3D ((TermQuery)q).getTerm().text();
                BooleanQuery q2 =3D new BooleanQuery();
                for (int i =3D 0;  i < fields.length;  i++) {
                    q2.add(new TermQuery(new Term(fields[i], text)),
false, false);
                }
                q =3D q2;
            }

            else if ((q instanceof WildcardQuery) &&
(((WildcardQuery)q).getTerm().field() =3D=3D DEFAULT_FIELD)) {
                String text =3D ((WildcardQuery)q).getTerm().text();
                BooleanQuery q2 =3D new BooleanQuery();
                for (int i =3D 0;  i < fields.length;  i++) {
                    q2.add(new WildcardQuery(new Term(fields[i], text)),
false, false);
                }
                q =3D q2;
            }

            else if ((q instanceof FuzzyQuery) &&
(((FuzzyQuery)q).getTerm().field() =3D=3D DEFAULT_FIELD)) {
                String text =3D ((FuzzyQuery)q).getTerm().text();
                BooleanQuery q2 =3D new BooleanQuery();
                for (int i =3D 0;  i < fields.length;  i++) {
                    q2.add(new FuzzyQuery(new Term(fields[i], text)),
false, false);
                }
                q =3D q2;
            }

            else if ((q instanceof PrefixQuery) &&
(((PrefixQuery)q).getPrefix().field() =3D=3D DEFAULT_FIELD)) {
                String text =3D ((PrefixQuery)q).getPrefix().text();
                BooleanQuery q2 =3D new BooleanQuery();
                for (int i =3D 0;  i < fields.length;  i++) {
                    q2.add(new PrefixQuery(new Term(fields[i], text)),
false, false);
                }
                q =3D q2;
            }

            else if ((q instanceof RangeQuery) &&
(((RangeQuery)q).getField() =3D=3D DEFAULT_FIELD)) {
                BooleanQuery q2 =3D new BooleanQuery();
                for (int i =3D 0;  i < fields.length;  i++) {
                    RangeQuery q3 =3D new RangeQuery(new Term(fields[i],
((RangeQuery)q).getLowerTerm().text()),
                                                   new Term(fields[i],
((RangeQuery)q).getUpperTerm().text()),
=20
((RangeQuery)q).isInclusive());
                    q2.add(q3, false, false);
                }
                q =3D q2;
            }

            else if ((q instanceof PhraseQuery) &&
(((PhraseQuery)q).getTerms()[0].field() =3D=3D DEFAULT_FIELD)) {
                BooleanQuery q2 =3D new BooleanQuery();
                Term[] terms =3D ((PhraseQuery)q).getTerms();
                for (int i =3D 0;  i < fields.length;  i++) {
                    PhraseQuery q3 =3D new PhraseQuery();
                    for (int j =3D 0;  j < terms.length;  j++) {
                        q3.add(new Term(fields[i], terms[j].text()));
                    }
                    q2.add(q3, false, false);
                }
                q =3D q2;
            }

            super.addClause(clauses, conj, mods, q);
        }
    }

    private static void search (String querystring) {

        StringBuffer query_buffer =3D new StringBuffer();
        String[] query_default_fields =3D new String[] { "title",
"authors", "contents" };
        int search_operator =3D QueryParser.DEFAULT_OPERATOR_AND;
        String query_parser =3D "new";
        Query query =3D null;

        try {
            StandardAnalyzer analyzer =3D new StandardAnalyzer();

            String z =3D
System.getProperties().getProperty("SearchTest.QueryDefaultFields");
            if (z !=3D null) {
                query_default_fields =3D z.split(":");
            }

            z =3D
System.getProperties().getProperty("SearchTest.QueryDefaultOperator");
            if (z !=3D null) {
                if (z.equalsIgnoreCase("or"))
                    search_operator =3D QueryParser.DEFAULT_OPERATOR_OR;
                else if (z.equalsIgnoreCase("and"))
                    search_operator =3D =
QueryParser.DEFAULT_OPERATOR_AND;
            }

            z =3D
System.getProperties().getProperty("SearchTest.QueryParser");
            if (z !=3D null) {
                if (z.equalsIgnoreCase("new"))
                    query_parser =3D "new";
                else if (z.equalsIgnoreCase("old"))
                    query_parser =3D "old";
            }

            // form the query
            query_buffer.append(querystring);
           =20
            // run the query
            if (query_parser.equals("new")) {
                NewMultiFieldQueryParser p =3D new
NewMultiFieldQueryParser(query_default_fields, analyzer);
                p.setOperator(search_operator);
                query =3D p.parse(query_buffer.toString());
            } else {
                MultiFieldQueryParser p =3D new
MultiFieldQueryParser(query_default_fields[0], analyzer);
                p.setOperator(search_operator);
                query =3D p.parse(query_buffer.toString(),
query_default_fields, analyzer);
            }
            System.err.println("query is " + query.toString());
               =20
        } catch (ParseException e) {
            System.out.println("* Invalid search expression '" +
query_buffer.toString() + "' specified");
            System.err.println(" caught a " + e.getClass() +
                               "\n with message: " + e.getMessage());
        } catch (Exception e) {
            System.out.println("* Lucene search engine raised " +
e.getClass() + " with message " + e.getMessage());
            System.err.println(" 'search' caught a " + e.getClass() +
                               "\n with message: " + e.getMessage());
            e.printStackTrace(System.err);
        }
    }

    private static void usage () {
        // print usage message to stderr
        System.err.println("Usage:  SearchTest 'QUERY'");
    }

    public static void main(String[] args) {

        if (args.length !=3D 1) {
            usage();
            return;
        }

        search (args[0]);

    }
}

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10085-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 12:58:21 2004
Return-Path: <lucene-user-return-10085-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 51933 invoked from network); 8 Sep 2004 12:58:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 12:58:21 -0000
Received: (qmail 97645 invoked by uid 500); 8 Sep 2004 12:57:17 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 97561 invoked by uid 500); 8 Sep 2004 12:57:17 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 97495 invoked by uid 99); 8 Sep 2004 12:57:16 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.176.57.91] (HELO mail.bayt.net) (216.176.57.91)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 05:57:15 -0700
Received: from [192.168.1.24] [213.132.40.2] by mail.bayt.net with ESMTP
  (SMTPD32-8.12) id A34E2210060; Wed, 08 Sep 2004 09:04:14 -0400
Message-ID: <413F01AA.2030902@bayt.net>
Date: Wed, 08 Sep 2004 16:57:14 +0400
From: Nader Henein <nsh@bayt.net>
Reply-To:  nsh@bayt.net
Organization: Bayt.com
User-Agent: Mozilla Thunderbird 0.6 (Windows/20040502)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Moving from a single server to a cluster
References: <6237480704090713347b64daa7@mail.gmail.com>
In-Reply-To: <6237480704090713347b64daa7@mail.gmail.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hey Ben,

We've been using a distributed environment with three servers and three 
separate indecies for the past 2 years since the first stable Lucene 
release and it has been great, recently and for the past two months I've 
been working on a redesign for our Lucene App and I've shared my 
findings and plans with Otis, Doug and Erik, they pointed out a few 
faults in my logic which you will probably come across soon enough that 
mainly have to do with keeping you updates atomic (not too hard) and 
your deletes atomic (a little more tricky), give me a few days and I'll 
send you both the early document and the newer version that deals 
squarely with Lucene in a distributed environment with high volume index.

Regards.

Nader Henein

Ben Sinclair wrote:

>My application currently uses Lucene with an index living on the
>filesystem, and it works fine. I'm moving to a clustered environment
>soon and need to figure out how to keep my indexes together. Since the
>index is on the filesystem, each machine in the cluster will end up
>with a different index.
>
>I looked into JDBC Directory, but it's not tested under Oracle and
>doesn't seem like a very mature project.
>
>What are other people doing to solve this problem?
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10086-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 13:03:20 2004
Return-Path: <lucene-user-return-10086-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 54675 invoked from network); 8 Sep 2004 13:03:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 13:03:20 -0000
Received: (qmail 9051 invoked by uid 500); 8 Sep 2004 13:03:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 9025 invoked by uid 500); 8 Sep 2004 13:03:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 8999 invoked by uid 99); 8 Sep 2004 13:03:09 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 06:03:07 -0700
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 8 Sep 2004 15:04:58 +0200
Message-ID: <413F0376.3030701@ifit.uni-klu.ac.at>
Date: Wed, 08 Sep 2004 15:04:54 +0200
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: MultiFieldQueryParser seems broken...  Fix attached.
References: <DDD3F807D283B543B3396F7E00A2C7E125F2F6@exchange.xlnet.net.ar>
In-Reply-To: <DDD3F807D283B543B3396F7E00A2C7E125F2F6@exchange.xlnet.net.ar>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 08 Sep 2004 13:04:58.0278 (UTC) FILETIME=[71642460:01C495A4]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

The class is at the end of the message.
But it hink that a better solution is that one suggested by Rene: 

http://issues.apache.org/eyebrowse/ReadMsg?listName=lucene-user@jakarta.apache.org&msgId=1798116


Wermus Fernando wrote:

>Bill,
>	I don't receive any .java. Could you send it again?
>
>Thanks.
>
>-----Mensaje original-----
>De: Bill Janssen [mailto:janssen@parc.com] 
>Enviado el: Martes, 07 de Septiembre de 2004 10:06 p.m.
>Para: Lucene Users List
>CC: Ali Rouhi
>Asunto: MultiFieldQueryParser seems broken... Fix attached.
>
>Hi!
>
>I'm using Lucene for an application which has lots of fields/document,
>in which the users can specify in their config files what fields they
>wish to be included by default in a search.  I'd been happily using
>MultiFieldQueryParser to do the searches, but the darn users started
>demanding more Google-like searches; that is, they want the search
>terms to be implicitly AND-ed instead of implicitly OR-ed.  No
>problem, thinks I, I'll just set the "operator".
>
>Only to find this has no effect on MultiFieldQueryParser.
>
>Once I looked at the code, I find that MultiFieldQueryParser combines
>the clauses at the wrong level -- it combines them at the outermost
>level instead of the innermost level.  This means that if you have two
>fields, "author" and "title", and the search string "cutting lucene",
>you'll get the final query
>
>   (title:cutting title:lucene) (author:cutting author:lucene)
>
>If the search operator is "OR", this isn't a problem.  But if it is,
>you have two problems.  The first is that MultiFieldQueryParser seems
>to ignore the operator entirely.  But even if it didn't, the second
>problem is that the query formed would be
>
>   +(title:cutting title:lucene) +(author:cutting author:lucene)
>
>That is, if the word "Lucene" was in both the author field and the
>title field, the match would fit.  This clearly isn't what the
>searcher intended.
>
>You can re-write MultiFieldQueryParser, as I've done in the example
>code which I append here.  This little program allows you to run
>either my parser (-DSearchTest.QueryParser=new) or the old parser
>(-DSearchTest.QueryParser=old).  It allows you to use either OR
>(-DSearchTest.QueryDefaultOperator=or) or AND
>(-DSearchTest.QueryDefaultOperator=and) as the operator.  And it
>allows you to pick your favorite set of default search terms
>(-DSearchTest.QueryDefaultFields=author:title:body, for example).  It
>takes one argument, a query string, and outputs the re-written query
>after running it through the query parser.  So to evaluate the above
>query:
>
>% java -classpath /import/lucene/lucene-1.4.1.jar:. \
>       -DSearchTest.QueryDefaultFields="title:author" \
>       -DSearchTest.QueryDefaultOperator=AND \
>       -DSearchTest.QueryParser=old \
>       SearchTest "cutting lucene"
>query is (title:cutting title:lucene) (author:cutting author:lucene)
>%
>
>The class NewMultiFieldQueryParser does the combination at the inner
>level, using an override of "addClause", instead of the outer level.
>Note that it can't cover all cases (notably PhrasePrefixQuery, because
>that class has no access methods which allow one to introspect over
>it, and SpanQueries, because I don't understand them well enough :-).
>I post it here in advance of filing a formal bug report for early
>feedback.  But it will show up in a bug report in the near future.
>
>Running the above query with the new parser gives:
>
>% java -classpath /import/lucene/lucene-1.4.1.jar:. \
>       -DSearchTest.QueryDefaultFields="title:author" \
>       -DSearchTest.QueryDefaultOperator=AND \
>       -DSearchTest.QueryParser=new \
>       SearchTest "cutting lucene"
>query is +(title:cutting author:cutting) +(title:lucene author:lucene)
>%
>
>which I claim is what the user is expecting.
>
>In addition, the new class uses an API more similar to QueryParser, so
>that the user has less to learn when using it.  The code in it could
>probably just be folded into QueryParser, in fact.
>
>Bill
>
>
>the code for SearchTest:
>
>import org.apache.lucene.analysis.Analyzer;
>import org.apache.lucene.analysis.standard.StandardAnalyzer;
>import org.apache.lucene.index.IndexWriter;
>import org.apache.lucene.index.IndexReader;
>import org.apache.lucene.index.Term;
>import org.apache.lucene.index.TermDocs;
>import org.apache.lucene.document.Document;
>import org.apache.lucene.search.Searcher;
>import org.apache.lucene.search.IndexSearcher;
>import org.apache.lucene.search.Query;
>import org.apache.lucene.search.TermQuery;
>import org.apache.lucene.search.PhraseQuery;
>import org.apache.lucene.search.FuzzyQuery;
>import org.apache.lucene.search.WildcardQuery;
>import org.apache.lucene.search.PrefixQuery;
>import org.apache.lucene.search.PhraseQuery;
>import org.apache.lucene.search.RangeQuery;
>import org.apache.lucene.search.BooleanQuery;
>import org.apache.lucene.search.Hits;
>import org.apache.lucene.queryParser.QueryParser;
>import org.apache.lucene.queryParser.MultiFieldQueryParser;
>import org.apache.lucene.queryParser.FastCharStream;
>import org.apache.lucene.queryParser.TokenMgrError;
>import org.apache.lucene.queryParser.ParseException;
>
>import java.io.File;
>import java.io.StringReader;
>import java.util.Date;
>import java.util.HashMap;
>import java.util.Iterator;
>import java.util.StringTokenizer;
>
>class SearchTest {
>
>    static class NewMultiFieldQueryParser extends QueryParser {
>
>        static private final String DEFAULT_FIELD = "%%";
>
>        private String[] fields = null;
>
>        public NewMultiFieldQueryParser (String[] f, Analyzer a) {
>            super(DEFAULT_FIELD, a);
>            fields = f;
>        }
>
>        protected void addClause(java.util.Vector clauses, int conj, int
>mods, Query q) {
>
>            /*
>              System.err.println("addClause:  new query is " +
>q.toString());
>              if (clauses.size() > 0) {
>              System.err.println("            existing clauses are:");
>              for (int i = 0;  i < clauses.size();  i++)
>              System.err.println("                " +
>clauses.get(i).toString());
>              }
>            */
>
>            if ((q instanceof TermQuery) &&
>(((TermQuery)q).getTerm().field() == DEFAULT_FIELD)) {
>                String text = ((TermQuery)q).getTerm().text();
>                BooleanQuery q2 = new BooleanQuery();
>                for (int i = 0;  i < fields.length;  i++) {
>                    q2.add(new TermQuery(new Term(fields[i], text)),
>false, false);
>                }
>                q = q2;
>            }
>
>            else if ((q instanceof WildcardQuery) &&
>(((WildcardQuery)q).getTerm().field() == DEFAULT_FIELD)) {
>                String text = ((WildcardQuery)q).getTerm().text();
>                BooleanQuery q2 = new BooleanQuery();
>                for (int i = 0;  i < fields.length;  i++) {
>                    q2.add(new WildcardQuery(new Term(fields[i], text)),
>false, false);
>                }
>                q = q2;
>            }
>
>            else if ((q instanceof FuzzyQuery) &&
>(((FuzzyQuery)q).getTerm().field() == DEFAULT_FIELD)) {
>                String text = ((FuzzyQuery)q).getTerm().text();
>                BooleanQuery q2 = new BooleanQuery();
>                for (int i = 0;  i < fields.length;  i++) {
>                    q2.add(new FuzzyQuery(new Term(fields[i], text)),
>false, false);
>                }
>                q = q2;
>            }
>
>            else if ((q instanceof PrefixQuery) &&
>(((PrefixQuery)q).getPrefix().field() == DEFAULT_FIELD)) {
>                String text = ((PrefixQuery)q).getPrefix().text();
>                BooleanQuery q2 = new BooleanQuery();
>                for (int i = 0;  i < fields.length;  i++) {
>                    q2.add(new PrefixQuery(new Term(fields[i], text)),
>false, false);
>                }
>                q = q2;
>            }
>
>            else if ((q instanceof RangeQuery) &&
>(((RangeQuery)q).getField() == DEFAULT_FIELD)) {
>                BooleanQuery q2 = new BooleanQuery();
>                for (int i = 0;  i < fields.length;  i++) {
>                    RangeQuery q3 = new RangeQuery(new Term(fields[i],
>((RangeQuery)q).getLowerTerm().text()),
>                                                   new Term(fields[i],
>((RangeQuery)q).getUpperTerm().text()),
> 
>((RangeQuery)q).isInclusive());
>                    q2.add(q3, false, false);
>                }
>                q = q2;
>            }
>
>            else if ((q instanceof PhraseQuery) &&
>(((PhraseQuery)q).getTerms()[0].field() == DEFAULT_FIELD)) {
>                BooleanQuery q2 = new BooleanQuery();
>                Term[] terms = ((PhraseQuery)q).getTerms();
>                for (int i = 0;  i < fields.length;  i++) {
>                    PhraseQuery q3 = new PhraseQuery();
>                    for (int j = 0;  j < terms.length;  j++) {
>                        q3.add(new Term(fields[i], terms[j].text()));
>                    }
>                    q2.add(q3, false, false);
>                }
>                q = q2;
>            }
>
>            super.addClause(clauses, conj, mods, q);
>        }
>    }
>
>    private static void search (String querystring) {
>
>        StringBuffer query_buffer = new StringBuffer();
>        String[] query_default_fields = new String[] { "title",
>"authors", "contents" };
>        int search_operator = QueryParser.DEFAULT_OPERATOR_AND;
>        String query_parser = "new";
>        Query query = null;
>
>        try {
>            StandardAnalyzer analyzer = new StandardAnalyzer();
>
>            String z =
>System.getProperties().getProperty("SearchTest.QueryDefaultFields");
>            if (z != null) {
>                query_default_fields = z.split(":");
>            }
>
>            z =
>System.getProperties().getProperty("SearchTest.QueryDefaultOperator");
>            if (z != null) {
>                if (z.equalsIgnoreCase("or"))
>                    search_operator = QueryParser.DEFAULT_OPERATOR_OR;
>                else if (z.equalsIgnoreCase("and"))
>                    search_operator = QueryParser.DEFAULT_OPERATOR_AND;
>            }
>
>            z =
>System.getProperties().getProperty("SearchTest.QueryParser");
>            if (z != null) {
>                if (z.equalsIgnoreCase("new"))
>                    query_parser = "new";
>                else if (z.equalsIgnoreCase("old"))
>                    query_parser = "old";
>            }
>
>            // form the query
>            query_buffer.append(querystring);
>            
>            // run the query
>            if (query_parser.equals("new")) {
>                NewMultiFieldQueryParser p = new
>NewMultiFieldQueryParser(query_default_fields, analyzer);
>                p.setOperator(search_operator);
>                query = p.parse(query_buffer.toString());
>            } else {
>                MultiFieldQueryParser p = new
>MultiFieldQueryParser(query_default_fields[0], analyzer);
>                p.setOperator(search_operator);
>                query = p.parse(query_buffer.toString(),
>query_default_fields, analyzer);
>            }
>            System.err.println("query is " + query.toString());
>                
>        } catch (ParseException e) {
>            System.out.println("* Invalid search expression '" +
>query_buffer.toString() + "' specified");
>            System.err.println(" caught a " + e.getClass() +
>                               "\n with message: " + e.getMessage());
>        } catch (Exception e) {
>            System.out.println("* Lucene search engine raised " +
>e.getClass() + " with message " + e.getMessage());
>            System.err.println(" 'search' caught a " + e.getClass() +
>                               "\n with message: " + e.getMessage());
>            e.printStackTrace(System.err);
>        }
>    }
>
>    private static void usage () {
>        // print usage message to stderr
>        System.err.println("Usage:  SearchTest 'QUERY'");
>    }
>
>    public static void main(String[] args) {
>
>        if (args.length != 1) {
>            usage();
>            return;
>        }
>
>        search (args[0]);
>
>    }
>}
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10087-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 14:19:55 2004
Return-Path: <lucene-user-return-10087-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 12037 invoked from network); 8 Sep 2004 14:19:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 14:19:55 -0000
Received: (qmail 92262 invoked by uid 500); 8 Sep 2004 14:19:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 92235 invoked by uid 500); 8 Sep 2004 14:19:45 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 92205 invoked by uid 99); 8 Sep 2004 14:19:45 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [207.58.142.18] (HELO snowtide.com) (207.58.142.18)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 07:19:41 -0700
Received: from [127.0.0.1] (snowtide.com [127.0.0.1])
	by snowtide.com (8.12.8/8.12.8) with ESMTP id i88ELSAG025889
	for <lucene-user@jakarta.apache.org>; Wed, 8 Sep 2004 10:21:28 -0400
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <044d01c4958a$62058190$0f6ea8c0@lithos>
References: <040b01c49566$a8ffb670$0f6ea8c0@lithos> <005d01c4957b$fc3feb60$994033ca@neplaptop> <044d01c4958a$62058190$0f6ea8c0@lithos>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <1F5690C4-01A2-11D9-8B7A-000A95B336F2@snowtide.com>
Content-Transfer-Encoding: 7bit
From: Chas Emerick <cemerick@snowtide.com>
Subject: Re: pdf in Chinese
Date: Wed, 8 Sep 2004 10:19:40 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I'm not aware of any Java library that can reliably extract Chinese 
text from PDF documents.  We're planning on supporting Chinese, 
Japanese, and Korean in version 2 of PDFTextStream, but there's no 
doubt that it's a huge challenge.

Chas Emerick   |   cemerick@snowtide.com

PDFTextStream: fast PDF text extraction for Java applications
http://snowtide.com/home/PDFTextStream/

On Sep 8, 2004, at 5:58 AM, WuDG@infoPro.cn wrote:

> it is not about analyzer ,i  need to read text from pdf file first.
>
> ----- Original Message -----
> From: "Chandan Tamrakar" <chandan@ccnep.com.np>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Wednesday, September 08, 2004 4:15 PM
> Subject: Re: pdf in Chinese
>
>
>> which analyzer you are using to index chinese pdf documents ?
>> I think you should use cjkanalyzer
>> ----- Original Message -----
>> From: "WuDG@infoPro.cn" <wudg@infopro.cn>
>> To: <lucene-user@jakarta.apache.org>
>> Sent: Wednesday, September 08, 2004 11:27 AM
>> Subject: pdf in Chinese
>>
>>
>>> Hi all,
>>>     i use pdfbox to parse pdf file to lucene document.when i parse
>> Chinese
>>> pdf file,pdfbox is not always success.
>>>     Is anyone have some advice?
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10088-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 14:41:51 2004
Return-Path: <lucene-user-return-10088-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 25291 invoked from network); 8 Sep 2004 14:41:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 14:41:51 -0000
Received: (qmail 46802 invoked by uid 500); 8 Sep 2004 14:41:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 46775 invoked by uid 500); 8 Sep 2004 14:41:40 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 46760 invoked by uid 99); 8 Sep 2004 14:41:39 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of ben@csh.rit.edu designates 129.21.60.6 as permitted sender)
Received: from [129.21.60.6] (HELO blacksheep.csh.rit.edu) (129.21.60.6)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 07:41:38 -0700
Received: from fury.csh.rit.edu (fury.csh.rit.edu [IPv6:2001:470:1f00:135:a00:20ff:fe8d:5399])
	by blacksheep.csh.rit.edu (Postfix) with ESMTP id DF333908B
	for <lucene-user@jakarta.apache.org>; Wed,  8 Sep 2004 10:41:35 -0400 (EDT)
Received: by fury.csh.rit.edu (Postfix, from userid 38448)
	id 92C4114A0; Wed,  8 Sep 2004 10:41:35 -0400 (EDT)
Received: from localhost (localhost [127.0.0.1])
	by fury.csh.rit.edu (Postfix) with ESMTP id 6D123149E
	for <lucene-user@jakarta.apache.org>; Wed,  8 Sep 2004 10:41:35 -0400 (EDT)
Date: Wed, 8 Sep 2004 10:41:35 -0400 (EDT)
From: Ben Litchfield <ben@csh.rit.edu>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: PDF->Text Performance comparison
In-Reply-To: <1F5690C4-01A2-11D9-8B7A-000A95B336F2@snowtide.com>
Message-ID: <Pine.GSO.4.53.0409081030250.16799@fury.csh.rit.edu>
References: <040b01c49566$a8ffb670$0f6ea8c0@lithos> <005d01c4957b$fc3feb60$994033ca@neplaptop>
 <044d01c4958a$62058190$0f6ea8c0@lithos> <1F5690C4-01A2-11D9-8B7A-000A95B336F2@snowtide.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Wed, 8 Sep 2004, Chas Emerick wrote:
> PDFTextStream: fast PDF text extraction for Java applications
> http://snowtide.com/home/PDFTextStream/


For those that have not seen, snowtide.com has done a performance
comparison against several Java PDF->Text libraries, including Snowtide's
PDFTextStream, PDFBox, Etymon PJ and JPedal.  It appears to be fairly well
done.

http://snowtide.com/home/PDFTextStream/Performance


PDFBox: slow PDF text extraction for Java applications
http://www.pdfbox.org

:)

Ben


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10089-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 14:43:33 2004
Return-Path: <lucene-user-return-10089-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 26311 invoked from network); 8 Sep 2004 14:43:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 14:43:33 -0000
Received: (qmail 50073 invoked by uid 500); 8 Sep 2004 14:42:31 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 50024 invoked by uid 500); 8 Sep 2004 14:42:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 49994 invoked by uid 99); 8 Sep 2004 14:42:30 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [193.131.98.10] (HELO zebedee.magus.co.uk) (193.131.98.10)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 07:42:27 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Moving from a single server to a cluster
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Date: Wed, 8 Sep 2004 15:42:39 +0100
Message-ID: <D98ADD74A4E07445A943A90A184B51993792E4@zebedee.magus.co.uk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Moving from a single server to a cluster
Thread-Index: AcSVo5EL/yiBGlGmTAC9b+pZYumLGQADkcvg
From: "David Townsend" <david.townsend@magus.co.uk>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	<nsh@bayt.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Would it be cheeky to ask you to post the docs to the group?  It would =
be interesting to read how you've tackled this.

-----Original Message-----
From: Nader Henein [mailto:nsh@bayt.net]
Sent: 08 September 2004 13:57
To: Lucene Users List
Subject: Re: Moving from a single server to a cluster


Hey Ben,

We've been using a distributed environment with three servers and three=20
separate indecies for the past 2 years since the first stable Lucene=20
release and it has been great, recently and for the past two months I've =

been working on a redesign for our Lucene App and I've shared my=20
findings and plans with Otis, Doug and Erik, they pointed out a few=20
faults in my logic which you will probably come across soon enough that=20
mainly have to do with keeping you updates atomic (not too hard) and=20
your deletes atomic (a little more tricky), give me a few days and I'll=20
send you both the early document and the newer version that deals=20
squarely with Lucene in a distributed environment with high volume =
index.

Regards.

Nader Henein

Ben Sinclair wrote:

>My application currently uses Lucene with an index living on the
>filesystem, and it works fine. I'm moving to a clustered environment
>soon and need to figure out how to keep my indexes together. Since the
>index is on the filesystem, each machine in the cluster will end up
>with a different index.
>
>I looked into JDBC Directory, but it's not tested under Oracle and
>doesn't seem like a very mature project.
>
>What are other people doing to solve this problem?
>
> =20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10090-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 14:54:48 2004
Return-Path: <lucene-user-return-10090-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 32534 invoked from network); 8 Sep 2004 14:54:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 14:54:47 -0000
Received: (qmail 72326 invoked by uid 500); 8 Sep 2004 14:54:35 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 72280 invoked by uid 500); 8 Sep 2004 14:54:35 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 72265 invoked by uid 99); 8 Sep 2004 14:54:35 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [207.58.142.18] (HELO snowtide.com) (207.58.142.18)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 07:54:34 -0700
Received: from [127.0.0.1] (snowtide.com [127.0.0.1])
	by snowtide.com (8.12.8/8.12.8) with ESMTP id i88EuKAG025980;
	Wed, 8 Sep 2004 10:56:21 -0400
In-Reply-To: <Pine.GSO.4.53.0409081030250.16799@fury.csh.rit.edu>
References: <040b01c49566$a8ffb670$0f6ea8c0@lithos> <005d01c4957b$fc3feb60$994033ca@neplaptop> <044d01c4958a$62058190$0f6ea8c0@lithos> <1F5690C4-01A2-11D9-8B7A-000A95B336F2@snowtide.com> <Pine.GSO.4.53.0409081030250.16799@fury.csh.rit.edu>
Mime-Version: 1.0 (Apple Message framework v619)
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <FEAB9729-01A6-11D9-8B7A-000A95B336F2@snowtide.com>
Content-Transfer-Encoding: 7bit
Cc: Ben Litchfield <ben@csh.rit.edu>
From: Chas Emerick <cemerick@snowtide.com>
Subject: Re: PDF->Text Performance comparison
Date: Wed, 8 Sep 2004 10:54:33 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Ben,

Wow, thanks for the plug! :-)

Truthfully, I was worried that our open-source brethren might feel 
slighted by the comparison -- that's partially why we wanted to make 
sure it was as thorough and transparent as possible so that anyone 
could review the results for themselves.  I'm glad that you're not at 
all sore.

Chas Emerick   |   cemerick@snowtide.com

PDFTextStream: fast PDF text extraction for Java applications
http://snowtide.com/home/PDFTextStream/

On Sep 8, 2004, at 10:41 AM, Ben Litchfield wrote:

>
> On Wed, 8 Sep 2004, Chas Emerick wrote:
>> PDFTextStream: fast PDF text extraction for Java applications
>> http://snowtide.com/home/PDFTextStream/
>
>
> For those that have not seen, snowtide.com has done a performance
> comparison against several Java PDF->Text libraries, including 
> Snowtide's
> PDFTextStream, PDFBox, Etymon PJ and JPedal.  It appears to be fairly 
> well
> done.
>
> http://snowtide.com/home/PDFTextStream/Performance
>
>
> PDFBox: slow PDF text extraction for Java applications
> http://www.pdfbox.org
>
> :)
>
> Ben


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10091-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 15:04:15 2004
Return-Path: <lucene-user-return-10091-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 38005 invoked from network); 8 Sep 2004 15:04:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 15:04:14 -0000
Received: (qmail 95807 invoked by uid 500); 8 Sep 2004 15:04:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 95702 invoked by uid 500); 8 Sep 2004 15:04:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 95679 invoked by uid 99); 8 Sep 2004 15:04:02 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.176.57.91] (HELO mail.bayt.net) (216.176.57.91)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 08:04:02 -0700
Received: from [192.168.1.24] [213.132.40.2] by mail.bayt.net with ESMTP
  (SMTPD32-8.12) id A10616260080; Wed, 08 Sep 2004 11:11:02 -0400
Message-ID: <413F1F5D.3050400@bayt.net>
Date: Wed, 08 Sep 2004 19:03:57 +0400
From: Nader Henein <nsh@bayt.net>
Reply-To:  nsh@bayt.net
Organization: Bayt.com
User-Agent: Mozilla Thunderbird 0.6 (Windows/20040502)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Moving from a single server to a cluster
References: <D98ADD74A4E07445A943A90A184B51993792E4@zebedee.magus.co.uk>
In-Reply-To: <D98ADD74A4E07445A943A90A184B51993792E4@zebedee.magus.co.uk>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

be a pleasure, just didn't want to mislead someone down the wrong way.

Give me a few days and I'll have the new version up.

Nader

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10092-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 15:06:41 2004
Return-Path: <lucene-user-return-10092-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 39136 invoked from network); 8 Sep 2004 15:06:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 15:06:41 -0000
Received: (qmail 107 invoked by uid 500); 8 Sep 2004 15:06:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 99970 invoked by uid 500); 8 Sep 2004 15:06:20 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 99957 invoked by uid 99); 8 Sep 2004 15:06:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.65.202.3] (HELO contextmedia.com) (64.65.202.3)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 08:06:17 -0700
Received: from ppeddi ([192.168.1.48]) by contextmedia.com ; Wed, 08 Sep 2004 11:05:44 -0400
Message-ID: <00c001c495b5$5288c210$aa87a8c0@ppeddi>
From: "Praveen Peddi" <ppeddi@contextmedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	<nsh@bayt.net>
References: <D98ADD74A4E07445A943A90A184B51993792E4@zebedee.magus.co.uk>
Subject: Re: Moving from a single server to a cluster
Date: Wed, 8 Sep 2004 11:05:47 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

We went thru the same scenario as yours. We recently made our application
clsuterable and I wrote our own version of jdbc directory (similar to the
SQLDirectory posted by someone) with our own caching. It was great for
searching for indexing had become a real bottleneck. So we have decided to
move back to file system for non-clustered apps. I am still trying to figure
the best way (whether using a RemoteSearcher or manage multiple index). I
already tried multiple index and we didn't really like the solution of
maintaining multiple copies. It requires more space, more maintaineance, all
index needs to be in sync etc.

I will be glad if I can get the best answer for this. Did anyone try
RemoteSearchable and how is it compared to multiple index solution?

 Nader: I would appreciate if you can send me the docs.

Praveen

----- Original Message ----- 
From: "David Townsend" <david.townsend@magus.co.uk>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>; <nsh@bayt.net>
Sent: Wednesday, September 08, 2004 10:42 AM
Subject: RE: Moving from a single server to a cluster


Would it be cheeky to ask you to post the docs to the group?  It would be
interesting to read how you've tackled this.

-----Original Message-----
From: Nader Henein [mailto:nsh@bayt.net]
Sent: 08 September 2004 13:57
To: Lucene Users List
Subject: Re: Moving from a single server to a cluster


Hey Ben,

We've been using a distributed environment with three servers and three
separate indecies for the past 2 years since the first stable Lucene
release and it has been great, recently and for the past two months I've
been working on a redesign for our Lucene App and I've shared my
findings and plans with Otis, Doug and Erik, they pointed out a few
faults in my logic which you will probably come across soon enough that
mainly have to do with keeping you updates atomic (not too hard) and
your deletes atomic (a little more tricky), give me a few days and I'll
send you both the early document and the newer version that deals
squarely with Lucene in a distributed environment with high volume index.

Regards.

Nader Henein

Ben Sinclair wrote:

>My application currently uses Lucene with an index living on the
>filesystem, and it works fine. I'm moving to a clustered environment
>soon and need to figure out how to keep my indexes together. Since the
>index is on the filesystem, each machine in the cluster will end up
>with a different index.
>
>I looked into JDBC Directory, but it's not tested under Oracle and
>doesn't seem like a very mature project.
>
>What are other people doing to solve this problem?
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10093-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 15:33:25 2004
Return-Path: <lucene-user-return-10093-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 54774 invoked from network); 8 Sep 2004 15:33:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 15:33:25 -0000
Received: (qmail 53501 invoked by uid 500); 8 Sep 2004 15:33:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 53304 invoked by uid 500); 8 Sep 2004 15:33:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 53290 invoked by uid 99); 8 Sep 2004 15:33:18 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [63.100.163.104] (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 08:33:14 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Subject: RE: -- TomCat/Lucene, filesystem
Date: Wed, 8 Sep 2004 11:33:14 -0400
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA013A45@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: -- TomCat/Lucene, filesystem
Thread-Index: AcSPeHtRf/cT8zJfRxG/UeTkTxczXQGPx92A
From: "Will Allen" <wallen@Cyveillance.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I think you might be refering to the xml files you keep in C:\Program =
Files\Apache\Tomcat\conf\Catalina\localhost

I have a file with the contents (myapp.xml):

<?xml version=3D'1.0' encoding=3D'utf-8'?>
<Context docBase=3D"C:/work/aggregation/myapp/web" path=3D"/myapp" =
reloadable=3D"true">
</Context>



-----Original Message-----
From: Rupinder Singh Mazara [mailto:rsmazara@ebi.ac.uk]
Sent: Tuesday, August 31, 2004 12:36 PM
To: Lucene Users List; jph.degletagne@cosi-consulting.com
Subject: RE: -- TomCat/Lucene, filesystem


i have a web application using  lucene via tomcat,
you may need to set=20
the correct permissions in ur catalina.policy file=20

i use a blanket policy of
grant  {
   permission java.io.FilePermission       "/","read";
};

to manage allow access to lucene=20


>-----Original Message-----
>From: J.Ph DEGLETAGNE [mailto:jph.degletagne@cosi-consulting.com]
>Sent: 31 August 2004 17:12
>To: tomcat-user@jakarta.apache.org; lucene-user@jakarta.apache.org
>Subject: -- TomCat/Lucene, filesystem
>
>
>Hello Somebody,=20
>=20
>..I beg your pardon...=20
>=20
>Under Windows XP / TomCat,=20
>=20
>How to "customize"  Webapp Lucene to access directory filesystem which =
are
>outside TomCat ?
>like this :
>D:\Program Files\Apache Software Foundation\Tomcat 5.0\..
>to access
>E:\Data
>=20
>Thank's a lot
>=20
>JPhD
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10094-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 16:12:52 2004
Return-Path: <lucene-user-return-10094-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 82393 invoked from network); 8 Sep 2004 16:12:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 16:12:51 -0000
Received: (qmail 44772 invoked by uid 500); 8 Sep 2004 16:10:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 44480 invoked by uid 500); 8 Sep 2004 16:10:40 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 44393 invoked by uid 99); 8 Sep 2004 16:10:39 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=HTML_90_100,HTML_MESSAGE,HTML_TEXT_AFTER_BODY,HTML_TEXT_AFTER_HTML
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [200.61.168.200] (HELO gandalf.xlnet.net.ar) (200.61.168.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 09:10:37 -0700
Received: from exchange.xlnet.net.ar (10.0.0.3) by gandalf.xlnet.net.ar (NPlex 5.1.036)
        id 412BA5200004CCFD for lucene-user@jakarta.apache.org; Wed, 8 Sep 2004 13:12:39 -0300
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C495BE.A3D7B4DE"
Subject: where is the SnowBallAnalyzer?
Content-class: urn:content-classes:message
Date: Wed, 8 Sep 2004 13:12:29 -0300
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Message-ID: <DDD3F807D283B543B3396F7E00A2C7E125F2FB@exchange.xlnet.net.ar>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: where is the SnowBallAnalyzer?
Thread-Index: AcSVvu9argbl9GcjRv2R6gg8TX0Srg==
From: "Wermus Fernando" <fernando.wermus@xlnet.net.ar>
To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C495BE.A3D7B4DE
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I have to look better, but why the SnowBallAnalizer isn't in=20
org.apache.lucene.analysis.snowball.SnowballAnalyzer package?
=20
I have lucene 1.4.
=20
I'm doing my own spanish stemmer.
=20
=20
=20

------_=_NextPart_001_01C495BE.A3D7B4DE--

From lucene-user-return-10095-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 16:23:18 2004
Return-Path: <lucene-user-return-10095-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 89660 invoked from network); 8 Sep 2004 16:23:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 16:23:18 -0000
Received: (qmail 74804 invoked by uid 500); 8 Sep 2004 16:23:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 74780 invoked by uid 500); 8 Sep 2004 16:23:10 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 74765 invoked by uid 99); 8 Sep 2004 16:23:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 09:23:09 -0700
Received: (qmail 88469 invoked by uid 89); 8 Sep 2004 16:23:06 -0000
Received: from unknown (HELO ?192.168.168.81?) (postmaster@cottrell-cutting.net@24.5.163.156)
  by londo.swishmail.com with AES256-SHA encrypted SMTP; 8 Sep 2004 16:23:06 -0000
Message-ID: <413F3186.6090604@apache.org>
Date: Wed, 08 Sep 2004 09:21:26 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.2) Gecko/20040806
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: PDF->Text Performance comparison
References: <040b01c49566$a8ffb670$0f6ea8c0@lithos> <005d01c4957b$fc3feb60$994033ca@neplaptop> <044d01c4958a$62058190$0f6ea8c0@lithos> <1F5690C4-01A2-11D9-8B7A-000A95B336F2@snowtide.com> <Pine.GSO.4.53.0409081030250.16799@fury.csh.rit.edu>
In-Reply-To: <Pine.GSO.4.53.0409081030250.16799@fury.csh.rit.edu>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Ben Litchfield wrote:
> PDFBox: slow PDF text extraction for Java applications
> http://www.pdfbox.org

Shouldn't that read, "PDFBox: *free* slow PDF text extraction for Java 
applications, with Lucene integration"?

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10096-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 16:45:51 2004
Return-Path: <lucene-user-return-10096-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 7566 invoked from network); 8 Sep 2004 16:45:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 16:45:50 -0000
Received: (qmail 26602 invoked by uid 500); 8 Sep 2004 16:45:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 26544 invoked by uid 500); 8 Sep 2004 16:45:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 26531 invoked by uid 99); 8 Sep 2004 16:45:43 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of ben@csh.rit.edu designates 129.21.60.6 as permitted sender)
Received: from [129.21.60.6] (HELO blacksheep.csh.rit.edu) (129.21.60.6)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 09:45:40 -0700
Received: from fury.csh.rit.edu (fury.csh.rit.edu [IPv6:2001:470:1f00:135:a00:20ff:fe8d:5399])
	by blacksheep.csh.rit.edu (Postfix) with ESMTP id 7DEB09281
	for <lucene-user@jakarta.apache.org>; Wed,  8 Sep 2004 12:45:37 -0400 (EDT)
Received: by fury.csh.rit.edu (Postfix, from userid 38448)
	id 3684914A0; Wed,  8 Sep 2004 12:45:37 -0400 (EDT)
Received: from localhost (localhost [127.0.0.1])
	by fury.csh.rit.edu (Postfix) with ESMTP id 10D13130B
	for <lucene-user@jakarta.apache.org>; Wed,  8 Sep 2004 12:45:36 -0400 (EDT)
Date: Wed, 8 Sep 2004 12:45:36 -0400 (EDT)
From: Ben Litchfield <ben@csh.rit.edu>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: PDF->Text Performance comparison
In-Reply-To: <413F3186.6090604@apache.org>
Message-ID: <Pine.GSO.4.53.0409081237330.23907@fury.csh.rit.edu>
References: <040b01c49566$a8ffb670$0f6ea8c0@lithos> <005d01c4957b$fc3feb60$994033ca@neplaptop>
 <044d01c4958a$62058190$0f6ea8c0@lithos> <1F5690C4-01A2-11D9-8B7A-000A95B336F2@snowtide.com>
 <Pine.GSO.4.53.0409081030250.16799@fury.csh.rit.edu> <413F3186.6090604@apache.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Yes, that and a few other adjectives, but I didn't want to get carried
away.

Ben


On Wed, 8 Sep 2004, Doug Cutting wrote:

> Ben Litchfield wrote:
> > PDFBox: slow PDF text extraction for Java applications
> > http://www.pdfbox.org
>
> Shouldn't that read, "PDFBox: *free* slow PDF text extraction for Java
> applications, with Lucene integration"?
>
> Doug
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10097-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 16:47:51 2004
Return-Path: <lucene-user-return-10097-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 9348 invoked from network); 8 Sep 2004 16:47:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 16:47:51 -0000
Received: (qmail 30367 invoked by uid 500); 8 Sep 2004 16:47:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 30310 invoked by uid 500); 8 Sep 2004 16:47:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 30296 invoked by uid 99); 8 Sep 2004 16:47:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.10.155.68] (HELO nexo.dattaweb.com) (69.10.155.68)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 09:47:40 -0700
Received: from ol29-184.fibertel.com.ar ([24.232.184.29] helo=ernesto)
	by nexo.dattaweb.com with smtp (Exim 4.34)
	id 1C55aB-0005Mf-Ue
	for lucene-user@jakarta.apache.org; Wed, 08 Sep 2004 13:46:08 -0300
Message-ID: <00ee01c495c3$c62c4d50$1db8e818@ernesto>
From: "Ernesto De Santis" <ernesto.desantis@colaborativa.net>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <DDD3F807D283B543B3396F7E00A2C7E125F2FB@exchange.xlnet.net.ar>
Subject: Re: where is the SnowBallAnalyzer?
Date: Wed, 8 Sep 2004 13:49:12 -0300
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - nexo.dattaweb.com
X-AntiAbuse: Original Domain - jakarta.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - colaborativa.net
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Is in snowball-1.0.jar

I sent you it in private email.

Bye
Ernesto.

----- Original Message ----- 
From: "Wermus Fernando" <fernando.wermus@xlnet.net.ar>
To: <lucene-user@jakarta.apache.org>
Sent: Wednesday, September 08, 2004 1:12 PM
Subject: where is the SnowBallAnalyzer?


I have to look better, but why the SnowBallAnalizer isn't in 
org.apache.lucene.analysis.snowball.SnowballAnalyzer package?
 
I have lucene 1.4.
 
I'm doing my own spanish stemmer.
 
 
 



---
Outgoing mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.754 / Virus Database: 504 - Release Date: 06/09/2004

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10098-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 18:17:44 2004
Return-Path: <lucene-user-return-10098-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 60984 invoked from network); 8 Sep 2004 18:17:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 18:17:44 -0000
Received: (qmail 30859 invoked by uid 500); 8 Sep 2004 18:17:31 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 30719 invoked by uid 500); 8 Sep 2004 18:17:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 30700 invoked by uid 99); 8 Sep 2004 18:17:29 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 11:17:29 -0700
Received: (qmail 24559 invoked by uid 532); 8 Sep 2004 18:15:05 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.029566 secs); 08 Sep 2004 18:15:05 -0000
Received: from unknown (HELO ?10.0.0.157?) (127.0.0.1)
  by 0 with SMTP; 8 Sep 2004 18:15:05 -0000
Message-ID: <413F4CB6.8020307@tropo.com>
Date: Wed, 08 Sep 2004 11:17:26 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.1) Gecko/20040707
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: IndexSearcher.close() and aborting searches in progress
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/search/IndexSearcher.html#close()

What is the intent of IndexSearcher.close()?

I want to know how, in a web app, one can stop a search that's in 
progress - use case is a user is limited to one search at at time, and 
when one (expensive) search is running they decide it's taking too long 
so they elaborate on the query and resubmit it. Goal is for the server 
to stop the search that's in progress and to start a new one. I know how 
to deal w/ session vars and so on in a web container - but can one stop 
a search that's in progress and is that the intent of close()?

I haven't done the obvious experiment but regardless, the javadoc is 
kinda terse so I wanted to hear from the all knowing people on the list.

thx,
   Dave


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10099-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 18:29:35 2004
Return-Path: <lucene-user-return-10099-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 67496 invoked from network); 8 Sep 2004 18:29:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 18:29:35 -0000
Received: (qmail 55688 invoked by uid 500); 8 Sep 2004 18:29:01 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 55579 invoked by uid 500); 8 Sep 2004 18:29:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 55481 invoked by uid 99); 8 Sep 2004 18:28:59 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [128.118.141.58] (HELO f05n15.cac.psu.edu) (128.118.141.58)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 11:28:59 -0700
Received: from istmobile33 (69-162-56-142.stcgpa.adelphia.net [69.162.56.142])
	by f05n15.cac.psu.edu (8.12.11/8.12.11) with SMTP id i88ISoH9059578
	for <lucene-user@jakarta.apache.org>; Wed, 8 Sep 2004 14:28:53 -0400
Message-ID: <018001c495d1$a78dfb60$8e38a245@ist.psu.edu>
From: "Anne Y. Zhang" <yzz100@psu.edu>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <413F4CB6.8020307@tropo.com>
Subject: Full web search engine package using Lucene
Date: Wed, 8 Sep 2004 14:28:25 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2741.2600
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2742.200
X-Virus-Scanned: by amavisd-new
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi, I am assistanting a professor for a IR course. 
We need to provide the student with a full-fuctioned
search engine package, and the professor prefers it
being powered by lucene. Since I am new to lucene,
can anyone provide me some information that where
can I get the package? We also want the package 
contains the crawling function. Thank you very much!

Ya



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10100-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 18:43:29 2004
Return-Path: <lucene-user-return-10100-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 77693 invoked from network); 8 Sep 2004 18:43:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 18:43:29 -0000
Received: (qmail 86061 invoked by uid 500); 8 Sep 2004 18:43:21 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 86028 invoked by uid 500); 8 Sep 2004 18:43:21 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 86015 invoked by uid 99); 8 Sep 2004 18:43:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 11:43:20 -0700
Received: (qmail 25495 invoked by uid 532); 8 Sep 2004 18:40:56 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.035413 secs); 08 Sep 2004 18:40:56 -0000
Received: from unknown (HELO ?10.0.0.157?) (127.0.0.1)
  by 0 with SMTP; 8 Sep 2004 18:40:56 -0000
Message-ID: <413F52C4.8010709@tropo.com>
Date: Wed, 08 Sep 2004 11:43:16 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.1) Gecko/20040707
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Full web search engine package using Lucene
References: <413F4CB6.8020307@tropo.com> <018001c495d1$a78dfb60$8e38a245@ist.psu.edu>
In-Reply-To: <018001c495d1$a78dfb60$8e38a245@ist.psu.edu>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Anne Y. Zhang wrote:

> Hi, I am assistanting a professor for a IR course. 
> We need to provide the student with a full-fuctioned
> search engine package, and the professor prefers it
> being powered by lucene. Since I am new to lucene,
> can anyone provide me some information that where
> can I get the package? We also want the package 
> contains the crawling function. Thank you very much!

http://www.nutch.org/

> 
> Ya
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10101-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 19:01:52 2004
Return-Path: <lucene-user-return-10101-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 88578 invoked from network); 8 Sep 2004 19:01:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 19:01:52 -0000
Received: (qmail 22612 invoked by uid 500); 8 Sep 2004 19:01:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 22516 invoked by uid 500); 8 Sep 2004 19:01:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 22502 invoked by uid 99); 8 Sep 2004 19:01:43 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [129.176.212.21] (HELO mhro1.mayo.edu) (129.176.212.21)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 12:01:42 -0700
Received: from excsrv01.mayo.edu (excsrv01.mayo.edu [129.176.235.101]) by mhro1.mayo.edu with ESMTP for lucene-user@jakarta.apache.org; Wed, 8 Sep 2004 14:01:07 -0500
Received: by excsrv01.mayo.edu with Internet Mail Service (5.5.2653.19)
	id <RPSRYXAH>; Wed, 8 Sep 2004 14:01:06 -0500
Message-Id: <7A1D7964C7C943419AB6D2C32338385304C86B26@excsrv44.mayo.edu>
From: "Armbrust, Daniel C." <Armbrust.Daniel@mayo.edu>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Compound File Format question
Date: Wed, 8 Sep 2004 14:00:59 -0500 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: text/plain
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Is it safe to change the compound file format option at any time during the life of an index?

Can I build an index with it off, then turn it on, and call optimize, and have a compound file formatted index?

And then later, turn it on, call optimize again, and go back the other way?

The JavaDocs don't say much of anything about it (oh - and PS - there is a copy and paste error in the description for the getUseCompoundFile() method)

Thanks, 

Dan


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10102-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 19:04:36 2004
Return-Path: <lucene-user-return-10102-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 90018 invoked from network); 8 Sep 2004 19:04:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 19:04:36 -0000
Received: (qmail 30374 invoked by uid 500); 8 Sep 2004 19:04:28 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 30312 invoked by uid 500); 8 Sep 2004 19:04:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 30299 invoked by uid 99); 8 Sep 2004 19:04:28 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [128.118.141.58] (HELO f05n15.cac.psu.edu) (128.118.141.58)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 12:04:26 -0700
Received: from istmobile33 (69-162-56-142.stcgpa.adelphia.net [69.162.56.142])
	by f05n15.cac.psu.edu (8.12.11/8.12.11) with SMTP id i88J4NTP056546
	for <lucene-user@jakarta.apache.org>; Wed, 8 Sep 2004 15:04:23 -0400
Message-ID: <019801c495d6$9cddd460$8e38a245@ist.psu.edu>
From: "Anne Y. Zhang" <yzz100@psu.edu>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <413F4CB6.8020307@tropo.com> <018001c495d1$a78dfb60$8e38a245@ist.psu.edu> <413F52C4.8010709@tropo.com>
Subject: Re: Full web search engine package using Lucene
Date: Wed, 8 Sep 2004 15:04:04 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2741.2600
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2742.200
X-Virus-Scanned: by amavisd-new
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks, David. But it seems that this is downloadable. 
Could you please provide me the link for download?
Thank you very much!

Ya
----- Original Message ----- 
From: "David Spencer" <dave-lucene-user@tropo.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Wednesday, September 08, 2004 2:43 PM
Subject: Re: Full web search engine package using Lucene


> Anne Y. Zhang wrote:
> 
> > Hi, I am assistanting a professor for a IR course. 
> > We need to provide the student with a full-fuctioned
> > search engine package, and the professor prefers it
> > being powered by lucene. Since I am new to lucene,
> > can anyone provide me some information that where
> > can I get the package? We also want the package 
> > contains the crawling function. Thank you very much!
> 
> http://www.nutch.org/
> 
> > 
> > Ya
> > 
> > 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> > 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10103-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 19:37:27 2004
Return-Path: <lucene-user-return-10103-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 17650 invoked from network); 8 Sep 2004 19:37:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 19:37:27 -0000
Received: (qmail 91080 invoked by uid 500); 8 Sep 2004 19:37:15 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 90989 invoked by uid 500); 8 Sep 2004 19:37:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 90907 invoked by uid 99); 8 Sep 2004 19:37:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 12:37:12 -0700
Received: from [192.168.0.254] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id i88JbDG05124
	for <lucene-user@jakarta.apache.org>; Wed, 8 Sep 2004 14:37:13 -0500
Message-ID: <413F5F6A.2010709@getopt.org>
Date: Wed, 08 Sep 2004 21:37:14 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040803
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Compound File Format question
References: <7A1D7964C7C943419AB6D2C32338385304C86B26@excsrv44.mayo.edu>
In-Reply-To: <7A1D7964C7C943419AB6D2C32338385304C86B26@excsrv44.mayo.edu>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Armbrust, Daniel C. wrote:

> Is it safe to change the compound file format option at any time during the life of an index?
> 
> Can I build an index with it off, then turn it on, and call optimize, and have a compound file formatted index?
> 
> And then later, turn it on, call optimize again, and go back the other way?

In my experience it's safe. I've been doing this in a couple of real 
applications, and also in Luke there is an option to re-pack the index 
using compound or not.

-- 
Best regards,
Andrzej Bialecki

-------------------------------------------------
Software Architect, System Integration Specialist
CEN/ISSS EC Workshop, ECIMF project chair
EU FP6 E-Commerce Expert/Evaluator
-------------------------------------------------
FreeBSD developer (http://www.freebsd.org)


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10104-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 19:39:03 2004
Return-Path: <lucene-user-return-10104-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 18820 invoked from network); 8 Sep 2004 19:39:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 19:39:03 -0000
Received: (qmail 94285 invoked by uid 500); 8 Sep 2004 19:38:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 94237 invoked by uid 500); 8 Sep 2004 19:38:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 94224 invoked by uid 99); 8 Sep 2004 19:38:55 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=FORGED_RCVD_HELO,HTML_50_60,HTML_MESSAGE,HTML_TITLE_EMPTY
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [217.160.91.29] (HELO p15112568.pureserver.info) (217.160.91.29)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 12:38:54 -0700
Received: from intrafind.de (ppp-82-135-10-114.mnet-online.de [82.135.10.114])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))
	(No client certificate requested)
	by p15112568.pureserver.info (Postfix) with ESMTP id 6BD57140102
	for <lucene-user@jakarta.apache.org>; Wed,  8 Sep 2004 21:38:50 +0200 (CEST)
Message-ID: <413F5FC2.9050503@intrafind.de>
Date: Wed, 08 Sep 2004 21:38:42 +0200
From: Bernhard Messer <Bernhard.Messer@intrafind.de>
User-Agent: Mozilla Thunderbird 0.5 (X11/20040208)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Full web search engine package using Lucene
References: <413F4CB6.8020307@tropo.com> <018001c495d1$a78dfb60$8e38a245@ist.psu.edu> <413F52C4.8010709@tropo.com> <019801c495d6$9cddd460$8e38a245@ist.psu.edu>
In-Reply-To: <019801c495d6$9cddd460$8e38a245@ist.psu.edu>
Content-Type: multipart/alternative;
 boundary="------------030307070502020407000700"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--------------030307070502020407000700
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Anne Y. Zhang wrote:

>Thanks, David. But it seems that this is downloadable. 
>Could you please provide me the link for download?
>Thank you very much!
>  
>
http://www.nutch.org/release/

>Ya
>----- Original Message ----- 
>From: "David Spencer" <dave-lucene-user@tropo.com>
>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>Sent: Wednesday, September 08, 2004 2:43 PM
>Subject: Re: Full web search engine package using Lucene
>
>
>  
>
>>Anne Y. Zhang wrote:
>>
>>    
>>
>>>Hi, I am assistanting a professor for a IR course. 
>>>We need to provide the student with a full-fuctioned
>>>search engine package, and the professor prefers it
>>>being powered by lucene. Since I am new to lucene,
>>>can anyone provide me some information that where
>>>can I get the package? We also want the package 
>>>contains the crawling function. Thank you very much!
>>>      
>>>
>>http://www.nutch.org/
>>
>>    
>>
>>>Ya
>>>
>>>
>>>
>>>---------------------------------------------------------------------
>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>>      
>>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>>    
>>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>  
>


--------------030307070502020407000700--

From lucene-user-return-10105-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 19:44:55 2004
Return-Path: <lucene-user-return-10105-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21933 invoked from network); 8 Sep 2004 19:44:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 19:44:55 -0000
Received: (qmail 2554 invoked by uid 500); 8 Sep 2004 19:44:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 2449 invoked by uid 500); 8 Sep 2004 19:44:10 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 2412 invoked by uid 99); 8 Sep 2004 19:44:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [129.176.212.21] (HELO mhro1.mayo.edu) (129.176.212.21)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 12:44:06 -0700
Received: from excsrv01.mayo.edu (excsrv01.mayo.edu [129.176.235.101]) by mhro1.mayo.edu with ESMTP for lucene-user@jakarta.apache.org; Wed, 8 Sep 2004 14:43:26 -0500
Received: by excsrv01.mayo.edu with Internet Mail Service (5.5.2653.19)
	id <RPSRZHF2>; Wed, 8 Sep 2004 14:43:25 -0500
Message-Id: <7A1D7964C7C943419AB6D2C32338385304C86B3A@excsrv44.mayo.edu>
From: "Armbrust, Daniel C." <Armbrust.Daniel@mayo.edu>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: RE: Compound File Format question
Date: Wed, 8 Sep 2004 14:43:18 -0500 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: text/plain
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hmm, I tried that in Luke - but it doesn't seem to take.  When I uncheck the use compound file check box, and then select optimize, it doesn't change anything.

I guess I should just write some code already :)

Dan
 

-----Original Message-----
From: Andrzej Bialecki [mailto:ab@getopt.org] 
Sent: Wednesday, September 08, 2004 2:37 PM
To: Lucene Users List
Subject: Re: Compound File Format question

Armbrust, Daniel C. wrote:

> Is it safe to change the compound file format option at any time during the life of an index?
> 
> Can I build an index with it off, then turn it on, and call optimize, and have a compound file formatted index?
> 
> And then later, turn it on, call optimize again, and go back the other way?

In my experience it's safe. I've been doing this in a couple of real 
applications, and also in Luke there is an option to re-pack the index 
using compound or not.

-- 
Best regards,
Andrzej Bialecki

-------------------------------------------------
Software Architect, System Integration Specialist
CEN/ISSS EC Workshop, ECIMF project chair
EU FP6 E-Commerce Expert/Evaluator
-------------------------------------------------
FreeBSD developer (http://www.freebsd.org)

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10106-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 19:51:21 2004
Return-Path: <lucene-user-return-10106-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 25557 invoked from network); 8 Sep 2004 19:51:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 19:51:21 -0000
Received: (qmail 27299 invoked by uid 500); 8 Sep 2004 19:51:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 27259 invoked by uid 500); 8 Sep 2004 19:51:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 27245 invoked by uid 99); 8 Sep 2004 19:51:12 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [128.118.141.58] (HELO f05n15.cac.psu.edu) (128.118.141.58)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 12:51:11 -0700
Received: from istmobile33 (69-162-56-142.stcgpa.adelphia.net [69.162.56.142])
	by f05n15.cac.psu.edu (8.12.11/8.12.11) with SMTP id i88Jp8RL012824
	for <lucene-user@jakarta.apache.org>; Wed, 8 Sep 2004 15:51:08 -0400
Message-ID: <01ba01c495dd$25091600$8e38a245@ist.psu.edu>
From: "Anne Y. Zhang" <yzz100@psu.edu>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <413F4CB6.8020307@tropo.com> <018001c495d1$a78dfb60$8e38a245@ist.psu.edu> <413F52C4.8010709@tropo.com> <019801c495d6$9cddd460$8e38a245@ist.psu.edu> <413F5FC2.9050503@intrafind.de>
Subject: Re: Full web search engine package using Lucene
Date: Wed, 8 Sep 2004 15:50:50 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2741.2600
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2742.200
X-Virus-Scanned: by amavisd-new
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks a lot!

Ya
----- Original Message ----- 
From: "Bernhard Messer" <Bernhard.Messer@intrafind.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Wednesday, September 08, 2004 3:38 PM
Subject: Re: Full web search engine package using Lucene


> Anne Y. Zhang wrote:
> 
> >Thanks, David. But it seems that this is downloadable. 
> >Could you please provide me the link for download?
> >Thank you very much!
> >  
> >
> http://www.nutch.org/release/
> 
> >Ya
> >----- Original Message ----- 
> >From: "David Spencer" <dave-lucene-user@tropo.com>
> >To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >Sent: Wednesday, September 08, 2004 2:43 PM
> >Subject: Re: Full web search engine package using Lucene
> >
> >
> >  
> >
> >>Anne Y. Zhang wrote:
> >>
> >>    
> >>
> >>>Hi, I am assistanting a professor for a IR course. 
> >>>We need to provide the student with a full-fuctioned
> >>>search engine package, and the professor prefers it
> >>>being powered by lucene. Since I am new to lucene,
> >>>can anyone provide me some information that where
> >>>can I get the package? We also want the package 
> >>>contains the crawling function. Thank you very much!
> >>>      
> >>>
> >>http://www.nutch.org/
> >>
> >>    
> >>
> >>>Ya
> >>>
> >>>
> >>>
> >>>---------------------------------------------------------------------
> >>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>>
> >>>      
> >>>
> >>---------------------------------------------------------------------
> >>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>
> >>
> >>    
> >>
> >
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >  
> >
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10107-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 20:05:53 2004
Return-Path: <lucene-user-return-10107-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 33414 invoked from network); 8 Sep 2004 20:05:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 20:05:53 -0000
Received: (qmail 62585 invoked by uid 500); 8 Sep 2004 20:05:32 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 62385 invoked by uid 500); 8 Sep 2004 20:05:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 62195 invoked by uid 99); 8 Sep 2004 20:05:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [129.176.212.21] (HELO mhro1.mayo.edu) (129.176.212.21)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 13:05:26 -0700
Received: from excsrv01.mayo.edu (excsrv01.mayo.edu [129.176.235.101]) by mhro1.mayo.edu with ESMTP for lucene-user@jakarta.apache.org; Wed, 8 Sep 2004 15:05:20 -0500
Received: by excsrv01.mayo.edu with Internet Mail Service (5.5.2653.19)
	id <RPSRZ3FV>; Wed, 8 Sep 2004 15:05:05 -0500
Message-Id: <7A1D7964C7C943419AB6D2C32338385304C86B47@excsrv44.mayo.edu>
From: "Armbrust, Daniel C." <Armbrust.Daniel@mayo.edu>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: RE: Compound File Format question
Date: Wed, 8 Sep 2004 15:04:59 -0500 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: text/plain
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Ahh - two new discoveries:

You have to add a document, remove a document, and then call optimize.   Then everything works (nearly as expected)

The version of Lucene that ships with Luke still has the broken optimize code in it that didn't clean up after itself - so you need to just download Luke, and then run it with 1.4.1 of Lucene, rather than what is ships with (which the website indicates is 1.4 RC4)


Dan

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10108-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 08 23:45:51 2004
Return-Path: <lucene-user-return-10108-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 24677 invoked from network); 8 Sep 2004 23:45:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Sep 2004 23:45:51 -0000
Received: (qmail 2504 invoked by uid 500); 8 Sep 2004 23:45:45 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 2469 invoked by uid 500); 8 Sep 2004 23:45:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 2447 invoked by uid 99); 8 Sep 2004 23:45:44 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.240] (HELO web12703.mail.yahoo.com) (216.136.173.240)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 08 Sep 2004 16:45:40 -0700
Message-ID: <20040908234539.67588.qmail@web12703.mail.yahoo.com>
Received: from [195.29.108.44] by web12703.mail.yahoo.com via HTTP; Wed, 08 Sep 2004 16:45:39 PDT
Date: Wed, 8 Sep 2004 16:45:39 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: IndexSearcher.close() and aborting searches in progress
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <413F4CB6.8020307@tropo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Dave,

I haven't tried this, but I think this would be messy.  Lucene needs to
keep index files open, so that when you pull a Document from Hits, it
can read this stuff from those files.  If you close index files, you
are likely to get some NPEs or some such.

I don't think you'll find a ready to use API for this use case in
Lucene.  Instead, my guess is that you will have to manually keep track
of your IndexSearcher's status (open/closed), and allow searches to
return results only if status == open.

Otis


--- David Spencer <dave-lucene-user@tropo.com> wrote:

>
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/search/IndexSearcher.html#close()
> 
> What is the intent of IndexSearcher.close()?
> 
> I want to know how, in a web app, one can stop a search that's in 
> progress - use case is a user is limited to one search at at time,
> and 
> when one (expensive) search is running they decide it's taking too
> long 
> so they elaborate on the query and resubmit it. Goal is for the
> server 
> to stop the search that's in progress and to start a new one. I know
> how 
> to deal w/ session vars and so on in a web container - but can one
> stop 
> a search that's in progress and is that the intent of close()?
> 
> I haven't done the obvious experiment but regardless, the javadoc is 
> kinda terse so I wanted to hear from the all knowing people on the
> list.
> 
> thx,
>    Dave
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10109-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 00:02:23 2004
Return-Path: <lucene-user-return-10109-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 29675 invoked from network); 9 Sep 2004 00:02:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 00:02:23 -0000
Received: (qmail 19420 invoked by uid 500); 9 Sep 2004 00:02:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 19328 invoked by uid 500); 9 Sep 2004 00:02:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 19129 invoked by uid 99); 9 Sep 2004 00:02:11 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 08 Sep 2004 17:02:09 -0700
Received: from synergy1.parc.xerox.com ([13.1.101.60]) by alpha.xerox.com with SMTP id <222456(1)>; Wed, 8 Sep 2004 17:01:38 PDT
Received: from parc.com ([127.0.0.1]) by synergy1.parc.xerox.com with SMTP id <58612>; Wed, 8 Sep 2004 17:01:11 PDT
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: MultiFieldQueryParser seems broken... Fix attached. 
In-Reply-To: Your message of "Wed, 08 Sep 2004 01:30:33 PDT."
             <26192.1094632233@www15.gmx.net> 
Date: Wed, 8 Sep 2004 17:01:06 PDT
From: Bill Janssen <janssen@parc.com>
Message-Id: <04Sep8.170111pdt."58612"@synergy1.parc.xerox.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Ren,

Thanks for your note.

I'd think that if a user specified a query "cutting lucene", with an
implicit AND and the default fields "title" and "author", they'd
expect to see a match in which both "cutting" and "lucene" appears.  That is,

(title:cutting OR author:cutting) AND (title:lucene OR author:lucene)

Instead, what they'd get using the current (broken) strategy of outer
combination used by the current MultiFieldQueryParser, would be

(title:cutting OR title:lucene) AND (author:cutting OR author:lucene)

Note that this would match even if only "lucene" occurred in the
document, as long as it occurred both in the title field and in the
author field.  Or, for that matter, it would also match "Cutting on
Cutting", by Doug Cutting :-).

> http://issues.apache.org/eyebrowse/ReadMsg?listName=lucene-user@jakarta.apache.org&msgId=1798116

Yes, the approach there is similar.  I attempted to complete the
solution and provide a working replacement for MultiFieldQueryParser.

Bill

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10110-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 00:49:46 2004
Return-Path: <lucene-user-return-10110-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 41685 invoked from network); 9 Sep 2004 00:49:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 00:49:46 -0000
Received: (qmail 66099 invoked by uid 500); 9 Sep 2004 00:49:26 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 66026 invoked by uid 500); 9 Sep 2004 00:49:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 66013 invoked by uid 99); 9 Sep 2004 00:49:25 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of dmitrys@earthlink.net designates 207.217.120.228 as permitted sender)
Received: from [207.217.120.228] (HELO mynah.mail.pas.earthlink.net) (207.217.120.228)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 17:49:23 -0700
Received: from [65.174.70.194] (helo=[192.168.12.20])
	by mynah.mail.pas.earthlink.net with asmtp (Exim 4.34)
	id 1C5D7q-0003IX-FY
	for lucene-user@jakarta.apache.org; Wed, 08 Sep 2004 17:49:22 -0700
Message-ID: <413FA8E3.5010102@earthlink.net>
Date: Wed, 08 Sep 2004 18:50:43 -0600
From: Dmitry Serebrennikov <dmitrys@earthlink.net>
User-Agent: Mozilla Thunderbird 0.7.1 (Windows/20040626)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: indexing size
References: <20040831151757.93978.qmail@web12702.mail.yahoo.com> <36712F40-FB62-11D8-AFB5-000393760B7E@mac.com> <018001c48fde$7b4556f0$b101a8c0@emacmillan.edu> <B65C4CDE-FBEA-11D8-8A3D-000393760B7E@mac.com> <01fa01c49001$5bde9f60$b101a8c0@emacmillan.edu>
In-Reply-To: <01fa01c49001$5bde9f60$b101a8c0@emacmillan.edu>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-ELNK-Trace: b9a8ec9b68c23176d780f4a490ca69564776905774d2ac4b6b70e8b7e5d10d481bfbed9b4156f28e350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c
X-Originating-IP: 65.174.70.194
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Niraj Alok wrote:

>Hi PA,
>
>Thanks for the detail ! Since we are using lucene to store the data also, I
>guess I would not be able to use it.
>  
>
By the way, I could be wrong, but I think the 35% figure you referenced 
in the your first e-mail actually does not include any stored fields. 
The deal with 35% was, I think, to illustrate that index data structures 
used for searching by Lucene are efficient. But Lucene does nothing 
special about stored content - no compression or anything like that. So 
you end up with the pure size of your data plus the 35% of the indexed 
data.

Cheers.
Dmitry.

>Regards,
>Niraj
>----- Original Message -----
>From: "petite_abeille" <petite_abeille@mac.com>
>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>Sent: Wednesday, September 01, 2004 1:14 PM
>Subject: Re: indexing size
>
>
>  
>
>>Hi Niraj,
>>
>>On Sep 01, 2004, at 06:45, Niraj Alok wrote:
>>
>>    
>>
>>>If I make some of them Field.Unstored, I can see from the javadocs
>>>that it
>>>will be indexed and tokenized but not stored. If it is not stored, how
>>>can I
>>>use it while searching?
>>>      
>>>
>>The different type of fields don't impact how you do your search. This
>>is always the same.
>>
>>Using Unstored fields simply means that you use Lucene as a pure index
>>for search purpose only, not for storing any data.
>>
>>Specifically, the assumption is that your original data lives somewhere
>>else, outside of Lucene. If this assumption is true, then you can index
>>everything as Unstored with the addition of one Keyword per document.
>>The Keyword field holds some sort of unique identifier which allows you
>>to retrieve the original data if necessary (e.g. a primary key, an URI,
>>what not).
>>
>>Here is an example of this approach:
>>
>>(1) For indexing, check the indexValuesWithID() method
>>
>>http://cvs.sourceforge.net/viewcvs.py/zoe/ZOE/Frameworks/SZObject/
>>SZIndex.java?view=markup
>>
>>Note the addition of a Field.Keyword for each document and the use of
>>Field.UnStored for everything else
>>
>>(2) For fetching, check objectsWithSpecificationAndHitsInStore()
>>
>>http://cvs.sourceforge.net/viewcvs.py/zoe/ZOE/Frameworks/SZObject/
>>SZFinder.java?view=markup
>>
>>HTH.
>>
>>Cheers,
>>
>>PA.
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>    
>>
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10111-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 02:08:32 2004
Return-Path: <lucene-user-return-10111-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 74154 invoked from network); 9 Sep 2004 02:08:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 02:08:31 -0000
Received: (qmail 68591 invoked by uid 500); 9 Sep 2004 02:07:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 68439 invoked by uid 500); 9 Sep 2004 02:07:52 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 68404 invoked by uid 99); 9 Sep 2004 02:07:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of fraschetti@gmail.com designates 64.233.170.202 as permitted sender)
Received: from [64.233.170.202] (HELO mproxy.gmail.com) (64.233.170.202)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 19:07:51 -0700
Received: by mproxy.gmail.com with SMTP id 79so1209rnl
        for <lucene-user@jakarta.apache.org>; Wed, 08 Sep 2004 19:07:49 -0700 (PDT)
Received: by 10.38.79.65 with SMTP id c65mr7628rnb;
        Wed, 08 Sep 2004 19:07:49 -0700 (PDT)
Received: by 10.38.171.70 with HTTP; Wed, 8 Sep 2004 19:07:49 -0700 (PDT)
Message-ID: <cbdebdf8040908190727a70715@mail.gmail.com>
Date: Wed, 8 Sep 2004 19:07:49 -0700
From: Chris Fraschetti <fraschetti@gmail.com>
Reply-To: Chris Fraschetti <fraschetti@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: maximum index size
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I know the index size is very dependent on the content being index...

but running on a unix based machine w/o a filesize limit, best case
scenario... what is the largest number of documents that can be
indexed.

I've seen throughout the list mentions of millions of documents.. 8
million, 20 million, etc etc.. but can lucene potentially handle
billions of documents and still efficiently search through them?

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10112-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 02:22:11 2004
Return-Path: <lucene-user-return-10112-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 77739 invoked from network); 9 Sep 2004 02:22:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 02:22:11 -0000
Received: (qmail 78951 invoked by uid 500); 9 Sep 2004 02:21:58 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 78904 invoked by uid 500); 9 Sep 2004 02:21:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 78888 invoked by uid 99); 9 Sep 2004 02:21:56 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.243] (HELO web12706.mail.yahoo.com) (216.136.173.243)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 08 Sep 2004 19:21:55 -0700
Message-ID: <20040909022154.32692.qmail@web12706.mail.yahoo.com>
Received: from [195.29.108.44] by web12706.mail.yahoo.com via HTTP; Wed, 08 Sep 2004 19:21:53 PDT
Date: Wed, 8 Sep 2004 19:21:53 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: maximum index size
To: Lucene Users List <lucene-user@jakarta.apache.org>,
  Chris Fraschetti <fraschetti@gmail.com>
In-Reply-To: <cbdebdf8040908190727a70715@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Given adequate hardware, it can.  Take a look at nutch.org.  Nutch uses
Lucene at its core.

Otis

--- Chris Fraschetti <fraschetti@gmail.com> wrote:

> I know the index size is very dependent on the content being index...
> 
> but running on a unix based machine w/o a filesize limit, best case
> scenario... what is the largest number of documents that can be
> indexed.
> 
> I've seen throughout the list mentions of millions of documents.. 8
> million, 20 million, etc etc.. but can lucene potentially handle
> billions of documents and still efficiently search through them?
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10113-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 03:50:29 2004
Return-Path: <lucene-user-return-10113-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 3742 invoked from network); 9 Sep 2004 03:50:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 03:50:28 -0000
Received: (qmail 63330 invoked by uid 500); 9 Sep 2004 03:50:21 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 63271 invoked by uid 500); 9 Sep 2004 03:50:20 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 63256 invoked by uid 99); 9 Sep 2004 03:50:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 20:50:18 -0700
Received: (qmail 90873 invoked by uid 89); 9 Sep 2004 03:50:13 -0000
Received: from unknown (HELO ?192.168.168.10?) (doug@cottrell-cutting.net@24.5.163.156)
  by londo.swishmail.com with AES256-SHA encrypted SMTP; 9 Sep 2004 03:50:13 -0000
Message-ID: <413FD2EE.2080601@apache.org>
Date: Wed, 08 Sep 2004 20:50:06 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040803
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: maximum index size
References: <cbdebdf8040908190727a70715@mail.gmail.com>
In-Reply-To: <cbdebdf8040908190727a70715@mail.gmail.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Chris Fraschetti wrote:
> I've seen throughout the list mentions of millions of documents.. 8
> million, 20 million, etc etc.. but can lucene potentially handle
> billions of documents and still efficiently search through them?

Lucene can currently handle up to 2^31 documents in a single index.  To 
a large degree this is limited by Java ints and arrays (which are 
accessed by ints).  There are also a few places where the file format 
limits things to 2^32.

On typical PC hardware, 2-3 word searches of an index with 10M 
documents, each with around 10k of text, require around 1 second, 
including index i/o time.  Performance is more-or-less linear, so that a 
100M document index might require nearly 10 seconds per search.  Thus, 
as indexes grow folks tend to distribute searches in parallel to many 
smaller indexes.  That's what Nutch and Google 
(http://www.computer.org/micro/mi2003/m2022.pdf) do.

Doug


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10114-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 06:25:41 2004
Return-Path: <lucene-user-return-10114-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 54223 invoked from network); 9 Sep 2004 06:25:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 06:25:41 -0000
Received: (qmail 13370 invoked by uid 500); 9 Sep 2004 06:25:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 13337 invoked by uid 500); 9 Sep 2004 06:25:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 13323 invoked by uid 99); 9 Sep 2004 06:25:28 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 08 Sep 2004 23:25:27 -0700
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Thu, 9 Sep 2004 08:27:19 +0200
Message-ID: <413FF7B9.8020005@ifit.uni-klu.ac.at>
Date: Thu, 09 Sep 2004 08:27:05 +0200
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: MultiFieldQueryParser seems broken... Fix attached.
References: <04Sep8.170111pdt."58612"@synergy1.parc.xerox.com>
In-Reply-To: <04Sep8.170111pdt."58612"@synergy1.parc.xerox.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-OriginalArrivalTime: 09 Sep 2004 06:27:19.0297 (UTC) FILETIME=[0EBE4F10:01C49636]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

 Hi Bill,
 
  I think that more people wait for this patch of MultifieldIndexParser.
  It would be nice if it will be included in the next realease candidate 
....

    All the best,

   Sergiu

Bill Janssen wrote:

>Ren,
>
>Thanks for your note.
>
>I'd think that if a user specified a query "cutting lucene", with an
>implicit AND and the default fields "title" and "author", they'd
>expect to see a match in which both "cutting" and "lucene" appears.  That is,
>
>(title:cutting OR author:cutting) AND (title:lucene OR author:lucene)
>
>Instead, what they'd get using the current (broken) strategy of outer
>combination used by the current MultiFieldQueryParser, would be
>
>(title:cutting OR title:lucene) AND (author:cutting OR author:lucene)
>
>Note that this would match even if only "lucene" occurred in the
>document, as long as it occurred both in the title field and in the
>author field.  Or, for that matter, it would also match "Cutting on
>Cutting", by Doug Cutting :-).
>
>  
>
>>http://issues.apache.org/eyebrowse/ReadMsg?listName=lucene-user@jakarta.apache.org&msgId=1798116
>>    
>>
>
>Yes, the approach there is similar.  I attempted to complete the
>solution and provide a working replacement for MultiFieldQueryParser.
>
>Bill
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10115-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 07:29:25 2004
Return-Path: <lucene-user-return-10115-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 93497 invoked from network); 9 Sep 2004 07:29:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 07:29:25 -0000
Received: (qmail 97574 invoked by uid 500); 9 Sep 2004 07:29:17 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 97487 invoked by uid 500); 9 Sep 2004 07:29:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 97471 invoked by uid 99); 9 Sep 2004 07:29:15 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [82.199.128.14] (HELO andromeda.dutchdsl.net) (82.199.128.14)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Sep 2004 00:29:14 -0700
Received: from aadlaptop (dsl-82-199-135-164.dutchdsl.nl [82.199.135.164])
	by andromeda.dutchdsl.net (Postfix) with ESMTP id CD69328CA7
	for <lucene-user@jakarta.apache.org>; Wed,  8 Sep 2004 12:11:13 +0200 (CEST)
From: "Aad Nales" <aad.nales@rotterdam-cs.com>
To: <lucene-user@jakarta.apache.org>
Subject: test pls ignore
Date: Wed, 8 Sep 2004 12:12:47 +0200
Message-ID: <000501c4958c$644a0870$0a00a8c0@aadlaptop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2616
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N




--
Aad Nales
aad.nales@rotterdam-cs.com, +31-(0)6 54 207 340 



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10116-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 07:40:08 2004
Return-Path: <lucene-user-return-10116-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 98627 invoked from network); 9 Sep 2004 07:40:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 07:40:08 -0000
Received: (qmail 9409 invoked by uid 500); 9 Sep 2004 07:39:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 9295 invoked by uid 500); 9 Sep 2004 07:39:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 9216 invoked by uid 99); 9 Sep 2004 07:39:45 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of rene.a.hackl@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 09 Sep 2004 00:39:43 -0700
Received: (qmail 13144 invoked by uid 0); 9 Sep 2004 07:39:38 -0000
Received: from 141.66.16.25 by www19.gmx.net with HTTP;
	Thu, 9 Sep 2004 09:39:39 +0200 (MEST)
Date: Thu, 9 Sep 2004 09:39:39 +0200 (MEST)
From: =?ISO-8859-1?Q?=22Ren=E9_Hackl=22?= <rene.a.hackl@gmx.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
MIME-Version: 1.0
References: <04Sep8.170111pdt."58612"@synergy1.parc.xerox.com>
Subject: Re: MultiFieldQueryParser seems broken... Fix attached.
X-Priority: 3 (Normal)
X-Authenticated: #24166002
Message-ID: <581.1094715579@www19.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Bill,

Thank you for clarifying on that issue. I missed the...

> (title:cutting OR author:cutting) AND (title:lucene OR author:lucene)
   ...
> (title:cutting OR title:lucene) AND (author:cutting OR author:lucene)
> 
> Note that this would match even if only "lucene" occurred in the

... "only lucene"/"only cutting" match. 

> I'd think that if a user specified a query "cutting lucene", with an
> implicit AND and the default fields "title" and "author", they'd
> expect to see a match in which both "cutting" and "lucene" appears. 

Hopefully they'd expect that. Sometimes users assume that e.g. "coffee OR
tea" would provide matches with either term, but not both. But this is
already "user-attune your application" territory. Your proposal makes
perfect sense, of course.

Ren


-- 
Supergnstige DSL-Tarife + WLAN-Router fr 0,- EUR*
Jetzt zu GMX wechseln und sparen http://www.gmx.net/de/go/dsl


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10117-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 07:51:53 2004
Return-Path: <lucene-user-return-10117-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 4913 invoked from network); 9 Sep 2004 07:51:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 07:51:52 -0000
Received: (qmail 22854 invoked by uid 500); 9 Sep 2004 07:51:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 22813 invoked by uid 500); 9 Sep 2004 07:51:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 22800 invoked by uid 99); 9 Sep 2004 07:51:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [82.199.128.14] (HELO andromeda.dutchdsl.net) (82.199.128.14)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Sep 2004 00:51:37 -0700
Received: from aadlaptop (dsl-82-199-135-164.dutchdsl.nl [82.199.135.164])
	by andromeda.dutchdsl.net (Postfix) with ESMTP id 93424222C8
	for <lucene-user@jakarta.apache.org>; Wed,  8 Sep 2004 09:05:32 +0200 (CEST)
From: "Aad Nales" <aad.nales@rotterdam-cs.com>
To: <lucene-user@jakarta.apache.org>
Subject: combining open office spellchecker with Lucene
Date: Wed, 8 Sep 2004 09:07:00 +0200
Message-ID: <000001c49572$72cacc00$0a00a8c0@aadlaptop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2616
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi All,

Before I start reinventing wheels I would like to do a short check to
see if anybody else has already tried this. A customer has requested us
to look into the possibility to perform a spell check on queries. So far
the most promising way of doing this seems to be to create an Analyzer
based on the spellchecker of OpenOffice. My question is: "has anybody
tried this before?" 

Cheers,
Aad


--
Aad Nales
aad.nales@rotterdam-cs.com, +31-(0)6 54 207 340 



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10118-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 08:03:20 2004
Return-Path: <lucene-user-return-10118-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 11659 invoked from network); 9 Sep 2004 08:03:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 08:03:20 -0000
Received: (qmail 38606 invoked by uid 500); 9 Sep 2004 08:03:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 38570 invoked by uid 500); 9 Sep 2004 08:03:10 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 38556 invoked by uid 99); 9 Sep 2004 08:03:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [217.160.131.136] (HELO p15105029.pureserver.info) (217.160.131.136)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 09 Sep 2004 01:03:06 -0700
Received: (qmail 19403 invoked by uid 89); 9 Sep 2004 10:03:04 +0200
Received: from unknown (HELO max.osuatech.local) (max%osua.de@217.25.196.25)
  by 0 with SMTP; 9 Sep 2004 10:03:04 +0200
Date: Thu, 9 Sep 2004 11:04:58 +0300
From: Maxim Patramanskij <max@osua.de>
X-Mailer: The Bat! (v1.62i) Business
Reply-To: Maxim Patramanskij <max@osua.de>
Organization: OSUA technology
X-Priority: 3 (Normal)
Message-ID: <4483102984.20040909110458@osua.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: PDF->Text Performance comparison
In-Reply-To: <Pine.GSO.4.53.0409081030250.16799@fury.csh.rit.edu>
References: <040b01c49566$a8ffb670$0f6ea8c0@lithos>
 <005d01c4957b$fc3feb60$994033ca@neplaptop>
 <044d01c4958a$62058190$0f6ea8c0@lithos>
 <1F5690C4-01A2-11D9-8B7A-000A95B336F2@snowtide.com>
 <Pine.GSO.4.53.0409081030250.16799@fury.csh.rit.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello Ben,

I've been using PDFBox within last year, but only version 0.6.3,
because of 2 reasons:

 1) I tried to migrate to never versions(o.6.4, 0.6.5, 0.6.6), but all the time I had
 problems with parsing the same pdf documents, which worked well for
 0.6.3. I mentioned my problems here:
  https://sourceforge.net/tracker/?func=detail&atid=552832&aid=1021691&group_id=78314

 2) When I were started with 0.6.3 I experienced perfomance problems
 too, especially with large pdf documents (I had several with more
 then 20MB size). I changed a bit source, wrapping the following line
 of BaseParser class:

            out = stream.createFilteredStream( streamLength );

            to
            
            out = new BufferedOutputStream(stream.createFilteredStream( streamLength ));
            

 The performance increase, I've got, was huge:
 parsing 21MB pdf document to text before modifacatrion was taking 78
 seconds, after modification 12 seconds, so more the 6 times faster.

 I tried also to use buffered streams in some other places, but it was
 not that visible. I hope this change can also be incorporated into
 the current 0.6.6 release and then benchmarks may stay in PDFBox side
 :)


 Max


BL> On Wed, 8 Sep 2004, Chas Emerick wrote:
>> PDFTextStream: fast PDF text extraction for Java applications
>> http://snowtide.com/home/PDFTextStream/


BL> For those that have not seen, snowtide.com has done a performance
BL> comparison against several Java PDF->Text libraries, including Snowtide's
BL> PDFTextStream, PDFBox, Etymon PJ and JPedal.  It appears to be fairly well
BL> done.

BL> http://snowtide.com/home/PDFTextStream/Performance


BL> PDFBox: slow PDF text extraction for Java applications
BL> http://www.pdfbox.org

BL> :)

BL> Ben


BL> ---------------------------------------------------------------------
BL> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
BL> For additional commands, e-mail: lucene-user-help@jakarta.apache.org




-- 
Best regards,
 Maxim                            mailto:max@osua.de


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10119-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 08:05:57 2004
Return-Path: <lucene-user-return-10119-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 13039 invoked from network); 9 Sep 2004 08:05:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 08:05:57 -0000
Received: (qmail 43880 invoked by uid 500); 9 Sep 2004 08:05:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 43848 invoked by uid 500); 9 Sep 2004 08:05:47 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 43835 invoked by uid 99); 9 Sep 2004 08:05:47 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [217.160.91.29] (HELO p15112568.pureserver.info) (217.160.91.29)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Sep 2004 01:05:45 -0700
Received: from intrafind.de (ppp-82-135-10-114.mnet-online.de [82.135.10.114])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))
	(No client certificate requested)
	by p15112568.pureserver.info (Postfix) with ESMTP id DD8ED140116
	for <lucene-user@jakarta.apache.org>; Thu,  9 Sep 2004 10:05:42 +0200 (CEST)
Message-ID: <414003BA.1020800@intrafind.de>
Date: Thu, 09 Sep 2004 09:18:18 +0200
From: Bernhard Messer <Bernhard.Messer@intrafind.de>
User-Agent: Mozilla Thunderbird 0.5 (X11/20040208)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: indexing size
References: <20040831151757.93978.qmail@web12702.mail.yahoo.com> <36712F40-FB62-11D8-AFB5-000393760B7E@mac.com> <018001c48fde$7b4556f0$b101a8c0@emacmillan.edu> <B65C4CDE-FBEA-11D8-8A3D-000393760B7E@mac.com> <01fa01c49001$5bde9f60$b101a8c0@emacmillan.edu> <413FA8E3.5010102@earthlink.net>
In-Reply-To: <413FA8E3.5010102@earthlink.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Dmitry Serebrennikov wrote:

> Niraj Alok wrote:
>
>> Hi PA,
>>
>> Thanks for the detail ! Since we are using lucene to store the data 
>> also, I
>> guess I would not be able to use it.
>>  
>>
> By the way, I could be wrong, but I think the 35% figure you 
> referenced in the your first e-mail actually does not include any 
> stored fields. The deal with 35% was, I think, to illustrate that 
> index data structures used for searching by Lucene are efficient. But 
> Lucene does nothing special about stored content - no compression or 
> anything like that. So you end up with the pure size of your data plus 
> the 35% of the indexed data.

There will be a patch available to the end of this week, which allows 
you to store binary values compressed within a lucene index. It means 
that you will be able to store and retrieve whole documents within 
lucene in a very efficient way ;-)

regards
bernhard

>
>
> Cheers.
> Dmitry.
>
>> Regards,
>> Niraj
>> ----- Original Message -----
>> From: "petite_abeille" <petite_abeille@mac.com>
>> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>> Sent: Wednesday, September 01, 2004 1:14 PM
>> Subject: Re: indexing size
>>
>>
>>  
>>
>>> Hi Niraj,
>>>
>>> On Sep 01, 2004, at 06:45, Niraj Alok wrote:
>>>
>>>   
>>>
>>>> If I make some of them Field.Unstored, I can see from the javadocs
>>>> that it
>>>> will be indexed and tokenized but not stored. If it is not stored, how
>>>> can I
>>>> use it while searching?
>>>>     
>>>
>>> The different type of fields don't impact how you do your search. This
>>> is always the same.
>>>
>>> Using Unstored fields simply means that you use Lucene as a pure index
>>> for search purpose only, not for storing any data.
>>>
>>> Specifically, the assumption is that your original data lives somewhere
>>> else, outside of Lucene. If this assumption is true, then you can index
>>> everything as Unstored with the addition of one Keyword per document.
>>> The Keyword field holds some sort of unique identifier which allows you
>>> to retrieve the original data if necessary (e.g. a primary key, an URI,
>>> what not).
>>>
>>> Here is an example of this approach:
>>>
>>> (1) For indexing, check the indexValuesWithID() method
>>>
>>> http://cvs.sourceforge.net/viewcvs.py/zoe/ZOE/Frameworks/SZObject/
>>> SZIndex.java?view=markup
>>>
>>> Note the addition of a Field.Keyword for each document and the use of
>>> Field.UnStored for everything else
>>>
>>> (2) For fetching, check objectsWithSpecificationAndHitsInStore()
>>>
>>> http://cvs.sourceforge.net/viewcvs.py/zoe/ZOE/Frameworks/SZObject/
>>> SZFinder.java?view=markup
>>>
>>> HTH.
>>>
>>> Cheers,
>>>
>>> PA.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>>   
>>
>>
>>  
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10120-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 11:41:57 2004
Return-Path: <lucene-user-return-10120-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21493 invoked from network); 9 Sep 2004 11:41:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 11:41:57 -0000
Received: (qmail 57231 invoked by uid 500); 9 Sep 2004 11:41:21 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 57080 invoked by uid 500); 9 Sep 2004 11:41:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 56948 invoked by uid 99); 9 Sep 2004 11:41:18 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.155.196.70] (HELO web60807.mail.yahoo.com) (216.155.196.70)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 09 Sep 2004 04:41:16 -0700
Message-ID: <20040909114114.38013.qmail@web60807.mail.yahoo.com>
Received: from [61.16.175.2] by web60807.mail.yahoo.com via HTTP; Thu, 09 Sep 2004 12:41:14 BST
Date: Thu, 9 Sep 2004 12:41:14 +0100 (BST)
From: =?iso-8859-1?q?Honey=20George?= <honey_george@yahoo.com>
Subject: Case sensitiveness and wildcard searches
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,
 I noticed a behavior with wildcard searches and like
to clarify.

>From the FAQ
http://www.jguru.com/faq/view.jsp?EID=538312
in JGuru, Analyzer is not used for wildcard queries.
In my case I have a document which contains the word
IMPORTANT. I use PorterStemFiler + StandardAnalyzer
for indexing & searching. I am getting the document if
I search for the word IM*. But if analyzer is not used
then who does the conversion of the word to lowercase.

My code will look like this.

---
QueryParser qp=new QueryParser("title",
      new MyAnalyzer());
Query q = qp.parse(text);
---


Though I pass the text in uppercase (IM*), when I
print the Query object I can see it in lowercase,
something like  (title:im*)

I am using lucene-1.3-final. Can someone explain this?

Thanks & regards,
   George




	
	
		
___________________________________________________________ALL-NEW Yahoo! Messenger - all new features - even more fun!  http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10121-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 11:51:17 2004
Return-Path: <lucene-user-return-10121-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 25604 invoked from network); 9 Sep 2004 11:51:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 11:51:17 -0000
Received: (qmail 68780 invoked by uid 500); 9 Sep 2004 11:51:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 68756 invoked by uid 500); 9 Sep 2004 11:51:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 68730 invoked by uid 99); 9 Sep 2004 11:51:02 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [212.74.15.68] (HELO semantico.com) (212.74.15.68)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Sep 2004 04:51:00 -0700
Received: from spampd.localdomain (localhost [127.0.0.1])
	by localhost.semantico.com (Postfix) with ESMTP id 466A2320048
	for <lucene-user@jakarta.apache.org>; Thu,  9 Sep 2004 12:50:58 +0100 (BST)
Received: from semantico.com (Annatto.dyn.rp.lan [192.168.1.210])
	by semantico.com (Postfix) with ESMTP id E9AA1320048
	for <lucene-user@jakarta.apache.org>; Thu,  9 Sep 2004 12:50:57 +0100 (BST)
Message-ID: <4140439E.7000206@semantico.com>
Date: Thu, 09 Sep 2004 12:50:54 +0100
From: Peter Pimley <ppimley@semantico.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.6) Gecko/20040113
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: (n00b)  Meaning of Hits.id (int)
References: <20040909114114.38013.qmail@web60807.mail.yahoo.com>
In-Reply-To: <20040909114114.38013.qmail@web60807.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Checker-Version: SpamAssassin 2.63 (2004-01-11) on paprika.rp.lan
X-Spam-Status: No, hits=-100.0 required=5.0 tests=USER_IN_WHITELIST 
	autolearn=no version=2.63
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Hello everyone.

I'm in the process of writing "my first lucene app", and I've got to the 
bit where I get my search results back (very exciting! ;).

My documents are not stored in their original form by lucene, but in a 
seperate database.  My lucene docs do however store the primary key, so 
that I can fetch the original version from the database to show the user 
(does that sound sane?)

I see that the 'Hits' class has an id (int) method, which sounds 
interesting.  The javadoc says "Returns the id for the nth document in 
this set.".  However, I can't find any mention anywhere else about 
Document ids.  Could anybody explain what this is?

Many Thanks in Advance,
Peter Pimley, Semantico


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10122-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 12:05:16 2004
Return-Path: <lucene-user-return-10122-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 33726 invoked from network); 9 Sep 2004 12:05:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 12:05:16 -0000
Received: (qmail 84875 invoked by uid 500); 9 Sep 2004 12:05:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 84836 invoked by uid 500); 9 Sep 2004 12:05:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 84816 invoked by uid 99); 9 Sep 2004 12:05:02 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of rene.a.hackl@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 09 Sep 2004 05:04:57 -0700
Received: (qmail 15867 invoked by uid 0); 9 Sep 2004 12:04:54 -0000
Received: from 141.66.16.25 by www22.gmx.net with HTTP;
	Thu, 9 Sep 2004 14:04:54 +0200 (MEST)
Date: Thu, 9 Sep 2004 14:04:54 +0200 (MEST)
From: =?ISO-8859-1?Q?=22Ren=E9_Hackl=22?= <rene.a.hackl@gmx.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
MIME-Version: 1.0
References: <20040909114114.38013.qmail@web60807.mail.yahoo.com>
Subject: Re: Case sensitiveness and wildcard searches
X-Priority: 3 (Normal)
X-Authenticated: #24166002
Message-ID: <24728.1094731494@www22.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi George,

I'm not sure about v1.3, but you may want to take a look
at

http://issues.apache.org/eyebrowse/ReadMsg?listName=lucene-user@jakarta.apache.org&msgNo=9342

or

http://issues.apache.org/eyebrowse/ReadMsg?listName=lucene-user@jakarta.apache.org&msgId=1806371

cheers,
Ren

-- 
NEU: Bis zu 10 GB Speicher fr e-mails & Dateien!
1 GB bereits bei GMX FreeMail http://www.gmx.net/de/go/mail


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10123-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 12:09:15 2004
Return-Path: <lucene-user-return-10123-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 38402 invoked from network); 9 Sep 2004 12:09:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 12:09:15 -0000
Received: (qmail 96234 invoked by uid 500); 9 Sep 2004 12:09:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 96183 invoked by uid 500); 9 Sep 2004 12:09:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 96168 invoked by uid 99); 9 Sep 2004 12:09:04 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Sep 2004 05:09:04 -0700
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Thu, 9 Sep 2004 14:10:56 +0200
Message-ID: <41404850.7050202@ifit.uni-klu.ac.at>
Date: Thu, 09 Sep 2004 14:10:56 +0200
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: MultiFieldQueryParser seems broken... Fix attached.
References: <04Sep8.170111pdt."58612"@synergy1.parc.xerox.com> <581.1094715579@www19.gmx.net>
In-Reply-To: <581.1094715579@www19.gmx.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-OriginalArrivalTime: 09 Sep 2004 12:10:56.0208 (UTC) FILETIME=[0F614500:01C49666]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Ren Hackl wrote:

>Bill,
>
>Thank you for clarifying on that issue. I missed the...
>
>  
>
>>(title:cutting OR author:cutting) AND (title:lucene OR author:lucene)
>>    
>>
>   ...
>  
>
>>(title:cutting OR title:lucene) AND (author:cutting OR author:lucene)
>>
>>Note that this would match even if only "lucene" occurred in the
>>    
>>
>
>... "only lucene"/"only cutting" match. 
>
>  
>
>>I'd think that if a user specified a query "cutting lucene", with an
>>implicit AND and the default fields "title" and "author", they'd
>>expect to see a match in which both "cutting" and "lucene" appears. 
>>    
>>
>
>Hopefully they'd expect that. Sometimes users assume that e.g. "coffee OR
>tea" would provide matches with either term, but not both. But this is
>already "user-attune your application" territory. Your proposal makes
>perfect sense, of course.
>
>Ren
>
>  
>
is it a problem if the users will search "coffee OR tea" as a search 
string in the case that MultifieldQueryParser is
modifyed as Bill suggested?, and the default opperator is set to AND?

I don't think so ... I think that the resulting Query should be:

(title:cutting OR author:cutting) OR (title:lucene OR author:lucene)

 And I think that the results will be correct.
Am I wrong?

I don't know exactly what will happen with more complex queries, the uses grouping, exact matches and NOT operator


like:

  (alcohol NOT tea) OR ("black tea" AND brandy)
what will happen if you send this to a MultifieldQueryParser that searches in an index with

the fields "drink" and "juices"

Maybe this kind of search constructions should be a part of JUnit tests, if they are not already there.

 
 Thanks,

 Sergiu 
  

 



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10124-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 12:26:47 2004
Return-Path: <lucene-user-return-10124-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 53530 invoked from network); 9 Sep 2004 12:26:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 12:26:47 -0000
Received: (qmail 36558 invoked by uid 500); 9 Sep 2004 12:26:32 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 36427 invoked by uid 500); 9 Sep 2004 12:26:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 36365 invoked by uid 99); 9 Sep 2004 12:26:28 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Sep 2004 05:26:27 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id CDF0923B94
	for <lucene-user@jakarta.apache.org>; Thu,  9 Sep 2004 14:27:44 +0200 (CEST)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 27745-10 for <lucene-user@jakarta.apache.org>;
 Thu,  9 Sep 2004 14:27:44 +0200 (CEST)
Received: from tucholsky.office.tanto.de (unknown [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP id AB3FB23B93
	for <lucene-user@jakarta.apache.org>; Thu,  9 Sep 2004 14:27:44 +0200 (CEST)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id i89CQMGL009790
	for <lucene-user@jakarta.apache.org>; Thu, 9 Sep 2004 14:26:22 +0200
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id i89CQMak009786;
	Thu, 9 Sep 2004 14:26:22 +0200
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16704.19438.19552.559777@tanto-xipolis.de>
Date: Thu, 9 Sep 2004 14:26:22 +0200
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: (n00b)  Meaning of Hits.id (int)
In-Reply-To: <4140439E.7000206@semantico.com>
References: <20040909114114.38013.qmail@web60807.mail.yahoo.com>
	<4140439E.7000206@semantico.com>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Peter Pimley writes:
> 
> My documents are not stored in their original form by lucene, but in a 
> seperate database.  My lucene docs do however store the primary key, so 
> that I can fetch the original version from the database to show the user 
> (does that sound sane?)
> 
yes.

> I see that the 'Hits' class has an id (int) method, which sounds 
> interesting.  The javadoc says "Returns the id for the nth document in 
> this set.".  However, I can't find any mention anywhere else about 
> Document ids.  Could anybody explain what this is?
> 
It's lucenes internal id or document number which allows you to access
the document and its stored fields.

See 
IndexSearcher.doc(int i)
or
IndexReader.document(int n)

The docs just don't name the parameter 'id'.

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10125-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 12:31:54 2004
Return-Path: <lucene-user-return-10125-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 57681 invoked from network); 9 Sep 2004 12:31:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 12:31:54 -0000
Received: (qmail 49175 invoked by uid 500); 9 Sep 2004 12:31:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 49120 invoked by uid 500); 9 Sep 2004 12:31:45 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 49093 invoked by uid 99); 9 Sep 2004 12:31:45 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of ben@csh.rit.edu designates 129.21.60.6 as permitted sender)
Received: from [129.21.60.6] (HELO blacksheep.csh.rit.edu) (129.21.60.6)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Sep 2004 05:31:43 -0700
Received: from fury.csh.rit.edu (fury.csh.rit.edu [IPv6:2001:470:1f00:135:a00:20ff:fe8d:5399])
	by blacksheep.csh.rit.edu (Postfix) with ESMTP
	id 31A1391CA; Thu,  9 Sep 2004 08:31:37 -0400 (EDT)
Received: by fury.csh.rit.edu (Postfix, from userid 38448)
	id F2B3514A0; Thu,  9 Sep 2004 08:31:36 -0400 (EDT)
Received: from localhost (localhost [127.0.0.1])
	by fury.csh.rit.edu (Postfix) with ESMTP
	id E34E3149E; Thu,  9 Sep 2004 08:31:36 -0400 (EDT)
Date: Thu, 9 Sep 2004 08:31:36 -0400 (EDT)
From: Ben Litchfield <ben@csh.rit.edu>
To: Lucene Users List <lucene-user@jakarta.apache.org>,
	Maxim Patramanskij <max@osua.de>
Subject: Re: PDF->Text Performance comparison
In-Reply-To: <4483102984.20040909110458@osua.de>
Message-ID: <Pine.GSO.4.53.0409090829560.10283@fury.csh.rit.edu>
References: <040b01c49566$a8ffb670$0f6ea8c0@lithos> <005d01c4957b$fc3feb60$994033ca@neplaptop>
 <044d01c4958a$62058190$0f6ea8c0@lithos> <1F5690C4-01A2-11D9-8B7A-000A95B336F2@snowtide.com>
 <Pine.GSO.4.53.0409081030250.16799@fury.csh.rit.edu> <4483102984.20040909110458@osua.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

>  1) I tried to migrate to never versions(o.6.4, 0.6.5, 0.6.6), but all the time I had
>  problems with parsing the same pdf documents, which worked well for
>  0.6.3. I mentioned my problems here:
>   https://sourceforge.net/tracker/?func=detail&atid=552832&aid=1021691&group_id=78314

I am waiting for a response from you on this issue, try to login to SF
when posting bugs so you get a notification when it is updated.



>  2) When I were started with 0.6.3 I experienced perfomance problems
>  too, especially with large pdf documents (I had several with more
>  then 20MB size). I changed a bit source, wrapping the following line
>  of BaseParser class:

I will give that a try, thanks for letting me know.

Ben

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10126-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 12:42:34 2004
Return-Path: <lucene-user-return-10126-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 64835 invoked from network); 9 Sep 2004 12:42:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 12:42:34 -0000
Received: (qmail 72137 invoked by uid 500); 9 Sep 2004 12:42:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 72094 invoked by uid 500); 9 Sep 2004 12:42:24 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 72080 invoked by uid 99); 9 Sep 2004 12:42:23 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [82.199.128.14] (HELO andromeda.dutchdsl.net) (82.199.128.14)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Sep 2004 05:42:22 -0700
Received: from aadlaptop (dsl-82-199-135-164.dutchdsl.nl [82.199.135.164])
	by andromeda.dutchdsl.net (Postfix) with ESMTP id 4796430F2A
	for <lucene-user@jakarta.apache.org>; Thu,  9 Sep 2004 09:42:33 +0200 (CEST)
From: "Aad Nales" <aad.nales@rotterdam-cs.com>
To: <lucene-user@jakarta.apache.org>
Subject: Using MySpell iso the Snowball Analyzer
Date: Thu, 9 Sep 2004 09:44:07 +0200
Message-ID: <000001c49640$c9b78f20$0a00a8c0@aadlaptop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2616
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

For an eductational customer we have been requested to add spell
checking to queries that enter lucene. The MySpell classes of
Pietschmann seem to makes this more than feasible. What i wonder if
somebody else has done this before? Any tips, questions or remarks?

MySpell is the successor of ISpell and is used as the spellchecker in
OpenOffice. It excutes a stemming algoritm in combination with a
dictionary. My second question is if any has extracted the stemming
result to be used in an index?

Thanks for any or all feedback,
cheers,
Aad


--
Aad Nales
aad.nales@rotterdam-cs.com, +31-(0)6 54 207 340 



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10127-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 12:54:29 2004
Return-Path: <lucene-user-return-10127-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 71175 invoked from network); 9 Sep 2004 12:54:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 12:54:28 -0000
Received: (qmail 6438 invoked by uid 500); 9 Sep 2004 12:54:17 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 6307 invoked by uid 500); 9 Sep 2004 12:54:16 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 6211 invoked by uid 99); 9 Sep 2004 12:54:14 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=NO_REAL_NAME,PLING_PLING
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [160.62.1.169] (HELO fw-mail12.novartis.com) (160.62.1.169)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Sep 2004 05:54:13 -0700
Received: from mtap2.is.chbs ([192.37.33.19])
	by fw-mail12.novartis.com (Switch-3.1.6/Switch-3.1.6) with ESMTP id i89Cs95918595890
	for <lucene-user@jakarta.apache.org>; Thu, 9 Sep 2004 14:54:09 +0200
Received: from phchbs-s3025.EU.novartis.net (phchbs-s3025.eu.novartis.net [192.37.31.249])
	by mtap2.is.chbs (Switch-3.1.6/Switch-3.1.0) with ESMTP id i89Ck72o9191674
	for <lucene-user@jakarta.apache.org>; Thu, 9 Sep 2004 14:54:09 +0200
Subject: TermQuery PROBLEM!!!
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Message-ID: <OFC791AC65.CC1C113B-ONC1256F0A.00448154-C1256F0A.00463D09@EU.novartis.net>
From: iouli.golovatyi@group.novartis.com
Date: Thu, 9 Sep 2004 14:47:11 +0200
MIME-Version: 1.0
Content-type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Hello everybody and esp. Erik:)

In case search entry is empty, I'd like to generate all documents came
during the last minute
I have a filed ( created as doc.add(Field.Keyword(F_PUBLISHORT,
publishort));) containing this data in "yyyyMMddhhMM" format.

The problem is I get nothing, but I do know I have documents with for
example "200404271420" value

WHAT I DO WRONG?

When I do queries based on QueryParser (i.e. filter!=null) everything is
ok.

Thanks in advance
J.


......
           if (filter==null || filter.equals("")){
             filter=null;
             line="200404271420";
             fld = "publishort";
           }
.......


            if (filter==null){
                  query = new TermQuery(new Term(fld,line));
            }else{
                  NeisQueryParser nqp=new NeisQueryParser();
                  query = nqp.parse(line);
            }

            formated_query=query.toString();
            Sort sort=null;
            ms = getMS(); //MultiSearcher
            if (filter==null) {
                  if (sort_byscore)hits = ms.search(query,
getCurrentTimeFilter());
                  else hits = ms.search(query,getCurrentTimeFilter(),
"publishort");
            }else{
                  if (range_flag){
                        if (sort_byscore)hits = ms.search(query,
getDateFilter(),(String)null);
                        else hits = ms.search(query,getDateFilter(),sort);
                  }else{
                        if (sort_byscore)hits = ms.search(query);
                        else hits = ms.search(query,sort);
                  }
            }
            total_hitnum=hits.length();
            String logdata="";



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10128-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 13:08:17 2004
Return-Path: <lucene-user-return-10128-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 79877 invoked from network); 9 Sep 2004 13:08:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 13:08:17 -0000
Received: (qmail 34422 invoked by uid 500); 9 Sep 2004 13:06:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 34331 invoked by uid 500); 9 Sep 2004 13:06:52 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 34178 invoked by uid 99); 9 Sep 2004 13:06:50 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of rene.a.hackl@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 09 Sep 2004 06:06:48 -0700
Received: (qmail 24304 invoked by uid 0); 9 Sep 2004 13:06:44 -0000
Received: from 141.66.16.25 by www33.gmx.net with HTTP;
	Thu, 9 Sep 2004 15:06:44 +0200 (MEST)
Date: Thu, 9 Sep 2004 15:06:44 +0200 (MEST)
From: =?ISO-8859-1?Q?=22Ren=E9_Hackl=22?= <rene.a.hackl@gmx.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
MIME-Version: 1.0
References: <41404850.7050202@ifit.uni-klu.ac.at>
Subject: Handling user queries (Was: Re: MultiFieldQueryParser seems broken... Fix attached.)
X-Priority: 3 (Normal)
X-Authenticated: #24166002
Message-ID: <29707.1094735204@www33.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> is it a problem if the users will search "coffee OR tea" as a search 
> string in the case that MultifieldQueryParser is
> modifyed as Bill suggested?, and the default opperator is set to AND?

No. There's not a problem with the proposed correction to MFQP. MFQP should
work the way Bill suggested.

My babbling about coffee or tea was more aimed at Bill's referring to "darn
users started demanding" <nifty feature>. So this is a totally different
matter. In my experience, many users fall to everyday language traps, like
in: "What do you want to drink, coffee or tea?" The answer normally isn't
'yes' to both, is it?  

I have an app where in some cases I make subqueries for an initial
user-stated query. The aim is to come up with pointers to partial matching
docs. The background is, one ill-advised NOT can ruin a query. But this has
nothing to do with MFQP. Just random thoughts about making users happy even
when they are new to formulating queries :-)

Cheers,
Ren

-- 
NEU: Bis zu 10 GB Speicher fr e-mails & Dateien!
1 GB bereits bei GMX FreeMail http://www.gmx.net/de/go/mail


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10129-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 13:11:34 2004
Return-Path: <lucene-user-return-10129-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 82550 invoked from network); 9 Sep 2004 13:11:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 13:11:34 -0000
Received: (qmail 46227 invoked by uid 500); 9 Sep 2004 13:11:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 46074 invoked by uid 500); 9 Sep 2004 13:11:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 45790 invoked by uid 99); 9 Sep 2004 13:10:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [212.159.14.212] (HELO ptb-relay01.plus.net) (212.159.14.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Sep 2004 06:10:59 -0700
Received: from [80.229.194.52] (helo=joseph)
	 by ptb-relay01.plus.net with smtp (Exim) id 1C5OhS-000AYE-D3
	for lucene-user@jakarta.apache.org; Thu, 09 Sep 2004 13:10:54 +0000
Message-ID: <03a001c4966d$fd57d510$34c2e550@joseph>
From: "Pete Lewis" <pete@uptima.co.uk>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <000001c49640$c9b78f20$0a00a8c0@aadlaptop>
Subject: Re: Using MySpell iso the Snowball Analyzer
Date: Thu, 9 Sep 2004 14:07:41 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Aad

Use the stemmed result as what you index, but then also remember to stem the
query terms as well - you need to do the same on the way out as on the way
in.

We don't use MySpell but we do use our own stemmer in this way, as there are
many examples where Snowball falls down like:

caught -> caught instead of catch
buses -> buse instead of bus

and Snowball gets worse for none-English languages like Dutch....

Cheers
Pete

----- Original Message ----- 
From: "Aad Nales" <aad.nales@rotterdam-cs.com>
To: <lucene-user@jakarta.apache.org>
Sent: Thursday, September 09, 2004 8:44 AM
Subject: Using MySpell iso the Snowball Analyzer


> For an eductational customer we have been requested to add spell
> checking to queries that enter lucene. The MySpell classes of
> Pietschmann seem to makes this more than feasible. What i wonder if
> somebody else has done this before? Any tips, questions or remarks?
>
> MySpell is the successor of ISpell and is used as the spellchecker in
> OpenOffice. It excutes a stemming algoritm in combination with a
> dictionary. My second question is if any has extracted the stemming
> result to be used in an index?
>
> Thanks for any or all feedback,
> cheers,
> Aad
>
>
> --
> Aad Nales
> aad.nales@rotterdam-cs.com, +31-(0)6 54 207 340
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10130-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 13:18:54 2004
Return-Path: <lucene-user-return-10130-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 89291 invoked from network); 9 Sep 2004 13:18:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 13:18:53 -0000
Received: (qmail 56945 invoked by uid 500); 9 Sep 2004 13:18:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 56875 invoked by uid 500); 9 Sep 2004 13:18:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 56816 invoked by uid 99); 9 Sep 2004 13:18:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Sep 2004 06:17:58 -0700
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Thu, 9 Sep 2004 15:19:49 +0200
Message-ID: <41405875.30506@ifit.uni-klu.ac.at>
Date: Thu, 09 Sep 2004 15:19:49 +0200
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Handling user queries (Was: Re: MultiFieldQueryParser seems broken...
 Fix attached.)
References: <41404850.7050202@ifit.uni-klu.ac.at> <29707.1094735204@www33.gmx.net>
In-Reply-To: <29707.1094735204@www33.gmx.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-OriginalArrivalTime: 09 Sep 2004 13:19:49.0169 (UTC) FILETIME=[AED11210:01C4966F]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Ren Hackl wrote:

>>is it a problem if the users will search "coffee OR tea" as a search 
>>string in the case that MultifieldQueryParser is
>>modifyed as Bill suggested?, and the default opperator is set to AND?
>>    
>>
>
>No. There's not a problem with the proposed correction to MFQP. MFQP should
>work the way Bill suggested.
>
>My babbling about coffee or tea was more aimed at Bill's referring to "darn
>users started demanding" <nifty feature>. So this is a totally different
>matter. In my experience, many users fall to everyday language traps, like
>in: "What do you want to drink, coffee or tea?" The answer normally isn't
>'yes' to both, is it?  
>
>  
>
this problem may be solved if the users know the meaning of the 
following signs mean:
- + "" * ~
this will improve the results in a better way that our parsing is doing ...

>I have an app where in some cases I make subqueries for an initial
>user-stated query. The aim is to come up with pointers to partial matching
>docs. The background is, one ill-advised NOT can ruin a query. But this has
>nothing to do with MFQP. Just random thoughts about making users happy even
>when they are new to formulating queries :-)
>
>Cheers,
>Ren
>  
>







---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10131-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 13:36:43 2004
Return-Path: <lucene-user-return-10131-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 7941 invoked from network); 9 Sep 2004 13:36:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 13:36:43 -0000
Received: (qmail 11411 invoked by uid 500); 9 Sep 2004 13:35:58 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 11206 invoked by uid 500); 9 Sep 2004 13:35:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 11034 invoked by uid 99); 9 Sep 2004 13:35:53 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.155.196.65] (HELO web60802.mail.yahoo.com) (216.155.196.65)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 09 Sep 2004 06:35:49 -0700
Message-ID: <20040909133544.11810.qmail@web60802.mail.yahoo.com>
Received: from [61.16.175.2] by web60802.mail.yahoo.com via HTTP; Thu, 09 Sep 2004 14:35:44 BST
Date: Thu, 9 Sep 2004 14:35:44 +0100 (BST)
From: =?iso-8859-1?q?Honey=20George?= <honey_george@yahoo.com>
Subject: Re: Case sensitiveness and wildcard searches
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <24728.1094731494@www22.gmx.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks for links Ren,
 The mail is not exactly talking about my case because
the StandardAnalyzer which I use does lowercase the
input. So it is the same scenario as the FAQ entry.

-George

 --- "Ren_Hackl" <rene.a.hackl@gmx.de> wrote: 
> Hi George,
> 
> I'm not sure about v1.3, but you may want to take a
> look
> at
> 
>
http://issues.apache.org/eyebrowse/ReadMsg?listName=lucene-user@jakarta.apache.org&msgNo=9342
> 
> or
> 
>
http://issues.apache.org/eyebrowse/ReadMsg?listName=lucene-user@jakarta.apache.org&msgId=1806371
> 
> cheers,
> Ren
> 
> -- 
> NEU: Bis zu 10 GB Speicher fr e-mails & Dateien!
> 1 GB bereits bei GMX FreeMail
> http://www.gmx.net/de/go/mail
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> 
>  


	
	
		
___________________________________________________________ALL-NEW Yahoo! Messenger - all new features - even more fun!  http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10132-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 13:48:22 2004
Return-Path: <lucene-user-return-10132-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 16294 invoked from network); 9 Sep 2004 13:48:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 13:48:21 -0000
Received: (qmail 43972 invoked by uid 500); 9 Sep 2004 13:47:36 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 43771 invoked by uid 500); 9 Sep 2004 13:47:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 43556 invoked by uid 99); 9 Sep 2004 13:47:30 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=MSGID_FROM_MTA_HEADER,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.168.230.164] (HELO omr3.netsolmail.com) (216.168.230.164)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Sep 2004 06:47:28 -0700
Received: from ms6.netsolmail.com (IDENT:mirapoint@[216.168.230.179])
	by omr3.netsolmail.com (8.12.10/8.12.10) with ESMTP id i89DlHT8023187
	for <lucene-user@jakarta.apache.org>; Thu, 9 Sep 2004 09:47:23 -0400 (EDT)
Received: from ms6.netsolmail.com (localhost.netsolmail.com [127.0.0.1])
	by ms6.netsolmail.com (Mirapoint Messaging Server MOS 3.2.2-GA)
	with ESMTP id CCQ51851;
	Thu, 9 Sep 2004 09:47:15 -0400 (EDT)
From: <dhatcher@webtads.com>
Message-Id: <200409091347.CCQ51851@ms6.netsolmail.com>
Received: from 128.158.44.123
	by ms6.netsolmail.com (Mirapoint Messaging Server MOS 3.2.2-GA)
	with HTTP/1.1;
	Thu, 9 Sep 2004 09:47:15 -0400
Date: Thu, 9 Sep 2004 09:47:15 -0400
Subject: Existing Parsers
To: Lucene Users List <lucene-user@jakarta.apache.org>
X-Mailer: Webmail Mirapoint Direct 3.2.2-GA
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Anyone know of any reliable parsers out there for pdf word 
excel or powerpoint?

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10133-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 13:56:32 2004
Return-Path: <lucene-user-return-10133-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 22129 invoked from network); 9 Sep 2004 13:56:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 13:56:32 -0000
Received: (qmail 64426 invoked by uid 500); 9 Sep 2004 13:55:37 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 64394 invoked by uid 500); 9 Sep 2004 13:55:37 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 64368 invoked by uid 99); 9 Sep 2004 13:55:37 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of rene.a.hackl@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 09 Sep 2004 06:55:36 -0700
Received: (qmail 15502 invoked by uid 0); 9 Sep 2004 13:55:33 -0000
Received: from 141.66.16.25 by www50.gmx.net with HTTP;
	Thu, 9 Sep 2004 15:55:33 +0200 (MEST)
Date: Thu, 9 Sep 2004 15:55:33 +0200 (MEST)
From: =?ISO-8859-1?Q?=22Ren=E9_Hackl=22?= <rene.a.hackl@gmx.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
MIME-Version: 1.0
References: <20040909133544.11810.qmail@web60802.mail.yahoo.com>
Subject: Re: Case sensitiveness and wildcard searches
X-Priority: 3 (Normal)
X-Authenticated: #24166002
Message-ID: <4788.1094738133@www50.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

George,

The QueryParser does toLowerCase() on WildcardQueries by default. Hence
you'd need to follow Daniel's advice to use

 QueryParser's setLowercaseWildcardTerms(false) 

if you wanted IM* to stay IM*

Cheers,
Ren


-- 
Supergnstige DSL-Tarife + WLAN-Router fr 0,- EUR*
Jetzt zu GMX wechseln und sparen http://www.gmx.net/de/go/dsl


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10134-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 14:07:23 2004
Return-Path: <lucene-user-return-10134-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 30165 invoked from network); 9 Sep 2004 14:07:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 14:07:23 -0000
Received: (qmail 99931 invoked by uid 500); 9 Sep 2004 14:04:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 99901 invoked by uid 500); 9 Sep 2004 14:04:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 99876 invoked by uid 99); 9 Sep 2004 14:04:50 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [207.58.142.18] (HELO snowtide.com) (207.58.142.18)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Sep 2004 07:04:47 -0700
Received: from [127.0.0.1] (snowtide.com [127.0.0.1])
	by snowtide.com (8.12.8/8.12.8) with ESMTP id i89E6WAG030964
	for <lucene-user@jakarta.apache.org>; Thu, 9 Sep 2004 10:06:32 -0400
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <200409091347.CCQ51851@ms6.netsolmail.com>
References: <200409091347.CCQ51851@ms6.netsolmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <35297606-0269-11D9-A133-000A95B336F2@snowtide.com>
Content-Transfer-Encoding: 7bit
From: Chas Emerick <cemerick@snowtide.com>
Subject: Re: Existing Parsers
Date: Thu, 9 Sep 2004 10:04:47 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

There are a number of libraries for Java that provide PDF text 
extraction functionality.  A pretty comprehensive list is available at 
< http://www.geocities.com/marcoschmidt.geo/java-libraries-pdf.html >.  
I'm obviously biased towards recommending our solution, PDFTextStream < 
http://snowtide.com/home/PDFTextStream/ >; it's the fastest thing out 
there for Java, and it provides a very easy-to-use Lucene integration 
module that will have you up and running in no time < 
http://snowtide.com/home/PDFTextStream/techtips/easy_lucene_integration 
 >.

For office documents, just about the only game in town that I know of 
is the Jakarta POI project < http://jakarta.apache.org/poi/ >.  It's 
been quite a while since I've touched it, but it's definitely the best 
place to start.

Chas Emerick   |   cemerick@snowtide.com

PDFTextStream: fast PDF text extraction for Java apps and Lucene
http://snowtide.com/home/PDFTextStream/

On Sep 9, 2004, at 9:47 AM, <dhatcher@webtads.com> wrote:

> Anyone know of any reliable parsers out there for pdf word
> excel or powerpoint?


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10135-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 14:10:47 2004
Return-Path: <lucene-user-return-10135-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 32945 invoked from network); 9 Sep 2004 14:10:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 14:10:47 -0000
Received: (qmail 6587 invoked by uid 500); 9 Sep 2004 14:06:31 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 6134 invoked by uid 500); 9 Sep 2004 14:06:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 5863 invoked by uid 99); 9 Sep 2004 14:06:21 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.155.196.68] (HELO web60805.mail.yahoo.com) (216.155.196.68)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 09 Sep 2004 07:06:20 -0700
Message-ID: <20040909140611.56512.qmail@web60805.mail.yahoo.com>
Received: from [61.16.175.2] by web60805.mail.yahoo.com via HTTP; Thu, 09 Sep 2004 15:06:11 BST
Date: Thu, 9 Sep 2004 15:06:11 +0100 (BST)
From: =?iso-8859-1?q?Honey=20George?= <honey_george@yahoo.com>
Subject: Re: Existing Parsers
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <200409091347.CCQ51851@ms6.netsolmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,
  I know some of them.
1. PDF
 + http://www.pdfbox.org/
 + http://www.foolabs.com/xpdf/download.html
   - I am using this and found good. It even supports 
     various languages.
2. word
  + http://sourceforge.net/projects/wvware
3. excel
  + http://www.jguru.com/faq/view.jsp?EID=1074230

-George
 --- dhatcher@webtads.com wrote: 
> Anyone know of any reliable parsers out there for
> pdf word 
> excel or powerpoint?
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> 
>  


	
	
		
___________________________________________________________ALL-NEW Yahoo! Messenger - all new features - even more fun!  http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10136-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 14:17:40 2004
Return-Path: <lucene-user-return-10136-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 39391 invoked from network); 9 Sep 2004 14:17:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 14:17:40 -0000
Received: (qmail 29718 invoked by uid 500); 9 Sep 2004 14:13:06 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 29620 invoked by uid 500); 9 Sep 2004 14:13:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 29569 invoked by uid 99); 9 Sep 2004 14:13:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [81.80.239.198] (HELO outbound1.sopragroup.com) (81.80.239.198)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Sep 2004 07:12:59 -0700
Received: by outbound1.sopragroup.com (8.12.10/8.12.10/outbound-A02) with ESMTP id i89ECrKp031686
          for <lucene-user@jakarta.apache.org>; Thu, 9 Sep 2004 16:12:54 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6556.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Existing Parsers
Date: Thu, 9 Sep 2004 16:12:53 +0200
Message-ID: <5933531F07A5144E9E53E1AA45257E4BF6482B@wexchbe03.ancy.fr.sopra>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Existing Parsers
Thread-Index: AcSWc6eb4OZZfKt1Q/CbHht5+N1hNgAA1KRA
From: "Cocula Remi" <rcocula@sopragroup.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-OriginalArrivalTime: 09 Sep 2004 14:21:35.0812 (UTC) FILETIME=[5025E840:01C49678]
X-Scanned-By: MIMEDefang 2.38
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

For Word see the tm-extractor at www.text-mining.org (based on POI). =
Pretty simple to use.


-----Message d'origine-----
De : dhatcher@webtads.com [mailto:dhatcher@webtads.com]
Envoy=E9 : jeudi 9 septembre 2004 15:47
=C0 : Lucene Users List
Objet : Existing Parsers


Anyone know of any reliable parsers out there for pdf word=20
excel or powerpoint?

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10137-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 15:24:04 2004
Return-Path: <lucene-user-return-10137-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 1803 invoked from network); 9 Sep 2004 15:24:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 15:24:04 -0000
Received: (qmail 86441 invoked by uid 500); 9 Sep 2004 15:23:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 86396 invoked by uid 500); 9 Sep 2004 15:23:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 86377 invoked by uid 99); 9 Sep 2004 15:23:55 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [212.74.15.68] (HELO semantico.com) (212.74.15.68)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Sep 2004 08:23:54 -0700
Received: from spampd.localdomain (localhost [127.0.0.1])
	by localhost.semantico.com (Postfix) with ESMTP id 98C5532005A
	for <lucene-user@jakarta.apache.org>; Thu,  9 Sep 2004 16:23:51 +0100 (BST)
Received: from semantico.com (Annatto.dyn.rp.lan [192.168.1.210])
	by semantico.com (Postfix) with ESMTP id 2F20232005A
	for <lucene-user@jakarta.apache.org>; Thu,  9 Sep 2004 16:23:51 +0100 (BST)
Message-ID: <41407584.9080807@semantico.com>
Date: Thu, 09 Sep 2004 16:23:48 +0100
From: Peter Pimley <ppimley@semantico.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.6) Gecko/20040113
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: (n00b)  Meaning of Hits.id (int)
References: <20040909114114.38013.qmail@web60807.mail.yahoo.com>	<4140439E.7000206@semantico.com> <16704.19438.19552.559777@tanto-xipolis.de>
In-Reply-To: <16704.19438.19552.559777@tanto-xipolis.de>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Checker-Version: SpamAssassin 2.63 (2004-01-11) on paprika.rp.lan
X-Spam-Status: No, hits=-100.0 required=5.0 tests=USER_IN_WHITELIST 
	autolearn=no version=2.63
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Oh, it's that simple. :)
Thanks for that!

Peter


Morus Walter wrote:

>It's lucenes internal id or document number which allows you to access
>the document and its stored fields.
>
>See 
>IndexSearcher.doc(int i)
>or
>IndexReader.document(int n)
>
>The docs just don't name the parameter 'id'.
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10138-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 16:01:48 2004
Return-Path: <lucene-user-return-10138-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 29020 invoked from network); 9 Sep 2004 16:01:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 16:01:45 -0000
Received: (qmail 77481 invoked by uid 500); 9 Sep 2004 16:01:28 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 77296 invoked by uid 500); 9 Sep 2004 16:01:26 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 77039 invoked by uid 99); 9 Sep 2004 16:01:23 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Sep 2004 09:01:21 -0700
Received: (qmail 16024 invoked by uid 532); 9 Sep 2004 15:58:53 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.16011 secs); 09 Sep 2004 15:58:53 -0000
Received: from unknown (HELO tropo.com) (127.0.0.1)
  by 0 with SMTP; 9 Sep 2004 15:58:53 -0000
Message-ID: <41407E48.20401@tropo.com>
Date: Thu, 09 Sep 2004 09:01:12 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7b) Gecko/20040316
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: combining open office spellchecker with Lucene
References: <000001c49572$72cacc00$0a00a8c0@aadlaptop>
In-Reply-To: <000001c49572$72cacc00$0a00a8c0@aadlaptop>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Aad Nales wrote:

> Hi All,
> 
> Before I start reinventing wheels I would like to do a short check to
> see if anybody else has already tried this. A customer has requested us
> to look into the possibility to perform a spell check on queries. So far
> the most promising way of doing this seems to be to create an Analyzer
> based on the spellchecker of OpenOffice. My question is: "has anybody
> tried this before?" 

I did a WordNet/synonym query expander. Search for "WordNet" on this 
page. Of interest is it stores the Wordnet info in a separate Lucene 
index as at its essence all an index is is a database.

http://jakarta.apache.org/lucene/docs/lucene-sandbox/

Also, another variation, is to instead spell based on what terms are in 
the index, not what an external dictionary says. I've done this on my 
experimental site searchmorph.com in a dumb/inefficient way. Here's an 
example:

http://www.searchmorph.com/kat/search.jsp?s=recursivz

After you click above it takes ~10sec as it produces terms close to 
"recursivz". Opps - looking at the output, it looks like the same word 
is suggest multiple times - ouch - I must be considering all fields, not 
just the contents field. TBD is fixing this. (or no wonder it's so slow :))

I can/should send the code out. The logic is that for any terms in a 
query that have zero matches, go thru all the terms(!) and calculate the 
Levenshtein string distance, and return the best matches. A more 
intelligent way of doing this is to instead look for terms that also 
match on the 1st "n" (prob 3) chars.




> 
> Cheers,
> Aad
> 
> 
> --
> Aad Nales
> aad.nales@rotterdam-cs.com, +31-(0)6 54 207 340 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10139-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 16:15:31 2004
Return-Path: <lucene-user-return-10139-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 38146 invoked from network); 9 Sep 2004 16:15:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 16:15:31 -0000
Received: (qmail 19158 invoked by uid 500); 9 Sep 2004 16:15:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 19044 invoked by uid 500); 9 Sep 2004 16:15:10 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 19009 invoked by uid 99); 9 Sep 2004 16:15:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Sep 2004 09:15:08 -0700
Received: from [192.168.0.254] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id i89GF7425580
	for <lucene-user@jakarta.apache.org>; Thu, 9 Sep 2004 11:15:07 -0500
Message-ID: <4140818C.9010305@getopt.org>
Date: Thu, 09 Sep 2004 18:15:08 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040803
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: combining open office spellchecker with Lucene
References: <000001c49572$72cacc00$0a00a8c0@aadlaptop> <41407E48.20401@tropo.com>
In-Reply-To: <41407E48.20401@tropo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

David Spencer wrote:
> 
> I can/should send the code out. The logic is that for any terms in a 
> query that have zero matches, go thru all the terms(!) and calculate the 
> Levenshtein string distance, and return the best matches. A more 
> intelligent way of doing this is to instead look for terms that also 
> match on the 1st "n" (prob 3) chars.

...or prepare in advance a fast lookup index - split all existing terms 
to bi- or trigrams, create a separate lookup index, and then simply for 
each term ask a phrase query (phrase = all n-grams from an input term), 
with a slop > 0, to get similar existing terms. This should be fast, and 
you could provide a "did you mean" function too...

-- 
Best regards,
Andrzej Bialecki

-------------------------------------------------
Software Architect, System Integration Specialist
CEN/ISSS EC Workshop, ECIMF project chair
EU FP6 E-Commerce Expert/Evaluator
-------------------------------------------------
FreeBSD developer (http://www.freebsd.org)


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10140-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 16:51:16 2004
Return-Path: <lucene-user-return-10140-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 53187 invoked from network); 9 Sep 2004 16:51:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 16:51:15 -0000
Received: (qmail 7582 invoked by uid 500); 9 Sep 2004 16:51:07 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 7541 invoked by uid 500); 9 Sep 2004 16:51:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 7526 invoked by uid 99); 9 Sep 2004 16:51:06 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Sep 2004 09:51:05 -0700
Received: (qmail 18355 invoked by uid 532); 9 Sep 2004 16:48:40 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.202191 secs); 09 Sep 2004 16:48:40 -0000
Received: from unknown (HELO tropo.com) (127.0.0.1)
  by 0 with SMTP; 9 Sep 2004 16:48:40 -0000
Message-ID: <414089F6.8000804@tropo.com>
Date: Thu, 09 Sep 2004 09:51:02 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7b) Gecko/20040316
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: combining open office spellchecker with Lucene
References: <000001c49572$72cacc00$0a00a8c0@aadlaptop> <41407E48.20401@tropo.com> <4140818C.9010305@getopt.org>
In-Reply-To: <4140818C.9010305@getopt.org>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Andrzej Bialecki wrote:

> David Spencer wrote:
> 
>>
>> I can/should send the code out. The logic is that for any terms in a 
>> query that have zero matches, go thru all the terms(!) and calculate 
>> the Levenshtein string distance, and return the best matches. A more 
>> intelligent way of doing this is to instead look for terms that also 
>> match on the 1st "n" (prob 3) chars.
> 
> 
> ...or prepare in advance a fast lookup index - split all existing terms 
> to bi- or trigrams, create a separate lookup index, and then simply for 
> each term ask a phrase query (phrase = all n-grams from an input term), 
> with a slop > 0, to get similar existing terms. This should be fast, and 
> you could provide a "did you mean" function too...

Sounds interesting/fun but I'm not sure if I'm following exactly.

Let's talk thru the trigram index case.
Are you saying that for every trigram in every word there will be a 
mapping of trigram -> term?
Thus if "recursive" is in the (orig) index then we'd create entries like:

rec -> recursive
ecu -> ...
cur -> ...
urs -> ...
rsi -> ...
siv -> ...
ive -> ...

And so on for all terms in the orig index.
OK fine.
But now the user types in a query like "recursivz".
What's the algorithm - obviously I guess take all trigrams in the bad 
term and go thru the trigram-index, but there will be lots of 
suggestions. Now what - use string distance to score them? I guess that 
makes sense - plz confirm if I understand.... And so I guess the point 
here is we precalculate the trigram->term mappings to avoid an expensive 
traversal of all terms in an index, but we still use string distance as 
a 2nd pass (and prob should force the matches to always match on the 1st 
   n (3) chars using the heuristic that people can usually start the 
spelling a word  corrrectly).


> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10141-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 16:54:51 2004
Return-Path: <lucene-user-return-10141-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 54766 invoked from network); 9 Sep 2004 16:54:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 16:54:51 -0000
Received: (qmail 17814 invoked by uid 500); 9 Sep 2004 16:54:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 17734 invoked by uid 500); 9 Sep 2004 16:54:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 17522 invoked by uid 99); 9 Sep 2004 16:54:26 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Sep 2004 09:54:26 -0700
Received: (qmail 81276 invoked by uid 89); 9 Sep 2004 16:54:22 -0000
Received: from unknown (HELO ?192.168.168.81?) (postmaster@cottrell-cutting.net@24.5.163.156)
  by londo.swishmail.com with AES256-SHA encrypted SMTP; 9 Sep 2004 16:54:22 -0000
Message-ID: <41408A58.9010103@apache.org>
Date: Thu, 09 Sep 2004 09:52:40 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.2) Gecko/20040806
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: MultiFieldQueryParser seems broken... Fix attached.
References: <04Sep8.170111pdt."58612"@synergy1.parc.xerox.com>
In-Reply-To: <04Sep8.170111pdt."58612"@synergy1.parc.xerox.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Bill Janssen wrote:
> I'd think that if a user specified a query "cutting lucene", with an
> implicit AND and the default fields "title" and "author", they'd
> expect to see a match in which both "cutting" and "lucene" appears.  That is,
> 
> (title:cutting OR author:cutting) AND (title:lucene OR author:lucene)

Your proposal is certainly an improvement.

It's interesting to note that in Nutch I implemented something 
different.  There, a search for "cutting lucene" expands to something like:

  (+url:cutting^4.0 +url:lucene^4.0 +url:"cutting lucene"~2147483647^4.0)
  (+anchor:cutting^2.0 +anchor:lucene^2.0 +anchor:"cutting lucene"~4^2.0)
  (+content:cutting +content:lucene +content:"cutting lucene"~2147483647)

So a page with "cutting" in the body and "lucene" in anchor text won't 
match: the body, anchor or url must contain all query terms.  A single 
authority (content, url or anchor) must vouch for all attributes.

Note that Nutch also boosts matches where the terms are close together. 
  Using "~2147483647" permits them to be anywhere in the document, but 
boosts more when they're closer and in-order.  (The "~4" in anchor 
matches is to prohibit matches across different anchors.  Each anchor is 
separated by a Token.positionIncrement() of 4.)

But perhaps this is not a feature.  Perhaps Nutch should instead expand 
this to:

  +(url:cutting^4.0 anchor:cutting^2.0 content:cutting)
  +(url:lucene^4.0 anchor:lucene^2.0 content:lucene)
  url:"cutting lucene"~2147483647^4.0
  anchor:"cutting lucene"~4^2.0
  content:"cutting lucene"~2147483647

That would, e.g., permit a match with only "lucene" in an anchor and 
"cutting" in the content, which the earlier formulation would not.

Can anyone tell whether Google has this requirement?  I have not been 
able to construct a two-word query that returns a page without both 
words in either the content, the title, the url or in a single anchor. 
Can you?

If you're interested, the Nutch query expansion code in question is:

http://cvs.sourceforge.net/viewcvs.py/nutch/nutch/src/plugin/query-basic/src/java/net/nutch/searcher/basic/BasicQueryFilter.java?view=markup

To play with it you can download Nutch and use the command:

   bin/nutch net.nutch.searcher.Query

>>http://issues.apache.org/eyebrowse/ReadMsg?listName=lucene-user@jakarta.apache.org&msgId=1798116
> 
> 
> Yes, the approach there is similar.  I attempted to complete the
> solution and provide a working replacement for MultiFieldQueryParser.

But, inspired by that message, couldn't MultiFieldQueryParser just be a 
subclass of QueryParser that overrides getFieldQuery()?

Cheers,

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10142-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 16:55:02 2004
Return-Path: <lucene-user-return-10142-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 54899 invoked from network); 9 Sep 2004 16:55:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 16:55:02 -0000
Received: (qmail 19205 invoked by uid 500); 9 Sep 2004 16:54:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 19148 invoked by uid 500); 9 Sep 2004 16:54:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 19000 invoked by uid 99); 9 Sep 2004 16:54:46 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Sep 2004 09:54:46 -0700
Received: (qmail 18480 invoked by uid 532); 9 Sep 2004 16:52:20 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.152199 secs); 09 Sep 2004 16:52:20 -0000
Received: from unknown (HELO tropo.com) (127.0.0.1)
  by 0 with SMTP; 9 Sep 2004 16:52:20 -0000
Message-ID: <41408AD3.4050204@tropo.com>
Date: Thu, 09 Sep 2004 09:54:43 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7b) Gecko/20040316
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Existing Parsers
References: <20040909140611.56512.qmail@web60805.mail.yahoo.com>
In-Reply-To: <20040909140611.56512.qmail@web60805.mail.yahoo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Honey George wrote:

> Hi,
>   I know some of them.
> 1. PDF
>  + http://www.pdfbox.org/
>  + http://www.foolabs.com/xpdf/download.html
>    - I am using this and found good. It even supports 

My dated experience from 2 years ago was that (the evil, native code) 
foolabs pdf parser was the best, but obviously things could have changed.

http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg02912.html

>      various languages.
> 2. word
>   + http://sourceforge.net/projects/wvware
> 3. excel
>   + http://www.jguru.com/faq/view.jsp?EID=1074230
> 
> -George
>  --- dhatcher@webtads.com wrote: 
> 
>>Anyone know of any reliable parsers out there for
>>pdf word 
>>excel or powerpoint?

For powerpoint it's not easy. I've been using this and it has worked 
fine util recently and seems to sometimes go into an infinite loop now 
on some recent PPTs. Native code and a package that seems to be dormant 
but to some extent it does the job. The file "ppthtml" does the work.

http://chicago.sourceforge.net/xlhtml

>>
>>
> 
> ---------------------------------------------------------------------
> 
>>To unsubscribe, e-mail:
>>lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail:
>>lucene-user-help@jakarta.apache.org
>>
>> 
> 
> 
> 
> 	
> 	
> 		
> ___________________________________________________________ALL-NEW Yahoo! Messenger - all new features - even more fun!  http://uk.messenger.yahoo.com
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10143-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 17:05:32 2004
Return-Path: <lucene-user-return-10143-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 59563 invoked from network); 9 Sep 2004 17:05:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 17:05:32 -0000
Received: (qmail 43944 invoked by uid 500); 9 Sep 2004 17:04:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 43880 invoked by uid 500); 9 Sep 2004 17:04:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 43701 invoked by uid 99); 9 Sep 2004 17:04:50 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Sep 2004 10:04:49 -0700
Received: (qmail 93477 invoked by uid 89); 9 Sep 2004 17:04:47 -0000
Received: from unknown (HELO ?192.168.168.81?) (postmaster@cottrell-cutting.net@24.5.163.156)
  by londo.swishmail.com with AES256-SHA encrypted SMTP; 9 Sep 2004 17:04:47 -0000
Message-ID: <41408CCA.5030804@apache.org>
Date: Thu, 09 Sep 2004 10:03:06 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.2) Gecko/20040806
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: combining open office spellchecker with Lucene
References: <000001c49572$72cacc00$0a00a8c0@aadlaptop>
In-Reply-To: <000001c49572$72cacc00$0a00a8c0@aadlaptop>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Aad Nales wrote:
> Before I start reinventing wheels I would like to do a short check to
> see if anybody else has already tried this. A customer has requested us
> to look into the possibility to perform a spell check on queries. So far
> the most promising way of doing this seems to be to create an Analyzer
> based on the spellchecker of OpenOffice. My question is: "has anybody
> tried this before?" 

Note that a spell checker used with a search engine should use 
collection frequency information.  That's to say, only "corrections" 
which are more frequent in the collection than what the user entered 
should be displayed.  Frequency information can also be used when 
constructing the checker.  For example, one need never consider 
proposing terms that occur in very few documents.  And one should not 
try correction at all for terms which occur in a large proportion of the 
collection.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10144-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 17:26:02 2004
Return-Path: <lucene-user-return-10144-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 67031 invoked from network); 9 Sep 2004 17:26:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 17:26:01 -0000
Received: (qmail 86046 invoked by uid 500); 9 Sep 2004 17:25:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 85929 invoked by uid 500); 9 Sep 2004 17:25:47 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 85906 invoked by uid 99); 9 Sep 2004 17:25:46 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.25.134.83] (HELO mailout07.sul.t-online.com) (194.25.134.83)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Sep 2004 10:25:43 -0700
Received: from fwd05.aul.t-online.de 
	by mailout07.sul.t-online.com with smtp 
	id 1C5Sg0-0007Rj-07; Thu, 09 Sep 2004 19:25:40 +0200
Received: from p54802EF3.dip.t-dialin.net (GQQE8wZTgeRg6OxXxxNjsW1sgdH20nbGyW9iJFlimbQ0G5PoGXl2ZL@[84.128.46.243]) by fmrl05.sul.t-online.com
	with esmtp id 1C5Sfw-19DwP20; Thu, 9 Sep 2004 19:25:36 +0200
From: Daniel Naber <daniel.naber@t-online.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: MultiFieldQueryParser seems broken... Fix attached.
Date: Thu, 9 Sep 2004 19:28:09 +0200
User-Agent: KMail/1.7
References: <04Sep8.170111pdt."58612"@synergy1.parc.xerox.com> <41408A58.9010103@apache.org>
In-Reply-To: <41408A58.9010103@apache.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200409091928.09837@danielnaber.de>
X-ID: GQQE8wZTgeRg6OxXxxNjsW1sgdH20nbGyW9iJFlimbQ0G5PoGXl2ZL@t-dialin.net
X-TOI-MSGID: 113554e5-d6e6-41f5-b72b-c11bf03e5458
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Thursday 09 September 2004 18:52, Doug Cutting wrote:

> I have not been
> able to construct a two-word query that returns a page without both
> words in either the content, the title, the url or in a single anchor.
> Can you?

Like this one?

konvens leitseite 

Leitseite is only in the title of the first match (www.gldv.org), konvens 
is only in the body.

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10145-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 17:44:41 2004
Return-Path: <lucene-user-return-10145-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 75073 invoked from network); 9 Sep 2004 17:44:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 17:44:41 -0000
Received: (qmail 19472 invoked by uid 500); 9 Sep 2004 17:44:33 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 19437 invoked by uid 500); 9 Sep 2004 17:44:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 19422 invoked by uid 99); 9 Sep 2004 17:44:33 -0000
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [203.199.122.39] (HELO web8309.mail.in.yahoo.com) (203.199.122.39)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 09 Sep 2004 10:44:29 -0700
Message-ID: <20040909174426.14037.qmail@web8309.mail.in.yahoo.com>
Received: from [61.246.177.200] by web8309.mail.in.yahoo.com via HTTP; Thu, 09 Sep 2004 18:44:26 BST
Date: Thu, 9 Sep 2004 18:44:26 +0100 (BST)
From: =?iso-8859-1?q?Mr=20dharmanand=20singh?= <dharmanands@yahoo.co.in>
Subject: Lucene working example.
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I used lucene in one of my projects which required
searching content on web pages. I wrote my own jsp and
html parser that handled major cases and it
successfully parsed almost all my required web pages.
I also came up with an example implementation
(http://dharmanand.tarundua.net/lucene_eg.war) as I
didnt find very good working examples on the internet.

________________________________________________________________________
Yahoo! India Matrimony: Find your life partner online
Go to: http://yahoo.shaadi.com/india-matrimony

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10146-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 17:47:49 2004
Return-Path: <lucene-user-return-10146-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 76578 invoked from network); 9 Sep 2004 17:47:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 17:47:48 -0000
Received: (qmail 24362 invoked by uid 500); 9 Sep 2004 17:47:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 24341 invoked by uid 500); 9 Sep 2004 17:47:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 24328 invoked by uid 99); 9 Sep 2004 17:47:41 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [193.103.133.77] (HELO hh-mail-2.gauss.de) (193.103.133.77)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Sep 2004 10:47:41 -0700
Received: from [172.20.76.5] ([172.20.76.5]) by
          hh-mail-2.gauss.de (Netscape Messaging Server 4.15) with ESMTP
          id I3SC3D00.C54 for <lucene-user@jakarta.apache.org>; Thu, 9 Sep
          2004 19:47:37 +0200 
Message-ID: <41409738.2040906@gaussvip.com>
Date: Thu, 09 Sep 2004 19:47:36 +0200
From: "Daniel Taurat" <daniel.taurat@gaussvip.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; de-AT; rv:1.7.2) Gecko/20040803
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: lucene-user@jakarta.apache.org
Subject: Out of memory in lucene 1.4.1 when re-indexing  large number of documents
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,
I am facing an out of memory problem using  Lucene 1.4.1.
I am  re-indexing a pretty large number ( about 30.000 ) of documents.
I identify old instances by checking for a unique ID field, delete those 
with indexReader.delete() and add the new document version.

HeapDump says I am having  a huge number of HashMaps with 
SegmentTermEnum objects (256891) .

IndexReader is closed directly after delete(term)...

Seems to me that this did not happen with version1.2 (same number of 
objects and  all...).
Has anyone an idea how I get  these "hanging"  objects? Or what to do in 
order to avoid them?

Thanks
Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10147-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 18:10:55 2004
Return-Path: <lucene-user-return-10147-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 90741 invoked from network); 9 Sep 2004 18:10:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 18:10:55 -0000
Received: (qmail 60726 invoked by uid 500); 9 Sep 2004 18:10:17 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 60558 invoked by uid 500); 9 Sep 2004 18:10:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 60431 invoked by uid 99); 9 Sep 2004 18:10:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Sep 2004 11:10:09 -0700
Received: (qmail 23137 invoked by uid 532); 9 Sep 2004 18:07:43 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.021781 secs); 09 Sep 2004 18:07:43 -0000
Received: from unknown (HELO ?10.0.0.157?) (127.0.0.1)
  by 0 with SMTP; 9 Sep 2004 18:07:43 -0000
Message-ID: <41409C7D.3090400@tropo.com>
Date: Thu, 09 Sep 2004 11:10:05 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.1) Gecko/20040707
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: combining open office spellchecker with Lucene
References: <000001c49572$72cacc00$0a00a8c0@aadlaptop> <41408CCA.5030804@apache.org>
In-Reply-To: <41408CCA.5030804@apache.org>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Doug Cutting wrote:

> Aad Nales wrote:
> 
>> Before I start reinventing wheels I would like to do a short check to
>> see if anybody else has already tried this. A customer has requested us
>> to look into the possibility to perform a spell check on queries. So far
>> the most promising way of doing this seems to be to create an Analyzer
>> based on the spellchecker of OpenOffice. My question is: "has anybody
>> tried this before?" 
> 
> 
> Note that a spell checker used with a search engine should use 
> collection frequency information.  That's to say, only "corrections" 
> which are more frequent in the collection than what the user entered 
> should be displayed.  Frequency information can also be used when 
> constructing the checker.  For example, one need never consider 
> proposing terms that occur in very few documents.  And one should not 
> try correction at all for terms which occur in a large proportion of the 
> collection.

Good heuristics but are there any more precise, standard guidelines as 
to how to balance or combine what I think are the following possible 
criteria in suggesting a better choice:

- ignore(penalize?) terms that are rare
- ignore(penalize?) terms that are common
- terms that are closer (string distance) to the term entered are better
- terms that start w/ the same 'n' chars as the users term are better





> 
> Doug
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10148-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 19:05:53 2004
Return-Path: <lucene-user-return-10148-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 27024 invoked from network); 9 Sep 2004 19:05:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 19:05:53 -0000
Received: (qmail 46297 invoked by uid 500); 9 Sep 2004 19:05:45 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 46146 invoked by uid 500); 9 Sep 2004 19:05:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 46133 invoked by uid 99); 9 Sep 2004 19:05:44 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of fraschetti@gmail.com designates 64.233.170.200 as permitted sender)
Received: from [64.233.170.200] (HELO mproxy.gmail.com) (64.233.170.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Sep 2004 12:05:42 -0700
Received: by mproxy.gmail.com with SMTP id 78so100361rnk
        for <lucene-user@jakarta.apache.org>; Thu, 09 Sep 2004 12:05:39 -0700 (PDT)
Received: by 10.38.89.39 with SMTP id m39mr38751rnb;
        Thu, 09 Sep 2004 12:05:39 -0700 (PDT)
Received: by 10.38.171.70 with HTTP; Thu, 9 Sep 2004 12:05:39 -0700 (PDT)
Message-ID: <cbdebdf804090912054f9aaa6c@mail.gmail.com>
Date: Thu, 9 Sep 2004 12:05:39 -0700
From: Chris Fraschetti <fraschetti@gmail.com>
Reply-To: Chris Fraschetti <fraschetti@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Existing Parsers
In-Reply-To: <41408AD3.4050204@tropo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <20040909140611.56512.qmail@web60805.mail.yahoo.com>
	 <41408AD3.4050204@tropo.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Some of the tools listed use cmd line execs to output a doc of some
sort to text and then I grab the text and add it to a lucene doc, etc
etc...

Any stats on the scalability of that? In large scale applications, I'm
assuming this will cause some serious issues... anyone have any input
on this?

-Chris Fraschetti


On Thu, 09 Sep 2004 09:54:43 -0700, David Spencer
<dave-lucene-user@tropo.com> wrote:
> Honey George wrote:
> 
> > Hi,
> >   I know some of them.
> > 1. PDF
> >  + http://www.pdfbox.org/
> >  + http://www.foolabs.com/xpdf/download.html
> >    - I am using this and found good. It even supports
> 
> My dated experience from 2 years ago was that (the evil, native code)
> foolabs pdf parser was the best, but obviously things could have changed.
> 
> http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg02912.html
> 
> >      various languages.
> > 2. word
> >   + http://sourceforge.net/projects/wvware
> > 3. excel
> >   + http://www.jguru.com/faq/view.jsp?EID=1074230
> >
> > -George
> >  --- dhatcher@webtads.com wrote:
> >
> >>Anyone know of any reliable parsers out there for
> >>pdf word
> >>excel or powerpoint?
> 
> For powerpoint it's not easy. I've been using this and it has worked
> fine util recently and seems to sometimes go into an infinite loop now
> on some recent PPTs. Native code and a package that seems to be dormant
> but to some extent it does the job. The file "ppthtml" does the work.
> 
> http://chicago.sourceforge.net/xlhtml
> 
> 
> 
> >>
> >>
> >
> > ---------------------------------------------------------------------
> >
> >>To unsubscribe, e-mail:
> >>lucene-user-unsubscribe@jakarta.apache.org
> >>For additional commands, e-mail:
> >>lucene-user-help@jakarta.apache.org
> >>
> >>
> >
> >
> >
> >
> >
> >
> > ___________________________________________________________ALL-NEW Yahoo! Messenger - all new features - even more fun!  http://uk.messenger.yahoo.com
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10149-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 19:29:04 2004
Return-Path: <lucene-user-return-10149-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 44788 invoked from network); 9 Sep 2004 19:29:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 19:29:04 -0000
Received: (qmail 79823 invoked by uid 500); 9 Sep 2004 19:28:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 79759 invoked by uid 500); 9 Sep 2004 19:28:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 79745 invoked by uid 99); 9 Sep 2004 19:28:57 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.25.134.19] (HELO mailout06.sul.t-online.com) (194.25.134.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Sep 2004 12:28:55 -0700
Received: from fwd11.aul.t-online.de 
	by mailout06.sul.t-online.com with smtp 
	id 1C5UbF-0005lT-01; Thu, 09 Sep 2004 21:28:53 +0200
Received: from pD9EBE442.dip.t-dialin.net (rXdeJOZ68e+LV5yCritsy6w55-nwE3nZeEV7c8xO5meR4RNfONw-w7@[217.235.228.66]) by fmrl11.sul.t-online.com
	with esmtp id 1C5Ub0-0UeOzw0; Thu, 9 Sep 2004 21:28:38 +0200
From: Daniel Naber <daniel.naber@t-online.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Out of memory in lucene 1.4.1 when re-indexing  large number of documents
Date: Thu, 9 Sep 2004 21:30:51 +0200
User-Agent: KMail/1.7
References: <41409738.2040906@gaussvip.com>
In-Reply-To: <41409738.2040906@gaussvip.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200409092130.51772@danielnaber.de>
X-ID: rXdeJOZ68e+LV5yCritsy6w55-nwE3nZeEV7c8xO5meR4RNfONw-w7@t-dialin.net
X-TOI-MSGID: 631fad21-eae5-47ed-87e0-66438ab8cadd
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Thursday 09 September 2004 19:47, Daniel Taurat wrote:

> I am facing an out of memory problem using =C2=A0Lucene 1.4.1.

Could you try with a recent CVS version? There has been a fix about files=20
not being deleted after 1.4.1. Not sure if that could cause the problems=20
you're experiencing.

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10150-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 19:49:41 2004
Return-Path: <lucene-user-return-10150-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 51936 invoked from network); 9 Sep 2004 19:49:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 19:49:41 -0000
Received: (qmail 9625 invoked by uid 500); 9 Sep 2004 19:49:28 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 9591 invoked by uid 500); 9 Sep 2004 19:49:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 9566 invoked by uid 99); 9 Sep 2004 19:49:28 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 09 Sep 2004 12:49:26 -0700
Received: from synergy1.parc.xerox.com ([13.1.101.60]) by alpha.xerox.com with SMTP id <147705(2)>; Thu, 9 Sep 2004 12:49:12 PDT
Received: from parc.com ([127.0.0.1]) by synergy1.parc.xerox.com with SMTP id <58617>; Thu, 9 Sep 2004 12:49:02 PDT
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: MultiFieldQueryParser seems broken... Fix attached. 
In-Reply-To: Your message of "Thu, 09 Sep 2004 05:10:56 PDT."
             <41404850.7050202@ifit.uni-klu.ac.at> 
Date: Thu, 9 Sep 2004 12:48:55 PDT
From: Bill Janssen <janssen@parc.com>
Message-Id: <04Sep9.124902pdt."58617"@synergy1.parc.xerox.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> is it a problem if the users will search "coffee OR tea" as a search 
> string in the case that MultifieldQueryParser is
> modifyed as Bill suggested?, and the default opperator is set to AND?
> 

Here's what you get (which is correct):

% java -classpath /usr/local/lib/lucene-1.4.1.jar:. \
       -DSearchText.QueryDefaultOperator=AND \
       -DSearchTest.QueryParser=new SearchTest 'coffee OR tea'
query is (title:coffee authors:coffee contents:coffee) (title:tea authors:tea contents:tea)
%

Bill

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10151-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 09 19:54:15 2004
Return-Path: <lucene-user-return-10151-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 54044 invoked from network); 9 Sep 2004 19:54:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Sep 2004 19:54:15 -0000
Received: (qmail 17149 invoked by uid 500); 9 Sep 2004 19:54:06 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 17100 invoked by uid 500); 9 Sep 2004 19:54:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 17086 invoked by uid 99); 9 Sep 2004 19:54:06 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 09 Sep 2004 12:54:05 -0700
Received: from synergy1.parc.xerox.com ([13.1.101.60]) by alpha.xerox.com with SMTP id <147226(2)>; Thu, 9 Sep 2004 12:53:52 PDT
Received: from parc.com ([127.0.0.1]) by synergy1.parc.xerox.com with SMTP id <58617>; Thu, 9 Sep 2004 12:53:47 PDT
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: MultiFieldQueryParser seems broken... Fix attached. 
In-Reply-To: Your message of "Thu, 09 Sep 2004 09:52:40 PDT."
             <41408A58.9010103@apache.org> 
Date: Thu, 9 Sep 2004 12:53:39 PDT
From: Bill Janssen <janssen@parc.com>
Message-Id: <04Sep9.125347pdt."58617"@synergy1.parc.xerox.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> But, inspired by that message, couldn't MultiFieldQueryParser just be a 
> subclass of QueryParser that overrides getFieldQuery()?

I wasn't sure that everything "went through" getFieldQuery().  If so,
yes, that should work.  In either case, I don't even think a subclass
is necessary.  Just have a different constructor for QueryParser that
takes multiple default field names, and just add the behavior to
QueryParser, keyed off that characteristic (more than one default
field name).

Bill

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10152-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 10 03:09:36 2004
Return-Path: <lucene-user-return-10152-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 29108 invoked from network); 10 Sep 2004 03:09:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Sep 2004 03:09:36 -0000
Received: (qmail 15477 invoked by uid 500); 10 Sep 2004 03:09:28 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 15443 invoked by uid 500); 10 Sep 2004 03:09:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 15420 invoked by uid 99); 10 Sep 2004 03:09:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Sep 2004 20:09:25 -0700
Received: (qmail 4282 invoked by uid 89); 10 Sep 2004 03:09:23 -0000
Received: from unknown (HELO ?192.168.168.10?) (doug@cottrell-cutting.net@24.5.163.156)
  by londo.swishmail.com with AES256-SHA encrypted SMTP; 10 Sep 2004 03:09:22 -0000
Message-ID: <41411ADC.1090409@apache.org>
Date: Thu, 09 Sep 2004 20:09:16 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040803
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: combining open office spellchecker with Lucene
References: <000001c49572$72cacc00$0a00a8c0@aadlaptop> <41408CCA.5030804@apache.org> <41409C7D.3090400@tropo.com>
In-Reply-To: <41409C7D.3090400@tropo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

David Spencer wrote:
> Good heuristics but are there any more precise, standard guidelines as 
> to how to balance or combine what I think are the following possible 
> criteria in suggesting a better choice:

Not that I know of.

> - ignore(penalize?) terms that are rare

I think this one is easy to threshold: ignore matching terms that are 
rarer than the term entered.

> - ignore(penalize?) terms that are common

This, in effect, falls out of the previous criterion.  A term that is 
very common will not have any matching terms that are more common.  As 
an optimization, you could avoid even looking for matching terms when a 
term is very common.

> - terms that are closer (string distance) to the term entered are better

This is the meaty one.

> - terms that start w/ the same 'n' chars as the users term are better

Perhaps.  Are folks really better at spelling the beginning of words?

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10153-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 10 03:38:57 2004
Return-Path: <lucene-user-return-10153-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 37068 invoked from network); 10 Sep 2004 03:38:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Sep 2004 03:38:57 -0000
Received: (qmail 45473 invoked by uid 500); 10 Sep 2004 03:38:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 45428 invoked by uid 500); 10 Sep 2004 03:38:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 45410 invoked by uid 99); 10 Sep 2004 03:38:41 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [128.118.141.58] (HELO f05n15.cac.psu.edu) (128.118.141.58)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Sep 2004 20:38:40 -0700
Received: from istmobile33 (69-162-43-81.stcgpa.adelphia.net [69.162.43.81])
	by f05n15.cac.psu.edu (8.12.11/8.12.11) with SMTP id i8A3caNp039684
	for <lucene-user@jakarta.apache.org>; Thu, 9 Sep 2004 23:38:37 -0400
Message-ID: <00f201c496e7$9c723a40$512ba245@ist.psu.edu>
From: "Anne Y. Zhang" <yzz100@psu.edu>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <413F4CB6.8020307@tropo.com> <018001c495d1$a78dfb60$8e38a245@ist.psu.edu>
Subject: View lucene index file
Date: Thu, 9 Sep 2004 23:38:17 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2741.2600
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2742.200
X-Virus-Scanned: by amavisd-new
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I am using Nutch. Is there any way I can view the lucene index file?
It seems that lucene write index as binary file. Could anybody explain
how lucene does the indexing and where the index file located?
Thank you very much!

Ya
 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10154-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 10 04:11:28 2004
Return-Path: <lucene-user-return-10154-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 49377 invoked from network); 10 Sep 2004 04:11:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Sep 2004 04:11:28 -0000
Received: (qmail 69501 invoked by uid 500); 10 Sep 2004 04:11:21 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 69317 invoked by uid 500); 10 Sep 2004 04:11:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 69302 invoked by uid 99); 10 Sep 2004 04:11:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of appler@gmail.com designates 64.233.170.193 as permitted sender)
Received: from [64.233.170.193] (HELO mproxy.gmail.com) (64.233.170.193)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 09 Sep 2004 21:11:16 -0700
Received: by mproxy.gmail.com with SMTP id v18so361937rnb
        for <lucene-user@jakarta.apache.org>; Thu, 09 Sep 2004 21:11:12 -0700 (PDT)
Received: by 10.38.11.80 with SMTP id 80mr723812rnk;
        Thu, 09 Sep 2004 21:11:12 -0700 (PDT)
Received: by 10.38.206.12 with HTTP; Thu, 9 Sep 2004 21:11:12 -0700 (PDT)
Message-ID: <48b7084904090921112b401c3b@mail.gmail.com>
Date: Fri, 10 Sep 2004 13:11:12 +0900
From: Cheolgoo Kang <appler@gmail.com>
Reply-To: Cheolgoo Kang <appler@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: View lucene index file
In-Reply-To: <00f201c496e7$9c723a40$512ba245@ist.psu.edu>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <413F4CB6.8020307@tropo.com>
	 <018001c495d1$a78dfb60$8e38a245@ist.psu.edu>
	 <00f201c496e7$9c723a40$512ba245@ist.psu.edu>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

check out this page

http://jakarta.apache.org/lucene/docs/contributions.html

we got tools like LIMO and Luke.

Cheo

On Thu, 9 Sep 2004 23:38:17 -0400, Anne Y. Zhang <yzz100@psu.edu> wrote:
> I am using Nutch. Is there any way I can view the lucene index file?
> It seems that lucene write index as binary file. Could anybody explain
> how lucene does the indexing and where the index file located?
> Thank you very much!
> 
> Ya
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 



-- 
Cheolgoo, Kang

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10155-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 10 07:43:02 2004
Return-Path: <lucene-user-return-10155-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 76927 invoked from network); 10 Sep 2004 07:43:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Sep 2004 07:43:02 -0000
Received: (qmail 81197 invoked by uid 500); 10 Sep 2004 07:42:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 81082 invoked by uid 500); 10 Sep 2004 07:42:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 81068 invoked by uid 99); 10 Sep 2004 07:42:50 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Sep 2004 00:42:49 -0700
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Fri, 10 Sep 2004 09:44:41 +0200
Message-ID: <41415B68.1040901@ifit.uni-klu.ac.at>
Date: Fri, 10 Sep 2004 09:44:40 +0200
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: MultiFieldQueryParser seems broken...  Fix attached.
References: <26192.1094632233@www15.gmx.net>
In-Reply-To: <26192.1094632233@www15.gmx.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-OriginalArrivalTime: 10 Sep 2004 07:44:41.0869 (UTC) FILETIME=[085853D0:01C4970A]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


>.
>
>I reckon there has been a discussion (and solution :-) on how to achieve the
>functionality you've been
>after:
>
>http://issues.apache.org/eyebrowse/ReadMsg?listName=lucene-user@jakarta.apache.org&msgId=1798116
>
>I'm not sure if this would be the same though.
>
>Best regards,
>Ren
>
>  
>

Hi all,

 I took the code indicated by Rene but I've seen that it's not completly 
feeting my requirements, because my application should
provide the facility to check queries as beeing Fuzzy queries. so I 
modified the code to the following one, and I added a test main method.
Hope it helps someone.
 
 

package org.apache.lucene;
/* @(#) CWK 1.5 10.09.2004
 *
 * Copyright 2003-2005 ConfigWorks Informationssysteme & Consulting GmbH
 * Universittsstr. 94/7 9020 Klagenfurt Austria
 * www.configworks.com
 * All rights reserved.
 */

import java.util.Vector;
import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.queryParser.ParseException;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.search.BooleanClause;
import org.apache.lucene.search.Query;

/**
 * @author sergiu
 * this class is a patch for MultifieldQueryParser
 * it's behaviour can be tested by running the main method
 *
 * 
Now:

String[] fields = new String[] { "title", "abstract", "content" };
QueryParser parser = new CustomQueryParser(fields, new SimpleAnalyzer());
parser.setOperator(QueryParser.DEFAULT_OPERATOR_AND);
Query query = parser.parse("foo -bar (baz OR title:bla)");
System.out.println("? " + query);

Produces:

? +(title:foo abstract:foo content:foo) -(title:bar abstract:bar
content:bar) +((title:baz abstract:baz content:baz) title:bla)

Perfect!

 * @version 1.0
 * @since CWK 1.5
 */
public class CustomQueryParser extends QueryParser{
   private String[] fields;
   private boolean fuzzySearch = false;

   public CustomQueryParser(String[] fields, Analyzer analyzer){
     super(null, analyzer);
     this.fields = fields;
   }

   public CustomQueryParser(String[] fields, Analyzer analyzer, int 
defaultOperator){
       super(null, analyzer);
       this.fields = fields;
       setOperator(defaultOperator);
   }

   protected Query getFieldQuery(String field, Analyzer analyzer, String 
queryText)
     throws ParseException{
    
     Query query = null;
    
     if (field == null){
       Vector clauses = new Vector();
       for (int i = 0; i < fields.length; i++){
           if(isFuzzySearch())
               clauses.add(new 
BooleanClause(super.getFuzzyQuery(fields[i], queryText), false, false));
           else
               clauses.add(new 
BooleanClause(super.getFieldQuery(fields[i], analyzer, queryText), 
false, false));
              
       }
       query = getBooleanQuery(clauses); 
     }else{
         if (isFuzzySearch())
             query = super.getFuzzyQuery(field, queryText);
         else
             query = super.getFieldQuery(field, analyzer, 
queryText);        
     
     }
     return query;
   }
  
   public boolean isFuzzySearch() {
       return fuzzySearch;
   }
  
   public void setFuzzySearch(boolean fuzzySearch) {
       this.fuzzySearch = fuzzySearch;
   }

   public static void main(String[] args) throws Exception{
       String[] fields = new String[] { "title", "abstract", "content" };
       CustomQueryParser parser = new CustomQueryParser(fields, new 
StandardAnalyzer());
       parser.setOperator(QueryParser.DEFAULT_OPERATOR_AND);
       parser.setFuzzySearch(true);
      
       String queryString = "foo -bar (baz OR title:bla)";
       System.out.println(queryString);
       Query query = parser.parse(queryString);
       System.out.println("? " + query);   
 
   }
}


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10156-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 10 08:04:18 2004
Return-Path: <lucene-user-return-10156-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 86773 invoked from network); 10 Sep 2004 08:04:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Sep 2004 08:04:18 -0000
Received: (qmail 2692 invoked by uid 500); 10 Sep 2004 08:04:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 2667 invoked by uid 500); 10 Sep 2004 08:04:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 2652 invoked by uid 99); 10 Sep 2004 08:04:07 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.13.60] (HELO web86908.mail.ukl.yahoo.com) (217.12.13.60)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 10 Sep 2004 01:04:05 -0700
Message-ID: <20040910080403.33121.qmail@web86908.mail.ukl.yahoo.com>
Received: from [80.134.28.95] by web86908.mail.ukl.yahoo.com via HTTP; Fri, 10 Sep 2004 09:04:03 BST
Date: Fri, 10 Sep 2004 09:04:03 +0100 (BST)
From: =?iso-8859-1?q?eks=20dev?= <eksdev@yahoo.co.uk>
Subject: Re: combining open office spellchecker with Lucene
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <41411ADC.1090409@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Doug,

> Perhaps.  Are folks really better at spelling the
> beginning of words?

Yes they are. There were some comprehensive empirical
studies on this topic. Winkler modification on Jaro
string distance is based on this assumption (boosting
similarity if first n, I think 4, chars match).
Jaro-Winkler is well documented and some folks thinks
that it is much more efficient and precise than plain
Edit distance (of course for normal language, not
numbers or so).
I will try to dig-out some references from my disk on
this topic, if you are interested.

On another note,
I would even suggest using Jaro-Winkler distance as
default for fuzzy query. (one could configure max
prefix required => prefix query to reduce number of
distance calculations). This could speed-up fuzzy
search dramatically.

Hope this was helpful,
Eks




  



	
	
		
___________________________________________________________ALL-NEW Yahoo! Messenger - all new features - even more fun!  http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10157-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 10 12:13:33 2004
Return-Path: <lucene-user-return-10157-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 9080 invoked from network); 10 Sep 2004 12:13:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Sep 2004 12:13:33 -0000
Received: (qmail 54429 invoked by uid 500); 10 Sep 2004 12:13:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 54377 invoked by uid 500); 10 Sep 2004 12:13:24 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 54362 invoked by uid 99); 10 Sep 2004 12:13:24 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [193.103.133.77] (HELO hh-mail-2.gauss.de) (193.103.133.77)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Sep 2004 05:13:23 -0700
Received: from [172.20.76.5] ([172.20.76.5]) by
          hh-mail-2.gauss.de (Netscape Messaging Server 4.15) with ESMTP
          id I3TR5A00.V6U for <lucene-user@jakarta.apache.org>; Fri, 10
          Sep 2004 14:10:22 +0200 
Message-ID: <414199AD.1040104@gaussvip.com>
Date: Fri, 10 Sep 2004 14:10:21 +0200
From: "Daniel Taurat" <daniel.taurat@gaussvip.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; de-AT; rv:1.7.2) Gecko/20040803
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Out of memory in lucene 1.4.1 when re-indexing  large number
 of documents
References: <41409738.2040906@gaussvip.com> <200409092130.51772@danielnaber.de>
In-Reply-To: <200409092130.51772@danielnaber.de>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Daniel Aber schrieb:

>On Thursday 09 September 2004 19:47, Daniel Taurat wrote:
>
>  
>
>>I am facing an out of memory problem using  Lucene 1.4.1.
>>    
>>
>
>Could you try with a recent CVS version? There has been a fix about files 
>not being deleted after 1.4.1. Not sure if that could cause the problems 
>you're experiencing.
>
>Regards
> Daniel
>
>  
>
Well, it seems not to be files, it looks more like those SegmentTermEnum 
objects accumulating in memory.
#I've seen some discussion on these objects in the developer-newsgroup 
that had taken place some time ago.
I am afraid this is some kind of runaway caching I have to deal with.
Maybe not  correctly addressed in this newsgroup, after all...

Anyway: any idea if there is an API command to re-init caches?

Thanks,

Daniel



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10158-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 10 13:29:15 2004
Return-Path: <lucene-user-return-10158-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 55401 invoked from network); 10 Sep 2004 13:29:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Sep 2004 13:29:15 -0000
Received: (qmail 87271 invoked by uid 500); 10 Sep 2004 13:29:06 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 87244 invoked by uid 500); 10 Sep 2004 13:29:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 87230 invoked by uid 99); 10 Sep 2004 13:29:06 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [212.159.14.212] (HELO ptb-relay01.plus.net) (212.159.14.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Sep 2004 06:29:05 -0700
Received: from [80.229.194.52] (helo=joseph)
	 by ptb-relay01.plus.net with smtp (Exim) id 1C5lSV-000Huc-W7
	for lucene-user@jakarta.apache.org; Fri, 10 Sep 2004 13:29:00 +0000
Message-ID: <098c01c49739$aeabef10$34c2e550@joseph>
From: "Pete Lewis" <pete@uptima.co.uk>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <41409738.2040906@gaussvip.com> <200409092130.51772@danielnaber.de> <414199AD.1040104@gaussvip.com>
Subject: Re: Out of memory in lucene 1.4.1 when re-indexing  large number of documents
Date: Fri, 10 Sep 2004 14:25:46 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi all

Reading the thread with interest, there is another way I've come across out
of memory errors when indexing large batches of documents.

If you have your heap space settings too high, then you get swapping (which
impacts performance) plus you never reach the trigger for garbage
collection, hence you don't garbage collect and hence you run out of memory.

Can you check whether or not your garbage collection is being triggered?

Anomalously therefore if this is the case, by reducing the heap space you
can improve performance get rid of the out of memory errors.

Cheers
Pete Lewis

----- Original Message ----- 
From: "Daniel Taurat" <daniel.taurat@gaussvip.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Friday, September 10, 2004 1:10 PM
Subject: Re: Out of memory in lucene 1.4.1 when re-indexing large number of
documents


> Daniel Aber schrieb:
>
> >On Thursday 09 September 2004 19:47, Daniel Taurat wrote:
> >
> >
> >
> >>I am facing an out of memory problem using  Lucene 1.4.1.
> >>
> >>
> >
> >Could you try with a recent CVS version? There has been a fix about files
> >not being deleted after 1.4.1. Not sure if that could cause the problems
> >you're experiencing.
> >
> >Regards
> > Daniel
> >
> >
> >
> Well, it seems not to be files, it looks more like those SegmentTermEnum
> objects accumulating in memory.
> #I've seen some discussion on these objects in the developer-newsgroup
> that had taken place some time ago.
> I am afraid this is some kind of runaway caching I have to deal with.
> Maybe not  correctly addressed in this newsgroup, after all...
>
> Anyway: any idea if there is an API command to re-init caches?
>
> Thanks,
>
> Daniel
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10159-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 10 13:41:47 2004
Return-Path: <lucene-user-return-10159-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 62821 invoked from network); 10 Sep 2004 13:41:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Sep 2004 13:41:47 -0000
Received: (qmail 8665 invoked by uid 500); 10 Sep 2004 13:41:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 8623 invoked by uid 500); 10 Sep 2004 13:41:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 8610 invoked by uid 99); 10 Sep 2004 13:41:38 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [193.103.133.77] (HELO hh-mail-2.gauss.de) (193.103.133.77)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Sep 2004 06:41:35 -0700
Received: from [172.20.76.5] ([172.20.76.5]) by
          hh-mail-2.gauss.de (Netscape Messaging Server 4.15) with ESMTP
          id I3TVD700.I5V for <lucene-user@jakarta.apache.org>; Fri, 10
          Sep 2004 15:41:31 +0200 
Message-ID: <4141AF0A.5090907@gaussvip.com>
Date: Fri, 10 Sep 2004 15:41:30 +0200
From: "Daniel Taurat" <daniel.taurat@gaussvip.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; de-AT; rv:1.7.2) Gecko/20040803
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Out of memory in lucene 1.4.1 when re-indexing  large number
 of documents
References: <41409738.2040906@gaussvip.com> <200409092130.51772@danielnaber.de> <414199AD.1040104@gaussvip.com> <098c01c49739$aeabef10$34c2e550@joseph>
In-Reply-To: <098c01c49739$aeabef10$34c2e550@joseph>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Pete,
good hint, but we actually do have physical memory of  4Gb on the 
system. But then: we also have experienced that the gc of ibm jdk1.3.1 
that we use is sometimes
behaving strangely with too large heap space anyway. (Limit seems to be 
1.2 Gb)
I can say that gc is not collecting these objects since I  forced gc 
runs when indexing every now and then (when parsing pdf-type objects, 
that is): No effect.

regards,

Daniel


Pete Lewis wrote:

>Hi all
>
>Reading the thread with interest, there is another way I've come across out
>of memory errors when indexing large batches of documents.
>
>If you have your heap space settings too high, then you get swapping (which
>impacts performance) plus you never reach the trigger for garbage
>collection, hence you don't garbage collect and hence you run out of memory.
>
>Can you check whether or not your garbage collection is being triggered?
>
>Anomalously therefore if this is the case, by reducing the heap space you
>can improve performance get rid of the out of memory errors.
>
>Cheers
>Pete Lewis
>
>----- Original Message ----- 
>From: "Daniel Taurat" <daniel.taurat@gaussvip.com>
>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>Sent: Friday, September 10, 2004 1:10 PM
>Subject: Re: Out of memory in lucene 1.4.1 when re-indexing large number of
>documents
>
>
>  
>
>>Daniel Aber schrieb:
>>
>>    
>>
>>>On Thursday 09 September 2004 19:47, Daniel Taurat wrote:
>>>
>>>
>>>
>>>      
>>>
>>>>I am facing an out of memory problem using  Lucene 1.4.1.
>>>>
>>>>
>>>>        
>>>>
>>>Could you try with a recent CVS version? There has been a fix about files
>>>not being deleted after 1.4.1. Not sure if that could cause the problems
>>>you're experiencing.
>>>
>>>Regards
>>>Daniel
>>>
>>>
>>>
>>>      
>>>
>>Well, it seems not to be files, it looks more like those SegmentTermEnum
>>objects accumulating in memory.
>>#I've seen some discussion on these objects in the developer-newsgroup
>>that had taken place some time ago.
>>I am afraid this is some kind of runaway caching I have to deal with.
>>Maybe not  correctly addressed in this newsgroup, after all...
>>
>>Anyway: any idea if there is an API command to re-init caches?
>>
>>Thanks,
>>
>>Daniel
>>
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>    
>>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>  
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10160-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 10 13:48:30 2004
Return-Path: <lucene-user-return-10160-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 66453 invoked from network); 10 Sep 2004 13:48:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Sep 2004 13:48:30 -0000
Received: (qmail 18980 invoked by uid 500); 10 Sep 2004 13:48:22 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 18950 invoked by uid 500); 10 Sep 2004 13:48:22 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 18936 invoked by uid 99); 10 Sep 2004 13:48:22 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [207.58.142.20] (HELO snowtide.com) (207.58.142.20)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Sep 2004 06:48:21 -0700
Received: from [127.0.0.1] (snowtide.com [127.0.0.1])
	by snowtide.com (8.12.8/8.12.8) with ESMTP id i8ADo5AH002162
	for <lucene-user@jakarta.apache.org>; Fri, 10 Sep 2004 09:50:05 -0400
Mime-Version: 1.0 (Apple Message framework v619)
Content-Transfer-Encoding: 7bit
Message-Id: <13C35614-0330-11D9-A133-000A95B336F2@snowtide.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: Lucene Users List <lucene-user@jakarta.apache.org>
From: Chas Emerick <cemerick@snowtide.com>
Subject: Addition to contributions page
Date: Fri, 10 Sep 2004 09:48:20 -0400
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I hope I'm posting this request to the right list.  The page that lists 
3rd-party tools that work with Lucene ( 
http://jakarta.apache.org/lucene/docs/contributions.html ) says that to 
be added to the the page, one should send a message to one of the 
Lucene mailing lists.  So, that's what I'm doing.

PDFTextStream should be added to the 'Document Converters' section, 
with this URL < http://snowtide.com >, and perhaps this heading: 
'PDFTextStream -- PDF text and metadata extraction'.  The 'Author' 
field should probably be left blank, since there's no single creator.

Thanks much,

Chas Emerick   |   cemerick@snowtide.com

PDFTextStream: fast PDF text extraction for Java apps and Lucene
http://snowtide.com/home/PDFTextStream/


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10161-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 10 13:49:36 2004
Return-Path: <lucene-user-return-10161-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 67243 invoked from network); 10 Sep 2004 13:49:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Sep 2004 13:49:36 -0000
Received: (qmail 21351 invoked by uid 500); 10 Sep 2004 13:49:17 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 21305 invoked by uid 500); 10 Sep 2004 13:49:17 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 21284 invoked by uid 99); 10 Sep 2004 13:49:16 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of ben@csh.rit.edu designates 129.21.60.6 as permitted sender)
Received: from [129.21.60.6] (HELO blacksheep.csh.rit.edu) (129.21.60.6)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Sep 2004 06:49:15 -0700
Received: from fury.csh.rit.edu (fury.csh.rit.edu [IPv6:2001:470:1f00:135:a00:20ff:fe8d:5399])
	by blacksheep.csh.rit.edu (Postfix) with ESMTP id E9C1493B0
	for <lucene-user@jakarta.apache.org>; Fri, 10 Sep 2004 09:49:12 -0400 (EDT)
Received: by fury.csh.rit.edu (Postfix, from userid 38448)
	id 9A27D14A0; Fri, 10 Sep 2004 09:49:12 -0400 (EDT)
Received: from localhost (localhost [127.0.0.1])
	by fury.csh.rit.edu (Postfix) with ESMTP id 767B1130B
	for <lucene-user@jakarta.apache.org>; Fri, 10 Sep 2004 09:49:12 -0400 (EDT)
Date: Fri, 10 Sep 2004 09:49:12 -0400 (EDT)
From: Ben Litchfield <ben@csh.rit.edu>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Out of memory in lucene 1.4.1 when re-indexing  large number of
 documents
In-Reply-To: <4141AF0A.5090907@gaussvip.com>
Message-ID: <Pine.GSO.4.53.0409100948220.12141@fury.csh.rit.edu>
References: <41409738.2040906@gaussvip.com> <200409092130.51772@danielnaber.de>
 <414199AD.1040104@gaussvip.com> <098c01c49739$aeabef10$34c2e550@joseph>
 <4141AF0A.5090907@gaussvip.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> I can say that gc is not collecting these objects since I  forced gc
> runs when indexing every now and then (when parsing pdf-type objects,
> that is): No effect.

What PDF parser are you using?  Is the problem within the parser and not
lucene?  Are you releasing all resources?

Ben

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10162-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 10 13:49:50 2004
Return-Path: <lucene-user-return-10162-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 67454 invoked from network); 10 Sep 2004 13:49:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Sep 2004 13:49:50 -0000
Received: (qmail 23027 invoked by uid 500); 10 Sep 2004 13:49:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 22950 invoked by uid 500); 10 Sep 2004 13:49:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 22920 invoked by uid 99); 10 Sep 2004 13:49:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [193.62.196.100] (HELO maui.ebi.ac.uk) (193.62.196.100)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Sep 2004 06:49:35 -0700
Received: from SILK (silk.dhcp.ebi.ac.uk [172.22.69.6])
	by maui.ebi.ac.uk (8.11.7+Sun/8.11.7) with SMTP id i8ADnQF23839
	for <lucene-user@jakarta.apache.org>; Fri, 10 Sep 2004 14:49:26 +0100 (BST)
From: "Rupinder Singh Mazara" <rsmazara@ebi.ac.uk>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: RE: Out of memory in lucene 1.4.1 when re-indexing  large number of documents
Date: Fri, 10 Sep 2004 14:50:09 +0100
Message-ID: <CFEHIPOIEGKAJJPJENCEMEFECDAA.rsmazara@ebi.ac.uk>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.6604 (9.0.2911.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
In-Reply-To: <4141AF0A.5090907@gaussvip.com>
X-EBI-Information: This email is scanned using www.mailscanner.info.
X-EBI: Found to be clean
X-EBI-SpamCheck: not spam, SpamAssassin (score=0, required 5)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N



hi all=20

  I had a similar problem, i have  database of documents with 24 fields, =
and a average content of 7K, with  16M+ records

  i had to split the jobs into slabs of 1M each and merging the =
resulting indexes, submissions to our job queue looked like
=20
  java -Xms100M -Xcompactexplicitgc -cp $CLASSPATH lucene.Indexer 22
 =20
 and i still had outofmemory exception , the solution that i created was =
to after every 200K, documents create a temp directory, and merge them =
together, this was done to do the first production run, updates are now =
being handled incrementally
=20
 =20

Exception in thread "main" java.lang.OutOfMemoryError
at =
org.apache.lucene.store.RAMOutputStream.flushBuffer(RAMOutputStream.java(=
Compiled Code))
	at org.apache.lucene.store.OutputStream.flush(OutputStream.java(Inlined =
Compiled Code))
	at =
org.apache.lucene.store.OutputStream.writeByte(OutputStream.java(Inlined =
Compiled Code))
	at =
org.apache.lucene.store.OutputStream.writeBytes(OutputStream.java(Compile=
d Code))
	at =
org.apache.lucene.index.CompoundFileWriter.copyFile(CompoundFileWriter.ja=
va(Compiled Code))
	at =
org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.java(=
Compiled Code))
	at =
org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMerger.ja=
va(Compiled Code))
	at =
org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java(Compiled =
Code))
	at =
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java(Compil=
ed Code))
	at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:366)
	at lucene.Indexer.doIndex(CDBIndexer.java(Compiled Code))
	at lucene.Indexer.main(CDBIndexer.java:168)

>-----Original Message-----
>From: Daniel Taurat [mailto:daniel.taurat@gaussvip.com]
>Sent: 10 September 2004 14:42
>To: Lucene Users List
>Subject: Re: Out of memory in lucene 1.4.1 when re-indexing large =
number
>of documents
>
>
>Hi Pete,
>good hint, but we actually do have physical memory of  4Gb on the=20
>system. But then: we also have experienced that the gc of ibm jdk1.3.1=20
>that we use is sometimes
>behaving strangely with too large heap space anyway. (Limit seems to be =

>1.2 Gb)
>I can say that gc is not collecting these objects since I  forced gc=20
>runs when indexing every now and then (when parsing pdf-type objects,=20
>that is): No effect.
>
>regards,
>
>Daniel
>
>
>Pete Lewis wrote:
>
>>Hi all
>>
>>Reading the thread with interest, there is another way I've come=20
>across out
>>of memory errors when indexing large batches of documents.
>>
>>If you have your heap space settings too high, then you get=20
>swapping (which
>>impacts performance) plus you never reach the trigger for garbage
>>collection, hence you don't garbage collect and hence you run out=20
>of memory.
>>
>>Can you check whether or not your garbage collection is being =
triggered?
>>
>>Anomalously therefore if this is the case, by reducing the heap space =
you
>>can improve performance get rid of the out of memory errors.
>>
>>Cheers
>>Pete Lewis
>>
>>----- Original Message -----=20
>>From: "Daniel Taurat" <daniel.taurat@gaussvip.com>
>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>Sent: Friday, September 10, 2004 1:10 PM
>>Subject: Re: Out of memory in lucene 1.4.1 when re-indexing large=20
>number of
>>documents
>>
>>
>> =20
>>
>>>Daniel Aber schrieb:
>>>
>>>   =20
>>>
>>>>On Thursday 09 September 2004 19:47, Daniel Taurat wrote:
>>>>
>>>>
>>>>
>>>>     =20
>>>>
>>>>>I am facing an out of memory problem using  Lucene 1.4.1.
>>>>>
>>>>>
>>>>>       =20
>>>>>
>>>>Could you try with a recent CVS version? There has been a fix=20
>about files
>>>>not being deleted after 1.4.1. Not sure if that could cause the =
problems
>>>>you're experiencing.
>>>>
>>>>Regards
>>>>Daniel
>>>>
>>>>
>>>>
>>>>     =20
>>>>
>>>Well, it seems not to be files, it looks more like those =
SegmentTermEnum
>>>objects accumulating in memory.
>>>#I've seen some discussion on these objects in the =
developer-newsgroup
>>>that had taken place some time ago.
>>>I am afraid this is some kind of runaway caching I have to deal with.
>>>Maybe not  correctly addressed in this newsgroup, after all...
>>>
>>>Anyway: any idea if there is an API command to re-init caches?
>>>
>>>Thanks,
>>>
>>>Daniel
>>>
>>>
>>>
>>>---------------------------------------------------------------------
>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>>   =20
>>>
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>> =20
>>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10163-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 10 13:58:08 2004
Return-Path: <lucene-user-return-10163-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 72721 invoked from network); 10 Sep 2004 13:58:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Sep 2004 13:58:08 -0000
Received: (qmail 41726 invoked by uid 500); 10 Sep 2004 13:57:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 41624 invoked by uid 500); 10 Sep 2004 13:57:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 41483 invoked by uid 99); 10 Sep 2004 13:57:40 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [193.103.133.77] (HELO hh-mail-2.gauss.de) (193.103.133.77)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Sep 2004 06:57:39 -0700
Received: from [172.20.76.5] ([172.20.76.5]) by
          hh-mail-2.gauss.de (Netscape Messaging Server 4.15) with ESMTP
          id I3TW3Z00.V6Z for <lucene-user@jakarta.apache.org>; Fri, 10
          Sep 2004 15:57:35 +0200 
Message-ID: <4141B2CE.3090006@gaussvip.com>
Date: Fri, 10 Sep 2004 15:57:34 +0200
From: "Daniel Taurat" <daniel.taurat@gaussvip.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; de-AT; rv:1.7.2) Gecko/20040803
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Out of memory in lucene 1.4.1 when re-indexing  large number
 of documents
References: <41409738.2040906@gaussvip.com> <200409092130.51772@danielnaber.de> <414199AD.1040104@gaussvip.com> <098c01c49739$aeabef10$34c2e550@joseph> <4141AF0A.5090907@gaussvip.com> <Pine.GSO.4.53.0409100948220.12141@fury.csh.rit.edu>
In-Reply-To: <Pine.GSO.4.53.0409100948220.12141@fury.csh.rit.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

The Parser is pdfBox. pdf is about 25% of the over all indexing volume  
on the productive system. I also have word-docs and loads of hmtl 
resources to be indexed.
In my testing environment I merely have 5 pdf docs and still those 
permanent object hanging around, though.
Cheers,
Daniel

Ben Litchfield wrote:

>>I can say that gc is not collecting these objects since I  forced gc
>>runs when indexing every now and then (when parsing pdf-type objects,
>>that is): No effect.
>>    
>>
> <>
> What PDF parser are you using? Is the problem within the parser and not
> lucene? Are you releasing all resources?
> Ben
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10164-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 10 14:42:43 2004
Return-Path: <lucene-user-return-10164-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 98223 invoked from network); 10 Sep 2004 14:42:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Sep 2004 14:42:43 -0000
Received: (qmail 37779 invoked by uid 500); 10 Sep 2004 14:42:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 37675 invoked by uid 500); 10 Sep 2004 14:42:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 37638 invoked by uid 99); 10 Sep 2004 14:42:29 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [193.103.133.77] (HELO hh-mail-2.gauss.de) (193.103.133.77)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Sep 2004 07:42:27 -0700
Received: from [172.20.76.5] ([172.20.76.5]) by
          hh-mail-2.gauss.de (Netscape Messaging Server 4.15) with ESMTP
          id I3TY1W00.N6Z for <lucene-user@jakarta.apache.org>; Fri, 10
          Sep 2004 16:39:32 +0200 
Message-ID: <4141BCA4.8030605@gaussvip.com>
Date: Fri, 10 Sep 2004 16:39:32 +0200
From: "Daniel Taurat" <daniel.taurat@gaussvip.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; de-AT; rv:1.7.2) Gecko/20040803
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Out of memory in lucene 1.4.1 when re-indexing  large number
 of documents
References: <CFEHIPOIEGKAJJPJENCEMEFECDAA.rsmazara@ebi.ac.uk>
In-Reply-To: <CFEHIPOIEGKAJJPJENCEMEFECDAA.rsmazara@ebi.ac.uk>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi all,
here is some update for you:
I switched back to Lucene 1.3-final and now the  number of the  
SegmentTermEnum objects is controlled by gc again:
it goes up to about 1000 and then it is down again to 254 after indexing 
my 1900 test-objects.
Stay tuned, I will try 1.4RC3 now, the last version before FieldCache 
was introduced...

Daniel


Rupinder Singh Mazara schrieb:

>hi all 
>
>  I had a similar problem, i have  database of documents with 24 fields, and a average content of 7K, with  16M+ records
>
>  i had to split the jobs into slabs of 1M each and merging the resulting indexes, submissions to our job queue looked like
> 
>  java -Xms100M -Xcompactexplicitgc -cp $CLASSPATH lucene.Indexer 22
>  
> and i still had outofmemory exception , the solution that i created was to after every 200K, documents create a temp directory, and merge them together, this was done to do the first production run, updates are now being handled incrementally
> 
>  
>
>Exception in thread "main" java.lang.OutOfMemoryError
>at org.apache.lucene.store.RAMOutputStream.flushBuffer(RAMOutputStream.java(Compiled Code))
>	at org.apache.lucene.store.OutputStream.flush(OutputStream.java(Inlined Compiled Code))
>	at org.apache.lucene.store.OutputStream.writeByte(OutputStream.java(Inlined Compiled Code))
>	at org.apache.lucene.store.OutputStream.writeBytes(OutputStream.java(Compiled Code))
>	at org.apache.lucene.index.CompoundFileWriter.copyFile(CompoundFileWriter.java(Compiled Code))
>	at org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.java(Compiled Code))
>	at org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMerger.java(Compiled Code))
>	at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java(Compiled Code))
>	at org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java(Compiled Code))
>	at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:366)
>	at lucene.Indexer.doIndex(CDBIndexer.java(Compiled Code))
>	at lucene.Indexer.main(CDBIndexer.java:168)
>
>  
>
>>-----Original Message-----
>>From: Daniel Taurat [mailto:daniel.taurat@gaussvip.com]
>>Sent: 10 September 2004 14:42
>>To: Lucene Users List
>>Subject: Re: Out of memory in lucene 1.4.1 when re-indexing large number
>>of documents
>>
>>
>>Hi Pete,
>>good hint, but we actually do have physical memory of  4Gb on the 
>>system. But then: we also have experienced that the gc of ibm jdk1.3.1 
>>that we use is sometimes
>>behaving strangely with too large heap space anyway. (Limit seems to be 
>>1.2 Gb)
>>I can say that gc is not collecting these objects since I  forced gc 
>>runs when indexing every now and then (when parsing pdf-type objects, 
>>that is): No effect.
>>
>>regards,
>>
>>Daniel
>>
>>
>>Pete Lewis wrote:
>>
>>    
>>
>>>Hi all
>>>
>>>Reading the thread with interest, there is another way I've come 
>>>      
>>>
>>across out
>>    
>>
>>>of memory errors when indexing large batches of documents.
>>>
>>>If you have your heap space settings too high, then you get 
>>>      
>>>
>>swapping (which
>>    
>>
>>>impacts performance) plus you never reach the trigger for garbage
>>>collection, hence you don't garbage collect and hence you run out 
>>>      
>>>
>>of memory.
>>    
>>
>>>Can you check whether or not your garbage collection is being triggered?
>>>
>>>Anomalously therefore if this is the case, by reducing the heap space you
>>>can improve performance get rid of the out of memory errors.
>>>
>>>Cheers
>>>Pete Lewis
>>>
>>>----- Original Message ----- 
>>>From: "Daniel Taurat" <daniel.taurat@gaussvip.com>
>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>Sent: Friday, September 10, 2004 1:10 PM
>>>Subject: Re: Out of memory in lucene 1.4.1 when re-indexing large 
>>>      
>>>
>>number of
>>    
>>
>>>documents
>>>
>>>
>>> 
>>>
>>>      
>>>
>>>>Daniel Aber schrieb:
>>>>
>>>>   
>>>>
>>>>        
>>>>
>>>>>On Thursday 09 September 2004 19:47, Daniel Taurat wrote:
>>>>>
>>>>>
>>>>>
>>>>>     
>>>>>
>>>>>          
>>>>>
>>>>>>I am facing an out of memory problem using  Lucene 1.4.1.
>>>>>>
>>>>>>
>>>>>>       
>>>>>>
>>>>>>            
>>>>>>
>>>>>Could you try with a recent CVS version? There has been a fix 
>>>>>          
>>>>>
>>about files
>>    
>>
>>>>>not being deleted after 1.4.1. Not sure if that could cause the problems
>>>>>you're experiencing.
>>>>>
>>>>>Regards
>>>>>Daniel
>>>>>
>>>>>
>>>>>
>>>>>     
>>>>>
>>>>>          
>>>>>
>>>>Well, it seems not to be files, it looks more like those SegmentTermEnum
>>>>objects accumulating in memory.
>>>>#I've seen some discussion on these objects in the developer-newsgroup
>>>>that had taken place some time ago.
>>>>I am afraid this is some kind of runaway caching I have to deal with.
>>>>Maybe not  correctly addressed in this newsgroup, after all...
>>>>
>>>>Anyway: any idea if there is an API command to re-init caches?
>>>>
>>>>Thanks,
>>>>
>>>>Daniel
>>>>
>>>>
>>>>
>>>>---------------------------------------------------------------------
>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>
>>>>   
>>>>
>>>>        
>>>>
>>>---------------------------------------------------------------------
>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>> 
>>>
>>>      
>>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>>    
>>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>  
>


-- 
Mit freundlichen Gren

    Dr. Daniel Taurat

    Senior Consultant
-- 
VIP ENTERPRISE 8 | THE POWER OF CONTENT AT WORK
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

Gauss Interprise AG      Phone:  +49-40-3250-1508
Weidestr. 120 a          Mobile: +49-173-2418472
D- 22083 Hamburg         Fax:    +49-40-3250-191508
Germany                  E-Mail: daniel.taurat@gaussvip.com
                         Web:    http://www.gaussvip.com
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10165-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 10 15:07:11 2004
Return-Path: <lucene-user-return-10165-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 10420 invoked from network); 10 Sep 2004 15:07:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Sep 2004 15:07:11 -0000
Received: (qmail 1745 invoked by uid 500); 10 Sep 2004 15:05:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 1633 invoked by uid 500); 10 Sep 2004 15:05:54 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 1553 invoked by uid 99); 10 Sep 2004 15:05:52 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Sep 2004 08:05:49 -0700
Received: (qmail 6214 invoked by uid 532); 10 Sep 2004 15:03:21 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.154781 secs); 10 Sep 2004 15:03:21 -0000
Received: from unknown (HELO tropo.com) (127.0.0.1)
  by 0 with SMTP; 10 Sep 2004 15:03:21 -0000
Message-ID: <4141C2CA.9020607@tropo.com>
Date: Fri, 10 Sep 2004 08:05:46 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7b) Gecko/20040316
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: combining open office spellchecker with Lucene
References: <20040910080403.33121.qmail@web86908.mail.ukl.yahoo.com>
In-Reply-To: <20040910080403.33121.qmail@web86908.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

eks dev wrote:

> Hi Doug,
> 
> 
>>Perhaps.  Are folks really better at spelling the
>>beginning of words?
> 
> 
> Yes they are. There were some comprehensive empirical
> studies on this topic. Winkler modification on Jaro
> string distance is based on this assumption (boosting
> similarity if first n, I think 4, chars match).
> Jaro-Winkler is well documented and some folks thinks
> that it is much more efficient and precise than plain
> Edit distance (of course for normal language, not
> numbers or so).
> I will try to dig-out some references from my disk on

Good ole Citeseer finds 2 docs that seem relevant:

http://citeseer.ist.psu.edu/cs?cs=1&q=Winkler+Jaro&submit=Documents&co=Citations&cm=50&cf=Any&ao=Citations&am=20&af=Any

I have some of the ngram spelling suggestion stuff, based on earlier 
msgs in this thread, working in my dev tree. I'll try to get a test site 
up later today for people to fool around with.


> this topic, if you are interested.
> 
> On another note,
> I would even suggest using Jaro-Winkler distance as
> default for fuzzy query. (one could configure max
> prefix required => prefix query to reduce number of
> distance calculations). This could speed-up fuzzy
> search dramatically.
> 
> Hope this was helpful,
> Eks
> 
> 
> 
> 
>   
> 
> 
> 
> 	
> 	
> 		
> ___________________________________________________________ALL-NEW Yahoo! Messenger - all new features - even more fun!  http://uk.messenger.yahoo.com
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10166-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 10 15:19:43 2004
Return-Path: <lucene-user-return-10166-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 17369 invoked from network); 10 Sep 2004 15:19:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Sep 2004 15:19:43 -0000
Received: (qmail 49470 invoked by uid 500); 10 Sep 2004 15:19:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 49384 invoked by uid 500); 10 Sep 2004 15:19:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 49370 invoked by uid 99); 10 Sep 2004 15:19:32 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [193.103.133.77] (HELO hh-mail-2.gauss.de) (193.103.133.77)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Sep 2004 08:19:31 -0700
Received: from [172.20.76.5] ([172.20.76.5]) by
          hh-mail-2.gauss.de (Netscape Messaging Server 4.15) with ESMTP
          id I3TZWE00.R8S for <lucene-user@jakarta.apache.org>; Fri, 10
          Sep 2004 17:19:26 +0200 
Message-ID: <4141C5FD.3020506@gaussvip.com>
Date: Fri, 10 Sep 2004 17:19:25 +0200
From: "Daniel Taurat" <daniel.taurat@gaussvip.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; de-AT; rv:1.7.2) Gecko/20040803
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Out of memory in lucene 1.4.1 when re-indexing  large number
 of documents
References: <CFEHIPOIEGKAJJPJENCEMEFECDAA.rsmazara@ebi.ac.uk> <4141BCA4.8030605@gaussvip.com>
In-Reply-To: <4141BCA4.8030605@gaussvip.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Okay, that (1.4rc3)worked fine, too!
Got only 257 SegmentTermEnums for 1900 objects.

Now I will go for the final test on the production server with the 
1.4rc3 version  and about 40.000 objects.

Daniel

Daniel Taurat schrieb:

> Hi all,
> here is some update for you:
> I switched back to Lucene 1.3-final and now the  number of the  
> SegmentTermEnum objects is controlled by gc again:
> it goes up to about 1000 and then it is down again to 254 after 
> indexing my 1900 test-objects.
> Stay tuned, I will try 1.4RC3 now, the last version before FieldCache 
> was introduced...
>
> Daniel
>
>
> Rupinder Singh Mazara schrieb:
>
>> hi all
>>  I had a similar problem, i have  database of documents with 24 
>> fields, and a average content of 7K, with  16M+ records
>>
>>  i had to split the jobs into slabs of 1M each and merging the 
>> resulting indexes, submissions to our job queue looked like
>>
>>  java -Xms100M -Xcompactexplicitgc -cp $CLASSPATH lucene.Indexer 22
>>  
>> and i still had outofmemory exception , the solution that i created 
>> was to after every 200K, documents create a temp directory, and merge 
>> them together, this was done to do the first production run, updates 
>> are now being handled incrementally
>>
>>  
>>
>> Exception in thread "main" java.lang.OutOfMemoryError
>> at 
>> org.apache.lucene.store.RAMOutputStream.flushBuffer(RAMOutputStream.java(Compiled 
>> Code))
>>     at 
>> org.apache.lucene.store.OutputStream.flush(OutputStream.java(Inlined 
>> Compiled Code))
>>     at 
>> org.apache.lucene.store.OutputStream.writeByte(OutputStream.java(Inlined 
>> Compiled Code))
>>     at 
>> org.apache.lucene.store.OutputStream.writeBytes(OutputStream.java(Compiled 
>> Code))
>>     at 
>> org.apache.lucene.index.CompoundFileWriter.copyFile(CompoundFileWriter.java(Compiled 
>> Code))
>>     at 
>> org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.java(Compiled 
>> Code))
>>     at 
>> org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMerger.java(Compiled 
>> Code))
>>     at 
>> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java(Compiled 
>> Code))
>>     at 
>> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java(Compiled 
>> Code))
>>     at 
>> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:366)
>>     at lucene.Indexer.doIndex(CDBIndexer.java(Compiled Code))
>>     at lucene.Indexer.main(CDBIndexer.java:168)
>>
>>  
>>
>>> -----Original Message-----
>>> From: Daniel Taurat [mailto:daniel.taurat@gaussvip.com]
>>> Sent: 10 September 2004 14:42
>>> To: Lucene Users List
>>> Subject: Re: Out of memory in lucene 1.4.1 when re-indexing large 
>>> number
>>> of documents
>>>
>>>
>>> Hi Pete,
>>> good hint, but we actually do have physical memory of  4Gb on the 
>>> system. But then: we also have experienced that the gc of ibm 
>>> jdk1.3.1 that we use is sometimes
>>> behaving strangely with too large heap space anyway. (Limit seems to 
>>> be 1.2 Gb)
>>> I can say that gc is not collecting these objects since I  forced gc 
>>> runs when indexing every now and then (when parsing pdf-type 
>>> objects, that is): No effect.
>>>
>>> regards,
>>>
>>> Daniel
>>>
>>>
>>> Pete Lewis wrote:
>>>
>>>   
>>>
>>>> Hi all
>>>>
>>>> Reading the thread with interest, there is another way I've come     
>>>
>>> across out
>>>   
>>>
>>>> of memory errors when indexing large batches of documents.
>>>>
>>>> If you have your heap space settings too high, then you get     
>>>
>>> swapping (which
>>>   
>>>
>>>> impacts performance) plus you never reach the trigger for garbage
>>>> collection, hence you don't garbage collect and hence you run out     
>>>
>>> of memory.
>>>   
>>>
>>>> Can you check whether or not your garbage collection is being 
>>>> triggered?
>>>>
>>>> Anomalously therefore if this is the case, by reducing the heap 
>>>> space you
>>>> can improve performance get rid of the out of memory errors.
>>>>
>>>> Cheers
>>>> Pete Lewis
>>>>
>>>> ----- Original Message ----- From: "Daniel Taurat" 
>>>> <daniel.taurat@gaussvip.com>
>>>> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>> Sent: Friday, September 10, 2004 1:10 PM
>>>> Subject: Re: Out of memory in lucene 1.4.1 when re-indexing large     
>>>
>>> number of
>>>   
>>>
>>>> documents
>>>>
>>>>
>>>>
>>>>
>>>>     
>>>>
>>>>> Daniel Aber schrieb:
>>>>>
>>>>>  
>>>>>       
>>>>>
>>>>>> On Thursday 09 September 2004 19:47, Daniel Taurat wrote:
>>>>>>
>>>>>>
>>>>>>
>>>>>>    
>>>>>>         
>>>>>>
>>>>>>> I am facing an out of memory problem using  Lucene 1.4.1.
>>>>>>>
>>>>>>>
>>>>>>>      
>>>>>>>           
>>>>>>
>>>>>> Could you try with a recent CVS version? There has been a fix 
>>>>>>         
>>>>>
>>> about files
>>>   
>>>
>>>>>> not being deleted after 1.4.1. Not sure if that could cause the 
>>>>>> problems
>>>>>> you're experiencing.
>>>>>>
>>>>>> Regards
>>>>>> Daniel
>>>>>>
>>>>>>
>>>>>>
>>>>>>    
>>>>>>         
>>>>>
>>>>> Well, it seems not to be files, it looks more like those 
>>>>> SegmentTermEnum
>>>>> objects accumulating in memory.
>>>>> #I've seen some discussion on these objects in the 
>>>>> developer-newsgroup
>>>>> that had taken place some time ago.
>>>>> I am afraid this is some kind of runaway caching I have to deal with.
>>>>> Maybe not  correctly addressed in this newsgroup, after all...
>>>>>
>>>>> Anyway: any idea if there is an API command to re-init caches?
>>>>>
>>>>> Thanks,
>>>>>
>>>>> Daniel
>>>>>
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>
>>>>>  
>>>>>       
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>
>>>>
>>>>
>>>>     
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>>
>>>   
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>>  
>>
>
>


-- 
Mit freundlichen Gren

    Dr. Daniel Taurat

    Senior Consultant
-- 
VIP ENTERPRISE 8 | THE POWER OF CONTENT AT WORK
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

Gauss Interprise AG      Phone:  +49-40-3250-1508
Weidestr. 120 a          Mobile: +49-173-2418472
D- 22083 Hamburg         Fax:    +49-40-3250-191508
Germany                  E-Mail: daniel.taurat@gaussvip.com
                         Web:    http://www.gaussvip.com
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10167-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 10 17:47:54 2004
Return-Path: <lucene-user-return-10167-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 88453 invoked from network); 10 Sep 2004 17:47:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Sep 2004 17:47:54 -0000
Received: (qmail 92479 invoked by uid 500); 10 Sep 2004 17:47:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 92261 invoked by uid 500); 10 Sep 2004 17:47:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 92248 invoked by uid 99); 10 Sep 2004 17:47:46 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Sep 2004 10:47:44 -0700
Received: (qmail 58458 invoked by uid 89); 10 Sep 2004 17:47:41 -0000
Received: from unknown (HELO ?192.168.168.81?) (postmaster@cottrell-cutting.net@24.5.163.156)
  by londo.swishmail.com with AES256-SHA encrypted SMTP; 10 Sep 2004 17:47:41 -0000
Message-ID: <4141E855.7050706@apache.org>
Date: Fri, 10 Sep 2004 10:45:57 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.2) Gecko/20040806
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Out of memory in lucene 1.4.1 when re-indexing  large number
 of documents
References: <CFEHIPOIEGKAJJPJENCEMEFECDAA.rsmazara@ebi.ac.uk> <4141BCA4.8030605@gaussvip.com> <4141C5FD.3020506@gaussvip.com>
In-Reply-To: <4141C5FD.3020506@gaussvip.com>
Content-Type: multipart/mixed;
 boundary="------------080505010003050506030405"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--------------080505010003050506030405
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

It sounds like the ThreadLocal in TermInfosReader is not getting 
correctly garbage collected when the TermInfosReader is collected. 
Researching a bit, this was a bug in JVMs prior to 1.4.2, so my guess is 
that you're running in an older JVM.  Is that right?

I've attached a patch which should fix this.  Please tell me if it works 
for you.

Doug

Daniel Taurat wrote:
> Okay, that (1.4rc3)worked fine, too!
> Got only 257 SegmentTermEnums for 1900 objects.
> 
> Now I will go for the final test on the production server with the 
> 1.4rc3 version  and about 40.000 objects.
> 
> Daniel
> 
> Daniel Taurat schrieb:
> 
>> Hi all,
>> here is some update for you:
>> I switched back to Lucene 1.3-final and now the  number of the  
>> SegmentTermEnum objects is controlled by gc again:
>> it goes up to about 1000 and then it is down again to 254 after 
>> indexing my 1900 test-objects.
>> Stay tuned, I will try 1.4RC3 now, the last version before FieldCache 
>> was introduced...
>>
>> Daniel
>>
>>
>> Rupinder Singh Mazara schrieb:
>>
>>> hi all
>>>  I had a similar problem, i have  database of documents with 24 
>>> fields, and a average content of 7K, with  16M+ records
>>>
>>>  i had to split the jobs into slabs of 1M each and merging the 
>>> resulting indexes, submissions to our job queue looked like
>>>
>>>  java -Xms100M -Xcompactexplicitgc -cp $CLASSPATH lucene.Indexer 22
>>>  
>>> and i still had outofmemory exception , the solution that i created 
>>> was to after every 200K, documents create a temp directory, and merge 
>>> them together, this was done to do the first production run, updates 
>>> are now being handled incrementally
>>>
>>>  
>>>
>>> Exception in thread "main" java.lang.OutOfMemoryError
>>> at 
>>> org.apache.lucene.store.RAMOutputStream.flushBuffer(RAMOutputStream.java(Compiled 
>>> Code))
>>>     at 
>>> org.apache.lucene.store.OutputStream.flush(OutputStream.java(Inlined 
>>> Compiled Code))
>>>     at 
>>> org.apache.lucene.store.OutputStream.writeByte(OutputStream.java(Inlined 
>>> Compiled Code))
>>>     at 
>>> org.apache.lucene.store.OutputStream.writeBytes(OutputStream.java(Compiled 
>>> Code))
>>>     at 
>>> org.apache.lucene.index.CompoundFileWriter.copyFile(CompoundFileWriter.java(Compiled 
>>> Code))
>>>     at 
>>> org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.java(Compiled 
>>> Code))
>>>     at 
>>> org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMerger.java(Compiled 
>>> Code))
>>>     at 
>>> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java(Compiled 
>>> Code))
>>>     at 
>>> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java(Compiled 
>>> Code))
>>>     at 
>>> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:366)
>>>     at lucene.Indexer.doIndex(CDBIndexer.java(Compiled Code))
>>>     at lucene.Indexer.main(CDBIndexer.java:168)
>>>
>>>  
>>>
>>>> -----Original Message-----
>>>> From: Daniel Taurat [mailto:daniel.taurat@gaussvip.com]
>>>> Sent: 10 September 2004 14:42
>>>> To: Lucene Users List
>>>> Subject: Re: Out of memory in lucene 1.4.1 when re-indexing large 
>>>> number
>>>> of documents
>>>>
>>>>
>>>> Hi Pete,
>>>> good hint, but we actually do have physical memory of  4Gb on the 
>>>> system. But then: we also have experienced that the gc of ibm 
>>>> jdk1.3.1 that we use is sometimes
>>>> behaving strangely with too large heap space anyway. (Limit seems to 
>>>> be 1.2 Gb)
>>>> I can say that gc is not collecting these objects since I  forced gc 
>>>> runs when indexing every now and then (when parsing pdf-type 
>>>> objects, that is): No effect.
>>>>
>>>> regards,
>>>>
>>>> Daniel
>>>>
>>>>
>>>> Pete Lewis wrote:
>>>>
>>>>  
>>>>
>>>>> Hi all
>>>>>
>>>>> Reading the thread with interest, there is another way I've come     
>>>>
>>>>
>>>> across out
>>>>  
>>>>
>>>>> of memory errors when indexing large batches of documents.
>>>>>
>>>>> If you have your heap space settings too high, then you get     
>>>>
>>>>
>>>> swapping (which
>>>>  
>>>>
>>>>> impacts performance) plus you never reach the trigger for garbage
>>>>> collection, hence you don't garbage collect and hence you run out     
>>>>
>>>>
>>>> of memory.
>>>>  
>>>>
>>>>> Can you check whether or not your garbage collection is being 
>>>>> triggered?
>>>>>
>>>>> Anomalously therefore if this is the case, by reducing the heap 
>>>>> space you
>>>>> can improve performance get rid of the out of memory errors.
>>>>>
>>>>> Cheers
>>>>> Pete Lewis
>>>>>
>>>>> ----- Original Message ----- From: "Daniel Taurat" 
>>>>> <daniel.taurat@gaussvip.com>
>>>>> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>> Sent: Friday, September 10, 2004 1:10 PM
>>>>> Subject: Re: Out of memory in lucene 1.4.1 when re-indexing large     
>>>>
>>>>
>>>> number of
>>>>  
>>>>
>>>>> documents
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>    
>>>>>
>>>>>> Daniel Aber schrieb:
>>>>>>
>>>>>>  
>>>>>>      
>>>>>>
>>>>>>> On Thursday 09 September 2004 19:47, Daniel Taurat wrote:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>           
>>>>>>>
>>>>>>>> I am facing an out of memory problem using  Lucene 1.4.1.
>>>>>>>>
>>>>>>>>
>>>>>>>>                
>>>>>>>
>>>>>>>
>>>>>>> Could you try with a recent CVS version? There has been a fix 
>>>>>>>         
>>>>>>
>>>>>>
>>>> about files
>>>>  
>>>>
>>>>>>> not being deleted after 1.4.1. Not sure if that could cause the 
>>>>>>> problems
>>>>>>> you're experiencing.
>>>>>>>
>>>>>>> Regards
>>>>>>> Daniel
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>            
>>>>>>
>>>>>>
>>>>>> Well, it seems not to be files, it looks more like those 
>>>>>> SegmentTermEnum
>>>>>> objects accumulating in memory.
>>>>>> #I've seen some discussion on these objects in the 
>>>>>> developer-newsgroup
>>>>>> that had taken place some time ago.
>>>>>> I am afraid this is some kind of runaway caching I have to deal with.
>>>>>> Maybe not  correctly addressed in this newsgroup, after all...
>>>>>>
>>>>>> Anyway: any idea if there is an API command to re-init caches?
>>>>>>
>>>>>> Thanks,
>>>>>>
>>>>>> Daniel
>>>>>>
>>>>>>
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>>
>>>>>>  
>>>>>>       
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>
>>>>>
>>>>>
>>>>>     
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>
>>>>
>>>>   
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>>
>>>  
>>>
>>
>>
> 
> 

--------------080505010003050506030405
Content-Type: text/x-patch;
 name="leak.patch"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="leak.patch"

Index: src/java/org/apache/lucene/index/TermInfosReader.java
===================================================================
RCS file: /home/cvs/jakarta-lucene/src/java/org/apache/lucene/index/TermInfosReader.java,v
retrieving revision 1.9
diff -u -r1.9 TermInfosReader.java
--- src/java/org/apache/lucene/index/TermInfosReader.java	6 Aug 2004 20:50:29 -0000	1.9
+++ src/java/org/apache/lucene/index/TermInfosReader.java	10 Sep 2004 17:46:47 -0000
@@ -45,6 +45,11 @@
     readIndex();
   }
 
+  protected final void finalize() {
+    // patch for pre-1.4.2 JVMs, whose ThreadLocals leak
+    enumerators.set(null);
+  }
+
   public int getSkipInterval() {
     return origEnum.skipInterval;
   }


--------------080505010003050506030405
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
--------------080505010003050506030405--

From lucene-user-return-10168-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 10 17:51:57 2004
Return-Path: <lucene-user-return-10168-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 90620 invoked from network); 10 Sep 2004 17:51:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Sep 2004 17:51:57 -0000
Received: (qmail 98577 invoked by uid 500); 10 Sep 2004 17:51:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 98509 invoked by uid 500); 10 Sep 2004 17:51:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 98489 invoked by uid 99); 10 Sep 2004 17:51:49 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Sep 2004 10:51:48 -0700
Received: (qmail 65278 invoked by uid 89); 10 Sep 2004 17:51:45 -0000
Received: from unknown (HELO ?192.168.168.81?) (postmaster@cottrell-cutting.net@24.5.163.156)
  by londo.swishmail.com with AES256-SHA encrypted SMTP; 10 Sep 2004 17:51:45 -0000
Message-ID: <4141E949.2080101@apache.org>
Date: Fri, 10 Sep 2004 10:50:01 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.2) Gecko/20040806
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: MultiFieldQueryParser seems broken... Fix attached.
References: <04Sep8.170111pdt."58612"@synergy1.parc.xerox.com> <41408A58.9010103@apache.org> <200409091928.09837@danielnaber.de>
In-Reply-To: <200409091928.09837@danielnaber.de>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Daniel Naber wrote:
> On Thursday 09 September 2004 18:52, Doug Cutting wrote:
> 
> 
>>I have not been
>>able to construct a two-word query that returns a page without both
>>words in either the content, the title, the url or in a single anchor.
>>Can you?
> 
> 
> Like this one?
> 
> konvens leitseite 
> 
> Leitseite is only in the title of the first match (www.gldv.org), konvens 
> is only in the body.

Good job finding that!  I guess I should fix Nutch's BasicQueryFilter.

Thanks,

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10169-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 10 20:58:46 2004
Return-Path: <lucene-user-return-10169-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 70922 invoked from network); 10 Sep 2004 20:58:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Sep 2004 20:58:46 -0000
Received: (qmail 59048 invoked by uid 500); 10 Sep 2004 20:58:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 58935 invoked by uid 500); 10 Sep 2004 20:58:23 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 58861 invoked by uid 99); 10 Sep 2004 20:58:22 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [12.43.53.196] (HELO mail.sofari.com) (12.43.53.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Sep 2004 13:58:19 -0700
Received: from [192.168.1.102] ([12.43.53.196])
	by mail.sofari.com (8.12.11/8.12.3/Debian-6.6) with ESMTP id i8AKwHWj018211
	for <lucene-user@jakarta.apache.org>; Fri, 10 Sep 2004 13:58:17 -0700
Message-ID: <41421564.8020003@newsmonster.org>
Date: Fri, 10 Sep 2004 13:58:12 -0700
From: "Kevin A. Burton" <burton@newsmonster.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7) Gecko/20040616
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: TermInfo using 300M for large index?
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I'm trying to do some heap debugging of my application to find a memory 
leak.

Noticed that org.apache.lucene.index.TermInfo had 1.7M instances which 
consumed 300M ... this is of course for a 40G index.

Is this normal and is there any way I can streamline this?

We are of course caching the IndexSearchers but I want to reduce the 
memory footprint...

Kevin

-- 

Please reply using PGP.

    http://peerfear.org/pubkey.asc    
    
    NewsMonster - http://www.newsmonster.org/
    
Kevin A. Burton, Location - San Francisco, CA, Cell - 415.595.9965
       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
  IRC - freenode.net #infoanarchy | #p2p-hackers | #newsmonster


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10170-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 10 21:08:06 2004
Return-Path: <lucene-user-return-10170-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 74089 invoked from network); 10 Sep 2004 21:08:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Sep 2004 21:08:06 -0000
Received: (qmail 78418 invoked by uid 500); 10 Sep 2004 21:08:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 78350 invoked by uid 500); 10 Sep 2004 21:08:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 78330 invoked by uid 99); 10 Sep 2004 21:08:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [12.43.53.196] (HELO mail.sofari.com) (12.43.53.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Sep 2004 14:07:58 -0700
Received: from [192.168.1.102] ([12.43.53.196])
	by mail.sofari.com (8.12.11/8.12.3/Debian-6.6) with ESMTP id i8AL7pfq018339
	for <lucene-user@jakarta.apache.org>; Fri, 10 Sep 2004 14:07:51 -0700
Message-ID: <414217A2.9020707@newsmonster.org>
Date: Fri, 10 Sep 2004 14:07:46 -0700
From: "Kevin A. Burton" <burton@newsmonster.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7) Gecko/20040616
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Out of memory in lucene 1.4.1 when re-indexing  large number
 of documents
References: <41409738.2040906@gaussvip.com> <200409092130.51772@danielnaber.de> <414199AD.1040104@gaussvip.com> <098c01c49739$aeabef10$34c2e550@joseph> <4141AF0A.5090907@gaussvip.com>
In-Reply-To: <4141AF0A.5090907@gaussvip.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Daniel Taurat wrote:

> Hi Pete,
> good hint, but we actually do have physical memory of  4Gb on the 
> system. But then: we also have experienced that the gc of ibm jdk1.3.1 
> that we use is sometimes
> behaving strangely with too large heap space anyway. (Limit seems to 
> be 1.2 Gb)

Depends on what OS and with what patches...

Linux on i386 seems to have a physical limit of 1.7G (256M for VM) ... 
There are some patches to apply to get 3G but only on really modern kernels.

I just need to get Athlon systems :-/

Kevin

-- 

Please reply using PGP.

    http://peerfear.org/pubkey.asc    
    
    NewsMonster - http://www.newsmonster.org/
    
Kevin A. Burton, Location - San Francisco, CA, Cell - 415.595.9965
       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
  IRC - freenode.net #infoanarchy | #p2p-hackers | #newsmonster


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10171-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 10 22:19:47 2004
Return-Path: <lucene-user-return-10171-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 96160 invoked from network); 10 Sep 2004 22:19:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Sep 2004 22:19:47 -0000
Received: (qmail 15809 invoked by uid 500); 10 Sep 2004 22:19:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 15764 invoked by uid 500); 10 Sep 2004 22:19:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 15729 invoked by uid 99); 10 Sep 2004 22:19:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [209.10.150.72] (HELO web02-nyc.clicvu.com) (209.10.150.72)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Sep 2004 15:19:37 -0700
Received: from [192.168.0.72] by web02-nyc.clicvu.com
          (Post.Office MTA v3.5.3 release 223 ID# 0-64039U1000L100S0V35)
          with SMTP id com for <lucene-user@jakarta.apache.org>;
          Fri, 10 Sep 2004 18:15:32 -0400
Received: from giant-pandas.net (localhost [127.0.0.1])
	by host21.the-web-host.com (8.12.10/8.12.9) with ESMTP id i8AMJWDA029368
	for <*Email Address Suppressed*>; Fri, 10 Sep 2004 18:19:33 -0400
From: roy-lucene-user@xemaps.com
To: lucene-user@jakarta.apache.org                                                                                                                                                                                                                                 
Subject: question on Hits.doc
Date: Fri, 10 Sep 2004 17:19:32 -0500
Message-Id: <20040910221932.M34085@giant-pandas.net>
In-Reply-To: <414217A2.9020707@newsmonster.org>
References: <41409738.2040906@gaussvip.com> <200409092130.51772@danielnaber.de> <414199AD.1040104@gaussvip.com> <098c01c49739$aeabef10$34c2e550@joseph> <4141AF0A.5090907@gaussvip.com> <414217A2.9020707@newsmonster.org>
X-Mailer: Open WebMail 1.81 20021127
X-OriginatingIP: 209.21.98.168 (roy)
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hey guys,

We were noticing some speed problems on our searches and after adding some
debug statements to the lucene source code, we have determined that the
Hits.doc(x) is the problem.  (BTW, we are using Lucene 1.2 [with plans to
upgrade]).  It seems that retrieving the actual Document from the search is
very slow.

We think it might be our "Message" field which stores a huge amount of text. 
We are currently running a test in which we won't "store" the "Message" field,
however, I was wondering if any of you guys would know if that would be the
reason why we're having the performance problems?  If so, could anyone also
please explain it?  It seemed that we weren't having these performance
problems before.  Has anyone else experienced this?  Our environment is NT 4,
JDK 1.4.2, and PIIIs.

I know that for large text fields, storing the field is not a good practice,
however, it held certain conveniences for us that I hope to not get rid of.

Roy.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10172-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 10 23:09:50 2004
Return-Path: <lucene-user-return-10172-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 9564 invoked from network); 10 Sep 2004 23:09:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Sep 2004 23:09:50 -0000
Received: (qmail 77288 invoked by uid 500); 10 Sep 2004 23:09:21 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 77214 invoked by uid 500); 10 Sep 2004 23:09:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 77113 invoked by uid 99); 10 Sep 2004 23:09:18 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.238] (HELO web12701.mail.yahoo.com) (216.136.173.238)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 10 Sep 2004 16:09:13 -0700
Message-ID: <20040910230231.53274.qmail@web12701.mail.yahoo.com>
Received: from [195.29.103.60] by web12701.mail.yahoo.com via HTTP; Fri, 10 Sep 2004 16:02:31 PDT
Date: Fri, 10 Sep 2004 16:02:31 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: question on Hits.doc
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20040910221932.M34085@giant-pandas.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello Roy,

This sounds normal.  When you pull a Document from Hits, you are really
pulling it from the disk.  All fields are read from disk at that time
(i.e. no lazy loading of fields), so if you have large text fields,
this is going to result in a lot of disk IO.  You could try running
vmstat or sar (I'm assuming you are using a UNIX flavour) and look at
the bi/bo (really just bo) column (bo = blocks out -- data read from
disks).

There is not much you can do.  If you don't have to store the field,
they will probably help.  Some people are working on adding support for
field compression, so maybe that will help.

Otis

--- roy-lucene-user@xemaps.com wrote:

> Hey guys,
> 
> We were noticing some speed problems on our searches and after adding
> some
> debug statements to the lucene source code, we have determined that
> the
> Hits.doc(x) is the problem.  (BTW, we are using Lucene 1.2 [with
> plans to
> upgrade]).  It seems that retrieving the actual Document from the
> search is
> very slow.
> 
> We think it might be our "Message" field which stores a huge amount
> of text. 
> We are currently running a test in which we won't "store" the
> "Message" field,
> however, I was wondering if any of you guys would know if that would
> be the
> reason why we're having the performance problems?  If so, could
> anyone also
> please explain it?  It seemed that we weren't having these
> performance
> problems before.  Has anyone else experienced this?  Our environment
> is NT 4,
> JDK 1.4.2, and PIIIs.
> 
> I know that for large text fields, storing the field is not a good
> practice,
> however, it held certain conveniences for us that I hope to not get
> rid of.
> 
> Roy.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10173-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Sep 11 00:03:34 2004
Return-Path: <lucene-user-return-10173-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 52053 invoked from network); 11 Sep 2004 00:03:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Sep 2004 00:03:34 -0000
Received: (qmail 39851 invoked by uid 500); 11 Sep 2004 00:03:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 39660 invoked by uid 500); 11 Sep 2004 00:03:27 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 39646 invoked by uid 99); 11 Sep 2004 00:03:26 -0000
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=PLING_QUERY
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [12.43.53.196] (HELO mail.sofari.com) (12.43.53.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Sep 2004 17:03:25 -0700
Received: from [192.168.1.102] ([12.43.53.196])
	by mail.sofari.com (8.12.11/8.12.3/Debian-6.6) with ESMTP id i8B03AWi020762
	for <lucene-user@jakarta.apache.org>; Fri, 10 Sep 2004 17:03:16 -0700
Message-ID: <414240B9.8060709@newsmonster.org>
Date: Fri, 10 Sep 2004 17:03:05 -0700
From: "Kevin A. Burton" <burton@newsmonster.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7) Gecko/20040616
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: IRC?! 
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

There isn't a Lucene IRC room is there (at least there isn't according 
to Google)?

I just joined #lucene on irc.freenode.net if anyone is interested...

Kevin

-- 

Please reply using PGP.

    http://peerfear.org/pubkey.asc    
    
    NewsMonster - http://www.newsmonster.org/
    
Kevin A. Burton, Location - San Francisco, CA, Cell - 415.595.9965
       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
  IRC - freenode.net #infoanarchy | #p2p-hackers | #newsmonster


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10174-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Sep 11 00:39:14 2004
Return-Path: <lucene-user-return-10174-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 74357 invoked from network); 11 Sep 2004 00:39:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Sep 2004 00:39:14 -0000
Received: (qmail 61191 invoked by uid 500); 11 Sep 2004 00:38:52 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 61140 invoked by uid 500); 11 Sep 2004 00:38:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 61127 invoked by uid 99); 11 Sep 2004 00:38:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Sep 2004 17:38:49 -0700
Received: (qmail 30320 invoked by uid 532); 11 Sep 2004 00:36:21 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.144407 secs); 11 Sep 2004 00:36:21 -0000
Received: from unknown (HELO tropo.com) (127.0.0.1)
  by 0 with SMTP; 11 Sep 2004 00:36:21 -0000
Message-ID: <41424916.703@tropo.com>
Date: Fri, 10 Sep 2004 17:38:46 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7b) Gecko/20040316
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: frequent terms - Re: combining open office spellchecker with Lucene
References: <000001c49572$72cacc00$0a00a8c0@aadlaptop> <41408CCA.5030804@apache.org>
In-Reply-To: <41408CCA.5030804@apache.org>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Doug Cutting wrote:

> Aad Nales wrote:
> 
>> Before I start reinventing wheels I would like to do a short check to
>> see if anybody else has already tried this. A customer has requested us
>> to look into the possibility to perform a spell check on queries. So far
>> the most promising way of doing this seems to be to create an Analyzer
>> based on the spellchecker of OpenOffice. My question is: "has anybody
>> tried this before?" 
> 
> 
> Note that a spell checker used with a search engine should use 
> collection frequency information.  That's to say, only "corrections" 
> which are more frequent in the collection than what the user entered 
> should be displayed.  Frequency information can also be used when 
> constructing the checker.  For example, one need never consider 
> proposing terms that occur in very few documents.  


> And one should not 
> try correction at all for terms which occur in a large proportion of the 
> collection.

I keep thinking over this one and I don't understand it. If a user 
misspells a word and the "did you mean" spelling correction algorithm 
determines that a frequent term is a good suggestion, why not suggest 
it? The very fact that it's common could mean that it's more likely that 
the user wanted this word (well, the heuristic here is that users 
frequently search for frequent terms, which is probabably wrong, but 
anyway..).

I know in other contexts of IR frequent terms are penalized but in this 
context it seems that frequent terms should be fine...

-- Dave



> 
> Doug
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10175-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Sep 11 03:05:35 2004
Return-Path: <lucene-user-return-10175-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 15828 invoked from network); 11 Sep 2004 03:05:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Sep 2004 03:05:35 -0000
Received: (qmail 49154 invoked by uid 500); 11 Sep 2004 03:05:28 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 49114 invoked by uid 500); 11 Sep 2004 03:05:27 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 49092 invoked by uid 99); 11 Sep 2004 03:05:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Sep 2004 20:05:25 -0700
Received: (qmail 54271 invoked by uid 89); 11 Sep 2004 03:05:23 -0000
Received: from unknown (HELO ?192.168.168.81?) (postmaster@cottrell-cutting.net@24.5.163.156)
  by londo.swishmail.com with AES256-SHA encrypted SMTP; 11 Sep 2004 03:05:23 -0000
Message-ID: <41426B0A.1020006@apache.org>
Date: Fri, 10 Sep 2004 20:03:38 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.2) Gecko/20040806
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: frequent terms - Re: combining open office spellchecker with
 Lucene
References: <000001c49572$72cacc00$0a00a8c0@aadlaptop> <41408CCA.5030804@apache.org> <41424916.703@tropo.com>
In-Reply-To: <41424916.703@tropo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

David Spencer wrote:
> Doug Cutting wrote:
> 
>> And one should not try correction at all for terms which occur in a 
>> large proportion of the collection.
> 
> 
> I keep thinking over this one and I don't understand it. If a user 
> misspells a word and the "did you mean" spelling correction algorithm 
> determines that a frequent term is a good suggestion, why not suggest 
> it? The very fact that it's common could mean that it's more likely that 
> the user wanted this word (well, the heuristic here is that users 
> frequently search for frequent terms, which is probabably wrong, but 
> anyway..).

I think you misunderstood me.  What I meant to say was that if the term 
the user enters is very common then spell correction may be skipped. 
Very common words which are similar to the term the user entered should 
of course be shown.  But if the user's term is very common one need not 
even attempt to find similarly-spelled words.  Is that any better?

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10176-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Sep 11 03:41:17 2004
Return-Path: <lucene-user-return-10176-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21525 invoked from network); 11 Sep 2004 03:41:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Sep 2004 03:41:17 -0000
Received: (qmail 68482 invoked by uid 500); 11 Sep 2004 03:41:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 68428 invoked by uid 500); 11 Sep 2004 03:40:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 68415 invoked by uid 99); 11 Sep 2004 03:40:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 10 Sep 2004 20:40:56 -0700
Received: (qmail 5793 invoked by uid 532); 11 Sep 2004 03:38:28 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.187771 secs); 11 Sep 2004 03:38:28 -0000
Received: from unknown (HELO tropo.com) (127.0.0.1)
  by 0 with SMTP; 11 Sep 2004 03:38:28 -0000
Message-ID: <414273C6.8000200@tropo.com>
Date: Fri, 10 Sep 2004 20:40:54 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7b) Gecko/20040316
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: frequent terms - Re: combining open office spellchecker with
 Lucene
References: <000001c49572$72cacc00$0a00a8c0@aadlaptop> <41408CCA.5030804@apache.org> <41424916.703@tropo.com> <41426B0A.1020006@apache.org>
In-Reply-To: <41426B0A.1020006@apache.org>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Doug Cutting wrote:

> David Spencer wrote:
> 
>> Doug Cutting wrote:
>>
>>> And one should not try correction at all for terms which occur in a 
>>> large proportion of the collection.
>>
>>
>>
>> I keep thinking over this one and I don't understand it. If a user 
>> misspells a word and the "did you mean" spelling correction algorithm 
>> determines that a frequent term is a good suggestion, why not suggest 
>> it? The very fact that it's common could mean that it's more likely 
>> that the user wanted this word (well, the heuristic here is that users 
>> frequently search for frequent terms, which is probabably wrong, but 
>> anyway..).
> 
> 
> I think you misunderstood me.  What I meant to say was that if the term 
> the user enters is very common then spell correction may be skipped. 
> Very common words which are similar to the term the user entered should 
> of course be shown.  But if the user's term is very common one need not 
> even attempt to find similarly-spelled words.  Is that any better?

Yes, sure, thx, I understand now - but maybe not - the context I was 
something like this:

[1] The user enters a query like:
     recursize descent parser

[2] The search code parses this and sees that the 1st word is not a term 
in the index, but the next 2 are. So it ignores the last 2 terms 
("recursive" and "descent") and suggests alternatives to 
"recursize"...thus if any term is in the index, regardless of frequency, 
  it is left as-is.

I guess you're saying that, if the user enters a term that appears in 
the index and thus is sort of spelled correctly ( as it exists in some 
doc), then we use the heuristic that any sufficiently large doc 
collection will have tons of misspellings, so we assume that rare terms 
in the query might be misspelled (i.e. not what the user intended) and 
we suggest alternativies to these words too (in addition to the words in 
the query that are not in the index at all).


> 
> Doug
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10177-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Sep 11 07:34:33 2004
Return-Path: <lucene-user-return-10177-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 81727 invoked from network); 11 Sep 2004 07:34:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Sep 2004 07:34:33 -0000
Received: (qmail 9730 invoked by uid 500); 11 Sep 2004 07:34:25 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 9699 invoked by uid 500); 11 Sep 2004 07:34:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 9686 invoked by uid 99); 11 Sep 2004 07:34:25 -0000
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=PLING_QUERY
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [194.159.73.192] (HELO post-22.mail.nl.demon.net) (194.159.73.192)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 11 Sep 2004 00:34:22 -0700
Received: from tijink.demon.nl ([82.161.62.129]:1201 helo=pc)
	by post-22.mail.nl.demon.net with esmtp (Exim 4.34)
	id 1C62On-0003fp-IN
	for lucene-user@jakarta.apache.org; Sat, 11 Sep 2004 07:34:17 +0000
From: "Harald Tijink" <harald@marktplaats.nl>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: IRC?! 
Date: Sat, 11 Sep 2004 09:36:59 +0200
Message-ID: <000b01c497d2$1f6c3cd0$0300a8c0@pc>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2616
In-Reply-To: <414240B9.8060709@newsmonster.org>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I hope your idea isn't to replace this Users List and pull the
discussions into the IRC scene. I (and most of us) can not attend to any
IRC chat because of work and other priorities. This list gives me the
opportunity to keep informed ("involved").

Cheers,

Haarld

> -----Original Message-----
> From: Kevin A. Burton [mailto:burton@newsmonster.org] 
> Sent: 11 September 2004 02:03
> To: Lucene Users List
> Subject: IRC?! 
> 
> 
> There isn't a Lucene IRC room is there (at least there isn't 
> according 
> to Google)?
> 
> I just joined #lucene on irc.freenode.net if anyone is interested...
> 
> Kevin
> 
> -- 
> 
> Please reply using PGP.
> 
    http://peerfear.org/pubkey.asc    
    
    NewsMonster - http://www.newsmonster.org/
    
Kevin A. Burton, Location - San Francisco, CA, Cell - 415.595.9965
       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
  IRC - freenode.net #infoanarchy | #p2p-hackers | #newsmonster


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10178-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Sep 11 11:41:05 2004
Return-Path: <lucene-user-return-10178-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 51676 invoked from network); 11 Sep 2004 11:41:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Sep 2004 11:41:05 -0000
Received: (qmail 47238 invoked by uid 500); 11 Sep 2004 11:40:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 47204 invoked by uid 500); 11 Sep 2004 11:40:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 47189 invoked by uid 99); 11 Sep 2004 11:40:55 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=PLING_PLING
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [205.158.62.199] (HELO ws6-3.us4.outblaze.com) (205.158.62.199)
  by apache.org (qpsmtpd/0.28) with SMTP; Sat, 11 Sep 2004 04:40:54 -0700
Received: (qmail 3582 invoked from network); 11 Sep 2004 11:40:47 -0000
Received: from unknown (HELO ?172.18.1.111?) (erik@hatcher.net@209.204.147.1)
  by ws6-3.us4.outblaze.com with SMTP; 11 Sep 2004 11:40:47 -0000
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <OFC791AC65.CC1C113B-ONC1256F0A.00448154-C1256F0A.00463D09@EU.novartis.net>
References: <OFC791AC65.CC1C113B-ONC1256F0A.00448154-C1256F0A.00463D09@EU.novartis.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <71798AAD-03E7-11D9-B1AD-000393A564E6@hatcher.net>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@hatcher.net>
Subject: Re: TermQuery PROBLEM!!!
Date: Sat, 11 Sep 2004 04:40:56 -0700
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

You have way too much confusing code there for me to try to take in, 
but surely the situation is AnalysisParalysis:

	http://wiki.apache.org/jakarta-lucene/AnalysisParalysis

Try to narrow down things to a very simple example for posting allowing 
others to very quickly and clearly see your code - this makes it easier 
for us to do a more thorough job responding.

	Erik


On Sep 9, 2004, at 5:47 AM, iouli.golovatyi@group.novartis.com wrote:

>
> Hello everybody and esp. Erik:)
>
> In case search entry is empty, I'd like to generate all documents came
> during the last minute
> I have a filed ( created as doc.add(Field.Keyword(F_PUBLISHORT,
> publishort));) containing this data in "yyyyMMddhhMM" format.
>
> The problem is I get nothing, but I do know I have documents with for
> example "200404271420" value
>
> WHAT I DO WRONG?
>
> When I do queries based on QueryParser (i.e. filter!=null) everything 
> is
> ok.
>
> Thanks in advance
> J.
>
>
> ......
>            if (filter==null || filter.equals("")){
>              filter=null;
>              line="200404271420";
>              fld = "publishort";
>            }
> .......
>
>
>             if (filter==null){
>                   query = new TermQuery(new Term(fld,line));
>             }else{
>                   NeisQueryParser nqp=new NeisQueryParser();
>                   query = nqp.parse(line);
>             }
>
>             formated_query=query.toString();
>             Sort sort=null;
>             ms = getMS(); //MultiSearcher
>             if (filter==null) {
>                   if (sort_byscore)hits = ms.search(query,
> getCurrentTimeFilter());
>                   else hits = ms.search(query,getCurrentTimeFilter(),
> "publishort");
>             }else{
>                   if (range_flag){
>                         if (sort_byscore)hits = ms.search(query,
> getDateFilter(),(String)null);
>                         else hits = 
> ms.search(query,getDateFilter(),sort);
>                   }else{
>                         if (sort_byscore)hits = ms.search(query);
>                         else hits = ms.search(query,sort);
>                   }
>             }
>             total_hitnum=hits.length();
>             String logdata="";
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10179-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Sep 11 11:53:16 2004
Return-Path: <lucene-user-return-10179-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 55063 invoked from network); 11 Sep 2004 11:53:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Sep 2004 11:53:15 -0000
Received: (qmail 54803 invoked by uid 500); 11 Sep 2004 11:53:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 54779 invoked by uid 500); 11 Sep 2004 11:53:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 54766 invoked by uid 99); 11 Sep 2004 11:53:07 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [82.199.128.14] (HELO andromeda.dutchdsl.net) (82.199.128.14)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 11 Sep 2004 04:53:06 -0700
Received: from aadlaptop (dsl-82-199-135-164.dutchdsl.nl [82.199.135.164])
	by andromeda.dutchdsl.net (Postfix) with ESMTP id E49105495
	for <lucene-user@jakarta.apache.org>; Sat, 11 Sep 2004 13:51:24 +0200 (CEST)
From: "Aad Nales" <aad.nales@rotterdam-cs.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: frequent terms - Re: combining open office spellchecker with Lucene
Date: Sat, 11 Sep 2004 13:52:53 +0200
Message-ID: <000c01c497f5$e2122c40$0a00a8c0@aadlaptop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2616
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
In-Reply-To: <414273C6.8000200@tropo.com>
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Doug Cutting wrote:

> David Spencer wrote:
> 
>> Doug Cutting wrote:
>>
>>> And one should not try correction at all for terms which occur in a
>>> large proportion of the collection.
>>
>>
>>
>> I keep thinking over this one and I don't understand it. If a user
>> misspells a word and the "did you mean" spelling correction algorithm

>> determines that a frequent term is a good suggestion, why not suggest

>> it? The very fact that it's common could mean that it's more likely 
>> that the user wanted this word (well, the heuristic here is that
users 
>> frequently search for frequent terms, which is probabably wrong, but 
>> anyway..).
> 
> 
> I think you misunderstood me.  What I meant to say was that if the 
> term
> the user enters is very common then spell correction may be skipped. 
> Very common words which are similar to the term the user entered
should 
> of course be shown.  But if the user's term is very common one need
not 
> even attempt to find similarly-spelled words.  Is that any better?

Yes, sure, thx, I understand now - but maybe not - the context I was 
something like this:

[1] The user enters a query like:
     recursize descent parser

[2] The search code parses this and sees that the 1st word is not a term

in the index, but the next 2 are. So it ignores the last 2 terms 
("recursive" and "descent") and suggests alternatives to 
"recursize"...thus if any term is in the index, regardless of frequency,

  it is left as-is.

>>>>
My idea is to first execute the query and only execute the 'spell check'
if the number of results is lower than a certain treshhold. 

Secondly, I would like to use the 'stemming' functionality that MySpell
offers to be used for all stuff that is written to the index together
with the POS appearance.

Thirdly I want to regularly scan the index for often used words to be
added to the list of 'approved' terms. This would serve another purpose
of the customer, which is building an synonym index for Dutch words used
in an eductional context.

But having read all the input I think that using the index itself for a
first spellcheck is probably not a bad start. 
>>>>


I guess you're saying that, if the user enters a term that appears in 
the index and thus is sort of spelled correctly ( as it exists in some 
doc), then we use the heuristic that any sufficiently large doc 
collection will have tons of misspellings, so we assume that rare terms 
in the query might be misspelled (i.e. not what the user intended) and 
we suggest alternativies to these words too (in addition to the words in

the query that are not in the index at all).


> 
> Doug
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10180-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Sep 11 22:41:03 2004
Return-Path: <lucene-user-return-10180-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 67611 invoked from network); 11 Sep 2004 22:41:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Sep 2004 22:41:02 -0000
Received: (qmail 45116 invoked by uid 500); 11 Sep 2004 22:40:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 45081 invoked by uid 500); 11 Sep 2004 22:40:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 45068 invoked by uid 99); 11 Sep 2004 22:40:53 -0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=FORGED_RCVD_HELO,PLING_QUERY
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [209.133.52.163] (HELO www.zrnetservice.com) (209.133.52.163)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 11 Sep 2004 15:40:49 -0700
Received: from adsl-67-114-20-29.dsl.pltn13.pacbell.net ([67.114.20.29] helo=zrnet-Cole_Valley_Cafe.zrnetservice.com)
	by www.zrnetservice.com with asmtp (Exim 3.35 #1 (Debian))
	id 1C6GY1-00015Q-00
	for <lucene-user@jakarta.apache.org>; Sat, 11 Sep 2004 15:40:45 -0700
Received: from [10.100.1.243] (helo=[10.100.1.243])
	by zrnet-Cole_Valley_Cafe.zrnetservice.com with esmtp (Exim 3.36 #1 (Debian))
	id 1C6GXx-0006g0-00
	for <lucene-user@jakarta.apache.org>; Sat, 11 Sep 2004 15:40:41 -0700
Message-ID: <41437EE8.8020300@newsmonster.org>
Date: Sat, 11 Sep 2004 15:40:40 -0700
From: "Kevin A. Burton" <burton@newsmonster.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7) Gecko/20040616
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: IRC?!
References: <000b01c497d2$1f6c3cd0$0300a8c0@pc>
In-Reply-To: <000b01c497d2$1f6c3cd0$0300a8c0@pc>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Harald Tijink wrote:

>I hope your idea isn't to replace this Users List and pull the
>discussions into the IRC scene. I (and most of us) can not attend to any
>IRC chat because of work and other priorities. This list gives me the
>opportunity to keep informed ("involved").
>  
>
Yup... I want to replace the mailing lists, wiki, website, CVS, and 
Bugzilla with IRC. And if you can't keep up thats just your fault ;) (joke).

Its just another tool ;)

Kevin

-- 

Please reply using PGP.

    http://peerfear.org/pubkey.asc    
    
    NewsMonster - http://www.newsmonster.org/
    
Kevin A. Burton, Location - San Francisco, CA, Cell - 415.595.9965
       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
  IRC - freenode.net #infoanarchy | #p2p-hackers | #newsmonster


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10181-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 13 01:32:29 2004
Return-Path: <lucene-user-return-10181-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 54641 invoked from network); 13 Sep 2004 01:32:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Sep 2004 01:32:28 -0000
Received: (qmail 70143 invoked by uid 500); 13 Sep 2004 01:32:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 70089 invoked by uid 500); 13 Sep 2004 01:32:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 70076 invoked by uid 99); 13 Sep 2004 01:32:18 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [210.50.55.251] (HELO file1.syd.nuix.com.au) (210.50.55.251)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 12 Sep 2004 18:32:16 -0700
Received: from [192.168.222.136] (host136.syd.nuix.com.au [192.168.222.136])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id CDB39B6FE1
	for <lucene-user@jakarta.apache.org>; Mon, 13 Sep 2004 11:32:17 +1000 (EST)
Message-ID: <4144F9BF.9040506@nuix.com.au>
Date: Mon, 13 Sep 2004 11:37:03 +1000
From: Minh Kama Yie <minh@nuix.com.au>
User-Agent: Mozilla Thunderbird 0.7.3 (Windows/20040803)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Use of explain() vs search()
References: <413E8A5F.2080302@nuix.com.au> <413E8C26.6040604@nuix.com.au> <8D6AAF52-0176-11D9-A334-000393A564E6@hatcher.net>
In-Reply-To: <8D6AAF52-0176-11D9-A334-000393A564E6@hatcher.net>
Content-Type: multipart/mixed;
 boundary="------------010500000403030704010908"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--------------010500000403030704010908
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Thanks for the reply Erik.
Sorry about the lateness of this reply; I was out of the office last 
week and it took me a bit to create a stand alone test case today.

I should prefix my statements by saying that I've discovered the problem 
I'm having is with 1.3, and it appears fixed in 1.4.
I also undestand that it is kind of illogical to "explain" a query that 
for a document that isn't returned by the query but nonetheless
I'm looking for confirmation that this is a bug and what can be done to 
fix it in 1.3
In doing so I hope to understand the main differences between explain() 
and search().

The test case is attached in the file LuceneTest.java

Notice that if you search for "currently classifies" in the content 
field and "9" in the id field, you will get 0 hits, but the explanation 
returns a value greater than 0.

Thanks in advance guys,

Minh



Erik Hatcher wrote:

> Could you create a simple piece of code (using a RAMDirectory) that 
> demonstrates this issue?
>
>     Erik
>
> On Sep 8, 2004, at 12:35 AM, Minh Kama Yie wrote:
>
>> Hi all,
>>
>> Sorry I should clarify my last point.
>>
>> The search() would return no hits, but the explain() using the 
>> apparently invalid docId returns a value greater than 0.
>>
>> For what it's worth it's performing a PhraseQuery.
>>
>> Thanks in advance,
>>
>> Minh
>>
>> Minh Kama Yie wrote:
>>
>>> Hi all,
>>>
>>>
>>> I was wondering if anyone could tell me what the expected behaviour 
>>> is for calling an explain() without calling a search() first on a 
>>> particular query. Would it effectively do a search and then I can 
>>> examine the Explanation in order to check whether it matches?
>>>
>>> I'm currently looking at some existing code to this effect:
>>>
>>> Explanation  exp = searcher.explain(myQuery, docId)
>>> // Where docId was _not_ returned by a search on myQuery
>>>
>>> if (exp.getValue() > 0.0f)
>>> {
>>>    // Assuming document for docId matched query.
>>> }
>>>
>>> Is the assumption wrong?
>>>
>>> I ask because the result of this code is inconsistent with
>>>
>>> Hits h = searcher.search(myQuery);  // there are not hits returned.
>>>
>>> Thanks in advance,
>>>
>>> Minh
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


--------------010500000403030704010908
Content-Type: text/plain;
 name="LuceneTest.java"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="LuceneTest.java"


import org.apache.lucene.store.Directory;
import org.apache.lucene.store.RAMDirectory;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.search.Hits;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.Explanation;
import org.apache.lucene.queryParser.QueryParser;

/**
 * User: minh
 * Date: 13/09/2004
 * Time: 09:43:43
 */
public class LuceneTest
{
    public static final StandardAnalyzer ANALYZER = new StandardAnalyzer();
    public static final String DOC0 = "currently classifies";
    public static final String DOC1 = "currently does something else";
    public static final String DOC2 = "classifies this as something else";
    public static final String DOC3 = "does not do anytihng at all";
    public static final String DOC4 = "what does this do?";
    public static final String DOC5 = "classifies this as something else";
    public static final String DOC6 = "classifies this as something else";
    public static final String DOC7 = "classifies this as something else";
    public static final String DOC8 = "currently classifies this as something else";
    public static final String DOC9 = "classifies this as something else";
    public static final String DOC10 = "currently classifies this as something else";
    
    public static final String[] DOCS_ARR = new String[] {DOC0, DOC1, DOC2, 
                                                          DOC3, DOC4, DOC5, 
                                                          DOC6, DOC7, DOC8, 
                                                          DOC9, DOC10};
    
    public static final String CONTENT_FIELD = "test-content-field";
    public static final String ID_FIELD = "test-id-field";
    
    public static void main(String[] args)
    {
        try
        {
            // Create the RAMDirectory
            Directory d = new RAMDirectory();
        
            // Create the writer.
            IndexWriter writer = new IndexWriter(d, ANALYZER, true);
        
            // Index the CONTENT_FIELD field.
            for (int i = 0; i < DOCS_ARR.length; i++)
            {
                // Create a document to index.
                Document doc = new Document();        
                doc.add(Field.Text(CONTENT_FIELD, DOCS_ARR[i]));
                doc.add(Field.Text(ID_FIELD, (new Integer(i)).toString()));
                writer.addDocument(doc);
            }
            writer.optimize(); 
            writer.close();
       
            // Create the searcher.
            IndexSearcher searcher = new IndexSearcher(d);
        
            // Create the query parser.
            int idToLookFor = 9;
            QueryParser parser = new QueryParser(CONTENT_FIELD, new StandardAnalyzer());
            parser.setOperator(QueryParser.DEFAULT_OPERATOR_OR);
            String searchString = "+(" + CONTENT_FIELD + ":\"currently classifies\") " +
                    "+(" + ID_FIELD + ":" + idToLookFor + ")";
            Query q = parser.parse(searchString);
            // Now do the searches.
            // Search for +("currently classifies").
            Hits hits = searcher.search(q);
        
            System.out.println("Hits for '" + searchString + "': " + hits.length());
        
            Explanation exp = searcher.explain(q, idToLookFor);
            System.out.println("Explain Value for '" + searchString + "': " + exp.getValue());
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }
}


--------------010500000403030704010908
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
--------------010500000403030704010908--

From lucene-user-return-10182-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 13 07:38:53 2004
Return-Path: <lucene-user-return-10182-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 85641 invoked from network); 13 Sep 2004 07:38:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Sep 2004 07:38:53 -0000
Received: (qmail 93391 invoked by uid 500); 13 Sep 2004 07:38:40 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 93362 invoked by uid 500); 13 Sep 2004 07:38:39 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 93341 invoked by uid 99); 13 Sep 2004 07:38:39 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.155.196.71] (HELO web60808.mail.yahoo.com) (216.155.196.71)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 13 Sep 2004 00:38:36 -0700
Message-ID: <20040913073834.22291.qmail@web60808.mail.yahoo.com>
Received: from [61.16.175.2] by web60808.mail.yahoo.com via HTTP; Mon, 13 Sep 2004 08:38:34 BST
Date: Mon, 13 Sep 2004 08:38:34 +0100 (BST)
From: =?iso-8859-1?q?Honey=20George?= <honey_george@yahoo.com>
Subject: Re: Existing Parsers
To: Lucene Users List <lucene-user@jakarta.apache.org>,
  Chris Fraschetti <fraschetti@gmail.com>
In-Reply-To: <cbdebdf804090912054f9aaa6c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Chris,
   I do not have a stats but I think the performance
is reasonable. I use xpdf for PDF & wvWare for DOC.
The size of my index is ~2GB (this is not limited to
only pdf & doc). For avoiding memory problems, I have
set an upperbound to the size of the documents that
can be indexed. For example in my case I do not index
documents if the size is more that 4MB. You could try
something like that.

Thanks & Regards,
   George

 --- Chris Fraschetti <fraschetti@gmail.com> wrote: 
> Some of the tools listed use cmd line execs to
> output a doc of some
> sort to text and then I grab the text and add it to
> a lucene doc, etc
> etc...
> 
> Any stats on the scalability of that? In large scale
> applications, I'm
> assuming this will cause some serious issues...
> anyone have any input
> on this?
> 
> -Chris Fraschetti
> 
> 
> On Thu, 09 Sep 2004 09:54:43 -0700, David Spencer
> <dave-lucene-user@tropo.com> wrote:
> > Honey George wrote:
> > 
> > > Hi,
> > >   I know some of them.
> > > 1. PDF
> > >  + http://www.pdfbox.org/
> > >  + http://www.foolabs.com/xpdf/download.html
> > >    - I am using this and found good. It even
> supports
> > 
> > My dated experience from 2 years ago was that (the
> evil, native code)
> > foolabs pdf parser was the best, but obviously
> things could have changed.
> > 
> >
>
http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg02912.html
> > 
> > >      various languages.
> > > 2. word
> > >   + http://sourceforge.net/projects/wvware
> > > 3. excel
> > >   +
> http://www.jguru.com/faq/view.jsp?EID=1074230
> > >
> > > -George
> > >  --- dhatcher@webtads.com wrote:
> > >
> > >>Anyone know of any reliable parsers out there
> for
> > >>pdf word
> > >>excel or powerpoint?
> > 
> > For powerpoint it's not easy. I've been using this
> and it has worked
> > fine util recently and seems to sometimes go into
> an infinite loop now
> > on some recent PPTs. Native code and a package
> that seems to be dormant
> > but to some extent it does the job. The file
> "ppthtml" does the work.
> > 
> > http://chicago.sourceforge.net/xlhtml
> > 
> > 
> > 
> > >>
> > >>
> > >
> > >
>
---------------------------------------------------------------------
> > >
> > >>To unsubscribe, e-mail:
> > >>lucene-user-unsubscribe@jakarta.apache.org
> > >>For additional commands, e-mail:
> > >>lucene-user-help@jakarta.apache.org
> > >>
> > >>
> > >
> > >
> > >
> > >
> > >
> > >
> > >
>
___________________________________________________________ALL-NEW
> Yahoo! Messenger - all new features - even more fun!
>  http://uk.messenger.yahoo.com
> > >
> > >
>
---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> > > For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> > >
> > 
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> > 
> >
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> 
>  


	
	
		
___________________________________________________________ALL-NEW Yahoo! Messenger - all new features - even more fun!  http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10183-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 13 08:48:37 2004
Return-Path: <lucene-user-return-10183-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21294 invoked from network); 13 Sep 2004 08:48:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Sep 2004 08:48:36 -0000
Received: (qmail 86829 invoked by uid 500); 13 Sep 2004 08:48:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 86792 invoked by uid 500); 13 Sep 2004 08:48:23 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 86777 invoked by uid 99); 13 Sep 2004 08:48:23 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [193.103.133.77] (HELO hh-mail-2.gauss.de) (193.103.133.77)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Sep 2004 01:48:22 -0700
Received: from [172.20.76.5] ([172.20.76.5]) by
          hh-mail-2.gauss.de (Netscape Messaging Server 4.15) with ESMTP
          id I3Z1GX00.TBP; Mon, 13 Sep 2004 10:41:22 +0200 
Message-ID: <41455D30.4040600@gaussvip.com>
Date: Mon, 13 Sep 2004 10:41:20 +0200
From: "Daniel Taurat" <daniel.taurat@gaussvip.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; de-AT; rv:1.7.2) Gecko/20040803
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
CC: cutting@apache.org
Subject: Re: Out of memory in lucene 1.4.1 when re-indexing  large number
 of documents
References: <CFEHIPOIEGKAJJPJENCEMEFECDAA.rsmazara@ebi.ac.uk> <4141BCA4.8030605@gaussvip.com> <4141C5FD.3020506@gaussvip.com> <4141E855.7050706@apache.org>
In-Reply-To: <4141E855.7050706@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Doug,
you are absolutely right about the older version of the JDK: it is 1.3.1 
(ibm).
Unfortunately we cannot upgrade since we are bound to IBM Portalserver 4 
environment.
Results:
I patched the Lucene1.4.1:
it has improved not much: after indexing 1897 Objects  the number of 
SegmentTermEnum is up to 17936.
To be realistic: This is even a deterioration :(((
My next check will be with a JDK1.4.2 for the test environment, but this 
can only be a reference run for now.

Thanks,
Daniel

Doug Cutting wrote:

> It sounds like the ThreadLocal in TermInfosReader is not getting 
> correctly garbage collected when the TermInfosReader is collected. 
> Researching a bit, this was a bug in JVMs prior to 1.4.2, so my guess 
> is that you're running in an older JVM.  Is that right?

>
> I've attached a patch which should fix this.  Please tell me if it 
> works for you.
>
> Doug
>
> Daniel Taurat wrote:
>
>> Okay, that (1.4rc3)worked fine, too!
>> Got only 257 SegmentTermEnums for 1900 objects.
>>
>> Now I will go for the final test on the production server with the 
>> 1.4rc3 version  and about 40.000 objects.
>>
>> Daniel
>>
>> Daniel Taurat schrieb:
>>
>>> Hi all,
>>> here is some update for you:
>>> I switched back to Lucene 1.3-final and now the  number of the  
>>> SegmentTermEnum objects is controlled by gc again:
>>> it goes up to about 1000 and then it is down again to 254 after 
>>> indexing my 1900 test-objects.
>>> Stay tuned, I will try 1.4RC3 now, the last version before 
>>> FieldCache was introduced...
>>>
>>> Daniel
>>>
>>>
>>> Rupinder Singh Mazara schrieb:
>>>
>>>> hi all
>>>>  I had a similar problem, i have  database of documents with 24 
>>>> fields, and a average content of 7K, with  16M+ records
>>>>
>>>>  i had to split the jobs into slabs of 1M each and merging the 
>>>> resulting indexes, submissions to our job queue looked like
>>>>
>>>>  java -Xms100M -Xcompactexplicitgc -cp $CLASSPATH lucene.Indexer 22
>>>>  
>>>> and i still had outofmemory exception , the solution that i created 
>>>> was to after every 200K, documents create a temp directory, and 
>>>> merge them together, this was done to do the first production run, 
>>>> updates are now being handled incrementally
>>>>
>>>>  
>>>>
>>>> Exception in thread "main" java.lang.OutOfMemoryError
>>>> at 
>>>> org.apache.lucene.store.RAMOutputStream.flushBuffer(RAMOutputStream.java(Compiled 
>>>> Code))
>>>>     at 
>>>> org.apache.lucene.store.OutputStream.flush(OutputStream.java(Inlined 
>>>> Compiled Code))
>>>>     at 
>>>> org.apache.lucene.store.OutputStream.writeByte(OutputStream.java(Inlined 
>>>> Compiled Code))
>>>>     at 
>>>> org.apache.lucene.store.OutputStream.writeBytes(OutputStream.java(Compiled 
>>>> Code))
>>>>     at 
>>>> org.apache.lucene.index.CompoundFileWriter.copyFile(CompoundFileWriter.java(Compiled 
>>>> Code))
>>>>     at 
>>>> org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.java(Compiled 
>>>> Code))
>>>>     at 
>>>> org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMerger.java(Compiled 
>>>> Code))
>>>>     at 
>>>> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java(Compiled 
>>>> Code))
>>>>     at 
>>>> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java(Compiled 
>>>> Code))
>>>>     at 
>>>> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:366)
>>>>     at lucene.Indexer.doIndex(CDBIndexer.java(Compiled Code))
>>>>     at lucene.Indexer.main(CDBIndexer.java:168)
>>>>
>>>>  
>>>>
>>>>> -----Original Message-----
>>>>> From: Daniel Taurat [mailto:daniel.taurat@gaussvip.com]
>>>>> Sent: 10 September 2004 14:42
>>>>> To: Lucene Users List
>>>>> Subject: Re: Out of memory in lucene 1.4.1 when re-indexing large 
>>>>> number
>>>>> of documents
>>>>>
>>>>>
>>>>> Hi Pete,
>>>>> good hint, but we actually do have physical memory of  4Gb on the 
>>>>> system. But then: we also have experienced that the gc of ibm 
>>>>> jdk1.3.1 that we use is sometimes
>>>>> behaving strangely with too large heap space anyway. (Limit seems 
>>>>> to be 1.2 Gb)
>>>>> I can say that gc is not collecting these objects since I  forced 
>>>>> gc runs when indexing every now and then (when parsing pdf-type 
>>>>> objects, that is): No effect.
>>>>>
>>>>> regards,
>>>>>
>>>>> Daniel
>>>>>
>>>>>
>>>>> Pete Lewis wrote:
>>>>>
>>>>>  
>>>>>
>>>>>> Hi all
>>>>>>
>>>>>> Reading the thread with interest, there is another way I've come     
>>>>>
>>>>>
>>>>>
>>>>> across out
>>>>>  
>>>>>
>>>>>> of memory errors when indexing large batches of documents.
>>>>>>
>>>>>> If you have your heap space settings too high, then you get     
>>>>>
>>>>>
>>>>>
>>>>> swapping (which
>>>>>  
>>>>>
>>>>>> impacts performance) plus you never reach the trigger for garbage
>>>>>> collection, hence you don't garbage collect and hence you run 
>>>>>> out     
>>>>>
>>>>>
>>>>>
>>>>> of memory.
>>>>>  
>>>>>
>>>>>> Can you check whether or not your garbage collection is being 
>>>>>> triggered?
>>>>>>
>>>>>> Anomalously therefore if this is the case, by reducing the heap 
>>>>>> space you
>>>>>> can improve performance get rid of the out of memory errors.
>>>>>>
>>>>>> Cheers
>>>>>> Pete Lewis
>>>>>>
>>>>>> ----- Original Message ----- From: "Daniel Taurat" 
>>>>>> <daniel.taurat@gaussvip.com>
>>>>>> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>>> Sent: Friday, September 10, 2004 1:10 PM
>>>>>> Subject: Re: Out of memory in lucene 1.4.1 when re-indexing 
>>>>>> large     
>>>>>
>>>>>
>>>>>
>>>>> number of
>>>>>  
>>>>>
>>>>>> documents
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>   
>>>>>>
>>>>>>> Daniel Aber schrieb:
>>>>>>>
>>>>>>>  
>>>>>>>     
>>>>>>>
>>>>>>>> On Thursday 09 September 2004 19:47, Daniel Taurat wrote:
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>          
>>>>>>>>
>>>>>>>>> I am facing an out of memory problem using  Lucene 1.4.1.
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>                
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> Could you try with a recent CVS version? There has been a fix 
>>>>>>>>         
>>>>>>>
>>>>>>>
>>>>>>>
>>>>> about files
>>>>>  
>>>>>
>>>>>>>> not being deleted after 1.4.1. Not sure if that could cause the 
>>>>>>>> problems
>>>>>>>> you're experiencing.
>>>>>>>>
>>>>>>>> Regards
>>>>>>>> Daniel
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>            
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> Well, it seems not to be files, it looks more like those 
>>>>>>> SegmentTermEnum
>>>>>>> objects accumulating in memory.
>>>>>>> #I've seen some discussion on these objects in the 
>>>>>>> developer-newsgroup
>>>>>>> that had taken place some time ago.
>>>>>>> I am afraid this is some kind of runaway caching I have to deal 
>>>>>>> with.
>>>>>>> Maybe not  correctly addressed in this newsgroup, after all...
>>>>>>>
>>>>>>> Anyway: any idea if there is an API command to re-init caches?
>>>>>>>
>>>>>>> Thanks,
>>>>>>>
>>>>>>> Daniel
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> --------------------------------------------------------------------- 
>>>>>>>
>>>>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>>> For additional commands, e-mail: 
>>>>>>> lucene-user-help@jakarta.apache.org
>>>>>>>
>>>>>>>  
>>>>>>>       
>>>>>>
>>>>>>
>>>>>>
>>>>>> --------------------------------------------------------------------- 
>>>>>>
>>>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>>     
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>
>>>>>
>>>>>   
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>
>>>>
>>>>  
>>>>
>>>
>>>
>>
>>
>------------------------------------------------------------------------
>
>Index: src/java/org/apache/lucene/index/TermInfosReader.java
>===================================================================
>RCS file: /home/cvs/jakarta-lucene/src/java/org/apache/lucene/index/TermInfosReader.java,v
>retrieving revision 1.9
>diff -u -r1.9 TermInfosReader.java
>--- src/java/org/apache/lucene/index/TermInfosReader.java	6 Aug 2004 20:50:29 -0000	1.9
>+++ src/java/org/apache/lucene/index/TermInfosReader.java	10 Sep 2004 17:46:47 -0000
>@@ -45,6 +45,11 @@
>     readIndex();
>   }
> 
>+  protected final void finalize() {
>+    // patch for pre-1.4.2 JVMs, whose ThreadLocals leak
>+    enumerators.set(null);
>+  }
>+
>   public int getSkipInterval() {
>     return origEnum.skipInterval;
>   }
>
>  
>
>------------------------------------------------------------------------
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10184-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 13 08:58:16 2004
Return-Path: <lucene-user-return-10184-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 25679 invoked from network); 13 Sep 2004 08:58:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Sep 2004 08:58:16 -0000
Received: (qmail 97845 invoked by uid 500); 13 Sep 2004 08:57:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 97768 invoked by uid 500); 13 Sep 2004 08:57:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 97589 invoked by uid 99); 13 Sep 2004 08:57:47 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 13 Sep 2004 01:57:46 -0700
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id I3Z1XA00.9TZ for <lucene-user@jakarta.apache.org>; Mon,
          13 Sep 2004 14:21:10 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "LUCENE" <lucene-user@jakarta.apache.org>
Subject: ANT +BUILD  + LUCENE
Date: Mon, 13 Sep 2004 02:14:24 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIOEOPCBAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi

Guys


Apologies..........


The Task for me is to build the Index folder using Lucene &  a simple
Build.xml  for ANT

The Problem ...... Same 'Build .xml'  should be used for differnet O/s...
[ Win / Linux ]

The glitch is  respective jar files such as Lucene-1.4 .jar & other jar
files are not in same dir for the O/s.
Also the  I/p , O/p Indexer path for source/target may also vary.


Please Somebody Help me..... :(



with regards
Karthik




      WITH WARM REGARDS
      HAVE A NICE DAY
      [ N.S.KARTHIK]




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10185-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 13 09:09:42 2004
Return-Path: <lucene-user-return-10185-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 30728 invoked from network); 13 Sep 2004 09:09:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Sep 2004 09:09:42 -0000
Received: (qmail 7364 invoked by uid 500); 13 Sep 2004 09:09:32 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 7208 invoked by uid 500); 13 Sep 2004 09:09:31 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 7188 invoked by uid 99); 13 Sep 2004 09:09:31 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [81.80.239.198] (HELO outbound1.sopragroup.com) (81.80.239.198)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Sep 2004 02:09:29 -0700
Received: by outbound1.sopragroup.com (8.12.10/8.12.10/outbound-A02) with ESMTP id i8D99PKp028221
          for <lucene-user@jakarta.apache.org>; Mon, 13 Sep 2004 11:09:26 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6556.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: question on Hits.doc
Date: Mon, 13 Sep 2004 11:09:25 +0200
Message-ID: <5933531F07A5144E9E53E1AA45257E4BF64D43@wexchbe03.ancy.fr.sopra>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: question on Hits.doc
Thread-Index: AcSXhEbwhHqDxHftQU6TWx0Bff4eyAB661fQ
From: "Cocula Remi" <rcocula@sopragroup.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-OriginalArrivalTime: 13 Sep 2004 09:18:15.0218 (UTC) FILETIME=[9966A920:01C49972]
X-Scanned-By: MIMEDefang 2.38
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

I recently had the same kind of problem but it was due to the way =E0 =
was dealing with Hits.
Obtaining a Hits object from a Query is very fast. but then I was =
looping over ALL the hits to retrieve informations on the documents =
before displaying the result to the user.
It was not necessary because in my case, the display of search results =
is paginated.
Now I extract documents from Hits "on demand" (ie only the few ones I =
need to display a page of results). It's much more better.


-----Message d'origine-----
De : roy-lucene-user@xemaps.com [mailto:roy-lucene-user@xemaps.com]
Envoy=E9 : samedi 11 septembre 2004 00:20
=C0 : lucene-user@jakarta.apache.org
Objet : question on Hits.doc


Hey guys,

We were noticing some speed problems on our searches and after adding =
some
debug statements to the lucene source code, we have determined that the
Hits.doc(x) is the problem.  (BTW, we are using Lucene 1.2 [with plans =
to
upgrade]).  It seems that retrieving the actual Document from the search =
is
very slow.

We think it might be our "Message" field which stores a huge amount of =
text.=20
We are currently running a test in which we won't "store" the "Message" =
field,
however, I was wondering if any of you guys would know if that would be =
the
reason why we're having the performance problems?  If so, could anyone =
also
please explain it?  It seemed that we weren't having these performance
problems before.  Has anyone else experienced this?  Our environment is =
NT 4,
JDK 1.4.2, and PIIIs.

I know that for large text fields, storing the field is not a good =
practice,
however, it held certain conveniences for us that I hope to not get rid =
of.

Roy.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10186-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 13 10:33:01 2004
Return-Path: <lucene-user-return-10186-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 71389 invoked from network); 13 Sep 2004 10:33:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Sep 2004 10:33:01 -0000
Received: (qmail 90598 invoked by uid 500); 13 Sep 2004 10:32:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 90576 invoked by uid 500); 13 Sep 2004 10:32:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 90563 invoked by uid 99); 13 Sep 2004 10:32:53 -0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [195.110.64.125] (HELO smtp.uk.colt.net) (195.110.64.125)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Sep 2004 03:32:52 -0700
Received: from rte.ie (mx.rte.ie [217.173.98.209])
	by smtp.uk.colt.net (Postfix) with ESMTP id BA45C12DC22
	for <lucene-user@jakarta.apache.org>; Mon, 13 Sep 2004 11:32:01 +0100 (BST)
Message-ID: <41457750.3030600@rte.ie>
Date: Mon, 13 Sep 2004 11:32:48 +0100
From: John Moylan <johnm@rte.ie>
User-Agent: Mozilla Thunderbird 0.7.3 (X11/20040803)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Out of memory in lucene 1.4.1 when re-indexing  large number
 of documents
References: <CFEHIPOIEGKAJJPJENCEMEFECDAA.rsmazara@ebi.ac.uk> <4141BCA4.8030605@gaussvip.com> <4141C5FD.3020506@gaussvip.com> <4141E855.7050706@apache.org> <41455D30.4040600@gaussvip.com>
In-Reply-To: <41455D30.4040600@gaussvip.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

IBM JDK1.4.2 should work fine. AFAIK JDK1.3.1 is usable if you disable JIT.

John

Daniel Taurat wrote:
> Hi Doug,
> you are absolutely right about the older version of the JDK: it is 1.3.1 
> (ibm).
> Unfortunately we cannot upgrade since we are bound to IBM Portalserver 4 
> environment.
> Results:
> I patched the Lucene1.4.1:
> it has improved not much: after indexing 1897 Objects  the number of 
> SegmentTermEnum is up to 17936.
> To be realistic: This is even a deterioration :(((
> My next check will be with a JDK1.4.2 for the test environment, but this 
> can only be a reference run for now.
> 
> Thanks,
> Daniel
> 
> Doug Cutting wrote:
> 
>> It sounds like the ThreadLocal in TermInfosReader is not getting 
>> correctly garbage collected when the TermInfosReader is collected. 
>> Researching a bit, this was a bug in JVMs prior to 1.4.2, so my guess 
>> is that you're running in an older JVM.  Is that right?
> 
> 
>>
>> I've attached a patch which should fix this.  Please tell me if it 
>> works for you.
>>
>> Doug
>>
>> Daniel Taurat wrote:
>>
>>> Okay, that (1.4rc3)worked fine, too!
>>> Got only 257 SegmentTermEnums for 1900 objects.
>>>
>>> Now I will go for the final test on the production server with the 
>>> 1.4rc3 version  and about 40.000 objects.
>>>
>>> Daniel
>>>
>>> Daniel Taurat schrieb:
>>>
>>>> Hi all,
>>>> here is some update for you:
>>>> I switched back to Lucene 1.3-final and now the  number of the  
>>>> SegmentTermEnum objects is controlled by gc again:
>>>> it goes up to about 1000 and then it is down again to 254 after 
>>>> indexing my 1900 test-objects.
>>>> Stay tuned, I will try 1.4RC3 now, the last version before 
>>>> FieldCache was introduced...
>>>>
>>>> Daniel
>>>>
>>>>
>>>> Rupinder Singh Mazara schrieb:
>>>>
>>>>> hi all
>>>>>  I had a similar problem, i have  database of documents with 24 
>>>>> fields, and a average content of 7K, with  16M+ records
>>>>>
>>>>>  i had to split the jobs into slabs of 1M each and merging the 
>>>>> resulting indexes, submissions to our job queue looked like
>>>>>
>>>>>  java -Xms100M -Xcompactexplicitgc -cp $CLASSPATH lucene.Indexer 22
>>>>>  
>>>>> and i still had outofmemory exception , the solution that i created 
>>>>> was to after every 200K, documents create a temp directory, and 
>>>>> merge them together, this was done to do the first production run, 
>>>>> updates are now being handled incrementally
>>>>>
>>>>>  
>>>>>
>>>>> Exception in thread "main" java.lang.OutOfMemoryError
>>>>> at 
>>>>> org.apache.lucene.store.RAMOutputStream.flushBuffer(RAMOutputStream.java(Compiled 
>>>>> Code))
>>>>>     at 
>>>>> org.apache.lucene.store.OutputStream.flush(OutputStream.java(Inlined 
>>>>> Compiled Code))
>>>>>     at 
>>>>> org.apache.lucene.store.OutputStream.writeByte(OutputStream.java(Inlined 
>>>>> Compiled Code))
>>>>>     at 
>>>>> org.apache.lucene.store.OutputStream.writeBytes(OutputStream.java(Compiled 
>>>>> Code))
>>>>>     at 
>>>>> org.apache.lucene.index.CompoundFileWriter.copyFile(CompoundFileWriter.java(Compiled 
>>>>> Code))
>>>>>     at 
>>>>> org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.java(Compiled 
>>>>> Code))
>>>>>     at 
>>>>> org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMerger.java(Compiled 
>>>>> Code))
>>>>>     at 
>>>>> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java(Compiled 
>>>>> Code))
>>>>>     at 
>>>>> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java(Compiled 
>>>>> Code))
>>>>>     at 
>>>>> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:366)
>>>>>     at lucene.Indexer.doIndex(CDBIndexer.java(Compiled Code))
>>>>>     at lucene.Indexer.main(CDBIndexer.java:168)
>>>>>
>>>>>  
>>>>>
>>>>>> -----Original Message-----
>>>>>> From: Daniel Taurat [mailto:daniel.taurat@gaussvip.com]
>>>>>> Sent: 10 September 2004 14:42
>>>>>> To: Lucene Users List
>>>>>> Subject: Re: Out of memory in lucene 1.4.1 when re-indexing large 
>>>>>> number
>>>>>> of documents
>>>>>>
>>>>>>
>>>>>> Hi Pete,
>>>>>> good hint, but we actually do have physical memory of  4Gb on the 
>>>>>> system. But then: we also have experienced that the gc of ibm 
>>>>>> jdk1.3.1 that we use is sometimes
>>>>>> behaving strangely with too large heap space anyway. (Limit seems 
>>>>>> to be 1.2 Gb)
>>>>>> I can say that gc is not collecting these objects since I  forced 
>>>>>> gc runs when indexing every now and then (when parsing pdf-type 
>>>>>> objects, that is): No effect.
>>>>>>
>>>>>> regards,
>>>>>>
>>>>>> Daniel
>>>>>>
>>>>>>
>>>>>> Pete Lewis wrote:
>>>>>>
>>>>>>  
>>>>>>
>>>>>>> Hi all
>>>>>>>
>>>>>>> Reading the thread with interest, there is another way I've come     
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> across out
>>>>>>  
>>>>>>
>>>>>>> of memory errors when indexing large batches of documents.
>>>>>>>
>>>>>>> If you have your heap space settings too high, then you get     
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> swapping (which
>>>>>>  
>>>>>>
>>>>>>> impacts performance) plus you never reach the trigger for garbage
>>>>>>> collection, hence you don't garbage collect and hence you run 
>>>>>>> out     
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> of memory.
>>>>>>  
>>>>>>
>>>>>>> Can you check whether or not your garbage collection is being 
>>>>>>> triggered?
>>>>>>>
>>>>>>> Anomalously therefore if this is the case, by reducing the heap 
>>>>>>> space you
>>>>>>> can improve performance get rid of the out of memory errors.
>>>>>>>
>>>>>>> Cheers
>>>>>>> Pete Lewis
>>>>>>>
>>>>>>> ----- Original Message ----- From: "Daniel Taurat" 
>>>>>>> <daniel.taurat@gaussvip.com>
>>>>>>> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>>>> Sent: Friday, September 10, 2004 1:10 PM
>>>>>>> Subject: Re: Out of memory in lucene 1.4.1 when re-indexing 
>>>>>>> large     
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> number of
>>>>>>  
>>>>>>
>>>>>>> documents
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>  
>>>>>>>
>>>>>>>> Daniel Aber schrieb:
>>>>>>>>
>>>>>>>>  
>>>>>>>>    
>>>>>>>>
>>>>>>>>> On Thursday 09 September 2004 19:47, Daniel Taurat wrote:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>         
>>>>>>>>>
>>>>>>>>>> I am facing an out of memory problem using  Lucene 1.4.1.
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>                
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> Could you try with a recent CVS version? There has been a fix 
>>>>>>>>>         
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>> about files
>>>>>>  
>>>>>>
>>>>>>>>> not being deleted after 1.4.1. Not sure if that could cause the 
>>>>>>>>> problems
>>>>>>>>> you're experiencing.
>>>>>>>>>
>>>>>>>>> Regards
>>>>>>>>> Daniel
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>            
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> Well, it seems not to be files, it looks more like those 
>>>>>>>> SegmentTermEnum
>>>>>>>> objects accumulating in memory.
>>>>>>>> #I've seen some discussion on these objects in the 
>>>>>>>> developer-newsgroup
>>>>>>>> that had taken place some time ago.
>>>>>>>> I am afraid this is some kind of runaway caching I have to deal 
>>>>>>>> with.
>>>>>>>> Maybe not  correctly addressed in this newsgroup, after all...
>>>>>>>>
>>>>>>>> Anyway: any idea if there is an API command to re-init caches?
>>>>>>>>
>>>>>>>> Thanks,
>>>>>>>>
>>>>>>>> Daniel
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> --------------------------------------------------------------------- 
>>>>>>>>
>>>>>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>>>> For additional commands, e-mail: 
>>>>>>>> lucene-user-help@jakarta.apache.org
>>>>>>>>
>>>>>>>>  
>>>>>>>>       
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> --------------------------------------------------------------------- 
>>>>>>>
>>>>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>     
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>>
>>>>>>
>>>>>>   
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>
>>>>>
>>>>>  
>>>>>
>>>>
>>>>
>>>
>>>
>> ------------------------------------------------------------------------
>>
>> Index: src/java/org/apache/lucene/index/TermInfosReader.java
>> ===================================================================
>> RCS file: 
>> /home/cvs/jakarta-lucene/src/java/org/apache/lucene/index/TermInfosReader.java,v 
>>
>> retrieving revision 1.9
>> diff -u -r1.9 TermInfosReader.java
>> --- src/java/org/apache/lucene/index/TermInfosReader.java    6 Aug 
>> 2004 20:50:29 -0000    1.9
>> +++ src/java/org/apache/lucene/index/TermInfosReader.java    10 Sep 
>> 2004 17:46:47 -0000
>> @@ -45,6 +45,11 @@
>>     readIndex();
>>   }
>>
>> +  protected final void finalize() {
>> +    // patch for pre-1.4.2 JVMs, whose ThreadLocals leak
>> +    enumerators.set(null);
>> +  }
>> +
>>   public int getSkipInterval() {
>>     return origEnum.skipInterval;
>>   }
>>
>>  
>>
>> ------------------------------------------------------------------------
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


******************************************************************************
The information in this e-mail is confidential and may be legally privileged.
It is intended solely for the addressee. Access to this e-mail by anyone else
is unauthorised. If you are not the intended recipient, any disclosure,
copying, distribution, or any action taken or omitted to be taken in reliance
on it, is prohibited and may be unlawful.
Please note that emails to, from and within RT may be subject to the Freedom
of Information Act 1997 and may be liable to disclosure.
******************************************************************************

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10187-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 13 13:06:27 2004
Return-Path: <lucene-user-return-10187-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 50253 invoked from network); 13 Sep 2004 13:06:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Sep 2004 13:06:27 -0000
Received: (qmail 53882 invoked by uid 500); 13 Sep 2004 13:06:15 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 53842 invoked by uid 500); 13 Sep 2004 13:06:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 53828 invoked by uid 99); 13 Sep 2004 13:06:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [195.47.73.164] (HELO msx-na-server.forrest.local) (195.47.73.164)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Sep 2004 06:06:11 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.0.6375.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-2"
Content-Transfer-Encoding: quoted-printable
Subject: OutOfMemory example
Date: Mon, 13 Sep 2004 15:06:31 +0200
Message-ID: <DEC6C9B7E9CD684ABDA9B285813F648E1C85C1@msx-na-server.forrest.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: OutOfMemory example
Thread-Index: AcSZknx4TYhtTDbdRLCXWOWeLKBS2A==
From: =?iso-8859-2?B?Smn47SBLdWhu?= <kuhn@fg.cz>
To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

	I think I can reproduce memory leaking problem while reopening an =
index. Lucene version tested is 1.4.1, version 1.4 final works OK. My =
JVM is:

$ java -version
java version "1.4.2_05"
Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_05-b04)
Java HotSpot(TM) Client VM (build 1.4.2_05-b04, mixed mode)

	The code you can test is below, there are only 3 iterations for me if I =
use -Xmx5m, the 4th fails.

Jiri.

package test;

import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.Term;
import org.apache.lucene.search.Hits;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.Searcher;
import org.apache.lucene.search.Sort;
import org.apache.lucene.search.SortField;
import org.apache.lucene.search.TermQuery;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.RAMDirectory;

import java.io.IOException;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;

/**
 * Run this test with Lucene 1.4.1 and -Xmx5m
 */
public class ReopenTest
{
    private static long mem_last =3D 0;

    public static void main(String[] args) throws IOException
    {
        Directory directory =3D create_index();

        for (int i =3D 1; i < 100; i++) {
            System.err.println("loop " + i);
            search_index(directory);
        }
    }

    private static void search_index(Directory directory) throws =
IOException
    {
        IndexReader reader =3D IndexReader.open(directory);
        Searcher searcher =3D new IndexSearcher(reader);

        print_mem("search 1");
        SortField[] fields =3D new SortField[2];
        fields[0] =3D new SortField("date", SortField.STRING, true);
        fields[1] =3D new SortField("id", SortField.STRING, false);
        Sort sort =3D new Sort(fields);
        TermQuery query =3D new TermQuery(new Term("text", "\"text =
5\""));

        print_mem("search 2");
        Hits hits =3D searcher.search(query, sort);
        print_mem("search 3");

        for (int i =3D 0; i < hits.length(); i++) {
            Document doc =3D hits.doc(i);
            System.out.println("doc " + i + ": " + doc.toString());
        }
        print_mem("search 4");
        searcher.close();
        reader.close();
    }

    private static void print_mem(String log)
    {
        long mem_free =3D Runtime.getRuntime().freeMemory();
        long mem_total =3D Runtime.getRuntime().totalMemory();
        long mem_max =3D Runtime.getRuntime().maxMemory();

        long delta =3D (mem_last - mem_free) * -1;

        System.out.println(log + "=3D delta: " + delta + ", free: " + =
mem_free + ", used: " +=20
	(mem_total-mem_free) + ", total: " + mem_total + ", max: " + mem_max);

        mem_last =3D mem_free;
    }

    private static Directory create_index() throws IOException
    {
        print_mem("create 1");
        Directory directory =3D new RAMDirectory();

        Calendar c =3D Calendar.getInstance();
        SimpleDateFormat df =3D new SimpleDateFormat("yyyy-MM-dd");
        IndexWriter writer =3D new IndexWriter(directory, new =
StandardAnalyzer(), true);
        for (int i =3D 0; i < 365 * 30; i++) {
            Document doc =3D new Document();

            doc.add(Field.Keyword("date", df.format(new =
Date(c.getTimeInMillis()))));
            doc.add(Field.Keyword("id", "AB" + String.valueOf(i)));
            doc.add(Field.Text("text", "Tohle je text " + i));
            writer.addDocument(doc);

            c.add(Calendar.DAY_OF_YEAR, 1);
        }
        writer.optimize();
        System.err.println("index size: " + writer.docCount());
        writer.close();

        print_mem("create 2");
        return directory;
    }
}

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10188-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 13 13:25:20 2004
Return-Path: <lucene-user-return-10188-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 68377 invoked from network); 13 Sep 2004 13:25:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Sep 2004 13:25:19 -0000
Received: (qmail 82958 invoked by uid 500); 13 Sep 2004 13:25:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 82759 invoked by uid 500); 13 Sep 2004 13:25:10 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 82739 invoked by uid 99); 13 Sep 2004 13:25:10 -0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [195.110.64.125] (HELO smtp.uk.colt.net) (195.110.64.125)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Sep 2004 06:25:08 -0700
Received: from rte.ie (mx.rte.ie [217.173.98.209])
	by smtp.uk.colt.net (Postfix) with ESMTP id 72BEC42E5E
	for <lucene-user@jakarta.apache.org>; Mon, 13 Sep 2004 14:25:05 +0100 (BST)
Message-ID: <41459FAA.30808@rte.ie>
Date: Mon, 13 Sep 2004 14:24:58 +0100
From: John Moylan <johnm@rte.ie>
User-Agent: Mozilla Thunderbird 0.7.3 (X11/20040803)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: OutOfMemory example
References: <DEC6C9B7E9CD684ABDA9B285813F648E1C85C1@msx-na-server.forrest.local>
In-Reply-To: <DEC6C9B7E9CD684ABDA9B285813F648E1C85C1@msx-na-server.forrest.local>
Content-Type: text/plain; charset=ISO-8859-2; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

You should reuse your old index (as eg an application variable) unless 
it has changed - use getCurrentVersion to check the index for updates. 
This has come up before.

John

Ji Kuhn wrote:
> Hi,
> 
> 	I think I can reproduce memory leaking problem while reopening an index. Lucene version tested is 1.4.1, version 1.4 final works OK. My JVM is:
> 
> $ java -version
> java version "1.4.2_05"
> Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_05-b04)
> Java HotSpot(TM) Client VM (build 1.4.2_05-b04, mixed mode)
> 
> 	The code you can test is below, there are only 3 iterations for me if I use -Xmx5m, the 4th fails.
> 
> Jiri.
> 
> package test;
> 
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
> import org.apache.lucene.index.IndexReader;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.index.Term;
> import org.apache.lucene.search.Hits;
> import org.apache.lucene.search.IndexSearcher;
> import org.apache.lucene.search.Searcher;
> import org.apache.lucene.search.Sort;
> import org.apache.lucene.search.SortField;
> import org.apache.lucene.search.TermQuery;
> import org.apache.lucene.store.Directory;
> import org.apache.lucene.store.RAMDirectory;
> 
> import java.io.IOException;
> import java.text.SimpleDateFormat;
> import java.util.Calendar;
> import java.util.Date;
> 
> /**
>  * Run this test with Lucene 1.4.1 and -Xmx5m
>  */
> public class ReopenTest
> {
>     private static long mem_last = 0;
> 
>     public static void main(String[] args) throws IOException
>     {
>         Directory directory = create_index();
> 
>         for (int i = 1; i < 100; i++) {
>             System.err.println("loop " + i);
>             search_index(directory);
>         }
>     }
> 
>     private static void search_index(Directory directory) throws IOException
>     {
>         IndexReader reader = IndexReader.open(directory);
>         Searcher searcher = new IndexSearcher(reader);
> 
>         print_mem("search 1");
>         SortField[] fields = new SortField[2];
>         fields[0] = new SortField("date", SortField.STRING, true);
>         fields[1] = new SortField("id", SortField.STRING, false);
>         Sort sort = new Sort(fields);
>         TermQuery query = new TermQuery(new Term("text", "\"text 5\""));
> 
>         print_mem("search 2");
>         Hits hits = searcher.search(query, sort);
>         print_mem("search 3");
> 
>         for (int i = 0; i < hits.length(); i++) {
>             Document doc = hits.doc(i);
>             System.out.println("doc " + i + ": " + doc.toString());
>         }
>         print_mem("search 4");
>         searcher.close();
>         reader.close();
>     }
> 
>     private static void print_mem(String log)
>     {
>         long mem_free = Runtime.getRuntime().freeMemory();
>         long mem_total = Runtime.getRuntime().totalMemory();
>         long mem_max = Runtime.getRuntime().maxMemory();
> 
>         long delta = (mem_last - mem_free) * -1;
> 
>         System.out.println(log + "= delta: " + delta + ", free: " + mem_free + ", used: " + 
> 	(mem_total-mem_free) + ", total: " + mem_total + ", max: " + mem_max);
> 
>         mem_last = mem_free;
>     }
> 
>     private static Directory create_index() throws IOException
>     {
>         print_mem("create 1");
>         Directory directory = new RAMDirectory();
> 
>         Calendar c = Calendar.getInstance();
>         SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd");
>         IndexWriter writer = new IndexWriter(directory, new StandardAnalyzer(), true);
>         for (int i = 0; i < 365 * 30; i++) {
>             Document doc = new Document();
> 
>             doc.add(Field.Keyword("date", df.format(new Date(c.getTimeInMillis()))));
>             doc.add(Field.Keyword("id", "AB" + String.valueOf(i)));
>             doc.add(Field.Text("text", "Tohle je text " + i));
>             writer.addDocument(doc);
> 
>             c.add(Calendar.DAY_OF_YEAR, 1);
>         }
>         writer.optimize();
>         System.err.println("index size: " + writer.docCount());
>         writer.close();
> 
>         print_mem("create 2");
>         return directory;
>     }
> }
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 

******************************************************************************
The information in this e-mail is confidential and may be legally privileged.
It is intended solely for the addressee. Access to this e-mail by anyone else
is unauthorised. If you are not the intended recipient, any disclosure,
copying, distribution, or any action taken or omitted to be taken in reliance
on it, is prohibited and may be unlawful.
Please note that emails to, from and within RT may be subject to the Freedom
of Information Act 1997 and may be liable to disclosure.
******************************************************************************

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10189-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 13 13:37:38 2004
Return-Path: <lucene-user-return-10189-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 74166 invoked from network); 13 Sep 2004 13:37:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Sep 2004 13:37:37 -0000
Received: (qmail 2127 invoked by uid 500); 13 Sep 2004 13:36:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 2011 invoked by uid 500); 13 Sep 2004 13:36:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 1975 invoked by uid 99); 13 Sep 2004 13:36:49 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [193.103.133.77] (HELO hh-mail-2.gauss.de) (193.103.133.77)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Sep 2004 06:36:47 -0700
Received: from [172.20.76.5] ([172.20.76.5]) by
          hh-mail-2.gauss.de (Netscape Messaging Server 4.15) with ESMTP
          id I3ZED100.1D6; Mon, 13 Sep 2004 15:19:49 +0200 
Message-ID: <41459E73.6080404@gaussvip.com>
Date: Mon, 13 Sep 2004 15:19:47 +0200
From: "Daniel Taurat" <daniel.taurat@gaussvip.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; de-AT; rv:1.7.2) Gecko/20040803
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
CC: cutting@apache.org
Subject: Re: Out of memory in lucene 1.4.1 when re-indexing  large number
 of documents
References: <CFEHIPOIEGKAJJPJENCEMEFECDAA.rsmazara@ebi.ac.uk> <4141BCA4.8030605@gaussvip.com> <4141C5FD.3020506@gaussvip.com> <4141E855.7050706@apache.org> <41455D30.4040600@gaussvip.com>
In-Reply-To: <41455D30.4040600@gaussvip.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Okay,  reference test is done:
on JDK 1.4.2 Lucene 1.4.1 really seems to run fine: just a moderate 
number of SegmentTermEnums that is controlled by gc (about 500 for the 
1900 test objects).


Daniel Taurat wrote:

> Hi Doug,
> you are absolutely right about the older version of the JDK: it is 
> 1.3.1 (ibm).
> Unfortunately we cannot upgrade since we are bound to IBM Portalserver 
> 4 environment.
> Results:
> I patched the Lucene1.4.1:
> it has improved not much: after indexing 1897 Objects  the number of 
> SegmentTermEnum is up to 17936.
> To be realistic: This is even a deterioration :(((
> My next check will be with a JDK1.4.2 for the test environment, but 
> this can only be a reference run for now.
>
> Thanks,
> Daniel
>
> Doug Cutting wrote:
>
>> It sounds like the ThreadLocal in TermInfosReader is not getting 
>> correctly garbage collected when the TermInfosReader is collected. 
>> Researching a bit, this was a bug in JVMs prior to 1.4.2, so my guess 
>> is that you're running in an older JVM.  Is that right?
>
>
>>
>> I've attached a patch which should fix this.  Please tell me if it 
>> works for you.
>>
>> Doug
>>
>> Daniel Taurat wrote:
>>
>>> Okay, that (1.4rc3)worked fine, too!
>>> Got only 257 SegmentTermEnums for 1900 objects.
>>>
>>> Now I will go for the final test on the production server with the 
>>> 1.4rc3 version  and about 40.000 objects.
>>>
>>> Daniel
>>>
>>> Daniel Taurat schrieb:
>>>
>>>> Hi all,
>>>> here is some update for you:
>>>> I switched back to Lucene 1.3-final and now the  number of the  
>>>> SegmentTermEnum objects is controlled by gc again:
>>>> it goes up to about 1000 and then it is down again to 254 after 
>>>> indexing my 1900 test-objects.
>>>> Stay tuned, I will try 1.4RC3 now, the last version before 
>>>> FieldCache was introduced...
>>>>
>>>> Daniel
>>>>
>>>>
>>>> Rupinder Singh Mazara schrieb:
>>>>
>>>>> hi all
>>>>>  I had a similar problem, i have  database of documents with 24 
>>>>> fields, and a average content of 7K, with  16M+ records
>>>>>
>>>>>  i had to split the jobs into slabs of 1M each and merging the 
>>>>> resulting indexes, submissions to our job queue looked like
>>>>>
>>>>>  java -Xms100M -Xcompactexplicitgc -cp $CLASSPATH lucene.Indexer 22
>>>>>  
>>>>> and i still had outofmemory exception , the solution that i 
>>>>> created was to after every 200K, documents create a temp 
>>>>> directory, and merge them together, this was done to do the first 
>>>>> production run, updates are now being handled incrementally
>>>>>
>>>>>  
>>>>>
>>>>> Exception in thread "main" java.lang.OutOfMemoryError
>>>>> at 
>>>>> org.apache.lucene.store.RAMOutputStream.flushBuffer(RAMOutputStream.java(Compiled 
>>>>> Code))
>>>>>     at 
>>>>> org.apache.lucene.store.OutputStream.flush(OutputStream.java(Inlined 
>>>>> Compiled Code))
>>>>>     at 
>>>>> org.apache.lucene.store.OutputStream.writeByte(OutputStream.java(Inlined 
>>>>> Compiled Code))
>>>>>     at 
>>>>> org.apache.lucene.store.OutputStream.writeBytes(OutputStream.java(Compiled 
>>>>> Code))
>>>>>     at 
>>>>> org.apache.lucene.index.CompoundFileWriter.copyFile(CompoundFileWriter.java(Compiled 
>>>>> Code))
>>>>>     at 
>>>>> org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.java(Compiled 
>>>>> Code))
>>>>>     at 
>>>>> org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMerger.java(Compiled 
>>>>> Code))
>>>>>     at 
>>>>> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java(Compiled 
>>>>> Code))
>>>>>     at 
>>>>> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java(Compiled 
>>>>> Code))
>>>>>     at 
>>>>> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:366)
>>>>>     at lucene.Indexer.doIndex(CDBIndexer.java(Compiled Code))
>>>>>     at lucene.Indexer.main(CDBIndexer.java:168)
>>>>>
>>>>>  
>>>>>
>>>>>> -----Original Message-----
>>>>>> From: Daniel Taurat [mailto:daniel.taurat@gaussvip.com]
>>>>>> Sent: 10 September 2004 14:42
>>>>>> To: Lucene Users List
>>>>>> Subject: Re: Out of memory in lucene 1.4.1 when re-indexing large 
>>>>>> number
>>>>>> of documents
>>>>>>
>>>>>>
>>>>>> Hi Pete,
>>>>>> good hint, but we actually do have physical memory of  4Gb on the 
>>>>>> system. But then: we also have experienced that the gc of ibm 
>>>>>> jdk1.3.1 that we use is sometimes
>>>>>> behaving strangely with too large heap space anyway. (Limit seems 
>>>>>> to be 1.2 Gb)
>>>>>> I can say that gc is not collecting these objects since I  forced 
>>>>>> gc runs when indexing every now and then (when parsing pdf-type 
>>>>>> objects, that is): No effect.
>>>>>>
>>>>>> regards,
>>>>>>
>>>>>> Daniel
>>>>>>
>>>>>>
>>>>>> Pete Lewis wrote:
>>>>>>
>>>>>>  
>>>>>>
>>>>>>> Hi all
>>>>>>>
>>>>>>> Reading the thread with interest, there is another way I've 
>>>>>>> come     
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> across out
>>>>>>  
>>>>>>
>>>>>>> of memory errors when indexing large batches of documents.
>>>>>>>
>>>>>>> If you have your heap space settings too high, then you get     
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> swapping (which
>>>>>>  
>>>>>>
>>>>>>> impacts performance) plus you never reach the trigger for garbage
>>>>>>> collection, hence you don't garbage collect and hence you run 
>>>>>>> out     
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> of memory.
>>>>>>  
>>>>>>
>>>>>>> Can you check whether or not your garbage collection is being 
>>>>>>> triggered?
>>>>>>>
>>>>>>> Anomalously therefore if this is the case, by reducing the heap 
>>>>>>> space you
>>>>>>> can improve performance get rid of the out of memory errors.
>>>>>>>
>>>>>>> Cheers
>>>>>>> Pete Lewis
>>>>>>>
>>>>>>> ----- Original Message ----- From: "Daniel Taurat" 
>>>>>>> <daniel.taurat@gaussvip.com>
>>>>>>> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>>>> Sent: Friday, September 10, 2004 1:10 PM
>>>>>>> Subject: Re: Out of memory in lucene 1.4.1 when re-indexing 
>>>>>>> large     
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> number of
>>>>>>  
>>>>>>
>>>>>>> documents
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>  
>>>>>>>
>>>>>>>> Daniel Aber schrieb:
>>>>>>>>
>>>>>>>>  
>>>>>>>>    
>>>>>>>>
>>>>>>>>> On Thursday 09 September 2004 19:47, Daniel Taurat wrote:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>         
>>>>>>>>>
>>>>>>>>>> I am facing an out of memory problem using  Lucene 1.4.1.
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>                
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> Could you try with a recent CVS version? There has been a fix 
>>>>>>>>>         
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>> about files
>>>>>>  
>>>>>>
>>>>>>>>> not being deleted after 1.4.1. Not sure if that could cause 
>>>>>>>>> the problems
>>>>>>>>> you're experiencing.
>>>>>>>>>
>>>>>>>>> Regards
>>>>>>>>> Daniel
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>            
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> Well, it seems not to be files, it looks more like those 
>>>>>>>> SegmentTermEnum
>>>>>>>> objects accumulating in memory.
>>>>>>>> #I've seen some discussion on these objects in the 
>>>>>>>> developer-newsgroup
>>>>>>>> that had taken place some time ago.
>>>>>>>> I am afraid this is some kind of runaway caching I have to deal 
>>>>>>>> with.
>>>>>>>> Maybe not  correctly addressed in this newsgroup, after all...
>>>>>>>>
>>>>>>>> Anyway: any idea if there is an API command to re-init caches?
>>>>>>>>
>>>>>>>> Thanks,
>>>>>>>>
>>>>>>>> Daniel
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> --------------------------------------------------------------------- 
>>>>>>>>
>>>>>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>>>> For additional commands, e-mail: 
>>>>>>>> lucene-user-help@jakarta.apache.org
>>>>>>>>
>>>>>>>>  
>>>>>>>>       
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> --------------------------------------------------------------------- 
>>>>>>>
>>>>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>>> For additional commands, e-mail: 
>>>>>>> lucene-user-help@jakarta.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>     
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> --------------------------------------------------------------------- 
>>>>>>
>>>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>>
>>>>>>
>>>>>>   
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>
>>>>>
>>>>>  
>>>>>
>>>>
>>>>
>>>
>>>
>> ------------------------------------------------------------------------
>>
>> Index: src/java/org/apache/lucene/index/TermInfosReader.java
>> ===================================================================
>> RCS file: 
>> /home/cvs/jakarta-lucene/src/java/org/apache/lucene/index/TermInfosReader.java,v 
>>
>> retrieving revision 1.9
>> diff -u -r1.9 TermInfosReader.java
>> --- src/java/org/apache/lucene/index/TermInfosReader.java    6 Aug 
>> 2004 20:50:29 -0000    1.9
>> +++ src/java/org/apache/lucene/index/TermInfosReader.java    10 Sep 
>> 2004 17:46:47 -0000
>> @@ -45,6 +45,11 @@
>>     readIndex();
>>   }
>>
>> +  protected final void finalize() {
>> +    // patch for pre-1.4.2 JVMs, whose ThreadLocals leak
>> +    enumerators.set(null);
>> +  }
>> +
>>   public int getSkipInterval() {
>>     return origEnum.skipInterval;
>>   }
>>
>>  
>>
>> ------------------------------------------------------------------------
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10190-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 13 13:52:36 2004
Return-Path: <lucene-user-return-10190-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 80909 invoked from network); 13 Sep 2004 13:52:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Sep 2004 13:52:35 -0000
Received: (qmail 23462 invoked by uid 500); 13 Sep 2004 13:52:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 23381 invoked by uid 500); 13 Sep 2004 13:52:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 23350 invoked by uid 99); 13 Sep 2004 13:52:07 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [195.47.73.164] (HELO msx-na-server.forrest.local) (195.47.73.164)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Sep 2004 06:52:04 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.0.6375.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-2"
Content-Transfer-Encoding: quoted-printable
Subject: RE: OutOfMemory example
Date: Mon, 13 Sep 2004 15:52:23 +0200
Message-ID: <DEC6C9B7E9CD684ABDA9B285813F648E1C85C2@msx-na-server.forrest.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: OutOfMemory example
Thread-Index: AcSZlSgEpqroea1ETqeBI0WBhcnrqgAASy2A
From: =?iso-8859-2?B?Smn47SBLdWhu?= <kuhn@fg.cz>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I disagree or I don't understand.=20

I can change the code as it is shown below. Now I must reopen the index =
to see the changes, but the memory problem remains. I realy don't know =
what I'm doing wrong, the code is so simple.

Jiri.

	...

    public static void main(String[] args) throws IOException
    {
        Directory directory =3D create_index();

        for (int i =3D 1; i < 100; i++) {
            System.err.println("loop " + i + ", index version: " + =
IndexReader.getCurrentVersion(directory));
            search_index(directory);
            add_to_index(directory, i);
        }
    }

    private static void add_to_index(Directory directory, int i) throws =
IOException
    {
        IndexWriter writer =3D new IndexWriter(directory, new =
StandardAnalyzer(), false);

        SimpleDateFormat df =3D new SimpleDateFormat("yyyy-MM-dd");
        Document doc =3D new Document();

        doc.add(Field.Keyword("date", df.format(new =
Date(System.currentTimeMillis()))));
        doc.add(Field.Keyword("id", "CD" + String.valueOf(i)));
        doc.add(Field.Text("text", "Tohle neni text " + i));
        writer.addDocument(doc);

        System.err.println("index size: " + writer.docCount());
        writer.close();
    }

	...

-----Original Message-----
From: John Moylan [mailto:johnm@rte.ie]
Sent: Monday, September 13, 2004 3:25 PM
To: Lucene Users List
Subject: Re: OutOfMemory example


You should reuse your old index (as eg an application variable) unless=20
it has changed - use getCurrentVersion to check the index for updates.=20
This has come up before.

John


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10191-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 13 14:57:04 2004
Return-Path: <lucene-user-return-10191-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 17445 invoked from network); 13 Sep 2004 14:57:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Sep 2004 14:57:04 -0000
Received: (qmail 72443 invoked by uid 500); 13 Sep 2004 14:56:32 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 72376 invoked by uid 500); 13 Sep 2004 14:56:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 72319 invoked by uid 99); 13 Sep 2004 14:56:30 -0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [195.110.64.125] (HELO smtp.uk.colt.net) (195.110.64.125)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Sep 2004 07:56:27 -0700
Received: from rte.ie (mx.rte.ie [217.173.98.209])
	by smtp.uk.colt.net (Postfix) with ESMTP id 9C06712741E
	for <lucene-user@jakarta.apache.org>; Mon, 13 Sep 2004 15:49:35 +0100 (BST)
Message-ID: <4145B445.6080007@rte.ie>
Date: Mon, 13 Sep 2004 15:52:53 +0100
From: John Moylan <johnm@rte.ie>
User-Agent: Mozilla Thunderbird 0.7.3 (X11/20040803)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: OutOfMemory example
References: <DEC6C9B7E9CD684ABDA9B285813F648E1C85C2@msx-na-server.forrest.local>
In-Reply-To: <DEC6C9B7E9CD684ABDA9B285813F648E1C85C2@msx-na-server.forrest.local>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

http://issues.apache.org/bugzilla/show_bug.cgi?id=30628

you can close the index, but the Garbage Collector still needs to 
reclaim the memory and it may be taking longer than your loop to do so.

John

Ji Kuhn wrote:
> I disagree or I don't understand. 
> 
> I can change the code as it is shown below. Now I must reopen the index to see the changes, but the memory problem remains. I realy don't know what I'm doing wrong, the code is so simple.
> 
> Jiri.
> 
> 	...
> 
>     public static void main(String[] args) throws IOException
>     {
>         Directory directory = create_index();
> 
>         for (int i = 1; i < 100; i++) {
>             System.err.println("loop " + i + ", index version: " + IndexReader.getCurrentVersion(directory));
>             search_index(directory);
>             add_to_index(directory, i);
>         }
>     }
> 
>     private static void add_to_index(Directory directory, int i) throws IOException
>     {
>         IndexWriter writer = new IndexWriter(directory, new StandardAnalyzer(), false);
> 
>         SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd");
>         Document doc = new Document();
> 
>         doc.add(Field.Keyword("date", df.format(new Date(System.currentTimeMillis()))));
>         doc.add(Field.Keyword("id", "CD" + String.valueOf(i)));
>         doc.add(Field.Text("text", "Tohle neni text " + i));
>         writer.addDocument(doc);
> 
>         System.err.println("index size: " + writer.docCount());
>         writer.close();
>     }
> 
> 	...
> 
> -----Original Message-----
> From: John Moylan [mailto:johnm@rte.ie]
> Sent: Monday, September 13, 2004 3:25 PM
> To: Lucene Users List
> Subject: Re: OutOfMemory example
> 
> 
> You should reuse your old index (as eg an application variable) unless 
> it has changed - use getCurrentVersion to check the index for updates. 
> This has come up before.
> 
> John
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 

******************************************************************************
The information in this e-mail is confidential and may be legally privileged.
It is intended solely for the addressee. Access to this e-mail by anyone else
is unauthorised. If you are not the intended recipient, any disclosure,
copying, distribution, or any action taken or omitted to be taken in reliance
on it, is prohibited and may be unlawful.
Please note that emails to, from and within RT may be subject to the Freedom
of Information Act 1997 and may be liable to disclosure.
******************************************************************************

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10192-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 13 15:14:14 2004
Return-Path: <lucene-user-return-10192-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 26880 invoked from network); 13 Sep 2004 15:14:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Sep 2004 15:14:12 -0000
Received: (qmail 2245 invoked by uid 500); 13 Sep 2004 15:14:01 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 2215 invoked by uid 500); 13 Sep 2004 15:14:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 2197 invoked by uid 99); 13 Sep 2004 15:14:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Sep 2004 08:13:58 -0700
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 13 Sep 2004 17:15:55 +0200
Message-ID: <4145B9A9.4000006@ifit.uni-klu.ac.at>
Date: Mon, 13 Sep 2004 17:15:53 +0200
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: OutOfMemory example
References: <DEC6C9B7E9CD684ABDA9B285813F648E1C85C2@msx-na-server.forrest.local>
In-Reply-To: <DEC6C9B7E9CD684ABDA9B285813F648E1C85C2@msx-na-server.forrest.local>
Content-Type: text/plain; charset=ISO-8859-2; format=flowed
Content-Transfer-Encoding: 8bit
X-OriginalArrivalTime: 13 Sep 2004 15:15:55.0252 (UTC) FILETIME=[9093FB40:01C499A4]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I have a few comments regarding your code ...
1. Why do you use RamDirectory and not the hard disk?
2. as John said, you should reuse the index instead of creating it each 
time in the main function
    if(!indexExists(File indexFile))
         IndexWriter writer = new IndexWriter(directory, new 
StandardAnalyzer(), true);
    else
         IndexWriter writer = new IndexWriter(directory, new 
StandardAnalyzer(), false);
    (in some cases indexExists can be as simple as verifying if the file 
exits on the hard disk)

3. you iterate in a loop over 10.000 times and you create a lot of objects
   

for (int i = 0; i < 365 * 30; i++) {
            Document doc = new Document();

            doc.add(Field.Keyword("date", df.format(new 
Date(c.getTimeInMillis()))));
            doc.add(Field.Keyword("id", "AB" + String.valueOf(i)));
            doc.add(Field.Text("text", "Tohle je text " + i));
            writer.addDocument(doc);

            c.add(Calendar.DAY_OF_YEAR, 1);
        }
all the underlined lines of code create new  ojects, and all of them are 
kept in memory.
This is a lot of memory allocated only by this loop. I think that you 
create more than 100.000 object in this loop ...
What do you think?
And none of them cannot be realeased (collected by gc) untill you close 
the index writer.

None says that your code is complicated, but all programmers should 
understand that this is a poor design...
And ... more then that your information is kept in a RamDirectory 
....when you will close the writer you will still keep the information 
in memory ...

Sory if I was too agressive with my comments .... but ... I cannot see 
what were you thinking when you wrote that code ...

If you are trying to make a test .... then I sugest you to replace the 
hard codded 365 value ... with a variable, to iterate over it and to 
test the power of your machine
(PC + JVM) :))

I wish you luck,

 Sergiu






Ji Kuhn wrote:

>I disagree or I don't understand. 
>
>I can change the code as it is shown below. Now I must reopen the index to see the changes, but the memory problem remains. I realy don't know what I'm doing wrong, the code is so simple.
>
>Jiri.
>
>	...
>
>    public static void main(String[] args) throws IOException
>    {
>        Directory directory = create_index();
>
>        for (int i = 1; i < 100; i++) {
>            System.err.println("loop " + i + ", index version: " + IndexReader.getCurrentVersion(directory));
>            search_index(directory);
>            add_to_index(directory, i);
>        }
>    }
>
>    private static void add_to_index(Directory directory, int i) throws IOException
>    {
>        IndexWriter writer = new IndexWriter(directory, new StandardAnalyzer(), false);
>
>        SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd");
>        Document doc = new Document();
>
>        doc.add(Field.Keyword("date", df.format(new Date(System.currentTimeMillis()))));
>        doc.add(Field.Keyword("id", "CD" + String.valueOf(i)));
>        doc.add(Field.Text("text", "Tohle neni text " + i));
>        writer.addDocument(doc);
>
>        System.err.println("index size: " + writer.docCount());
>        writer.close();
>    }
>
>	...
>
>-----Original Message-----
>From: John Moylan [mailto:johnm@rte.ie]
>Sent: Monday, September 13, 2004 3:25 PM
>To: Lucene Users List
>Subject: Re: OutOfMemory example
>
>
>You should reuse your old index (as eg an application variable) unless 
>it has changed - use getCurrentVersion to check the index for updates. 
>This has come up before.
>
>John
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10193-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 13 15:22:49 2004
Return-Path: <lucene-user-return-10193-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 31469 invoked from network); 13 Sep 2004 15:22:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Sep 2004 15:22:49 -0000
Received: (qmail 18881 invoked by uid 500); 13 Sep 2004 15:22:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 18698 invoked by uid 500); 13 Sep 2004 15:22:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 18684 invoked by uid 99); 13 Sep 2004 15:22:40 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=MIME_BASE64_NO_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [195.47.73.164] (HELO msx-na-server.forrest.local) (195.47.73.164)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Sep 2004 08:22:39 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.0.6375.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: base64
Subject: RE: OutOfMemory example
Date: Mon, 13 Sep 2004 17:22:59 +0200
Message-ID: <DEC6C9B7E9CD684ABDA9B285813F648E1C85C3@msx-na-server.forrest.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: OutOfMemory example
Thread-Index: AcSZofXm0GJEpzEAS8+pxFjnmSlZpwAAIk0Q
From: =?UTF-8?B?SmnFmcOtIEt1aG4=?= <kuhn@fg.cz>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

VGhhbmtzIGZvciB0aGUgYnVnJ3MgaWQsIGl0IHNlZW1zIGxpa2UgbXkgcHJvYmxlbSBhbmQgSSBo
YXZlIGEgc3RhbmQtYWxvbmUgY29kZSB3aXRoIG1haW4oKS4NCg0KV2hhdCBhYm91dCBzbG93IGdh
cmJhZ2UgY29sbGVjdG9yPyBUaGlzIGxvb2tzIGZvciBtZSBhcyB3cm9uZyBzdWdnZXN0aW9uLg0K
DQpMZXQgY2hhbmdlIHRoZSBjb2RlIG9uY2UgYWdhaW46DQoNCi4uLg0KICAgIHB1YmxpYyBzdGF0
aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHRocm93cyBJT0V4Y2VwdGlvbiwgSW50ZXJydXB0
ZWRFeGNlcHRpb24NCiAgICB7DQogICAgICAgIERpcmVjdG9yeSBkaXJlY3RvcnkgPSBjcmVhdGVf
aW5kZXgoKTsNCg0KICAgICAgICBmb3IgKGludCBpID0gMTsgaSA8IDEwMDsgaSsrKSB7DQogICAg
ICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oImxvb3AgIiArIGkgKyAiLCBpbmRleCB2ZXJzaW9u
OiAiICsgSW5kZXhSZWFkZXIuZ2V0Q3VycmVudFZlcnNpb24oZGlyZWN0b3J5KSk7DQogICAgICAg
ICAgICBzZWFyY2hfaW5kZXgoZGlyZWN0b3J5KTsNCiAgICAgICAgICAgIGFkZF90b19pbmRleChk
aXJlY3RvcnksIGkpOw0KICAgICAgICAgICAgU3lzdGVtLmdjKCk7DQogICAgICAgICAgICBUaHJl
YWQuc2xlZXAoMTAwMCk7Ly8gd2hhdGV2ZXIgdmFsdWUgeW91IHdhbnQNCiAgICAgICAgfQ0KICAg
IH0NCi4uLg0KDQphbmQgaW4gdGhlIDR0aCBpdGVyYXRpb24gamF2YS5sYW5nLk91dE9mTWVtb3J5
RXJyb3IgYXBwZWFycyBhZ2Fpbi4NCg0KSmlyaS4NCg0KDQotLS0tLU9yaWdpbmFsIE1lc3NhZ2Ut
LS0tLQ0KRnJvbTogSm9obiBNb3lsYW4gW21haWx0bzpqb2hubUBydGUuaWVdDQpTZW50OiBNb25k
YXksIFNlcHRlbWJlciAxMywgMjAwNCA0OjUzIFBNDQpUbzogTHVjZW5lIFVzZXJzIExpc3QNClN1
YmplY3Q6IFJlOiBPdXRPZk1lbW9yeSBleGFtcGxlDQoNCg0KaHR0cDovL2lzc3Vlcy5hcGFjaGUu
b3JnL2J1Z3ppbGxhL3Nob3dfYnVnLmNnaT9pZD0zMDYyOA0KDQp5b3UgY2FuIGNsb3NlIHRoZSBp
bmRleCwgYnV0IHRoZSBHYXJiYWdlIENvbGxlY3RvciBzdGlsbCBuZWVkcyB0byANCnJlY2xhaW0g
dGhlIG1lbW9yeSBhbmQgaXQgbWF5IGJlIHRha2luZyBsb25nZXIgdGhhbiB5b3VyIGxvb3AgdG8g
ZG8gc28uDQoNCkpvaG4NCg0K


From lucene-user-return-10194-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 13 15:28:53 2004
Return-Path: <lucene-user-return-10194-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 34399 invoked from network); 13 Sep 2004 15:28:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Sep 2004 15:28:52 -0000
Received: (qmail 30013 invoked by uid 500); 13 Sep 2004 15:28:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 29931 invoked by uid 500); 13 Sep 2004 15:28:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 29750 invoked by uid 99); 13 Sep 2004 15:28:32 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [195.47.73.164] (HELO msx-na-server.forrest.local) (195.47.73.164)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Sep 2004 08:28:30 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.0.6375.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-2"
Content-Transfer-Encoding: quoted-printable
Subject: RE: OutOfMemory example
Date: Mon, 13 Sep 2004 17:28:50 +0200
Message-ID: <DEC6C9B7E9CD684ABDA9B285813F648E1C85C4@msx-na-server.forrest.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: OutOfMemory example
Thread-Index: AcSZpFv8e+DzuA1rTQuCLwbscdtIBwAATO1A
From: =?iso-8859-2?B?Smn47SBLdWhu?= <kuhn@fg.cz>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

You don't see the point of my post. I sent an application which can =
everyone run only with lucene jar and in deterministic way produce =
OutOfMemoryError.

That's all.

Jiri.


-----Original Message-----
From: sergiu gordea [mailto:gsergiu@ifit.uni-klu.ac.at]
Sent: Monday, September 13, 2004 5:16 PM
To: Lucene Users List
Subject: Re: OutOfMemory example


I have a few comments regarding your code ...
1. Why do you use RamDirectory and not the hard disk?
2. as John said, you should reuse the index instead of creating it each=20
time in the main function
    if(!indexExists(File indexFile))
         IndexWriter writer =3D new IndexWriter(directory, new=20
StandardAnalyzer(), true);
    else
         IndexWriter writer =3D new IndexWriter(directory, new=20
StandardAnalyzer(), false);
    (in some cases indexExists can be as simple as verifying if the file =

exits on the hard disk)

3. you iterate in a loop over 10.000 times and you create a lot of =
objects
  =20

for (int i =3D 0; i < 365 * 30; i++) {
            Document doc =3D new Document();

            doc.add(Field.Keyword("date", df.format(new=20
Date(c.getTimeInMillis()))));
            doc.add(Field.Keyword("id", "AB" + String.valueOf(i)));
            doc.add(Field.Text("text", "Tohle je text " + i));
            writer.addDocument(doc);

            c.add(Calendar.DAY_OF_YEAR, 1);
        }
all the underlined lines of code create new  ojects, and all of them are =

kept in memory.
This is a lot of memory allocated only by this loop. I think that you=20
create more than 100.000 object in this loop ...
What do you think?
And none of them cannot be realeased (collected by gc) untill you close=20
the index writer.

None says that your code is complicated, but all programmers should=20
understand that this is a poor design...
And ... more then that your information is kept in a RamDirectory=20
....when you will close the writer you will still keep the information=20
in memory ...

Sory if I was too agressive with my comments .... but ... I cannot see=20
what were you thinking when you wrote that code ...

If you are trying to make a test .... then I sugest you to replace the=20
hard codded 365 value ... with a variable, to iterate over it and to=20
test the power of your machine
(PC + JVM) :))

I wish you luck,

 Sergiu






Ji=F8=ED Kuhn wrote:

>I disagree or I don't understand.=20
>
>I can change the code as it is shown below. Now I must reopen the index =
to see the changes, but the memory problem remains. I realy don't know =
what I'm doing wrong, the code is so simple.
>
>Jiri.
>
>	...
>
>    public static void main(String[] args) throws IOException
>    {
>        Directory directory =3D create_index();
>
>        for (int i =3D 1; i < 100; i++) {
>            System.err.println("loop " + i + ", index version: " + =
IndexReader.getCurrentVersion(directory));
>            search_index(directory);
>            add_to_index(directory, i);
>        }
>    }
>
>    private static void add_to_index(Directory directory, int i) throws =
IOException
>    {
>        IndexWriter writer =3D new IndexWriter(directory, new =
StandardAnalyzer(), false);
>
>        SimpleDateFormat df =3D new SimpleDateFormat("yyyy-MM-dd");
>        Document doc =3D new Document();
>
>        doc.add(Field.Keyword("date", df.format(new =
Date(System.currentTimeMillis()))));
>        doc.add(Field.Keyword("id", "CD" + String.valueOf(i)));
>        doc.add(Field.Text("text", "Tohle neni text " + i));
>        writer.addDocument(doc);
>
>        System.err.println("index size: " + writer.docCount());
>        writer.close();
>    }
>
>	...
>
>-----Original Message-----
>From: John Moylan [mailto:johnm@rte.ie]
>Sent: Monday, September 13, 2004 3:25 PM
>To: Lucene Users List
>Subject: Re: OutOfMemory example
>
>
>You should reuse your old index (as eg an application variable) unless=20
>it has changed - use getCurrentVersion to check the index for updates.=20
>This has come up before.
>
>John
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
> =20
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10195-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 13 15:34:15 2004
Return-Path: <lucene-user-return-10195-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 43209 invoked from network); 13 Sep 2004 15:34:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Sep 2004 15:34:15 -0000
Received: (qmail 42644 invoked by uid 500); 13 Sep 2004 15:34:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 42614 invoked by uid 500); 13 Sep 2004 15:34:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 42594 invoked by uid 99); 13 Sep 2004 15:34:05 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Sep 2004 08:34:03 -0700
Received: (qmail 19502 invoked by uid 532); 13 Sep 2004 15:31:30 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.133517 secs); 13 Sep 2004 15:31:30 -0000
Received: from unknown (HELO tropo.com) (127.0.0.1)
  by 0 with SMTP; 13 Sep 2004 15:31:30 -0000
Message-ID: <4145BDE8.9050004@tropo.com>
Date: Mon, 13 Sep 2004 08:34:00 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7b) Gecko/20040316
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: force gc idiom - Re: OutOfMemory example
References: <DEC6C9B7E9CD684ABDA9B285813F648E1C85C3@msx-na-server.forrest.local>
In-Reply-To: <DEC6C9B7E9CD684ABDA9B285813F648E1C85C3@msx-na-server.forrest.local>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Ji Kuhn wrote:

> Thanks for the bug's id, it seems like my problem and I have a stand-alone code with main().
> 
> What about slow garbage collector? This looks for me as wrong suggestion.


I've seen this written up before (javaworld?) as a way to probably 
"force" GC instead of just a System.gc() call. I think the 2nd gc() call 
is supposed to clean up junk from the runFinalization() call...

System.gc();
Thread.sleep( 100);
System.runFinalization();
Thread.sleep( 100);
System.gc();

> 
> Let change the code once again:
> 
> ...
>     public static void main(String[] args) throws IOException, InterruptedException
>     {
>         Directory directory = create_index();
> 
>         for (int i = 1; i < 100; i++) {
>             System.err.println("loop " + i + ", index version: " + IndexReader.getCurrentVersion(directory));
>             search_index(directory);
>             add_to_index(directory, i);
>             System.gc();
>             Thread.sleep(1000);// whatever value you want
>         }
>     }
> ...
> 
> and in the 4th iteration java.lang.OutOfMemoryError appears again.
> 
> Jiri.
> 
> 
> -----Original Message-----
> From: John Moylan [mailto:johnm@rte.ie]
> Sent: Monday, September 13, 2004 4:53 PM
> To: Lucene Users List
> Subject: Re: OutOfMemory example
> 
> 
> http://issues.apache.org/bugzilla/show_bug.cgi?id=30628
> 
> you can close the index, but the Garbage Collector still needs to 
> reclaim the memory and it may be taking longer than your loop to do so.
> 
> John
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10196-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 13 15:50:54 2004
Return-Path: <lucene-user-return-10196-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 53988 invoked from network); 13 Sep 2004 15:50:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Sep 2004 15:50:54 -0000
Received: (qmail 75060 invoked by uid 500); 13 Sep 2004 15:50:45 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 75009 invoked by uid 500); 13 Sep 2004 15:50:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 74995 invoked by uid 99); 13 Sep 2004 15:50:44 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=MIME_BASE64_NO_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [195.47.73.164] (HELO msx-na-server.forrest.local) (195.47.73.164)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Sep 2004 08:50:42 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.0.6375.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: base64
Subject: RE: force gc idiom - Re: OutOfMemory example
Date: Mon, 13 Sep 2004 17:51:02 +0200
Message-ID: <DEC6C9B7E9CD684ABDA9B285813F648E1C85C6@msx-na-server.forrest.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: force gc idiom - Re: OutOfMemory example
Thread-Index: AcSZpyn7hrKMtOXxSFem/C4ZumKvywAAVc/g
From: =?UTF-8?B?SmnFmcOtIEt1aG4=?= <kuhn@fg.cz>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

VGhpcyBkb2Vzbid0IHdvcmsgZWl0aGVyIQ0KDQpMZXRzIGNvbmNlbnRyYXRlIG9uIHRoZSBmaXJz
dCB2ZXJzaW9uIG9mIG15IGNvZGUuIEkgYmVsaWV2ZSB0aGF0IHRoZSBjb2RlIHNob3VsZCBydW4g
ZW5kbGVzbHkgKEkgaGF2ZSBzYWlkIGl0IGJlZm9yZTogaW4gdmVyc2lvbiAxLjQgZmluYWwgaXQg
ZG9lcykuDQoNCkppcmkuDQoNCi0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQpGcm9tOiBEYXZp
ZCBTcGVuY2VyIFttYWlsdG86ZGF2ZS1sdWNlbmUtdXNlckB0cm9wby5jb21dDQpTZW50OiBNb25k
YXksIFNlcHRlbWJlciAxMywgMjAwNCA1OjM0IFBNDQpUbzogTHVjZW5lIFVzZXJzIExpc3QNClN1
YmplY3Q6IGZvcmNlIGdjIGlkaW9tIC0gUmU6IE91dE9mTWVtb3J5IGV4YW1wbGUNCg0KDQpKacWZ
w60gS3VobiB3cm90ZToNCg0KPiBUaGFua3MgZm9yIHRoZSBidWcncyBpZCwgaXQgc2VlbXMgbGlr
ZSBteSBwcm9ibGVtIGFuZCBJIGhhdmUgYSBzdGFuZC1hbG9uZSBjb2RlIHdpdGggbWFpbigpLg0K
PiANCj4gV2hhdCBhYm91dCBzbG93IGdhcmJhZ2UgY29sbGVjdG9yPyBUaGlzIGxvb2tzIGZvciBt
ZSBhcyB3cm9uZyBzdWdnZXN0aW9uLg0KDQoNCkkndmUgc2VlbiB0aGlzIHdyaXR0ZW4gdXAgYmVm
b3JlIChqYXZhd29ybGQ/KSBhcyBhIHdheSB0byBwcm9iYWJseSANCiJmb3JjZSIgR0MgaW5zdGVh
ZCBvZiBqdXN0IGEgU3lzdGVtLmdjKCkgY2FsbC4gSSB0aGluayB0aGUgMm5kIGdjKCkgY2FsbCAN
CmlzIHN1cHBvc2VkIHRvIGNsZWFuIHVwIGp1bmsgZnJvbSB0aGUgcnVuRmluYWxpemF0aW9uKCkg
Y2FsbC4uLg0KDQpTeXN0ZW0uZ2MoKTsNClRocmVhZC5zbGVlcCggMTAwKTsNClN5c3RlbS5ydW5G
aW5hbGl6YXRpb24oKTsNClRocmVhZC5zbGVlcCggMTAwKTsNClN5c3RlbS5nYygpOw0KDQo+IA0K
PiBMZXQgY2hhbmdlIHRoZSBjb2RlIG9uY2UgYWdhaW46DQo+IA0KPiAuLi4NCj4gICAgIHB1Ymxp
YyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHRocm93cyBJT0V4Y2VwdGlvbiwgSW50
ZXJydXB0ZWRFeGNlcHRpb24NCj4gICAgIHsNCj4gICAgICAgICBEaXJlY3RvcnkgZGlyZWN0b3J5
ID0gY3JlYXRlX2luZGV4KCk7DQo+IA0KPiAgICAgICAgIGZvciAoaW50IGkgPSAxOyBpIDwgMTAw
OyBpKyspIHsNCj4gICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKCJsb29wICIgKyBpICsg
IiwgaW5kZXggdmVyc2lvbjogIiArIEluZGV4UmVhZGVyLmdldEN1cnJlbnRWZXJzaW9uKGRpcmVj
dG9yeSkpOw0KPiAgICAgICAgICAgICBzZWFyY2hfaW5kZXgoZGlyZWN0b3J5KTsNCj4gICAgICAg
ICAgICAgYWRkX3RvX2luZGV4KGRpcmVjdG9yeSwgaSk7DQo+ICAgICAgICAgICAgIFN5c3RlbS5n
YygpOw0KPiAgICAgICAgICAgICBUaHJlYWQuc2xlZXAoMTAwMCk7Ly8gd2hhdGV2ZXIgdmFsdWUg
eW91IHdhbnQNCj4gICAgICAgICB9DQo+ICAgICB9DQo+IC4uLg0KPiANCj4gYW5kIGluIHRoZSA0
dGggaXRlcmF0aW9uIGphdmEubGFuZy5PdXRPZk1lbW9yeUVycm9yIGFwcGVhcnMgYWdhaW4uDQo+
IA0KPiBKaXJpLg0KPiANCj4gDQo+IC0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQo+IEZyb206
IEpvaG4gTW95bGFuIFttYWlsdG86am9obm1AcnRlLmllXQ0KPiBTZW50OiBNb25kYXksIFNlcHRl
bWJlciAxMywgMjAwNCA0OjUzIFBNDQo+IFRvOiBMdWNlbmUgVXNlcnMgTGlzdA0KPiBTdWJqZWN0
OiBSZTogT3V0T2ZNZW1vcnkgZXhhbXBsZQ0KPiANCj4gDQo+IGh0dHA6Ly9pc3N1ZXMuYXBhY2hl
Lm9yZy9idWd6aWxsYS9zaG93X2J1Zy5jZ2k/aWQ9MzA2MjgNCj4gDQo+IHlvdSBjYW4gY2xvc2Ug
dGhlIGluZGV4LCBidXQgdGhlIEdhcmJhZ2UgQ29sbGVjdG9yIHN0aWxsIG5lZWRzIHRvIA0KPiBy
ZWNsYWltIHRoZSBtZW1vcnkgYW5kIGl0IG1heSBiZSB0YWtpbmcgbG9uZ2VyIHRoYW4geW91ciBs
b29wIHRvIGRvIHNvLg0KPiANCj4gSm9obg0KPiANCg0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vi
c2NyaWJlLCBlLW1haWw6IGx1Y2VuZS11c2VyLXVuc3Vic2NyaWJlQGpha2FydGEuYXBhY2hlLm9y
Zw0KRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogbHVjZW5lLXVzZXItaGVscEBqYWth
cnRhLmFwYWNoZS5vcmcNCg0K


From lucene-user-return-10197-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 13 15:53:01 2004
Return-Path: <lucene-user-return-10197-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 55569 invoked from network); 13 Sep 2004 15:53:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Sep 2004 15:53:00 -0000
Received: (qmail 79012 invoked by uid 500); 13 Sep 2004 15:52:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 78966 invoked by uid 500); 13 Sep 2004 15:52:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 78952 invoked by uid 99); 13 Sep 2004 15:52:50 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Sep 2004 08:52:46 -0700
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 13 Sep 2004 17:54:43 +0200
Message-ID: <4145C2C3.6020001@ifit.uni-klu.ac.at>
Date: Mon, 13 Sep 2004 17:54:43 +0200
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: OutOfMemory example
References: <DEC6C9B7E9CD684ABDA9B285813F648E1C85C4@msx-na-server.forrest.local>
In-Reply-To: <DEC6C9B7E9CD684ABDA9B285813F648E1C85C4@msx-na-server.forrest.local>
Content-Type: text/plain; charset=ISO-8859-2; format=flowed
Content-Transfer-Encoding: 8bit
X-OriginalArrivalTime: 13 Sep 2004 15:54:43.0842 (UTC) FILETIME=[FC869E20:01C499A9]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

then probably is my mistake ...I havn't read all the emails in the thread.
So ... your goal is to produce errors ... I try to avoid them :))

   All the best,

  Sergiu

  

Ji Kuhn wrote:

>You don't see the point of my post. I sent an application which can everyone run only with lucene jar and in deterministic way produce OutOfMemoryError.
>
>That's all.
>
>Jiri.
>
>
>-----Original Message-----
>From: sergiu gordea [mailto:gsergiu@ifit.uni-klu.ac.at]
>Sent: Monday, September 13, 2004 5:16 PM
>To: Lucene Users List
>Subject: Re: OutOfMemory example
>
>
>I have a few comments regarding your code ...
>1. Why do you use RamDirectory and not the hard disk?
>2. as John said, you should reuse the index instead of creating it each 
>time in the main function
>    if(!indexExists(File indexFile))
>         IndexWriter writer = new IndexWriter(directory, new 
>StandardAnalyzer(), true);
>    else
>         IndexWriter writer = new IndexWriter(directory, new 
>StandardAnalyzer(), false);
>    (in some cases indexExists can be as simple as verifying if the file 
>exits on the hard disk)
>
>3. you iterate in a loop over 10.000 times and you create a lot of objects
>   
>
>for (int i = 0; i < 365 * 30; i++) {
>            Document doc = new Document();
>
>            doc.add(Field.Keyword("date", df.format(new 
>Date(c.getTimeInMillis()))));
>            doc.add(Field.Keyword("id", "AB" + String.valueOf(i)));
>            doc.add(Field.Text("text", "Tohle je text " + i));
>            writer.addDocument(doc);
>
>            c.add(Calendar.DAY_OF_YEAR, 1);
>        }
>all the underlined lines of code create new  ojects, and all of them are 
>kept in memory.
>This is a lot of memory allocated only by this loop. I think that you 
>create more than 100.000 object in this loop ...
>What do you think?
>And none of them cannot be realeased (collected by gc) untill you close 
>the index writer.
>
>None says that your code is complicated, but all programmers should 
>understand that this is a poor design...
>And ... more then that your information is kept in a RamDirectory 
>....when you will close the writer you will still keep the information 
>in memory ...
>
>Sory if I was too agressive with my comments .... but ... I cannot see 
>what were you thinking when you wrote that code ...
>
>If you are trying to make a test .... then I sugest you to replace the 
>hard codded 365 value ... with a variable, to iterate over it and to 
>test the power of your machine
>(PC + JVM) :))
>
>I wish you luck,
>
> Sergiu
>
>
>
>
>
>
>Ji Kuhn wrote:
>
>  
>
>>I disagree or I don't understand. 
>>
>>I can change the code as it is shown below. Now I must reopen the index to see the changes, but the memory problem remains. I realy don't know what I'm doing wrong, the code is so simple.
>>
>>Jiri.
>>
>>	...
>>
>>   public static void main(String[] args) throws IOException
>>   {
>>       Directory directory = create_index();
>>
>>       for (int i = 1; i < 100; i++) {
>>           System.err.println("loop " + i + ", index version: " + IndexReader.getCurrentVersion(directory));
>>           search_index(directory);
>>           add_to_index(directory, i);
>>       }
>>   }
>>
>>   private static void add_to_index(Directory directory, int i) throws IOException
>>   {
>>       IndexWriter writer = new IndexWriter(directory, new StandardAnalyzer(), false);
>>
>>       SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd");
>>       Document doc = new Document();
>>
>>       doc.add(Field.Keyword("date", df.format(new Date(System.currentTimeMillis()))));
>>       doc.add(Field.Keyword("id", "CD" + String.valueOf(i)));
>>       doc.add(Field.Text("text", "Tohle neni text " + i));
>>       writer.addDocument(doc);
>>
>>       System.err.println("index size: " + writer.docCount());
>>       writer.close();
>>   }
>>
>>	...
>>
>>-----Original Message-----
>>From: John Moylan [mailto:johnm@rte.ie]
>>Sent: Monday, September 13, 2004 3:25 PM
>>To: Lucene Users List
>>Subject: Re: OutOfMemory example
>>
>>
>>You should reuse your old index (as eg an application variable) unless 
>>it has changed - use getCurrentVersion to check the index for updates. 
>>This has come up before.
>>
>>John
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>> 
>>
>>    
>>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10198-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 13 18:04:11 2004
Return-Path: <lucene-user-return-10198-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 24849 invoked from network); 13 Sep 2004 18:04:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Sep 2004 18:04:11 -0000
Received: (qmail 3969 invoked by uid 500); 13 Sep 2004 18:04:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 3332 invoked by uid 500); 13 Sep 2004 18:03:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 3319 invoked by uid 99); 13 Sep 2004 18:03:55 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Sep 2004 11:03:52 -0700
Received: (qmail 26705 invoked by uid 532); 13 Sep 2004 18:01:20 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.0474 secs); 13 Sep 2004 18:01:20 -0000
Received: from unknown (HELO ?10.0.0.157?) (127.0.0.1)
  by 0 with SMTP; 13 Sep 2004 18:01:20 -0000
Message-ID: <4145E105.4040402@tropo.com>
Date: Mon, 13 Sep 2004 11:03:49 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.1) Gecko/20040707
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: OptimizeIt -- Re: force gc idiom - Re: OutOfMemory example
References: <DEC6C9B7E9CD684ABDA9B285813F648E1C85C6@msx-na-server.forrest.local>
In-Reply-To: <DEC6C9B7E9CD684ABDA9B285813F648E1C85C6@msx-na-server.forrest.local>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Ji Kuhn wrote:

> This doesn't work either!

You're right.
I'm running under JDK1.5 and trying larger values for -Xmx and it still 
fails.

Running under (Borlands) OptimzeIt shows the number of Terms and 
Terminfos (both in org.apache.lucene.index) increase every time thru the 
loop, by several hundred instances each.

I can trace thru some Term instances on the reference graph of 
OptimizeIt but it's unclear to me what's right. One *guess* is that 
maybe the WeakHashMap in either SegmentReader or FieldCacheImpl is the 
problem.




> 
> Lets concentrate on the first version of my code. I believe that the code should run endlesly (I have said it before: in version 1.4 final it does).
> 
> Jiri.
> 
> -----Original Message-----
> From: David Spencer [mailto:dave-lucene-user@tropo.com]
> Sent: Monday, September 13, 2004 5:34 PM
> To: Lucene Users List
> Subject: force gc idiom - Re: OutOfMemory example
> 
> 
> Ji Kuhn wrote:
> 
> 
>>Thanks for the bug's id, it seems like my problem and I have a stand-alone code with main().
>>
>>What about slow garbage collector? This looks for me as wrong suggestion.
> 
> 
> 
> I've seen this written up before (javaworld?) as a way to probably 
> "force" GC instead of just a System.gc() call. I think the 2nd gc() call 
> is supposed to clean up junk from the runFinalization() call...
> 
> System.gc();
> Thread.sleep( 100);
> System.runFinalization();
> Thread.sleep( 100);
> System.gc();
> 
> 
>>Let change the code once again:
>>
>>...
>>    public static void main(String[] args) throws IOException, InterruptedException
>>    {
>>        Directory directory = create_index();
>>
>>        for (int i = 1; i < 100; i++) {
>>            System.err.println("loop " + i + ", index version: " + IndexReader.getCurrentVersion(directory));
>>            search_index(directory);
>>            add_to_index(directory, i);
>>            System.gc();
>>            Thread.sleep(1000);// whatever value you want
>>        }
>>    }
>>...
>>
>>and in the 4th iteration java.lang.OutOfMemoryError appears again.
>>
>>Jiri.
>>
>>
>>-----Original Message-----
>>From: John Moylan [mailto:johnm@rte.ie]
>>Sent: Monday, September 13, 2004 4:53 PM
>>To: Lucene Users List
>>Subject: Re: OutOfMemory example
>>
>>
>>http://issues.apache.org/bugzilla/show_bug.cgi?id=30628
>>
>>you can close the index, but the Garbage Collector still needs to 
>>reclaim the memory and it may be taking longer than your loop to do so.
>>
>>John
>>
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10199-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 13 18:09:55 2004
Return-Path: <lucene-user-return-10199-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 27269 invoked from network); 13 Sep 2004 18:09:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Sep 2004 18:09:54 -0000
Received: (qmail 14583 invoked by uid 500); 13 Sep 2004 18:09:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 14405 invoked by uid 500); 13 Sep 2004 18:09:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 14390 invoked by uid 99); 13 Sep 2004 18:09:44 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Sep 2004 11:09:43 -0700
Received: (qmail 26994 invoked by uid 532); 13 Sep 2004 18:07:11 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.039579 secs); 13 Sep 2004 18:07:11 -0000
Received: from unknown (HELO ?10.0.0.157?) (127.0.0.1)
  by 0 with SMTP; 13 Sep 2004 18:07:10 -0000
Message-ID: <4145E263.7090909@tropo.com>
Date: Mon, 13 Sep 2004 11:09:39 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.1) Gecko/20040707
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: FieldSortedHitQueue.Comparators -- Re: force gc idiom - Re: OutOfMemory
 example
References: <DEC6C9B7E9CD684ABDA9B285813F648E1C85C6@msx-na-server.forrest.local>
In-Reply-To: <DEC6C9B7E9CD684ABDA9B285813F648E1C85C6@msx-na-server.forrest.local>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Just noticed something else suspicious.
FieldSortedHitQueue has a field called Comparators and it seems like 
things are never removed from it....


Ji Kuhn wrote:

> This doesn't work either!
> 
> Lets concentrate on the first version of my code. I believe that the code should run endlesly (I have said it before: in version 1.4 final it does).
> 
> Jiri.
> 
> -----Original Message-----
> From: David Spencer [mailto:dave-lucene-user@tropo.com]
> Sent: Monday, September 13, 2004 5:34 PM
> To: Lucene Users List
> Subject: force gc idiom - Re: OutOfMemory example
> 
> 
> Ji Kuhn wrote:
> 
> 
>>Thanks for the bug's id, it seems like my problem and I have a stand-alone code with main().
>>
>>What about slow garbage collector? This looks for me as wrong suggestion.
> 
> 
> 
> I've seen this written up before (javaworld?) as a way to probably 
> "force" GC instead of just a System.gc() call. I think the 2nd gc() call 
> is supposed to clean up junk from the runFinalization() call...
> 
> System.gc();
> Thread.sleep( 100);
> System.runFinalization();
> Thread.sleep( 100);
> System.gc();
> 
> 
>>Let change the code once again:
>>
>>...
>>    public static void main(String[] args) throws IOException, InterruptedException
>>    {
>>        Directory directory = create_index();
>>
>>        for (int i = 1; i < 100; i++) {
>>            System.err.println("loop " + i + ", index version: " + IndexReader.getCurrentVersion(directory));
>>            search_index(directory);
>>            add_to_index(directory, i);
>>            System.gc();
>>            Thread.sleep(1000);// whatever value you want
>>        }
>>    }
>>...
>>
>>and in the 4th iteration java.lang.OutOfMemoryError appears again.
>>
>>Jiri.
>>
>>
>>-----Original Message-----
>>From: John Moylan [mailto:johnm@rte.ie]
>>Sent: Monday, September 13, 2004 4:53 PM
>>To: Lucene Users List
>>Subject: Re: OutOfMemory example
>>
>>
>>http://issues.apache.org/bugzilla/show_bug.cgi?id=30628
>>
>>you can close the index, but the Garbage Collector still needs to 
>>reclaim the memory and it may be taking longer than your loop to do so.
>>
>>John
>>
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10200-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 13 18:25:11 2004
Return-Path: <lucene-user-return-10200-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 36908 invoked from network); 13 Sep 2004 18:25:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Sep 2004 18:25:10 -0000
Received: (qmail 35489 invoked by uid 500); 13 Sep 2004 18:24:21 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 35303 invoked by uid 500); 13 Sep 2004 18:24:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 35267 invoked by uid 99); 13 Sep 2004 18:24:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Sep 2004 11:24:16 -0700
Received: (qmail 27451 invoked by uid 532); 13 Sep 2004 18:21:42 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.111151 secs); 13 Sep 2004 18:21:42 -0000
Received: from unknown (HELO ?10.0.0.157?) (127.0.0.1)
  by 0 with SMTP; 13 Sep 2004 18:21:42 -0000
Message-ID: <4145E5CB.9090901@tropo.com>
Date: Mon, 13 Sep 2004 11:24:11 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.1) Gecko/20040707
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: FieldSortedHitQueue.Comparators -- Re: force gc idiom - Re: OutOfMemory
 example
References: <DEC6C9B7E9CD684ABDA9B285813F648E1C85C6@msx-na-server.forrest.local> <4145E263.7090909@tropo.com>
In-Reply-To: <4145E263.7090909@tropo.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

David Spencer wrote:

> Just noticed something else suspicious.
> FieldSortedHitQueue has a field called Comparators and it seems like 
> things are never removed from it....

Replying to my own post....this could be the problem.
If I put in a print statement here in FieldSortedHitQueue, recompile, 
and run w/ the new jar then I see Comparators.size() go up after every 
iteration thru ReopenTest's loop and the size() never goes down...

  static Object store (IndexReader reader, String field, int type, 
Object factory, Object value) {
     FieldCacheImpl.Entry entry = (factory != null)
       ? new FieldCacheImpl.Entry (field, factory)
       : new FieldCacheImpl.Entry (field, type);
     synchronized (Comparators) {
       HashMap readerCache = (HashMap)Comparators.get(reader);
       if (readerCache == null) {
         readerCache = new HashMap();
         Comparators.put(reader,readerCache);
		System.out.println( "*\t* NOW: "+ Comparators.size());
       }
       return readerCache.put (entry, value);
     }
   }
> 
> 
> Ji Kuhn wrote:
> 
>> This doesn't work either!
>>
>> Lets concentrate on the first version of my code. I believe that the 
>> code should run endlesly (I have said it before: in version 1.4 final 
>> it does).
>>
>> Jiri.
>>
>> -----Original Message-----
>> From: David Spencer [mailto:dave-lucene-user@tropo.com]
>> Sent: Monday, September 13, 2004 5:34 PM
>> To: Lucene Users List
>> Subject: force gc idiom - Re: OutOfMemory example
>>
>>
>> Ji Kuhn wrote:
>>
>>
>>> Thanks for the bug's id, it seems like my problem and I have a 
>>> stand-alone code with main().
>>>
>>> What about slow garbage collector? This looks for me as wrong 
>>> suggestion.
>>
>>
>>
>>
>> I've seen this written up before (javaworld?) as a way to probably 
>> "force" GC instead of just a System.gc() call. I think the 2nd gc() 
>> call is supposed to clean up junk from the runFinalization() call...
>>
>> System.gc();
>> Thread.sleep( 100);
>> System.runFinalization();
>> Thread.sleep( 100);
>> System.gc();
>>
>>
>>> Let change the code once again:
>>>
>>> ...
>>>    public static void main(String[] args) throws IOException, 
>>> InterruptedException
>>>    {
>>>        Directory directory = create_index();
>>>
>>>        for (int i = 1; i < 100; i++) {
>>>            System.err.println("loop " + i + ", index version: " + 
>>> IndexReader.getCurrentVersion(directory));
>>>            search_index(directory);
>>>            add_to_index(directory, i);
>>>            System.gc();
>>>            Thread.sleep(1000);// whatever value you want
>>>        }
>>>    }
>>> ...
>>>
>>> and in the 4th iteration java.lang.OutOfMemoryError appears again.
>>>
>>> Jiri.
>>>
>>>
>>> -----Original Message-----
>>> From: John Moylan [mailto:johnm@rte.ie]
>>> Sent: Monday, September 13, 2004 4:53 PM
>>> To: Lucene Users List
>>> Subject: Re: OutOfMemory example
>>>
>>>
>>> http://issues.apache.org/bugzilla/show_bug.cgi?id=30628
>>>
>>> you can close the index, but the Garbage Collector still needs to 
>>> reclaim the memory and it may be taking longer than your loop to do so.
>>>
>>> John
>>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10201-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 13 18:43:46 2004
Return-Path: <lucene-user-return-10201-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 44576 invoked from network); 13 Sep 2004 18:43:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Sep 2004 18:43:46 -0000
Received: (qmail 65656 invoked by uid 500); 13 Sep 2004 18:43:40 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 65453 invoked by uid 500); 13 Sep 2004 18:43:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 65435 invoked by uid 99); 13 Sep 2004 18:43:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Sep 2004 11:43:36 -0700
Received: (qmail 28273 invoked by uid 532); 13 Sep 2004 18:41:04 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.196951 secs); 13 Sep 2004 18:41:04 -0000
Received: from unknown (HELO ?10.0.0.157?) (127.0.0.1)
  by 0 with SMTP; 13 Sep 2004 18:41:04 -0000
Message-ID: <4145EA55.40602@tropo.com>
Date: Mon, 13 Sep 2004 11:43:33 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.1) Gecko/20040707
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: SegmentReader - Re: FieldSortedHitQueue.Comparators -- Re: force
 gc idiom - Re: OutOfMemory example
References: <DEC6C9B7E9CD684ABDA9B285813F648E1C85C6@msx-na-server.forrest.local> <4145E263.7090909@tropo.com> <4145E5CB.9090901@tropo.com>
In-Reply-To: <4145E5CB.9090901@tropo.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Another clue, the SegmentReaders are piling up too, which may be why the 
  Comparator map is increasing in size, because SegmentReaders are the 
keys to Comparator...though again, I don't know enough about the Lucene 
internals to know what refs to SegmentReaders are valid which which ones 
may be causing this leak.


David Spencer wrote:

> David Spencer wrote:
> 
>> Just noticed something else suspicious.
>> FieldSortedHitQueue has a field called Comparators and it seems like 
>> things are never removed from it....
> 
> 
> Replying to my own post....this could be the problem.
> If I put in a print statement here in FieldSortedHitQueue, recompile, 
> and run w/ the new jar then I see Comparators.size() go up after every 
> iteration thru ReopenTest's loop and the size() never goes down...
> 
>  static Object store (IndexReader reader, String field, int type, Object 
> factory, Object value) {
>     FieldCacheImpl.Entry entry = (factory != null)
>       ? new FieldCacheImpl.Entry (field, factory)
>       : new FieldCacheImpl.Entry (field, type);
>     synchronized (Comparators) {
>       HashMap readerCache = (HashMap)Comparators.get(reader);
>       if (readerCache == null) {
>         readerCache = new HashMap();
>         Comparators.put(reader,readerCache);
>         System.out.println( "*\t* NOW: "+ Comparators.size());
>       }
>       return readerCache.put (entry, value);
>     }
>   }
> 
>>
>>
>> Ji Kuhn wrote:
>>
>>> This doesn't work either!
>>>
>>> Lets concentrate on the first version of my code. I believe that the 
>>> code should run endlesly (I have said it before: in version 1.4 final 
>>> it does).
>>>
>>> Jiri.
>>>
>>> -----Original Message-----
>>> From: David Spencer [mailto:dave-lucene-user@tropo.com]
>>> Sent: Monday, September 13, 2004 5:34 PM
>>> To: Lucene Users List
>>> Subject: force gc idiom - Re: OutOfMemory example
>>>
>>>
>>> Ji Kuhn wrote:
>>>
>>>
>>>> Thanks for the bug's id, it seems like my problem and I have a 
>>>> stand-alone code with main().
>>>>
>>>> What about slow garbage collector? This looks for me as wrong 
>>>> suggestion.
>>>
>>>
>>>
>>>
>>>
>>> I've seen this written up before (javaworld?) as a way to probably 
>>> "force" GC instead of just a System.gc() call. I think the 2nd gc() 
>>> call is supposed to clean up junk from the runFinalization() call...
>>>
>>> System.gc();
>>> Thread.sleep( 100);
>>> System.runFinalization();
>>> Thread.sleep( 100);
>>> System.gc();
>>>
>>>
>>>> Let change the code once again:
>>>>
>>>> ...
>>>>    public static void main(String[] args) throws IOException, 
>>>> InterruptedException
>>>>    {
>>>>        Directory directory = create_index();
>>>>
>>>>        for (int i = 1; i < 100; i++) {
>>>>            System.err.println("loop " + i + ", index version: " + 
>>>> IndexReader.getCurrentVersion(directory));
>>>>            search_index(directory);
>>>>            add_to_index(directory, i);
>>>>            System.gc();
>>>>            Thread.sleep(1000);// whatever value you want
>>>>        }
>>>>    }
>>>> ...
>>>>
>>>> and in the 4th iteration java.lang.OutOfMemoryError appears again.
>>>>
>>>> Jiri.
>>>>
>>>>
>>>> -----Original Message-----
>>>> From: John Moylan [mailto:johnm@rte.ie]
>>>> Sent: Monday, September 13, 2004 4:53 PM
>>>> To: Lucene Users List
>>>> Subject: Re: OutOfMemory example
>>>>
>>>>
>>>> http://issues.apache.org/bugzilla/show_bug.cgi?id=30628
>>>>
>>>> you can close the index, but the Garbage Collector still needs to 
>>>> reclaim the memory and it may be taking longer than your loop to do so.
>>>>
>>>> John
>>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10202-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 13 20:55:26 2004
Return-Path: <lucene-user-return-10202-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 5620 invoked from network); 13 Sep 2004 20:55:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Sep 2004 20:55:26 -0000
Received: (qmail 42056 invoked by uid 500); 13 Sep 2004 20:55:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 42030 invoked by uid 500); 13 Sep 2004 20:55:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 42017 invoked by uid 99); 13 Sep 2004 20:55:18 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.25.134.80] (HELO mailout01.sul.t-online.com) (194.25.134.80)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Sep 2004 13:55:15 -0700
Received: from fwd03.aul.t-online.de 
	by mailout01.sul.t-online.com with smtp 
	id 1C6xqz-0003r7-01; Mon, 13 Sep 2004 22:55:13 +0200
Received: from pD9EBFDBB.dip.t-dialin.net (bKFM2cZVgeah30ZUp9DDB2EXrelA3JrATD+rXU8vytYR3NI1ukKkEZ@[217.235.253.187]) by fmrl03.sul.t-online.com
	with esmtp id 1C6xqi-2IRKi00; Mon, 13 Sep 2004 22:54:56 +0200
From: Daniel Naber <daniel.naber@t-online.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: OutOfMemory example
Date: Mon, 13 Sep 2004 22:57:40 +0200
User-Agent: KMail/1.7
References: <DEC6C9B7E9CD684ABDA9B285813F648E1C85C1@msx-na-server.forrest.local>
In-Reply-To: <DEC6C9B7E9CD684ABDA9B285813F648E1C85C1@msx-na-server.forrest.local>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200409132257.40208@danielnaber.de>
X-ID: bKFM2cZVgeah30ZUp9DDB2EXrelA3JrATD+rXU8vytYR3NI1ukKkEZ@t-dialin.net
X-TOI-MSGID: ca620258-4a51-4deb-ad55-de4d29250d19
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Monday 13 September 2004 15:06, Ji=C5=99=C3=AD Kuhn wrote:

> =C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0=C2=A0I think I can reproduce m=
emory leaking problem while reopening
> an index. Lucene version tested is 1.4.1, version 1.4 final works OK. My
> JVM is:

Could you try with the latest Lucene version from CVS? I cannot reproduce=20
your problem with that version (Sun's Java 1.4.2_03, Linux).

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10203-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 13 21:55:49 2004
Return-Path: <lucene-user-return-10203-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 40622 invoked from network); 13 Sep 2004 21:55:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Sep 2004 21:55:49 -0000
Received: (qmail 19360 invoked by uid 500); 13 Sep 2004 21:55:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 19237 invoked by uid 500); 13 Sep 2004 21:55:42 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 19223 invoked by uid 99); 13 Sep 2004 21:55:42 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [12.43.53.196] (HELO mail.sofari.com) (12.43.53.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Sep 2004 14:55:41 -0700
Received: from [192.168.1.103] ([12.43.53.196])
	by mail.sofari.com (8.12.11/8.12.3/Debian-6.6) with ESMTP id i8DLtX3D030995
	for <lucene-user@jakarta.apache.org>; Mon, 13 Sep 2004 14:55:33 -0700
Message-ID: <4146174B.8080400@newsmonster.org>
Date: Mon, 13 Sep 2004 14:55:23 -0700
From: "Kevin A. Burton" <burton@newsmonster.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7) Gecko/20040616
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: OptimizeIt -- Re: force gc idiom - Re: OutOfMemory example
References: <DEC6C9B7E9CD684ABDA9B285813F648E1C85C6@msx-na-server.forrest.local> <4145E105.4040402@tropo.com>
In-Reply-To: <4145E105.4040402@tropo.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

David Spencer wrote:

> Ji Kuhn wrote:
>
>> This doesn't work either!
>
>
> You're right.
> I'm running under JDK1.5 and trying larger values for -Xmx and it 
> still fails.
>
> Running under (Borlands) OptimzeIt shows the number of Terms and 
> Terminfos (both in org.apache.lucene.index) increase every time thru 
> the loop, by several hundred instances each.

Yes... I'm running into a similar situation on JDK 1.4.2 with Lucene 
1.3... I used the JMP debugger and all my memory is taken by Terms and 
TermInfo...

> I can trace thru some Term instances on the reference graph of 
> OptimizeIt but it's unclear to me what's right. One *guess* is that 
> maybe the WeakHashMap in either SegmentReader or FieldCacheImpl is the 
> problem.

Kevin

-- 

Please reply using PGP.

    http://peerfear.org/pubkey.asc    
    
    NewsMonster - http://www.newsmonster.org/
    
Kevin A. Burton, Location - San Francisco, CA, Cell - 415.595.9965
       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
  IRC - freenode.net #infoanarchy | #p2p-hackers | #newsmonster


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10204-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 13 22:02:51 2004
Return-Path: <lucene-user-return-10204-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 46597 invoked from network); 13 Sep 2004 22:02:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Sep 2004 22:02:51 -0000
Received: (qmail 29050 invoked by uid 500); 13 Sep 2004 22:02:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 28846 invoked by uid 500); 13 Sep 2004 22:02:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 28833 invoked by uid 99); 13 Sep 2004 22:02:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [12.43.53.196] (HELO mail.sofari.com) (12.43.53.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Sep 2004 15:02:40 -0700
Received: from [192.168.1.103] ([12.43.53.196])
	by mail.sofari.com (8.12.11/8.12.3/Debian-6.6) with ESMTP id i8DM2bZc031153
	for <lucene-user@jakarta.apache.org>; Mon, 13 Sep 2004 15:02:37 -0700
Message-ID: <414618F8.1040905@newsmonster.org>
Date: Mon, 13 Sep 2004 15:02:32 -0700
From: "Kevin A. Burton" <burton@newsmonster.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7) Gecko/20040616
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: OutOfMemory example
References: <DEC6C9B7E9CD684ABDA9B285813F648E1C85C1@msx-na-server.forrest.local>
In-Reply-To: <DEC6C9B7E9CD684ABDA9B285813F648E1C85C1@msx-na-server.forrest.local>
Content-Type: text/plain; charset=iso-8859-2; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Ji Kuhn wrote:

>Hi,
>
>	I think I can reproduce memory leaking problem while reopening an index. Lucene version tested is 1.4.1, version 1.4 final works OK. My JVM is:
>
>$ java -version
>java version "1.4.2_05"
>Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_05-b04)
>Java HotSpot(TM) Client VM (build 1.4.2_05-b04, mixed mode)
>
>	The code you can test is below, there are only 3 iterations for me if I use -Xmx5m, the 4th fails.
>
>  
>
At least this test seems tied to the Sort API... I removed the sort 
under Lucene 1.3 and it worked fine...

Kevin

-- 

Please reply using PGP.

    http://peerfear.org/pubkey.asc    
    
    NewsMonster - http://www.newsmonster.org/
    
Kevin A. Burton, Location - San Francisco, CA, Cell - 415.595.9965
       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
  IRC - freenode.net #infoanarchy | #p2p-hackers | #newsmonster


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10205-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 13 22:47:56 2004
Return-Path: <lucene-user-return-10205-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 61471 invoked from network); 13 Sep 2004 22:47:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Sep 2004 22:47:56 -0000
Received: (qmail 82483 invoked by uid 500); 13 Sep 2004 22:47:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 82404 invoked by uid 500); 13 Sep 2004 22:47:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 82390 invoked by uid 99); 13 Sep 2004 22:47:48 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.25.134.81] (HELO mailout03.sul.t-online.com) (194.25.134.81)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Sep 2004 15:47:46 -0700
Received: from fwd00.aul.t-online.de 
	by mailout03.sul.t-online.com with smtp 
	id 1C6zbr-00007n-00; Tue, 14 Sep 2004 00:47:43 +0200
Received: from p548025E5.dip.t-dialin.net (Vmjsi6ZUYepN8EO2NtIa52pl5YbLt3o-q8D4+al7cx5wMQG0+Avhss@[84.128.37.229]) by fmrl00.sul.t-online.com
	with esmtp id 1C6zbo-1WCLk80; Tue, 14 Sep 2004 00:47:40 +0200
From: Daniel Naber <daniel.naber@t-online.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Addition to contributions page
Date: Tue, 14 Sep 2004 00:50:24 +0200
User-Agent: KMail/1.7
References: <13C35614-0330-11D9-A133-000A95B336F2@snowtide.com>
In-Reply-To: <13C35614-0330-11D9-A133-000A95B336F2@snowtide.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200409140050.24909@danielnaber.de>
X-ID: Vmjsi6ZUYepN8EO2NtIa52pl5YbLt3o-q8D4+al7cx5wMQG0+Avhss@t-dialin.net
X-TOI-MSGID: 30d95bf3-a54b-4366-b167-58f35bfc5551
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Friday 10 September 2004 15:48, Chas Emerick wrote:

> PDFTextStream should be added to the 'Document Converters' section,
> with this URL < http://snowtide.com >, and perhaps this heading:
> 'PDFTextStream -- PDF text and metadata extraction'. =C2=A0The 'Author'
> field should probably be left blank, since there's no single creator.

I just added it.

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10206-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 13 22:49:19 2004
Return-Path: <lucene-user-return-10206-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 62031 invoked from network); 13 Sep 2004 22:49:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Sep 2004 22:49:19 -0000
Received: (qmail 84247 invoked by uid 500); 13 Sep 2004 22:49:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 84138 invoked by uid 500); 13 Sep 2004 22:49:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 84125 invoked by uid 99); 13 Sep 2004 22:49:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Sep 2004 15:49:10 -0700
Received: (qmail 11311 invoked by uid 532); 13 Sep 2004 22:46:37 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.04741 secs); 13 Sep 2004 22:46:37 -0000
Received: from unknown (HELO ?10.0.0.157?) (127.0.0.1)
  by 0 with SMTP; 13 Sep 2004 22:46:37 -0000
Message-ID: <414623E3.1010408@tropo.com>
Date: Mon, 13 Sep 2004 15:49:07 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.1) Gecko/20040707
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: OutOfMemory example
References: <DEC6C9B7E9CD684ABDA9B285813F648E1C85C1@msx-na-server.forrest.local> <200409132257.40208@danielnaber.de>
In-Reply-To: <200409132257.40208@danielnaber.de>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Daniel Naber wrote:

> On Monday 13 September 2004 15:06, Ji Kuhn wrote:
> 
> 
>>        I think I can reproduce memory leaking problem while reopening
>>an index. Lucene version tested is 1.4.1, version 1.4 final works OK. My
>>JVM is:
> 
> 
> Could you try with the latest Lucene version from CVS? I cannot reproduce 
> your problem with that version (Sun's Java 1.4.2_03, Linux).

I verified it w/ the latest lucene code from CVS under win xp.

> 
> Regards
>  Daniel
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10207-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 00:20:52 2004
Return-Path: <lucene-user-return-10207-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 89389 invoked from network); 14 Sep 2004 00:20:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 00:20:51 -0000
Received: (qmail 83934 invoked by uid 500); 14 Sep 2004 00:20:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 83281 invoked by uid 500); 14 Sep 2004 00:20:34 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 83268 invoked by uid 99); 14 Sep 2004 00:20:34 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of ken.mccracken@gmail.com designates 64.233.170.202 as permitted sender)
Received: from [64.233.170.202] (HELO mproxy.gmail.com) (64.233.170.202)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Sep 2004 17:20:34 -0700
Received: by mproxy.gmail.com with SMTP id 78so189345rnk
        for <lucene-user@jakarta.apache.org>; Mon, 13 Sep 2004 17:20:32 -0700 (PDT)
Received: by 10.38.171.26 with SMTP id t26mr1774357rne;
        Mon, 13 Sep 2004 17:20:32 -0700 (PDT)
Received: by 10.38.75.30 with HTTP; Mon, 13 Sep 2004 17:20:32 -0700 (PDT)
Message-ID: <2b2518a404091317206b22d96@mail.gmail.com>
Date: Mon, 13 Sep 2004 17:20:32 -0700
From: Ken McCracken <ken.mccracken@gmail.com>
Reply-To: Ken McCracken <ken.mccracken@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: Similarity score computation documentation
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

I was looking through the score computation when running search, and
think there may be a discrepancy between what is _documented_ in the
org.apache.lucene.search.Similarity class overview Javadocs, and what
actually occurs in the code.

I believe the problem is only with the documentation.

I'm pretty sure that there should be an idf^2 in the sum.  Look at
org.apache.lucene.search.TermQuery, the inner class TermWeight.  You
can see that first sumOfSquaredWeights() is called, followed by
normalize(), during search.  Further, the resulting value stored in
the field "value" is set as the "weightValue" on the TermScorer.

If we look at what happens to TermWeight, sumOfSquaredWeights() sets
"queryWeight" to idf * boost.  During normalize(), "queryWeight" is
multiplied by the query norm, and "value" is set to queryWeight * idf
== idf * boost * query norm * idf == idf^2 * boost * query norm.  This
becomes the "weightValue" in the TermScorer that is then used to
multiply with the appropriate tf, etc., values.

The remaining terms in the Similarity description are properly
appended.  I also see that the queryNorm effectively "cancels out"
(dimensionally, since it is a 1/ square root of a sum of squares of
idfs) one of the idfs, so the formula still ends up being roughly a
TF-IDF formula.  But the idf^2 should still be there, along with the
expansion of queryNorm.

Am I mistaken, or is the documentation off?

Thanks for your help,
-Ken

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10208-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 06:32:35 2004
Return-Path: <lucene-user-return-10208-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 44879 invoked from network); 14 Sep 2004 06:32:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 06:32:35 -0000
Received: (qmail 68193 invoked by uid 500); 14 Sep 2004 06:32:22 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 68026 invoked by uid 500); 14 Sep 2004 06:32:20 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 68009 invoked by uid 99); 14 Sep 2004 06:32:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=MIME_BASE64_NO_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [195.47.73.164] (HELO msx-na-server.forrest.local) (195.47.73.164)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 13 Sep 2004 23:32:17 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.0.6375.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: base64
Subject: RE: OutOfMemory example
Date: Tue, 14 Sep 2004 08:32:36 +0200
Message-ID: <DEC6C9B7E9CD684ABDA9B285813F648E1C85C7@msx-na-server.forrest.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: OutOfMemory example
Thread-Index: AcSZ1AmJwTs5zd5ESFWDKhkfW5RAigATy9Ow
From: =?UTF-8?B?SmnFmcOtIEt1aG4=?= <kuhn@fg.cz>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

VGhlIGVycm9yIGlzIHRocm93biBpbiBleGFjdGx5IHRoZSBzYW1lIHBvaW50IGFzIGJlZm9yZS4g
VGhpcyBtb3JuaW5nIEkgZG93bmxvYWRlZCBMdWNlbmUgZnJvbSBDVlMsIG5vdyB0aGUgamFyIGlz
IGx1Y2VuZS0xLjUtcmMxLWRldi5qYXIsIEpWTSBpcyAxLjQuMl8wNS1iMDQsIGJvdGggTGludXgg
YW5kIFdpbmRvd3MuDQoNCkppcmkuDQoNCi0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQpGcm9t
OiBEYW5pZWwgTmFiZXIgW21haWx0bzpkYW5pZWwubmFiZXJAdC1vbmxpbmUuZGVdDQpTZW50OiBN
b25kYXksIFNlcHRlbWJlciAxMywgMjAwNCAxMDo1OCBQTQ0KVG86IEx1Y2VuZSBVc2VycyBMaXN0
DQpTdWJqZWN0OiBSZTogT3V0T2ZNZW1vcnkgZXhhbXBsZQ0KDQoNCk9uIE1vbmRheSAxMyBTZXB0
ZW1iZXIgMjAwNCAxNTowNiwgSmnFmcOtIEt1aG4gd3JvdGU6DQoNCj4gwqDCoMKgwqDCoMKgwqDC
oEkgdGhpbmsgSSBjYW4gcmVwcm9kdWNlIG1lbW9yeSBsZWFraW5nIHByb2JsZW0gd2hpbGUgcmVv
cGVuaW5nDQo+IGFuIGluZGV4LiBMdWNlbmUgdmVyc2lvbiB0ZXN0ZWQgaXMgMS40LjEsIHZlcnNp
b24gMS40IGZpbmFsIHdvcmtzIE9LLiBNeQ0KPiBKVk0gaXM6DQoNCkNvdWxkIHlvdSB0cnkgd2l0
aCB0aGUgbGF0ZXN0IEx1Y2VuZSB2ZXJzaW9uIGZyb20gQ1ZTPyBJIGNhbm5vdCByZXByb2R1Y2Ug
DQp5b3VyIHByb2JsZW0gd2l0aCB0aGF0IHZlcnNpb24gKFN1bidzIEphdmEgMS40LjJfMDMsIExp
bnV4KS4NCg0KUmVnYXJkcw0KIERhbmllbA0KDQotLSANCmh0dHA6Ly93d3cuZGFuaWVsbmFiZXIu
ZGUNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tDQpUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBsdWNlbmUtdXNlci11
bnN1YnNjcmliZUBqYWthcnRhLmFwYWNoZS5vcmcNCkZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBl
LW1haWw6IGx1Y2VuZS11c2VyLWhlbHBAamFrYXJ0YS5hcGFjaGUub3JnDQoNCg==


From lucene-user-return-10209-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 07:24:50 2004
Return-Path: <lucene-user-return-10209-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 79151 invoked from network); 14 Sep 2004 07:24:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 07:24:50 -0000
Received: (qmail 35430 invoked by uid 500); 14 Sep 2004 07:24:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 35368 invoked by uid 500); 14 Sep 2004 07:24:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 35355 invoked by uid 99); 14 Sep 2004 07:24:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.25.134.84] (HELO mailout09.sul.t-online.com) (194.25.134.84)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 00:24:37 -0700
Received: from fwd06.aul.t-online.de 
	by mailout09.sul.t-online.com with smtp 
	id 1C77g2-0005gs-03; Tue, 14 Sep 2004 09:24:34 +0200
Received: from pD9EBF15C.dip.t-dialin.net (XHznuTZb8eUfDZK3ULB0tgEKwvtTKuwVyb9gfIbejVwtvgabwVjwZn@[217.235.241.92]) by fmrl06.sul.t-online.com
	with esmtp id 1C77fr-0IZcp60; Tue, 14 Sep 2004 09:24:23 +0200
From: Daniel Naber <daniel.naber@t-online.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: OutOfMemory example
Date: Tue, 14 Sep 2004 09:27:07 +0200
User-Agent: KMail/1.7
References: <DEC6C9B7E9CD684ABDA9B285813F648E1C85C7@msx-na-server.forrest.local>
In-Reply-To: <DEC6C9B7E9CD684ABDA9B285813F648E1C85C7@msx-na-server.forrest.local>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200409140927.08384@danielnaber.de>
X-ID: XHznuTZb8eUfDZK3ULB0tgEKwvtTKuwVyb9gfIbejVwtvgabwVjwZn@t-dialin.net
X-TOI-MSGID: 4a6754b3-5eea-4b05-a844-e3032617c7e3
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Tuesday 14 September 2004 08:32, Ji=C5=99=C3=AD Kuhn wrote:

> The error is thrown in exactly the same point as before. This morning I
> downloaded Lucene from CVS, now the jar is lucene-1.5-rc1-dev.jar, JVM
> is 1.4.2_05-b04, both Linux and Windows.

Now I can reproduce the problem. I first tried running the code inside=20
Eclipse, but the Exception doesn't occur there. It does occur on the=20
command line.

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10210-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 09:21:59 2004
Return-Path: <lucene-user-return-10210-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 65622 invoked from network); 14 Sep 2004 09:21:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 09:21:59 -0000
Received: (qmail 2342 invoked by uid 500); 14 Sep 2004 09:21:10 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 2235 invoked by uid 500); 14 Sep 2004 09:21:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 2172 invoked by uid 99); 14 Sep 2004 09:21:08 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=HTML_90_100,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.200.20.178] (HELO crimsonlogic.co.in) (203.200.20.178)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 02:21:07 -0700
Received: from INA098tnat (localhost.localdomain [127.0.0.1])
	by crimsonlogic.co.in (Postfix) with ESMTP id B7F6B233E3
	for <lucene-user@jakarta.apache.org>; Tue, 14 Sep 2004 14:48:16 +0530 (IST)
From: "Natarajan.T" <natarajant@crimsonlogic.co.in>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: Search PharseQuery
Date: Tue, 14 Sep 2004 14:55:38 +0530
Message-ID: <002701c49a3c$cc1e9c90$8714a8c0@ssl>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0028_01C49A6A.E5D6D890"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.4024
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1106
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0028_01C49A6A.E5D6D890
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

Hi All,

 

How do I implement PharseQuery API? Pls send me some sample code.( How
can I handle "java is platform" as single word?

)

  

Regards,

Natarajan.

 

 


------=_NextPart_000_0028_01C49A6A.E5D6D890--


From lucene-user-return-10211-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 09:28:18 2004
Return-Path: <lucene-user-return-10211-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 70004 invoked from network); 14 Sep 2004 09:28:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 09:28:18 -0000
Received: (qmail 12643 invoked by uid 500); 14 Sep 2004 09:27:52 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 12557 invoked by uid 500); 14 Sep 2004 09:27:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 12407 invoked by uid 99); 14 Sep 2004 09:27:48 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [81.80.239.198] (HELO outbound1.sopragroup.com) (81.80.239.198)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 02:27:47 -0700
Received: by outbound1.sopragroup.com (8.12.10/8.12.10/outbound-A02) with ESMTP id i8E9RhKp006503
          for <lucene-user@jakarta.apache.org>; Tue, 14 Sep 2004 11:27:43 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6556.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Search PharseQuery
Date: Tue, 14 Sep 2004 11:27:42 +0200
Message-ID: <5933531F07A5144E9E53E1AA45257E4BF64FBA@wexchbe03.ancy.fr.sopra>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Search PharseQuery
Thread-Index: AcSaPEY+R1W7GDTQTL6iFQs6y3DbfgAAHjoA
From: "Cocula Remi" <rcocula@sopragroup.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-OriginalArrivalTime: 14 Sep 2004 09:36:34.0500 (UTC) FILETIME=[53098840:01C49A3E]
X-Scanned-By: MIMEDefang 2.38
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Use QueryParser.=20
please take a look at =
http://today.java.net/pub/a/today/2003/11/07/QueryParserRules.html
It's pretty clear.


-----Message d'origine-----
De : Natarajan.T [mailto:natarajant@crimsonlogic.co.in]
Envoy=E9 : mardi 14 septembre 2004 11:26
=C0 : 'Lucene Users List'
Objet : Search PharseQuery


Hi All,

=20

How do I implement PharseQuery API? Pls send me some sample code.( How
can I handle "java is platform" as single word?

)

 =20

Regards,

Natarajan.

=20

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10212-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 10:35:24 2004
Return-Path: <lucene-user-return-10212-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 4124 invoked from network); 14 Sep 2004 10:35:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 10:35:24 -0000
Received: (qmail 91762 invoked by uid 500); 14 Sep 2004 10:35:07 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 91649 invoked by uid 500); 14 Sep 2004 10:35:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 91608 invoked by uid 99); 14 Sep 2004 10:35:04 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.200.20.178] (HELO crimsonlogic.co.in) (203.200.20.178)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 03:35:00 -0700
Received: from INA098tnat (localhost.localdomain [127.0.0.1])
	by crimsonlogic.co.in (Postfix) with ESMTP id 50612233F3
	for <lucene-user@jakarta.apache.org>; Tue, 14 Sep 2004 16:02:10 +0530 (IST)
From: "Natarajan.T" <natarajant@crimsonlogic.co.in>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Search PharseQuery
Date: Tue, 14 Sep 2004 16:09:31 +0530
Message-ID: <003101c49a47$1ecb4510$8714a8c0@ssl>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.4024
In-Reply-To: <5933531F07A5144E9E53E1AA45257E4BF64FBA@wexchbe03.ancy.fr.sopra>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1106
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

Thanks for your mail, that link says only theoretically but I need some
sample....


Regards,
Natarajan.


-----Original Message-----
From: Cocula Remi [mailto:rcocula@sopragroup.com]=20
Sent: Tuesday, September 14, 2004 2:58 PM
To: Lucene Users List
Subject: RE: Search PharseQuery

Use QueryParser.=20
please take a look at
http://today.java.net/pub/a/today/2003/11/07/QueryParserRules.html
It's pretty clear.


-----Message d'origine-----
De : Natarajan.T [mailto:natarajant@crimsonlogic.co.in]
Envoy=E9 : mardi 14 septembre 2004 11:26
=C0 : 'Lucene Users List'
Objet : Search PharseQuery


Hi All,

=20

How do I implement PharseQuery API? Pls send me some sample code.( How
can I handle "java is platform" as single word?

)

 =20

Regards,

Natarajan.

=20

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10213-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 11:02:17 2004
Return-Path: <lucene-user-return-10213-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 16018 invoked from network); 14 Sep 2004 11:02:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 11:02:17 -0000
Received: (qmail 27579 invoked by uid 500); 14 Sep 2004 11:02:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 27486 invoked by uid 500); 14 Sep 2004 11:02:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 27471 invoked by uid 99); 14 Sep 2004 11:02:07 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 04:02:07 -0700
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 14 Sep 2004 13:04:05 +0200
Message-ID: <4146D023.4070709@ifit.uni-klu.ac.at>
Date: Tue, 14 Sep 2004 13:04:03 +0200
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Search PharseQuery
References: <003101c49a47$1ecb4510$8714a8c0@ssl>
In-Reply-To: <003101c49a47$1ecb4510$8714a8c0@ssl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-OriginalArrivalTime: 14 Sep 2004 11:04:05.0104 (UTC) FILETIME=[8CA41F00:01C49A4A]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

String queryString = "\"waht is java\"";
Query q = QueryParser.parse(queryString, "field", new StandardAnalyzer());
System.out.println(q.toString());

This is enough for starting .... consult Lucene API for more information

   Sergiu


Natarajan.T wrote:

>Hi,
>
>Thanks for your mail, that link says only theoretically but I need some
>sample....
>
>
>Regards,
>Natarajan.
>
>
>-----Original Message-----
>From: Cocula Remi [mailto:rcocula@sopragroup.com] 
>Sent: Tuesday, September 14, 2004 2:58 PM
>To: Lucene Users List
>Subject: RE: Search PharseQuery
>
>Use QueryParser. 
>please take a look at
>http://today.java.net/pub/a/today/2003/11/07/QueryParserRules.html
>It's pretty clear.
>
>
>-----Message d'origine-----
>De : Natarajan.T [mailto:natarajant@crimsonlogic.co.in]
>Envoy : mardi 14 septembre 2004 11:26
> : 'Lucene Users List'
>Objet : Search PharseQuery
>
>
>Hi All,
>
> 
>
>How do I implement PharseQuery API? Pls send me some sample code.( How
>can I handle "java is platform" as single word?
>
>)
>
>  
>
>Regards,
>
>Natarajan.
>
> 
>
> 
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10214-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 11:27:27 2004
Return-Path: <lucene-user-return-10214-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 29751 invoked from network); 14 Sep 2004 11:27:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 11:27:26 -0000
Received: (qmail 68564 invoked by uid 500); 14 Sep 2004 11:27:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 68539 invoked by uid 500); 14 Sep 2004 11:27:08 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 68526 invoked by uid 99); 14 Sep 2004 11:27:07 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.200.20.178] (HELO crimsonlogic.co.in) (203.200.20.178)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 04:27:06 -0700
Received: from INA098tnat (localhost.localdomain [127.0.0.1])
	by crimsonlogic.co.in (Postfix) with ESMTP id 2FF46233E3
	for <lucene-user@jakarta.apache.org>; Tue, 14 Sep 2004 16:54:17 +0530 (IST)
From: "Natarajan.T" <natarajant@crimsonlogic.co.in>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Search PharseQuery
Date: Tue, 14 Sep 2004 17:01:38 +0530
Message-ID: <003601c49a4e$669824b0$8714a8c0@ssl>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.4024
In-Reply-To: <4146D023.4070709@ifit.uni-klu.ac.at>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1106
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Serigu,


String queryString =3D "\"waht is java\"";
Query q =3D QueryParser.parse(queryString, "field", new
StandardAnalyzer());
System.out.println(q.toString());

This is enough for starting .... consult Lucene API for more information



Are you tested the above query? This search keyword is not a single
keyword.


Regards,
Natarajan.








-----Original Message-----
From: sergiu gordea [mailto:gsergiu@ifit.uni-klu.ac.at]=20
Sent: Tuesday, September 14, 2004 4:34 PM
To: Lucene Users List
Subject: Re: Search PharseQuery

String queryString =3D "\"waht is java\"";
Query q =3D QueryParser.parse(queryString, "field", new
StandardAnalyzer());
System.out.println(q.toString());

This is enough for starting .... consult Lucene API for more information

   Sergiu


Natarajan.T wrote:

>Hi,
>
>Thanks for your mail, that link says only theoretically but I need some
>sample....
>
>
>Regards,
>Natarajan.
>
>
>-----Original Message-----
>From: Cocula Remi [mailto:rcocula@sopragroup.com]=20
>Sent: Tuesday, September 14, 2004 2:58 PM
>To: Lucene Users List
>Subject: RE: Search PharseQuery
>
>Use QueryParser.=20
>please take a look at
>http://today.java.net/pub/a/today/2003/11/07/QueryParserRules.html
>It's pretty clear.
>
>
>-----Message d'origine-----
>De : Natarajan.T [mailto:natarajant@crimsonlogic.co.in]
>Envoy=E9 : mardi 14 septembre 2004 11:26
>=C0 : 'Lucene Users List'
>Objet : Search PharseQuery
>
>
>Hi All,
>
>=20
>
>How do I implement PharseQuery API? Pls send me some sample code.( How
>can I handle "java is platform" as single word?
>
>)
>
> =20
>
>Regards,
>
>Natarajan.
>
>=20
>
>=20
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
> =20
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10215-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 11:38:54 2004
Return-Path: <lucene-user-return-10215-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 34693 invoked from network); 14 Sep 2004 11:38:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 11:38:54 -0000
Received: (qmail 84053 invoked by uid 500); 14 Sep 2004 11:38:38 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 83965 invoked by uid 500); 14 Sep 2004 11:38:37 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 83844 invoked by uid 99); 14 Sep 2004 11:38:35 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.155.196.71] (HELO web60808.mail.yahoo.com) (216.155.196.71)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 14 Sep 2004 04:38:34 -0700
Message-ID: <20040914113832.25286.qmail@web60808.mail.yahoo.com>
Received: from [61.16.175.2] by web60808.mail.yahoo.com via HTTP; Tue, 14 Sep 2004 12:38:32 BST
Date: Tue, 14 Sep 2004 12:38:32 +0100 (BST)
From: =?iso-8859-1?q?Honey=20George?= <honey_george@yahoo.com>
Subject: Re: Search PharseQuery
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <002701c49a3c$cc1e9c90$8714a8c0@ssl>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

 --- "Natarajan.T" <natarajant@crimsonlogic.co.in>
wrote: 
> Hi All,
> 
>  
> 
> How do I implement PharseQuery API? 

What exactly you mean by implement? Are you trying to
extend the current behavior or only trying find out
the usage?
Thanks,
  George



	
	
		
___________________________________________________________ALL-NEW Yahoo! Messenger - all new features - even more fun!  http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10216-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 11:48:56 2004
Return-Path: <lucene-user-return-10216-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 39615 invoked from network); 14 Sep 2004 11:48:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 11:48:55 -0000
Received: (qmail 97342 invoked by uid 500); 14 Sep 2004 11:48:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 97301 invoked by uid 500); 14 Sep 2004 11:48:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 97280 invoked by uid 99); 14 Sep 2004 11:48:43 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [62.221.254.25] (HELO pluto.dutchdsl.nl) (62.221.254.25)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 04:48:42 -0700
Received: from aadlaptop (dsl-82-199-135-164.dutchdsl.nl [82.199.135.164])
	by pluto.dutchdsl.nl (Postfix) with ESMTP id 173EA400050
	for <lucene-user@jakarta.apache.org>; Tue, 14 Sep 2004 13:48:39 +0200 (CEST)
From: "Aad Nales" <aad.nales@rotterdam-cs.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Search PharseQuery
Date: Tue, 14 Sep 2004 13:48:32 +0200
Message-ID: <000001c49a50$c5d63eb0$0a00a8c0@aadlaptop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2616
In-Reply-To: <20040914113832.25286.qmail@web60808.mail.yahoo.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

Not sure if this is what you need but I created a lastname filter which
in Dutch means potential double last names like:"van der Vaart". In
order to process these I created a finite state machine that queried
these last names. Since I only needed the filter on 'index' time and I
never use it for querieying, this may not be what you are looking for.
It should be simple to index 'what is java' as a single token and to
search for that same token. However, you will need to create a list of
accepted 'tokens'. If this is what you need let me know, I will make the
code available...

cheers,
Aad Nales

-----Original Message-----
From: Honey George [mailto:honey_george@yahoo.com] 
Sent: Tuesday, 14 September, 2004 13:39
To: Lucene Users List
Subject: Re: Search PharseQuery


 --- "Natarajan.T" <natarajant@crimsonlogic.co.in>
wrote: 
> Hi All,
> 
>  
> 
> How do I implement PharseQuery API?

What exactly you mean by implement? Are you trying to
extend the current behavior or only trying find out
the usage?
Thanks,
  George



	
	
		
___________________________________________________________ALL-NEW
Yahoo! Messenger - all new features - even more fun!
http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10217-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 11:49:06 2004
Return-Path: <lucene-user-return-10217-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 39732 invoked from network); 14 Sep 2004 11:49:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 11:49:06 -0000
Received: (qmail 97527 invoked by uid 500); 14 Sep 2004 11:48:45 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 97315 invoked by uid 500); 14 Sep 2004 11:48:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 97284 invoked by uid 99); 14 Sep 2004 11:48:43 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.200.20.178] (HELO crimsonlogic.co.in) (203.200.20.178)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 04:48:40 -0700
Received: from INA098tnat (localhost.localdomain [127.0.0.1])
	by crimsonlogic.co.in (Postfix) with ESMTP id 1D3D4233E7
	for <lucene-user@jakarta.apache.org>; Tue, 14 Sep 2004 17:15:50 +0530 (IST)
From: "Natarajan.T" <natarajant@crimsonlogic.co.in>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Search PharseQuery
Date: Tue, 14 Sep 2004 17:23:11 +0530
Message-ID: <003901c49a51$693891c0$8714a8c0@ssl>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.4024
In-Reply-To: <20040914113832.25286.qmail@web60808.mail.yahoo.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1106
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I am trying to extend the current behavior.

Regards,
Natarajan.

-----Original Message-----
From: Honey George [mailto:honey_george@yahoo.com] 
Sent: Tuesday, September 14, 2004 5:09 PM
To: Lucene Users List
Subject: Re: Search PharseQuery

 --- "Natarajan.T" <natarajant@crimsonlogic.co.in>
wrote: 
> Hi All,
> 
>  
> 
> How do I implement PharseQuery API? 

What exactly you mean by implement? Are you trying to
extend the current behavior or only trying find out
the usage?
Thanks,
  George



	
	
		
___________________________________________________________ALL-NEW
Yahoo! Messenger - all new features - even more fun!
http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10218-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 11:57:27 2004
Return-Path: <lucene-user-return-10218-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 43406 invoked from network); 14 Sep 2004 11:57:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 11:57:27 -0000
Received: (qmail 3730 invoked by uid 500); 14 Sep 2004 11:57:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 3559 invoked by uid 500); 14 Sep 2004 11:57:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 3546 invoked by uid 99); 14 Sep 2004 11:57:18 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.155.196.65] (HELO web60802.mail.yahoo.com) (216.155.196.65)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 14 Sep 2004 04:57:16 -0700
Message-ID: <20040914115714.81410.qmail@web60802.mail.yahoo.com>
Received: from [61.16.175.2] by web60802.mail.yahoo.com via HTTP; Tue, 14 Sep 2004 12:57:14 BST
Date: Tue, 14 Sep 2004 12:57:14 +0100 (BST)
From: =?iso-8859-1?q?Honey=20George?= <honey_george@yahoo.com>
Subject: RE: Search PharseQuery
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <003901c49a51$693891c0$8714a8c0@ssl>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

 --- "Natarajan.T" <natarajant@crimsonlogic.co.in>
wrote: 
> I am trying to extend the current behavior.
You might have already seen a mail from Cocula Remi on
this. Please provide more details of the problem for
specific comments - basically the problem you are
facing and/or what behavior you are trying to extend.
This was not clear from your email. An example will
make things more clear.

Thanks & Regards,
   George




	
	
		
___________________________________________________________ALL-NEW Yahoo! Messenger - all new features - even more fun!  http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10219-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 11:57:37 2004
Return-Path: <lucene-user-return-10219-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 43502 invoked from network); 14 Sep 2004 11:57:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 11:57:37 -0000
Received: (qmail 3812 invoked by uid 500); 14 Sep 2004 11:57:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 3749 invoked by uid 500); 14 Sep 2004 11:57:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 3588 invoked by uid 99); 14 Sep 2004 11:57:18 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.101.64.100] (HELO snchnm01.scandentgroup.com) (203.101.64.100)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 14 Sep 2004 04:57:17 -0700
Subject: Document Relevance
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
X-Mailer: Lotus Notes Release 5.0.8  June 18, 2001
Message-ID: <OFC4E38945.9A37B268-ON65256F0F.0041AF24@scandentgroup.com>
From: ebrahim.faisal@scandentgroup.com
Date: Tue, 14 Sep 2004 17:29:23 +0530
X-MIMETrack: Serialize by Router on SNCHNM01/Scandent(Release 5.0.8 |June 18, 2001) at
 09/14/2004 05:29:28 PM
MIME-Version: 1.0
Content-type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi

I am new to Lucene.

Could anyone tell me how to set the RELEVANCE in which the search results
are displayed.

Any online Examples available on this topic

I welcome ur suggestions

Thanx & Regards
E.Faisal
Important Email Information :- The  information  in  this  email is
confidential and may  be  legally  privileged. It  is  intended  solely for
the addressee. Access to  this email  by anyone  else  is  unauthorized.
If you are not the intended recipient, any disclosure, copying,
distribution or any action taken or omitted to be taken in reliance on it,
is prohibited  and may be unlawful. If you are not the intended addressee
please contact the sender and dispose of this e-mail immediately.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10220-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 13:53:30 2004
Return-Path: <lucene-user-return-10220-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 33265 invoked from network); 14 Sep 2004 13:53:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 13:53:29 -0000
Received: (qmail 15106 invoked by uid 500); 14 Sep 2004 13:53:15 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 14944 invoked by uid 500); 14 Sep 2004 13:53:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 14929 invoked by uid 99); 14 Sep 2004 13:53:13 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.200.20.178] (HELO crimsonlogic.co.in) (203.200.20.178)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 06:53:10 -0700
Received: from INA098tnat (localhost.localdomain [127.0.0.1])
	by crimsonlogic.co.in (Postfix) with ESMTP id B861A233F1
	for <lucene-user@jakarta.apache.org>; Tue, 14 Sep 2004 19:20:21 +0530 (IST)
From: "Natarajan.T" <natarajant@crimsonlogic.co.in>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Search PharseQuery
Date: Tue, 14 Sep 2004 19:27:43 +0530
Message-ID: <004001c49a62$cf249450$8714a8c0@ssl>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.4024
In-Reply-To: <000001c49a50$c5d63eb0$0a00a8c0@aadlaptop>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1106
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

Thanks for your response.....

For example search keyword is like below...

Language "what is java"

Token 1:  language
Token 2: what is java(like google)


Regards,
Natarajan.





-----Original Message-----
From: Aad Nales [mailto:aad.nales@rotterdam-cs.com] 
Sent: Tuesday, September 14, 2004 5:19 PM
To: 'Lucene Users List'
Subject: RE: Search PharseQuery

Hi,

Not sure if this is what you need but I created a lastname filter which
in Dutch means potential double last names like:"van der Vaart". In
order to process these I created a finite state machine that queried
these last names. Since I only needed the filter on 'index' time and I
never use it for querieying, this may not be what you are looking for.
It should be simple to index 'what is java' as a single token and to
search for that same token. However, you will need to create a list of
accepted 'tokens'. If this is what you need let me know, I will make the
code available...

cheers,
Aad Nales

-----Original Message-----
From: Honey George [mailto:honey_george@yahoo.com] 
Sent: Tuesday, 14 September, 2004 13:39
To: Lucene Users List
Subject: Re: Search PharseQuery


 --- "Natarajan.T" <natarajant@crimsonlogic.co.in>
wrote: 
> Hi All,
> 
>  
> 
> How do I implement PharseQuery API?

What exactly you mean by implement? Are you trying to
extend the current behavior or only trying find out
the usage?
Thanks,
  George



	
	
		
___________________________________________________________ALL-NEW
Yahoo! Messenger - all new features - even more fun!
http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10221-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 13:57:31 2004
Return-Path: <lucene-user-return-10221-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 36388 invoked from network); 14 Sep 2004 13:57:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 13:57:31 -0000
Received: (qmail 24603 invoked by uid 500); 14 Sep 2004 13:56:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 24521 invoked by uid 500); 14 Sep 2004 13:56:52 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 24399 invoked by uid 99); 14 Sep 2004 13:56:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [128.143.104.220] (HELO postfix.mail.ehatchersolutions.com) (128.143.104.220)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 06:56:50 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 12B548CFB7E
	for <lucene-user@jakarta.apache.org>; Tue, 14 Sep 2004 09:56:43 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619)
Content-Transfer-Encoding: 7bit
Message-Id: <E5FA444E-0655-11D9-8607-000393A564E6@hatcher.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: Lucene User <lucene-user@jakarta.apache.org>
From: Erik Hatcher <erik@hatcher.net>
Subject: Indexing object graphs
Date: Tue, 14 Sep 2004 09:56:38 -0400
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Interesting!

	http://kasparov.skife.org/blog/2004/09/13#lucene-graphs


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10222-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 14:06:11 2004
Return-Path: <lucene-user-return-10222-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 42920 invoked from network); 14 Sep 2004 14:06:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 14:06:11 -0000
Received: (qmail 44494 invoked by uid 500); 14 Sep 2004 14:05:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 44311 invoked by uid 500); 14 Sep 2004 14:05:40 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 44240 invoked by uid 99); 14 Sep 2004 14:05:39 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 07:05:37 -0700
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 14 Sep 2004 16:07:35 +0200
Message-ID: <4146FB26.6060202@ifit.uni-klu.ac.at>
Date: Tue, 14 Sep 2004 16:07:34 +0200
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Search PharseQuery
References: <004001c49a62$cf249450$8714a8c0@ssl>
In-Reply-To: <004001c49a62$cf249450$8714a8c0@ssl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 14 Sep 2004 14:07:35.0065 (UTC) FILETIME=[2F16D890:01C49A64]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Natarajan.T wrote:

>Hi,
>
>Thanks for your response.....
>
>For example search keyword is like below...
>
>Language "what is java"
>
>Token 1:  language
>Token 2: what is java(like google)
>
>
>Regards,
>Natarajan.
>
>  
>
Lucene works exaclty as you describe above with a simple correction ...

 The analyzer has a list of  stopped keywords, and I bet "is" is one of  
them for your analyzer.
I don't mind right now about this, so I won't dig to find a solution for 
this problem, but the resolution
should be searched around Analyzer classes.
 All the best,

  Sergiu




>
>
>
>-----Original Message-----
>From: Aad Nales [mailto:aad.nales@rotterdam-cs.com] 
>Sent: Tuesday, September 14, 2004 5:19 PM
>To: 'Lucene Users List'
>Subject: RE: Search PharseQuery
>
>Hi,
>
>Not sure if this is what you need but I created a lastname filter which
>in Dutch means potential double last names like:"van der Vaart". In
>order to process these I created a finite state machine that queried
>these last names. Since I only needed the filter on 'index' time and I
>never use it for querieying, this may not be what you are looking for.
>It should be simple to index 'what is java' as a single token and to
>search for that same token. However, you will need to create a list of
>accepted 'tokens'. If this is what you need let me know, I will make the
>code available...
>
>cheers,
>Aad Nales
>
>-----Original Message-----
>From: Honey George [mailto:honey_george@yahoo.com] 
>Sent: Tuesday, 14 September, 2004 13:39
>To: Lucene Users List
>Subject: Re: Search PharseQuery
>
>
> --- "Natarajan.T" <natarajant@crimsonlogic.co.in>
>wrote: 
>  
>
>>Hi All,
>>
>> 
>>
>>How do I implement PharseQuery API?
>>    
>>
>
>What exactly you mean by implement? Are you trying to
>extend the current behavior or only trying find out
>the usage?
>Thanks,
>  George
>
>
>
>	
>	
>		
>___________________________________________________________ALL-NEW
>Yahoo! Messenger - all new features - even more fun!
>http://uk.messenger.yahoo.com
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10223-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 14:07:32 2004
Return-Path: <lucene-user-return-10223-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 43904 invoked from network); 14 Sep 2004 14:07:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 14:07:32 -0000
Received: (qmail 50394 invoked by uid 500); 14 Sep 2004 14:07:23 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 50307 invoked by uid 500); 14 Sep 2004 14:07:22 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 50278 invoked by uid 99); 14 Sep 2004 14:07:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [128.143.104.220] (HELO postfix.mail.ehatchersolutions.com) (128.143.104.220)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 07:07:20 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 288C18D01F0
	for <lucene-user@jakarta.apache.org>; Tue, 14 Sep 2004 10:07:17 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <LOEGLEEGOAKBOLAJCCKIOEOPCBAA.karthik@controlnet.co.in>
References: <LOEGLEEGOAKBOLAJCCKIOEOPCBAA.karthik@controlnet.co.in>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <60255708-0657-11D9-8607-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: ANT +BUILD  + LUCENE
Date: Tue, 14 Sep 2004 10:07:12 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I'm not following what you want very clearly, but there is an <index> 
task in Lucene's Sandbox.

Please post what you are trying, and I'd be happy to help once I see 
the details.

	Erik

On Sep 12, 2004, at 4:44 PM, Karthik N S wrote:

> Hi
>
> Guys
>
>
> Apologies..........
>
>
> The Task for me is to build the Index folder using Lucene &  a simple
> Build.xml  for ANT
>
> The Problem ...... Same 'Build .xml'  should be used for differnet 
> O/s...
> [ Win / Linux ]
>
> The glitch is  respective jar files such as Lucene-1.4 .jar & other jar
> files are not in same dir for the O/s.
> Also the  I/p , O/p Indexer path for source/target may also vary.
>
>
> Please Somebody Help me..... :(
>
>
>
> with regards
> Karthik
>
>
>
>
>       WITH WARM REGARDS
>       HAVE A NICE DAY
>       [ N.S.KARTHIK]
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10224-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 14:09:17 2004
Return-Path: <lucene-user-return-10224-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 44909 invoked from network); 14 Sep 2004 14:09:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 14:09:17 -0000
Received: (qmail 55915 invoked by uid 500); 14 Sep 2004 14:09:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 55874 invoked by uid 500); 14 Sep 2004 14:09:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 55860 invoked by uid 99); 14 Sep 2004 14:09:02 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [128.143.104.220] (HELO postfix.mail.ehatchersolutions.com) (128.143.104.220)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 07:08:58 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 55FEE8D0214
	for <lucene-user@jakarta.apache.org>; Tue, 14 Sep 2004 10:08:56 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <200409140050.24909@danielnaber.de>
References: <13C35614-0330-11D9-A133-000A95B336F2@snowtide.com> <200409140050.24909@danielnaber.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <9C3F2580-0657-11D9-8607-000393A564E6@hatcher.net>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@hatcher.net>
Subject: Re: Addition to contributions page
Date: Tue, 14 Sep 2004 10:08:53 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Perhaps we should @deprecate the contributions page like we did with=20
the Powered By page, and migrate it to the wiki?

	Erik

On Sep 13, 2004, at 6:50 PM, Daniel Naber wrote:

> On Friday 10 September 2004 15:48, Chas Emerick wrote:
>
>> PDFTextStream should be added to the 'Document Converters' section,
>> with this URL < http://snowtide.com >, and perhaps this heading:
>> 'PDFTextStream -- PDF text and metadata extraction'. =A0The 'Author'
>> field should probably be left blank, since there's no single creator.
>
> I just added it.
>
> Regards
>  Daniel
>
> --=20
> http://www.danielnaber.de
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10225-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 14:20:51 2004
Return-Path: <lucene-user-return-10225-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 53400 invoked from network); 14 Sep 2004 14:20:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 14:20:51 -0000
Received: (qmail 76619 invoked by uid 500); 14 Sep 2004 14:20:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 76513 invoked by uid 500); 14 Sep 2004 14:20:42 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 76480 invoked by uid 99); 14 Sep 2004 14:20:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.200.20.178] (HELO crimsonlogic.co.in) (203.200.20.178)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 07:20:40 -0700
Received: from INA098tnat (localhost.localdomain [127.0.0.1])
	by crimsonlogic.co.in (Postfix) with ESMTP id 4C2AF233F7
	for <lucene-user@jakarta.apache.org>; Tue, 14 Sep 2004 19:47:53 +0530 (IST)
From: "Natarajan.T" <natarajant@crimsonlogic.co.in>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Search PharseQuery
Date: Tue, 14 Sep 2004 19:55:15 +0530
Message-ID: <004101c49a66$a727c680$8714a8c0@ssl>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.4024
In-Reply-To: <4146FB26.6060202@ifit.uni-klu.ac.at>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1106
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Ok you are correct ...


Suppose if I type "what java" then how can I handle...

Regards,
Natarajan.

-----Original Message-----
From: sergiu gordea [mailto:gsergiu@ifit.uni-klu.ac.at] 
Sent: Tuesday, September 14, 2004 7:38 PM
To: Lucene Users List
Subject: Re: Search PharseQuery

Natarajan.T wrote:

>Hi,
>
>Thanks for your response.....
>
>For example search keyword is like below...
>
>Language "what is java"
>
>Token 1:  language
>Token 2: what is java(like google)
>
>
>Regards,
>Natarajan.
>
>  
>
Lucene works exaclty as you describe above with a simple correction ...

 The analyzer has a list of  stopped keywords, and I bet "is" is one of

them for your analyzer.
I don't mind right now about this, so I won't dig to find a solution for

this problem, but the resolution
should be searched around Analyzer classes.
 All the best,

  Sergiu




>
>
>
>-----Original Message-----
>From: Aad Nales [mailto:aad.nales@rotterdam-cs.com] 
>Sent: Tuesday, September 14, 2004 5:19 PM
>To: 'Lucene Users List'
>Subject: RE: Search PharseQuery
>
>Hi,
>
>Not sure if this is what you need but I created a lastname filter which
>in Dutch means potential double last names like:"van der Vaart". In
>order to process these I created a finite state machine that queried
>these last names. Since I only needed the filter on 'index' time and I
>never use it for querieying, this may not be what you are looking for.
>It should be simple to index 'what is java' as a single token and to
>search for that same token. However, you will need to create a list of
>accepted 'tokens'. If this is what you need let me know, I will make
the
>code available...
>
>cheers,
>Aad Nales
>
>-----Original Message-----
>From: Honey George [mailto:honey_george@yahoo.com] 
>Sent: Tuesday, 14 September, 2004 13:39
>To: Lucene Users List
>Subject: Re: Search PharseQuery
>
>
> --- "Natarajan.T" <natarajant@crimsonlogic.co.in>
>wrote: 
>  
>
>>Hi All,
>>
>> 
>>
>>How do I implement PharseQuery API?
>>    
>>
>
>What exactly you mean by implement? Are you trying to
>extend the current behavior or only trying find out
>the usage?
>Thanks,
>  George
>
>
>
>	
>	
>		
>___________________________________________________________ALL-NEW
>Yahoo! Messenger - all new features - even more fun!
>http://uk.messenger.yahoo.com
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10226-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 14:27:26 2004
Return-Path: <lucene-user-return-10226-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 59667 invoked from network); 14 Sep 2004 14:27:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 14:27:26 -0000
Received: (qmail 94235 invoked by uid 500); 14 Sep 2004 14:27:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 94170 invoked by uid 500); 14 Sep 2004 14:27:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 94089 invoked by uid 99); 14 Sep 2004 14:27:10 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DATE_IN_PAST_06_12,LINES_OF_YELLING,SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 14 Sep 2004 07:27:09 -0700
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id I41CRW00.EZD for <lucene-user@jakarta.apache.org>; Tue,
          14 Sep 2004 20:10:44 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: RE: ANT +BUILD  + LUCENE
Date: Tue, 14 Sep 2004 08:04:00 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIEEPHCBAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
Importance: Normal
In-Reply-To: <60255708-0657-11D9-8607-000393A564E6@ehatchersolutions.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi

      Erik


   1) Using Ant and Build.xml I want to run the
org.apache.lucene.demo.IndexFiles to create an Indexfolder

   2) Problem is The same Build.xml is to be used Across the O/s for
creating Index

   3) The path of Lucene1-4-final.jar  are in respective directories for the
O/s...

        [ Note :- The Path of Lucene_home,I/P and O/p directories are also
O/s Specific should be in the Build.xml  and
                        should be trigged somthing   by this type


                             <condition property="isWindows">
                                  <os family="windows" />
                              </condition>

                                           or

                            <condition property="isUnix">
                                  <os family="unix" />
                            </condition>


    I hope u get the situation............. :{


With regards
Karthik



-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Tuesday, September 14, 2004 7:37 PM
To: Lucene Users List
Subject: Re: ANT +BUILD + LUCENE


I'm not following what you want very clearly, but there is an <index>
task in Lucene's Sandbox.

Please post what you are trying, and I'd be happy to help once I see
the details.

	Erik

On Sep 12, 2004, at 4:44 PM, Karthik N S wrote:

> Hi
>
> Guys
>
>
> Apologies..........
>
>
> The Task for me is to build the Index folder using Lucene &  a simple
> Build.xml  for ANT
>
> The Problem ...... Same 'Build .xml'  should be used for differnet
> O/s...
> [ Win / Linux ]
>
> The glitch is  respective jar files such as Lucene-1.4 .jar & other jar
> files are not in same dir for the O/s.
> Also the  I/p , O/p Indexer path for source/target may also vary.
>
>
> Please Somebody Help me..... :(
>
>
>
> with regards
> Karthik
>
>
>
>
>       WITH WARM REGARDS
>       HAVE A NICE DAY
>       [ N.S.KARTHIK]
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10227-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 14:38:28 2004
Return-Path: <lucene-user-return-10227-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 68622 invoked from network); 14 Sep 2004 14:38:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 14:38:28 -0000
Received: (qmail 16765 invoked by uid 500); 14 Sep 2004 14:38:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 16738 invoked by uid 500); 14 Sep 2004 14:38:20 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 16723 invoked by uid 99); 14 Sep 2004 14:38:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 07:38:18 -0700
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 14 Sep 2004 16:40:16 +0200
Message-ID: <414702CE.3020906@ifit.uni-klu.ac.at>
Date: Tue, 14 Sep 2004 16:40:14 +0200
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Search PharseQuery
References: <004101c49a66$a727c680$8714a8c0@ssl>
In-Reply-To: <004101c49a66$a727c680$8714a8c0@ssl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 14 Sep 2004 14:40:16.0472 (UTC) FILETIME=[C02DCD80:01C49A68]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Natarajan.T wrote:

>Ok you are correct ...
>
>
>Suppose if I type "what java" then how can I handle...
>  
>
You don't have to handle it, lucene does it. If you don't like how 
lucene handles it then you may extend
the functionality.

 If you use the same analyzer for indexing and searching then you will 
find the results with both search strings:

"what java" and "what is java".
At least I obtain them in both cases. 
That's right you will obtain 
"what java" if you search for "what is java", in my case is acceptable.

If it is not acceptable in your project, I suggest to try to create a new Analyzer.

  I whish you luck,

  Sergiu







>Regards,
>Natarajan.
>
>-----Original Message-----
>From: sergiu gordea [mailto:gsergiu@ifit.uni-klu.ac.at] 
>Sent: Tuesday, September 14, 2004 7:38 PM
>To: Lucene Users List
>Subject: Re: Search PharseQuery
>
>Natarajan.T wrote:
>
>  
>
>>Hi,
>>
>>Thanks for your response.....
>>
>>For example search keyword is like below...
>>
>>Language "what is java"
>>
>>Token 1:  language
>>Token 2: what is java(like google)
>>
>>
>>Regards,
>>Natarajan.
>>
>> 
>>
>>    
>>
>Lucene works exaclty as you describe above with a simple correction ...
>
> The analyzer has a list of  stopped keywords, and I bet "is" is one of
>
>them for your analyzer.
>I don't mind right now about this, so I won't dig to find a solution for
>
>this problem, but the resolution
>should be searched around Analyzer classes.
> All the best,
>
>  Sergiu
>
>
>
>
>  
>
>>
>>-----Original Message-----
>>From: Aad Nales [mailto:aad.nales@rotterdam-cs.com] 
>>Sent: Tuesday, September 14, 2004 5:19 PM
>>To: 'Lucene Users List'
>>Subject: RE: Search PharseQuery
>>
>>Hi,
>>
>>Not sure if this is what you need but I created a lastname filter which
>>in Dutch means potential double last names like:"van der Vaart". In
>>order to process these I created a finite state machine that queried
>>these last names. Since I only needed the filter on 'index' time and I
>>never use it for querieying, this may not be what you are looking for.
>>It should be simple to index 'what is java' as a single token and to
>>search for that same token. However, you will need to create a list of
>>accepted 'tokens'. If this is what you need let me know, I will make
>>    
>>
>the
>  
>
>>code available...
>>
>>cheers,
>>Aad Nales
>>
>>-----Original Message-----
>>From: Honey George [mailto:honey_george@yahoo.com] 
>>Sent: Tuesday, 14 September, 2004 13:39
>>To: Lucene Users List
>>Subject: Re: Search PharseQuery
>>
>>
>>--- "Natarajan.T" <natarajant@crimsonlogic.co.in>
>>wrote: 
>> 
>>
>>    
>>
>>>Hi All,
>>>
>>>
>>>
>>>How do I implement PharseQuery API?
>>>   
>>>
>>>      
>>>
>>What exactly you mean by implement? Are you trying to
>>extend the current behavior or only trying find out
>>the usage?
>>Thanks,
>> George
>>
>>
>>
>>	
>>	
>>		
>>___________________________________________________________ALL-NEW
>>Yahoo! Messenger - all new features - even more fun!
>>http://uk.messenger.yahoo.com
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>>
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>> 
>>
>>    
>>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10228-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 15:08:55 2004
Return-Path: <lucene-user-return-10228-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 93340 invoked from network); 14 Sep 2004 15:08:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 15:08:55 -0000
Received: (qmail 70072 invoked by uid 500); 14 Sep 2004 15:08:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 70032 invoked by uid 500); 14 Sep 2004 15:08:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 70011 invoked by uid 99); 14 Sep 2004 15:08:43 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [128.143.104.220] (HELO postfix.mail.ehatchersolutions.com) (128.143.104.220)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 08:08:40 -0700
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by postfix.mail.ehatchersolutions.com (Postfix) with ESMTP id 43B588D058F
	for <lucene-user@jakarta.apache.org>; Tue, 14 Sep 2004 11:08:38 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <LOEGLEEGOAKBOLAJCCKIEEPHCBAA.karthik@controlnet.co.in>
References: <LOEGLEEGOAKBOLAJCCKIEEPHCBAA.karthik@controlnet.co.in>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <F20DBC32-065F-11D9-8607-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: ANT +BUILD  + LUCENE
Date: Tue, 14 Sep 2004 11:08:33 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Karthik,

You are still being a bit cryptic and making it hard for me to 
comprehend what the problem is, but here are some general pieces of 
advice with Ant related to what I think you are doing:

* There is no need to use conditional logic to have a different set of 
properties for different operating systems.  There is an implicit and 
declarative way to do this:

	 <property file="${os.name}.properties"/>

But whitespace gets in the way, so you could use the ant-contrib 
<osfamily> (http://ant-contrib.sourceforge.net/tasks/index.html) which 
would be cleaner than the value of ${os.name}.

* Using IndexFiles from the demo is awkward, to me.  Why not give the 
sandbox <index> task a try?

* Ant has a <pathconvert> task that might be handy for you.

Please post how you are using <java> (I can only presume), if that is 
the issue.

	Erik


On Sep 13, 2004, at 10:34 PM, Karthik N S wrote:

> Hi
>
>       Erik
>
>
>    1) Using Ant and Build.xml I want to run the
> org.apache.lucene.demo.IndexFiles to create an Indexfolder
>
>    2) Problem is The same Build.xml is to be used Across the O/s for
> creating Index
>
>    3) The path of Lucene1-4-final.jar  are in respective directories 
> for the
> O/s...
>
>         [ Note :- The Path of Lucene_home,I/P and O/p directories are 
> also
> O/s Specific should be in the Build.xml  and
>                         should be trigged somthing   by this type
>
>
>                              <condition property="isWindows">
>                                   <os family="windows" />
>                               </condition>
>
>                                            or
>
>                             <condition property="isUnix">
>                                   <os family="unix" />
>                             </condition>
>
>
>     I hope u get the situation............. :{
>
>
> With regards
> Karthik
>
>
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Tuesday, September 14, 2004 7:37 PM
> To: Lucene Users List
> Subject: Re: ANT +BUILD + LUCENE
>
>
> I'm not following what you want very clearly, but there is an <index>
> task in Lucene's Sandbox.
>
> Please post what you are trying, and I'd be happy to help once I see
> the details.
>
> 	Erik
>
> On Sep 12, 2004, at 4:44 PM, Karthik N S wrote:
>
>> Hi
>>
>> Guys
>>
>>
>> Apologies..........
>>
>>
>> The Task for me is to build the Index folder using Lucene &  a simple
>> Build.xml  for ANT
>>
>> The Problem ...... Same 'Build .xml'  should be used for differnet
>> O/s...
>> [ Win / Linux ]
>>
>> The glitch is  respective jar files such as Lucene-1.4 .jar & other 
>> jar
>> files are not in same dir for the O/s.
>> Also the  I/p , O/p Indexer path for source/target may also vary.
>>
>>
>> Please Somebody Help me..... :(
>>
>>
>>
>> with regards
>> Karthik
>>
>>
>>
>>
>>       WITH WARM REGARDS
>>       HAVE A NICE DAY
>>       [ N.S.KARTHIK]
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10229-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 15:22:23 2004
Return-Path: <lucene-user-return-10229-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 2656 invoked from network); 14 Sep 2004 15:22:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 15:22:23 -0000
Received: (qmail 87866 invoked by uid 500); 14 Sep 2004 15:22:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 87804 invoked by uid 500); 14 Sep 2004 15:22:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 87791 invoked by uid 99); 14 Sep 2004 15:22:13 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FROM_ENDS_IN_NUMS,HTML_10_20,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.218.93.172] (HELO web42004.mail.yahoo.com) (66.218.93.172)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 14 Sep 2004 08:22:12 -0700
Message-ID: <20040914152211.30661.qmail@web42004.mail.yahoo.com>
Received: from [219.64.131.92] by web42004.mail.yahoo.com via HTTP; Tue, 14 Sep 2004 08:22:11 PDT
Date: Tue, 14 Sep 2004 08:22:11 -0700 (PDT)
From: mahaveer jain <jainmahaveer23@yahoo.com>
Subject: Help for text based indexing
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-522437877-1095175331=:30494"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0-522437877-1095175331=:30494
Content-Type: text/plain; charset=us-ascii


Hi

I have implemented Text based search using lucene. I was wonderful playing around with it.

Now I want to enchance the application.

I have a Root folder, under that I have many other folder, that are group specific, say (group1, group2, .. so on). The Root folder is in C:\tomcat\webapps\Root and group folder within that.

Now I am index for these groups separately, ie , I have index as C:/index/group1, C:/index/group2, C:/index/group3 and so on

I want to know if I can have only one index for all these say C:/index/Root (this has index for all the folder) and I should be able to Search using C:\tomcat\webapps\Root\group1(if want to search for group1) similarly for the other groups.

Let me know if this is possible and have anybody tried this.

2nd question

Is lucene good to index databases ? How do we support incremental indexing ?

(Right now I am using LIKE for searching )

Thanks in Advance

Mahaveer


		
---------------------------------
Do you Yahoo!?
vote.yahoo.com - Register online to vote today!
--0-522437877-1095175331=:30494--

From lucene-user-return-10230-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 15:38:09 2004
Return-Path: <lucene-user-return-10230-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 14150 invoked from network); 14 Sep 2004 15:38:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 15:38:09 -0000
Received: (qmail 18225 invoked by uid 500); 14 Sep 2004 15:37:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 18066 invoked by uid 500); 14 Sep 2004 15:37:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 18039 invoked by uid 99); 14 Sep 2004 15:37:44 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [81.80.239.198] (HELO outbound1.sopragroup.com) (81.80.239.198)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 08:37:42 -0700
Received: by outbound1.sopragroup.com (8.12.10/8.12.10/outbound-A02) with ESMTP id i8EFbdKp032628
          for <lucene-user@jakarta.apache.org>; Tue, 14 Sep 2004 17:37:39 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6556.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Help for text based indexing
Date: Tue, 14 Sep 2004 17:37:37 +0200
Message-ID: <5933531F07A5144E9E53E1AA45257E4BF650F8@wexchbe03.ancy.fr.sopra>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Help for text based indexing
Thread-Index: AcSabqGPOOTfhO30QaqBSH+2975slgAAIFZQ
From: "Cocula Remi" <rcocula@sopragroup.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-OriginalArrivalTime: 14 Sep 2004 15:46:30.0953 (UTC) FILETIME=[01277990:01C49A72]
X-Scanned-By: MIMEDefang 2.38
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

You just have to loop recurssively over the C:\tomcat\webapps\Root tree =
to create your index.
Yes you can index databases; you will just have to write a mechanism =
that is able to create org.apache.lucene.document.Document from =
database.
For instance :=20
- connect JDBC
- run a query for obtaining a ResultSet
- loop for each row of that ResultSet :
	Create a new org.apache.lucene.document.Document from ResultSet data
	and add this document to the Index.
end loop.

For incremental indexing, I suppose you have to store some timestamp =
field in your index; but it's up to you.
Note that Lucene is very fast and I don't think that incremetal indexing =
is required for small or medium amout of data.



-----Message d'origine-----
De : mahaveer jain [mailto:jainmahaveer23@yahoo.com]
Envoy=E9 : mardi 14 septembre 2004 17:22
=C0 : lucene-user@jakarta.apache.org
Objet : Help for text based indexing



Hi

I have implemented Text based search using lucene. I was wonderful =
playing around with it.

Now I want to enchance the application.

I have a Root folder, under that I have many other folder, that are =
group specific, say (group1, group2, .. so on). The Root folder is in =
C:\tomcat\webapps\Root and group folder within that.

Now I am index for these groups separately, ie , I have index as =
C:/index/group1, C:/index/group2, C:/index/group3 and so on

I want to know if I can have only one index for all these say =
C:/index/Root (this has index for all the folder) and I should be able =
to Search using C:\tomcat\webapps\Root\group1(if want to search for =
group1) similarly for the other groups.

Let me know if this is possible and have anybody tried this.

2nd question

Is lucene good to index databases ? How do we support incremental =
indexing ?

(Right now I am using LIKE for searching )

Thanks in Advance

Mahaveer


	=09
---------------------------------
Do you Yahoo!?
vote.yahoo.com - Register online to vote today!

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10231-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 15:49:21 2004
Return-Path: <lucene-user-return-10231-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 20654 invoked from network); 14 Sep 2004 15:49:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 15:49:20 -0000
Received: (qmail 32337 invoked by uid 500); 14 Sep 2004 15:49:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 32292 invoked by uid 500); 14 Sep 2004 15:49:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 32278 invoked by uid 99); 14 Sep 2004 15:49:13 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FROM_ENDS_IN_NUMS,HTML_10_20,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.218.93.169] (HELO web42001.mail.yahoo.com) (66.218.93.169)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 14 Sep 2004 08:49:08 -0700
Message-ID: <20040914154905.89223.qmail@web42001.mail.yahoo.com>
Received: from [219.64.131.92] by web42001.mail.yahoo.com via HTTP; Tue, 14 Sep 2004 08:49:05 PDT
Date: Tue, 14 Sep 2004 08:49:05 -0700 (PDT)
From: mahaveer jain <jainmahaveer23@yahoo.com>
Subject: RE: Help for text based indexing
To: lucene-user@jakarta.apache.org
In-Reply-To: <5933531F07A5144E9E53E1AA45257E4BF650F8@wexchbe03.ancy.fr.sopra>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1962320958-1095176945=:85993"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0-1962320958-1095176945=:85993
Content-Type: text/plain; charset=us-ascii

I am clear with looping recursively to index all the file under Root folder.
But the problem is if I want to search only in group1 or group2.Is that possible to search only in one of the group folder ?
 
Cocula Remi <rcocula@sopragroup.com> wrote:
You just have to loop recurssively over the C:\tomcat\webapps\Root tree to create your index.
Yes you can index databases; you will just have to write a mechanism that is able to create org.apache.lucene.document.Document from database.
For instance : 
- connect JDBC
- run a query for obtaining a ResultSet
- loop for each row of that ResultSet :
Create a new org.apache.lucene.document.Document from ResultSet data
and add this document to the Index.
end loop.

For incremental indexing, I suppose you have to store some timestamp field in your index; but it's up to you.
Note that Lucene is very fast and I don't think that incremetal indexing is required for small or medium amout of data.



-----Message d'origine-----
De : mahaveer jain [mailto:jainmahaveer23@yahoo.com]
Envoy : mardi 14 septembre 2004 17:22
 : lucene-user@jakarta.apache.org
Objet : Help for text based indexing



Hi

I have implemented Text based search using lucene. I was wonderful playing around with it.

Now I want to enchance the application.

I have a Root folder, under that I have many other folder, that are group specific, say (group1, group2, .. so on). The Root folder is in C:\tomcat\webapps\Root and group folder within that.

Now I am index for these groups separately, ie , I have index as C:/index/group1, C:/index/group2, C:/index/group3 and so on

I want to know if I can have only one index for all these say C:/index/Root (this has index for all the folder) and I should be able to Search using C:\tomcat\webapps\Root\group1(if want to search for group1) similarly for the other groups.

Let me know if this is possible and have anybody tried this.

2nd question

Is lucene good to index databases ? How do we support incremental indexing ?

(Right now I am using LIKE for searching )

Thanks in Advance

Mahaveer



---------------------------------
Do you Yahoo!?
vote.yahoo.com - Register online to vote today!

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


		
---------------------------------
Do you Yahoo!?
vote.yahoo.com - Register online to vote today!
--0-1962320958-1095176945=:85993--

From lucene-user-return-10232-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 15:58:39 2004
Return-Path: <lucene-user-return-10232-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 25453 invoked from network); 14 Sep 2004 15:58:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 15:58:39 -0000
Received: (qmail 51156 invoked by uid 500); 14 Sep 2004 15:58:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 50977 invoked by uid 500); 14 Sep 2004 15:58:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 50953 invoked by uid 99); 14 Sep 2004 15:58:28 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [81.80.239.198] (HELO outbound1.sopragroup.com) (81.80.239.198)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 08:58:24 -0700
Received: by outbound1.sopragroup.com (8.12.10/8.12.10/outbound-A02) with ESMTP id i8EFwKKr003409
          for <lucene-user@jakarta.apache.org>; Tue, 14 Sep 2004 17:58:20 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6556.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Help for text based indexing
Date: Tue, 14 Sep 2004 17:58:20 +0200
Message-ID: <5933531F07A5144E9E53E1AA45257E4BF6510D@wexchbe03.ancy.fr.sopra>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Help for text based indexing
Thread-Index: AcSacmZh10tw1iVgQImI0E5jDRzhqgAAENYw
From: "Cocula Remi" <rcocula@sopragroup.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-OriginalArrivalTime: 14 Sep 2004 16:07:12.0406 (UTC) FILETIME=[E51E2B60:01C49A74]
X-Scanned-By: MIMEDefang 2.38
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Well you could add a field to each of your Documents whose value would =
be either "group1" or "group2".
Or you could use the path to your files ...



-----Message d'origine-----
De : mahaveer jain [mailto:jainmahaveer23@yahoo.com]
Envoy=E9 : mardi 14 septembre 2004 17:49
=C0 : lucene-user@jakarta.apache.org
Objet : RE: Help for text based indexing


I am clear with looping recursively to index all the file under Root =
folder.
But the problem is if I want to search only in group1 or group2.Is that =
possible to search only in one of the group folder ?
=20
Cocula Remi <rcocula@sopragroup.com> wrote:
You just have to loop recurssively over the C:\tomcat\webapps\Root tree =
to create your index.
Yes you can index databases; you will just have to write a mechanism =
that is able to create org.apache.lucene.document.Document from =
database.
For instance :=20
- connect JDBC
- run a query for obtaining a ResultSet
- loop for each row of that ResultSet :
Create a new org.apache.lucene.document.Document from ResultSet data
and add this document to the Index.
end loop.

For incremental indexing, I suppose you have to store some timestamp =
field in your index; but it's up to you.
Note that Lucene is very fast and I don't think that incremetal indexing =
is required for small or medium amout of data.



-----Message d'origine-----
De : mahaveer jain [mailto:jainmahaveer23@yahoo.com]
Envoy=E9 : mardi 14 septembre 2004 17:22
=C0 : lucene-user@jakarta.apache.org
Objet : Help for text based indexing



Hi

I have implemented Text based search using lucene. I was wonderful =
playing around with it.

Now I want to enchance the application.

I have a Root folder, under that I have many other folder, that are =
group specific, say (group1, group2, .. so on). The Root folder is in =
C:\tomcat\webapps\Root and group folder within that.

Now I am index for these groups separately, ie , I have index as =
C:/index/group1, C:/index/group2, C:/index/group3 and so on

I want to know if I can have only one index for all these say =
C:/index/Root (this has index for all the folder) and I should be able =
to Search using C:\tomcat\webapps\Root\group1(if want to search for =
group1) similarly for the other groups.

Let me know if this is possible and have anybody tried this.

2nd question

Is lucene good to index databases ? How do we support incremental =
indexing ?

(Right now I am using LIKE for searching )

Thanks in Advance

Mahaveer



---------------------------------
Do you Yahoo!?
vote.yahoo.com - Register online to vote today!

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


	=09
---------------------------------
Do you Yahoo!?
vote.yahoo.com - Register online to vote today!

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10233-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 16:03:20 2004
Return-Path: <lucene-user-return-10233-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 27671 invoked from network); 14 Sep 2004 16:03:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 16:03:20 -0000
Received: (qmail 60173 invoked by uid 500); 14 Sep 2004 16:03:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 60109 invoked by uid 500); 14 Sep 2004 16:03:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 60092 invoked by uid 99); 14 Sep 2004 16:03:11 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FROM_ENDS_IN_NUMS,HTML_10_20,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.218.93.175] (HELO web42007.mail.yahoo.com) (66.218.93.175)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 14 Sep 2004 09:03:09 -0700
Message-ID: <20040914160308.89698.qmail@web42007.mail.yahoo.com>
Received: from [219.64.131.92] by web42007.mail.yahoo.com via HTTP; Tue, 14 Sep 2004 09:03:08 PDT
Date: Tue, 14 Sep 2004 09:03:08 -0700 (PDT)
From: mahaveer jain <jainmahaveer23@yahoo.com>
Subject: RE: Help for text based indexing
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <5933531F07A5144E9E53E1AA45257E4BF6510D@wexchbe03.ancy.fr.sopra>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1245159318-1095177788=:88588"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0-1245159318-1095177788=:88588
Content-Type: text/plain; charset=us-ascii

Well in my case the path is KeyWord. I had tried that earlier and it does not seems to work in a single index file. 
 
Can you explain a bit more about adding group1 and group2 ?
 
Cocula Remi <rcocula@sopragroup.com> wrote:
Well you could add a field to each of your Documents whose value would be either "group1" or "group2".
Or you could use the path to your files ...



-----Message d'origine-----
De : mahaveer jain [mailto:jainmahaveer23@yahoo.com]
Envoy : mardi 14 septembre 2004 17:49
 : lucene-user@jakarta.apache.org
Objet : RE: Help for text based indexing


I am clear with looping recursively to index all the file under Root folder.
But the problem is if I want to search only in group1 or group2.Is that possible to search only in one of the group folder ?

Cocula Remi wrote:
You just have to loop recurssively over the C:\tomcat\webapps\Root tree to create your index.
Yes you can index databases; you will just have to write a mechanism that is able to create org.apache.lucene.document.Document from database.
For instance : 
- connect JDBC
- run a query for obtaining a ResultSet
- loop for each row of that ResultSet :
Create a new org.apache.lucene.document.Document from ResultSet data
and add this document to the Index.
end loop.

For incremental indexing, I suppose you have to store some timestamp field in your index; but it's up to you.
Note that Lucene is very fast and I don't think that incremetal indexing is required for small or medium amout of data.



-----Message d'origine-----
De : mahaveer jain [mailto:jainmahaveer23@yahoo.com]
Envoy : mardi 14 septembre 2004 17:22
 : lucene-user@jakarta.apache.org
Objet : Help for text based indexing



Hi

I have implemented Text based search using lucene. I was wonderful playing around with it.

Now I want to enchance the application.

I have a Root folder, under that I have many other folder, that are group specific, say (group1, group2, .. so on). The Root folder is in C:\tomcat\webapps\Root and group folder within that.

Now I am index for these groups separately, ie , I have index as C:/index/group1, C:/index/group2, C:/index/group3 and so on

I want to know if I can have only one index for all these say C:/index/Root (this has index for all the folder) and I should be able to Search using C:\tomcat\webapps\Root\group1(if want to search for group1) similarly for the other groups.

Let me know if this is possible and have anybody tried this.

2nd question

Is lucene good to index databases ? How do we support incremental indexing ?

(Right now I am using LIKE for searching )

Thanks in Advance

Mahaveer



---------------------------------
Do you Yahoo!?
vote.yahoo.com - Register online to vote today!

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org



---------------------------------
Do you Yahoo!?
vote.yahoo.com - Register online to vote today!

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


		
---------------------------------
Do you Yahoo!?
vote.yahoo.com - Register online to vote today!
--0-1245159318-1095177788=:88588--

From lucene-user-return-10234-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 16:08:54 2004
Return-Path: <lucene-user-return-10234-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 30321 invoked from network); 14 Sep 2004 16:08:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 16:08:54 -0000
Received: (qmail 69672 invoked by uid 500); 14 Sep 2004 16:08:47 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 69652 invoked by uid 500); 14 Sep 2004 16:08:47 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 69635 invoked by uid 99); 14 Sep 2004 16:08:46 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=LINES_OF_YELLING,SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [205.142.197.65] (HELO n6mcgw16.cchmc.org) (205.142.197.65)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 09:08:45 -0700
Received: from DOMX5-MTA by n6mcgw16.cchmc.org
	with Novell_GroupWise; Tue, 14 Sep 2004 12:08:42 -0400
Message-Id: <s146df4a.028@n6mcgw16.cchmc.org>
X-Mailer: Novell GroupWise Internet Agent 6.5.1 
Date: Tue, 14 Sep 2004 12:08:27 -0400
From: "Gerard Sychay" <Gerard.Sychay@cchmc.org>
To: <lucene-user@jakarta.apache.org>
Subject: RE: ANT +BUILD  + LUCENE
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

I've used the following Ant targets for build scripts that required
platform dependent work. In the example here, the property
"catalina.home" is set according to what platform we're running on. You
can adapt as needed.

  <target name="platform" description="Sets properties based on
platform">
    <condition property="isWin32">
      <os family="windows" />
    </condition>
    <condition property="isUnix">
      <os family="unix" />
    </condition>
  </target>

  <target name="win32" depends="platform" if="isWin32"
    description="Sets properties for Win32">
    <echo message="Looks like we're on Win32" />
    <property name="catalina.home" value="C:\Program Files\Apache
Group\Tomcat 5.0" />
  </target>

  <target name="unix" depends="platform" if="isUnix"
    description="Sets properties for Unix">
    <echo message="Looks like we're on Unix" />
    <property name="catalina.home" value="/usr/local/tomcat" />
  </target>




>>> "Karthik N S" <karthik@controlnet.co.in> 09/13/04 10:34PM >>>
Hi

      Erik


   1) Using Ant and Build.xml I want to run the
org.apache.lucene.demo.IndexFiles to create an Indexfolder

   2) Problem is The same Build.xml is to be used Across the O/s for
creating Index

   3) The path of Lucene1-4-final.jar  are in respective directories
for the
O/s...

        [ Note :- The Path of Lucene_home,I/P and O/p directories are
also
O/s Specific should be in the Build.xml  and
                        should be trigged somthing   by this type


                             <condition property="isWindows">
                                  <os family="windows" />
                              </condition>

                                           or

                            <condition property="isUnix">
                                  <os family="unix" />
                            </condition>


    I hope u get the situation............. :{


With regards
Karthik



-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
Sent: Tuesday, September 14, 2004 7:37 PM
To: Lucene Users List
Subject: Re: ANT +BUILD + LUCENE


I'm not following what you want very clearly, but there is an <index>
task in Lucene's Sandbox.

Please post what you are trying, and I'd be happy to help once I see
the details.

	Erik

On Sep 12, 2004, at 4:44 PM, Karthik N S wrote:

> Hi
>
> Guys
>
>
> Apologies..........
>
>
> The Task for me is to build the Index folder using Lucene &  a
simple
> Build.xml  for ANT
>
> The Problem ...... Same 'Build .xml'  should be used for differnet
> O/s...
> [ Win / Linux ]
>
> The glitch is  respective jar files such as Lucene-1.4 .jar & other
jar
> files are not in same dir for the O/s.
> Also the  I/p , O/p Indexer path for source/target may also vary.
>
>
> Please Somebody Help me..... :(
>
>
>
> with regards
> Karthik
>
>
>
>
>       WITH WARM REGARDS
>       HAVE A NICE DAY
>       [ N.S.KARTHIK]
>
>
>
>
>
---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org 
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org 
For additional commands, e-mail: lucene-user-help@jakarta.apache.org 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10235-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 16:16:21 2004
Return-Path: <lucene-user-return-10235-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 33135 invoked from network); 14 Sep 2004 16:16:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 16:16:21 -0000
Received: (qmail 81682 invoked by uid 500); 14 Sep 2004 16:16:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 81611 invoked by uid 500); 14 Sep 2004 16:16:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 81595 invoked by uid 99); 14 Sep 2004 16:16:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [81.80.239.198] (HELO outbound1.sopragroup.com) (81.80.239.198)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 09:16:09 -0700
Received: by outbound1.sopragroup.com (8.12.10/8.12.10/outbound-A02) with ESMTP id i8EGG6Kp006435
          for <lucene-user@jakarta.apache.org>; Tue, 14 Sep 2004 18:16:06 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6556.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Help for text based indexing
Date: Tue, 14 Sep 2004 18:16:06 +0200
Message-ID: <5933531F07A5144E9E53E1AA45257E4BF6511E@wexchbe03.ancy.fr.sopra>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Help for text based indexing
Thread-Index: AcSadFjMaY1lL7gMQCGbrq8WYI400AAAFb+Q
From: "Cocula Remi" <rcocula@sopragroup.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-OriginalArrivalTime: 14 Sep 2004 16:24:58.0218 (UTC) FILETIME=[60642CA0:01C49A77]
X-Scanned-By: MIMEDefang 2.38
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

A keyword is not tokenized, that's why you wont be able to search over a =
part of it. You'd rather use a Text fied.

About creating a special field  :=20
....
IndexWriter Ir =3D ....
....
File f =3D ....
Document  doc =3D new Document();
if (f.toString.startsWith("C:\tomcat\webapps\Root\Group1")
{
	doc.add(Field.Text("group", "Group1"));
}
if (f.toString.startsWith("C:\tomcat\webapps\Root\Group2")
{
	doc.add(Field.Text("group", "Group2"));
}
doc.add(Field.Text("content", getContent(f)));
Ir.addDocument(doc);

....

Then you can search in group1 with query like that :=20

     group:Group1 AND rest_of_the_query.



-----Message d'origine-----
De : mahaveer jain [mailto:jainmahaveer23@yahoo.com]
Envoy=E9 : mardi 14 septembre 2004 18:03
=C0 : Lucene Users List
Objet : RE: Help for text based indexing


Well in my case the path is KeyWord. I had tried that earlier and it =
does not seems to work in a single index file.=20
=20
Can you explain a bit more about adding group1 and group2 ?
=20
Cocula Remi <rcocula@sopragroup.com> wrote:
Well you could add a field to each of your Documents whose value would =
be either "group1" or "group2".
Or you could use the path to your files ...



-----Message d'origine-----
De : mahaveer jain [mailto:jainmahaveer23@yahoo.com]
Envoy=E9 : mardi 14 septembre 2004 17:49
=C0 : lucene-user@jakarta.apache.org
Objet : RE: Help for text based indexing


I am clear with looping recursively to index all the file under Root =
folder.
But the problem is if I want to search only in group1 or group2.Is that =
possible to search only in one of the group folder ?

Cocula Remi wrote:
You just have to loop recurssively over the C:\tomcat\webapps\Root tree =
to create your index.
Yes you can index databases; you will just have to write a mechanism =
that is able to create org.apache.lucene.document.Document from =
database.
For instance :=20
- connect JDBC
- run a query for obtaining a ResultSet
- loop for each row of that ResultSet :
Create a new org.apache.lucene.document.Document from ResultSet data
and add this document to the Index.
end loop.

For incremental indexing, I suppose you have to store some timestamp =
field in your index; but it's up to you.
Note that Lucene is very fast and I don't think that incremetal indexing =
is required for small or medium amout of data.



-----Message d'origine-----
De : mahaveer jain [mailto:jainmahaveer23@yahoo.com]
Envoy=E9 : mardi 14 septembre 2004 17:22
=C0 : lucene-user@jakarta.apache.org
Objet : Help for text based indexing



Hi

I have implemented Text based search using lucene. I was wonderful =
playing around with it.

Now I want to enchance the application.

I have a Root folder, under that I have many other folder, that are =
group specific, say (group1, group2, .. so on). The Root folder is in =
C:\tomcat\webapps\Root and group folder within that.

Now I am index for these groups separately, ie , I have index as =
C:/index/group1, C:/index/group2, C:/index/group3 and so on

I want to know if I can have only one index for all these say =
C:/index/Root (this has index for all the folder) and I should be able =
to Search using C:\tomcat\webapps\Root\group1(if want to search for =
group1) similarly for the other groups.

Let me know if this is possible and have anybody tried this.

2nd question

Is lucene good to index databases ? How do we support incremental =
indexing ?

(Right now I am using LIKE for searching )

Thanks in Advance

Mahaveer



---------------------------------
Do you Yahoo!?
vote.yahoo.com - Register online to vote today!

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org



---------------------------------
Do you Yahoo!?
vote.yahoo.com - Register online to vote today!

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


	=09
---------------------------------
Do you Yahoo!?
vote.yahoo.com - Register online to vote today!

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10236-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 16:23:50 2004
Return-Path: <lucene-user-return-10236-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 37358 invoked from network); 14 Sep 2004 16:23:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 16:23:50 -0000
Received: (qmail 97642 invoked by uid 500); 14 Sep 2004 16:23:40 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 97581 invoked by uid 500); 14 Sep 2004 16:23:40 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 97568 invoked by uid 99); 14 Sep 2004 16:23:40 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FROM_ENDS_IN_NUMS,HTML_10_20,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.218.93.176] (HELO web42008.mail.yahoo.com) (66.218.93.176)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 14 Sep 2004 09:23:38 -0700
Message-ID: <20040914162334.96891.qmail@web42008.mail.yahoo.com>
Received: from [219.64.131.92] by web42008.mail.yahoo.com via HTTP; Tue, 14 Sep 2004 09:23:34 PDT
Date: Tue, 14 Sep 2004 09:23:34 -0700 (PDT)
From: mahaveer jain <jainmahaveer23@yahoo.com>
Subject: RE: Help for text based indexing
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <5933531F07A5144E9E53E1AA45257E4BF6511E@wexchbe03.ancy.fr.sopra>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1735082376-1095179014=:89241"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0-1735082376-1095179014=:89241
Content-Type: text/plain; charset=us-ascii

If i have rightly understood, you mean to say that the query for search has  to be 
 
"Group1" AND "Hello" (if hello is what I want to search ?)
 
Cocula Remi <rcocula@sopragroup.com> wrote:
A keyword is not tokenized, that's why you wont be able to search over a part of it. You'd rather use a Text fied.

About creating a special field : 
....
IndexWriter Ir = ....
....
File f = ....
Document doc = new Document();
if (f.toString.startsWith("C:\tomcat\webapps\Root\Group1")
{
doc.add(Field.Text("group", "Group1"));
}
if (f.toString.startsWith("C:\tomcat\webapps\Root\Group2")
{
doc.add(Field.Text("group", "Group2"));
}
doc.add(Field.Text("content", getContent(f)));
Ir.addDocument(doc);

....

Then you can search in group1 with query like that : 

group:Group1 AND rest_of_the_query.



-----Message d'origine-----
De : mahaveer jain [mailto:jainmahaveer23@yahoo.com]
Envoy : mardi 14 septembre 2004 18:03
 : Lucene Users List
Objet : RE: Help for text based indexing


Well in my case the path is KeyWord. I had tried that earlier and it does not seems to work in a single index file. 

Can you explain a bit more about adding group1 and group2 ?

Cocula Remi wrote:
Well you could add a field to each of your Documents whose value would be either "group1" or "group2".
Or you could use the path to your files ...



-----Message d'origine-----
De : mahaveer jain [mailto:jainmahaveer23@yahoo.com]
Envoy : mardi 14 septembre 2004 17:49
 : lucene-user@jakarta.apache.org
Objet : RE: Help for text based indexing


I am clear with looping recursively to index all the file under Root folder.
But the problem is if I want to search only in group1 or group2.Is that possible to search only in one of the group folder ?

Cocula Remi wrote:
You just have to loop recurssively over the C:\tomcat\webapps\Root tree to create your index.
Yes you can index databases; you will just have to write a mechanism that is able to create org.apache.lucene.document.Document from database.
For instance : 
- connect JDBC
- run a query for obtaining a ResultSet
- loop for each row of that ResultSet :
Create a new org.apache.lucene.document.Document from ResultSet data
and add this document to the Index.
end loop.

For incremental indexing, I suppose you have to store some timestamp field in your index; but it's up to you.
Note that Lucene is very fast and I don't think that incremetal indexing is required for small or medium amout of data.



-----Message d'origine-----
De : mahaveer jain [mailto:jainmahaveer23@yahoo.com]
Envoy : mardi 14 septembre 2004 17:22
 : lucene-user@jakarta.apache.org
Objet : Help for text based indexing



Hi

I have implemented Text based search using lucene. I was wonderful playing around with it.

Now I want to enchance the application.

I have a Root folder, under that I have many other folder, that are group specific, say (group1, group2, .. so on). The Root folder is in C:\tomcat\webapps\Root and group folder within that.

Now I am index for these groups separately, ie , I have index as C:/index/group1, C:/index/group2, C:/index/group3 and so on

I want to know if I can have only one index for all these say C:/index/Root (this has index for all the folder) and I should be able to Search using C:\tomcat\webapps\Root\group1(if want to search for group1) similarly for the other groups.

Let me know if this is possible and have anybody tried this.

2nd question

Is lucene good to index databases ? How do we support incremental indexing ?

(Right now I am using LIKE for searching )

Thanks in Advance

Mahaveer



---------------------------------
Do you Yahoo!?
vote.yahoo.com - Register online to vote today!

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org



---------------------------------
Do you Yahoo!?
vote.yahoo.com - Register online to vote today!

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org



---------------------------------
Do you Yahoo!?
vote.yahoo.com - Register online to vote today!

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


		
---------------------------------
Do you Yahoo!?
Yahoo! Mail - 50x more storage than other providers!
--0-1735082376-1095179014=:89241--

From lucene-user-return-10237-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 17:57:25 2004
Return-Path: <lucene-user-return-10237-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 76920 invoked from network); 14 Sep 2004 17:57:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 17:57:25 -0000
Received: (qmail 52658 invoked by uid 500); 14 Sep 2004 17:57:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 52619 invoked by uid 500); 14 Sep 2004 17:57:16 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 52457 invoked by uid 99); 14 Sep 2004 17:57:15 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.155.196.72] (HELO web60809.mail.yahoo.com) (216.155.196.72)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 14 Sep 2004 10:57:14 -0700
Message-ID: <20040914175712.88630.qmail@web60809.mail.yahoo.com>
Received: from [61.16.175.2] by web60809.mail.yahoo.com via HTTP; Tue, 14 Sep 2004 18:57:12 BST
Date: Tue, 14 Sep 2004 18:57:12 +0100 (BST)
From: =?iso-8859-1?q?Honey=20George?= <honey_george@yahoo.com>
Subject: PorterStemfilter
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,
 This might be more of a questing related to the
PorterStemmer algorithm rather than with lucene, but
if anyone has the knowledge please share.

I am using the PorterStemFilter that some with lucene
and it turns out that searching for the word 'printer'
does not return a document containing the text
'print'. To narrow down the problem, I have tested the
PorterStemFilter in a standalone programs and it turns
out that the stem of printer is 'printer' and not
'print'. That is 'printer' is not equal to 'print' +
'er', the whole of the word is stem. Can somebody
explain the behavior.

Thanks & Regards,
   George


	
	
		
___________________________________________________________ALL-NEW Yahoo! Messenger - all new features - even more fun!  http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10238-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 18:00:23 2004
Return-Path: <lucene-user-return-10238-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 78292 invoked from network); 14 Sep 2004 18:00:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 18:00:23 -0000
Received: (qmail 59935 invoked by uid 500); 14 Sep 2004 18:00:17 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 59887 invoked by uid 500); 14 Sep 2004 18:00:16 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 59874 invoked by uid 99); 14 Sep 2004 18:00:16 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.155.196.66] (HELO web60803.mail.yahoo.com) (216.155.196.66)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 14 Sep 2004 11:00:15 -0700
Message-ID: <20040914180013.44452.qmail@web60803.mail.yahoo.com>
Received: from [61.16.175.2] by web60803.mail.yahoo.com via HTTP; Tue, 14 Sep 2004 19:00:13 BST
Date: Tue, 14 Sep 2004 19:00:13 +0100 (BST)
From: =?iso-8859-1?q?Honey=20George?= <honey_george@yahoo.com>
Subject: RE: Help for text based indexing
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20040914162334.96891.qmail@web42008.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

You could recieve the group name as an input from the
user and construct a BooleanQuery internally which
will qyery only the group field based on the user
input. So the user need not append the group name with
the search string.

Thanks,
   George
 --- mahaveer jain <jainmahaveer23@yahoo.com> wrote: 
> If i have rightly understood, you mean to say that
> the query for search has  to be 
>  
> "Group1" AND "Hello" (if hello is what I want to
> search ?)
>  
> Cocula Remi <rcocula@sopragroup.com> wrote:
> A keyword is not tokenized, that's why you wont be
> able to search over a part of it. You'd rather use a
> Text fied.
> 
> About creating a special field : 
> ....
> IndexWriter Ir = ....
> ....
> File f = ....
> Document doc = new Document();
> if
>
(f.toString.startsWith("C:\tomcat\webapps\Root\Group1")
> {
> doc.add(Field.Text("group", "Group1"));
> }
> if
>
(f.toString.startsWith("C:\tomcat\webapps\Root\Group2")
> {
> doc.add(Field.Text("group", "Group2"));
> }
> doc.add(Field.Text("content", getContent(f)));
> Ir.addDocument(doc);
> 
> ....
> 
> Then you can search in group1 with query like that :
> 
> 
> group:Group1 AND rest_of_the_query.
> 
> 
> 
> -----Message d'origine-----
> De : mahaveer jain [mailto:jainmahaveer23@yahoo.com]
> Envoy : mardi 14 septembre 2004 18:03
>  : Lucene Users List
> Objet : RE: Help for text based indexing
> 
> 
> Well in my case the path is KeyWord. I had tried
> that earlier and it does not seems to work in a
> single index file. 
> 
> Can you explain a bit more about adding group1 and
> group2 ?
> 
> Cocula Remi wrote:
> Well you could add a field to each of your Documents
> whose value would be either "group1" or "group2".
> Or you could use the path to your files ...
> 
> 
> 
> -----Message d'origine-----
> De : mahaveer jain [mailto:jainmahaveer23@yahoo.com]
> Envoy : mardi 14 septembre 2004 17:49
>  : lucene-user@jakarta.apache.org
> Objet : RE: Help for text based indexing
> 
> 
> I am clear with looping recursively to index all the
> file under Root folder.
> But the problem is if I want to search only in
> group1 or group2.Is that possible to search only in
> one of the group folder ?
> 
> Cocula Remi wrote:
> You just have to loop recurssively over the
> C:\tomcat\webapps\Root tree to create your index.
> Yes you can index databases; you will just have to
> write a mechanism that is able to create
> org.apache.lucene.document.Document from database.
> For instance : 
> - connect JDBC
> - run a query for obtaining a ResultSet
> - loop for each row of that ResultSet :
> Create a new org.apache.lucene.document.Document
> from ResultSet data
> and add this document to the Index.
> end loop.
> 
> For incremental indexing, I suppose you have to
> store some timestamp field in your index; but it's
> up to you.
> Note that Lucene is very fast and I don't think that
> incremetal indexing is required for small or medium
> amout of data.
> 
> 
> 
> -----Message d'origine-----
> De : mahaveer jain [mailto:jainmahaveer23@yahoo.com]
> Envoy : mardi 14 septembre 2004 17:22
>  : lucene-user@jakarta.apache.org
> Objet : Help for text based indexing
> 
> 
> 
> Hi
> 
> I have implemented Text based search using lucene. I
> was wonderful playing around with it.
> 
> Now I want to enchance the application.
> 
> I have a Root folder, under that I have many other
> folder, that are group specific, say (group1,
> group2, .. so on). The Root folder is in
> C:\tomcat\webapps\Root and group folder within that.
> 
> Now I am index for these groups separately, ie , I
> have index as C:/index/group1, C:/index/group2,
> C:/index/group3 and so on
> 
> I want to know if I can have only one index for all
> these say C:/index/Root (this has index for all the
> folder) and I should be able to Search using
> C:\tomcat\webapps\Root\group1(if want to search for
> group1) similarly for the other groups.
> 
> Let me know if this is possible and have anybody
> tried this.
> 
> 2nd question
> 
> Is lucene good to index databases ? How do we
> support incremental indexing ?
> 
> (Right now I am using LIKE for searching )
> 
> Thanks in Advance
> 
> Mahaveer
> 
> 
> 
> ---------------------------------
> Do you Yahoo!?
> vote.yahoo.com - Register online to vote today!
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> 
> 
> 
> ---------------------------------
> Do you Yahoo!?
> vote.yahoo.com - Register online to vote today!
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> 
> 
> 
> ---------------------------------
> Do you Yahoo!?
> vote.yahoo.com - Register online to vote today!
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> 
> 
> 		
> ---------------------------------
> Do you Yahoo!?
> Yahoo! Mail - 50x more storage than other providers! 


	
	
		
___________________________________________________________ALL-NEW Yahoo! Messenger - all new features - even more fun!  http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10239-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 18:19:38 2004
Return-Path: <lucene-user-return-10239-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 195 invoked from network); 14 Sep 2004 18:19:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 18:19:38 -0000
Received: (qmail 79459 invoked by uid 500); 14 Sep 2004 18:19:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 79371 invoked by uid 500); 14 Sep 2004 18:19:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 79356 invoked by uid 99); 14 Sep 2004 18:19:29 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 11:19:27 -0700
Received: (qmail 2805 invoked by uid 532); 14 Sep 2004 18:16:54 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.066783 secs); 14 Sep 2004 18:16:54 -0000
Received: from unknown (HELO ?10.0.0.157?) (127.0.0.1)
  by 0 with SMTP; 14 Sep 2004 18:16:54 -0000
Message-ID: <4147362C.7000405@tropo.com>
Date: Tue, 14 Sep 2004 11:19:24 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.1) Gecko/20040707
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: PorterStemfilter
References: <20040914175712.88630.qmail@web60809.mail.yahoo.com>
In-Reply-To: <20040914175712.88630.qmail@web60809.mail.yahoo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Honey George wrote:

> Hi,
>  This might be more of a questing related to the
> PorterStemmer algorithm rather than with lucene, but
> if anyone has the knowledge please share.

You might want to also try the Snowball stemmer:

http://jakarta.apache.org/lucene/docs/lucene-sandbox/snowball/

And KStem:

http://ciir.cs.umass.edu/downloads/
> 
> I am using the PorterStemFilter that some with lucene
> and it turns out that searching for the word 'printer'
> does not return a document containing the text
> 'print'. To narrow down the problem, I have tested the
> PorterStemFilter in a standalone programs and it turns
> out that the stem of printer is 'printer' and not
> 'print'. That is 'printer' is not equal to 'print' +
> 'er', the whole of the word is stem. Can somebody
> explain the behavior.
> 
> Thanks & Regards,
>    George
> 
> 
> 	
> 	
> 		
> ___________________________________________________________ALL-NEW Yahoo! Messenger - all new features - even more fun!  http://uk.messenger.yahoo.com
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10240-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 18:44:08 2004
Return-Path: <lucene-user-return-10240-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 19683 invoked from network); 14 Sep 2004 18:44:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 18:44:07 -0000
Received: (qmail 20303 invoked by uid 500); 14 Sep 2004 18:44:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 20100 invoked by uid 500); 14 Sep 2004 18:43:58 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 20079 invoked by uid 99); 14 Sep 2004 18:43:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [212.159.14.212] (HELO ptb-relay01.plus.net) (212.159.14.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 11:43:56 -0700
Received: from [80.229.194.52] (helo=joseph)
	 by ptb-relay01.plus.net with smtp (Exim) id 1C7IHM-0005Qm-2X
	for lucene-user@jakarta.apache.org; Tue, 14 Sep 2004 18:43:48 +0000
Message-ID: <10fc01c49a8a$519eea30$34c2e550@joseph>
From: "Pete Lewis" <pete@uptima.co.uk>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <20040914175712.88630.qmail@web60809.mail.yahoo.com>
Subject: Re: PorterStemfilter
Date: Tue, 14 Sep 2004 19:40:32 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi George

There are lots of problems with Port stemmers, not great for English but get
worse for other languages.

If you look at:

http://snowball.tartarus.org/demo.php

You'll see the Snowball demo - this is basically another instance of Porter.

If you enter "print" and "printer" and submit then the results will be
"print" and "printer" - hence showing the the Porter stemmed versions are
the same as the originals.  Therefore they are both distinct terms in their
own right and searches on one will not hit the other.

Cheers

Pete Lewis

----- Original Message ----- 
From: "Honey George" <honey_george@yahoo.com>
To: <lucene-user@jakarta.apache.org>
Sent: Tuesday, September 14, 2004 6:57 PM
Subject: PorterStemfilter


> Hi,
>  This might be more of a questing related to the
> PorterStemmer algorithm rather than with lucene, but
> if anyone has the knowledge please share.
>
> I am using the PorterStemFilter that some with lucene
> and it turns out that searching for the word 'printer'
> does not return a document containing the text
> 'print'. To narrow down the problem, I have tested the
> PorterStemFilter in a standalone programs and it turns
> out that the stem of printer is 'printer' and not
> 'print'. That is 'printer' is not equal to 'print' +
> 'er', the whole of the word is stem. Can somebody
> explain the behavior.
>
> Thanks & Regards,
>    George
>
>
>
>
>
> ___________________________________________________________ALL-NEW Yahoo!
Messenger - all new features - even more fun!  http://uk.messenger.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10241-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 18:48:15 2004
Return-Path: <lucene-user-return-10241-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21089 invoked from network); 14 Sep 2004 18:48:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 18:48:15 -0000
Received: (qmail 25803 invoked by uid 500); 14 Sep 2004 18:48:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 25355 invoked by uid 500); 14 Sep 2004 18:48:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 25342 invoked by uid 99); 14 Sep 2004 18:48:09 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [212.159.14.212] (HELO ptb-relay01.plus.net) (212.159.14.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 11:48:08 -0700
Received: from [80.229.194.52] (helo=joseph)
	 by ptb-relay01.plus.net with smtp (Exim) id 1C7ILR-0007CZ-UY
	for lucene-user@jakarta.apache.org; Tue, 14 Sep 2004 18:48:02 +0000
Message-ID: <110401c49a8a$e8eeb960$34c2e550@joseph>
From: "Pete Lewis" <pete@uptima.co.uk>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <20040914175712.88630.qmail@web60809.mail.yahoo.com> <4147362C.7000405@tropo.com>
Subject: Re: PorterStemfilter
Date: Tue, 14 Sep 2004 19:44:46 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi David

I like KStem more than Porter / Snowball - but still has limitations
although performs better as it has a dictionary to augment the rules.

Note that KStem will also treat "print" and "printer" as two distinct terms,
probably treating it as verb and noun respectively.

Cheers

Pete Lewis

----- Original Message ----- 
From: "David Spencer" <dave-lucene-user@tropo.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Tuesday, September 14, 2004 7:19 PM
Subject: Re: PorterStemfilter


> Honey George wrote:
>
> > Hi,
> >  This might be more of a questing related to the
> > PorterStemmer algorithm rather than with lucene, but
> > if anyone has the knowledge please share.
>
> You might want to also try the Snowball stemmer:
>
> http://jakarta.apache.org/lucene/docs/lucene-sandbox/snowball/
>
> And KStem:
>
> http://ciir.cs.umass.edu/downloads/
> >
> > I am using the PorterStemFilter that some with lucene
> > and it turns out that searching for the word 'printer'
> > does not return a document containing the text
> > 'print'. To narrow down the problem, I have tested the
> > PorterStemFilter in a standalone programs and it turns
> > out that the stem of printer is 'printer' and not
> > 'print'. That is 'printer' is not equal to 'print' +
> > 'er', the whole of the word is stem. Can somebody
> > explain the behavior.
> >
> > Thanks & Regards,
> >    George
> >
> >
> >
> >
> >
> > ___________________________________________________________ALL-NEW
Yahoo! Messenger - all new features - even more fun!
http://uk.messenger.yahoo.com
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10242-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 19:23:39 2004
Return-Path: <lucene-user-return-10242-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 48433 invoked from network); 14 Sep 2004 19:23:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 19:23:38 -0000
Received: (qmail 81395 invoked by uid 500); 14 Sep 2004 19:23:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 81368 invoked by uid 500); 14 Sep 2004 19:22:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 81329 invoked by uid 99); 14 Sep 2004 19:22:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 12:22:57 -0700
Received: (qmail 5856 invoked by uid 532); 14 Sep 2004 19:20:22 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.310459 secs); 14 Sep 2004 19:20:22 -0000
Received: from unknown (HELO ?10.0.0.157?) (127.0.0.1)
  by 0 with SMTP; 14 Sep 2004 19:20:22 -0000
Message-ID: <4147450C.7080206@tropo.com>
Date: Tue, 14 Sep 2004 12:22:52 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.1) Gecko/20040707
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: NGramSpeller contribution -- Re: combining open office spellchecker
 with Lucene
References: <000001c49572$72cacc00$0a00a8c0@aadlaptop> <41407E48.20401@tropo.com> <4140818C.9010305@getopt.org>
In-Reply-To: <4140818C.9010305@getopt.org>
Content-Type: multipart/mixed;
 boundary="------------060100010406080706070302"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--------------060100010406080706070302
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Andrzej Bialecki wrote:

> David Spencer wrote:
> 
>>
>> I can/should send the code out. The logic is that for any terms in a 
>> query that have zero matches, go thru all the terms(!) and calculate 
>> the Levenshtein string distance, and return the best matches. A more 
>> intelligent way of doing this is to instead look for terms that also 
>> match on the 1st "n" (prob 3) chars.
> 
> 
> ...or prepare in advance a fast lookup index - split all existing terms 
> to bi- or trigrams, create a separate lookup index, and then simply for 
> each term ask a phrase query (phrase = all n-grams from an input term), 
> with a slop > 0, to get similar existing terms. This should be fast, and 
> you could provide a "did you mean" function too...
> 

Based on this mail I wrote a "ngram speller" for Lucene. It runs in 2 
phases. First you build a "fast lookup index" as mentioned above. Then 
to correct a word you do a query in this index based on the ngrams in 
the misspelled word.

Let's see.

[1] Source is attached and I'd like to contribute it to the sandbox, esp 
if someone can validate that what it's doing is reasonable and useful.

[2] Here's a demo page. I built an ngram index for ngrams of length 3 
and 4 based on the existing index I have of approx 100k 
javadoc-generated pages. You type in a misspelled word like "recursixe" 
or whatnot to see what suggestions it returns. Note this is not a normal 
search index query -- rather this is a test page for spelling corrections.

http://www.searchmorph.com/kat/spell.jsp

[3] Here's the javadoc:

http://www.searchmorph.com/pub/ngramspeller/org/apache/lucene/spell/NGramSpeller.html

[4] Here's source in HTML:

http://www.searchmorph.com/pub/ngramspeller/src-html/org/apache/lucene/spell/NGramSpeller.html#line.152

[5] A few more details:

Based on a subsequent mail in this thread I set boosts for the words in 
the ngram index. The background is each word (er..term for a given 
field) in the orig index is a separate Document in the ngram index. This 
Doc contains all ngrams (in my test case, like #2 above, of length 3 and 
4) of the word. I also set a boost of log(word_freq)/log(num_docs) so 
that more frequently words will tend to be suggested more often.

I think in "plain" English then the way a word is suggested as a 
spelling correction is:
- frequently occuring words score higher
- words that share more ngrams with the orig word score higher
- words that share rare ngrams with the orig word score higher

[6]

If people want to vote me in as a committer to the sandbox then I can 
check this code in - though again, I'd appreciate feedback.

thx,
  Dave




--------------060100010406080706070302
Content-Type: text/plain;
 name="NGramSpeller.java"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="NGramSpeller.java"

package org.apache.lucene.spell;

/* ====================================================================
 * The Apache Software License, Version 1.1
 *
 * Copyright (c) 2001-2003 The Apache Software Foundation.  All rights
 * reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 *
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in
 *    the documentation and/or other materials provided with the
 *    distribution.
 *
 * 3. The end-user documentation included with the redistribution,
 *    if any, must include the following acknowledgment:
 *       "This product includes software developed by the
 *        Apache Software Foundation (http://www.apache.org/)."
 *    Alternately, this acknowledgment may appear in the software itself,
 *    if and wherever such third-party acknowledgments normally appear.
 *
 * 4. The names "Apache" and "Apache Software Foundation" and
 *    "Apache Lucene" must not be used to endorse or promote products
 *    derived from this software without prior written permission. For
 *    written permission, please contact apache@apache.org.
 *
 * 5. Products derived from this software may not be called "Apache",
 *    "Apache Lucene", nor may "Apache" appear in their name, without
 *    prior written permission of the Apache Software Foundation.
 *
 * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
 * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
 * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
 * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
 * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
 * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
 * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 * ====================================================================
 *
 * This software consists of voluntary contributions made by many
 * individuals on behalf of the Apache Software Foundation.  For more
 * information on the Apache Software Foundation, please see
 * <http://www.apache.org/>.
 */

import org.apache.lucene.analysis.*;
import org.apache.lucene.index.*;
import org.apache.lucene.store.*;
import org.apache.lucene.document.*;
import org.apache.lucene.util.*;
import org.apache.lucene.search.*;
import org.apache.lucene.queryParser.*;

import java.io.*;
import java.util.*;
import java.text.*;

/**
 * Do spelling correction based on ngram frequency of terms in an index.
 *
 * Developed based on <a href="http://marc.theaimsgroup.com/?l=lucene-user&m=109474652805339&w=2">this message</a> in the lucene-user list.
 *
 * <p>
 * There are two parts to this algorithm.
 * First a ngram lookup table is formed for all terms in an index.
 * Then suggested spelling corrections can be done based on this table.
 * <p>
 * The "lookup table" is actually another Lucene index.
 * It is built by going through all terms in
 * your original index and storing the term in a Document with all ngrams that make it up.
 * Ngrams of length 3 and 4 are suggested.
 * <p>
 *
 * In addition the prefix and suffix ngrams are stored in case you want to use a heuristic that people usually
 * know the first few characters of a word.
 *
 * <p>
 * The entry's boost is set by default to log(word_freq)/log(num_docs).
 *
 * <p>
 *
 * For a word like "kings" a {@link Document} with the following fields is made in the ngram index:
 *
 * <pre>
 * word:kings
 * gram3:kin
 * gram3:ing
 * gram3:ngs
 * gram4:king
 * gram4:ings
 * start3:kin
 * start4:king
 * end3:ngs
 * end4:ings
 *
 * boost: log(freq('kings'))/log(num_docs).
 * </pre>
 *
 *
 * When a lookup is done a query is formed with all ngrams in the misspelled word.
 *
 * <p>
 * For a word like <code>"kingz"</code> a query is formed like this.
 *
 * Query: <br>
 * <code>
 * gram3:kin gram3:ing gram3:ngz start3:kin^B1 end3:ngz^B2 start4:king^B1 end4:ingz^B2
 * </code>
 * <br>
 * 
 * Above B1 and B2 are the prefix and suffix boosts.
 * The prefix boost should probably be &gt;= 2.0 and the suffix boost should probably be just a little above 1. 
 *
 * <p>
 * <b>To build</b> the ngram index based on the "contents" field in an existing index 'orig_index' you run the main() driver like this:<br>
 * <code>
 * java org.apache.lucene.spell.NGramSpeller -f contents -i orig_index -o ngram_index
 * </code>
 *
 * <p>
 * Once you build an index you can <b>perform spelling corrections using</b>
 * {@link #suggestUsingNGrams suggestUsingNGrams(...)}.
 * 
 *
 * <p>
 *
 * To play around with the code against an index approx 100k javadoc-generated web pages circa Sept/2004
 * go here: 
 * <a href='http://www.searchmorph.com/kat/spell.jsp'>http://www.searchmorph.com/kat/spell.jsp</a>.
 *
 * <p>
 * Of interest might be the <a href="http://secondstring.sourceforge.net/">secondstring</a> string matching package
 * and
 * <a href="http://specialist.nlm.nih.gov/nls/gspell/doc/apiDoc/overview-summary.html">gspell</a>.
 *
 * 
 *
 * @author <a href="mailto:dave&#64;tropo.com?subject=NGramSpeller">David Spencer</a>
 *
 */
public final class NGramSpeller
{
	/**
	 *
	 */
	private NGramSpeller()
	{
	}
	
	/**
	 * Main driver, used to build an index.
	 * You probably want invoke like this:
	 * <br>
	 * <code>
	 * java org.apache.lucene.spell.NGramSpeller -f contents -i orig_index -o ngram_index
	 * </code>
	 */
	public static void main(String[] args)
		throws Throwable
	{
		int minThreshold = 5;
		int ng1 = 3;
		int ng2 = 4;
		int maxr = 10;
		int maxd = 5;
		String out = "gram_index";
		String gi = "gram_index";
		
		String name = null;
		String field = "contents";
		for ( int i = 0; i< args.length; i++)
		{
			if ( args[i].equals( "-i"))
				name = args[ ++i];
			else if ( args[i].equals( "-gi"))
				gi = args[ ++i];			
			else if ( args[i].equals( "-o"))
				out = args[ ++i];
			else if ( args[i].equals( "-q"))
			{
				String goal = args[ ++i];
				o.println( "[NGrams] for " + goal + " from " + gi);

				float bStart = 1.1f;
				float bEnd = 1.0f;

				IndexReader ir = IndexReader.open( gi);
				IndexSearcher searcher = new IndexSearcher( gi);
				List lis = new ArrayList( maxr);
				String[] res = suggestUsingNGrams( searcher,
												   goal,
												   ng1, ng2,
												   maxr, bStart, bEnd, maxd, lis);
				Iterator it = lis.iterator();
				while ( it.hasNext())
				{
					Object[] ar = (Object[]) it.next();
					String word = (String) ar[ 0];
					o.println( "word=" + ar[ 0] + " score=" + ar[ 1] + " dist=" + ar[ 2] +
							   " :: " +
							   ir.docFreq( new Term( "title", word)) +
							   " : " +
							   ir.docFreq( new Term( "contents", word)));
				}
				searcher.close();
				ir.close();
				return;
			}
			else if ( args[i].equals( "-f"))
				field = args[ ++i];
			else
			{
				o.println( "hmm? " + args[ i]);
				System.exit( 1);
			}
		}
		if ( name == null)
		{
			o.println( "opps");
			System.exit( 1);
		}
		o.println( "Opening "+ name);
		IndexReader.unlock( FSDirectory.getDirectory( name, false));
		final IndexReader r = IndexReader.open( name);


		o.println( "Docs: " + nf.format( r.numDocs()));
		o.println( "Using field: " + field);
		
		IndexWriter writer = new IndexWriter( out,
											  new WhitespaceAnalyzer(),
											  true);
		writer.mergeFactor *= 50;
		writer.minMergeDocs *= 50;

		o.println( "Forming index from " + name + " to " + out);
		int res = formNGramIndex( r, writer,
								  ng1, ng2,
								  field,
								  minThreshold);
		
		o.println( "done, did "+ res + " ngrams");
		writer.optimize();
		writer.close();
		r.close();		
	}


	/**
	 * Using an NGram algorithm try to find alternate spellings for a "goal" word based on the ngrams in it.
	 *
	 * @param searcher the searcher for the "ngram" index
	 *
	 * @param goal the word you want a spell check done on
	 *
	 * @param ng1 the min ngram length to use, probably 3 and it defaults to 3 if you pass in a value &lt;= 0
	 *
	 * @param ng2 the max ngram length to use, probably 3 or 4
	 *
	 * @param maxr max results to return, probably a small number like 5 for normal use or 10-100 for testing
	 *
	 * @param bStart how to boost matches that start the same way as the goal word, probably greater than 2
	 *
	 * @param bEnd how to boost matches that end the same way as the goal word, probably greater than or equal to 1
	 *
	 * @param maxd filter for the max Levenshtein string distance for matches, probably a number like 3, 4, or 5, or use 0 for it to be ignored. This prevents words radically longer but similar to the goal word from being returned.
	 *
	 * @param details if non null is a list with one entry per match.
	 * Each entry is an array of ([String] word, [Double] score, [Integer] Levenshtein string distance).
	 *
	 * @return the strings suggested with the best one first
	 */
	public static String[] suggestUsingNGrams( Searcher searcher,
											   String goal,
											   int ng1,
											   int ng2,
											   int maxr,
											   float bStart,
											   float bEnd,
											   int maxd,
											   List details)
		throws Throwable
	{
		List res = new ArrayList( maxr);
		BooleanQuery query = new BooleanQuery();
		if ( ng1 <= 0)   ng1 = 3; // guess
		if ( ng2 < ng1)  ng2 = ng1;
		if ( bStart < 0) bStart = 0; 
		if ( bEnd < 0)   bEnd = 0;

		TRStringDistance sd = new TRStringDistance( goal);
		for ( int ng = ng1; ng <= ng2; ng++) // for every ngram in range
		{
			String[] grams = formGrams( goal, ng); // form word into ngrams (allow dups too)

			if ( grams.length == 0) continue; // hmm
			
			String key = "gram" + ng; // form key
			
			if ( bStart > 0) // should we boost prefixes?
				add( query, "start"+ng, grams[ 0], bStart); // matches start of word
			
			if ( bEnd > 0) // should we boost suffixes
				add( query, "end"+ng, grams[grams.length-1], bEnd); // matches end of word
			
			// match ngrams anywhere, w/o a boost
			for ( int i = 0; i < grams.length; i++)
			{
				add( query, key, grams[ i]);
			}
		}
		Hits hits = searcher.search(query);
		int len = hits.length();
		int remain = maxr;
		int stop = Math.min( len, 10*maxr); // go thru more than 'maxr' matches in case the distance filter triggers
		for (int i = 0; i < Math.min( len, maxr) && remain > 0; i++)
		{
			Document d = hits.doc( i);
			String word = d.get( F_WORD); // get orig word
			int dist = sd.getDistance( word); // use distance filter
			if ( maxd > 0 && dist > maxd) continue;

			remain--;
			res.add( word);
			if ( details != null) // only non-null for testing probably
				details.add( new Object[] { word,
											new Double( hits.score( i)),
											new Integer( dist)});			
		}
		return (String[]) res.toArray( new String[ 0]);
	}

	/**
	 * Add a clause to a boolean query.
	 */	
	private static void add( BooleanQuery q, String k, String v)
	{
		q.add( new BooleanClause( new TermQuery( new Term( k, v)), false, false));
	}



	/**
	 * Go thru all terms and form an index of the "ngrams" of length 'ng1' to 'ng2' in each term.
	 * The ngrams have field names like "gram3" for a 3 char ngram, and "gram4" for a 4 char one.
	 * The starting and ending (or prefix and suffix) "n" characters are also
	 * stored for each word with field names "start3" and "end3".
	 *
	 *
	 * @param r the index to read terms from
	 *
	 * @param w the writer to write the ngrams to, or if null an index named "gram_index" will be created. If you pass in non-null then you should optimize and close the index.
	 *
	 * @param ng1 the min number of chars to form ngrams with (3 is suggested)
	 *
	 * @param ng2 the max number of chars to form ngrams with, can be equal to ng1
	 *
	 * @param fields the field name to process ngrams from.
	 *
	 * @param minThreshold terms must appear in at least this many docs else they're ignored as the assumption is that they're so rare (...)
	 *
	 * @return the number of ngrams added
	 *
	 */
	private static int formNGramIndex( IndexReader r,
									   IndexWriter _w,
									   int ng1,
									   int ng2,
									   String field,
									   int minThreshold)
		throws IOException
	{
		int mins = 0;
		float nudge = 0.01f; // don't allow boosts to be too small
		IndexWriter w;
		if ( _w == null)
			w = new IndexWriter( "gram_index",
								 new WhitespaceAnalyzer(), // should have no effect
								 true);
		else
			w = _w;
		
		int mod = 10000; // for status
		int nd = r.numDocs();
		final float base = (float) Math.log( 1.0d / ((double)nd));

		if ( field == null)
			field = "contents"; // def field
		field = field.intern(); // is it doced that you can use == on fields?

		int grams = 0; // # of ngrams added
		final TermEnum te = r.terms();
		int n = 0;
		int skips = 0;
		while ( te.next())
		{
			boolean show = false; // for debugging
			Term t = te.term();
			int df = te.docFreq();
			if ( (++n % mod) == 0)
			{
				show = true;
				o.println( "term: " + t + " n=" + nf.format( n) + " grams=" +nf.format( grams) +
						   " mins="+ nf.format( mins) +
						   " skip=" + nf.format( skips) +
						   " docFreq=" + df);
			}
			if ( df < minThreshold) // not freq enough, too rare to consider
			{
				mins++;
				continue;
			}
			String have = t.field();
			if ( have != field && ! have.equals( field))
			{
				skips++;
				continue;
			}
			
			String text = t.text();
			int len = text.length();
			if ( len < ng1) continue; // too short we bail, "too long" is fine

			Document doc = new Document();
			doc.add( Field.Keyword( F_WORD, text)); // orig term


			// now loop thru all ngrams of lengths 'ng1' to 'ng2'
			for ( int ng = ng1; ng <= ng2; ng++)
			{
				String key = "gram" + ng;
				String end = null;
				for ( int i = 0; i < len-ng+1; i++)
				{
					String gram = text.substring( i, i+ng);
					doc.add( Field.Keyword( key, gram));
					if ( i == 0)
						doc.add( Field.Keyword( "start"+ng, gram));
					end = gram;
					grams++; 
				}
				if ( end != null) // may not be present if len==ng1 
					doc.add( Field.Keyword( "end"+ng, end));
			}

			float f1 = te.docFreq();
			float f2 = nd;

			float bo = (float)((Math.log( f1) / Math.log( f2)) + nudge);
			doc.setBoost( bo);
			if ( show)
				o.println( "f1=" +f1 + " nd=" +nd +
						   " boost=" +bo +
						   " base=" + base +
						   " word=" + text);
			w.addDocument( doc);
		}
		if ( _w == null) // else you have to optimize/close
		{
			w.optimize();
			w.close();
		}
		return grams;
	}
	
	/**
	 * Add a clause to a boolean query.
	 */	
	private static void add( BooleanQuery q, String k, String v, float boost)
	{
		Query tq = new TermQuery( new Term( k, v));
		tq.setBoost( boost);
		q.add( new BooleanClause( tq, false, false));
	}	
	
	/**
	 * Form all ngrams for a given word.
	 * @param text the word to parse
	 * @param ng the ngram length e.g. 3
	 * @return an array of all ngrams in the word and note that duplicates are not removed
	 */
	public static String[] formGrams( String text, int ng)
	{
		List res = new ArrayList( text.length()-ng+1);
		int len = text.length();
		StringBuffer sb = new StringBuffer( ng);
		
		for ( int i = 0; i < len-ng+1; i++)
		{
			res.add( text.substring( i, i+ng));
		}
		return (String[]) res.toArray( new String[ 0]);
	}

	/**
	 * Field name for each word in the ngram index.
	 */	
	public static final String F_WORD = "word";

	/**
	 *
	 */
	private static final PrintStream o = System.out;
	
	/**
	 *
	 */
	private static final NumberFormat nf = NumberFormat.getInstance();

	
	/**
	 * Presumably this is implemented somewhere in the apache/jakarta/commons area but I couldn't find it.
	 *
	 * @link http://www.merriampark.com/ld.htm
	 *
	 */
	private static class TRStringDistance
	{
		
		final char[] sa;
		final int n;
		final int[][][] cache = new int[ 30][][];
	
		/**
		 * Optimized to run a bit faster than the static getDistance().
		 * In one benchmark times were 5.3sec using ctr vs 8.5sec w/ static method, thus 37% faster.
		 */
		private TRStringDistance( String target)
		{
			sa = target.toCharArray();
			n = sa.length;		
		}

		//*****************************
		// Compute Levenshtein distance
		//*****************************
		public int getDistance( String other)
		{
			int d[][]; // matrix
			int cost; // cost

			// Step 1
			final char[] ta = other.toCharArray();
			final int m = ta.length;
			if (n == 0) {
				return m;
			}
			if (m == 0) {
				return n;
			}

			if ( m >= cache.length)
				d = form( n, m);
			else if ( cache[ m] != null)
				d = cache[ m];
			else
				d = cache[ m] = form( n, m);

			// Step 3

			for (int i = 1; i <= n; i++)
			{
				final char s_i = sa[ i - 1];

				// Step 4

				for (int j = 1; j <= m; j++)
				{
					final char t_j = ta[ j - 1];

					// Step 5

					if (s_i == t_j)  // same
						cost = 0;
					else // not a match
						cost = 1;

					// Step 6

					d[i][j] = min3( d[i-1][j]+1, d[i][j-1]+1, d[i-1][j-1] + cost);

				}

			}

			// Step 7

			return d[n][m];

		}

		/**
		 *
		 */
		private static int[][] form( int n, int m)
		{
			int[][] d = new int[n+1][m+1];
			// Step 2

			for (int i = 0; i <= n; i++) 
				d[i][0] = i;

			for (int j = 0; j <= m; j++) 
				d[0][j] = j;
			return d;
		}
	
		//****************************
		// Get minimum of three values
		//****************************
		private static int min3( int a, int b, int c)
		{
			int mi;

			mi = a;
			if (b < mi) {
				mi = b;
			}
			if (c < mi) {
				mi = c;
			}
			return mi;

		}

		//*****************************
		// Compute Levenshtein distance
		//*****************************
		public static int getDistance( String s, String t)
		{
			return getDistance( s.toCharArray(), t.toCharArray());
		}

		//*****************************
		// Compute Levenshtein distance
		//*****************************
		public static int getDistance( final char[] sa, final char[] ta)
		{
			int d[][]; // matrix
			int i; // iterates through s
			int j; // iterates through t
			char s_i; // ith character of s
			char t_j; // jth character of t
			int cost; // cost

			// Step 1

			final int n = sa.length;
			final int m = ta.length;
			if (n == 0) {
				return m;
			}
			if (m == 0) {
				return n;
			}
			d = new int[n+1][m+1];

			// Step 2

			for (i = 0; i <= n; i++) {
				d[i][0] = i;
			}

			for (j = 0; j <= m; j++) {
				d[0][j] = j;
			}

			// Step 3

			for (i = 1; i <= n; i++) {

				s_i = sa[ i - 1];

				// Step 4

				for (j = 1; j <= m; j++) {

					t_j = ta[ j - 1];

					// Step 5

					if (s_i == t_j) {
						cost = 0;
					}
					else {
						cost = 1;
					}

					// Step 6

					d[i][j] = min3( d[i-1][j]+1, d[i][j-1]+1, d[i-1][j-1] + cost);

				}

			}

			// Step 7

			return d[n][m];

		}
	}

}



--------------060100010406080706070302
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
--------------060100010406080706070302--

From lucene-user-return-10243-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 19:26:57 2004
Return-Path: <lucene-user-return-10243-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 49600 invoked from network); 14 Sep 2004 19:26:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 19:26:57 -0000
Received: (qmail 88595 invoked by uid 500); 14 Sep 2004 19:26:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 88537 invoked by uid 500); 14 Sep 2004 19:26:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 88524 invoked by uid 99); 14 Sep 2004 19:26:49 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [206.162.161.114] (HELO exmtl01.nstein.com) (206.162.161.114)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 12:26:48 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.0.6556.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: NGramSpeller contribution -- Re: combining open office spellchecker with Lucene
Date: Tue, 14 Sep 2004 15:26:44 -0400
Message-ID: <CB6D77A564237E43B4C7EF9A6132CD433345DD@exmtl01.nstein.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: NGramSpeller contribution -- Re: combining open office spellchecker with Lucene
Thread-Index: AcSakEzaxmJKFVgqRCiE2YdiMIy3xQAAFteA
From: "Tate Avery" <tate.avery@nstein.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


I get a NullPointerException shown (via Apache) when I try to access =
http://www.searchmorph.com/kat/spell.jsp


T

-----Original Message-----
From: David Spencer [mailto:dave-lucene-user@tropo.com]
Sent: Tuesday, September 14, 2004 3:23 PM
To: Lucene Users List
Subject: NGramSpeller contribution -- Re: combining open office
spellchecker with Lucene


Andrzej Bialecki wrote:

> David Spencer wrote:
>=20
>>
>> I can/should send the code out. The logic is that for any terms in a=20
>> query that have zero matches, go thru all the terms(!) and calculate=20
>> the Levenshtein string distance, and return the best matches. A more=20
>> intelligent way of doing this is to instead look for terms that also=20
>> match on the 1st "n" (prob 3) chars.
>=20
>=20
> ...or prepare in advance a fast lookup index - split all existing =
terms=20
> to bi- or trigrams, create a separate lookup index, and then simply =
for=20
> each term ask a phrase query (phrase =3D all n-grams from an input =
term),=20
> with a slop > 0, to get similar existing terms. This should be fast, =
and=20
> you could provide a "did you mean" function too...
>=20

Based on this mail I wrote a "ngram speller" for Lucene. It runs in 2=20
phases. First you build a "fast lookup index" as mentioned above. Then=20
to correct a word you do a query in this index based on the ngrams in=20
the misspelled word.

Let's see.

[1] Source is attached and I'd like to contribute it to the sandbox, esp =

if someone can validate that what it's doing is reasonable and useful.

[2] Here's a demo page. I built an ngram index for ngrams of length 3=20
and 4 based on the existing index I have of approx 100k=20
javadoc-generated pages. You type in a misspelled word like "recursixe"=20
or whatnot to see what suggestions it returns. Note this is not a normal =

search index query -- rather this is a test page for spelling =
corrections.

http://www.searchmorph.com/kat/spell.jsp

[3] Here's the javadoc:

http://www.searchmorph.com/pub/ngramspeller/org/apache/lucene/spell/NGram=
Speller.html

[4] Here's source in HTML:

http://www.searchmorph.com/pub/ngramspeller/src-html/org/apache/lucene/sp=
ell/NGramSpeller.html#line.152

[5] A few more details:

Based on a subsequent mail in this thread I set boosts for the words in=20
the ngram index. The background is each word (er..term for a given=20
field) in the orig index is a separate Document in the ngram index. This =

Doc contains all ngrams (in my test case, like #2 above, of length 3 and =

4) of the word. I also set a boost of log(word_freq)/log(num_docs) so=20
that more frequently words will tend to be suggested more often.

I think in "plain" English then the way a word is suggested as a=20
spelling correction is:
- frequently occuring words score higher
- words that share more ngrams with the orig word score higher
- words that share rare ngrams with the orig word score higher

[6]

If people want to vote me in as a committer to the sandbox then I can=20
check this code in - though again, I'd appreciate feedback.

thx,
  Dave




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10244-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 19:29:00 2004
Return-Path: <lucene-user-return-10244-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 50575 invoked from network); 14 Sep 2004 19:28:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 19:28:59 -0000
Received: (qmail 90676 invoked by uid 500); 14 Sep 2004 19:28:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 90587 invoked by uid 500); 14 Sep 2004 19:28:52 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 90565 invoked by uid 99); 14 Sep 2004 19:28:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 12:28:51 -0700
Received: (qmail 6118 invoked by uid 532); 14 Sep 2004 19:26:17 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.114771 secs); 14 Sep 2004 19:26:17 -0000
Received: from unknown (HELO ?10.0.0.157?) (127.0.0.1)
  by 0 with SMTP; 14 Sep 2004 19:26:17 -0000
Message-ID: <41474670.6050301@tropo.com>
Date: Tue, 14 Sep 2004 12:28:48 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.1) Gecko/20040707
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: NGramSpeller contribution -- Re: combining open office spellchecker
 with Lucene
References: <CB6D77A564237E43B4C7EF9A6132CD433345DD@exmtl01.nstein.com>
In-Reply-To: <CB6D77A564237E43B4C7EF9A6132CD433345DD@exmtl01.nstein.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Tate Avery wrote:

> I get a NullPointerException shown (via Apache) when I try to access http://www.searchmorph.com/kat/spell.jsp

How embarassing!
Sorry!
Fixed!


> 
> 
> T
> 
> -----Original Message-----
> From: David Spencer [mailto:dave-lucene-user@tropo.com]
> Sent: Tuesday, September 14, 2004 3:23 PM
> To: Lucene Users List
> Subject: NGramSpeller contribution -- Re: combining open office
> spellchecker with Lucene
> 
> 
> Andrzej Bialecki wrote:
> 
> 
>>David Spencer wrote:
>>
>>
>>>I can/should send the code out. The logic is that for any terms in a 
>>>query that have zero matches, go thru all the terms(!) and calculate 
>>>the Levenshtein string distance, and return the best matches. A more 
>>>intelligent way of doing this is to instead look for terms that also 
>>>match on the 1st "n" (prob 3) chars.
>>
>>
>>...or prepare in advance a fast lookup index - split all existing terms 
>>to bi- or trigrams, create a separate lookup index, and then simply for 
>>each term ask a phrase query (phrase = all n-grams from an input term), 
>>with a slop > 0, to get similar existing terms. This should be fast, and 
>>you could provide a "did you mean" function too...
>>
> 
> 
> Based on this mail I wrote a "ngram speller" for Lucene. It runs in 2 
> phases. First you build a "fast lookup index" as mentioned above. Then 
> to correct a word you do a query in this index based on the ngrams in 
> the misspelled word.
> 
> Let's see.
> 
> [1] Source is attached and I'd like to contribute it to the sandbox, esp 
> if someone can validate that what it's doing is reasonable and useful.
> 
> [2] Here's a demo page. I built an ngram index for ngrams of length 3 
> and 4 based on the existing index I have of approx 100k 
> javadoc-generated pages. You type in a misspelled word like "recursixe" 
> or whatnot to see what suggestions it returns. Note this is not a normal 
> search index query -- rather this is a test page for spelling corrections.
> 
> http://www.searchmorph.com/kat/spell.jsp
> 
> [3] Here's the javadoc:
> 
> http://www.searchmorph.com/pub/ngramspeller/org/apache/lucene/spell/NGramSpeller.html
> 
> [4] Here's source in HTML:
> 
> http://www.searchmorph.com/pub/ngramspeller/src-html/org/apache/lucene/spell/NGramSpeller.html#line.152
> 
> [5] A few more details:
> 
> Based on a subsequent mail in this thread I set boosts for the words in 
> the ngram index. The background is each word (er..term for a given 
> field) in the orig index is a separate Document in the ngram index. This 
> Doc contains all ngrams (in my test case, like #2 above, of length 3 and 
> 4) of the word. I also set a boost of log(word_freq)/log(num_docs) so 
> that more frequently words will tend to be suggested more often.
> 
> I think in "plain" English then the way a word is suggested as a 
> spelling correction is:
> - frequently occuring words score higher
> - words that share more ngrams with the orig word score higher
> - words that share rare ngrams with the orig word score higher
> 
> [6]
> 
> If people want to vote me in as a committer to the sandbox then I can 
> check this code in - though again, I'd appreciate feedback.
> 
> thx,
>   Dave
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10245-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 20:42:32 2004
Return-Path: <lucene-user-return-10245-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 84835 invoked from network); 14 Sep 2004 20:42:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 20:42:32 -0000
Received: (qmail 38352 invoked by uid 500); 14 Sep 2004 20:42:26 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 38053 invoked by uid 500); 14 Sep 2004 20:42:24 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 38040 invoked by uid 99); 14 Sep 2004 20:42:24 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 13:42:22 -0700
Received: from [192.168.0.254] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id i8EKgND18063
	for <lucene-user@jakarta.apache.org>; Tue, 14 Sep 2004 15:42:23 -0500
Message-ID: <414757AE.5020101@getopt.org>
Date: Tue, 14 Sep 2004 22:42:22 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040803
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: NGramSpeller contribution -- Re: combining open office spellchecker
 with Lucene
References: <000001c49572$72cacc00$0a00a8c0@aadlaptop> <41407E48.20401@tropo.com> <4140818C.9010305@getopt.org> <4147450C.7080206@tropo.com>
In-Reply-To: <4147450C.7080206@tropo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

David Spencer wrote:

>> ...or prepare in advance a fast lookup index - split all existing
>> terms to bi- or trigrams, create a separate lookup index, and then
>> simply for each term ask a phrase query (phrase = all n-grams from
>> an input term), with a slop > 0, to get similar existing terms.
>> This should be fast, and you could provide a "did you mean"
>> function too...
>> 
> 
> Based on this mail I wrote a "ngram speller" for Lucene. It runs in 2
> phases. First you build a "fast lookup index" as mentioned above.
> Then to correct a word you do a query in this index based on the
> ngrams in the misspelled word.
> 

The background for this suggestion was that I was playing some time ago 
with a Luke plugin that builds various sorts of ancillary indexes, but 
then I never finished it... Kudos for actually making it work ;-)

> [1] Source is attached and I'd like to contribute it to the sandbox,
> esp if someone can validate that what it's doing is reasonable and
> useful.

There have been many requests for this or similar functionality in the 
past, I believe it should go into sandbox.

I was wondering about the way you build the n-gram queries. You 
basically don't care about their position in the input term. Originally 
I thought about using PhraseQuery with a slop - however, after checking 
the source of PhraseQuery I realized that this probably wouldn't be that 
fast... You use BooleanQuery and start/end boosts instead, which may 
give similar results in the end but much cheaper.

I also wonder how this algorithm would behave for smaller values of 
start/end lengths (e.g. 2,3,4). In a sense, the smaller the n-gram 
length, the more "fuzziness" you introduce, which may or may not be 
desirable (increased recall at the cost of precision - for small indexes 
this may be useful from the user's perspective because you will always 
get a plausible hit, for huge indexes it's a loss).

> 
> [2] Here's a demo page. I built an ngram index for ngrams of length 3
>  and 4 based on the existing index I have of approx 100k 
> javadoc-generated pages. You type in a misspelled word like
> "recursixe" or whatnot to see what suggestions it returns. Note this
> is not a normal search index query -- rather this is a test page for
> spelling corrections.
> 
> http://www.searchmorph.com/kat/spell.jsp

Very nice demo! I bet it's running way faster than the linear search 
over terms :-), even though you have to build the index in advance. But 
if you work with static or mostly static indexes this doesn't matter.

> Based on a subsequent mail in this thread I set boosts for the words
> in the ngram index. The background is each word (er..term for a given
>  field) in the orig index is a separate Document in the ngram index.
> This Doc contains all ngrams (in my test case, like #2 above, of
> length 3 and 4) of the word. I also set a boost of
> log(word_freq)/log(num_docs) so that more frequently words will tend
> to be suggested more often.

You may want to experiment with 2 <= n <= 5. Some n-gram based 
techniques use all lengths together, some others use just single length, 
results also vary depending on the language...

> 
> I think in "plain" English then the way a word is suggested as a 
> spelling correction is: - frequently occuring words score higher -
> words that share more ngrams with the orig word score higher - words
> that share rare ngrams with the orig word score higher

I think this is a reasonable heuristics. Reading the code I would 
present it this way:

- words that share more ngrams with the orig word score higher, and
   words that share rare ngrams with the orig word score higher
   (as a natural consequence of using BooleanQuery),

- and, frequently occuring words score higher (as a consequence of using
   per-Document boosts),

- from reading the source code I see that you use Levenshtein distance
   to prune the resultset of too long/too short results,

I think also that because you don't use the positional information about 
  the input n-grams you may be getting some really weird hits. You could 
prune them by simply checking if you find a (threshold) of input ngrams 
in the right sequence in the found terms. This shouldn't be too costly 
because you operate on a small result set.

> 
> [6]
> 
> If people want to vote me in as a committer to the sandbox then I can

Well, someone needs to maintain the code after all... ;-)

-- 
Best regards,
Andrzej Bialecki

-------------------------------------------------
Software Architect, System Integration Specialist
CEN/ISSS EC Workshop, ECIMF project chair
EU FP6 E-Commerce Expert/Evaluator
-------------------------------------------------
FreeBSD developer (http://www.freebsd.org)


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10246-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 21:19:11 2004
Return-Path: <lucene-user-return-10246-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 1965 invoked from network); 14 Sep 2004 21:19:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 21:19:11 -0000
Received: (qmail 17876 invoked by uid 500); 14 Sep 2004 21:19:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 17854 invoked by uid 500); 14 Sep 2004 21:19:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 17840 invoked by uid 99); 14 Sep 2004 21:19:03 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 14:19:02 -0700
Received: (qmail 11062 invoked by uid 532); 14 Sep 2004 21:16:26 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.115468 secs); 14 Sep 2004 21:16:26 -0000
Received: from unknown (HELO ?10.0.0.157?) (127.0.0.1)
  by 0 with SMTP; 14 Sep 2004 21:16:26 -0000
Message-ID: <41476041.1050206@tropo.com>
Date: Tue, 14 Sep 2004 14:18:57 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.1) Gecko/20040707
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: NGramSpeller contribution -- Re: combining open office spellchecker
 with Lucene
References: <000001c49572$72cacc00$0a00a8c0@aadlaptop> <41407E48.20401@tropo.com> <4140818C.9010305@getopt.org> <4147450C.7080206@tropo.com> <414757AE.5020101@getopt.org>
In-Reply-To: <414757AE.5020101@getopt.org>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Andrzej Bialecki wrote:

> David Spencer wrote:
> 
>>> ...or prepare in advance a fast lookup index - split all existing
>>> terms to bi- or trigrams, create a separate lookup index, and then
>>> simply for each term ask a phrase query (phrase = all n-grams from
>>> an input term), with a slop > 0, to get similar existing terms.
>>> This should be fast, and you could provide a "did you mean"
>>> function too...
>>>
>>
>> Based on this mail I wrote a "ngram speller" for Lucene. It runs in 2
>> phases. First you build a "fast lookup index" as mentioned above.
>> Then to correct a word you do a query in this index based on the
>> ngrams in the misspelled word.
>>
> 
> The background for this suggestion was that I was playing some time ago 
> with a Luke plugin that builds various sorts of ancillary indexes, but 
> then I never finished it... Kudos for actually making it work ;-)

Sure, it was a fun little edge project. For the most part the code was 
done last week right after this thread appeared, but it always takes a 
while to get it from 95 to 100%.

> 
>> [1] Source is attached and I'd like to contribute it to the sandbox,
>> esp if someone can validate that what it's doing is reasonable and
>> useful.
> 
> 
> There have been many requests for this or similar functionality in the 
> past, I believe it should go into sandbox.
> 
> I was wondering about the way you build the n-gram queries. You 
> basically don't care about their position in the input term. Originally 
> I thought about using PhraseQuery with a slop - however, after checking 
> the source of PhraseQuery I realized that this probably wouldn't be that 
> fast... You use BooleanQuery and start/end boosts instead, which may 
> give similar results in the end but much cheaper.
> 
> I also wonder how this algorithm would behave for smaller values of 

Sure, I'll try to rebuild the demo w/ lengths 2-5 (and then the query 
page can test any conitguous combo).

> start/end lengths (e.g. 2,3,4). In a sense, the smaller the n-gram 
> length, the more "fuzziness" you introduce, which may or may not be 
> desirable (increased recall at the cost of precision - for small indexes 
> this may be useful from the user's perspective because you will always 
> get a plausible hit, for huge indexes it's a loss).
> 
>>
>> [2] Here's a demo page. I built an ngram index for ngrams of length 3
>>  and 4 based on the existing index I have of approx 100k 
>> javadoc-generated pages. You type in a misspelled word like
>> "recursixe" or whatnot to see what suggestions it returns. Note this
>> is not a normal search index query -- rather this is a test page for
>> spelling corrections.
>>
>> http://www.searchmorph.com/kat/spell.jsp
> 
> 
> Very nice demo! 

Thanks, kinda designed for ngram-nerds if you know what I mean :)

> I bet it's running way faster than the linear search 

Indeed, this is almost zero time, whereas the simple and dumb linear 
search was taking me 10sec. I will have to redo the sites main search 
page so it uses this new code, TBD, prob tomorrow.

> over terms :-), even though you have to build the index in advance. But 
> if you work with static or mostly static indexes this doesn't matter.
> 
>> Based on a subsequent mail in this thread I set boosts for the words
>> in the ngram index. The background is each word (er..term for a given
>>  field) in the orig index is a separate Document in the ngram index.
>> This Doc contains all ngrams (in my test case, like #2 above, of
>> length 3 and 4) of the word. I also set a boost of
>> log(word_freq)/log(num_docs) so that more frequently words will tend
>> to be suggested more often.
> 
> 
> You may want to experiment with 2 <= n <= 5. Some n-gram based 
Yep, will do prob tomorrow.

> techniques use all lengths together, some others use just single length, 
> results also vary depending on the language...
> 
>>
>> I think in "plain" English then the way a word is suggested as a 
>> spelling correction is: - frequently occuring words score higher -
>> words that share more ngrams with the orig word score higher - words
>> that share rare ngrams with the orig word score higher
> 
> 
> I think this is a reasonable heuristics. Reading the code I would 
> present it this way:

ok, thx, will update

> 
> - words that share more ngrams with the orig word score higher, and
>   words that share rare ngrams with the orig word score higher
>   (as a natural consequence of using BooleanQuery),
> 
> - and, frequently occuring words score higher (as a consequence of using
>   per-Document boosts),
> 
> - from reading the source code I see that you use Levenshtein distance
>   to prune the resultset of too long/too short results,
> 
> I think also that because you don't use the positional information about 
>  the input n-grams you may be getting some really weird hits.

Good point, though I haven't seen this yet. Might be due to the prefix 
boost and maybe some Markov chain magic tending to only show reasonable 
words.

> You could 
> prune them by simply checking if you find a (threshold) of input ngrams 
> in the right sequence in the found terms. This shouldn't be too costly 

Good point, I'll try to add that in as an optional parameter.

> because you operate on a small result set.
> 
>>
>> [6]
>>
>> If people want to vote me in as a committer to the sandbox then I can
> 
> 
> Well, someone needs to maintain the code after all... ;-)
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10247-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 21:22:55 2004
Return-Path: <lucene-user-return-10247-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 3690 invoked from network); 14 Sep 2004 21:22:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 21:22:55 -0000
Received: (qmail 25802 invoked by uid 500); 14 Sep 2004 21:22:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 25675 invoked by uid 500); 14 Sep 2004 21:22:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 25662 invoked by uid 99); 14 Sep 2004 21:22:49 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 14:22:48 -0700
Received: (qmail 75144 invoked by uid 89); 14 Sep 2004 21:22:46 -0000
Received: from unknown (HELO ?192.168.168.81?) (postmaster@cottrell-cutting.net@24.5.163.156)
  by londo.swishmail.com with AES256-SHA encrypted SMTP; 14 Sep 2004 21:22:46 -0000
Message-ID: <414760B4.8000301@apache.org>
Date: Tue, 14 Sep 2004 14:20:52 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.2) Gecko/20040806
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: NGramSpeller contribution -- Re: combining open office spellchecker
 with Lucene
References: <000001c49572$72cacc00$0a00a8c0@aadlaptop> <41407E48.20401@tropo.com> <4140818C.9010305@getopt.org> <4147450C.7080206@tropo.com> <414757AE.5020101@getopt.org>
In-Reply-To: <414757AE.5020101@getopt.org>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Andrzej Bialecki wrote:
> I was wondering about the way you build the n-gram queries. You 
> basically don't care about their position in the input term. Originally 
> I thought about using PhraseQuery with a slop - however, after checking 
> the source of PhraseQuery I realized that this probably wouldn't be that 
> fast... You use BooleanQuery and start/end boosts instead, which may 
> give similar results in the end but much cheaper.

Sloppy PhraseQuery's are slower than BooleanQueries, but not horribly 
slower.  The problem is that they don't handle the case where phrase 
elements are missing altogether, while a BooleanQuery does.  So what you 
really need is maybe a variation of a sloppy PhraseQuery that scores 
matches that do not contain all of the terms...

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10248-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 21:37:46 2004
Return-Path: <lucene-user-return-10248-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 11602 invoked from network); 14 Sep 2004 21:37:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 21:37:46 -0000
Received: (qmail 64870 invoked by uid 500); 14 Sep 2004 21:37:23 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 64739 invoked by uid 500); 14 Sep 2004 21:37:21 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 64636 invoked by uid 99); 14 Sep 2004 21:37:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 14:37:17 -0700
Received: (qmail 93152 invoked by uid 89); 14 Sep 2004 21:37:14 -0000
Received: from unknown (HELO ?192.168.168.81?) (postmaster@cottrell-cutting.net@24.5.163.156)
  by londo.swishmail.com with AES256-SHA encrypted SMTP; 14 Sep 2004 21:37:14 -0000
Message-ID: <41476418.5040600@apache.org>
Date: Tue, 14 Sep 2004 14:35:20 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.2) Gecko/20040806
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: frequent terms - Re: combining open office spellchecker with
 Lucene
References: <000001c49572$72cacc00$0a00a8c0@aadlaptop> <41408CCA.5030804@apache.org> <41424916.703@tropo.com> <41426B0A.1020006@apache.org> <414273C6.8000200@tropo.com>
In-Reply-To: <414273C6.8000200@tropo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

David Spencer wrote:
> [1] The user enters a query like:
>     recursize descent parser
> 
> [2] The search code parses this and sees that the 1st word is not a term 
> in the index, but the next 2 are. So it ignores the last 2 terms 
> ("recursive" and "descent") and suggests alternatives to 
> "recursize"...thus if any term is in the index, regardless of frequency, 
>  it is left as-is.
> 
> I guess you're saying that, if the user enters a term that appears in 
> the index and thus is sort of spelled correctly ( as it exists in some 
> doc), then we use the heuristic that any sufficiently large doc 
> collection will have tons of misspellings, so we assume that rare terms 
> in the query might be misspelled (i.e. not what the user intended) and 
> we suggest alternativies to these words too (in addition to the words in 
> the query that are not in the index at all).

Almost.

If the user enters "a recursize purser", then: "a", which is in, say, 
 >50% of the documents, is probably spelled correctly and "recursize", 
which is in zero documents, is probably mispelled.  But what about 
"purser"?  If we run the spell check algorithm on "purser" and generate 
"parser", should we show it to the user?  If "purser" occurs in 1% of 
documents and "parser" occurs in 5%, then we probably should, since 
"parser" is a more common word than "purser".  But if "parser" only 
occurs in 1% of the documents and purser occurs in 5%, then we probably 
shouldn't bother suggesting "parser".

If you wanted to get really fancy then you could check how frequently 
combinations of query terms occur, i.e., does "purser" or "parser" occur 
more frequently near "descent".  But that gets expensive.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10249-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 21:38:07 2004
Return-Path: <lucene-user-return-10249-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 11882 invoked from network); 14 Sep 2004 21:38:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 21:38:06 -0000
Received: (qmail 67589 invoked by uid 500); 14 Sep 2004 21:37:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 67465 invoked by uid 500); 14 Sep 2004 21:37:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 67345 invoked by uid 99); 14 Sep 2004 21:37:49 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [209.10.150.71] (HELO web01-nyc.clicvu.com) (209.10.150.71)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 14:37:48 -0700
Received: from [192.168.0.71] by web01-nyc.clicvu.com
          (Post.Office MTA v3.5.3 release 223 ID# 0-64039U1000L100S0V35)
          with SMTP id com for <lucene-user@jakarta.apache.org>;
          Tue, 14 Sep 2004 17:35:26 -0400
Received: from giant-pandas.net (localhost [127.0.0.1])
	by host21.the-web-host.com (8.12.10/8.12.9) with ESMTP id i8ELbhZW032444
	for <*Email Address Suppressed*>; Tue, 14 Sep 2004 17:37:43 -0400
From: roy-lucene-user@xemaps.com
To: lucene-user@jakarta.apache.org                                                                                                                                                                                                                                 
Subject: Hits.doc(x) and range queries
Date: Tue, 14 Sep 2004 16:37:43 -0500
Message-Id: <20040914213743.M46352@giant-pandas.net>
In-Reply-To: <414760B4.8000301@apache.org>
References: <000001c49572$72cacc00$0a00a8c0@aadlaptop> <41407E48.20401@tropo.com> <4140818C.9010305@getopt.org> <4147450C.7080206@tropo.com> <414757AE.5020101@getopt.org> <414760B4.8000301@apache.org>
X-Mailer: Open WebMail 1.81 20021127
X-OriginatingIP: 209.21.98.168 (roy)
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi guys!

I've posted previously that Hits.doc(x) was taking a long time.  Turns out it
has to do with a date range in our query.  We usually do date ranges like this:
Date:[(lucene date field) - (lucene date field)]

Sometimes the begin date is "000000000" which is what we get from
DateField.dateToString( ( new Date( 0 ) ).

This is when getting our search results from the Hits object takes an absurd
amount of time.  Its usually each time the Hits object attempts to get more
results from an IndexSearcher ( aka, every 100? ).

It also takes up more memory...

I was wondering why it affects the search so much even though we're only
returning 350 or so results.  Does the QueryParser do something similar to the
DateFilter on range queries?  Would it be better to use a DateFilter?

We're using Lucene 1.2 (with plans to upgrade).  Do newer versions of Lucene
have this problem?

Roy.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10250-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 21:51:04 2004
Return-Path: <lucene-user-return-10250-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 18919 invoked from network); 14 Sep 2004 21:51:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 21:51:04 -0000
Received: (qmail 87944 invoked by uid 500); 14 Sep 2004 21:50:58 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 87795 invoked by uid 500); 14 Sep 2004 21:50:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 87775 invoked by uid 99); 14 Sep 2004 21:50:56 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 14:50:56 -0700
Received: (qmail 10415 invoked by uid 89); 14 Sep 2004 21:50:54 -0000
Received: from unknown (HELO ?192.168.168.81?) (postmaster@cottrell-cutting.net@24.5.163.156)
  by londo.swishmail.com with AES256-SHA encrypted SMTP; 14 Sep 2004 21:50:54 -0000
Message-ID: <4147674C.5010305@apache.org>
Date: Tue, 14 Sep 2004 14:49:00 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.2) Gecko/20040806
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Similarity score computation documentation
References: <2b2518a404091317206b22d96@mail.gmail.com>
In-Reply-To: <2b2518a404091317206b22d96@mail.gmail.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Your analysis sounds correct.

At base, a weight is a normalized tf*idf.  So a document weight is:

   docTf * idf * docNorm

and a query weight is:

   queryTf * idf * queryNorm

where queryTf is always one.

So the product of these is (docTf * idf * docNorm) * (idf * queryNorm), 
which indeed contains idf twice.  I think the best documentation fix 
would be to add another idf(t) clause at the end of the formula, next to 
queryNorm(q), so this is clear.  Does that sound right to you?

Doug

Ken McCracken wrote:
> Hi,
> 
> I was looking through the score computation when running search, and
> think there may be a discrepancy between what is _documented_ in the
> org.apache.lucene.search.Similarity class overview Javadocs, and what
> actually occurs in the code.
> 
> I believe the problem is only with the documentation.
> 
> I'm pretty sure that there should be an idf^2 in the sum.  Look at
> org.apache.lucene.search.TermQuery, the inner class TermWeight.  You
> can see that first sumOfSquaredWeights() is called, followed by
> normalize(), during search.  Further, the resulting value stored in
> the field "value" is set as the "weightValue" on the TermScorer.
> 
> If we look at what happens to TermWeight, sumOfSquaredWeights() sets
> "queryWeight" to idf * boost.  During normalize(), "queryWeight" is
> multiplied by the query norm, and "value" is set to queryWeight * idf
> == idf * boost * query norm * idf == idf^2 * boost * query norm.  This
> becomes the "weightValue" in the TermScorer that is then used to
> multiply with the appropriate tf, etc., values.
> 
> The remaining terms in the Similarity description are properly
> appended.  I also see that the queryNorm effectively "cancels out"
> (dimensionally, since it is a 1/ square root of a sum of squares of
> idfs) one of the idfs, so the formula still ends up being roughly a
> TF-IDF formula.  But the idf^2 should still be there, along with the
> expansion of queryNorm.
> 
> Am I mistaken, or is the documentation off?
> 
> Thanks for your help,
> -Ken
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10251-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 14 22:01:03 2004
Return-Path: <lucene-user-return-10251-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21953 invoked from network); 14 Sep 2004 22:01:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Sep 2004 22:01:03 -0000
Received: (qmail 4288 invoked by uid 500); 14 Sep 2004 22:00:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 4035 invoked by uid 500); 14 Sep 2004 22:00:47 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 3866 invoked by uid 99); 14 Sep 2004 22:00:45 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 15:00:45 -0700
Received: (qmail 12487 invoked by uid 532); 14 Sep 2004 21:58:10 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.023543 secs); 14 Sep 2004 21:58:10 -0000
Received: from unknown (HELO ?10.0.0.157?) (127.0.0.1)
  by 0 with SMTP; 14 Sep 2004 21:58:10 -0000
Message-ID: <41476A09.80303@tropo.com>
Date: Tue, 14 Sep 2004 15:00:41 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.1) Gecko/20040707
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: frequent terms - Re: combining open office spellchecker with
 Lucene
References: <000001c49572$72cacc00$0a00a8c0@aadlaptop> <41408CCA.5030804@apache.org> <41424916.703@tropo.com> <41426B0A.1020006@apache.org> <414273C6.8000200@tropo.com> <41476418.5040600@apache.org>
In-Reply-To: <41476418.5040600@apache.org>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Doug Cutting wrote:

> David Spencer wrote:
> 
>> [1] The user enters a query like:
>>     recursize descent parser
>>
>> [2] The search code parses this and sees that the 1st word is not a 
>> term in the index, but the next 2 are. So it ignores the last 2 terms 
>> ("recursive" and "descent") and suggests alternatives to 
>> "recursize"...thus if any term is in the index, regardless of 
>> frequency,  it is left as-is.
>>
>> I guess you're saying that, if the user enters a term that appears in 
>> the index and thus is sort of spelled correctly ( as it exists in some 
>> doc), then we use the heuristic that any sufficiently large doc 
>> collection will have tons of misspellings, so we assume that rare 
>> terms in the query might be misspelled (i.e. not what the user 
>> intended) and we suggest alternativies to these words too (in addition 
>> to the words in the query that are not in the index at all).
> 
> 
> Almost.
> 
> If the user enters "a recursize purser", then: "a", which is in, say, 
>  >50% of the documents, is probably spelled correctly and "recursize", 
> which is in zero documents, is probably mispelled.  But what about 
> "purser"?  If we run the spell check algorithm on "purser" and generate 
> "parser", should we show it to the user?  If "purser" occurs in 1% of 
> documents and "parser" occurs in 5%, then we probably should, since 
> "parser" is a more common word than "purser".  But if "parser" only 
> occurs in 1% of the documents and purser occurs in 5%, then we probably 
> shouldn't bother suggesting "parser".

OK, sure, got it.
I'll give it a think and try to add this option to my just submitted 
spelling code.


> 
> If you wanted to get really fancy then you could check how frequently 
> combinations of query terms occur, i.e., does "purser" or "parser" occur 
> more frequently near "descent".  But that gets expensive.

Yeah, expensive for a large scale search engine, but probably 
appropriate for a desktop engine.

> 
> Doug
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10252-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 15 01:30:58 2004
Return-Path: <lucene-user-return-10252-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 8741 invoked from network); 15 Sep 2004 01:30:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Sep 2004 01:30:58 -0000
Received: (qmail 57085 invoked by uid 500); 15 Sep 2004 01:30:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 57045 invoked by uid 500); 15 Sep 2004 01:30:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 57032 invoked by uid 99); 15 Sep 2004 01:30:48 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [202.83.206.234] (HELO mail1.yesasia.com) (202.83.206.234)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 14 Sep 2004 18:30:44 -0700
Received: from teay (192.168.120.127:1316)
	by yesasia.com.hk with [XMail 1.20 ESMTP Server]
	id <S9DCC3> for <lucene-user@jakarta.apache.org> from <teayu2002@netvigator.com>;
	Wed, 15 Sep 2004 09:30:36 +0800
Message-ID: <002501c49ac3$99be43e0$7f78a8c0@yawin.yesasia.com>
From: "Tea Yu" <teayu2002@netvigator.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <20040914175712.88630.qmail@web60809.mail.yahoo.com> <4147362C.7000405@tropo.com> <110401c49a8a$e8eeb960$34c2e550@joseph>
Subject: Re: PorterStemfilter
Date: Wed, 15 Sep 2004 09:30:33 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

David,

For me I don't want a search for "in print" gives results from "in printer"?
I'll consider that over-stemmed elsecase.

I'm also not that satisfactory when "effective" is stemmed to "effect" by
snowball recently

Cheers
Tea


> Hi David
>
> I like KStem more than Porter / Snowball - but still has limitations
> although performs better as it has a dictionary to augment the rules.
>
> Note that KStem will also treat "print" and "printer" as two distinct
terms,
> probably treating it as verb and noun respectively.
>
> Cheers
>
> Pete Lewis
>
> ----- Original Message ----- 
> From: "David Spencer" <dave-lucene-user@tropo.com>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Tuesday, September 14, 2004 7:19 PM
> Subject: Re: PorterStemfilter
>
>
> > Honey George wrote:
> >
> > > Hi,
> > >  This might be more of a questing related to the
> > > PorterStemmer algorithm rather than with lucene, but
> > > if anyone has the knowledge please share.
> >
> > You might want to also try the Snowball stemmer:
> >
> > http://jakarta.apache.org/lucene/docs/lucene-sandbox/snowball/
> >
> > And KStem:
> >
> > http://ciir.cs.umass.edu/downloads/
> > >
> > > I am using the PorterStemFilter that some with lucene
> > > and it turns out that searching for the word 'printer'
> > > does not return a document containing the text
> > > 'print'. To narrow down the problem, I have tested the
> > > PorterStemFilter in a standalone programs and it turns
> > > out that the stem of printer is 'printer' and not
> > > 'print'. That is 'printer' is not equal to 'print' +
> > > 'er', the whole of the word is stem. Can somebody
> > > explain the behavior.
> > >
> > > Thanks & Regards,
> > >    George
> > >
> > >
> > >
> > >
> > >
> > > ___________________________________________________________ALL-NEW
> Yahoo! Messenger - all new features - even more fun!
> http://uk.messenger.yahoo.com
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> > >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10253-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 15 05:27:51 2004
Return-Path: <lucene-user-return-10253-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 95338 invoked from network); 15 Sep 2004 05:27:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Sep 2004 05:27:51 -0000
Received: (qmail 95521 invoked by uid 500); 15 Sep 2004 05:27:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 95487 invoked by uid 500); 15 Sep 2004 05:27:40 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 95471 invoked by uid 99); 15 Sep 2004 05:27:40 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.155.196.73] (HELO web60810.mail.yahoo.com) (216.155.196.73)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 14 Sep 2004 22:27:39 -0700
Message-ID: <20040915052737.71930.qmail@web60810.mail.yahoo.com>
Received: from [61.16.175.2] by web60810.mail.yahoo.com via HTTP; Wed, 15 Sep 2004 06:27:37 BST
Date: Wed, 15 Sep 2004 06:27:37 +0100 (BST)
From: =?iso-8859-1?q?Honey=20George?= <honey_george@yahoo.com>
Subject: Re: PorterStemfilter
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <002501c49ac3$99be43e0$7f78a8c0@yawin.yesasia.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

 --- Tea Yu <teayu2002@netvigator.com> wrote: 
> David,
> 
> For me I don't want a search for "in print" gives
> results from "in printer"?
> I'll consider that over-stemmed elsecase.
Here the "in" won't be considered as it is a stopword
in most of the analyzers. I know it is in
StandardAnalyzer. So searching for 'in print' will not
return the document containing 'in printer' because
stem('printer') is 'printer' and not 'print'. So
'printer' is what getting stored in the index.
Enclosing in double quotes does not prevent stemming.

> I'm also not that satisfactory when "effective" is
> stemmed to "effect" by
> snowball recently


I have tested this with PorterStemFilter and there is
also "effective" is stemmed as "effect". There are
more serious problems. "printable" is stemmed as
"printabl".

Thanks,
  George


	
	
		
___________________________________________________________ALL-NEW Yahoo! Messenger - all new features - even more fun!  http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10254-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 15 07:04:23 2004
Return-Path: <lucene-user-return-10254-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 36194 invoked from network); 15 Sep 2004 07:04:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Sep 2004 07:04:23 -0000
Received: (qmail 88083 invoked by uid 500); 15 Sep 2004 07:04:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 88042 invoked by uid 500); 15 Sep 2004 07:04:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 88009 invoked by uid 99); 15 Sep 2004 07:04:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [81.80.239.198] (HELO outbound1.sopragroup.com) (81.80.239.198)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 15 Sep 2004 00:04:09 -0700
Received: by outbound1.sopragroup.com (8.12.10/8.12.10/outbound-A02) with ESMTP id i8F745Kt025733
          for <lucene-user@jakarta.apache.org>; Wed, 15 Sep 2004 09:04:05 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6556.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Help for text based indexing
Date: Wed, 15 Sep 2004 09:04:04 +0200
Message-ID: <5933531F07A5144E9E53E1AA45257E4BF65184@wexchbe03.ancy.fr.sopra>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Help for text based indexing
Thread-Index: AcSadzVVjYXOioqjReWzm8RL6kLqVQAeqBuA
From: "Cocula Remi" <rcocula@sopragroup.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-OriginalArrivalTime: 15 Sep 2004 07:12:58.0312 (UTC) FILETIME=[6DCD5480:01C49AF3]
X-Scanned-By: MIMEDefang 2.38
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

No.

group:Group1 AND Hello

the group: prefix means that the word Group1 has to be searched in the =
group field.


-----Message d'origine-----
De : mahaveer jain [mailto:jainmahaveer23@yahoo.com]
Envoy=E9 : mardi 14 septembre 2004 18:24
=C0 : Lucene Users List
Objet : RE: Help for text based indexing


If i have rightly understood, you mean to say that the query for search =
has  to be=20
=20
"Group1" AND "Hello" (if hello is what I want to search ?)
=20
Cocula Remi <rcocula@sopragroup.com> wrote:
A keyword is not tokenized, that's why you wont be able to search over a =
part of it. You'd rather use a Text fied.

About creating a special field :=20
....
IndexWriter Ir =3D ....
....
File f =3D ....
Document doc =3D new Document();
if (f.toString.startsWith("C:\tomcat\webapps\Root\Group1")
{
doc.add(Field.Text("group", "Group1"));
}
if (f.toString.startsWith("C:\tomcat\webapps\Root\Group2")
{
doc.add(Field.Text("group", "Group2"));
}
doc.add(Field.Text("content", getContent(f)));
Ir.addDocument(doc);

....

Then you can search in group1 with query like that :=20

group:Group1 AND rest_of_the_query.



-----Message d'origine-----
De : mahaveer jain [mailto:jainmahaveer23@yahoo.com]
Envoy=E9 : mardi 14 septembre 2004 18:03
=C0 : Lucene Users List
Objet : RE: Help for text based indexing


Well in my case the path is KeyWord. I had tried that earlier and it =
does not seems to work in a single index file.=20

Can you explain a bit more about adding group1 and group2 ?

Cocula Remi wrote:
Well you could add a field to each of your Documents whose value would =
be either "group1" or "group2".
Or you could use the path to your files ...



-----Message d'origine-----
De : mahaveer jain [mailto:jainmahaveer23@yahoo.com]
Envoy=E9 : mardi 14 septembre 2004 17:49
=C0 : lucene-user@jakarta.apache.org
Objet : RE: Help for text based indexing


I am clear with looping recursively to index all the file under Root =
folder.
But the problem is if I want to search only in group1 or group2.Is that =
possible to search only in one of the group folder ?

Cocula Remi wrote:
You just have to loop recurssively over the C:\tomcat\webapps\Root tree =
to create your index.
Yes you can index databases; you will just have to write a mechanism =
that is able to create org.apache.lucene.document.Document from =
database.
For instance :=20
- connect JDBC
- run a query for obtaining a ResultSet
- loop for each row of that ResultSet :
Create a new org.apache.lucene.document.Document from ResultSet data
and add this document to the Index.
end loop.

For incremental indexing, I suppose you have to store some timestamp =
field in your index; but it's up to you.
Note that Lucene is very fast and I don't think that incremetal indexing =
is required for small or medium amout of data.



-----Message d'origine-----
De : mahaveer jain [mailto:jainmahaveer23@yahoo.com]
Envoy=E9 : mardi 14 septembre 2004 17:22
=C0 : lucene-user@jakarta.apache.org
Objet : Help for text based indexing



Hi

I have implemented Text based search using lucene. I was wonderful =
playing around with it.

Now I want to enchance the application.

I have a Root folder, under that I have many other folder, that are =
group specific, say (group1, group2, .. so on). The Root folder is in =
C:\tomcat\webapps\Root and group folder within that.

Now I am index for these groups separately, ie , I have index as =
C:/index/group1, C:/index/group2, C:/index/group3 and so on

I want to know if I can have only one index for all these say =
C:/index/Root (this has index for all the folder) and I should be able =
to Search using C:\tomcat\webapps\Root\group1(if want to search for =
group1) similarly for the other groups.

Let me know if this is possible and have anybody tried this.

2nd question

Is lucene good to index databases ? How do we support incremental =
indexing ?

(Right now I am using LIKE for searching )

Thanks in Advance

Mahaveer



---------------------------------
Do you Yahoo!?
vote.yahoo.com - Register online to vote today!

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org



---------------------------------
Do you Yahoo!?
vote.yahoo.com - Register online to vote today!

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org



---------------------------------
Do you Yahoo!?
vote.yahoo.com - Register online to vote today!

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


	=09
---------------------------------
Do you Yahoo!?
Yahoo! Mail - 50x more storage than other providers!

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10255-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 15 09:20:09 2004
Return-Path: <lucene-user-return-10255-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 18903 invoked from network); 15 Sep 2004 09:20:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Sep 2004 09:20:09 -0000
Received: (qmail 48629 invoked by uid 500); 15 Sep 2004 09:18:31 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 48521 invoked by uid 500); 15 Sep 2004 09:18:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 48376 invoked by uid 99); 15 Sep 2004 09:18:24 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [62.221.254.25] (HELO pluto.dutchdsl.nl) (62.221.254.25)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 15 Sep 2004 02:18:22 -0700
Received: from aadlaptop (dsl-82-199-135-164.dutchdsl.nl [82.199.135.164])
	by pluto.dutchdsl.nl (Postfix) with ESMTP id 4719440006B
	for <lucene-user@jakarta.apache.org>; Wed, 15 Sep 2004 11:18:18 +0200 (CEST)
From: "Aad Nales" <aad.nales@rotterdam-cs.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: NGramSpeller contribution -- Re: combining open office spellchecker with Lucene
Date: Wed, 15 Sep 2004 11:18:17 +0200
Message-ID: <000001c49b04$efe6c7b0$0a00a8c0@aadlaptop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2616
Importance: Normal
In-Reply-To: <4147450C.7080206@tropo.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

David,

Perhaps I misunderstand somehting so please correct me if I do. I used
http://www.searchmorph.com/kat/spell.jsp to look for conts without
changing any of the default values. What I got as results did not
include 'const' which has quite a high frequency in your index and
should have a pretty low levenshtein distance. Any idea what causes this
behavior?

cheers,
Aad

-----Original Message-----
From: David Spencer [mailto:dave-lucene-user@tropo.com] 
Sent: Tuesday, 14 September, 2004 21:23
To: Lucene Users List
Subject: NGramSpeller contribution -- Re: combining open office
spellchecker with Lucene


Andrzej Bialecki wrote:

> David Spencer wrote:
> 
>>
>> I can/should send the code out. The logic is that for any terms in a
>> query that have zero matches, go thru all the terms(!) and calculate 
>> the Levenshtein string distance, and return the best matches. A more 
>> intelligent way of doing this is to instead look for terms that also 
>> match on the 1st "n" (prob 3) chars.
> 
> 
> ...or prepare in advance a fast lookup index - split all existing 
> terms
> to bi- or trigrams, create a separate lookup index, and then simply
for 
> each term ask a phrase query (phrase = all n-grams from an input
term), 
> with a slop > 0, to get similar existing terms. This should be fast,
and 
> you could provide a "did you mean" function too...
> 

Based on this mail I wrote a "ngram speller" for Lucene. It runs in 2 
phases. First you build a "fast lookup index" as mentioned above. Then 
to correct a word you do a query in this index based on the ngrams in 
the misspelled word.

Let's see.

[1] Source is attached and I'd like to contribute it to the sandbox, esp

if someone can validate that what it's doing is reasonable and useful.

[2] Here's a demo page. I built an ngram index for ngrams of length 3 
and 4 based on the existing index I have of approx 100k 
javadoc-generated pages. You type in a misspelled word like "recursixe" 
or whatnot to see what suggestions it returns. Note this is not a normal

search index query -- rather this is a test page for spelling
corrections.

http://www.searchmorph.com/kat/spell.jsp

[3] Here's the javadoc:

http://www.searchmorph.com/pub/ngramspeller/org/apache/lucene/spell/NGra
mSpeller.html

[4] Here's source in HTML:

http://www.searchmorph.com/pub/ngramspeller/src-html/org/apache/lucene/s
pell/NGramSpeller.html#line.152

[5] A few more details:

Based on a subsequent mail in this thread I set boosts for the words in 
the ngram index. The background is each word (er..term for a given 
field) in the orig index is a separate Document in the ngram index. This

Doc contains all ngrams (in my test case, like #2 above, of length 3 and

4) of the word. I also set a boost of log(word_freq)/log(num_docs) so 
that more frequently words will tend to be suggested more often.

I think in "plain" English then the way a word is suggested as a 
spelling correction is:
- frequently occuring words score higher
- words that share more ngrams with the orig word score higher
- words that share rare ngrams with the orig word score higher

[6]

If people want to vote me in as a committer to the sandbox then I can 
check this code in - though again, I'd appreciate feedback.

thx,
  Dave






---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10256-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 15 09:53:50 2004
Return-Path: <lucene-user-return-10256-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 35853 invoked from network); 15 Sep 2004 09:53:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Sep 2004 09:53:49 -0000
Received: (qmail 94010 invoked by uid 500); 15 Sep 2004 09:53:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 93896 invoked by uid 500); 15 Sep 2004 09:53:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 93875 invoked by uid 99); 15 Sep 2004 09:53:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [195.140.143.70] (HELO niaoupouk.cowmeuh.net) (195.140.143.70)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 15 Sep 2004 02:53:36 -0700
Received: from [10.5.220.62] (unknown [64.236.216.82])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by niaoupouk.cowmeuh.net (Postfix) with ESMTP id 0733B52478
	for <lucene-user@jakarta.apache.org>; Wed, 15 Sep 2004 11:51:14 +0200 (CEST)
Message-ID: <41481177.3030102@cowmeuh.net>
Date: Wed, 15 Sep 2004 11:55:03 +0200
From: Daniel CHAN <daniel@cowmeuh.net>
Organization: cowmeuh.net
User-Agent: Mozilla/5.0 (X11; U; Linux i686; fr-FR; rv:1.7.2) Gecko/20040803
X-Accept-Language: fr-fr, fr, en-us, en
MIME-Version: 1.0
To: lucene-user@jakarta.apache.org
Subject: Concurent operations with Lucene
X-Enigmail-Version: 0.85.0.0
X-Enigmail-Supports: pgp-inline, pgp-mime
Content-Type: multipart/signed; micalg=pgp-sha1;
 protocol="application/pgp-signature";
 boundary="------------enigF45837FD4864E5202991758F"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--------------enigF45837FD4864E5202991758F
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Hi,

I'm currently developping a search engine for a few websites and would
like to use Lucene to do so. After reading some docs, a post on jGuru
states that some concurrent operations are forbidden with Lucene
(http://www.jguru.com/faq/view.jsp?EID=913302). However, the post
dated from 2 years ago.

What I would like to know: is Lucene able to handle query concurrently
with delete operation ? (You can check the table on the jGuru page and
the posts at the bottom).

Cheers

-- 
Daniel CHAN <daniel@cowmeuh.net>
Free Software supporter
GnuPG : FFEC 70DD 9B2D D10A E161 79B5 3EDB CB9B A3C3 F6F3


--------------enigF45837FD4864E5202991758F
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.4 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFBSBF7PtvLm6PD9vMRAqEVAJ0WmqMNItnJsVbsatdT2cBD1exAhACgmCXB
IH2AbGhXl/0yMXGD2hlxAm4=
=rIWj
-----END PGP SIGNATURE-----

--------------enigF45837FD4864E5202991758F--

From lucene-user-return-10257-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 15 10:22:57 2004
Return-Path: <lucene-user-return-10257-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 50880 invoked from network); 15 Sep 2004 10:22:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Sep 2004 10:22:57 -0000
Received: (qmail 52104 invoked by uid 500); 15 Sep 2004 10:22:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 52078 invoked by uid 500); 15 Sep 2004 10:22:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 52064 invoked by uid 99); 15 Sep 2004 10:22:47 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 15 Sep 2004 03:22:46 -0700
Received: from [192.168.0.254] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id i8FAMiX07685
	for <lucene-user@jakarta.apache.org>; Wed, 15 Sep 2004 05:22:45 -0500
Message-ID: <414817F5.4090006@getopt.org>
Date: Wed, 15 Sep 2004 12:22:45 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040803
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: NGramSpeller contribution -- Re: combining open office spellchecker
 with Lucene
References: <000001c49b04$efe6c7b0$0a00a8c0@aadlaptop>
In-Reply-To: <000001c49b04$efe6c7b0$0a00a8c0@aadlaptop>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Aad Nales wrote:

> David,
> 
> Perhaps I misunderstand somehting so please correct me if I do. I used
> http://www.searchmorph.com/kat/spell.jsp to look for conts without
> changing any of the default values. What I got as results did not
> include 'const' which has quite a high frequency in your index and

??? how do you know that? Remember, this is an index of _Java_docs, and 
"const" is not a Java keyword.

> should have a pretty low levenshtein distance. Any idea what causes this
> behavior?



-- 
Best regards,
Andrzej Bialecki

-------------------------------------------------
Software Architect, System Integration Specialist
CEN/ISSS EC Workshop, ECIMF project chair
EU FP6 E-Commerce Expert/Evaluator
-------------------------------------------------
FreeBSD developer (http://www.freebsd.org)


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10258-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 15 10:42:38 2004
Return-Path: <lucene-user-return-10258-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 60473 invoked from network); 15 Sep 2004 10:42:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Sep 2004 10:42:38 -0000
Received: (qmail 74944 invoked by uid 500); 15 Sep 2004 10:41:58 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 74836 invoked by uid 500); 15 Sep 2004 10:41:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 74771 invoked by uid 99); 15 Sep 2004 10:41:55 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [62.221.254.25] (HELO pluto.dutchdsl.nl) (62.221.254.25)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 15 Sep 2004 03:41:53 -0700
Received: from aadlaptop (dsl-82-199-135-164.dutchdsl.nl [82.199.135.164])
	by pluto.dutchdsl.nl (Postfix) with ESMTP id F3C16400071
	for <lucene-user@jakarta.apache.org>; Wed, 15 Sep 2004 12:41:50 +0200 (CEST)
From: "Aad Nales" <aad.nales@rotterdam-cs.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: NGramSpeller contribution -- Re: combining open office spellchecker with Lucene
Date: Wed, 15 Sep 2004 12:41:45 +0200
Message-ID: <000201c49b10$9bcf4290$0a00a8c0@aadlaptop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2616
In-Reply-To: <414817F5.4090006@getopt.org>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

By trying: if you type const you will find that it returns 216 hits. The
third sports 'const' as a term (space seperated and all). I would expect
'conts' to return with const as well. But again I might be mistaken. I
am now trying to figure what the problem might be: 

1. my expectations (most likely ;-)
2. something in the code..

-----Original Message-----
From: Andrzej Bialecki [mailto:ab@getopt.org] 
Sent: Wednesday, 15 September, 2004 12:23
To: Lucene Users List
Subject: Re: NGramSpeller contribution -- Re: combining open office
spellchecker with Lucene


Aad Nales wrote:

> David,
> 
> Perhaps I misunderstand somehting so please correct me if I do. I used

> http://www.searchmorph.com/kat/spell.jsp to look for conts without 
> changing any of the default values. What I got as results did not 
> include 'const' which has quite a high frequency in your index and

??? how do you know that? Remember, this is an index of _Java_docs, and 
"const" is not a Java keyword.

> should have a pretty low levenshtein distance. Any idea what causes 
> this behavior?



-- 
Best regards,
Andrzej Bialecki

-------------------------------------------------
Software Architect, System Integration Specialist
CEN/ISSS EC Workshop, ECIMF project chair
EU FP6 E-Commerce Expert/Evaluator
-------------------------------------------------
FreeBSD developer (http://www.freebsd.org)


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10259-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 15 11:29:47 2004
Return-Path: <lucene-user-return-10259-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 87018 invoked from network); 15 Sep 2004 11:29:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Sep 2004 11:29:46 -0000
Received: (qmail 29557 invoked by uid 500); 15 Sep 2004 11:29:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 29528 invoked by uid 500); 15 Sep 2004 11:29:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 29515 invoked by uid 99); 15 Sep 2004 11:29:29 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.245] (HELO web12708.mail.yahoo.com) (216.136.173.245)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 15 Sep 2004 04:29:26 -0700
Message-ID: <20040915112925.94263.qmail@web12708.mail.yahoo.com>
Received: from [195.29.96.16] by web12708.mail.yahoo.com via HTTP; Wed, 15 Sep 2004 04:29:25 PDT
Date: Wed, 15 Sep 2004 04:29:25 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Concurent operations with Lucene
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <41481177.3030102@cowmeuh.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello

Only 1 process can modify (add/delete) an index at a time.
Have you seen Nutch (http://nutch.org/)?

Otis

--- Daniel CHAN <daniel@cowmeuh.net> wrote:

> Hi,
> 
> I'm currently developping a search engine for a few websites and
> would
> like to use Lucene to do so. After reading some docs, a post on jGuru
> states that some concurrent operations are forbidden with Lucene
> (http://www.jguru.com/faq/view.jsp?EID=913302). However, the post
> dated from 2 years ago.
> 
> What I would like to know: is Lucene able to handle query
> concurrently
> with delete operation ? (You can check the table on the jGuru page
> and
> the posts at the bottom).
> 
> Cheers
> 
> -- 
> Daniel CHAN <daniel@cowmeuh.net>
> Free Software supporter
> GnuPG : FFEC 70DD 9B2D D10A E161 79B5 3EDB CB9B A3C3 F6F3
> 
> 

> ATTACHMENT part 2 application/pgp-signature name=signature.asc



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10260-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 15 14:19:59 2004
Return-Path: <lucene-user-return-10260-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 97623 invoked from network); 15 Sep 2004 14:19:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Sep 2004 14:19:59 -0000
Received: (qmail 95697 invoked by uid 500); 15 Sep 2004 14:19:45 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 95575 invoked by uid 500); 15 Sep 2004 14:19:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 95412 invoked by uid 99); 15 Sep 2004 14:19:43 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [68.230.240.27] (HELO lakermmtao12.cox.net) (68.230.240.27)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 15 Sep 2004 07:19:41 -0700
Received: from POWERPACK ([68.100.190.210]) by lakermmtao12.cox.net
          (InterMail vM.6.01.03.02.01 201-2131-111-104-103-20040709)
          with SMTP
          id <20040915141938.HPSV16542.lakermmtao12.cox.net@POWERPACK>
          for <lucene-user@jakarta.apache.org>;
          Wed, 15 Sep 2004 10:19:38 -0400
Message-ID: <022401c49b2f$09251590$1402a8c0@POWERPACK>
From: "Terry Steichen" <terry@net-frame.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <20040915112925.94263.qmail@web12708.mail.yahoo.com>
Subject: Re: Concurent operations with Lucene
Date: Wed, 15 Sep 2004 10:19:38 -0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0221_01C49B0D.81CA3790"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0221_01C49B0D.81CA3790
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Otis,

What's the relationship between Nutch and Lucene?

Terry
  ----- Original Message -----=20
  From: Otis Gospodnetic=20
  To: Lucene Users List=20
  Sent: Wednesday, September 15, 2004 7:29 AM
  Subject: Re: Concurent operations with Lucene


  Hello

  Only 1 process can modify (add/delete) an index at a time.
  Have you seen Nutch (http://nutch.org/)?

  Otis

  --- Daniel CHAN <daniel@cowmeuh.net> wrote:

  > Hi,
  >=20
  > I'm currently developping a search engine for a few websites and
  > would
  > like to use Lucene to do so. After reading some docs, a post on =
jGuru
  > states that some concurrent operations are forbidden with Lucene
  > (http://www.jguru.com/faq/view.jsp?EID=3D913302). However, the post
  > dated from 2 years ago.
  >=20
  > What I would like to know: is Lucene able to handle query
  > concurrently
  > with delete operation ? (You can check the table on the jGuru page
  > and
  > the posts at the bottom).
  >=20
  > Cheers
  >=20
  > --=20
  > Daniel CHAN <daniel@cowmeuh.net>
  > Free Software supporter
  > GnuPG : FFEC 70DD 9B2D D10A E161 79B5 3EDB CB9B A3C3 F6F3
  >=20
  >=20

  > ATTACHMENT part 2 application/pgp-signature name=3Dsignature.asc



  ---------------------------------------------------------------------
  To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  For additional commands, e-mail: lucene-user-help@jakarta.apache.org


------=_NextPart_000_0221_01C49B0D.81CA3790--


From lucene-user-return-10261-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 15 16:17:45 2004
Return-Path: <lucene-user-return-10261-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 61067 invoked from network); 15 Sep 2004 16:17:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Sep 2004 16:17:45 -0000
Received: (qmail 61028 invoked by uid 500); 15 Sep 2004 16:17:17 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 60783 invoked by uid 500); 15 Sep 2004 16:17:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 60615 invoked by uid 99); 15 Sep 2004 16:17:11 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=HTML_90_100,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [212.187.129.125] (HELO mailout2.london2.eu.level3.net) (212.187.129.125)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 15 Sep 2004 09:17:07 -0700
Received: from [195.43.52.13] (helo=rzmr2.init.de)
	by mailout2.london2.eu.level3.net with esmtp (Exim 2.05 #4)
	id 1C7cSs-0005Xt-00
	for lucene-user@jakarta.apache.org; Wed, 15 Sep 2004 17:17:02 +0100
Received: from dcs02.init.de (dcs02.init.de [10.7.240.14])
	by rzmr2.init.de (Postfix) with ESMTP id 08B883FE19
	for <lucene-user@jakarta.apache.org>; Wed, 15 Sep 2004 18:17:02 +0200 (CEST)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C49B3D.F44EFB86"
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Subject: boosting fields in MultiFieldQueryParser with different factors
Date: Wed, 15 Sep 2004 18:06:20 +0200
Message-ID: <6832E029DE22DC4D84AEC19887E07EA802C8718C@dcs02.init.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: boosting fields in MultiFieldQueryParser with different factors
Thread-Index: AcSbPfBw/bLr08RORNaj0JP0JVLFWw==
From: "Fiebig, Swen (init)" <swen.fiebig@init.de>
To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C49B3D.F44EFB86
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hello group,

=20

is there a way to boost the different fields of a MultiFieldQueryParser
with different factors? Or at least in the resulting Query?

=20

=20

Greetings,

Swen fiebig


------_=_NextPart_001_01C49B3D.F44EFB86--

From lucene-user-return-10262-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 15 16:52:22 2004
Return-Path: <lucene-user-return-10262-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 77216 invoked from network); 15 Sep 2004 16:52:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Sep 2004 16:52:21 -0000
Received: (qmail 37130 invoked by uid 500); 15 Sep 2004 16:52:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 37056 invoked by uid 500); 15 Sep 2004 16:52:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 37011 invoked by uid 99); 15 Sep 2004 16:52:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 15 Sep 2004 09:51:59 -0700
Received: (qmail 27304 invoked by uid 532); 15 Sep 2004 16:49:23 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.097425 secs); 15 Sep 2004 16:49:23 -0000
Received: from unknown (HELO ?10.0.0.157?) (127.0.0.1)
  by 0 with SMTP; 15 Sep 2004 16:49:23 -0000
Message-ID: <4148732B.7080407@tropo.com>
Date: Wed, 15 Sep 2004 09:51:55 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.1) Gecko/20040707
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: NGramSpeller contribution -- Re: combining open office spellchecker
 with Lucene
References: <000201c49b10$9bcf4290$0a00a8c0@aadlaptop>
In-Reply-To: <000201c49b10$9bcf4290$0a00a8c0@aadlaptop>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Aad Nales wrote:

> By trying: if you type const you will find that it returns 216 hits. The
> third sports 'const' as a term (space seperated and all). I would expect
> 'conts' to return with const as well. But again I might be mistaken. I
> am now trying to figure what the problem might be: 
> 
> 1. my expectations (most likely ;-)
> 2. something in the code..


Good question.

If I use the form at the bottom of the page and ask for more results, 
the suggestion of "const" does eventually show up - 99th however(!).

http://www.searchmorph.com/kat/spell.jsp?s=conts&min=3&max=4&maxd=5&maxr=1000&bstart=2.0&bend=1.0

Even boosting the prefix match from 2.0 to 10.0 only changes the ranking 
a few slots.
http://www.searchmorph.com/kat/spell.jsp?s=conts&min=3&max=4&maxd=5&maxr=1000&bstart=10.0&bend=1.0

To restate the question for a second.

The misspelled word is: "conts".
The sugggestion expected is "const", which seems reasonable enough as 
it's just a transposition away, thus the string distance is low.

But - I guess the problem w/ the algorithm is that for short words like 
this, with transpositions, the two words won't share many ngrams.

Just looking at 3grams...

conts -> con ont nts
const -> con ons nst

Thus they just share 1 3gram, thus this is why it scores so low. This is 
an interesting issue, how to tune the algorithm so that it might return 
words this close higher.

I guess one way is to add all simple transpositions to the lookup table 
(the "ngram index") so that these could easily be found, with the 
heuristic that "a frequent way of misspelling words is to transpose two 
adjacent letters".

Based on other mails I'll make some additions to the code and will 
report back if anything of interest changes here.




> 
> -----Original Message-----
> From: Andrzej Bialecki [mailto:ab@getopt.org] 
> Sent: Wednesday, 15 September, 2004 12:23
> To: Lucene Users List
> Subject: Re: NGramSpeller contribution -- Re: combining open office
> spellchecker with Lucene
> 
> 
> Aad Nales wrote:
> 
> 
>>David,
>>
>>Perhaps I misunderstand somehting so please correct me if I do. I used
> 
> 
>>http://www.searchmorph.com/kat/spell.jsp to look for conts without 
>>changing any of the default values. What I got as results did not 
>>include 'const' which has quite a high frequency in your index and
> 
> 
> ??? how do you know that? Remember, this is an index of _Java_docs, and 
> "const" is not a Java keyword.
> 
> 
>>should have a pretty low levenshtein distance. Any idea what causes 
>>this behavior?
> 
> 
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10263-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 15 16:52:38 2004
Return-Path: <lucene-user-return-10263-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 77425 invoked from network); 15 Sep 2004 16:52:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Sep 2004 16:52:38 -0000
Received: (qmail 38574 invoked by uid 500); 15 Sep 2004 16:52:31 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 38549 invoked by uid 500); 15 Sep 2004 16:52:31 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 38536 invoked by uid 99); 15 Sep 2004 16:52:31 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.200.145.37] (HELO omta08.mta.everyone.net) (216.200.145.37)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 15 Sep 2004 09:52:29 -0700
Received: from sitemail.everyone.net (bigip1-snat [216.200.145.29])
	by omta08.mta.everyone.net (Postfix) with ESMTP id 3D4004DD7F
	for <lucene-user@jakarta.apache.org>; Wed, 15 Sep 2004 09:52:28 -0700 (PDT)
Received: by sitemail.everyone.net (Postfix, from userid 99)
	id EF81ED7978; Wed, 15 Sep 2004 09:52:24 -0700 (PDT)
Content-Type: text/plain
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0
X-Mailer: MIME-tools 5.41 (Entity 5.404)
Date: Wed, 15 Sep 2004 09:52:24 -0700 (PDT)
From: Ian McDonnell <ian@spinnerscity.com>
To: lucene-user@jakarta.apache.org
Subject: Lucene docs
Reply-To: ian@spinnerscity.com
X-Originating-Ip: [213.202.167.29]
X-Eon-Sig: AQDOAZ5BSHNIAA5/AwEAAAAB,7b71424361ab1c7da95352ecabcd40cf
Message-Id: <20040915165224.EF81ED7978@sitemail.everyone.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

What is the best resource for beginners looking to understand Lucenes functionality, ie its use of fields, documents, the index reader and writer etc.

is there any web resource that goes into details on the exact workings of it?

Ian

_____________________________________________________________
Sign up for FREE email from SpinnersCity Online Dance Magazine & Vortal at http://www.spinnerscity.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10264-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 15 16:53:55 2004
Return-Path: <lucene-user-return-10264-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 78212 invoked from network); 15 Sep 2004 16:53:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Sep 2004 16:53:55 -0000
Received: (qmail 42632 invoked by uid 500); 15 Sep 2004 16:53:40 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 42481 invoked by uid 500); 15 Sep 2004 16:53:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 42353 invoked by uid 99); 15 Sep 2004 16:53:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 15 Sep 2004 09:53:36 -0700
Received: (qmail 27415 invoked by uid 532); 15 Sep 2004 16:51:00 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.050159 secs); 15 Sep 2004 16:51:00 -0000
Received: from unknown (HELO ?10.0.0.157?) (127.0.0.1)
  by 0 with SMTP; 15 Sep 2004 16:51:00 -0000
Message-ID: <4148738C.6080202@tropo.com>
Date: Wed, 15 Sep 2004 09:53:32 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.1) Gecko/20040707
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: NGramSpeller contribution -- Re: combining open office spellchecker
 with Lucene
References: <000001c49b04$efe6c7b0$0a00a8c0@aadlaptop> <414817F5.4090006@getopt.org>
In-Reply-To: <414817F5.4090006@getopt.org>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Andrzej Bialecki wrote:

> Aad Nales wrote:
> 
>> David,
>>
>> Perhaps I misunderstand somehting so please correct me if I do. I used
>> http://www.searchmorph.com/kat/spell.jsp to look for conts without
>> changing any of the default values. What I got as results did not
>> include 'const' which has quite a high frequency in your index and
> 
> 
> ??? how do you know that? Remember, this is an index of _Java_docs, and 
> "const" is not a Java keyword.

I added a line of output to the right column under the 'details' box. 
"const" appears 216 times in the index (out of 96k docs), thus it is 
indeed kinda rare.

http://www.searchmorph.com/kat/spell.jsp?s=const

> 
>> should have a pretty low levenshtein distance. Any idea what causes this
>> behavior?
> 
> 
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10265-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 15 17:09:57 2004
Return-Path: <lucene-user-return-10265-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 87332 invoked from network); 15 Sep 2004 17:09:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Sep 2004 17:09:57 -0000
Received: (qmail 74477 invoked by uid 500); 15 Sep 2004 17:09:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 74434 invoked by uid 500); 15 Sep 2004 17:09:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 74420 invoked by uid 99); 15 Sep 2004 17:09:48 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.155.196.66] (HELO web60803.mail.yahoo.com) (216.155.196.66)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 15 Sep 2004 10:09:46 -0700
Message-ID: <20040915170942.20454.qmail@web60803.mail.yahoo.com>
Received: from [210.18.154.207] by web60803.mail.yahoo.com via HTTP; Wed, 15 Sep 2004 18:09:42 BST
Date: Wed, 15 Sep 2004 18:09:42 +0100 (BST)
From: =?iso-8859-1?q?Honey=20George?= <honey_george@yahoo.com>
Subject: Re: Lucene docs
To: Lucene Users List <lucene-user@jakarta.apache.org>, ian@spinnerscity.com
In-Reply-To: <20040915165224.EF81ED7978@sitemail.everyone.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Try these,
http://jakarta.apache.org/lucene/docs/gettingstarted.html
http://www.darksleep.com/lucene/

Thanks,
  George
 --- Ian McDonnell <ian@spinnerscity.com> wrote: 
> What is the best resource for beginners looking to
> understand Lucenes functionality, ie its use of
> fields, documents, the index reader and writer etc.
> 
> is there any web resource that goes into details on
> the exact workings of it?
> 
> Ian
> 
>
_____________________________________________________________
> Sign up for FREE email from SpinnersCity Online
> Dance Magazine & Vortal at
> http://www.spinnerscity.com
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> 
>  


	
	
		
___________________________________________________________ALL-NEW Yahoo! Messenger - all new features - even more fun!  http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10266-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 15 17:12:25 2004
Return-Path: <lucene-user-return-10266-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 88333 invoked from network); 15 Sep 2004 17:12:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Sep 2004 17:12:24 -0000
Received: (qmail 76934 invoked by uid 500); 15 Sep 2004 17:10:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 76872 invoked by uid 500); 15 Sep 2004 17:10:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 76824 invoked by uid 99); 15 Sep 2004 17:10:52 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=HTML_90_100,HTML_MESSAGE,HTML_TEXT_AFTER_BODY,HTML_TEXT_AFTER_HTML
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [200.61.168.200] (HELO gandalf.xlnet.net.ar) (200.61.168.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 15 Sep 2004 10:10:51 -0700
Received: from exchange.xlnet.net.ar (10.0.0.3) by gandalf.xlnet.net.ar (NPlex 5.1.036)
        id 4142203000015F41 for lucene-user@jakarta.apache.org; Wed, 15 Sep 2004 14:13:04 -0300
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C49B47.4075E65C"
Subject: problem with SortField[] in search method (newbie)
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Date: Wed, 15 Sep 2004 14:12:59 -0300
Message-ID: <DDD3F807D283B543B3396F7E00A2C7E125F33B@exchange.xlnet.net.ar>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: problem with SortField[] in search method (newbie)
Thread-Index: AcSbR6p4L9rPyu0IRnavwMLc81X6RQ==
From: "Wermus Fernando" <fernando.wermus@xlnet.net.ar>
To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C49B47.4075E65C
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Luceners,
My search looks up the whole entities. My entities are accounts,
contacts, tasks, etc. My searching looks up a group of entity's fields.
This works fine despite, I don't have indexed any entity in a document.
But If I sort by some fields from different entities, I get the
following error.
=20
field "shortName" does not appear to be indexed
=20
The account's field I have indexed are
=20
shortName,number,location,fax,phone,symbol
=20
and I order by
=20
shortName
----------------------------------------------------
without  any order
=20
shortName,number,location,fax,phone,symbol
=20
it works fine.
----
I don't understand the behavior because If I don't order the searching
and I don't have any document indexed, It works fine, but If I add an
order I get a runtimeException and I can't catch the exception  to solve
the problem. The only solution it's to index the whole fields'
entitities once in a document, but for me it's a patch.
=20
Any idea,  it could help me out.
=20
Thanks in advance.

------_=_NextPart_001_01C49B47.4075E65C--

From lucene-user-return-10267-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 15 17:32:55 2004
Return-Path: <lucene-user-return-10267-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 96837 invoked from network); 15 Sep 2004 17:32:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Sep 2004 17:32:54 -0000
Received: (qmail 22533 invoked by uid 500); 15 Sep 2004 17:32:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 21770 invoked by uid 500); 15 Sep 2004 17:32:27 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 21754 invoked by uid 99); 15 Sep 2004 17:32:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 15 Sep 2004 10:32:25 -0700
Received: from [128.230.38.212] (syru38-212.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.13570BF3@mailer.syr.edu>; Wed, 15 Sep 2004 13:32:23 -0400
Message-ID: <41487CA6.8050906@syr.edu>
Date: Wed, 15 Sep 2004 13:32:22 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mozilla Thunderbird 0.7.3 (Windows/20040803)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Lucene docs
References: <20040915165224.EF81ED7978@sitemail.everyone.net>
In-Reply-To: <20040915165224.EF81ED7978@sitemail.everyone.net>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

<URL:http://wiki.apache.org/jakarta-lucene/IntroductionToLucene>

Ian McDonnell wrote:
> What is the best resource for beginners looking to understand
> Lucenes functionality, ie its use of fields, documents, the index
> reader and writer etc.
> 
> is there any web resource that goes into details on the exact
> workings of it?


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10268-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 15 17:35:51 2004
Return-Path: <lucene-user-return-10268-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 97921 invoked from network); 15 Sep 2004 17:35:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Sep 2004 17:35:51 -0000
Received: (qmail 26288 invoked by uid 500); 15 Sep 2004 17:35:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 26255 invoked by uid 500); 15 Sep 2004 17:35:42 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 26233 invoked by uid 99); 15 Sep 2004 17:35:42 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [141.156.69.115] (HELO mail.infosciences.com) (141.156.69.115)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 15 Sep 2004 10:35:40 -0700
Received: from Aviran (unknown [141.156.69.109])
	by mail.infosciences.com (Postfix) with ESMTP id 79B1C118305
	for <lucene-user@jakarta.apache.org>; Wed, 15 Sep 2004 13:38:52 -0400 (EDT)
From: "Aviran" <amordo@infosciences.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: problem with SortField[] in search method (newbie)
Date: Wed, 15 Sep 2004 13:35:29 -0400
Message-ID: <002d01c49b4a$680e7680$6a00a8c0@Aviran>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
In-Reply-To: <DDD3F807D283B543B3396F7E00A2C7E125F33B@exchange.xlnet.net.ar>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

You can only sort on indexed field. (even more than that, it'll work
properly only on Untokenized fields, ie keyword).

Aviran

-----Original Message-----
From: Wermus Fernando [mailto:fernando.wermus@xlnet.net.ar]=20
Sent: Wednesday, September 15, 2004 13:13 PM
To: lucene-user@jakarta.apache.org
Subject: problem with SortField[] in search method (newbie)


Luceners,
My search looks up the whole entities. My entities are accounts, =
contacts,
tasks, etc. My searching looks up a group of entity's fields. This works
fine despite, I don't have indexed any entity in a document. But If I =
sort
by some fields from different entities, I get the following error.
=20
field "shortName" does not appear to be indexed
=20
The account's field I have indexed are
=20
shortName,number,location,fax,phone,symbol
=20
and I order by
=20
shortName
----------------------------------------------------
without  any order
=20
shortName,number,location,fax,phone,symbol
=20
it works fine.
----
I don't understand the behavior because If I don't order the searching =
and I
don't have any document indexed, It works fine, but If I add an order I =
get
a runtimeException and I can't catch the exception  to solve the =
problem.
The only solution it's to index the whole fields' entitities once in a
document, but for me it's a patch.
=20
Any idea,  it could help me out.
=20
Thanks in advance.



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10269-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 15 17:51:57 2004
Return-Path: <lucene-user-return-10269-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 4319 invoked from network); 15 Sep 2004 17:51:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Sep 2004 17:51:57 -0000
Received: (qmail 56216 invoked by uid 500); 15 Sep 2004 17:51:22 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 56104 invoked by uid 500); 15 Sep 2004 17:51:21 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 55982 invoked by uid 99); 15 Sep 2004 17:51:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [200.61.168.200] (HELO gandalf.xlnet.net.ar) (200.61.168.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 15 Sep 2004 10:51:19 -0700
Received: from exchange.xlnet.net.ar (10.0.0.3) by gandalf.xlnet.net.ar (NPlex 5.1.036)
        id 414220300001652A for lucene-user@jakarta.apache.org; Wed, 15 Sep 2004 14:53:36 -0300
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: problem with SortField[] in search method (newbie)
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Date: Wed, 15 Sep 2004 14:53:36 -0300
Message-ID: <DDD3F807D283B543B3396F7E00A2C7E125F33F@exchange.xlnet.net.ar>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: problem with SortField[] in search method (newbie)
Thread-Index: AcSbSsmtX+/ULo9vRgSAl+CO85eaIQAAJKaA
From: "Wermus Fernando" <fernando.wermus@xlnet.net.ar>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Aviran,
	I can search in not indexed fields without any exception, but I can't =
order by the same fields.
	Besides,  I can't know in advance if they are indexed in my app, =
because I index those fields that have some value, if it doesn't I don't =
add it to the document.
=20
	What if I don't have any document indexed?



-----Mensaje original-----
De: Aviran [mailto:amordo@infosciences.com]=20
Enviado el: Mi=E9rcoles, 15 de Septiembre de 2004 02:35 p.m.
Para: 'Lucene Users List'
Asunto: RE: problem with SortField[] in search method (newbie)

You can only sort on indexed field. (even more than that, it'll work
properly only on Untokenized fields, ie keyword).

Aviran

-----Original Message-----
From: Wermus Fernando [mailto:fernando.wermus@xlnet.net.ar]=20
Sent: Wednesday, September 15, 2004 13:13 PM
To: lucene-user@jakarta.apache.org
Subject: problem with SortField[] in search method (newbie)


Luceners,
My search looks up the whole entities. My entities are accounts, =
contacts,
tasks, etc. My searching looks up a group of entity's fields. This works
fine despite, I don't have indexed any entity in a document. But If I =
sort
by some fields from different entities, I get the following error.
=20
field "shortName" does not appear to be indexed
=20
The account's field I have indexed are
=20
shortName,number,location,fax,phone,symbol
=20
and I order by
=20
shortName
----------------------------------------------------
without  any order
=20
shortName,number,location,fax,phone,symbol
=20
it works fine.
----
I don't understand the behavior because If I don't order the searching =
and I
don't have any document indexed, It works fine, but If I add an order I =
get
a runtimeException and I can't catch the exception  to solve the =
problem.
The only solution it's to index the whole fields' entitities once in a
document, but for me it's a patch.
=20
Any idea,  it could help me out.
=20
Thanks in advance.



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10270-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 15 18:14:33 2004
Return-Path: <lucene-user-return-10270-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 13205 invoked from network); 15 Sep 2004 18:14:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Sep 2004 18:14:33 -0000
Received: (qmail 24600 invoked by uid 500); 15 Sep 2004 18:13:38 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 24535 invoked by uid 500); 15 Sep 2004 18:13:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 24431 invoked by uid 99); 15 Sep 2004 18:13:36 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.65.202.3] (HELO contextmedia.com) (64.65.202.3)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 15 Sep 2004 11:13:35 -0700
Received: from ppeddi ([192.168.1.48]) by contextmedia.com ; Wed, 15 Sep 2004 14:13:06 -0400
Message-ID: <01bb01c49b4f$a760ff10$aa87a8c0@ppeddi>
From: "Praveen Peddi" <ppeddi@contextmedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <DDD3F807D283B543B3396F7E00A2C7E125F33F@exchange.xlnet.net.ar>
Subject: Re: problem with SortField[] in search method (newbie)
Date: Wed, 15 Sep 2004 14:13:08 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Rcpt-To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Does it mean you indexed all "not null" fields?. I think you should change
your code so that you always index the fields you want to sort.

In any case, it looks like some of your documents have shortName not null
and not indexed. If you do not have any non-indexed shotnames in the index,
I don't think u would have got that error. But I may be wrong.

Praveen

----- Original Message ----- 
From: "Wermus Fernando" <fernando.wermus@xlnet.net.ar>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Wednesday, September 15, 2004 1:53 PM
Subject: RE: problem with SortField[] in search method (newbie)


Aviran,
I can search in not indexed fields without any exception, but I can't order
by the same fields.
Besides,  I can't know in advance if they are indexed in my app, because I
index those fields that have some value, if it doesn't I don't add it to the
document.

What if I don't have any document indexed?



-----Mensaje original-----
De: Aviran [mailto:amordo@infosciences.com]
Enviado el: Mircoles, 15 de Septiembre de 2004 02:35 p.m.
Para: 'Lucene Users List'
Asunto: RE: problem with SortField[] in search method (newbie)

You can only sort on indexed field. (even more than that, it'll work
properly only on Untokenized fields, ie keyword).

Aviran

-----Original Message-----
From: Wermus Fernando [mailto:fernando.wermus@xlnet.net.ar]
Sent: Wednesday, September 15, 2004 13:13 PM
To: lucene-user@jakarta.apache.org
Subject: problem with SortField[] in search method (newbie)


Luceners,
My search looks up the whole entities. My entities are accounts, contacts,
tasks, etc. My searching looks up a group of entity's fields. This works
fine despite, I don't have indexed any entity in a document. But If I sort
by some fields from different entities, I get the following error.

field "shortName" does not appear to be indexed

The account's field I have indexed are

shortName,number,location,fax,phone,symbol

and I order by

shortName
----------------------------------------------------
without  any order

shortName,number,location,fax,phone,symbol

it works fine.
----
I don't understand the behavior because If I don't order the searching and I
don't have any document indexed, It works fine, but If I add an order I get
a runtimeException and I can't catch the exception  to solve the problem.
The only solution it's to index the whole fields' entitities once in a
document, but for me it's a patch.

Any idea,  it could help me out.

Thanks in advance.



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10271-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 15 18:30:13 2004
Return-Path: <lucene-user-return-10271-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 19792 invoked from network); 15 Sep 2004 18:30:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Sep 2004 18:30:12 -0000
Received: (qmail 62040 invoked by uid 500); 15 Sep 2004 18:29:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 61969 invoked by uid 500); 15 Sep 2004 18:29:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 61912 invoked by uid 99); 15 Sep 2004 18:29:52 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 15 Sep 2004 11:29:51 -0700
Received: from [192.168.0.254] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id i8FITpe02737
	for <lucene-user@jakarta.apache.org>; Wed, 15 Sep 2004 13:29:51 -0500
Message-ID: <41488A1E.7080801@getopt.org>
Date: Wed, 15 Sep 2004 20:29:50 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040803
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: NGramSpeller contribution -- Re: combining open office spellchecker
 with Lucene
References: <000201c49b10$9bcf4290$0a00a8c0@aadlaptop> <4148732B.7080407@tropo.com>
In-Reply-To: <4148732B.7080407@tropo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

David Spencer wrote:
> To restate the question for a second.
> 
> The misspelled word is: "conts".
> The sugggestion expected is "const", which seems reasonable enough as 
> it's just a transposition away, thus the string distance is low.
> 
> But - I guess the problem w/ the algorithm is that for short words like 
> this, with transpositions, the two words won't share many ngrams.
> 
> Just looking at 3grams...
> 
> conts -> con ont nts
> const -> con ons nst
> 
> Thus they just share 1 3gram, thus this is why it scores so low. This is 
> an interesting issue, how to tune the algorithm so that it might return 
> words this close higher.

If you added 2-grams, then it would look like this (constructing also 
special start/end grams):

conts -> _c co on nt ts s_
const -> _c co on ns st t_

which gives 50% of overlap.

In another system that I designed we were using a combination of 2-4 
grams, albeit for a slightly different purpose, so in this case it would be:

conts:
	_c co on nt ts s_, _co con ont nts ts_, _con cont onts nts_

const:
	_c co on ns st t_, _co con ons nst st_, _con cons onst nst_

and the overlap is 40%.


> 
> I guess one way is to add all simple transpositions to the lookup table 
> (the "ngram index") so that these could easily be found, with the 
> heuristic that "a frequent way of misspelling words is to transpose two 
> adjacent letters".

Yes, sounds like a good idea. Even though it increases the size of the 
lookup index, it still beats using the linear search...

-- 
Best regards,
Andrzej Bialecki

-------------------------------------------------
Software Architect, System Integration Specialist
CEN/ISSS EC Workshop, ECIMF project chair
EU FP6 E-Commerce Expert/Evaluator
-------------------------------------------------
FreeBSD developer (http://www.freebsd.org)


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10272-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 15 18:41:37 2004
Return-Path: <lucene-user-return-10272-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 25819 invoked from network); 15 Sep 2004 18:41:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Sep 2004 18:41:37 -0000
Received: (qmail 87477 invoked by uid 500); 15 Sep 2004 18:41:27 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 87434 invoked by uid 500); 15 Sep 2004 18:41:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 87412 invoked by uid 99); 15 Sep 2004 18:41:25 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.25.134.20] (HELO mailout08.sul.t-online.com) (194.25.134.20)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 15 Sep 2004 11:41:22 -0700
Received: from fwd07.aul.t-online.de 
	by mailout08.sul.t-online.com with smtp 
	id 1C7eiW-0003E7-00; Wed, 15 Sep 2004 20:41:20 +0200
Received: from p5480208D.dip.t-dialin.net (bjDKjmZ-oelaeSvPq6wWWy0vgsG6+5M3zETR-5Qi03rL7sootF7i4O@[84.128.32.141]) by fmrl07.sul.t-online.com
	with esmtp id 1C7eiS-1hCr8C0; Wed, 15 Sep 2004 20:41:16 +0200
From: Daniel Naber <daniel.naber@t-online.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: boosting fields in MultiFieldQueryParser with different factors
Date: Wed, 15 Sep 2004 20:44:02 +0200
User-Agent: KMail/1.7
References: <6832E029DE22DC4D84AEC19887E07EA802C8718C@dcs02.init.de>
In-Reply-To: <6832E029DE22DC4D84AEC19887E07EA802C8718C@dcs02.init.de>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200409152044.02565@danielnaber.de>
X-ID: bjDKjmZ-oelaeSvPq6wWWy0vgsG6+5M3zETR-5Qi03rL7sootF7i4O@t-dialin.net
X-TOI-MSGID: 0f740038-e9fe-4b28-b907-22e0195ce81b
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Wednesday 15 September 2004 18:06, Fiebig, Swen (init) wrote:

> is there a way to boost the different fields of a MultiFieldQueryParser
> with different factors? Or at least in the resulting Query?

The easiest way is probably to subclass MultiFieldQueryParser and implement 
a method that modifies the boosts (you can copy most of it from 
MultiFieldQueryParser.parse() and then call setBoost() on the queries).

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10273-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 15 19:55:06 2004
Return-Path: <lucene-user-return-10273-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 65829 invoked from network); 15 Sep 2004 19:55:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Sep 2004 19:55:06 -0000
Received: (qmail 55023 invoked by uid 500); 15 Sep 2004 19:54:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 54995 invoked by uid 500); 15 Sep 2004 19:54:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 54980 invoked by uid 99); 15 Sep 2004 19:54:56 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=HTML_90_100,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [209.167.138.140] (HELO tango.casebank.com) (209.167.138.140)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 15 Sep 2004 12:54:55 -0700
Received: from plitvak ([172.17.200.95]) by tango.casebank.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 15 Sep 2004 15:54:40 -0400
From: "Polina Litvak" <plitvak@casebank.com>
To: <lucene-user@jakarta.apache.org>
Subject: QueryParser.parse() and Lucene1.4.1
Date: Wed, 15 Sep 2004 15:58:24 -0400
Message-ID: <001f01c49b5e$5bd01090$5fc811ac@plitvak>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0020_01C49B3C.D4BE7090"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2616
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
Importance: Normal
X-OriginalArrivalTime: 15 Sep 2004 19:54:40.0640 (UTC) FILETIME=[D6832800:01C49B5D]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0020_01C49B3C.D4BE7090
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

I have a question regarding QueryParser and lucene-1.4.1.jar:
 
When using lucene-1.3-final.jar, a query of the form: Field:(A AND -(B))
was parsed into +Field:A -Field:B (using QueryParser.parse()). 
After making the switch to lucene-1.4.1.jar, the same query is being
parsed into Field:A Field:- Field:B which is not the desired outcome.
 
Does anyone know how to work around this new feature ?
 
Thanks,
Polina

------=_NextPart_000_0020_01C49B3C.D4BE7090--



From lucene-user-return-10274-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 15 19:55:17 2004
Return-Path: <lucene-user-return-10274-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 65913 invoked from network); 15 Sep 2004 19:55:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Sep 2004 19:55:17 -0000
Received: (qmail 55344 invoked by uid 500); 15 Sep 2004 19:55:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 55211 invoked by uid 500); 15 Sep 2004 19:54:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 55083 invoked by uid 99); 15 Sep 2004 19:54:57 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 15 Sep 2004 12:54:57 -0700
Received: (qmail 3872 invoked by uid 532); 15 Sep 2004 19:52:21 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.133858 secs); 15 Sep 2004 19:52:21 -0000
Received: from unknown (HELO ?10.0.0.157?) (127.0.0.1)
  by 0 with SMTP; 15 Sep 2004 19:52:21 -0000
Message-ID: <41489E0E.5090402@tropo.com>
Date: Wed, 15 Sep 2004 12:54:54 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.1) Gecko/20040707
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: NGramSpeller contribution -- Re: combining open office spellchecker
 with Lucene
References: <000201c49b10$9bcf4290$0a00a8c0@aadlaptop>
In-Reply-To: <000201c49b10$9bcf4290$0a00a8c0@aadlaptop>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Aad Nales wrote:

> By trying: if you type const you will find that it returns 216 hits. The
> third sports 'const' as a term (space seperated and all). I would expect
> 'conts' to return with const as well. But again I might be mistaken. I
> am now trying to figure what the problem might be: 
> 
> 1. my expectations (most likely ;-)
> 2. something in the code..



I enhanced the code to store simple transpositions also and I 
regenerated my site w/ ngrams from 2 to 5 chars. If you set the 
transposition boost up to 10 then "const" is returned 2nd...

http://www.searchmorph.com/kat/spell.jsp?s=conts&min=2&max=5&maxd=5&maxr=10&bstart=2.0&bend=1.0&btranspose=10.0&popular=1

> 
> -----Original Message-----
> From: Andrzej Bialecki [mailto:ab@getopt.org] 
> Sent: Wednesday, 15 September, 2004 12:23
> To: Lucene Users List
> Subject: Re: NGramSpeller contribution -- Re: combining open office
> spellchecker with Lucene
> 
> 
> Aad Nales wrote:
> 
> 
>>David,
>>
>>Perhaps I misunderstand somehting so please correct me if I do. I used
> 
> 
>>http://www.searchmorph.com/kat/spell.jsp to look for conts without 
>>changing any of the default values. What I got as results did not 
>>include 'const' which has quite a high frequency in your index and
> 
> 
> ??? how do you know that? Remember, this is an index of _Java_docs, and 
> "const" is not a Java keyword.
> 
> 
>>should have a pretty low levenshtein distance. Any idea what causes 
>>this behavior?
> 
> 
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10275-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 15 19:57:12 2004
Return-Path: <lucene-user-return-10275-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 66700 invoked from network); 15 Sep 2004 19:57:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Sep 2004 19:57:11 -0000
Received: (qmail 59080 invoked by uid 500); 15 Sep 2004 19:57:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 59037 invoked by uid 500); 15 Sep 2004 19:57:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 59020 invoked by uid 99); 15 Sep 2004 19:57:04 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 15 Sep 2004 12:57:03 -0700
Received: (qmail 3920 invoked by uid 532); 15 Sep 2004 19:54:28 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.096957 secs); 15 Sep 2004 19:54:28 -0000
Received: from unknown (HELO ?10.0.0.157?) (127.0.0.1)
  by 0 with SMTP; 15 Sep 2004 19:54:28 -0000
Message-ID: <41489E8C.5000104@tropo.com>
Date: Wed, 15 Sep 2004 12:57:00 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.1) Gecko/20040707
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: NGramSpeller contribution -- Re: combining open office spellchecker
 with Lucene
References: <000201c49b10$9bcf4290$0a00a8c0@aadlaptop> <4148732B.7080407@tropo.com> <41488A1E.7080801@getopt.org>
In-Reply-To: <41488A1E.7080801@getopt.org>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Andrzej Bialecki wrote:

> David Spencer wrote:
> 
>> To restate the question for a second.
>>
>> The misspelled word is: "conts".
>> The sugggestion expected is "const", which seems reasonable enough as 
>> it's just a transposition away, thus the string distance is low.
>>
>> But - I guess the problem w/ the algorithm is that for short words 
>> like this, with transpositions, the two words won't share many ngrams.
>>
>> Just looking at 3grams...
>>
>> conts -> con ont nts
>> const -> con ons nst
>>
>> Thus they just share 1 3gram, thus this is why it scores so low. This 
>> is an interesting issue, how to tune the algorithm so that it might 
>> return words this close higher.
> 
> 
> If you added 2-grams, then it would look like this (constructing also 
> special start/end grams):

Oh cute trick to indicate prefixes and suffixes.
Anyway, as per prev post I reformed index w/ ngrams from length 2 to 5, 
and also store transpositions, and w/ appropriate boosts :) then "const" 
is returned 2nd.

http://www.searchmorph.com/kat/spell.jsp?s=conts&min=2&max=5&maxd=5&maxr=10&bstart=2.0&bend=1.0&btranspose=10.0&popular=1

> 
> conts -> _c co on nt ts s_
> const -> _c co on ns st t_
> 
> which gives 50% of overlap.
> 
> In another system that I designed we were using a combination of 2-4 
> grams, albeit for a slightly different purpose, so in this case it would 
> be:
> 
> conts:
>     _c co on nt ts s_, _co con ont nts ts_, _con cont onts nts_
> 
> const:
>     _c co on ns st t_, _co con ons nst st_, _con cons onst nst_
> 
> and the overlap is 40%.
> 
> 
>>
>> I guess one way is to add all simple transpositions to the lookup 
>> table (the "ngram index") so that these could easily be found, with 
>> the heuristic that "a frequent way of misspelling words is to 
>> transpose two adjacent letters".
> 
> 
> Yes, sounds like a good idea. Even though it increases the size of the 
> lookup index, it still beats using the linear search...
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10276-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 15 20:01:06 2004
Return-Path: <lucene-user-return-10276-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 68442 invoked from network); 15 Sep 2004 20:01:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Sep 2004 20:01:06 -0000
Received: (qmail 71698 invoked by uid 500); 15 Sep 2004 20:00:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 71645 invoked by uid 500); 15 Sep 2004 20:00:58 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 71632 invoked by uid 99); 15 Sep 2004 20:00:58 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=REMOVE_PAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 15 Sep 2004 13:00:58 -0700
Received: (qmail 4104 invoked by uid 532); 15 Sep 2004 19:58:22 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.067553 secs); 15 Sep 2004 19:58:22 -0000
Received: from unknown (HELO ?10.0.0.157?) (127.0.0.1)
  by 0 with SMTP; 15 Sep 2004 19:58:22 -0000
Message-ID: <41489F76.7050105@tropo.com>
Date: Wed, 15 Sep 2004 13:00:54 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.1) Gecko/20040707
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: frequent terms - Re: combining open office spellchecker with
 Lucene
References: <000001c49572$72cacc00$0a00a8c0@aadlaptop> <41408CCA.5030804@apache.org> <41424916.703@tropo.com> <41426B0A.1020006@apache.org> <414273C6.8000200@tropo.com> <41476418.5040600@apache.org>
In-Reply-To: <41476418.5040600@apache.org>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Doug Cutting wrote:

> David Spencer wrote:
> 
>> [1] The user enters a query like:
>>     recursize descent parser
>>
>> [2] The search code parses this and sees that the 1st word is not a 
>> term in the index, but the next 2 are. So it ignores the last 2 terms 
>> ("recursive" and "descent") and suggests alternatives to 
>> "recursize"...thus if any term is in the index, regardless of 
>> frequency,  it is left as-is.
>>
>> I guess you're saying that, if the user enters a term that appears in 
>> the index and thus is sort of spelled correctly ( as it exists in some 
>> doc), then we use the heuristic that any sufficiently large doc 
>> collection will have tons of misspellings, so we assume that rare 
>> terms in the query might be misspelled (i.e. not what the user 
>> intended) and we suggest alternativies to these words too (in addition 
>> to the words in the query that are not in the index at all).
> 
> 
> Almost.
> 
> If the user enters "a recursize purser", then: "a", which is in, say, 
>  >50% of the documents, is probably spelled correctly and "recursize", 
> which is in zero documents, is probably mispelled.  But what about 
> "purser"?  If we run the spell check algorithm on "purser" and generate 
> "parser", should we show it to the user?  If "purser" occurs in 1% of 
> documents and "parser" occurs in 5%, then we probably should, since 
> "parser" is a more common word than "purser".  But if "parser" only 
> occurs in 1% of the documents and purser occurs in 5%, then we probably 
> shouldn't bother suggesting "parser".
> 
> If you wanted to get really fancy then you could check how frequently 
> combinations of query terms occur, i.e., does "purser" or "parser" occur 
> more frequently near "descent".  But that gets expensive.

I updated the code to have an optional popularity filter - if true then 
it only returns matches more popular (frequent) than the word that is 
passed in for spelling correction.

If true (default) then for common words like "remove", no results are 
returned now, as expected:

http://www.searchmorph.com/kat/spell.jsp?s=remove

But if you set it to false (bottom slot in the form at the bottom of the 
page) then the algorithm happily looks for alternatives:

http://www.searchmorph.com/kat/spell.jsp?s=remove&min=2&max=5&maxd=5&maxr=10&bstart=2.0&bend=1.0&btranspose=1.0&popular=0

TBD I need to update the javadoc & repost the code I guess. Also as per 
earlier post I also store simple transpositions for words in the 
ngram-index.

-- Dave

> 
> Doug
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10277-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 15 21:04:55 2004
Return-Path: <lucene-user-return-10277-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 1355 invoked from network); 15 Sep 2004 21:04:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Sep 2004 21:04:55 -0000
Received: (qmail 45592 invoked by uid 500); 15 Sep 2004 21:04:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 45548 invoked by uid 500); 15 Sep 2004 21:04:47 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 45520 invoked by uid 99); 15 Sep 2004 21:04:46 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.25.134.81] (HELO mailout03.sul.t-online.com) (194.25.134.81)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 15 Sep 2004 14:04:43 -0700
Received: from fwd07.aul.t-online.de 
	by mailout03.sul.t-online.com with smtp 
	id 1C7gxD-0000sr-03; Wed, 15 Sep 2004 23:04:39 +0200
Received: from pD9EBF529.dip.t-dialin.net (Xdxe6OZToeupucI+uJSqYuVDFI49xWrMYQaV2sC2C2s2lGHjysKx6G@[217.235.245.41]) by fmrl07.sul.t-online.com
	with esmtp id 1C7gxB-1s1oSu0; Wed, 15 Sep 2004 23:04:37 +0200
From: Daniel Naber <daniel.naber@t-online.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: QueryParser.parse() and Lucene1.4.1
Date: Wed, 15 Sep 2004 23:07:22 +0200
User-Agent: KMail/1.7
References: <001f01c49b5e$5bd01090$5fc811ac@plitvak>
In-Reply-To: <001f01c49b5e$5bd01090$5fc811ac@plitvak>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200409152307.22873@danielnaber.de>
X-ID: Xdxe6OZToeupucI+uJSqYuVDFI49xWrMYQaV2sC2C2s2lGHjysKx6G@t-dialin.net
X-TOI-MSGID: 621a6d45-4d46-4cbc-bcb0-337ba98dd60a
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Wednesday 15 September 2004 21:58, Polina Litvak wrote:

> Does anyone know how to work around this new feature ?

I can't remember any changes in this area, but I just tried with the 
current version from CVS and the output is the one which you want.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10278-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 15 23:05:30 2004
Return-Path: <lucene-user-return-10278-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 51188 invoked from network); 15 Sep 2004 23:05:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Sep 2004 23:05:30 -0000
Received: (qmail 64676 invoked by uid 500); 15 Sep 2004 23:05:23 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 64652 invoked by uid 500); 15 Sep 2004 23:05:22 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 64639 invoked by uid 99); 15 Sep 2004 23:05:22 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of ken.mccracken@gmail.com designates 64.233.170.194 as permitted sender)
Received: from [64.233.170.194] (HELO mproxy.gmail.com) (64.233.170.194)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 15 Sep 2004 16:05:22 -0700
Received: by mproxy.gmail.com with SMTP id 79so15185rnl
        for <lucene-user@jakarta.apache.org>; Wed, 15 Sep 2004 16:05:20 -0700 (PDT)
Received: by 10.38.74.77 with SMTP id w77mr1017955rna;
        Wed, 15 Sep 2004 16:05:20 -0700 (PDT)
Received: by 10.38.75.11 with HTTP; Wed, 15 Sep 2004 16:05:20 -0700 (PDT)
Message-ID: <2b2518a4040915160552a61c26@mail.gmail.com>
Date: Wed, 15 Sep 2004 16:05:20 -0700
From: Ken McCracken <ken.mccracken@gmail.com>
Reply-To: Ken McCracken <ken.mccracken@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Similarity score computation documentation
In-Reply-To: <4147674C.5010305@apache.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <2b2518a404091317206b22d96@mail.gmail.com>
	 <4147674C.5010305@apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Doug,

Thanks for the reply.  

idf is a function of the individual terms in the query.  I think that
the grouping in the Similarity formula would be off with it at the
end.  It currently looks like
    ( SUM_t in q ( tf * idf * getBoost * lengthNorm ) ) * coord * queryNorm
whereas I think what you are describing is
    ( SUM_t in q ( tf * idf * getBoost * lengthNorm ) ) * coord *
queryNorm * idf
This doesn't make sense, since idf is a function of each t in q, and
it is outside the sum.

Since coord and queryNorm are computed across the query, maybe the
formula should then look like
    ( SUM_t in q ( tf * idf * getBoost * lengthNorm * coord *
queryNorm * idf ) )
or 
    ( SUM_t in q ( tf * idf * getBoost * lengthNorm * idf ) ) * coord
* queryNorm
These are equivalent formulas.  coord and queryNorm are functions of
the entire query and can appear either inside or outside the sigma
SUM.  I'm shaky on what would be the best or most-easily-understood
ordering.

Cheers,
-Ken

On Tue, 14 Sep 2004 14:49:00 -0700, Doug Cutting <cutting@apache.org> wrote:
> Your analysis sounds correct.
> 
> At base, a weight is a normalized tf*idf.  So a document weight is:
> 
>   docTf * idf * docNorm
> 
> and a query weight is:
> 
>   queryTf * idf * queryNorm
> 
> where queryTf is always one.
> 
> So the product of these is (docTf * idf * docNorm) * (idf * queryNorm),
> which indeed contains idf twice.  I think the best documentation fix
> would be to add another idf(t) clause at the end of the formula, next to
> queryNorm(q), so this is clear.  Does that sound right to you?
> 
> Doug
> 
> 
> 
> Ken McCracken wrote:
> > Hi,
> >
> > I was looking through the score computation when running search, and
> > think there may be a discrepancy between what is _documented_ in the
> > org.apache.lucene.search.Similarity class overview Javadocs, and what
> > actually occurs in the code.
> >
> > I believe the problem is only with the documentation.
> >
> > I'm pretty sure that there should be an idf^2 in the sum.  Look at
> > org.apache.lucene.search.TermQuery, the inner class TermWeight.  You
> > can see that first sumOfSquaredWeights() is called, followed by
> > normalize(), during search.  Further, the resulting value stored in
> > the field "value" is set as the "weightValue" on the TermScorer.
> >
> > If we look at what happens to TermWeight, sumOfSquaredWeights() sets
> > "queryWeight" to idf * boost.  During normalize(), "queryWeight" is
> > multiplied by the query norm, and "value" is set to queryWeight * idf
> > == idf * boost * query norm * idf == idf^2 * boost * query norm.  This
> > becomes the "weightValue" in the TermScorer that is then used to
> > multiply with the appropriate tf, etc., values.
> >
> > The remaining terms in the Similarity description are properly
> > appended.  I also see that the queryNorm effectively "cancels out"
> > (dimensionally, since it is a 1/ square root of a sum of squares of
> > idfs) one of the idfs, so the formula still ends up being roughly a
> > TF-IDF formula.  But the idf^2 should still be there, along with the
> > expansion of queryNorm.
> >
> > Am I mistaken, or is the documentation off?
> >
> > Thanks for your help,
> > -Ken
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10279-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 16 06:07:12 2004
Return-Path: <lucene-user-return-10279-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 96117 invoked from network); 16 Sep 2004 06:07:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Sep 2004 06:07:11 -0000
Received: (qmail 1939 invoked by uid 500); 16 Sep 2004 06:06:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 1898 invoked by uid 500); 16 Sep 2004 06:06:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 1878 invoked by uid 99); 16 Sep 2004 06:06:58 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=REMOVE_PAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [62.221.254.29] (HELO otto.dutchdsl.nl) (62.221.254.29)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 15 Sep 2004 23:06:58 -0700
Received: from aadlaptop (dsl-82-199-135-164.dutchdsl.nl [82.199.135.164])
	by otto.dutchdsl.nl (Postfix) with ESMTP id 4ACBA1100AF
	for <lucene-user@jakarta.apache.org>; Thu, 16 Sep 2004 08:06:55 +0200 (CEST)
From: "Aad Nales" <aad.nales@rotterdam-cs.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: frequent terms - Re: combining open office spellchecker with Lucene
Date: Thu, 16 Sep 2004 08:06:42 +0200
Message-ID: <000f01c49bb3$5ccf0960$59edfea9@aadlaptop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2616
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
In-Reply-To: <41489F76.7050105@tropo.com>
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Also,

You can also use an alternative spellchecker for the 'checking part' and
use the Ngram algorithm for the 'suggestion' part. Only if the spell
'check' declares a word illegal the 'suggestion' part would perform its
magic.


cheers,
Aad

Doug Cutting wrote:

> David Spencer wrote:
> 
>> [1] The user enters a query like:
>>     recursize descent parser
>>
>> [2] The search code parses this and sees that the 1st word is not a
>> term in the index, but the next 2 are. So it ignores the last 2 terms

>> ("recursive" and "descent") and suggests alternatives to 
>> "recursize"...thus if any term is in the index, regardless of 
>> frequency,  it is left as-is.
>>
>> I guess you're saying that, if the user enters a term that appears in
>> the index and thus is sort of spelled correctly ( as it exists in
some 
>> doc), then we use the heuristic that any sufficiently large doc 
>> collection will have tons of misspellings, so we assume that rare 
>> terms in the query might be misspelled (i.e. not what the user 
>> intended) and we suggest alternativies to these words too (in
addition 
>> to the words in the query that are not in the index at all).
> 
> 
> Almost.
> 
> If the user enters "a recursize purser", then: "a", which is in, say,
>  >50% of the documents, is probably spelled correctly and "recursize",

> which is in zero documents, is probably mispelled.  But what about 
> "purser"?  If we run the spell check algorithm on "purser" and
generate 
> "parser", should we show it to the user?  If "purser" occurs in 1% of 
> documents and "parser" occurs in 5%, then we probably should, since 
> "parser" is a more common word than "purser".  But if "parser" only 
> occurs in 1% of the documents and purser occurs in 5%, then we
probably 
> shouldn't bother suggesting "parser".
> 
> If you wanted to get really fancy then you could check how frequently
> combinations of query terms occur, i.e., does "purser" or "parser"
occur 
> more frequently near "descent".  But that gets expensive.

I updated the code to have an optional popularity filter - if true then 
it only returns matches more popular (frequent) than the word that is 
passed in for spelling correction.

If true (default) then for common words like "remove", no results are 
returned now, as expected:

http://www.searchmorph.com/kat/spell.jsp?s=remove

But if you set it to false (bottom slot in the form at the bottom of the

page) then the algorithm happily looks for alternatives:

http://www.searchmorph.com/kat/spell.jsp?s=remove&min=2&max=5&maxd=5&max
r=10&bstart=2.0&bend=1.0&btranspose=1.0&popular=0

TBD I need to update the javadoc & repost the code I guess. Also as per 
earlier post I also store simple transpositions for words in the 
ngram-index.

-- Dave

> 
> Doug
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10280-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 16 06:57:52 2004
Return-Path: <lucene-user-return-10280-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 18986 invoked from network); 16 Sep 2004 06:57:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Sep 2004 06:57:51 -0000
Received: (qmail 66198 invoked by uid 500); 16 Sep 2004 06:57:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 66099 invoked by uid 500); 16 Sep 2004 06:57:40 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 66071 invoked by uid 99); 16 Sep 2004 06:57:39 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 15 Sep 2004 23:57:37 -0700
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id I44DMF00.V76 for <lucene-user@jakarta.apache.org>; Thu,
          16 Sep 2004 11:21:51 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "LUCENE" <lucene-user@jakarta.apache.org>
Subject: LUCENE + PHP ???
Date: Wed, 15 Sep 2004 23:15:08 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIMEACCCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N



Hi
  Erik , Doug , Otis


Apologies........


I have  2 Questions for the Lucene Authors


1) Is a there a PHP version of Lucene Implemantation avaliable , If so Where
?

2) Is the Lucene  'Indexed  file format'  an Universal  type ,  If so  can
it be searched  by  other  Lucene implementations

 [ Such as  Indexing is done by Java version of Lucene and Search on the
IndexFile format is done by  Plucene ]


   A simple Equivalent Example is the RDBMS Typos , where in  INSERT done on
a specific Table by VB based  Application
   can be SEARCHED  upon by a JDBC  based Query ........ [when the Metatdata
of the table is already known]



Thx in Advance....






      WITH WARM REGARDS
      HAVE A NICE DAY
      [ N.S.KARTHIK]




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10281-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 16 07:38:36 2004
Return-Path: <lucene-user-return-10281-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 49558 invoked from network); 16 Sep 2004 07:38:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Sep 2004 07:38:36 -0000
Received: (qmail 43751 invoked by uid 500); 16 Sep 2004 07:38:21 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 43713 invoked by uid 500); 16 Sep 2004 07:38:20 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 43692 invoked by uid 99); 16 Sep 2004 07:38:20 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.199.119.1] (HELO atlas.ensp.fr) (194.199.119.1)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Sep 2004 00:38:19 -0700
Received: from vesta.ensp.fr ([192.168.119.60]) by atlas with InterScan Messaging Security Suite; Thu, 16 Sep 2004 09:38:13 +0200
Received: from DMENARD (dmenard.bdsp.tm.fr [192.168.13.100])
	by vesta.ensp.fr (8.9.3/8.9.3/Debian 8.9.3-21) with SMTP id JAA06621
	for <lucene-user@jakarta.apache.org>; Thu, 16 Sep 2004 09:38:11 +0200
X-Authentication-Warning: vesta.ensp.fr: Host dmenard.bdsp.tm.fr [192.168.13.100] claimed to be DMENARD
Message-ID: <008301c49bc0$4fe7e480$640da8c0@aed.bdsp.tm.fr>
From: =?Windows-1252?Q?Daniel_M=E9nard?= <Daniel.Menard@Bdsp.tm.fr>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <20040915165224.EF81ED7978@sitemail.everyone.net>
Subject: Re: Lucene docs
Date: Thu, 16 Sep 2004 09:39:34 +0200
Organization: =?Windows-1252?Q?Banque_de_Donn=E9es_Sant=E9_Publique?=
MIME-Version: 1.0
Content-Type: text/plain;
	charset="Windows-1252"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I also found these two articles

http://www.onjava.com/pub/a/onjava/2003/01/15/lucene.html
http://www.onjava.com/pub/a/onjava/2003/03/05/lucene.html

from  Otis Gospodnetic very usefull for me.

DM
----- Original Message ----- 
From: "Ian McDonnell" <ian@spinnerscity.com>
To: <lucene-user@jakarta.apache.org>
Sent: Wednesday, September 15, 2004 6:52 PM
Subject: Lucene docs


> What is the best resource for beginners looking to understand Lucenes
functionality, ie its use of fields, documents, the index reader and writer
etc.
>
> is there any web resource that goes into details on the exact workings of
it?
>
> Ian
>
> _____________________________________________________________
> Sign up for FREE email from SpinnersCity Online Dance Magazine & Vortal at
http://www.spinnerscity.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10282-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 16 09:40:26 2004
Return-Path: <lucene-user-return-10282-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 12933 invoked from network); 16 Sep 2004 09:40:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Sep 2004 09:40:25 -0000
Received: (qmail 97012 invoked by uid 500); 16 Sep 2004 09:40:15 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 96936 invoked by uid 500); 16 Sep 2004 09:40:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 96922 invoked by uid 99); 16 Sep 2004 09:40:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [62.253.200.58] (HELO val-mailmarshal.valinf.com) (62.253.200.58)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Sep 2004 02:40:13 -0700
Message-ID: <566BCFC0EFBAAC40AF3EF4CA8228AD539E8D32@www.valinf.com>
From: Paul Williams <paul@valinf.com>
To: 'Lucene Users List' <lucene-user@jakarta.apache.org>
Subject: problem with locks when updating the data of a previous stored do
	cument
Date: Thu, 16 Sep 2004 10:39:26 +0100
MIME-Version: 1.0
Content-Type: text/plain
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

Using lucene-1.4.1.jar on WinXP  

I am having trouble with locking and updating an existing Lucene document. I
delete the old document from the index and then add the new document to the
index writer. I am using the minMerge docs set to 100 (much quicker!!) and
close the writer once the batch is done, so the documents are flushed to the
filesystem

The problem i am having is I can't delete the old version of the document
(after the first document has been added) using reader.delete because there
is a lock on the index due to the IndexWriter being open.

Am I doing this wrong or is there a simple way round this?

Regards,

Paul


Code snippets of the update code (I have just cut and pasted the relevant
line from my app to get an idea)


    reader = IndexReader.open(location);
    // Delete old doc/term if present
    if (reader.docFreq(docNumberTerm) > 0) {
	    reader.delete(docNumberTerm);
    .
    .
    .

    IndexWriter writer = null;

    // get the writer from the hash table so last few are cached and don't
have to be restarted
    synchronized(IndexWriterCache) {

           String dbstring = "" + ldb;
           writer = (IndexWriter)IndexWriterCache.get(dbstring);

           if (writer == null) {
           //Not in cache so create one and add to cache for next time

               writer = new IndexWriter(location, new StandardAnalyzer(),
new_index);

               writer.setUseCompoundFile(true);

               // Set the maximum number of entries per field. Default is
10,000
               writer.maxFieldLength = MaxFieldCount;

               // Set how many docs will be stored in memory before being
saved to disk
               writer.minMergeDocs = (int) DocsInMemory;

               IndexWriterCache.remove(dbstring);
               IndexWriterCache.put(dbstring, writer);
            }
        .
        .
        .
  
        // Add the docuents to the Lucene index
        writer.addDocument(doc);




        .
        . Some time later after a batch of docs been added
     
	   writer.close();



	


****************************************************************************
DISCLAIMER:

The information in this message is confidential and may be legally
privileged. It is intended solely for the addressee. Access to this message
by anyone else is unauthorised. If you are not the intended recipient, any
disclosure, copying, or distribution of the message, or any action or
omission taken by you in reliance on it, is prohibited and may be unlawful.
Please immediately contact the sender if you have received this message in
error.

Thank you.

Valid Information Systems Limited. Address: Morline House, 160 London Road,
Barking, Essex, IG11 8BB. 

http://www.valinf.com Tel: +44 (0) 20 8215 1414 Fax: +44 (0) 20 8215 2040

Please note that as part of our drive to continually improve the service to
our clients, we have established a dedicated support line for customers to 
call if they are in need of help with their installation of R/KYV or have a
query regarding the operation of the software. The number is - 0870 0161414
This will ensure any call is carefully noted, any action required is 
scheduled for completion and any problem experienced handled by a carefully
chosen team of developers. Please make a note of this number and pass it 
on to any other relevant person within your organisation.
 
*****************************************************************************

------------------------------------------------------------------------------------------------------
Visit Valid who will sharing a stand with partners, Goss Interactive at the

SOCITM Event, 10- 12 October 2004, Edinburgh International Conference Centre (EICC), Stand 26 & 26P-.  
Booking available online: www.socitm.gov.uk
------------------------------------------------------------------------------------------------------

#####################################################################################
This e-mail message has been scanned for Viruses and Content and cleared 
by NetIQ MailMarshal
#####################################################################################

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10283-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 16 11:04:12 2004
Return-Path: <lucene-user-return-10283-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 46670 invoked from network); 16 Sep 2004 11:04:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Sep 2004 11:04:12 -0000
Received: (qmail 86706 invoked by uid 500); 16 Sep 2004 11:04:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 86667 invoked by uid 500); 16 Sep 2004 11:04:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 86648 invoked by uid 99); 16 Sep 2004 11:04:02 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Sep 2004 04:04:00 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id 35A2223BE7
	for <lucene-user@jakarta.apache.org>; Thu, 16 Sep 2004 13:05:34 +0200 (CEST)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 02975-10 for <lucene-user@jakarta.apache.org>;
 Thu, 16 Sep 2004 13:05:34 +0200 (CEST)
Received: from tucholsky.office.tanto.de (unknown [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP id F0CAF23BE4
	for <lucene-user@jakarta.apache.org>; Thu, 16 Sep 2004 13:05:33 +0200 (CEST)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id i8GB3vGL031536
	for <lucene-user@jakarta.apache.org>; Thu, 16 Sep 2004 13:03:57 +0200
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id i8GB3vYs031532;
	Thu, 16 Sep 2004 13:03:57 +0200
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16713.29469.681941.837315@tanto-xipolis.de>
Date: Thu, 16 Sep 2004 13:03:57 +0200
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: NGramSpeller contribution -- Re: combining open office spellchecker
 with Lucene
In-Reply-To: <4147450C.7080206@tropo.com>
References: <000001c49572$72cacc00$0a00a8c0@aadlaptop>
	<41407E48.20401@tropo.com>
	<4140818C.9010305@getopt.org>
	<4147450C.7080206@tropo.com>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi David,
> 
> Based on this mail I wrote a "ngram speller" for Lucene. It runs in 2 
> phases. First you build a "fast lookup index" as mentioned above. Then 
> to correct a word you do a query in this index based on the ngrams in 
> the misspelled word.
> 
> Let's see.
> 
> [1] Source is attached and I'd like to contribute it to the sandbox, esp 
> if someone can validate that what it's doing is reasonable and useful.
> 
great :-)
> 
> [4] Here's source in HTML:
> 
> http://www.searchmorph.com/pub/ngramspeller/src-html/org/apache/lucene/spell/NGramSpeller.html#line.152
> 
could you put the current version of your code on that website as a java
source also? At least until it's in the lucene sandbox.


I created an ngram index on one of my indexes and think I found an issue
in the indexing code:

There is an option -f to specify the field on which the ngram index will
be created. 
However there is no code to restrict the term enumeration on this field.

So instead of 
		final TermEnum te = r.terms();
i'd suggest
		final TermEnum te = r.terms(new Term(field, ""));
and a check within the loop over the terms if the enumerated term
still has fieldname field, e.g.
			Term t = te.term();
			if ( !t.field().equals(field) ) {
			    break;
			}

otherwise you loop over all terms in all fields.


An interesting application of this might be an ngram-Index enhanced version
of the FuzzyQuery. While this introduces more complexity on the indexing
side, it might be a large speedup for fuzzy searches.

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10284-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 16 11:18:52 2004
Return-Path: <lucene-user-return-10284-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 53088 invoked from network); 16 Sep 2004 11:18:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Sep 2004 11:18:52 -0000
Received: (qmail 12738 invoked by uid 500); 16 Sep 2004 11:18:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 12656 invoked by uid 500); 16 Sep 2004 11:18:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 12640 invoked by uid 99); 16 Sep 2004 11:18:41 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_60_70,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [68.230.240.32] (HELO lakermmtao07.cox.net) (68.230.240.32)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Sep 2004 04:18:40 -0700
Received: from POWERPACK ([68.100.190.210]) by lakermmtao07.cox.net
          (InterMail vM.6.01.03.04 201-2131-111-106-20040729) with SMTP
          id <20040916111837.NQSA8339.lakermmtao07.cox.net@POWERPACK>
          for <lucene-user@jakarta.apache.org>;
          Thu, 16 Sep 2004 07:18:37 -0400
Message-ID: <034c01c49bde$eb0513c0$1402a8c0@POWERPACK>
From: "Terry Steichen" <terry@net-frame.com>
To: "Lucene Users Group" <lucene-user@jakarta.apache.org>
References: <s1488811.001@gwia201.syr.edu> <41495658.7040209@detego-software.de>
Subject: Re: Term highlighting and Term vector patch
Date: Thu, 16 Sep 2004 07:18:38 -0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0349_01C49BBD.633A8400"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0349_01C49BBD.633A8400
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Christoph,

Just curious - how are you currently using Term Vectors?  They seem to =
be a neat feature with lots of future promise, but I'm not sure how to =
best use them now.

Regards,

Terry
  ----- Original Message -----=20
  From: Christoph Goller=20
  To: Lucene Developers List=20
  Sent: Thursday, September 16, 2004 5:01 AM
  Subject: Re: Term highlighting and Term vector patch


  Hi Grant,

  I try to look into your latest code by the end of September but I =
probably
  won't find time earlier. I am using the current TermVectors very =
successfully.
  Thanks for the excellent code.


------=_NextPart_000_0349_01C49BBD.633A8400--


From lucene-user-return-10285-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 16 11:53:17 2004
Return-Path: <lucene-user-return-10285-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 66999 invoked from network); 16 Sep 2004 11:53:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Sep 2004 11:53:17 -0000
Received: (qmail 55169 invoked by uid 500); 16 Sep 2004 11:53:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 55125 invoked by uid 500); 16 Sep 2004 11:53:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 55107 invoked by uid 99); 16 Sep 2004 11:53:03 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.50.92.242] (HELO exch1.colmol.com) (64.50.92.242)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Sep 2004 04:53:02 -0700
Received: from ASSP-nospam ([192.168.1.204]) by exch1.colmol.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Thu, 16 Sep 2004 07:52:59 -0400
Received: from 192.168.1.205 ([192.168.1.205] helo=exch1.colmol.com) by
  ASSP-nospam ; 16 Sep 04 11:52:59 -0000
X-MimeOLE: Produced By Microsoft Exchange V6.0.6556.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C49BE3.B62BCEBE"
Subject: RE: problem with locks when updating the data of a previous stored document
Date: Thu, 16 Sep 2004 07:52:58 -0400
Message-ID: <B1FD64AF10DAED4786DC31F17B1C388492EFDB@exch1.colmol.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <B1FD64AF10DAED4786DC31F17B1C388492EFDB@exch1.colmol.com>
Thread-Topic: problem with locks when updating the data of a previous stored document
Thread-Index: AcSb0S0i7CWR7f39TLisuerQnEkY9AAEfx8T
From: "Crump, Michael" <mcrump@leadscope.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-OriginalArrivalTime: 16 Sep 2004 11:52:59.0301 (UTC) FILETIME=[B6628D50:01C49BE3]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C49BE3.B62BCEBE
Content-Type: text/plain;
	charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable

You have to close the IndexReader after doing the delete, before opening =
the IndexWriter for the addition.  See information at this link:

http://wiki.apache.org/jakarta-lucene/UpdatingAnIndex

Regards,

Michael


-----Original Message-----
From:	Paul Williams [mailto:paul@valinf.com]
Sent:	Thu 9/16/2004 5:39 AM
To:	'Lucene Users List'
Cc:=09
Subject:	problem with locks when updating the data of a previous stored =
document
Hi,

Using lucene-1.4.1.jar on WinXP =20

I am having trouble with locking and updating an existing Lucene =
document. I
delete the old document from the index and then add the new document to =
the
index writer. I am using the minMerge docs set to 100 (much quicker!!) =
and
close the writer once the batch is done, so the documents are flushed to =
the
filesystem

The problem i am having is I can't delete the old version of the =
document
(after the first document has been added) using reader.delete because =
there
is a lock on the index due to the IndexWriter being open.

Am I doing this wrong or is there a simple way round this?

Regards,

Paul


Code snippets of the update code (I have just cut and pasted the =
relevant
line from my app to get an idea)


    reader =3D IndexReader.open(location);
    // Delete old doc/term if present
    if (reader.docFreq(docNumberTerm) > 0) {
	    reader.delete(docNumberTerm);
    .
    .
    .

    IndexWriter writer =3D null;

    // get the writer from the hash table so last few are cached and =
don't
have to be restarted
    synchronized(IndexWriterCache) {

           String dbstring =3D "" + ldb;
           writer =3D (IndexWriter)IndexWriterCache.get(dbstring);

           if (writer =3D=3D null) {
           //Not in cache so create one and add to cache for next time

               writer =3D new IndexWriter(location, new =
StandardAnalyzer(),
new_index);

               writer.setUseCompoundFile(true);

               // Set the maximum number of entries per field. Default =
is
10,000
               writer.maxFieldLength =3D MaxFieldCount;

               // Set how many docs will be stored in memory before =
being
saved to disk
               writer.minMergeDocs =3D (int) DocsInMemory;

               IndexWriterCache.remove(dbstring);
               IndexWriterCache.put(dbstring, writer);
            }
        .
        .
        .
 =20
        // Add the docuents to the Lucene index
        writer.addDocument(doc);




        .
        . Some time later after a batch of docs been added
    =20
	   writer.close();



=09


*************************************************************************=
***
DISCLAIMER:

The information in this message is confidential and may be legally
privileged. It is intended solely for the addressee. Access to this =
message
by anyone else is unauthorised. If you are not the intended recipient, =
any
disclosure, copying, or distribution of the message, or any action or
omission taken by you in reliance on it, is prohibited and may be =
unlawful.
Please immediately contact the sender if you have received this message =
in
error.

Thank you.

Valid Information Systems Limited. Address: Morline House, 160 London =
Road,
Barking, Essex, IG11 8BB.=20

http://www.valinf.com Tel: +44 (0) 20 8215 1414 Fax: +44 (0) 20 8215 =
2040

Please note that as part of our drive to continually improve the service =
to
our clients, we have established a dedicated support line for customers =
to=20
call if they are in need of help with their installation of R/KYV or =
have a
query regarding the operation of the software. The number is - 0870 =
0161414
This will ensure any call is carefully noted, any action required is=20
scheduled for completion and any problem experienced handled by a =
carefully
chosen team of developers. Please make a note of this number and pass it =

on to any other relevant person within your organisation.
=20
*************************************************************************=
****

-------------------------------------------------------------------------=
-----------------------------
Visit Valid who will sharing a stand with partners, Goss Interactive at =
the

SOCITM Event, 10- 12 October 2004, Edinburgh International Conference =
Centre (EICC), Stand 26 & 26P-. =20
Booking available online: www.socitm.gov.uk
-------------------------------------------------------------------------=
-----------------------------

#########################################################################=
############
This e-mail message has been scanned for Viruses and Content and cleared =

by NetIQ MailMarshal
#########################################################################=
############

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org






------_=_NextPart_001_01C49BE3.B62BCEBE
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
------_=_NextPart_001_01C49BE3.B62BCEBE--

From lucene-user-return-10286-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 16 14:05:29 2004
Return-Path: <lucene-user-return-10286-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 43868 invoked from network); 16 Sep 2004 14:05:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Sep 2004 14:05:29 -0000
Received: (qmail 2291 invoked by uid 500); 16 Sep 2004 14:05:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 2176 invoked by uid 500); 16 Sep 2004 14:05:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 2041 invoked by uid 99); 16 Sep 2004 14:04:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [200.61.168.200] (HELO gandalf.xlnet.net.ar) (200.61.168.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Sep 2004 07:04:59 -0700
Received: from exchange.xlnet.net.ar (10.0.0.3) by gandalf.xlnet.net.ar (NPlex 5.1.036)
        id 4142203000019D81 for lucene-user@jakarta.apache.org; Thu, 16 Sep 2004 11:07:07 -0300
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: SortField[] in search method (newbie)
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Date: Thu, 16 Sep 2004 11:06:56 -0300
Message-ID: <DDD3F807D283B543B3396F7E00A2C7E125F344@exchange.xlnet.net.ar>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: SortField[] in search method (newbie)
Thread-Index: AcSbUCsk7oxvtLrsRn+6vXIUe+NDaQAnTxoQ
From: "Wermus Fernando" <fernando.wermus@xlnet.net.ar>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Why can I search fields that aren't indexed without any problem, but if =
I ask for ordering by one of these fields, I got a runtime exception?

I can't understand this behavior. I mean if I don't have any document =
indexed with these fields, why can I search by these fields and I can't =
ask for ordering by one of them?
At the beginning I don't have any document at all, and I will need to =
order anyway, because I don't know that.

Thanks.



-----Mensaje original-----
De: Praveen Peddi [mailto:ppeddi@contextmedia.com]=20
Enviado el: Mi=E9rcoles, 15 de Septiembre de 2004 03:13 p.m.
Para: Lucene Users List
Asunto: Re: problem with SortField[] in search method (newbie)

Does it mean you indexed all "not null" fields?. I think you should =
change
your code so that you always index the fields you want to sort.

In any case, it looks like some of your documents have shortName not =
null
and not indexed. If you do not have any non-indexed shotnames in the =
index,
I don't think u would have got that error. But I may be wrong.

Praveen

----- Original Message -----=20
From: "Wermus Fernando" <fernando.wermus@xlnet.net.ar>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Wednesday, September 15, 2004 1:53 PM
Subject: RE: problem with SortField[] in search method (newbie)


Aviran,
I can search in not indexed fields without any exception, but I can't =
order
by the same fields.
Besides,  I can't know in advance if they are indexed in my app, because =
I
index those fields that have some value, if it doesn't I don't add it to =
the
document.

What if I don't have any document indexed?



-----Mensaje original-----
De: Aviran [mailto:amordo@infosciences.com]
Enviado el: Mi=E9rcoles, 15 de Septiembre de 2004 02:35 p.m.
Para: 'Lucene Users List'
Asunto: RE: problem with SortField[] in search method (newbie)

You can only sort on indexed field. (even more than that, it'll work
properly only on Untokenized fields, ie keyword).

Aviran

-----Original Message-----
From: Wermus Fernando [mailto:fernando.wermus@xlnet.net.ar]
Sent: Wednesday, September 15, 2004 13:13 PM
To: lucene-user@jakarta.apache.org
Subject: problem with SortField[] in search method (newbie)


Luceners,
My search looks up the whole entities. My entities are accounts, =
contacts,
tasks, etc. My searching looks up a group of entity's fields. This works
fine despite, I don't have indexed any entity in a document. But If I =
sort
by some fields from different entities, I get the following error.

field "shortName" does not appear to be indexed

The account's field I have indexed are

shortName,number,location,fax,phone,symbol

and I order by

shortName
----------------------------------------------------
without  any order

shortName,number,location,fax,phone,symbol

it works fine.
----
I don't understand the behavior because If I don't order the searching =
and I
don't have any document indexed, It works fine, but If I add an order I =
get
a runtimeException and I can't catch the exception  to solve the =
problem.
The only solution it's to index the whole fields' entitities once in a
document, but for me it's a patch.

Any idea,  it could help me out.

Thanks in advance.



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10287-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 16 15:04:43 2004
Return-Path: <lucene-user-return-10287-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 80135 invoked from network); 16 Sep 2004 15:04:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Sep 2004 15:04:42 -0000
Received: (qmail 40600 invoked by uid 500); 16 Sep 2004 15:03:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 40435 invoked by uid 500); 16 Sep 2004 15:03:39 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 40345 invoked by uid 99); 16 Sep 2004 15:03:36 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [200.61.168.200] (HELO gandalf.xlnet.net.ar) (200.61.168.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Sep 2004 08:03:34 -0700
Received: from exchange.xlnet.net.ar (10.0.0.3) by gandalf.xlnet.net.ar (NPlex 5.1.036)
        id 414220300001A538 for lucene-user@jakarta.apache.org; Thu, 16 Sep 2004 12:05:46 -0300
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: SortField[] solved. Warning
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Date: Thu, 16 Sep 2004 12:05:46 -0300
Message-ID: <DDD3F807D283B543B3396F7E00A2C7E125F345@exchange.xlnet.net.ar>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: SortField[] solved. Warning
Thread-Index: AcSbUCsk7oxvtLrsRn+6vXIUe+NDaQAnTxoQAAQo1eA=
From: "Wermus Fernando" <fernando.wermus@xlnet.net.ar>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Luceners,
	I can order without having any document indexed. The problem was that I =
make an instance of Sort(String name) instead of Sort(String name, int =
type).
According to the api, Sort(String name) will automatically detect the =
type of the field. But It couldn't detect a field type String and then =
throw me a runtime exception. The error message said

field "shortName" does not appear to be indexed

and I thought I couldn't look up not indexed fields.

This only happened to me when it wasn't any document at all indexed. But =
if it was at least one document indexed, this exception doesn't appear.

I think that it should show a message like

It couldn't detect the field type=20

Or something like this, because it was very confusing to me the message =
error.



-----Mensaje original-----
De: Wermus Fernando [mailto:fernando.wermus@xlnet.net.ar]=20
Enviado el: Jueves, 16 de Septiembre de 2004 11:07 a.m.
Para: Lucene Users List
Asunto: SortField[] in search method (newbie)

Why can I search fields that aren't indexed without any problem, but if =
I ask for ordering by one of these fields, I got a runtime exception?

I can't understand this behavior. I mean if I don't have any document =
indexed with these fields, why can I search by these fields and I can't =
ask for ordering by one of them?
At the beginning I don't have any document at all, and I will need to =
order anyway, because I don't know that.

Thanks.



-----Mensaje original-----
De: Praveen Peddi [mailto:ppeddi@contextmedia.com]=20
Enviado el: Mi=E9rcoles, 15 de Septiembre de 2004 03:13 p.m.
Para: Lucene Users List
Asunto: Re: problem with SortField[] in search method (newbie)

Does it mean you indexed all "not null" fields?. I think you should =
change
your code so that you always index the fields you want to sort.

In any case, it looks like some of your documents have shortName not =
null
and not indexed. If you do not have any non-indexed shotnames in the =
index,
I don't think u would have got that error. But I may be wrong.

Praveen

----- Original Message -----=20
From: "Wermus Fernando" <fernando.wermus@xlnet.net.ar>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Wednesday, September 15, 2004 1:53 PM
Subject: RE: problem with SortField[] in search method (newbie)


Aviran,
I can search in not indexed fields without any exception, but I can't =
order
by the same fields.
Besides,  I can't know in advance if they are indexed in my app, because =
I
index those fields that have some value, if it doesn't I don't add it to =
the
document.

What if I don't have any document indexed?



-----Mensaje original-----
De: Aviran [mailto:amordo@infosciences.com]
Enviado el: Mi=E9rcoles, 15 de Septiembre de 2004 02:35 p.m.
Para: 'Lucene Users List'
Asunto: RE: problem with SortField[] in search method (newbie)

You can only sort on indexed field. (even more than that, it'll work
properly only on Untokenized fields, ie keyword).

Aviran

-----Original Message-----
From: Wermus Fernando [mailto:fernando.wermus@xlnet.net.ar]
Sent: Wednesday, September 15, 2004 13:13 PM
To: lucene-user@jakarta.apache.org
Subject: problem with SortField[] in search method (newbie)


Luceners,
My search looks up the whole entities. My entities are accounts, =
contacts,
tasks, etc. My searching looks up a group of entity's fields. This works
fine despite, I don't have indexed any entity in a document. But If I =
sort
by some fields from different entities, I get the following error.

field "shortName" does not appear to be indexed

The account's field I have indexed are

shortName,number,location,fax,phone,symbol

and I order by

shortName
----------------------------------------------------
without  any order

shortName,number,location,fax,phone,symbol

it works fine.
----
I don't understand the behavior because If I don't order the searching =
and I
don't have any document indexed, It works fine, but If I add an order I =
get
a runtimeException and I can't catch the exception  to solve the =
problem.
The only solution it's to index the whole fields' entitities once in a
document, but for me it's a patch.

Any idea,  it could help me out.

Thanks in advance.



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10288-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 16 16:02:35 2004
Return-Path: <lucene-user-return-10288-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 9156 invoked from network); 16 Sep 2004 16:02:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Sep 2004 16:02:35 -0000
Received: (qmail 86716 invoked by uid 500); 16 Sep 2004 16:02:22 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 86598 invoked by uid 500); 16 Sep 2004 16:02:21 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 86579 invoked by uid 99); 16 Sep 2004 16:02:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Sep 2004 09:02:19 -0700
Received: (qmail 25613 invoked by uid 532); 16 Sep 2004 15:59:41 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.439099 secs); 16 Sep 2004 15:59:41 -0000
Received: from unknown (HELO tropo.com) (127.0.0.1)
  by 0 with SMTP; 16 Sep 2004 15:59:41 -0000
Message-ID: <4149B908.9020308@tropo.com>
Date: Thu, 16 Sep 2004 09:02:16 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7b) Gecko/20040316
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: IndexReader.close() semantics and optimize -- Re: problem with locks
 when updating the data of a previous stored document
References: <B1FD64AF10DAED4786DC31F17B1C388492EFDB@exch1.colmol.com>
In-Reply-To: <B1FD64AF10DAED4786DC31F17B1C388492EFDB@exch1.colmol.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Crump, Michael wrote:

> You have to close the IndexReader after doing the delete, before opening the IndexWriter for the addition.  See information at this link:
> 
> http://wiki.apache.org/jakarta-lucene/UpdatingAnIndex

Recently I thought I observed that if I use this batch update idiom (1st 
delete the changed docs, then add them), it seems that 
IndexReader.close() does not flush/commit the deletions - rather 
IndexWriter.optimize() does.

I may have been confused and should retest this, but regardless, the 
javadoc seems unclear. close() says it "*saves* deletions to disk". What 
does it mean to save a deletion? Save a pending one, or commit it 
(commit -> really delete it)?

http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/index/IndexReader.html#close()

Also optimize doesn't mention deletions.

http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/index/IndexWriter.html#optimize()

Suggestion: could the word "save" in the close() jdoc be elaborated on, 
and possibly could optimize() get another comment wrt its effect on 
deletions?

thx,
  Dave


> 
> Regards,
> 
> Michael
> 
> 
> -----Original Message-----
> From:	Paul Williams [mailto:paul@valinf.com]
> Sent:	Thu 9/16/2004 5:39 AM
> To:	'Lucene Users List'
> Cc:	
> Subject:	problem with locks when updating the data of a previous stored document
> Hi,
> 
> Using lucene-1.4.1.jar on WinXP  
> 
> I am having trouble with locking and updating an existing Lucene document. I
> delete the old document from the index and then add the new document to the
> index writer. I am using the minMerge docs set to 100 (much quicker!!) and
> close the writer once the batch is done, so the documents are flushed to the
> filesystem
> 
> The problem i am having is I can't delete the old version of the document
> (after the first document has been added) using reader.delete because there
> is a lock on the index due to the IndexWriter being open.
> 
> Am I doing this wrong or is there a simple way round this?
> 
> Regards,
> 
> Paul
> 
> 
> Code snippets of the update code (I have just cut and pasted the relevant
> line from my app to get an idea)
> 
> 
>     reader = IndexReader.open(location);
>     // Delete old doc/term if present
>     if (reader.docFreq(docNumberTerm) > 0) {
> 	    reader.delete(docNumberTerm);
>     .
>     .
>     .
> 
>     IndexWriter writer = null;
> 
>     // get the writer from the hash table so last few are cached and don't
> have to be restarted
>     synchronized(IndexWriterCache) {
> 
>            String dbstring = "" + ldb;
>            writer = (IndexWriter)IndexWriterCache.get(dbstring);
> 
>            if (writer == null) {
>            //Not in cache so create one and add to cache for next time
> 
>                writer = new IndexWriter(location, new StandardAnalyzer(),
> new_index);
> 
>                writer.setUseCompoundFile(true);
> 
>                // Set the maximum number of entries per field. Default is
> 10,000
>                writer.maxFieldLength = MaxFieldCount;
> 
>                // Set how many docs will be stored in memory before being
> saved to disk
>                writer.minMergeDocs = (int) DocsInMemory;
> 
>                IndexWriterCache.remove(dbstring);
>                IndexWriterCache.put(dbstring, writer);
>             }
>         .
>         .
>         .
>   
>         // Add the docuents to the Lucene index
>         writer.addDocument(doc);
> 
> 
> 
> 
>         .
>         . Some time later after a batch of docs been added
>      
> 	   writer.close();
> 
> 
> 
> 	
> 
> 
> ****************************************************************************
> DISCLAIMER:
> 
> The information in this message is confidential and may be legally
> privileged. It is intended solely for the addressee. Access to this message
> by anyone else is unauthorised. If you are not the intended recipient, any
> disclosure, copying, or distribution of the message, or any action or
> omission taken by you in reliance on it, is prohibited and may be unlawful.
> Please immediately contact the sender if you have received this message in
> error.
> 
> Thank you.
> 
> Valid Information Systems Limited. Address: Morline House, 160 London Road,
> Barking, Essex, IG11 8BB. 
> 
> http://www.valinf.com Tel: +44 (0) 20 8215 1414 Fax: +44 (0) 20 8215 2040
> 
> Please note that as part of our drive to continually improve the service to
> our clients, we have established a dedicated support line for customers to 
> call if they are in need of help with their installation of R/KYV or have a
> query regarding the operation of the software. The number is - 0870 0161414
> This will ensure any call is carefully noted, any action required is 
> scheduled for completion and any problem experienced handled by a carefully
> chosen team of developers. Please make a note of this number and pass it 
> on to any other relevant person within your organisation.
>  
> *****************************************************************************
> 
> ------------------------------------------------------------------------------------------------------
> Visit Valid who will sharing a stand with partners, Goss Interactive at the
> 
> SOCITM Event, 10- 12 October 2004, Edinburgh International Conference Centre (EICC), Stand 26 & 26P-.  
> Booking available online: www.socitm.gov.uk
> ------------------------------------------------------------------------------------------------------
> 
> #####################################################################################
> This e-mail message has been scanned for Viruses and Content and cleared 
> by NetIQ MailMarshal
> #####################################################################################
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 
> 
> 
> 
> 
> 
> ------------------------------------------------------------------------
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10289-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 16 17:35:04 2004
Return-Path: <lucene-user-return-10289-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 57192 invoked from network); 16 Sep 2004 17:35:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Sep 2004 17:35:04 -0000
Received: (qmail 44169 invoked by uid 500); 16 Sep 2004 17:34:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 44090 invoked by uid 500); 16 Sep 2004 17:34:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 44077 invoked by uid 99); 16 Sep 2004 17:34:56 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [209.167.138.140] (HELO tango.casebank.com) (209.167.138.140)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Sep 2004 10:34:54 -0700
Received: from plitvak ([172.17.200.95]) by tango.casebank.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Thu, 16 Sep 2004 13:34:37 -0400
From: "Polina Litvak" <plitvak@casebank.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: QueryParser.parse() and Lucene1.4.1
Date: Thu, 16 Sep 2004 13:38:17 -0400
Message-ID: <005c01c49c13$f3a51310$5fc811ac@plitvak>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2616
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
Importance: Normal
In-Reply-To: <200409152307.22873@danielnaber.de>
X-OriginalArrivalTime: 16 Sep 2004 17:34:37.0125 (UTC) FILETIME=[700A4750:01C49C13]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Daniel,

I just downloaded the latest version of Lucene and tried the whole thing
again: I ran my code first with lucene-1.3-final.jar, getting the query
Field:(A AND -(B)) parsed into +Field:A -Field:B, and then I ran exactly
the same code with lucene-1.4.1.jar and got the output parsed into
Field:A Field:- Field:B.

I also read Lucene's documentation (http://cvs.apache.org/viewcvs.cgi/*
checkout*/jakarta-lucene/CHANGES.txt?rev=1.85), and it does mention a
change to the "+" and "-" operators:

    13. Changed QueryParser.jj to allow '-' and '+' within tokens:
    http://issues.apache.org/bugzilla/show_bug.cgi?id=27491
    (Morus Walter via Otis)


So is this behaviour a bug, or Lucene1.4 is not backwards compatible?


Polina


-----Original Message-----
From: Daniel Naber [mailto:daniel.naber@t-online.de] 
Sent: September 15, 2004 5:07 PM
To: Lucene Users List
Subject: Re: QueryParser.parse() and Lucene1.4.1

On Wednesday 15 September 2004 21:58, Polina Litvak wrote:

> Does anyone know how to work around this new feature ?

I can't remember any changes in this area, but I just tried with the 
current version from CVS and the output is the one which you want.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10290-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 16 18:32:59 2004
Return-Path: <lucene-user-return-10290-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 90597 invoked from network); 16 Sep 2004 18:32:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Sep 2004 18:32:59 -0000
Received: (qmail 52837 invoked by uid 500); 16 Sep 2004 18:32:52 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 52748 invoked by uid 500); 16 Sep 2004 18:32:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 52734 invoked by uid 99); 16 Sep 2004 18:32:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [205.158.62.197] (HELO ws6-2.us4.outblaze.com) (205.158.62.197)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 16 Sep 2004 11:32:49 -0700
Received: (qmail 24123 invoked from network); 16 Sep 2004 18:32:37 -0000
Received: from unknown (HELO ?10.50.112.32?) (erik@hatcher.net@63.164.145.33)
  by ws6-2.us4.outblaze.com with SMTP; 16 Sep 2004 18:32:37 -0000
Mime-Version: 1.0 (Apple Message framework v619)
Content-Transfer-Encoding: 7bit
Message-Id: <CE26D120-080E-11D9-A9B7-000393A564E6@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: Lucene User <lucene-user@jakarta.apache.org>
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: LUCENE + PHP ???
Date: Thu, 16 Sep 2004 14:32:46 -0400
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Sep 15, 2004, at 1:45 PM, Karthik N S wrote:
> Hi
>   Erik , Doug , Otis

This is general forum - no need to address individuals.

> 1) Is a there a PHP version of Lucene Implemantation avaliable , If so 
> Where
> ?

Using the Java version of Lucene from PHP is my recommendation.  There 
is not a PHP version.  I'm not familiar with PHP details, but I suspect 
you can very easily use the Java version somehow.

> 2) Is the Lucene  'Indexed  file format'  an Universal  type ,  If so  
> can
> it be searched  by  other  Lucene implementations
>
>  [ Such as  Indexing is done by Java version of Lucene and Search on 
> the
> IndexFile format is done by  Plucene ]

Yes - http://jakarta.apache.org/lucene/docs/fileformats.html - there 
are caveats as the Lucene ports are all at varying versions of 
compatibility.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10291-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 16 18:44:40 2004
Return-Path: <lucene-user-return-10291-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 96312 invoked from network); 16 Sep 2004 18:44:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Sep 2004 18:44:40 -0000
Received: (qmail 82090 invoked by uid 500); 16 Sep 2004 18:44:33 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 82031 invoked by uid 500); 16 Sep 2004 18:44:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 82018 invoked by uid 99); 16 Sep 2004 18:44:33 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.25.134.83] (HELO mailout07.sul.t-online.com) (194.25.134.83)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Sep 2004 11:44:30 -0700
Received: from fwd01.aul.t-online.de 
	by mailout07.sul.t-online.com with smtp 
	id 1C81F6-0002eT-00; Thu, 16 Sep 2004 20:44:28 +0200
Received: from p548025DD.dip.t-dialin.net (rPCf-8ZJoejo3XJqrimsYivGYkvTnsubH8-l138+x26Pe4t7Plfwka@[84.128.37.221]) by fmrl01.sul.t-online.com
	with esmtp id 1C81Ew-1nTPEm0; Thu, 16 Sep 2004 20:44:18 +0200
From: Daniel Naber <daniel.naber@t-online.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: QueryParser.parse() and Lucene1.4.1
Date: Thu, 16 Sep 2004 20:47:07 +0200
User-Agent: KMail/1.7
References: <005c01c49c13$f3a51310$5fc811ac@plitvak>
In-Reply-To: <005c01c49c13$f3a51310$5fc811ac@plitvak>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200409162047.08140@danielnaber.de>
X-ID: rPCf-8ZJoejo3XJqrimsYivGYkvTnsubH8-l138+x26Pe4t7Plfwka@t-dialin.net
X-TOI-MSGID: 527a0555-670f-48f8-aae6-740305143f98
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Thursday 16 September 2004 19:38, Polina Litvak wrote:

>  I ran my code first with lucene-1.3-final.jar, getting the query
> Field:(A AND -(B)) parsed into +Field:A -Field:B

This code:
Query query = QueryParser.parse("Field:(AAA AND -(BBB))", "field", new 
StandardAnalyzer());
System.out.println(query);

Will print this with Lucene 1.4.1:
+Field:aaa -Field:bbb

It will not work with "A" instead of "AAA" because "A" is a stopword. In 
other words, I still cannot reproduce your problem.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10292-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 16 18:58:45 2004
Return-Path: <lucene-user-return-10292-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 2026 invoked from network); 16 Sep 2004 18:58:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Sep 2004 18:58:45 -0000
Received: (qmail 5838 invoked by uid 500); 16 Sep 2004 18:58:37 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 5796 invoked by uid 500); 16 Sep 2004 18:58:36 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 5783 invoked by uid 99); 16 Sep 2004 18:58:36 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Sep 2004 11:58:35 -0700
Received: (qmail 583 invoked by uid 532); 16 Sep 2004 18:55:58 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.216675 secs); 16 Sep 2004 18:55:58 -0000
Received: from unknown (HELO tropo.com) (127.0.0.1)
  by 0 with SMTP; 16 Sep 2004 18:55:57 -0000
Message-ID: <4149E258.8030409@tropo.com>
Date: Thu, 16 Sep 2004 11:58:32 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7b) Gecko/20040316
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: NGramSpeller contribution -- Re: combining open office spellchecker
 with Lucene
References: <000001c49572$72cacc00$0a00a8c0@aadlaptop>	<41407E48.20401@tropo.com>	<4140818C.9010305@getopt.org>	<4147450C.7080206@tropo.com> <16713.29469.681941.837315@tanto-xipolis.de>
In-Reply-To: <16713.29469.681941.837315@tanto-xipolis.de>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Morus Walter wrote:

> Hi David,
> 
>>Based on this mail I wrote a "ngram speller" for Lucene. It runs in 2 
>>phases. First you build a "fast lookup index" as mentioned above. Then 
>>to correct a word you do a query in this index based on the ngrams in 
>>the misspelled word.
>>
>>Let's see.
>>
>>[1] Source is attached and I'd like to contribute it to the sandbox, esp 
>>if someone can validate that what it's doing is reasonable and useful.
>>
> 
> great :-)
> 
>>[4] Here's source in HTML:
>>
>>http://www.searchmorph.com/pub/ngramspeller/src-html/org/apache/lucene/spell/NGramSpeller.html#line.152
>>
> 
> could you put the current version of your code on that website as a java

Weblog entry updated:

http://searchmorph.com/weblog/index.php?id=23

To link to source code:

http://www.searchmorph.com/pub/ngramspeller/NGramSpeller.java

> source also? At least until it's in the lucene sandbox.
> 
> 
> I created an ngram index on one of my indexes and think I found an issue
> in the indexing code:
> 
> There is an option -f to specify the field on which the ngram index will
> be created. 
> However there is no code to restrict the term enumeration on this field.
> 
> So instead of 
> 		final TermEnum te = r.terms();
> i'd suggest
> 		final TermEnum te = r.terms(new Term(field, ""));
> and a check within the loop over the terms if the enumerated term
> still has fieldname field, e.g.
> 			Term t = te.term();
> 			if ( !t.field().equals(field) ) {
> 			    break;
> 			}
> 
> otherwise you loop over all terms in all fields.

Great suggestion and thanks for that idiom - I should know such things 
by now. To clarify the "issue", it's just a performance one, not other 
functionality...anyway I put in the code - and to be scientific I 
benchmarked it two times before the change and two times after - and the 
results were suprising the same both times (1:45 to 1:50 with an index 
that takes up > 200MB). Probably there are cases where this will run 
faster, and the code seems more "correct" now so it's in.



> 
> 
> An interesting application of this might be an ngram-Index enhanced version
> of the FuzzyQuery. While this introduces more complexity on the indexing
> side, it might be a large speedup for fuzzy searches.

I also thinking of reviewing the list to see if anyone had done a "Jaro 
Winkler" fuzzy query yet and doing that....

> 


Thanks,
  Dave

> Morus
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10293-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 16 20:21:40 2004
Return-Path: <lucene-user-return-10293-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 49182 invoked from network); 16 Sep 2004 20:21:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Sep 2004 20:21:40 -0000
Received: (qmail 42721 invoked by uid 500); 16 Sep 2004 20:21:33 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 42686 invoked by uid 500); 16 Sep 2004 20:21:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 42673 invoked by uid 99); 16 Sep 2004 20:21:32 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [205.158.62.197] (HELO ws6-2.us4.outblaze.com) (205.158.62.197)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 16 Sep 2004 13:21:31 -0700
Received: (qmail 20142 invoked from network); 16 Sep 2004 20:21:19 -0000
Received: from unknown (HELO ?10.50.112.32?) (erik@hatcher.net@63.164.145.33)
  by ws6-2.us4.outblaze.com with SMTP; 16 Sep 2004 20:21:19 -0000
Mime-Version: 1.0 (Apple Message framework v619)
Content-Transfer-Encoding: 7bit
Message-Id: <FD7BA9DF-081D-11D9-A9B7-000393A564E6@hatcher.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: Lucene User <lucene-user@jakarta.apache.org>
From: Erik Hatcher <erik@hatcher.net>
Subject: Re: PHP and Lucene
Date: Thu, 16 Sep 2004 16:21:28 -0400
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Sep 15, 2004, at 1:45 PM, Karthik N S wrote:
> Hi
>   Erik , Doug , Otis

This is general forum - no need to address individuals.

> 1) Is a there a PHP version of Lucene Implemantation avaliable , If so 
> Where
> ?

Using the Java version of Lucene from PHP is my recommendation.  There 
is not a PHP version.  I'm not familiar with PHP details, but I suspect 
you can very easily use the Java version somehow.

> 2) Is the Lucene  'Indexed  file format'  an Universal  type ,  If so  
> can
> it be searched  by  other  Lucene implementations
>
>  [ Such as  Indexing is done by Java version of Lucene and Search on 
> the
> IndexFile format is done by  Plucene ]

Yes - http://jakarta.apache.org/lucene/docs/fileformats.html - there 
are caveats as the Lucene ports are all at varying versions of 
compatibility.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10294-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 16 20:53:52 2004
Return-Path: <lucene-user-return-10294-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 61976 invoked from network); 16 Sep 2004 20:53:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Sep 2004 20:53:52 -0000
Received: (qmail 91337 invoked by uid 500); 16 Sep 2004 20:53:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 91290 invoked by uid 500); 16 Sep 2004 20:53:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 91274 invoked by uid 99); 16 Sep 2004 20:53:43 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [206.190.38.234] (HELO web51803.mail.yahoo.com) (206.190.38.234)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 16 Sep 2004 13:53:43 -0700
Message-ID: <20040916171942.44348.qmail@web51803.mail.yahoo.com>
Received: from [65.205.199.122] by web51803.mail.yahoo.com via HTTP; Thu, 16 Sep 2004 10:19:42 PDT
Date: Thu, 16 Sep 2004 10:19:42 -0700 (PDT)
From: John Z <zjavier_1@yahoo.com>
Subject: Re: Running OutOfMemory while optimizing and searching
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <40E467B9.8070809@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-2078990075-1095355182=:43208"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0-2078990075-1095355182=:43208
Content-Type: text/plain; charset=us-ascii

Hi
 
We are trying to get the memory footprint on our searchers.
 
We have indexes of around 1 million docs and around 25 searchable fields.
We noticed that without any searches performed on the indexes, on startup, the memory taken up by the searcher is roughly 7 times the .tii file size. The .tii file is read into memory as per the code. Our .tii files are around 8-10 MB in size and our startup memory foot print is around 60-70 MB.
 
Then when we start doing our searches, the memory goes up, depending on the fields we search on. We are noticing that if we start searching on new fields, the memory kind of goes up. 
 
Doug, 
 
Your calculation below on what is taken up by the searcher, does it take into account the .tii file being read into memory  or am I not making any sense ? 
 
1 byte * Number of searchable fields in your index * Number of docs in 
your index
plus
1k bytes * number of terms in query
plus
1k bytes * number of phrase terms in query


Thank you
ZJ

Doug Cutting <cutting@apache.org> wrote:
> What do your queries look like? The memory required
> for a query can be computed by the following equation:
>
> 1 Byte * Number of fields in your query * Number of
> docs in your index
>
> So if your query searches on all 50 fields of your 3.5
> Million document index then each search would take
> about 175MB. If your 3-4 searches run concurrently
> then that's about 525MB to 700MB chewed up at once.

That's not quite right. If you use the same IndexSearcher (or 
IndexReader) for all of the searches, then only 175MB are used. The 
arrays in question (the norms) are read-only and can be shared by all 
searches.

In general, the amount of memory required is:

1 byte * Number of searchable fields in your index * Number of docs in 
your index

plus

1k bytes * number of terms in query

plus

1k bytes * number of phrase terms in query

The latter are for i/o buffers. There are a few other things, but these 
are the major ones.

Doug


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
--0-2078990075-1095355182=:43208--

From lucene-user-return-10295-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 16 21:39:44 2004
Return-Path: <lucene-user-return-10295-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 81011 invoked from network); 16 Sep 2004 21:39:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Sep 2004 21:39:44 -0000
Received: (qmail 54173 invoked by uid 500); 16 Sep 2004 21:39:35 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 54078 invoked by uid 500); 16 Sep 2004 21:39:34 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 54064 invoked by uid 99); 16 Sep 2004 21:39:34 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.200.145.37] (HELO omta08.mta.everyone.net) (216.200.145.37)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Sep 2004 14:39:33 -0700
Received: from sitemail.everyone.net (bigip1-snat [216.200.145.29])
	by omta08.mta.everyone.net (Postfix) with ESMTP id B10684D1BF
	for <lucene-user@jakarta.apache.org>; Thu, 16 Sep 2004 14:39:31 -0700 (PDT)
Received: by sitemail.everyone.net (Postfix, from userid 99)
	id 4D2FB393A; Thu, 16 Sep 2004 14:39:31 -0700 (PDT)
Content-Type: text/plain; charset="UTF-8"
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0
X-Mailer: MIME-tools 5.41 (Entity 5.404)
Date: Thu, 16 Sep 2004 14:39:31 -0700 (PDT)
From: Ian McDonnell <ian@spinnerscity.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: FAO Otis Gospodnetic
Reply-To: ian@spinnerscity.com
X-Originating-Ip: [213.202.147.150]
X-Eon-Sig: AQDOAZ5BSggTAAOjOQEAAAAB,d43a9afd9c7a5c55a62d1d1a2d08bca9
Message-Id: <20040916213931.4D2FB393A@sitemail.everyone.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Was there any more articles liek this written. I found them extremely usefu=
l for getting an in depth understanding of how Lucenes indexing system work=
ed. Is there a corresponding set for Lucenes search functionality.=20

The recommendations from other Lucene users were useful, but didn't go to t=
he same detail as these 2 articles(which is what i'm looking for!)

Does anybody know of any other docs that go into detail on the functionalit=
y of Lucenes search?

Thx for the advice peeps.

ian :)
--- Daniel M=C3=A9nard <Daniel.Menard@Bdsp.tm.fr> wrote:
I also found these two articles

http://www.onjava.com/pub/a/onjava/2003/01/15/lucene.html
http://www.onjava.com/pub/a/onjava/2003/03/05/lucene.html

from  Otis Gospodnetic very usefull for me.

DM
----- Original Message -----=20
From: "Ian McDonnell" <ian@spinnerscity.com>
To: <lucene-user@jakarta.apache.org>
Sent: Wednesday, September 15, 2004 6:52 PM
Subject: Lucene docs


> What is the best resource for beginners looking to understand Lucenes
functionality, ie its use of fields, documents, the index reader and writer
etc.
>
> is there any web resource that goes into details on the exact workings of
it?
>
> Ian
>
> _____________________________________________________________
> Sign up for FREE email from SpinnersCity Online Dance Magazine & Vortal at
http://www.spinnerscity.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org



_____________________________________________________________
Sign up for FREE email from SpinnersCity Online Dance Magazine & Vortal at =
http://www.spinnerscity.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10296-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 17 00:01:32 2004
Return-Path: <lucene-user-return-10296-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 25580 invoked from network); 17 Sep 2004 00:01:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Sep 2004 00:01:32 -0000
Received: (qmail 2988 invoked by uid 500); 17 Sep 2004 00:01:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 2919 invoked by uid 500); 17 Sep 2004 00:01:23 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 2903 invoked by uid 99); 17 Sep 2004 00:01:23 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.241] (HELO web12704.mail.yahoo.com) (216.136.173.241)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 16 Sep 2004 17:01:20 -0700
Message-ID: <20040917000119.14967.qmail@web12704.mail.yahoo.com>
Received: from [195.29.107.107] by web12704.mail.yahoo.com via HTTP; Thu, 16 Sep 2004 17:01:19 PDT
Date: Thu, 16 Sep 2004 17:01:19 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: FAO Otis Gospodnetic
To: Lucene Users List <lucene-user@jakarta.apache.org>, ian@spinnerscity.com
In-Reply-To: <20040916213931.4D2FB393A@sitemail.everyone.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Ian,

There are links to a few more articles on Lucene Wiki pages.  They
don't go into a lot of detail, as far as I know, and mostly deal with
the basic search functionality.  However, a book about Lucene is going
to be published soon, and it will have a lot of detailed information
about search and a lot of useful code.

Otis

--- Ian McDonnell <ian@spinnerscity.com> wrote:

> Was there any more articles liek this written. I found them extremely
> useful for getting an in depth understanding of how Lucenes indexing
> system worked. Is there a corresponding set for Lucenes search
> functionality. 
> 
> The recommendations from other Lucene users were useful, but didn't
> go to the same detail as these 2 articles(which is what i'm looking
> for!)
> 
> Does anybody know of any other docs that go into detail on the
> functionality of Lucenes search?
> 
> Thx for the advice peeps.
> 
> ian :)
> --- Daniel Mnard <Daniel.Menard@Bdsp.tm.fr> wrote:
> I also found these two articles
> 
> http://www.onjava.com/pub/a/onjava/2003/01/15/lucene.html
> http://www.onjava.com/pub/a/onjava/2003/03/05/lucene.html
> 
> from  Otis Gospodnetic very usefull for me.
> 
> DM
> ----- Original Message ----- 
> From: "Ian McDonnell" <ian@spinnerscity.com>
> To: <lucene-user@jakarta.apache.org>
> Sent: Wednesday, September 15, 2004 6:52 PM
> Subject: Lucene docs
> 
> 
> > What is the best resource for beginners looking to understand
> Lucenes
> functionality, ie its use of fields, documents, the index reader and
> writer
> etc.
> >
> > is there any web resource that goes into details on the exact
> workings of
> it?
> >
> > Ian
> >
> > _____________________________________________________________
> > Sign up for FREE email from SpinnersCity Online Dance Magazine &
> Vortal at
> http://www.spinnerscity.com
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> >
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 
> 
> _____________________________________________________________
> Sign up for FREE email from SpinnersCity Online Dance Magazine &
> Vortal at http://www.spinnerscity.com
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10297-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 17 00:22:03 2004
Return-Path: <lucene-user-return-10297-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 37462 invoked from network); 17 Sep 2004 00:22:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Sep 2004 00:22:02 -0000
Received: (qmail 35888 invoked by uid 500); 17 Sep 2004 00:21:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 35816 invoked by uid 500); 17 Sep 2004 00:21:54 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 35802 invoked by uid 99); 17 Sep 2004 00:21:54 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.245] (HELO web12708.mail.yahoo.com) (216.136.173.245)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 16 Sep 2004 17:21:53 -0700
Message-ID: <20040917002152.41666.qmail@web12708.mail.yahoo.com>
Received: from [195.29.107.107] by web12708.mail.yahoo.com via HTTP; Thu, 16 Sep 2004 17:21:52 PDT
Date: Thu, 16 Sep 2004 17:21:52 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Concurent operations with Lucene
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <022401c49b2f$09251590$1402a8c0@POWERPACK>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Nutch is a robust, multi-threaded Java web crawler and a (distributed)
search engine.
Nutch uses Lucene to index web pages and search the resulting indices.
Doug Cutting is the padre of both Nutch and Lucene.

Otis


--- Terry Steichen <terry@net-frame.com> wrote:

> Otis,
> 
> What's the relationship between Nutch and Lucene?
> 
> Terry
>   ----- Original Message ----- 
>   From: Otis Gospodnetic 
>   To: Lucene Users List 
>   Sent: Wednesday, September 15, 2004 7:29 AM
>   Subject: Re: Concurent operations with Lucene
> 
> 
>   Hello
> 
>   Only 1 process can modify (add/delete) an index at a time.
>   Have you seen Nutch (http://nutch.org/)?
> 
>   Otis
> 
>   --- Daniel CHAN <daniel@cowmeuh.net> wrote:
> 
>   > Hi,
>   > 
>   > I'm currently developping a search engine for a few websites and
>   > would
>   > like to use Lucene to do so. After reading some docs, a post on
> jGuru
>   > states that some concurrent operations are forbidden with Lucene
>   > (http://www.jguru.com/faq/view.jsp?EID=913302). However, the post
>   > dated from 2 years ago.
>   > 
>   > What I would like to know: is Lucene able to handle query
>   > concurrently
>   > with delete operation ? (You can check the table on the jGuru
> page
>   > and
>   > the posts at the bottom).
>   > 
>   > Cheers
>   > 
>   > -- 
>   > Daniel CHAN <daniel@cowmeuh.net>
>   > Free Software supporter
>   > GnuPG : FFEC 70DD 9B2D D10A E161 79B5 3EDB CB9B A3C3 F6F3
>   > 
>   > 
> 
>   > ATTACHMENT part 2 application/pgp-signature name=signature.asc
> 
> 
> 
>  
> ---------------------------------------------------------------------
>   To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>   For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10298-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 17 00:26:34 2004
Return-Path: <lucene-user-return-10298-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 39038 invoked from network); 17 Sep 2004 00:26:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Sep 2004 00:26:33 -0000
Received: (qmail 39985 invoked by uid 500); 17 Sep 2004 00:26:26 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 39958 invoked by uid 500); 17 Sep 2004 00:26:26 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 39941 invoked by uid 99); 17 Sep 2004 00:26:26 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [68.230.240.35] (HELO lakermmtao04.cox.net) (68.230.240.35)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Sep 2004 17:26:25 -0700
Received: from POWERPACK ([68.100.190.210]) by lakermmtao04.cox.net
          (InterMail vM.6.01.03.04 201-2131-111-106-20040729) with SMTP
          id <20040917002620.DAZC11849.lakermmtao04.cox.net@POWERPACK>
          for <lucene-user@jakarta.apache.org>;
          Thu, 16 Sep 2004 20:26:20 -0400
Message-ID: <006801c49c4c$f2b51de0$1402a8c0@POWERPACK>
From: "Terry Steichen" <terry@net-frame.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <20040917002152.41666.qmail@web12708.mail.yahoo.com>
Subject: Nutch vs Lucene
Date: Thu, 16 Sep 2004 20:26:16 -0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0065_01C49C2B.6B33F330"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0065_01C49C2B.6B33F330
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

So Nutch uses (but doesn't enhance) Lucene?  Or, does it enhance Lucene =
in its ability to operate in a distributed fashion?

Regards,

Terry

PS: I'm aware of Doug's involvement in both - which is partly why I'm =
puzzled.

  ----- Original Message -----=20
  From: Otis Gospodnetic=20
  To: Lucene Users List=20
  Sent: Thursday, September 16, 2004 8:21 PM
  Subject: Re: Concurent operations with Lucene


  Nutch is a robust, multi-threaded Java web crawler and a (distributed)
  search engine.
  Nutch uses Lucene to index web pages and search the resulting indices.
  Doug Cutting is the padre of both Nutch and Lucene.

  Otis


  --- Terry Steichen <terry@net-frame.com> wrote:

  > Otis,
  >=20
  > What's the relationship between Nutch and Lucene?
  >=20
  > Terry
  >   ----- Original Message -----=20
  >   From: Otis Gospodnetic=20
  >   To: Lucene Users List=20
  >   Sent: Wednesday, September 15, 2004 7:29 AM
  >   Subject: Re: Concurent operations with Lucene
  >=20
  >=20
  >   Hello
  >=20
  >   Only 1 process can modify (add/delete) an index at a time.
  >   Have you seen Nutch (http://nutch.org/)?
  >=20
  >   Otis
  >=20
  >   --- Daniel CHAN <daniel@cowmeuh.net> wrote:
  >=20
  >   > Hi,
  >   >=20
  >   > I'm currently developping a search engine for a few websites and
  >   > would
  >   > like to use Lucene to do so. After reading some docs, a post on
  > jGuru
  >   > states that some concurrent operations are forbidden with Lucene
  >   > (http://www.jguru.com/faq/view.jsp?EID=3D913302). However, the =
post
  >   > dated from 2 years ago.
  >   >=20
  >   > What I would like to know: is Lucene able to handle query
  >   > concurrently
  >   > with delete operation ? (You can check the table on the jGuru
  > page
  >   > and
  >   > the posts at the bottom).
  >   >=20
  >   > Cheers
  >   >=20
  >   > --=20
  >   > Daniel CHAN <daniel@cowmeuh.net>
  >   > Free Software supporter
  >   > GnuPG : FFEC 70DD 9B2D D10A E161 79B5 3EDB CB9B A3C3 F6F3
  >   >=20
  >   >=20
  >=20
  >   > ATTACHMENT part 2 application/pgp-signature name=3Dsignature.asc
  >=20
  >=20
  >=20
  > =20
  > =
---------------------------------------------------------------------
  >   To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  >   For additional commands, e-mail:
  > lucene-user-help@jakarta.apache.org
  >=20
  >=20


  ---------------------------------------------------------------------
  To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  For additional commands, e-mail: lucene-user-help@jakarta.apache.org


------=_NextPart_000_0065_01C49C2B.6B33F330--


From lucene-user-return-10299-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 17 00:31:46 2004
Return-Path: <lucene-user-return-10299-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 40822 invoked from network); 17 Sep 2004 00:31:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Sep 2004 00:31:45 -0000
Received: (qmail 43773 invoked by uid 500); 17 Sep 2004 00:31:38 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 43753 invoked by uid 500); 17 Sep 2004 00:31:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 43737 invoked by uid 99); 17 Sep 2004 00:31:38 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.238] (HELO web12701.mail.yahoo.com) (216.136.173.238)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 16 Sep 2004 17:31:38 -0700
Message-ID: <20040917003136.91039.qmail@web12701.mail.yahoo.com>
Received: from [195.29.107.107] by web12701.mail.yahoo.com via HTTP; Thu, 16 Sep 2004 17:31:36 PDT
Date: Thu, 16 Sep 2004 17:31:36 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Nutch vs Lucene
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <006801c49c4c$f2b51de0$1402a8c0@POWERPACK>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Nutch is built on top and around Lucene.
It lets you run a query against a cluster of 'search servers', for
instance, using custom code that you can see in Nutch's CVS.

Otis

--- Terry Steichen <terry@net-frame.com> wrote:

> So Nutch uses (but doesn't enhance) Lucene?  Or, does it enhance
> Lucene in its ability to operate in a distributed fashion?
> 
> Regards,
> 
> Terry
> 
> PS: I'm aware of Doug's involvement in both - which is partly why I'm
> puzzled.
> 
>   ----- Original Message ----- 
>   From: Otis Gospodnetic 
>   To: Lucene Users List 
>   Sent: Thursday, September 16, 2004 8:21 PM
>   Subject: Re: Concurent operations with Lucene
> 
> 
>   Nutch is a robust, multi-threaded Java web crawler and a
> (distributed)
>   search engine.
>   Nutch uses Lucene to index web pages and search the resulting
> indices.
>   Doug Cutting is the padre of both Nutch and Lucene.
> 
>   Otis
> 
> 
>   --- Terry Steichen <terry@net-frame.com> wrote:
> 
>   > Otis,
>   > 
>   > What's the relationship between Nutch and Lucene?
>   > 
>   > Terry
>   >   ----- Original Message ----- 
>   >   From: Otis Gospodnetic 
>   >   To: Lucene Users List 
>   >   Sent: Wednesday, September 15, 2004 7:29 AM
>   >   Subject: Re: Concurent operations with Lucene
>   > 
>   > 
>   >   Hello
>   > 
>   >   Only 1 process can modify (add/delete) an index at a time.
>   >   Have you seen Nutch (http://nutch.org/)?
>   > 
>   >   Otis
>   > 
>   >   --- Daniel CHAN <daniel@cowmeuh.net> wrote:
>   > 
>   >   > Hi,
>   >   > 
>   >   > I'm currently developping a search engine for a few websites
> and
>   >   > would
>   >   > like to use Lucene to do so. After reading some docs, a post
> on
>   > jGuru
>   >   > states that some concurrent operations are forbidden with
> Lucene
>   >   > (http://www.jguru.com/faq/view.jsp?EID=913302). However, the
> post
>   >   > dated from 2 years ago.
>   >   > 
>   >   > What I would like to know: is Lucene able to handle query
>   >   > concurrently
>   >   > with delete operation ? (You can check the table on the jGuru
>   > page
>   >   > and
>   >   > the posts at the bottom).
>   >   > 
>   >   > Cheers
>   >   > 
>   >   > -- 
>   >   > Daniel CHAN <daniel@cowmeuh.net>
>   >   > Free Software supporter
>   >   > GnuPG : FFEC 70DD 9B2D D10A E161 79B5 3EDB CB9B A3C3 F6F3
>   >   > 
>   >   > 
>   > 
>   >   > ATTACHMENT part 2 application/pgp-signature
> name=signature.asc
>   > 
>   > 
>   > 
>   >  
>   >
> ---------------------------------------------------------------------
>   >   To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
>   >   For additional commands, e-mail:
>   > lucene-user-help@jakarta.apache.org
>   > 
>   > 
> 
> 
>  
> ---------------------------------------------------------------------
>   To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>   For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10300-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 17 01:24:08 2004
Return-Path: <lucene-user-return-10300-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 73913 invoked from network); 17 Sep 2004 01:24:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Sep 2004 01:24:08 -0000
Received: (qmail 94093 invoked by uid 500); 17 Sep 2004 01:23:58 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 94058 invoked by uid 500); 17 Sep 2004 01:23:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 94044 invoked by uid 99); 17 Sep 2004 01:23:57 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.245] (HELO web12708.mail.yahoo.com) (216.136.173.245)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 16 Sep 2004 18:23:55 -0700
Message-ID: <20040917012354.49713.qmail@web12708.mail.yahoo.com>
Received: from [195.29.107.107] by web12708.mail.yahoo.com via HTTP; Thu, 16 Sep 2004 18:23:54 PDT
Date: Thu, 16 Sep 2004 18:23:54 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Term highlighting and Term vector patch
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <034c01c49bde$eb0513c0$1402a8c0@POWERPACK>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

If you look at this:
  http://www.simpy.com/simpy/Search.do?op=user&username=otis&q=lucene

You will see 'similar' link next to each search result item.  Finding
similar web pages can be implemented using term vectors.

Otis

--- Terry Steichen <terry@net-frame.com> wrote:

> Christoph,
> 
> Just curious - how are you currently using Term Vectors?  They seem
> to be a neat feature with lots of future promise, but I'm not sure
> how to best use them now.
> 
> Regards,
> 
> Terry
>   ----- Original Message ----- 
>   From: Christoph Goller 
>   To: Lucene Developers List 
>   Sent: Thursday, September 16, 2004 5:01 AM
>   Subject: Re: Term highlighting and Term vector patch
> 
> 
>   Hi Grant,
> 
>   I try to look into your latest code by the end of September but I
> probably
>   won't find time earlier. I am using the current TermVectors very
> successfully.
>   Thanks for the excellent code.
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10301-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 17 06:16:03 2004
Return-Path: <lucene-user-return-10301-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 13075 invoked from network); 17 Sep 2004 06:16:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Sep 2004 06:16:03 -0000
Received: (qmail 24554 invoked by uid 500); 17 Sep 2004 06:15:55 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 24524 invoked by uid 500); 17 Sep 2004 06:15:54 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 24511 invoked by uid 99); 17 Sep 2004 06:15:54 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Sep 2004 23:15:54 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id C851623B93
	for <lucene-user@jakarta.apache.org>; Fri, 17 Sep 2004 08:17:28 +0200 (CEST)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 24323-10 for <lucene-user@jakarta.apache.org>;
 Fri, 17 Sep 2004 08:17:28 +0200 (CEST)
Received: from tucholsky.office.tanto.de (unknown [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP id A4D7D23B8F
	for <lucene-user@jakarta.apache.org>; Fri, 17 Sep 2004 08:17:28 +0200 (CEST)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id i8H6FpGL004887
	for <lucene-user@jakarta.apache.org>; Fri, 17 Sep 2004 08:15:51 +0200
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id i8H6FoY6004883;
	Fri, 17 Sep 2004 08:15:50 +0200
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16714.33046.809539.492327@tanto-xipolis.de>
Date: Fri, 17 Sep 2004 08:15:50 +0200
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: IndexReader.close() semantics and optimize -- Re: problem with locks
 when updating the data of a previous stored document
In-Reply-To: <4149B908.9020308@tropo.com>
References: <B1FD64AF10DAED4786DC31F17B1C388492EFDB@exch1.colmol.com>
	<4149B908.9020308@tropo.com>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

David Spencer writes:
> Crump, Michael wrote:
> 
> > You have to close the IndexReader after doing the delete, before opening the IndexWriter for the addition.  See information at this link:
> > 
> > http://wiki.apache.org/jakarta-lucene/UpdatingAnIndex
> 
> Recently I thought I observed that if I use this batch update idiom (1st 
> delete the changed docs, then add them), it seems that 
> IndexReader.close() does not flush/commit the deletions - rather 
> IndexWriter.optimize() does.
> 
> I may have been confused and should retest this, but regardless, the 
> javadoc seems unclear. close() says it "*saves* deletions to disk". What 
> does it mean to save a deletion? Save a pending one, or commit it 
> (commit -> really delete it)?
> 
My understanding is, that saving makes sure, that index searcher opened after
the close will take the deletions into account.
Deletion in lucene is in fact a two phase process:
a) delete -> document is marked deleted but not removed from the index.
	  low level apis (such as list terms) will still see the content
	  from deleted documents 
	  Search takes the delete flag into account and removes deleted
	  documents from the result list.
	  (I think this also means that the deleted documents still 
	  contribute to term frequencies)
b) remove deleted documents
   this is done during optimize

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10302-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 17 06:32:06 2004
Return-Path: <lucene-user-return-10302-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21780 invoked from network); 17 Sep 2004 06:32:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Sep 2004 06:32:05 -0000
Received: (qmail 50642 invoked by uid 500); 17 Sep 2004 06:31:58 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 50612 invoked by uid 500); 17 Sep 2004 06:31:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 50598 invoked by uid 99); 17 Sep 2004 06:31:57 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 16 Sep 2004 23:31:56 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id 70C1723B93
	for <lucene-user@jakarta.apache.org>; Fri, 17 Sep 2004 08:33:05 +0200 (CEST)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 24727-06 for <lucene-user@jakarta.apache.org>;
 Fri, 17 Sep 2004 08:33:05 +0200 (CEST)
Received: from tucholsky.office.tanto.de (unknown [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP id 4A94023B8F
	for <lucene-user@jakarta.apache.org>; Fri, 17 Sep 2004 08:33:05 +0200 (CEST)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id i8H6VRGL005136
	for <lucene-user@jakarta.apache.org>; Fri, 17 Sep 2004 08:31:27 +0200
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id i8H6VRZx005132;
	Fri, 17 Sep 2004 08:31:27 +0200
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16714.33983.575352.309775@tanto-xipolis.de>
Date: Fri, 17 Sep 2004 08:31:27 +0200
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: RE: QueryParser.parse() and Lucene1.4.1
In-Reply-To: <005c01c49c13$f3a51310$5fc811ac@plitvak>
References: <200409152307.22873@danielnaber.de>
	<005c01c49c13$f3a51310$5fc811ac@plitvak>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Polina Litvak writes:
> Hi Daniel,
> 
> I just downloaded the latest version of Lucene and tried the whole thing
> again: I ran my code first with lucene-1.3-final.jar, getting the query
> Field:(A AND -(B)) parsed into +Field:A -Field:B, and then I ran exactly
> the same code with lucene-1.4.1.jar and got the output parsed into
> Field:A Field:- Field:B.
> 
> I also read Lucene's documentation (http://cvs.apache.org/viewcvs.cgi/*
> checkout*/jakarta-lucene/CHANGES.txt?rev=1.85), and it does mention a
> change to the "+" and "-" operators:
> 
>     13. Changed QueryParser.jj to allow '-' and '+' within tokens:
>     http://issues.apache.org/bugzilla/show_bug.cgi?id=27491
>     (Morus Walter via Otis)
> 
This change is unlikely to introduce the behaviour you describe, since
it affects '-' within words only, not at start.
So there is a change for a-b between 1.3 and 1.4
1.3 gives a -b
1.4 gives "a b" or one token a-b (depending on the analyzer) as it treats
the - as part of a word.

> 
> So is this behaviour a bug, or Lucene1.4 is not backwards compatible?
> 
Your behaviour cannot be seen from the test code (as Daniel already said):

java -cp lucene-1.3-final/lucene-1.3-final.jar  org.apache.lucene.queryParser.QueryParser 'Field:(A AND -(B))'
+Field:a -Field:b

java -cp lucene-1.4-final/lucene-1.4-final.jar org.apache.lucene.queryParser.QueryParser 'Field:(A AND -(B))'
+Field:a -Field:b

java -cp lucene-1.4.1/lucene-1.4.1.jar org.apache.lucene.queryParser.QueryParser 'Field:(A AND -(B))'
+Field:a -Field:b

So either you have a different query or something in your code is responsable
for the problem.

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10303-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 17 12:14:07 2004
Return-Path: <lucene-user-return-10303-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 52269 invoked from network); 17 Sep 2004 12:14:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Sep 2004 12:14:07 -0000
Received: (qmail 58239 invoked by uid 500); 17 Sep 2004 12:13:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 58140 invoked by uid 500); 17 Sep 2004 12:13:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 57970 invoked by uid 99); 17 Sep 2004 12:13:39 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 17 Sep 2004 05:13:38 -0700
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at with Microsoft SMTPSVC(5.0.2195.6713);
	 Fri, 17 Sep 2004 14:15:30 +0200
Message-ID: <414AD562.4020708@ifit.uni-klu.ac.at>
Date: Fri, 17 Sep 2004 14:15:30 +0200
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: QueryParser.parse() and Lucene1.4.1
References: <001f01c49b5e$5bd01090$5fc811ac@plitvak>
In-Reply-To: <001f01c49b5e$5bd01090$5fc811ac@plitvak>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 17 Sep 2004 12:15:30.0588 (UTC) FILETIME=[063A55C0:01C49CB0]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Polima,

 It seems to me that your query string is not correct ...

(A AND -(B))

AND = "+"
NOT = "-"

In lucene AND and NOT opperators are mapped internal to +/-,
(AND and NOT are supported only because they are comming from natural language)

so ...

A + - (B) makes no sense ...


 Sergiu





Polina Litvak wrote:

>I have a question regarding QueryParser and lucene-1.4.1.jar:
> 
>When using lucene-1.3-final.jar, a query of the form: Field:(A AND -(B))
>was parsed into +Field:A -Field:B (using QueryParser.parse()). 
>After making the switch to lucene-1.4.1.jar, the same query is being
>parsed into Field:A Field:- Field:B which is not the desired outcome.
> 
>Does anyone know how to work around this new feature ?
>  
>



> 
>Thanks,
>Polina
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10304-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 17 13:26:31 2004
Return-Path: <lucene-user-return-10304-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 93291 invoked from network); 17 Sep 2004 13:26:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Sep 2004 13:26:31 -0000
Received: (qmail 16803 invoked by uid 500); 17 Sep 2004 13:26:22 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 16758 invoked by uid 500); 17 Sep 2004 13:26:21 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 16735 invoked by uid 99); 17 Sep 2004 13:26:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [209.167.138.140] (HELO tango.casebank.com) (209.167.138.140)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 17 Sep 2004 06:26:19 -0700
Received: from plitvak ([172.17.200.95]) by tango.casebank.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Fri, 17 Sep 2004 09:26:10 -0400
From: "Polina Litvak" <plitvak@casebank.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: QueryParser.parse() and Lucene1.4.1
Date: Fri, 17 Sep 2004 09:29:42 -0400
Message-ID: <006501c49cba$63cd3720$5fc811ac@plitvak>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2616
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
Importance: Normal
In-Reply-To: <16714.33983.575352.309775@tanto-xipolis.de>
X-OriginalArrivalTime: 17 Sep 2004 13:26:10.0453 (UTC) FILETIME=[E5626450:01C49CB9]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I found the source of error:

Turns out that given a query of the form 'Field:(A AND-(B))' (note the
no space between 'AND' and '-'), lucene-1.3 would output +Field:a
-Field:b, while lucene-1.4 would output Field:a Field:- Field:b


Thanks for all the help and the suggestions.

Polina



-----Original Message-----
From: Morus Walter [mailto:morus.walter@tanto.de] 
Sent: September 17, 2004 2:31 AM
To: Lucene Users List
Subject: RE: QueryParser.parse() and Lucene1.4.1

Polina Litvak writes:
> Hi Daniel,
> 
> I just downloaded the latest version of Lucene and tried the whole
thing
> again: I ran my code first with lucene-1.3-final.jar, getting the
query
> Field:(A AND -(B)) parsed into +Field:A -Field:B, and then I ran
exactly
> the same code with lucene-1.4.1.jar and got the output parsed into
> Field:A Field:- Field:B.
> 
> I also read Lucene's documentation
(http://cvs.apache.org/viewcvs.cgi/*
> checkout*/jakarta-lucene/CHANGES.txt?rev=1.85), and it does mention a
> change to the "+" and "-" operators:
> 
>     13. Changed QueryParser.jj to allow '-' and '+' within tokens:
>     http://issues.apache.org/bugzilla/show_bug.cgi?id=27491
>     (Morus Walter via Otis)
> 
This change is unlikely to introduce the behaviour you describe, since
it affects '-' within words only, not at start.
So there is a change for a-b between 1.3 and 1.4
1.3 gives a -b
1.4 gives "a b" or one token a-b (depending on the analyzer) as it
treats
the - as part of a word.

> 
> So is this behaviour a bug, or Lucene1.4 is not backwards compatible?
> 
Your behaviour cannot be seen from the test code (as Daniel already
said):

java -cp lucene-1.3-final/lucene-1.3-final.jar
org.apache.lucene.queryParser.QueryParser 'Field:(A AND -(B))'
+Field:a -Field:b

java -cp lucene-1.4-final/lucene-1.4-final.jar
org.apache.lucene.queryParser.QueryParser 'Field:(A AND -(B))'
+Field:a -Field:b

java -cp lucene-1.4.1/lucene-1.4.1.jar
org.apache.lucene.queryParser.QueryParser 'Field:(A AND -(B))'
+Field:a -Field:b

So either you have a different query or something in your code is
responsable
for the problem.

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10305-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 17 13:37:52 2004
Return-Path: <lucene-user-return-10305-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 98182 invoked from network); 17 Sep 2004 13:37:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Sep 2004 13:37:52 -0000
Received: (qmail 35023 invoked by uid 500); 17 Sep 2004 13:37:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 34997 invoked by uid 500); 17 Sep 2004 13:37:42 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 34979 invoked by uid 99); 17 Sep 2004 13:37:42 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [128.230.248.25] (HELO gwia201.syr.edu) (128.230.248.25)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 17 Sep 2004 06:37:40 -0700
Received: from MTA2-MTA by gwia201.syr.edu
	with Novell_GroupWise; Fri, 17 Sep 2004 09:37:37 -0400
Message-Id: <s14ab061.070@gwia201.syr.edu>
X-Mailer: Novell GroupWise Internet Agent 6.5.1 
Date: Fri, 17 Sep 2004 09:36:59 -0400
From: "Grant Ingersoll" <GSIngers@syr.edu>
To: <lucene-user@jakarta.apache.org>
Subject: Re: Term highlighting and Term vector patch
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

We use them to do relevence feedback.  We _will_ be using the offset
info, etc. for doing some more sophisticated collection mgmt things that
allow the user to interact with a collection of documents.

>>> otis_gospodnetic@yahoo.com 9/16/2004 9:23:54 PM >>>
If you look at this:
  http://www.simpy.com/simpy/Search.do?op=user&username=otis&q=lucene 

You will see 'similar' link next to each search result item.  Finding
similar web pages can be implemented using term vectors.

Otis

--- Terry Steichen <terry@net-frame.com> wrote:

> Christoph,
> 
> Just curious - how are you currently using Term Vectors?  They seem
> to be a neat feature with lots of future promise, but I'm not sure
> how to best use them now.
> 
> Regards,
> 
> Terry
>   ----- Original Message ----- 
>   From: Christoph Goller 
>   To: Lucene Developers List 
>   Sent: Thursday, September 16, 2004 5:01 AM
>   Subject: Re: Term highlighting and Term vector patch
> 
> 
>   Hi Grant,
> 
>   I try to look into your latest code by the end of September but I
> probably
>   won't find time earlier. I am using the current TermVectors very
> successfully.
>   Thanks for the excellent code.
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org 
For additional commands, e-mail: lucene-user-help@jakarta.apache.org 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10306-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 17 14:57:33 2004
Return-Path: <lucene-user-return-10306-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 47997 invoked from network); 17 Sep 2004 14:57:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Sep 2004 14:57:32 -0000
Received: (qmail 87430 invoked by uid 500); 17 Sep 2004 14:57:23 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 87310 invoked by uid 500); 17 Sep 2004 14:57:21 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 87297 invoked by uid 99); 17 Sep 2004 14:57:21 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.240] (HELO web12703.mail.yahoo.com) (216.136.173.240)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 17 Sep 2004 07:57:21 -0700
Message-ID: <20040917145717.58003.qmail@web12703.mail.yahoo.com>
Received: from [195.29.107.206] by web12703.mail.yahoo.com via HTTP; Fri, 17 Sep 2004 07:57:17 PDT
Date: Fri, 17 Sep 2004 07:57:17 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Term highlighting and Term vector patch
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <s14ab061.070@gwia201.syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Sorry about the 'bad' link (my bookmark index can't be searched by
those without Simpy accounts).  So you can see 'similar' and Term
Vectors in action here:

http://www.simpy.com/simpy/Authenticate.do?username=demo&password=demo&rememberme=-1

If you then search for 'blog' (
http://www.simpy.com/simpy/Search.do?q=blog ) you can hit 'similar'
next to the first search result hit, and you'll find web pages similar
to Erik Hatcher's blog.  The 'similarity' threshold is set pretty low
currently, but that can be tuned.

Otis



> >>> otis_gospodnetic@yahoo.com 9/16/2004 9:23:54 PM >>>
> If you look at this:
>   http://www.simpy.com/simpy/Search.do?op=user&username=otis&q=lucene
> 
> 
> You will see 'similar' link next to each search result item.  Finding
> similar web pages can be implemented using term vectors.
> 
> Otis
> 
> --- Terry Steichen <terry@net-frame.com> wrote:
> 
> > Christoph,
> > 
> > Just curious - how are you currently using Term Vectors?  They seem
> > to be a neat feature with lots of future promise, but I'm not sure
> > how to best use them now.
> > 
> > Regards,
> > 
> > Terry
> >   ----- Original Message ----- 
> >   From: Christoph Goller 
> >   To: Lucene Developers List 
> >   Sent: Thursday, September 16, 2004 5:01 AM
> >   Subject: Re: Term highlighting and Term vector patch
> > 
> > 
> >   Hi Grant,
> > 
> >   I try to look into your latest code by the end of September but I
> > probably
> >   won't find time earlier. I am using the current TermVectors very
> > successfully.
> >   Thanks for the excellent code.
> > 
> > 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org 
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10307-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 17 14:59:39 2004
Return-Path: <lucene-user-return-10307-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 49292 invoked from network); 17 Sep 2004 14:59:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Sep 2004 14:59:39 -0000
Received: (qmail 92604 invoked by uid 500); 17 Sep 2004 14:59:32 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 92480 invoked by uid 500); 17 Sep 2004 14:59:31 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 92453 invoked by uid 99); 17 Sep 2004 14:59:31 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [212.74.15.68] (HELO semantico.com) (212.74.15.68)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 17 Sep 2004 07:59:29 -0700
Received: from spampd.localdomain (localhost [127.0.0.1])
	by localhost.semantico.com (Postfix) with ESMTP id 24A4B32006A
	for <lucene-user@jakarta.apache.org>; Fri, 17 Sep 2004 15:59:27 +0100 (BST)
Received: from semantico.com (Annatto.dyn.rp.lan [192.168.1.210])
	by semantico.com (Postfix) with ESMTP id 9C0573201E2
	for <lucene-user@jakarta.apache.org>; Fri, 17 Sep 2004 15:59:26 +0100 (BST)
Message-ID: <414AFBCA.9070701@semantico.com>
Date: Fri, 17 Sep 2004 15:59:22 +0100
From: Peter Pimley <ppimley@semantico.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.6) Gecko/20040113
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Correct way to search across all fields
References: <s146df4a.028@n6mcgw16.cchmc.org>
In-Reply-To: <s146df4a.028@n6mcgw16.cchmc.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Checker-Version: SpamAssassin 2.63 (2004-01-11) on paprika.rp.lan
X-Spam-Status: No, hits=-100.0 required=5.0 tests=USER_IN_WHITELIST 
	autolearn=no version=2.63
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Hello everybody.

I'm a relative newbie with lucene, but I've got it set up on my system 
and it's working well.

I'd like it to be the case that the default behaviour is to search 
across all the Fields of all my Documents.  At the moment, when I create 
my Document object, the last thing I do is to create an extra Field 
called 'all', whose content is the concatinated contents of all the 
other fields.  Then, when I use the QueryParser, I pass in 'all' as the 
value of the default field parameter.

This works, but it makes my index a little under twice as large as it 
would otherwise be.  That's not a great problem as I'm nowhere near 
bound by storage space (yet), but it feels a bit weird.  I can't use a 
MultiFieldQueryParser, because at the point where I parse the query, I 
don't actually know the names of the fields.

Have I missed the correct way to do this?

Thanks in advance,
Peter Pimley


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10308-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 17 15:04:48 2004
Return-Path: <lucene-user-return-10308-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 52826 invoked from network); 17 Sep 2004 15:04:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Sep 2004 15:04:48 -0000
Received: (qmail 3266 invoked by uid 500); 17 Sep 2004 15:03:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 3178 invoked by uid 500); 17 Sep 2004 15:03:39 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 3029 invoked by uid 99); 17 Sep 2004 15:03:37 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.240] (HELO web12703.mail.yahoo.com) (216.136.173.240)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 17 Sep 2004 08:03:33 -0700
Message-ID: <20040917150331.58936.qmail@web12703.mail.yahoo.com>
Received: from [195.29.107.206] by web12703.mail.yahoo.com via HTTP; Fri, 17 Sep 2004 08:03:31 PDT
Date: Fri, 17 Sep 2004 08:03:31 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Correct way to search across all fields
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <414AFBCA.9070701@semantico.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

You are doing it correctly.  I tend to use MultiFieldQueryParser, but
lots of people have 1 'all' field like you.

Otis

--- Peter Pimley <ppimley@semantico.com> wrote:

> 
> Hello everybody.
> 
> I'm a relative newbie with lucene, but I've got it set up on my
> system 
> and it's working well.
> 
> I'd like it to be the case that the default behaviour is to search 
> across all the Fields of all my Documents.  At the moment, when I
> create 
> my Document object, the last thing I do is to create an extra Field 
> called 'all', whose content is the concatinated contents of all the 
> other fields.  Then, when I use the QueryParser, I pass in 'all' as
> the 
> value of the default field parameter.
> 
> This works, but it makes my index a little under twice as large as it
> 
> would otherwise be.  That's not a great problem as I'm nowhere near 
> bound by storage space (yet), but it feels a bit weird.  I can't use
> a 
> MultiFieldQueryParser, because at the point where I parse the query,
> I 
> don't actually know the names of the fields.
> 
> Have I missed the correct way to do this?
> 
> Thanks in advance,
> Peter Pimley
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10309-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 17 16:58:00 2004
Return-Path: <lucene-user-return-10309-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 16259 invoked from network); 17 Sep 2004 16:57:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Sep 2004 16:57:59 -0000
Received: (qmail 3950 invoked by uid 500); 17 Sep 2004 16:57:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 3855 invoked by uid 500); 17 Sep 2004 16:57:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 3841 invoked by uid 99); 17 Sep 2004 16:57:53 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 17 Sep 2004 09:57:52 -0700
Received: (qmail 92148 invoked by uid 89); 17 Sep 2004 16:57:50 -0000
Received: from unknown (HELO ?192.168.168.81?) (postmaster@cottrell-cutting.net@24.5.163.156)
  by londo.swishmail.com with AES256-SHA encrypted SMTP; 17 Sep 2004 16:57:50 -0000
Message-ID: <414B1716.5030305@apache.org>
Date: Fri, 17 Sep 2004 09:55:50 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.2) Gecko/20040806
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Running OutOfMemory while optimizing and searching
References: <20040916171942.44348.qmail@web51803.mail.yahoo.com>
In-Reply-To: <20040916171942.44348.qmail@web51803.mail.yahoo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

John Z wrote:
> We have indexes of around 1 million docs and around 25 searchable fields.
> We noticed that without any searches performed on the indexes, on startup, the memory taken up by the searcher is roughly 7 times the .tii file size. The .tii file is read into memory as per the code. Our .tii files are around 8-10 MB in size and our startup memory foot print is around 60-70 MB.
>  
> Then when we start doing our searches, the memory goes up, depending on the fields we search on. We are noticing that if we start searching on new fields, the memory kind of goes up. 
>  
> Doug, 
>  
> Your calculation below on what is taken up by the searcher, does it take into account the .tii file being read into memory  or am I not making any sense ? 
>  
> 1 byte * Number of searchable fields in your index * Number of docs in 
> your index
> plus
> 1k bytes * number of terms in query
> plus
> 1k bytes * number of phrase terms in query

You make perfect sense.  The formula above does not include the .tii. 
My mistake: I forgot that.  By default, every 128th Term in the index is 
read into memory, to permit random access to terms.  These are stored in 
the .tii file, compressed.  So it is not surprising that they require 7x 
the size of the .tii file in memory.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10310-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 17 17:38:51 2004
Return-Path: <lucene-user-return-10310-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 32144 invoked from network); 17 Sep 2004 17:38:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Sep 2004 17:38:51 -0000
Received: (qmail 42006 invoked by uid 500); 17 Sep 2004 17:38:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 41945 invoked by uid 500); 17 Sep 2004 17:38:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 41932 invoked by uid 99); 17 Sep 2004 17:38:43 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.25.48.137] (HELO network.idexxi.com) (12.25.48.137)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 17 Sep 2004 10:38:42 -0700
Received: from ([172.31.10.167])
	by wme-ironmail.network.idexxi.com with ESMTP ;
	Fri, 17 Sep 2004 13:38:00 -0400
Received: from [172.31.20.236] (wme-dhcp-20-236.westbrook.idexxi.com [172.31.20.236]) by taz.westbrook.idexxi.com with SMTP (Microsoft Exchange Internet Mail Service Version 5.5.2653.13)
	id TBL090TB; Fri, 17 Sep 2004 13:38:00 -0400
Message-ID: <414B20F7.3030109@idexx.com>
Date: Fri, 17 Sep 2004 13:37:59 -0400
From: Derek Baker <derek@idexx.com>
User-Agent: Mozilla Thunderbird 0.8 (X11/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  lucene-user@jakarta.apache.org
Subject: range query problems
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

I'm having a problem with a range query.

I have a field in my documents called "adzer". In at least one of those 
documents, the value is: "-000000009999999993" (without the quotes). I 
know this because if I create a search string like so: "adzer: 
\\-000000009999999993" (again, without the quotes), I get results.

However, if I create a range query that I would expect to find that 
value, I get nothing. The range query string is: "adzer:[# TO 0]" (minus 
the quotes). As far as I can tell, this query string should find any 
value in the adzer fields that starts with a "-". The unicode value for 
# comes before the unicode value for - and the unicode value for - comes 
before the unicode value for 0. Creating a sample program with the 
mentioned Strings and using the compareTo function seems to confirm 
this. But Lucene seems to disagree.

Am I missing something here? I've been banging my head on this all day, 
and any help would be greatly appreciated.

Derek

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10311-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 17 19:04:18 2004
Return-Path: <lucene-user-return-10311-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 78416 invoked from network); 17 Sep 2004 19:04:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Sep 2004 19:04:17 -0000
Received: (qmail 78252 invoked by uid 500); 17 Sep 2004 19:04:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 78194 invoked by uid 500); 17 Sep 2004 19:04:08 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 78181 invoked by uid 99); 17 Sep 2004 19:04:08 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.25.134.84] (HELO mailout09.sul.t-online.com) (194.25.134.84)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 17 Sep 2004 12:04:05 -0700
Received: from fwd03.aul.t-online.de 
	by mailout09.sul.t-online.com with smtp 
	id 1C8O1b-0000eZ-00; Fri, 17 Sep 2004 21:04:03 +0200
Received: from pD9EBE238.dip.t-dialin.net (GW+8sMZHQef+QNqlkULy2JadTuxzfrRYftIzybEbXmbx6WNbLEnf4S@[217.235.226.56]) by fmrl03.sul.t-online.com
	with esmtp id 1C8O1S-0DY4PY0; Fri, 17 Sep 2004 21:03:54 +0200
From: Daniel Naber <daniel.naber@t-online.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: range query problems
Date: Fri, 17 Sep 2004 21:06:45 +0200
User-Agent: KMail/1.7
References: <414B20F7.3030109@idexx.com>
In-Reply-To: <414B20F7.3030109@idexx.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200409172106.45526@danielnaber.de>
X-ID: GW+8sMZHQef+QNqlkULy2JadTuxzfrRYftIzybEbXmbx6WNbLEnf4S@t-dialin.net
X-TOI-MSGID: a22ef3f6-48cd-484e-92f6-c3b4d46cb6b0
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Friday 17 September 2004 19:37, Derek Baker wrote:

> However, if I create a range query that I would expect to find that
> value, I get nothing. The range query string is: "adzer:[# TO 0]" (minus
> the quotes). As far as I can tell, this query string should find any
> value in the adzer fields that starts with a "-".

Did you try building that query manually? Maybe even starting from null 
instead of #.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10312-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 17 19:29:55 2004
Return-Path: <lucene-user-return-10312-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 96810 invoked from network); 17 Sep 2004 19:29:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Sep 2004 19:29:55 -0000
Received: (qmail 12467 invoked by uid 500); 17 Sep 2004 19:29:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 11808 invoked by uid 500); 17 Sep 2004 19:29:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 11794 invoked by uid 99); 17 Sep 2004 19:29:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.25.48.137] (HELO network.idexxi.com) (12.25.48.137)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 17 Sep 2004 12:29:40 -0700
Received: from ([172.31.10.167])
	by wme-ironmail.network.idexxi.com with ESMTP ;
	Fri, 17 Sep 2004 15:29:08 -0400
Received: from [172.31.20.236] (wme-dhcp-20-236.westbrook.idexxi.com [172.31.20.236]) by taz.westbrook.idexxi.com with SMTP (Microsoft Exchange Internet Mail Service Version 5.5.2653.13)
	id TBL00BKF; Fri, 17 Sep 2004 15:29:08 -0400
Message-ID: <414B3B04.40304@idexx.com>
Date: Fri, 17 Sep 2004 15:29:08 -0400
From: Derek Baker <derek@idexx.com>
User-Agent: Mozilla Thunderbird 0.8 (X11/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: range query problems
References: <414B20F7.3030109@idexx.com> <200409172106.45526@danielnaber.de>
In-Reply-To: <200409172106.45526@danielnaber.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks for your reply.

If I do it manually:

    Term term1 = new Term("adzer", "#");
    Term term2 = new Term("adzer", "0");
    Query myQuery = new RangeQuery(term1, term2, true);
    hits = searcher.search(myQuery);

I still get nothing. If I make the first term in the new RangeQuery call 
null:

    Query myQuery = new RangeQuery(null, term2, true);

I get nothing. If, however I make the second term in the new RangeQuery 
call null:

    Query myQuery = new RangeQuery(term1, null, true);

I get the results I expect.

Seems very strange.

Derek

Daniel Naber wrote:

>On Friday 17 September 2004 19:37, Derek Baker wrote:
>
>  
>
>>However, if I create a range query that I would expect to find that
>>value, I get nothing. The range query string is: "adzer:[# TO 0]" (minus
>>the quotes). As far as I can tell, this query string should find any
>>value in the adzer fields that starts with a "-".
>>    
>>
>
>Did you try building that query manually? Maybe even starting from null 
>instead of #.
>
>Regards
> Daniel
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10313-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 17 19:36:08 2004
Return-Path: <lucene-user-return-10313-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 99345 invoked from network); 17 Sep 2004 19:36:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Sep 2004 19:36:08 -0000
Received: (qmail 21480 invoked by uid 500); 17 Sep 2004 19:35:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 21432 invoked by uid 500); 17 Sep 2004 19:35:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 21394 invoked by uid 99); 17 Sep 2004 19:35:42 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.25.48.137] (HELO network.idexxi.com) (12.25.48.137)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 17 Sep 2004 12:35:42 -0700
Received: from ([172.31.10.167])
	by wme-ironmail.network.idexxi.com with ESMTP ;
	Fri, 17 Sep 2004 15:35:07 -0400
Received: from [172.31.20.236] (wme-dhcp-20-236.westbrook.idexxi.com [172.31.20.236]) by taz.westbrook.idexxi.com with SMTP (Microsoft Exchange Internet Mail Service Version 5.5.2653.13)
	id TBL00BM2; Fri, 17 Sep 2004 15:35:07 -0400
Message-ID: <414B3C6B.9030200@idexx.com>
Date: Fri, 17 Sep 2004 15:35:07 -0400
From: Derek Baker <derek@idexx.com>
User-Agent: Mozilla Thunderbird 0.8 (X11/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: range query problems
References: <414B20F7.3030109@idexx.com> <200409172106.45526@danielnaber.de> <414B3B04.40304@idexx.com>
In-Reply-To: <414B3B04.40304@idexx.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Ah, but if I escape the "0" in the term constructor:

     Term term2 = new Term("adzer", "\\0");

It works. And then it works for a dash as well. Seems that to pass a 
search string to a queryParser, the "0" has to be escaped doubly:

    searchString = "adzer: [# TO \\\\0]";

Just escaping with a double backslash does not work.

I still wonder though, if that is the desired behavior. It does not say 
on the page on the Lucene web site, that either "0" or "-" are special 
characters that need to be escaped.

Thanks for your time and for pointing me in the right direction.

Derek

Derek Baker wrote:

> Thanks for your reply.
>
> If I do it manually:
>
>    Term term1 = new Term("adzer", "#");
>    Term term2 = new Term("adzer", "0");
>    Query myQuery = new RangeQuery(term1, term2, true);
>    hits = searcher.search(myQuery);
>
> I still get nothing. If I make the first term in the new RangeQuery 
> call null:
>
>    Query myQuery = new RangeQuery(null, term2, true);
>
> I get nothing. If, however I make the second term in the new 
> RangeQuery call null:
>
>    Query myQuery = new RangeQuery(term1, null, true);
>
> I get the results I expect.
>
> Seems very strange.
>
> Derek
>
> Daniel Naber wrote:
>
>> On Friday 17 September 2004 19:37, Derek Baker wrote:
>>
>>  
>>
>>> However, if I create a range query that I would expect to find that
>>> value, I get nothing. The range query string is: "adzer:[# TO 0]" 
>>> (minus
>>> the quotes). As far as I can tell, this query string should find any
>>> value in the adzer fields that starts with a "-".
>>>   
>>
>>
>> Did you try building that query manually? Maybe even starting from 
>> null instead of #.
>>
>> Regards
>> Daniel
>>
>>  
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10314-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Sep 19 09:05:45 2004
Return-Path: <lucene-user-return-10314-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 40316 invoked from network); 19 Sep 2004 09:05:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 19 Sep 2004 09:05:45 -0000
Received: (qmail 9817 invoked by uid 500); 19 Sep 2004 09:05:36 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 9740 invoked by uid 500); 19 Sep 2004 09:05:34 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 9677 invoked by uid 99); 19 Sep 2004 09:05:33 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.245] (HELO web12708.mail.yahoo.com) (216.136.173.245)
  by apache.org (qpsmtpd/0.28) with SMTP; Sun, 19 Sep 2004 02:05:31 -0700
Message-ID: <20040919090530.53415.qmail@web12708.mail.yahoo.com>
Received: from [195.29.108.91] by web12708.mail.yahoo.com via HTTP; Sun, 19 Sep 2004 02:05:30 PDT
Date: Sun, 19 Sep 2004 02:05:30 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: all results in a field
To: lucene-user@jakarta.apache.org
Cc: Murat Ozcan <mozcan@sirius-group.com>
In-Reply-To: <000b01c49db9$7169b480$9b43c2d5@MOZCAN>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Redirecting to lucene-user list (more appropriate).

1. You could use IndexReader's termDocs() method and iterate through
results, filtered by the desired field.

2. You can't.  You could add a special and constant field and value to
_every_ Document in your index, and then you could get all your
Documents with 'special field name:special value' type of query.

Otis


--- Murat Ozcan <mozcan@sirius-group.com> wrote:

> Hi all,
> I have some questions about query
> 1. How can I get all the results in a field 
> ( I tried     field:*      but didn't work )
> 2. how can I get all results without a given term like select all
> results from a field where field is not equal ...
> ( I tried    -field:...     did not work)


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10315-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 20 03:19:11 2004
Return-Path: <lucene-user-return-10315-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 36464 invoked from network); 20 Sep 2004 03:19:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Sep 2004 03:19:11 -0000
Received: (qmail 5350 invoked by uid 500); 20 Sep 2004 03:19:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 5314 invoked by uid 500); 20 Sep 2004 03:19:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 5300 invoked by uid 99); 20 Sep 2004 03:19:03 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [205.152.59.71] (HELO imf23aec.mail.bellsouth.net) (205.152.59.71)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 19 Sep 2004 20:19:03 -0700
Received: from w2ks.synernet.com ([65.12.150.225])
          by imf23aec.mail.bellsouth.net
          (InterMail vM.5.01.06.11 201-253-122-130-111-20040605) with ESMTP
          id <20040920031901.JBGG13060.imf23aec.mail.bellsouth.net@w2ks.synernet.com>
          for <lucene-user@jakarta.apache.org>;
          Sun, 19 Sep 2004 23:19:01 -0400
Message-Id: <6.0.1.1.2.20040919230927.03cbae30@fast.synernet.com>
X-Sender: ftoth@fast.synernet.com
X-Mailer: QUALCOMM Windows Eudora Version 6.0.1.1
Date: Sun, 19 Sep 2004 23:18:23 -0400
To: lucene-user@jakarta.apache.org
From: Fred Toth <ftoth@synernet.com>
Subject: indexes won't close on windows
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

I have built a nice lucene application on linux with no problems,
but when I ported to windows for the customer, I started experiencing
problems with the index not closing. This prevents re-indexing.

I'm using lucene 1.4.1 under tomcat 5.0.28.

My search operation is very simple and works great:

create reader
create searcher
do search
extract N docs from hits
close searcher
close reader

However, on several occasions, when trying to re-index, I get
"can't delete file" errors from the indexer. I discovered that restarting
tomcat clears the problem. (Note that I'm recreating the index
completely, not updating.)

I've spent the last couple of hours trolling the archives and I've
found numerous references to windows problems with open files.

Is there a fix for this? How can I force the files to close? What's
the best work-around?

Many thanks,

Fred


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10316-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 20 03:44:22 2004
Return-Path: <lucene-user-return-10316-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 47567 invoked from network); 20 Sep 2004 03:44:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Sep 2004 03:44:22 -0000
Received: (qmail 27998 invoked by uid 500); 20 Sep 2004 03:44:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 27971 invoked by uid 500); 20 Sep 2004 03:44:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 27957 invoked by uid 99); 20 Sep 2004 03:44:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of fraschetti@gmail.com designates 64.233.170.196 as permitted sender)
Received: from [64.233.170.196] (HELO mproxy.gmail.com) (64.233.170.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 19 Sep 2004 20:44:12 -0700
Received: by mproxy.gmail.com with SMTP id 78so2444762rnl
        for <lucene-user@jakarta.apache.org>; Sun, 19 Sep 2004 20:44:11 -0700 (PDT)
Received: by 10.38.163.33 with SMTP id l33mr884931rne;
        Sun, 19 Sep 2004 20:44:10 -0700 (PDT)
Received: by 10.38.171.15 with HTTP; Sun, 19 Sep 2004 20:44:10 -0700 (PDT)
Message-ID: <cbdebdf8040919204477152f4b@mail.gmail.com>
Date: Sun, 19 Sep 2004 20:44:10 -0700
From: Chris Fraschetti <fraschetti@gmail.com>
Reply-To: Chris Fraschetti <fraschetti@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: range and content query
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

can someone assist me in building or deny the possibility of combing a
range query and a standard query?

say for instance i have two fields i'm searching on... one being the a
field with an epoch date associated with the entry, and the
content....  so how can I make a query to select a range of thos
epochs, as well as search through the content? can it be done in one
query, or do I have to perform a query upon a query, and if so, what
might the syntax look like?

-- 
____________________________
Chris Fraschetti
e fraschetti@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10317-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 20 06:24:31 2004
Return-Path: <lucene-user-return-10317-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21406 invoked from network); 20 Sep 2004 06:24:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Sep 2004 06:24:31 -0000
Received: (qmail 63291 invoked by uid 500); 20 Sep 2004 06:24:22 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 63243 invoked by uid 500); 20 Sep 2004 06:24:21 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 63229 invoked by uid 99); 20 Sep 2004 06:24:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 19 Sep 2004 23:24:20 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP
	id A972023BE1; Mon, 20 Sep 2004 08:26:01 +0200 (CEST)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 09740-05; Mon, 20 Sep 2004 08:26:01 +0200 (CEST)
Received: from tucholsky.office.tanto.de (unknown [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP
	id 7ECB023B94; Mon, 20 Sep 2004 08:26:01 +0200 (CEST)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id i8K6OHGL012154;
	Mon, 20 Sep 2004 08:24:17 +0200
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id i8K6OHX3012150;
	Mon, 20 Sep 2004 08:24:17 +0200
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16718.30609.544477.817026@tanto-xipolis.de>
Date: Mon, 20 Sep 2004 08:24:17 +0200
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	Chris Fraschetti <fraschetti@gmail.com>
Subject: Re: range and content query
In-Reply-To: <cbdebdf8040919204477152f4b@mail.gmail.com>
References: <cbdebdf8040919204477152f4b@mail.gmail.com>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Chris Fraschetti writes:
> can someone assist me in building or deny the possibility of combing a
> range query and a standard query?
> 
> say for instance i have two fields i'm searching on... one being the a
> field with an epoch date associated with the entry, and the
> content....  so how can I make a query to select a range of thos
> epochs, as well as search through the content? can it be done in one
> query, or do I have to perform a query upon a query, and if so, what
> might the syntax look like?
> 
if you create the query using the API use a boolean query to combine
the two basic queries.

If you use query parser use AND or OR.

Note that range queries are expanded into boolean queries (OR combined)
which may be a problem if the number of terms matching the range is too
big. Depends on your date entries and especially how precise they are.
Alternatively you might consider using a filter.

HTH
	Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10318-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 20 06:31:20 2004
Return-Path: <lucene-user-return-10318-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 24461 invoked from network); 20 Sep 2004 06:31:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Sep 2004 06:31:19 -0000
Received: (qmail 73394 invoked by uid 500); 20 Sep 2004 06:31:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 73221 invoked by uid 500); 20 Sep 2004 06:31:10 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 73206 invoked by uid 99); 20 Sep 2004 06:31:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 19 Sep 2004 23:31:09 -0700
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 20 Sep 2004 08:32:58 +0200
Message-ID: <414E799A.4050302@ifit.uni-klu.ac.at>
Date: Mon, 20 Sep 2004 08:32:58 +0200
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: indexes won't close on windows
References: <6.0.1.1.2.20040919230927.03cbae30@fast.synernet.com>
In-Reply-To: <6.0.1.1.2.20040919230927.03cbae30@fast.synernet.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 20 Sep 2004 06:32:58.0473 (UTC) FILETIME=[AB73B590:01C49EDB]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

  Hi Fred,

 I think that we can help you if you provide us your code, and the 
context in which it is used.
we need to see how you open and close the searcher and the reader, and 
what operations are you doing on index.

  All the best,

  Sergiu



Fred Toth wrote:

> Hi,
>
> I have built a nice lucene application on linux with no problems,
> but when I ported to windows for the customer, I started experiencing
> problems with the index not closing. This prevents re-indexing.
>
> I'm using lucene 1.4.1 under tomcat 5.0.28.
>
> My search operation is very simple and works great:
>
> create reader
> create searcher
> do search
> extract N docs from hits
> close searcher
> close reader
>
> However, on several occasions, when trying to re-index, I get
> "can't delete file" errors from the indexer. I discovered that restarting
> tomcat clears the problem. (Note that I'm recreating the index
> completely, not updating.)
>
> I've spent the last couple of hours trolling the archives and I've
> found numerous references to windows problems with open files.
>
> Is there a fix for this? How can I force the files to close? What's
> the best work-around?
>
> Many thanks,
>
> Fred
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10319-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 20 06:57:39 2004
Return-Path: <lucene-user-return-10319-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 36949 invoked from network); 20 Sep 2004 06:57:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Sep 2004 06:57:39 -0000
Received: (qmail 95348 invoked by uid 500); 20 Sep 2004 06:57:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 95325 invoked by uid 500); 20 Sep 2004 06:57:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 95297 invoked by uid 99); 20 Sep 2004 06:57:28 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of fraschetti@gmail.com designates 64.233.170.197 as permitted sender)
Received: from [64.233.170.197] (HELO mproxy.gmail.com) (64.233.170.197)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 19 Sep 2004 23:57:25 -0700
Received: by mproxy.gmail.com with SMTP id 79so1494808rnl
        for <lucene-user@jakarta.apache.org>; Sun, 19 Sep 2004 23:57:20 -0700 (PDT)
Received: by 10.38.74.50 with SMTP id w50mr1223348rna;
        Sun, 19 Sep 2004 23:57:20 -0700 (PDT)
Received: by 10.38.171.15 with HTTP; Sun, 19 Sep 2004 23:57:20 -0700 (PDT)
Message-ID: <cbdebdf804091923577aa30a40@mail.gmail.com>
Date: Sun, 19 Sep 2004 23:57:20 -0700
From: Chris Fraschetti <fraschetti@gmail.com>
Reply-To: Chris Fraschetti <fraschetti@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: range and content query
In-Reply-To: <16718.30609.544477.817026@tanto-xipolis.de>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <cbdebdf8040919204477152f4b@mail.gmail.com>
	 <16718.30609.544477.817026@tanto-xipolis.de>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I've more or less figured out the query string required to get a range
of docs.. say date[0 TO 10]    assuming my dates are from 1 to 10 (for
the sake of this example) ... my query has results that I don't
understand. if i do from 0 TO 10, then I only get results matching
0,1,10  ... if i do 0 TO 8, i get all results ... from 0 to 10...   if
i do   1 TO 5  ... then i get results 1,2,3,4,5,10  ... very strange.

here is how my query looks...
query: +date_field:[1 TO 5]

here is how the date was added...
Document doc = new Document();
doc.add(Field.UnIndexed("arcpath_field", filename));
doc.add(Field.Keyword("date_field", date));
doc.add(Field.Text("content_field", content));
writer.addDocument(doc);

I tried Field.Text for the date and also received the same results.
Essentially I have a loop to add 11 strings... indexes 0 to 10... and
add "doc0", "0", "some text"  for each..  and the results i get as as
explained above... any ideas?

Here is my simple searching code.. i'm currently not searching for any
text... i just want to test the range feature right now....

query_string = " +("+DATE_FIELD+":["+start_date+" TO "+end_date+"])";
Searcher searcher = new IndexSearcher(index_path);
QueryParser parser = new QueryParser(CONTENT_FIELD, new StandardAnalyzer());
parser.setOperator(QueryParser.DEFAULT_OPERATOR_OR);
Query query = parser.parse(query_string);
System.out.println("query: "+query.toString());
Hits hits = searcher.search(query);


On Mon, 20 Sep 2004 08:24:17 +0200, Morus Walter <morus.walter@tanto.de> wrote:
> Chris Fraschetti writes:
> > can someone assist me in building or deny the possibility of combing a
> > range query and a standard query?
> >
> > say for instance i have two fields i'm searching on... one being the a
> > field with an epoch date associated with the entry, and the
> > content....  so how can I make a query to select a range of thos
> > epochs, as well as search through the content? can it be done in one
> > query, or do I have to perform a query upon a query, and if so, what
> > might the syntax look like?
> > 
> if you create the query using the API use a boolean query to combine
> the two basic queries.
> 
> If you use query parser use AND or OR.
> 
> Note that range queries are expanded into boolean queries (OR combined)
> which may be a problem if the number of terms matching the range is too
> big. Depends on your date entries and especially how precise they are.
> Alternatively you might consider using a filter.
> 
> HTH
>        Morus
> 



-- 
___________________________________________________
Chris Fraschetti, Student CompSci System Admin
University of San Francisco
e fraschetti@gmail.com | http://meteora.cs.usfca.edu

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10320-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 20 07:09:10 2004
Return-Path: <lucene-user-return-10320-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 43844 invoked from network); 20 Sep 2004 07:09:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Sep 2004 07:09:09 -0000
Received: (qmail 5512 invoked by uid 500); 20 Sep 2004 07:08:55 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 5484 invoked by uid 500); 20 Sep 2004 07:08:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 5457 invoked by uid 99); 20 Sep 2004 07:08:54 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 20 Sep 2004 00:08:53 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP
	id 3658523BE1; Mon, 20 Sep 2004 09:10:34 +0200 (CEST)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 10684-03; Mon, 20 Sep 2004 09:10:34 +0200 (CEST)
Received: from tucholsky.office.tanto.de (unknown [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP
	id 1995823B94; Mon, 20 Sep 2004 09:10:34 +0200 (CEST)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id i8K78oGL012483;
	Mon, 20 Sep 2004 09:08:50 +0200
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id i8K78oJH012479;
	Mon, 20 Sep 2004 09:08:50 +0200
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16718.33282.259419.111052@tanto-xipolis.de>
Date: Mon, 20 Sep 2004 09:08:50 +0200
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	Chris Fraschetti <fraschetti@gmail.com>
Subject: Re: range and content query
In-Reply-To: <cbdebdf804091923577aa30a40@mail.gmail.com>
References: <cbdebdf8040919204477152f4b@mail.gmail.com>
	<16718.30609.544477.817026@tanto-xipolis.de>
	<cbdebdf804091923577aa30a40@mail.gmail.com>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Chris Fraschetti writes:
> I've more or less figured out the query string required to get a range
> of docs.. say date[0 TO 10]    assuming my dates are from 1 to 10 (for
> the sake of this example) ... my query has results that I don't
> understand. if i do from 0 TO 10, then I only get results matching
> 0,1,10  ... if i do 0 TO 8, i get all results ... from 0 to 10...   if
> i do   1 TO 5  ... then i get results 1,2,3,4,5,10  ... very strange.
> 
that's not strange. Lucene indexes strings and compares strings. Not numbers.
So the order is
1
10
101
11
2
20
21
3
4
and so on

I't up to you to make your number look a way that it will work, e.g.
use leading '0' to get
001
002
003
004
010
011
020
021
...

I think there's a page in the wiki about these issues.

> here is how my query looks...
> query: +date_field:[1 TO 5]
> 
> here is how the date was added...
> Document doc = new Document();
> doc.add(Field.UnIndexed("arcpath_field", filename));
> doc.add(Field.Keyword("date_field", date));
> doc.add(Field.Text("content_field", content));
> writer.addDocument(doc);
> 
> I tried Field.Text for the date and also received the same results.
> Essentially I have a loop to add 11 strings... indexes 0 to 10... and
> add "doc0", "0", "some text"  for each..  and the results i get as as
> explained above... any ideas?
> 
> Here is my simple searching code.. i'm currently not searching for any
> text... i just want to test the range feature right now....
> 
> query_string = " +("+DATE_FIELD+":["+start_date+" TO "+end_date+"])";
> Searcher searcher = new IndexSearcher(index_path);
> QueryParser parser = new QueryParser(CONTENT_FIELD, new StandardAnalyzer());
> parser.setOperator(QueryParser.DEFAULT_OPERATOR_OR);
> Query query = parser.parse(query_string);
> System.out.println("query: "+query.toString());
> Hits hits = searcher.search(query);
> 

It's a bad practice to create search strings that have to be decomposed
by query parser again, if have the parts already at hand.
At least in most cases.
I don't know the details how and when query parser will call the analyzer
and what standard analyzer does with numbers.
What does query.toString() output?

But the main problem seems to be your misunderstanding of searching numbers
in lucene. They are just strings and are treated by their lexical 
representation not their numeric value.

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10321-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 20 07:27:52 2004
Return-Path: <lucene-user-return-10321-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 62415 invoked from network); 20 Sep 2004 07:27:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Sep 2004 07:27:51 -0000
Received: (qmail 20672 invoked by uid 500); 20 Sep 2004 07:27:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 20649 invoked by uid 500); 20 Sep 2004 07:27:39 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 20634 invoked by uid 99); 20 Sep 2004 07:27:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of fraschetti@gmail.com designates 64.233.170.203 as permitted sender)
Received: from [64.233.170.203] (HELO mproxy.gmail.com) (64.233.170.203)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 20 Sep 2004 00:27:38 -0700
Received: by mproxy.gmail.com with SMTP id 79so1506739rnl
        for <lucene-user@jakarta.apache.org>; Mon, 20 Sep 2004 00:27:34 -0700 (PDT)
Received: by 10.38.15.66 with SMTP id 66mr1506882rno;
        Mon, 20 Sep 2004 00:27:34 -0700 (PDT)
Received: by 10.38.171.15 with HTTP; Mon, 20 Sep 2004 00:27:34 -0700 (PDT)
Message-ID: <cbdebdf804092000271acfb214@mail.gmail.com>
Date: Mon, 20 Sep 2004 00:27:34 -0700
From: Chris Fraschetti <fraschetti@gmail.com>
Reply-To: Chris Fraschetti <fraschetti@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: range and content query
In-Reply-To: <16718.33282.259419.111052@tanto-xipolis.de>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <cbdebdf8040919204477152f4b@mail.gmail.com>
	 <16718.30609.544477.817026@tanto-xipolis.de>
	 <cbdebdf804091923577aa30a40@mail.gmail.com>
	 <16718.33282.259419.111052@tanto-xipolis.de>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

very correct you are. changing the format of the numbers when i index
then and when i do the range fixed my problem.. thanks much.


On Mon, 20 Sep 2004 09:08:50 +0200, Morus Walter <morus.walter@tanto.de> wrote:
> Chris Fraschetti writes:
> > I've more or less figured out the query string required to get a range
> > of docs.. say date[0 TO 10]    assuming my dates are from 1 to 10 (for
> > the sake of this example) ... my query has results that I don't
> > understand. if i do from 0 TO 10, then I only get results matching
> > 0,1,10  ... if i do 0 TO 8, i get all results ... from 0 to 10...   if
> > i do   1 TO 5  ... then i get results 1,2,3,4,5,10  ... very strange.
> >
> that's not strange. Lucene indexes strings and compares strings. Not numbers.
> So the order is
> 1
> 10
> 101
> 11
> 2
> 20
> 21
> 3
> 4
> and so on
> 
> I't up to you to make your number look a way that it will work, e.g.
> use leading '0' to get
> 001
> 002
> 003
> 004
> 010
> 011
> 020
> 021
> ...
> 
> I think there's a page in the wiki about these issues.
> 
> > here is how my query looks...
> > query: +date_field:[1 TO 5]
> >
> > here is how the date was added...
> > Document doc = new Document();
> > doc.add(Field.UnIndexed("arcpath_field", filename));
> > doc.add(Field.Keyword("date_field", date));
> > doc.add(Field.Text("content_field", content));
> > writer.addDocument(doc);
> >
> > I tried Field.Text for the date and also received the same results.
> > Essentially I have a loop to add 11 strings... indexes 0 to 10... and
> > add "doc0", "0", "some text"  for each..  and the results i get as as
> > explained above... any ideas?
> >
> > Here is my simple searching code.. i'm currently not searching for any
> > text... i just want to test the range feature right now....
> >
> > query_string = " +("+DATE_FIELD+":["+start_date+" TO "+end_date+"])";
> > Searcher searcher = new IndexSearcher(index_path);
> > QueryParser parser = new QueryParser(CONTENT_FIELD, new StandardAnalyzer());
> > parser.setOperator(QueryParser.DEFAULT_OPERATOR_OR);
> > Query query = parser.parse(query_string);
> > System.out.println("query: "+query.toString());
> > Hits hits = searcher.search(query);
> >
> 
> It's a bad practice to create search strings that have to be decomposed
> by query parser again, if have the parts already at hand.
> At least in most cases.
> I don't know the details how and when query parser will call the analyzer
> and what standard analyzer does with numbers.
> What does query.toString() output?
> 
> But the main problem seems to be your misunderstanding of searching numbers
> in lucene. They are just strings and are treated by their lexical
> representation not their numeric value.
> 
> Morus
> 



-- 
___________________________________________________
Chris Fraschetti, Student CompSci System Admin
University of San Francisco
e fraschetti@gmail.com | http://meteora.cs.usfca.edu

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10322-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 20 11:12:26 2004
Return-Path: <lucene-user-return-10322-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 99191 invoked from network); 20 Sep 2004 11:12:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Sep 2004 11:12:26 -0000
Received: (qmail 32633 invoked by uid 500); 20 Sep 2004 11:12:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 32567 invoked by uid 500); 20 Sep 2004 11:12:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 32538 invoked by uid 99); 20 Sep 2004 11:12:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [205.152.59.70] (HELO imf22aec.mail.bellsouth.net) (205.152.59.70)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 20 Sep 2004 04:12:10 -0700
Received: from w2ks.synernet.com ([65.12.150.225])
          by imf22aec.mail.bellsouth.net
          (InterMail vM.5.01.06.11 201-253-122-130-111-20040605) with ESMTP
          id <20040920111203.CPEQ219.imf22aec.mail.bellsouth.net@w2ks.synernet.com>
          for <lucene-user@jakarta.apache.org>;
          Mon, 20 Sep 2004 07:12:03 -0400
Message-Id: <6.0.1.1.2.20040920070127.04251a90@fast.synernet.com>
X-Sender: ftoth@fast.synernet.com
X-Mailer: QUALCOMM Windows Eudora Version 6.0.1.1
Date: Mon, 20 Sep 2004 07:11:22 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
From: Fred Toth <ftoth@synernet.com>
Subject: Re: indexes won't close on windows
In-Reply-To: <414E799A.4050302@ifit.uni-klu.ac.at>
References: <6.0.1.1.2.20040919230927.03cbae30@fast.synernet.com>
 <414E799A.4050302@ifit.uni-klu.ac.at>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Sergiu,

My searches take place in tomcat, in a struts action, in a single method
Abbreviated code:

         IndexReader reader = null;
         IndexSearcher searcher = null;
         reader = IndexReader.open(indexName);
           searcher = new IndexSearcher(reader);
         // code to do a search and extract hits, works fine.
         searcher.close();
           reader.close();

I have a command-line indexer that is a minor modification of the
IndexHTML.java that comes with Lucene. It does this:

         writer = new IndexWriter(index, new StandardAnalyzer(), create);
         // add docs

(with the create flag set true). It is here that I get a failure, "can't 
delete _b9.cfs"
or similar. This happens when tomcat is completely idle (we're still 
testing and
not live), so all readers and searchers should be closed, as least as far as
java is concerned. But windows will not allow the indexer to delete the old 
index.

I restarted tomcat and the problem cleared. It's as if the JVM on windows 
doesn't
get the file closes quite right.

I've seen numerous references on this list to similar behavior, but it's 
not clear
what the fix might be.

Many thanks,

Fred

At 02:32 AM 9/20/2004, you wrote:
>  Hi Fred,
>
>I think that we can help you if you provide us your code, and the context 
>in which it is used.
>we need to see how you open and close the searcher and the reader, and 
>what operations are you doing on index.
>
>  All the best,
>
>  Sergiu
>
>
>
>Fred Toth wrote:
>
>>Hi,
>>
>>I have built a nice lucene application on linux with no problems,
>>but when I ported to windows for the customer, I started experiencing
>>problems with the index not closing. This prevents re-indexing.
>>
>>I'm using lucene 1.4.1 under tomcat 5.0.28.
>>
>>My search operation is very simple and works great:
>>
>>create reader
>>create searcher
>>do search
>>extract N docs from hits
>>close searcher
>>close reader
>>
>>However, on several occasions, when trying to re-index, I get
>>"can't delete file" errors from the indexer. I discovered that restarting
>>tomcat clears the problem. (Note that I'm recreating the index
>>completely, not updating.)
>>
>>I've spent the last couple of hours trolling the archives and I've
>>found numerous references to windows problems with open files.
>>
>>Is there a fix for this? How can I force the files to close? What's
>>the best work-around?
>>
>>Many thanks,
>>
>>Fred
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10323-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 20 12:36:50 2004
Return-Path: <lucene-user-return-10323-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 48601 invoked from network); 20 Sep 2004 12:36:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Sep 2004 12:36:49 -0000
Received: (qmail 58678 invoked by uid 500); 20 Sep 2004 12:36:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 58370 invoked by uid 500); 20 Sep 2004 12:36:08 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 58319 invoked by uid 99); 20 Sep 2004 12:36:07 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.242] (HELO web12705.mail.yahoo.com) (216.136.173.242)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 20 Sep 2004 05:36:04 -0700
Message-ID: <20040920123559.25370.qmail@web12705.mail.yahoo.com>
Received: from [195.29.108.77] by web12705.mail.yahoo.com via HTTP; Mon, 20 Sep 2004 05:35:59 PDT
Date: Mon, 20 Sep 2004 05:35:59 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: indexes won't close on windows
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <6.0.1.1.2.20040920070127.04251a90@fast.synernet.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Fred,

I won't get into the details here, but you shouldn't (have to) open a
new IndexReader/Searcher on each request (I'll assume the code below is
from your Actions'e xecute method).  You should cache and re-use
IndexReaders (and IndexSearchers).  There may be a FAQ entry regarding
that, I'm not sure.  Closing them on every request is also something
you shouldn't do (opening and closing them is, in simple terms, just
doing too much work.  Open N files, read them, close them.  Open N
files, read them, close them.  And so on....)

Regarding failing deletion, that's a Windows OS thing - it won't let
you remove a file while another process has it open.  I am not certain
where exactly this error comes from in Lucene (exception stack trace?),
but I thought the Lucene code included work-arounds for this.

Otis

--- Fred Toth <ftoth@synernet.com> wrote:

> Hi Sergiu,
> 
> My searches take place in tomcat, in a struts action, in a single
> method
> Abbreviated code:
> 
>          IndexReader reader = null;
>          IndexSearcher searcher = null;
>          reader = IndexReader.open(indexName);
>            searcher = new IndexSearcher(reader);
>          // code to do a search and extract hits, works fine.
>          searcher.close();
>            reader.close();
> 
> I have a command-line indexer that is a minor modification of the
> IndexHTML.java that comes with Lucene. It does this:
> 
>          writer = new IndexWriter(index, new StandardAnalyzer(),
> create);
>          // add docs
> 
> (with the create flag set true). It is here that I get a failure,
> "can't 
> delete _b9.cfs"
> or similar. This happens when tomcat is completely idle (we're still 
> testing and
> not live), so all readers and searchers should be closed, as least as
> far as
> java is concerned. But windows will not allow the indexer to delete
> the old 
> index.
> 
> I restarted tomcat and the problem cleared. It's as if the JVM on
> windows 
> doesn't
> get the file closes quite right.
> 
> I've seen numerous references on this list to similar behavior, but
> it's 
> not clear
> what the fix might be.
> 
> Many thanks,
> 
> Fred
> 
> At 02:32 AM 9/20/2004, you wrote:
> >  Hi Fred,
> >
> >I think that we can help you if you provide us your code, and the
> context 
> >in which it is used.
> >we need to see how you open and close the searcher and the reader,
> and 
> >what operations are you doing on index.
> >
> >  All the best,
> >
> >  Sergiu
> >
> >
> >
> >Fred Toth wrote:
> >
> >>Hi,
> >>
> >>I have built a nice lucene application on linux with no problems,
> >>but when I ported to windows for the customer, I started
> experiencing
> >>problems with the index not closing. This prevents re-indexing.
> >>
> >>I'm using lucene 1.4.1 under tomcat 5.0.28.
> >>
> >>My search operation is very simple and works great:
> >>
> >>create reader
> >>create searcher
> >>do search
> >>extract N docs from hits
> >>close searcher
> >>close reader
> >>
> >>However, on several occasions, when trying to re-index, I get
> >>"can't delete file" errors from the indexer. I discovered that
> restarting
> >>tomcat clears the problem. (Note that I'm recreating the index
> >>completely, not updating.)
> >>
> >>I've spent the last couple of hours trolling the archives and I've
> >>found numerous references to windows problems with open files.
> >>
> >>Is there a fix for this? How can I force the files to close? What's
> >>the best work-around?
> >>
> >>Many thanks,
> >>
> >>Fred
> >>
> >>
>
>>---------------------------------------------------------------------
> >>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> >
> >
>
>---------------------------------------------------------------------
> >To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10324-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 20 12:49:17 2004
Return-Path: <lucene-user-return-10324-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 54347 invoked from network); 20 Sep 2004 12:49:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Sep 2004 12:49:16 -0000
Received: (qmail 77526 invoked by uid 500); 20 Sep 2004 12:49:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 77444 invoked by uid 500); 20 Sep 2004 12:49:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 77426 invoked by uid 99); 20 Sep 2004 12:49:07 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 20 Sep 2004 05:49:06 -0700
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 20 Sep 2004 14:50:41 +0200
Message-ID: <414ED221.2050207@ifit.uni-klu.ac.at>
Date: Mon, 20 Sep 2004 14:50:41 +0200
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: indexes won't close on windows
References: <6.0.1.1.2.20040919230927.03cbae30@fast.synernet.com> <414E799A.4050302@ifit.uni-klu.ac.at> <6.0.1.1.2.20040920070127.04251a90@fast.synernet.com>
In-Reply-To: <6.0.1.1.2.20040920070127.04251a90@fast.synernet.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 20 Sep 2004 12:50:41.0919 (UTC) FILETIME=[6FEB20F0:01C49F10]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Fred,

 That's right, there are many references to this kind of problems in the 
lucene-user list.
This suggestions were already made, but I'll list them once again:

1. One way to use the IndexSearcher is to use yopur code, but I don't 
encourage users to do that
            IndexReader reader = null;
        IndexSearcher searcher = null;
        reader = IndexReader.open(indexName);
          searcher = new IndexSearcher(reader);

    It's better to use the constructor that uses a String to create a 
IndexSearcher.
|*IndexSearcher 
<http://localhost:8080/webdoc/lucene/docs/api/org/apache/lucene/search/IndexSearcher.html#IndexSearcher%28java.lang.String%29>*(String 
<http://java.sun.com/j2se/1.4/docs/api/java/lang/String.html> path)|. I 
even suggest that the path to be obtained as

File indexFolder = new File(luceneIndex);
IndexSearcher searcher = new IndexSearcher(indexFolder.toString()).

2. I can imagine situations when the lucene index must be created at 
each startup, but I think that this is very rare,
so I suggest to use code like

if(indexExists(indexFolder))
    writer = new IndexWriter(index, new StandardAnalyzer(), false);
else
    writer = new IndexWriter(index, new StandardAnalyzer(), true);
//don#t forget to close the indexWriter when you create the index and to 
open it again

I use a indexExists function like
boolean indexExists(File indexFolder)
    return indexFolder.exists()

and it works propertly .... even if that's not the best example of 
testing the existence of the index

3.'It is here that I get a failure, "can't delete _b9.cfs"'

 that's ptobably because of the way you use the searcher, and probably 
because you don't close the readers, writers and searchers propertly.
4. be sure that all close() methods are guarded with
    catch(Exception e){
          logger.log(e);
    } blocks

5. Pay attention if you use a multithreading environment, in this case 
you have to make indexing, delition and search synchronized

   So ...

  Have fun,

    Sergiu

PS: I think that I'll submit some code with synchronized 
index/delete/search operations and to tell why I need to use it.


Fred Toth wrote:

> Hi Sergiu,
>
> My searches take place in tomcat, in a struts action, in a single method
> Abbreviated code:
>
>         IndexReader reader = null;
>         IndexSearcher searcher = null;
>         reader = IndexReader.open(indexName);
>           searcher = new IndexSearcher(reader);
>         // code to do a search and extract hits, works fine.
>         searcher.close();
>           reader.close();
>
> I have a command-line indexer that is a minor modification of the
> IndexHTML.java that comes with Lucene. It does this:
>
>         writer = new IndexWriter(index, new StandardAnalyzer(), create);
>         // add docs
>
> (with the create flag set true). It is here that I get a failure, 
> "can't delete _b9.cfs"
> or similar. This happens when tomcat is completely idle (we're still 
> testing and
> not live), so all readers and searchers should be closed, as least as 
> far as
> java is concerned. But windows will not allow the indexer to delete 
> the old index.
>
> I restarted tomcat and the problem cleared. It's as if the JVM on 
> windows doesn't
> get the file closes quite right.
>
> I've seen numerous references on this list to similar behavior, but 
> it's not clear
> what the fix might be.
>
> Many thanks,
>
> Fred
>
> At 02:32 AM 9/20/2004, you wrote:
>
>>  Hi Fred,
>>
>> I think that we can help you if you provide us your code, and the 
>> context in which it is used.
>> we need to see how you open and close the searcher and the reader, 
>> and what operations are you doing on index.
>>
>>  All the best,
>>
>>  Sergiu
>>
>>
>>
>> Fred Toth wrote:
>>
>>> Hi,
>>>
>>> I have built a nice lucene application on linux with no problems,
>>> but when I ported to windows for the customer, I started experiencing
>>> problems with the index not closing. This prevents re-indexing.
>>>
>>> I'm using lucene 1.4.1 under tomcat 5.0.28.
>>>
>>> My search operation is very simple and works great:
>>>
>>> create reader
>>> create searcher
>>> do search
>>> extract N docs from hits
>>> close searcher
>>> close reader
>>>
>>> However, on several occasions, when trying to re-index, I get
>>> "can't delete file" errors from the indexer. I discovered that 
>>> restarting
>>> tomcat clears the problem. (Note that I'm recreating the index
>>> completely, not updating.)
>>>
>>> I've spent the last couple of hours trolling the archives and I've
>>> found numerous references to windows problems with open files.
>>>
>>> Is there a fix for this? How can I force the files to close? What's
>>> the best work-around?
>>>
>>> Many thanks,
>>>
>>> Fred
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10325-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 20 13:07:31 2004
Return-Path: <lucene-user-return-10325-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 63488 invoked from network); 20 Sep 2004 13:07:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Sep 2004 13:07:31 -0000
Received: (qmail 17870 invoked by uid 500); 20 Sep 2004 13:06:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 17831 invoked by uid 500); 20 Sep 2004 13:06:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 17777 invoked by uid 99); 20 Sep 2004 13:06:55 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=MIME_BASE64_NO_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 20 Sep 2004 06:06:53 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id 0454723B93
	for <lucene-user@jakarta.apache.org>; Mon, 20 Sep 2004 15:08:31 +0200 (CEST)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 18986-08 for <lucene-user@jakarta.apache.org>;
 Mon, 20 Sep 2004 15:08:30 +0200 (CEST)
Received: from tucholsky.office.tanto.de (unknown [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP id BFEBC23B8F
	for <lucene-user@jakarta.apache.org>; Mon, 20 Sep 2004 15:08:30 +0200 (CEST)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id i8KD6kGL017194
	for <lucene-user@jakarta.apache.org>; Mon, 20 Sep 2004 15:06:46 +0200
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id i8KD6kQJ017190;
	Mon, 20 Sep 2004 15:06:46 +0200
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="ojGmIBsaJI"
Content-Transfer-Encoding: 7bit
Message-ID: <16718.54758.331064.877094@tanto-xipolis.de>
Date: Mon, 20 Sep 2004 15:06:46 +0200
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: NGramSpeller contribution -- Re: combining open office spellchecker
 with Lucene
In-Reply-To: <4149E258.8030409@tropo.com>
References: <000001c49572$72cacc00$0a00a8c0@aadlaptop>
	<41407E48.20401@tropo.com>
	<4140818C.9010305@getopt.org>
	<4147450C.7080206@tropo.com>
	<16713.29469.681941.837315@tanto-xipolis.de>
	<4149E258.8030409@tropo.com>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--ojGmIBsaJI
Content-Type: text/plain; charset=us-ascii
Content-Description: message body text
Content-Transfer-Encoding: 7bit

David Spencer writes:
> > 
> > could you put the current version of your code on that website as a java
> 
> Weblog entry updated:
> 
> http://searchmorph.com/weblog/index.php?id=23
> 
thanks
> 
> Great suggestion and thanks for that idiom - I should know such things 
> by now. To clarify the "issue", it's just a performance one, not other 
> functionality...anyway I put in the code - and to be scientific I 
> benchmarked it two times before the change and two times after - and the 
> results were suprising the same both times (1:45 to 1:50 with an index 
> that takes up > 200MB). Probably there are cases where this will run 
> faster, and the code seems more "correct" now so it's in.
> 
Ahh, I see, you check the field later.
The logging made me think, you index all fields you loop over, in which
case one might get unwanted words into the ngram index.
> 
> 
> > 
> > 
> > An interesting application of this might be an ngram-Index enhanced version
> > of the FuzzyQuery. While this introduces more complexity on the indexing
> > side, it might be a large speedup for fuzzy searches.
> 
> I also thinking of reviewing the list to see if anyone had done a "Jaro 
> Winkler" fuzzy query yet and doing that....
> 
I went into another direction, and changed the ngram index and search
to use a simliarity that computes 

   m * m / ( n1 * n2)

where m is the number of matches and n1 is the number of ngrams in the
query and n2 is the number of ngrams in the word.
(At least if I got that right; I'm not sure if I understand all parts
of the similarity class correctly)

After removing the document boost in the ngram index based on the 
word frequency in the original index I find the results pretty good.
My data is a number of encyclopedias and dictionaries and I only use the
headwords for the ngram index. Term frequency doesn't seem relevent
in this case.

I still use the levenshtein distance to modify the score and sort according
to  score / distance  but in most cases this does not make a difference.
So I'll probably drop the distance calculation completely.

I also see few difference between using 2- and 3-grams on the one hand
and only using 2-grams on the other. So I'll presumably drop the 3-grams.

I'm not sure, if the similarity I use, is useful in general, but I 
attached it to this message in case someone is interested.
Note that you need to set the similarity for the index writer and searcher
and thus have to reindex in case you want to give it a try.

Morus



--ojGmIBsaJI
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
--ojGmIBsaJI--

From lucene-user-return-10326-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 20 13:30:24 2004
Return-Path: <lucene-user-return-10326-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 82464 invoked from network); 20 Sep 2004 13:30:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Sep 2004 13:30:24 -0000
Received: (qmail 50900 invoked by uid 500); 20 Sep 2004 13:30:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 50781 invoked by uid 500); 20 Sep 2004 13:30:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 50761 invoked by uid 99); 20 Sep 2004 13:30:13 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [205.152.59.69] (HELO imf21aec.mail.bellsouth.net) (205.152.59.69)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 20 Sep 2004 06:30:10 -0700
Received: from w2ks.synernet.com ([65.12.150.225])
          by imf21aec.mail.bellsouth.net
          (InterMail vM.5.01.06.11 201-253-122-130-111-20040605) with ESMTP
          id <20040920132959.YVSF27018.imf21aec.mail.bellsouth.net@w2ks.synernet.com>
          for <lucene-user@jakarta.apache.org>;
          Mon, 20 Sep 2004 09:29:59 -0400
Message-Id: <6.0.1.1.2.20040920085446.03cac998@fast.synernet.com>
X-Sender: ftoth@fast.synernet.com
X-Mailer: QUALCOMM Windows Eudora Version 6.0.1.1
Date: Mon, 20 Sep 2004 09:29:07 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
From: Fred Toth <ftoth@synernet.com>
Subject: Re: indexes won't close on windows
In-Reply-To: <20040920123559.25370.qmail@web12705.mail.yahoo.com>
References: <6.0.1.1.2.20040920070127.04251a90@fast.synernet.com>
 <20040920123559.25370.qmail@web12705.mail.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Otis,

I understand about reusing readers and searchers, but I was
working on the "do the simplest thing that can possibly work" theory
for starters, in part because I wanted to be sure that I could recreate
the index safely as needed.

I should emphasize that I developed for weeks on linux without ever
seeing this problem, but in less than 24 hours after installing on the
customer's windows box, I hit the error.

So is a close() not really a close()? Is Lucene actually hanging on to
open files? Or is this a JVM on windows bug? (I'm using the latest 1.4.2
from Sun.)

As I mentioned, this has turned up off and on in the mail archives. Is
there no well-understood fix or work-around? I'll get a stack trace
set up for the next time it happens.

Thanks,

Fred

At 08:35 AM 9/20/2004, you wrote:
>Fred,
>
>I won't get into the details here, but you shouldn't (have to) open a
>new IndexReader/Searcher on each request (I'll assume the code below is
>from your Actions'e xecute method).  You should cache and re-use
>IndexReaders (and IndexSearchers).  There may be a FAQ entry regarding
>that, I'm not sure.  Closing them on every request is also something
>you shouldn't do (opening and closing them is, in simple terms, just
>doing too much work.  Open N files, read them, close them.  Open N
>files, read them, close them.  And so on....)
>
>Regarding failing deletion, that's a Windows OS thing - it won't let
>you remove a file while another process has it open.  I am not certain
>where exactly this error comes from in Lucene (exception stack trace?),
>but I thought the Lucene code included work-arounds for this.
>
>Otis
>
>--- Fred Toth <ftoth@synernet.com> wrote:
>
> > Hi Sergiu,
> >
> > My searches take place in tomcat, in a struts action, in a single
> > method
> > Abbreviated code:
> >
> >          IndexReader reader = null;
> >          IndexSearcher searcher = null;
> >          reader = IndexReader.open(indexName);
> >            searcher = new IndexSearcher(reader);
> >          // code to do a search and extract hits, works fine.
> >          searcher.close();
> >            reader.close();
> >
> > I have a command-line indexer that is a minor modification of the
> > IndexHTML.java that comes with Lucene. It does this:
> >
> >          writer = new IndexWriter(index, new StandardAnalyzer(),
> > create);
> >          // add docs
> >
> > (with the create flag set true). It is here that I get a failure,
> > "can't
> > delete _b9.cfs"
> > or similar. This happens when tomcat is completely idle (we're still
> > testing and
> > not live), so all readers and searchers should be closed, as least as
> > far as
> > java is concerned. But windows will not allow the indexer to delete
> > the old
> > index.
> >
> > I restarted tomcat and the problem cleared. It's as if the JVM on
> > windows
> > doesn't
> > get the file closes quite right.
> >
> > I've seen numerous references on this list to similar behavior, but
> > it's
> > not clear
> > what the fix might be.
> >
> > Many thanks,
> >
> > Fred
> >
> > At 02:32 AM 9/20/2004, you wrote:
> > >  Hi Fred,
> > >
> > >I think that we can help you if you provide us your code, and the
> > context
> > >in which it is used.
> > >we need to see how you open and close the searcher and the reader,
> > and
> > >what operations are you doing on index.
> > >
> > >  All the best,
> > >
> > >  Sergiu
> > >
> > >
> > >
> > >Fred Toth wrote:
> > >
> > >>Hi,
> > >>
> > >>I have built a nice lucene application on linux with no problems,
> > >>but when I ported to windows for the customer, I started
> > experiencing
> > >>problems with the index not closing. This prevents re-indexing.
> > >>
> > >>I'm using lucene 1.4.1 under tomcat 5.0.28.
> > >>
> > >>My search operation is very simple and works great:
> > >>
> > >>create reader
> > >>create searcher
> > >>do search
> > >>extract N docs from hits
> > >>close searcher
> > >>close reader
> > >>
> > >>However, on several occasions, when trying to re-index, I get
> > >>"can't delete file" errors from the indexer. I discovered that
> > restarting
> > >>tomcat clears the problem. (Note that I'm recreating the index
> > >>completely, not updating.)
> > >>
> > >>I've spent the last couple of hours trolling the archives and I've
> > >>found numerous references to windows problems with open files.
> > >>
> > >>Is there a fix for this? How can I force the files to close? What's
> > >>the best work-around?
> > >>
> > >>Many thanks,
> > >>
> > >>Fred
> > >>
> > >>
> >
> >>---------------------------------------------------------------------
> > >>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > >>For additional commands, e-mail:
> > lucene-user-help@jakarta.apache.org
> > >
> > >
> >
> >---------------------------------------------------------------------
> > >To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > >For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10327-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 20 13:41:26 2004
Return-Path: <lucene-user-return-10327-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 87943 invoked from network); 20 Sep 2004 13:41:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Sep 2004 13:41:26 -0000
Received: (qmail 71161 invoked by uid 500); 20 Sep 2004 13:41:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 71100 invoked by uid 500); 20 Sep 2004 13:41:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 71062 invoked by uid 99); 20 Sep 2004 13:41:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [205.152.59.69] (HELO imf21aec.mail.bellsouth.net) (205.152.59.69)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 20 Sep 2004 06:41:11 -0700
Received: from w2ks.synernet.com ([65.12.150.225])
          by imf21aec.mail.bellsouth.net
          (InterMail vM.5.01.06.11 201-253-122-130-111-20040605) with ESMTP
          id <20040920134051.ZDVB27018.imf21aec.mail.bellsouth.net@w2ks.synernet.com>
          for <lucene-user@jakarta.apache.org>;
          Mon, 20 Sep 2004 09:40:51 -0400
Message-Id: <6.0.1.1.2.20040920093611.04279670@fast.synernet.com>
X-Sender: ftoth@fast.synernet.com
X-Mailer: QUALCOMM Windows Eudora Version 6.0.1.1
Date: Mon, 20 Sep 2004 09:40:00 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
From: Fred Toth <ftoth@synernet.com>
Subject: Re: indexes won't close on windows
In-Reply-To: <414ED221.2050207@ifit.uni-klu.ac.at>
References: <6.0.1.1.2.20040919230927.03cbae30@fast.synernet.com>
 <414E799A.4050302@ifit.uni-klu.ac.at>
 <6.0.1.1.2.20040920070127.04251a90@fast.synernet.com>
 <414ED221.2050207@ifit.uni-klu.ac.at>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Sergiu,

Thanks for your suggestions. I will try using just the IndexSearcher(String...)
and see if that makes a difference in the problem. I can confirm that
I am doing a proper close() and that I'm checking for exceptions. Again,
the problem is not with the search function, but with the command-line
indexer. It is not run at startup, but on demand when the index needs
to be recreated.

Thanks,

Fred

At 08:50 AM 9/20/2004, you wrote:
>Hi Fred,
>
>That's right, there are many references to this kind of problems in the 
>lucene-user list.
>This suggestions were already made, but I'll list them once again:
>
>1. One way to use the IndexSearcher is to use yopur code, but I don't 
>encourage users to do that
>            IndexReader reader = null;
>        IndexSearcher searcher = null;
>        reader = IndexReader.open(indexName);
>          searcher = new IndexSearcher(reader);
>
>    It's better to use the constructor that uses a String to create a 
> IndexSearcher.
>|*IndexSearcher 
><http://localhost:8080/webdoc/lucene/docs/api/org/apache/lucene/search/IndexSearcher.html#IndexSearcher%28java.lang.String%29>*(String 
><http://java.sun.com/j2se/1.4/docs/api/java/lang/String.html> path)|. I 
>even suggest that the path to be obtained as
>
>File indexFolder = new File(luceneIndex);
>IndexSearcher searcher = new IndexSearcher(indexFolder.toString()).
>
>2. I can imagine situations when the lucene index must be created at each 
>startup, but I think that this is very rare,
>so I suggest to use code like
>
>if(indexExists(indexFolder))
>    writer = new IndexWriter(index, new StandardAnalyzer(), false);
>else
>    writer = new IndexWriter(index, new StandardAnalyzer(), true);
>//don#t forget to close the indexWriter when you create the index and to 
>open it again
>
>I use a indexExists function like
>boolean indexExists(File indexFolder)
>    return indexFolder.exists()
>
>and it works propertly .... even if that's not the best example of testing 
>the existence of the index
>
>3.'It is here that I get a failure, "can't delete _b9.cfs"'
>
>that's ptobably because of the way you use the searcher, and probably 
>because you don't close the readers, writers and searchers propertly.
>4. be sure that all close() methods are guarded with
>    catch(Exception e){
>          logger.log(e);
>    } blocks
>
>5. Pay attention if you use a multithreading environment, in this case you 
>have to make indexing, delition and search synchronized
>
>   So ...
>
>  Have fun,
>
>    Sergiu
>
>PS: I think that I'll submit some code with synchronized 
>index/delete/search operations and to tell why I need to use it.
>
>
>Fred Toth wrote:
>
>>Hi Sergiu,
>>
>>My searches take place in tomcat, in a struts action, in a single method
>>Abbreviated code:
>>
>>         IndexReader reader = null;
>>         IndexSearcher searcher = null;
>>         reader = IndexReader.open(indexName);
>>           searcher = new IndexSearcher(reader);
>>         // code to do a search and extract hits, works fine.
>>         searcher.close();
>>           reader.close();
>>
>>I have a command-line indexer that is a minor modification of the
>>IndexHTML.java that comes with Lucene. It does this:
>>
>>         writer = new IndexWriter(index, new StandardAnalyzer(), create);
>>         // add docs
>>
>>(with the create flag set true). It is here that I get a failure, "can't 
>>delete _b9.cfs"
>>or similar. This happens when tomcat is completely idle (we're still 
>>testing and
>>not live), so all readers and searchers should be closed, as least as far as
>>java is concerned. But windows will not allow the indexer to delete the 
>>old index.
>>
>>I restarted tomcat and the problem cleared. It's as if the JVM on windows 
>>doesn't
>>get the file closes quite right.
>>
>>I've seen numerous references on this list to similar behavior, but it's 
>>not clear
>>what the fix might be.
>>
>>Many thanks,
>>
>>Fred
>>
>>At 02:32 AM 9/20/2004, you wrote:
>>
>>>  Hi Fred,
>>>
>>>I think that we can help you if you provide us your code, and the 
>>>context in which it is used.
>>>we need to see how you open and close the searcher and the reader, and 
>>>what operations are you doing on index.
>>>
>>>  All the best,
>>>
>>>  Sergiu
>>>
>>>
>>>
>>>Fred Toth wrote:
>>>
>>>>Hi,
>>>>
>>>>I have built a nice lucene application on linux with no problems,
>>>>but when I ported to windows for the customer, I started experiencing
>>>>problems with the index not closing. This prevents re-indexing.
>>>>
>>>>I'm using lucene 1.4.1 under tomcat 5.0.28.
>>>>
>>>>My search operation is very simple and works great:
>>>>
>>>>create reader
>>>>create searcher
>>>>do search
>>>>extract N docs from hits
>>>>close searcher
>>>>close reader
>>>>
>>>>However, on several occasions, when trying to re-index, I get
>>>>"can't delete file" errors from the indexer. I discovered that restarting
>>>>tomcat clears the problem. (Note that I'm recreating the index
>>>>completely, not updating.)
>>>>
>>>>I've spent the last couple of hours trolling the archives and I've
>>>>found numerous references to windows problems with open files.
>>>>
>>>>Is there a fix for this? How can I force the files to close? What's
>>>>the best work-around?
>>>>
>>>>Many thanks,
>>>>
>>>>Fred
>>>>
>>>>
>>>>---------------------------------------------------------------------
>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>>
>>>
>>>---------------------------------------------------------------------
>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10328-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 20 14:04:49 2004
Return-Path: <lucene-user-return-10328-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 98880 invoked from network); 20 Sep 2004 14:04:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Sep 2004 14:04:49 -0000
Received: (qmail 17206 invoked by uid 500); 20 Sep 2004 14:04:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 17030 invoked by uid 500); 20 Sep 2004 14:04:16 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 17015 invoked by uid 99); 20 Sep 2004 14:04:16 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [217.160.131.136] (HELO p15105029.pureserver.info) (217.160.131.136)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 20 Sep 2004 07:04:14 -0700
Received: (qmail 12626 invoked by uid 89); 20 Sep 2004 16:04:11 +0200
Received: from unknown (HELO max.osuatech.local) (max%osua.de@217.25.196.25)
  by 0 with SMTP; 20 Sep 2004 16:04:11 +0200
Date: Mon, 20 Sep 2004 17:06:43 +0300
From: Maxim Patramanskij <max@osua.de>
X-Mailer: The Bat! (v1.62i) Business
Reply-To: Maxim Patramanskij <max@osua.de>
Organization: OSUA technology
X-Priority: 3 (Normal)
Message-ID: <1381055208312.20040920170643@osua.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re[2]: indexes won't close on windows
In-Reply-To: <6.0.1.1.2.20040920093611.04279670@fast.synernet.com>
References: <6.0.1.1.2.20040919230927.03cbae30@fast.synernet.com>
 <414E799A.4050302@ifit.uni-klu.ac.at>
 <6.0.1.1.2.20040920070127.04251a90@fast.synernet.com>
 <414ED221.2050207@ifit.uni-klu.ac.at>
 <6.0.1.1.2.20040920093611.04279670@fast.synernet.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello Fred,

When you recreate an index from the scratch (with the last
IndexWriter constructor's argument "true"), all IndexReaders must be
closed, cause IndexWriter tries to delete all files entire directory,
where you index being created.

If you have any opened IndexReader within this time, then Windows
locks some of the files, used by IndexReader, preventing them from being
changed by other process.  Thus IndexWriter's constructor is unable
to delete these files and throws IOException.


Max


Monday, September 20, 2004, 4:40:00 PM, you wrote:

FT> Hi Sergiu,

FT> Thanks for your suggestions. I will try using just the IndexSearcher(String...)
FT> and see if that makes a difference in the problem. I can confirm that
FT> I am doing a proper close() and that I'm checking for exceptions. Again,
FT> the problem is not with the search function, but with the command-line
FT> indexer. It is not run at startup, but on demand when the index needs
FT> to be recreated.

FT> Thanks,

FT> Fred


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10329-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 20 14:19:34 2004
Return-Path: <lucene-user-return-10329-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 6384 invoked from network); 20 Sep 2004 14:19:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Sep 2004 14:19:34 -0000
Received: (qmail 55758 invoked by uid 500); 20 Sep 2004 14:19:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 55664 invoked by uid 500); 20 Sep 2004 14:19:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 55629 invoked by uid 99); 20 Sep 2004 14:19:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 20 Sep 2004 07:19:12 -0700
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 20 Sep 2004 16:21:00 +0200
Message-ID: <414EE74C.6080002@ifit.uni-klu.ac.at>
Date: Mon, 20 Sep 2004 16:21:00 +0200
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: indexes won't close on windows
References: <6.0.1.1.2.20040919230927.03cbae30@fast.synernet.com> <414E799A.4050302@ifit.uni-klu.ac.at> <6.0.1.1.2.20040920070127.04251a90@fast.synernet.com> <414ED221.2050207@ifit.uni-klu.ac.at> <6.0.1.1.2.20040920093611.04279670@fast.synernet.com>
In-Reply-To: <6.0.1.1.2.20040920093611.04279670@fast.synernet.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 20 Sep 2004 14:21:00.0294 (UTC) FILETIME=[0D858A60:01C49F1D]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Fred Toth wrote:

> Hi Sergiu,
>
> Thanks for your suggestions. I will try using just the 
> IndexSearcher(String...)
> and see if that makes a difference in the problem. I can confirm that
> I am doing a proper close() and that I'm checking for exceptions. Again,
> the problem is not with the search function, but with the command-line
> indexer. It is not run at startup, but on demand when the index needs
> to be recreated.
>
> Thanks,
>
> Fred
>

 I remenber it was one case where the searcher was used in the way you 
use but without keeping the
named reference to the index reader. This is not your case.

why do you get It is here that I get a failure, "can't delete _b9.cfs"?
are you trying to delete the index folder sometimes or ... why?

maybe one object is still using the index  when you try to delete it.

do you write your errors in log files?

 It will be very helpful to have a StackTrace.

 All the best,

 Sergiu

 



> At 08:50 AM 9/20/2004, you wrote:
>
>> Hi Fred,
>>
>> That's right, there are many references to this kind of problems in 
>> the lucene-user list.
>> This suggestions were already made, but I'll list them once again:
>>
>> 1. One way to use the IndexSearcher is to use yopur code, but I don't 
>> encourage users to do that
>>            IndexReader reader = null;
>>        IndexSearcher searcher = null;
>>        reader = IndexReader.open(indexName);
>>          searcher = new IndexSearcher(reader);
>>
>>    It's better to use the constructor that uses a String to create a 
>> IndexSearcher.
>> |*IndexSearcher 
>> <http://localhost:8080/webdoc/lucene/docs/api/org/apache/lucene/search/IndexSearcher.html#IndexSearcher%28java.lang.String%29>*(String 
>> <http://java.sun.com/j2se/1.4/docs/api/java/lang/String.html> path)|. 
>> I even suggest that the path to be obtained as
>>
>> File indexFolder = new File(luceneIndex);
>> IndexSearcher searcher = new IndexSearcher(indexFolder.toString()).
>>
>> 2. I can imagine situations when the lucene index must be created at 
>> each startup, but I think that this is very rare,
>> so I suggest to use code like
>>
>> if(indexExists(indexFolder))
>>    writer = new IndexWriter(index, new StandardAnalyzer(), false);
>> else
>>    writer = new IndexWriter(index, new StandardAnalyzer(), true);
>> //don#t forget to close the indexWriter when you create the index and 
>> to open it again
>>
>> I use a indexExists function like
>> boolean indexExists(File indexFolder)
>>    return indexFolder.exists()
>>
>> and it works propertly .... even if that's not the best example of 
>> testing the existence of the index
>>
>> 3.'It is here that I get a failure, "can't delete _b9.cfs"'
>>
>> that's ptobably because of the way you use the searcher, and probably 
>> because you don't close the readers, writers and searchers propertly.
>> 4. be sure that all close() methods are guarded with
>>    catch(Exception e){
>>          logger.log(e);
>>    } blocks
>>
>> 5. Pay attention if you use a multithreading environment, in this 
>> case you have to make indexing, delition and search synchronized
>>
>>   So ...
>>
>>  Have fun,
>>
>>    Sergiu
>>
>> PS: I think that I'll submit some code with synchronized 
>> index/delete/search operations and to tell why I need to use it.
>>
>>
>> Fred Toth wrote:
>>
>>> Hi Sergiu,
>>>
>>> My searches take place in tomcat, in a struts action, in a single 
>>> method
>>> Abbreviated code:
>>>
>>>         IndexReader reader = null;
>>>         IndexSearcher searcher = null;
>>>         reader = IndexReader.open(indexName);
>>>           searcher = new IndexSearcher(reader);
>>>         // code to do a search and extract hits, works fine.
>>>         searcher.close();
>>>           reader.close();
>>>
>>> I have a command-line indexer that is a minor modification of the
>>> IndexHTML.java that comes with Lucene. It does this:
>>>
>>>         writer = new IndexWriter(index, new StandardAnalyzer(), 
>>> create);
>>>         // add docs
>>>
>>> (with the create flag set true). It is here that I get a failure, 
>>> "can't delete _b9.cfs"
>>> or similar. This happens when tomcat is completely idle (we're still 
>>> testing and
>>> not live), so all readers and searchers should be closed, as least 
>>> as far as
>>> java is concerned. But windows will not allow the indexer to delete 
>>> the old index.
>>>
>>> I restarted tomcat and the problem cleared. It's as if the JVM on 
>>> windows doesn't
>>> get the file closes quite right.
>>>
>>> I've seen numerous references on this list to similar behavior, but 
>>> it's not clear
>>> what the fix might be.
>>>
>>> Many thanks,
>>>
>>> Fred
>>>
>>> At 02:32 AM 9/20/2004, you wrote:
>>>
>>>>  Hi Fred,
>>>>
>>>> I think that we can help you if you provide us your code, and the 
>>>> context in which it is used.
>>>> we need to see how you open and close the searcher and the reader, 
>>>> and what operations are you doing on index.
>>>>
>>>>  All the best,
>>>>
>>>>  Sergiu
>>>>
>>>>
>>>>
>>>> Fred Toth wrote:
>>>>
>>>>> Hi,
>>>>>
>>>>> I have built a nice lucene application on linux with no problems,
>>>>> but when I ported to windows for the customer, I started experiencing
>>>>> problems with the index not closing. This prevents re-indexing.
>>>>>
>>>>> I'm using lucene 1.4.1 under tomcat 5.0.28.
>>>>>
>>>>> My search operation is very simple and works great:
>>>>>
>>>>> create reader
>>>>> create searcher
>>>>> do search
>>>>> extract N docs from hits
>>>>> close searcher
>>>>> close reader
>>>>>
>>>>> However, on several occasions, when trying to re-index, I get
>>>>> "can't delete file" errors from the indexer. I discovered that 
>>>>> restarting
>>>>> tomcat clears the problem. (Note that I'm recreating the index
>>>>> completely, not updating.)
>>>>>
>>>>> I've spent the last couple of hours trolling the archives and I've
>>>>> found numerous references to windows problems with open files.
>>>>>
>>>>> Is there a fix for this? How can I force the files to close? What's
>>>>> the best work-around?
>>>>>
>>>>> Many thanks,
>>>>>
>>>>> Fred
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10330-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 20 14:30:17 2004
Return-Path: <lucene-user-return-10330-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 11535 invoked from network); 20 Sep 2004 14:30:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Sep 2004 14:30:16 -0000
Received: (qmail 84626 invoked by uid 500); 20 Sep 2004 14:30:07 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 84502 invoked by uid 500); 20 Sep 2004 14:30:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 84485 invoked by uid 99); 20 Sep 2004 14:30:06 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [195.47.73.164] (HELO msx-na-server.forrest.local) (195.47.73.164)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 20 Sep 2004 07:30:01 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.0.6375.0
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ISO-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: indexes won't close on windows
Date: Mon, 20 Sep 2004 16:30:25 +0200
Message-ID: <DEC6C9B7E9CD684ABDA9B285813F648E1C85CC@msx-na-server.forrest.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: indexes won't close on windows
thread-index: AcSfF5L06/ujcLZcRX+n+BUHEXgPWwAAD/Tg
From: =?ISO-8859-1?Q?Jir=ED_Kuhn?= <kuhn@fg.cz>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

	I guess you have answered yourself. I can imagine that Tomcat was =
serving your servlet with constructed index searcher while your command =
line application wanted to recreate the index. Are you protected against =
this situation?

Jiri.

-----Original Message-----
From: Fred Toth [mailto:ftoth@synernet.com]
Sent: Monday, September 20, 2004 3:40 PM
To: Lucene Users List
Subject: Re: indexes won't close on windows


Hi Sergiu,

Thanks for your suggestions. I will try using just the =
IndexSearcher(String...)
and see if that makes a difference in the problem. I can confirm that
I am doing a proper close() and that I'm checking for exceptions. Again,
the problem is not with the search function, but with the command-line
indexer. It is not run at startup, but on demand when the index needs
to be recreated.

Thanks,

Fred

At 08:50 AM 9/20/2004, you wrote:
>Hi Fred,
>
>That's right, there are many references to this kind of problems in the =

>lucene-user list.
>This suggestions were already made, but I'll list them once again:
>
>1. One way to use the IndexSearcher is to use yopur code, but I don't=20
>encourage users to do that
>            IndexReader reader =3D null;
>        IndexSearcher searcher =3D null;
>        reader =3D IndexReader.open(indexName);
>          searcher =3D new IndexSearcher(reader);
>
>    It's better to use the constructor that uses a String to create a=20
> IndexSearcher.
>|*IndexSearcher=20
><http://localhost:8080/webdoc/lucene/docs/api/org/apache/lucene/search/I=
ndexSearcher.html#IndexSearcher%28java.lang.String%29>*(String=20
><http://java.sun.com/j2se/1.4/docs/api/java/lang/String.html> path)|. I =

>even suggest that the path to be obtained as
>
>File indexFolder =3D new File(luceneIndex);
>IndexSearcher searcher =3D new IndexSearcher(indexFolder.toString()).
>
>2. I can imagine situations when the lucene index must be created at =
each=20
>startup, but I think that this is very rare,
>so I suggest to use code like
>
>if(indexExists(indexFolder))
>    writer =3D new IndexWriter(index, new StandardAnalyzer(), false);
>else
>    writer =3D new IndexWriter(index, new StandardAnalyzer(), true);
>//don#t forget to close the indexWriter when you create the index and =
to=20
>open it again
>
>I use a indexExists function like
>boolean indexExists(File indexFolder)
>    return indexFolder.exists()
>
>and it works propertly .... even if that's not the best example of =
testing=20
>the existence of the index
>
>3.'It is here that I get a failure, "can't delete _b9.cfs"'
>
>that's ptobably because of the way you use the searcher, and probably=20
>because you don't close the readers, writers and searchers propertly.
>4. be sure that all close() methods are guarded with
>    catch(Exception e){
>          logger.log(e);
>    } blocks
>
>5. Pay attention if you use a multithreading environment, in this case =
you=20
>have to make indexing, delition and search synchronized
>
>   So ...
>
>  Have fun,
>
>    Sergiu
>
>PS: I think that I'll submit some code with synchronized=20
>index/delete/search operations and to tell why I need to use it.
>
>
>Fred Toth wrote:
>
>>Hi Sergiu,
>>
>>My searches take place in tomcat, in a struts action, in a single =
method
>>Abbreviated code:
>>
>>         IndexReader reader =3D null;
>>         IndexSearcher searcher =3D null;
>>         reader =3D IndexReader.open(indexName);
>>           searcher =3D new IndexSearcher(reader);
>>         // code to do a search and extract hits, works fine.
>>         searcher.close();
>>           reader.close();
>>
>>I have a command-line indexer that is a minor modification of the
>>IndexHTML.java that comes with Lucene. It does this:
>>
>>         writer =3D new IndexWriter(index, new StandardAnalyzer(), =
create);
>>         // add docs
>>
>>(with the create flag set true). It is here that I get a failure, =
"can't=20
>>delete _b9.cfs"
>>or similar. This happens when tomcat is completely idle (we're still=20
>>testing and
>>not live), so all readers and searchers should be closed, as least as =
far as
>>java is concerned. But windows will not allow the indexer to delete =
the=20
>>old index.
>>
>>I restarted tomcat and the problem cleared. It's as if the JVM on =
windows=20
>>doesn't
>>get the file closes quite right.
>>
>>I've seen numerous references on this list to similar behavior, but =
it's=20
>>not clear
>>what the fix might be.
>>
>>Many thanks,
>>
>>Fred
>>
>>At 02:32 AM 9/20/2004, you wrote:
>>
>>>  Hi Fred,
>>>
>>>I think that we can help you if you provide us your code, and the=20
>>>context in which it is used.
>>>we need to see how you open and close the searcher and the reader, =
and=20
>>>what operations are you doing on index.
>>>
>>>  All the best,
>>>
>>>  Sergiu
>>>
>>>
>>>
>>>Fred Toth wrote:
>>>
>>>>Hi,
>>>>
>>>>I have built a nice lucene application on linux with no problems,
>>>>but when I ported to windows for the customer, I started =
experiencing
>>>>problems with the index not closing. This prevents re-indexing.
>>>>
>>>>I'm using lucene 1.4.1 under tomcat 5.0.28.
>>>>
>>>>My search operation is very simple and works great:
>>>>
>>>>create reader
>>>>create searcher
>>>>do search
>>>>extract N docs from hits
>>>>close searcher
>>>>close reader
>>>>
>>>>However, on several occasions, when trying to re-index, I get
>>>>"can't delete file" errors from the indexer. I discovered that =
restarting
>>>>tomcat clears the problem. (Note that I'm recreating the index
>>>>completely, not updating.)
>>>>
>>>>I've spent the last couple of hours trolling the archives and I've
>>>>found numerous references to windows problems with open files.
>>>>
>>>>Is there a fix for this? How can I force the files to close? What's
>>>>the best work-around?
>>>>
>>>>Many thanks,
>>>>
>>>>Fred
>>>>
>>>>
>>>>---------------------------------------------------------------------=

>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>>
>>>
>>>---------------------------------------------------------------------
>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10331-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 20 16:14:13 2004
Return-Path: <lucene-user-return-10331-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 68956 invoked from network); 20 Sep 2004 16:14:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Sep 2004 16:14:12 -0000
Received: (qmail 4489 invoked by uid 500); 20 Sep 2004 16:14:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 4396 invoked by uid 500); 20 Sep 2004 16:14:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 4349 invoked by uid 99); 20 Sep 2004 16:14:03 -0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_20_30,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [206.190.38.241] (HELO web51810.mail.yahoo.com) (206.190.38.241)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 20 Sep 2004 09:14:01 -0700
Message-ID: <20040920161358.81861.qmail@web51810.mail.yahoo.com>
Received: from [65.205.199.122] by web51810.mail.yahoo.com via HTTP; Mon, 20 Sep 2004 09:13:58 PDT
Date: Mon, 20 Sep 2004 09:13:58 -0700 (PDT)
From: John Z <zjavier_1@yahoo.com>
Subject: Re: Running OutOfMemory while optimizing and searching
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <414B1716.5030305@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-726657677-1095696838=:78964"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0-726657677-1095696838=:78964
Content-Type: text/plain; charset=us-ascii

Doug
 
Thank you for confirming this.
 
ZJ

Doug Cutting <cutting@apache.org> wrote:
John Z wrote:
> We have indexes of around 1 million docs and around 25 searchable fields.
> We noticed that without any searches performed on the indexes, on startup, the memory taken up by the searcher is roughly 7 times the .tii file size. The .tii file is read into memory as per the code. Our .tii files are around 8-10 MB in size and our startup memory foot print is around 60-70 MB.
> 
> Then when we start doing our searches, the memory goes up, depending on the fields we search on. We are noticing that if we start searching on new fields, the memory kind of goes up. 
> 
> Doug, 
> 
> Your calculation below on what is taken up by the searcher, does it take into account the .tii file being read into memory or am I not making any sense ? 
> 
> 1 byte * Number of searchable fields in your index * Number of docs in 
> your index
> plus
> 1k bytes * number of terms in query
> plus
> 1k bytes * number of phrase terms in query

You make perfect sense. The formula above does not include the .tii. 
My mistake: I forgot that. By default, every 128th Term in the index is 
read into memory, to permit random access to terms. These are stored in 
the .tii file, compressed. So it is not surprising that they require 7x 
the size of the .tii file in memory.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


		
---------------------------------
Do you Yahoo!?
Express yourself with Y! Messenger! Free. Download now.
--0-726657677-1095696838=:78964--

From lucene-user-return-10332-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 20 16:26:14 2004
Return-Path: <lucene-user-return-10332-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 74362 invoked from network); 20 Sep 2004 16:26:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Sep 2004 16:26:14 -0000
Received: (qmail 27573 invoked by uid 500); 20 Sep 2004 16:25:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 27525 invoked by uid 500); 20 Sep 2004 16:25:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 27493 invoked by uid 99); 20 Sep 2004 16:25:46 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [38.112.109.12] (HELO mail.blueprint.org) (38.112.109.12)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 20 Sep 2004 09:25:44 -0700
Received: from Blueprint21 (blueprint-21.blueprint.org [10.0.0.40])
 by mail.blueprint.org
 (iPlanet Messaging Server 5.2 Patch 1 (built Aug 19 2002))
 with SMTP id <0I4C003SSLMU03@mail.blueprint.org> for
 lucene-user@jakarta.apache.org; Mon, 20 Sep 2004 12:25:42 -0400 (EDT)
Date: Mon, 20 Sep 2004 12:27:02 -0400
From: Shawn Konopinsky <skonopinsky@blueprint.org>
Subject: Too many boolean clauses
To: Lucene Users List <lucene-user@jakarta.apache.org>
Message-id: <BAEBICAPLMHCPPOIGFHPCECCCAAA.skonopinsky@blueprint.org>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Mailer: Microsoft Outlook IMO, Build 9.0.6604 (9.0.2911.0)
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: 7BIT
Importance: Normal
X-Priority: 3 (Normal)
X-MSMail-priority: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello There,

Due to the fact that the [# TO #] range search works lexographically, I am
forced to build a rather large boolean query to get range data from my
index.

I have an ID field that contains about 500,000 unique ids. If I want to
query all records with ids [1-2000],  I build a boolean query containing all
the numbers in the range. eg. id:(1 2 3 ... 1999 2000)

The problem with this is that I get the following error :
org.apache.lucene.queryParser.ParseException: Too many boolean clauses

Any ideas on how I might circumvent this issue by either finding a way to
rewrite the query, or avoid the error?

Thanks in advance,
Shawn.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10333-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 20 16:51:03 2004
Return-Path: <lucene-user-return-10333-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 88423 invoked from network); 20 Sep 2004 16:51:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Sep 2004 16:51:03 -0000
Received: (qmail 75730 invoked by uid 500); 20 Sep 2004 16:50:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 75663 invoked by uid 500); 20 Sep 2004 16:50:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 75547 invoked by uid 99); 20 Sep 2004 16:50:50 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.109.24.24] (HELO smtp-vbr4.xs4all.nl) (194.109.24.24)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 20 Sep 2004 09:50:48 -0700
Received: from k7l.local (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr4.xs4all.nl (8.12.11/8.12.11) with ESMTP id i8KGojIi056831
	for <lucene-user@jakarta.apache.org>; Mon, 20 Sep 2004 18:50:45 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Too many boolean clauses
Date: Mon, 20 Sep 2004 18:50:45 +0200
User-Agent: KMail/1.5.4
References: <BAEBICAPLMHCPPOIGFHPCECCCAAA.skonopinsky@blueprint.org>
In-Reply-To: <BAEBICAPLMHCPPOIGFHPCECCCAAA.skonopinsky@blueprint.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200409201850.45469.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Monday 20 September 2004 18:27, Shawn Konopinsky wrote:
> Hello There,
>
> Due to the fact that the [# TO #] range search works lexographically, I am
> forced to build a rather large boolean query to get range data from my
> index.
>
> I have an ID field that contains about 500,000 unique ids. If I want to
> query all records with ids [1-2000],  I build a boolean query containing
> all the numbers in the range. eg. id:(1 2 3 ... 1999 2000)
>
> The problem with this is that I get the following error :
> org.apache.lucene.queryParser.ParseException: Too many boolean clauses
>
> Any ideas on how I might circumvent this issue by either finding a way to
> rewrite the query, or avoid the error?

You can use this as an example:

http://cvs.apache.org/viewcvs.cgi/jakarta-lucene/src/java/org/apache/lucene/search/DateFilter.java

(Just click view on the latest version to see the code).

and iteratate over you doc ids instead of over dates.
This will give you a filter for the doc ids you want to query.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10334-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 20 18:53:06 2004
Return-Path: <lucene-user-return-10334-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 56390 invoked from network); 20 Sep 2004 18:53:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Sep 2004 18:53:05 -0000
Received: (qmail 92126 invoked by uid 500); 20 Sep 2004 18:52:40 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 91841 invoked by uid 500); 20 Sep 2004 18:52:36 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 91754 invoked by uid 99); 20 Sep 2004 18:52:31 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.109.24.27] (HELO smtp-vbr7.xs4all.nl) (194.109.24.27)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 20 Sep 2004 11:52:25 -0700
Received: from k7l.local (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr7.xs4all.nl (8.12.11/8.12.11) with ESMTP id i8KIqABF012621
	for <lucene-user@jakarta.apache.org>; Mon, 20 Sep 2004 20:52:10 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: lucene-user@jakarta.apache.org
Subject: Similarity scores: tf(), lengthNorm(), sumOfSquaredWeights().
Date: Mon, 20 Sep 2004 20:52:09 +0200
User-Agent: KMail/1.5.4
References: <2b2518a404091317206b22d96@mail.gmail.com> <4147674C.5010305@apache.org>
In-Reply-To: <4147674C.5010305@apache.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200409202052.09618.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


After last week's discussion on idf() of the similarity score computation
I looked into the score computation a bit deeper.

In the DefaultSimilarity tf() is the sqrt() and lengthNorm() is the inverse
of sqrt(). That means that the factor (docTf * docNorm) actually
implements the square root of the density of the query term in the
document field (ignoring the encoding and decoding of the norm).

Summing these weighted square roots resembles a 
Salton OR p-Norm for p = 1/2, except that Salton defined
the p-Norm's for p >= 1, and the result is more like an AND
p-Norm because it depends mostly on the minimum argument.

The pnorm also requires that the sum is taken to the power 1/p,
but this is not necessary as it would not change the ranking.

I looked around for p-Norm's with 0<p<1, but I didn't find
anything. Is there really nothing about this? A good discussion is here:
http://elvis.slis.indiana.edu/irpub/SIGIR/1994/cite19.htm

I would guess that since the sqrt() has an infinite derivative at zero, it
might well be that this OR p-Norm for p = 1/2 behaves much like a
rather high power AND p-Norm.

The basic summing form of the OR p-Norm also allows a very easy
implementation by just summing the weighted square roots; an AND
p-Norm for p >= 1 would have needed some more calculations.
Is this perhaps one of the reasons for using a power p  < 1 ?

Taking this a bit further, I also wonder about the name of
sumOfSquaredWeights() in the Weight interface.
Shouldn't that rather be  sumOfPowerWeights() and 
by default implement a sum of square roots?
This would allow a more straightforward comprehension
of the of the term weights as directly weighing the term densities.

Section 5 of the reference above has the full weighted
p-Norm formula's. The OR p-Norm there is very close
to the Lucene formula without coord().

Regards,
Paul Elschot

On Tuesday 14 September 2004 23:49, Doug Cutting wrote:
> Your analysis sounds correct.
>
> At base, a weight is a normalized tf*idf.  So a document weight is:
>
>    docTf * idf * docNorm
>
> and a query weight is:
>
>    queryTf * idf * queryNorm
>
> where queryTf is always one.
>
> So the product of these is (docTf * idf * docNorm) * (idf * queryNorm),
> which indeed contains idf twice.  I think the best documentation fix
> would be to add another idf(t) clause at the end of the formula, next to
> queryNorm(q), so this is clear.  Does that sound right to you?
>
> Doug
>
> Ken McCracken wrote:
> > Hi,
> >
> > I was looking through the score computation when running search, and
> > think there may be a discrepancy between what is _documented_ in the
> > org.apache.lucene.search.Similarity class overview Javadocs, and what
> > actually occurs in the code.
> >
> > I believe the problem is only with the documentation.
> >
> > I'm pretty sure that there should be an idf^2 in the sum.  Look at
> > org.apache.lucene.search.TermQuery, the inner class TermWeight.  You
> > can see that first sumOfSquaredWeights() is called, followed by
> > normalize(), during search.  Further, the resulting value stored in
> > the field "value" is set as the "weightValue" on the TermScorer.
> >
> > If we look at what happens to TermWeight, sumOfSquaredWeights() sets
> > "queryWeight" to idf * boost.  During normalize(), "queryWeight" is
> > multiplied by the query norm, and "value" is set to queryWeight * idf
> > == idf * boost * query norm * idf == idf^2 * boost * query norm.  This
> > becomes the "weightValue" in the TermScorer that is then used to
> > multiply with the appropriate tf, etc., values.
> >
> > The remaining terms in the Similarity description are properly
> > appended.  I also see that the queryNorm effectively "cancels out"
> > (dimensionally, since it is a 1/ square root of a sum of squares of
> > idfs) one of the idfs, so the formula still ends up being roughly a
> > TF-IDF formula.  But the idf^2 should still be there, along with the
> > expansion of queryNorm.
> >
> > Am I mistaken, or is the documentation off?
> >
> > Thanks for your help,
> > -Ken
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10335-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 20 18:53:28 2004
Return-Path: <lucene-user-return-10335-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 56681 invoked from network); 20 Sep 2004 18:53:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Sep 2004 18:53:28 -0000
Received: (qmail 92734 invoked by uid 500); 20 Sep 2004 18:52:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 92672 invoked by uid 500); 20 Sep 2004 18:52:47 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 92452 invoked by uid 99); 20 Sep 2004 18:52:44 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [38.112.109.12] (HELO mail.blueprint.org) (38.112.109.12)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 20 Sep 2004 11:52:44 -0700
Received: from Blueprint21 (blueprint-21.blueprint.org [10.0.0.40])
 by mail.blueprint.org
 (iPlanet Messaging Server 5.2 Patch 1 (built Aug 19 2002))
 with SMTP id <0I4C003W7SFT03@mail.blueprint.org> for
 lucene-user@jakarta.apache.org; Mon, 20 Sep 2004 14:52:41 -0400 (EDT)
Date: Mon, 20 Sep 2004 14:54:01 -0400
From: Shawn Konopinsky <skonopinsky@blueprint.org>
Subject: RE: Too many boolean clauses
In-reply-to: <200409201850.45469.paul.elschot@xs4all.nl>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Message-id: <BAEBICAPLMHCPPOIGFHPOECCCAAA.skonopinsky@blueprint.org>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Mailer: Microsoft Outlook IMO, Build 9.0.6604 (9.0.2911.0)
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: 7BIT
Importance: Normal
X-Priority: 3 (Normal)
X-MSMail-priority: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hey Paul,

Thanks for the quick reply. Excuse my ignorance, but what do I do with the
generated BitSet?

Also - we are using a pooling feature which contains a pool of
IndexSearchers that are used and tossed back each time we need to search.
I'd hate to have to work around this and open up an IndexReader for this
particular search, where all other searches use the pool. Suggestions?

Thanks,
Shawn.

-----Original Message-----
From: Paul Elschot [mailto:paul.elschot@xs4all.nl]
Sent: Monday, September 20, 2004 12:51 PM
To: Lucene Users List
Subject: Re: Too many boolean clauses


On Monday 20 September 2004 18:27, Shawn Konopinsky wrote:
> Hello There,
>
> Due to the fact that the [# TO #] range search works lexographically, I am
> forced to build a rather large boolean query to get range data from my
> index.
>
> I have an ID field that contains about 500,000 unique ids. If I want to
> query all records with ids [1-2000],  I build a boolean query containing
> all the numbers in the range. eg. id:(1 2 3 ... 1999 2000)
>
> The problem with this is that I get the following error :
> org.apache.lucene.queryParser.ParseException: Too many boolean clauses
>
> Any ideas on how I might circumvent this issue by either finding a way to
> rewrite the query, or avoid the error?

You can use this as an example:

http://cvs.apache.org/viewcvs.cgi/jakarta-lucene/src/java/org/apache/lucene/
search/DateFilter.java

(Just click view on the latest version to see the code).

and iteratate over you doc ids instead of over dates.
This will give you a filter for the doc ids you want to query.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10336-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 20 18:59:57 2004
Return-Path: <lucene-user-return-10336-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 59494 invoked from network); 20 Sep 2004 18:59:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Sep 2004 18:59:57 -0000
Received: (qmail 12811 invoked by uid 500); 20 Sep 2004 18:59:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 12750 invoked by uid 500); 20 Sep 2004 18:59:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 12728 invoked by uid 99); 20 Sep 2004 18:59:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [205.152.59.70] (HELO imf22aec.mail.bellsouth.net) (205.152.59.70)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 20 Sep 2004 11:59:50 -0700
Received: from w2ks.synernet.com ([65.12.150.225])
          by imf22aec.mail.bellsouth.net
          (InterMail vM.5.01.06.11 201-253-122-130-111-20040605) with ESMTP
          id <20040920185937.QPFQ219.imf22aec.mail.bellsouth.net@w2ks.synernet.com>
          for <lucene-user@jakarta.apache.org>;
          Mon, 20 Sep 2004 14:59:37 -0400
Message-Id: <6.0.1.1.2.20040920145658.03cafe10@fast.synernet.com>
X-Sender: ftoth@fast.synernet.com
X-Mailer: QUALCOMM Windows Eudora Version 6.0.1.1
Date: Mon, 20 Sep 2004 14:58:08 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
From: Fred Toth <ftoth@synernet.com>
Subject: RE: indexes won't close on windows - solved
In-Reply-To: <DEC6C9B7E9CD684ABDA9B285813F648E1C85CC@msx-na-server.forre
 st.local>
References: <DEC6C9B7E9CD684ABDA9B285813F648E1C85CC@msx-na-server.forrest.local>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

All,

Many thanks for your help and comments. I found a bug in
my code where, in obscure circumstances, the indexes were
being left open. Now fixed, thanks to everyone's help.

Fred

At 10:30 AM 9/20/2004, you wrote:
>Hi,
>
>         I guess you have answered yourself. I can imagine that Tomcat was 
> serving your servlet with constructed index searcher while your command 
> line application wanted to recreate the index. Are you protected against 
> this situation?
>
>Jiri.
>
>-----Original Message-----
>From: Fred Toth [mailto:ftoth@synernet.com]
>Sent: Monday, September 20, 2004 3:40 PM
>To: Lucene Users List
>Subject: Re: indexes won't close on windows
>
>
>Hi Sergiu,
>
>Thanks for your suggestions. I will try using just the 
>IndexSearcher(String...)
>and see if that makes a difference in the problem. I can confirm that
>I am doing a proper close() and that I'm checking for exceptions. Again,
>the problem is not with the search function, but with the command-line
>indexer. It is not run at startup, but on demand when the index needs
>to be recreated.
>
>Thanks,
>
>Fred
>
>At 08:50 AM 9/20/2004, you wrote:
> >Hi Fred,
> >
> >That's right, there are many references to this kind of problems in the
> >lucene-user list.
> >This suggestions were already made, but I'll list them once again:
> >
> >1. One way to use the IndexSearcher is to use yopur code, but I don't
> >encourage users to do that
> >            IndexReader reader = null;
> >        IndexSearcher searcher = null;
> >        reader = IndexReader.open(indexName);
> >          searcher = new IndexSearcher(reader);
> >
> >    It's better to use the constructor that uses a String to create a
> > IndexSearcher.
> >|*IndexSearcher
> ><http://localhost:8080/webdoc/lucene/docs/api/org/apache/lucene/search/In 
> dexSearcher.html#IndexSearcher%28java.lang.String%29>*(String
> ><http://java.sun.com/j2se/1.4/docs/api/java/lang/String.html> path)|. I
> >even suggest that the path to be obtained as
> >
> >File indexFolder = new File(luceneIndex);
> >IndexSearcher searcher = new IndexSearcher(indexFolder.toString()).
> >
> >2. I can imagine situations when the lucene index must be created at each
> >startup, but I think that this is very rare,
> >so I suggest to use code like
> >
> >if(indexExists(indexFolder))
> >    writer = new IndexWriter(index, new StandardAnalyzer(), false);
> >else
> >    writer = new IndexWriter(index, new StandardAnalyzer(), true);
> >//don#t forget to close the indexWriter when you create the index and to
> >open it again
> >
> >I use a indexExists function like
> >boolean indexExists(File indexFolder)
> >    return indexFolder.exists()
> >
> >and it works propertly .... even if that's not the best example of testing
> >the existence of the index
> >
> >3.'It is here that I get a failure, "can't delete _b9.cfs"'
> >
> >that's ptobably because of the way you use the searcher, and probably
> >because you don't close the readers, writers and searchers propertly.
> >4. be sure that all close() methods are guarded with
> >    catch(Exception e){
> >          logger.log(e);
> >    } blocks
> >
> >5. Pay attention if you use a multithreading environment, in this case you
> >have to make indexing, delition and search synchronized
> >
> >   So ...
> >
> >  Have fun,
> >
> >    Sergiu
> >
> >PS: I think that I'll submit some code with synchronized
> >index/delete/search operations and to tell why I need to use it.
> >
> >
> >Fred Toth wrote:
> >
> >>Hi Sergiu,
> >>
> >>My searches take place in tomcat, in a struts action, in a single method
> >>Abbreviated code:
> >>
> >>         IndexReader reader = null;
> >>         IndexSearcher searcher = null;
> >>         reader = IndexReader.open(indexName);
> >>           searcher = new IndexSearcher(reader);
> >>         // code to do a search and extract hits, works fine.
> >>         searcher.close();
> >>           reader.close();
> >>
> >>I have a command-line indexer that is a minor modification of the
> >>IndexHTML.java that comes with Lucene. It does this:
> >>
> >>         writer = new IndexWriter(index, new StandardAnalyzer(), create);
> >>         // add docs
> >>
> >>(with the create flag set true). It is here that I get a failure, "can't
> >>delete _b9.cfs"
> >>or similar. This happens when tomcat is completely idle (we're still
> >>testing and
> >>not live), so all readers and searchers should be closed, as least as 
> far as
> >>java is concerned. But windows will not allow the indexer to delete the
> >>old index.
> >>
> >>I restarted tomcat and the problem cleared. It's as if the JVM on windows
> >>doesn't
> >>get the file closes quite right.
> >>
> >>I've seen numerous references on this list to similar behavior, but it's
> >>not clear
> >>what the fix might be.
> >>
> >>Many thanks,
> >>
> >>Fred
> >>
> >>At 02:32 AM 9/20/2004, you wrote:
> >>
> >>>  Hi Fred,
> >>>
> >>>I think that we can help you if you provide us your code, and the
> >>>context in which it is used.
> >>>we need to see how you open and close the searcher and the reader, and
> >>>what operations are you doing on index.
> >>>
> >>>  All the best,
> >>>
> >>>  Sergiu
> >>>
> >>>
> >>>
> >>>Fred Toth wrote:
> >>>
> >>>>Hi,
> >>>>
> >>>>I have built a nice lucene application on linux with no problems,
> >>>>but when I ported to windows for the customer, I started experiencing
> >>>>problems with the index not closing. This prevents re-indexing.
> >>>>
> >>>>I'm using lucene 1.4.1 under tomcat 5.0.28.
> >>>>
> >>>>My search operation is very simple and works great:
> >>>>
> >>>>create reader
> >>>>create searcher
> >>>>do search
> >>>>extract N docs from hits
> >>>>close searcher
> >>>>close reader
> >>>>
> >>>>However, on several occasions, when trying to re-index, I get
> >>>>"can't delete file" errors from the indexer. I discovered that restarting
> >>>>tomcat clears the problem. (Note that I'm recreating the index
> >>>>completely, not updating.)
> >>>>
> >>>>I've spent the last couple of hours trolling the archives and I've
> >>>>found numerous references to windows problems with open files.
> >>>>
> >>>>Is there a fix for this? How can I force the files to close? What's
> >>>>the best work-around?
> >>>>
> >>>>Many thanks,
> >>>>
> >>>>Fred
> >>>>
> >>>>
> >>>>---------------------------------------------------------------------
> >>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>>
> >>>
> >>>
> >>>---------------------------------------------------------------------
> >>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>
> >>
> >>
> >>
> >>---------------------------------------------------------------------
> >>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10337-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 20 19:05:12 2004
Return-Path: <lucene-user-return-10337-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 61541 invoked from network); 20 Sep 2004 19:05:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Sep 2004 19:05:12 -0000
Received: (qmail 24045 invoked by uid 500); 20 Sep 2004 19:05:06 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 23854 invoked by uid 500); 20 Sep 2004 19:05:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 23839 invoked by uid 99); 20 Sep 2004 19:05:05 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.109.24.34] (HELO smtp-vbr14.xs4all.nl) (194.109.24.34)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 20 Sep 2004 12:05:05 -0700
Received: from k7l.local (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr14.xs4all.nl (8.12.11/8.12.11) with ESMTP id i8KJ51P2078593
	for <lucene-user@jakarta.apache.org>; Mon, 20 Sep 2004 21:05:01 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: lucene-user@jakarta.apache.org
Subject: Re: Too many boolean clauses
Date: Mon, 20 Sep 2004 21:05:01 +0200
User-Agent: KMail/1.5.4
References: <BAEBICAPLMHCPPOIGFHPOECCCAAA.skonopinsky@blueprint.org>
In-Reply-To: <BAEBICAPLMHCPPOIGFHPOECCCAAA.skonopinsky@blueprint.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200409202105.01601.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Monday 20 September 2004 20:54, Shawn Konopinsky wrote:
> Hey Paul,
>
> Thanks for the quick reply. Excuse my ignorance, but what do I do with the
> generated BitSet?

You can return it in in the bits() method of the object implementing your
org.apache.lucene.search.Filter (http://jakarta.apache.org/lucene/docs/api/index.html)
Then pass the Filter to IndexSearcher.search() with the query.

Regards,
Paul


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10338-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 20 20:22:14 2004
Return-Path: <lucene-user-return-10338-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 11290 invoked from network); 20 Sep 2004 20:22:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Sep 2004 20:22:14 -0000
Received: (qmail 3079 invoked by uid 500); 20 Sep 2004 20:22:07 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 3005 invoked by uid 500); 20 Sep 2004 20:22:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 2992 invoked by uid 99); 20 Sep 2004 20:22:07 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.109.24.25] (HELO smtp-vbr5.xs4all.nl) (194.109.24.25)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 20 Sep 2004 13:22:05 -0700
Received: from k7l.local (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr5.xs4all.nl (8.12.11/8.12.11) with ESMTP id i8KKM2hE036516
	for <lucene-user@jakarta.apache.org>; Mon, 20 Sep 2004 22:22:02 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: lucene-user@jakarta.apache.org
Subject: Re: Too many boolean clauses
Date: Mon, 20 Sep 2004 22:22:02 +0200
User-Agent: KMail/1.5.4
References: <BAEBICAPLMHCPPOIGFHPOECCCAAA.skonopinsky@blueprint.org>
In-Reply-To: <BAEBICAPLMHCPPOIGFHPOECCCAAA.skonopinsky@blueprint.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200409202222.02176.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Monday 20 September 2004 20:54, Shawn Konopinsky wrote:
> Hey Paul,
>
...
>
> Also - we are using a pooling feature which contains a pool of
> IndexSearchers that are used and tossed back each time we need to search.
> I'd hate to have to work around this and open up an IndexReader for this
> particular search, where all other searches use the pool. Suggestions?

You could use a map from the IndexSearcher back to the IndexReader that was
used to create it. (It's a bit of a waste because the IndexSearcher has a reader
attribute internally.)

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10339-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 20 20:30:20 2004
Return-Path: <lucene-user-return-10339-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 14235 invoked from network); 20 Sep 2004 20:30:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Sep 2004 20:30:20 -0000
Received: (qmail 10557 invoked by uid 500); 20 Sep 2004 20:29:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 10543 invoked by uid 500); 20 Sep 2004 20:29:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 10530 invoked by uid 99); 20 Sep 2004 20:29:33 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [38.112.109.12] (HELO mail.blueprint.org) (38.112.109.12)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 20 Sep 2004 13:29:31 -0700
Received: from Blueprint21 (blueprint-21.blueprint.org [10.0.0.40])
 by mail.blueprint.org
 (iPlanet Messaging Server 5.2 Patch 1 (built Aug 19 2002))
 with SMTP id <0I4C003JHWX503@mail.blueprint.org> for
 lucene-user@jakarta.apache.org; Mon, 20 Sep 2004 16:29:29 -0400 (EDT)
Date: Mon, 20 Sep 2004 16:30:49 -0400
From: Shawn Konopinsky <skonopinsky@blueprint.org>
Subject: RE: Too many boolean clauses
In-reply-to: <200409202222.02176.paul.elschot@xs4all.nl>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Message-id: <BAEBICAPLMHCPPOIGFHPGECDCAAA.skonopinsky@blueprint.org>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Mailer: Microsoft Outlook IMO, Build 9.0.6604 (9.0.2911.0)
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: 7BIT
Importance: Normal
X-Priority: 3 (Normal)
X-MSMail-priority: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Sounds good. Thanks for all the help.

Shawn.

-----Original Message-----
From: Paul Elschot [mailto:paul.elschot@xs4all.nl]
Sent: Monday, September 20, 2004 4:22 PM
To: lucene-user@jakarta.apache.org
Subject: Re: Too many boolean clauses


On Monday 20 September 2004 20:54, Shawn Konopinsky wrote:
> Hey Paul,
>
...
>
> Also - we are using a pooling feature which contains a pool of
> IndexSearchers that are used and tossed back each time we need to search.
> I'd hate to have to work around this and open up an IndexReader for this
> particular search, where all other searches use the pool. Suggestions?

You could use a map from the IndexSearcher back to the IndexReader that was
used to create it. (It's a bit of a waste because the IndexSearcher has a
reader
attribute internally.)

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10340-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 20 21:54:11 2004
Return-Path: <lucene-user-return-10340-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 49980 invoked from network); 20 Sep 2004 21:54:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Sep 2004 21:54:11 -0000
Received: (qmail 17764 invoked by uid 500); 20 Sep 2004 21:54:06 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 17711 invoked by uid 500); 20 Sep 2004 21:54:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 17698 invoked by uid 99); 20 Sep 2004 21:54:05 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [134.67.208.33] (HELO myrtle.rtpnc.epa.gov) (134.67.208.33)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 20 Sep 2004 14:54:04 -0700
Received: from epahub12.rtp.epa.gov (epahub12.rtp.epa.gov [134.67.213.53])
 by epamail.epa.gov (PMDF V5.2-32 #42055)
 with ESMTP id <0I4D00ITE0TDF4@epamail.epa.gov> for
 lucene-user@jakarta.apache.org; Mon, 20 Sep 2004 17:53:37 -0400 (EDT)
Date: Mon, 20 Sep 2004 16:54:04 -0500
From: Balasubramanian.Vijay@epamail.epa.gov
Subject: Highlighting PDF file after the search
To: lucene-user@jakarta.apache.org
Message-id:
 <OF7143055B.F8177576-ON86256F15.007780D2-86256F15.007811FB@epamail.epa.gov>
MIME-version: 1.0
X-Mailer: Lotus Notes Release 5.0.11   July 24, 2002
Content-type: text/plain; charset=US-ASCII
X-MIMETrack: Serialize by Router on EPAHUB12/USEPA/US(Release 6.0.2CF1|June 9,
 2003) at 09/20/2004 05:53:37 PM
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N





Hello,

I can successfully index and search the PDF documents, however i am not
able to highlight the searched text in my original PDF file (ie: like
dtSearch
highlights on original file)

I took a look at the highlighter in sandbox, compiled it and have it
ready.  I am wondering if this highlighter is for highlighting indexed
documents or
can it be used for PDF Files as is !  Please enlighten !

Thanks,

Vijay Balasubramanian
DPRA Inc.,


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10341-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 20 22:03:30 2004
Return-Path: <lucene-user-return-10341-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 53164 invoked from network); 20 Sep 2004 22:03:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Sep 2004 22:03:30 -0000
Received: (qmail 39810 invoked by uid 500); 20 Sep 2004 22:03:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 39766 invoked by uid 500); 20 Sep 2004 22:03:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 39689 invoked by uid 99); 20 Sep 2004 22:03:02 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.139.76.19] (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 20 Sep 2004 15:02:59 -0700
Received: (qmail 3053 invoked by uid 532); 20 Sep 2004 22:00:13 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 2.63.  Clear:. 
 Processed in 0.019231 secs); 20 Sep 2004 22:00:13 -0000
Received: from unknown (HELO ?10.0.0.157?) (127.0.0.1)
  by 0 with SMTP; 20 Sep 2004 22:00:13 -0000
Message-ID: <414F538F.10101@tropo.com>
Date: Mon, 20 Sep 2004 15:02:55 -0700
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.1) Gecko/20040707
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Highlighting PDF file after the search
References: <OF7143055B.F8177576-ON86256F15.007780D2-86256F15.007811FB@epamail.epa.gov>
In-Reply-To: <OF7143055B.F8177576-ON86256F15.007780D2-86256F15.007811FB@epamail.epa.gov>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Balasubramanian.Vijay@epamail.epa.gov wrote:

> 
> 
> 
> Hello,
> 
> I can successfully index and search the PDF documents, however i am not
> able to highlight the searched text in my original PDF file (ie: like
> dtSearch
> highlights on original file)
> 
> I took a look at the highlighter in sandbox, compiled it and have it
> ready.  I am wondering if this highlighter is for highlighting indexed
> documents or
> can it be used for PDF Files as is !  Please enlighten !

I did this a few weeks ago.

There are two ways, and they both revolve round the same thing, you need 
the tokenized PDF text available.

[a] Store the tokenized PDF text in the index, or in some other file on 
disk i.e. a "cache" ( but cache is a misleading term, as you can't have 
a cache miss unless you can do [b]).

[b] Tokenize it on the fly when you call getBestFragments() - the 1st 
arg, the TokenStream, should be one that takes a PDF file as input and 
tokenizes it.

http://www.searchmorph.com/pub/jakarta-lucene-sandbox/contributions/highlighter/build/docs/api/org/apache/lucene/search/highlight/Highlighter.html#getBestFragments(org.apache.lucene.analysis.TokenStream,%20java.lang.String,%20int,%20java.lang.String)
> 
> Thanks,
> 
> Vijay Balasubramanian
> DPRA Inc.,
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10342-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 20 22:21:06 2004
Return-Path: <lucene-user-return-10342-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 62252 invoked from network); 20 Sep 2004 22:21:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Sep 2004 22:21:06 -0000
Received: (qmail 70694 invoked by uid 500); 20 Sep 2004 22:20:58 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 70661 invoked by uid 500); 20 Sep 2004 22:20:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 70648 invoked by uid 99); 20 Sep 2004 22:20:57 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [134.67.208.99] (HELO marconi.rtp.epa.gov) (134.67.208.99)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 20 Sep 2004 15:20:57 -0700
Received: from epahub12.rtp.epa.gov (epahub12.rtp.epa.gov [134.67.213.53])
 by epamail.epa.gov (PMDF V5.2-32 #42056)
 with ESMTP id <0I4D009FX21UOS@epamail.epa.gov> for
 lucene-user@jakarta.apache.org; Mon, 20 Sep 2004 18:20:18 -0400 (EDT)
Date: Mon, 20 Sep 2004 17:20:55 -0500
From: Balasubramanian.Vijay@epamail.epa.gov
Subject: Re: Highlighting PDF file after the search
To: Lucene Users List <lucene-user@jakarta.apache.org>
Message-id:
 <OF4FDD4272.8244E24E-ON86256F15.007A85BC-86256F15.007A872B@epamail.epa.gov>
MIME-version: 1.0
X-Mailer: Lotus Notes Release 5.0.11   July 24, 2002
Content-type: text/plain; charset=US-ASCII
X-MIMETrack: Serialize by Router on EPAHUB12/USEPA/US(Release 6.0.2CF1|June 9,
 2003) at 09/20/2004 06:20:18 PM
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N





Thanks David.  I'll give that a shot and let you know.

Vijay Balasubramanian
DPRA Inc.,
214 665 7503


                                                                                                                                   
                      David Spencer                                                                                                
                      <dave-lucene-user        To:       Lucene Users List <lucene-user@jakarta.apache.org>                        
                      @tropo.com>              cc:                                                                                 
                                               Subject:  Re: Highlighting PDF file after the search                                
                      09/20/2004 05:02                                                                                             
                      PM                                                                                                           
                      Please respond to                                                                                            
                      Lucene Users List                                                                                            
                                                                                                                                   
                                                                                                                                   




Balasubramanian.Vijay@epamail.epa.gov wrote:

>
>
>
> Hello,
>
> I can successfully index and search the PDF documents, however i am
not
> able to highlight the searched text in my original PDF file (ie: like
> dtSearch
> highlights on original file)
>
> I took a look at the highlighter in sandbox, compiled it and have it
> ready.  I am wondering if this highlighter is for highlighting indexed
> documents or
> can it be used for PDF Files as is !  Please enlighten !

I did this a few weeks ago.

There are two ways, and they both revolve round the same thing, you need

the tokenized PDF text available.

[a] Store the tokenized PDF text in the index, or in some other file on
disk i.e. a "cache" ( but cache is a misleading term, as you can't have
a cache miss unless you can do [b]).

[b] Tokenize it on the fly when you call getBestFragments() - the 1st
arg, the TokenStream, should be one that takes a PDF file as input and
tokenizes it.

http://www.searchmorph.com/pub/jakarta-lucene-sandbox/contributions/highlighter/build/docs/api/org/apache/lucene/search/highlight/Highlighter.html#getBestFragments(org.apache.lucene.analysis.TokenStream,%20java.lang.String,%20int,%20java.lang.String)

>
> Thanks,
>
> Vijay Balasubramanian
> DPRA Inc.,
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10343-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 20 22:35:26 2004
Return-Path: <lucene-user-return-10343-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 67672 invoked from network); 20 Sep 2004 22:35:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Sep 2004 22:35:25 -0000
Received: (qmail 87101 invoked by uid 500); 20 Sep 2004 22:35:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 87072 invoked by uid 500); 20 Sep 2004 22:35:16 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 87056 invoked by uid 99); 20 Sep 2004 22:35:16 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [198.3.182.195] (HELO iss05.interliant.com) (198.3.182.195)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 20 Sep 2004 15:35:15 -0700
Received: from EX-008.mail.navisite.com (ex-008.interliant.com [198.3.179.39])
	by iss05.interliant.com (8.10.2/8.10.2) with ESMTP id i8KMZDm05600
	for <lucene-user@jakarta.apache.org>; Mon, 20 Sep 2004 17:35:13 -0500 (CDT)
Received: from EX-001.mail.navisite.com ([172.16.1.11]) by EX-008.mail.navisite.com with Microsoft SMTPSVC(6.0.3790.0);
	 Mon, 20 Sep 2004 17:31:50 -0500
Content-class: urn:content-classes:message
Subject: RE: Highlighting PDF file after the search
MIME-Version: 1.0
Date: Mon, 20 Sep 2004 17:35:08 -0500
Content-Type: multipart/signed;
	micalg=SHA1;
	boundary="----=_NextPart_000_000F_01C49F40.8E0B8720";
	protocol="application/x-pkcs7-signature"
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Message-ID: <05D268F5BC611F48A3986D837938309A766FD8@EX-001.mail.navisite.com>
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator: 
Thread-Topic: Highlighting PDF file after the search
Thread-Index: AcSfW+eCGbFoNEThTKm2TLhUn92/pgABbeHQ
From: "Bruce Ritchie" <bruce@jivesoftware.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-OriginalArrivalTime: 20 Sep 2004 22:31:50.0088 (UTC) FILETIME=[9EF77C80:01C49F61]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_000F_01C49F40.8E0B8720
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

> From: Balasubramanian.Vijay@epamail.epa.gov 

> I can successfully index and search the PDF documents, 
> however i am not able to highlight the searched text in my 
> original PDF file (ie: like dtSearch highlights on original file)
> 
> I took a look at the highlighter in sandbox, compiled it and 
> have it ready.  I am wondering if this highlighter is for 
> highlighting indexed documents or can it be used for PDF 
> Files as is !  Please enlighten !

The highlighter code in sandbox can facilitate highlighting of text
*extracted* from the PDF, however it does nothing for you to highlight
search terms *inside* of the PDF. For that you will need some sort of tool
that can modify the PDF on the fly as the user views it. I know of no quick
and dirty tool that allows you to do this, though there is quite a few
projects and products which allow you to manipulate PDF files which likely
can be used to obtain the behavior you are looking for (with some effort on
your part).


Regards,

Bruce Ritchie

------=_NextPart_000_000F_01C49F40.8E0B8720
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIJUTCCAtkw
ggJCoAMCAQICAwrLgDANBgkqhkiG9w0BAQQFADBiMQswCQYDVQQGEwJaQTElMCMGA1UEChMcVGhh
d3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVt
YWlsIElzc3VpbmcgQ0EwHhcNMDMwOTIzMTkzNjM3WhcNMDQwOTIyMTkzNjM3WjBIMR8wHQYDVQQD
ExZUaGF3dGUgRnJlZW1haWwgTWVtYmVyMSUwIwYJKoZIhvcNAQkBFhZicnVjZUBqaXZlc29mdHdh
cmUuY29tMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAozJPHo8aUH2MrrLnFrmybY38
uC8nlm26vBAPgGhSMthJlA0ShY9zAs4qGPyX1fIcANCKw0yPQDESRRySYPcRYMBnwaeqtIwldTb1
GTA6DAvZ/jpkM16DbAId17O86+4NeV7WoR+IguiyEUJqIqecxdGiJsLi8xNM0rPan91sWTA+30kP
vW12IU6MIa4XInPUazLqzZmA3CHoQJ2qorYCUx1cP3VW2fbWMjpfis67MalWcFuBtThFuq5qsZMB
EkFekoKPu2cpmjlKddrGj9+54U1CWBVQMl+9HSB1/qhl1La8BYRhaZ5UG3c0za9yultXL9k1GxfZ
YVqDy2iMI5+ejQIDAQABozMwMTAhBgNVHREEGjAYgRZicnVjZUBqaXZlc29mdHdhcmUuY29tMAwG
A1UdEwEB/wQCMAAwDQYJKoZIhvcNAQEEBQADgYEAEwi3SlYetSCzK5DLkClPMgTOM+P0qrIAFt+a
r8uMZwr3xqFOxZlt6/qMHoXAaOEWhZkHJ2dq8ebxjSdGXQF6/jKB42CEmYXmP6umb/2DBE6bVTy9
aksnMnKeSyuqP1HWwlCf5+Vk811biLueAupunISEh7P0bQXUgVtVVbOtAfIwggMtMIIClqADAgEC
AgEAMA0GCSqGSIb3DQEBBAUAMIHRMQswCQYDVQQGEwJaQTEVMBMGA1UECBMMV2VzdGVybiBDYXBl
MRIwEAYDVQQHEwlDYXBlIFRvd24xGjAYBgNVBAoTEVRoYXd0ZSBDb25zdWx0aW5nMSgwJgYDVQQL
Ex9DZXJ0aWZpY2F0aW9uIFNlcnZpY2VzIERpdmlzaW9uMSQwIgYDVQQDExtUaGF3dGUgUGVyc29u
YWwgRnJlZW1haWwgQ0ExKzApBgkqhkiG9w0BCQEWHHBlcnNvbmFsLWZyZWVtYWlsQHRoYXd0ZS5j
b20wHhcNOTYwMTAxMDAwMDAwWhcNMjAxMjMxMjM1OTU5WjCB0TELMAkGA1UEBhMCWkExFTATBgNV
BAgTDFdlc3Rlcm4gQ2FwZTESMBAGA1UEBxMJQ2FwZSBUb3duMRowGAYDVQQKExFUaGF3dGUgQ29u
c3VsdGluZzEoMCYGA1UECxMfQ2VydGlmaWNhdGlvbiBTZXJ2aWNlcyBEaXZpc2lvbjEkMCIGA1UE
AxMbVGhhd3RlIFBlcnNvbmFsIEZyZWVtYWlsIENBMSswKQYJKoZIhvcNAQkBFhxwZXJzb25hbC1m
cmVlbWFpbEB0aGF3dGUuY29tMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDUadfUsJRkW3Hp
R9gMUbbqcpGwhF59LQ2PexLfhSV1KHQ6QixjJ5+Ve0vvfhmHHYbqo925zpZkGsIUbkSsfOaP6E0P
cR9AOKYAo4d49vmUhl6t6sBeduvZFKNdbnp8DKVLVX8GGSl/npom1Wq7OCQIapjHsdqjmJH9edvl
WsQcuQIDAQABoxMwETAPBgNVHRMBAf8EBTADAQH/MA0GCSqGSIb3DQEBBAUAA4GBAMfskn5O+PWW
pWdiKqTwTRFg0G+NYFhhrCa7UjVcCM8w+6hKloofYkIjjBcP9LpknBesRynfnZhe0mxgcVyirNx5
4+duAEcftQ0o6AKd5Jr9E/Sm2Xyx+NxfIyYJkYBz0BQb3kOpgyXy5pwvFcr+pquKB3WLDN1RhGvk
+NHOd6KBMIIDPzCCAqigAwIBAgIBDTANBgkqhkiG9w0BAQUFADCB0TELMAkGA1UEBhMCWkExFTAT
BgNVBAgTDFdlc3Rlcm4gQ2FwZTESMBAGA1UEBxMJQ2FwZSBUb3duMRowGAYDVQQKExFUaGF3dGUg
Q29uc3VsdGluZzEoMCYGA1UECxMfQ2VydGlmaWNhdGlvbiBTZXJ2aWNlcyBEaXZpc2lvbjEkMCIG
A1UEAxMbVGhhd3RlIFBlcnNvbmFsIEZyZWVtYWlsIENBMSswKQYJKoZIhvcNAQkBFhxwZXJzb25h
bC1mcmVlbWFpbEB0aGF3dGUuY29tMB4XDTAzMDcxNzAwMDAwMFoXDTEzMDcxNjIzNTk1OVowYjEL
MAkGA1UEBhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNV
BAMTI1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBMIGfMA0GCSqGSIb3DQEBAQUA
A4GNADCBiQKBgQDEpjxVc1X7TrnKmVoeaMB1BHCd3+n/ox7svc31W/Iadr1/DDph8r9RzgHU5VAK
MNcCY1osiRVwjt3J8CuFWqo/cVbLrzwLB+fxH5E2JCoTzyvV84J3PQO+K/67GD4Hv0CAAmTXp6a7
n2XRxSpUhQ9IBH+nttE8YQRAHmQZcmC3+wIDAQABo4GUMIGRMBIGA1UdEwEB/wQIMAYBAf8CAQAw
QwYDVR0fBDwwOjA4oDagNIYyaHR0cDovL2NybC50aGF3dGUuY29tL1RoYXd0ZVBlcnNvbmFsRnJl
ZW1haWxDQS5jcmwwCwYDVR0PBAQDAgEGMCkGA1UdEQQiMCCkHjAcMRowGAYDVQQDExFQcml2YXRl
TGFiZWwyLTEzODANBgkqhkiG9w0BAQUFAAOBgQBIjNFQg+oLLswNo2asZw9/r6y+whehQ5aUnX9M
Ibj4Nh+qLZ82L8D0HFAgk3A8/a3hYWLD2ToZfoSxmRsAxRoLgnSeJVCUYsfbJ3FXJY3dqZw5jowg
T2Vfldr394fWxghOrvbqNOUQGls1TXfjViF4gtwhGTXeJLHTHUb/XV9lTzGCA1AwggNMAgEBMGkw
YjELMAkGA1UEBhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAq
BgNVBAMTI1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBAgMKy4AwCQYFKw4DAhoF
AKCCAbwwGAYJKoZIhvcNAQkDMQsGCSqGSIb3DQEHATAcBgkqhkiG9w0BCQUxDxcNMDQwOTIwMjIz
NTA4WjAjBgkqhkiG9w0BCQQxFgQUn3c5un76AX2WmREEHfIdZtKrn2wwZwYJKoZIhvcNAQkPMVow
WDAKBggqhkiG9w0DBzAOBggqhkiG9w0DAgICAIAwDQYIKoZIhvcNAwICAUAwBwYFKw4DAgcwDQYI
KoZIhvcNAwICASgwBwYFKw4DAhowCgYIKoZIhvcNAgUweAYJKwYBBAGCNxAEMWswaTBiMQswCQYD
VQQGEwJaQTElMCMGA1UEChMcVGhhd3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMj
VGhhd3RlIFBlcnNvbmFsIEZyZWVtYWlsIElzc3VpbmcgQ0ECAwrLgDB6BgsqhkiG9w0BCRACCzFr
oGkwYjELMAkGA1UEBhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4x
LDAqBgNVBAMTI1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBAgMKy4AwDQYJKoZI
hvcNAQEBBQAEggEAnluwxxgFK+GrslsEHBBNbtv6swCbRCJ0Un9k7VzXc/CCMdjk10mRje5/o77+
Dh2sKxfgr/54D97jSs7rln1HaV4xqD2XTwhHX5lgHNwUr0mmYHNLDBndmUl7P/F9sP/A8S5ZXr2m
kpau1R0+JoxUMJ0AjyZFBjioZ/KiPxHAGtLuXX8MBlY10gQQanMw7C55KA6JZjDFgi6gdHc1Xj9n
UzuSN/FJD9eOb3WG2xaH8rUyJphSo+dCkqK31D91Qw92J6xHvwVB9gV4OFaF99MgukKBe8vSCTyt
RvnNCTTScb+Hd9b6fHG+lET866Zjdt/EQtnFCuKZ8txknTWjHGJiwgAAAAAAAA==

------=_NextPart_000_000F_01C49F40.8E0B8720--

From lucene-user-return-10344-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 20 22:37:30 2004
Return-Path: <lucene-user-return-10344-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 68454 invoked from network); 20 Sep 2004 22:37:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Sep 2004 22:37:30 -0000
Received: (qmail 89749 invoked by uid 500); 20 Sep 2004 22:36:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 89625 invoked by uid 500); 20 Sep 2004 22:36:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 89577 invoked by uid 99); 20 Sep 2004 22:36:55 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of crodriguez@gmail.com designates 64.233.170.192 as permitted sender)
Received: from [64.233.170.192] (HELO mproxy.gmail.com) (64.233.170.192)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 20 Sep 2004 15:36:54 -0700
Received: by mproxy.gmail.com with SMTP id 73so1023745rnl
        for <lucene-user@jakarta.apache.org>; Mon, 20 Sep 2004 15:36:51 -0700 (PDT)
Received: by 10.38.24.80 with SMTP id 80mr833748rnx;
        Mon, 20 Sep 2004 15:36:51 -0700 (PDT)
Received: by 10.38.86.69 with HTTP; Mon, 20 Sep 2004 15:36:51 -0700 (PDT)
Message-ID: <ce6cc8cf04092015364dd1d145@mail.gmail.com>
Date: Mon, 20 Sep 2004 19:36:51 -0300
From: Christian Rodriguez <crodriguez@gmail.com>
Reply-To: Christian Rodriguez <crodriguez@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: Problems with Lucene + BDB (Berkeley DB) integration
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi everyone, 

I am trying to use the Lucene + BDB integration from the sandbox
(http://cvs.apache.org/viewcvs.cgi/jakarta-lucene-sandbox/contributions/db/).
I installed C Berkeley DB 4.2.52 and I have the Lucene jar file.

I have an example program that indexes 4 small text files in a
directory (its very similar to the IndexFiles.java in the Lucene demo,
except that it uses BDB + Lucene). The problem I have is that
executing the indexing program generates different results each time I
run it. For example: If I start with an empty index, run the indexing
program and then query the index I get the correct results; then I
delete the index to start from scratch again, and perform the same
sequence and I get no results. (?)

What puzzles me is the non-deterministic results... the same execution
sequence generates two different results. I then wrote a program to
dump the index and I found out that the list of files that end up in
the index is different every time I index those 4 files.

For example:
1st run: contents of directory: _4.f2, _4.f3, _4.cfs, _4.fdx, _4.fnm,
_4.frq, _4.prx, _4.tii, segments, deletable. (9 files)
2nd run: contents of directory: 0:_4.f1, _4.cfs, _4.fdt, _4.fdx,
_4.fnm, _4.frq, _4.prx, _4.tii, _4.tis, segments, deletable. (11
files)

Does anyone have any idea why this is happening?
Has anyone been able to use the BDB + Lucene integration with no problems?

Id appreciate any help or pointers.
Thanks!
Xtian

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10345-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 21 01:13:58 2004
Return-Path: <lucene-user-return-10345-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 35433 invoked from network); 21 Sep 2004 01:13:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Sep 2004 01:13:58 -0000
Received: (qmail 92449 invoked by uid 500); 21 Sep 2004 01:13:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 92367 invoked by uid 500); 21 Sep 2004 01:13:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 92353 invoked by uid 99); 21 Sep 2004 01:13:48 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of goodell@gmail.com designates 64.233.170.192 as permitted sender)
Received: from [64.233.170.192] (HELO mproxy.gmail.com) (64.233.170.192)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 20 Sep 2004 18:13:48 -0700
Received: by mproxy.gmail.com with SMTP id 80so1232337rnk
        for <lucene-user@jakarta.apache.org>; Mon, 20 Sep 2004 18:13:46 -0700 (PDT)
Received: by 10.38.179.69 with SMTP id b69mr75984rnf;
        Mon, 20 Sep 2004 18:13:46 -0700 (PDT)
Received: by 10.38.8.39 with HTTP; Mon, 20 Sep 2004 18:13:45 -0700 (PDT)
Message-ID: <55b2c6b904092018135c77c0e9@mail.gmail.com>
Date: Mon, 20 Sep 2004 18:13:46 -0700
From: Andy Goodell <goodell@gmail.com>
Reply-To: Andy Goodell <goodell@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>, 
	Christian Rodriguez <crodriguez@gmail.com>
Subject: Re: Problems with Lucene + BDB (Berkeley DB) integration
In-Reply-To: <ce6cc8cf04092015364dd1d145@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <ce6cc8cf04092015364dd1d145@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I used BDB + lucene successfully using the lucene 1.3 distribution,
but it broke in my application with the 1.4 distribution.  The 1.4
dist uses a different file system by default, the "cluster file
system", so maybe that is the source of the issues.

good luck,
andy g


On Mon, 20 Sep 2004 19:36:51 -0300, Christian Rodriguez
<crodriguez@gmail.com> wrote:
> Hi everyone,
> 
> I am trying to use the Lucene + BDB integration from the sandbox
> (http://cvs.apache.org/viewcvs.cgi/jakarta-lucene-sandbox/contributions/db/).
> I installed C Berkeley DB 4.2.52 and I have the Lucene jar file.
> 
> I have an example program that indexes 4 small text files in a
> directory (its very similar to the IndexFiles.java in the Lucene demo,
> except that it uses BDB + Lucene). The problem I have is that
> executing the indexing program generates different results each time I
> run it. For example: If I start with an empty index, run the indexing
> program and then query the index I get the correct results; then I
> delete the index to start from scratch again, and perform the same
> sequence and I get no results. (?)
> 
> What puzzles me is the non-deterministic results... the same execution
> sequence generates two different results. I then wrote a program to
> dump the index and I found out that the list of files that end up in
> the index is different every time I index those 4 files.
> 
> For example:
> 1st run: contents of directory: _4.f2, _4.f3, _4.cfs, _4.fdx, _4.fnm,
> _4.frq, _4.prx, _4.tii, segments, deletable. (9 files)
> 2nd run: contents of directory: 0:_4.f1, _4.cfs, _4.fdt, _4.fdx,
> _4.fnm, _4.frq, _4.prx, _4.tii, _4.tis, segments, deletable. (11
> files)
> 
> Does anyone have any idea why this is happening?
> Has anyone been able to use the BDB + Lucene integration with no problems?
> 
> Id appreciate any help or pointers.
> Thanks!
> Xtian
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10346-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 21 02:49:36 2004
Return-Path: <lucene-user-return-10346-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 75593 invoked from network); 21 Sep 2004 02:49:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Sep 2004 02:49:35 -0000
Received: (qmail 81851 invoked by uid 500); 21 Sep 2004 02:49:26 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 81748 invoked by uid 500); 21 Sep 2004 02:49:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 81732 invoked by uid 99); 21 Sep 2004 02:49:25 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [202.83.206.234] (HELO mail1.yesasia.com) (202.83.206.234)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 20 Sep 2004 19:49:24 -0700
Received: from teay (192.168.120.127:2280)
	by yesasia.com.hk with [XMail 1.20 ESMTP Server]
	id <SC0183> for <lucene-user@jakarta.apache.org> from <teayu2002@netvigator.com>;
	Tue, 21 Sep 2004 10:49:21 +0800
Message-ID: <00b501c49f85$99f67870$7f78a8c0@yawin.yesasia.com>
From: "Tea Yu" <teayu2002@netvigator.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Use of SortComparator.getComparable() ?
Date: Tue, 21 Sep 2004 10:49:23 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="big5"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Dear all,

I'm recently implementing a sort logic that leverages an external index,
however, I'm confused by the newComparator() and getComparable() in
SortComparator.

It seems natural to me that IndexSearcher -> FieldSortedHitQueue ->
factory.newComparator().  However, what's the use of getComparable() if
newComparator() is doing the job?  Any use scenario?

Thanks
Tea


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10347-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 21 04:50:51 2004
Return-Path: <lucene-user-return-10347-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 48015 invoked from network); 21 Sep 2004 04:50:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Sep 2004 04:50:51 -0000
Received: (qmail 2465 invoked by uid 500); 21 Sep 2004 04:50:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 2372 invoked by uid 500); 21 Sep 2004 04:50:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 2358 invoked by uid 99); 21 Sep 2004 04:50:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [203.200.8.84] (HELO ctsinblrsxid.cts.com) (203.200.8.84)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 20 Sep 2004 21:50:37 -0700
Received: from ctsinrmzsxub.cts.com ([10.236.168.5]) by ctsinblrsxid with tr
	end_isnt_name_B; Tue, 21 Sep 2004 10:20:31 +0530
X-MimeOLE: Produced By Microsoft Exchange V6.0.6249.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: WildCardQuery
Date: Tue, 21 Sep 2004 10:20:30 +0530
Message-ID: <53CCF72FECD62346ADC714878C15EB0C398082@ctsinrmzsxub.cts.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: WildCardQuery
Thread-Index: AcSfMoYWNNEUW2AdQ2S2vbz6h5/U/wAY4Lpw
From: "Raju, Robinson (Cognizant)" <RRobinson@blr.cognizant.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-imss-version: 2.0
X-imss-result: Passed
X-imss-scores: Clean:18.7513 C:20 M:1 S:5 R:5
X-imss-settings: Baseline:1 C:1 M:1 S:1 R:1 (0.0000 0.0000)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Is there a limitation in Lucene when it comes to wildcard search ?=0D
Is it a problem if we use less than 3 characters along with a
wildcard(*).
Gives me error if I try using 45* , *34 , *3 ..etc .=0D
Too Many Clauses Error
Doesn't happen if '?' is used instead of '*'.
The intriguing thing is , that it is not consistent . 00* doesn't fail.
Am I missing something ?

Robin

This e-mail and any files transmitted with it are for the sole use of the=
 intended recipient(s) and may contain confidential and privileged=
 information.
If you are not the intended recipient, please contact the sender by reply=
 e-mail and destroy all copies of the original message.=0D
Any unauthorised review, use, disclosure, dissemination, forwarding,=
 printing or copying of this email or any action taken in reliance on this=
 e-mail is strictly=0D
prohibited and may be unlawful.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10348-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 21 06:12:02 2004
Return-Path: <lucene-user-return-10348-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 76489 invoked from network); 21 Sep 2004 06:12:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Sep 2004 06:12:02 -0000
Received: (qmail 76577 invoked by uid 500); 21 Sep 2004 06:11:37 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 76439 invoked by uid 500); 21 Sep 2004 06:11:36 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 76252 invoked by uid 99); 21 Sep 2004 06:11:33 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [202.83.206.234] (HELO mail1.yesasia.com) (202.83.206.234)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 20 Sep 2004 23:11:31 -0700
Received: from teay (192.168.120.127:2726)
	by yesasia.com.hk with [XMail 1.20 ESMTP Server]
	id <SC0D12> for <lucene-user@jakarta.apache.org> from <teayu2002@netvigator.com>;
	Tue, 21 Sep 2004 14:11:19 +0800
Message-ID: <001301c49fa1$cfd57380$7f78a8c0@yawin.yesasia.com>
From: "Tea Yu" <teayu2002@netvigator.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <00b501c49f85$99f67870$7f78a8c0@yawin.yesasia.com>
Subject: Re: Use of SortComparator.getComparable() ?
Date: Tue, 21 Sep 2004 14:11:19 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="big5"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi all,

Just digging deeper.. It seems the Custom comparables used in newComparator
comes from getComparable(), right?

Thanks
Tea


> Dear all,
>
> I'm recently implementing a sort logic that leverages an external index,
> however, I'm confused by the newComparator() and getComparable() in
> SortComparator.
>
> It seems natural to me that IndexSearcher -> FieldSortedHitQueue ->
> factory.newComparator().  However, what's the use of getComparable() if
> newComparator() is doing the job?  Any use scenario?
>
> Thanks
> Tea
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10349-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 21 06:39:26 2004
Return-Path: <lucene-user-return-10349-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 86500 invoked from network); 21 Sep 2004 06:39:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Sep 2004 06:39:26 -0000
Received: (qmail 97626 invoked by uid 500); 21 Sep 2004 06:39:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 97492 invoked by uid 500); 21 Sep 2004 06:38:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 97394 invoked by uid 99); 21 Sep 2004 06:38:48 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.109.24.29] (HELO smtp-vbr9.xs4all.nl) (194.109.24.29)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 20 Sep 2004 23:38:47 -0700
Received: from k7l.local (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr9.xs4all.nl (8.12.11/8.12.11) with ESMTP id i8L6ciLk043321
	for <lucene-user@jakarta.apache.org>; Tue, 21 Sep 2004 08:38:44 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: lucene-user@jakarta.apache.org
Subject: Re: WildCardQuery
Date: Tue, 21 Sep 2004 08:38:44 +0200
User-Agent: KMail/1.5.4
References: <53CCF72FECD62346ADC714878C15EB0C398082@ctsinrmzsxub.cts.com>
In-Reply-To: <53CCF72FECD62346ADC714878C15EB0C398082@ctsinrmzsxub.cts.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200409210838.44105.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Tuesday 21 September 2004 06:50, Raju, Robinson (Cognizant) wrote:
> Is there a limitation in Lucene when it comes to wildcard search ?
> Is it a problem if we use less than 3 characters along with a
> wildcard(*).
> Gives me error if I try using 45* , *34 , *3 ..etc .
> Too Many Clauses Error
> Doesn't happen if '?' is used instead of '*'.
> The intriguing thing is , that it is not consistent . 00* doesn't fail.
> Am I missing something ?

The number of clauses added to the query equals the number of
indexed terms that match the wildcard. As each clause ends up using
some buffer memory internally, a maximum was introduced to
avoid running out of memory.
You can change the maximum nr of added clauses using
BooleanQuery.setMaxClauseCount() but then it is advisable
to monitor memory usage, and evt. increase heap space for the JVM.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10350-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 21 13:50:16 2004
Return-Path: <lucene-user-return-10350-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 53315 invoked from network); 21 Sep 2004 13:50:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Sep 2004 13:50:16 -0000
Received: (qmail 10656 invoked by uid 500); 21 Sep 2004 13:45:22 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 10516 invoked by uid 500); 21 Sep 2004 13:45:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 10400 invoked by uid 99); 21 Sep 2004 13:45:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,HTML_TEXT_AFTER_BODY,HTML_TEXT_AFTER_HTML
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [200.61.168.200] (HELO gandalf.xlnet.net.ar) (200.61.168.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 21 Sep 2004 06:45:16 -0700
Received: from exchange.xlnet.net.ar (10.0.0.3) by gandalf.xlnet.net.ar (NPlex 5.1.036)
        id 414220300002E2E2 for lucene-user@jakarta.apache.org; Tue, 21 Sep 2004 10:47:23 -0300
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C49FE1.7F455B30"
Subject: bug in MultiFieldQueryParser.parse
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Date: Tue, 21 Sep 2004 10:47:12 -0300
Message-ID: <DDD3F807D283B543B3396F7E00A2C7E125F36D@exchange.xlnet.net.ar>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: bug in MultiFieldQueryParser.parse
Thread-Index: AcSf4gJpYz92zxWpQ5K6BcMMeiQe9A==
From: "Wermus Fernando" <fernando.wermus@xlnet.net.ar>
To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C49FE1.7F455B30
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I have this query string
queryString =3D tarea AND (tipo:contact OR tipo:account OR
tipo:opportunity OR tipo:event OR tipo:task)
and when I parse
query=3DMultiFieldQueryParser.parse(queryString,fields,analyzer);
I got one letter less. I have "tarea" and the MultiFieldQueryParser
change to "tare". I don't know why.
(+mobile:tare +(tipo:contact tipo:account tipo:opportunity tipo:event
tipo:task)) (+fax:tare +(tipo:contact tipo:account tipo:opportunity
tipo:event tipo:task)) (+firstname:tare +(tipo:contact tipo:account
tipo:opportunity tipo:event tipo:task)) (+otherPhone:tare +(tipo:contact
tipo:account tipo:opportunity tipo:event tipo:task)) (+phone:tare
+(tipo:contact tipo:account tipo:opportunity tipo:event tipo:task))
(+lastname:tare +(tipo:contact tipo:account tipo:opportunity tipo:event
tipo:task)) (+salutation:tare +(tipo:contact tipo:account
tipo:opportunity tipo:event tipo:task)) (+email:tare +(tipo:contact
tipo:account tipo:opportunity tipo:event tipo:task)) (+symbol:tare
+(tipo:contact tipo:account tipo:opportunity tipo:event tipo:task))
(+phone:tare +(tipo:contact tipo:account tipo:opportunity tipo:event
tipo:task)) (+shortName:tare +(tipo:contact tipo:account
tipo:opportunity tipo:event tipo:task)) (+location:tare +(tipo:contact
tipo:account tipo:opportunity tipo:event tipo:task)) (+fax:tare
+(tipo:contact tipo:account tipo:opportunity tipo:event tipo:task))
(+number:tare +(tipo:contact tipo:account tipo:opportunity tipo:event
tipo:task)) (+name:tare +(tipo:contact tipo:account tipo:opportunity
tipo:event tipo:task)) (+date:tare +(tipo:contact tipo:account
tipo:opportunity tipo:event tipo:task)) (+subject:tare +(tipo:contact
tipo:account tipo:opportunity tipo:event tipo:task)) (+expiration:tare
+(tipo:contact tipo:account tipo:opportunity tipo:event tipo:task))
(+subject:tare +(tipo:contact tipo:account tipo:opportunity tipo:event
tipo:task))
=20

------_=_NextPart_001_01C49FE1.7F455B30--

From lucene-user-return-10351-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 21 17:10:40 2004
Return-Path: <lucene-user-return-10351-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 99778 invoked from network); 21 Sep 2004 17:10:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Sep 2004 17:10:40 -0000
Received: (qmail 69736 invoked by uid 500); 21 Sep 2004 17:10:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 69686 invoked by uid 500); 21 Sep 2004 17:10:08 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 69608 invoked by uid 99); 21 Sep 2004 17:10:06 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of crodriguez@gmail.com designates 64.233.170.207 as permitted sender)
Received: from [64.233.170.207] (HELO mproxy.gmail.com) (64.233.170.207)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 21 Sep 2004 10:10:05 -0700
Received: by mproxy.gmail.com with SMTP id 75so1146792rnk
        for <lucene-user@jakarta.apache.org>; Tue, 21 Sep 2004 10:10:03 -0700 (PDT)
Received: by 10.38.207.19 with SMTP id e19mr358760rng;
        Tue, 21 Sep 2004 10:10:03 -0700 (PDT)
Received: by 10.38.86.14 with HTTP; Tue, 21 Sep 2004 10:10:03 -0700 (PDT)
Message-ID: <ce6cc8cf040921101031dcf82b@mail.gmail.com>
Date: Tue, 21 Sep 2004 14:10:03 -0300
From: Christian Rodriguez <crodriguez@gmail.com>
Reply-To: Christian Rodriguez <crodriguez@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Problems with Lucene + BDB (Berkeley DB) integration
In-Reply-To: <55b2c6b904092018135c77c0e9@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <ce6cc8cf04092015364dd1d145@mail.gmail.com>
	 <55b2c6b904092018135c77c0e9@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Andy, you are right. 

I tried with Lucene 1.3 and it worked perfectly. This should be added
to a README in the Lucene + BDB sandbox (or somewhere) so people dont
spend days struggling with those weird non - deterministic bugs I am
getting...

Now, I do need to use version 1.4, so Id like to see if its actually
the cluster file system causing the problem in the integration with
Berkeley DB. Is it possible to turn the cluster file system OFF in
Lucene 1.4?

Anyone has any idea what other things could be causing BDB + Lucene to
work with Lucene 1.3 and not with 1.4?

Thanks!
Xtian

On Mon, 20 Sep 2004 18:13:46 -0700, Andy Goodell <goodell@gmail.com> wrote:
> I used BDB + lucene successfully using the lucene 1.3 distribution,
> but it broke in my application with the 1.4 distribution.  The 1.4
> dist uses a different file system by default, the "cluster file
> system", so maybe that is the source of the issues.
> 
> good luck,
> andy g
> 
> 
> 
> 
> On Mon, 20 Sep 2004 19:36:51 -0300, Christian Rodriguez
> <crodriguez@gmail.com> wrote:
> > Hi everyone,
> >
> > I am trying to use the Lucene + BDB integration from the sandbox
> > (http://cvs.apache.org/viewcvs.cgi/jakarta-lucene-sandbox/contributions/db/).
> > I installed C Berkeley DB 4.2.52 and I have the Lucene jar file.
> >
> > I have an example program that indexes 4 small text files in a
> > directory (its very similar to the IndexFiles.java in the Lucene demo,
> > except that it uses BDB + Lucene). The problem I have is that
> > executing the indexing program generates different results each time I
> > run it. For example: If I start with an empty index, run the indexing
> > program and then query the index I get the correct results; then I
> > delete the index to start from scratch again, and perform the same
> > sequence and I get no results. (?)
> >
> > What puzzles me is the non-deterministic results... the same execution
> > sequence generates two different results. I then wrote a program to
> > dump the index and I found out that the list of files that end up in
> > the index is different every time I index those 4 files.
> >
> > For example:
> > 1st run: contents of directory: _4.f2, _4.f3, _4.cfs, _4.fdx, _4.fnm,
> > _4.frq, _4.prx, _4.tii, segments, deletable. (9 files)
> > 2nd run: contents of directory: 0:_4.f1, _4.cfs, _4.fdt, _4.fdx,
> > _4.fnm, _4.frq, _4.prx, _4.tii, _4.tis, segments, deletable. (11
> > files)
> >
> > Does anyone have any idea why this is happening?
> > Has anyone been able to use the BDB + Lucene integration with no problems?
> >
> > Id appreciate any help or pointers.
> > Thanks!
> > Xtian
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10352-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 21 17:16:47 2004
Return-Path: <lucene-user-return-10352-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 3337 invoked from network); 21 Sep 2004 17:16:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Sep 2004 17:16:47 -0000
Received: (qmail 79536 invoked by uid 500); 21 Sep 2004 17:16:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 79332 invoked by uid 500); 21 Sep 2004 17:16:40 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 79316 invoked by uid 99); 21 Sep 2004 17:16:39 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.50.92.242] (HELO exch1.colmol.com) (64.50.92.242)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 21 Sep 2004 10:16:39 -0700
Received: from ASSP-nospam ([192.168.1.204]) by exch1.colmol.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 21 Sep 2004 13:16:31 -0400
Received: from 192.168.1.205 ([192.168.1.205] helo=exch1.colmol.com) by
  ASSP-nospam ; 21 Sep 04 17:16:31 -0000
X-MimeOLE: Produced By Microsoft Exchange V6.0.6556.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Problems with Lucene + BDB (Berkeley DB) integration
Date: Tue, 21 Sep 2004 13:16:31 -0400
Message-ID: <B1FD64AF10DAED4786DC31F17B1C3884E4E9E9@exch1.colmol.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Problems with Lucene + BDB (Berkeley DB) integration
Thread-Index: AcSf/eEGTs8yTJlnT5qMwTDwK6fpeAAAFGqw
From: "Crump, Michael" <mcrump@leadscope.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	"Christian Rodriguez" <crodriguez@gmail.com>
X-OriginalArrivalTime: 21 Sep 2004 17:16:31.0781 (UTC) FILETIME=[BD30AD50:01C49FFE]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Try setUseCompoundFile(false) on your IndexWriter as soon as you create
it or before you call optimize

-----Original Message-----
From: Christian Rodriguez [mailto:crodriguez@gmail.com]=20
Sent: Tuesday, September 21, 2004 1:10 PM
To: Lucene Users List
Subject: Re: Problems with Lucene + BDB (Berkeley DB) integration

Andy, you are right.=20

I tried with Lucene 1.3 and it worked perfectly. This should be added
to a README in the Lucene + BDB sandbox (or somewhere) so people dont
spend days struggling with those weird non - deterministic bugs I am
getting...

Now, I do need to use version 1.4, so Id like to see if its actually
the cluster file system causing the problem in the integration with
Berkeley DB. Is it possible to turn the cluster file system OFF in
Lucene 1.4?

Anyone has any idea what other things could be causing BDB + Lucene to
work with Lucene 1.3 and not with 1.4?

Thanks!
Xtian

On Mon, 20 Sep 2004 18:13:46 -0700, Andy Goodell <goodell@gmail.com>
wrote:
> I used BDB + lucene successfully using the lucene 1.3 distribution,
> but it broke in my application with the 1.4 distribution.  The 1.4
> dist uses a different file system by default, the "cluster file
> system", so maybe that is the source of the issues.
>=20
> good luck,
> andy g
>=20
>=20
>=20
>=20
> On Mon, 20 Sep 2004 19:36:51 -0300, Christian Rodriguez
> <crodriguez@gmail.com> wrote:
> > Hi everyone,
> >
> > I am trying to use the Lucene + BDB integration from the sandbox
> >
(http://cvs.apache.org/viewcvs.cgi/jakarta-lucene-sandbox/contributions/
db/).
> > I installed C Berkeley DB 4.2.52 and I have the Lucene jar file.
> >
> > I have an example program that indexes 4 small text files in a
> > directory (its very similar to the IndexFiles.java in the Lucene
demo,
> > except that it uses BDB + Lucene). The problem I have is that
> > executing the indexing program generates different results each time
I
> > run it. For example: If I start with an empty index, run the
indexing
> > program and then query the index I get the correct results; then I
> > delete the index to start from scratch again, and perform the same
> > sequence and I get no results. (?)
> >
> > What puzzles me is the non-deterministic results... the same
execution
> > sequence generates two different results. I then wrote a program to
> > dump the index and I found out that the list of files that end up in
> > the index is different every time I index those 4 files.
> >
> > For example:
> > 1st run: contents of directory: _4.f2, _4.f3, _4.cfs, _4.fdx,
_4.fnm,
> > _4.frq, _4.prx, _4.tii, segments, deletable. (9 files)
> > 2nd run: contents of directory: 0:_4.f1, _4.cfs, _4.fdt, _4.fdx,
> > _4.fnm, _4.frq, _4.prx, _4.tii, _4.tis, segments, deletable. (11
> > files)
> >
> > Does anyone have any idea why this is happening?
> > Has anyone been able to use the BDB + Lucene integration with no
problems?
> >
> > Id appreciate any help or pointers.
> > Thanks!
> > Xtian
> >=20
> >
---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10353-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 21 18:38:08 2004
Return-Path: <lucene-user-return-10353-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 53668 invoked from network); 21 Sep 2004 18:38:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Sep 2004 18:38:08 -0000
Received: (qmail 30003 invoked by uid 500); 21 Sep 2004 18:38:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 29863 invoked by uid 500); 21 Sep 2004 18:38:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 29850 invoked by uid 99); 21 Sep 2004 18:38:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [200.61.168.200] (HELO gandalf.xlnet.net.ar) (200.61.168.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 21 Sep 2004 11:37:58 -0700
Received: from exchange.xlnet.net.ar (10.0.0.3) by gandalf.xlnet.net.ar (NPlex 5.1.036)
        id 41506AA80000041D for lucene-user@jakarta.apache.org; Tue, 21 Sep 2004 15:41:07 -0300
Subject: RE: bug in MultiFieldQueryParser.parse
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Date: Tue, 21 Sep 2004 15:41:07 -0300
Content-Transfer-Encoding: quoted-printable
Message-ID: <DDD3F807D283B543B3396F7E00A2C7E125F380@exchange.xlnet.net.ar>
Content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
X-MS-TNEF-Correlator: 
Thread-Topic: bug in MultiFieldQueryParser.parse
Thread-Index: AcSf4gJpYz92zxWpQ5K6BcMMeiQe9AAKBpcA
From: "Wermus Fernando" <fernando.wermus@xlnet.net.ar>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Luceners,
	I'm using SnowBallAnalyzer for spanish. I'm indexing and
searching with these analyzer, but when I open luke and look up the
document with standardAnalyzer (I don't know how to use snowBallAnalyzer
in spanish in Luke) I see the tokens in case sensitive and I see the
word "tarea" instead of "tare".
I got a "tare" when searching with snowballSpanish and I got a "tarea"
with snowballSpanish when indexing (I'm using luke for looking up in the
index).

Thanks in advance.
-----Mensaje original-----
De: Wermus Fernando [mailto:fernando.wermus@xlnet.net.ar]=20
Enviado el: Martes, 21 de Septiembre de 2004 10:47 a.m.
Para: lucene-user@jakarta.apache.org
Asunto: bug in MultiFieldQueryParser.parse

I have this query string
queryString =3D tarea AND (tipo:contact OR tipo:account OR
tipo:opportunity OR tipo:event OR tipo:task)
and when I parse
query=3DMultiFieldQueryParser.parse(queryString,fields,analyzer);
I got one letter less. I have "tarea" and the MultiFieldQueryParser
change to "tare". I don't know why.
(+mobile:tare +(tipo:contact tipo:account tipo:opportunity tipo:event
tipo:task)) (+fax:tare +(tipo:contact tipo:account tipo:opportunity
tipo:event tipo:task)) (+firstname:tare +(tipo:contact tipo:account
tipo:opportunity tipo:event tipo:task)) (+otherPhone:tare +(tipo:contact
tipo:account tipo:opportunity tipo:event tipo:task)) (+phone:tare
+(tipo:contact tipo:account tipo:opportunity tipo:event tipo:task))
(+lastname:tare +(tipo:contact tipo:account tipo:opportunity tipo:event
tipo:task)) (+salutation:tare +(tipo:contact tipo:account
tipo:opportunity tipo:event tipo:task)) (+email:tare +(tipo:contact
tipo:account tipo:opportunity tipo:event tipo:task)) (+symbol:tare
+(tipo:contact tipo:account tipo:opportunity tipo:event tipo:task))
(+phone:tare +(tipo:contact tipo:account tipo:opportunity tipo:event
tipo:task)) (+shortName:tare +(tipo:contact tipo:account
tipo:opportunity tipo:event tipo:task)) (+location:tare +(tipo:contact
tipo:account tipo:opportunity tipo:event tipo:task)) (+fax:tare
+(tipo:contact tipo:account tipo:opportunity tipo:event tipo:task))
(+number:tare +(tipo:contact tipo:account tipo:opportunity tipo:event
tipo:task)) (+name:tare +(tipo:contact tipo:account tipo:opportunity
tipo:event tipo:task)) (+date:tare +(tipo:contact tipo:account
tipo:opportunity tipo:event tipo:task)) (+subject:tare +(tipo:contact
tipo:account tipo:opportunity tipo:event tipo:task)) (+expiration:tare
+(tipo:contact tipo:account tipo:opportunity tipo:event tipo:task))
(+subject:tare +(tipo:contact tipo:account tipo:opportunity tipo:event
tipo:task))
=20

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10354-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 21 18:57:31 2004
Return-Path: <lucene-user-return-10354-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 61651 invoked from network); 21 Sep 2004 18:57:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Sep 2004 18:57:31 -0000
Received: (qmail 61354 invoked by uid 500); 21 Sep 2004 18:57:25 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 61225 invoked by uid 500); 21 Sep 2004 18:57:24 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 61212 invoked by uid 99); 21 Sep 2004 18:57:24 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [195.54.107.70] (HELO mxfep01.bredband.com) (195.54.107.70)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 21 Sep 2004 11:57:23 -0700
Received: from wille ([213.115.106.18] [213.115.106.18])
          by mxfep01.bredband.com with ESMTP
          id <20040921185720.JYB1871.mxfep01.bredband.com@wille>
          for <lucene-user@jakarta.apache.org>;
          Tue, 21 Sep 2004 20:57:20 +0200
Message-ID: <001a01c4a00c$d282b690$6500a8c0@wille>
From: "William Sporrong" <wille@tegenaria.com>
To: <lucene-user@jakarta.apache.org>
Subject: Search result grouped in categories?
Date: Tue, 21 Sep 2004 20:57:20 +0200
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0017_01C4A01D.95EC8CE0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1152
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1152
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0017_01C4A01D.95EC8CE0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hello everyone,

I'm trying to use Lucene in a webproject to search for products. The =
problem is that I have to display the search results grouped by =
category. There are about 500.000 products and every product belongs to =
a category. There are 150 categories. Now for every search I would like =
to display the result like this:

Matches where found in category A and B:

Category A (500 matches)
  - < a list of the 10 best matches in this category >

Category B (12 matches)
  - < a list of the 10 best matches in this category >

So I'm trying to figure out the best way to accomplish this? I would =
like to avoid iterating over all matching products to find their =
categories (There can be about 50.000). Is it reasonable to the search =
on all categories first and then apply a filter for each category (150 =
filters)? How fast are filters? or would it be better to have a separate =
index for each category? or maybe iterate over all the matching product =
and store them in a hashmap with category as key?

Thanks,
William  
------=_NextPart_000_0017_01C4A01D.95EC8CE0--


From lucene-user-return-10355-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 21 19:33:58 2004
Return-Path: <lucene-user-return-10355-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 93287 invoked from network); 21 Sep 2004 19:33:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Sep 2004 19:33:58 -0000
Received: (qmail 37487 invoked by uid 500); 21 Sep 2004 19:33:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 37459 invoked by uid 500); 21 Sep 2004 19:33:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 37446 invoked by uid 99); 21 Sep 2004 19:33:50 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of fraschetti@gmail.com designates 64.233.170.202 as permitted sender)
Received: from [64.233.170.202] (HELO mproxy.gmail.com) (64.233.170.202)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 21 Sep 2004 12:33:49 -0700
Received: by mproxy.gmail.com with SMTP id 79so2510155rnl
        for <lucene-user@jakarta.apache.org>; Tue, 21 Sep 2004 12:33:47 -0700 (PDT)
Received: by 10.38.74.50 with SMTP id w50mr3052172rna;
        Tue, 21 Sep 2004 12:33:47 -0700 (PDT)
Received: by 10.38.171.15 with HTTP; Tue, 21 Sep 2004 12:33:47 -0700 (PDT)
Message-ID: <cbdebdf804092112332a878b02@mail.gmail.com>
Date: Tue, 21 Sep 2004 12:33:47 -0700
From: Chris Fraschetti <fraschetti@gmail.com>
Reply-To: Chris Fraschetti <fraschetti@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: displaying 'pages' of search results...
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I was wondering was the best way was to go about returning say
1,000,000 results, divided up into say 50 element sections and then
accessing them via the first 50, second 50, etc etc.

Is there a way to keep the query around so that lucene doesn't need to
search again, or would the search be cached and no delay arise?

Just looking for some ideas and possibly some implementational issues...



-- 
___________________________________________________
Chris Fraschetti
e fraschetti@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10356-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 21 19:49:52 2004
Return-Path: <lucene-user-return-10356-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 5003 invoked from network); 21 Sep 2004 19:49:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Sep 2004 19:49:52 -0000
Received: (qmail 81726 invoked by uid 500); 21 Sep 2004 19:49:45 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 81685 invoked by uid 500); 21 Sep 2004 19:49:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 81670 invoked by uid 99); 21 Sep 2004 19:49:44 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [205.158.62.196] (HELO ws6-1.us4.outblaze.com) (205.158.62.196)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 21 Sep 2004 12:49:43 -0700
Received: (qmail 13930 invoked from network); 21 Sep 2004 19:49:23 -0000
Received: from unknown (HELO ?128.143.104.191?) (erik@hatcher.net@128.143.104.191)
  by ws6-1.us4.outblaze.com with SMTP; 21 Sep 2004 19:49:23 -0000
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <cbdebdf804092112332a878b02@mail.gmail.com>
References: <cbdebdf804092112332a878b02@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <6030FDA8-0C07-11D9-B588-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: displaying 'pages' of search results...
Date: Tue, 21 Sep 2004 15:49:40 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

The best first approach is to simply re-query every time the user goes 
to a new page, keeping around the query in some for or another (perhaps 
the expression if you're using QueryParser) and the page number.

If that is fast enough, then you're done!  :)

If it is not, then you could consider caching Hits and your 
IndexSearcher to re-use when paging.

	Erik


On Sep 21, 2004, at 3:33 PM, Chris Fraschetti wrote:

> I was wondering was the best way was to go about returning say
> 1,000,000 results, divided up into say 50 element sections and then
> accessing them via the first 50, second 50, etc etc.
>
> Is there a way to keep the query around so that lucene doesn't need to
> search again, or would the search be cached and no delay arise?
>
> Just looking for some ideas and possibly some implementational 
> issues...
>
>
>
> -- 
> ___________________________________________________
> Chris Fraschetti
> e fraschetti@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10357-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 21 19:53:46 2004
Return-Path: <lucene-user-return-10357-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 7743 invoked from network); 21 Sep 2004 19:53:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Sep 2004 19:53:46 -0000
Received: (qmail 90429 invoked by uid 500); 21 Sep 2004 19:53:38 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 90371 invoked by uid 500); 21 Sep 2004 19:53:37 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 90358 invoked by uid 99); 21 Sep 2004 19:53:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.109.24.32] (HELO smtp-vbr12.xs4all.nl) (194.109.24.32)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 21 Sep 2004 12:53:35 -0700
Received: from k7l.local (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr12.xs4all.nl (8.12.11/8.12.11) with ESMTP id i8LJrUBa054857
	for <lucene-user@jakarta.apache.org>; Tue, 21 Sep 2004 21:53:30 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: lucene-user@jakarta.apache.org
Subject: Re: displaying 'pages' of search results...
Date: Tue, 21 Sep 2004 21:53:30 +0200
User-Agent: KMail/1.5.4
References: <cbdebdf804092112332a878b02@mail.gmail.com>
In-Reply-To: <cbdebdf804092112332a878b02@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200409212153.30137.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Tuesday 21 September 2004 21:33, Chris Fraschetti wrote:
> I was wondering was the best way was to go about returning say
> 1,000,000 results, divided up into say 50 element sections and then
> accessing them via the first 50, second 50, etc etc.
>
> Is there a way to keep the query around so that lucene doesn't need to
> search again, or would the search be cached and no delay arise?
>
> Just looking for some ideas and possibly some implementational issues...

Lucene's Hits class is designed for paging through search results.

In which order would you need the 1.000.000 results?

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10358-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 21 19:54:56 2004
Return-Path: <lucene-user-return-10358-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 8533 invoked from network); 21 Sep 2004 19:54:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Sep 2004 19:54:56 -0000
Received: (qmail 91917 invoked by uid 500); 21 Sep 2004 19:54:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 91720 invoked by uid 500); 21 Sep 2004 19:54:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 91705 invoked by uid 99); 21 Sep 2004 19:54:49 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.65.202.3] (HELO contextmedia.com) (64.65.202.3)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 21 Sep 2004 12:54:48 -0700
Received: from ppeddi ([192.168.1.48]) by contextmedia.com ; Tue, 21 Sep 2004 15:54:16 -0400
Message-ID: <004301c4a014$c7aeac80$aa87a8c0@ppeddi>
From: "Praveen Peddi" <ppeddi@contextmedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <cbdebdf804092112332a878b02@mail.gmail.com>
Subject: Re: displaying 'pages' of search results...
Date: Tue, 21 Sep 2004 15:54:18 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Rcpt-To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

The way we do it is: Get all the document ids, cache them and then get the 
first 50, second 50 documents etc. We wrote a light weight paging api on top 
of lucene. We call searcher.search(query, hitCollector); Our 
HitCollectorImpl implements collect method and just collects the document id 
only.

Praveen


----- Original Message ----- 
From: "Chris Fraschetti" <fraschetti@gmail.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Tuesday, September 21, 2004 3:33 PM
Subject: displaying 'pages' of search results...


>I was wondering was the best way was to go about returning say
> 1,000,000 results, divided up into say 50 element sections and then
> accessing them via the first 50, second 50, etc etc.
>
> Is there a way to keep the query around so that lucene doesn't need to
> search again, or would the search be cached and no delay arise?
>
> Just looking for some ideas and possibly some implementational issues...
>
>
>
> -- 
> ___________________________________________________
> Chris Fraschetti
> e fraschetti@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10359-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 21 21:55:08 2004
Return-Path: <lucene-user-return-10359-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 83949 invoked from network); 21 Sep 2004 21:55:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Sep 2004 21:55:08 -0000
Received: (qmail 34230 invoked by uid 500); 21 Sep 2004 21:54:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 34139 invoked by uid 500); 21 Sep 2004 21:54:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 34108 invoked by uid 99); 21 Sep 2004 21:54:43 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of fraschetti@gmail.com designates 64.233.170.206 as permitted sender)
Received: from [64.233.170.206] (HELO mproxy.gmail.com) (64.233.170.206)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 21 Sep 2004 14:54:40 -0700
Received: by mproxy.gmail.com with SMTP id 78so4627411rnl
        for <lucene-user@jakarta.apache.org>; Tue, 21 Sep 2004 14:54:38 -0700 (PDT)
Received: by 10.38.82.75 with SMTP id f75mr3135368rnb;
        Tue, 21 Sep 2004 14:54:38 -0700 (PDT)
Received: by 10.38.171.15 with HTTP; Tue, 21 Sep 2004 14:54:37 -0700 (PDT)
Message-ID: <cbdebdf804092114542b180216@mail.gmail.com>
Date: Tue, 21 Sep 2004 14:54:37 -0700
From: Chris Fraschetti <fraschetti@gmail.com>
Reply-To: Chris Fraschetti <fraschetti@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: indexing date ranges
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

is it most effecient to index or not index 'numeric' ranges that i
will do a range search by    epoc_date:[1104480000 TO 820483200]   
would be be better to treat it as Field.Keyword or Field.UnIndexed  ?

-- 
___________________________________________________
Chris Fraschetti, Student CompSci System Admin
University of San Francisco
e fraschetti@gmail.com | http://meteora.cs.usfca.edu

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10360-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 21 23:25:59 2004
Return-Path: <lucene-user-return-10360-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 27644 invoked from network); 21 Sep 2004 23:25:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Sep 2004 23:25:59 -0000
Received: (qmail 53376 invoked by uid 500); 21 Sep 2004 23:25:55 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 53096 invoked by uid 500); 21 Sep 2004 23:25:52 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 53083 invoked by uid 99); 21 Sep 2004 23:25:52 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [205.158.62.197] (HELO ws6-2.us4.outblaze.com) (205.158.62.197)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 21 Sep 2004 16:25:51 -0700
Received: (qmail 22224 invoked from network); 21 Sep 2004 23:25:37 -0000
Received: from unknown (HELO ?192.168.1.104?) (erik@hatcher.net@68.169.41.169)
  by ws6-2.us4.outblaze.com with SMTP; 21 Sep 2004 23:25:37 -0000
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <cbdebdf804092114542b180216@mail.gmail.com>
References: <cbdebdf804092114542b180216@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <916D77F4-0C25-11D9-BAFC-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: indexing date ranges
Date: Tue, 21 Sep 2004 19:25:47 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

If it is unindexed, then you cannot query on it, so you do not have a 
choice.  The other option is to use a field that is indexed, not 
tokenized, and not stored (you have to use new Field(...) to accomplish 
that) if you don't want to store the field data.

	Erik


On Sep 21, 2004, at 5:54 PM, Chris Fraschetti wrote:

> is it most effecient to index or not index 'numeric' ranges that i
> will do a range search by    epoc_date:[1104480000 TO 820483200]
> would be be better to treat it as Field.Keyword or Field.UnIndexed  ?
>
> -- 
> ___________________________________________________
> Chris Fraschetti, Student CompSci System Admin
> University of San Francisco
> e fraschetti@gmail.com | http://meteora.cs.usfca.edu
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10361-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 22 00:11:11 2004
Return-Path: <lucene-user-return-10361-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 45171 invoked from network); 22 Sep 2004 00:11:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Sep 2004 00:11:11 -0000
Received: (qmail 3169 invoked by uid 500); 22 Sep 2004 00:10:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 3081 invoked by uid 500); 22 Sep 2004 00:10:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 3046 invoked by uid 99); 22 Sep 2004 00:10:56 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO main.gmane.org) (80.91.229.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 21 Sep 2004 17:10:54 -0700
Received: from root by main.gmane.org with local (Exim 3.35 #1 (Debian))
	id 1C9uii-0008W2-00
	for <lucene-user@jakarta.apache.org>; Wed, 22 Sep 2004 02:10:52 +0200
Received: from freezer.kawo2.rwth-aachen.de ([134.130.183.62])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <lucene-user@jakarta.apache.org>; Wed, 22 Sep 2004 02:10:51 +0200
Received: from marcoschmidt by freezer.kawo2.rwth-aachen.de with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <lucene-user@jakarta.apache.org>; Wed, 22 Sep 2004 02:10:51 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: lucene-user@jakarta.apache.org
From: Marco Schmidt <marcoschmidt@users.sourceforge.net>
Subject: Combining Lucene and database functionality
Date: Wed, 22 Sep 2004 01:28:18 +0200
Lines: 16
Message-ID: <ciqdbh$os0$1@sea.gmane.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: freezer.kawo2.rwth-aachen.de
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.6) Gecko/20040113
X-Accept-Language: en-us, en
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I'm trying to find out whether Lucene is an option for a project of 
mine. I have texts which also have a date and a list of numbers 
associated with each of them. These numbers are ID values which connect 
the article to certain categories. So a particular article X might 
belong to categories 17, 49 and 112. A search for all articles 
containing "foo bar" and belonging to categories 100 to 140 should 
return X (because it also contains "foo bar"). Is it possible to do this 
with Lucene and if it is, how? I've read about the concept of fields in 
Lucene, but it seems to me that you can only store text in them, not 
integers, let alone list of integers. None of the tutorials I've seen 
deals with more complex queries like that. Basically what I want to 
accomplish could be done nicely with databases with full text search 
capability, if that full text search wasn't so awful.

Regards,
Marco


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10362-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 22 00:59:39 2004
Return-Path: <lucene-user-return-10362-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 59712 invoked from network); 22 Sep 2004 00:59:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Sep 2004 00:59:39 -0000
Received: (qmail 69607 invoked by uid 500); 22 Sep 2004 00:59:32 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 69572 invoked by uid 500); 22 Sep 2004 00:59:31 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 69545 invoked by uid 99); 22 Sep 2004 00:59:31 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.200.20.178] (HELO crimsonlogic.co.in) (203.200.20.178)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 21 Sep 2004 17:59:30 -0700
Received: from INA098tnat (localhost.localdomain [127.0.0.1])
	by crimsonlogic.co.in (Postfix) with ESMTP id B6663233E3
	for <lucene-user@jakarta.apache.org>; Tue, 21 Sep 2004 20:05:50 +0530 (IST)
From: "Natarajan.T" <natarajant@crimsonlogic.co.in>
To: <lucene-user@jakarta.apache.org>
Subject: Proxy Con. Problem in Weblogic.
Date: Tue, 21 Sep 2004 20:13:22 +0530
Message-ID: <003301c49fe9$5805fbc0$8714a8c0@ssl>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0034_01C4A017.71BE37C0"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.4024
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1106
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0034_01C4A017.71BE37C0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi FYI,

 

I am doing web crawling in my application using proxy setting. like the
below code..

 

Properties systemSettings = System.getProperties();

systemSettings.put("http.proxySet", "true");

systemSettings.put("http.proxyHost",
profileBean.getProfileParamBean().getProxyHost().trim());

systemSettings.put("http.proxyPort",
profileBean.getProfileParamBean().getProxyPort().trim());

System.setProperties(systemSettings);

 

 

This code working fine in Tomcat5.0 but I am getting runtime error in
Weblogic8.

 

How can I handle this problem???

 

Advance Thanks.

 

 

Regards,

Natarajan.

 

 


------=_NextPart_000_0034_01C4A017.71BE37C0--


From lucene-user-return-10363-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 22 02:16:27 2004
Return-Path: <lucene-user-return-10363-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 99444 invoked from network); 22 Sep 2004 02:16:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Sep 2004 02:16:26 -0000
Received: (qmail 50436 invoked by uid 500); 22 Sep 2004 02:16:17 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 50290 invoked by uid 500); 22 Sep 2004 02:16:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 50079 invoked by uid 99); 22 Sep 2004 02:16:12 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of dmitrys@earthlink.net designates 207.217.120.228 as permitted sender)
Received: from [207.217.120.228] (HELO mynah.mail.pas.earthlink.net) (207.217.120.228)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 21 Sep 2004 19:16:11 -0700
Received: from [65.174.70.194] (helo=[192.168.12.20])
	by mynah.mail.pas.earthlink.net with asmtp (Exim 4.34)
	id 1C9wfy-0002lp-5T
	for lucene-user@jakarta.apache.org; Tue, 21 Sep 2004 19:16:10 -0700
Message-ID: <4150E0B1.4080207@earthlink.net>
Date: Tue, 21 Sep 2004 20:17:21 -0600
From: Dmitry Serebrennikov <dmitrys@earthlink.net>
User-Agent: Mozilla Thunderbird 0.7.1 (Windows/20040626)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Proxy Con. Problem in Weblogic.
References: <003301c49fe9$5805fbc0$8714a8c0@ssl>
In-Reply-To: <003301c49fe9$5805fbc0$8714a8c0@ssl>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-ELNK-Trace: b9a8ec9b68c23176d780f4a490ca69564776905774d2ac4bf21799e3b57827728a6f56bfb2e6b856350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c
X-Originating-IP: 65.174.70.194
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

This, of course, isn't the right forum for this question...
Not to encourage off-topic posts, but I just happened to know at least 
part of the answer since we just went through the same issue.

First thing to do is to make sure you are setting these properties 
before the first URLStreamHandler for "http" is created. In WebLogic, 
this means you really must specify them on the command line with -D 
options, because by the time your code starts to run, WebLogic has 
already initialized the stream handler. This may or may not help, 
depending on which JVM is being used.

Also, WebLogic supplies its own http stack, they don't use Sun's stack 
that ships with the JVM. Tomcat does, so the behavior will be different. 
As long as you are using WebLogic's http stack, be aware that it has 
different configuration options than the standard Sun's stack. I think 
the proxy settings use the same -D options, but I may be wrong.

You can control which stack is used in various ways. WebLogic recognizes 
a -D option called: weblogic.net.http.URLStreamHandlerFactory. Google 
for it and you will find out how it is supposed to work. I know it works 
at least some of the time, but I wasn't able to get it to work for me.

Another way that does work is to set a URLStreamHandler on the URL 
object when you create it (see java.net.URL constructors). You can 
create a URLStreamHandler object explicitly and this way force the use 
of Sun's stack. Sun's handler is called sun.net.www.protocol.http.Handler.

Hope this helps.
Good luck!

Dmitry.


Natarajan.T wrote:

>Hi FYI,
>
> 
>
>I am doing web crawling in my application using proxy setting. like the
>below code..
>
> 
>
>Properties systemSettings = System.getProperties();
>
>systemSettings.put("http.proxySet", "true");
>
>systemSettings.put("http.proxyHost",
>profileBean.getProfileParamBean().getProxyHost().trim());
>
>systemSettings.put("http.proxyPort",
>profileBean.getProfileParamBean().getProxyPort().trim());
>
>System.setProperties(systemSettings);
>
> 
>
> 
>
>This code working fine in Tomcat5.0 but I am getting runtime error in
>Weblogic8.
>
> 
>
>How can I handle this problem???
>
> 
>
>Advance Thanks.
>
> 
>
> 
>
>Regards,
>
>Natarajan.
>
> 
>
> 
>
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10364-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 22 06:47:37 2004
Return-Path: <lucene-user-return-10364-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 11442 invoked from network); 22 Sep 2004 06:47:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Sep 2004 06:47:36 -0000
Received: (qmail 38905 invoked by uid 500); 22 Sep 2004 06:47:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 38882 invoked by uid 500); 22 Sep 2004 06:47:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 38867 invoked by uid 99); 22 Sep 2004 06:47:28 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 21 Sep 2004 23:47:24 -0700
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id I4FKSJ00.NRJ for <lucene-user@jakarta.apache.org>; Wed,
          22 Sep 2004 12:30:19 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: displaying 'pages' of search results...
Date: Wed, 22 Sep 2004 12:23:36 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIKEBACCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
In-Reply-To: <004301c4a014$c7aeac80$aa87a8c0@ppeddi>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi

Can u share the  searcher.search(query, hitCollector);  [light weight paging
api ]

Code on the form ,may be somebody like me need's it.........


  ....  ; )

Karthik

-----Original Message-----
From: Praveen Peddi [mailto:ppeddi@contextmedia.com]
Sent: Wednesday, September 22, 2004 1:24 AM
To: Lucene Users List
Subject: Re: displaying 'pages' of search results...


The way we do it is: Get all the document ids, cache them and then get the
first 50, second 50 documents etc. We wrote a light weight paging api on top
of lucene. We call searcher.search(query, hitCollector); Our
HitCollectorImpl implements collect method and just collects the document id
only.

Praveen


----- Original Message -----
From: "Chris Fraschetti" <fraschetti@gmail.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Tuesday, September 21, 2004 3:33 PM
Subject: displaying 'pages' of search results...


>I was wondering was the best way was to go about returning say
> 1,000,000 results, divided up into say 50 element sections and then
> accessing them via the first 50, second 50, etc etc.
>
> Is there a way to keep the query around so that lucene doesn't need to
> search again, or would the search be cached and no delay arise?
>
> Just looking for some ideas and possibly some implementational issues...
>
>
>
> --
> ___________________________________________________
> Chris Fraschetti
> e fraschetti@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10365-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 22 06:51:11 2004
Return-Path: <lucene-user-return-10365-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 13122 invoked from network); 22 Sep 2004 06:51:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Sep 2004 06:51:11 -0000
Received: (qmail 41499 invoked by uid 500); 22 Sep 2004 06:50:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 41475 invoked by uid 500); 22 Sep 2004 06:50:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 41462 invoked by uid 99); 22 Sep 2004 06:50:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 21 Sep 2004 23:50:58 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id DCB7623B93
	for <lucene-user@jakarta.apache.org>; Wed, 22 Sep 2004 08:52:42 +0200 (CEST)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 01793-03 for <lucene-user@jakarta.apache.org>;
 Wed, 22 Sep 2004 08:52:42 +0200 (CEST)
Received: from tucholsky.office.tanto.de (unknown [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP id AFFA523B8F
	for <lucene-user@jakarta.apache.org>; Wed, 22 Sep 2004 08:52:42 +0200 (CEST)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id i8M6otGL002057
	for <lucene-user@jakarta.apache.org>; Wed, 22 Sep 2004 08:50:55 +0200
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id i8M6otMM002053;
	Wed, 22 Sep 2004 08:50:55 +0200
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16721.8399.220732.765730@tanto-xipolis.de>
Date: Wed, 22 Sep 2004 08:50:55 +0200
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Combining Lucene and database functionality
In-Reply-To: <ciqdbh$os0$1@sea.gmane.org>
References: <ciqdbh$os0$1@sea.gmane.org>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Marco Schmidt writes:
> I'm trying to find out whether Lucene is an option for a project of 
> mine. I have texts which also have a date and a list of numbers 
> associated with each of them. These numbers are ID values which connect 
> the article to certain categories. So a particular article X might 
> belong to categories 17, 49 and 112. A search for all articles 
> containing "foo bar" and belonging to categories 100 to 140 should 
> return X (because it also contains "foo bar"). Is it possible to do this 
> with Lucene and if it is, how? I've read about the concept of fields in 
> Lucene, but it seems to me that you can only store text in them, not 
> integers, let alone list of integers. None of the tutorials I've seen 
> deals with more complex queries like that. Basically what I want to 
> accomplish could be done nicely with databases with full text search 
> capability, if that full text search wasn't so awful.
> 
Where's the problem?
100 is a text as well as an integer (one has to keep in mind, that treating
it as text changes sort order, which may require leading 0 to compensate).
Lucene does not understand the "words" you index anyway.

So if a document has a field `category' with content '017 049 112' and 
some `text' field with content 'bla fasel foo bar' and you do a range 
query 100 - 140 on category (search all documents containing any word, 
that is alphanumerically sorted between 100 and 140) and a apropriate 
query on text it will find, what you want.

There are some caveats like choosing an apropriate analyzer or considering
the maximum number of terms the range query covers, but in principle there
is no difference between a text field containing words and a category 
field containing categories.

Morus


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10366-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 22 07:22:40 2004
Return-Path: <lucene-user-return-10366-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 36128 invoked from network); 22 Sep 2004 07:22:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Sep 2004 07:22:40 -0000
Received: (qmail 84483 invoked by uid 500); 22 Sep 2004 07:22:31 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 84410 invoked by uid 500); 22 Sep 2004 07:22:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 84396 invoked by uid 99); 22 Sep 2004 07:22:30 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [206.40.48.151] (HELO mail1.intermedia.net) (206.40.48.151)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 22 Sep 2004 00:22:28 -0700
Received: from tegenaria.com (unverified [206.40.48.146]) by mail1.intermedia.net
 (Rockliffe SMTPRA 4.5.6) with SMTP id <B0337996363@mail1.intermedia.net> for <lucene-user@jakarta.apache.org>;
 Wed, 22 Sep 2004 00:22:27 -0700
Message-ID: <211340-22004932272046401@tegenaria.com>
X-DeskPilotClientIP: 62.181.227.99
From: "wille@tegenaria.com" <wille@tegenaria.com>
To: lucene-user@jakarta.apache.org
Subject: Implement custom score
Date: Wed, 22 Sep 2004 00:20:46 -0700
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,
I know this is probably a common question and I've found a couple of posts
about it in the archive but none with a complete answer. If there is one
please point me to it! 

The question is that I want to discard the default scoring and implement my
own. I want all the the hits to be sorted after popularity (a field) and
not by anything else. How can I do this? What classes and methods do I have
to change?

thanks,
William  


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10367-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 22 08:52:18 2004
Return-Path: <lucene-user-return-10367-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 91842 invoked from network); 22 Sep 2004 08:52:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Sep 2004 08:52:18 -0000
Received: (qmail 92607 invoked by uid 500); 22 Sep 2004 08:52:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 92548 invoked by uid 500); 22 Sep 2004 08:52:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 92531 invoked by uid 99); 22 Sep 2004 08:52:03 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.241] (HELO web12704.mail.yahoo.com) (216.136.173.241)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 22 Sep 2004 01:52:02 -0700
Message-ID: <20040922085201.50841.qmail@web12704.mail.yahoo.com>
Received: from [195.29.109.11] by web12704.mail.yahoo.com via HTTP; Wed, 22 Sep 2004 01:52:01 PDT
Date: Wed, 22 Sep 2004 01:52:01 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Implement custom score
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <211340-22004932272046401@tegenaria.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

You need your own Similarity implementation and you need to set it as
shown in this javadoc:
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/search/Similarity.html

Otis

--- "wille@tegenaria.com" <wille@tegenaria.com> wrote:

> Hi,
> I know this is probably a common question and I've found a couple of
> posts
> about it in the archive but none with a complete answer. If there is
> one
> please point me to it! 
> 
> The question is that I want to discard the default scoring and
> implement my
> own. I want all the the hits to be sorted after popularity (a field)
> and
> not by anything else. How can I do this? What classes and methods do
> I have
> to change?
> 
> thanks,
> William  
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10368-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 22 09:08:51 2004
Return-Path: <lucene-user-return-10368-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 1517 invoked from network); 22 Sep 2004 09:08:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Sep 2004 09:08:51 -0000
Received: (qmail 18648 invoked by uid 500); 22 Sep 2004 09:08:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 18621 invoked by uid 500); 22 Sep 2004 09:08:40 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 18607 invoked by uid 99); 22 Sep 2004 09:08:40 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [206.40.48.151] (HELO mail1.intermedia.net) (206.40.48.151)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 22 Sep 2004 02:08:37 -0700
Received: from tegenaria.com (unverified [206.40.48.146]) by mail1.intermedia.net
 (Rockliffe SMTPRA 4.5.6) with SMTP id <B0338013556@mail1.intermedia.net> for <lucene-user@jakarta.apache.org>;
 Wed, 22 Sep 2004 02:08:36 -0700
Message-ID: <27210-2200493229655623@tegenaria.com>
X-DeskPilotClientIP: 62.181.227.99
From: "wille@tegenaria.com" <wille@tegenaria.com>
To: ""Lucene Users List"" <lucene-user@jakarta.apache.org>
Subject: Re: Implement custom score
Date: Wed, 22 Sep 2004 02:06:55 -0700
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Yes thanks,
I implemented my own Similarity class that returns 1.0f from lengthNorm()
and idf() then I use setBoost when writing the document. However I get some
small round errors. When I boost with 0.7 that document gets the score
0.625. I've found that this has to do with the encode/decode norm in
Simliarity. Should I do anything about it? or does'nt it matter?

/William

> You need your own Similarity implementation and you need to set it as
> shown in this javadoc:
>
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/search/Similarit
y.html
> 
> Otis
> 
> --- "wille@tegenaria.com" <wille@tegenaria.com> wrote:
> 
> > Hi,
> > I know this is probably a common question and I've found a couple of
> > posts
> > about it in the archive but none with a complete answer. If there is
> > one
> > please point me to it! 
> > 
> > The question is that I want to discard the default scoring and
> > implement my
> > own. I want all the the hits to be sorted after popularity (a field)
> > and
> > not by anything else. How can I do this? What classes and methods do
> > I have
> > to change?
> > 
> > thanks,
> > William  
> > 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> > 
> > 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10369-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 22 09:25:10 2004
Return-Path: <lucene-user-return-10369-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 13392 invoked from network); 22 Sep 2004 09:25:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Sep 2004 09:25:10 -0000
Received: (qmail 41430 invoked by uid 500); 22 Sep 2004 09:23:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 41190 invoked by uid 500); 22 Sep 2004 09:23:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 41130 invoked by uid 99); 22 Sep 2004 09:23:02 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [205.158.62.199] (HELO ws6-3.us4.outblaze.com) (205.158.62.199)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 22 Sep 2004 02:23:02 -0700
Received: (qmail 2653 invoked from network); 22 Sep 2004 09:22:52 -0000
Received: from unknown (HELO ?192.168.1.104?) (erik@hatcher.net@68.169.41.169)
  by ws6-3.us4.outblaze.com with SMTP; 22 Sep 2004 09:22:52 -0000
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <20040922085201.50841.qmail@web12704.mail.yahoo.com>
References: <20040922085201.50841.qmail@web12704.mail.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <FDA922DD-0C78-11D9-A090-000393A564E6@hatcher.net>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@hatcher.net>
Subject: Re: Implement custom score
Date: Wed, 22 Sep 2004 05:22:57 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Actually what William should use is the new Sort facility to order  
results by a field.  Doing this with a Similarity would be much  
trickier.  Look at the IndexSearcher.sort() methods which take a Sort  
and follow the Javadocs from there.  Let us know if you have any  
questions on sorting.

It would be best if you represent your 'popularity' field as an integer  
(or at least numeric) since sorting by String uses more memory.

	Erik


On Sep 22, 2004, at 4:52 AM, Otis Gospodnetic wrote:

> You need your own Similarity implementation and you need to set it as
> shown in this javadoc:
> http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/search/ 
> Similarity.html
>
> Otis
>
> --- "wille@tegenaria.com" <wille@tegenaria.com> wrote:
>
>> Hi,
>> I know this is probably a common question and I've found a couple of
>> posts
>> about it in the archive but none with a complete answer. If there is
>> one
>> please point me to it!
>>
>> The question is that I want to discard the default scoring and
>> implement my
>> own. I want all the the hits to be sorted after popularity (a field)
>> and
>> not by anything else. How can I do this? What classes and methods do
>> I have
>> to change?
>>
>> thanks,
>> William
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10370-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 22 10:59:36 2004
Return-Path: <lucene-user-return-10370-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 64348 invoked from network); 22 Sep 2004 10:59:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Sep 2004 10:59:35 -0000
Received: (qmail 65312 invoked by uid 500); 22 Sep 2004 10:59:23 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 65285 invoked by uid 500); 22 Sep 2004 10:59:22 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 65258 invoked by uid 99); 22 Sep 2004 10:59:22 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [206.40.48.151] (HELO mail1.intermedia.net) (206.40.48.151)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 22 Sep 2004 03:59:21 -0700
Received: from tegenaria.com (unverified [206.40.48.146]) by mail1.intermedia.net
 (Rockliffe SMTPRA 4.5.6) with SMTP id <B0338033636@mail1.intermedia.net> for <lucene-user@jakarta.apache.org>;
 Wed, 22 Sep 2004 03:59:19 -0700
Message-ID: <319040-220049322105919705@tegenaria.com>
X-DeskPilotClientIP: 62.181.227.99
From: "wille@tegenaria.com" <wille@tegenaria.com>
To: ""Lucene Users List"" <lucene-user@jakarta.apache.org>
Subject: Re: Implement custom score
Date: Wed, 22 Sep 2004 03:59:19 -0700
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks for the reply,
I've looked in to the search method that takes a Sort object as argument.
As I understand it the sorting is only done on the best matches (100 by
default)? I don't want the default score to have any impact at all. I want
to sort all hits on popularity not just the best matches. 

/William  
  
> Actually what William should use is the new Sort facility to order  
> results by a field.  Doing this with a Similarity would be much  
> trickier.  Look at the IndexSearcher.sort() methods which take a Sort  
> and follow the Javadocs from there.  Let us know if you have any  
> questions on sorting.
> 
> It would be best if you represent your 'popularity' field as an integer  
> (or at least numeric) since sorting by String uses more memory.
> 
> 	Erik
> 
> 
> On Sep 22, 2004, at 4:52 AM, Otis Gospodnetic wrote:
> 
> > You need your own Similarity implementation and you need to set it as
> > shown in this javadoc:
> > http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/search/ 
> > Similarity.html
> >
> > Otis
> >
> > --- "wille@tegenaria.com" <wille@tegenaria.com> wrote:
> >
> >> Hi,
> >> I know this is probably a common question and I've found a couple of
> >> posts
> >> about it in the archive but none with a complete answer. If there is
> >> one
> >> please point me to it!
> >>
> >> The question is that I want to discard the default scoring and
> >> implement my
> >> own. I want all the the hits to be sorted after popularity (a field)
> >> and
> >> not by anything else. How can I do this? What classes and methods do
> >> I have
> >> to change?
> >>
> >> thanks,
> >> William
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>
> >>
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10371-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 22 13:29:09 2004
Return-Path: <lucene-user-return-10371-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 73840 invoked from network); 22 Sep 2004 13:29:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Sep 2004 13:29:09 -0000
Received: (qmail 73127 invoked by uid 500); 22 Sep 2004 13:28:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 73037 invoked by uid 500); 22 Sep 2004 13:28:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 73020 invoked by uid 99); 22 Sep 2004 13:28:57 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [205.158.62.196] (HELO ws6-1.us4.outblaze.com) (205.158.62.196)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 22 Sep 2004 06:28:56 -0700
Received: (qmail 7553 invoked from network); 22 Sep 2004 13:07:53 -0000
Received: from unknown (HELO ?128.143.184.55?) (erik@hatcher.net@128.143.184.55)
  by ws6-1.us4.outblaze.com with SMTP; 22 Sep 2004 13:07:53 -0000
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <319040-220049322105919705@tegenaria.com>
References: <319040-220049322105919705@tegenaria.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <73D1C5E9-0C98-11D9-B930-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Implement custom score
Date: Wed, 22 Sep 2004 09:08:10 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Sorting is done however you specify, by field, with secondary fields  
specified, by document id, by score/relevance, or even by a custom  
implementation to sort by something else (in Lucene in Action we  
provide an implementation that sorts by two-dimensional distance from a  
given location, where documents have a "location").

So, sorting should be exactly what you want.  You want to sort by a  
particular field:

	Hits hits = searcher.search(query, new Sort("popularity", true));

Does that do what you want?  (the 'true' is to reverse the sort, so  
that you get descending popularity, which is probably what you want).   
In this example, the score would have no bearing whatsoever on the  
order of the Hits, only the "popularity" field in descending order, and  
document id when the popularity of documents are the same.

Where are you getting that sorting is only done on 100 matches by  
default?  We should correct the documentation if it says something like  
that.

	Erik


On Sep 22, 2004, at 6:59 AM, wille@tegenaria.com wrote:

> Thanks for the reply,
> I've looked in to the search method that takes a Sort object as  
> argument.
> As I understand it the sorting is only done on the best matches (100 by
> default)? I don't want the default score to have any impact at all. I  
> want
> to sort all hits on popularity not just the best matches.
>
> /William
>
>> Actually what William should use is the new Sort facility to order
>> results by a field.  Doing this with a Similarity would be much
>> trickier.  Look at the IndexSearcher.sort() methods which take a Sort
>> and follow the Javadocs from there.  Let us know if you have any
>> questions on sorting.
>>
>> It would be best if you represent your 'popularity' field as an  
>> integer
>> (or at least numeric) since sorting by String uses more memory.
>>
>> 	Erik
>>
>>
>> On Sep 22, 2004, at 4:52 AM, Otis Gospodnetic wrote:
>>
>>> You need your own Similarity implementation and you need to set it as
>>> shown in this javadoc:
>>> http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/search/
>>> Similarity.html
>>>
>>> Otis
>>>
>>> --- "wille@tegenaria.com" <wille@tegenaria.com> wrote:
>>>
>>>> Hi,
>>>> I know this is probably a common question and I've found a couple of
>>>> posts
>>>> about it in the archive but none with a complete answer. If there is
>>>> one
>>>> please point me to it!
>>>>
>>>> The question is that I want to discard the default scoring and
>>>> implement my
>>>> own. I want all the the hits to be sorted after popularity (a field)
>>>> and
>>>> not by anything else. How can I do this? What classes and methods do
>>>> I have
>>>> to change?
>>>>
>>>> thanks,
>>>> William
>>>>
>>>>
>>>> -------------------------------------------------------------------- 
>>>> -
>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10372-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 22 13:29:31 2004
Return-Path: <lucene-user-return-10372-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 74054 invoked from network); 22 Sep 2004 13:29:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Sep 2004 13:29:31 -0000
Received: (qmail 74148 invoked by uid 500); 22 Sep 2004 13:29:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 74084 invoked by uid 500); 22 Sep 2004 13:29:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 74068 invoked by uid 99); 22 Sep 2004 13:29:18 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [205.158.62.196] (HELO ws6-1.us4.outblaze.com) (205.158.62.196)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 22 Sep 2004 06:29:18 -0700
Received: (qmail 18666 invoked from network); 22 Sep 2004 13:10:56 -0000
Received: from unknown (HELO ?128.143.184.55?) (erik@hatcher.net@128.143.184.55)
  by ws6-1.us4.outblaze.com with SMTP; 22 Sep 2004 13:10:56 -0000
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <319040-220049322105919705@tegenaria.com>
References: <319040-220049322105919705@tegenaria.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7F11EB24-0C98-11D9-B930-000393A564E6@hatcher.net>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@hatcher.net>
Subject: Re: Implement custom score
Date: Wed, 22 Sep 2004 09:08:29 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Sorting is done however you specify, by field, with secondary fields  
specified, by document id, by score/relevance, or even by a custom  
implementation to sort by something else (in Lucene in Action we  
provide an implementation that sorts by two-dimensional distance from a  
given location, where documents have a "location").

So, sorting should be exactly what you want.  You want to sort by a  
particular field:

	Hits hits = searcher.search(query, new Sort("popularity", true));

Does that do what you want?  (the 'true' is to reverse the sort, so  
that you get descending popularity, which is probably what you want).   
In this example, the score would have no bearing whatsoever on the  
order of the Hits, only the "popularity" field in descending order, and  
document id when the popularity of documents are the same.

Where are you getting that sorting is only done on 100 matches by  
default?  We should correct the documentation if it says something like  
that.

	Erik


On Sep 22, 2004, at 6:59 AM, wille@tegenaria.com wrote:

> Thanks for the reply,
> I've looked in to the search method that takes a Sort object as  
> argument.
> As I understand it the sorting is only done on the best matches (100 by
> default)? I don't want the default score to have any impact at all. I  
> want
> to sort all hits on popularity not just the best matches.
>
> /William
>
>> Actually what William should use is the new Sort facility to order
>> results by a field.  Doing this with a Similarity would be much
>> trickier.  Look at the IndexSearcher.sort() methods which take a Sort
>> and follow the Javadocs from there.  Let us know if you have any
>> questions on sorting.
>>
>> It would be best if you represent your 'popularity' field as an  
>> integer
>> (or at least numeric) since sorting by String uses more memory.
>>
>> 	Erik
>>
>>
>> On Sep 22, 2004, at 4:52 AM, Otis Gospodnetic wrote:
>>
>>> You need your own Similarity implementation and you need to set it as
>>> shown in this javadoc:
>>> http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/search/
>>> Similarity.html
>>>
>>> Otis
>>>
>>> --- "wille@tegenaria.com" <wille@tegenaria.com> wrote:
>>>
>>>> Hi,
>>>> I know this is probably a common question and I've found a couple of
>>>> posts
>>>> about it in the archive but none with a complete answer. If there is
>>>> one
>>>> please point me to it!
>>>>
>>>> The question is that I want to discard the default scoring and
>>>> implement my
>>>> own. I want all the the hits to be sorted after popularity (a field)
>>>> and
>>>> not by anything else. How can I do this? What classes and methods do
>>>> I have
>>>> to change?
>>>>
>>>> thanks,
>>>> William
>>>>
>>>>
>>>> -------------------------------------------------------------------- 
>>>> -
>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10373-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 22 14:31:28 2004
Return-Path: <lucene-user-return-10373-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 26261 invoked from network); 22 Sep 2004 14:31:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Sep 2004 14:31:27 -0000
Received: (qmail 9379 invoked by uid 500); 22 Sep 2004 14:31:18 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 9334 invoked by uid 500); 22 Sep 2004 14:31:17 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 9319 invoked by uid 99); 22 Sep 2004 14:31:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [203.200.8.84] (HELO ctsinblrsxid.cts.com) (203.200.8.84)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 22 Sep 2004 07:31:16 -0700
Received: from ctsinrmzsxub.cts.com ([10.236.168.5]) by ctsinblrsxid with tr
	end_isnt_name_B; Wed, 22 Sep 2004 20:01:07 +0530
X-MimeOLE: Produced By Microsoft Exchange V6.0.6249.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: RE: WildCardQuery
Date: Wed, 22 Sep 2004 20:01:07 +0530
Message-ID: <53CCF72FECD62346ADC714878C15EB0C3C6BD5@ctsinrmzsxub.cts.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: WildCardQuery
Thread-Index: AcSfMoYWNNEUW2AdQ2S2vbz6h5/U/wAY4LpwAEacErA=
From: "Raju, Robinson (Cognizant)" <RRobinson@blr.cognizant.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-imss-version: 2.0
X-imss-result: Passed
X-imss-scores: Clean:56.8026 C:20 M:1 S:5 R:5
X-imss-settings: Baseline:1 C:1 M:1 S:1 R:1 (0.0000 0.0000)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Hi ,
	I think it doesn't have anything to do with number of characters
with a wildcard. Because 'z*' works and 'a*' does not.
Does lucene have a limitation on the number of hits fetched ?
The error that I get is=0D

org.apache.lucene.search.BooleanQuery$TooManyClauses
at org.apache.lucene.search.BooleanQuery.add(BooleanQuery.java:79)
	at
org.apache.lucene.search.BooleanQuery.add(BooleanQuery.java:71)
	at
org.apache.lucene.search.MultiTermQuery.rewrite(MultiTermQuery.java:61)
	at
org.apache.lucene.search.BooleanQuery.rewrite(BooleanQuery.java:228)
	at
org.apache.lucene.search.IndexSearcher.rewrite(IndexSearcher.java:162)
	at org.apache.lucene.search.Query.weight(Query.java:84)
	at
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:85)
	at
org.apache.lucene.search.MultiSearcherThread.run(ParallelMultiSearcher.j
ava:251)
java.lang.NullPointerException
	at
org.apache.lucene.search.MultiSearcherThread.hits(ParallelMultiSearcher.
java:281)
	at
org.apache.lucene.search.ParallelMultiSearcher.search(ParallelMultiSearc
her.java:85)
	at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
	at org.apache.lucene.search.Hits.<init>(Hits.java:43)
	at org.apache.lucene.search.Searcher.search(Searcher.java:33)
	at
com.abcea.oos.search.helper.TestSearcher.search(TestSearcher.java:161)
	at
com.abcea.oos.search.helper.TestSearcher.main(TestSearcher.java:270)

-----Original Message-----
From: Raju, Robinson (Cognizant)=0D
Sent: Tuesday, September 21, 2004 10:21 AM
To: 'Lucene Users List'
Subject: WildCardQuery

Is there a limitation in Lucene when it comes to wildcard search ?=0D
Is it a problem if we use less than 3 characters along with a
wildcard(*).
Gives me error if I try using 45* , *34 , *3 ..etc .=0D
Too Many Clauses Error
Doesn't happen if '?' is used instead of '*'.
The intriguing thing is , that it is not consistent . 00* doesn't fail.
Am I missing something ?

Robin

This e-mail and any files transmitted with it are for the sole use of the=
 intended recipient(s) and may contain confidential and privileged=
 information.
If you are not the intended recipient, please contact the sender by reply=
 e-mail and destroy all copies of the original message.=0D
Any unauthorised review, use, disclosure, dissemination, forwarding,=
 printing or copying of this email or any action taken in reliance on this=
 e-mail is strictly=0D
prohibited and may be unlawful.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10374-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 22 14:53:18 2004
Return-Path: <lucene-user-return-10374-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 46066 invoked from network); 22 Sep 2004 14:53:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Sep 2004 14:53:18 -0000
Received: (qmail 52002 invoked by uid 500); 22 Sep 2004 14:53:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 51954 invoked by uid 500); 22 Sep 2004 14:53:10 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 51939 invoked by uid 99); 22 Sep 2004 14:53:09 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,HTML_TEXT_AFTER_BODY,HTML_TEXT_AFTER_HTML
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [200.61.168.200] (HELO gandalf.xlnet.net.ar) (200.61.168.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 22 Sep 2004 07:53:08 -0700
Received: from exchange.xlnet.net.ar (10.0.0.3) by gandalf.xlnet.net.ar (NPlex 5.1.036)
        id 41506AA800004395 for lucene-user@jakarta.apache.org; Wed, 22 Sep 2004 11:56:18 -0300
Subject: about snowball
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C4A0B4.50CF9476"
Content-class: urn:content-classes:message
Date: Wed, 22 Sep 2004 11:56:18 -0300
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Message-ID: <DDD3F807D283B543B3396F7E00A2C7E125F38C@exchange.xlnet.net.ar>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: about snowball
Thread-Index: AcSgtLktCiU98V91SrKDBPm6GdBSmw==
From: "Wermus Fernando" <fernando.wermus@xlnet.net.ar>
To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C4A0B4.50CF9476
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

I have test my app with snowball for english. But I'm doing something
wrong because I can't get any result from hit.
=20
If I index "lazy" with English snowball when I see the word in Luke it
shows "lazy" (I've read that Luke show the file as is). When I do the
search for the word "laziness" the snowball English change for "lazi"
but it doesn't seem to add any * . So I can't get any hit.
=20
If I search for=20
=20
laziness
=20
The result using MultiFieldQueryParser
=20
description:lazi
=20
0 hits
=20
I am supposed to index the word "lazy" as tokenized, unindexed or
something like this to get a hit. I have a similar problem when sorting,
it ask for being untokenized.
=20
What am I doing wrong?
=20
How can I use Luke to look up words using snowball English?
=20
thanks

------_=_NextPart_001_01C4A0B4.50CF9476--

From lucene-user-return-10375-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 22 15:38:13 2004
Return-Path: <lucene-user-return-10375-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 87942 invoked from network); 22 Sep 2004 15:38:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Sep 2004 15:38:13 -0000
Received: (qmail 75774 invoked by uid 500); 22 Sep 2004 15:37:58 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 75626 invoked by uid 500); 22 Sep 2004 15:37:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 75594 invoked by uid 99); 22 Sep 2004 15:37:55 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [206.190.39.198] (HELO web53008.mail.yahoo.com) (206.190.39.198)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 22 Sep 2004 08:37:54 -0700
Message-ID: <20040922153750.80116.qmail@web53008.mail.yahoo.com>
Received: from [216.231.10.162] by web53008.mail.yahoo.com via HTTP; Wed, 22 Sep 2004 08:37:50 PDT
Date: Wed, 22 Sep 2004 08:37:50 -0700 (PDT)
From: Edwin Tang <emttang@yahoo.com>
Subject: Fwd: Questions related to closing the searcher
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

In my testing, it seems like if the searcher (in my
case ParallelMultiSearcher) is not closed, the
searcher will not pick up any new data that has been
added to the index since it was opened. I'm wondering
if this is a correct statement.

Assuming the above is true, I went about closing the
searcher with searcher.close(), then setting both the
searcher and QueryParser to null, then did a
System.gc(). The application will sleep for a set
period of time, then resumes to process another batch
of queries against the index. When the application
resumes, the following method is ran:

    /**
     * Creates a {@link ParallelMultiSearcher} and
{@link QueryParser} if they
     * do not already exist.
     *
     * @return  0 if successful or the objects already
exist; -1 if failed.
     */
    private int getSearcher() {
        Analyzer analyzer;
        IndexSearcher[] searchers;
        int iReturn;
        Vector vector;
        if (logger.isDebugEnabled())
            logger.debug("Entering getSearcher()");
        if (searcher == null || parser == null) {
            analyzer = new
CIAnalyzer(utility.sStopWordsFile);
            try {
                vector = new Vector();
                if (utility.bSearchAMX)
                    vector.add(new
IndexSearcher(utility.amxIndexDir));
                if (utility.bSearchCOMTEX)
                    vector.add(new
IndexSearcher(utility.comtexIndexDir));
                if (utility.bSearchDJNW)
                    vector.add(new
IndexSearcher(utility.djnwIndexDir));
                if (utility.bSearchMoreover)
                    vector.add(new
IndexSearcher(utility.moreoverIndexDir));
                searchers = (IndexSearcher[])
vector.toArray(new IndexSearcher[vector.size()]);
                searcher = new
ParallelMultiSearcher(searchers);
                parser = new QueryParser("body",
analyzer);
                iReturn = 0;
            } catch (IOException ioe) {
                logger.error("Error creating
searcher", ioe);
                iReturn = -1;
            } catch (Exception e) {
                logger.error("Unexpected error while
creating searcher", e);
                iReturn = -1;
            }
        } else
            iReturn = 0;
        if (logger.isDebugEnabled())
            logger.debug("Exitng getSearcher() with "
+ iReturn);
        return iReturn;
    } // End method getSearcher()

This seems to get me around the problem where the
searcher was not picking up new data from the index.
However, I would run out of memory after 8 iterations
of the application processing a batch query, sleeping,
process another batch query, sleep, etc.

I'm probably missing something completely obvious, but
I'm just not seeing it. Can someone please tell me
what I'm doing wrong?

Thanks,
Ed


		
__________________________________
Do you Yahoo!?
Yahoo! Mail - 50x more storage than other providers!
http://promotions.yahoo.com/new_mail

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10376-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 22 15:39:34 2004
Return-Path: <lucene-user-return-10376-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 89097 invoked from network); 22 Sep 2004 15:39:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Sep 2004 15:39:33 -0000
Received: (qmail 77587 invoked by uid 500); 22 Sep 2004 15:38:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 77443 invoked by uid 500); 22 Sep 2004 15:38:26 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 77330 invoked by uid 99); 22 Sep 2004 15:38:24 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.65.202.3] (HELO contextmedia.com) (64.65.202.3)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 22 Sep 2004 08:38:21 -0700
Received: from ppeddi ([192.168.1.48]) by contextmedia.com ; Wed, 22 Sep 2004 11:37:36 -0400
Message-ID: <01e001c4a0ba$1658dc20$aa87a8c0@ppeddi>
From: "Praveen Peddi" <ppeddi@contextmedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <LOEGLEEGOAKBOLAJCCKIKEBACCAA.karthik@controlnet.co.in>
Subject: Re: displaying 'pages' of search results...
Date: Wed, 22 Sep 2004 11:37:37 -0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_01DD_01C4A098.8F31B850"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Rcpt-To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_01DD_01C4A098.8F31B850
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Sure I can share parts of the code.
LuceneSearchResults class extends HitCollector and overrides collect() =
method and takes care of paging stuff. The class roughly looks as =
follows. I didn't add un necessary methods for simplicity. collect =
method just reads the doc ids and score, but not the actual document. =
Where as the method getResults(startIndex, endIndex) reads the full =
document whose index is between startIndex and endIndex. search() method =
instantiates LuceneSearchResults and pass it to the lucene search(query, =
hitCOllector) method that collects all the document ids.

public class LuceneSearchResults extends HitCollector implements =
Serializable,
    SearchResults {
    /*
     * This class collects all non-zero search results
     * and presents them in descending order. This class
     * should be cached when possible to avoid having to re-run
     * the search.
     *
     */

    /** Cache of results.  This is serialized rather than the SortedSet =
to reduce size on disk */
    private SearchResultEntry[] results =3D null;

    /**
     *  Sorted set of results. Used to maintain order of results by =
score, but is not
     *  persisted since we need to deal with an indexable store to build =
sub-lists.
     * This data structure is only used during the initial collection of =
results.
     */
    private transient SortedSet sortedResults =3D null;

    /** Lucene searcher used to read results out of the index */
    private transient Searcher searcher =3D null;

    /** Factory for converting objects to domain objects */
    private transient SearchRecordFactory factory =3D null;


    /**
    * Creates a LuceneSearchResults that
    * reads Lucene Documents from the specified searcher
    * and converts them into ContentObjects with the specified
    * factory
    * @param index
    * @param factory
    * @throws IOException if there is an error opening the index.
    * @throws ClassCastException if the Index is incompatable with the =
passed in Index.
     */
    public LuceneSearchResults(Index index, SearchRecordFactory factory,
        Map modifiers) throws IOException {
        this.searcher =3D ((LuceneIndex) index).getSearcher();
        this.factory =3D factory;
        initializeSortedSet();
        initializeLogger();
    }

    /**
     *
     * @see org.apache.lucene.search.HitCollector#collect(int, float)
     */
    public void collect(int doc, float score) {
        // The Set is setup to sort in descending order by =
initializeSortedSet
        // so that results return with highest scoring first.
        // this.searcher.doc(doc).getField("division")
        sortedResults.add(new SearchResultEntry(doc, score));
    }

    /**
     * DOCUMENT ME!
     *
     * @return DOCUMENT ME!
     */
    public int getResultSize() {
        if (results =3D=3D null) {
            results =3D new SearchResultEntry[sortedResults.size()];
            sortedResults.toArray(results);
        }

        return results.length;
    }

    /* (non-Javadoc)
         * @see =
com.contextmedia.ip.domain.search.SearchResults#getResults(int, int)
         */
    public List getResults(int startIndex, int size) throws =
SearchException {
        if (startIndex < 0) {
            throw new IllegalArgumentException();
        }

        if (results =3D=3D null) {
            results =3D new SearchResultEntry[sortedResults.size()];
            sortedResults.toArray(results);
        }

        if (startIndex > results.length) {
            throw new IllegalArgumentException();
        }

        int end =3D ((startIndex + size) > results.length) ? =
results.length
                                                         : (startIndex + =
size);

        int totalRead =3D end - startIndex;

        ArrayList toReturn =3D new ArrayList(totalRead);

        for (int i =3D startIndex; i < end; i++) {
            toReturn.addAll(toDomainObjects(results[i]));
        }

        SearchResultList results =3D new SearchResultList(toReturn,
                this.getResultSize());

        return results;
    }

  =20
}

Th actual search method look something like this:
public SearchResults search(IQuery query, Map modifiers)
        throws MalformedQueryException, IOException {
        Query toRun =3D null;

        try {
            toRun =3D (Query) query.toQuery();
        } catch (ClassCastException ce) {
            // We don't know what the query string is, and
            // we don't know the user at this point.
            throw new =
MalformedQueryException(SearchResourceKeys.SRCH_UNKNOWN_QUERY_OBJECT, =
"Invalid type of class for Query", null, null, ce);
        }

        log.info("Query being executed " + toRun.toString());

        LuceneSearchResults toReturn =3D new LuceneSearchResults(this,
                this.factory, modifiers);

        Searcher searcher =3D getSearcher();

        searcher.search(toRun, toReturn);

        return toReturn;
    }

Hope this helps.

Praveen


----- Original Message -----=20
From: "Karthik N S" <karthik@controlnet.co.in>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Wednesday, September 22, 2004 2:53 AM
Subject: displaying 'pages' of search results...


> Hi
>=20
> Can u share the  searcher.search(query, hitCollector);  [light weight =
paging
> api ]
>=20
> Code on the form ,may be somebody like me need's it.........
>=20
>=20
>  ....  ; )
>=20
> Karthik
>=20
> -----Original Message-----
> From: Praveen Peddi [mailto:ppeddi@contextmedia.com]
> Sent: Wednesday, September 22, 2004 1:24 AM
> To: Lucene Users List
> Subject: Re: displaying 'pages' of search results...
>=20
>=20
> The way we do it is: Get all the document ids, cache them and then get =
the
> first 50, second 50 documents etc. We wrote a light weight paging api =
on top
> of lucene. We call searcher.search(query, hitCollector); Our
> HitCollectorImpl implements collect method and just collects the =
document id
> only.
>=20
> Praveen
>=20
>=20
> ----- Original Message -----
> From: "Chris Fraschetti" <fraschetti@gmail.com>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Tuesday, September 21, 2004 3:33 PM
> Subject: displaying 'pages' of search results...
>=20
>=20
>>I was wondering was the best way was to go about returning say
>> 1,000,000 results, divided up into say 50 element sections and then
>> accessing them via the first 50, second 50, etc etc.
>>
>> Is there a way to keep the query around so that lucene doesn't need =
to
>> search again, or would the search be cached and no delay arise?
>>
>> Just looking for some ideas and possibly some implementational =
issues...
>>
>>
>>
>> --
>> ___________________________________________________
>> Chris Fraschetti
>> e fraschetti@gmail.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>=20
>
------=_NextPart_000_01DD_01C4A098.8F31B850--


From lucene-user-return-10377-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 22 16:44:29 2004
Return-Path: <lucene-user-return-10377-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 46096 invoked from network); 22 Sep 2004 16:44:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Sep 2004 16:44:28 -0000
Received: (qmail 35286 invoked by uid 500); 22 Sep 2004 16:44:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 35259 invoked by uid 500); 22 Sep 2004 16:44:20 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 35246 invoked by uid 99); 22 Sep 2004 16:44:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [62.67.200.157] (HELO smtprelay02.ispgateway.de) (62.67.200.157)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 22 Sep 2004 09:44:18 -0700
Received: (qmail 12023 invoked from network); 22 Sep 2004 16:44:14 -0000
Received: from unknown (HELO [192.168.2.68]) (450094@[217.231.93.64])
          (envelope-sender <bg@eastbeam.com>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with SMTP
          for <lucene-user@jakarta.apache.org>; 22 Sep 2004 16:44:14 -0000
Message-ID: <4151ABEF.2060504@eastbeam.com>
Date: Wed, 22 Sep 2004 18:44:31 +0200
From: "Bastian Grimm [Eastbeam GmbH]" <bg@eastbeam.com>
User-Agent: Mozilla Thunderbird 0.8 (Windows/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  lucene-user@jakarta.apache.org
Subject: problem with get/setBoost of document fields
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

hi all,

i have a strange problem with the get and setBoost functions 
(lucene-1.4.1). i am trying the following code:

[...]
Document d1 = new Document();
Field f1 = Field.Text("field", "word");
f1.setBoost(2.0f);
d1.add(f1);
d1.setBoost(3.0f);
writer.addDocument(d1);
[...]

so if i'am right, this must be an overall boostfaktor of 6.0f for the 
doc...
if i try to get these boosts with:

[...]
Document doc = hits.doc(x);
System.out.println(doc.getField("field").getBoost());
System.out.println(doc.getBoost());
[...]

1.0 is returned in both cases. i dont really know what's wrong. i also 
tried some other types of Field.XXX , but nothing changed.

Another strange beheaviour is that:

[...]
    final float[] scores = new float[1];
    new IndexSearcher(store).search
      (new TermQuery(new Term("field", "word")),
       new HitCollector() {
         public final void collect(int doc, float score) {
           scores[doc] = score;
         }
       });
       for (int i = 0; i < 1; i++) {
        System.out.println(scores[i]);
    }
[...]

This function returns different scores if the boosts are changed but why 
aren't these boosts displayed correctly? any ideas?

if i set the d1 and f1 boost  to 1.0f (default) the score returned by 
the HitCollector is 0.3xxx - shouldn't it be exactly 1.0 ?


thanks for your time and kind regards from germany.
bastian


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10378-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 22 17:21:52 2004
Return-Path: <lucene-user-return-10378-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 74240 invoked from network); 22 Sep 2004 17:21:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Sep 2004 17:21:52 -0000
Received: (qmail 95289 invoked by uid 500); 22 Sep 2004 17:21:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 94976 invoked by uid 500); 22 Sep 2004 17:21:32 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 94959 invoked by uid 99); 22 Sep 2004 17:21:31 -0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [195.110.64.125] (HELO smtp.uk.colt.net) (195.110.64.125)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 22 Sep 2004 10:21:31 -0700
Received: from rte.ie (mx.rte.ie [217.173.98.209])
	by smtp.uk.colt.net (Postfix) with ESMTP id 34DBD127488
	for <lucene-user@jakarta.apache.org>; Wed, 22 Sep 2004 18:18:07 +0100 (BST)
Message-ID: <4151B496.8050808@rte.ie>
Date: Wed, 22 Sep 2004 18:21:26 +0100
From: John Moylan <johnm@rte.ie>
User-Agent: Mozilla Thunderbird 0.8 (X11/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: about snowball
References: <DDD3F807D283B543B3396F7E00A2C7E125F38C@exchange.xlnet.net.ar>
In-Reply-To: <DDD3F807D283B543B3396F7E00A2C7E125F38C@exchange.xlnet.net.ar>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

You need to search useing a snowball analayzer  and also index using the 
same analyzer.

John

Wermus Fernando wrote:
> I have test my app with snowball for english. But I'm doing something
> wrong because I can't get any result from hit.
>  
> If I index "lazy" with English snowball when I see the word in Luke it
> shows "lazy" (I've read that Luke show the file as is). When I do the
> search for the word "laziness" the snowball English change for "lazi"
> but it doesn't seem to add any * . So I can't get any hit.
>  
> If I search for 
>  
> laziness
>  
> The result using MultiFieldQueryParser
>  
> description:lazi
>  
> 0 hits
>  
> I am supposed to index the word "lazy" as tokenized, unindexed or
> something like this to get a hit. I have a similar problem when sorting,
> it ask for being untokenized.
>  
> What am I doing wrong?
>  
> How can I use Luke to look up words using snowball English?
>  
> thanks
> 

******************************************************************************
The information in this e-mail is confidential and may be legally privileged.
It is intended solely for the addressee. Access to this e-mail by anyone else
is unauthorised. If you are not the intended recipient, any disclosure,
copying, distribution, or any action taken or omitted to be taken in reliance
on it, is prohibited and may be unlawful.
Please note that emails to, from and within RT may be subject to the Freedom
of Information Act 1997 and may be liable to disclosure.
******************************************************************************

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10379-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 22 19:12:29 2004
Return-Path: <lucene-user-return-10379-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 45101 invoked from network); 22 Sep 2004 19:12:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Sep 2004 19:12:29 -0000
Received: (qmail 45246 invoked by uid 500); 22 Sep 2004 19:12:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 45227 invoked by uid 500); 22 Sep 2004 19:12:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 45212 invoked by uid 99); 22 Sep 2004 19:12:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.25.134.20] (HELO mailout08.sul.t-online.com) (194.25.134.20)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 22 Sep 2004 12:12:17 -0700
Received: from fwd03.aul.t-online.de 
	by mailout08.sul.t-online.com with smtp 
	id 1CACXH-0003zr-04; Wed, 22 Sep 2004 21:12:15 +0200
Received: from pD9EBDEE2.dip.t-dialin.net (JJTyGmZSQeJRhOJYayJAGjyLyg9ZvqFIAjAP+6dwsGzlZgnxeXYh6h@[217.235.222.226]) by fmrl03.sul.t-online.com
	with esmtp id 1CACXA-1JTQQa0; Wed, 22 Sep 2004 21:12:08 +0200
From: Daniel Naber <daniel.naber@t-online.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: problem with get/setBoost of document fields
Date: Wed, 22 Sep 2004 21:15:09 +0200
User-Agent: KMail/1.7
References: <4151ABEF.2060504@eastbeam.com>
In-Reply-To: <4151ABEF.2060504@eastbeam.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200409222115.10048@danielnaber.de>
X-ID: JJTyGmZSQeJRhOJYayJAGjyLyg9ZvqFIAjAP+6dwsGzlZgnxeXYh6h@t-dialin.net
X-TOI-MSGID: ce01755c-de1c-4a39-aa46-ea1ad1ffa94c
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Wednesday 22 September 2004 18:44, Bastian Grimm [Eastbeam GmbH] wrote:

> if i set the d1 and f1 boost =C2=A0to 1.0f (default) the score returned by
> the HitCollector is 0.3xxx - shouldn't it be exactly 1.0 ?

See the documentation for getBoost:

"Note: this value is not stored directly with the document in the index.=20
Documents returned from IndexReader.document(int) and Hits.doc(int) may=20
thus not have the same value present as when this field was indexed."

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10380-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 22 20:39:10 2004
Return-Path: <lucene-user-return-10380-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 2516 invoked from network); 22 Sep 2004 20:39:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Sep 2004 20:39:10 -0000
Received: (qmail 43257 invoked by uid 500); 22 Sep 2004 20:39:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 43190 invoked by uid 500); 22 Sep 2004 20:39:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 43177 invoked by uid 99); 22 Sep 2004 20:39:03 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [63.100.163.75] (HELO mercury.corp.cyveillance.com) (63.100.163.75)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 22 Sep 2004 13:39:02 -0700
Received: by mercury.corp.cyveillance.com with Internet Mail Service (5.5.2655.55)
	id <S3777CHA>; Wed, 22 Sep 2004 16:36:21 -0400
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA013A8F@hermes.corp.cyveillance.com>
From: wallen@Cyveillance.com
To: lucene-user@jakarta.apache.org
Subject: TopTerms on query results
Date: Wed, 22 Sep 2004 16:28:50 -0400
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain;
	charset="utf-8"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Can anyone help me with code to get the topterms of a given field for a
query resultset?

Here is code modified from Luke to get the topterms for a field:

    public TermInfo[] mostCommonTerms( String fieldName, int numberOfTerms )
    {
        //make sure min will get a positive number
        if ( numberOfTerms < 1 )
        {
            numberOfTerms = Integer.MAX_VALUE;
        }
        numberOfTerms = Math.min( numberOfTerms, 50 );
        //String[] commonTerms = new String[numberOfTerms];
        try
        {
            IndexReader reader = IndexReader.open( indexPath );
            TermInfoQueue tiq = new TermInfoQueue( numberOfTerms );
            TermEnum terms = reader.terms();

            int minFreq = 0;
            while ( terms.next() )
            {
                if ( fieldName.equalsIgnoreCase( terms.term().field() ) )
                {
                    if ( terms.docFreq() > minFreq )
                    {
                        tiq.put( new TermInfo( terms.term(), terms.docFreq()
) );
                        if ( tiq.size() >= numberOfTerms ) // if tiq
overfull
                        {
                            tiq.pop(); // remove lowest in tiq
                            minFreq = ( (TermInfo) tiq.top() ).docFreq; //
reset
                            // minFreq
                        }
                    }
                }
            }
            TermInfo[] res = new TermInfo[ tiq.size() ];
            for ( int i = 0; i < res.length; i++ )
            {
                res[ res.length - i - 1 ] = (TermInfo) tiq.pop();
            }
            reader.close();
            return res;

        }
        catch ( IOException ioe )
        {
            logger.error( "IOException: " + ioe.getMessage() );
        }
        return null;
    }


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10381-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 22 20:50:10 2004
Return-Path: <lucene-user-return-10381-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 8378 invoked from network); 22 Sep 2004 20:50:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Sep 2004 20:50:10 -0000
Received: (qmail 66371 invoked by uid 500); 22 Sep 2004 20:50:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 66345 invoked by uid 500); 22 Sep 2004 20:50:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 66332 invoked by uid 99); 22 Sep 2004 20:50:03 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.79.71.204] (HELO gandalf.lan.waite.net.nz) (203.79.71.204)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 22 Sep 2004 13:50:02 -0700
Received: from localhost ([127.0.0.1] ident=amavis)
	by gandalf.lan.waite.net.nz with esmtp (Exim 4.30 #1 (Debian))
	id 1CAE3o-00016b-FJ
	for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 08:49:56 +1200
Received: from gandalf.lan.waite.net.nz ([127.0.0.1])
	by localhost (gandalf [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 03830-07 for <lucene-user@jakarta.apache.org>;
	Thu, 23 Sep 2004 08:49:34 +1200 (NZST)
Received: from frodo.lan.waite.net.nz ([192.168.1.29] ident=paul)
	by gandalf.lan.waite.net.nz with esmtp (Exim 4.30 #1 (Debian))
	id 1CAE3S-00016V-Oj
	for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 08:49:34 +1200
From: Paul Waite <paul@waite.net.nz>
To: lucene-user@jakarta.apache.org
Subject: Re: PHP and Lucene
Date: Thu, 23 Sep 2004 08:49:28 +1200
User-Agent: KMail/1.6.2
References: <FD7BA9DF-081D-11D9-A9B7-000393A564E6@hatcher.net>
In-Reply-To: <FD7BA9DF-081D-11D9-A9B7-000393A564E6@hatcher.net>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: Text/Plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Message-Id: <200409230849.34180.paul@waite.net.nz>
X-Virus-Scanned: by amavisd-new-20030616-p5 (Debian) at waite.net.nz
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

=2D----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Erik Hatcher wrote:

> On Sep 15, 2004, at 1:45 PM, Karthik N S wrote:
> > 1) Is a there a PHP version of Lucene Implemantation avaliable , If so
> > Where?

> Using the Java version of Lucene from PHP is my recommendation.  There
> is not a PHP version.  I'm not familiar with PHP details, but I suspect
> you can very easily use the Java version somehow.


A bit tardy, but I was in-between versions, hence wanted to wait until
I had posted the new ones up.

We have developed a java-based daemon we call Luceneserver, and
which listens on a port and understands either of two text protocols, one
line-based, and one XML. This allows people to set up a server box
centrally, and then use Php, Perl, Java, or whatever to index/search a
central Lucene repository pretty easily. It has been designed such that
you can partition off separate "domains" (eg. websites) within the
same index, if you wish.

In particular we've also developed a family of Php classes to talk to the
above via the XML protocol, included in an opensource web development
platform we call Axyl.

Taken together, all of this might (or might not) be of some use to the
original poster, as a starting point, or just for ideas.

Version 2.1.1-1 of Axyl and Axyl-Lucene is available at:
 http://sourceforge.net/projects/axyl

Cheers,
Paul.
=2D --=20
LIBRA (Sept. 23 - Oct. 22)
 Major achievements, new friends, and a previously unexplored way
 to make a lot of money will come to a lot of people today, but
 unfortunately you won't be one of them.  Consider not getting out
 of bed today.
=2D----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.4 (GNU/Linux)

iD8DBQFBUeVetfkpAgkMOyMRAm1pAJ9AAOh54bivGeyDLc9sdUMC8kmKmwCgvX9i
+0JtZzP30AFVThe9z4BH0Fw=3D
=3D9faA
=2D----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10382-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 22 22:14:34 2004
Return-Path: <lucene-user-return-10382-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 57354 invoked from network); 22 Sep 2004 22:14:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Sep 2004 22:14:33 -0000
Received: (qmail 81551 invoked by uid 500); 22 Sep 2004 22:14:26 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 81517 invoked by uid 500); 22 Sep 2004 22:14:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 81504 invoked by uid 99); 22 Sep 2004 22:14:25 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [134.67.208.99] (HELO marconi.rtp.epa.gov) (134.67.208.99)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 22 Sep 2004 15:14:23 -0700
Received: from epahub11.rtp.epa.gov (epahub11.rtp.epa.gov [134.67.213.52])
 by epamail.epa.gov (PMDF V5.2-32 #42056)
 with ESMTP id <0I4G00E6DQQ93F@epamail.epa.gov> for
 lucene-user@jakarta.apache.org; Wed, 22 Sep 2004 18:06:09 -0400 (EDT)
Date: Wed, 22 Sep 2004 17:08:00 -0500
From: Balasubramanian.Vijay@epamail.epa.gov
Subject: Re: Highlighting PDF file after the search
To: Lucene Users List <lucene-user@jakarta.apache.org>
Message-id:
 <OF38928485.AD3BA7CC-ON86256F17.0078B076-86256F17.007957B2@epamail.epa.gov>
MIME-version: 1.0
X-Mailer: Lotus Notes Release 5.0.11   July 24, 2002
Content-type: text/plain; charset=US-ASCII
X-MIMETrack: Serialize by Router on EPAHUB11/USEPA/US(Release 6.5.2|June 01,
 2004) at 09/22/2004 06:06:09 PM
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

David,


I tried your technique, i am directly streaminf the pdf file in to
Lucene highlighter as below and i get a NPE in
highlighter.getBestFragments(tokenStream, docAsString, 3, "...");

API doc is not very clear here, i fed the contents of query string
(instead of docAsString)to this method and still i get NPE..

Can you shed some light on this please!! Please post your code snippet
if you can!

My code snippet:

      File f = new File(sourceDocLocation);
            if (!f.exists())
            {
                log.debug("File does not exist" + f.getAbsolutePath() +"
"+ f.getName());
                return null;
            }


            org.apache.lucene.document.Document doc =
LucenePDFDocument.getDocument(f);



            Highlighter highlighter = new Highlighter(new
QueryScorer(query));
            TokenStream tokenStream = new
SimpleAnalyzer().tokenStream(FIELD_NAME,
                    new FileReader(f));

            doc.add(Field.Text("contents", new FileReader(f)));

            // Get 3 best fragments and seperate with a "..."
           =========>>>>>>>> result =
highlighter.getBestFragments(tokenStream, queryString, 3, "...");
<<<<<<<<========


Thanks,
Vijay Balasubramanian
DPRA Inc.,
214 665 7503


                                                                                                                                   
                      David Spencer                                                                                                
                      <dave-lucene-user        To:       Lucene Users List <lucene-user@jakarta.apache.org>                        
                      @tropo.com>              cc:                                                                                 
                                               Subject:  Re: Highlighting PDF file after the search                                
                      09/20/2004 05:02                                                                                             
                      PM                                                                                                           
                      Please respond to                                                                                            
                      Lucene Users List                                                                                            
                                                                                                                                   
                                                                                                                                   




Balasubramanian.Vijay@epamail.epa.gov wrote:

>
>
>
> Hello,
>
> I can successfully index and search the PDF documents, however i am
not
> able to highlight the searched text in my original PDF file (ie: like
> dtSearch
> highlights on original file)
>
> I took a look at the highlighter in sandbox, compiled it and have it
> ready.  I am wondering if this highlighter is for highlighting indexed
> documents or
> can it be used for PDF Files as is !  Please enlighten !

I did this a few weeks ago.

There are two ways, and they both revolve round the same thing, you need

the tokenized PDF text available.

[a] Store the tokenized PDF text in the index, or in some other file on
disk i.e. a "cache" ( but cache is a misleading term, as you can't have
a cache miss unless you can do [b]).

[b] Tokenize it on the fly when you call getBestFragments() - the 1st
arg, the TokenStream, should be one that takes a PDF file as input and
tokenizes it.

http://www.searchmorph.com/pub/jakarta-lucene-sandbox/contributions/highlighter/build/docs/api/org/apache/lucene/search/highlight/Highlighter.html#getBestFragments(org.apache.lucene.analysis.TokenStream,%20java.lang.String,%20int,%20java.lang.String)

>
> Thanks,
>
> Vijay Balasubramanian
> DPRA Inc.,
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10383-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 00:53:44 2004
Return-Path: <lucene-user-return-10383-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 23133 invoked from network); 23 Sep 2004 00:53:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 00:53:44 -0000
Received: (qmail 55124 invoked by uid 500); 23 Sep 2004 00:53:37 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 55065 invoked by uid 500); 23 Sep 2004 00:53:36 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 55050 invoked by uid 99); 23 Sep 2004 00:53:36 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of crodriguez@gmail.com designates 64.233.170.193 as permitted sender)
Received: from [64.233.170.193] (HELO mproxy.gmail.com) (64.233.170.193)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 22 Sep 2004 17:53:35 -0700
Received: by mproxy.gmail.com with SMTP id 75so1917896rnk
        for <lucene-user@jakarta.apache.org>; Wed, 22 Sep 2004 17:53:33 -0700 (PDT)
Received: by 10.38.2.75 with SMTP id 75mr3755174rnb;
        Wed, 22 Sep 2004 17:53:32 -0700 (PDT)
Received: by 10.38.86.14 with HTTP; Wed, 22 Sep 2004 17:53:32 -0700 (PDT)
Message-ID: <ce6cc8cf040922175345c97296@mail.gmail.com>
Date: Wed, 22 Sep 2004 21:53:32 -0300
From: Christian Rodriguez <crodriguez@gmail.com>
Reply-To: Christian Rodriguez <crodriguez@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Transcations in Lucene + Berkeley DB
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Luceners!

I am trying to use transcations in the Berkeley DB + Lucene package
from the sandbox. Has anyone done this succesfully? I dont see any
transactions being commited or aborted in the code, so I wonder if
transactions actually work (shouldnt the main transaction that is used
for opening a DbDirectory be commited when DbDirectory.close() is
executed? Should File.rename() enclose the "delete" and "put" in a
transaction to make sure it happens atomically?

Also, has anyone used transactions to enclose Lucene operations aside
from the txn that is passed to the DbDirectory.open() function?

Thanks!
Christian

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10384-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 02:43:13 2004
Return-Path: <lucene-user-return-10384-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 66932 invoked from network); 23 Sep 2004 02:43:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 02:43:13 -0000
Received: (qmail 42305 invoked by uid 500); 23 Sep 2004 02:43:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 42278 invoked by uid 500); 23 Sep 2004 02:43:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 42261 invoked by uid 99); 23 Sep 2004 02:43:03 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [205.152.59.68] (HELO imf20aec.mail.bellsouth.net) (205.152.59.68)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 22 Sep 2004 19:43:02 -0700
Received: from w2ks.synernet.com ([65.12.150.225])
          by imf20aec.mail.bellsouth.net
          (InterMail vM.5.01.06.11 201-253-122-130-111-20040605) with ESMTP
          id <20040923024300.PIEB1719.imf20aec.mail.bellsouth.net@w2ks.synernet.com>
          for <lucene-user@jakarta.apache.org>;
          Wed, 22 Sep 2004 22:43:00 -0400
Message-Id: <6.0.1.1.2.20040922223354.03fffb18@fast.synernet.com>
X-Sender: ftoth@fast.synernet.com
X-Mailer: QUALCOMM Windows Eudora Version 6.0.1.1
Date: Wed, 22 Sep 2004 22:42:55 -0400
To: lucene-user@jakarta.apache.org
From: Fred Toth <ftoth@synernet.com>
Subject: demo HTML parser question
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

I've been working with the HTML parser demo that comes with
Lucene and I'm trying to understand why it's multi-threaded,
and, more importantly, how to exit gracefully on errors.

I've discovered if I throw an exception in the front-end static
code (main(), etc.), the JVM hangs instead of exiting. Presumably
this is because there are threads hanging around doing something.
But I'm not sure what!

Any pointers? I just want to exit gracefully on an error such as
a required meta tag is missing or similar.

Thanks,

Fred


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10385-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 04:12:51 2004
Return-Path: <lucene-user-return-10385-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 3876 invoked from network); 23 Sep 2004 04:12:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 04:12:51 -0000
Received: (qmail 17316 invoked by uid 500); 23 Sep 2004 04:12:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 17284 invoked by uid 500); 23 Sep 2004 04:12:40 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 17271 invoked by uid 99); 23 Sep 2004 04:12:40 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [203.200.8.84] (HELO ctsinblrsxid.cts.com) (203.200.8.84)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 22 Sep 2004 21:12:39 -0700
Received: from ctsinrmzsxub.cts.com ([10.236.168.5]) by ctsinblrsxid with tr
	end_isnt_name_B; Thu, 23 Sep 2004 09:42:21 +0530
X-MimeOLE: Produced By Microsoft Exchange V6.0.6249.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: RE: WildCardQuery
Date: Thu, 23 Sep 2004 09:42:21 +0530
Message-ID: <53CCF72FECD62346ADC714878C15EB0C3C6CF4@ctsinrmzsxub.cts.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: WildCardQuery
Thread-Index: AcSfMoYWNNEUW2AdQ2S2vbz6h5/U/wAY4LpwAEacErAAHLJGIA==
From: "Raju, Robinson (Cognizant)" <RRobinson@blr.cognizant.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Cc: <paul.elschot@xs4all.nl>
X-imss-version: 2.0
X-imss-result: Passed
X-imss-scores: Clean:76.3527 C:20 M:1 S:5 R:5
X-imss-settings: Baseline:1 C:1 M:1 S:1 R:1 (0.0000 0.0000)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Thanks a lot Paul , for solving the problem.
I added booleanQuery.setMaxClauseCount(10000) and there was no prob
after that.

Regards,
Robin

-----Original Message-----
From: Raju, Robinson (Cognizant)=0D
Sent: Wednesday, September 22, 2004 8:01 PM
To: 'Lucene Users List'
Subject: RE: WildCardQuery

Hi ,
	I think it doesn't have anything to do with number of characters
with a wildcard. Because 'z*' works and 'a*' does not.
Does lucene have a limitation on the number of hits fetched ?
The error that I get is=0D

org.apache.lucene.search.BooleanQuery$TooManyClauses
at org.apache.lucene.search.BooleanQuery.add(BooleanQuery.java:79)
	at
org.apache.lucene.search.BooleanQuery.add(BooleanQuery.java:71)
	at
org.apache.lucene.search.MultiTermQuery.rewrite(MultiTermQuery.java:61)
	at
org.apache.lucene.search.BooleanQuery.rewrite(BooleanQuery.java:228)
	at
org.apache.lucene.search.IndexSearcher.rewrite(IndexSearcher.java:162)
	at org.apache.lucene.search.Query.weight(Query.java:84)
	at
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:85)
	at
org.apache.lucene.search.MultiSearcherThread.run(ParallelMultiSearcher.j
ava:251)
java.lang.NullPointerException
	at
org.apache.lucene.search.MultiSearcherThread.hits(ParallelMultiSearcher.
java:281)
	at
org.apache.lucene.search.ParallelMultiSearcher.search(ParallelMultiSearc
her.java:85)
	at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
	at org.apache.lucene.search.Hits.<init>(Hits.java:43)
	at org.apache.lucene.search.Searcher.search(Searcher.java:33)
	at
com.abcea.oos.search.helper.TestSearcher.search(TestSearcher.java:161)
	at
com.abcea.oos.search.helper.TestSearcher.main(TestSearcher.java:270)

-----Original Message-----
From: Raju, Robinson (Cognizant)=0D
Sent: Tuesday, September 21, 2004 10:21 AM
To: 'Lucene Users List'
Subject: WildCardQuery

Is there a limitation in Lucene when it comes to wildcard search ?=0D
Is it a problem if we use less than 3 characters along with a
wildcard(*).
Gives me error if I try using 45* , *34 , *3 ..etc .=0D
Too Many Clauses Error
Doesn't happen if '?' is used instead of '*'.
The intriguing thing is , that it is not consistent . 00* doesn't fail.
Am I missing something ?

Robin

This e-mail and any files transmitted with it are for the sole use of the=
 intended recipient(s) and may contain confidential and privileged=
 information.
If you are not the intended recipient, please contact the sender by reply=
 e-mail and destroy all copies of the original message.=0D
Any unauthorised review, use, disclosure, dissemination, forwarding,=
 printing or copying of this email or any action taken in reliance on this=
 e-mail is strictly=0D
prohibited and may be unlawful.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10386-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 07:39:22 2004
Return-Path: <lucene-user-return-10386-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 20114 invoked from network); 23 Sep 2004 07:39:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 07:39:22 -0000
Received: (qmail 94872 invoked by uid 500); 23 Sep 2004 07:38:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 94777 invoked by uid 500); 23 Sep 2004 07:38:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 94565 invoked by uid 99); 23 Sep 2004 07:38:41 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [81.80.239.198] (HELO outbound1.sopragroup.com) (81.80.239.198)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 23 Sep 2004 00:38:39 -0700
Received: by outbound1.sopragroup.com (8.12.10/8.12.10/outbound-A02) with ESMTP id i8N7cZKp003983
          for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 09:38:36 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C4A140.553EF0EC"
Subject: [ANNOUNCE] : Lucene Server 
Date: Thu, 23 Sep 2004 09:38:35 +0200
Message-ID: <5933531F07A5144E9E53E1AA45257E4BFCB2D4@wexchbe03.ancy.fr.sopra>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [ANNOUNCE] : Lucene Server 
Thread-Index: AcShP8M3+vMIDQ3HSQGQo5LK+f9hjw==
From: "Cocula Remi" <rcocula@sopragroup.com>
To: "lucene-user" <lucene-user@jakarta.apache.org>
X-OriginalArrivalTime: 23 Sep 2004 07:38:36.0671 (UTC) FILETIME=[560A48F0:01C4A140]
X-Scanned-By: MIMEDefang 2.38
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C4A140.553EF0EC
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I am glad to introduce a new project on SourceForge that is related to =
Lucene.

"Lucene Server is a java server application for simply create and manage =
Jakarta Lucene Indexes. It is designed to help you integrate Lucene in =
distributed environnements."
The first release 0.1 is available for download.
Hope it will be usefull for somebody.
http://sourceforge.net/projects/luceneserver/

Remi COCULA.


------_=_NextPart_001_01C4A140.553EF0EC--

From lucene-user-return-10387-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 09:09:38 2004
Return-Path: <lucene-user-return-10387-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 90324 invoked from network); 23 Sep 2004 09:09:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 09:09:38 -0000
Received: (qmail 5210 invoked by uid 500); 23 Sep 2004 09:09:28 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 5178 invoked by uid 500); 23 Sep 2004 09:09:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 5164 invoked by uid 99); 23 Sep 2004 09:09:28 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO main.gmane.org) (80.91.229.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 23 Sep 2004 02:09:26 -0700
Received: from list by main.gmane.org with local (Exim 3.35 #1 (Debian))
	id 1CAPbQ-0006bY-00
	for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 11:09:24 +0200
Received: from fw-d-whp.denic.de ([81.91.160.27])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 11:09:24 +0200
Received: from ulim by fw-d-whp.denic.de with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 11:09:24 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: lucene-user@jakarta.apache.org
From: Ulrich Mayring <ulim@denic.de>
Subject: Strange search results with wildcard - Bug?
Date: Thu, 23 Sep 2004 11:09:20 +0200
Lines: 36
Message-ID: <ciu3s1$62j$1@sea.gmane.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: fw-d-whp.denic.de
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.2) Gecko/20040803
X-Accept-Language: de-de, en-us, en
X-Enigmail-Version: 0.86.0.0
X-Enigmail-Supports: pgp-inline, pgp-mime
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi all,

first, here's how to reproduce the problem:

Go to http://www.denic.de/en/special/index.jsp and enter "obscure 
service" in the search field. You'll get 132 hits. Now enter "obscure 
service*" - and you only get 1 hit.

The above website is running Lucene 1.3rc3, but I was able to reproduce 
this locally with 1.4.1. Here are my local results with "controlled 
pseudo" documents, perhaps you can see a pattern:

searching for "00700*" gets two documents:
"007001 action" and "007002 handle"


searching for "handle" gets two documents:
"007002 handle" and "011010 handle"


searching for "00700* handle" gets two documents:
"007002 handle" and "011010 handle"
But where is "007001 action"?


searching for "handle 00700*" gets two documents:
"007001 action" and "007002 handle"
But where is "001010 handle"?


We're using the MultiFieldQueryParser and the Snowball Stemmers, if that 
makes any difference.

Many thanks in advance for any pointers,

Ulrich


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10388-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 09:26:45 2004
Return-Path: <lucene-user-return-10388-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 5802 invoked from network); 23 Sep 2004 09:26:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 09:26:45 -0000
Received: (qmail 22158 invoked by uid 500); 23 Sep 2004 09:26:36 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 22061 invoked by uid 500); 23 Sep 2004 09:26:35 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 22048 invoked by uid 99); 23 Sep 2004 09:26:35 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 23 Sep 2004 02:26:34 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id 9F74D23B93
	for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 11:28:21 +0200 (CEST)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 32456-10 for <lucene-user@jakarta.apache.org>;
 Thu, 23 Sep 2004 11:28:21 +0200 (CEST)
Received: from tucholsky.office.tanto.de (unknown [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP id 7A9E223B8F
	for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 11:28:21 +0200 (CEST)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id i8N9QVGL014133
	for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 11:26:31 +0200
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id i8N9QVs4014129;
	Thu, 23 Sep 2004 11:26:31 +0200
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16722.38599.757133.894398@tanto-xipolis.de>
Date: Thu, 23 Sep 2004 11:26:31 +0200
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Strange search results with wildcard - Bug?
In-Reply-To: <ciu3s1$62j$1@sea.gmane.org>
References: <ciu3s1$62j$1@sea.gmane.org>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Ulrich Mayring writes:
> Hi all,
> 
> first, here's how to reproduce the problem:
> 
> Go to http://www.denic.de/en/special/index.jsp and enter "obscure 
> service" in the search field. You'll get 132 hits. Now enter "obscure 
> service*" - and you only get 1 hit.
> 
> The above website is running Lucene 1.3rc3, but I was able to reproduce 
> this locally with 1.4.1. Here are my local results with "controlled 
> pseudo" documents, perhaps you can see a pattern:
> 
> searching for "00700*" gets two documents:
> "007001 action" and "007002 handle"
> 
> 
> searching for "handle" gets two documents:
> "007002 handle" and "011010 handle"
> 
> 
> searching for "00700* handle" gets two documents:
> "007002 handle" and "011010 handle"
> But where is "007001 action"?
> 
> 
> searching for "handle 00700*" gets two documents:
> "007001 action" and "007002 handle"
> But where is "001010 handle"?
> 
> 
> We're using the MultiFieldQueryParser and the Snowball Stemmers, if that 
> makes any difference.
> 
Your number/handle samples look ok to me if the default operator is AND.

Note that wildcard expressions are not analyzed so if service is 
stemmed to anything different from service, it's not surprising that
service* doesn't find it.

I think you should look at a) what's the analyzed form of your terms
and b) how does the rewritten query look like (there's a rewrite method
for query that expands wildcard queries into basic queries).

HTH
	Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10389-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 09:40:38 2004
Return-Path: <lucene-user-return-10389-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 15885 invoked from network); 23 Sep 2004 09:40:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 09:40:38 -0000
Received: (qmail 41399 invoked by uid 500); 23 Sep 2004 09:40:21 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 41292 invoked by uid 500); 23 Sep 2004 09:40:20 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 41278 invoked by uid 99); 23 Sep 2004 09:40:20 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO main.gmane.org) (80.91.229.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 23 Sep 2004 02:40:19 -0700
Received: from list by main.gmane.org with local (Exim 3.35 #1 (Debian))
	id 1CAQ5J-0008Ng-00
	for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 11:40:17 +0200
Received: from fw-d-whp.denic.de ([81.91.160.27])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 11:40:16 +0200
Received: from ulim by fw-d-whp.denic.de with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 11:40:16 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: lucene-user@jakarta.apache.org
From: Ulrich Mayring <ulim@denic.de>
Subject: Re: Strange search results with wildcard - Bug?
Date: Thu, 23 Sep 2004 11:40:10 +0200
Lines: 27
Message-ID: <ciu5lq$anj$1@sea.gmane.org>
References: <ciu3s1$62j$1@sea.gmane.org> <16722.38599.757133.894398@tanto-xipolis.de>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: fw-d-whp.denic.de
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.2) Gecko/20040803
X-Accept-Language: de-de, en-us, en
In-Reply-To: <16722.38599.757133.894398@tanto-xipolis.de>
X-Enigmail-Version: 0.86.0.0
X-Enigmail-Supports: pgp-inline, pgp-mime
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Morus Walter wrote:
> 
> Your number/handle samples look ok to me if the default operator is AND.

But it's OR ;-)

Using AND explicitly I get different results and using OR explicitly I 
get the same results as documented.

> Note that wildcard expressions are not analyzed so if service is 
> stemmed to anything different from service, it's not surprising that
> service* doesn't find it.

Ok, I didn't know that, but it makes sense. Perhaps the phenomenon on 
the live pages is different from my local test installation. I was just 
looking for a comparable case on our live pages, but the real problem is 
in pages that I'm just developing locally and which look similar to the 
number/handle example.

> I think you should look at a) what's the analyzed form of your terms
> and b) how does the rewritten query look like (there's a rewrite method
> for query that expands wildcard queries into basic queries).

Will do, thank you very much. However, how do I get at the analyzed form 
of my terms?

Ulrich


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10390-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 09:49:30 2004
Return-Path: <lucene-user-return-10390-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 22010 invoked from network); 23 Sep 2004 09:49:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 09:49:29 -0000
Received: (qmail 52993 invoked by uid 500); 23 Sep 2004 09:49:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 52924 invoked by uid 500); 23 Sep 2004 09:49:17 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 52889 invoked by uid 99); 23 Sep 2004 09:49:16 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 23 Sep 2004 02:49:16 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id 0016A23B93
	for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 11:50:59 +0200 (CEST)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 00836-05 for <lucene-user@jakarta.apache.org>;
 Thu, 23 Sep 2004 11:50:59 +0200 (CEST)
Received: from tucholsky.office.tanto.de (unknown [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP id CE76523B8F
	for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 11:50:59 +0200 (CEST)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id i8N9nAGL014327
	for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 11:49:10 +0200
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id i8N9nA5k014323;
	Thu, 23 Sep 2004 11:49:10 +0200
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16722.39958.137117.826624@tanto-xipolis.de>
Date: Thu, 23 Sep 2004 11:49:10 +0200
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Strange search results with wildcard - Bug?
In-Reply-To: <ciu5lq$anj$1@sea.gmane.org>
References: <ciu3s1$62j$1@sea.gmane.org>
	<16722.38599.757133.894398@tanto-xipolis.de>
	<ciu5lq$anj$1@sea.gmane.org>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Ulrich Mayring writes:
> 
> Will do, thank you very much. However, how do I get at the analyzed form 
> of my terms?
> 
Instanciate the analyzer, create a token stream feeding your input,
loop over the tokens, output the results.

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10391-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 10:30:37 2004
Return-Path: <lucene-user-return-10391-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 47634 invoked from network); 23 Sep 2004 10:30:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 10:30:36 -0000
Received: (qmail 96356 invoked by uid 500); 23 Sep 2004 10:30:28 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 96332 invoked by uid 500); 23 Sep 2004 10:30:27 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 96317 invoked by uid 99); 23 Sep 2004 10:30:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 23 Sep 2004 03:30:26 -0700
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id I4HN8W00.QWI for <lucene-user@jakarta.apache.org>; Thu,
          23 Sep 2004 15:18:32 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "LUCENE" <lucene-user@jakarta.apache.org>
Subject: MultiSearcher + Sort
Date: Thu, 23 Sep 2004 15:11:50 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIIEBGCCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N



Guys


Apologies........


Am I doing Wrong or is ther a bug with Lucene on Linux  O/s  When using  '
MultiSearcher with Sort '

Please Somebody Reply me ASAP

Tested both Lucene-1.4-final.jar,Lucene-1.4.1.jar

hits = multiSearcher.search(query,sortField);


Exception raised  on Linux O/s Only  [ On Windows it Works Perfectly ]


Query String  : (contents:gifts contents:articles) (path:gifts
path:articles) (modified:gifts modified:articles) (filename:gifts
filename:articles) (bookid:gifts bookid:articles) (creation:gifts
creation:articles) (chapNme:gifts chapNme:articles) (itmName:gifts
itmName:articles) (urltext:gifts urltext:articles) (itemCode:gifts
itemCode:articles) (itemPrice:gifts itemPrice:articles) (pageid:gifts
pageid:articles)

--------------- EXCEPTION START-----------------
The Exception Raised file = SearchCreateArrayDataFiles.createArray1
Centralized Boolean Factor =false
      SYSTEM IS STOPPING COMPILATION
-------------- EXCEPTION END-----------------

<---------------------------------------------------------------------------
-------------------------------------------->
java.lang.RuntimeException: no terms in field bookid - cannot determine sort
type
        at
org.apache.lucene.search.FieldCacheImpl.getAuto(FieldCacheImpl.java:319)
        at
org.apache.lucene.search.FieldSortedHitQueue.comparatorAuto(FieldSortedHitQu
eue.java:326)
        at
org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(FieldSorted
HitQueue.java:167)
        at
org.apache.lucene.search.FieldSortedHitQueue.<init>(FieldSortedHitQueue.java
:58)
        at
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:118)
        at
org.apache.lucene.search.MultiSearcher.search(MultiSearcher.java:141)
        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
        at org.apache.lucene.search.Hits.<init>(Hits.java:51)
        at org.apache.lucene.search.Searcher.search(Searcher.java:41)

<---------------------------------------------------------------------------
--------------------------------------------->


/*    at
com.controlnet.indexing.search.SearchCreateArrayDataFiles.createArray1(Searc
hCreateArrayDataFiles.java:263)
  *    at
com.controlnet.indexing.search.SearchCreateArrayDataFiles.main(SearchCreateA
rrayDataFiles.java:308)
  */




      WITH WARM REGARDS
      HAVE A NICE DAY
      [ N.S.KARTHIK]




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10392-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 11:36:11 2004
Return-Path: <lucene-user-return-10392-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 84511 invoked from network); 23 Sep 2004 11:36:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 11:36:11 -0000
Received: (qmail 76714 invoked by uid 500); 23 Sep 2004 11:35:55 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 76669 invoked by uid 500); 23 Sep 2004 11:35:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 76652 invoked by uid 99); 23 Sep 2004 11:35:53 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [150.254.30.30] (HELO libra.cs.put.poznan.pl) (150.254.30.30)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 23 Sep 2004 04:35:53 -0700
Received: from libra.cs.put.poznan.pl (localhost [127.0.0.1])
	by libra (Postfix on VMS) with SMTP id DD2E2EED
	for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 13:35:51 +0200 (CEST)
Received: from [127.0.0.1] (idss-dw-pnca.cs.put.poznan.pl [150.254.24.146])
	by libra.cs.put.poznan.pl (Postfix on VMS) with ESMTP id A5C2EED3
	for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 13:35:51 +0200 (CEST)
Message-ID: <4152B523.50002@cs.put.poznan.pl>
Date: Thu, 23 Sep 2004 13:36:03 +0200
From: Dawid Weiss <dawid.weiss@cs.put.poznan.pl>
User-Agent: Mozilla Thunderbird 0.8 (Windows/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: lucene-user@jakarta.apache.org
Subject: Clustering lucene's results
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Scan-Module: SMTP[mks_vir 2004.09.22 (2004.07.22)]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Dear all,

I saw a post about an attempt to integrate Carrot2 with Lucene. It was a 
while ago, so I'm curious if any outcome has been achieved.

Anyway, as the project coordinator I can offer my help with such 
integration; if you're looking for some ready-to-use code then there is 
a clustering plugin for Nutch that integrates one of the clustering 
algorithms from Carrot2 with Nutch; I'm sure porting it to Lucene 
wouldn't be a big problem.

Ragards,
Dawid

_________________________________________________________________
List sprawdzony skanerem poczty mks_vir ( http://www.mks.com.pl )

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10393-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 12:17:32 2004
Return-Path: <lucene-user-return-10393-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 12190 invoked from network); 23 Sep 2004 12:17:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 12:17:31 -0000
Received: (qmail 49455 invoked by uid 500); 23 Sep 2004 12:17:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 49279 invoked by uid 500); 23 Sep 2004 12:17:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 49228 invoked by uid 99); 23 Sep 2004 12:17:08 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [62.67.200.157] (HELO smtprelay02.ispgateway.de) (62.67.200.157)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 23 Sep 2004 05:17:07 -0700
Received: (qmail 31024 invoked from network); 23 Sep 2004 12:17:03 -0000
Received: from unknown (HELO [192.168.2.68]) (450094@[217.231.93.64])
          (envelope-sender <bg@eastbeam.com>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with SMTP
          for <lucene-user@jakarta.apache.org>; 23 Sep 2004 12:17:03 -0000
Message-ID: <4152BED2.4090908@eastbeam.com>
Date: Thu, 23 Sep 2004 14:17:22 +0200
From: "Bastian Grimm [Eastbeam GmbH]" <bg@eastbeam.com>
User-Agent: Mozilla Thunderbird 0.8 (Windows/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: problem with get/setBoost of document fields
References: <4151ABEF.2060504@eastbeam.com> <200409222115.10048@danielnaber.de>
In-Reply-To: <200409222115.10048@danielnaber.de>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

hmm ok,

but how will i be able to set different boosts to fields, if this value 
is not stored?! i dont really understand why i can set a boost factor 
and it is not stored and used.
what i want to do, is to weight my searchable index fields (type: 
Field.UnStored) with a different factors for those fields and if am not 
totally wrong this is done with set boost when i create the doc and 
write it to the index... or is there another way to do this?

thanks, bastian


----

Daniel Naber wrote:

See the documentation for getBoost:
"Note: this value is not stored directly with the document in the index. 
Documents returned from IndexReader.document(int) and Hits.doc(int) may 
thus not have the same value present as when this field was indexed."

Regards
Daniel


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10394-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 12:51:13 2004
Return-Path: <lucene-user-return-10394-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 33458 invoked from network); 23 Sep 2004 12:51:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 12:51:13 -0000
Received: (qmail 10228 invoked by uid 500); 23 Sep 2004 12:50:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 10089 invoked by uid 500); 23 Sep 2004 12:50:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 9912 invoked by uid 99); 23 Sep 2004 12:50:47 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [208.36.123.35] (HELO ws7-6.us4.outblaze.com) (208.36.123.35)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 23 Sep 2004 05:50:46 -0700
Received: (qmail 18754 invoked from network); 23 Sep 2004 12:50:44 -0000
Received: from unknown (HELO ?128.143.135.117?) (erik@hatcher.net@128.143.135.117)
  by ws7-6.us4.outblaze.com with SMTP; 23 Sep 2004 12:50:44 -0000
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <16722.39958.137117.826624@tanto-xipolis.de>
References: <ciu3s1$62j$1@sea.gmane.org> <16722.38599.757133.894398@tanto-xipolis.de> <ciu5lq$anj$1@sea.gmane.org> <16722.39958.137117.826624@tanto-xipolis.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <2ECCD670-0D5F-11D9-B393-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Strange search results with wildcard - Bug?
Date: Thu, 23 Sep 2004 08:50:44 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Sep 23, 2004, at 5:49 AM, Morus Walter wrote:
> Ulrich Mayring writes:
>>
>> Will do, thank you very much. However, how do I get at the analyzed 
>> form
>> of my terms?
>>
> Instanciate the analyzer, create a token stream feeding your input,
> loop over the tokens, output the results.

Look at AnalysisDemo referred to here:

	http://wiki.apache.org/jakarta-lucene/AnalysisParalysis

Keep in mind that phrase queries do not support wildcards - they are 
analyzed and any wildcard characters are likely stripped and cause 
tokens to split.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10395-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 12:58:29 2004
Return-Path: <lucene-user-return-10395-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 38679 invoked from network); 23 Sep 2004 12:58:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 12:58:29 -0000
Received: (qmail 29393 invoked by uid 500); 23 Sep 2004 12:58:21 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 29270 invoked by uid 500); 23 Sep 2004 12:58:20 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 29245 invoked by uid 99); 23 Sep 2004 12:58:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [208.36.123.35] (HELO ws7-6.us4.outblaze.com) (208.36.123.35)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 23 Sep 2004 05:58:19 -0700
Received: (qmail 10995 invoked from network); 23 Sep 2004 12:58:18 -0000
Received: from unknown (HELO ?128.143.135.117?) (erik@hatcher.net@128.143.135.117)
  by ws7-6.us4.outblaze.com with SMTP; 23 Sep 2004 12:58:18 -0000
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <4152BED2.4090908@eastbeam.com>
References: <4151ABEF.2060504@eastbeam.com> <200409222115.10048@danielnaber.de> <4152BED2.4090908@eastbeam.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <006420E2-0D60-11D9-B393-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: problem with get/setBoost of document fields
Date: Thu, 23 Sep 2004 08:56:35 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

The boost is not thrown away, but rather combined with the length 
normalization factor during indexing.  So while your actual boost value 
is not stored directly in the index, it is taken into consideration for 
scoring appropriately.

	Erik


On Sep 23, 2004, at 8:17 AM, Bastian Grimm [Eastbeam GmbH] wrote:

> hmm ok,
>
> but how will i be able to set different boosts to fields, if this 
> value is not stored?! i dont really understand why i can set a boost 
> factor and it is not stored and used.
> what i want to do, is to weight my searchable index fields (type: 
> Field.UnStored) with a different factors for those fields and if am 
> not totally wrong this is done with set boost when i create the doc 
> and write it to the index... or is there another way to do this?
>
> thanks, bastian
>
>
> ----
>
> Daniel Naber wrote:
>
> See the documentation for getBoost:
> "Note: this value is not stored directly with the document in the 
> index. Documents returned from IndexReader.document(int) and 
> Hits.doc(int) may thus not have the same value present as when this 
> field was indexed."
>
> Regards
> Daniel
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10396-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 13:28:20 2004
Return-Path: <lucene-user-return-10396-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 70618 invoked from network); 23 Sep 2004 13:28:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 13:28:20 -0000
Received: (qmail 1458 invoked by uid 500); 23 Sep 2004 13:28:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 1422 invoked by uid 500); 23 Sep 2004 13:28:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 1407 invoked by uid 99); 23 Sep 2004 13:28:07 -0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.4.27.35] (HELO hotmail.com) (64.4.27.35)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 23 Sep 2004 06:28:03 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Thu, 23 Sep 2004 06:28:01 -0700
Received: from 200.214.14.1 by by8fd.bay8.hotmail.msn.com with HTTP;
	Thu, 23 Sep 2004 13:27:19 GMT
X-Originating-IP: [200.214.14.1]
X-Originating-Email: [william_wws@hotmail.com]
X-Sender: william_wws@hotmail.com
From: "William W" <william_wws@hotmail.com>
To: lucene-user@jakarta.apache.org
Bcc: 
Subject: RE: Clustering lucene's results
Date: Thu, 23 Sep 2004 13:27:19 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
Message-ID: <BAY8-F35nXAwIvOTDlT00036f91@hotmail.com>
X-OriginalArrivalTime: 23 Sep 2004 13:28:01.0804 (UTC) FILETIME=[263BB4C0:01C4A171]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Hi Dawid,

I would like to use Carrot2 with lucene. Do you have examples ?
Thanks a lot,
William.



>From: Dawid Weiss <dawid.weiss@cs.put.poznan.pl>
>Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>To: lucene-user@jakarta.apache.org
>Subject: Clustering lucene's results
>Date: Thu, 23 Sep 2004 13:36:03 +0200
>
>
>Dear all,
>
>I saw a post about an attempt to integrate Carrot2 with Lucene. It was a 
>while ago, so I'm curious if any outcome has been achieved.
>
>Anyway, as the project coordinator I can offer my help with such 
>integration; if you're looking for some ready-to-use code then there is a 
>clustering plugin for Nutch that integrates one of the clustering 
>algorithms from Carrot2 with Nutch; I'm sure porting it to Lucene wouldn't 
>be a big problem.
>
>Ragards,
>Dawid
>
>_________________________________________________________________
>List sprawdzony skanerem poczty mks_vir ( http://www.mks.com.pl )
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>

_________________________________________________________________
Express yourself instantly with MSN Messenger! Download today - it's FREE! 
hthttp://messenger.msn.click-url.com/go/onm00200471ave/direct/01/


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10397-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 13:34:39 2004
Return-Path: <lucene-user-return-10397-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 74728 invoked from network); 23 Sep 2004 13:34:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 13:34:39 -0000
Received: (qmail 16134 invoked by uid 500); 23 Sep 2004 13:34:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 16063 invoked by uid 500); 23 Sep 2004 13:34:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 16031 invoked by uid 99); 23 Sep 2004 13:34:29 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [150.254.30.30] (HELO libra.cs.put.poznan.pl) (150.254.30.30)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 23 Sep 2004 06:34:28 -0700
Received: from libra.cs.put.poznan.pl (localhost [127.0.0.1])
	by libra (Postfix on VMS) with SMTP id 149E3F0D
	for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 15:34:27 +0200 (CEST)
Received: from [127.0.0.1] (idss-dw-pnca.cs.put.poznan.pl [150.254.24.146])
	by libra.cs.put.poznan.pl (Postfix on VMS) with ESMTP id D359981E
	for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 15:34:26 +0200 (CEST)
Message-ID: <4152D0EF.1050404@cs.put.poznan.pl>
Date: Thu, 23 Sep 2004 15:34:39 +0200
From: Dawid Weiss <dawid.weiss@cs.put.poznan.pl>
User-Agent: Mozilla Thunderbird 0.8 (Windows/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Clustering lucene's results
References: <BAY8-F35nXAwIvOTDlT00036f91@hotmail.com>
In-Reply-To: <BAY8-F35nXAwIvOTDlT00036f91@hotmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Scan-Module: SMTP[mks_vir 2004.09.22 (2004.07.22)]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi William,

No, I don't have examples because I never used Lucene directly. If you 
provide me with a sample index and an API that executes a query on this 
index (I need document titles, summaries, or snippets and an anchor 
(identifier), can be an URL).

Send me such a snippet and I'll try to write the integration code with 
Lucene. It is only a matter of writing a simple InputComponent instance 
and this is really trivial (see Nutch's plugin code).

Dawid

William W wrote:
> 
> Hi Dawid,
> 
> I would like to use Carrot2 with lucene. Do you have examples ?
> Thanks a lot,
> William.
> 
> 
> 
>> From: Dawid Weiss <dawid.weiss@cs.put.poznan.pl>
>> Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>> To: lucene-user@jakarta.apache.org
>> Subject: Clustering lucene's results
>> Date: Thu, 23 Sep 2004 13:36:03 +0200
>>
>>
>> Dear all,
>>
>> I saw a post about an attempt to integrate Carrot2 with Lucene. It was 
>> a while ago, so I'm curious if any outcome has been achieved.
>>
>> Anyway, as the project coordinator I can offer my help with such 
>> integration; if you're looking for some ready-to-use code then there 
>> is a clustering plugin for Nutch that integrates one of the clustering 
>> algorithms from Carrot2 with Nutch; I'm sure porting it to Lucene 
>> wouldn't be a big problem.
>>
>> Ragards,
>> Dawid
>>
>> _________________________________________________________________
>> List sprawdzony skanerem poczty mks_vir ( http://www.mks.com.pl )
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
> 
> _________________________________________________________________
> Express yourself instantly with MSN Messenger! Download today - it's 
> FREE! hthttp://messenger.msn.click-url.com/go/onm00200471ave/direct/01/
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>  From - Thu

_________________________________________________________________
List sprawdzony skanerem poczty mks_vir ( http://www.mks.com.pl )

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10398-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 14:01:11 2004
Return-Path: <lucene-user-return-10398-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 96442 invoked from network); 23 Sep 2004 14:01:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 14:01:11 -0000
Received: (qmail 82807 invoked by uid 500); 23 Sep 2004 14:01:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 82765 invoked by uid 500); 23 Sep 2004 14:01:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 82747 invoked by uid 99); 23 Sep 2004 14:00:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [62.67.200.165] (HELO smtprelay04.ispgateway.de) (62.67.200.165)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 23 Sep 2004 07:00:59 -0700
Received: (qmail 29296 invoked from network); 23 Sep 2004 14:00:54 -0000
Received: from unknown (HELO [192.168.2.68]) (450094@[217.231.93.64])
          (envelope-sender <bg@eastbeam.com>)
          by smtprelay04.ispgateway.de (qmail-ldap-1.03) with SMTP
          for <lucene-user@jakarta.apache.org>; 23 Sep 2004 14:00:54 -0000
Message-ID: <4152D729.7080609@eastbeam.com>
Date: Thu, 23 Sep 2004 16:01:13 +0200
From: "Bastian Grimm [Eastbeam GmbH]" <bg@eastbeam.com>
User-Agent: Mozilla Thunderbird 0.8 (Windows/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: problem with get/setBoost of document fields
References: <4151ABEF.2060504@eastbeam.com> <200409222115.10048@danielnaber.de> <4152BED2.4090908@eastbeam.com> <006420E2-0D60-11D9-B393-000393A564E6@ehatchersolutions.com>
In-Reply-To: <006420E2-0D60-11D9-B393-000393A564E6@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

thanks for your reply, eric.

so i am right that its not possible to change the boost without 
reindexing all files? thats not good... or is it ok only to change the 
boosts an optimize the index to take changes effecting the index?

if not, will i be able to boost those fields in the searcher?

thanks, bastian


-----

The boost is not thrown away, but rather combined with the length 
normalization factor during indexing.  So while your actual boost value 
is not stored directly in the index, it is taken into consideration for 
scoring appropriately.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10399-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 14:16:07 2004
Return-Path: <lucene-user-return-10399-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 8343 invoked from network); 23 Sep 2004 14:16:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 14:16:06 -0000
Received: (qmail 22376 invoked by uid 500); 23 Sep 2004 14:15:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 22344 invoked by uid 500); 23 Sep 2004 14:15:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 22331 invoked by uid 99); 23 Sep 2004 14:15:55 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [200.61.168.200] (HELO gandalf.xlnet.net.ar) (200.61.168.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 23 Sep 2004 07:15:54 -0700
Received: from exchange.xlnet.net.ar (10.0.0.3) by gandalf.xlnet.net.ar (NPlex 5.1.036)
        id 41506AA800009E11 for lucene-user@jakarta.apache.org; Thu, 23 Sep 2004 11:19:04 -0300
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: MultiSearcher + Sort
Content-class: urn:content-classes:message
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Date: Thu, 23 Sep 2004 11:19:04 -0300
Message-ID: <DDD3F807D283B543B3396F7E00A2C7E125F394@exchange.xlnet.net.ar>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: MultiSearcher + Sort
Thread-Index: AcShWM/Yum2uaQCAR8+aXRvW6uwLMwAH5VNg
From: "Wermus Fernando" <fernando.wermus@xlnet.net.ar>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Karthik,
	I have a kind of similar problem. Test the following: when you
create a field, don't use Field(String), instead use Field(String, int)
where int is a constant for the field's type. May be this could help.


-----Mensaje original-----
De: Karthik N S [mailto:karthik@controlnet.co.in]=20
Enviado el: Jueves, 23 de Septiembre de 2004 06:42 a.m.
Para: LUCENE
Asunto: MultiSearcher + Sort



Guys


Apologies........


Am I doing Wrong or is ther a bug with Lucene on Linux  O/s  When using
'
MultiSearcher with Sort '

Please Somebody Reply me ASAP

Tested both Lucene-1.4-final.jar,Lucene-1.4.1.jar

hits =3D multiSearcher.search(query,sortField);


Exception raised  on Linux O/s Only  [ On Windows it Works Perfectly ]


Query String  : (contents:gifts contents:articles) (path:gifts
path:articles) (modified:gifts modified:articles) (filename:gifts
filename:articles) (bookid:gifts bookid:articles) (creation:gifts
creation:articles) (chapNme:gifts chapNme:articles) (itmName:gifts
itmName:articles) (urltext:gifts urltext:articles) (itemCode:gifts
itemCode:articles) (itemPrice:gifts itemPrice:articles) (pageid:gifts
pageid:articles)

--------------- EXCEPTION START-----------------
The Exception Raised file =3D SearchCreateArrayDataFiles.createArray1
Centralized Boolean Factor =3Dfalse
      SYSTEM IS STOPPING COMPILATION
-------------- EXCEPTION END-----------------

<-----------------------------------------------------------------------
----
-------------------------------------------->
java.lang.RuntimeException: no terms in field bookid - cannot determine
sort
type
        at
org.apache.lucene.search.FieldCacheImpl.getAuto(FieldCacheImpl.java:319)
        at
org.apache.lucene.search.FieldSortedHitQueue.comparatorAuto(FieldSortedH
itQu
eue.java:326)
        at
org.apache.lucene.search.FieldSortedHitQueue.getCachedComparator(FieldSo
rted
HitQueue.java:167)
        at
org.apache.lucene.search.FieldSortedHitQueue.<init>(FieldSortedHitQueue.
java
:58)
        at
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:118)
        at
org.apache.lucene.search.MultiSearcher.search(MultiSearcher.java:141)
        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
        at org.apache.lucene.search.Hits.<init>(Hits.java:51)
        at org.apache.lucene.search.Searcher.search(Searcher.java:41)

<-----------------------------------------------------------------------
----
--------------------------------------------->


/*    at
com.controlnet.indexing.search.SearchCreateArrayDataFiles.createArray1(S
earc
hCreateArrayDataFiles.java:263)
  *    at
com.controlnet.indexing.search.SearchCreateArrayDataFiles.main(SearchCre
ateA
rrayDataFiles.java:308)
  */




      WITH WARM REGARDS
      HAVE A NICE DAY
      [ N.S.KARTHIK]




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10400-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 14:17:39 2004
Return-Path: <lucene-user-return-10400-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 9501 invoked from network); 23 Sep 2004 14:17:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 14:17:39 -0000
Received: (qmail 24349 invoked by uid 500); 23 Sep 2004 14:17:26 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 24149 invoked by uid 500); 23 Sep 2004 14:17:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 24135 invoked by uid 99); 23 Sep 2004 14:17:25 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [141.156.69.115] (HELO mail.infosciences.com) (141.156.69.115)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 23 Sep 2004 07:17:23 -0700
Received: from Aviran (unknown [141.156.69.109])
	by mail.infosciences.com (Postfix) with ESMTP id 9F919118308
	for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 10:19:35 -0400 (EDT)
From: "Aviran" <amordo@infosciences.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Questions related to closing the searcher
Date: Thu, 23 Sep 2004 10:15:22 -0400
Message-ID: <002c01c4a177$c3ad6f40$6a00a8c0@Aviran>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
In-Reply-To: <20040922153750.80116.qmail@web53008.mail.yahoo.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

The best way is to use IndexReader's getCurrentVersion() method to check
whether the index has changed. If it has, just get a new Searcher
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/index/IndexRe=
ade
r.html#getCurrentVersion(java.lang.String)

Aviran

-----Original Message-----
From: Edwin Tang [mailto:emttang@yahoo.com]=20
Sent: Wednesday, September 22, 2004 11:38 AM
To: lucene-user@jakarta.apache.org
Subject: Fwd: Questions related to closing the searcher


Hello,

In my testing, it seems like if the searcher (in my
case ParallelMultiSearcher) is not closed, the
searcher will not pick up any new data that has been
added to the index since it was opened. I'm wondering
if this is a correct statement.

Assuming the above is true, I went about closing the
searcher with searcher.close(), then setting both the
searcher and QueryParser to null, then did a
System.gc(). The application will sleep for a set
period of time, then resumes to process another batch
of queries against the index. When the application
resumes, the following method is ran:

    /**
     * Creates a {@link ParallelMultiSearcher} and
{@link QueryParser} if they
     * do not already exist.
     *
     * @return  0 if successful or the objects already
exist; -1 if failed.
     */
    private int getSearcher() {
        Analyzer analyzer;
        IndexSearcher[] searchers;
        int iReturn;
        Vector vector;
        if (logger.isDebugEnabled())
            logger.debug("Entering getSearcher()");
        if (searcher =3D=3D null || parser =3D=3D null) {
            analyzer =3D new
CIAnalyzer(utility.sStopWordsFile);
            try {
                vector =3D new Vector();
                if (utility.bSearchAMX)
                    vector.add(new IndexSearcher(utility.amxIndexDir));
                if (utility.bSearchCOMTEX)
                    vector.add(new =
IndexSearcher(utility.comtexIndexDir));
                if (utility.bSearchDJNW)
                    vector.add(new IndexSearcher(utility.djnwIndexDir));
                if (utility.bSearchMoreover)
                    vector.add(new =
IndexSearcher(utility.moreoverIndexDir));
                searchers =3D (IndexSearcher[]) vector.toArray(new
IndexSearcher[vector.size()]);
                searcher =3D new ParallelMultiSearcher(searchers);
                parser =3D new QueryParser("body",
analyzer);
                iReturn =3D 0;
            } catch (IOException ioe) {
                logger.error("Error creating
searcher", ioe);
                iReturn =3D -1;
            } catch (Exception e) {
                logger.error("Unexpected error while
creating searcher", e);
                iReturn =3D -1;
            }
        } else
            iReturn =3D 0;
        if (logger.isDebugEnabled())
            logger.debug("Exitng getSearcher() with "
+ iReturn);
        return iReturn;
    } // End method getSearcher()

This seems to get me around the problem where the
searcher was not picking up new data from the index.
However, I would run out of memory after 8 iterations
of the application processing a batch query, sleeping,
process another batch query, sleep, etc.

I'm probably missing something completely obvious, but
I'm just not seeing it. Can someone please tell me
what I'm doing wrong?

Thanks,
Ed


	=09
__________________________________
Do you Yahoo!?
Yahoo! Mail - 50x more storage than other providers!
http://promotions.yahoo.com/new_mail

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10401-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 15:02:12 2004
Return-Path: <lucene-user-return-10401-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 41808 invoked from network); 23 Sep 2004 15:02:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 15:02:12 -0000
Received: (qmail 12226 invoked by uid 500); 23 Sep 2004 15:00:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 12092 invoked by uid 500); 23 Sep 2004 15:00:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 11893 invoked by uid 99); 23 Sep 2004 15:00:54 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO main.gmane.org) (80.91.229.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 23 Sep 2004 08:00:53 -0700
Received: from list by main.gmane.org with local (Exim 3.35 #1 (Debian))
	id 1CAV5W-0001w9-00
	for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 17:00:50 +0200
Received: from fw-d-whp.denic.de ([81.91.160.27])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 17:00:50 +0200
Received: from ulim by fw-d-whp.denic.de with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 17:00:50 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: lucene-user@jakarta.apache.org
From: Ulrich Mayring <ulim@denic.de>
Subject: Re: Strange search results with wildcard - Bug?
Date: Thu, 23 Sep 2004 17:00:43 +0200
Lines: 24
Message-ID: <ciuoer$po$1@sea.gmane.org>
References: <ciu3s1$62j$1@sea.gmane.org> <16722.38599.757133.894398@tanto-xipolis.de> <ciu5lq$anj$1@sea.gmane.org> <16722.39958.137117.826624@tanto-xipolis.de> <2ECCD670-0D5F-11D9-B393-000393A564E6@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: fw-d-whp.denic.de
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.2) Gecko/20040803
X-Accept-Language: de-de, en-us, en
In-Reply-To: <2ECCD670-0D5F-11D9-B393-000393A564E6@ehatchersolutions.com>
X-Enigmail-Version: 0.86.0.0
X-Enigmail-Supports: pgp-inline, pgp-mime
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:
> 
> Look at AnalysisDemo referred to here:
> 
>     http://wiki.apache.org/jakarta-lucene/AnalysisParalysis
> 
> Keep in mind that phrase queries do not support wildcards - they are 
> analyzed and any wildcard characters are likely stripped and cause 
> tokens to split.

Ok, I did all that and identified a basic case:

If the user searches for "007001 handle", the MultiFieldQueryParser, 
which searches in the fields "title" and "contents", changes that query to:

(title:007001 +title:handl) (contents:007001 +contents:handl)

So, actually it has nothing to do with the wildcard, the problem comes 
from the + modifier - where does it originate? Obviously, this way I can 
never find a document without the term "handle", but with the number 007001.

Kind regards,

Ulrich


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10402-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 15:09:15 2004
Return-Path: <lucene-user-return-10402-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 47747 invoked from network); 23 Sep 2004 15:09:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 15:09:14 -0000
Received: (qmail 43419 invoked by uid 500); 23 Sep 2004 15:07:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 43360 invoked by uid 500); 23 Sep 2004 15:07:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 43340 invoked by uid 99); 23 Sep 2004 15:07:55 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [200.61.168.200] (HELO gandalf.xlnet.net.ar) (200.61.168.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 23 Sep 2004 08:07:52 -0700
Received: from exchange.xlnet.net.ar (10.0.0.3) by gandalf.xlnet.net.ar (NPlex 5.1.036)
        id 41506AA80000AAFD for lucene-user@jakarta.apache.org; Thu, 23 Sep 2004 12:11:03 -0300
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: about not tokenized fields for ordering.
Content-class: urn:content-classes:message
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Date: Thu, 23 Sep 2004 12:11:03 -0300
Message-ID: <DDD3F807D283B543B3396F7E00A2C7E125F397@exchange.xlnet.net.ar>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: about not tokenized fields for ordering.
Thread-Index: AcSgtLktCiU98V91SrKDBPm6GdBSmwAyjb8Q
From: "Wermus Fernando" <fernando.wermus@xlnet.net.ar>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Luceners,
	I've realized why the snowball doesn't get any hit when searching =
"laziness". I was looking up "laziness" in not tokenized, but stored and =
index fields that I used to sort. But if I looked up other fields I got =
hits using the snowball. My question right now, why can't I get any =
results from fields that I use for ordering in my app? These fields are =
not tokenized, but store and indexed.
=09

-----Mensaje original-----
De: Wermus Fernando [mailto:fernando.wermus@xlnet.net.ar]=20
Enviado el: Mi=E9rcoles, 22 de Septiembre de 2004 11:56 a.m.
Para: lucene-user@jakarta.apache.org
Asunto: about snowball

I have test my app with snowball for english. But I'm doing something
wrong because I can't get any result from hit.
=20
If I index "lazy" with English snowball when I see the word in Luke it
shows "lazy" (I've read that Luke show the file as is). When I do the
search for the word "laziness" the snowball English change for "lazi"
but it doesn't seem to add any * . So I can't get any hit.
=20
If I search for=20
=20
laziness
=20
The result using MultiFieldQueryParser
=20
description:lazi
=20
0 hits
=20
I am supposed to index the word "lazy" as tokenized, unindexed or
something like this to get a hit. I have a similar problem when sorting,
it ask for being untokenized.
=20
What am I doing wrong?
=20
How can I use Luke to look up words using snowball English?
=20
thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10403-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 16:34:35 2004
Return-Path: <lucene-user-return-10403-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 10320 invoked from network); 23 Sep 2004 16:34:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 16:34:34 -0000
Received: (qmail 2933 invoked by uid 500); 23 Sep 2004 16:29:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 2192 invoked by uid 500); 23 Sep 2004 16:29:40 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 1871 invoked by uid 99); 23 Sep 2004 16:29:31 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 23 Sep 2004 09:29:27 -0700
Received: (qmail 44118 invoked by uid 89); 23 Sep 2004 16:29:04 -0000
Received: from unknown (HELO ?192.168.168.81?) (postmaster@cottrell-cutting.net@24.5.163.156)
  by londo.swishmail.com with AES256-SHA encrypted SMTP; 23 Sep 2004 16:29:04 -0000
Message-ID: <4152F94B.3090408@apache.org>
Date: Thu, 23 Sep 2004 09:26:51 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.2) Gecko/20040806
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: problem with get/setBoost of document fields
References: <4151ABEF.2060504@eastbeam.com> <200409222115.10048@danielnaber.de> <4152BED2.4090908@eastbeam.com> <006420E2-0D60-11D9-B393-000393A564E6@ehatchersolutions.com> <4152D729.7080609@eastbeam.com>
In-Reply-To: <4152D729.7080609@eastbeam.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

You can change field boosts without re-indexing.

http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/index/IndexReader.html#setNorm(int,%20java.lang.String,%20byte)

Doug

Bastian Grimm [Eastbeam GmbH] wrote:
> thanks for your reply, eric.
> 
> so i am right that its not possible to change the boost without 
> reindexing all files? thats not good... or is it ok only to change the 
> boosts an optimize the index to take changes effecting the index?
> 
> if not, will i be able to boost those fields in the searcher?
> 
> thanks, bastian
> 
> 
> -----
> 
> The boost is not thrown away, but rather combined with the length 
> normalization factor during indexing.  So while your actual boost value 
> is not stored directly in the index, it is taken into consideration for 
> scoring appropriately.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10404-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 16:42:21 2004
Return-Path: <lucene-user-return-10404-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 17404 invoked from network); 23 Sep 2004 16:42:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 16:42:21 -0000
Received: (qmail 23650 invoked by uid 500); 23 Sep 2004 16:38:17 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 23402 invoked by uid 500); 23 Sep 2004 16:38:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 23294 invoked by uid 99); 23 Sep 2004 16:38:13 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO main.gmane.org) (80.91.229.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 23 Sep 2004 09:38:07 -0700
Received: from list by main.gmane.org with local (Exim 3.35 #1 (Debian))
	id 1CAVup-0006jr-00
	for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 17:53:51 +0200
Received: from fw-d-whp.denic.de ([81.91.160.27])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 17:53:50 +0200
Received: from ulim by fw-d-whp.denic.de with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 17:53:50 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: lucene-user@jakarta.apache.org
From: Ulrich Mayring <ulim@denic.de>
Subject: Re: Strange search results with wildcard - Bug?
Date: Thu, 23 Sep 2004 17:53:42 +0200
Lines: 21
Message-ID: <ciuri6$b08$1@sea.gmane.org>
References: <ciu3s1$62j$1@sea.gmane.org> <16722.38599.757133.894398@tanto-xipolis.de> <ciu5lq$anj$1@sea.gmane.org> <16722.39958.137117.826624@tanto-xipolis.de> <2ECCD670-0D5F-11D9-B393-000393A564E6@ehatchersolutions.com> <ciuoer$po$1@sea.gmane.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: fw-d-whp.denic.de
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.2) Gecko/20040803
X-Accept-Language: de-de, en-us, en
In-Reply-To: <ciuoer$po$1@sea.gmane.org>
X-Enigmail-Version: 0.86.0.0
X-Enigmail-Supports: pgp-inline, pgp-mime
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Ulrich Mayring wrote:
> 
> If the user searches for "007001 handle", the MultiFieldQueryParser, 
> which searches in the fields "title" and "contents", changes that query to:
> 
> (title:007001 +title:handl) (contents:007001 +contents:handl)

Ok, I cleared this up, there was some invisible magic going on in the 
code, sorry for the inconvenience. Anyway:

field1:foo field2:bar AND field3:true

turns into

field1:foo +field2:bar +field3:true


If I lose the "AND" and use a "+" instead, then everything works as 
expected. Now, is this a bug or a feature that I haven't quite grasped? :)

Ulrich


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10405-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 16:59:12 2004
Return-Path: <lucene-user-return-10405-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 34033 invoked from network); 23 Sep 2004 16:59:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 16:59:11 -0000
Received: (qmail 28616 invoked by uid 500); 23 Sep 2004 17:01:07 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 28502 invoked by uid 500); 23 Sep 2004 17:01:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 28352 invoked by uid 99); 23 Sep 2004 17:01:04 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [205.158.62.199] (HELO ws6-3.us4.outblaze.com) (205.158.62.199)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 23 Sep 2004 10:01:03 -0700
Received: (qmail 17759 invoked from network); 23 Sep 2004 15:36:37 -0000
Received: from unknown (HELO ?128.143.135.117?) (erik@hatcher.net@128.143.135.117)
  by ws6-3.us4.outblaze.com with SMTP; 23 Sep 2004 15:36:37 -0000
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <ciuoer$po$1@sea.gmane.org>
References: <ciu3s1$62j$1@sea.gmane.org> <16722.38599.757133.894398@tanto-xipolis.de> <ciu5lq$anj$1@sea.gmane.org> <16722.39958.137117.826624@tanto-xipolis.de> <2ECCD670-0D5F-11D9-B393-000393A564E6@ehatchersolutions.com> <ciuoer$po$1@sea.gmane.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <5EE13C2A-0D76-11D9-B393-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Strange search results with wildcard - Bug?
Date: Thu, 23 Sep 2004 11:36:43 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Sep 23, 2004, at 11:00 AM, Ulrich Mayring wrote:
> Erik Hatcher wrote:
>> Look at AnalysisDemo referred to here:
>>     http://wiki.apache.org/jakarta-lucene/AnalysisParalysis
>> Keep in mind that phrase queries do not support wildcards - they are 
>> analyzed and any wildcard characters are likely stripped and cause 
>> tokens to split.
>
> Ok, I did all that and identified a basic case:
>
> If the user searches for "007001 handle", the MultiFieldQueryParser, 
> which searches in the fields "title" and "contents", changes that 
> query to:
>
> (title:007001 +title:handl) (contents:007001 +contents:handl)
>
> So, actually it has nothing to do with the wildcard, the problem comes 
> from the + modifier - where does it originate? Obviously, this way I 
> can never find a document without the term "handle", but with the 
> number 007001.

How are you using MultiFieldQueryParser?  It's surely coming from that.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10406-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 17:01:58 2004
Return-Path: <lucene-user-return-10406-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 36704 invoked from network); 23 Sep 2004 17:01:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 17:01:58 -0000
Received: (qmail 37320 invoked by uid 500); 23 Sep 2004 17:04:01 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 37263 invoked by uid 500); 23 Sep 2004 17:04:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 37244 invoked by uid 99); 23 Sep 2004 17:04:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 23 Sep 2004 10:03:58 -0700
Received: from [192.168.101.238] ([213.80.34.50])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id i8NH3wb03440
	for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 12:03:58 -0500
Message-ID: <41530200.4040403@getopt.org>
Date: Thu, 23 Sep 2004 19:04:00 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040803
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Clustering lucene's results
References: <BAY8-F35nXAwIvOTDlT00036f91@hotmail.com> <4152D0EF.1050404@cs.put.poznan.pl>
In-Reply-To: <4152D0EF.1050404@cs.put.poznan.pl>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Dawid Weiss wrote:
> Hi William,
> 
> No, I don't have examples because I never used Lucene directly. If you 
> provide me with a sample index and an API that executes a query on this 
> index (I need document titles, summaries, or snippets and an anchor 
> (identifier), can be an URL).

Hi Dawid :-)

I believe the approach to this component should be that you first 
initialize it by reading a mapping of Lucene index field names to 
"logical" names (metadata) like title, url, body, etc. The reason is 
that each index uses its own metadata schema, i.e. in Lucene-speak, the 
field names.

Moreover, when you execute a query you get just a document id plus its 
score. It's up to you to build a snippet. There is a code in the 
jakarta-lucene-sandbox CVS repo. (highlighter) to create snippets from 
the query and the hit list, take a look at this...

> 
> Send me such a snippet and I'll try to write the integration code with 
> Lucene. It is only a matter of writing a simple InputComponent instance 
> and this is really trivial (see Nutch's plugin code).

The basic usage scenario is that you open the IndexReader (either using 
directory name as a String or a Directory instance), and then create a 
Query instance, usually using QueryParser, and finally you search using 
IndexSearcher. You get a list of Hits, which you can use to get scores, 
and the contents of the documents. Take a look at the IndexFiles and 
SearchFiles classes in org.apache.lucene.demo package (under /src/demo).

-- 
Best regards,
Andrzej Bialecki

-------------------------------------------------
Software Architect, System Integration Specialist
CEN/ISSS EC Workshop, ECIMF project chair
EU FP6 E-Commerce Expert/Evaluator
-------------------------------------------------
FreeBSD developer (http://www.freebsd.org)


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10407-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 17:06:42 2004
Return-Path: <lucene-user-return-10407-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 40375 invoked from network); 23 Sep 2004 17:06:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 17:06:42 -0000
Received: (qmail 49316 invoked by uid 500); 23 Sep 2004 17:08:40 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 49277 invoked by uid 500); 23 Sep 2004 17:08:39 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 49262 invoked by uid 99); 23 Sep 2004 17:08:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [209.10.150.72] (HELO web02-nyc.clicvu.com) (209.10.150.72)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 23 Sep 2004 10:08:37 -0700
Received: from [192.168.0.72] by web02-nyc.clicvu.com
          (Post.Office MTA v3.5.3 release 223 ID# 0-64039U1000L100S0V35)
          with SMTP id com for <lucene-user@jakarta.apache.org>;
          Thu, 23 Sep 2004 12:06:06 -0400
Received: from giant-pandas.net (localhost [127.0.0.1])
	by host21.the-web-host.com (8.12.10/8.12.9) with ESMTP id i8NGAEDA012558
	for <*Email Address Suppressed*>; Thu, 23 Sep 2004 12:10:14 -0400
From: roy-lucene-user@xemaps.com
To: lucene-user@jakarta.apache.org                                                                                                                                                                                                                                 
Subject: Re: demo HTML parser question
Date: Thu, 23 Sep 2004 11:10:14 -0500
Message-Id: <20040923161014.M5760@giant-pandas.net>
In-Reply-To: <6.0.1.1.2.20040922223354.03fffb18@fast.synernet.com>
References: <6.0.1.1.2.20040922223354.03fffb18@fast.synernet.com>
X-Mailer: Open WebMail 1.81 20021127
X-OriginatingIP: 209.21.98.168 (roy)
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Fred,

We were originally attempting to use the demo html parser (Lucene 1.2), but as
you know, its for a demo.  I think its threaded to optimize on time, to allow
the calling thread to grab the title or top message even though its not done
parsing the entire html document.  That's just a guess, I would love to hear
from others about this.  Anyway, since it is a separate thread, a token error
could kill it and there is no way for the calling thread to know about it.

We had to create our own html parser since we only cared about grabbing the
entire text from the html document and also we wanted to avoid the extra
thread.  We also do a lot of "SKIP"ping for minimal EOF errors (html documents
in email almost never follow standards).  For your html needs, you might want
to check out other JavaCC HTML parsers from the JavaCC web site.

Roy.

On Wed, 22 Sep 2004 22:42:55 -0400, Fred Toth wrote
> Hi,
> 
> I've been working with the HTML parser demo that comes with
> Lucene and I'm trying to understand why it's multi-threaded,
> and, more importantly, how to exit gracefully on errors.
> 
> I've discovered if I throw an exception in the front-end static
> code (main(), etc.), the JVM hangs instead of exiting. Presumably
> this is because there are threads hanging around doing something.
> But I'm not sure what!
> 
> Any pointers? I just want to exit gracefully on an error such as
> a required meta tag is missing or similar.
> 
> Thanks,
> 
> Fred
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10408-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 17:13:01 2004
Return-Path: <lucene-user-return-10408-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 47050 invoked from network); 23 Sep 2004 17:13:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 17:13:00 -0000
Received: (qmail 67435 invoked by uid 500); 23 Sep 2004 17:14:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 67186 invoked by uid 500); 23 Sep 2004 17:14:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 67041 invoked by uid 99); 23 Sep 2004 17:14:42 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [209.10.150.71] (HELO web01-nyc.clicvu.com) (209.10.150.71)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 23 Sep 2004 10:14:41 -0700
Received: from [192.168.0.71] by web01-nyc.clicvu.com
          (Post.Office MTA v3.5.3 release 223 ID# 0-64039U1000L100S0V35)
          with SMTP id com for <lucene-user@jakarta.apache.org>;
          Thu, 23 Sep 2004 12:11:07 -0400
Received: from giant-pandas.net (localhost [127.0.0.1])
	by host21.the-web-host.com (8.12.10/8.12.9) with ESMTP id i8NGDSDA013957
	for <*Email Address Suppressed*>; Thu, 23 Sep 2004 12:13:28 -0400
From: roy-lucene-user@xemaps.com
To: lucene-user@jakarta.apache.org                                                                                                                                                                                                                                 
Subject: compiling 1.4 source
Date: Thu, 23 Sep 2004 11:13:28 -0500
Message-Id: <20040923161328.M97734@giant-pandas.net>
In-Reply-To: <DDD3F807D283B543B3396F7E00A2C7E125F394@exchange.xlnet.net.ar>
References: <DDD3F807D283B543B3396F7E00A2C7E125F394@exchange.xlnet.net.ar>
X-Mailer: Open WebMail 1.81 20021127
X-OriginatingIP: 209.21.98.168 (roy)
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi guys,

So we started upgrading to 1.4 and we need to add some of our own custom code.
 After compiling with ant, I noticed that the 1.4 ant script builds a jar
called lucene-1.5-rc1-dev.jar, not lucene-1.4-final.jar.  I'm pretty sure I
did not download the wrong source.  Is this just a wrong name in the
properties or does the source code actually contain lucene 1.5 rc1 code?

Roy.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10409-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 17:22:00 2004
Return-Path: <lucene-user-return-10409-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 54411 invoked from network); 23 Sep 2004 17:22:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 17:22:00 -0000
Received: (qmail 90670 invoked by uid 500); 23 Sep 2004 17:24:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 90567 invoked by uid 500); 23 Sep 2004 17:24:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 90541 invoked by uid 99); 23 Sep 2004 17:24:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [205.158.62.197] (HELO ws6-2.us4.outblaze.com) (205.158.62.197)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 23 Sep 2004 10:24:01 -0700
Received: (qmail 19644 invoked from network); 23 Sep 2004 17:23:46 -0000
Received: from unknown (HELO ?128.143.135.117?) (erik@hatcher.net@128.143.135.117)
  by ws6-2.us4.outblaze.com with SMTP; 23 Sep 2004 17:23:46 -0000
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <20040923161328.M97734@giant-pandas.net>
References: <DDD3F807D283B543B3396F7E00A2C7E125F394@exchange.xlnet.net.ar> <20040923161328.M97734@giant-pandas.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <5B97CDC8-0D85-11D9-B393-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: compiling 1.4 source
Date: Thu, 23 Sep 2004 13:24:00 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

If you obtained the 1.4.1 source distribution, then  you're fine and 
its simply an issue with the properties.  We keep the properties set to 
the _next_ version of Lucene (or as a beta/rc version label) to avoid 
the CVS HEAD codebase from building as a release label when it is very 
likely not the same.

If you obtained the source from CVS HEAD, you're using code that has 
been greatly modified since the 1.4.1 release.

	Erik


On Sep 23, 2004, at 12:13 PM, roy-lucene-user@xemaps.com wrote:

> Hi guys,
>
> So we started upgrading to 1.4 and we need to add some of our own 
> custom code.
>  After compiling with ant, I noticed that the 1.4 ant script builds a 
> jar
> called lucene-1.5-rc1-dev.jar, not lucene-1.4-final.jar.  I'm pretty 
> sure I
> did not download the wrong source.  Is this just a wrong name in the
> properties or does the source code actually contain lucene 1.5 rc1 
> code?
>
> Roy.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10410-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 17:36:59 2004
Return-Path: <lucene-user-return-10410-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 67053 invoked from network); 23 Sep 2004 17:36:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 17:36:59 -0000
Received: (qmail 18490 invoked by uid 500); 23 Sep 2004 17:38:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 18334 invoked by uid 500); 23 Sep 2004 17:38:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 18197 invoked by uid 99); 23 Sep 2004 17:38:40 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [150.254.30.30] (HELO libra.cs.put.poznan.pl) (150.254.30.30)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 23 Sep 2004 10:38:37 -0700
Received: from libra.cs.put.poznan.pl (localhost [127.0.0.1])
	by libra (Postfix on VMS) with SMTP id 43235F1E
	for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 19:38:34 +0200 (CEST)
Received: from cs.put.poznan.pl (bdd163.neoplus.adsl.tpnet.pl [83.27.245.163])
	by libra.cs.put.poznan.pl (Postfix on VMS) with ESMTP id DA6D6F0D
	for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 19:38:33 +0200 (CEST)
Message-ID: <41530A1B.2000608@cs.put.poznan.pl>
Date: Thu, 23 Sep 2004 19:38:35 +0200
From: Dawid Weiss <dawid.weiss@cs.put.poznan.pl>
User-Agent: Mozilla Thunderbird 0.5b (Windows/20040204)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Clustering lucene's results
References: <BAY8-F35nXAwIvOTDlT00036f91@hotmail.com> <4152D0EF.1050404@cs.put.poznan.pl> <41530200.4040403@getopt.org>
In-Reply-To: <41530200.4040403@getopt.org>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Andrzej :)

Yep, ok, I'll take a look at it. After I come back from abroad (next 
week). I just wanted to save myself some time and have an already 
written code that fetches the information we need for clustering; you 
know what I mean, I'm sure. But I'll start from scratch when I get back.

D.

Andrzej Bialecki wrote:

> Dawid Weiss wrote:
> 
>> Hi William,
>>
>> No, I don't have examples because I never used Lucene directly. If you 
>> provide me with a sample index and an API that executes a query on 
>> this index (I need document titles, summaries, or snippets and an 
>> anchor (identifier), can be an URL).
> 
> 
> Hi Dawid :-)
> 
> I believe the approach to this component should be that you first 
> initialize it by reading a mapping of Lucene index field names to 
> "logical" names (metadata) like title, url, body, etc. The reason is 
> that each index uses its own metadata schema, i.e. in Lucene-speak, the 
> field names.
> 
> Moreover, when you execute a query you get just a document id plus its 
> score. It's up to you to build a snippet. There is a code in the 
> jakarta-lucene-sandbox CVS repo. (highlighter) to create snippets from 
> the query and the hit list, take a look at this...
> 
>>
>> Send me such a snippet and I'll try to write the integration code with 
>> Lucene. It is only a matter of writing a simple InputComponent 
>> instance and this is really trivial (see Nutch's plugin code).
> 
> 
> The basic usage scenario is that you open the IndexReader (either using 
> directory name as a String or a Directory instance), and then create a 
> Query instance, usually using QueryParser, and finally you search using 
> IndexSearcher. You get a list of Hits, which you can use to get scores, 
> and the contents of the documents. Take a look at the IndexFiles and 
> SearchFiles classes in org.apache.lucene.demo package (under /src/demo).
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10411-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 17:42:43 2004
Return-Path: <lucene-user-return-10411-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 71400 invoked from network); 23 Sep 2004 17:42:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 17:42:42 -0000
Received: (qmail 35075 invoked by uid 500); 23 Sep 2004 17:44:31 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 34942 invoked by uid 500); 23 Sep 2004 17:44:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 34927 invoked by uid 99); 23 Sep 2004 17:44:30 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.158.35.211] (HELO psmtp.com) (12.158.35.211)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 23 Sep 2004 10:44:29 -0700
Received: from source ([139.56.4.14]) by exprod6ob1.obsmtp.com ([12.158.35.250]) with SMTP;
	Thu, 23 Sep 2004 10:44:22 PDT
Received: from triangulum1.broadvision.com (triangulum1.broadvision.com [10.10.102.100])
	by nebula3.broadvision.com (8.10.2+Sun/8.10.2) with ESMTP id i8NHeuW21944
	for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 10:40:56 -0700 (PDT)
Received: from rw-gw-01.BroadVision.com (localhost [127.0.0.1])
	by triangulum1.broadvision.com (8.9.3+Sun/8.9.3) with ESMTP id KAA27102
	for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 10:45:35 -0700 (PDT)
Received: by rw-gw-01.broadvision.com with Internet Mail Service (5.5.2655.55)
	id <TBR6H4GV>; Thu, 23 Sep 2004 10:44:22 -0700
Message-ID: <6B68C05FFDF8D540BBC67FE6CE864C32038AF3@rw-msg-02.BROADVISION.COM>
From: "Zhang, Lisheng" <Lisheng.Zhang@broadvision.com>
To: "'lucene-user@jakarta.apache.org'" <lucene-user@jakarta.apache.org>
Cc: "Chang, Daniel" <Daniel.Chang@broadvision.com>,
   "Tam, Donald"
	 <Donald.Tam@broadvision.com>
Subject: Power Point Processing
Date: Thu, 23 Sep 2004 10:44:13 -0700
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

Does anyone know a good tool to processing MS Power Point
file (*.ppt) into plain text so we can use lucene to index it?

I looked at jakarta/POI, and only see Word and Excel documents
can be processed, some JavaDoc pages mentioned ppt, but
status is not clear to me?

Thanks very much for helps, Lisheng

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10412-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 17:50:20 2004
Return-Path: <lucene-user-return-10412-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 78273 invoked from network); 23 Sep 2004 17:50:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 17:50:19 -0000
Received: (qmail 54732 invoked by uid 500); 23 Sep 2004 17:52:21 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 54640 invoked by uid 500); 23 Sep 2004 17:52:20 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 54619 invoked by uid 99); 23 Sep 2004 17:52:19 -0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.4.27.31] (HELO hotmail.com) (64.4.27.31)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 23 Sep 2004 10:52:17 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Thu, 23 Sep 2004 10:52:15 -0700
Received: from 200.214.14.1 by by8fd.bay8.hotmail.msn.com with HTTP;
	Thu, 23 Sep 2004 17:51:45 GMT
X-Originating-IP: [200.214.14.1]
X-Originating-Email: [william_wws@hotmail.com]
X-Sender: william_wws@hotmail.com
From: "William W" <william_wws@hotmail.com>
To: lucene-user@jakarta.apache.org
Bcc: 
Subject: Re: Clustering lucene's results
Date: Thu, 23 Sep 2004 17:51:45 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
Message-ID: <BAY8-F313IhA1qfT7eE00049b4a@hotmail.com>
X-OriginalArrivalTime: 23 Sep 2004 17:52:15.0278 (UTC) FILETIME=[0FA3DCE0:01C4A196]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Hi Dawid,
The demos (under /src/demo) are very good. They have the basic usage 
scenario.
Thanks Andrzej.
William.


>Dawid Weiss wrote:
>>Hi William,
>>
>>No, I don't have examples because I never used Lucene directly. If you 
>>provide me with a sample index and an API that executes a query on this 
>>index (I need document titles, summaries, or snippets and an anchor 
>>(identifier), can be an URL).
>
>Hi Dawid :-)
>
>I believe the approach to this component should be that you first 
>initialize it by reading a mapping of Lucene index field names to "logical" 
>names (metadata) like title, url, body, etc. The reason is that each index 
>uses its own metadata schema, i.e. in Lucene-speak, the field names.
>
>Moreover, when you execute a query you get just a document id plus its 
>score. It's up to you to build a snippet. There is a code in the 
>jakarta-lucene-sandbox CVS repo. (highlighter) to create snippets from the 
>query and the hit list, take a look at this...
>
>>
>>Send me such a snippet and I'll try to write the integration code with 
>>Lucene. It is only a matter of writing a simple InputComponent instance 
>>and this is really trivial (see Nutch's plugin code).
>
>The basic usage scenario is that you open the IndexReader (either using 
>directory name as a String or a Directory instance), and then create a 
>Query instance, usually using QueryParser, and finally you search using 
>IndexSearcher. You get a list of Hits, which you can use to get scores, and 
>the contents of the documents. Take a look at the IndexFiles and 
>SearchFiles classes in org.apache.lucene.demo package (under /src/demo).
>
>--
>Best regards,
>Andrzej Bialecki
>
>-------------------------------------------------
>Software Architect, System Integration Specialist
>CEN/ISSS EC Workshop, ECIMF project chair
>EU FP6 E-Commerce Expert/Evaluator
>-------------------------------------------------
>FreeBSD developer (http://www.freebsd.org)
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>

_________________________________________________________________
Get ready for school! Find articles, homework help and more in the Back to 
School Guide! http://special.msn.com/network/04backtoschool.armx


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10413-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 17:53:43 2004
Return-Path: <lucene-user-return-10413-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 80647 invoked from network); 23 Sep 2004 17:53:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 17:53:43 -0000
Received: (qmail 63423 invoked by uid 500); 23 Sep 2004 17:55:45 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 63313 invoked by uid 500); 23 Sep 2004 17:55:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 63299 invoked by uid 99); 23 Sep 2004 17:55:44 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 23 Sep 2004 10:55:42 -0700
Received: (qmail 80421 invoked by uid 89); 23 Sep 2004 17:55:39 -0000
Received: from unknown (HELO ?192.168.168.81?) (postmaster@cottrell-cutting.net@24.5.163.156)
  by londo.swishmail.com with AES256-SHA encrypted SMTP; 23 Sep 2004 17:55:39 -0000
Message-ID: <41530D96.9000902@apache.org>
Date: Thu, 23 Sep 2004 10:53:26 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.2) Gecko/20040806
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: demo HTML parser question
References: <6.0.1.1.2.20040922223354.03fffb18@fast.synernet.com> <20040923161014.M5760@giant-pandas.net>
In-Reply-To: <20040923161014.M5760@giant-pandas.net>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

roy-lucene-user@xemaps.com wrote:
> We were originally attempting to use the demo html parser (Lucene 1.2), but as
> you know, its for a demo.  I think its threaded to optimize on time, to allow
> the calling thread to grab the title or top message even though its not done
> parsing the entire html document.

That's almost right.  I originally wrote it that way to avoid having to 
ever buffer the entire text of the document.  The document is indexed 
while it is parsed.  But, as observed, this has lots of problems and was 
probably a bad idea.

Could someone provide a patch that removes the multi-threading?  We'd 
simply use a StringBuffer in HTMLParser.jj to collect the text.  Calls 
to pipeOut.write() would be replaced with text.append().  Then have the 
HTMLParser's constructor parse the page before returning, rather than 
spawn a thread, and getReader() would return a StringReader.  The public 
API of HTMLParser need not change at all and lots of complex threading 
code would be thrown away.  Anyone interested in coding this?

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10414-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 17:59:56 2004
Return-Path: <lucene-user-return-10414-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 85693 invoked from network); 23 Sep 2004 17:59:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 17:59:56 -0000
Received: (qmail 70369 invoked by uid 500); 23 Sep 2004 18:02:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 70338 invoked by uid 500); 23 Sep 2004 18:02:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 70321 invoked by uid 99); 23 Sep 2004 18:01:59 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [150.254.30.30] (HELO libra.cs.put.poznan.pl) (150.254.30.30)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 23 Sep 2004 11:01:56 -0700
Received: from libra.cs.put.poznan.pl (localhost [127.0.0.1])
	by libra (Postfix on VMS) with SMTP id E785BF24
	for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 20:01:54 +0200 (CEST)
Received: from cs.put.poznan.pl (bdd163.neoplus.adsl.tpnet.pl [83.27.245.163])
	by libra.cs.put.poznan.pl (Postfix on VMS) with ESMTP id 770F2F1E
	for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 20:01:54 +0200 (CEST)
Message-ID: <41530F93.5000402@cs.put.poznan.pl>
Date: Thu, 23 Sep 2004 20:01:55 +0200
From: Dawid Weiss <dawid.weiss@cs.put.poznan.pl>
User-Agent: Mozilla Thunderbird 0.5b (Windows/20040204)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Clustering lucene's results
References: <BAY8-F313IhA1qfT7eE00049b4a@hotmail.com>
In-Reply-To: <BAY8-F313IhA1qfT7eE00049b4a@hotmail.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


yeah... I know there have to be demos... I tried to be lazy, you know :)

Anyway, as I told Andrzej -- I'll take a look at it (and with a 
pleasure) after I come back. i don't think the delay will matter much. 
And if it does, ask Andrzej -- he has excellent experience with both 
projects -- he's just very shy by nature and doesn't talk much, hehe.

D.

William W wrote:

> 
> Hi Dawid,
> The demos (under /src/demo) are very good. They have the basic usage 
> scenario.
> Thanks Andrzej.
> William.
> 
> 
>> Dawid Weiss wrote:
>>
>>> Hi William,
>>>
>>> No, I don't have examples because I never used Lucene directly. If 
>>> you provide me with a sample index and an API that executes a query 
>>> on this index (I need document titles, summaries, or snippets and an 
>>> anchor (identifier), can be an URL).
>>
>>
>> Hi Dawid :-)
>>
>> I believe the approach to this component should be that you first 
>> initialize it by reading a mapping of Lucene index field names to 
>> "logical" names (metadata) like title, url, body, etc. The reason is 
>> that each index uses its own metadata schema, i.e. in Lucene-speak, 
>> the field names.
>>
>> Moreover, when you execute a query you get just a document id plus its 
>> score. It's up to you to build a snippet. There is a code in the 
>> jakarta-lucene-sandbox CVS repo. (highlighter) to create snippets from 
>> the query and the hit list, take a look at this...
>>
>>>
>>> Send me such a snippet and I'll try to write the integration code 
>>> with Lucene. It is only a matter of writing a simple InputComponent 
>>> instance and this is really trivial (see Nutch's plugin code).
>>
>>
>> The basic usage scenario is that you open the IndexReader (either 
>> using directory name as a String or a Directory instance), and then 
>> create a Query instance, usually using QueryParser, and finally you 
>> search using IndexSearcher. You get a list of Hits, which you can use 
>> to get scores, and the contents of the documents. Take a look at the 
>> IndexFiles and SearchFiles classes in org.apache.lucene.demo package 
>> (under /src/demo).
>>
>> -- 
>> Best regards,
>> Andrzej Bialecki
>>
>> -------------------------------------------------
>> Software Architect, System Integration Specialist
>> CEN/ISSS EC Workshop, ECIMF project chair
>> EU FP6 E-Commerce Expert/Evaluator
>> -------------------------------------------------
>> FreeBSD developer (http://www.freebsd.org)
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
> 
> _________________________________________________________________
> Get ready for school! Find articles, homework help and more in the Back 
> to School Guide! http://special.msn.com/network/04backtoschool.armx
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10415-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 18:39:31 2004
Return-Path: <lucene-user-return-10415-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 12697 invoked from network); 23 Sep 2004 18:39:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 18:39:31 -0000
Received: (qmail 63383 invoked by uid 500); 23 Sep 2004 18:41:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 63239 invoked by uid 500); 23 Sep 2004 18:41:31 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 63216 invoked by uid 99); 23 Sep 2004 18:41:31 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.25.134.20] (HELO mailout08.sul.t-online.com) (194.25.134.20)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 23 Sep 2004 11:41:28 -0700
Received: from fwd04.aul.t-online.de 
	by mailout08.sul.t-online.com with smtp 
	id 1CAYWz-0006RB-00; Thu, 23 Sep 2004 20:41:25 +0200
Received: from pD9EBF4C3.dip.t-dialin.net (SyLbkyZ1gevMrIBv2spp6AZHxGM9IxSEaQrAjDTQO-fHTTrUSQ-+Qd@[217.235.244.195]) by fmrl04.sul.t-online.com
	with esmtp id 1CAYWt-2CyYSG0; Thu, 23 Sep 2004 20:41:19 +0200
From: Daniel Naber <daniel.naber@t-online.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Strange search results with wildcard - Bug?
Date: Thu, 23 Sep 2004 20:44:20 +0200
User-Agent: KMail/1.7
References: <ciu3s1$62j$1@sea.gmane.org> <ciuoer$po$1@sea.gmane.org> <ciuri6$b08$1@sea.gmane.org>
In-Reply-To: <ciuri6$b08$1@sea.gmane.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200409232044.21633@danielnaber.de>
X-ID: SyLbkyZ1gevMrIBv2spp6AZHxGM9IxSEaQrAjDTQO-fHTTrUSQ-+Qd@t-dialin.net
X-TOI-MSGID: 1ed39ace-62b6-4b74-a187-cd3422175da5
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Thursday 23 September 2004 17:53, Ulrich Mayring wrote:

> field1:foo field2:bar AND field3:true
>
> turns into
>
> field1:foo +field2:bar +field3:true

AND always refers to the terms on both sides, +/- only refers to the term 
on the right. So "a AND b" -> "+a +b" is correct.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10416-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 19:47:00 2004
Return-Path: <lucene-user-return-10416-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 41937 invoked from network); 23 Sep 2004 19:47:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 19:47:00 -0000
Received: (qmail 80722 invoked by uid 500); 23 Sep 2004 19:49:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 80676 invoked by uid 500); 23 Sep 2004 19:49:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 80663 invoked by uid 99); 23 Sep 2004 19:49:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [209.10.150.71] (HELO web01-nyc.clicvu.com) (209.10.150.71)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 23 Sep 2004 12:48:59 -0700
Received: from [192.168.0.71] by web01-nyc.clicvu.com
          (Post.Office MTA v3.5.3 release 223 ID# 0-64039U1000L100S0V35)
          with SMTP id com for <lucene-user@jakarta.apache.org>;
          Thu, 23 Sep 2004 15:46:36 -0400
Received: from giant-pandas.net (localhost [127.0.0.1])
	by host21.the-web-host.com (8.12.10/8.12.9) with ESMTP id i8NJmuDA022595
	for <*Email Address Suppressed*>; Thu, 23 Sep 2004 15:48:56 -0400
From: roy-lucene-user@xemaps.com
To: lucene-user@jakarta.apache.org                                                                                                                                                                                                                                 
Subject: Re: demo HTML parser question
Date: Thu, 23 Sep 2004 14:48:56 -0500
Message-Id: <20040923194856.M1131@giant-pandas.net>
In-Reply-To: <41530D96.9000902@apache.org>
References: <6.0.1.1.2.20040922223354.03fffb18@fast.synernet.com> <20040923161014.M5760@giant-pandas.net> <41530D96.9000902@apache.org>
X-Mailer: Open WebMail 1.81 20021127
X-OriginatingIP: 209.21.98.168 (roy)
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Thu, 23 Sep 2004 10:53:26 -0700, Doug Cutting wrote
> roy-lucene-user@xemaps.com wrote:
> > We were originally attempting to use the demo html parser (Lucene 1.2), but as
> > you know, its for a demo.  I think its threaded to optimize on time, to allow
> > the calling thread to grab the title or top message even though its not done
> > parsing the entire html document.
> 
> That's almost right.  I originally wrote it that way to avoid having 
> to ever buffer the entire text of the document.  The document is 
> indexed while it is parsed.  But, as observed, this has lots of 
> problems and was probably a bad idea.
> 
> Could someone provide a patch that removes the multi-threading?  
> We'd simply use a StringBuffer in HTMLParser.jj to collect the text. 
>  Calls to pipeOut.write() would be replaced with text.append().  
> Then have the HTMLParser's constructor parse the page before 
> returning, rather than spawn a thread, and getReader() would return 
> a StringReader.  The public API of HTMLParser need not change at all 
> and lots of complex threading code would be thrown away.  Anyone 
> interested in coding this?

While we're on the subject...

When using the HTMLParser I tend to get a lot of token manager errors that
basically kill the thread (usually unexpected EOF).  Even if we were to remove
the multi-threading of the HTMLParser, these token manager errors would pretty
much kill the calling app (Error vs Exception).  Any idea how to get around this?

Perhaps this question really belongs on the javacc list?

Roy.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10417-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 21:10:29 2004
Return-Path: <lucene-user-return-10417-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 89839 invoked from network); 23 Sep 2004 21:10:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 21:10:29 -0000
Received: (qmail 55243 invoked by uid 500); 23 Sep 2004 21:11:37 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 55051 invoked by uid 500); 23 Sep 2004 21:11:31 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 54894 invoked by uid 99); 23 Sep 2004 21:11:30 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [65.84.113.134] (HELO mail.dessci.com) (65.84.113.134)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 23 Sep 2004 14:11:28 -0700
Received: from euclid.dessci ([IP=192.168.254.1]) by eSafe SMTP Relay 1095826939; Thu Sep 23 07:10:59 2004
Received: by euclid.dessci with Internet Mail Service (5.5.2656.59) id <TJGKQ9XW>; Thu, 23 Sep 2004 14:11:26 -0700
Message-ID: <46566A3075DDD311969100E0811031EC06138C53@euclid.dessci>
From: Greg Langmead <gregl@dessci.com>
To: lucene-user@jakarta.apache.org
Subject: Document contents split among different Fields
Date: Thu, 23 Sep 2004 14:11:16 -0700
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2656.59)
Content-Type: text/plain
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I am working on extending Lucene to support documents with special islands
of an XML language, and I want to index the islands differently from the
text.  My current plan is to break the document's contents into two Fields,
one with all the text and one with all the special islands, and use a
different Analyzer on each Field.

In heading down this road, I realized that this approach breaks the whole
model of Token as it supports highlighting.  Token seems designed to store
offsets within a given Field, so if you break a document up into pieces, the
offsets are meaningless in terms of the original source document.

Am I right in saying that the design of Token's support for highlighting
really only supports having the entire document stored as one monolithic
"contents" Field?  Has anyone tackled indexing multiple content Fields
before that could shed some light?

Thanks,
Greg Langmead
Design Science, Inc., "How Science Communicates"
http://www.dessci.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10418-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 21:23:43 2004
Return-Path: <lucene-user-return-10418-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 96771 invoked from network); 23 Sep 2004 21:23:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 21:23:43 -0000
Received: (qmail 78145 invoked by uid 500); 23 Sep 2004 21:25:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 77930 invoked by uid 500); 23 Sep 2004 21:25:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 77903 invoked by uid 99); 23 Sep 2004 21:25:44 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 23 Sep 2004 14:25:43 -0700
Received: (qmail 85935 invoked by uid 89); 23 Sep 2004 21:25:41 -0000
Received: from unknown (HELO ?192.168.168.81?) (postmaster@cottrell-cutting.net@24.5.163.156)
  by londo.swishmail.com with AES256-SHA encrypted SMTP; 23 Sep 2004 21:25:41 -0000
Message-ID: <41533ECF.5020907@apache.org>
Date: Thu, 23 Sep 2004 14:23:27 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.2) Gecko/20040806
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Document contents split among different Fields
References: <46566A3075DDD311969100E0811031EC06138C53@euclid.dessci>
In-Reply-To: <46566A3075DDD311969100E0811031EC06138C53@euclid.dessci>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Greg Langmead wrote:
> Am I right in saying that the design of Token's support for highlighting
> really only supports having the entire document stored as one monolithic
> "contents" Field?

No, I don't think so.

> Has anyone tackled indexing multiple content Fields
> before that could shed some light?

Do you need highlights from all fields?  If so, then you can use:

   TextFragment[] getBestTextFragments(TokenStream, ...);

with a TokenStream for each field, then select the highest scoring 
fragments across all fields.  Would that work for you?

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10419-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 21:58:12 2004
Return-Path: <lucene-user-return-10419-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 14289 invoked from network); 23 Sep 2004 21:58:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 21:58:12 -0000
Received: (qmail 36223 invoked by uid 500); 23 Sep 2004 22:00:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 36100 invoked by uid 500); 23 Sep 2004 22:00:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 36086 invoked by uid 99); 23 Sep 2004 22:00:12 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [65.84.113.134] (HELO mail.dessci.com) (65.84.113.134)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 23 Sep 2004 15:00:11 -0700
Received: from euclid.dessci ([IP=192.168.254.1]) by eSafe SMTP Relay 1095826939; Thu Sep 23 07:59:36 2004
Received: by euclid.dessci with Internet Mail Service (5.5.2656.59) id <TJGKQ98S>; Thu, 23 Sep 2004 15:00:09 -0700
Message-ID: <46566A3075DDD311969100E0811031EC06138C54@euclid.dessci>
From: Greg Langmead <gregl@dessci.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: RE: Document contents split among different Fields
Date: Thu, 23 Sep 2004 15:00:07 -0700
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2656.59)
Content-Type: text/plain
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Doug Cutting wrote:
> Do you need highlights from all fields?  If so, then you can use:
> 
>    TextFragment[] getBestTextFragments(TokenStream, ...);
> 
> with a TokenStream for each field, then select the highest scoring 
> fragments across all fields.  Would that work for you?

Thanks for the reply.  I can't find code like this in the lucene or
lucene-demo packages -- is this something implemented, or did you mean it as
an example?

Once I get a text fragment, are you proposing using it to do a secondary
search within the source document, to match the fragment?

I would like to do highlighting on content from either of my Fields, but I
think that even if I didn't I'd have the same problem, because I'll have
punched holes in the text Field and the positional data within the Field no
longer reflects the position in the source.

I think that if I want to pick the document apart into pieces like this,
then I need to do some work to restore global positional data, by
squirreling away the size of the holes I punch (the size of the XML islands,
from the text Field's point of view, and the size of the text runs, from the
island Field's point of view).  If I store a special textual escape within
the Field data that records the length of each gap, then I can read those
escapes when Tokenizing the Field and add the number stored therein to the
Token offset, restoring the global positional data.  Does that make sense?
I'm concerned this does violence to Lucene's model, which I've only been
studying for a couple of weeks now.

Greg

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10420-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 23 22:57:19 2004
Return-Path: <lucene-user-return-10420-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 33362 invoked from network); 23 Sep 2004 22:57:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Sep 2004 22:57:19 -0000
Received: (qmail 94497 invoked by uid 500); 23 Sep 2004 22:59:21 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 94383 invoked by uid 500); 23 Sep 2004 22:59:20 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 94363 invoked by uid 99); 23 Sep 2004 22:59:19 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of erik@hatcher.net designates 208.36.123.35 as permitted sender)
Received: from [208.36.123.35] (HELO ws7-6.us4.outblaze.com) (208.36.123.35)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 23 Sep 2004 15:59:17 -0700
Received: (qmail 15787 invoked from network); 23 Sep 2004 22:59:15 -0000
Received: from unknown (HELO ?192.168.1.104?) (erik@hatcher.net@68.169.41.169)
  by ws7-6.us4.outblaze.com with SMTP; 23 Sep 2004 22:59:15 -0000
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <46566A3075DDD311969100E0811031EC06138C54@euclid.dessci>
References: <46566A3075DDD311969100E0811031EC06138C54@euclid.dessci>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <3087A8FC-0DB4-11D9-868F-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Document contents split among different Fields
Date: Thu, 23 Sep 2004 18:59:14 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Sep 23, 2004, at 6:00 PM, Greg Langmead wrote:
> Doug Cutting wrote:
>> Do you need highlights from all fields?  If so, then you can use:
>>
>>    TextFragment[] getBestTextFragments(TokenStream, ...);
>>
>> with a TokenStream for each field, then select the highest scoring
>> fragments across all fields.  Would that work for you?
>
> Thanks for the reply.  I can't find code like this in the lucene or
> lucene-demo packages -- is this something implemented, or did you mean 
> it as
> an example?

TextFragment is part of the Highlighter contribution in the 
jakarta-lucene-sandbox CVS repository.  Check it out and you'll have 
what Doug is speaking of.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10421-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 24 06:41:33 2004
Return-Path: <lucene-user-return-10421-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 8143 invoked from network); 24 Sep 2004 06:41:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Sep 2004 06:41:33 -0000
Received: (qmail 23944 invoked by uid 500); 24 Sep 2004 06:42:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 23760 invoked by uid 500); 24 Sep 2004 06:42:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 23687 invoked by uid 99); 24 Sep 2004 06:42:36 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of fraschetti@gmail.com designates 64.233.170.192 as permitted sender)
Received: from [64.233.170.192] (HELO mproxy.gmail.com) (64.233.170.192)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 23 Sep 2004 23:42:35 -0700
Received: by mproxy.gmail.com with SMTP id 79so972410rnl
        for <lucene-user@jakarta.apache.org>; Thu, 23 Sep 2004 23:42:32 -0700 (PDT)
Received: by 10.38.74.50 with SMTP id w50mr6044507rna;
        Thu, 23 Sep 2004 23:42:32 -0700 (PDT)
Received: by 10.38.171.15 with HTTP; Thu, 23 Sep 2004 23:42:32 -0700 (PDT)
Message-ID: <cbdebdf8040923234231940cd7@mail.gmail.com>
Date: Thu, 23 Sep 2004 23:42:32 -0700
From: Chris Fraschetti <fraschetti@gmail.com>
Reply-To: Chris Fraschetti <fraschetti@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: MultiFieldQueryParser
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Say i've got two fields.. indexed as   "content" and "title"

How can I have the query parser parse a string   "this is the end"

where it requires all words... but will search either the title or the
content fields.. is that the simple  
multifieldqueryparser([cotent,title], AND)  ..  or do I need to do a
little modification...

likewise how can I gain more control w/o modifying the user's query..
but by changer the parser functionality...

in the case where the title has "and"  and the content has "is the
this" ... what queryparser declaration would allow for that to return
true?

if I use the OR operator and have a   +(date[SOMEDATE: TOANOTHER])  
will the OR overwrite the requirement for the date to be AND or will
it do (query AND date[..:..]) ?

is there a good tutorial on all of this anywhere?

thanks in advance.




-- 
___________________________________________________
Chris Fraschetti
e fraschetti@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10422-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 24 07:14:30 2004
Return-Path: <lucene-user-return-10422-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 25278 invoked from network); 24 Sep 2004 07:14:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Sep 2004 07:14:30 -0000
Received: (qmail 62911 invoked by uid 500); 24 Sep 2004 07:16:22 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 62800 invoked by uid 500); 24 Sep 2004 07:16:22 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 62683 invoked by uid 99); 24 Sep 2004 07:16:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [81.92.65.170] (HELO dev2.technohuman.com) (81.92.65.170)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 24 Sep 2004 00:16:18 -0700
Received: from webmail.technohuman.com (localhost.localdomain [127.0.0.1])
	by dev2.technohuman.com (Postfix) with SMTP id 5040F63DAA
	for <lucene-user@jakarta.apache.org>; Fri, 24 Sep 2004 09:14:37 +0200 (CEST)
Received: from 172.16.4.38
        (SquirrelMail authenticated user magnus)
        by webmail.technohuman.com with HTTP;
        Fri, 24 Sep 2004 09:14:37 +0200 (CEST)
Message-ID: <1122.172.16.4.38.1096010077.squirrel@webmail.technohuman.com>
In-Reply-To: 
     <6B68C05FFDF8D540BBC67FE6CE864C32038AF3@rw-msg-02.BROADVISION.COM>
References:
    <6B68C05FFDF8D540BBC67FE6CE864C32038AF3@rw-msg-02.BROADVISION.COM>
Date: Fri, 24 Sep 2004 09:14:37 +0200 (CEST)
Subject: Re: Power Point Processing
From: "Magnus Johansson" <magnus@technohuman.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Reply-To: magnus@technohuman.com
User-Agent: SquirrelMail/1.4.2
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I've had some success with the code found at

http://www.mail-archive.com/poi-user@jakarta.apache.org/msg04809.html

together with POI.

Then there's OpenOffice, but I don't really think it is usable
in a production envrionment

/Magnus Johansson


> Hi,
>
> Does anyone know a good tool to processing MS Power Point
> file (*.ppt) into plain text so we can use lucene to index it?
>
> I looked at jakarta/POI, and only see Word and Excel documents
> can be processed, some JavaDoc pages mentioned ppt, but
> status is not clear to me?
>
> Thanks very much for helps, Lisheng
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10423-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 24 08:19:18 2004
Return-Path: <lucene-user-return-10423-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 63945 invoked from network); 24 Sep 2004 08:19:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Sep 2004 08:19:17 -0000
Received: (qmail 45738 invoked by uid 500); 24 Sep 2004 08:20:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 45686 invoked by uid 500); 24 Sep 2004 08:20:47 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 45668 invoked by uid 99); 24 Sep 2004 08:20:46 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO main.gmane.org) (80.91.229.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 24 Sep 2004 01:20:45 -0700
Received: from list by main.gmane.org with local (Exim 3.35 #1 (Debian))
	id 1CAlJl-0006zI-00
	for <lucene-user@jakarta.apache.org>; Fri, 24 Sep 2004 10:20:37 +0200
Received: from fw-d-whp.denic.de ([81.91.160.27])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <lucene-user@jakarta.apache.org>; Fri, 24 Sep 2004 10:20:37 +0200
Received: from ulim by fw-d-whp.denic.de with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <lucene-user@jakarta.apache.org>; Fri, 24 Sep 2004 10:20:37 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: lucene-user@jakarta.apache.org
From: Ulrich Mayring <ulim@denic.de>
Subject: Re: Strange search results with wildcard - Bug?
Date: Fri, 24 Sep 2004 10:20:31 +0200
Lines: 12
Message-ID: <cj0lcf$fpi$1@sea.gmane.org>
References: <ciu3s1$62j$1@sea.gmane.org> <ciuoer$po$1@sea.gmane.org> <ciuri6$b08$1@sea.gmane.org> <200409232044.21633@danielnaber.de>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: fw-d-whp.denic.de
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.2) Gecko/20040803
X-Accept-Language: de-de, en-us, en
In-Reply-To: <200409232044.21633@danielnaber.de>
X-Enigmail-Version: 0.86.0.0
X-Enigmail-Supports: pgp-inline, pgp-mime
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Daniel Naber wrote:
> 
> AND always refers to the terms on both sides, +/- only refers to the term 
> on the right. So "a AND b" -> "+a +b" is correct.

*slap forehead* - you're right. Wasn't there something about operator 
precedence way back when.... ;-)

Anyway, thanks to my stupidity and the help on this list I now have some 
cool debugging code and can ask better questions next time :)

Ulrich


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10424-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 24 08:35:42 2004
Return-Path: <lucene-user-return-10424-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 71378 invoked from network); 24 Sep 2004 08:35:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Sep 2004 08:35:42 -0000
Received: (qmail 67084 invoked by uid 500); 24 Sep 2004 08:37:07 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 66962 invoked by uid 500); 24 Sep 2004 08:36:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 66852 invoked by uid 99); 24 Sep 2004 08:36:52 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 24 Sep 2004 01:36:51 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id 8D14D23B93
	for <lucene-user@jakarta.apache.org>; Fri, 24 Sep 2004 10:38:15 +0200 (CEST)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 26499-05 for <lucene-user@jakarta.apache.org>;
 Fri, 24 Sep 2004 10:38:15 +0200 (CEST)
Received: from tucholsky.office.tanto.de (unknown [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP id 645F823B8F
	for <lucene-user@jakarta.apache.org>; Fri, 24 Sep 2004 10:38:15 +0200 (CEST)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id i8O8aNGL026948
	for <lucene-user@jakarta.apache.org>; Fri, 24 Sep 2004 10:36:23 +0200
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id i8O8aN3e026944;
	Fri, 24 Sep 2004 10:36:23 +0200
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16723.56455.770738.309081@tanto-xipolis.de>
Date: Fri, 24 Sep 2004 10:36:23 +0200
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Strange search results with wildcard - Bug?
In-Reply-To: <cj0lcf$fpi$1@sea.gmane.org>
References: <ciu3s1$62j$1@sea.gmane.org>
	<ciuoer$po$1@sea.gmane.org>
	<ciuri6$b08$1@sea.gmane.org>
	<200409232044.21633@danielnaber.de>
	<cj0lcf$fpi$1@sea.gmane.org>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Ulrich Mayring writes:
> Daniel Naber wrote:
> > 
> > AND always refers to the terms on both sides, +/- only refers to the term 
> > on the right. So "a AND b" -> "+a +b" is correct.
> 
> *slap forehead* - you're right. Wasn't there something about operator 
> precedence way back when.... ;-)
> 
Yes. January. And it's still in bugzilla. :-(

But it would not make a difference in this case, since AND has higher 
precedence, so 
a OR b AND c 
is
a OR (b AND c)
which is correctly done as
a (+b +c) 
in boolean queries.
a +b +c is different, since it won't find documents containing only a.
Occurences of a only modify score in this case.

Morus


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10425-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 24 13:19:15 2004
Return-Path: <lucene-user-return-10425-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 68608 invoked from network); 24 Sep 2004 13:19:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Sep 2004 13:19:14 -0000
Received: (qmail 82420 invoked by uid 500); 24 Sep 2004 13:20:17 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 81938 invoked by uid 500); 24 Sep 2004 13:20:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 81698 invoked by uid 99); 24 Sep 2004 13:20:09 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [128.174.5.207] (HELO expms3.cites.uiuc.edu) (128.174.5.207)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 24 Sep 2004 06:20:07 -0700
Received: from expms3.cites.uiuc.edu (localhost.cites.uiuc.edu [127.0.0.1])
	by expms3.cites.uiuc.edu (MOS 3.4.5-GR)
	with ESMTP id AYM38690;
	Fri, 24 Sep 2004 08:20:03 -0500 (CDT)
Received: from 128.174.5.212
	by expms3.cites.uiuc.edu (MOS 3.4.5-GR)
	with HTTP/1.1;
	Fri, 24 Sep 2004 08:20:03 -0500
Date: Fri, 24 Sep 2004 08:20:03 -0500
From: William Lee <wwlee1@uiuc.edu>
Subject: Iterate through the TermFreqVector
To: lucene-user@jakarta.apache.org
X-Mailer: Webmail Mirapoint Direct 3.4.5-GR
MIME-Version: 1.0
Message-Id: <d1b1d2ea.84dbffa3.839e800@expms3.cites.uiuc.edu>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Is there a simple way to iterate through all the documents to
get their TermFreqVectors?  Do I need to write a custom
IndexSearcher for this?  Or can I just get an enumeration of
the  document ID and call IndexReader.getTermFreqVector(int)?

Thanks,

Will

-- 
William (Will) Lee 
Email: wwlee1@uiuc.edu
Computer Science, University of Illinois at Urbana-Champaign

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10426-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 24 13:20:15 2004
Return-Path: <lucene-user-return-10426-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 71383 invoked from network); 24 Sep 2004 13:20:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Sep 2004 13:20:14 -0000
Received: (qmail 90707 invoked by uid 500); 24 Sep 2004 13:22:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 90627 invoked by uid 500); 24 Sep 2004 13:22:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 90509 invoked by uid 99); 24 Sep 2004 13:21:58 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [62.67.200.165] (HELO smtprelay04.ispgateway.de) (62.67.200.165)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 24 Sep 2004 06:21:57 -0700
Received: (qmail 22342 invoked from network); 24 Sep 2004 13:21:48 -0000
Received: from unknown (HELO [192.168.2.68]) (450094@[217.231.71.86])
          (envelope-sender <bg@eastbeam.com>)
          by smtprelay04.ispgateway.de (qmail-ldap-1.03) with SMTP
          for <lucene-user@jakarta.apache.org>; 24 Sep 2004 13:21:48 -0000
Message-ID: <41541F7F.7080003@eastbeam.com>
Date: Fri, 24 Sep 2004 15:22:07 +0200
From: "Bastian Grimm [Eastbeam GmbH]" <bg@eastbeam.com>
User-Agent: Mozilla Thunderbird 0.8 (Windows/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: problem with get/setBoost of document fields
References: <4151ABEF.2060504@eastbeam.com> <200409222115.10048@danielnaber.de> <4152BED2.4090908@eastbeam.com> <006420E2-0D60-11D9-B393-000393A564E6@ehatchersolutions.com> <4152D729.7080609@eastbeam.com> <4152F94B.3090408@apache.org>
In-Reply-To: <4152F94B.3090408@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

thanks doug,

that works... but i have to do this setNorm() for each document, which 
has been indexed up to now, right? there are round about 1 mio. docs in 
the index... i dont think it's a good idea to perform a search and do it 
for every doc (and every field of the doc...).
is there any possibility to do something like: setNorm(alldocs, 
"fieldX", 2.0f) - a global boost for a named field for every doc.

a last question: lucene creates some .f[1-9]  after setNorm() has 
finished. does this file remain all the time in this folder? i tried to 
optimize and so one but nothing happend.

after having finished this setNorm() for the fields of the doc, i have 
to change my statement to create docs with the new boost, but setNorm 
and setBoost - those values do are not the same...
sorry, a lot of questions, but i dont want the index to get crashed.


thanks for your time.
bastian

----------

You can change field boosts without re-indexing.

http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/index/IndexReader.html#setNorm(int,%20java.lang.String,%20byte) 


Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10427-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 24 13:23:15 2004
Return-Path: <lucene-user-return-10427-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 78604 invoked from network); 24 Sep 2004 13:23:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Sep 2004 13:23:15 -0000
Received: (qmail 98110 invoked by uid 500); 24 Sep 2004 13:25:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 97992 invoked by uid 500); 24 Sep 2004 13:25:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 97978 invoked by uid 99); 24 Sep 2004 13:25:07 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [132.230.32.4] (HELO birdland.coling.uni-freiburg.de) (132.230.32.4)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 24 Sep 2004 06:25:07 -0700
Received: from localhost (medelyan@localhost)
	by birdland.coling.uni-freiburg.de (8.9.1/8.9.1) with ESMTP id PAA07659
	for <lucene-user@jakarta.apache.org>; Fri, 24 Sep 2004 15:27:41 +0200 (CEST)
Date: Fri, 24 Sep 2004 15:27:41 +0200 (CEST)
From: Olena Medelyan <medelyan@coling.uni-freiburg.de>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Using Proximity for Ranking
Message-ID: <Pine.GSO.4.33.0409241526570.7281-100000@birdland.coling.uni-freiburg.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Dear Lucene-Users,

is there any possibility to use proximity for long queries (10 and more
terms) automatically? I need a kind of ranking feature, that would give
higher relevance scores to those documents, that contain query terms (or
some of query terms) with a lower distance between them. I know that I can
use the slop operator for phrase search ("red fox"~3), but what I need
should work for partial matching as well.

Thanks in advance for your help,

O. Medelyan
Albert-Ludwigs-Universitt, Computerlinguistik
Friedrichstrae 50
D-79098 Freiburg im Breisgau
Tel.: +49-761-203 3254, Fax.: +49-761-203 3251


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10428-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 24 13:26:11 2004
Return-Path: <lucene-user-return-10428-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 81397 invoked from network); 24 Sep 2004 13:26:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Sep 2004 13:26:11 -0000
Received: (qmail 4153 invoked by uid 500); 24 Sep 2004 13:28:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 3997 invoked by uid 500); 24 Sep 2004 13:28:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 3984 invoked by uid 99); 24 Sep 2004 13:28:03 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [199.172.169.37] (HELO mh2dmz1.bloomberg.com) (199.172.169.37)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 24 Sep 2004 06:28:02 -0700
Received: from ns2.bloomberg.com (ns2.bloomberg.com [160.43.8.240]) by mh2dmz1.bloomberg.com with ESMTP for lucene-user@jakarta.apache.org; Fri, 24 Sep 2004 09:27:59 -0400
Received: from ny2535.corp.bloomberg.com (ny2535.bloomberg.com [172.20.73.26])
	by ns2.bloomberg.com (8.11.7p1+Sun/8.10.2) with ESMTP id i8ODRxs05912
	for <lucene-user@jakarta.apache.org>; Fri, 24 Sep 2004 09:27:59 -0400 (EDT)
Received: from ny2526.corp.bloomberg.com (unverified) by ny2535.corp.bloomberg.com
 (Content Technologies SMTPRS 4.3.12) with ESMTP id <T6c3c2d6feeac14491a9c8@ny2535.corp.bloomberg.com> for <lucene-user@jakarta.apache.org>;
 Fri, 24 Sep 2004 09:27:58 -0400
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Subject: RE: Using Proximity for Ranking
Date: Fri, 24 Sep 2004 09:27:58 -0400
Message-Id: <3B530EF12E388B408ECC3162BA8C00F4AAE8F0@ny2526.corp.bloomberg.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Using Proximity for Ranking
Thread-Index: AcSiOfKRFSAhSrkmT8iY8R2WnpbX3gAAEgQA
From: "Chong, Herb" <HChong3@bloomberg.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

not without changing the contents of the index structure to store word =
locations.

Herb...

-----Original Message-----
From: Olena Medelyan [mailto:medelyan@coling.uni-freiburg.de]
Sent: Friday, September 24, 2004 9:28 AM
To: Lucene Users List
Subject: Using Proximity for Ranking


Dear Lucene-Users,

is there any possibility to use proximity for long queries (10 and more
terms) automatically? I need a kind of ranking feature, that would give
higher relevance scores to those documents, that contain query terms (or
some of query terms) with a lower distance between them. I know that I =
can
use the slop operator for phrase search ("red fox"~3), but what I need
should work for partial matching as well.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10429-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 24 13:31:26 2004
Return-Path: <lucene-user-return-10429-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 86215 invoked from network); 24 Sep 2004 13:31:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Sep 2004 13:31:26 -0000
Received: (qmail 13112 invoked by uid 500); 24 Sep 2004 13:33:17 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 13089 invoked by uid 500); 24 Sep 2004 13:33:17 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 13069 invoked by uid 99); 24 Sep 2004 13:33:16 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [212.227.126.186] (HELO moutng.kundenserver.de) (212.227.126.186)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 24 Sep 2004 06:33:16 -0700
Received: from [212.227.126.205] (helo=mrelayng.kundenserver.de)
	by moutng.kundenserver.de with esmtp (Exim 3.35 #1)
	id 1CAqCH-0001za-00
	for lucene-user@jakarta.apache.org; Fri, 24 Sep 2004 15:33:13 +0200
Received: from [82.135.3.49] (helo=192.168.10.101)
	by mrelayng.kundenserver.de with asmtp (TLSv1:RC4-MD5:128)
	(Exim 3.35 #1)
	id 1CAqCH-000414-00
	for lucene-user@jakarta.apache.org; Fri, 24 Sep 2004 15:33:13 +0200
From: Daniel Naber <daniel.naber@t-online.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Using Proximity for Ranking
Date: Fri, 24 Sep 2004 15:33:12 +0200
User-Agent: KMail/1.5.1
References: <Pine.GSO.4.33.0409241526570.7281-100000@birdland.coling.uni-freiburg.de>
In-Reply-To: <Pine.GSO.4.33.0409241526570.7281-100000@birdland.coling.uni-freiburg.de>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200409241533.12203.daniel.naber@t-online.de>
X-Provags-ID: kundenserver.de abuse@kundenserver.de auth:94b5a5949d2eb00693e70b0c89be5163
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Friday 24 September 2004 15:27, Olena Medelyan wrote:

> I know that I can
> use the slop operator for phrase search ("red fox"~3), but what I need
> should work for partial matching as well.

You can use the value of Integer.MAX_VALUE instead of 3 in your example, 
something like:

+red +fox +"red fox"~2147483647^10

Nutch does that I think (you might want to search the archives), but I have no 
clue how fast/slow it is.

Regards
 Daniel


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10430-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 24 15:55:12 2004
Return-Path: <lucene-user-return-10430-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 5942 invoked from network); 24 Sep 2004 15:55:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Sep 2004 15:55:12 -0000
Received: (qmail 6823 invoked by uid 500); 24 Sep 2004 15:56:36 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 6693 invoked by uid 500); 24 Sep 2004 15:56:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 6671 invoked by uid 99); 24 Sep 2004 15:56:33 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=HTML_90_100,HTML_MESSAGE,HTML_TEXT_AFTER_BODY,HTML_TEXT_AFTER_HTML
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [200.61.168.200] (HELO gandalf.xlnet.net.ar) (200.61.168.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 24 Sep 2004 08:56:32 -0700
Received: from exchange.xlnet.net.ar (10.0.0.3) by gandalf.xlnet.net.ar (NPlex 5.1.036)
        id 41506AA80000EDCF for lucene-user@jakarta.apache.org; Fri, 24 Sep 2004 12:52:25 -0300
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C4A24E.7CC73039"
Subject: not tokenized fields
Content-class: urn:content-classes:message
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Date: Fri, 24 Sep 2004 12:52:25 -0300
Message-ID: <DDD3F807D283B543B3396F7E00A2C7E125F3A6@exchange.xlnet.net.ar>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: not tokenized fields
Thread-Index: AcSiTu2Nx3vNPg3OT/qAYlEJXGnf2A==
From: "Wermus Fernando" <fernando.wermus@xlnet.net.ar>
To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C4A24E.7CC73039
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

Luceners,
            When a field is not tokenized should I replace every space
for a "?"?
=20
I'm looking up for : my dear
=20
If I test with luke, it splits the words in 'my' and 'dear'. So I can't
find in my not tokenized field.=20
=20
The same happens for
=20
"my dear"
=20
In these case I don't know why it splits in two words.
=20
The only solution I found it was to replace " " for "?". It doesn't seem
to be the best choice.

------_=_NextPart_001_01C4A24E.7CC73039--

From lucene-user-return-10431-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 24 16:25:00 2004
Return-Path: <lucene-user-return-10431-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 29668 invoked from network); 24 Sep 2004 16:25:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Sep 2004 16:25:00 -0000
Received: (qmail 57171 invoked by uid 500); 24 Sep 2004 16:27:07 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 57137 invoked by uid 500); 24 Sep 2004 16:27:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 57124 invoked by uid 99); 24 Sep 2004 16:27:06 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [205.152.59.66] (HELO imf18aec.mail.bellsouth.net) (205.152.59.66)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 24 Sep 2004 09:27:05 -0700
Received: from w2ks.synernet.com ([65.12.150.225])
          by imf18aec.mail.bellsouth.net
          (InterMail vM.5.01.06.11 201-253-122-130-111-20040605) with ESMTP
          id <20040924162702.QWZH1790.imf18aec.mail.bellsouth.net@w2ks.synernet.com>
          for <lucene-user@jakarta.apache.org>;
          Fri, 24 Sep 2004 12:27:02 -0400
Message-Id: <6.0.1.1.2.20040924121842.040db9b0@fast.synernet.com>
X-Sender: ftoth@fast.synernet.com
X-Mailer: QUALCOMM Windows Eudora Version 6.0.1.1
Date: Fri, 24 Sep 2004 12:26:40 -0400
To: lucene-user@jakarta.apache.org
From: Fred Toth <ftoth@synernet.com>
Subject: Keyword query confusion
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi all,

I'm trying to understand what's going on with the query parser
and keyword fields.

I've got a large subset of my documents which are "publications".
So as to be able to query these, I've got this in the indexer:

doc.add(Field.Keyword("is_pub", "1"));

However, if I run a query:

	is_pub:1

I get no hits. If I find a document by other means and dump the
fields, the "is_pub" keyword is there, with value of "1".

Now, I've learned that if I change the field to contain the value "true"
instead of the string "1", this query:

	is_pub:true

works just fine.

So, I'm pretty sure I'm running afoul of the analyzer, right? The doc says
specifically that I should add keyword query clauses programmatically,
and I'm guessing that's what's wrong.

But can someone explain this? It sure is useful to be able to test this
sort of thing with the query parser. What is going on with the standard
analyzer that makes "true" work and "1" not work?

Is there a way around this other than by writing code to create the
query? This also applies to other types of query, like "pub_date:2004".

Hoping for enlightenment...

Thanks,

Fred


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10432-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 24 16:29:00 2004
Return-Path: <lucene-user-return-10432-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 32007 invoked from network); 24 Sep 2004 16:29:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Sep 2004 16:29:00 -0000
Received: (qmail 60827 invoked by uid 500); 24 Sep 2004 16:31:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 60590 invoked by uid 500); 24 Sep 2004 16:31:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 60532 invoked by uid 99); 24 Sep 2004 16:31:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.158.35.213] (HELO psmtp.com) (12.158.35.213)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 24 Sep 2004 09:30:59 -0700
Received: from source ([139.56.4.13]) by exprod6ob3.obsmtp.com ([12.158.35.250]) with SMTP;
	Fri, 24 Sep 2004 09:30:58 PDT
Received: from triangulum2.broadvision.com (triangulum2.broadvision.com [10.10.102.101])
	by nebula2.broadvision.com (8.10.2+Sun/8.10.2) with ESMTP id i8OGUur06389
	for <lucene-user@jakarta.apache.org>; Fri, 24 Sep 2004 09:30:56 -0700 (PDT)
Received: from rw-gw-01.BroadVision.com (localhost [127.0.0.1])
	by triangulum2.broadvision.com (8.9.3+Sun/8.9.3) with ESMTP id JAA25921
	for <lucene-user@jakarta.apache.org>; Fri, 24 Sep 2004 09:33:21 -0700 (PDT)
Received: by rw-gw-01.broadvision.com with Internet Mail Service (5.5.2655.55)
	id <TBR6HX42>; Fri, 24 Sep 2004 09:30:58 -0700
Message-ID: <6B68C05FFDF8D540BBC67FE6CE864C32038AFF@rw-msg-02.BROADVISION.COM>
From: "Zhang, Lisheng" <Lisheng.Zhang@broadvision.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Power Point Processing
Date: Fri, 24 Sep 2004 09:30:56 -0700
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

Thanks very much for helps, I will try that.

Best regards, Lisheng

-----Original Message-----
From: Magnus Johansson [mailto:magnus@technohuman.com]
Sent: Thursday, September 23, 2004 11:15 PM
To: Lucene Users List
Subject: Re: Power Point Processing


I've had some success with the code found at

http://www.mail-archive.com/poi-user@jakarta.apache.org/msg04809.html

together with POI.

Then there's OpenOffice, but I don't really think it is usable
in a production envrionment

/Magnus Johansson


> Hi,
>
> Does anyone know a good tool to processing MS Power Point
> file (*.ppt) into plain text so we can use lucene to index it?
>
> I looked at jakarta/POI, and only see Word and Excel documents
> can be processed, some JavaDoc pages mentioned ppt, but
> status is not clear to me?
>
> Thanks very much for helps, Lisheng
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10433-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 24 16:56:32 2004
Return-Path: <lucene-user-return-10433-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 49052 invoked from network); 24 Sep 2004 16:56:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Sep 2004 16:56:32 -0000
Received: (qmail 13811 invoked by uid 500); 24 Sep 2004 16:58:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 13711 invoked by uid 500); 24 Sep 2004 16:58:37 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 13688 invoked by uid 99); 24 Sep 2004 16:58:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [141.156.69.115] (HELO mail.infosciences.com) (141.156.69.115)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 24 Sep 2004 09:58:34 -0700
Received: from Aviran (unknown [141.156.69.109])
	by mail.infosciences.com (Postfix) with ESMTP id 1749E118308
	for <lucene-user@jakarta.apache.org>; Fri, 24 Sep 2004 13:00:38 -0400 (EDT)
From: "Aviran" <amordo@infosciences.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Keyword query confusion
Date: Fri, 24 Sep 2004 12:56:34 -0400
Message-ID: <000b01c4a257$72b11980$6a00a8c0@Aviran>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
In-Reply-To: <6.0.1.1.2.20040924121842.040db9b0@fast.synernet.com>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

The StandardAnalyzer removes the "1" as it is a stop word.
There are two ways you can work around this problem.
1 as you mentioned is to create a Query object programmatically.
2 You can use WhiteSpace Analyzer instead of StandardAnalyzer.

Aviran

-----Original Message-----
From: Fred Toth [mailto:ftoth@synernet.com]=20
Sent: Friday, September 24, 2004 12:27 PM
To: lucene-user@jakarta.apache.org
Subject: Keyword query confusion


Hi all,

I'm trying to understand what's going on with the query parser and =
keyword
fields.

I've got a large subset of my documents which are "publications". So as =
to
be able to query these, I've got this in the indexer:

doc.add(Field.Keyword("is_pub", "1"));

However, if I run a query:

	is_pub:1

I get no hits. If I find a document by other means and dump the fields, =
the
"is_pub" keyword is there, with value of "1".

Now, I've learned that if I change the field to contain the value "true"
instead of the string "1", this query:

	is_pub:true

works just fine.

So, I'm pretty sure I'm running afoul of the analyzer, right? The doc =
says
specifically that I should add keyword query clauses programmatically, =
and
I'm guessing that's what's wrong.

But can someone explain this? It sure is useful to be able to test this =
sort
of thing with the query parser. What is going on with the standard =
analyzer
that makes "true" work and "1" not work?

Is there a way around this other than by writing code to create the =
query?
This also applies to other types of query, like "pub_date:2004".

Hoping for enlightenment...

Thanks,

Fred


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10434-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 24 17:43:19 2004
Return-Path: <lucene-user-return-10434-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 70361 invoked from network); 24 Sep 2004 17:43:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Sep 2004 17:43:18 -0000
Received: (qmail 79151 invoked by uid 500); 24 Sep 2004 17:45:26 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 79108 invoked by uid 500); 24 Sep 2004 17:45:24 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 79093 invoked by uid 99); 24 Sep 2004 17:45:24 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [206.190.39.200] (HELO web53010.mail.yahoo.com) (206.190.39.200)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 24 Sep 2004 10:45:23 -0700
Message-ID: <20040924174518.92416.qmail@web53010.mail.yahoo.com>
Received: from [216.231.10.162] by web53010.mail.yahoo.com via HTTP; Fri, 24 Sep 2004 10:45:18 PDT
Date: Fri, 24 Sep 2004 10:45:18 -0700 (PDT)
From: Edwin Tang <emttang@yahoo.com>
Subject: Questions related to closing the searcher
To: Lucene Users List <lucene-user@jakarta.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks for the tip. However, since the index is
constantly updated, I won't have to check whether it
has changed. I'm just puzzled as to why I'm running
out of memory when I'm closing the searcher, setting
it to null, running the garbage collector, then
getting a new searcher.

Ed

--- amordo@infosciences.com wrote:

> The best way is to use IndexReader's
getCurrentVersion() method to check whether the index
has changed. If it has, just get a new Searcher
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/index/IndexReader.html#getCurrentVersion(java.lang.String)
> 
> Aviran
> 
> -----Original Message-----
> From: Edwin Tang [mailto:emttang@yahoo.com] 
> Sent: Wednesday, September 22, 2004 11:38 AM
> To: lucene-user@jakarta.apache.org
> Subject: Fwd: Questions related to closing the
searcher
> 
> 
> Hello,
> 
> In my testing, it seems like if the searcher (in my
case ParallelMultiSearcher) is not closed, the
searcher will not pick up any new data that has been
added to the index since it was opened. I'm wondering
if this is a correct statement.

> Assuming the above is true, I went about closing the
searcher with searcher.close(), then setting both the
searcher and QueryParser to null, then did a
System.gc(). The application will sleep for a set
period of time, then resumes to process another batch
of queries against the index. When the application
resumes, the following method is ran:

>     /**
>      * Creates a {@link ParallelMultiSearcher} and
{@link QueryParser} if they
>      * do not already exist.
>      *
>      * @return  0 if successful or the objects
already exist; -1 if failed.
>      */
>     private int getSearcher() {
>         Analyzer analyzer;
>         IndexSearcher[] searchers;
>         int iReturn;
>         Vector vector;
>         if (logger.isDebugEnabled())
>             logger.debug("Entering getSearcher()");
        if (searcher == null || parser == null) {
>             analyzer = new
CIAnalyzer(utility.sStopWordsFile);
>             try {
>                 vector = new Vector();
>                 if (utility.bSearchAMX)
>                     vector.add(new
IndexSearcher(utility.amxIndexDir));
>                 if (utility.bSearchCOMTEX)
>                     vector.add(new
IndexSearcher(utility.comtexIndexDir));
>                 if (utility.bSearchDJNW)
>                     vector.add(new
IndexSearcher(utility.djnwIndexDir));
>                 if (utility.bSearchMoreover)
>                     vector.add(new
IndexSearcher(utility.moreoverIndexDir));
>                 searchers = (IndexSearcher[])
vector.toArray(new IndexSearcher[vector.size()]);
>                 searcher = new
ParallelMultiSearcher(searchers);
>                 parser = new QueryParser("body",
analyzer);
>                 iReturn = 0;
>             } catch (IOException ioe) {
>                 logger.error("Error creating
searcher", ioe);
>                 iReturn = -1;
>             } catch (Exception e) {
>                 logger.error("Unexpected error while
creating searcher", e);
>                 iReturn = -1;
>             }
>         } else
>             iReturn = 0;
>         if (logger.isDebugEnabled())
>             logger.debug("Exitng getSearcher() with
" + iReturn);
>         return iReturn;
>     } // End method getSearcher()
> 
> This seems to get me around the problem where the
searcher was not picking up new data from the index.
However, I would run out of memory after 8 iterations
of the application processing a batch query, sleeping,
process another batch query, sleep, etc.
> 
> I'm probably missing something completely obvious,
but I'm just not seeing it. Can someone please tell me
what I'm doing wrong?
> 
> Thanks,
> Ed
> 
> 
> 		
> __________________________________
> Do you Yahoo!?
> Yahoo! Mail - 50x more storage than other providers!
> http://promotions.yahoo.com/new_mail

---------------------------------------------------------------------
To unsubscribe, e-mail:
lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail:
lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail:
lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail:
lucene-user-help@jakarta.apache.org


		
__________________________________
Do you Yahoo!?
Yahoo! Mail - 50x more storage than other providers!
http://promotions.yahoo.com/new_mail

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10435-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 24 17:57:18 2004
Return-Path: <lucene-user-return-10435-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 76854 invoked from network); 24 Sep 2004 17:57:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Sep 2004 17:57:18 -0000
Received: (qmail 99512 invoked by uid 500); 24 Sep 2004 17:59:31 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 98712 invoked by uid 500); 24 Sep 2004 17:59:20 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 98698 invoked by uid 99); 24 Sep 2004 17:59:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [205.152.59.69] (HELO imf21aec.mail.bellsouth.net) (205.152.59.69)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 24 Sep 2004 10:59:19 -0700
Received: from w2ks.synernet.com ([65.12.150.225])
          by imf21aec.mail.bellsouth.net
          (InterMail vM.5.01.06.11 201-253-122-130-111-20040605) with ESMTP
          id <20040924175917.EJLS1791.imf21aec.mail.bellsouth.net@w2ks.synernet.com>
          for <lucene-user@jakarta.apache.org>;
          Fri, 24 Sep 2004 13:59:17 -0400
Message-Id: <6.0.1.1.2.20040924135118.0408cea8@fast.synernet.com>
X-Sender: ftoth@fast.synernet.com
X-Mailer: QUALCOMM Windows Eudora Version 6.0.1.1
Date: Fri, 24 Sep 2004 13:58:47 -0400
To: lucene-user@jakarta.apache.org
From: Fred Toth <ftoth@synernet.com>
Subject: demo IndexHTML parser breaks unicode?
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

I was hoping it wouldn't come to this:

I've got unicode in my source HTML. In particular, within meta tags,
and it's getting broken by the indexer. Note that I'm not trying to
query on any of this, just store and retrieve document titles with
unicode characters.

Has anyone else experienced this? I know this is just a demo, but
it's been working really well and I hate to give it up!

Is this easily fixable? I'm a little worried by this comment in
SimpleCharStream.java:

/**
  * An implementation of interface CharStream, where the stream is assumed to
  * contain only ASCII characters (without unicode processing).
  */

This is likely a show-stopper for me on this parser.

Can anyone recommend the shortest path to another HTML parser
that is unicode friendly?

Thanks for anything.

Fred


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10436-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Sep 24 19:13:00 2004
Return-Path: <lucene-user-return-10436-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 14203 invoked from network); 24 Sep 2004 19:12:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Sep 2004 19:12:59 -0000
Received: (qmail 26192 invoked by uid 500); 24 Sep 2004 19:14:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 25968 invoked by uid 500); 24 Sep 2004 19:14:40 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 25787 invoked by uid 99); 24 Sep 2004 19:14:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.25.134.83] (HELO mailout07.sul.t-online.com) (194.25.134.83)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 24 Sep 2004 12:14:35 -0700
Received: from fwd06.aul.t-online.de 
	by mailout07.sul.t-online.com with smtp 
	id 1CAvWb-0008BH-00; Fri, 24 Sep 2004 21:14:33 +0200
Received: from pD9EBF5A4.dip.t-dialin.net (Gc67XcZXge3FqC+M-c7PHxzOOyn7+fgGXUR8cKLzKJRp8iqJxefbcm@[217.235.245.164]) by fmrl06.sul.t-online.com
	with esmtp id 1CAvWS-1CwvU80; Fri, 24 Sep 2004 21:14:24 +0200
From: Daniel Naber <daniel.naber@t-online.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: demo IndexHTML parser breaks unicode?
Date: Fri, 24 Sep 2004 21:17:28 +0200
User-Agent: KMail/1.7
References: <6.0.1.1.2.20040924135118.0408cea8@fast.synernet.com>
In-Reply-To: <6.0.1.1.2.20040924135118.0408cea8@fast.synernet.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200409242117.29107@danielnaber.de>
X-ID: Gc67XcZXge3FqC+M-c7PHxzOOyn7+fgGXUR8cKLzKJRp8iqJxefbcm@t-dialin.net
X-TOI-MSGID: 81dff84c-d42b-40e1-b255-13f783d00131
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Friday 24 September 2004 19:58, Fred Toth wrote:

> I've got unicode in my source HTML. In particular, within meta tags,
> and it's getting broken by the indexer. Note that I'm not trying to
> query on any of this, just store and retrieve document titles with
> unicode characters.

Please try again with the code from CVS, Christoph Goller committed a fix 
for this problem (at least I think it was this problem) 1-3 weeks ago.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10437-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Sep 25 01:23:45 2004
Return-Path: <lucene-user-return-10437-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 54587 invoked from network); 25 Sep 2004 01:23:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 25 Sep 2004 01:23:45 -0000
Received: (qmail 96129 invoked by uid 500); 25 Sep 2004 01:25:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 96105 invoked by uid 500); 25 Sep 2004 01:25:47 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 96085 invoked by uid 99); 25 Sep 2004 01:25:46 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [205.152.59.66] (HELO imf18aec.mail.bellsouth.net) (205.152.59.66)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 24 Sep 2004 18:25:43 -0700
Received: from w2ks.synernet.com ([65.12.150.225])
          by imf18aec.mail.bellsouth.net
          (InterMail vM.5.01.06.11 201-253-122-130-111-20040605) with ESMTP
          id <20040925012540.VZY1790.imf18aec.mail.bellsouth.net@w2ks.synernet.com>
          for <lucene-user@jakarta.apache.org>;
          Fri, 24 Sep 2004 21:25:40 -0400
Message-Id: <6.0.1.1.2.20040924212351.040d3790@fast.synernet.com>
X-Sender: ftoth@fast.synernet.com
X-Mailer: QUALCOMM Windows Eudora Version 6.0.1.1
Date: Fri, 24 Sep 2004 21:25:18 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
From: Fred Toth <ftoth@synernet.com>
Subject: Re: demo IndexHTML parser breaks unicode?
In-Reply-To: <200409242117.29107@danielnaber.de>
References: <6.0.1.1.2.20040924135118.0408cea8@fast.synernet.com>
 <200409242117.29107@danielnaber.de>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Sorry, that didn't cure it.

Again, anyone want to point me to the quickest replacement
HTML parser (that's unicode clean)?

Thanks,

Fred

At 03:17 PM 9/24/2004, you wrote:
>On Friday 24 September 2004 19:58, Fred Toth wrote:
>
> > I've got unicode in my source HTML. In particular, within meta tags,
> > and it's getting broken by the indexer. Note that I'm not trying to
> > query on any of this, just store and retrieve document titles with
> > unicode characters.
>
>Please try again with the code from CVS, Christoph Goller committed a fix
>for this problem (at least I think it was this problem) 1-3 weeks ago.
>
>Regards
>  Daniel
>
>--
>http://www.danielnaber.de
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10438-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Sep 25 01:49:03 2004
Return-Path: <lucene-user-return-10438-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 61300 invoked from network); 25 Sep 2004 01:49:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 25 Sep 2004 01:49:03 -0000
Received: (qmail 10404 invoked by uid 500); 25 Sep 2004 01:51:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 10324 invoked by uid 500); 25 Sep 2004 01:51:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 10308 invoked by uid 99); 25 Sep 2004 01:51:03 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [63.100.163.81] (HELO mercury.corp.cyveillance.com) (63.100.163.81)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 24 Sep 2004 18:51:01 -0700
Received: by mercury.corp.cyveillance.com with Internet Mail Service (5.5.2655.55)
	id <S3777DVB>; Fri, 24 Sep 2004 21:48:14 -0400
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA013AAB@hermes.corp.cyveillance.com>
From: wallen@Cyveillance.com
To: lucene-user@jakarta.apache.org
Subject: RE: demo IndexHTML parser breaks unicode?
Date: Fri, 24 Sep 2004 21:46:23 -0400
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

In org.apache.lucene.demo.HTMLDocument you need to change the input stream
to use a different encoding.  Replace the fis with this:

fis = new InputStreamReader(new FileInputStream(f), "UTF-16");

-----Original Message-----
From: Fred Toth [mailto:ftoth@synernet.com]
Sent: Friday, September 24, 2004 9:25 PM
To: Lucene Users List
Subject: Re: demo IndexHTML parser breaks unicode?


Sorry, that didn't cure it.

Again, anyone want to point me to the quickest replacement
HTML parser (that's unicode clean)?

Thanks,

Fred

At 03:17 PM 9/24/2004, you wrote:
>On Friday 24 September 2004 19:58, Fred Toth wrote:
>
> > I've got unicode in my source HTML. In particular, within meta tags,
> > and it's getting broken by the indexer. Note that I'm not trying to
> > query on any of this, just store and retrieve document titles with
> > unicode characters.
>
>Please try again with the code from CVS, Christoph Goller committed a fix
>for this problem (at least I think it was this problem) 1-3 weeks ago.
>
>Regards
>  Daniel
>
>--
>http://www.danielnaber.de
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10439-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Sep 25 03:00:16 2004
Return-Path: <lucene-user-return-10439-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 76760 invoked from network); 25 Sep 2004 03:00:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 25 Sep 2004 03:00:15 -0000
Received: (qmail 46895 invoked by uid 500); 25 Sep 2004 03:02:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 46778 invoked by uid 500); 25 Sep 2004 03:02:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 46762 invoked by uid 99); 25 Sep 2004 03:02:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [205.152.59.69] (HELO imf21aec.mail.bellsouth.net) (205.152.59.69)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 24 Sep 2004 20:02:15 -0700
Received: from w2ks.synernet.com ([65.12.150.225])
          by imf21aec.mail.bellsouth.net
          (InterMail vM.5.01.06.11 201-253-122-130-111-20040605) with ESMTP
          id <20040925030213.OMSE1791.imf21aec.mail.bellsouth.net@w2ks.synernet.com>
          for <lucene-user@jakarta.apache.org>;
          Fri, 24 Sep 2004 23:02:13 -0400
Message-Id: <6.0.1.1.2.20040924225656.04129008@fast.synernet.com>
X-Sender: ftoth@fast.synernet.com
X-Mailer: QUALCOMM Windows Eudora Version 6.0.1.1
Date: Fri, 24 Sep 2004 23:01:49 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
 lucene-user@jakarta.apache.org
From: Fred Toth <ftoth@synernet.com>
Subject: RE: demo IndexHTML parser breaks unicode?
In-Reply-To: <63434C14F9A6F74CB36B85033E4C30CA013AAB@hermes.corp.cyveill
 ance.com>
References: <63434C14F9A6F74CB36B85033E4C30CA013AAB@hermes.corp.cyveillance.com>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

Thanks for the tip, but that didn't work in my case. Presumably
with this patch, and the changes in CVS, this makes the parser
work with UTF-16. I can't really tell because the index appears
now to be completely UTF-16 and I can't search for anything.

My input is actually UTF-8 anyway, and if I patch all the streams
to use UTF-8 instead of UTF-16, I get parser errors.

So I'm stuck.

Thanks for your help,

Fred

At 09:46 PM 9/24/2004, wallen@Cyveillance.com wrote:
>In org.apache.lucene.demo.HTMLDocument you need to change the input stream
>to use a different encoding.  Replace the fis with this:
>
>fis = new InputStreamReader(new FileInputStream(f), "UTF-16");
>
>-----Original Message-----
>From: Fred Toth [mailto:ftoth@synernet.com]
>Sent: Friday, September 24, 2004 9:25 PM
>To: Lucene Users List
>Subject: Re: demo IndexHTML parser breaks unicode?
>
>
>Sorry, that didn't cure it.
>
>Again, anyone want to point me to the quickest replacement
>HTML parser (that's unicode clean)?
>
>Thanks,
>
>Fred
>
>At 03:17 PM 9/24/2004, you wrote:
> >On Friday 24 September 2004 19:58, Fred Toth wrote:
> >
> > > I've got unicode in my source HTML. In particular, within meta tags,
> > > and it's getting broken by the indexer. Note that I'm not trying to
> > > query on any of this, just store and retrieve document titles with
> > > unicode characters.
> >
> >Please try again with the code from CVS, Christoph Goller committed a fix
> >for this problem (at least I think it was this problem) 1-3 weeks ago.
> >
> >Regards
> >  Daniel
> >
> >--
> >http://www.danielnaber.de
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10440-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Sep 25 15:13:35 2004
Return-Path: <lucene-user-return-10440-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 45796 invoked from network); 25 Sep 2004 15:13:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 25 Sep 2004 15:13:34 -0000
Received: (qmail 50300 invoked by uid 500); 25 Sep 2004 15:15:15 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 50199 invoked by uid 500); 25 Sep 2004 15:15:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 50041 invoked by uid 99); 25 Sep 2004 15:15:12 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [205.158.62.197] (HELO ws6-2.us4.outblaze.com) (205.158.62.197)
  by apache.org (qpsmtpd/0.28) with SMTP; Sat, 25 Sep 2004 08:15:12 -0700
Received: (qmail 16214 invoked from network); 25 Sep 2004 09:48:08 -0000
Received: from unknown (HELO ?192.168.1.104?) (erik@hatcher.net@68.169.41.169)
  by ws6-2.us4.outblaze.com with SMTP; 25 Sep 2004 09:48:08 -0000
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <6.0.1.1.2.20040924225656.04129008@fast.synernet.com>
References: <63434C14F9A6F74CB36B85033E4C30CA013AAB@hermes.corp.cyveillance.com> <6.0.1.1.2.20040924225656.04129008@fast.synernet.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <0AC600C7-0ED8-11D9-982D-000393A564E6@hatcher.net>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@hatcher.net>
Subject: Re: demo IndexHTML parser breaks unicode?
Date: Sat, 25 Sep 2004 05:48:24 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

As for alternative HTML parsers, there are a few notable ones:

NekoHTML - Nutch uses it

JTidy - My <index> Ant task in the sandbox uses it

and HTMLParser

All of the above are surely far more battle-tested in production than 
Lucene's demo parser, and I'd be surprised if they did not correctly 
handle Unicode.

	Erik


On Sep 24, 2004, at 11:01 PM, Fred Toth wrote:

> Hi,
>
> Thanks for the tip, but that didn't work in my case. Presumably
> with this patch, and the changes in CVS, this makes the parser
> work with UTF-16. I can't really tell because the index appears
> now to be completely UTF-16 and I can't search for anything.
>
> My input is actually UTF-8 anyway, and if I patch all the streams
> to use UTF-8 instead of UTF-16, I get parser errors.
>
> So I'm stuck.
>
> Thanks for your help,
>
> Fred
>
> At 09:46 PM 9/24/2004, wallen@Cyveillance.com wrote:
>> In org.apache.lucene.demo.HTMLDocument you need to change the input 
>> stream
>> to use a different encoding.  Replace the fis with this:
>>
>> fis = new InputStreamReader(new FileInputStream(f), "UTF-16");
>>
>> -----Original Message-----
>> From: Fred Toth [mailto:ftoth@synernet.com]
>> Sent: Friday, September 24, 2004 9:25 PM
>> To: Lucene Users List
>> Subject: Re: demo IndexHTML parser breaks unicode?
>>
>>
>> Sorry, that didn't cure it.
>>
>> Again, anyone want to point me to the quickest replacement
>> HTML parser (that's unicode clean)?
>>
>> Thanks,
>>
>> Fred
>>
>> At 03:17 PM 9/24/2004, you wrote:
>> >On Friday 24 September 2004 19:58, Fred Toth wrote:
>> >
>> > > I've got unicode in my source HTML. In particular, within meta 
>> tags,
>> > > and it's getting broken by the indexer. Note that I'm not trying 
>> to
>> > > query on any of this, just store and retrieve document titles with
>> > > unicode characters.
>> >
>> >Please try again with the code from CVS, Christoph Goller committed 
>> a fix
>> >for this problem (at least I think it was this problem) 1-3 weeks 
>> ago.
>> >
>> >Regards
>> >  Daniel
>> >
>> >--
>> >http://www.danielnaber.de
>> >
>> >---------------------------------------------------------------------
>> >To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> >For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10441-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Sep 25 15:21:08 2004
Return-Path: <lucene-user-return-10441-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 51179 invoked from network); 25 Sep 2004 15:21:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 25 Sep 2004 15:21:08 -0000
Received: (qmail 73049 invoked by uid 500); 25 Sep 2004 15:23:10 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 72988 invoked by uid 500); 25 Sep 2004 15:23:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 72969 invoked by uid 99); 25 Sep 2004 15:23:09 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of fraschetti@gmail.com designates 64.233.170.192 as permitted sender)
Received: from [64.233.170.192] (HELO mproxy.gmail.com) (64.233.170.192)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 25 Sep 2004 08:23:09 -0700
Received: by mproxy.gmail.com with SMTP id 79so1548055rnl
        for <lucene-user@jakarta.apache.org>; Sat, 25 Sep 2004 08:23:07 -0700 (PDT)
Received: by 10.38.78.79 with SMTP id a79mr13372rnb;
        Fri, 24 Sep 2004 23:23:07 -0700 (PDT)
Received: by 10.38.171.15 with HTTP; Fri, 24 Sep 2004 23:23:07 -0700 (PDT)
Message-ID: <cbdebdf8040924232375abfbc4@mail.gmail.com>
Date: Fri, 24 Sep 2004 23:23:07 -0700
From: Chris Fraschetti <fraschetti@gmail.com>
Reply-To: Chris Fraschetti <fraschetti@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: a good html & script parser
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

most of the html parsers I can find on the web handle only the <tag>
syntax and forget about the { code } syntax that usually occurs in a
lot of web pages.

Is there a good library to return the plain text of a html doc string
which will eliminate more than simply the <tag> occurrance?

-- 
___________________________________________________
Chris Fraschetti
e fraschetti@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10442-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Sep 25 17:04:04 2004
Return-Path: <lucene-user-return-10442-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 98031 invoked from network); 25 Sep 2004 17:04:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 25 Sep 2004 17:04:04 -0000
Received: (qmail 2349 invoked by uid 500); 25 Sep 2004 17:06:07 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 2316 invoked by uid 500); 25 Sep 2004 17:06:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 2302 invoked by uid 99); 25 Sep 2004 17:06:06 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [205.158.62.199] (HELO ws6-3.us4.outblaze.com) (205.158.62.199)
  by apache.org (qpsmtpd/0.28) with SMTP; Sat, 25 Sep 2004 10:06:06 -0700
Received: (qmail 28594 invoked from network); 25 Sep 2004 09:59:18 -0000
Received: from unknown (HELO ?192.168.1.104?) (erik@hatcher.net@68.169.41.169)
  by ws6-3.us4.outblaze.com with SMTP; 25 Sep 2004 09:59:18 -0000
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <6.0.1.1.2.20040924121842.040db9b0@fast.synernet.com>
References: <6.0.1.1.2.20040924121842.040db9b0@fast.synernet.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <9573417A-0ED9-11D9-982D-000393A564E6@hatcher.net>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@hatcher.net>
Subject: Re: Keyword query confusion
Date: Sat, 25 Sep 2004 05:59:26 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Sep 24, 2004, at 12:26 PM, Fred Toth wrote:
> I'm trying to understand what's going on with the query parser
> and keyword fields.

It's a confusing situation, for sure.

> I've got a large subset of my documents which are "publications".
> So as to be able to query these, I've got this in the indexer:
>
> doc.add(Field.Keyword("is_pub", "1"));
>
> However, if I run a query:
>
> 	is_pub:1
>
> I get no hits. If I find a document by other means and dump the
> fields, the "is_pub" keyword is there, with value of "1".

As already stated - it is the analyzer eating the "1".  Every field is 
analyzed by QueryParser, but during indexing Field.Keyword fields are 
not indexed.

Search the archives for discussion on a KeywordAnalyzer and how to use 
it with PerFieldAnalyzerWrapper.  Also, the info here is valuable:

	http://wiki.apache.org/jakarta-lucene/AnalysisParalysis

Visualizing what an analyzer does and using Query.toString are both 
techniques to clearly point out what is happening.

> Now, I've learned that if I change the field to contain the value 
> "true"
> instead of the string "1", this query:
>
> 	is_pub:true
>
> works just fine.
>
> So, I'm pretty sure I'm running afoul of the analyzer, right? The doc 
> says
> specifically that I should add keyword query clauses programmatically,
> and I'm guessing that's what's wrong.

It really depends on your needs.  I personally wouldn't want end-users 
knowing to type "is_pub:true" into a search box.  Designing the most 
appropriate search interface for your situation is highly recommended.  
And in this case a checkbox for "Is published?" that translates into a 
TermQuery behind the scenes (likely combined with other pieces, perhaps 
a QueryParser parsed piece, using BooleanQuery).  TermQuery text is not 
analyzed, so you'd be safe there.

> But can someone explain this? It sure is useful to be able to test this
> sort of thing with the query parser. What is going on with the standard
> analyzer that makes "true" work and "1" not work?

Numbers get axed, that is what happens.

> Is there a way around this other than by writing code to create the
> query? This also applies to other types of query, like "pub_date:2004".

A PerFieldAnalyzerWrapper using WhitespaceAnalyzer for the "is_pub" 
field would do the trick in this case.

Again, users typing "pub_date:2004" seems awkward to me - make a year 
drop-down box if they need to select a year.

> Hoping for enlightenment...

Now that's a tall order... or is it?!  It's surrounding us all - we 
simply have to breath it in.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10443-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Sep 25 23:47:24 2004
Return-Path: <lucene-user-return-10443-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21224 invoked from network); 25 Sep 2004 23:47:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 25 Sep 2004 23:47:24 -0000
Received: (qmail 64293 invoked by uid 500); 25 Sep 2004 23:47:10 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 64264 invoked by uid 500); 25 Sep 2004 23:47:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 64250 invoked by uid 99); 25 Sep 2004 23:47:09 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [205.158.62.199] (HELO ws6-3.us4.outblaze.com) (205.158.62.199)
  by apache.org (qpsmtpd/0.28) with SMTP; Sat, 25 Sep 2004 16:47:08 -0700
Received: (qmail 18731 invoked from network); 25 Sep 2004 23:47:01 -0000
Received: from unknown (HELO ?192.168.1.104?) (erik@hatcher.net@68.169.41.169)
  by ws6-3.us4.outblaze.com with SMTP; 25 Sep 2004 23:47:01 -0000
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <9573417A-0ED9-11D9-982D-000393A564E6@hatcher.net>
References: <6.0.1.1.2.20040924121842.040db9b0@fast.synernet.com> <9573417A-0ED9-11D9-982D-000393A564E6@hatcher.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <36560F70-0F4D-11D9-AF43-000393A564E6@hatcher.net>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@hatcher.net>
Subject: Re: Keyword query confusion
Date: Sat, 25 Sep 2004 19:47:08 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Sep 25, 2004, at 5:59 AM, Erik Hatcher wrote:
> On Sep 24, 2004, at 12:26 PM, Fred Toth wrote:
>> I'm trying to understand what's going on with the query parser
>> and keyword fields.
>
> It's a confusing situation, for sure.
>
>> I've got a large subset of my documents which are "publications".
>> So as to be able to query these, I've got this in the indexer:
>>
>> doc.add(Field.Keyword("is_pub", "1"));
>>
>> However, if I run a query:
>>
>> 	is_pub:1
>>
>> I get no hits. If I find a document by other means and dump the
>> fields, the "is_pub" keyword is there, with value of "1".
>
> As already stated - it is the analyzer eating the "1".  Every field is 
> analyzed by QueryParser, but during indexing Field.Keyword fields are 
> not indexed.

Typo correction:  "during indexing Field.Keyword fields are not" 
*analyzed*


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10444-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Sep 26 07:42:33 2004
Return-Path: <lucene-user-return-10444-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 77104 invoked from network); 26 Sep 2004 07:42:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 26 Sep 2004 07:42:33 -0000
Received: (qmail 28446 invoked by uid 500); 26 Sep 2004 07:42:32 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 28001 invoked by uid 500); 26 Sep 2004 07:42:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 27988 invoked by uid 99); 26 Sep 2004 07:42:28 -0000
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [205.158.62.67] (HELO webmail-outgoing.us4.outblaze.com) (205.158.62.67)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 26 Sep 2004 00:42:27 -0700
Received: from wfilter.us4.outblaze.com (wfilter.us4.outblaze.com [205.158.62.180])
	by webmail-outgoing.us4.outblaze.com (Postfix) with QMQP id CC0001800321
	for <lucene-user@jakarta.apache.org>; Sun, 26 Sep 2004 07:42:26 +0000 (GMT)
X-OB-Received: from unknown (205.158.62.81)
  by wfilter.us4.outblaze.com; 26 Sep 2004 07:42:26 -0000
Received: by ws1-2.us4.outblaze.com (Postfix, from userid 1001)
	id B32B01F50B1; Sun, 26 Sep 2004 07:42:26 +0000 (GMT)
Content-Type: text/plain; charset="iso-8859-1"
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
MIME-Version: 1.0
X-Mailer: MIME-tools 5.41 (Entity 5.404)
Received: from [213.116.247.217] by ws1-2.us4.outblaze.com with http for
    reza2@email.com; Sun, 26 Sep 2004 09:42:26 +0200
From: "mohammad azadi" <reza2@email.com>
To: lucene-user@jakarta.apache.org
Date: Sun, 26 Sep 2004 09:42:26 +0200
Subject: QueryParser removes "\" when searching in Persian
X-Originating-Ip: 213.116.247.217
X-Originating-Server: ws1-2.us4.outblaze.com
Message-Id: <20040926074226.B32B01F50B1@ws1-2.us4.outblaze.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

To be able to search in Persian, I convert the original query from a form field which is in the XML CharRefs formt, e.g. "&#1575;&#1610;&#1585;&#1575;&#1606;", to "\u0627\u064a\u0631\u0627\u0646". since all websites i am indexing are using XML CharRefs it makes it possible to search in Persian. but when making a Query from "\u0627\u064a\u0631\u0627\u0646", it seems that QueryParser removes all backslashes (\). 

String qry = SomeExternalParser.parse("someQuery");
which will return : qry = "\u0627\u064a\u0631\u0627\u0646"

QueryParser queryParser = new QueryParser("fieldName", new StandardAnalyzer());
Query query = queryParser.parse(qry);

now query.toString() shows: [filedName]:"u0627u064au0631u0627u0646"

how can i prevent QueryParser doing this? i should mention that if i write the query as an String such as: String qry = "\u0627\u064a\u0631\u0627\u0646", then it works fine. but when i try to get the qry from another method or class, this strange behavior happens. 

cheers, reza

-- 
___________________________________________________________
Sign-up for Ads Free at Mail.com
http://promo.mail.com/adsfreejump.htm


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10445-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Sep 26 22:25:03 2004
Return-Path: <lucene-user-return-10445-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 25419 invoked from network); 26 Sep 2004 22:25:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 26 Sep 2004 22:25:03 -0000
Received: (qmail 26518 invoked by uid 500); 26 Sep 2004 22:24:55 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 26483 invoked by uid 500); 26 Sep 2004 22:24:54 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 26469 invoked by uid 99); 26 Sep 2004 22:24:54 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.239] (HELO web12702.mail.yahoo.com) (216.136.173.239)
  by apache.org (qpsmtpd/0.28) with SMTP; Sun, 26 Sep 2004 15:24:52 -0700
Message-ID: <20040926222451.4644.qmail@web12702.mail.yahoo.com>
Received: from [195.29.105.35] by web12702.mail.yahoo.com via HTTP; Sun, 26 Sep 2004 15:24:51 PDT
Date: Sun, 26 Sep 2004 15:24:51 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: a good html & script parser
To: Lucene Users List <lucene-user@jakarta.apache.org>,
  Chris Fraschetti <fraschetti@gmail.com>
In-Reply-To: <cbdebdf8040924232375abfbc4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I use NekoHTML and am happy with it.  I don't know about that
particular case.

Otis
http://www.simpy.com/ - full-text search your bookmarks

--- Chris Fraschetti <fraschetti@gmail.com> wrote:

> most of the html parsers I can find on the web handle only the <tag>
> syntax and forget about the { code } syntax that usually occurs in a
> lot of web pages.
> 
> Is there a good library to return the plain text of a html doc string
> which will eliminate more than simply the <tag> occurrance?
> 
> -- 
> ___________________________________________________
> Chris Fraschetti
> e fraschetti@gmail.com
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10446-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 27 15:14:11 2004
Return-Path: <lucene-user-return-10446-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 33886 invoked from network); 27 Sep 2004 15:14:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 27 Sep 2004 15:14:10 -0000
Received: (qmail 19650 invoked by uid 500); 27 Sep 2004 15:14:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 19615 invoked by uid 500); 27 Sep 2004 15:14:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 19597 invoked by uid 99); 27 Sep 2004 15:13:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [65.75.180.120] (HELO lorencia.naturalhost.com) (65.75.180.120)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 27 Sep 2004 08:13:58 -0700
Received: from 35-139-126-200.fibertel.com.ar ([200.126.139.35]:1549 helo=ernesto)
	by lorencia.naturalhost.com with esmtpa (Exim 4.42)
	id 1CBxCN-0007VN-Kr
	for lucene-user@jakarta.apache.org; Mon, 27 Sep 2004 08:13:56 -0700
Message-ID: <01f101c4a4a4$f3a5aed0$238b7ec8@ernesto>
From: "Ernesto De Santis" <ernesto.desantis@colaborativa.net>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: online and offline Directory
Date: Mon, 27 Sep 2004 12:16:21 -0300
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Antivirus-Scanner: Clean mail though you should still use an Antivirus
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - lorencia.naturalhost.com
X-AntiAbuse: Original Domain - jakarta.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - colaborativa.net
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello

I want administrate two index, one for online searches and another for index
process.

I want that the users search with a complete index, if I leave search at the
users over the same index that index process work, the users probabily see
an incomplete index.

For this I think, index process work in a "offline" index while the users
search in a online directory. When index process finish do the change.

Is my idea correct?
What is the best way to do this?

Thanks
Ernesto.



---
Outgoing mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.760 / Virus Database: 509 - Release Date: 10/09/2004


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10447-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 27 17:06:22 2004
Return-Path: <lucene-user-return-10447-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 6760 invoked from network); 27 Sep 2004 17:06:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 27 Sep 2004 17:06:22 -0000
Received: (qmail 48093 invoked by uid 500); 27 Sep 2004 17:06:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 48012 invoked by uid 500); 27 Sep 2004 17:06:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 47998 invoked by uid 99); 27 Sep 2004 17:06:13 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [134.67.208.33] (HELO myrtle.rtpnc.epa.gov) (134.67.208.33)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 27 Sep 2004 10:06:12 -0700
Received: from epahub11.rtp.epa.gov (epahub11.rtp.epa.gov [134.67.213.52])
 by epamail.epa.gov (PMDF V5.2-32 #42055)
 with ESMTP id <0I4P00LSBM2FYI@epamail.epa.gov> for
 lucene-user@jakarta.apache.org; Mon, 27 Sep 2004 13:03:51 -0400 (EDT)
Date: Mon, 27 Sep 2004 12:03:50 -0500
From: Balasubramanian.Vijay@epamail.epa.gov
Subject: RE: Highlighting PDF file after the search
To: Lucene Users List <lucene-user@jakarta.apache.org>
Message-id:
 <OF533B644F.92770D8A-ON86256F1C.005D8075-86256F1C.005DA7C6@epamail.epa.gov>
MIME-version: 1.0
X-Mailer: Lotus Notes Release 5.0.11   July 24, 2002
Content-type: text/plain; charset=US-ASCII
X-MIMETrack: Serialize by Router on EPAHUB11/USEPA/US(652HF103|July 23,
 2004) at 09/27/2004 01:03:51 PM
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Bruce,
You are right, i tried this morning and when i try to stream the
higlighter output as pdf, acrobat was not able to read or open it!!
Which project do you recommend that would do pdf highlighting?

Thanks,
Vijay Balasubramanian
DPRA Inc.,



                                                                                                                                   
                      Bruce Ritchie                                                                                                
                      <bruce@jivesoftwa        To:       Lucene Users List <lucene-user@jakarta.apache.org>                        
                      re.com>                  cc:                                                                                 
                                               Subject:  RE: Highlighting PDF file after the search                                
                      09/20/2004 05:35                                                                                             
                      PM                                                                                                           
                      Please respond to                                                                                            
                      Lucene Users List                                                                                            
                                                                                                                                   
                                                                                                                                   




> From: Balasubramanian.Vijay@epamail.epa.gov

> I can successfully index and search the PDF documents,
> however i am not able to highlight the searched text in my
> original PDF file (ie: like dtSearch highlights on original file)
>
> I took a look at the highlighter in sandbox, compiled it and
> have it ready.  I am wondering if this highlighter is for
> highlighting indexed documents or can it be used for PDF
> Files as is !  Please enlighten !

The highlighter code in sandbox can facilitate highlighting of text
*extracted* from the PDF, however it does nothing for you to highlight
search terms *inside* of the PDF. For that you will need some sort of
tool
that can modify the PDF on the fly as the user views it. I know of no
quick
and dirty tool that allows you to do this, though there is quite a few
projects and products which allow you to manipulate PDF files which
likely
can be used to obtain the behavior you are looking for (with some effort
on
your part).


Regards,

Bruce Ritchie




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10448-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 27 17:47:48 2004
Return-Path: <lucene-user-return-10448-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 29064 invoked from network); 27 Sep 2004 17:47:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 27 Sep 2004 17:47:48 -0000
Received: (qmail 16223 invoked by uid 500); 27 Sep 2004 17:47:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 15999 invoked by uid 500); 27 Sep 2004 17:47:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 15986 invoked by uid 99); 27 Sep 2004 17:47:40 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of tom@shopbloomfield.com designates 63.246.12.8 as permitted sender)
Received: from [63.246.12.8] (HELO shopbloomfield.com) (63.246.12.8)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 27 Sep 2004 10:47:38 -0700
Received: by shopbloomfield.com (Postfix, from userid 513)
	id DDB593B043; Mon, 27 Sep 2004 12:43:59 -0500 (CDT)
Received: from shopbloomfield.com (shopbloomfield.com [63.246.12.8])
	by shopbloomfield.com (Postfix) with ESMTP id 6FC0D3B041
	for <lucene-user@jakarta.apache.org>; Mon, 27 Sep 2004 12:43:57 -0500 (CDT)
Date: Mon, 27 Sep 2004 12:43:57 -0500 (CDT)
From: Bloomfield Nutrition <tom@shopbloomfield.com>
X-X-Sender: tom@epeopleplace.com
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: RE: Highlighting PDF file after the search
In-Reply-To: <20040927170245.E9CC73B043@shopbloomfield.com>
References: <20040927170245.E9CC73B043@shopbloomfield.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Level: 
Message-Id: <20040927174359.DDB593B043@shopbloomfield.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

This might be a good candidate for using Apache Cocoon and XSLT to
create PDF's on the fly.

Add a transformer to your cocoon XSLT to recognize the tags
(<em>, <strong> etc).  Then when rendering results, Cocoon transforms
those tags to valid PDF highlight tags, and produces a new, valid PDF
file.

See http://cocoon.apache.org/2.1/howto/howto-html-pdf-publishing.html

Good luck!
Tom

On Mon, 27 Sep 2004 Balasubramanian.Vijay@epamail.epa.gov wrote:

> Bruce,
> You are right, i tried this morning and when i try to stream the
> higlighter output as pdf, acrobat was not able to read or open it!!
> Which project do you recommend that would do pdf highlighting?
>
> Thanks,
> Vijay Balasubramanian
> DPRA Inc.,
>
>
>
>
>                       Bruce Ritchie
>                       <bruce@jivesoftwa        To:       Lucene Users List <lucene-user@jakarta.apache.org>
>                       re.com>                  cc:
>                                                Subject:  RE: Highlighting PDF file after the search
>                       09/20/2004 05:35
>                       PM
>                       Please respond to
>                       Lucene Users List
>
>
>
>
>
>
> > From: Balasubramanian.Vijay@epamail.epa.gov
>
> > I can successfully index and search the PDF documents,
> > however i am not able to highlight the searched text in my
> > original PDF file (ie: like dtSearch highlights on original file)
> >
> > I took a look at the highlighter in sandbox, compiled it and
> > have it ready.  I am wondering if this highlighter is for
> > highlighting indexed documents or can it be used for PDF
> > Files as is !  Please enlighten !
>
> The highlighter code in sandbox can facilitate highlighting of text
> *extracted* from the PDF, however it does nothing for you to highlight
> search terms *inside* of the PDF. For that you will need some sort of
> tool
> that can modify the PDF on the fly as the user views it. I know of no
> quick
> and dirty tool that allows you to do this, though there is quite a few
> projects and products which allow you to manipulate PDF files which
> likely
> can be used to obtain the behavior you are looking for (with some effort
> on
> your part).
>
>
> Regards,
>
> Bruce Ritchie
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10449-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 27 17:48:11 2004
Return-Path: <lucene-user-return-10449-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 29330 invoked from network); 27 Sep 2004 17:48:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 27 Sep 2004 17:48:11 -0000
Received: (qmail 17042 invoked by uid 500); 27 Sep 2004 17:48:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 16962 invoked by uid 500); 27 Sep 2004 17:48:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 16948 invoked by uid 99); 27 Sep 2004 17:48:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [141.156.69.115] (HELO mail.infosciences.com) (141.156.69.115)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 27 Sep 2004 10:47:58 -0700
Received: from Aviran (unknown [141.156.69.109])
	by mail.infosciences.com (Postfix) with ESMTP id B8C5C118308
	for <lucene-user@jakarta.apache.org>; Mon, 27 Sep 2004 13:49:38 -0400 (EDT)
From: "Aviran" <amordo@infosciences.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: online and offline Directory
Date: Mon, 27 Sep 2004 13:46:04 -0400
Message-ID: <005a01c4a4b9$df884010$6a00a8c0@Aviran>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
In-Reply-To: <01f101c4a4a4$f3a5aed0$238b7ec8@ernesto>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

You don't need to maintain 2 indexes.
You can search on an index while adding more documents to it.
All you have to do is to check if whether the index has changed since =
the
last time you got an instance of Index Reader, and if it has, just get a =
new
Index Reader.

Aviran

-----Original Message-----
From: Ernesto De Santis [mailto:ernesto.desantis@colaborativa.net]=20
Sent: Monday, September 27, 2004 11:16 AM
To: Lucene Users List
Subject: online and offline Directory


Hello

I want administrate two index, one for online searches and another for =
index
process.

I want that the users search with a complete index, if I leave search at =
the
users over the same index that index process work, the users probabily =
see
an incomplete index.

For this I think, index process work in a "offline" index while the =
users
search in a online directory. When index process finish do the change.

Is my idea correct?
What is the best way to do this?

Thanks
Ernesto.



---
Outgoing mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.760 / Virus Database: 509 - Release Date: 10/09/2004


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10450-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 27 18:37:47 2004
Return-Path: <lucene-user-return-10450-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 61563 invoked from network); 27 Sep 2004 18:37:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 27 Sep 2004 18:37:47 -0000
Received: (qmail 12187 invoked by uid 500); 27 Sep 2004 18:37:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 12141 invoked by uid 500); 27 Sep 2004 18:37:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 12126 invoked by uid 99); 27 Sep 2004 18:37:33 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of ben@csh.rit.edu designates 129.21.60.6 as permitted sender)
Received: from [129.21.60.6] (HELO blacksheep.csh.rit.edu) (129.21.60.6)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 27 Sep 2004 11:37:31 -0700
Received: from fury.csh.rit.edu (fury.csh.rit.edu [IPv6:2001:470:1f00:135:a00:20ff:fe8d:5399])
	by blacksheep.csh.rit.edu (Postfix) with ESMTP id 819CE91D0
	for <lucene-user@jakarta.apache.org>; Mon, 27 Sep 2004 14:37:30 -0400 (EDT)
Received: by fury.csh.rit.edu (Postfix, from userid 38448)
	id 3B4C814A7; Mon, 27 Sep 2004 14:37:29 -0400 (EDT)
Received: from localhost (localhost [127.0.0.1])
	by fury.csh.rit.edu (Postfix) with ESMTP id 179A414A6
	for <lucene-user@jakarta.apache.org>; Mon, 27 Sep 2004 14:37:29 -0400 (EDT)
Date: Mon, 27 Sep 2004 14:37:28 -0400 (EDT)
From: Ben Litchfield <ben@csh.rit.edu>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: RE: Highlighting PDF file after the search
In-Reply-To: <OF533B644F.92770D8A-ON86256F1C.005D8075-86256F1C.005DA7C6@epamail.epa.gov>
Message-ID: <Pine.GSO.4.53.0409271428410.5851@fury.csh.rit.edu>
References: <OF533B644F.92770D8A-ON86256F1C.005D8075-86256F1C.005DA7C6@epamail.epa.gov>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


With some work this is possible with PDFBox.  PDFBox extracts text with
positioning and sizing.  When the text was found you could add to the page
content stream the drawing of a highlighted box.

PDFBox has an open RFE for this functionality, please monitor it for
progress.

http://sourceforge.net/tracker/index.php?func=detail&aid=1035635&group_id=78314&atid=552835

Ben

On Mon, 27 Sep 2004 Balasubramanian.Vijay@epamail.epa.gov wrote:

> Bruce,
> You are right, i tried this morning and when i try to stream the
> higlighter output as pdf, acrobat was not able to read or open it!!
> Which project do you recommend that would do pdf highlighting?
>
> Thanks,
> Vijay Balasubramanian
> DPRA Inc.,
>
>
>
>
>                       Bruce Ritchie
>                       <bruce@jivesoftwa        To:       Lucene Users List <lucene-user@jakarta.apache.org>
>                       re.com>                  cc:
>                                                Subject:  RE: Highlighting PDF file after the search
>                       09/20/2004 05:35
>                       PM
>                       Please respond to
>                       Lucene Users List
>
>
>
>
>
>
> > From: Balasubramanian.Vijay@epamail.epa.gov
>
> > I can successfully index and search the PDF documents,
> > however i am not able to highlight the searched text in my
> > original PDF file (ie: like dtSearch highlights on original file)
> >
> > I took a look at the highlighter in sandbox, compiled it and
> > have it ready.  I am wondering if this highlighter is for
> > highlighting indexed documents or can it be used for PDF
> > Files as is !  Please enlighten !
>
> The highlighter code in sandbox can facilitate highlighting of text
> *extracted* from the PDF, however it does nothing for you to highlight
> search terms *inside* of the PDF. For that you will need some sort of
> tool
> that can modify the PDF on the fly as the user views it. I know of no
> quick
> and dirty tool that allows you to do this, though there is quite a few
> projects and products which allow you to manipulate PDF files which
> likely
> can be used to obtain the behavior you are looking for (with some effort
> on
> your part).
>
>
> Regards,
>
> Bruce Ritchie
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10451-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 27 18:48:46 2004
Return-Path: <lucene-user-return-10451-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 67487 invoked from network); 27 Sep 2004 18:48:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 27 Sep 2004 18:48:46 -0000
Received: (qmail 36782 invoked by uid 500); 27 Sep 2004 18:48:37 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 36624 invoked by uid 500); 27 Sep 2004 18:48:35 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 36459 invoked by uid 99); 27 Sep 2004 18:48:33 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [65.75.180.120] (HELO lorencia.naturalhost.com) (65.75.180.120)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 27 Sep 2004 11:48:32 -0700
Received: from 35-139-126-200.fibertel.com.ar ([200.126.139.35]:1961 helo=ernesto)
	by lorencia.naturalhost.com with esmtpa (Exim 4.42)
	id 1CC0Y3-0001RO-RW
	for lucene-user@jakarta.apache.org; Mon, 27 Sep 2004 11:48:32 -0700
Message-ID: <02ee01c4a4c2$eecf4bf0$238b7ec8@ernesto>
From: "Ernesto De Santis" <ernesto.desantis@colaborativa.net>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <005a01c4a4b9$df884010$6a00a8c0@Aviran>
Subject: Re: online and offline Directory
Date: Mon, 27 Sep 2004 15:50:56 -0300
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Antivirus-Scanner: Clean mail though you should still use an Antivirus
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - lorencia.naturalhost.com
X-AntiAbuse: Original Domain - jakarta.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - colaborativa.net
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Aviran

Thanks for response.

I forgot important information for you understand my issue.

My process do some like this:
The index have contents from differents sources, identified for a special
field 'source'.
Then the index have documents with source: S1 or source: S2 ... etc.

When I reindex the source S1, first delete all documents with source: S1, in
otherwise I have the index with repeated content. Then add the new index
result.
In the middle of process the IndexSearcher use an incomplete index.

Is posible do it like a data base transaction?

Bye
Ernesto.

----- Original Message ----- 
From: "Aviran" <amordo@infosciences.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Sent: Monday, September 27, 2004 2:46 PM
Subject: RE: online and offline Directory


You don't need to maintain 2 indexes.
You can search on an index while adding more documents to it.
All you have to do is to check if whether the index has changed since the
last time you got an instance of Index Reader, and if it has, just get a new
Index Reader.

Aviran

-----Original Message-----
From: Ernesto De Santis [mailto:ernesto.desantis@colaborativa.net]
Sent: Monday, September 27, 2004 11:16 AM
To: Lucene Users List
Subject: online and offline Directory


Hello

I want administrate two index, one for online searches and another for index
process.

I want that the users search with a complete index, if I leave search at the
users over the same index that index process work, the users probabily see
an incomplete index.

For this I think, index process work in a "offline" index while the users
search in a online directory. When index process finish do the change.

Is my idea correct?
What is the best way to do this?

Thanks
Ernesto.



---
Outgoing mail is certified Virus Free.
Checked by AVG anti-virus system (http://www.grisoft.com).
Version: 6.0.760 / Virus Database: 509 - Release Date: 10/09/2004


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10452-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 27 21:46:49 2004
Return-Path: <lucene-user-return-10452-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 81106 invoked from network); 27 Sep 2004 21:46:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 27 Sep 2004 21:46:48 -0000
Received: (qmail 76304 invoked by uid 500); 27 Sep 2004 21:46:37 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 76199 invoked by uid 500); 27 Sep 2004 21:46:36 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 76164 invoked by uid 99); 27 Sep 2004 21:46:36 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [206.162.161.114] (HELO exmtl01.nstein.com) (206.162.161.114)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 27 Sep 2004 14:46:34 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.0.6556.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: WordListLoader's whereabouts
Date: Mon, 27 Sep 2004 17:46:31 -0400
Message-ID: <CB6D77A564237E43B4C7EF9A6132CD43049D12@exmtl01.nstein.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: WordListLoader's whereabouts
Thread-Index: AcSk23QA48irl43OQyW/zwzP8JQ+qA==
From: "Tate Avery" <tate.avery@nstein.com>
To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

I am trying to compile the analyzers from the Lucene sandbox =
contributions.  Many of them seem to import =
org.apache.lucene.analysis.WordlistLoader which is not currently in my =
classpath.

Does anyone know where I can find this class?  It does not appear to be =
in Lucene 1.4, so I am assuming it is another contribution perhaps?  Any =
help in tracking it down would be appreciated.

Also, some of the analyzers appear to have their own copy of this class =
(i.e. org.apache.lucene.analysis.nl.WordlistLoader).  Could I just =
relocate that one to the shared package, perhaps?

Thanks,
Tate

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10453-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 27 22:03:01 2004
Return-Path: <lucene-user-return-10453-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 89508 invoked from network); 27 Sep 2004 22:03:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 27 Sep 2004 22:03:01 -0000
Received: (qmail 3658 invoked by uid 500); 27 Sep 2004 22:02:52 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 3548 invoked by uid 500); 27 Sep 2004 22:02:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 3535 invoked by uid 99); 27 Sep 2004 22:02:50 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [207.162.57.26] (HELO hercule.cirano.qc.ca) (207.162.57.26)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 27 Sep 2004 15:02:49 -0700
Received: from localhost (vauchers@localhost)
	by hercule.cirano.qc.ca (8.11.6/8.11.0) with ESMTP id i8RM2kR15232
	for <lucene-user@jakarta.apache.org>; Mon, 27 Sep 2004 18:02:47 -0400
X-Authentication-Warning: hercule.cirano.qc.ca: vauchers owned process doing -bs
Date: Mon, 27 Sep 2004 18:02:46 -0400 (EDT)
From: Stephane James Vaucher <vauchers@cirano.qc.ca>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: WordListLoader's whereabouts
In-Reply-To: <CB6D77A564237E43B4C7EF9A6132CD43049D12@exmtl01.nstein.com>
Message-ID: <Pine.LNX.4.33.0409271756120.10684-100000@hercule.cirano.qc.ca>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Tate,

>From the commit:
http://www.mail-archive.com/lucene-dev@jakarta.apache.org/msg06510.html

I'd say you can use the german WordListLoader (renaming it or using a
nightly cvs version of the refactored class). I think there might be a
versionning issue here as from:

http://wiki.apache.org/jakarta-lucene/Lucene2Whiteboard

It is mentionned that:
DONE: Move language-specific analyzers into separate downloads. Also move
analysis/de/WordlistLoader.java one level upwards, as it's not specific to
German at all.

That should be only applicable for lucene 1.9... Last version comment for
BrazilianAnalyzer:

"move the word list loader from analysis.de to analysis, as it is not
specific to German at all; update the references to it"

HTH,
sv

On Mon, 27 Sep 2004, Tate Avery wrote:

> Hello,
>
> I am trying to compile the analyzers from the Lucene sandbox
> contributions.  Many of them seem to import
> org.apache.lucene.analysis.WordlistLoader which is not currently in my
> classpath.
>
> Does anyone know where I can find this class?  It does not appear to be in Lucene 1.4, so I am assuming it is another contribution perhaps?  Any help in tracking it down would be appreciated.
>
> Also, some of the analyzers appear to have their own copy of this class
> (i.e. org.apache.lucene.analysis.nl.WordlistLoader).  Could I just
> relocate that one to the shared package, perhaps?
>
> Thanks,
> Tate
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10454-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Sep 27 22:32:16 2004
Return-Path: <lucene-user-return-10454-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 3888 invoked from network); 27 Sep 2004 22:32:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 27 Sep 2004 22:32:15 -0000
Received: (qmail 36118 invoked by uid 500); 27 Sep 2004 22:32:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 35929 invoked by uid 500); 27 Sep 2004 22:32:08 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 35914 invoked by uid 99); 27 Sep 2004 22:32:08 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=FROM_ENDS_IN_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.148.212.184] (HELO w02.bloglines.com) (216.148.212.184)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 27 Sep 2004 15:32:07 -0700
Received: (qmail 24449 invoked by uid 99); 27 Sep 2004 22:32:06 -0000
Message-ID: <1096324326.2042253607.24448.sendItem@bloglines.com>
Date: 27 Sep 2004 22:32:06 -0000
From: yahootintin.1247688@bloglines.com
To: lucene-user@jakarta.apache.org
Subject: Sorting Info
MIME-Version: 1.0
Content-Type: text/plain
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I'm interested in doing sorting in Lucene.  Is there a FAQ or an article that
will show me how to do this?  I already have my indexing and searching working.


Thanks!

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10455-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 28 00:02:47 2004
Return-Path: <lucene-user-return-10455-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 40906 invoked from network); 28 Sep 2004 00:02:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Sep 2004 00:02:47 -0000
Received: (qmail 40687 invoked by uid 500); 28 Sep 2004 00:02:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 40621 invoked by uid 500); 28 Sep 2004 00:02:39 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 40605 invoked by uid 99); 28 Sep 2004 00:02:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of crodriguez@gmail.com designates 64.233.170.206 as permitted sender)
Received: from [64.233.170.206] (HELO mproxy.gmail.com) (64.233.170.206)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 27 Sep 2004 17:02:38 -0700
Received: by mproxy.gmail.com with SMTP id 75so12207rnk
        for <lucene-user@jakarta.apache.org>; Mon, 27 Sep 2004 17:02:36 -0700 (PDT)
Received: by 10.38.59.51 with SMTP id h51mr455945rna;
        Mon, 27 Sep 2004 17:02:36 -0700 (PDT)
Received: by 10.38.86.14 with HTTP; Mon, 27 Sep 2004 17:02:36 -0700 (PDT)
Message-ID: <ce6cc8cf040927170291df4a3@mail.gmail.com>
Date: Mon, 27 Sep 2004 21:02:36 -0300
From: Christian Rodriguez <crodriguez@gmail.com>
Reply-To: Christian Rodriguez <crodriguez@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Shouldnt IndexWriter.flushRamSegments() be public? or at least protected?
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

I am trying to use transactions with the Lucene + BDB package. I want
to be able to open a directory, and IndexWriter and then do things
like:

open IndexWriter
start transaction 1
write something to the index
commit transaction 1 (or abort it)
start transaction 2
write something else to the index
commit transaction 2
etc...
close IndexWriter 
and everything else that needs to be closed

Now the problem I have is that I dont have a way to force a flush of
the IndexWriter without closing it and I need to do that before
commiting a transaction or I would get random errors. Shouldnt that
function be public, in case the user wants to force a flush at some
point that is not when the IndexWriter is closed? If not I am forced
to create a new IndexWriter and close it EVERY TIME I commit a
transaction (which in my application is very often).

I thought about creating a subclass of IndexWriter (something like
DbIndexWriter) that implements a flush function but everything I need
from IndexWriter is private (not even protected!) so I cant do this.

Any pointers or solutions to this problem? (Of course I would prefer
not to touch Lucene's code and make flushRamSegments() public myself,
since I dont want to break my code every time I update Lucene,
although I dont see why the user shouldnt be allow to flush segments
to the directory if they decide to... if it ruins the performance,
thats their call).

Thanks!
Xtian

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10456-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 28 07:12:36 2004
Return-Path: <lucene-user-return-10456-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 18554 invoked from network); 28 Sep 2004 07:12:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Sep 2004 07:12:36 -0000
Received: (qmail 99319 invoked by uid 500); 28 Sep 2004 07:12:26 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 99280 invoked by uid 500); 28 Sep 2004 07:12:26 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 99257 invoked by uid 99); 28 Sep 2004 07:12:26 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_60_70,HTML_MESSAGE,HTML_TEXT_AFTER_BODY,HTML_TEXT_AFTER_HTML
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [212.117.152.141] (HELO outmail.amdocs.com) (212.117.152.141)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 28 Sep 2004 00:12:25 -0700
Received: from omail1.amdocs.com (omail.amdocs.com [80.179.114.1])
	by outmail.amdocs.com (8.12.9/8.12.9) with ESMTP id i8S8CW12007573
	for <lucene-user@jakarta.apache.org>; Tue, 28 Sep 2004 10:12:32 +0200
Received: from tlvmail7.corp.amdocs.com (localhost [127.0.0.1])
	by omail1.amdocs.com (8.12.11/8.12.11) with ESMTP id i8SABILC009230
	for <lucene-user@jakarta.apache.org>; Tue, 28 Sep 2004 12:11:18 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C4A52A.795EAA41"
Subject: Hebrew support
Date: Tue, 28 Sep 2004 09:12:11 +0200
Message-ID: <77D8711AC919F24FBB698EE60D6034A80D1005@tlvmail7.corp.amdocs.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Hebrew support
Thread-Index: AcSlKnmJmDzyPnsPRjC0gbxwqwOIVQ==
From: "Alex Kiselevski" <ALEXKIS@Amdocs.com>
To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C4A52A.795EAA41
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable


Hello,
Do you know something about hebrew support in Lucene
Thanks in advance

Alex Kiselevsky
 Speech Technology		Tel:	972-9-776-43-46
R&D, Amdocs - Israel		Mobile:	972-53-63 50 38
mailto:alexkis@amdocs.com




The information contained in this message is proprietary of Amdocs,
protected from disclosure, and may be privileged.
The information is intended to be conveyed only to the designated=
 recipient(s)
of the message. If the reader of this message is not the intended=
 recipient,
you are hereby notified that any dissemination, use, distribution or=
 copying of=0D
this communication is strictly prohibited and may be unlawful.=0D
If you have received this communication in error, please notify us=
 immediately
by replying to the message and deleting it from your computer.
Thank you.
------_=_NextPart_001_01C4A52A.795EAA41--

From lucene-user-return-10457-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 28 07:23:30 2004
Return-Path: <lucene-user-return-10457-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 29587 invoked from network); 28 Sep 2004 07:23:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Sep 2004 07:23:29 -0000
Received: (qmail 10499 invoked by uid 500); 28 Sep 2004 07:23:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 10355 invoked by uid 500); 28 Sep 2004 07:23:17 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 10341 invoked by uid 99); 28 Sep 2004 07:23:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 28 Sep 2004 00:23:17 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id 75E8123B93
	for <lucene-user@jakarta.apache.org>; Tue, 28 Sep 2004 09:23:20 +0200 (CEST)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 03818-07 for <lucene-user@jakarta.apache.org>;
 Tue, 28 Sep 2004 09:23:20 +0200 (CEST)
Received: from tucholsky.office.tanto.de (unknown [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP id 4CFC323B8F
	for <lucene-user@jakarta.apache.org>; Tue, 28 Sep 2004 09:23:20 +0200 (CEST)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id i8S7NEGL029816
	for <lucene-user@jakarta.apache.org>; Tue, 28 Sep 2004 09:23:14 +0200
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id i8S7NEZi029812;
	Tue, 28 Sep 2004 09:23:14 +0200
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16729.4450.233420.945249@tanto-xipolis.de>
Date: Tue, 28 Sep 2004 09:23:14 +0200
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: online and offline Directory
In-Reply-To: <02ee01c4a4c2$eecf4bf0$238b7ec8@ernesto>
References: <005a01c4a4b9$df884010$6a00a8c0@Aviran>
	<02ee01c4a4c2$eecf4bf0$238b7ec8@ernesto>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Ernesto De Santis writes:
> Hi Aviran
> 
> Thanks for response.
> 
> I forgot important information for you understand my issue.
> 
> My process do some like this:
> The index have contents from differents sources, identified for a special
> field 'source'.
> Then the index have documents with source: S1 or source: S2 ... etc.
> 
> When I reindex the source S1, first delete all documents with source: S1, in
> otherwise I have the index with repeated content. Then add the new index
> result.
> In the middle of process the IndexSearcher use an incomplete index.
> 
> Is posible do it like a data base transaction?
> 
It's not like a data base transcation but any index reader/searcher that
was opened before the changes won't see them until it's closed and reopened.
AFAIK that also applies to deletions though I never checked that.

So you have two options: a) use a second index for indexing, move the
indexes after the indexing is done and make sure indexreader/searcher
are closed and reopened after the move.
b) use one index and make sure that you do not open any index reader/searcher
during the update. Searches may only use already opened reader/searcher.

I guess it depends on index size, update frequency and so on, which 
szenario is easier to handle.
Given that the index isn't too large and update frequency is rather low, 
I'd use a second index. But you'll need to copy that index and should 
consider the time and disc IO needed for that.

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10458-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 28 08:14:09 2004
Return-Path: <lucene-user-return-10458-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 61868 invoked from network); 28 Sep 2004 08:14:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Sep 2004 08:14:08 -0000
Received: (qmail 64500 invoked by uid 500); 28 Sep 2004 08:13:40 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 64471 invoked by uid 500); 28 Sep 2004 08:13:39 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 64453 invoked by uid 99); 28 Sep 2004 08:13:39 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [205.158.62.199] (HELO ws6-3.us4.outblaze.com) (205.158.62.199)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 28 Sep 2004 01:13:37 -0700
Received: (qmail 30251 invoked from network); 28 Sep 2004 08:13:25 -0000
Received: from unknown (HELO ?192.168.1.102?) (erik@hatcher.net@68.169.41.169)
  by ws6-3.us4.outblaze.com with SMTP; 28 Sep 2004 08:13:25 -0000
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <1096324326.2042253607.24448.sendItem@bloglines.com>
References: <1096324326.2042253607.24448.sendItem@bloglines.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <4B830B7C-1126-11D9-9D7F-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Sorting Info
Date: Tue, 28 Sep 2004 04:13:35 -0400
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Sep 27, 2004, at 6:32 PM, yahootintin.1247688@bloglines.com wrote:
> I'm interested in doing sorting in Lucene.  Is there a FAQ or an  
> article that
> will show me how to do this?  I already have my indexing and searching  
> working.

 From IndexSearcher, use search(Query,Sort) method (or other variants  
that take a Sort):

	<http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/search/ 
Searcher.html#search(org.apache.lucene.search.Query,%20org.apache.lucene 
.search.Sort)>

Following the Javadocs for Sort should be (hopefully) self-explanatory.

Sorting is a pretty new feature, and is only described in Javadocs and  
this e-mail list as far as I know.  I wrote a pretty extensive section  
on sorting in Lucene in Action - http://www.manning.com/hatcher2 -  
which is primarily in Otis' hands right now (*nudge nudge*) and has  
been technical and copy edited.  In other words, LIA should be  
available in print 6-8 weeks (e-book in PDF format available much  
sooner) after Otis is done.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10459-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 28 09:46:46 2004
Return-Path: <lucene-user-return-10459-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 11001 invoked from network); 28 Sep 2004 09:46:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Sep 2004 09:46:46 -0000
Received: (qmail 8330 invoked by uid 500); 28 Sep 2004 09:46:37 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 8303 invoked by uid 500); 28 Sep 2004 09:46:37 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 8288 invoked by uid 99); 28 Sep 2004 09:46:37 -0000
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FROM_ENDS_IN_NUMS,HTML_30_40,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.218.93.175] (HELO web42007.mail.yahoo.com) (66.218.93.175)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 28 Sep 2004 02:46:34 -0700
Message-ID: <20040928094632.85543.qmail@web42007.mail.yahoo.com>
Received: from [219.64.141.223] by web42007.mail.yahoo.com via HTTP; Tue, 28 Sep 2004 02:46:32 PDT
Date: Tue, 28 Sep 2004 02:46:32 -0700 (PDT)
From: mahaveer jain <jainmahaveer23@yahoo.com>
Subject: Using lucene in Tomcat
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1620069412-1096364792=:81291"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0-1620069412-1096364792=:81291
Content-Type: text/plain; charset=us-ascii

Hi all,
 
I have implemented lucene search for my documents and db successfully.
 
Now my problem is, the index i created is indexing to my local disk, i want the index to be created with reference to my server.
 
Right now I index C:/tomcat/webapps/jetspeed/document, but I want to index wrt,  /jetspped/document.
 
Let me know if some one 

		
---------------------------------
Do you Yahoo!?
Y! Messenger - Communicate in real time. Download now.
--0-1620069412-1096364792=:81291--

From lucene-user-return-10460-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 28 09:55:00 2004
Return-Path: <lucene-user-return-10460-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 15072 invoked from network); 28 Sep 2004 09:55:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Sep 2004 09:55:00 -0000
Received: (qmail 25789 invoked by uid 500); 28 Sep 2004 09:54:47 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 25722 invoked by uid 500); 28 Sep 2004 09:54:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 25708 invoked by uid 99); 28 Sep 2004 09:54:46 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 28 Sep 2004 02:54:46 -0700
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 28 Sep 2004 11:56:22 +0200
Message-ID: <41593546.2030806@ifit.uni-klu.ac.at>
Date: Tue, 28 Sep 2004 11:56:22 +0200
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Using lucene in Tomcat
References: <20040928094632.85543.qmail@web42007.mail.yahoo.com>
In-Reply-To: <20040928094632.85543.qmail@web42007.mail.yahoo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 28 Sep 2004 09:56:22.0572 (UTC) FILETIME=[68F76EC0:01C4A541]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

mahaveer jain wrote:

>Hi all,
> 
>I have implemented lucene search for my documents and db successfully.
> 
>Now my problem is, the index i created is indexing to my local disk, i want the index to be created with reference to my server.
> 
>Right now I index C:/tomcat/webapps/jetspeed/document, but I want to index wrt,  /jetspped/document.
>  
>
maybe you can create a small method to convert

"/jetspped/document" to a File object and then call toStringMethod and pass to indexer.  


> 
>Let me know if some one 
>
>		
>---------------------------------
>Do you Yahoo!?
>Y! Messenger - Communicate in real time. Download now.
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10461-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 28 10:49:54 2004
Return-Path: <lucene-user-return-10461-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 40540 invoked from network); 28 Sep 2004 10:49:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Sep 2004 10:49:53 -0000
Received: (qmail 15009 invoked by uid 500); 28 Sep 2004 10:49:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 14872 invoked by uid 500); 28 Sep 2004 10:49:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 14857 invoked by uid 99); 28 Sep 2004 10:49:43 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [192.38.202.200] (HELO hasseris.netnord.dk) (192.38.202.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 28 Sep 2004 03:49:43 -0700
Received: from [10.10.70.118] by hasseris.netnord.dk
          (Post.Office MTA v3.5.1 release 219 ID# 0-52465U1200L200S0V35)
          with ESMTP id dk for <lucene-user@jakarta.apache.org>;
          Tue, 28 Sep 2004 12:49:40 +0200
Message-ID: <415941C4.1080700@atira.dk>
Date: Tue, 28 Sep 2004 12:49:40 +0200
From: Bo Gundersen <bg@atira.dk>
Organization: Atira Aps
User-Agent: Mozilla Thunderbird 0.7.2 (Windows/20040707)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  lucene-user@jakarta.apache.org
Subject: Accent filter
Content-Type: multipart/mixed;
 boundary="------------020901090205020403080309"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--------------020901090205020403080309
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit

Hi,

I am certainly not the first, and probably not the last, that have had 
problems with accented characters in my index. But unfortunately I 
couldnt find anything in neither lucene nor the lucene-sandbox to solve 
the problem.
S I wrote an accent filter and thought that I might as well share it 
with you guys :)

-- 
Bo Gundersen
DBA/Software Developer
M.Sc.CS.
www.atira.dk


--------------020901090205020403080309
Content-Type: text/plain;
 name="AccentFilter.java"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline;
 filename="AccentFilter.java"

package dk.atira.search;

import java.io.IOException;
import java.util.Collection;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Map;
import org.apache.lucene.analysis.Token;
import org.apache.lucene.analysis.TokenFilter;
import org.apache.lucene.analysis.TokenStream;

/**
 * This filter converts accent characters to their non-accented versions.
 * Also it strips unwanted characters from the tokens, mening anything 
 * but A-Z,a-z,0-9, and -
 * The valid characters can be changed by adding them to the string validCharsStr.
 * 
 * Created by Bo Gundersen at Sep 28, 2004 12:39:04 PM 
 *
 * @author Bo Gundersen (bg@atira.dk)
 */
public class AccentFilter
		extends TokenFilter
	{
		private static final Collection validChars = new HashSet();
		private static final String validCharsStr = 
			"abcdefghijklmnopqrstuvwxyz\u00E6\u00F8\u00E5" +
			"ABCDEFGHIJKLMNOPQRSTUVWXYZ\u00C6\u00D8\u00C5" +
			"0123456789" +
			"-";
		static {
			for(int i=0; i<validCharsStr.length(); i++)
				validChars.add(new Character(validCharsStr.charAt(i)));
		}
		
		private static final Map accents = new HashMap();
		static {
			accents.put(new Character('\u00C0'), "A");
			accents.put(new Character('\u00C1'), "A");
			accents.put(new Character('\u00C2'), "A");
			accents.put(new Character('\u00C3'), "A");
			accents.put(new Character('\u00E0'), "a");
			accents.put(new Character('\u00E1'), "a");
			accents.put(new Character('\u00E2'), "a");
			accents.put(new Character('\u00E3'), "a");
			accents.put(new Character('\u00E4'), "a");
			
			accents.put(new Character('\u00C8'), "E");
			accents.put(new Character('\u00C9'), "E");
			accents.put(new Character('\u00CA'), "E");
			accents.put(new Character('\u00CB'), "E");
			accents.put(new Character('\u00E8'), "e");
			accents.put(new Character('\u00E9'), "e");
			accents.put(new Character('\u00EA'), "e");
			accents.put(new Character('\u00EB'), "e");

			accents.put(new Character('\u00CC'), "I");
			accents.put(new Character('\u00CD'), "I");
			accents.put(new Character('\u00CE'), "I");
			accents.put(new Character('\u00CF'), "I");
			accents.put(new Character('\u00EC'), "i");
			accents.put(new Character('\u00ED'), "i");
			accents.put(new Character('\u00EE'), "i");
			accents.put(new Character('\u00EF'), "i");

			accents.put(new Character('\u00D1'), "N");
			accents.put(new Character('\u00F1'), "n");
			
			accents.put(new Character('\u00D2'), "O");
			accents.put(new Character('\u00D3'), "O");
			accents.put(new Character('\u00D4'), "O");
			accents.put(new Character('\u00D5'), "O");
			accents.put(new Character('\u00D6'), "O");
			accents.put(new Character('\u00F2'), "o");
			accents.put(new Character('\u00F3'), "o");
			accents.put(new Character('\u00F4'), "o");
			accents.put(new Character('\u00F5'), "o");
			accents.put(new Character('\u00F6'), "o");
			
			accents.put(new Character('\u00D9'), "U");
			accents.put(new Character('\u00DA'), "U");
			accents.put(new Character('\u00DB'), "U");
			accents.put(new Character('\u00DC'), "U");
			accents.put(new Character('\u00F9'), "u");
			accents.put(new Character('\u00FA'), "u");
			accents.put(new Character('\u00FB'), "u");
			accents.put(new Character('\u00FC'), "u");
			
			accents.put(new Character('\u00DD'), "Y");
			accents.put(new Character('\u00FD'), "y");
			accents.put(new Character('\u00FF'), "y");
			
			accents.put(new Character('\u00C6'), "AE");
			accents.put(new Character('\u00E6'), "ae");
			accents.put(new Character('\u00D8'), "OE");
			accents.put(new Character('\u00F8'), "oe");
			accents.put(new Character('\u00C5'), "AA");
			accents.put(new Character('\u00E5'), "aa");
		}
		
		private Token token = null;

		public AccentFilter(TokenStream in)
		{
			super(in);
		}

		public Token next()
			throws IOException
		{
			if ((token = input.next()) == null)
				return null;
			String s = process(token.termText());
			if (!s.equals(token.termText())) {
				return new Token(s, token.startOffset(), token.endOffset(), token.type());
			} else {
				return token;
			}
		}

		private String process(String str)
		{
			StringBuffer sb = new StringBuffer(str);
			// First check for accents
			for(int i=0; i<sb.length(); i++) {
				Character c = new Character(sb.charAt(i));
				String rep = (String)accents.get(c);
				if(rep != null)
					sb.replace(i, i+1, rep);
			}
				
			// Then check for blocked chars
			for(int i=0; i<sb.length(); i++) {
				Character c = new Character(sb.charAt(i));
				if(!validChars.contains(c))
					sb.replace(i, i--+1, "");
			}
			return sb.toString();
		}
		
	}

--------------020901090205020403080309
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
--------------020901090205020403080309--

From lucene-user-return-10462-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 28 11:08:02 2004
Return-Path: <lucene-user-return-10462-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 50161 invoked from network); 28 Sep 2004 11:08:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Sep 2004 11:08:01 -0000
Received: (qmail 37629 invoked by uid 500); 28 Sep 2004 11:07:52 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 37608 invoked by uid 500); 28 Sep 2004 11:07:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 37595 invoked by uid 99); 28 Sep 2004 11:07:51 -0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [195.110.64.125] (HELO smtp.uk.colt.net) (195.110.64.125)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 28 Sep 2004 04:07:49 -0700
Received: from rte.ie (mx.rte.ie [217.173.98.209])
	by smtp.uk.colt.net (Postfix) with ESMTP id 9F6C741EB4
	for <lucene-user@jakarta.apache.org>; Tue, 28 Sep 2004 12:07:46 +0100 (BST)
Message-ID: <41594601.3030001@rte.ie>
Date: Tue, 28 Sep 2004 12:07:45 +0100
From: John Moylan <johnm@rte.ie>
User-Agent: Mozilla Thunderbird 0.8 (X11/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Accent filter
References: <415941C4.1080700@atira.dk>
In-Reply-To: <415941C4.1080700@atira.dk>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Loads of very well thought out ISO-8859 + French/Irish Filters available 
here too: (I think they are all GPL'd)

http://www.nongnu.org/sdx/

Best Regards,
JOhn

Bo Gundersen wrote:
> Hi,
> 
> I am certainly not the first, and probably not the last, that have had 
> problems with accented characters in my index. But unfortunately I 
> couldnt find anything in neither lucene nor the lucene-sandbox to solve 
> the problem.
> S I wrote an accent filter and thought that I might as well share it 
> with you guys :)
> 
> 
> ------------------------------------------------------------------------
> 
> package dk.atira.search;
> 
> import java.io.IOException;
> import java.util.Collection;
> import java.util.HashMap;
> import java.util.HashSet;
> import java.util.Map;
> import org.apache.lucene.analysis.Token;
> import org.apache.lucene.analysis.TokenFilter;
> import org.apache.lucene.analysis.TokenStream;
> 
> /**
>  * This filter converts accent characters to their non-accented versions.
>  * Also it strips unwanted characters from the tokens, mening anything 
>  * but A-Z,a-z,0-9, and -
>  * The valid characters can be changed by adding them to the string validCharsStr.
>  * 
>  * Created by Bo Gundersen at Sep 28, 2004 12:39:04 PM 
>  *
>  * @author Bo Gundersen (bg@atira.dk)
>  */
> public class AccentFilter
> 		extends TokenFilter
> 	{
> 		private static final Collection validChars = new HashSet();
> 		private static final String validCharsStr = 
> 			"abcdefghijklmnopqrstuvwxyz\u00E6\u00F8\u00E5" +
> 			"ABCDEFGHIJKLMNOPQRSTUVWXYZ\u00C6\u00D8\u00C5" +
> 			"0123456789" +
> 			"-";
> 		static {
> 			for(int i=0; i<validCharsStr.length(); i++)
> 				validChars.add(new Character(validCharsStr.charAt(i)));
> 		}
> 		
> 		private static final Map accents = new HashMap();
> 		static {
> 			accents.put(new Character('\u00C0'), "A");
> 			accents.put(new Character('\u00C1'), "A");
> 			accents.put(new Character('\u00C2'), "A");
> 			accents.put(new Character('\u00C3'), "A");
> 			accents.put(new Character('\u00E0'), "a");
> 			accents.put(new Character('\u00E1'), "a");
> 			accents.put(new Character('\u00E2'), "a");
> 			accents.put(new Character('\u00E3'), "a");
> 			accents.put(new Character('\u00E4'), "a");
> 			
> 			accents.put(new Character('\u00C8'), "E");
> 			accents.put(new Character('\u00C9'), "E");
> 			accents.put(new Character('\u00CA'), "E");
> 			accents.put(new Character('\u00CB'), "E");
> 			accents.put(new Character('\u00E8'), "e");
> 			accents.put(new Character('\u00E9'), "e");
> 			accents.put(new Character('\u00EA'), "e");
> 			accents.put(new Character('\u00EB'), "e");
> 
> 			accents.put(new Character('\u00CC'), "I");
> 			accents.put(new Character('\u00CD'), "I");
> 			accents.put(new Character('\u00CE'), "I");
> 			accents.put(new Character('\u00CF'), "I");
> 			accents.put(new Character('\u00EC'), "i");
> 			accents.put(new Character('\u00ED'), "i");
> 			accents.put(new Character('\u00EE'), "i");
> 			accents.put(new Character('\u00EF'), "i");
> 
> 			accents.put(new Character('\u00D1'), "N");
> 			accents.put(new Character('\u00F1'), "n");
> 			
> 			accents.put(new Character('\u00D2'), "O");
> 			accents.put(new Character('\u00D3'), "O");
> 			accents.put(new Character('\u00D4'), "O");
> 			accents.put(new Character('\u00D5'), "O");
> 			accents.put(new Character('\u00D6'), "O");
> 			accents.put(new Character('\u00F2'), "o");
> 			accents.put(new Character('\u00F3'), "o");
> 			accents.put(new Character('\u00F4'), "o");
> 			accents.put(new Character('\u00F5'), "o");
> 			accents.put(new Character('\u00F6'), "o");
> 			
> 			accents.put(new Character('\u00D9'), "U");
> 			accents.put(new Character('\u00DA'), "U");
> 			accents.put(new Character('\u00DB'), "U");
> 			accents.put(new Character('\u00DC'), "U");
> 			accents.put(new Character('\u00F9'), "u");
> 			accents.put(new Character('\u00FA'), "u");
> 			accents.put(new Character('\u00FB'), "u");
> 			accents.put(new Character('\u00FC'), "u");
> 			
> 			accents.put(new Character('\u00DD'), "Y");
> 			accents.put(new Character('\u00FD'), "y");
> 			accents.put(new Character('\u00FF'), "y");
> 			
> 			accents.put(new Character('\u00C6'), "AE");
> 			accents.put(new Character('\u00E6'), "ae");
> 			accents.put(new Character('\u00D8'), "OE");
> 			accents.put(new Character('\u00F8'), "oe");
> 			accents.put(new Character('\u00C5'), "AA");
> 			accents.put(new Character('\u00E5'), "aa");
> 		}
> 		
> 		private Token token = null;
> 
> 		public AccentFilter(TokenStream in)
> 		{
> 			super(in);
> 		}
> 
> 		public Token next()
> 			throws IOException
> 		{
> 			if ((token = input.next()) == null)
> 				return null;
> 			String s = process(token.termText());
> 			if (!s.equals(token.termText())) {
> 				return new Token(s, token.startOffset(), token.endOffset(), token.type());
> 			} else {
> 				return token;
> 			}
> 		}
> 
> 		private String process(String str)
> 		{
> 			StringBuffer sb = new StringBuffer(str);
> 			// First check for accents
> 			for(int i=0; i<sb.length(); i++) {
> 				Character c = new Character(sb.charAt(i));
> 				String rep = (String)accents.get(c);
> 				if(rep != null)
> 					sb.replace(i, i+1, rep);
> 			}
> 				
> 			// Then check for blocked chars
> 			for(int i=0; i<sb.length(); i++) {
> 				Character c = new Character(sb.charAt(i));
> 				if(!validChars.contains(c))
> 					sb.replace(i, i--+1, "");
> 			}
> 			return sb.toString();
> 		}
> 		
> 	}
> 
> 
> ------------------------------------------------------------------------
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org

******************************************************************************
The information in this e-mail is confidential and may be legally privileged.
It is intended solely for the addressee. Access to this e-mail by anyone else
is unauthorised. If you are not the intended recipient, any disclosure,
copying, distribution, or any action taken or omitted to be taken in reliance
on it, is prohibited and may be unlawful.
Please note that emails to, from and within RT may be subject to the Freedom
of Information Act 1997 and may be liable to disclosure.
******************************************************************************

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10463-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 28 15:26:32 2004
Return-Path: <lucene-user-return-10463-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 33637 invoked from network); 28 Sep 2004 15:26:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Sep 2004 15:26:32 -0000
Received: (qmail 99610 invoked by uid 500); 28 Sep 2004 15:26:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 99568 invoked by uid 500); 28 Sep 2004 15:26:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 99555 invoked by uid 99); 28 Sep 2004 15:26:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [141.156.69.115] (HELO mail.infosciences.com) (141.156.69.115)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 28 Sep 2004 08:26:18 -0700
Received: from Aviran (unknown [141.156.69.109])
	by mail.infosciences.com (Postfix) with ESMTP id 08F70118308
	for <lucene-user@jakarta.apache.org>; Tue, 28 Sep 2004 11:27:51 -0400 (EDT)
From: "Aviran" <amordo@infosciences.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Hebrew support
Date: Tue, 28 Sep 2004 11:24:27 -0400
Message-ID: <002501c4a56f$411fea20$6a00a8c0@Aviran>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
In-Reply-To: <77D8711AC919F24FBB698EE60D6034A80D1005@tlvmail7.corp.amdocs.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

As far as I know there is no Analyzer for Hebrew.


Aviran

-----Original Message-----
From: Alex Kiselevski [mailto:ALEXKIS@Amdocs.com] 
Sent: Tuesday, September 28, 2004 3:12 AM
To: lucene-user@jakarta.apache.org
Subject: Hebrew support



Hello,
Do you know something about hebrew support in Lucene
Thanks in advance

Alex Kiselevsky
 Speech Technology		Tel:	972-9-776-43-46
R&D, Amdocs - Israel		Mobile:	972-53-63 50 38
mailto:alexkis@amdocs.com




The information contained in this message is proprietary of Amdocs,
protected from disclosure, and may be privileged. The information is
intended to be conveyed only to the designated recipient(s) of the message.
If the reader of this message is not the intended recipient, you are hereby
notified that any dissemination, use, distribution or copying of

this communication is strictly prohibited and may be unlawful.

If you have received this communication in error, please notify us
immediately by replying to the message and deleting it from your computer.
Thank you.



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10464-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 28 15:53:42 2004
Return-Path: <lucene-user-return-10464-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 56676 invoked from network); 28 Sep 2004 15:53:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Sep 2004 15:53:42 -0000
Received: (qmail 59174 invoked by uid 500); 28 Sep 2004 15:53:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 59035 invoked by uid 500); 28 Sep 2004 15:53:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 58964 invoked by uid 99); 28 Sep 2004 15:53:14 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=HTML_40_50,HTML_MESSAGE,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [160.62.1.169] (HELO fw-mail12.novartis.com) (160.62.1.169)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 28 Sep 2004 08:53:12 -0700
Received: from mtap1.is.chbs ([192.37.33.20])
	by fw-mail12.novartis.com (Switch-3.1.6/Switch-3.1.6) with ESMTP id i8SFr5UC14065868
	for <lucene-user@jakarta.apache.org>; Tue, 28 Sep 2004 17:53:09 +0200
Received: from phchbs-s3026.EU.novartis.net (phchbs-s3026.eu.novartis.net [192.37.31.115])
	by mtap1.is.chbs (Switch-3.1.6/Switch-3.1.0) with ESMTP id i8SFr5eg12861454
	for <lucene-user@jakarta.apache.org>; Tue, 28 Sep 2004 17:53:05 +0200
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject:  PorterStemAnalyzer versus SnowballAnalyser?
MIME-Version: 1.0
Message-ID: <OF3B298EC7.14B00F4F-ONC1256F1D.005658D3-C1256F1D.00574139@EU.novartis.net>
From: iouli.golovatyi@group.novartis.com
Date: Tue, 28 Sep 2004 17:53:03 +0200
Content-Type: multipart/alternative; boundary="=_alternative 005740FEC1256F1D_="
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--=_alternative 005740FEC1256F1D_=
Content-Type: text/plain; charset="us-ascii"

I use PorterStemAnalyzer provided by Otis (see 
http://www.onjava.com/pub/a/onjava/2003/01/15/lucene.html?page=2,),
in 
http://cvs.apache.org/viewcvs.cgi/jakarta-lucene-sandbox/contributions/snowball/there 
are another implementations of porter algoritm. 
>From the first glance it looks some how very different.

What the difference/advantage/disadvantage in using Otis code or  one from 
lucene-sandbox Snowball

Thanks in advance
J.
--=_alternative 005740FEC1256F1D_=--

From lucene-user-return-10465-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 28 16:41:26 2004
Return-Path: <lucene-user-return-10465-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 89618 invoked from network); 28 Sep 2004 16:41:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Sep 2004 16:41:26 -0000
Received: (qmail 55851 invoked by uid 500); 28 Sep 2004 16:41:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 55796 invoked by uid 500); 28 Sep 2004 16:41:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 55781 invoked by uid 99); 28 Sep 2004 16:41:12 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 28 Sep 2004 09:41:10 -0700
Received: (qmail 68698 invoked by uid 89); 28 Sep 2004 16:41:05 -0000
Received: from unknown (HELO ?192.168.168.81?) (postmaster@cottrell-cutting.net@24.5.163.156)
  by londo.swishmail.com with AES256-SHA encrypted SMTP; 28 Sep 2004 16:41:05 -0000
Message-ID: <41599391.803@apache.org>
Date: Tue, 28 Sep 2004 09:38:41 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.2) Gecko/20040806
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Shouldnt IndexWriter.flushRamSegments() be public? or at least
 protected?
References: <ce6cc8cf040927170291df4a3@mail.gmail.com>
In-Reply-To: <ce6cc8cf040927170291df4a3@mail.gmail.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Christian Rodriguez wrote:
> Now the problem I have is that I dont have a way to force a flush of
> the IndexWriter without closing it and I need to do that before
> commiting a transaction or I would get random errors. Shouldnt that
> function be public, in case the user wants to force a flush at some
> point that is not when the IndexWriter is closed? If not I am forced
> to create a new IndexWriter and close it EVERY TIME I commit a
> transaction (which in my application is very often).

Opening and closing IndexWriters should be a lightweight operation. 
Have you tried this and found it to be too slow?  A flush() would have 
to do just about the same work.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10466-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 28 19:27:31 2004
Return-Path: <lucene-user-return-10466-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 86132 invoked from network); 28 Sep 2004 19:27:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Sep 2004 19:27:30 -0000
Received: (qmail 24030 invoked by uid 500); 28 Sep 2004 19:27:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 23921 invoked by uid 500); 28 Sep 2004 19:27:23 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 23908 invoked by uid 99); 28 Sep 2004 19:27:23 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [193.63.235.44] (HELO smartweb.rgu.ac.uk) (193.63.235.44)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 28 Sep 2004 12:27:20 -0700
Received: from zs.smartweb.rgu.ac.uk (zs.smartweb.rgu.ac.uk [10.32.3.24])
	by smartweb.rgu.ac.uk (8.10.2/8.10.2) with ESMTP id i8SIeo119432
	for <lucene-user@jakarta.apache.org>; Tue, 28 Sep 2004 19:40:50 +0100
Subject: How to pull document scoring values
From: Zia Syed <zia.syed@smartweb.rgu.ac.uk>
To: lucene-user@jakarta.apache.org
Content-Type: text/plain
Organization: Smartweb Research Center, Robert Gordon University
Message-Id: <1096399373.15956.21.camel@zs.smartweb.rgu.ac.uk>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.6 
Date: Tue, 28 Sep 2004 20:22:53 +0100
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

I'm trying to learn the Scoring mechanism of Lucene. I want to fetch
each parameter value individually as they are collectively dumped out by
Explanation. I've managed to pull out TF and IDF values using
DefaultSimilarity and FilterIndexReader, but not sure from where to get
the fieldNorm and queryNorm from. 
Also is there any reference about how normalisation has been
implemented? 

Any idea?

Thanks,
Zia
-- 
Zia Syed <zia.syed@smartweb.rgu.ac.uk>
Smartweb Research Center, Robert Gordon University


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10467-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Sep 28 19:46:26 2004
Return-Path: <lucene-user-return-10467-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 94891 invoked from network); 28 Sep 2004 19:46:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Sep 2004 19:46:26 -0000
Received: (qmail 68493 invoked by uid 500); 28 Sep 2004 19:46:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 68410 invoked by uid 500); 28 Sep 2004 19:46:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 68397 invoked by uid 99); 28 Sep 2004 19:46:18 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=HTML_30_40,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [63.101.151.4] (HELO acs-inc.com) (63.101.151.4)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 28 Sep 2004 12:46:17 -0700
Received: from dalexgw03.exchange.acsad.acs-inc.com (Not Verified[63.97.180.95]) by acs-inc.com with NetIQ MailMarshal (v5.5.6.7)
	id <BB03870697>; Tue, 28 Sep 2004 14:49:58 -0500
Received: by dalexgw03.exchange.acsad.acs-inc.com with Internet Mail Service (5.5.2657.72)
	id <TBGATM3M>; Tue, 28 Sep 2004 14:45:40 -0500
Message-ID: <2EBCA9A0B92E654B9CD8176CC09509761A92BC@syrserv8e.acssyracuse.com>
From: "Daly, Pete" <pete.daly@acs-inc.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Sorting on a long string
Date: Tue, 28 Sep 2004 14:46:03 -0500
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C4A593.C9ECFBF8"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C4A593.C9ECFBF8
Content-Type: text/plain;
	charset="iso-8859-1"

I am new to lucene, and trying to perform a sorted query on a list of
people's names.  Lucene seem unable to properly sort on the name field of my
indexed documents.  If I sort by the other (shorter) fields, it seems to
work fine.  The name sort seems to be close, almost like the last few
iterations through the sort loop are not being done.  The records are
obviously not in the normally random order, but not fully sorted either.  I
have tried different ways of sorting, including a SortField array/object
with the field cast as a string.

The index I am sorting has about 1.2 million documents.

Are their known limitations in the sorting functionality that I am running
into?  I can provide more details if needed.

Thanks for any help,

-Pete

------_=_NextPart_001_01C4A593.C9ECFBF8--

From lucene-user-return-10468-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 29 01:46:55 2004
Return-Path: <lucene-user-return-10468-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 68762 invoked from network); 29 Sep 2004 01:46:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Sep 2004 01:46:55 -0000
Received: (qmail 94105 invoked by uid 500); 29 Sep 2004 01:46:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 94054 invoked by uid 500); 29 Sep 2004 01:46:40 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 94040 invoked by uid 99); 29 Sep 2004 01:46:40 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HOT_NASTY
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [67.104.90.148] (HELO mail.elfon.com) (67.104.90.148)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 28 Sep 2004 18:46:39 -0700
Received: from [10.200.200.153] (holmbrew.dsl.xmission.com [166.70.25.166])
	(using TLSv1 with cipher RC4-SHA (128/128 bits))
	(No client certificate requested)
	by mail.elfon.com (Postfix) with ESMTP id 3233842370
	for <lucene-user@jakarta.apache.org>; Tue, 28 Sep 2004 19:46:37 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v619)
Content-Transfer-Encoding: 7bit
Message-Id: <645A88B4-11B9-11D9-8AA4-000A95C8D078@holmbrew.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: lucene-user@jakarta.apache.org
From: Jason <jason@holmbrew.org>
Subject: re-indexing
Date: Tue, 28 Sep 2004 19:46:33 -0600
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I am having touble reindexing.

Basically what I want to do is:

1. Delete the old index
2. Write the new index.

The enviroment:
The index is search by a web app running from the Orion App Server. This
code runs fin and reindexes fine prior to any searches.  After the first
search against the index is completed the index ends up beiong read-only
( or not writeable), I cannot reindex and subsequently cannot search
because the index is incomplete.

1. Why doesn't IndexReader.delete(i) really delete the file. it seems to
just make anothe 1K file with a .del extension the IndexWriter still
cannot content with?
2. How can I make this work?

Thanks,
Jason

The code below produces the following output when run AFTER an initial
search against the index have be completed:

IndexerDrug->disableLuceneLocks: true
Directory: FSDirectory@C:\lucene_index_drug
Deleted [0]: true
... (out put form for loop confirming deleted items)
Deleted [367]: true

Hit uncaught exception java.io.IOException
java.io.IOException: Cannot delete _ba.cfs
    at org.apache.lucene.store.FSDirectory.create(FSDirectory.java:144)
    at
org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:105)
    at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:193)
    at IndexerDrug.index(IndexerDrug.java:103)
    at IndexerDrug.main(IndexerDrug.java:246)
Exception in thread "main"

=-=-=-=-=-=-=-=-=-=-=-=-=-
My indexing code  (some items have been deleted to protect the innocent)
=-=-=-=-=-=-=-=-=-=-=-=-=-
import java.io.*;
import java.sql.*;
import javax.naming.*;
import org.apache.lucene.analysis.*;
import org.apache.lucene.analysis.standard.*;
import org.apache.lucene.document.*;
import org.apache.lucene.index.*;
import org.apache.lucene.store.*;

public class IndexerDrug {

  private String sql = "my query code ";

  public static String[] stopWords =
org.apache.lucene.analysis.standard.StandardAnalyzer.STOP_WORDS;
  public File indexDir = new File("C:\\lucene_index_drug\\");
  public Directory fsDir;


  public void index() throws IOException {
        try {
            // Delete old index
            fsDir = FSDirectory.getDirectory(indexDir, false);
            if (indexDir.list().length > 0) {
                IndexReader reader = IndexReader.open(fsDir);
                
System.out.println("Directory:"+reader.directory().toString());
                reader.unlock(fsDir);
                for (int i = 0; i < reader.maxDoc()-1; i++) {
                    reader.delete(i);
                    System.out.println("Deleted ["+i+"]: " 
+reader.isDeleted(i));
                }
                reader.close();
            }
        }
        catch (Exception ex) {
            System.out.println("Error while deleting index: " 
+ex.getMessage());
        }
        // Write new index
        Analyzer analyzer = new StandardAnalyzer(stopWords);
        IndexWriter writer = new IndexWriter(indexDir, analyzer, 
true);// << fails here *********
        writer.mergeFactor = 1000;
        indexDirectory(writer);
        writer.setUseCompoundFile(true);
        writer.optimize();
        writer.close();

  }

  private void indexDirectory(IndexWriter writer) throws IOException {
    Connection c = null;
    ResultSet rs = null;
    Statement stmt = null;

    long startTime = System.currentTimeMillis();
    System.out.println("Start Time: " + new
java.sql.Timestamp(System.currentTimeMillis()).toString());

    try {
      Class.forName("xxxx");
      c = DriverManager.getConnection( "xxxx", "xxxx", "xxxx");
      stmt = c.createStatement();
      rs = stmt.executeQuery(this.sql);
      System.out.println("Query Completed: " + new
java.sql.Timestamp(System.currentTimeMillis()).toString());
      int total = 0;

      String resourceID = "";
      String resourceName = "";
      String summary = "";
      String shortSummary = "";
      String hciPick = "";
      String url = "";
      String format = "";
      String orgType = "";
      String holdingType = "";
      String indexText = "";
      String c_indexText = "";

      boolean ready = false;

      Document doc = null;
      String oldResourceID = null;
      String newResourceID = null;

      while (rs.next()) {
        newResourceID = rs.getString("resourceID")!= null ?
rs.getString("resourceID") : "";
        resourceID = newResourceID;
        resourceName = rs.getString("resourceName") != null ?
rs.getString("resourceName") : "";
        summary = rs.getString("summary") != null ?
rs.getString("summary") : "";

        if (summary.length() > 300) {
          shortSummary = summary.substring(0, 300) + "...";
        } else {
          shortSummary = summary;
        }

        hciPick = rs.getString("hciPick") != null 
?rs.getString("hciPick") : "";
        url = rs.getString("url") != null ? rs.getString("url") : "";
        format = rs.getString("format") != null ? 
rs.getString("format"): "";
        orgType = rs.getString("orgType") != null 
?rs.getString("orgType") : "";
        holdingType = rs.getString("holdingType") != null 
?rs.getString("holdingType") : "";
        indexText = rs.getString("indexText") != null 
?rs.getString("indexText") : "";

        if (!newResourceID.equals(oldResourceID)) {
          if (doc != null) {
            doc.add(Field.Text("indexText", c_indexText));
            writer.addDocument(doc); // add previoue doc
            total++;
          }
          doc = new Document(); // make a new one

          // These only go into the doc once
          doc.add(Field.Keyword("resourceID", resourceID));

          Field f_resourceName = Field.Text("resourceName", 
resourceName);
          doc.add(f_resourceName);

          Field f_fullResourceName = 
Field.Keyword("fullResourceName",resourceName);
          doc.add(f_fullResourceName);

          doc.add(Field.Text("url", url));
          doc.add(Field.Keyword("format", format));
          doc.add(Field.Text("orgType", orgType));
          doc.add(Field.Text("holdingType", holdingType));
          doc.add(Field.Text("summary", summary));
          doc.add(Field.UnIndexed("shortSummary", shortSummary));
          doc.add(Field.UnIndexed("hciPick", hciPick));

          // This gets set here and them concatenated to while
          // while the resourceID is still the same
          c_indexText = indexText;

        }
        oldResourceID = newResourceID;
        if (newResourceID.equals(oldResourceID)){
          if (!indexText.equals("")) {
            c_indexText = c_indexText + " " + indexText;
          }
        }
      }

      System.out.println("Finish Time: " + 
newjava.sql.Timestamp(System.currentTimeMillis()).toString());
      long stopTime = System.currentTimeMillis();
      System.out.println("Total time: " + (stopTime - startTime) + " 
ms");
      System.out.println("Total Holdings Indexed: " + total);

    } catch (Exception ex) {
      System.err.println("Error while indexing: " + ex.getMessage());
    } finally {
      try {
        c.close();
      } catch (SQLException ex) {
        System.err.println("Unable to close database connection");
      }
    }
  }

  public static void main(String[] args) throws Exception {
    IndexerDrug ind = new IndexerDrug();
    ind.index();
  }
}




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10469-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 29 05:05:06 2004
Return-Path: <lucene-user-return-10469-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 44406 invoked from network); 29 Sep 2004 05:05:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Sep 2004 05:05:06 -0000
Received: (qmail 96442 invoked by uid 500); 29 Sep 2004 05:05:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 95976 invoked by uid 500); 29 Sep 2004 05:05:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 95961 invoked by uid 99); 29 Sep 2004 05:05:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [192.38.202.200] (HELO hasseris.netnord.dk) (192.38.202.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 28 Sep 2004 22:04:59 -0700
Received: from [10.10.70.118] by hasseris.netnord.dk
          (Post.Office MTA v3.5.1 release 219 ID# 0-52465U1200L200S0V35)
          with ESMTP id dk for <lucene-user@jakarta.apache.org>;
          Wed, 29 Sep 2004 07:04:55 +0200
Message-ID: <415A4276.2040902@atira.dk>
Date: Wed, 29 Sep 2004 07:04:54 +0200
From: Bo Gundersen <bg@atira.dk>
Organization: Atira Aps
User-Agent: Mozilla Thunderbird 0.7.2 (Windows/20040707)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: re-indexing
References: <645A88B4-11B9-11D9-8AA4-000A95C8D078@holmbrew.org>
In-Reply-To: <645A88B4-11B9-11D9-8AA4-000A95C8D078@holmbrew.org>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Jason wrote:
> I am having touble reindexing.
> 
> Basically what I want to do is:
> 
> 1. Delete the old index
> 2. Write the new index.
> 
> The enviroment:
> The index is search by a web app running from the Orion App Server. This
> code runs fin and reindexes fine prior to any searches.  After the first
> search against the index is completed the index ends up beiong read-only
> ( or not writeable), I cannot reindex and subsequently cannot search
> because the index is incomplete.

We have several apps running like this only on Tomcat and JBoss with no 
problems...

> 1. Why doesn't IndexReader.delete(i) really delete the file. it seems to
> just make anothe 1K file with a .del extension the IndexWriter still
> cannot content with?

Never tried the IndexReader.delete() method, we generally build the new 
index in a temporary directory and when the index is done we delete the 
current online directory (using java.io.File methods) and then rename 
the temp directory to online.

> 2. How can I make this work?

This may be just be silly, but do you remember to close your 
org.apache.lucene.search.IndexSearcher when you are done with your search?

-- 
Bo Gundersen
DBA/Software Developer
M.Sc.CS.
www.atira.dk

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10470-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 29 07:19:01 2004
Return-Path: <lucene-user-return-10470-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 5103 invoked from network); 29 Sep 2004 07:19:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Sep 2004 07:19:00 -0000
Received: (qmail 41886 invoked by uid 500); 29 Sep 2004 07:18:47 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 41840 invoked by uid 500); 29 Sep 2004 07:18:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 41813 invoked by uid 99); 29 Sep 2004 07:18:45 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.109.24.30] (HELO smtp-vbr10.xs4all.nl) (194.109.24.30)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 29 Sep 2004 00:17:29 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr10.xs4all.nl (8.12.11/8.12.11) with ESMTP id i8T7HLR7016315
	for <lucene-user@jakarta.apache.org>; Wed, 29 Sep 2004 09:17:22 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: lucene-user@jakarta.apache.org
Subject: Re: How to pull document scoring values
Date: Wed, 29 Sep 2004 09:17:21 +0200
User-Agent: KMail/1.5.4
References: <1096399373.15956.21.camel@zs.smartweb.rgu.ac.uk>
In-Reply-To: <1096399373.15956.21.camel@zs.smartweb.rgu.ac.uk>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200409290917.21504.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Zia,

On Tuesday 28 September 2004 21:22, you wrote:
> Hi,
>
> I'm trying to learn the Scoring mechanism of Lucene. I want to fetch
> each parameter value individually as they are collectively dumped out by
> Explanation. I've managed to pull out TF and IDF values using
> DefaultSimilarity and FilterIndexReader, but not sure from where to get
> the fieldNorm and queryNorm from.

The norms are here:
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/index/IndexReader.html#norms(java.lang.String)
The resulting array is indexed by the document number for the IndexReader.
With the default similarity, each norm is the inverse square root of the number of indexed terms in the 
document field. However, there are only 8 bits available to encode this value, so it's quite rough.

The default queryNorm is here:
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/search/DefaultSimilarity.html#queryNorm(float)
There is an explanation of the scoring in the javadocs of Similarity.
There has been some discussion on an idf factor that was missing from this documentation, 
I don't know whether the docs have been adapted for this.

> Also is there any reference about how normalisation has been
> implemented?

See above, DefaultSimilarity is the default implementation of the Similarity interface.
queryNorm() takes a sumOfSquaredWeights, where the weights are the term weights
from the query. It returns the square root.

It may be that the sum of squared weights should be a sum of square rooted weights
and that queryNorm should return a square then.
I posted this on lucene-user on 20 September:
http://issues.apache.org/eyebrowse/ReadMsg?listName=lucene-user@jakarta.apache.org&msgNo=10023

It's only a normalisation, so it doesn't affect the order of the search results much.
Taking the square roots of the  query term weights would have
the query weights directly apllied to the the query term density in the document field,
whereas now the weights seem to be applied to the square root of the density.
The density value is an approximation, see above for the rough field norms.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10471-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 29 09:03:31 2004
Return-Path: <lucene-user-return-10471-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 69664 invoked from network); 29 Sep 2004 09:03:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Sep 2004 09:03:30 -0000
Received: (qmail 18126 invoked by uid 500); 29 Sep 2004 09:02:22 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 18066 invoked by uid 500); 29 Sep 2004 09:02:20 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 18033 invoked by uid 99); 29 Sep 2004 09:02:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of fraschetti@gmail.com designates 64.233.170.197 as permitted sender)
Received: from [64.233.170.197] (HELO mproxy.gmail.com) (64.233.170.197)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 29 Sep 2004 02:01:36 -0700
Received: by mproxy.gmail.com with SMTP id 77so667879rnl
        for <lucene-user@jakarta.apache.org>; Wed, 29 Sep 2004 02:01:31 -0700 (PDT)
Received: by 10.38.77.44 with SMTP id z44mr1688547rna;
        Wed, 29 Sep 2004 02:01:31 -0700 (PDT)
Received: by 10.38.171.15 with HTTP; Wed, 29 Sep 2004 02:01:31 -0700 (PDT)
Message-ID: <cbdebdf8040929020117854c49@mail.gmail.com>
Date: Wed, 29 Sep 2004 02:01:31 -0700
From: Chris Fraschetti <fraschetti@gmail.com>
Reply-To: Chris Fraschetti <fraschetti@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: list of removed stop words
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Is there a way to via the parser or the query retrieve a list of the
stop words removed by the analyzer? or should i just check my query
against .STOPWORDS and do it myself?

-- 
___________________________________________________
Chris Fraschetti
e fraschetti@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10472-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 29 09:31:09 2004
Return-Path: <lucene-user-return-10472-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 90926 invoked from network); 29 Sep 2004 09:31:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Sep 2004 09:31:09 -0000
Received: (qmail 79527 invoked by uid 500); 29 Sep 2004 09:29:31 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 79384 invoked by uid 500); 29 Sep 2004 09:29:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 79249 invoked by uid 99); 29 Sep 2004 09:29:28 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 29 Sep 2004 02:29:27 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP
	id 21C5323B93; Wed, 29 Sep 2004 11:29:32 +0200 (CEST)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 02662-10; Wed, 29 Sep 2004 11:29:32 +0200 (CEST)
Received: from tucholsky.office.tanto.de (unknown [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP
	id F311423B8F; Wed, 29 Sep 2004 11:29:31 +0200 (CEST)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id i8T9TNGL032114;
	Wed, 29 Sep 2004 11:29:23 +0200
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id i8T9TNlE032110;
	Wed, 29 Sep 2004 11:29:23 +0200
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16730.32883.653712.220519@tanto-xipolis.de>
Date: Wed, 29 Sep 2004 11:29:23 +0200
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	Chris Fraschetti <fraschetti@gmail.com>
Subject: Re: list of removed stop words
In-Reply-To: <cbdebdf8040929020117854c49@mail.gmail.com>
References: <cbdebdf8040929020117854c49@mail.gmail.com>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Chris Fraschetti writes:
> Is there a way to via the parser or the query retrieve a list of the
> stop words removed by the analyzer? or should i just check my query
> against .STOPWORDS and do it myself?
> 
Query parser does not provide that info.
Of course you might consider adding this inside query parser. Doing the
check yourself outside QP means, that have to parse a second time...

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10473-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 29 10:17:18 2004
Return-Path: <lucene-user-return-10473-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 19290 invoked from network); 29 Sep 2004 10:17:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Sep 2004 10:17:18 -0000
Received: (qmail 28593 invoked by uid 500); 29 Sep 2004 10:16:35 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 28263 invoked by uid 500); 29 Sep 2004 10:16:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 28014 invoked by uid 99); 29 Sep 2004 10:16:21 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_60_70,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [62.213.161.130] (HELO redhat.sirma.bg) (62.213.161.130)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 29 Sep 2004 03:15:31 -0700
Received: from ROSENM (rossenm.sirma.int [192.168.128.33])
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with SMTP id i8TAF6UF006291
	for <lucene-user@jakarta.apache.org>; Wed, 29 Sep 2004 13:15:07 +0300
Message-ID: <013b01c4a60d$310ba950$2180a8c0@sirma.int>
From: "Rosen Marinov" <rosenm@sirma.bg>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Seraching in Keyword Field
Date: Wed, 29 Sep 2004 13:15:05 +0300
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0138_01C4A626.562DD9B0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1106
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1106
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0138_01C4A626.562DD9B0
Content-Type: text/plain;
	charset="koi8-r"
Content-Transfer-Encoding: quoted-printable

Hi all,=20

I have a Keyword field in my Lucene docs.
And i am tring to execure some queries on this field.

1. MyKeywordField:(["ABC" TO "ABC"]) - this query is OK and returns =
expecting result=20

2. MyKeywordField:(ABC) - but this returning nothing

I am using SimpleAnalyzer - is the problem in analyzer?
  If yes, which i have to use to make query 2 working?

How can i make query 2 working?
I know that Keyword fields are not analyzed, than may be the problem is =
not in analyzer.

But for QueryParser i use again SimpleAnalyzer, may be here is my =
mistake?

However, how to make a query 2 to work properly (as i expect)?
I know that it will find only fields with exact ABC value, is this true =
expecting?

Best Regars

Rosen


------=_NextPart_000_0138_01C4A626.562DD9B0--


From lucene-user-return-10474-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 29 12:49:05 2004
Return-Path: <lucene-user-return-10474-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 25841 invoked from network); 29 Sep 2004 12:49:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Sep 2004 12:49:04 -0000
Received: (qmail 50821 invoked by uid 500); 29 Sep 2004 12:48:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 50766 invoked by uid 500); 29 Sep 2004 12:48:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 50738 invoked by uid 99); 29 Sep 2004 12:48:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [217.160.91.29] (HELO p15112568.pureserver.info) (217.160.91.29)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 29 Sep 2004 05:48:00 -0700
Received: from intrafind.de (ppp-82-135-5-196.mnet-online.de [82.135.5.196])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))
	(No client certificate requested)
	by p15112568.pureserver.info (Postfix) with ESMTP id 1842714015E
	for <lucene-user@jakarta.apache.org>; Wed, 29 Sep 2004 14:47:56 +0200 (CEST)
Message-ID: <415AAEF3.20507@intrafind.de>
Date: Wed, 29 Sep 2004 14:47:47 +0200
From: Bernhard Messer <Bernhard.Messer@intrafind.de>
User-Agent: Mozilla Thunderbird 0.5 (X11/20040208)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Seraching in Keyword Field
References: <013b01c4a60d$310ba950$2180a8c0@sirma.int>
In-Reply-To: <013b01c4a60d$310ba950$2180a8c0@sirma.int>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

try that query: 

MyKeywordField:ABC

regards

bernhard


Rosen Marinov wrote:

>Hi all, 
>
>I have a Keyword field in my Lucene docs.
>And i am tring to execure some queries on this field.
>
>1. MyKeywordField:(["ABC" TO "ABC"]) - this query is OK and returns expecting result 
>
>2. MyKeywordField:(ABC) - but this returning nothing
>
>I am using SimpleAnalyzer - is the problem in analyzer?
>  If yes, which i have to use to make query 2 working?
>
>How can i make query 2 working?
>I know that Keyword fields are not analyzed, than may be the problem is not in analyzer.
>
>But for QueryParser i use again SimpleAnalyzer, may be here is my mistake?
>
>However, how to make a query 2 to work properly (as i expect)?
>I know that it will find only fields with exact ABC value, is this true expecting?
>
>Best Regars
>
>Rosen
>
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10475-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 29 13:11:54 2004
Return-Path: <lucene-user-return-10475-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 40857 invoked from network); 29 Sep 2004 13:11:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Sep 2004 13:11:54 -0000
Received: (qmail 93856 invoked by uid 500); 29 Sep 2004 13:11:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 93693 invoked by uid 500); 29 Sep 2004 13:11:16 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 93622 invoked by uid 99); 29 Sep 2004 13:11:14 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_50_60,HTML_MESSAGE,MIME_HTML_NO_CHARSET
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.82.255.51] (HELO mail64.messagelabs.com) (216.82.255.51)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 29 Sep 2004 06:11:11 -0700
X-VirusChecked: Checked
X-Env-Sender: BDotzour@widen.com
X-Msg-Ref: server-3.tower-64.messagelabs.com!1096463467!14576607
X-StarScan-Version: 5.2.10; banners=-,-,-
X-Originating-IP: [69.8.156.101]
Received: (qmail 6713 invoked from network); 29 Sep 2004 13:11:08 -0000
Received: from mailhost.widen.com (HELO exchange2k.widen.com) (69.8.156.101)
  by server-3.tower-64.messagelabs.com with SMTP; 29 Sep 2004 13:11:08 -0000
Received: by exchange2k.widen.com with Internet Mail Service (5.5.2657.72)
	id <SPAWPHTJ>; Wed, 29 Sep 2004 08:11:07 -0500
Message-ID: <9BF20741D07E824A9206E073EB6750E913FD81@exch2k3.widen.com>
From: Bryan Dotzour <BDotzour@widen.com>
To: "'lucene-user@jakarta.apache.org'" <lucene-user@jakarta.apache.org>
Subject: Memory usage: IndexSearcher & Sort
Date: Wed, 29 Sep 2004 08:11:03 -0500
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C4A625.C5D94AE1"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C4A625.C5D94AE1
Content-Type: text/plain

I have been investigating a serious memory problem in our web app (using
Tapestry, Hibernate, & Lucene) and have reduced it to being the way in which
we are using Lucene to search on things.  Being a webapp, we have focused on
doing our work within a user's request.  So we basically end up opening at
least one new IndexSearcher on each individual page view.  In one particular
case, we were doing this in a loop, eventually opening ~20-~40
IndexSearchers which caused our memory usage to skyrocket.  After viewing
that one page 3 or 4 times we would exhaust the server's memory allocation.
 
Most helpful in this search was the following thread from Bugzilla:
 
http://issues.apache.org/bugzilla/show_bug.cgi?id=30628
<http://issues.apache.org/bugzilla/show_bug.cgi?id=30628> 
 
>From this thread, it sounds like constantly opening and closing
IndexSearcher objects is a "BAD THING", but it is exactly what we are doing
in our app.  
There are a few things that puzzle me and I'd love it if anyone has some
input that might clear up some of these questions.
 
1.  According to the Bugzilla thread, and from my own testing, you can open
lots of IndexSearchers in a loop and do a search WITHOUT SORTING and not
have this memory problem.  Is there an issue with the Sort code?
2.  Can anyone give a brief, technical explanation as to why opening
multiple IndexSearcher objects is bad?
3.  Certainly some of you on this list are using Lucene in a web-app
environment.  Can anyone list some best practices on managing
reading/writing/searching a Lucene index in that context?
 
 
Thank you all
Bryan
-----------------------------------------------
Some extra information about my Lucene setup:
 
Lucene 1.4.1
We maintain 5 different indexes, all in RAMDirectories.  The indexes aren't
especially big (< 100,000 total objects combined).
  
 

------_=_NextPart_001_01C4A625.C5D94AE1--

From lucene-user-return-10476-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 29 13:26:32 2004
Return-Path: <lucene-user-return-10476-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 59905 invoked from network); 29 Sep 2004 13:26:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Sep 2004 13:26:32 -0000
Received: (qmail 25876 invoked by uid 500); 29 Sep 2004 13:25:40 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 25800 invoked by uid 500); 29 Sep 2004 13:25:39 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 25671 invoked by uid 99); 29 Sep 2004 13:25:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [212.87.7.182] (HELO salix.caltha.pl) (212.87.7.182)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 29 Sep 2004 06:25:36 -0700
Received: from [192.168.1.5] (cmj34.neoplus.adsl.tpnet.pl [::ffff:83.31.137.34])
  (AUTH: LOGIN zwierzem, )
  by salix.caltha.pl with esmtp; Wed, 29 Sep 2004 15:25:31 +0200
Subject: Re: Memory usage: IndexSearcher & Sort
From: Damian Gajda <dgajda@caltha.pl>
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <9BF20741D07E824A9206E073EB6750E913FD81@exch2k3.widen.com>
References: <9BF20741D07E824A9206E073EB6750E913FD81@exch2k3.widen.com>
Content-Type: text/plain; charset=ISO-8859-2
Organization: Caltha Sp. j.
Date: Wed, 29 Sep 2004 15:25:11 +0200
Message-Id: <1096464311.5589.2.camel@apium>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.0 (2.0.0-2) 
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> Most helpful in this search was the following thread from Bugzilla:
>  
> http://issues.apache.org/bugzilla/show_bug.cgi?id=30628
> <http://issues.apache.org/bugzilla/show_bug.cgi?id=30628> 
>  

We had a similar problem in our webapp.

Please look at the bug
http://issues.apache.org/bugzilla/show_bug.cgi?id=31240

My co-worker Rafa has fixed this bug and submitted a patch today.

Have fun ;)
-- 
Damian Gajda
Caltha Sp. j.
Warszawa 02-807
ul. Kukuki 2
tel. +48 22 643 20 20
mobile: +48 501 032 506
http://www.caltha.pl/


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10477-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 29 13:28:46 2004
Return-Path: <lucene-user-return-10477-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 61370 invoked from network); 29 Sep 2004 13:28:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Sep 2004 13:28:46 -0000
Received: (qmail 32908 invoked by uid 500); 29 Sep 2004 13:28:01 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 32829 invoked by uid 500); 29 Sep 2004 13:28:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 32771 invoked by uid 99); 29 Sep 2004 13:27:56 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [81.80.239.198] (HELO outbound1.sopragroup.com) (81.80.239.198)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 29 Sep 2004 06:27:55 -0700
Received: by outbound1.sopragroup.com (8.12.10/8.12.10/outbound-A02) with ESMTP id i8TDRpKp004668
          for <lucene-user@jakarta.apache.org>; Wed, 29 Sep 2004 15:27:51 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Memory usage: IndexSearcher & Sort
Date: Wed, 29 Sep 2004 15:27:50 +0200
Message-ID: <5933531F07A5144E9E53E1AA45257E4B01048A30@wexchbe03.ancy.fr.sopra>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Memory usage: IndexSearcher & Sort
Thread-Index: AcSmJd3jnypMRlTFQDyoRBV7/PVsGAAAUK/A
From: "Cocula Remi" <rcocula@sopragroup.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-OriginalArrivalTime: 29 Sep 2004 13:28:03.0343 (UTC) FILETIME=[25A109F0:01C4A628]
X-Scanned-By: MIMEDefang 2.38
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

My solution is :

I have bound in an RMI registry one RemoteSearchable object for each =
index.
Thus I do not have to create any IndexSearcher and I can execute query =
from any application.
This has been implemented in the Lucene Server that I have just began to =
create.
http://sourceforge.net/projects/luceneserver/

I use it in a web app.

It would be nice if some people could test it (don't you want ?)
 =20

-----Message d'origine-----
De : Bryan Dotzour [mailto:BDotzour@widen.com]
Envoy=E9 : mercredi 29 septembre 2004 15:11
=C0 : 'lucene-user@jakarta.apache.org'
Objet : Memory usage: IndexSearcher & Sort


I have been investigating a serious memory problem in our web app (using
Tapestry, Hibernate, & Lucene) and have reduced it to being the way in =
which
we are using Lucene to search on things.  Being a webapp, we have =
focused on
doing our work within a user's request.  So we basically end up opening =
at
least one new IndexSearcher on each individual page view.  In one =
particular
case, we were doing this in a loop, eventually opening ~20-~40
IndexSearchers which caused our memory usage to skyrocket.  After =
viewing
that one page 3 or 4 times we would exhaust the server's memory =
allocation.
=20
Most helpful in this search was the following thread from Bugzilla:
=20
http://issues.apache.org/bugzilla/show_bug.cgi?id=3D30628
<http://issues.apache.org/bugzilla/show_bug.cgi?id=3D30628>=20
=20
>From this thread, it sounds like constantly opening and closing
IndexSearcher objects is a "BAD THING", but it is exactly what we are =
doing
in our app. =20
There are a few things that puzzle me and I'd love it if anyone has some
input that might clear up some of these questions.
=20
1.  According to the Bugzilla thread, and from my own testing, you can =
open
lots of IndexSearchers in a loop and do a search WITHOUT SORTING and not
have this memory problem.  Is there an issue with the Sort code?
2.  Can anyone give a brief, technical explanation as to why opening
multiple IndexSearcher objects is bad?
3.  Certainly some of you on this list are using Lucene in a web-app
environment.  Can anyone list some best practices on managing
reading/writing/searching a Lucene index in that context?
=20
=20
Thank you all
Bryan
-----------------------------------------------
Some extra information about my Lucene setup:
=20
Lucene 1.4.1
We maintain 5 different indexes, all in RAMDirectories.  The indexes =
aren't
especially big (< 100,000 total objects combined).
 =20
=20

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10478-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 29 13:37:28 2004
Return-Path: <lucene-user-return-10478-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 66723 invoked from network); 29 Sep 2004 13:37:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Sep 2004 13:37:28 -0000
Received: (qmail 58246 invoked by uid 500); 29 Sep 2004 13:37:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 58180 invoked by uid 500); 29 Sep 2004 13:37:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 58167 invoked by uid 99); 29 Sep 2004 13:37:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 29 Sep 2004 06:37:14 -0700
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id I4T2HE00.C00 for <lucene-user@jakarta.apache.org>; Wed,
          29 Sep 2004 19:21:14 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "LUCENE" <lucene-user@jakarta.apache.org>
Subject: Too many Open Files  + lucene 1.4.1 + Linux O/s
Date: Wed, 29 Sep 2004 19:14:43 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIEECPCCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPart_000_000D_01C4A658.936529F0"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_000D_01C4A658.936529F0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit



Hi Luceners,


Apologies.........


Other day was Trying to Search using the "Luceneweb"  version
with Lucene1-4-1.zip  and   O/s = Linux, J2SDK version "1.4.2_03-b02"

With Roughly around  500 Documents (715116 kb )  Indexed  using
Lucene1.4-final.jar and  writer.setUseCompoundFile(true);

My Intension was to Search across all the 500Documents using
"MultiFieldQueryParser"


I have replaced the 'QueryParser.parse(srchkey,fildtpe[i], analyzer) '  with

   'MultiFieldQueryParser.parse(SEARCHKEYS,fildtpe[],analyzer)'

    and

hits =  searcher.search(query) with  hits = multiSearcher.search(query, new
Sort(new SortField("filename", SortField.STRING)));

I am getting the "TOO many Open Files" Exception ,

Can some body Help me With the Solution,

 [I have also inserted the REFRENCE JSP file ]

java.io.IOException: Too many open files
	at java.io.UnixFileSystem.createFileExclusively(Native Method)
	at java.io.File.createNewFile(File.java:828)
	at org.apache.lucene.store.FSDirectory$1.obtain(FSDirectory.java:307)
	at org.apache.lucene.store.Lock.obtain(Lock.java:53)
	at org.apache.lucene.store.Lock$With.run(Lock.java:108)
	at org.apache.lucene.index.IndexReader.open(IndexReader.java:111)
	at org.apache.lucene.index.IndexReader.open(IndexReader.java:95)
	at org.apache.lucene.search.IndexSearcher.(IndexSearcher.java:38)
	at org.apache.jsp.results_jsp._jspService(results_jsp.java:130)
	at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:137)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)
	at
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:2
10)
	at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:295)
	at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)
	at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Application
FilterChain.java:247)
	at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterCh
ain.java:193)
	at
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.ja
va:256)
	at
org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invok
eNext(StandardPipeline.java:643)
	at
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)
	at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
	at
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.ja
va:191)
	at
org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invok
eNext(StandardPipeline.java:643)
	at
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)
	at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
	at
org.apache.catalina.core.StandardContext.invoke(StandardContext.java:2415)
	at
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:180
)
	at
org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invok
eNext(StandardPipeline.java:643)
	at
org.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherValve.
java:171)
	at
org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invok
eNext(StandardPipeline.java:641)
	at
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:172
)
	at
org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invok
eNext(StandardPipeline.java:641)
	at
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)
	at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
	at
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java
:174)
	at
org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invok
eNext(StandardPipeline.java:643)
	at
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)
	at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
	at org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:223)
	at
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:594)
	at
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConne
ction(Http11Protocol.java:392)
	at
org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:565)
	at
org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.jav
a:619)
	at java.lang.Thread.run(Thread.java:534)





















      WITH WARM REGARDS
      HAVE A NICE DAY
      [ N.S.KARTHIK]




------=_NextPart_000_000D_01C4A658.936529F0
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
------=_NextPart_000_000D_01C4A658.936529F0--


From lucene-user-return-10479-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 29 13:46:10 2004
Return-Path: <lucene-user-return-10479-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 74975 invoked from network); 29 Sep 2004 13:46:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Sep 2004 13:46:10 -0000
Received: (qmail 78008 invoked by uid 500); 29 Sep 2004 13:46:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 77955 invoked by uid 500); 29 Sep 2004 13:45:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 77941 invoked by uid 99); 29 Sep 2004 13:45:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [193.63.235.44] (HELO smartweb.rgu.ac.uk) (193.63.235.44)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 29 Sep 2004 06:45:58 -0700
Received: from zs.smartweb.rgu.ac.uk (zs.smartweb.rgu.ac.uk [10.32.3.24])
	by smartweb.rgu.ac.uk (8.10.2/8.10.2) with ESMTP id i8TCxM115541
	for <lucene-user@jakarta.apache.org>; Wed, 29 Sep 2004 13:59:22 +0100
Subject: Re: How to pull document scoring values
From: Zia Syed <zia.syed@smartweb.rgu.ac.uk>
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <200409290917.21504.paul.elschot@xs4all.nl>
References: <1096399373.15956.21.camel@zs.smartweb.rgu.ac.uk>
	 <200409290917.21504.paul.elschot@xs4all.nl>
Content-Type: text/plain
Organization: Smartweb Research Center, Robert Gordon University
Message-Id: <1096465286.14437.33.camel@zs.smartweb.rgu.ac.uk>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.6 
Date: Wed, 29 Sep 2004 14:41:26 +0100
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Paul,
Thanks for your detailed reply! It really helped alot.
However, I am experiancing some conflicts.

For one of the documents in result set, when i use 

IndexReader fir=FilterIndexReader.open("index");
byte[] fNorm=fir.norm("Body");
System.out.println("FNorm: "+ fNorm[306]);
Document d=fir.document(306);
Field f=d.getField("Body");

System.out.println("Body: "+ f.stringValue());

This gives me out fNorm 113, whereas total number of term (including
stop-words) are 42 in this particular field of selected document. In the
explanation , fieldNorm (field=Body, doc=306) is 0.1562, which is approx
41 term words for that field in that documents. So explanation values
makes sense with real data, while including all stop words like to,it,
the & etc. 

So, my question is, 
> Am i getting the norm values from right place?
> Is there any way to find out number of indexed terms for each
document?

Please advise!

Thanks,

Zia



On Wed, 2004-09-29 at 08:17, Paul Elschot wrote:
> Zia,
> 
> On Tuesday 28 September 2004 21:22, you wrote:
> > Hi,
> >
> > I'm trying to learn the Scoring mechanism of Lucene. I want to fetch
> > each parameter value individually as they are collectively dumped out by
> > Explanation. I've managed to pull out TF and IDF values using
> > DefaultSimilarity and FilterIndexReader, but not sure from where to get
> > the fieldNorm and queryNorm from.
> 
> The norms are here:
> http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/index/IndexReader.html#norms(java.lang.String)
> The resulting array is indexed by the document number for the IndexReader.
> With the default similarity, each norm is the inverse square root of the number of indexed terms in the 
> document field. However, there are only 8 bits available to encode this value, so it's quite rough.
> 
> The default queryNorm is here:
> http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/search/DefaultSimilarity.html#queryNorm(float)
> There is an explanation of the scoring in the javadocs of Similarity.
> There has been some discussion on an idf factor that was missing from this documentation, 
> I don't know whether the docs have been adapted for this.
> 
> > Also is there any reference about how normalisation has been
> > implemented?
> 
> See above, DefaultSimilarity is the default implementation of the Similarity interface.
> queryNorm() takes a sumOfSquaredWeights, where the weights are the term weights
> from the query. It returns the square root.
> 
> It may be that the sum of squared weights should be a sum of square rooted weights
> and that queryNorm should return a square then.
> I posted this on lucene-user on 20 September:
> http://issues.apache.org/eyebrowse/ReadMsg?listName=lucene-user@jakarta.apache.org&msgNo=10023
> 
> It's only a normalisation, so it doesn't affect the order of the search results much.
> Taking the square roots of the  query term weights would have
> the query weights directly apllied to the the query term density in the document field,
> whereas now the weights seem to be applied to the square root of the density.
> The density value is an approximation, see above for the rough field norms.
> 
> Regards,
> Paul Elschot
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
-- 
Zia Syed <zia.syed@smartweb.rgu.ac.uk>
Smartweb Research Center, Robert Gordon University


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10480-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 29 13:47:42 2004
Return-Path: <lucene-user-return-10480-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 75748 invoked from network); 29 Sep 2004 13:47:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Sep 2004 13:47:42 -0000
Received: (qmail 83702 invoked by uid 500); 29 Sep 2004 13:47:32 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 83670 invoked by uid 500); 29 Sep 2004 13:47:32 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 83657 invoked by uid 99); 29 Sep 2004 13:47:32 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.242] (HELO web12705.mail.yahoo.com) (216.136.173.242)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 29 Sep 2004 06:47:30 -0700
Message-ID: <20040929134728.37512.qmail@web12705.mail.yahoo.com>
Received: from [194.152.224.24] by web12705.mail.yahoo.com via HTTP; Wed, 29 Sep 2004 06:47:28 PDT
Date: Wed, 29 Sep 2004 06:47:28 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Memory usage: IndexSearcher & Sort
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <9BF20741D07E824A9206E073EB6750E913FD81@exch2k3.widen.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

--- Bryan Dotzour <BDotzour@widen.com> wrote:

> I have been investigating a serious memory problem in our web app
> (using
> Tapestry, Hibernate, & Lucene) and have reduced it to being the way
> in which
> we are using Lucene to search on things.  Being a webapp, we have
> focused on
> doing our work within a user's request.  So we basically end up
> opening at
> least one new IndexSearcher on each individual page view.  In one
> particular
> case, we were doing this in a loop, eventually opening ~20-~40
> IndexSearchers which caused our memory usage to skyrocket.  After
> viewing
> that one page 3 or 4 times we would exhaust the server's memory
> allocation.
>  
> Most helpful in this search was the following thread from Bugzilla:
>  
> http://issues.apache.org/bugzilla/show_bug.cgi?id=30628
> <http://issues.apache.org/bugzilla/show_bug.cgi?id=30628> 
>  
> From this thread, it sounds like constantly opening and closing
> IndexSearcher objects is a "BAD THING", but it is exactly what we are
> doing
> in our app.  
> There are a few things that puzzle me and I'd love it if anyone has
> some
> input that might clear up some of these questions.
>  
> 1.  According to the Bugzilla thread, and from my own testing, you
> can open
> lots of IndexSearchers in a loop and do a search WITHOUT SORTING and
> not
> have this memory problem.  Is there an issue with the Sort code?

Yes, there is a memory leak in Sort code.  A kind person from Poland
contributed a patch earlier today.  It's not in CVS yet.

> 2.  Can anyone give a brief, technical explanation as to why opening
> multiple IndexSearcher objects is bad?

Very simple.  A Lucene index consists of X number of files that reside
on a disk.  Every time you open a new IndexSearcher, some of these
files need to be read.  If files do not change (no documents
added/removed), why do this repetitive work?  Just do it once.  When
these files are read, some data is stored in memory.  If you read them
multiple times, you will store the same data in memory multiple times.

> 3.  Certainly some of you on this list are using Lucene in a web-app
> environment.  Can anyone list some best practices on managing
> reading/writing/searching a Lucene index in that context?

I use something like this for http://www.simpy.com/ and it works well
for me:

    private IndexDescriptor getIndexDescriptor(String indexID)
        throws SearcherException
    {
        File indexDir = validateIndex(indexID);
        IndexDescriptor indexDescriptor =
getIndexDescriptorFromCache(indexDir);

        try
        {
            // if this is a known index
            if (indexDescriptor != null)
            {
                // if the index has changed since this Searcher was
created, make a new Searcher
                long currentVersion =
IndexReader.getCurrentVersion(indexDir);
                if (currentVersion > indexDescriptor.lastKnownVersion)
                {
                    indexDescriptor.lastKnownVersion = currentVersion;
                    indexDescriptor.searcher = new
LuceneUserSearcher(indexDir);
                }
            }
            // if this is a new index
            else
            {
                indexDescriptor = new IndexDescriptor();
                indexDescriptor.indexDir = indexDir;
                indexDescriptor.lastKnownVersion =
IndexReader.getCurrentVersion(indexDir);
                indexDescriptor.searcher = new
LuceneUserSearcher(indexDir);
            }
            return cacheIndexDescriptor(indexDescriptor);
        }
        catch (IOException e)
        {
            throw new SearcherException("Cannot open index: " +
indexDir, e);
        }
    }

IndexDescriptor is a simple 'struct' with everything public (not good
practise, you should change that):

final class IndexDescriptor
{
    public File indexDir;
    public long lastKnownVersion;
    public Searcher searcher;

    public String toString()
    {
        return IndexDescriptor.class.getName() + ": index directory: "
+ indexDir.getAbsolutePath()
            + ", last known version: " + lastKnownVersion + ",
searcher: " + searcher;
    }
}

These two things combined allow me to re-open an IndexSearcher when the
index changes, and re-use the same IndexSearcher while the index
remains unmodified.  Of course, that LuceneUserSearcher could be
Lucene's IndexSearcher, probably.

Otis
http://www.simpy.com/ -- Index, Search and Share your bookmarks


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10481-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 29 15:45:36 2004
Return-Path: <lucene-user-return-10481-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 45094 invoked from network); 29 Sep 2004 15:45:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Sep 2004 15:45:35 -0000
Received: (qmail 64604 invoked by uid 500); 29 Sep 2004 15:45:28 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 64571 invoked by uid 500); 29 Sep 2004 15:45:27 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 64543 invoked by uid 99); 29 Sep 2004 15:45:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [141.156.69.115] (HELO mail.infosciences.com) (141.156.69.115)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 29 Sep 2004 08:45:25 -0700
Received: from Aviran (unknown [141.156.69.109])
	by mail.infosciences.com (Postfix) with ESMTP id F3154118308
	for <lucene-user@jakarta.apache.org>; Wed, 29 Sep 2004 11:46:50 -0400 (EDT)
From: "Aviran" <amordo@infosciences.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Sorting on a long string
Date: Wed, 29 Sep 2004 11:45:17 -0400
Message-ID: <004001c4a63b$54b33b10$6a00a8c0@Aviran>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
In-Reply-To: <2EBCA9A0B92E654B9CD8176CC09509761A92BC@syrserv8e.acssyracuse.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Currently Lucene can only sort on a Keyword field properly.
I guess your field is tokenized, which in this case the sort does not =
work
properly.

A patch has been suggested to fix this problem ( but has not been =
applied
yet )

http://issues.apache.org/bugzilla/show_bug.cgi?id=3D30382

Aviran

-----Original Message-----
From: Daly, Pete [mailto:pete.daly@acs-inc.com]=20
Sent: Tuesday, September 28, 2004 15:46 PM
To: Lucene Users List
Subject: Sorting on a long string


I am new to lucene, and trying to perform a sorted query on a list of
people's names.  Lucene seem unable to properly sort on the name field =
of my
indexed documents.  If I sort by the other (shorter) fields, it seems to
work fine.  The name sort seems to be close, almost like the last few
iterations through the sort loop are not being done.  The records are
obviously not in the normally random order, but not fully sorted either. =
 I
have tried different ways of sorting, including a SortField array/object
with the field cast as a string.

The index I am sorting has about 1.2 million documents.

Are their known limitations in the sorting functionality that I am =
running
into?  I can provide more details if needed.

Thanks for any help,

-Pete



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10482-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 29 15:49:41 2004
Return-Path: <lucene-user-return-10482-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 47335 invoked from network); 29 Sep 2004 15:49:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Sep 2004 15:49:41 -0000
Received: (qmail 69874 invoked by uid 500); 29 Sep 2004 15:49:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 69777 invoked by uid 500); 29 Sep 2004 15:49:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 69764 invoked by uid 99); 29 Sep 2004 15:49:33 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [141.156.69.115] (HELO mail.infosciences.com) (141.156.69.115)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 29 Sep 2004 08:49:33 -0700
Received: from Aviran (unknown [141.156.69.109])
	by mail.infosciences.com (Postfix) with ESMTP id 1904E118309
	for <lucene-user@jakarta.apache.org>; Wed, 29 Sep 2004 11:50:58 -0400 (EDT)
From: "Aviran" <amordo@infosciences.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: re-indexing
Date: Wed, 29 Sep 2004 11:49:24 -0400
Message-ID: <004101c4a63b$e8046560$6a00a8c0@Aviran>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
In-Reply-To: <415A4276.2040902@atira.dk>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N



> 1. Why doesn't IndexReader.delete(i) really delete the file. it seems 
> to just make anothe 1K file with a .del extension the IndexWriter 
> still cannot content with?

The delete method only mark the documents as deleted. 
The documents that are marked as deleted will get deleted from the files on
the next optimization.



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10483-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 29 15:54:20 2004
Return-Path: <lucene-user-return-10483-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 49707 invoked from network); 29 Sep 2004 15:54:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Sep 2004 15:54:19 -0000
Received: (qmail 77846 invoked by uid 500); 29 Sep 2004 15:54:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 77820 invoked by uid 500); 29 Sep 2004 15:54:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 77798 invoked by uid 99); 29 Sep 2004 15:54:12 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [67.104.90.148] (HELO mail.elfon.com) (67.104.90.148)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 29 Sep 2004 08:54:08 -0700
Received: from [155.101.162.13] (unknown [155.101.162.13])
	(using TLSv1 with cipher RC4-SHA (128/128 bits))
	(No client certificate requested)
	by mail.elfon.com (Postfix) with ESMTP id 2BEB54233E
	for <lucene-user@jakarta.apache.org>; Wed, 29 Sep 2004 09:54:06 -0600 (MDT)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <415A4276.2040902@atira.dk>
References: <645A88B4-11B9-11D9-8AA4-000A95C8D078@holmbrew.org> <415A4276.2040902@atira.dk>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <C5F5448A-122F-11D9-8AA4-000A95C8D078@holmbrew.org>
Content-Transfer-Encoding: 7bit
From: jason <jason@holmbrew.org>
Subject: Re: re-indexing
Date: Wed, 29 Sep 2004 09:53:57 -0600
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

That did the trick.

Grrr.  I knew it was something fundamental that I was missing.  Thank 
you for your help.

On Sep 28, 2004, at 11:04 PM, Bo Gundersen wrote:

> Jason wrote:
>> I am having touble reindexing.
>> Basically what I want to do is:
>> 1. Delete the old index
>> 2. Write the new index.
>> The enviroment:
>> The index is search by a web app running from the Orion App Server. 
>> This
>> code runs fin and reindexes fine prior to any searches.  After the 
>> first
>> search against the index is completed the index ends up beiong 
>> read-only
>> ( or not writeable), I cannot reindex and subsequently cannot search
>> because the index is incomplete.
>
> We have several apps running like this only on Tomcat and JBoss with 
> no problems...
>
>> 1. Why doesn't IndexReader.delete(i) really delete the file. it seems 
>> to
>> just make anothe 1K file with a .del extension the IndexWriter still
>> cannot content with?
>
> Never tried the IndexReader.delete() method, we generally build the 
> new index in a temporary directory and when the index is done we 
> delete the current online directory (using java.io.File methods) and 
> then rename the temp directory to online.
>
>> 2. How can I make this work?
>
> This may be just be silly, but do you remember to close your 
> org.apache.lucene.search.IndexSearcher when you are done with your 
> search?
>
> -- 
> Bo Gundersen
> DBA/Software Developer
> M.Sc.CS.
> www.atira.dk
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10484-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 29 16:01:59 2004
Return-Path: <lucene-user-return-10484-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 52945 invoked from network); 29 Sep 2004 16:01:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Sep 2004 16:01:59 -0000
Received: (qmail 95513 invoked by uid 500); 29 Sep 2004 16:01:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 95407 invoked by uid 500); 29 Sep 2004 16:01:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 95269 invoked by uid 99); 29 Sep 2004 16:01:04 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.82.255.51] (HELO mail64.messagelabs.com) (216.82.255.51)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 29 Sep 2004 09:01:02 -0700
X-VirusChecked: Checked
X-Env-Sender: BDotzour@widen.com
X-Msg-Ref: server-7.tower-64.messagelabs.com!1096473654!14600875
X-StarScan-Version: 5.2.10; banners=-,-,-
X-Originating-IP: [69.8.156.101]
Received: (qmail 10901 invoked from network); 29 Sep 2004 16:00:55 -0000
Received: from mailhost.widen.com (HELO exchange2k.widen.com) (69.8.156.101)
  by server-7.tower-64.messagelabs.com with SMTP; 29 Sep 2004 16:00:55 -0000
Received: by exchange2k.widen.com with Internet Mail Service (5.5.2657.72)
	id <SPAWP2HS>; Wed, 29 Sep 2004 11:00:55 -0500
Message-ID: <9BF20741D07E824A9206E073EB6750E913FD82@exch2k3.widen.com>
From: Bryan Dotzour <BDotzour@widen.com>
To: 'Lucene Users List' <lucene-user@jakarta.apache.org>
Subject: RE: Memory usage: IndexSearcher & Sort
Date: Wed, 29 Sep 2004 11:00:49 -0500
X-Mailer: Internet Mail Service (5.5.2657.72)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks very much for the reply Otis.  Your code snippet is pretty
interesting and made me think about a few questions. 

1.  Do you just have one IndexReader for a given index?  It looks like you
are handing out a new IndexSearcher when the IndexReader has been modified.

2.  How does this approach work with multiple, simultaneous users?
3.  When does the reader need to get closed?

Thanks again.  
Bryan

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
Sent: Wednesday, September 29, 2004 8:47 AM
To: Lucene Users List
Subject: Re: Memory usage: IndexSearcher & Sort


Hello,

--- Bryan Dotzour <BDotzour@widen.com> wrote:

> I have been investigating a serious memory problem in our web app 
> (using Tapestry, Hibernate, & Lucene) and have reduced it to being the 
> way in which
> we are using Lucene to search on things.  Being a webapp, we have
> focused on
> doing our work within a user's request.  So we basically end up
> opening at
> least one new IndexSearcher on each individual page view.  In one
> particular
> case, we were doing this in a loop, eventually opening ~20-~40
> IndexSearchers which caused our memory usage to skyrocket.  After
> viewing
> that one page 3 or 4 times we would exhaust the server's memory
> allocation.
>  
> Most helpful in this search was the following thread from Bugzilla:
>  
> http://issues.apache.org/bugzilla/show_bug.cgi?id=30628
> <http://issues.apache.org/bugzilla/show_bug.cgi?id=30628>
>  
> From this thread, it sounds like constantly opening and closing 
> IndexSearcher objects is a "BAD THING", but it is exactly what we are 
> doing in our app.
> There are a few things that puzzle me and I'd love it if anyone has
> some
> input that might clear up some of these questions.
>  
> 1.  According to the Bugzilla thread, and from my own testing, you can 
> open lots of IndexSearchers in a loop and do a search WITHOUT SORTING 
> and not
> have this memory problem.  Is there an issue with the Sort code?

Yes, there is a memory leak in Sort code.  A kind person from Poland
contributed a patch earlier today.  It's not in CVS yet.

> 2.  Can anyone give a brief, technical explanation as to why opening 
> multiple IndexSearcher objects is bad?

Very simple.  A Lucene index consists of X number of files that reside on a
disk.  Every time you open a new IndexSearcher, some of these files need to
be read.  If files do not change (no documents added/removed), why do this
repetitive work?  Just do it once.  When these files are read, some data is
stored in memory.  If you read them multiple times, you will store the same
data in memory multiple times.

> 3.  Certainly some of you on this list are using Lucene in a web-app 
> environment.  Can anyone list some best practices on managing 
> reading/writing/searching a Lucene index in that context?

I use something like this for http://www.simpy.com/ and it works well for
me:

    private IndexDescriptor getIndexDescriptor(String indexID)
        throws SearcherException
    {
        File indexDir = validateIndex(indexID);
        IndexDescriptor indexDescriptor =
getIndexDescriptorFromCache(indexDir);

        try
        {
            // if this is a known index
            if (indexDescriptor != null)
            {
                // if the index has changed since this Searcher was created,
make a new Searcher
                long currentVersion =
IndexReader.getCurrentVersion(indexDir);
                if (currentVersion > indexDescriptor.lastKnownVersion)
                {
                    indexDescriptor.lastKnownVersion = currentVersion;
                    indexDescriptor.searcher = new
LuceneUserSearcher(indexDir);
                }
            }
            // if this is a new index
            else
            {
                indexDescriptor = new IndexDescriptor();
                indexDescriptor.indexDir = indexDir;
                indexDescriptor.lastKnownVersion =
IndexReader.getCurrentVersion(indexDir);
                indexDescriptor.searcher = new LuceneUserSearcher(indexDir);
            }
            return cacheIndexDescriptor(indexDescriptor);
        }
        catch (IOException e)
        {
            throw new SearcherException("Cannot open index: " + indexDir,
e);
        }
    }

IndexDescriptor is a simple 'struct' with everything public (not good
practise, you should change that):

final class IndexDescriptor
{
    public File indexDir;
    public long lastKnownVersion;
    public Searcher searcher;

    public String toString()
    {
        return IndexDescriptor.class.getName() + ": index directory: "
+ indexDir.getAbsolutePath()
            + ", last known version: " + lastKnownVersion + ",
searcher: " + searcher;
    }
}

These two things combined allow me to re-open an IndexSearcher when the
index changes, and re-use the same IndexSearcher while the index remains
unmodified.  Of course, that LuceneUserSearcher could be Lucene's
IndexSearcher, probably.

Otis
http://www.simpy.com/ -- Index, Search and Share your bookmarks


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10485-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 29 16:06:52 2004
Return-Path: <lucene-user-return-10485-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 55999 invoked from network); 29 Sep 2004 16:06:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Sep 2004 16:06:52 -0000
Received: (qmail 13877 invoked by uid 500); 29 Sep 2004 16:05:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 13827 invoked by uid 500); 29 Sep 2004 16:05:54 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 13800 invoked by uid 99); 29 Sep 2004 16:05:54 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.158.35.212] (HELO psmtp.com) (12.158.35.212)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 29 Sep 2004 09:05:52 -0700
Received: from source ([139.56.4.13]) by exprod6ob2.obsmtp.com ([12.158.35.250]) with SMTP;
	Wed, 29 Sep 2004 09:05:48 PDT
Received: from triangulum2.broadvision.com (triangulum2.broadvision.com [10.10.102.101])
	by nebula2.broadvision.com (8.10.2+Sun/8.10.2) with ESMTP id i8TG5lr10017
	for <lucene-user@jakarta.apache.org>; Wed, 29 Sep 2004 09:05:47 -0700 (PDT)
Received: from rw-gw-02.BroadVision.com (localhost [127.0.0.1])
	by triangulum2.broadvision.com (8.9.3+Sun/8.9.3) with ESMTP id JAA05975
	for <lucene-user@jakarta.apache.org>; Wed, 29 Sep 2004 09:08:12 -0700 (PDT)
Received: by rw-gw-02.broadvision.com with Internet Mail Service (5.5.2655.55)
	id <S6RFXTXA>; Wed, 29 Sep 2004 09:05:46 -0700
Message-ID: <6B68C05FFDF8D540BBC67FE6CE864C32038B20@rw-msg-02.BROADVISION.COM>
From: "Zhang, Lisheng" <Lisheng.Zhang@broadvision.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Keyword query confusion
Date: Wed, 29 Sep 2004 09:05:46 -0700
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

Erik and others mentioned that is_pub:1 won't
work because of Analyzer, but I remember in 
my test StandardAnalyzer does not take number
away, but SimpleAnalyzer does.

According to previous mail it is the Standard
Analyzer being used here, how could the number 
"1" is parsed away?

I used lucene 1.4, rc3.

Thanks very much for helps, 

Lisheng

-----Original Message-----
From: Erik Hatcher [mailto:erik@hatcher.net]
Sent: Saturday, September 25, 2004 1:59 AM
To: Lucene Users List
Subject: Re: Keyword query confusion


On Sep 24, 2004, at 12:26 PM, Fred Toth wrote:
> I'm trying to understand what's going on with the query parser
> and keyword fields.

It's a confusing situation, for sure.

> I've got a large subset of my documents which are "publications".
> So as to be able to query these, I've got this in the indexer:
>
> doc.add(Field.Keyword("is_pub", "1"));
>
> However, if I run a query:
>
> 	is_pub:1
>
> I get no hits. If I find a document by other means and dump the
> fields, the "is_pub" keyword is there, with value of "1".

As already stated - it is the analyzer eating the "1".  Every field is 
analyzed by QueryParser, but during indexing Field.Keyword fields are 
not indexed.

Search the archives for discussion on a KeywordAnalyzer and how to use 
it with PerFieldAnalyzerWrapper.  Also, the info here is valuable:

	http://wiki.apache.org/jakarta-lucene/AnalysisParalysis

Visualizing what an analyzer does and using Query.toString are both 
techniques to clearly point out what is happening.

> Now, I've learned that if I change the field to contain the value 
> "true"
> instead of the string "1", this query:
>
> 	is_pub:true
>
> works just fine.
>
> So, I'm pretty sure I'm running afoul of the analyzer, right? The doc 
> says
> specifically that I should add keyword query clauses programmatically,
> and I'm guessing that's what's wrong.

It really depends on your needs.  I personally wouldn't want end-users 
knowing to type "is_pub:true" into a search box.  Designing the most 
appropriate search interface for your situation is highly recommended.  
And in this case a checkbox for "Is published?" that translates into a 
TermQuery behind the scenes (likely combined with other pieces, perhaps 
a QueryParser parsed piece, using BooleanQuery).  TermQuery text is not 
analyzed, so you'd be safe there.

> But can someone explain this? It sure is useful to be able to test this
> sort of thing with the query parser. What is going on with the standard
> analyzer that makes "true" work and "1" not work?

Numbers get axed, that is what happens.

> Is there a way around this other than by writing code to create the
> query? This also applies to other types of query, like "pub_date:2004".

A PerFieldAnalyzerWrapper using WhitespaceAnalyzer for the "is_pub" 
field would do the trick in this case.

Again, users typing "pub_date:2004" seems awkward to me - make a year 
drop-down box if they need to select a year.

> Hoping for enlightenment...

Now that's a tall order... or is it?!  It's surrounding us all - we 
simply have to breath it in.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10486-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 29 16:25:53 2004
Return-Path: <lucene-user-return-10486-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 64465 invoked from network); 29 Sep 2004 16:25:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Sep 2004 16:25:53 -0000
Received: (qmail 61520 invoked by uid 500); 29 Sep 2004 16:25:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 61478 invoked by uid 500); 29 Sep 2004 16:25:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 61464 invoked by uid 99); 29 Sep 2004 16:25:43 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [206.190.39.191] (HELO web53001.mail.yahoo.com) (206.190.39.191)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 29 Sep 2004 09:25:42 -0700
Message-ID: <20040929162346.51538.qmail@web53001.mail.yahoo.com>
Received: from [216.231.10.162] by web53001.mail.yahoo.com via HTTP; Wed, 29 Sep 2004 09:23:46 PDT
Date: Wed, 29 Sep 2004 09:23:46 -0700 (PDT)
From: Edwin Tang <emttang@yahoo.com>
Subject: "Orphan" segment files
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

I'm seeing in my index directory some segment files that are not included in the segments or
deletable files. These segment files show their last modified date to be anywhere between a couple
of days ago to a few weeks ago. I'm wondering why these files are not contained inside segments or
deletable. Is it safe to delete them manually?

Thanks,
Ed


		
__________________________________
Do you Yahoo!?
Yahoo! Mail Address AutoComplete - You start. We finish.
http://promotions.yahoo.com/new_mail 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10487-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 29 16:27:45 2004
Return-Path: <lucene-user-return-10487-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 65101 invoked from network); 29 Sep 2004 16:27:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Sep 2004 16:27:45 -0000
Received: (qmail 63581 invoked by uid 500); 29 Sep 2004 16:27:36 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 63553 invoked by uid 500); 29 Sep 2004 16:27:35 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 63535 invoked by uid 99); 29 Sep 2004 16:27:35 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.242] (HELO web12705.mail.yahoo.com) (216.136.173.242)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 29 Sep 2004 09:27:34 -0700
Message-ID: <20040929162732.62345.qmail@web12705.mail.yahoo.com>
Received: from [194.152.224.24] by web12705.mail.yahoo.com via HTTP; Wed, 29 Sep 2004 09:27:32 PDT
Date: Wed, 29 Sep 2004 09:27:32 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: RE: Memory usage: IndexSearcher & Sort
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <9BF20741D07E824A9206E073EB6750E913FD82@exch2k3.widen.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello Bryan,

--- Bryan Dotzour <BDotzour@widen.com> wrote:

> Thanks very much for the reply Otis.  Your code snippet is pretty
> interesting and made me think about a few questions. 
> 
> 1.  Do you just have one IndexReader for a given index?  It looks
> like you
> are handing out a new IndexSearcher when the IndexReader has been
> modified.

1 index for each index.  Simpy has a LOT of Lucene indices.

> 2.  How does this approach work with multiple, simultaneous users?

IndexSearcher is thread-safe.

> 3.  When does the reader need to get closed?

Just leave it open.  You can close it when you are sure you no longer
need it, if you can determine that in your application.

Otis

> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
> Sent: Wednesday, September 29, 2004 8:47 AM
> To: Lucene Users List
> Subject: Re: Memory usage: IndexSearcher & Sort
> 
> 
> Hello,
> 
> --- Bryan Dotzour <BDotzour@widen.com> wrote:
> 
> > I have been investigating a serious memory problem in our web app 
> > (using Tapestry, Hibernate, & Lucene) and have reduced it to being
> the 
> > way in which
> > we are using Lucene to search on things.  Being a webapp, we have
> > focused on
> > doing our work within a user's request.  So we basically end up
> > opening at
> > least one new IndexSearcher on each individual page view.  In one
> > particular
> > case, we were doing this in a loop, eventually opening ~20-~40
> > IndexSearchers which caused our memory usage to skyrocket.  After
> > viewing
> > that one page 3 or 4 times we would exhaust the server's memory
> > allocation.
> >  
> > Most helpful in this search was the following thread from Bugzilla:
> >  
> > http://issues.apache.org/bugzilla/show_bug.cgi?id=30628
> > <http://issues.apache.org/bugzilla/show_bug.cgi?id=30628>
> >  
> > From this thread, it sounds like constantly opening and closing 
> > IndexSearcher objects is a "BAD THING", but it is exactly what we
> are 
> > doing in our app.
> > There are a few things that puzzle me and I'd love it if anyone has
> > some
> > input that might clear up some of these questions.
> >  
> > 1.  According to the Bugzilla thread, and from my own testing, you
> can 
> > open lots of IndexSearchers in a loop and do a search WITHOUT
> SORTING 
> > and not
> > have this memory problem.  Is there an issue with the Sort code?
> 
> Yes, there is a memory leak in Sort code.  A kind person from Poland
> contributed a patch earlier today.  It's not in CVS yet.
> 
> > 2.  Can anyone give a brief, technical explanation as to why
> opening 
> > multiple IndexSearcher objects is bad?
> 
> Very simple.  A Lucene index consists of X number of files that
> reside on a
> disk.  Every time you open a new IndexSearcher, some of these files
> need to
> be read.  If files do not change (no documents added/removed), why do
> this
> repetitive work?  Just do it once.  When these files are read, some
> data is
> stored in memory.  If you read them multiple times, you will store
> the same
> data in memory multiple times.
> 
> > 3.  Certainly some of you on this list are using Lucene in a
> web-app 
> > environment.  Can anyone list some best practices on managing 
> > reading/writing/searching a Lucene index in that context?
> 
> I use something like this for http://www.simpy.com/ and it works well
> for
> me:
> 
>     private IndexDescriptor getIndexDescriptor(String indexID)
>         throws SearcherException
>     {
>         File indexDir = validateIndex(indexID);
>         IndexDescriptor indexDescriptor =
> getIndexDescriptorFromCache(indexDir);
> 
>         try
>         {
>             // if this is a known index
>             if (indexDescriptor != null)
>             {
>                 // if the index has changed since this Searcher was
> created,
> make a new Searcher
>                 long currentVersion =
> IndexReader.getCurrentVersion(indexDir);
>                 if (currentVersion >
> indexDescriptor.lastKnownVersion)
>                 {
>                     indexDescriptor.lastKnownVersion =
> currentVersion;
>                     indexDescriptor.searcher = new
> LuceneUserSearcher(indexDir);
>                 }
>             }
>             // if this is a new index
>             else
>             {
>                 indexDescriptor = new IndexDescriptor();
>                 indexDescriptor.indexDir = indexDir;
>                 indexDescriptor.lastKnownVersion =
> IndexReader.getCurrentVersion(indexDir);
>                 indexDescriptor.searcher = new
> LuceneUserSearcher(indexDir);
>             }
>             return cacheIndexDescriptor(indexDescriptor);
>         }
>         catch (IOException e)
>         {
>             throw new SearcherException("Cannot open index: " +
> indexDir,
> e);
>         }
>     }
> 
> IndexDescriptor is a simple 'struct' with everything public (not good
> practise, you should change that):
> 
> final class IndexDescriptor
> {
>     public File indexDir;
>     public long lastKnownVersion;
>     public Searcher searcher;
> 
>     public String toString()
>     {
>         return IndexDescriptor.class.getName() + ": index directory:
> "
> + indexDir.getAbsolutePath()
>             + ", last known version: " + lastKnownVersion + ",
> searcher: " + searcher;
>     }
> }
> 
> These two things combined allow me to re-open an IndexSearcher when
> the
> index changes, and re-use the same IndexSearcher while the index
> remains
> unmodified.  Of course, that LuceneUserSearcher could be Lucene's
> IndexSearcher, probably.
> 
> Otis
> http://www.simpy.com/ -- Index, Search and Share your bookmarks
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10488-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 29 17:15:50 2004
Return-Path: <lucene-user-return-10488-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 85616 invoked from network); 29 Sep 2004 17:15:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Sep 2004 17:15:50 -0000
Received: (qmail 50539 invoked by uid 500); 29 Sep 2004 17:15:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 50484 invoked by uid 500); 29 Sep 2004 17:15:40 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 50471 invoked by uid 99); 29 Sep 2004 17:15:40 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.109.24.32] (HELO smtp-vbr12.xs4all.nl) (194.109.24.32)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 29 Sep 2004 10:15:39 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr12.xs4all.nl (8.12.11/8.12.11) with ESMTP id i8THFafo006250
	for <lucene-user@jakarta.apache.org>; Wed, 29 Sep 2004 19:15:36 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: lucene-user@jakarta.apache.org
Subject: Re: How to pull document scoring values
Date: Wed, 29 Sep 2004 19:15:36 +0200
User-Agent: KMail/1.5.4
References: <1096399373.15956.21.camel@zs.smartweb.rgu.ac.uk> <200409290917.21504.paul.elschot@xs4all.nl> <1096465286.14437.33.camel@zs.smartweb.rgu.ac.uk>
In-Reply-To: <1096465286.14437.33.camel@zs.smartweb.rgu.ac.uk>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200409291915.36268.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Wednesday 29 September 2004 15:41, Zia Syed wrote:
> Hi Paul,
> Thanks for your detailed reply! It really helped alot.
> However, I am experiancing some conflicts.
>
> For one of the documents in result set, when i use
>
> IndexReader fir=FilterIndexReader.open("index");
> byte[] fNorm=fir.norm("Body");
> System.out.println("FNorm: "+ fNorm[306]);
> Document d=fir.document(306);
> Field f=d.getField("Body");
>
> System.out.println("Body: "+ f.stringValue());
>
> This gives me out fNorm 113, whereas total number of term (including
> stop-words) are 42 in this particular field of selected document. In the
> explanation , fieldNorm (field=Body, doc=306) is 0.1562, which is approx
> 41 term words for that field in that documents. So explanation values
> makes sense with real data, while including all stop words like to,it,
> the & etc.
>
> So, my question is,
>
> > Am i getting the norm values from right place?

Yes, but the stored norms are encoded/decoded:
byte Similarity.encodeNorm(float)
float Similarity.decodeNorm(byte)

> > Is there any way to find out number of indexed terms for each
>
> document?

By default, the stored norm is the inverse square root of 
the number of indexed terms of an indexed document field.
The encoding/decoding is somewhat rough, though.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10489-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 29 17:38:50 2004
Return-Path: <lucene-user-return-10489-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 99135 invoked from network); 29 Sep 2004 17:38:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Sep 2004 17:38:49 -0000
Received: (qmail 98987 invoked by uid 500); 29 Sep 2004 17:38:35 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 98897 invoked by uid 500); 29 Sep 2004 17:38:34 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 98861 invoked by uid 99); 29 Sep 2004 17:38:34 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=SUB_FREE_OFFER
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.158.35.212] (HELO psmtp.com) (12.158.35.212)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 29 Sep 2004 10:38:32 -0700
Received: from source ([139.56.4.13]) by exprod6ob2.obsmtp.com ([12.158.35.250]) with SMTP;
	Wed, 29 Sep 2004 10:38:28 PDT
Received: from triangulum2.broadvision.com (triangulum2.broadvision.com [10.10.102.101])
	by nebula2.broadvision.com (8.10.2+Sun/8.10.2) with ESMTP id i8THcRr11565
	for <lucene-user@jakarta.apache.org>; Wed, 29 Sep 2004 10:38:27 -0700 (PDT)
Received: from rw-gw-01.BroadVision.com (localhost [127.0.0.1])
	by triangulum2.broadvision.com (8.9.3+Sun/8.9.3) with ESMTP id KAA07000
	for <lucene-user@jakarta.apache.org>; Wed, 29 Sep 2004 10:40:52 -0700 (PDT)
Received: by rw-gw-01.broadvision.com with Internet Mail Service (5.5.2655.55)
	id <TBR6216A>; Wed, 29 Sep 2004 10:38:27 -0700
Message-ID: <6B68C05FFDF8D540BBC67FE6CE864C32038B24@rw-msg-02.BROADVISION.COM>
From: "Zhang, Lisheng" <Lisheng.Zhang@broadvision.com>
To: "'lucene-user@jakarta.apache.org'" <lucene-user@jakarta.apache.org>
Cc: "Venkatraman, Shiv" <Shiv.Venkatraman@broadvision.com>,
   "Chen, Albert"
	 <Albert.Chen@broadvision.com>
Subject: Free software to crawl internet site?
Date: Wed, 29 Sep 2004 10:38:26 -0700
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

Does anyone know if there is free-software to crawl internet site
(webcrawler)? I know currently lucene does not have this feature
according to official lucene FAQ.

Thanks very much for helps, 

Lisheng

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10490-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 29 17:57:24 2004
Return-Path: <lucene-user-return-10490-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 11837 invoked from network); 29 Sep 2004 17:57:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Sep 2004 17:57:24 -0000
Received: (qmail 49950 invoked by uid 500); 29 Sep 2004 17:57:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 49922 invoked by uid 500); 29 Sep 2004 17:57:16 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 49908 invoked by uid 99); 29 Sep 2004 17:57:15 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [150.254.30.30] (HELO libra.cs.put.poznan.pl) (150.254.30.30)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 29 Sep 2004 10:57:15 -0700
Received: from libra.cs.put.poznan.pl (localhost [127.0.0.1])
	by libra (Postfix on VMS) with SMTP id 6BAE5DE1
	for <lucene-user@jakarta.apache.org>; Wed, 29 Sep 2004 19:57:13 +0200 (CEST)
Received: from cs.put.poznan.pl (bcd134.neoplus.adsl.tpnet.pl [83.27.219.134])
	by libra.cs.put.poznan.pl (Postfix on VMS) with ESMTP id 267FFC87
	for <lucene-user@jakarta.apache.org>; Wed, 29 Sep 2004 19:57:13 +0200 (CEST)
Message-ID: <415AF777.1010301@cs.put.poznan.pl>
Date: Wed, 29 Sep 2004 19:57:11 +0200
From: Dawid Weiss <dawid.weiss@cs.put.poznan.pl>
User-Agent: Mozilla Thunderbird 0.5b (Windows/20040204)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Free software to crawl internet site?
References: <6B68C05FFDF8D540BBC67FE6CE864C32038B24@rw-msg-02.BROADVISION.COM>
In-Reply-To: <6B68C05FFDF8D540BBC67FE6CE864C32038B24@rw-msg-02.BROADVISION.COM>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Nutch has a crawler. So does Egothor (the crawler is called Capek). If 
you type "web crawler" in Google you'll get tons of projects.

Dawid


Zhang, Lisheng wrote:

> Hi,
> 
> Does anyone know if there is free-software to crawl internet site
> (webcrawler)? I know currently lucene does not have this feature
> according to official lucene FAQ.
> 
> Thanks very much for helps, 
> 
> Lisheng
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10491-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 29 19:27:01 2004
Return-Path: <lucene-user-return-10491-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 69627 invoked from network); 29 Sep 2004 19:27:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Sep 2004 19:27:01 -0000
Received: (qmail 31250 invoked by uid 500); 29 Sep 2004 19:26:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 31162 invoked by uid 500); 29 Sep 2004 19:25:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 31107 invoked by uid 99); 29 Sep 2004 19:25:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 29 Sep 2004 12:25:58 -0700
Received: (qmail 5585 invoked by uid 89); 29 Sep 2004 19:25:54 -0000
Received: from unknown (HELO ?192.168.168.81?) (postmaster@cottrell-cutting.net@24.5.163.156)
  by londo.swishmail.com with AES256-SHA encrypted SMTP; 29 Sep 2004 19:25:54 -0000
Message-ID: <415B0BAF.6040609@apache.org>
Date: Wed, 29 Sep 2004 12:23:27 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.2) Gecko/20040806
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: problem with get/setBoost of document fields
References: <4151ABEF.2060504@eastbeam.com> <200409222115.10048@danielnaber.de> <4152BED2.4090908@eastbeam.com> <006420E2-0D60-11D9-B393-000393A564E6@ehatchersolutions.com> <4152D729.7080609@eastbeam.com> <4152F94B.3090408@apache.org> <41541F7F.7080003@eastbeam.com>
In-Reply-To: <41541F7F.7080003@eastbeam.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Bastian Grimm [Eastbeam GmbH] wrote:
> that works... but i have to do this setNorm() for each document, which 
> has been indexed up to now, right? there are round about 1 mio. docs in 
> the index... i dont think it's a good idea to perform a search and do it 
> for every doc (and every field of the doc...).
> is there any possibility to do something like: setNorm(alldocs, 
> "fieldX", 2.0f) - a global boost for a named field for every doc.

setNorm() is quite fast.  Calling it 1M times will not take long.

> a last question: lucene creates some .f[1-9]  after setNorm() has 
> finished. does this file remain all the time in this folder? i tried to 
> optimize and so one but nothing happend.

If you add or remove documents and optimize then these will go away.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10492-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Sep 29 22:27:17 2004
Return-Path: <lucene-user-return-10492-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 54129 invoked from network); 29 Sep 2004 22:27:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Sep 2004 22:27:17 -0000
Received: (qmail 88490 invoked by uid 500); 29 Sep 2004 22:27:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 88383 invoked by uid 500); 29 Sep 2004 22:27:08 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 88366 invoked by uid 99); 29 Sep 2004 22:27:08 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=FROM_ENDS_IN_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.148.212.184] (HELO w02.bloglines.com) (216.148.212.184)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 29 Sep 2004 15:27:06 -0700
Received: (qmail 20202 invoked by uid 99); 29 Sep 2004 22:27:03 -0000
Message-ID: <1096496823.22369006.20201.sendItem@bloglines.com>
Date: 29 Sep 2004 22:27:03 -0000
From: yahootintin.1247688@bloglines.com
To: lucene-user@jakarta.apache.org
Subject: IndexReader / IndexSearcher
MIME-Version: 1.0
Content-Type: text/plain
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I'm opening a new IndexReader for every search request which obviously isn't
the best option.

If I open a reader can I use the same searcher for multiple
requests that are happening simultaneously?  If I call close on the searcher
will it close for all the instances?

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10493-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 30 05:13:07 2004
Return-Path: <lucene-user-return-10493-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 90661 invoked from network); 30 Sep 2004 05:13:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Sep 2004 05:13:07 -0000
Received: (qmail 6297 invoked by uid 500); 30 Sep 2004 05:12:55 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 6210 invoked by uid 500); 30 Sep 2004 05:12:54 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 6197 invoked by uid 99); 30 Sep 2004 05:12:54 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [192.38.202.200] (HELO hasseris.netnord.dk) (192.38.202.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 29 Sep 2004 22:12:53 -0700
Received: from [10.10.70.118] by hasseris.netnord.dk
          (Post.Office MTA v3.5.1 release 219 ID# 0-52465U1200L200S0V35)
          with ESMTP id dk; Thu, 30 Sep 2004 07:12:47 +0200
Message-ID: <415B95CA.9000306@atira.dk>
Date: Thu, 30 Sep 2004 07:12:42 +0200
From: Bo Gundersen <bg@atira.dk>
Organization: Atira Aps
User-Agent: Mozilla Thunderbird 0.7.2 (Windows/20040707)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
CC: "Venkatraman, Shiv" <Shiv.Venkatraman@broadvision.com>, 
 "Chen, Albert" <Albert.Chen@broadvision.com>
Subject: Re: Free software to crawl internet site?
References: <6B68C05FFDF8D540BBC67FE6CE864C32038B24@rw-msg-02.BROADVISION.COM>
In-Reply-To: <6B68C05FFDF8D540BBC67FE6CE864C32038B24@rw-msg-02.BROADVISION.COM>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Zhang, Lisheng wrote:

> Hi,
> 
> Does anyone know if there is free-software to crawl internet site
> (webcrawler)? I know currently lucene does not have this feature
> according to official lucene FAQ.
> 
> Thanks very much for helps, 

In the lucene sandbox there is a pretty advanced crawler called LARM, 
you can check it out at this URL 
http://jakarta.apache.org/lucene/docs/lucene-sandbox/ (right at the bottom).

-- 
Bo Gundersen
DBA/Software Developer
M.Sc.CS.
www.atira.dk

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10494-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 30 06:34:28 2004
Return-Path: <lucene-user-return-10494-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21720 invoked from network); 30 Sep 2004 06:34:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Sep 2004 06:34:28 -0000
Received: (qmail 92992 invoked by uid 500); 30 Sep 2004 06:34:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 92966 invoked by uid 500); 30 Sep 2004 06:34:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 92951 invoked by uid 99); 30 Sep 2004 06:34:15 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [205.158.62.199] (HELO ws6-3.us4.outblaze.com) (205.158.62.199)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 29 Sep 2004 23:34:14 -0700
Received: (qmail 28856 invoked from network); 30 Sep 2004 06:34:04 -0000
Received: from unknown (HELO ?129.132.103.152?) (erik@hatcher.net@129.132.103.152)
  by ws6-3.us4.outblaze.com with SMTP; 30 Sep 2004 06:34:04 -0000
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <9BF20741D07E824A9206E073EB6750E913FD81@exch2k3.widen.com>
References: <9BF20741D07E824A9206E073EB6750E913FD81@exch2k3.widen.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <88105817-1245-11D9-A085-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Memory usage: IndexSearcher & Sort
Date: Wed, 29 Sep 2004 20:29:42 +0200
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Sep 29, 2004, at 3:11 PM, Bryan Dotzour wrote:
> 3.  Certainly some of you on this list are using Lucene in a web-app
> environment.  Can anyone list some best practices on managing
> reading/writing/searching a Lucene index in that context?

Beyond the advice already given on this thread, since you said you were 
using Tapestry, I keep an IndexSearcher as a transient lazy-init'd 
property of my Global object.  It needs to be transient in case you are 
scaling with distributed servers in a farm and lazy init'd so to 
instantiate the first time.

Global, in Tapestry, makes a good place to put index operations.  As 
for searching - a good first try is to re-query for each page of search 
results (if you're implementing paging of results, that is).  It is 
often fast enough.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10495-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 30 06:38:52 2004
Return-Path: <lucene-user-return-10495-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 23567 invoked from network); 30 Sep 2004 06:38:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Sep 2004 06:38:52 -0000
Received: (qmail 1238 invoked by uid 500); 30 Sep 2004 06:38:36 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 1179 invoked by uid 500); 30 Sep 2004 06:38:35 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 1153 invoked by uid 99); 30 Sep 2004 06:38:34 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [205.158.62.199] (HELO ws6-3.us4.outblaze.com) (205.158.62.199)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 29 Sep 2004 23:38:34 -0700
Received: (qmail 6390 invoked from network); 30 Sep 2004 06:38:27 -0000
Received: from unknown (HELO ?129.132.103.152?) (erik@hatcher.net@129.132.103.152)
  by ws6-3.us4.outblaze.com with SMTP; 30 Sep 2004 06:38:27 -0000
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <2EBCA9A0B92E654B9CD8176CC09509761A92BC@syrserv8e.acssyracuse.com>
References: <2EBCA9A0B92E654B9CD8176CC09509761A92BC@syrserv8e.acssyracuse.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <0CA61565-1244-11D9-A085-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Sorting on a long string
Date: Wed, 29 Sep 2004 20:19:06 +0200
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Sep 28, 2004, at 9:46 PM, Daly, Pete wrote:
> I am new to lucene, and trying to perform a sorted query on a list of
> people's names.  Lucene seem unable to properly sort on the name field 
> of my
> indexed documents.  If I sort by the other (shorter) fields, it seems 
> to
> work fine.  The name sort seems to be close, almost like the last few
> iterations through the sort loop are not being done.

How are you indexing the name field?  (code please :)

>   The records are
> obviously not in the normally random order, but not fully sorted 
> either.

Normally random order?!  The natural (not using a Sort) order is by 
score (also called relevance).  Nothing random about it at all.  In 
fact, this ordering is very special!  See the Javadocs on the 
Similarity class for details of the formula.

> Are their known limitations in the sorting functionality that I am 
> running
> into?  I can provide more details if needed.

No limitations that I know if.  Some bugs have been fixed, so be sure 
you're using Lucene 1.4.1, and not just 1.4, but please report back 
with more details if this issue still occurs in 1.4.1.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10496-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 30 06:40:21 2004
Return-Path: <lucene-user-return-10496-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 24063 invoked from network); 30 Sep 2004 06:40:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Sep 2004 06:40:21 -0000
Received: (qmail 2901 invoked by uid 500); 30 Sep 2004 06:40:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 2875 invoked by uid 500); 30 Sep 2004 06:40:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 2862 invoked by uid 99); 30 Sep 2004 06:40:09 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 29 Sep 2004 23:40:08 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id 5C24E23B93
	for <lucene-user@jakarta.apache.org>; Thu, 30 Sep 2004 08:40:14 +0200 (CEST)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 24447-10 for <lucene-user@jakarta.apache.org>;
 Thu, 30 Sep 2004 08:40:14 +0200 (CEST)
Received: from tucholsky.office.tanto.de (unknown [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP id 382A923B8F
	for <lucene-user@jakarta.apache.org>; Thu, 30 Sep 2004 08:40:14 +0200 (CEST)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id i8U6e4GL010784
	for <lucene-user@jakarta.apache.org>; Thu, 30 Sep 2004 08:40:04 +0200
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id i8U6e4aM010778;
	Thu, 30 Sep 2004 08:40:04 +0200
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16731.43588.240819.431678@tanto-xipolis.de>
Date: Thu, 30 Sep 2004 08:40:04 +0200
To: lucene-user@jakarta.apache.org
Subject: Re: Seraching in Keyword Field
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Bernhard Messer wrote 

> Hi,
> 
> try that query:
> 
> MyKeywordField:ABC
> 
Why should that help?
foo:(bla) and foo:bla create the same query:

java -classpath lucene-1.4.1/lucene-1.4.1.jar org.apache.lucene.queryParser.QueryParser 'foo:(bla)'
foo:bla
java -classpath lucene-1.4.1/lucene-1.4.1.jar org.apache.lucene.queryParser.QueryParser 'foo:bla'
foo:bla

As often the necessary step is to look at what query parser produced
using query.toString()

I guess SimpleAnalyzer lowercases the term and prevents entries 'ABC' from 
beeing found.
Using an apropriate PerFieldAnalyzerWrapper might help.

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10497-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 30 10:53:36 2004
Return-Path: <lucene-user-return-10497-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 55356 invoked from network); 30 Sep 2004 10:53:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Sep 2004 10:53:36 -0000
Received: (qmail 3837 invoked by uid 500); 30 Sep 2004 10:53:21 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 3783 invoked by uid 500); 30 Sep 2004 10:53:21 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 3707 invoked by uid 99); 30 Sep 2004 10:53:20 -0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_IN_NJABL_PROXY
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.245] (HELO web12708.mail.yahoo.com) (216.136.173.245)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 30 Sep 2004 03:53:17 -0700
Message-ID: <20040930105315.56759.qmail@web12708.mail.yahoo.com>
Received: from [194.152.216.133] by web12708.mail.yahoo.com via HTTP; Thu, 30 Sep 2004 03:53:15 PDT
Date: Thu, 30 Sep 2004 03:53:15 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: IndexReader / IndexSearcher
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <1096496823.22369006.20201.sendItem@bloglines.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Positive for all your questions.
I posted some code yesterday that helps with re-using IndexSearcher and
with re-opening it when the index changes.

Otis

--- yahootintin.1247688@bloglines.com wrote:

> I'm opening a new IndexReader for every search request which
> obviously isn't
> the best option.
> 
> If I open a reader can I use the same searcher for multiple
> requests that are happening simultaneously?  If I call close on the
> searcher
> will it close for all the instances?
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10498-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 30 10:56:17 2004
Return-Path: <lucene-user-return-10498-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 56659 invoked from network); 30 Sep 2004 10:56:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Sep 2004 10:56:17 -0000
Received: (qmail 9503 invoked by uid 500); 30 Sep 2004 10:56:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 9457 invoked by uid 500); 30 Sep 2004 10:56:08 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 9444 invoked by uid 99); 30 Sep 2004 10:56:08 -0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_IN_NJABL_PROXY
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.245] (HELO web12708.mail.yahoo.com) (216.136.173.245)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 30 Sep 2004 03:56:07 -0700
Message-ID: <20040930105605.56987.qmail@web12708.mail.yahoo.com>
Received: from [194.152.216.133] by web12708.mail.yahoo.com via HTTP; Thu, 30 Sep 2004 03:56:05 PDT
Date: Thu, 30 Sep 2004 03:56:05 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: about online index
To: lucene-user@jakarta.apache.org, haipeng du <haipengdu@gmail.com>
In-Reply-To: <cb1a940040929134054816e0a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Redirecting to lucene-user list.

Maybe this is what you need:
http://sourceforge.net/projects/luceneserver/

Otis

--- haipeng du <haipengdu@gmail.com> wrote:

> Everyone:
> I want to create a lucene index server in which all index files are
> saved. All clients(on different computers) will access those index
> files and search it, then get a list of file uri. How could I do
> that?
> Could somebody give me some examples?
> Thanks a lot.
> Haipeng
> 
> 
> -- 
> Haipeng Du
> Software Engineer
> Comphealth, 
> Salt Lake City
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-dev-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-dev-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10499-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 30 10:57:14 2004
Return-Path: <lucene-user-return-10499-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 57072 invoked from network); 30 Sep 2004 10:57:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Sep 2004 10:57:14 -0000
Received: (qmail 10830 invoked by uid 500); 30 Sep 2004 10:57:06 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 10757 invoked by uid 500); 30 Sep 2004 10:57:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 10742 invoked by uid 99); 30 Sep 2004 10:57:05 -0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_IN_NJABL_PROXY
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.238] (HELO web12701.mail.yahoo.com) (216.136.173.238)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 30 Sep 2004 03:57:04 -0700
Message-ID: <20040930105703.68965.qmail@web12701.mail.yahoo.com>
Received: from [194.152.216.133] by web12701.mail.yahoo.com via HTTP; Thu, 30 Sep 2004 03:57:03 PDT
Date: Thu, 30 Sep 2004 03:57:03 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Free software to crawl internet site?
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <415B95CA.9000306@atira.dk>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

LARM is no longer being maintained, unfortunately.  Use Nutch -
http://www.nutch.org/

Otis

--- Bo Gundersen <bg@atira.dk> wrote:

> Zhang, Lisheng wrote:
> 
> > Hi,
> > 
> > Does anyone know if there is free-software to crawl internet site
> > (webcrawler)? I know currently lucene does not have this feature
> > according to official lucene FAQ.
> > 
> > Thanks very much for helps, 
> 
> In the lucene sandbox there is a pretty advanced crawler called LARM,
> 
> you can check it out at this URL 
> http://jakarta.apache.org/lucene/docs/lucene-sandbox/ (right at the
> bottom).
> 
> -- 
> Bo Gundersen
> DBA/Software Developer
> M.Sc.CS.
> www.atira.dk
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10500-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 30 11:24:29 2004
Return-Path: <lucene-user-return-10500-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 73742 invoked from network); 30 Sep 2004 11:24:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Sep 2004 11:24:29 -0000
Received: (qmail 44314 invoked by uid 500); 30 Sep 2004 11:24:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 44291 invoked by uid 500); 30 Sep 2004 11:24:16 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 44265 invoked by uid 99); 30 Sep 2004 11:24:15 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [81.80.239.198] (HELO outbound1.sopragroup.com) (81.80.239.198)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 30 Sep 2004 04:24:14 -0700
Received: by outbound1.sopragroup.com (8.12.10/8.12.10/outbound-A02) with ESMTP id i8UBO8Kp026463
          for <lucene-user@jakarta.apache.org>; Thu, 30 Sep 2004 13:24:09 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Memory usage: IndexSearcher & Sort
Date: Thu, 30 Sep 2004 13:24:08 +0200
Message-ID: <5933531F07A5144E9E53E1AA45257E4B01048C20@wexchbe03.ancy.fr.sopra>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Memory usage: IndexSearcher & Sort
Thread-Index: AcSmQT1suvILBKopQl2ceiuyn7lIewAnaa7Q
From: "Cocula Remi" <rcocula@sopragroup.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-OriginalArrivalTime: 30 Sep 2004 11:24:22.0468 (UTC) FILETIME=[08DB2040:01C4A6E0]
X-Scanned-By: MIMEDefang 2.38
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N



-----Message d'origine-----
De : Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
Envoy=E9 : mercredi 29 septembre 2004 18:28
=C0 : Lucene Users List
Objet : RE: Memory usage: IndexSearcher & Sort



>> 2.  How does this approach work with multiple, simultaneous users?

>IndexSearcher is thread-safe.

You mean one can invoque at the same time the search method of a unique =
Searcheable in two different threads,=20
Don't you ?



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10501-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 30 11:36:52 2004
Return-Path: <lucene-user-return-10501-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 82660 invoked from network); 30 Sep 2004 11:36:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Sep 2004 11:36:52 -0000
Received: (qmail 62539 invoked by uid 500); 30 Sep 2004 11:36:32 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 62482 invoked by uid 500); 30 Sep 2004 11:36:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 62436 invoked by uid 99); 30 Sep 2004 11:36:26 -0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_IN_NJABL_PROXY
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.242] (HELO web12705.mail.yahoo.com) (216.136.173.242)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 30 Sep 2004 04:36:25 -0700
Message-ID: <20040930113611.13495.qmail@web12705.mail.yahoo.com>
Received: from [194.152.216.133] by web12705.mail.yahoo.com via HTTP; Thu, 30 Sep 2004 04:36:11 PDT
Date: Thu, 30 Sep 2004 04:36:11 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: RE: Memory usage: IndexSearcher & Sort
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <5933531F07A5144E9E53E1AA45257E4B01048C20@wexchbe03.ancy.fr.sopra>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Correct.  I think there is a FAQ entry at jguru.com that answers this.

Otis

--- Cocula Remi <rcocula@sopragroup.com> wrote:
> >> 2.  How does this approach work with multiple, simultaneous users?
> 
> >IndexSearcher is thread-safe.
> 
> You mean one can invoque at the same time the search method of a
> unique Searcheable in two different threads, 
> Don't you ?


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10502-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 30 11:37:58 2004
Return-Path: <lucene-user-return-10502-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 83392 invoked from network); 30 Sep 2004 11:37:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Sep 2004 11:37:58 -0000
Received: (qmail 66602 invoked by uid 500); 30 Sep 2004 11:37:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 66565 invoked by uid 500); 30 Sep 2004 11:37:47 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 66550 invoked by uid 99); 30 Sep 2004 11:37:47 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=HTML_30_40,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [63.101.151.4] (HELO acs-inc.com) (63.101.151.4)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 30 Sep 2004 04:37:46 -0700
Received: from dalexgw01.exchange.acsad.acs-inc.com (Not Verified[63.97.180.93]) by acs-inc.com with NetIQ MailMarshal (v5.5.6.7)
	id <BB038fb171>; Thu, 30 Sep 2004 06:42:02 -0500
Received: by dalexgw01.exchange.acsad.acs-inc.com with Internet Mail Service (5.5.2657.72)
	id <TFXDWYZY>; Thu, 30 Sep 2004 06:37:42 -0500
Message-ID: <2EBCA9A0B92E654B9CD8176CC09509761A9743@syrserv8e.acssyracuse.com>
From: "Daly, Pete" <pete.daly@acs-inc.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: RE: Sorting on a long string
Date: Thu, 30 Sep 2004 06:37:55 -0500
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C4A6E1.ED2DDD74"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C4A6E1.ED2DDD74
Content-Type: text/plain;
	charset="iso-8859-1"

> How are you indexing the name field?  (code please :)

doc.add(Field.Text("name", name));

Based on Aviron's suggestion, if I index as a Keyword, the sort works fine.


> Normally random order?!  The natural (not using a Sort) order is by 
> score (also called relevance).  Nothing random about it at all.  In 
> fact, this ordering is very special!  See the Javadocs on the 
> Similarity class for details of the formula.

Score makes sense then.  I didn't think about sort by score since I was
specifying a specific sort to use instead.

> No limitations that I know if.  Some bugs have been fixed, so be sure 
> you're using Lucene 1.4.1, and not just 1.4, but please report back 
> with more details if this issue still occurs in 1.4.1.

Looks like switching to keyword is the solution.  Can someone describe what
abilities I would be losing by using Keyword instead of Text.  I am indexing
people's name, which are searched on my partial name quite a bit.  Can a
Keyword consisting of more than one "word" be searched on just as well as a
"Text" field, or do I need to index both ways in order to keep functionality
with sorting ability?

Thanks all for your help,

-Pete

------_=_NextPart_001_01C4A6E1.ED2DDD74--

From lucene-user-return-10503-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 30 13:41:24 2004
Return-Path: <lucene-user-return-10503-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 55957 invoked from network); 30 Sep 2004 13:41:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Sep 2004 13:41:24 -0000
Received: (qmail 82031 invoked by uid 500); 30 Sep 2004 13:40:35 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 81938 invoked by uid 500); 30 Sep 2004 13:40:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 81924 invoked by uid 99); 30 Sep 2004 13:40:33 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [141.156.69.115] (HELO mail.infosciences.com) (141.156.69.115)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 30 Sep 2004 06:40:31 -0700
Received: from Aviran (unknown [141.156.69.109])
	by mail.infosciences.com (Postfix) with ESMTP id B723A118309
	for <lucene-user@jakarta.apache.org>; Thu, 30 Sep 2004 09:41:49 -0400 (EDT)
From: "Aviran" <amordo@infosciences.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Sorting on a long string
Date: Thu, 30 Sep 2004 09:40:26 -0400
Message-ID: <000d01c4a6f3$0df880f0$6a00a8c0@Aviran>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
In-Reply-To: <2EBCA9A0B92E654B9CD8176CC09509761A9743@syrserv8e.acssyracuse.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

When you index the keyword field (for sort), you'll probably need to =
lower
case  the term before indexing.


-----Original Message-----
From: Daly, Pete [mailto:pete.daly@acs-inc.com]=20
Sent: Thursday, September 30, 2004 7:38 AM
To: Lucene Users List
Subject: RE: Sorting on a long string


> How are you indexing the name field?  (code please :)

doc.add(Field.Text("name", name));

Based on Aviron's suggestion, if I index as a Keyword, the sort works =
fine.


> Normally random order?!  The natural (not using a Sort) order is by
> score (also called relevance).  Nothing random about it at all.  In=20
> fact, this ordering is very special!  See the Javadocs on the=20
> Similarity class for details of the formula.

Score makes sense then.  I didn't think about sort by score since I was
specifying a specific sort to use instead.

> No limitations that I know if.  Some bugs have been fixed, so be sure
> you're using Lucene 1.4.1, and not just 1.4, but please report back=20
> with more details if this issue still occurs in 1.4.1.

Looks like switching to keyword is the solution.  Can someone describe =
what
abilities I would be losing by using Keyword instead of Text.  I am =
indexing
people's name, which are searched on my partial name quite a bit.  Can a
Keyword consisting of more than one "word" be searched on just as well =
as a
"Text" field, or do I need to index both ways in order to keep =
functionality
with sorting ability?

Thanks all for your help,

-Pete



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10504-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Sep 30 16:37:29 2004
Return-Path: <lucene-user-return-10504-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 53286 invoked from network); 30 Sep 2004 16:37:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Sep 2004 16:37:29 -0000
Received: (qmail 34070 invoked by uid 500); 30 Sep 2004 16:36:40 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 33950 invoked by uid 500); 30 Sep 2004 16:36:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 33896 invoked by uid 99); 30 Sep 2004 16:36:31 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [206.190.38.47] (HELO web50206.mail.yahoo.com) (206.190.38.47)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 30 Sep 2004 09:36:30 -0700
Message-ID: <20040930163628.21489.qmail@web50206.mail.yahoo.com>
Received: from [24.37.196.12] by web50206.mail.yahoo.com via HTTP; Thu, 30 Sep 2004 09:36:28 PDT
Date: Thu, 30 Sep 2004 09:36:28 -0700 (PDT)
From: Oscar Picasso <oscgoogle@yahoo.com>
Subject: Restricting searches to some URLs
To: lucene <lucene-user@jakarta.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

I use Lucene inside a Cocoon application. The indexed documents URLs are
something like <domain-name>//<integer>/<integer>/<integer>. For example:
flowers//1/234/23
flowers//2/23/90
...
animals//1/34/65
animals//21/98/4532
...

The searches are typically done in a subset of all available URLs.
For example in all URLS that start with "flowers//2/23/" or "animals//21/" or
"animals//".

I don't see how to do this with Cocoon. Maybe it's only due to some limitations
in the Cocoon implementations of searches and indexing, but anyway I would be
interested to know how it can be done in Cocoon and if not, also directly with
Lucene.

Here is what I have tried:
- doing a search in the @field
I have read somewhere that you can index the @uri field but don't see how to do
this with cocoon

- adding a new url field and using it for the search
It doesn't work. It seems, that due to how the urls are written (combination or
integers and '/') I cannot search for something like: url//flowers/*.

Any idea?

Oscar


		
__________________________________
Do you Yahoo!?
Take Yahoo! Mail with you! Get it on your mobile phone.
http://mobile.yahoo.com/maildemo 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10505-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Oct 01 01:25:00 2004
Return-Path: <lucene-user-return-10505-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 70343 invoked from network); 1 Oct 2004 01:25:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Oct 2004 01:25:00 -0000
Received: (qmail 87315 invoked by uid 500); 1 Oct 2004 01:24:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 87216 invoked by uid 500); 1 Oct 2004 01:24:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 87199 invoked by uid 99); 1 Oct 2004 01:24:47 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of fraschetti@gmail.com designates 64.233.170.194 as permitted sender)
Received: from [64.233.170.194] (HELO mproxy.gmail.com) (64.233.170.194)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 30 Sep 2004 18:24:46 -0700
Received: by mproxy.gmail.com with SMTP id 77so1021343rnl
        for <lucene-user@jakarta.apache.org>; Thu, 30 Sep 2004 18:24:42 -0700 (PDT)
Received: by 10.38.77.44 with SMTP id z44mr3953300rna;
        Thu, 30 Sep 2004 18:24:42 -0700 (PDT)
Received: by 10.38.171.15 with HTTP; Thu, 30 Sep 2004 18:24:42 -0700 (PDT)
Message-ID: <cbdebdf804093018244fdaeb05@mail.gmail.com>
Date: Thu, 30 Sep 2004 18:24:42 -0700
From: Chris Fraschetti <fraschetti@gmail.com>
Reply-To: Chris Fraschetti <fraschetti@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: BooleanQuery - Too Many Clases on date range.
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I recently read in regards to my problem that date_field:[0820483200
TO 1104480000]
is evluated into a series of boolean queries ... which has a cap of
1024 ... considering my documents will have dates spanning over many
years, and i need the granualirity of 'by day' searching, are there
any reccomendations on how to make this work?

Currently with query: +content_field:sometext +date_field:[0820483200
TO 1104480000]
I get the following exception:
org.apache.lucene.search.BooleanQuery$TooManyClauses


any suggestions on how I can still keep the granuality of by day, but
without limiting my search results? Are there any date formats that I
can change those numbers to that would allow me to complete the search
(i.e.  Feb, 15 2004 ) .. can lucene's range do a proper search on
formatted dates?

Is there a combination of RangeQuery and Query/MultiTermQuery that I can use?

your help is greatly appreciated.


-- 
___________________________________________________
Chris Fraschetti
e fraschetti@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10506-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Oct 01 04:17:20 2004
Return-Path: <lucene-user-return-10506-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 22901 invoked from network); 1 Oct 2004 04:17:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Oct 2004 04:17:20 -0000
Received: (qmail 10670 invoked by uid 500); 1 Oct 2004 04:17:06 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 10639 invoked by uid 500); 1 Oct 2004 04:17:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 10610 invoked by uid 99); 1 Oct 2004 04:17:05 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of robinson.raju@gmail.com designates 64.233.170.201 as permitted sender)
Received: from [64.233.170.201] (HELO mproxy.gmail.com) (64.233.170.201)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 30 Sep 2004 21:17:04 -0700
Received: by mproxy.gmail.com with SMTP id v30so626076rnb
        for <lucene-user@jakarta.apache.org>; Thu, 30 Sep 2004 21:17:03 -0700 (PDT)
Received: by 10.38.8.80 with SMTP id 80mr616027rnh;
        Thu, 30 Sep 2004 21:17:03 -0700 (PDT)
Received: by 10.38.8.25 with HTTP; Thu, 30 Sep 2004 21:17:03 -0700 (PDT)
Message-ID: <d4357031040930211760c5b5fd@mail.gmail.com>
Date: Fri, 1 Oct 2004 09:47:03 +0530
From: Robinson Raju <robinson.raju@gmail.com>
Reply-To: Robinson Raju <robinson.raju@gmail.com>
To: lucene-user-help@jakarta.apache.org
Subject: RE: WildCardQuery
Cc: lucene-user@jakarta.apache.org
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi ,
   Would there be a problem if one enters space while using wildcards ?
say i search for 'abc' . i get 100 hits as results
'man' gives - 200
'abc man' gives 300
but 
'ab* man'
'abc ma*'
ab* ma*'
ab* OR ma* 
..
all of these return 0 results.
can we not enter space or do an OR search with two words one of which
has a wildcard ?

Regards,
Robin

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10507-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Oct 01 05:14:39 2004
Return-Path: <lucene-user-return-10507-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 40984 invoked from network); 1 Oct 2004 05:14:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Oct 2004 05:14:39 -0000
Received: (qmail 53271 invoked by uid 500); 1 Oct 2004 05:14:07 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 53242 invoked by uid 500); 1 Oct 2004 05:14:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 53227 invoked by uid 99); 1 Oct 2004 05:14:06 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of robinson.raju@gmail.com designates 64.233.170.203 as permitted sender)
Received: from [64.233.170.203] (HELO mproxy.gmail.com) (64.233.170.203)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 30 Sep 2004 22:14:06 -0700
Received: by mproxy.gmail.com with SMTP id v30so627222rnb
        for <lucene-user@jakarta.apache.org>; Thu, 30 Sep 2004 22:14:04 -0700 (PDT)
Received: by 10.38.8.80 with SMTP id 80mr629257rnh;
        Thu, 30 Sep 2004 22:14:04 -0700 (PDT)
Received: by 10.38.8.25 with HTTP; Thu, 30 Sep 2004 22:14:04 -0700 (PDT)
Message-ID: <d435703104093022141a9c5d6b@mail.gmail.com>
Date: Fri, 1 Oct 2004 10:44:04 +0530
From: Robinson Raju <robinson.raju@gmail.com>
Reply-To: Robinson Raju <robinson.raju@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: WildCardSearch
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi ,
 Would there be a problem if one enters space while using wildcards ?
say i search for 'abc' . i get 100 hits as results
'man' gives - 200
'abc man' gives 300
but
'ab* man'
'abc ma*'
ab* ma*'
ab* OR ma*
..
all of these return 0 results.
can we not enter space or do an OR search with two words one of which
has a wildcard ?

Regards,
Robin

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10508-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Oct 01 05:15:03 2004
Return-Path: <lucene-user-return-10508-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 41118 invoked from network); 1 Oct 2004 05:15:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Oct 2004 05:15:03 -0000
Received: (qmail 54546 invoked by uid 500); 1 Oct 2004 05:14:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 54522 invoked by uid 500); 1 Oct 2004 05:14:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 54508 invoked by uid 99); 1 Oct 2004 05:14:53 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [207.162.57.26] (HELO hercule.cirano.qc.ca) (207.162.57.26)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 30 Sep 2004 22:14:50 -0700
Received: from localhost (vauchers@localhost)
	by hercule.cirano.qc.ca (8.11.6/8.11.0) with ESMTP id i915El121666;
	Fri, 1 Oct 2004 01:14:47 -0400
X-Authentication-Warning: hercule.cirano.qc.ca: vauchers owned process doing -bs
Date: Fri, 1 Oct 2004 01:14:47 -0400 (EDT)
From: Stephane James Vaucher <vauchers@cirano.qc.ca>
To: Lucene Users List <lucene-user@jakarta.apache.org>,
   Chris Fraschetti <fraschetti@gmail.com>
Subject: Re: BooleanQuery - Too Many Clases on date range.
In-Reply-To: <cbdebdf804093018244fdaeb05@mail.gmail.com>
Message-ID: <Pine.LNX.4.33.0410010113430.16240-100000@hercule.cirano.qc.ca>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

How about a DateFilter?

http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/search/DateFilter.html

I don't believe it's got the same restrictions as boolean queries.

HTH,
sv

On Thu, 30 Sep 2004, Chris Fraschetti wrote:

> I recently read in regards to my problem that date_field:[0820483200
> TO 1104480000]
> is evluated into a series of boolean queries ... which has a cap of
> 1024 ... considering my documents will have dates spanning over many
> years, and i need the granualirity of 'by day' searching, are there
> any reccomendations on how to make this work?
>
> Currently with query: +content_field:sometext +date_field:[0820483200
> TO 1104480000]
> I get the following exception:
> org.apache.lucene.search.BooleanQuery$TooManyClauses
>
>
> any suggestions on how I can still keep the granuality of by day, but
> without limiting my search results? Are there any date formats that I
> can change those numbers to that would allow me to complete the search
> (i.e.  Feb, 15 2004 ) .. can lucene's range do a proper search on
> formatted dates?
>
> Is there a combination of RangeQuery and Query/MultiTermQuery that I can use?
>
> your help is greatly appreciated.
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10509-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Oct 01 06:06:16 2004
Return-Path: <lucene-user-return-10509-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 62228 invoked from network); 1 Oct 2004 06:06:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Oct 2004 06:06:16 -0000
Received: (qmail 4347 invoked by uid 500); 1 Oct 2004 06:06:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 4323 invoked by uid 500); 1 Oct 2004 06:06:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 4308 invoked by uid 99); 1 Oct 2004 06:06:07 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [207.162.57.26] (HELO hercule.cirano.qc.ca) (207.162.57.26)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 30 Sep 2004 23:06:07 -0700
Received: from localhost (vauchers@localhost)
	by hercule.cirano.qc.ca (8.11.6/8.11.0) with ESMTP id i91664K22044;
	Fri, 1 Oct 2004 02:06:04 -0400
X-Authentication-Warning: hercule.cirano.qc.ca: vauchers owned process doing -bs
Date: Fri, 1 Oct 2004 02:06:04 -0400 (EDT)
From: Stephane James Vaucher <vauchers@cirano.qc.ca>
To: Lucene Users List <lucene-user@jakarta.apache.org>,
   Robinson Raju <robinson.raju@gmail.com>
Subject: RE: WildCardQuery
In-Reply-To: <d4357031040930211760c5b5fd@mail.gmail.com>
Message-ID: <Pine.LNX.4.33.0410010156350.16240-100000@hercule.cirano.qc.ca>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Can you be a little more precise about how you process your documents?

1) What's your analyser? SimpleAnalyzer?
2) How do you parse the query? Out-of-the-box QueryParser?

> can we not enter space or do an OR search with two words one of which
> has a wildcard ?

Simple answer, yes.

Complicated answer, words are delimited by your tokeniser. That's included
in your analyser (hence my question above). The asterix syntax comes
from using a query parser that transforms the query into a PrefixQuery
object.

sv

On Fri, 1 Oct 2004, Robinson Raju w Hi ,
>    Would there be a problem if one enters space while using wildcards ?
> say i search for 'abc' . i get 100 hits as results
> 'man' gives - 200
> 'abc man' gives 300
> but
> 'ab* man'
> 'abc ma*'
> ab* ma*'
> ab* OR ma*
> ..
> all of these return 0 results.
> can we not enter space or do an OR search with two words one of which
> has a wildcard ?
>
> Regards,
> Robin
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10510-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Oct 01 08:31:44 2004
Return-Path: <lucene-user-return-10510-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 35029 invoked from network); 1 Oct 2004 08:31:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Oct 2004 08:31:43 -0000
Received: (qmail 74200 invoked by uid 500); 1 Oct 2004 08:31:15 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 74120 invoked by uid 500); 1 Oct 2004 08:31:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 73955 invoked by uid 99); 1 Oct 2004 08:31:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 01 Oct 2004 01:31:08 -0700
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id I4WDN300.A81 for <lucene-user@jakarta.apache.org>; Fri,
          1 Oct 2004 14:15:03 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: IndexHTML parser + Constructer
Date: Fri, 1 Oct 2004 14:08:31 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIGEDHCCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
In-Reply-To: <200409242117.29107@danielnaber.de>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N



Hi


Apologies .........

    Can Somebody Please tell me or  how to include  a constructer  within
'org.apache.lucene.demo.html.HtmlParser.java' ,
    So that using the Constructer read the String argument,Strips the HTML
Tags and returns the String with out Tags.
    Currently 'org.apache.lucene.demo.html.HtmlParser.java' method accepts
fullpath of the file and then reads
    the Content to Strip Tags......




Thx in Advance
Karthik


-----Original Message-----
From: Daniel Naber [mailto:daniel.naber@t-online.de]
Sent: Saturday, September 25, 2004 12:47 AM
To: Lucene Users List
Subject: Re: demo IndexHTML parser breaks unicode?


On Friday 24 September 2004 19:58, Fred Toth wrote:

> I've got unicode in my source HTML. In particular, within meta tags,
> and it's getting broken by the indexer. Note that I'm not trying to
> query on any of this, just store and retrieve document titles with
> unicode characters.

Please try again with the code from CVS, Christoph Goller committed a fix
for this problem (at least I think it was this problem) 1-3 weeks ago.

Regards
 Daniel

--
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10511-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Oct 01 10:37:19 2004
Return-Path: <lucene-user-return-10511-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 89753 invoked from network); 1 Oct 2004 10:37:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Oct 2004 10:37:18 -0000
Received: (qmail 40603 invoked by uid 500); 1 Oct 2004 10:36:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 40570 invoked by uid 500); 1 Oct 2004 10:36:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 40553 invoked by uid 99); 1 Oct 2004 10:36:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of robinson.raju@gmail.com designates 64.233.170.205 as permitted sender)
Received: from [64.233.170.205] (HELO mproxy.gmail.com) (64.233.170.205)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 01 Oct 2004 03:35:54 -0700
Received: by mproxy.gmail.com with SMTP id 80so2501869rnl
        for <lucene-user@jakarta.apache.org>; Fri, 01 Oct 2004 03:35:52 -0700 (PDT)
Received: by 10.38.206.80 with SMTP id d80mr802132rng;
        Fri, 01 Oct 2004 03:35:52 -0700 (PDT)
Received: by 10.38.8.25 with HTTP; Fri, 1 Oct 2004 03:35:52 -0700 (PDT)
Message-ID: <d435703104100103351b6ff5f4@mail.gmail.com>
Date: Fri, 1 Oct 2004 16:05:52 +0530
From: Robinson Raju <robinson.raju@gmail.com>
Reply-To: Robinson Raju <robinson.raju@gmail.com>
To: Stephane James Vaucher <vauchers@cirano.qc.ca>
Subject: Re: WildCardQuery
Cc: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <Pine.LNX.4.33.0410010156350.16240-100000@hercule.cirano.qc.ca>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <d4357031040930211760c5b5fd@mail.gmail.com>
	 <Pine.LNX.4.33.0410010156350.16240-100000@hercule.cirano.qc.ca>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

analyzer is StandardAnalyzer.
i use MultiFieldQueryParser to parse. 

The flow is this:
I have indexed a Database view. Now i need to search against a few columns
i take in the search criteria and search field , 
construct a wildcard query and add it to a boolean query

WildcardQuery wQuery = new WildcardQuery(new Term(searchFields[0],
                        searchString));
booleanQuery.add(wQuery, true, false);
Query queryfilter = MultiFieldQueryParser.parse(filterString,
                    filterFields, flags, analyzer);
hits = parallelMultiSearcher.search(booleanQuery,queryFilter);

when i dont use wild cards , it is taken as
+((ITM_SHRT_DSC:natal ITM_SHRT_DSC:tylenol) (ITM_LONG_DSC:natal
ITM_LONG_DSC:tylenol))
But when wildcard is used , it is taken as 
	+ITM_SHRT_DSC:nat* tylenol +ITM_LONG_DSC:nat* Tylenol

the first return around 300 records , the second , 0. 

any help would be appreciated
Thanks
Robin

On Fri, 1 Oct 2004 02:06:04 -0400 (EDT), Stephane James Vaucher
<vauchers@cirano.qc.ca> wrote:
> Can you be a little more precise about how you process your documents?
> 
> 1) What's your analyser? SimpleAnalyzer?
> 2) How do you parse the query? Out-of-the-box QueryParser?
> 
> > can we not enter space or do an OR search with two words one of which
> > has a wildcard ?
> 
> Simple answer, yes.
> 
> Complicated answer, words are delimited by your tokeniser. That's included
> in your analyser (hence my question above). The asterix syntax comes
> from using a query parser that transforms the query into a PrefixQuery
> object.
> 
> sv
> 
> On Fri, 1 Oct 2004, Robinson Raju w Hi ,
> 
> 
> >    Would there be a problem if one enters space while using wildcards ?
> > say i search for 'abc' . i get 100 hits as results
> > 'man' gives - 200
> > 'abc man' gives 300
> > but
> > 'ab* man'
> > 'abc ma*'
> > ab* ma*'
> > ab* OR ma*
> > ..
> > all of these return 0 results.
> > can we not enter space or do an OR search with two words one of which
> > has a wildcard ?
> >
> > Regards,
> > Robin
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> 
> 



-- 
Regards,
Robin
9886394650
"The merit of an action lies in finishing it to the end"

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10512-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Oct 01 12:58:29 2004
Return-Path: <lucene-user-return-10512-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 56530 invoked from network); 1 Oct 2004 12:58:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Oct 2004 12:58:28 -0000
Received: (qmail 67196 invoked by uid 500); 1 Oct 2004 12:57:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 66975 invoked by uid 500); 1 Oct 2004 12:57:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 66875 invoked by uid 99); 1 Oct 2004 12:57:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [63.240.76.166] (HELO sccimhc92.asp.att.net) (63.240.76.166)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 01 Oct 2004 05:57:08 -0700
Received: from [192.168.17.85] (gatekeeper.herff-jones.com[12.24.233.2])
          by sccimhc92.asp.att.net (sccimhc92) with SMTP
          id <20041001125704i92007ev9ve>
          (Authid: sganyo@insightbb.com);
          Fri, 1 Oct 2004 12:57:04 +0000
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <cbdebdf804093018244fdaeb05@mail.gmail.com>
References: <cbdebdf804093018244fdaeb05@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <82CA9C0A-13A9-11D9-8721-000A95D01A94@ganyo.com>
Content-Transfer-Encoding: 7bit
From: Scott Ganyo <scott@ganyo.com>
Subject: Re: BooleanQuery - Too Many Clases on date range.
Date: Fri, 1 Oct 2004 07:57:54 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

You can use:

BooleanQuery.setMaxClauseCount(int maxClauseCount);

to increase the limit.

On Sep 30, 2004, at 8:24 PM, Chris Fraschetti wrote:

> I recently read in regards to my problem that date_field:[0820483200
> TO 1104480000]
> is evluated into a series of boolean queries ... which has a cap of
> 1024 ... considering my documents will have dates spanning over many
> years, and i need the granualirity of 'by day' searching, are there
> any reccomendations on how to make this work?
>
> Currently with query: +content_field:sometext +date_field:[0820483200
> TO 1104480000]
> I get the following exception:
> org.apache.lucene.search.BooleanQuery$TooManyClauses
>
>
> any suggestions on how I can still keep the granuality of by day, but
> without limiting my search results? Are there any date formats that I
> can change those numbers to that would allow me to complete the search
> (i.e.  Feb, 15 2004 ) .. can lucene's range do a proper search on
> formatted dates?
>
> Is there a combination of RangeQuery and Query/MultiTermQuery that I 
> can use?
>
> your help is greatly appreciated.
>
>
> -- 
> ___________________________________________________
> Chris Fraschetti
> e fraschetti@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10513-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Oct 01 13:49:14 2004
Return-Path: <lucene-user-return-10513-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 1849 invoked from network); 1 Oct 2004 13:49:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Oct 2004 13:49:13 -0000
Received: (qmail 63465 invoked by uid 500); 1 Oct 2004 13:49:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 63373 invoked by uid 500); 1 Oct 2004 13:48:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 63358 invoked by uid 99); 1 Oct 2004 13:48:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [212.87.7.182] (HELO salix.caltha.pl) (212.87.7.182)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 01 Oct 2004 06:48:57 -0700
Received: from apium.caltha.pl (cnk246.neoplus.adsl.tpnet.pl [::ffff:83.31.164.246])
  (AUTH: LOGIN zwierzem, )
  by salix.caltha.pl with esmtp; Fri, 01 Oct 2004 15:48:52 +0200
Subject: Re: BooleanQuery - Too Many Clases on date range.
From: Damian Gajda <dgajda@caltha.pl>
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <82CA9C0A-13A9-11D9-8721-000A95D01A94@ganyo.com>
References: <cbdebdf804093018244fdaeb05@mail.gmail.com>
	 <82CA9C0A-13A9-11D9-8721-000A95D01A94@ganyo.com>
Content-Type: text/plain; charset=ISO-8859-2
Organization: Caltha Sp. j.
Date: Fri, 01 Oct 2004 15:48:36 +0200
Message-Id: <1096638516.15018.18.camel@apium>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.1 (2.0.1-2) 
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Dnia 01-10-2004, pi o godzinie 07:57 -0500, Scott Ganyo napisa(a):
> You can use:
> 
> BooleanQuery.setMaxClauseCount(int maxClauseCount);

I had a similar problem with date ranges. Someone on the list suggested
me a solution to my problems but it was more clever than the above
solution, which helps but makes the searches work slower and is memory
hungry (many terms are loaded into memmory, and than searched).

The solution suggested was to split dates into sub fields during
indexing and use those fields while searching. This makes it more
effective but harder to create a query (personally I prefer working on
queries build using Lucene API, than ones parsed by QueryParser).

For instance the time stamp 2004-10-01 15:34:26.001 may be split into
following fields:
<some-date>_year: 2004
<some-date>_month: 10
<some-date>_day: 01
<some-date>_time: 153426001

The above fields should be indexed so they can be searched. They give
some nice possibilities, for instance fast and easy querying for all
documents that have a date in a particular year, month or day of month.
For conveniece one could also store weekdays.

A query for a date range from 15th august to 10th october 2004 (in no
particular query language - this just gives an idea):
<some-date>_year = 2004 AND (
   (<some-date>_month = 08 AND <some-date>_day >= 15) OR
   (<some-date>_month=09) OR
   (<some-date>_month = 10 AND <some-date>_day <= 10)
)

As You can see it is easy to build such a query from the lucene API. The
equalities are Term queries. The inequalities are Range queries. The AND
and OR operators can be provided by usage of Boolean queries.

Have fun implementing the solution - it has only one disadvantage. It
makes results sorting not so easy. The solution for it is usage of
multiple sort fields, or another stored field containing a full date
(one almost surely will need to store a date for each hit, unless You
want to write some baroque code to calculate date from split fields
values).

Have fun,
-- 
Damian Gajda
Caltha Sp. j.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10514-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Oct 01 16:24:41 2004
Return-Path: <lucene-user-return-10514-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 24137 invoked from network); 1 Oct 2004 16:24:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Oct 2004 16:24:41 -0000
Received: (qmail 999 invoked by uid 500); 1 Oct 2004 16:24:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 938 invoked by uid 500); 1 Oct 2004 16:24:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 872 invoked by uid 99); 1 Oct 2004 16:24:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.65.202.3] (HELO contextmedia.com) (64.65.202.3)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 01 Oct 2004 09:24:26 -0700
Received: from ppeddi ([192.168.1.48]) by contextmedia.com ; Fri, 01 Oct 2004 12:23:46 -0400
Message-ID: <1f8c01c4a7d3$081505b0$aa87a8c0@ppeddi>
From: "Praveen Peddi" <ppeddi@contextmedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <9BF20741D07E824A9206E073EB6750E913FD81@exch2k3.widen.com> <1096464311.5589.2.camel@apium>
Subject: Re: Memory usage: IndexSearcher & Sort
Date: Fri, 1 Oct 2004 12:23:48 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="ISO-8859-2";
	reply-type=original
Content-Transfer-Encoding: 8bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Rcpt-To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello all,
is this patch going to be part of 1.4.2 release. If so, does anyone know 
when this release is due. I am currently using 1.4 final and wanted to 
migrate to 1.4.1. But after knowing that there is a memoryleak in 1.4.1 
sorting, I have decided to wait until the next release.

Praveen
----- Original Message ----- 
From: "Damian Gajda" <dgajda@caltha.pl>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Wednesday, September 29, 2004 9:25 AM
Subject: Re: Memory usage: IndexSearcher & Sort


>> Most helpful in this search was the following thread from Bugzilla:
>>
>> http://issues.apache.org/bugzilla/show_bug.cgi?id=30628
>> <http://issues.apache.org/bugzilla/show_bug.cgi?id=30628>
>>
>
> We had a similar problem in our webapp.
>
> Please look at the bug
> http://issues.apache.org/bugzilla/show_bug.cgi?id=31240
>
> My co-worker Rafa has fixed this bug and submitted a patch today.
>
> Have fun ;)
> -- 
> Damian Gajda
> Caltha Sp. j.
> Warszawa 02-807
> ul. Kukuki 2
> tel. +48 22 643 20 20
> mobile: +48 501 032 506
> http://www.caltha.pl/
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10515-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Oct 01 16:45:32 2004
Return-Path: <lucene-user-return-10515-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 38045 invoked from network); 1 Oct 2004 16:45:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Oct 2004 16:45:32 -0000
Received: (qmail 44172 invoked by uid 500); 1 Oct 2004 16:43:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 43984 invoked by uid 500); 1 Oct 2004 16:43:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 43924 invoked by uid 99); 1 Oct 2004 16:43:49 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [217.160.91.29] (HELO p15112568.pureserver.info) (217.160.91.29)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 01 Oct 2004 09:43:47 -0700
Received: from intrafind.de (ppp-82-135-5-64.mnet-online.de [82.135.5.64])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))
	(No client certificate requested)
	by p15112568.pureserver.info (Postfix) with ESMTP id C7F5214010F
	for <lucene-user@jakarta.apache.org>; Fri,  1 Oct 2004 18:43:43 +0200 (CEST)
Message-ID: <415D8938.4000206@intrafind.de>
Date: Fri, 01 Oct 2004 18:43:36 +0200
From: Bernhard Messer <Bernhard.Messer@intrafind.de>
User-Agent: Mozilla Thunderbird 0.5 (X11/20040208)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Memory usage: IndexSearcher & Sort
References: <9BF20741D07E824A9206E073EB6750E913FD81@exch2k3.widen.com> <1096464311.5589.2.camel@apium> <1f8c01c4a7d3$081505b0$aa87a8c0@ppeddi>
In-Reply-To: <1f8c01c4a7d3$081505b0$aa87a8c0@ppeddi>
Content-Type: text/plain; charset=ISO-8859-2; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

hi,

the memory leak patch will be included in release 1.4.2. The new release 
will be available at least on monday (Doug wrote this on the dev-list)

Bernhard

Praveen Peddi wrote:

> Hello all,
> is this patch going to be part of 1.4.2 release. If so, does anyone 
> know when this release is due. I am currently using 1.4 final and 
> wanted to migrate to 1.4.1. But after knowing that there is a 
> memoryleak in 1.4.1 sorting, I have decided to wait until the next 
> release.
>
> Praveen
> ----- Original Message ----- From: "Damian Gajda" <dgajda@caltha.pl>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Wednesday, September 29, 2004 9:25 AM
> Subject: Re: Memory usage: IndexSearcher & Sort
>
>
>>> Most helpful in this search was the following thread from Bugzilla:
>>>
>>> http://issues.apache.org/bugzilla/show_bug.cgi?id=30628
>>> <http://issues.apache.org/bugzilla/show_bug.cgi?id=30628>
>>>
>>
>> We had a similar problem in our webapp.
>>
>> Please look at the bug
>> http://issues.apache.org/bugzilla/show_bug.cgi?id=31240
>>
>> My co-worker Rafa has fixed this bug and submitted a patch today.
>>
>> Have fun ;)
>> -- 
>> Damian Gajda
>> Caltha Sp. j.
>> Warszawa 02-807
>> ul. Kukuki 2
>> tel. +48 22 643 20 20
>> mobile: +48 501 032 506
>> http://www.caltha.pl/
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10516-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Oct 01 19:01:56 2004
Return-Path: <lucene-user-return-10516-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 81602 invoked from network); 1 Oct 2004 19:01:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Oct 2004 19:01:56 -0000
Received: (qmail 54888 invoked by uid 500); 1 Oct 2004 19:01:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 54764 invoked by uid 500); 1 Oct 2004 19:01:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 54733 invoked by uid 99); 1 Oct 2004 19:01:29 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [146.197.27.40] (HELO barrierb241.nike.com) (146.197.27.40)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 01 Oct 2004 12:01:27 -0700
X-Server-Uuid: F122D6CD-24F0-4253-8986-549FB7942DF9
X-MimeOLE: Produced By Microsoft Exchange V6.0.6524.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Subject: removing duplicate Documents from Hits
Date: Fri, 1 Oct 2004 12:00:49 -0700
Message-ID: <200410011900.i91J0rFu023488@barrierb241.nike.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: removing duplicate Documents from Hits
Thread-Index: AcSn6PckrId8lIhFTk2GigJ6qI2MPQ==
From: "Timm, Andy (ETW)" <Andy.Timm@nike.com>
To: lucene-user@jakarta.apache.org
X-OriginalArrivalTime: 01 Oct 2004 19:00:49.0519 (UTC)
 FILETIME=[F73937F0:01C4A7E8]
X-WSS-ID: 6D4376EB303012-01-01
Content-Type: text/plain;
 charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello, I've searched on previous posts on this topic but couldn't find =
an answer.  I want to query my index (which are a number of 'flattened' =
Oracle tables) for some criteria, then return Hits such that there are =
no Documents that duplicate a particular field.  In the case where table =
A has a one-to-many relationship to table B, I get one Document for each =
(A1-B1, A1-B2, A1-B3...).  My index needs to have each of these records =
as 'B' is a searchable field in the index.  However, after the query is =
executed, I want my resulting Hits on be unique on 'A'.  I'm only =
returning the Oracle object ID, so once I've seen it once I don't need =
it again.  It looks like some sort of custom Filter is in order.  My fix =
at the moment is to run the query, then store unique id's in a Map to =
build another query that will return singletons on field 'A'.  I could =
skip this step if there was a way to remove documents from Hits (I =
didn't see a way).  Has anyone written a filter that does this?  Are =
there others using Lucene to mimic a relational DB?  I've got a complex =
SQL search that joins (most outer) 40 some tables.  Query performance is =
important, and the tables are relatively static.  I find the ID's of the =
objects that match the users' criteria, then go to the DB to instantiate =
them.  Any comments are appreciated. =20


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10517-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Oct 01 19:24:31 2004
Return-Path: <lucene-user-return-10517-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 3761 invoked from network); 1 Oct 2004 19:24:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Oct 2004 19:24:30 -0000
Received: (qmail 11388 invoked by uid 500); 1 Oct 2004 19:24:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 11271 invoked by uid 500); 1 Oct 2004 19:24:10 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 11170 invoked by uid 99); 1 Oct 2004 19:24:09 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 01 Oct 2004 12:24:08 -0700
Received: (qmail 35019 invoked by uid 89); 1 Oct 2004 19:23:45 -0000
Received: from unknown (HELO ?192.168.168.81?) (postmaster@cottrell-cutting.net@24.5.163.156)
  by londo.swishmail.com with AES256-SHA encrypted SMTP; 1 Oct 2004 19:23:45 -0000
Message-ID: <415DAE29.4080800@apache.org>
Date: Fri, 01 Oct 2004 12:21:13 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.2) Gecko/20040806
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: removing duplicate Documents from Hits
References: <200410011900.i91J0rFu023488@barrierb241.nike.com>
In-Reply-To: <200410011900.i91J0rFu023488@barrierb241.nike.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Timm, Andy (ETW) wrote:
> Hello, I've searched on previous posts on this topic but couldn't find an answer.  I want to query my index (which are a number of 'flattened' Oracle tables) for some criteria, then return Hits such that there are no Documents that duplicate a particular field.  In the case where table A has a one-to-many relationship to table B, I get one Document for each (A1-B1, A1-B2, A1-B3...).  My index needs to have each of these records as 'B' is a searchable field in the index.  However, after the query is executed, I want my resulting Hits on be unique on 'A'.  I'm only returning the Oracle object ID, so once I've seen it once I don't need it again.  It looks like some sort of custom Filter is in order.

I'd suggest a HitCollector that uses a FieldCache of the "A" values to 
check for duplicates, and collect only a the best document id for each 
value of "A".  This would use a bit of RAM, but be very fast.

http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/search/HitCollector.html
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/search/FieldCache.html

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


